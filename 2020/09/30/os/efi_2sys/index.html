<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Focusing on security of AI, and distributed AI."><title>é€šè¿‡åŒç³»ç»Ÿçœ‹ EFI | realyee's blog</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/blog/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"><script src="https://www.googletagmanager.com/gtag/js?id=G-HT3KXNPC43" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-HT3KXNPC43');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?' + '81692a5a3ea48096c98733a7d4bfef6b';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">é€šè¿‡åŒç³»ç»Ÿçœ‹ EFI</h1><a id="logo" href="/blog/.">realyee's blog</a><p class="description">Security and privacy of AI, and distributed AI, Cybersecurity</p></div><div id="nav-menu"><a class="current" href="/blog/."><i class="fa fa-home"> Home</i></a><a href="/blog/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/blog/tags/"><i class="fa fa-tag"> Tags</i></a><a href="/blog/history/"><i class="fa fa-book"> History</i></a><a href="/blog/cheatsheet/"><i class="fa fa-user"> Cheatsheet</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">é€šè¿‡åŒç³»ç»Ÿçœ‹ EFI</h1><div class="post-meta">2020-09-30<span> | </span><span class="category"><a href="/blog/categories/os/">os</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.8k</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 8</span><span class="post-meta-item-text"> Minutes</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E5%AF%B9-uefi-%E5%BD%B1%E5%93%8D"><span class="toc-number">1.</span> <span class="toc-text">å®‰è£…ç³»ç»Ÿå¯¹ UEFI å½±å“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">å¯åŠ¨è¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#uefi-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B"><span class="toc-number">2.1.</span> <span class="toc-text">UEFI å¯åŠ¨æµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%BC%95%E5%AF%BC%E6%B5%81%E7%A8%8B"><span class="toc-number">2.2.</span> <span class="toc-text">ç³»ç»Ÿå¼•å¯¼æµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%B8%8E%E7%8E%B0%E8%B1%A1"><span class="toc-number">3.</span> <span class="toc-text">æµ‹è¯•ä¸ç°è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#windows-%E5%8D%95%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.1.</span> <span class="toc-text">Windows å•ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#efi-%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.1.</span> <span class="toc-text">EFI ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8C%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.2.</span> <span class="toc-text">åŒç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#uefi-%E7%9A%84-boot-manager-%E7%95%8C%E9%9D%A2"><span class="toc-number">3.2.1.</span> <span class="toc-text">UEFI çš„ Boot Manager ç•Œé¢</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B-efi-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">3.2.2.</span> <span class="toc-text">æŸ¥çœ‹ EFI ç›®å½•ç»“æ„</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">4.</span> <span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol></div></div><div class="post-content"><h2 id="å®‰è£…ç³»ç»Ÿå¯¹-uefi-å½±å“">å®‰è£…ç³»ç»Ÿå¯¹ UEFI å½±å“</h2>
<p>Bootloader path for a permanently installed OS</p>
<p>When an operating system is installed permanently to a UEFI system,
there is one new step that absolutely did not exist on classic BIOS.
When installing the bootloader, four things are written to the NVRAM
memory that holds the firmware settings:</p>
<ul>
<li>Bootloader pathname on the EFI System Partition (ESP) that holds the
bootloader(s)</li>
<li>the GUID of the ESP partition</li>
<li>a descriptive (human-friendly) name for this particular bootloader
instance</li>
<li>optionally, some data for the bootloader</li>
</ul>
<p>For Windows, the standard UEFI pathname for the Windows boot process
will be <code>\EFI\Microsoft\Boot\bootmgfw.efi</code>, and the
descriptive name will be "Windows Boot Manager". The optional data seems
to contain a GUID reference to something within the Windows bootloader's
BCD configuration file.</p>
<p>For Ubuntu, the pathname should be
<code>\EFI\Ubuntu\grubx64.efi</code> if you don't need Secure Boot
support, or <code>\EFI\Ubuntu\shimx64.efi</code> if the Secure Boot shim
is used. The descriptive name is simply "ubuntu" and the optional data
is not used.</p>
<p>In Ubuntu, these UEFI NVRAM boot settings can be viewed using the
<code>sudo efibootmgr -v</code> command; in Windows, you can start a
Command Prompt <em>as Administrator</em> and then use the
<code>bcdedit /enum firmware</code> command to view the settings.</p>
<p>The UEFI specification has a standard convention that each vendor
should place the bootloader for a permanently installed OS within the
path <code>\EFI\&lt;vendor name&gt;</code> on the ESP, so having
multiple UEFI bootloaders co-exist on the same ESP is actually supported
and should make things easier than with classic BIOS that had a single
Master Boot Record per disk.</p>
<h2 id="å¯åŠ¨è¿‡ç¨‹">å¯åŠ¨è¿‡ç¨‹</h2>
<h3 id="uefi-å¯åŠ¨æµç¨‹">UEFI å¯åŠ¨æµç¨‹</h3>
<ol type="1">
<li><p>ç³»ç»Ÿå¼€æœº - ä¸Šç”µè‡ªæ£€ï¼ˆPower On Self Test æˆ– POSTï¼‰ã€‚</p></li>
<li><p>UEFI å›ºä»¶è¢«åŠ è½½ï¼Œå¹¶ç”±å®ƒåˆå§‹åŒ–å¯åŠ¨è¦ç”¨çš„ç¡¬ä»¶ã€‚</p></li>
<li><p>å›ºä»¶è¯»å–å…¶å¼•å¯¼ç®¡ç†å™¨ä»¥ç¡®å®šä»ä½•å¤„ï¼ˆæ¯”å¦‚ï¼Œä»å“ªä¸ªç¡¬ç›˜åŠåˆ†åŒºï¼‰åŠ è½½å“ªä¸ª
UEFI åº”ç”¨ã€‚</p>
<p>The EFI firmware has its own "boot menu", analogous to the menu
presented by GRUB but at an earlier stage in the boot process. Just as
GRUB lets you choose which Linux kernel to run, the EFI boot menu lets
you choose which EFI boot program to run â€” choices being things like
GRUB itself, or the Windows bootloader. (And, like GRUB's menu, the EFI
boot menu is typically not shown by default; you have to press a hotkey
during startup to see it.)</p>
<p>The firmewire check the configuration data that's stored in the
motherboard's NVRAM (the "BIOS settings" memory) for the entries in the
EFI boot menu which are what we see in UEFI boot manager.</p>
<p>These NVRAM boot entries are (typically) created by operating system
installers. When you install an OS and it places a bootloader file in
the EFI system partition, it also adds an entry to the NVRAM
configuration so that the new bootloader will be available in the EFI
boot menu. (In many cases, it also makes that new entry the default, so
that the OS you've just installed will boot on its own without you
needing to open the EFI boot menu and manually choose it.)</p>
<p>Each entry holds a human-readable name (to show in the menu) and a
path to a boot program in an EFI system partition, as well as a priority
number that determines which entry is booted by default when you don't
press the hotkey to see the menu.</p></li>
<li><p>å›ºä»¶æŒ‰ç…§å¼•å¯¼ç®¡ç†å™¨ä¸­çš„å¯åŠ¨é¡¹ç›®ï¼ŒåŠ è½½ UEFI åº”ç”¨ã€‚</p>
<ol type="1">
<li><p>å½“é€‰æ‹©ä»ç¡¬ç›˜å¯åŠ¨çš„æ—¶å€™ï¼Œä¸»æ¿ä¼šå»åŠ è½½ <code>\EFI\Boot</code>
æ–‡ä»¶å¤¹ä¸‹çš„ <code>bootx64.efi</code>ã€‚</p>
<p>è¿™é‡Œå¯ä»¥åšä¸¤ä¸ªå®éªŒï¼š</p>
<ol type="1">
<li><p>è®¾ç½® boot é»˜è®¤ä»ç¡¬ç›˜å¯åŠ¨</p>
<p>å°† <code>\EFI\Manjaro\grubx64.efi</code> å¤åˆ¶åˆ°
<code>\EFI\Boot</code> é‡å‘½åä¸º <code>bootx64.efi</code>ï¼Œå¼€æœºè¿›å…¥çš„æ˜¯
grub</p></li>
<li><p>è®¾ç½® boot é»˜è®¤ä»ç¡¬ç›˜å¯åŠ¨</p>
<p><code>\EFI\Microsoft\Boot\bootmgfw.efi</code> å¤åˆ¶åˆ°
<code>\EFI\Boot</code> é‡å‘½åä¸º <code>bootx64.efi</code>ï¼Œå¼€æœºè¿›å…¥çš„æ˜¯
windows</p></li>
</ol></li>
<li><p>å½“é€‰æ‹©ä» Windows å¯åŠ¨çš„æ—¶å€™ï¼Œä¸»æ¿ä¼šå»åŠ è½½
<code>\EFI\Microsoft\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„
<code>bootmgfw.efi</code>ã€‚</p>
<p>é€šè¿‡ <code>bootmgfw.efi</code> æ–‡ä»¶æ¥å¯¼å…¥è¯¥ç›®å½•ä¸‹ BCD æ–‡ä»¶ï¼Œç„¶å BCD
æ–‡ä»¶æ ¹æ®è‡ªèº«çš„é…ç½®å†…å®¹åŠ è½½ç³»ç»Ÿå¼•å¯¼æ–‡ä»¶ <code>winload.efi</code>(å¯¹æ¯”
legacy bios å¼•å¯¼å‘ç°ï¼ŒUEFI çš„å¼•å¯¼æ–‡ä»¶ <code>winload.efi</code>,è€Œ Legacy
çš„å¼•å¯¼æ–‡ä»¶ä¸º <code>winload.exe</code>)</p></li>
<li><p>å½“é€‰æ‹©ä» Manjaro å¯åŠ¨çš„æ—¶å€™ï¼Œä¸»æ¿ä¼šå»åŠ è½½
<code>\EFI\Manjaro</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>grubx64.efi</code>ï¼Œç„¶åè¿›å…¥
grubã€‚è€Œ grub
ä¹Ÿæ˜¯ä¸€ä¸ªå¯åŠ¨ç®¡ç†å™¨ï¼Œå®ƒä¼šæ‰«æå¹¶å‘ˆç°æœ¬æœºçš„å¯ç”¨å¯åŠ¨é¡¹ä¾›ä½ é€‰æ‹©ã€‚</p></li>
</ol></li>
<li><p>å·²å¯åŠ¨çš„ UEFI åº”ç”¨è¿˜å¯ä»¥å¯åŠ¨å…¶ä»–åº”ç”¨ï¼ˆå¯¹åº”äº UEFI shell æˆ– rEFInd
ä¹‹ç±»çš„å¼•å¯¼ç®¡ç†å™¨çš„æƒ…å†µï¼‰æˆ–è€…å¯åŠ¨å†…æ ¸åŠ initramfsï¼ˆå¯¹åº”äº GRUB
ä¹‹ç±»å¼•å¯¼å™¨çš„æƒ…å†µï¼‰ï¼Œè¿™å–å†³äº UEFI åº”ç”¨çš„é…ç½®ã€‚</p></li>
</ol>
<h3 id="ç³»ç»Ÿå¼•å¯¼æµç¨‹">ç³»ç»Ÿå¼•å¯¼æµç¨‹</h3>
<p>æˆåŠŸå¼•å¯¼ç³»ç»Ÿï¼Œéœ€è¦å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol type="1">
<li>UEFI å›ºä»¶æ­£å¸¸</li>
<li>UEFI å¯åŠ¨é¡¹å¯¹åº”æ­£ç¡®çš„ <code>*.efi</code> æ–‡ä»¶</li>
<li>EFI åˆ†åŒºå­˜åœ¨</li>
<li>å¼•å¯¼å™¨ï¼ˆ<code>*.efi</code>ï¼‰åŠå…¶é…ç½®æ–‡ä»¶æ­£å¸¸</li>
<li>æ“ä½œç³»ç»Ÿç›¸å…³æ–‡ä»¶æ­£å¸¸</li>
</ol>
<p>æ»¡è¶³è¿™äº›æ¡ä»¶åï¼Œç³»ç»Ÿå¯åŠ¨çš„è¿‡ç¨‹å¤§è‡´æ˜¯ï¼šUEFI æ ¹æ® BootOrder åŠ è½½ EFI
åˆ†åŒºä¸­çš„æŸä¸ªå¼•å¯¼å™¨(<code>grubx64.efi</code>)ï¼Œå¼•å¯¼å™¨åŠ è½½é…ç½®æ–‡ä»¶(<code>grub.cfg</code>)å‘ˆç°å¯åŠ¨èœå•(GRUB
èœå•)ï¼Œç”¨æˆ·é€‰æ‹©å¯åŠ¨é¡¹åå¼•å¯¼å™¨åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚</p>
<p>è£…å®ŒåŒç³»ç»Ÿä¹‹åï¼Œåœ¨ UEFI ç•Œé¢çš„ Boot Manager
é€‰é¡¹é‚£é‡Œä¹Ÿä¼šæ·»åŠ å¯¹åº”çš„å¯åŠ¨é¡¹ï¼Œå¦‚ä¹‹å‰çš„å›¾æ‰€ç¤ºã€‚</p>
<p>é€šè¿‡ easy uefi æŸ¥çœ‹è¿™äº›å¯åŠ¨é¡¹æŒ‡å‘çš„æ–‡ä»¶ï¼ˆHarddisk
é¡¹ä¸ºç©ºï¼Œå› æ­¤æ²¡æˆªå›¾ï¼‰ï¼š</p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200929155837.png"
alt="easy_uefi" />
<figcaption aria-hidden="true">easy_uefi</figcaption>
</figure>
<h2 id="æµ‹è¯•ä¸ç°è±¡">æµ‹è¯•ä¸ç°è±¡</h2>
<p>ä¸‹é¢é¦–å…ˆçœ‹ä¸€ä¸‹å•/åŒç³»ç»Ÿçš„ EFI
ç›®å½•ç»“æœä»¥åŠä¸€äº›ç°è±¡ï¼Œåé¢åœ¨å¯åŠ¨è¿‡ç¨‹è¯¦ç»†è®²è¿°å¦‚ä½•å¯åŠ¨ã€‚</p>
<h3 id="windows-å•ç³»ç»Ÿ">Windows å•ç³»ç»Ÿ</h3>
<p>Windows å¯åŠ¨è¿‡ç¨‹ä¸­æœ‰ä¸€è¡Œï¼š</p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200928213712.png"
alt="startup" />
<figcaption aria-hidden="true">startup</figcaption>
</figure>
<p>è¯´æ˜å®ƒæ˜¯æ ¹æ® <code>bootmgfw.efi</code> å¼•å¯¼çš„ã€‚</p>
<h4 id="efi-ç»“æ„">EFI ç»“æ„</h4>
<p>Boot æ˜¯è®¡ç®—æœºé»˜è®¤å¼•å¯¼æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼ŒMicrosoft æ˜¯å¾®è½¯ Windows
ç³»ç»Ÿå¼•å¯¼æ‰€åœ¨çš„ç›®å½•ã€‚<code>bootmgfw.efi</code> å°±æ˜¯ windows
é»˜è®¤çš„ç³»ç»Ÿå¼•å¯¼æ–‡ä»¶</p>
<p><code>\EFI\Boot</code> æ–‡ä»¶å¤¹ï¼š <img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200928211725.png"
alt="Boot" /></p>
<p><code>\EFI\Microsoft\Boot</code> æ–‡ä»¶å¤¹ï¼š <img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200928211833.png"
alt="Microsoft" /></p>
<p>å¯¹æ¯” <code>\EFI\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>bootx64.efi</code> ä¸
<code>\EFI\Microsoft\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>bootmgfw.efi</code> çš„
SHA1ï¼š</p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200928212106.png"
alt="sha1sum" />
<figcaption aria-hidden="true">sha1sum</figcaption>
</figure>
<p>å‘ç°äºŒè€…çš„ SHA1 å€¼ç›¸åŒã€‚</p>
<h3 id="åŒç³»ç»Ÿ">åŒç³»ç»Ÿ</h3>
<h4 id="uefi-çš„-boot-manager-ç•Œé¢">UEFI çš„ Boot Manager ç•Œé¢</h4>
<p>å®‰è£… Manjaro GNOME Linux ä¹‹åï¼ŒæŸ¥çœ‹ UEFI çš„ Boot Manager ç•Œé¢ï¼š</p>
<ol type="1">
<li><p>Manjaro å¯åŠ¨ä½¿ç”¨çš„æ˜¯<code>grubx64.efi</code> å¼•å¯¼</p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200929100448.png"
alt="Manjaro" />
<figcaption aria-hidden="true">Manjaro</figcaption>
</figure></li>
<li><p>Windows å¯åŠ¨ä½¿ç”¨ <code>bootmgfw.efi</code> å¼•å¯¼</p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200929100607.png"
alt="Windows" />
<figcaption aria-hidden="true">Windows</figcaption>
</figure></li>
<li><p>ç¡¬ç›˜å¯åŠ¨ï¼Œå‘ç°ä½¿ç”¨ Manjaro çš„ Grub ç•Œé¢</p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200929101035.png"
alt="harddisk" />
<figcaption aria-hidden="true">harddisk</figcaption>
</figure>
<p>ä»ç¡¬ç›˜å¯åŠ¨ï¼Œèµ°çš„æ˜¯
<code>\EFI\Boot\bootx64.efi</code>ï¼Œ<code>\EFI\Boot\bootx64.efi</code>
æŒ‡å‘å“ªä¸ªç³»ç»Ÿå°±èµ°å“ªä¸ªç³»ç»Ÿï¼ˆwin æˆ–è€…
Linuxï¼‰ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ä½ æŠŠå“ªä¸ªç³»ç»Ÿçš„å¼•å¯¼ï¼ˆ<code>bootmgfw.efi</code>æˆ–<code>grubx64.efi</code>ï¼‰å¤åˆ¶åˆ°è¿™é‡Œï¼Œé‡å‘½åä¸º<code>bootx64.efi</code>ï¼Œå®ƒå°±æ˜¯å¯¹åº”ç³»ç»Ÿçš„å¼•å¯¼ã€‚</p></li>
</ol>
<p>é€šè¿‡ DiskGenius æŸ¥çœ‹ä¸‰è€…çš„å¼•å¯¼ï¼š</p>
<p>å¯¹æ¯” <code>\EFI\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>bootx64.efi</code> ã€
<code>\EFI\Microsoft\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„
<code>bootmgfw.efi</code>ã€<code>\EFI\Manjaro</code> æ–‡ä»¶å¤¹ä¸‹çš„
<code>grubx64.efi</code>çš„ SHA1ï¼š</p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200929111326.png"
alt="sha1" />
<figcaption aria-hidden="true">sha1</figcaption>
</figure>
<p>å‘ç° <code>bootx64.efi</code> å’Œ <code>grubx64.efi</code> çš„ SHA1
å€¼ç›¸åŒã€‚</p>
<blockquote>
<p>è¡¥å……ï¼š æœ‰æ—¶å€™ä¼šçœ‹åˆ° shimx64.efiï¼Œ å®ƒæ˜¯ shim å¼•å¯¼ç¨‹åºï¼ˆshim
ç”¨äºå®‰å…¨å¯åŠ¨ Secure Bootï¼Œè°ƒç”¨ grubï¼‰ã€‚ä¸€èˆ¬å®‰è£… Linux çš„ç”µè„‘ä¼šå…³é—­
Secure Bootï¼Œè¿™æ · grubx64.efi å’Œ shimx64.efi å°±æ²¡ä»€ä¹ˆåŒºåˆ«äº†ã€‚</p>
</blockquote>
<h4 id="æŸ¥çœ‹-efi-ç›®å½•ç»“æ„">æŸ¥çœ‹ EFI ç›®å½•ç»“æ„</h4>
<ol type="1">
<li><p><code>\EFI\Booot</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200929163506.png"
alt="boot" />
<figcaption aria-hidden="true">boot</figcaption>
</figure></li>
<li><p><code>\EFI\Manjaro</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200929163543.png"
alt="manjaro" />
<figcaption aria-hidden="true">manjaro</figcaption>
</figure></li>
<li><p><code>\EFI\Microsoft\Boot</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/violetu/blogimages/master/20200929163623.png"
alt="Microsoft" />
<figcaption aria-hidden="true">Microsoft</figcaption>
</figure></li>
</ol>
<p>æ“ä½œç³»ç»Ÿå®‰è£…å™¨ä¼šåˆ›å»º <code>\EFI&lt;distro&gt;</code>
ç›®å½•ï¼ŒæŠŠå¼•å¯¼ç¨‹åº(<code>grubx64.efi</code>)æ”¾å…¥å…¶ä¸­ï¼Œç„¶ååœ¨ UEFI
å¯åŠ¨ç®¡ç†å™¨ä¸­åˆ›å»ºå…¥å£ç‚¹ï¼ˆå¼€æœºä¸åœæŒ‰ ESC é”®è¿›å…¥ UEFI ç®¡ç†é¢æ¿ï¼‰ã€‚</p>
<p>Windows å®‰è£…æ—¶ä¼šé¦–å…ˆåˆ›å»ºè‡ªå·±çš„ç›®å½•
<code>\EFI\Microsoft\Boot</code>ï¼Œå¹¶åœ¨é‡Œé¢æ”¾ç½®
<code>bootmgfw.efi</code>ï¼Œ ç„¶åå†æŠŠ <code>bootmgfw.efi</code> æ‹·ä¸€ä»½åˆ°
<code>\EFI\Boot</code> é‡Œå¹¶å‘½åæˆ
<code>bootx64.efi</code>ï¼Œè¿™æ ·ç³»ç»Ÿç¼ºçœå°±ä» windows å¯åŠ¨äº†ã€‚</p>
<p>å®‰è£… manjaro çš„æ—¶å€™, manjaro ä¹Ÿä¼šåˆ›å»º <code>\EFI\Manjaro</code>
ç›®å½•ï¼Œå¹¶æ”¾ä¸€ä¸ª <code>grubx64.efi</code>ï¼Œç„¶åå†æŠŠ
<code>grubx64.efi</code> æ‹·ä¸€ä»½åˆ° <code>\EFI\Boot</code> é‡Œå¹¶å‘½åæˆ
<code>bootx64.efi</code>ï¼Œå› æ­¤æˆ‘ä»¬å…ˆå®‰è£… Windows å†å®‰è£…
Manjaroï¼Œå¼€æœºå¯åŠ¨çœ‹åˆ°çš„ç›´æ¥å°±æ˜¯ grub ç•Œé¢ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<blockquote>
<ol type="1">
<li><a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/EFI_system_partition">EFI
system partition</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7821027cc455">Linux UEFI
ä¸å¤‡ä»½è¿˜åŸ(å¼•å¯¼ä¿®å¤)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/feipeng8848/p/10723661.html">EFI
ç³»ç»Ÿå¼•å¯¼çš„ä¸€äº›é›¶ç¢çŸ¥è¯†ç‚¹</a></li>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/li_qing_xue/article/details/79228867#commentBox">Win10+Ubuntu
åŒç³»ç»Ÿï¼šUEFI+GPT å’Œ Legacy+MBR å¼•å¯¼æ¨¡å¼</a></li>
<li><a
target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/160500/how-do-multiple-boot-loaders-work-on-an-efi-system-partition">How
do multiple boot loaders work on an EFI system partition</a></li>
</ol>
</blockquote>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/efi/" rel="tag">efi</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/os/" rel="tag">os</a></li></ul></div><div class="post-nav"><a class="pre" href="/blog/2020/09/30/os/efi/">EFI åˆè¯†</a><a class="next" href="/blog/2020/09/29/linux/manjaro/manjaro_install/">UEFI+GPT win+manjaro åŒç³»ç»Ÿå®‰è£…</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/" title=""><img class="nofancybox" src="/blog/img/avatar.png"/></a><p>What keeps me alive is my love for people and life and my desire to explore the unknown</p><a class="info-icon" href="mailto:findrealyee@outlook.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/realyee/" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Cryptography/">Cryptography</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Cryptography/math/">math</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Cryptography/zero-knowledge-proof/">zero-knowledge proof</a><span class="category-list-count">20</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Golang/">Golang</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/academic/">academic</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/blockchain/">blockchain</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/cplusplus/">cplusplus</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/go/">go</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/linux/">linux</a><span class="category-list-count">34</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/linux/git/">git</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/linux/macos/">macos</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/linux/tools/">tools</a><span class="category-list-count">12</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/misc/">misc</a><span class="category-list-count">16</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/misc/latex/">latex</a><span class="category-list-count">5</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/ml/">ml</a><span class="category-list-count">27</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/ml/rl/">rl</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/network/">network</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/os/">os</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/php/">php</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/probabilities/">probabilities</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/">python</a><span class="category-list-count">64</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/security-miscellaneous/">security miscellaneous</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/shell/">shell</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/utilities/">utilities</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/websec/">websec</a><span class="category-list-count">35</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/websec/cmd-execution/">cmd_execution</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/websec/file-upload/">file_upload</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/websec/logic-vuln/">logic_vuln</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/websec/sql-injection/">sql injection</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/websec/xss/">xss</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/wireshark/">wireshark</a><span class="category-list-count">7</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/blog/tags/academic/" style="font-size: 15px;">academic</a> <a href="/blog/tags/sci/" style="font-size: 15px;">sci</a> <a href="/blog/tags/jcr/" style="font-size: 15px;">jcr</a> <a href="/blog/tags/ml/" style="font-size: 15px;">ml</a> <a href="/blog/tags/cuda/" style="font-size: 15px;">cuda</a> <a href="/blog/tags/misc/" style="font-size: 15px;">misc</a> <a href="/blog/tags/vscode/" style="font-size: 15px;">vscode</a> <a href="/blog/tags/threat-intelligence/" style="font-size: 15px;">threat intelligence</a> <a href="/blog/tags/typing/" style="font-size: 15px;">typing</a> <a href="/blog/tags/distance/" style="font-size: 15px;">distance</a> <a href="/blog/tags/osi-sec/" style="font-size: 15px;">osi_sec</a> <a href="/blog/tags/smtp/" style="font-size: 15px;">smtp</a> <a href="/blog/tags/mail/" style="font-size: 15px;">mail</a> <a href="/blog/tags/Boot/" style="font-size: 15px;">Boot</a> <a href="/blog/tags/Computer/" style="font-size: 15px;">Computer</a> <a href="/blog/tags/FAT/" style="font-size: 15px;">FAT</a> <a href="/blog/tags/FDT/" style="font-size: 15px;">FDT</a> <a href="/blog/tags/os/" style="font-size: 15px;">os</a> <a href="/blog/tags/efi/" style="font-size: 15px;">efi</a> <a href="/blog/tags/Python/" style="font-size: 15px;">Python</a> <a href="/blog/tags/Tools/" style="font-size: 15px;">Tools</a> <a href="/blog/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" style="font-size: 15px;">ç½‘ç»œåè®®</a> <a href="/blog/tags/Wireshark%E5%8A%9F%E8%83%BD/" style="font-size: 15px;">WiresharkåŠŸèƒ½</a> <a href="/blog/tags/%E6%B8%97%E9%80%8F/" style="font-size: 15px;">æ¸—é€</a> <a href="/blog/tags/%E6%8A%93%E5%8C%85/" style="font-size: 15px;">æŠ“åŒ…</a> <a href="/blog/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">è®¡ç®—æœºç½‘ç»œ</a> <a href="/blog/tags/zkp/" style="font-size: 15px;">zkp</a> <a href="/blog/tags/circom/" style="font-size: 15px;">circom</a> <a href="/blog/tags/git/" style="font-size: 15px;">git</a> <a href="/blog/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/blog/tags/arch/" style="font-size: 15px;">arch</a> <a href="/blog/tags/manjaro/" style="font-size: 15px;">manjaro</a> <a href="/blog/tags/chmod/" style="font-size: 15px;">chmod</a> <a href="/blog/tags/ping/" style="font-size: 15px;">ping</a> <a href="/blog/tags/network/" style="font-size: 15px;">network</a> <a href="/blog/tags/find/" style="font-size: 15px;">find</a> <a href="/blog/tags/head/" style="font-size: 15px;">head</a> <a href="/blog/tags/tail/" style="font-size: 15px;">tail</a> <a href="/blog/tags/ioredirect/" style="font-size: 15px;">ioredirect</a> <a href="/blog/tags/pipe/" style="font-size: 15px;">pipe</a> <a href="/blog/tags/fd/" style="font-size: 15px;">fd</a> <a href="/blog/tags/iproute2/" style="font-size: 15px;">iproute2</a> <a href="/blog/tags/kill/" style="font-size: 15px;">kill</a> <a href="/blog/tags/hardlink/" style="font-size: 15px;">hardlink</a> <a href="/blog/tags/softlink/" style="font-size: 15px;">softlink</a> <a href="/blog/tags/netstat/" style="font-size: 15px;">netstat</a> <a href="/blog/tags/ss/" style="font-size: 15px;">ss</a> <a href="/blog/tags/lsof/" style="font-size: 15px;">lsof</a> <a href="/blog/tags/traceroute/" style="font-size: 15px;">traceroute</a> <a href="/blog/tags/vim/" style="font-size: 15px;">vim</a> <a href="/blog/tags/latex/" style="font-size: 15px;">latex</a> <a href="/blog/tags/CNN/" style="font-size: 15px;">CNN</a> <a href="/blog/tags/convolution/" style="font-size: 15px;">convolution</a> <a href="/blog/tags/CMake/" style="font-size: 15px;">CMake</a> <a href="/blog/tags/Make/" style="font-size: 15px;">Make</a> <a href="/blog/tags/php/" style="font-size: 15px;">php</a> <a href="/blog/tags/python/" style="font-size: 15px;">python</a> <a href="/blog/tags/re/" style="font-size: 15px;">re</a> <a href="/blog/tags/Regexp/" style="font-size: 15px;">Regexp</a> <a href="/blog/tags/shell/" style="font-size: 15px;">shell</a> <a href="/blog/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/blog/tags/pseudo-static/" style="font-size: 15px;">pseudo static</a> <a href="/blog/tags/sql-injection/" style="font-size: 15px;">sql injection</a> <a href="/blog/tags/XSS/" style="font-size: 15px;">XSS</a> <a href="/blog/tags/collection/" style="font-size: 15px;">collection</a> <a href="/blog/tags/collections/" style="font-size: 15px;">collections</a> <a href="/blog/tags/comprehensions/" style="font-size: 15px;">comprehensions</a> <a href="/blog/tags/fun/" style="font-size: 15px;">fun</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2023/09/18/ml/wasserstein_dist/">Delve into Wasserstein Distance, principles and implementation analysis</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2023/09/17/math/probabilities/wasserstein_bg/">Probabilities background for Wasserstein Distance</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2023/08/11/academic/papers/ldp_location/">L-SRR Local Differential Privacy for Location-Based Services with Staircase Randomized Response</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2023/08/10/academic/papers/ldp_byz_fl/">Practical Differentially Private and Byzantine-resilient Federated Learning</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2023/08/04/academic/papers/fedrecover/">FedRecover è®ºæ–‡é˜…è¯»ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2023/08/04/academic/papers/flcert/">FLCert Provably Secure Federated Learning against Poisoning Attacks è®ºæ–‡é˜…è¯»ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2023/08/04/academic/papers/fltrust/">FLTrust Byzantine-robust Federated Learning via Trust Bootstrapping è®ºæ–‡é˜…è¯»ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2023/05/30/crypto/zk/specific2program/">zk with programmability</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2023/04/30/crypto/zk/great_resource/">zk èµ„æ–™æ±‡æ€»</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2023/04/16/misc/latex/latex_grammars/">å¸¸ç”¨ LaTeX è¯­æ³•æ€»ç»“</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://snowolf0620.xyz/" title="snowolf0620" target="_blank">snowolf0620</a><ul></ul><a href="https://space.keter.top/" title="Sonder" target="_blank">Sonder</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2024 <a href="/blog/." rel="nofollow">realyee's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/blog/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/blog/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/blog/css/search.css?v=1.0.0"><script type="text/javascript" src="/blog/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/blog/js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/blog/css/copycode.css?v=1.0.0"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=1.0.0"></script></div></body></html>